(()=>{"use strict";var e,p={},b={};function t(e){var f=b[e];if(void 0!==f)return f.exports;var r=b[e]={id:e,loaded:!1,exports:{}};return p[e].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}t.m=p,e=[],t.O=(f,r,a,o)=>{if(!r){var c=1/0;for(n=0;n<e.length;n++){for(var[r,a,o]=e[n],l=!0,i=0;i<r.length;i++)(!1&o||c>=o)&&Object.keys(t.O).every(h=>t.O[h](r[i]))?r.splice(i--,1):(l=!1,o<c&&(c=o));if(l){e.splice(n--,1);var s=a();void 0!==s&&(f=s)}}return f}o=o||0;for(var n=e.length;n>0&&e[n-1][2]>o;n--)e[n]=e[n-1];e[n]=[r,a,o]},t.n=e=>{var f=e&&e.__esModule?()=>e.default:()=>e;return t.d(f,{a:f}),f},(()=>{var f,e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__;t.t=function(r,a){if(1&a&&(r=this(r)),8&a||"object"==typeof r&&r&&(4&a&&r.__esModule||16&a&&"function"==typeof r.then))return r;var o=Object.create(null);t.r(o);var n={};f=f||[null,e({}),e([]),e(e)];for(var c=2&a&&r;"object"==typeof c&&!~f.indexOf(c);c=e(c))Object.getOwnPropertyNames(c).forEach(l=>n[l]=()=>r[l]);return n.default=()=>r,t.d(o,n),o}})(),t.d=(e,f)=>{for(var r in f)t.o(f,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:f[r]})},t.o=(e,f)=>Object.prototype.hasOwnProperty.call(e,f),t.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};t.O.j=a=>0===e[a];var f=(a,o)=>{var i,s,[n,c,l]=o,_=0;if(n.some(u=>0!==e[u])){for(i in c)t.o(c,i)&&(t.m[i]=c[i]);if(l)var d=l(t)}for(a&&a(o);_<n.length;_++)t.o(e,s=n[_])&&e[s]&&e[s][0](),e[s]=0;return t.O(d)},r=self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[];r.forEach(f.bind(null,0)),r.push=f.bind(null,r.push.bind(r))})()})();
(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[429],{2978:(W,ye,Me)=>{"use strict";Me(8332),Me(894),Me(9187)},9187:()=>{!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const W=HTMLElement;window.HTMLElement=function(){return Reflect.construct(W,[],this.constructor)},HTMLElement.prototype=W.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,W)}()}()},894:()=>{!function(W,ye){"use strict";function Me(){var n=Je.splice(0,Je.length);for(N=0;n.length;)n.shift().call(null,n.shift())}function xe(n,o){for(var l=0,f=n.length;l<f;l++)Ze(n[l],o)}function Ue(n){return function(o){Pe(o)&&(Ze(o,n),r.length&&xe(o.querySelectorAll(r),n))}}function Ge(n){var o=t.call(n,"is"),l=n.nodeName.toUpperCase(),f=s.call(Be,o?Ie+o.toUpperCase():Ve+l);return o&&-1<f&&!We(l,o)?-1:f}function We(n,o){return-1<r.indexOf(n+'[is="'+o+'"]')}function Xe(n){var o=n.currentTarget,l=n.attrChange,f=n.attrName,T=n.target,w=n[tt]||2,H=n[at]||3;!J||T&&T!==o||!o[He]||"style"===f||n.prevValue===n.newValue&&(""!==n.newValue||l!==w&&l!==H)||o[He](f,l===w?null:n.prevValue,l===H?null:n.newValue)}function Oe(n){var o=Ue(n);return function(l){Je.push(o,l.target),N&&clearTimeout(N),N=setTimeout(Me,1)}}function Le(n){Q&&(Q=!1,n.currentTarget.removeEventListener(_t,Le)),r.length&&xe((n.target||U).querySelectorAll(r),n.detail===Ce?Ce:Se),oe&&function K(){for(var n,o=0,l=Te.length;o<l;o++)i.contains(n=Te[o])||(l--,Te.splice(o--,1),Ze(n,Ce))}()}function ze(n,o){var l=this;G.call(l,n,o),it.call(l,{target:l})}function nt(n,o,l){var f=o.apply(n,l),T=Ge(f);return-1<T&&be(f,e[T]),l.pop()&&r.length&&function ft(n){for(var o,l=0,f=n.length;l<f;l++)be(o=n[l],e[Ge(o)])}(f.querySelectorAll(r)),f}function Ye(n,o){B(n,o),je?je.observe(n,E):(A&&(n.setAttribute=ze,n[Re]=ke(n),n[ve](yt,it)),n[ve](Ae,Xe)),n[et]&&J&&(n.created=!0,n[et](),n.created=!1)}function Ke(n){throw new Error("A "+n+" type is already registered")}function Ze(n,o){var l,f,T=Ge(n);-1<T&&!y.call(n,"TEMPLATE")&&(ct(n,e[T]),T=0,o!==Se||n[Se]?o!==Ce||n[Ce]||(n[Se]=!1,n[Ce]=!0,f="disconnected",T=1):(n[Ce]=!1,n[Se]=!0,f="connected",T=1,oe&&s.call(Te,n)<0&&Te.push(n)),T&&(l=n[o+me]||n[f+me])&&l.call(n))}function fe(){}function ht(n,o,l){var f=l&&l[qe]||"",T=o.prototype,w=_(T),H=o.observedAttributes||D,ee={prototype:w};se(w,et,{value:function(){if(Y)Y=!1;else if(!this[X]){this[X]=!0,new o(this),T[et]&&T[et].call(this);var x=ae[v.get(o)];(!re||x.create.length>1)&&lt(this)}}}),se(w,He,{value:function(x){-1<s.call(H,x)&&T[He]&&T[He].apply(this,arguments)}}),T[Tt]&&se(w,Et,{value:T[Tt]}),T[ut]&&se(w,pt,{value:T[ut]}),f&&(ee[qe]=f),n=n.toUpperCase(),ae[n]={constructor:o,create:f?[f,$(n)]:[n]},v.set(o,n),U[Fe](n.toLowerCase(),ee),ot(n),V[n].r()}function rt(n){var o=ae[n.toUpperCase()];return o&&o.constructor}function dt(n){return"string"==typeof n?n:n&&n.is||""}function lt(n){for(var o,l=n[He],f=l?n.attributes:D,T=f.length;T--;)l.call(n,(o=f[T]).name||o.nodeName,null,o.value||o.nodeValue)}function ot(n){return(n=n.toUpperCase())in V||(V[n]={},V[n].p=new Ee(function(o){V[n].r=o})),V[n].p}function $e(){ce&&delete W.customElements,p(W,"customElements",{configurable:!0,value:new fe}),p(W,"CustomElementRegistry",{configurable:!0,value:fe});for(var n=st.get(/^HTML[A-Z]*[a-z]/),o=n.length;o--;function(l){var f=W[l];if(f){W[l]=function(T){var w,H;return T||(T=this),T[X]||(Y=!0,w=ae[v.get(T.constructor)],(T=(H=re&&1===w.create.length)?Reflect.construct(f,D,w.constructor):U.createElement.apply(U,w.create))[X]=!0,Y=!1,H||lt(T)),T},W[l].prototype=f.prototype;try{f.prototype.constructor=W[l]}catch{p(f,X,{value:W[l]})}}}(n[o]));U.createElement=function(l,f){var T=dt(f);return T?c.call(this,l,$(T)):c.call(this,l)},L||(Z=!0,U[Fe](""))}var U=W.document,ge=W.Object,st=function(n){var o,l,f,T,w=/^[A-Z]+[a-z]/,ee=function(he,ue){(ue=ue.toLowerCase())in x||(x[he]=(x[he]||[]).concat(ue),x[ue]=x[ue.toUpperCase()]=he)},x=(ge.create||ge)(null),ne={};for(l in n)for(T in n[l])for(x[T]=f=n[l][T],o=0;o<f.length;o++)x[f[o].toLowerCase()]=x[f[o].toUpperCase()]=T;return ne.get=function(he){return"string"==typeof he?x[he]||(w.test(he)?[]:""):function(he){var ue,de=[];for(ue in x)he.test(ue)&&de.push(ue);return de}(he)},ne.set=function(he,ue){return w.test(he)?ee(he,ue):ee(ue,he),ne},ne}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof ye&&(ye={type:ye||"auto"});var Je,it,Qe,ke,je,we,ct,be,Ne,n,o,l,f,T,Fe="registerElement",mt=1e5*W.Math.random()>>0,Re="__"+Fe+mt,ve="addEventListener",Se="attached",me="Callback",Ce="detached",qe="extends",He="attributeChanged"+me,Et=Se+me,Tt="connected"+me,ut="disconnected"+me,et="created"+me,pt=Ce+me,tt="ADDITION",at="REMOVAL",Ae="DOMAttrModified",_t="DOMContentLoaded",yt="DOMSubtreeModified",Ve="<",Ie="=",gt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,vt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Be=[],e=[],r="",i=U.documentElement,s=Be.indexOf||function(n){for(var o=this.length;o--&&this[o]!==n;);return o},a=ge.prototype,d=a.hasOwnProperty,k=a.isPrototypeOf,p=ge.defineProperty,D=[],P=ge.getOwnPropertyDescriptor,M=ge.getOwnPropertyNames,q=ge.getPrototypeOf,j=ge.setPrototypeOf,F=!!ge.__proto__,X="__dreCEv1",ce=W.customElements,re=!/^force/.test(ye.type)&&!!(ce&&ce.define&&ce.get&&ce.whenDefined),S=ge.create||ge,b=W.Map||function(){var n,o=[],l=[];return{get:function(f){return l[s.call(o,f)]},set:function(f,T){(n=s.call(o,f))<0?l[o.push(f)-1]=T:l[n]=T}}},Ee=W.Promise||function(n){function o(w){for(f=!0;l.length;)l.shift()(w)}var l=[],f=!1,T={catch:function(){return T},then:function(w){return l.push(w),f&&setTimeout(o,1),T}};return n(o),T},Y=!1,ae=S(null),V=S(null),v=new b,$=function(n){return n.toLowerCase()},_=ge.create||function n(o){return o?(n.prototype=o,new n):this},B=j||(F?function(n,o){return n.__proto__=o,n}:M&&P?function(){function n(o,l){for(var f,T=M(l),w=0,H=T.length;w<H;w++)d.call(o,f=T[w])||p(o,f,P(l,f))}return function(o,l){do{n(o,l)}while((l=q(l))&&!k.call(l,o));return o}}():function(n,o){for(var l in o)n[l]=o[l];return n}),O=W.MutationObserver||W.WebKitMutationObserver,pe=W.HTMLAnchorElement,te=(W.HTMLElement||W.Element||W.Node).prototype,oe=!k.call(te,i),se=oe?function(n,o,l){return n[o]=l.value,n}:p,Pe=oe?function(n){return 1===n.nodeType}:function(n){return k.call(te,n)},Te=oe&&[],le=te.attachShadow,z=te.cloneNode,y=te.closest||function(n){for(var o=this;o&&o.nodeName!==n;)o=o.parentNode;return o},u=te.dispatchEvent,t=te.getAttribute,g=te.hasAttribute,R=te.removeAttribute,G=te.setAttribute,h=U.createElement,m=U.importNode,c=h,E=O&&{attributes:!0,characterData:!0,attributeOldValue:!0},C=O||function(n){A=!1,i.removeEventListener(Ae,C)},N=0,L=Fe in U&&!/^force-all/.test(ye.type),I=!0,Z=!1,A=!0,Q=!0,J=!0;if(O&&((Ne=U.createElement("div")).innerHTML="<div><div></div></div>",new O(function(n,o){if(n[0]&&"childList"==n[0].type&&!n[0].removedNodes[0].childNodes.length){var l=(Ne=P(te,"innerHTML"))&&Ne.set;l&&p(te,"innerHTML",{set:function(f){for(;this.lastChild;)this.removeChild(this.lastChild);l.call(this,f)}})}o.disconnect(),Ne=null}).observe(Ne,{childList:!0,subtree:!0}),Ne.innerHTML=""),L||(j||F?(ct=function(n,o){k.call(o,n)||Ye(n,o)},be=Ye):(ct=function(n,o){n[Re]||(n[Re]=ge(!0),Ye(n,o))},be=ct),oe?(A=!1,n=P(te,ve),o=n.value,l=function(w){var H=new CustomEvent(Ae,{bubbles:!0});H.attrName=w,H.prevValue=t.call(this,w),H.newValue=null,H[at]=H.attrChange=2,R.call(this,w),u.call(this,H)},f=function(w,H){var ee=g.call(this,w),x=ee&&t.call(this,w),ne=new CustomEvent(Ae,{bubbles:!0});G.call(this,w,H),ne.attrName=w,ne.prevValue=ee?x:null,ne.newValue=H,ee?ne.MODIFICATION=ne.attrChange=1:ne[tt]=ne.attrChange=0,u.call(this,ne)},T=function(w){var H,ee=w.currentTarget,x=ee[Re],ne=w.propertyName;x.hasOwnProperty(ne)&&(x=x[ne],(H=new CustomEvent(Ae,{bubbles:!0})).attrName=x.name,H.prevValue=x.value||null,H.newValue=x.value=ee[ne]||null,null==H.prevValue?H[tt]=H.attrChange=0:H.MODIFICATION=H.attrChange=1,u.call(ee,H))},n.value=function(w,H,ee){w===Ae&&this[He]&&this.setAttribute!==f&&(this[Re]={className:{name:"class",value:this.className}},this.setAttribute=f,this.removeAttribute=l,o.call(this,"propertychange",T)),o.call(this,w,H,ee)},p(te,ve,n)):O||(i[ve](Ae,C),i.setAttribute(Re,1),i.removeAttribute(Re),A&&(it=function(n){var o,l,f,T=this;if(T===n.target){for(f in o=T[Re],T[Re]=l=ke(T),l){if(!(f in o))return Qe(0,T,f,o[f],l[f],tt);if(l[f]!==o[f])return Qe(1,T,f,o[f],l[f],"MODIFICATION")}for(f in o)if(!(f in l))return Qe(2,T,f,o[f],l[f],at)}},Qe=function(n,o,l,f,T,w){var H={attrChange:n,currentTarget:o,attrName:l,prevValue:f,newValue:T};H[w]=n,Xe(H)},ke=function(n){for(var o,l,f={},T=n.attributes,w=0,H=T.length;w<H;w++)"setAttribute"!==(l=(o=T[w]).name)&&(f[l]=o.value);return f})),U[Fe]=function(n,o){if(l=n.toUpperCase(),I&&(I=!1,O?(je=function(x,ne){function he(ue,de){for(var _e=0,De=ue.length;_e<De;de(ue[_e++]));}return new O(function(ue){for(var de,_e,De,kt=0,bt=ue.length;kt<bt;kt++)"childList"===(de=ue[kt]).type?(he(de.addedNodes,x),he(de.removedNodes,ne)):(_e=de.target,J&&_e[He]&&"style"!==de.attributeName&&(De=t.call(_e,de.attributeName))!==de.oldValue&&_e[He](de.attributeName,de.oldValue,De))})}(Ue(Se),Ue(Ce)),(we=function(x){return je.observe(x,{childList:!0,subtree:!0}),x})(U),le&&(te.attachShadow=function(){return we(le.apply(this,arguments))})):(Je=[],U[ve]("DOMNodeInserted",Oe(Se)),U[ve]("DOMNodeRemoved",Oe(Ce))),U[ve](_t,Le),U[ve]("readystatechange",Le),U.importNode=function(x,ne){switch(x.nodeType){case 1:return nt(U,m,[x,!!ne]);case 11:for(var he=U.createDocumentFragment(),ue=x.childNodes,de=ue.length,_e=0;_e<de;_e++)he.appendChild(U.importNode(ue[_e],!!ne));return he;default:return z.call(x,!!ne)}},te.cloneNode=function(x){return nt(this,z,[!!x])}),Z)return Z=!1;if(-2<s.call(Be,Ie+l)+s.call(Be,Ve+l)&&Ke(n),!gt.test(l)||-1<s.call(vt,l))throw new Error("The type "+n+" is invalid");var l,f,T=function(){return H?U.createElement(ee,l):U.createElement(ee)},w=o||a,H=d.call(w,qe),ee=H?o[qe].toUpperCase():l;return H&&-1<s.call(Be,Ve+ee)&&Ke(ee),f=Be.push((H?Ie:Ve)+l)-1,r=r.concat(r.length?",":"",H?ee+'[is="'+n.toLowerCase()+'"]':ee),T.prototype=e[f]=d.call(w,"prototype")?w.prototype:_(te),r.length&&xe(U.querySelectorAll(r),Se),T},U.createElement=c=function(n,o){var l=dt(o),f=l?h.call(U,n,$(l)):h.call(U,n),T=""+n,w=s.call(Be,(l?Ie:Ve)+(l||T).toUpperCase()),H=-1<w;return l&&(f.setAttribute("is",l=l.toLowerCase()),H&&(H=We(T.toUpperCase(),l))),J=!U.createElement.innerHTMLHelper,H&&be(f,e[w]),f}),addEventListener("beforeunload",function(){delete U.createElement,delete U.importNode,delete U[Fe]},!1),fe.prototype={constructor:fe,define:re?function(n,o,l){if(l)ht(n,o,l);else{var f=n.toUpperCase();ae[f]={constructor:o,create:[f]},v.set(o,f),ce.define(n,o)}}:ht,get:re?function(n){return ce.get(n)||rt(n)}:rt,whenDefined:re?function(n){return Ee.race([ce.whenDefined(n),ot(n)])}:ot},!ce||/^force/.test(ye.type))$e();else if(!ye.noBuiltIn)try{!function(n,o,l){var f=new RegExp("^<a\\s+is=('|\")"+l+"\\1></a>$");if(o[qe]="a",(n.prototype=_(pe.prototype)).constructor=n,W.customElements.define(l,n,o),!f.test(U.createElement("a",{is:l}).outerHTML)||!f.test((new n).outerHTML))throw o}(function n(){return Reflect.construct(pe,[],n)},{},"document-register-element-a"+mt)}catch{$e()}if(!ye.noBuiltIn)try{if(h.call(U,"a","a").outerHTML.indexOf("is")<0)throw{}}catch{$=function(o){return{is:o.toLowerCase()}}}}(window)},8332:()=>{"use strict";!function(e){const r=e.performance;function i(z){r&&r.mark&&r.mark(z)}function s(z,y){r&&r.measure&&r.measure(z,y)}i("Zone");const a=e.__Zone_symbol_prefix||"__zone_symbol__";function d(z){return a+z}const k=!0===e[d("forceDuplicateZoneCheck")];if(e.Zone){if(k||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let p=(()=>{class y{static assertZonePatched(){if(e.Promise!==te.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=y.current;for(;t.parent;)t=t.parent;return t}static get current(){return se.zone}static get currentTask(){return Pe}static __load_patch(t,g,R=!1){if(te.hasOwnProperty(t)){if(!R&&k)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const G="Zone:"+t;i(G),te[t]=g(e,y,oe),s(G,G)}}get parent(){return this._parent}get name(){return this._name}constructor(t,g){this._parent=t,this._name=g?g.name||"unnamed":"<root>",this._properties=g&&g.properties||{},this._zoneDelegate=new P(this,this._parent&&this._parent._zoneDelegate,g)}get(t){const g=this.getZoneWith(t);if(g)return g._properties[t]}getZoneWith(t){let g=this;for(;g;){if(g._properties.hasOwnProperty(t))return g;g=g._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,g){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const R=this._zoneDelegate.intercept(this,t,g),G=this;return function(){return G.runGuarded(R,this,arguments,g)}}run(t,g,R,G){se={parent:se,zone:this};try{return this._zoneDelegate.invoke(this,t,g,R,G)}finally{se=se.parent}}runGuarded(t,g=null,R,G){se={parent:se,zone:this};try{try{return this._zoneDelegate.invoke(this,t,g,R,G)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{se=se.parent}}runTask(t,g,R){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||Ee).name+"; Execution: "+this.name+")");if(t.state===Y&&(t.type===pe||t.type===O))return;const G=t.state!=v;G&&t._transitionTo(v,V),t.runCount++;const h=Pe;Pe=t,se={parent:se,zone:this};try{t.type==O&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,g,R)}catch(m){if(this._zoneDelegate.handleError(this,m))throw m}}finally{t.state!==Y&&t.state!==_&&(t.type==pe||t.data&&t.data.isPeriodic?G&&t._transitionTo(V,v):(t.runCount=0,this._updateTaskCount(t,-1),G&&t._transitionTo(Y,v,Y))),se=se.parent,Pe=h}}scheduleTask(t){if(t.zone&&t.zone!==this){let R=this;for(;R;){if(R===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);R=R.parent}}t._transitionTo(ae,Y);const g=[];t._zoneDelegates=g,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(R){throw t._transitionTo(_,ae,Y),this._zoneDelegate.handleError(this,R),R}return t._zoneDelegates===g&&this._updateTaskCount(t,1),t.state==ae&&t._transitionTo(V,ae),t}scheduleMicroTask(t,g,R,G){return this.scheduleTask(new M(B,t,g,R,G,void 0))}scheduleMacroTask(t,g,R,G,h){return this.scheduleTask(new M(O,t,g,R,G,h))}scheduleEventTask(t,g,R,G,h){return this.scheduleTask(new M(pe,t,g,R,G,h))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||Ee).name+"; Execution: "+this.name+")");if(t.state===V||t.state===v){t._transitionTo($,V,v);try{this._zoneDelegate.cancelTask(this,t)}catch(g){throw t._transitionTo(_,$),this._zoneDelegate.handleError(this,g),g}return this._updateTaskCount(t,-1),t._transitionTo(Y,$),t.runCount=0,t}}_updateTaskCount(t,g){const R=t._zoneDelegates;-1==g&&(t._zoneDelegates=null);for(let G=0;G<R.length;G++)R[G]._updateTaskCount(t.type,g)}}return y.__symbol__=d,y})();const D={name:"",onHasTask:(z,y,u,t)=>z.hasTask(u,t),onScheduleTask:(z,y,u,t)=>z.scheduleTask(u,t),onInvokeTask:(z,y,u,t,g,R)=>z.invokeTask(u,t,g,R),onCancelTask:(z,y,u,t)=>z.cancelTask(u,t)};class P{constructor(y,u,t){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=y,this._parentDelegate=u,this._forkZS=t&&(t&&t.onFork?t:u._forkZS),this._forkDlgt=t&&(t.onFork?u:u._forkDlgt),this._forkCurrZone=t&&(t.onFork?this.zone:u._forkCurrZone),this._interceptZS=t&&(t.onIntercept?t:u._interceptZS),this._interceptDlgt=t&&(t.onIntercept?u:u._interceptDlgt),this._interceptCurrZone=t&&(t.onIntercept?this.zone:u._interceptCurrZone),this._invokeZS=t&&(t.onInvoke?t:u._invokeZS),this._invokeDlgt=t&&(t.onInvoke?u:u._invokeDlgt),this._invokeCurrZone=t&&(t.onInvoke?this.zone:u._invokeCurrZone),this._handleErrorZS=t&&(t.onHandleError?t:u._handleErrorZS),this._handleErrorDlgt=t&&(t.onHandleError?u:u._handleErrorDlgt),this._handleErrorCurrZone=t&&(t.onHandleError?this.zone:u._handleErrorCurrZone),this._scheduleTaskZS=t&&(t.onScheduleTask?t:u._scheduleTaskZS),this._scheduleTaskDlgt=t&&(t.onScheduleTask?u:u._scheduleTaskDlgt),this._scheduleTaskCurrZone=t&&(t.onScheduleTask?this.zone:u._scheduleTaskCurrZone),this._invokeTaskZS=t&&(t.onInvokeTask?t:u._invokeTaskZS),this._invokeTaskDlgt=t&&(t.onInvokeTask?u:u._invokeTaskDlgt),this._invokeTaskCurrZone=t&&(t.onInvokeTask?this.zone:u._invokeTaskCurrZone),this._cancelTaskZS=t&&(t.onCancelTask?t:u._cancelTaskZS),this._cancelTaskDlgt=t&&(t.onCancelTask?u:u._cancelTaskDlgt),this._cancelTaskCurrZone=t&&(t.onCancelTask?this.zone:u._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const g=t&&t.onHasTask;(g||u&&u._hasTaskZS)&&(this._hasTaskZS=g?t:D,this._hasTaskDlgt=u,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=y,t.onScheduleTask||(this._scheduleTaskZS=D,this._scheduleTaskDlgt=u,this._scheduleTaskCurrZone=this.zone),t.onInvokeTask||(this._invokeTaskZS=D,this._invokeTaskDlgt=u,this._invokeTaskCurrZone=this.zone),t.onCancelTask||(this._cancelTaskZS=D,this._cancelTaskDlgt=u,this._cancelTaskCurrZone=this.zone))}fork(y,u){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,y,u):new p(y,u)}intercept(y,u,t){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,y,u,t):u}invoke(y,u,t,g,R){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,y,u,t,g,R):u.apply(t,g)}handleError(y,u){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,y,u)}scheduleTask(y,u){let t=u;if(this._scheduleTaskZS)this._hasTaskZS&&t._zoneDelegates.push(this._hasTaskDlgtOwner),t=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,y,u),t||(t=u);else if(u.scheduleFn)u.scheduleFn(u);else{if(u.type!=B)throw new Error("Task is missing scheduleFn.");S(u)}return t}invokeTask(y,u,t,g){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,y,u,t,g):u.callback.apply(t,g)}cancelTask(y,u){let t;if(this._cancelTaskZS)t=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,y,u);else{if(!u.cancelFn)throw Error("Task is not cancelable");t=u.cancelFn(u)}return t}hasTask(y,u){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,y,u)}catch(t){this.handleError(y,t)}}_updateTaskCount(y,u){const t=this._taskCounts,g=t[y],R=t[y]=g+u;if(R<0)throw new Error("More tasks executed then were scheduled.");0!=g&&0!=R||this.hasTask(this.zone,{microTask:t.microTask>0,macroTask:t.macroTask>0,eventTask:t.eventTask>0,change:y})}}class M{constructor(y,u,t,g,R,G){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=y,this.source=u,this.data=g,this.scheduleFn=R,this.cancelFn=G,!t)throw new Error("callback is not defined");this.callback=t;const h=this;this.invoke=y===pe&&g&&g.useG?M.invokeTask:function(){return M.invokeTask.call(e,h,this,arguments)}}static invokeTask(y,u,t){y||(y=this),Te++;try{return y.runCount++,y.zone.runTask(y,u,t)}finally{1==Te&&b(),Te--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(Y,ae)}_transitionTo(y,u,t){if(this._state!==u&&this._state!==t)throw new Error(`${this.type} '${this.source}': can not transition to '${y}', expecting state '${u}'${t?" or '"+t+"'":""}, was '${this._state}'.`);this._state=y,y==Y&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const q=d("setTimeout"),j=d("Promise"),F=d("then");let ce,ie=[],X=!1;function re(z){if(ce||e[j]&&(ce=e[j].resolve(0)),ce){let y=ce[F];y||(y=ce.then),y.call(ce,z)}else e[q](z,0)}function S(z){0===Te&&0===ie.length&&re(b),z&&ie.push(z)}function b(){if(!X){for(X=!0;ie.length;){const z=ie;ie=[];for(let y=0;y<z.length;y++){const u=z[y];try{u.zone.runTask(u,null,null)}catch(t){oe.onUnhandledError(t)}}}oe.microtaskDrainDone(),X=!1}}const Ee={name:"NO ZONE"},Y="notScheduled",ae="scheduling",V="scheduled",v="running",$="canceling",_="unknown",B="microTask",O="macroTask",pe="eventTask",te={},oe={symbol:d,currentZoneFrame:()=>se,onUnhandledError:le,microtaskDrainDone:le,scheduleMicroTask:S,showUncaughtError:()=>!p[d("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:le,patchMethod:()=>le,bindArguments:()=>[],patchThen:()=>le,patchMacroTask:()=>le,patchEventPrototype:()=>le,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>le,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>le,wrapWithCurrentZone:()=>le,filterProperties:()=>[],attachOriginToPatched:()=>le,_redefineProperty:()=>le,patchCallbacks:()=>le,nativeScheduleMicroTask:re};let se={parent:null,zone:new p(null,null)},Pe=null,Te=0;function le(){}s("Zone","Zone"),e.Zone=p}(typeof window<"u"&&window||typeof self<"u"&&self||global);const W=Object.getOwnPropertyDescriptor,ye=Object.defineProperty,Me=Object.getPrototypeOf,xe=Object.create,ft=Array.prototype.slice,Ue="addEventListener",Ge="removeEventListener",We=Zone.__symbol__(Ue),Xe=Zone.__symbol__(Ge),Oe="true",Le="false",ze=Zone.__symbol__("");function nt(e,r){return Zone.current.wrap(e,r)}function Ye(e,r,i,s,a){return Zone.current.scheduleMacroTask(e,r,i,s,a)}const K=Zone.__symbol__,Ke=typeof window<"u",Ze=Ke?window:void 0,fe=Ke&&Ze||"object"==typeof self&&self||global,ht="removeAttribute";function rt(e,r){for(let i=e.length-1;i>=0;i--)"function"==typeof e[i]&&(e[i]=nt(e[i],r+"_"+i));return e}function lt(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const ot=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,$e=!("nw"in fe)&&typeof fe.process<"u"&&"[object process]"==={}.toString.call(fe.process),U=!$e&&!ot&&!(!Ke||!Ze.HTMLElement),ge=typeof fe.process<"u"&&"[object process]"==={}.toString.call(fe.process)&&!ot&&!(!Ke||!Ze.HTMLElement),st={},Je=function(e){if(!(e=e||fe.event))return;let r=st[e.type];r||(r=st[e.type]=K("ON_PROPERTY"+e.type));const i=this||e.target||fe,s=i[r];let a;return U&&i===Ze&&"error"===e.type?(a=s&&s.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===a&&e.preventDefault()):(a=s&&s.apply(this,arguments),null!=a&&!a&&e.preventDefault()),a};function it(e,r,i){let s=W(e,r);if(!s&&i&&W(i,r)&&(s={enumerable:!0,configurable:!0}),!s||!s.configurable)return;const a=K("on"+r+"patched");if(e.hasOwnProperty(a)&&e[a])return;delete s.writable,delete s.value;const d=s.get,k=s.set,p=r.slice(2);let D=st[p];D||(D=st[p]=K("ON_PROPERTY"+p)),s.set=function(P){let M=this;!M&&e===fe&&(M=fe),M&&("function"==typeof M[D]&&M.removeEventListener(p,Je),k&&k.call(M,null),M[D]=P,"function"==typeof P&&M.addEventListener(p,Je,!1))},s.get=function(){let P=this;if(!P&&e===fe&&(P=fe),!P)return null;const M=P[D];if(M)return M;if(d){let q=d.call(this);if(q)return s.set.call(this,q),"function"==typeof P[ht]&&P.removeAttribute(r),q}return null},ye(e,r,s),e[a]=!0}function Qe(e,r,i){if(r)for(let s=0;s<r.length;s++)it(e,"on"+r[s],i);else{const s=[];for(const a in e)"on"==a.slice(0,2)&&s.push(a);for(let a=0;a<s.length;a++)it(e,s[a],i)}}const ke=K("originalInstance");function je(e){const r=fe[e];if(!r)return;fe[K(e)]=r,fe[e]=function(){const a=rt(arguments,e);switch(a.length){case 0:this[ke]=new r;break;case 1:this[ke]=new r(a[0]);break;case 2:this[ke]=new r(a[0],a[1]);break;case 3:this[ke]=new r(a[0],a[1],a[2]);break;case 4:this[ke]=new r(a[0],a[1],a[2],a[3]);break;default:throw new Error("Arg list too long.")}},be(fe[e],r);const i=new r(function(){});let s;for(s in i)"XMLHttpRequest"===e&&"responseBlob"===s||function(a){"function"==typeof i[a]?fe[e].prototype[a]=function(){return this[ke][a].apply(this[ke],arguments)}:ye(fe[e].prototype,a,{set:function(d){"function"==typeof d?(this[ke][a]=nt(d,e+"."+a),be(this[ke][a],d)):this[ke][a]=d},get:function(){return this[ke][a]}})}(s);for(s in r)"prototype"!==s&&r.hasOwnProperty(s)&&(fe[e][s]=r[s])}function we(e,r,i){let s=e;for(;s&&!s.hasOwnProperty(r);)s=Me(s);!s&&e[r]&&(s=e);const a=K(r);let d=null;if(s&&(!(d=s[a])||!s.hasOwnProperty(a))&&(d=s[a]=s[r],lt(s&&W(s,r)))){const p=i(d,a,r);s[r]=function(){return p(this,arguments)},be(s[r],d)}return d}function ct(e,r,i){let s=null;function a(d){const k=d.data;return k.args[k.cbIdx]=function(){d.invoke.apply(this,arguments)},s.apply(k.target,k.args),d}s=we(e,r,d=>function(k,p){const D=i(k,p);return D.cbIdx>=0&&"function"==typeof p[D.cbIdx]?Ye(D.name,p[D.cbIdx],D,a):d.apply(k,p)})}function be(e,r){e[K("OriginalDelegate")]=r}let Ne=!1,Fe=!1;function Re(){if(Ne)return Fe;Ne=!0;try{const e=Ze.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(Fe=!0)}catch{}return Fe}Zone.__load_patch("ZoneAwarePromise",(e,r,i)=>{const s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,k=i.symbol,p=[],D=!0===e[k("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],P=k("Promise"),M=k("then"),q="__creationTrace__";i.onUnhandledError=h=>{if(i.showUncaughtError()){const m=h&&h.rejection;m?console.error("Unhandled Promise rejection:",m instanceof Error?m.message:m,"; Zone:",h.zone.name,"; Task:",h.task&&h.task.source,"; Value:",m,m instanceof Error?m.stack:void 0):console.error(h)}},i.microtaskDrainDone=()=>{for(;p.length;){const h=p.shift();try{h.zone.runGuarded(()=>{throw h.throwOriginal?h.rejection:h})}catch(m){F(m)}}};const j=k("unhandledPromiseRejectionHandler");function F(h){i.onUnhandledError(h);try{const m=r[j];"function"==typeof m&&m.call(this,h)}catch{}}function ie(h){return h&&h.then}function X(h){return h}function ce(h){return u.reject(h)}const re=k("state"),S=k("value"),b=k("finally"),Ee=k("parentPromiseValue"),Y=k("parentPromiseState"),ae="Promise.then",V=null,v=!0,$=!1,_=0;function B(h,m){return c=>{try{oe(h,m,c)}catch(E){oe(h,!1,E)}}}const O=function(){let h=!1;return function(c){return function(){h||(h=!0,c.apply(null,arguments))}}},pe="Promise resolved with itself",te=k("currentTaskTrace");function oe(h,m,c){const E=O();if(h===c)throw new TypeError(pe);if(h[re]===V){let C=null;try{("object"==typeof c||"function"==typeof c)&&(C=c&&c.then)}catch(N){return E(()=>{oe(h,!1,N)})(),h}if(m!==$&&c instanceof u&&c.hasOwnProperty(re)&&c.hasOwnProperty(S)&&c[re]!==V)Pe(c),oe(h,c[re],c[S]);else if(m!==$&&"function"==typeof C)try{C.call(c,E(B(h,m)),E(B(h,!1)))}catch(N){E(()=>{oe(h,!1,N)})()}else{h[re]=m;const N=h[S];if(h[S]=c,h[b]===b&&m===v&&(h[re]=h[Y],h[S]=h[Ee]),m===$&&c instanceof Error){const L=r.currentTask&&r.currentTask.data&&r.currentTask.data[q];L&&a(c,te,{configurable:!0,enumerable:!1,writable:!0,value:L})}for(let L=0;L<N.length;)Te(h,N[L++],N[L++],N[L++],N[L++]);if(0==N.length&&m==$){h[re]=_;let L=c;try{throw new Error("Uncaught (in promise): "+function d(h){return h&&h.toString===Object.prototype.toString?(h.constructor&&h.constructor.name||"")+": "+JSON.stringify(h):h?h.toString():Object.prototype.toString.call(h)}(c)+(c&&c.stack?"\n"+c.stack:""))}catch(I){L=I}D&&(L.throwOriginal=!0),L.rejection=c,L.promise=h,L.zone=r.current,L.task=r.currentTask,p.push(L),i.scheduleMicroTask()}}}return h}const se=k("rejectionHandledHandler");function Pe(h){if(h[re]===_){try{const m=r[se];m&&"function"==typeof m&&m.call(this,{rejection:h[S],promise:h})}catch{}h[re]=$;for(let m=0;m<p.length;m++)h===p[m].promise&&p.splice(m,1)}}function Te(h,m,c,E,C){Pe(h);const N=h[re],L=N?"function"==typeof E?E:X:"function"==typeof C?C:ce;m.scheduleMicroTask(ae,()=>{try{const I=h[S],Z=!!c&&b===c[b];Z&&(c[Ee]=I,c[Y]=N);const A=m.run(L,void 0,Z&&L!==ce&&L!==X?[]:[I]);oe(c,!0,A)}catch(I){oe(c,!1,I)}},c)}const z=function(){},y=e.AggregateError;class u{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(m){return oe(new this(null),v,m)}static reject(m){return oe(new this(null),$,m)}static any(m){if(!m||"function"!=typeof m[Symbol.iterator])return Promise.reject(new y([],"All promises were rejected"));const c=[];let E=0;try{for(let L of m)E++,c.push(u.resolve(L))}catch{return Promise.reject(new y([],"All promises were rejected"))}if(0===E)return Promise.reject(new y([],"All promises were rejected"));let C=!1;const N=[];return new u((L,I)=>{for(let Z=0;Z<c.length;Z++)c[Z].then(A=>{C||(C=!0,L(A))},A=>{N.push(A),E--,0===E&&(C=!0,I(new y(N,"All promises were rejected")))})})}static race(m){let c,E,C=new this((I,Z)=>{c=I,E=Z});function N(I){c(I)}function L(I){E(I)}for(let I of m)ie(I)||(I=this.resolve(I)),I.then(N,L);return C}static all(m){return u.allWithCallback(m)}static allSettled(m){return(this&&this.prototype instanceof u?this:u).allWithCallback(m,{thenCallback:E=>({status:"fulfilled",value:E}),errorCallback:E=>({status:"rejected",reason:E})})}static allWithCallback(m,c){let E,C,N=new this((A,Q)=>{E=A,C=Q}),L=2,I=0;const Z=[];for(let A of m){ie(A)||(A=this.resolve(A));const Q=I;try{A.then(J=>{Z[Q]=c?c.thenCallback(J):J,L--,0===L&&E(Z)},J=>{c?(Z[Q]=c.errorCallback(J),L--,0===L&&E(Z)):C(J)})}catch(J){C(J)}L++,I++}return L-=2,0===L&&E(Z),N}constructor(m){const c=this;if(!(c instanceof u))throw new Error("Must be an instanceof Promise.");c[re]=V,c[S]=[];try{const E=O();m&&m(E(B(c,v)),E(B(c,$)))}catch(E){oe(c,!1,E)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return u}then(m,c){let E=this.constructor?.[Symbol.species];(!E||"function"!=typeof E)&&(E=this.constructor||u);const C=new E(z),N=r.current;return this[re]==V?this[S].push(N,C,m,c):Te(this,N,C,m,c),C}catch(m){return this.then(null,m)}finally(m){let c=this.constructor?.[Symbol.species];(!c||"function"!=typeof c)&&(c=u);const E=new c(z);E[b]=b;const C=r.current;return this[re]==V?this[S].push(C,E,m,m):Te(this,C,E,m,m),E}}u.resolve=u.resolve,u.reject=u.reject,u.race=u.race,u.all=u.all;const t=e[P]=e.Promise;e.Promise=u;const g=k("thenPatched");function R(h){const m=h.prototype,c=s(m,"then");if(c&&(!1===c.writable||!c.configurable))return;const E=m.then;m[M]=E,h.prototype.then=function(C,N){return new u((I,Z)=>{E.call(this,I,Z)}).then(C,N)},h[g]=!0}return i.patchThen=R,t&&(R(t),we(e,"fetch",h=>function G(h){return function(m,c){let E=h.apply(m,c);if(E instanceof u)return E;let C=E.constructor;return C[g]||R(C),E}}(h))),Promise[r.__symbol__("uncaughtPromiseErrors")]=p,u}),Zone.__load_patch("toString",e=>{const r=Function.prototype.toString,i=K("OriginalDelegate"),s=K("Promise"),a=K("Error"),d=function(){if("function"==typeof this){const P=this[i];if(P)return"function"==typeof P?r.call(P):Object.prototype.toString.call(P);if(this===Promise){const M=e[s];if(M)return r.call(M)}if(this===Error){const M=e[a];if(M)return r.call(M)}}return r.call(this)};d[i]=r,Function.prototype.toString=d;const k=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":k.call(this)}});let ve=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){ve=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{ve=!1}const Se={useG:!0},me={},Ce={},qe=new RegExp("^"+ze+"(\\w+)(true|false)$"),He=K("propagationStopped");function Et(e,r){const i=(r?r(e):e)+Le,s=(r?r(e):e)+Oe,a=ze+i,d=ze+s;me[e]={},me[e][Le]=a,me[e][Oe]=d}function Tt(e,r,i,s){const a=s&&s.add||Ue,d=s&&s.rm||Ge,k=s&&s.listeners||"eventListeners",p=s&&s.rmAll||"removeAllListeners",D=K(a),P="."+a+":",M="prependListener",q="."+M+":",j=function(S,b,Ee){if(S.isRemoved)return;const Y=S.callback;let ae;"object"==typeof Y&&Y.handleEvent&&(S.callback=v=>Y.handleEvent(v),S.originalDelegate=Y);try{S.invoke(S,b,[Ee])}catch(v){ae=v}const V=S.options;return V&&"object"==typeof V&&V.once&&b[d].call(b,Ee.type,S.originalDelegate?S.originalDelegate:S.callback,V),ae};function F(S,b,Ee){if(!(b=b||e.event))return;const Y=S||b.target||e,ae=Y[me[b.type][Ee?Oe:Le]];if(ae){const V=[];if(1===ae.length){const v=j(ae[0],Y,b);v&&V.push(v)}else{const v=ae.slice();for(let $=0;$<v.length&&(!b||!0!==b[He]);$++){const _=j(v[$],Y,b);_&&V.push(_)}}if(1===V.length)throw V[0];for(let v=0;v<V.length;v++){const $=V[v];r.nativeScheduleMicroTask(()=>{throw $})}}}const ie=function(S){return F(this,S,!1)},X=function(S){return F(this,S,!0)};function ce(S,b){if(!S)return!1;let Ee=!0;b&&void 0!==b.useG&&(Ee=b.useG);const Y=b&&b.vh;let ae=!0;b&&void 0!==b.chkDup&&(ae=b.chkDup);let V=!1;b&&void 0!==b.rt&&(V=b.rt);let v=S;for(;v&&!v.hasOwnProperty(a);)v=Me(v);if(!v&&S[a]&&(v=S),!v||v[D])return!1;const $=b&&b.eventNameToString,_={},B=v[D]=v[a],O=v[K(d)]=v[d],pe=v[K(k)]=v[k],te=v[K(p)]=v[p];let oe;b&&b.prepend&&(oe=v[K(b.prepend)]=v[b.prepend]);const u=Ee?function(c){if(!_.isExisting)return B.call(_.target,_.eventName,_.capture?X:ie,_.options)}:function(c){return B.call(_.target,_.eventName,c.invoke,_.options)},t=Ee?function(c){if(!c.isRemoved){const E=me[c.eventName];let C;E&&(C=E[c.capture?Oe:Le]);const N=C&&c.target[C];if(N)for(let L=0;L<N.length;L++)if(N[L]===c){N.splice(L,1),c.isRemoved=!0,0===N.length&&(c.allRemoved=!0,c.target[C]=null);break}}if(c.allRemoved)return O.call(c.target,c.eventName,c.capture?X:ie,c.options)}:function(c){return O.call(c.target,c.eventName,c.invoke,c.options)},R=b&&b.diff?b.diff:function(c,E){const C=typeof E;return"function"===C&&c.callback===E||"object"===C&&c.originalDelegate===E},G=Zone[K("UNPATCHED_EVENTS")],h=e[K("PASSIVE_EVENTS")],m=function(c,E,C,N,L=!1,I=!1){return function(){const Z=this||e;let A=arguments[0];b&&b.transferEventName&&(A=b.transferEventName(A));let Q=arguments[1];if(!Q)return c.apply(this,arguments);if($e&&"uncaughtException"===A)return c.apply(this,arguments);let J=!1;if("function"!=typeof Q){if(!Q.handleEvent)return c.apply(this,arguments);J=!0}if(Y&&!Y(c,Q,Z,arguments))return;const n=ve&&!!h&&-1!==h.indexOf(A),o=function se(c,E){return!ve&&"object"==typeof c&&c?!!c.capture:ve&&E?"boolean"==typeof c?{capture:c,passive:!0}:c?"object"==typeof c&&!1!==c.passive?{...c,passive:!0}:c:{passive:!0}:c}(arguments[2],n);if(G)for(let De=0;De<G.length;De++)if(A===G[De])return n?c.call(Z,A,Q,o):c.apply(this,arguments);const l=!!o&&("boolean"==typeof o||o.capture),f=!(!o||"object"!=typeof o)&&o.once,T=Zone.current;let w=me[A];w||(Et(A,$),w=me[A]);const H=w[l?Oe:Le];let ne,ee=Z[H],x=!1;if(ee){if(x=!0,ae)for(let De=0;De<ee.length;De++)if(R(ee[De],Q))return}else ee=Z[H]=[];const he=Z.constructor.name,ue=Ce[he];ue&&(ne=ue[A]),ne||(ne=he+E+($?$(A):A)),_.options=o,f&&(_.options.once=!1),_.target=Z,_.capture=l,_.eventName=A,_.isExisting=x;const de=Ee?Se:void 0;de&&(de.taskData=_);const _e=T.scheduleEventTask(ne,Q,de,C,N);return _.target=null,de&&(de.taskData=null),f&&(o.once=!0),!ve&&"boolean"==typeof _e.options||(_e.options=o),_e.target=Z,_e.capture=l,_e.eventName=A,J&&(_e.originalDelegate=Q),I?ee.unshift(_e):ee.push(_e),L?Z:void 0}};return v[a]=m(B,P,u,t,V),oe&&(v[M]=m(oe,q,function(c){return oe.call(_.target,_.eventName,c.invoke,_.options)},t,V,!0)),v[d]=function(){const c=this||e;let E=arguments[0];b&&b.transferEventName&&(E=b.transferEventName(E));const C=arguments[2],N=!!C&&("boolean"==typeof C||C.capture),L=arguments[1];if(!L)return O.apply(this,arguments);if(Y&&!Y(O,L,c,arguments))return;const I=me[E];let Z;I&&(Z=I[N?Oe:Le]);const A=Z&&c[Z];if(A)for(let Q=0;Q<A.length;Q++){const J=A[Q];if(R(J,L))return A.splice(Q,1),J.isRemoved=!0,0===A.length&&(J.allRemoved=!0,c[Z]=null,"string"==typeof E)&&(c[ze+"ON_PROPERTY"+E]=null),J.zone.cancelTask(J),V?c:void 0}return O.apply(this,arguments)},v[k]=function(){const c=this||e;let E=arguments[0];b&&b.transferEventName&&(E=b.transferEventName(E));const C=[],N=ut(c,$?$(E):E);for(let L=0;L<N.length;L++){const I=N[L];C.push(I.originalDelegate?I.originalDelegate:I.callback)}return C},v[p]=function(){const c=this||e;let E=arguments[0];if(E){b&&b.transferEventName&&(E=b.transferEventName(E));const C=me[E];if(C){const I=c[C[Le]],Z=c[C[Oe]];if(I){const A=I.slice();for(let Q=0;Q<A.length;Q++){const J=A[Q];this[d].call(this,E,J.originalDelegate?J.originalDelegate:J.callback,J.options)}}if(Z){const A=Z.slice();for(let Q=0;Q<A.length;Q++){const J=A[Q];this[d].call(this,E,J.originalDelegate?J.originalDelegate:J.callback,J.options)}}}}else{const C=Object.keys(c);for(let N=0;N<C.length;N++){const I=qe.exec(C[N]);let Z=I&&I[1];Z&&"removeListener"!==Z&&this[p].call(this,Z)}this[p].call(this,"removeListener")}if(V)return this},be(v[a],B),be(v[d],O),te&&be(v[p],te),pe&&be(v[k],pe),!0}let re=[];for(let S=0;S<i.length;S++)re[S]=ce(i[S],s);return re}function ut(e,r){if(!r){const d=[];for(let k in e){const p=qe.exec(k);let D=p&&p[1];if(D&&(!r||D===r)){const P=e[k];if(P)for(let M=0;M<P.length;M++)d.push(P[M])}}return d}let i=me[r];i||(Et(r),i=me[r]);const s=e[i[Le]],a=e[i[Oe]];return s?a?s.concat(a):s.slice():a?a.slice():[]}function et(e,r){const i=e.Event;i&&i.prototype&&r.patchMethod(i.prototype,"stopImmediatePropagation",s=>function(a,d){a[He]=!0,s&&s.apply(a,d)})}function pt(e,r,i,s,a){const d=Zone.__symbol__(s);if(r[d])return;const k=r[d]=r[s];r[s]=function(p,D,P){return D&&D.prototype&&a.forEach(function(M){const q=`${i}.${s}::`+M,j=D.prototype;try{if(j.hasOwnProperty(M)){const F=e.ObjectGetOwnPropertyDescriptor(j,M);F&&F.value?(F.value=e.wrapWithCurrentZone(F.value,q),e._redefineProperty(D.prototype,M,F)):j[M]&&(j[M]=e.wrapWithCurrentZone(j[M],q))}else j[M]&&(j[M]=e.wrapWithCurrentZone(j[M],q))}catch{}}),k.call(r,p,D,P)},e.attachOriginToPatched(r[s],k)}function tt(e,r,i){if(!i||0===i.length)return r;const s=i.filter(d=>d.target===e);if(!s||0===s.length)return r;const a=s[0].ignoreProperties;return r.filter(d=>-1===a.indexOf(d))}function at(e,r,i,s){e&&Qe(e,tt(e,r,i),s)}function Ae(e){return Object.getOwnPropertyNames(e).filter(r=>r.startsWith("on")&&r.length>2).map(r=>r.substring(2))}Zone.__load_patch("util",(e,r,i)=>{const s=Ae(e);i.patchOnProperties=Qe,i.patchMethod=we,i.bindArguments=rt,i.patchMacroTask=ct;const a=r.__symbol__("BLACK_LISTED_EVENTS"),d=r.__symbol__("UNPATCHED_EVENTS");e[d]&&(e[a]=e[d]),e[a]&&(r[a]=r[d]=e[a]),i.patchEventPrototype=et,i.patchEventTarget=Tt,i.isIEOrEdge=Re,i.ObjectDefineProperty=ye,i.ObjectGetOwnPropertyDescriptor=W,i.ObjectCreate=xe,i.ArraySlice=ft,i.patchClass=je,i.wrapWithCurrentZone=nt,i.filterProperties=tt,i.attachOriginToPatched=be,i._redefineProperty=Object.defineProperty,i.patchCallbacks=pt,i.getGlobalObjects=()=>({globalSources:Ce,zoneSymbolEventNames:me,eventNames:s,isBrowser:U,isMix:ge,isNode:$e,TRUE_STR:Oe,FALSE_STR:Le,ZONE_SYMBOL_PREFIX:ze,ADD_EVENT_LISTENER_STR:Ue,REMOVE_EVENT_LISTENER_STR:Ge})});const Ve=K("zoneTask");function Ie(e,r,i,s){let a=null,d=null;i+=s;const k={};function p(P){const M=P.data;return M.args[0]=function(){return P.invoke.apply(this,arguments)},M.handleId=a.apply(e,M.args),P}function D(P){return d.call(e,P.data.handleId)}a=we(e,r+=s,P=>function(M,q){if("function"==typeof q[0]){const j={isPeriodic:"Interval"===s,delay:"Timeout"===s||"Interval"===s?q[1]||0:void 0,args:q},F=q[0];q[0]=function(){try{return F.apply(this,arguments)}finally{j.isPeriodic||("number"==typeof j.handleId?delete k[j.handleId]:j.handleId&&(j.handleId[Ve]=null))}};const ie=Ye(r,q[0],j,p,D);if(!ie)return ie;const X=ie.data.handleId;return"number"==typeof X?k[X]=ie:X&&(X[Ve]=ie),X&&X.ref&&X.unref&&"function"==typeof X.ref&&"function"==typeof X.unref&&(ie.ref=X.ref.bind(X),ie.unref=X.unref.bind(X)),"number"==typeof X||X?X:ie}return P.apply(e,q)}),d=we(e,i,P=>function(M,q){const j=q[0];let F;"number"==typeof j?F=k[j]:(F=j&&j[Ve],F||(F=j)),F&&"string"==typeof F.type?"notScheduled"!==F.state&&(F.cancelFn&&F.data.isPeriodic||0===F.runCount)&&("number"==typeof j?delete k[j]:j&&(j[Ve]=null),F.zone.cancelTask(F)):P.apply(e,q)})}Zone.__load_patch("legacy",e=>{const r=e[Zone.__symbol__("legacyPatch")];r&&r()}),Zone.__load_patch("timers",e=>{const r="set",i="clear";Ie(e,r,i,"Timeout"),Ie(e,r,i,"Interval"),Ie(e,r,i,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{Ie(e,"request","cancel","AnimationFrame"),Ie(e,"mozRequest","mozCancel","AnimationFrame"),Ie(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,r)=>{const i=["alert","prompt","confirm"];for(let s=0;s<i.length;s++)we(e,i[s],(d,k,p)=>function(D,P){return r.current.run(d,e,P,p)})}),Zone.__load_patch("EventTarget",(e,r,i)=>{(function Be(e,r){r.patchEventPrototype(e,r)})(e,i),function vt(e,r){if(Zone[r.symbol("patchEventTarget")])return;const{eventNames:i,zoneSymbolEventNames:s,TRUE_STR:a,FALSE_STR:d,ZONE_SYMBOL_PREFIX:k}=r.getGlobalObjects();for(let D=0;D<i.length;D++){const P=i[D],j=k+(P+d),F=k+(P+a);s[P]={},s[P][d]=j,s[P][a]=F}const p=e.EventTarget;p&&p.prototype&&r.patchEventTarget(e,r,[p&&p.prototype])}(e,i);const s=e.XMLHttpRequestEventTarget;s&&s.prototype&&i.patchEventTarget(e,i,[s.prototype])}),Zone.__load_patch("MutationObserver",(e,r,i)=>{je("MutationObserver"),je("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,r,i)=>{je("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,r,i)=>{je("FileReader")}),Zone.__load_patch("on_property",(e,r,i)=>{!function _t(e,r){if($e&&!ge||Zone[e.symbol("patchEvents")])return;const i=r.__Zone_ignore_on_properties;let s=[];if(U){const a=window;s=s.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const d=function mt(){try{const e=Ze.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:a,ignoreProperties:["error"]}]:[];at(a,Ae(a),i&&i.concat(d),Me(a))}s=s.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let a=0;a<s.length;a++){const d=r[s[a]];d&&d.prototype&&at(d.prototype,Ae(d.prototype),i)}}(i,e)}),Zone.__load_patch("customElements",(e,r,i)=>{!function gt(e,r){const{isBrowser:i,isMix:s}=r.getGlobalObjects();(i||s)&&e.customElements&&"customElements"in e&&r.patchCallbacks(r,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,i)}),Zone.__load_patch("XHR",(e,r)=>{!function D(P){const M=P.XMLHttpRequest;if(!M)return;const q=M.prototype;let F=q[We],ie=q[Xe];if(!F){const _=P.XMLHttpRequestEventTarget;if(_){const B=_.prototype;F=B[We],ie=B[Xe]}}const X="readystatechange",ce="scheduled";function re(_){const B=_.data,O=B.target;O[d]=!1,O[p]=!1;const pe=O[a];F||(F=O[We],ie=O[Xe]),pe&&ie.call(O,X,pe);const te=O[a]=()=>{if(O.readyState===O.DONE)if(!B.aborted&&O[d]&&_.state===ce){const se=O[r.__symbol__("loadfalse")];if(0!==O.status&&se&&se.length>0){const Pe=_.invoke;_.invoke=function(){const Te=O[r.__symbol__("loadfalse")];for(let le=0;le<Te.length;le++)Te[le]===_&&Te.splice(le,1);!B.aborted&&_.state===ce&&Pe.call(_)},se.push(_)}else _.invoke()}else!B.aborted&&!1===O[d]&&(O[p]=!0)};return F.call(O,X,te),O[i]||(O[i]=_),v.apply(O,B.args),O[d]=!0,_}function S(){}function b(_){const B=_.data;return B.aborted=!0,$.apply(B.target,B.args)}const Ee=we(q,"open",()=>function(_,B){return _[s]=0==B[2],_[k]=B[1],Ee.apply(_,B)}),ae=K("fetchTaskAborting"),V=K("fetchTaskScheduling"),v=we(q,"send",()=>function(_,B){if(!0===r.current[V]||_[s])return v.apply(_,B);{const O={target:_,url:_[k],isPeriodic:!1,args:B,aborted:!1},pe=Ye("XMLHttpRequest.send",S,O,re,b);_&&!0===_[p]&&!O.aborted&&pe.state===ce&&pe.invoke()}}),$=we(q,"abort",()=>function(_,B){const O=function j(_){return _[i]}(_);if(O&&"string"==typeof O.type){if(null==O.cancelFn||O.data&&O.data.aborted)return;O.zone.cancelTask(O)}else if(!0===r.current[ae])return $.apply(_,B)})}(e);const i=K("xhrTask"),s=K("xhrSync"),a=K("xhrListener"),d=K("xhrScheduled"),k=K("xhrURL"),p=K("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function dt(e,r){const i=e.constructor.name;for(let s=0;s<r.length;s++){const a=r[s],d=e[a];if(d){if(!lt(W(e,a)))continue;e[a]=(p=>{const D=function(){return p.apply(this,rt(arguments,i+"."+a))};return be(D,p),D})(d)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,r)=>{function i(s){return function(a){ut(e,s).forEach(k=>{const p=e.PromiseRejectionEvent;if(p){const D=new p(s,{promise:a.promise,reason:a.rejection});k.invoke(D)}})}}e.PromiseRejectionEvent&&(r[K("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),r[K("rejectionHandledHandler")]=i("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(e,r,i)=>{!function yt(e,r){r.patchMethod(e,"queueMicrotask",i=>function(s,a){Zone.current.scheduleMicroTask("queueMicrotask",a[0])})}(e,i)})}},W=>{W(W.s=2978)}]);
!function(m,w){"use strict";function rt(){var e=K.splice(0,K.length);for(ie=0;e.length;)e.shift().call(null,e.shift())}function me(e,t){for(var n=0,r=e.length;n<r;n++)Te(e[n],t)}function fe(e){return function(t){Lt(t)&&(Te(t,e),L.length&&me(t.querySelectorAll(L),e))}}function de(e){var t=le.call(e,"is"),n=e.nodeName.toUpperCase(),r=v.call(D,t?Y+t.toUpperCase():x+n);return t&&-1<r&&!De(n,t)?-1:r}function De(e,t){return-1<L.indexOf(e+'[is="'+t+'"]')}function Ie(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[W]||2,a=e[He]||3;!ce||o&&o!==t||!t[y]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[y](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function Fe(e){var t=fe(e);return function(n){K.push(t,n.target),ie&&clearTimeout(ie),ie=setTimeout(rt,1)}}function pe(e){nt&&(nt=!1,e.currentTarget.removeEventListener(Ze,pe)),L.length&&me((e.target||u).querySelectorAll(L),e.detail===E?E:b),R&&function at(){for(var e,t=0,n=G.length;t<n;t++)V.contains(e=G[t])||(n--,G.splice(t--,1),Te(e,E))}()}function lt(e,t){var n=this;Ye.call(n,e,t),Me.call(n,{target:n})}function Se(e,t,n){var r=t.apply(e,n),o=de(r);return-1<o&&U(r,q[o]),n.pop()&&L.length&&function ot(e){for(var t,n=0,r=e.length;n<r;n++)U(t=e[n],q[de(t)])}(r.querySelectorAll(L)),r}function he(e,t){Tt(e,t),$?$.observe(e,gt):(ue&&(e.setAttribute=lt,e[H]=Ee(e),e[g](st,Me)),e[g](N,Ie)),e[k]&&ce&&(e.created=!0,e[k](),e.created=!1)}function Ve(e){throw new Error("A "+e+" type is already registered")}function Te(e,t){var n,r,o=de(e);-1<o&&!Mt.call(e,"TEMPLATE")&&(Q(e,q[o]),o=0,t!==b||e[b]?t!==E||e[E]||(e[b]=!1,e[E]=!0,r="disconnected",o=1):(e[E]=!1,e[b]=!0,r="connected",o=1,R&&v.call(G,e)<0&&G.push(e)),o&&(n=e[t+O]||e[r+O])&&n.call(e))}function z(){}function Pe(e,t,n){var r=n&&n[_]||"",o=t.prototype,l=Ce(o),a=t.observedAttributes||ye,s={prototype:l};oe(l,k,{value:function(){if(te)te=!1;else if(!this[B]){this[B]=!0,new t(this),o[k]&&o[k].call(this);var i=j[ne.get(t)];(!Z||i.create.length>1)&&_e(this)}}}),oe(l,y,{value:function(i){-1<v.call(a,i)&&o[y]&&o[y].apply(this,arguments)}}),o[qe]&&oe(l,ut,{value:o[qe]}),o[Be]&&oe(l,ct,{value:o[Be]}),r&&(s[_]=r),e=e.toUpperCase(),j[e]={constructor:t,create:r?[r,re(e)]:[e]},ne.set(t,e),u[S](e.toLowerCase(),s),Le(e),P[e].r()}function Re(e){var t=j[e.toUpperCase()];return t&&t.constructor}function Ue(e){return"string"==typeof e?e:e&&e.is||""}function _e(e){for(var t,n=e[y],r=n?e.attributes:ye,o=r.length;o--;)n.call(e,(t=r[o]).name||t.nodeName,null,t.value||t.nodeValue)}function Le(e){return(e=e.toUpperCase())in P||(P[e]={},P[e].p=new Xe(function(t){P[e].r=t})),P[e].p}function ke(){C&&delete m.customElements,I(m,"customElements",{configurable:!0,value:new z}),I(m,"CustomElementRegistry",{configurable:!0,value:z});for(var e=it.get(/^HTML[A-Z]*[a-z]/),t=e.length;t--;function(n){var r=m[n];if(r){m[n]=function(o){var l,a;return o||(o=this),o[B]||(te=!0,l=j[ne.get(o.constructor)],(o=(a=Z&&1===l.create.length)?Reflect.construct(r,ye,l.constructor):u.createElement.apply(u,l.create))[B]=!0,te=!1,a||_e(o)),o},m[n].prototype=r.prototype;try{r.prototype.constructor=m[n]}catch{I(r,B,{value:m[n]})}}}(e[t]));u.createElement=function(n,r){var o=Ue(r);return o?Ae.call(this,n,re(o)):Ae.call(this,n)},et||(Oe=!0,u[S](""))}var u=m.document,T=m.Object,it=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,s=function(d,f){(f=f.toLowerCase())in i||(i[d]=(i[d]||[]).concat(f),i[f]=i[f.toUpperCase()]=d)},i=(T.create||T)(null),c={};for(n in e)for(o in e[n])for(i[o]=r=e[n][o],t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return c.get=function(d){return"string"==typeof d?i[d]||(l.test(d)?[]:""):function(d){var f,h=[];for(f in i)d.test(f)&&h.push(f);return h}(d)},c.set=function(d,f){return l.test(d)?s(d,f):s(f,d),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof w&&(w={type:w||"auto"});var K,Me,X,Ee,$,ve,Q,U,A,e,t,n,r,o,S="registerElement",xe=1e5*m.Math.random()>>0,H="__"+S+xe,g="addEventListener",b="attached",O="Callback",E="detached",_="extends",y="attributeChanged"+O,ut=b+O,qe="connected"+O,Be="disconnected"+O,k="created"+O,ct=E+O,W="ADDITION",He="REMOVAL",N="DOMAttrModified",Ze="DOMContentLoaded",st="DOMSubtreeModified",x="<",Y="=",mt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ft=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],D=[],q=[],L="",V=u.documentElement,v=D.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ge=T.prototype,be=ge.hasOwnProperty,J=ge.isPrototypeOf,I=T.defineProperty,ye=[],ee=T.getOwnPropertyDescriptor,je=T.getOwnPropertyNames,dt=T.getPrototypeOf,Ge=T.setPrototypeOf,ze=!!T.__proto__,B="__dreCEv1",C=m.customElements,Z=!/^force/.test(w.type)&&!!(C&&C.define&&C.get&&C.whenDefined),Ke=T.create||T,ht=m.Map||function(){var e,t=[],n=[];return{get:function(r){return n[v.call(t,r)]},set:function(r,o){(e=v.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},Xe=m.Promise||function(e){function t(l){for(r=!0;n.length;)n.shift()(l)}var n=[],r=!1,o={catch:function(){return o},then:function(l){return n.push(l),r&&setTimeout(t,1),o}};return e(t),o},te=!1,j=Ke(null),P=Ke(null),ne=new ht,re=function(e){return e.toLowerCase()},Ce=T.create||function e(t){return t?(e.prototype=t,new e):this},Tt=Ge||(ze?function(e,t){return e.__proto__=t,e}:je&&ee?function(){function e(t,n){for(var r,o=je(n),l=0,a=o.length;l<a;l++)be.call(t,r=o[l])||I(t,r,ee(n,r))}return function(t,n){do{e(t,n)}while((n=dt(n))&&!J.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),F=m.MutationObserver||m.WebKitMutationObserver,$e=m.HTMLAnchorElement,p=(m.HTMLElement||m.Element||m.Node).prototype,R=!J.call(p,V),oe=R?function(e,t,n){return e[t]=n.value,e}:I,Lt=R?function(e){return 1===e.nodeType}:function(e){return J.call(p,e)},G=R&&[],Qe=p.attachShadow,We=p.cloneNode,Mt=p.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},we=p.dispatchEvent,le=p.getAttribute,Et=p.hasAttribute,vt=p.removeAttribute,Ye=p.setAttribute,ae=u.createElement,Ht=u.importNode,Ae=ae,gt=F&&{attributes:!0,characterData:!0,attributeOldValue:!0},Je=F||function(e){ue=!1,V.removeEventListener(N,Je)},ie=0,et=S in u&&!/^force-all/.test(w.type),tt=!0,Oe=!1,ue=!0,nt=!0,ce=!0;if(F&&((A=u.createElement("div")).innerHTML="<div><div></div></div>",new F(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(A=ee(p,"innerHTML"))&&A.set;n&&I(p,"innerHTML",{set:function(r){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,r)}})}t.disconnect(),A=null}).observe(A,{childList:!0,subtree:!0}),A.innerHTML=""),et||(Ge||ze?(Q=function(e,t){J.call(t,e)||he(e,t)},U=he):(Q=function(e,t){e[H]||(e[H]=T(!0),he(e,t))},U=Q),R?(ue=!1,e=ee(p,g),t=e.value,n=function(l){var a=new CustomEvent(N,{bubbles:!0});a.attrName=l,a.prevValue=le.call(this,l),a.newValue=null,a[He]=a.attrChange=2,vt.call(this,l),we.call(this,a)},r=function(l,a){var s=Et.call(this,l),i=s&&le.call(this,l),c=new CustomEvent(N,{bubbles:!0});Ye.call(this,l,a),c.attrName=l,c.prevValue=s?i:null,c.newValue=a,s?c.MODIFICATION=c.attrChange=1:c[W]=c.attrChange=0,we.call(this,c)},o=function(l){var a,s=l.currentTarget,i=s[H],c=l.propertyName;i.hasOwnProperty(c)&&(i=i[c],(a=new CustomEvent(N,{bubbles:!0})).attrName=i.name,a.prevValue=i.value||null,a.newValue=i.value=s[c]||null,null==a.prevValue?a[W]=a.attrChange=0:a.MODIFICATION=a.attrChange=1,we.call(s,a))},e.value=function(l,a,s){l===N&&this[y]&&this.setAttribute!==r&&(this[H]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,l,a,s)},I(p,g,e)):F||(V[g](N,Je),V.setAttribute(H,1),V.removeAttribute(H),ue&&(Me=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[H],o[H]=n=Ee(o),n){if(!(r in t))return X(0,o,r,t[r],n[r],W);if(n[r]!==t[r])return X(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return X(2,o,r,t[r],n[r],He)}},X=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,Ie(a)},Ee=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),u[S]=function(e,t){if(n=e.toUpperCase(),tt&&(tt=!1,F?($=function(i,c){function d(f,h){for(var M=0,se=f.length;M<se;h(f[M++]));}return new F(function(f){for(var h,M,se,Ne=0,bt=f.length;Ne<bt;Ne++)"childList"===(h=f[Ne]).type?(d(h.addedNodes,i),d(h.removedNodes,c)):(M=h.target,ce&&M[y]&&"style"!==h.attributeName&&(se=le.call(M,h.attributeName))!==h.oldValue&&M[y](h.attributeName,h.oldValue,se))})}(fe(b),fe(E)),(ve=function(i){return $.observe(i,{childList:!0,subtree:!0}),i})(u),Qe&&(p.attachShadow=function(){return ve(Qe.apply(this,arguments))})):(K=[],u[g]("DOMNodeInserted",Fe(b)),u[g]("DOMNodeRemoved",Fe(E))),u[g](Ze,pe),u[g]("readystatechange",pe),u.importNode=function(i,c){switch(i.nodeType){case 1:return Se(u,Ht,[i,!!c]);case 11:for(var d=u.createDocumentFragment(),f=i.childNodes,h=f.length,M=0;M<h;M++)d.appendChild(u.importNode(f[M],!!c));return d;default:return We.call(i,!!c)}},p.cloneNode=function(i){return Se(this,We,[!!i])}),Oe)return Oe=!1;if(-2<v.call(D,Y+n)+v.call(D,x+n)&&Ve(e),!mt.test(n)||-1<v.call(ft,n))throw new Error("The type "+e+" is invalid");var n,r,o=function(){return a?u.createElement(s,n):u.createElement(s)},l=t||ge,a=be.call(l,_),s=a?t[_].toUpperCase():n;return a&&-1<v.call(D,x+s)&&Ve(s),r=D.push((a?Y:x)+n)-1,L=L.concat(L.length?",":"",a?s+'[is="'+e.toLowerCase()+'"]':s),o.prototype=q[r]=be.call(l,"prototype")?l.prototype:Ce(p),L.length&&me(u.querySelectorAll(L),b),o},u.createElement=Ae=function(e,t){var n=Ue(t),r=n?ae.call(u,e,re(n)):ae.call(u,e),o=""+e,l=v.call(D,(n?Y:x)+(n||o).toUpperCase()),a=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=De(o.toUpperCase(),n))),ce=!u.createElement.innerHTMLHelper,a&&U(r,q[l]),r}),addEventListener("beforeunload",function(){delete u.createElement,delete u.importNode,delete u[S]},!1),z.prototype={constructor:z,define:Z?function(e,t,n){if(n)Pe(e,t,n);else{var r=e.toUpperCase();j[r]={constructor:t,create:[r]},ne.set(t,r),C.define(e,t)}}:Pe,get:Z?function(e){return C.get(e)||Re(e)}:Re,whenDefined:Z?function(e){return Xe.race([C.whenDefined(e),Le(e)])}:Le},!C||/^force/.test(w.type))ke();else if(!w.noBuiltIn)try{!function(e,t,n){var r=new RegExp("^<a\\s+is=('|\")"+n+"\\1></a>$");if(t[_]="a",(e.prototype=Ce($e.prototype)).constructor=e,m.customElements.define(n,e,t),!r.test(u.createElement("a",{is:n}).outerHTML)||!r.test((new e).outerHTML))throw t}(function e(){return Reflect.construct($e,[],e)},{},"document-register-element-a"+xe)}catch{ke()}if(!w.noBuiltIn)try{if(ae.call(u,"a","a").outerHTML.indexOf("is")<0)throw{}}catch{re=function(t){return{is:t.toLowerCase()}}}}(window);
(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[179],{9941:(ne,Z,g)=>{"use strict";var E={};g.r(E),g.d(E,{decode:()=>hge,name:()=>uge});var b={};g.r(b),g.d(b,{name:()=>xge,preprocess:()=>wge});var R={};g.r(R),g.d(R,{name:()=>Ege,preprocess:()=>Age});var A={};g.r(A),g.d(A,{decode:()=>l_e,encode:()=>d_e,name:()=>a_e,preprocess:()=>c_e});var P={};g.r(P),g.d(P,{decode:()=>v_e,name:()=>__e});var _={};g.r(_),g.d(_,{decode:()=>M_e,encode:()=>I_e,name:()=>T_e});var y={};g.r(y),g.d(y,{decode:()=>R_e,encode:()=>k_e,name:()=>D_e});var M={};g.r(M),g.d(M,{decode:()=>P_e,encode:()=>N_e,name:()=>O_e});var U={};g.r(U),g.d(U,{decode:()=>j_e,name:()=>B_e});var N={};function j(t){return"function"==typeof t}function le(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}g.r(N),g.d(N,{delMany:()=>Yke,get:()=>$ke,setMany:()=>Xke});const k=le(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function X(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ce{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(j(i))try{i()}catch(o){e=o instanceof k?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{ie(o)}catch(s){e=e??[],s instanceof k?e=[...e,...s.errors]:e.push(s)}}if(e)throw new k(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ie(e);else{if(e instanceof ce){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&X(n,e)}remove(e){const{_finalizers:n}=this;n&&X(n,e),e instanceof ce&&e._removeParent(this)}}ce.EMPTY=(()=>{const t=new ce;return t.closed=!0,t})();const Y=ce.EMPTY;function oe(t){return t instanceof ce||t&&"closed"in t&&j(t.remove)&&j(t.add)&&j(t.unsubscribe)}function ie(t){j(t)?t():t.unsubscribe()}const $={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},H={setTimeout(t,e,...n){const{delegate:i}=H;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=H;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function v(t){H.setTimeout(()=>{const{onUnhandledError:e}=$;if(!e)throw t;e(t)})}function L(){}const T=Te("C",void 0,void 0);function Te(t,e,n){return{kind:t,value:e,error:n}}let de=null;function we(t){if($.useDeprecatedSynchronousErrorHandling){const e=!de;if(e&&(de={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=de;if(de=null,n)throw i}}else t()}class De extends ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,oe(e)&&e.add(this)):this.destination=Ce}static create(e,n,i){return new Fe(e,n,i)}next(e){this.isStopped?ge(function z(t){return Te("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ge(function fe(t){return Te("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ge(T,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function Ye(t,e){return tt.call(t,e)}class Se{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Pe(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Pe(i)}else Pe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Pe(n)}}}class Fe extends De{constructor(e,n,i){let r;if(super(),j(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&$.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Ye(e.next,o),error:e.error&&Ye(e.error,o),complete:e.complete&&Ye(e.complete,o)}):r=e}this.destination=new Se(r)}}function Pe(t){$.useDeprecatedSynchronousErrorHandling?function Ie(t){$.useDeprecatedSynchronousErrorHandling&&de&&(de.errorThrown=!0,de.error=t)}(t):v(t)}function ge(t,e){const{onStoppedNotification:n}=$;n&&H.setTimeout(()=>n(t,e))}const Ce={closed:!0,next:L,error:function ze(t){throw t},complete:L},Ke="function"==typeof Symbol&&Symbol.observable||"@@observable";function st(t){return t}function Qe(...t){return _e(t)}function _e(t){return 0===t.length?st:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let B=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function K(t){return t&&t instanceof De||function ae(t){return t&&j(t.next)&&j(t.error)&&j(t.complete)}(t)&&oe(t)}(n)?n:new Fe(n,i,r);return we(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=I(i))((r,o)=>{const s=new Fe({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[Ke](){return this}pipe(...n){return _e(n)(this)}toPromise(n){return new(n=I(n))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function I(t){var e;return null!==(e=t??$.Promise)&&void 0!==e?e:Promise}const Le=le(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ve=(()=>{class t extends B{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new me(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Le}next(n){we(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){we(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){we(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?Y:(this.currentObservers=null,o.push(n),new ce(()=>{this.currentObservers=null,X(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new B;return n.source=this,n}}return t.create=(e,n)=>new me(e,n),t})();class me extends Ve{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:Y}}class Q extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function W(t){return j(t?.lift)}function C(t){return e=>{if(W(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function O(t,e,n,i,r){return new he(t,e,n,i,r)}class he extends De{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ue(t,e){return C((n,i)=>{let r=0;n.subscribe(O(i,o=>{i.next(t.call(e,o,r++))}))})}function dt(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function Gt(t,e){return function(n,i){e(n,i,t)}}function se(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function Lr(t){return this instanceof Lr?(this.v=t,this):new Lr(t)}function Br(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function sn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Wc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function $c(t){return j(t?.then)}function Fd(t){return j(t[Ke])}function Xc(t){return Symbol.asyncIterator&&j(t?.[Symbol.asyncIterator])}function Ld(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Bl=function Ll(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Yc(t){return j(t?.[Bl])}function vi(t){return function Do(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(p){i[p]&&(r[p]=function(m){return new Promise(function(x,D){o.push([p,m,x,D])>1||a(p,m)})})}function a(p,m){try{!function c(p){p.value instanceof Lr?Promise.resolve(p.value.v).then(l,d):h(o[0][2],p)}(i[p](m))}catch(x){h(o[0][3],x)}}function l(p){a("next",p)}function d(p){a("throw",p)}function h(p,m){p(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield Lr(n.read());if(r)return yield Lr(void 0);yield yield Lr(i)}}finally{n.releaseLock()}})}function cc(t){return j(t?.getReader)}function xi(t){if(t instanceof B)return t;if(null!=t){if(Fd(t))return function Ra(t){return new B(e=>{const n=t[Ke]();if(j(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Wc(t))return function ka(t){return new B(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if($c(t))return function lc(t){return new B(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,v)})}(t);if(Xc(t))return be(t);if(Yc(t))return function ko(t){return new B(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(cc(t))return function Me(t){return be(vi(t))}(t)}throw Ld(t)}function be(t){return new B(e=>{(function Ee(t,e){var n,i,r,o;return function We(t,e,n,i){return new(n||(n=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(h){s(h)}}function c(d){try{l(i.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):function r(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Br(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function V(t,e,n,i=0,r=!1){const o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function pe(t,e,n=1/0){return j(e)?pe((i,r)=>ue((o,s)=>e(i,o,r,s))(xi(t(i,r))),n):("number"==typeof e&&(n=e),C((i,r)=>function re(t,e,n,i,r,o,s,a){const c=[];let l=0,d=0,h=!1;const p=()=>{h&&!c.length&&!l&&e.complete()},m=D=>l<i?x(D):c.push(D),x=D=>{o&&e.next(D),l++;let F=!1;xi(n(D,d++)).subscribe(O(e,G=>{r?.(G),o?m(G):e.next(G)},()=>{F=!0},void 0,()=>{if(F)try{for(l--;c.length&&l<i;){const G=c.shift();s?V(e,s,()=>x(G)):x(G)}p()}catch(G){e.error(G)}}))};return t.subscribe(O(e,m,()=>{h=!0,p()})),()=>{a?.()}}(i,r,t,n)))}function Be(t=1/0){return pe(st,t)}const $e=new B(t=>t.complete());function It(t){return t&&j(t.schedule)}function Vt(t){return t[t.length-1]}function tn(t){return j(Vt(t))?t.pop():void 0}function gn(t){return It(Vt(t))?t.pop():void 0}function Sr(t,e=0){return C((n,i)=>{n.subscribe(O(i,r=>V(i,t,()=>i.next(r),e),()=>V(i,t,()=>i.complete(),e),r=>V(i,t,()=>i.error(r),e)))})}function go(t,e=0){return C((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function dc(t,e){if(!t)throw new Error("Iterable cannot be null");return new B(n=>{V(n,e,()=>{const i=t[Symbol.asyncIterator]();V(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Pi(t,e){return e?function Bs(t,e){if(null!=t){if(Fd(t))return function Kc(t,e){return xi(t).pipe(go(e),Sr(e))}(t,e);if(Wc(t))return function jr(t,e){return new B(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if($c(t))return function ia(t,e){return xi(t).pipe(go(e),Sr(e))}(t,e);if(Xc(t))return dc(t,e);if(Yc(t))return function Oo(t,e){return new B(n=>{let i;return V(n,e,()=>{i=t[Bl](),V(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void n.error(s)}o?n.complete():n.next(r)},0,!0)}),()=>j(i?.return)&&i.return()})}(t,e);if(cc(t))return function jl(t,e){return dc(vi(t),e)}(t,e)}throw Ld(t)}(t,e):xi(t)}function no(...t){const e=gn(t),n=function mo(t,e){return"number"==typeof Vt(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?xi(i[0]):Be(n)(Pi(i,e)):$e}function Yt(...t){return Pi(t,gn(t))}function ke(t={}){const{connector:e=(()=>new Ve),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,l=0,d=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),s=c=void 0,d=h=!1},x=()=>{const D=s;m(),D?.unsubscribe()};return C((D,F)=>{l++,!h&&!d&&p();const G=c=c??e();F.add(()=>{l--,0===l&&!h&&!d&&(a=Ue(x,r))}),G.subscribe(F),!s&&l>0&&(s=new Fe({next:q=>G.next(q),error:q=>{h=!0,p(),a=Ue(m,n,q),G.error(q)},complete:()=>{d=!0,p(),a=Ue(m,i),G.complete()}}),xi(D).subscribe(s))})(o)}}function Ue(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Fe({next:()=>{i.unsubscribe(),t()}});return xi(e(...n)).subscribe(i)}function Je(t,e){return C((n,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();n.subscribe(O(i,c=>{r?.unsubscribe();let l=0;const d=o++;xi(t(c,d)).subscribe(r=O(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function pt(t,e=st){return t=t??Bt,C((n,i)=>{let r,o=!0;n.subscribe(O(i,s=>{const a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function Bt(t,e){return t===e}function jt(t){for(let e in t)if(t[e]===jt)return e;throw Error("Could not find renamed property on target object.")}function Yn(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ri(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ri).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function br(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const io=jt({__forward_ref__:jt});function zn(t){return t.__forward_ref__=zn,t.toString=function(){return ri(this())},t}function On(t){return Vf(t)?t():t}function Vf(t){return"function"==typeof t&&t.hasOwnProperty(io)&&t.__forward_ref__===zn}function Wg(t){return t&&!!t.\u0275providers}const W0="https://g.co/ng/security#xss";class Rt extends Error{constructor(e,n){super(function Bd(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function jn(t){return"string"==typeof t?t:null==t?"":String(t)}function Ui(t,e){throw new Rt(-201,!1)}function Zo(t,e){null==t&&function pn(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function Et(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jt(t){return{providers:t.providers||[],imports:t.imports||[]}}function _o(t){return gs(t,ra)||gs(t,Hf)}function gs(t,e){return t.hasOwnProperty(e)?t[e]:null}function eh(t){return t&&(t.hasOwnProperty(jd)||t.hasOwnProperty(nr))?t[jd]:null}const ra=jt({\u0275prov:jt}),jd=jt({\u0275inj:jt}),Hf=jt({ngInjectableDef:jt}),nr=jt({ngInjectorDef:jt});var Un=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Un||{});let th;function bo(t){const e=th;return th=t,e}function X0(t,e,n){const i=_o(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Un.Optional?null:void 0!==e?e:void Ui(ri(t))}const Ci=globalThis,Ud={},Po="__NG_DI_FLAG__",Vd="ngTempTokenPath",q0=/\n/gm,Z0="__source";let Hd;function Jc(t){const e=Hd;return Hd=t,e}function mS(t,e=Un.Default){if(void 0===Hd)throw new Rt(-203,!1);return null===Hd?X0(t,void 0,e):Hd.get(t,e&Un.Optional?null:void 0,e)}function it(t,e=Un.Default){return(function $0(){return th}()||mS)(On(t),e)}function Wt(t,e=Un.Default){return it(t,zd(e))}function zd(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Gf(t){const e=[];for(let n=0;n<t.length;n++){const i=On(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Rt(900,!1);let r,o=Un.Default;for(let s=0;s<i.length;s++){const a=i[s],c=Wf(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(it(r,o))}else e.push(it(i))}return e}function js(t,e){return t[Po]=e,t.prototype[Po]=e,t}function Wf(t){return t[Po]}function uc(t){return{toString:t}.toString()}var hc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(hc||{}),Cr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Cr||{});const oa={},wi=[],$f=jt({\u0275cmp:jt}),qg=jt({\u0275dir:jt}),Jg=jt({\u0275pipe:jt}),ev=jt({\u0275mod:jt}),Us=jt({\u0275fac:jt}),lt=jt({__NG_ELEMENT_ID__:jt}),xt=jt({__NG_ENV_ID__:jt});function _t(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function en(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{const o=r,s=n[++i];Ei(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function Vn(t){return 3===t||4===t||6===t}function Ei(t){return 64===t.charCodeAt(0)}function lr(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Ni(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Ni(t,e,n,i,r){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}const Xf="ng-template";function bS(t,e,n){let i=0,r=!0;for(;i<t.length;){let o=t[i++];if("string"==typeof o&&r){const s=t[i++];if(n&&"class"===o&&-1!==_t(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<t.length&&"string"==typeof(o=t[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function _s(t){return 4===t.type&&t.value!==Xf}function Yf(t,e,n){return e===(4!==t.type||n?t.value:Xf)}function yS(t,e,n){let i=4;const r=t.attrs||[],o=function vS(t){for(let e=0;e<t.length;e++)if(Vn(t[e]))return e;return t.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!Yf(t,c,n)||""===c&&1===e.length){if(yo(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==t.attrs){if(!bS(t.attrs,l,n)){if(yo(i))return!1;s=!0}continue}const h=Kf(8&i?"class":c,r,_s(t),n);if(-1===h){if(yo(i))return!1;s=!0;continue}if(""!==l){let p;p=h>o?"":r[h+1].toLowerCase();const m=8&i?p:null;if(m&&-1!==_t(m,l,0)||2&i&&l!==p){if(yo(i))return!1;s=!0}}}}else{if(!s&&!yo(i)&&!yo(c))return!1;if(s&&yo(c))continue;s=!1,i=c|1&i}}return yo(i)||s}function yo(t){return 0==(1&t)}function Kf(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){const s=e[r];if(s===t)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function tv(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function rh(t,e,n=!1){for(let i=0;i<e.length;i++)if(yS(t,e[i],n))return!0;return!1}function qf(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function nv(t,e){return t?":not("+e.trim()+")":e}function xS(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&i){const a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!yo(s)&&(e+=nv(o,r),r=""),i=s,o=o||!yo(i);n++}return""!==r&&(e+=nv(o,r)),e}function vn(t){return uc(()=>{const e=sh(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===hc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Cr.Emulated,styles:t.styles||wi,_:null,schemas:t.schemas||null,tView:null,id:""};ah(n);const i=t.dependencies;return n.directiveDefs=Wd(i,!1),n.pipeDefs=Wd(i,!0),n.id=function ov(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function iv(t){return Qn(t)||kr(t)}function Qf(t){return null!==t}function Zt(t){return uc(()=>({type:t.type,bootstrap:t.bootstrap||wi,declarations:t.declarations||wi,imports:t.imports||wi,exports:t.exports||wi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function oh(t,e){if(null==t)return oa;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}function Ut(t){return uc(()=>{const e=sh(t);return ah(e),e})}function Rr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Qn(t){return t[$f]||null}function kr(t){return t[qg]||null}function No(t){return t[Jg]||null}function sh(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||oa,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||wi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oh(t.inputs,e),outputs:oh(t.outputs)}}function ah(t){t.features?.forEach(e=>e(t))}function Wd(t,e){if(!t)return null;const n=e?No:iv;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(Qf)}const Tr=0,qt=1,hn=2,oi=3,sa=4,ch=5,oo=6,$d=7,dr=8,Vs=9,Zc=10,Sn=11,fc=12,Xd=13,pc=14,$i=15,lh=16,Yd=17,Oa=18,dh=19,sv=20,aa=21,ys=22,uh=23,Ne=24,Jn=25,Qo=1,hi=2,Pa=7,Kd=9,so=11;function es(t){return Array.isArray(t)&&"object"==typeof t[Qo]}function ts(t){return Array.isArray(t)&&!0===t[Qo]}function Qg(t){return 0!=(4&t.flags)}function Fo(t){return t.componentOffset>-1}function tp(t){return 1==(1&t.flags)}function la(t){return!!t.template}function e_(t){return 0!=(512&t[hn])}function da(t,e){return t.hasOwnProperty(Us)?t[Us]:null}let i_=Ci.WeakRef??class mc{constructor(e){this.ref=e}deref(){return this.ref}},MS=0,ha=null,fh=!1;function yr(t){const e=ha;return ha=t,e}class gc{constructor(){this.id=MS++,this.ref=function Vl(t){return new i_(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const i=n.producerNode.deref();if(null!=i&&n.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=fh;fh=!0;try{for(const[n,i]of this.consumers){const r=i.consumerNode.deref();null!=r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),r?.producers.delete(this.id))}}finally{fh=e}}producerAccessed(){if(fh)throw new Error("");if(null===ha)return;let e=ha.producers.get(this.id);void 0===e?(e={consumerNode:ha.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:ha.trackingVersion},ha.producers.set(this.id,e),this.consumers.set(ha.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=ha.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==ha?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let rp=null;function xo(t){const e=yr(null);try{return t()}finally{yr(e)}}const ap=()=>{};class RS extends gc{constructor(e,n,i){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=ap,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=yr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ap,this.watch(this.registerOnCleanup)}finally{yr(e)}}cleanup(){this.cleanupFn()}}class dv{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Mr(){return cp}function cp(t){return t.type.prototype.ngOnChanges&&(t.setInput=ph),kS}function kS(){const t=uv(this),e=t?.current;if(e){const n=t.previous;if(n===oa)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function ph(t,e,n,i){const r=this.declaredInputs[n],o=uv(t)||function OS(t,e){return t[o_]=e}(t,{previous:oa,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new dv(c&&c.currentValue,e,a===oa),t[i]=e}Mr.ngInherit=!0;const o_="__ngSimpleChanges__";function uv(t){return t[o_]||null}const La=function(t,e,n){},lp="svg";function Xi(t){for(;Array.isArray(t);)t=t[Tr];return t}function dp(t,e){return Xi(e[t])}function Lo(t,e){return Xi(e[t.index])}function hv(t,e){return t.data[e]}function el(t,e){return t[e]}function ns(t,e){const n=e[t];return es(n)?n:n[Tr]}function tl(t,e){return null==e?null:t[e]}function c_(t){t[Yd]=0}function mv(t){1024&t[hn]||(t[hn]|=1024,l_(t,1))}function gv(t){1024&t[hn]&&(t[hn]&=-1025,l_(t,-1))}function l_(t,e){let n=t[oi];if(null===n)return;n[ch]+=e;let i=n;for(n=n[oi];null!==n&&(1===e&&1===i[ch]||-1===e&&0===i[ch]);)n[ch]+=e,i=n,n=n[oi]}const Dn={lFrame:Ev(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function bv(){return Dn.bindingsEnabled}function Ba(){return null!==Dn.skipHydrationRootTNode}function Tt(){return Dn.lFrame.lView}function gi(){return Dn.lFrame.tView}function vr(t){return Dn.lFrame.contextLView=t,t[dr]}function xr(t){return Dn.lFrame.contextLView=null,t}function Ri(){let t=_c();for(;null!==t&&64===t.type;)t=t.parent;return t}function _c(){return Dn.lFrame.currentTNode}function fa(t,e){const n=Dn.lFrame;n.currentTNode=t,n.isParent=e}function eu(){return Dn.lFrame.isParent}function fp(){Dn.lFrame.isParent=!1}function ao(){const t=Dn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function vs(){return Dn.lFrame.bindingIndex++}function ja(t){const e=Dn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function VS(t,e){const n=Dn.lFrame;n.bindingIndex=n.bindingRootIndex=t,f_(e)}function f_(t){Dn.lFrame.currentDirectiveIndex=t}function p_(){return Dn.lFrame.currentQueryIndex}function m_(t){Dn.lFrame.currentQueryIndex=t}function wv(t){const e=t[qt];return 2===e.type?e.declTNode:1===e.type?t[oo]:null}function g_(t,e,n){if(n&Un.SkipSelf){let r=e,o=t;for(;!(r=r.parent,null!==r||n&Un.Host||(r=wv(o),null===r||(o=o[pc],10&r.type))););if(null===r)return!1;e=r,t=o}const i=Dn.lFrame=pa();return i.currentTNode=e,i.lView=t,!0}function Eo(t){const e=pa(),n=t[qt];Dn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function pa(){const t=Dn.lFrame,e=null===t?null:t.child;return null===e?Ev(t):e}function Ev(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Av(){const t=Dn.lFrame;return Dn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const mh=Av;function nl(){const t=Av();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Bo(){return Dn.lFrame.selectedIndex}function il(t){Dn.lFrame.selectedIndex=t}function Fi(){const t=Dn.lFrame;return hv(t.tView,t.selectedIndex)}let __=!0;function Gl(){return __}function Ua(t){__=t}function yp(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function _h(t,e,n){xp(t,e,3,n)}function Wl(t,e,n,i){(3&t[hn])===n&&xp(t,e,n,i)}function vp(t,e){let n=t[hn];(3&n)===e&&(n&=8191,n+=1,t[hn]=n)}function xp(t,e,n,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&t[Yd]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(t[Yd]+=65536),(a<o||-1==o)&&(Iv(t,n,e,c),t[Yd]=(4294901760&t[Yd])+c+2),c++}function Mv(t,e){La(4,t,e);const n=yr(null);try{e.call(t)}finally{yr(n),La(5,t,e)}}function Iv(t,e,n,i){const r=n[i]<0,o=n[i+1],a=t[r?-n[i]:n[i]];r?t[hn]>>13<t[Yd]>>16&&(3&t[hn])===e&&(t[hn]+=8192,Mv(a,o)):Mv(a,o)}const is=-1;class tu{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function bh(t){return t!==is}function ol(t){return 32767&t}function xn(t,e){let n=function nu(t){return t>>16}(t),i=e;for(;n>0;)i=i[pc],n--;return i}let iu=!0;function ru(t){const e=iu;return iu=t,e}const Ov=255,Ep=5;let Pv=0;const Ji={};function Ap(t,e){const n=Nv(t,e);if(-1!==n)return n;const i=e[qt];i.firstCreatePass&&(t.injectorIndex=e.length,Sp(i.data,t),Sp(e,null),Sp(i.blueprint,null));const r=yh(t,e),o=t.injectorIndex;if(bh(r)){const s=ol(r),a=xn(r,e),c=a[qt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function Sp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Nv(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function yh(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=Bv(r),null===i)return is;if(n++,r=r[pc],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return is}function b_(t,e,n){!function WS(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(lt)&&(i=n[lt]),null==i&&(i=n[lt]=Pv++);const r=i&Ov;e.data[t+(r>>Ep)]|=1<<r}(t,e,n)}function Fv(t,e,n){if(n&Un.Optional||void 0!==t)return t;Ui()}function Va(t,e,n,i){if(n&Un.Optional&&void 0===i&&(i=null),!(n&(Un.Self|Un.Host))){const r=t[Vs],o=bo(void 0);try{return r?r.get(e,i,n&Un.Optional):X0(e,i,n&Un.Optional)}finally{bo(o)}}return Fv(i,0,n)}function Ao(t,e,n,i=Un.Default,r){if(null!==t){if(2048&e[hn]&&!(i&Un.Self)){const s=function Lv(t,e,n,i,r){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[hn]&&!(512&s[hn]);){const a=Cp(o,s,n,i|Un.Self,Ji);if(a!==Ji)return a;let c=o.parent;if(!c){const l=s[sv];if(l){const d=l.get(n,Ji,i);if(d!==Ji)return d}c=Bv(s),s=s[pc]}o=c}return r}(t,e,n,i,Ji);if(s!==Ji)return s}const o=Cp(t,e,n,i,Ji);if(o!==Ji)return o}return Va(e,n,i,r)}function Cp(t,e,n,i,r){const o=function YS(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(lt)?t[lt]:void 0;return"number"==typeof e?e>=0?e&Ov:qS:e}(n);if("function"==typeof o){if(!g_(e,t,i))return i&Un.Host?Fv(r,0,i):Va(e,n,i,r);try{let s;if(s=o(i),null!=s||i&Un.Optional)return s;Ui()}finally{mh()}}else if("number"==typeof o){let s=null,a=Nv(t,e),c=is,l=i&Un.Host?e[$i][oo]:null;for((-1===a||i&Un.SkipSelf)&&(c=-1===a?yh(t,e):e[a+8],c!==is&&y_(i,!1)?(s=e[qt],a=ol(c),e=xn(c,e)):a=-1);-1!==a;){const d=e[qt];if(au(o,a,d.data)){const h=XS(a,e,n,s,i,l);if(h!==Ji)return h}c=e[a+8],c!==is&&y_(i,e[qt].data[a+8]===l)&&au(o,a,e)?(s=d,a=ol(c),e=xn(c,e)):a=-1}}return r}function XS(t,e,n,i,r,o){const s=e[qt],a=s.data[t+8],d=su(a,s,n,null==i?Fo(a)&&iu:i!=s&&0!=(3&a.type),r&Un.Host&&o===a);return null!==d?$l(e,s,d,a):Ji}function su(t,e,n,i,r){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,p=r?a+d:t.directiveEnd;for(let m=i?a:a+d;m<p;m++){const x=s[m];if(m<c&&n===x||m>=c&&x.type===n)return m}if(r){const m=s[c];if(m&&la(m)&&m.type===n)return c}return null}function $l(t,e,n,i){let r=t[n];const o=e.data;if(function Dv(t){return t instanceof tu}(r)){const s=r;s.resolving&&function eS(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Rt(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Mi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():jn(t)}(o[n]));const a=ru(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?bo(s.injectImpl):null;g_(t,i,Un.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function bp(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=cp(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==l&&bo(l),ru(a),s.resolving=!1,mh()}}return r}function au(t,e,n){return!!(n[e+(t>>Ep)]&1<<t)}function y_(t,e){return!(t&Un.Self||t&Un.Host&&e)}class jo{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return Ao(this._tNode,this._lView,e,zd(i),n)}}function qS(){return new jo(Ri(),Tt())}function Ii(t){return uc(()=>{const e=t.prototype.constructor,n=e[Us]||Tp(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[Us]||Tp(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Tp(t){return Vf(t)?()=>{const e=Tp(On(t));return e&&e()}:da(t)}function Bv(t){const e=t[qt],n=e.type;return 2===n?e.declTNode:1===n?t[oo]:null}function ma(t){return function $S(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(Vn(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===e)return n[r+1];r+=2}}}return null}(Ri(),t)}const Ha="__parameters__";function yc(t,e,n){return uc(()=>{const i=function Mp(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,d){const h=c.hasOwnProperty(Ha)?c[Ha]:Object.defineProperty(c,Ha,{value:[]})[Ha];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function Yl(t,e){t.forEach(n=>Array.isArray(n)?Yl(n,e):e(n))}function x_(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function xh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wh(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function xs(t,e,n){let i=uu(t,e);return i>=0?t[1|i]=n:(i=~i,function jv(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function w_(t,e){const n=uu(t,e);if(n>=0)return t[1|n]}function uu(t,e){return function Uv(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}(t,e,1)}const al=js(yc("Optional"),8),Dp=js(yc("SkipSelf"),4);function Fp(t){return 128==(128&t.flags)}var cl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(cl||{});const M_=new Map;let EC=0;const D_="__ngContext__";function So(t,e){es(e)?(t[D_]=e[dh],function AC(t){M_.set(t[dh],t)}(e)):t[D_]=e}let O_;function P_(t,e){return O_(t,e)}function ll(t){const e=t[oi];return ts(e)?e[oi]:e}function lx(t){return N_(t[fc])}function Vp(t){return N_(t[sa])}function N_(t){for(;null!==t&&!ts(t);)t=t[sa];return t}function pu(t,e,n,i,r){if(null!=i){let o,s=!1;ts(i)?o=i:es(i)&&(s=!0,i=i[Tr]);const a=Xi(i);0===t&&null!==n?null==r?hx(e,n,a):Vi(e,n,a,r||null,!0):1===t&&null!==n?Vi(e,n,a,r||null,!0):2===t?function Xp(t,e,n){const i=Gp(t,e);i&&function FC(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function _x(t,e,n,i,r){const o=n[Pa];o!==Xi(n)&&pu(e,t,i,o,r);for(let a=so;a<n.length;a++){const c=n[a];Ch(c[qt],c,t,e,i,o)}}(e,t,o,n,r)}}function zp(t,e,n){return t.createElement(e,n)}function ux(t,e){const n=t[Kd],i=n.indexOf(e);gv(e),n.splice(i,1)}function os(t,e){if(t.length<=so)return;const n=so+e,i=t[n];if(i){const r=i[lh];null!==r&&r!==t&&ux(r,i),e>0&&(t[n-1][sa]=i[sa]);const o=xh(t,so+e);!function DC(t,e){Ch(t,e,e[Sn],2,null,null),e[Tr]=null,e[oo]=null}(i[qt],i);const s=o[Oa];null!==s&&s.detachView(o[qt]),i[oi]=null,i[sa]=null,i[hn]&=-129}return i}function L_(t,e){if(!(256&e[hn])){const n=e[Sn];e[uh]?.destroy(),e[Ne]?.destroy(),n.destroyNode&&Ch(t,e,n,3,null,null),function OC(t){let e=t[fc];if(!e)return B_(t[qt],t);for(;e;){let n=null;if(es(e))n=e[fc];else{const i=e[so];i&&(n=i)}if(!n){for(;e&&!e[sa]&&e!==t;)es(e)&&B_(e[qt],e),e=e[oi];null===e&&(e=t),es(e)&&B_(e[qt],e),n=e&&e[sa]}e=n}}(e)}}function B_(t,e){if(!(256&e[hn])){e[hn]&=-129,e[hn]|=256,function Kn(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof tu)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];La(4,a,c);try{c.call(a)}finally{La(5,a,c)}}else{La(4,r,o);try{o.call(r)}finally{La(5,r,o)}}}}}(t,e),function Kl(t,e){const n=t.cleanup,i=e[$d];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else n[o].call(i[n[o+1]]);null!==i&&(e[$d]=null);const r=e[aa];if(null!==r){e[aa]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(t,e),1===e[qt].type&&e[Sn].destroy();const n=e[lh];if(null!==n&&ts(e[oi])){n!==e[oi]&&ux(n,e);const i=e[Oa];null!==i&&i.detachView(t)}!function SC(t){M_.delete(t[dh])}(e)}}function j_(t,e,n){return function Uo(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[Tr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=t.data[i.directiveStart+r];if(o===Cr.None||o===Cr.Emulated)return null}return Lo(i,n)}}(t,e.parent,n)}function Vi(t,e,n,i,r){t.insertBefore(e,n,i,r)}function hx(t,e,n){t.appendChild(e,n)}function vc(t,e,n,i,r){null!==i?Vi(t,e,n,i,r):hx(t,e,n)}function Gp(t,e){return t.parentNode(e)}function fx(t,e,n){return px(t,e,n)}let ga,Jl,G_,px=function Wp(t,e,n){return 40&t.type?Lo(t,n):null};function ql(t,e,n,i){const r=j_(t,i,e),o=e[Sn],a=fx(i.parent||e[oo],i,e);if(null!=r)if(Array.isArray(n))for(let c=0;c<n.length;c++)vc(o,r,n[c],a,!1);else vc(o,r,n,a,!1);void 0!==ga&&ga(o,i,e,n,r)}function Hi(t,e){if(null!==e){const n=e.type;if(3&n)return Lo(e,t);if(4&n)return $p(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return Hi(t,i);{const r=t[e.index];return ts(r)?$p(-1,r):Xi(r)}}if(32&n)return P_(e,t)()||Xi(t[e.index]);{const i=ur(t,e);return null!==i?Array.isArray(i)?i[0]:Hi(ll(t[$i]),i):Hi(t,e.next)}}return null}function ur(t,e){return null!==e?t[$i][oo].projection[e.projection]:null}function $p(t,e){const n=so+t+1;if(n<e.length){const i=e[n],r=i[qt].firstChild;if(null!==r)return Hi(i,r)}return e[Pa]}function V_(t,e,n,i,r,o,s){for(;null!=n;){const a=i[n.index],c=n.type;if(s&&0===e&&(a&&So(Xi(a),i),n.flags|=2),32!=(32&n.flags))if(8&c)V_(t,e,n.child,i,r,o,!1),pu(e,t,r,a,o);else if(32&c){const l=P_(n,i);let d;for(;d=l();)pu(e,t,r,d,o);pu(e,t,r,a,o)}else 16&c?gx(t,e,i,n,r,o):pu(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Ch(t,e,n,i,r,o){V_(n,i,t.firstChild,e,r,o,!1)}function gx(t,e,n,i,r,o){const s=n[$i],c=s[oo].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)pu(e,t,r,c[l],o);else{let l=c;const d=s[oi];Fp(i)&&(l.flags|=128),V_(t,e,l,d,r,o,!0)}}function bx(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function z_(t,e,n){const{mergedAttrs:i,classes:r,styles:o}=n;null!==i&&en(t,e,i),null!==r&&bx(t,e,r),null!==o&&function H_(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function _a(t){return function Vo(){if(void 0===Jl&&(Jl=null,Ci.trustedTypes))try{Jl=Ci.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Jl}()?.createHTML(t)||t}class _i{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${W0})`}}class HC extends _i{getTypeName(){return"HTML"}}class xx extends _i{getTypeName(){return"Style"}}class Kp extends _i{getTypeName(){return"Script"}}class zC extends _i{getTypeName(){return"URL"}}class GC extends _i{getTypeName(){return"ResourceURL"}}function Es(t){return t instanceof _i?t.changingThisBreaksApplicationSecurity:t}function Ga(t,e){const n=function WC(t){return t instanceof _i&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${W0})`)}return n===e}class JC{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(_a(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class ZC{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=_a(e),n}}const QC=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mu(t){return(t=String(t)).match(QC)?t:"unsafe:"+t}function xc(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Mh(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const Ex=xc("area,br,col,hr,img,wbr"),Vr=xc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ho=xc("rp,rt"),qp=Mh(Ex,Mh(Vr,xc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mh(Ho,xc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Mh(Ho,Vr)),X_=xc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Y_=Mh(X_,xc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),eT=xc("script,style,template");class tT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!qp.hasOwnProperty(n))return this.sanitizedSomething=!0,!eT.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!Y_.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;X_[a]&&(c=mu(c)),this.buf.push(" ",s,'="',K_(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();qp.hasOwnProperty(n)&&!Ex.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(K_(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const nT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ax=/([^\#-~ |!])/g;function K_(t){return t.replace(/&/g,"&amp;").replace(nT,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Ax,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jp;function Sx(t,e){let n=null;try{Jp=Jp||function wx(t){const e=new ZC(t);return function $_(){try{return!!(new window.DOMParser).parseFromString(_a(""),"text/html")}catch{return!1}}()?new JC(e):e}(t);let i=e?String(e):"";n=Jp.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Jp.getInertBodyElement(i)}while(i!==o);return _a((new tT).sanitizeChildren(q_(n)||n))}finally{if(n){const i=q_(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function q_(t){return"content"in t&&function iT(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var hr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(hr||{});function J_(t){const e=function Ih(){const t=Tt();return t&&t[Zc].sanitizer}();return e?e.sanitize(hr.URL,t)||"":Ga(t,"URL")?Es(t):mu(jn(t))}class bt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Et({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Dh=new bt("ENVIRONMENT_INITIALIZER"),Zp=new bt("INJECTOR",-1),Dx=new bt("INJECTOR_DEF_TYPES");class Z_{get(e,n=Ud){if(n===Ud){const i=new Error(`NullInjectorError: No provider for ${ri(e)}!`);throw i.name="NullInjectorError",i}return n}}function cT(...t){return{\u0275providers:Rx(0,t),\u0275fromNgModule:!0}}function Rx(t,...e){const n=[],i=new Set;let r;const o=s=>{n.push(s)};return Yl(e,s=>{const a=s;Qp(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&kx(r,o),n}function kx(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];eb(r,o=>{e(o,i)})}}function Qp(t,e,n,i){if(!(t=On(t)))return!1;let r=null,o=eh(t);const s=!o&&Qn(t);if(o||s){if(s&&!s.standalone)return!1;r=t}else{const c=t.ngModule;if(o=eh(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Qp(l,e,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{Yl(o.imports,d=>{Qp(d,e,n,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&kx(l,e)}if(!a){const l=da(r)||(()=>new r);e({provide:r,useFactory:l,deps:wi},r),e({provide:Dx,useValue:r,multi:!0},r),e({provide:Dh,useValue:()=>it(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=t;eb(c,d=>{e(d,l)})}}}return r!==t&&void 0!==t.providers}function eb(t,e){for(let n of t)Wg(n)&&(n=n.\u0275providers),Array.isArray(n)?eb(n,e):e(n)}const lT=jt({provide:String,useValue:jt});function tb(t){return null!==t&&"object"==typeof t&&lT in t}function Zl(t){return"function"==typeof t}const nb=new bt("Set Injector scope."),em={},ib={};let tm;function Rh(){return void 0===tm&&(tm=new Z_),tm}class Ws{}class nm extends Ws{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ab(e,s=>this.processProvider(s)),this.records.set(Zp,gu(void 0,this)),r.has("environment")&&this.records.set(Ws,gu(void 0,this));const o=this.records.get(nb);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Dx.multi,wi,Un.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Jc(this),i=bo(void 0);try{return e()}finally{Jc(n),bo(i)}}get(e,n=Ud,i=Un.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xt))return e[xt](this);i=zd(i);const o=Jc(this),s=bo(void 0);try{if(!(i&Un.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function hT(t){return"function"==typeof t||"object"==typeof t&&t instanceof bt}(e)&&_o(e);c=l&&this.injectableDefInScope(l)?gu(rb(e),em):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&Un.Self?Rh():this.parent).get(e,n=i&Un.Optional&&n===Ud?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Vd]=a[Vd]||[]).unshift(ri(e)),o)throw a;return function gS(t,e,n,i){const r=t[Vd];throw e[Z0]&&r.unshift(e[Z0]),t.message=function _S(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=ri(e);if(Array.isArray(e))r=e.map(ri).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):ri(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(q0,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[Vd]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{bo(s),Jc(o)}}resolveInjectorInitializers(){const e=Jc(this),n=bo(void 0);try{const r=this.get(Dh.multi,wi,Un.Self);for(const o of r)o()}finally{Jc(e),bo(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(ri(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Rt(205,!1)}processProvider(e){let n=Zl(e=On(e))?e:On(e&&e.provide);const i=function uT(t){return tb(t)?gu(void 0,t.useValue):gu(Nx(t),em)}(e);if(Zl(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=gu(void 0,em,!0),r.factory=()=>Gf(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===em&&(n.value=ib,n.value=n.factory()),"object"==typeof n.value&&n.value&&function sb(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=On(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function rb(t){const e=_o(t),n=null!==e?e.factory:da(t);if(null!==n)return n;if(t instanceof bt)throw new Rt(204,!1);if(t instanceof Function)return function ob(t){const e=t.length;if(e>0)throw wh(e,"?"),new Rt(204,!1);const n=function uS(t){return t&&(t[ra]||t[Hf])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Rt(204,!1)}function Nx(t,e,n){let i;if(Zl(t)){const r=On(t);return da(r)||rb(r)}if(tb(t))i=()=>On(t.useValue);else if(function Px(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Gf(t.deps||[]));else if(function Ox(t){return!(!t||!t.useExisting)}(t))i=()=>it(On(t.useExisting));else{const r=On(t&&(t.useClass||t.provide));if(!function as(t){return!!t.deps}(t))return da(r)||rb(r);i=()=>new r(...Gf(t.deps))}return i}function gu(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ab(t,e){for(const n of t)Array.isArray(n)?ab(n,e):n&&Wg(n)?ab(n.\u0275providers,e):e(n)}const kh=new bt("AppId",{providedIn:"root",factory:()=>fT}),fT="ng",im=new bt("Platform Initializer"),ba=new bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hr=new bt("AnimationModuleType"),cb=new bt("CSP nonce",{providedIn:"root",factory:()=>function ss(){if(void 0!==G_)return G_;if(typeof document<"u")return document;throw new Rt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Bx=(t,e,n)=>null;function pb(t,e,n=!1){return Bx(t,e,n)}class et{}class ot{}class Nt{resolveComponentFactory(e){throw function ut(t){const e=Error(`No component factory found for ${ri(t)}.`);return e.ngComponent=t,e}(e)}}let Xt=(()=>{class e{}return e.NULL=new Nt,e})();function fn(){return wn(Ri(),Tt())}function wn(t,e){return new Ht(Lo(t,e))}let Ht=(()=>{class e{constructor(i){this.nativeElement=i}}return e.__NG_ELEMENT_ID__=fn,e})();function Cn(t){return t instanceof Ht?t.nativeElement:t}class ci{}let zo=(()=>{var t;class e{}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>null}),e})();class Or{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ir=new Or("16.2.1"),Ss={};function oF(t,e=null,n=null,i){const r=sF(t,e,n,i);return r.resolveInjectorInitializers(),r}function sF(t,e=null,n=null,i,r=new Set){const o=[n||wi,cT(t)];return i=i||("object"==typeof t?void 0:ri(t)),new nm(o,e||Rh(),i||null,r)}let fr=(()=>{var t;class e{static create(i,r){if(Array.isArray(i))return oF({name:""},r,i,"");{const o=i.name??"";return oF({name:o},i.parent,i.providers,o)}}}return(t=e).THROW_IF_NOT_FOUND=Ud,t.NULL=new Z_,t.\u0275prov=Et({token:t,providedIn:"any",factory:()=>it(Zp)}),t.__NG_ELEMENT_ID__=-1,e})();let AT=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new Rt(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const i of this.callbacks)i.invoke()}finally{this.runningCallbacks=!1;for(const i of this.deferredCallbacks)this.callbacks.add(i);this.deferredCallbacks.clear()}}register(i){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(i)}unregister(i){this.callbacks.delete(i),this.deferredCallbacks.delete(i)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>new t}),e})();function mb(t){for(;t;){t[hn]|=64;const e=ll(t);if(e_(t)&&!e)return t;t=e}return null}function ST(t){return t.ngOriginalError}class wc{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ST(e);for(;n&&ST(n);)n=ST(n);return n||null}}const uF=new bt("",{providedIn:"root",factory:()=>!1});class mF extends gc{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){mb(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,i){const r=yr(this);this.trackingVersion++;try{e(n,i)}finally{yr(r)}}destroy(){this.trackingVersion++}}let Vx=null;function gF(){return Vx??=new mF,Vx}function _F(t,e){return t[e]??gF()}function bF(t,e){const n=gF();n.hasReadASignal&&(t[e]=Vx,n.lView=t,Vx=new mF)}const Zn={};function Dt(t){yF(gi(),Tt(),Bo()+t,!1)}function yF(t,e,n,i){if(!i)if(3==(3&e[hn])){const o=t.preOrderCheckHooks;null!==o&&_h(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Wl(e,o,0,n)}il(n)}function He(t,e=Un.Default){const n=Tt();return null===n?it(t,e):Ao(Ri(),n,On(t),e)}function _u(){throw new Error("invalid")}function Hx(t,e,n,i,r,o,s,a,c,l,d){const h=e.blueprint.slice();return h[Tr]=r,h[hn]=140|i,(null!==l||t&&2048&t[hn])&&(h[hn]|=2048),c_(h),h[oi]=h[pc]=t,h[dr]=n,h[Zc]=s||t&&t[Zc],h[Sn]=a||t&&t[Sn],h[Vs]=c||t&&t[Vs]||null,h[oo]=o,h[dh]=function Bp(){return EC++}(),h[ys]=d,h[sv]=l,h[$i]=2==e.type?t[$i]:h,h}function dm(t,e,n,i,r){let o=t.data[e];if(null===o)o=function CT(t,e,n,i,r){const o=_c(),s=eu(),c=t.data[e]=function lY(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Ba()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(t,e,n,i,r),function xv(){return Dn.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=function zl(){const t=Dn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return fa(o,!0),o}function gb(t,e,n,i){if(0===n)return-1;const r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function vF(t,e,n,i,r){const o=_F(e,uh),s=Bo(),a=2&i;try{if(il(-1),a&&e.length>Jn&&yF(t,e,Jn,!1),La(a?2:0,r),a)o.runInContext(n,i,r);else{const l=yr(null);try{n(i,r)}finally{yr(l)}}}finally{a&&null===e[uh]&&bF(e,uh),il(s),La(a?3:1,r)}}function TT(t,e,n){if(Qg(e)){const i=yr(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{yr(i)}}}function MT(t,e,n){bv()&&(function gY(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;Fo(n)&&function EY(t,e,n){const i=Lo(e,t),r=xF(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=zx(t,Hx(t,r,null,s,i,e,null,t[Zc].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Ap(n,e),So(i,e);const s=n.initialInputs;for(let a=r;a<o;a++){const c=t.data[a],l=$l(e,t,a,n);So(l,e),null!==s&&AY(0,a-r,l,c,0,s),la(c)&&(ns(n.index,e)[dr]=$l(e,t,a,n))}}(t,e,n,Lo(n,e)),64==(64&n.flags)&&CF(t,e,n))}function IT(t,e,n=Lo){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(e,t):t[s];t[r++]=a}}}function xF(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=DT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function DT(t,e,n,i,r,o,s,a,c,l,d){const h=Jn+i,p=h+r,m=function iY(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Zn);return n}(h,p),x="function"==typeof l?l():l;return m[qt]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:x,incompleteFirstPass:!1,ssrId:d}}let wF=t=>null;function EF(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const o=t[r];null===i?AF(n,e,r,o):i.hasOwnProperty(r)&&AF(n,e,i[r],o)}return n}function AF(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function ya(t,e,n,i,r,o,s,a){const c=Lo(e,n);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(NT(t,n,d,i,r),Fo(e)&&function hY(t,e){const n=ns(e,t);16&n[hn]||(n[hn]|=64)}(n,e.index)):3&e.type&&(i=function uY(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function RT(t,e,n,i){if(bv()){const r=null===i?null:{"":-1},o=function bY(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(rh(e,s.selectors,!1))if(i||(i=[]),la(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),kT(t,e,a.length)}else i.unshift(s),kT(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&SF(t,e,n,s,r,a),r&&function yY(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const o=n[e[r+1]];if(null==o)throw new Rt(-301,!1);i.push(e[r],o)}}}(n,i,r)}n.mergedAttrs=lr(n.mergedAttrs,n.attrs)}function SF(t,e,n,i,r,o){for(let l=0;l<i.length;l++)b_(Ap(n,e),t,i[l].type);!function xY(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=gb(t,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];n.mergedAttrs=lr(n.mergedAttrs,d.hostAttrs),wY(t,n,e,c,d),vY(c,d,r),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function dY(t,e,n){const r=e.directiveEnd,o=t.data,s=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=o[d],p=n?n.get(h):null,x=p?p.outputs:null;c=EF(h.inputs,d,c,p?p.inputs:null),l=EF(h.outputs,d,l,x);const D=null===c||null===s||_s(e)?null:SY(c,d,s);a.push(D)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,o)}function CF(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=function HS(){return Dn.lFrame.currentDirectiveIndex}();try{il(o);for(let a=i;a<r;a++){const c=t.data[a],l=e[a];f_(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&_Y(c,l)}}finally{il(-1),f_(s)}}function _Y(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function kT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function vY(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;la(e)&&(n[""]=t)}}function wY(t,e,n,i,r){t.data[i]=r;const o=r.factory||(r.factory=da(r.type)),s=new tu(o,la(r),He);t.blueprint[i]=s,n[i]=s,function pY(t,e,n,i,r){const o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function mY(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,i,o)}}(t,e,i,gb(t,n,r.hostVars,Zn),r)}function hl(t,e,n,i,r,o){const s=Lo(t,e);!function OT(t,e,n,i,r,o,s){if(null==o)t.removeAttribute(e,r,n);else{const a=null==s?jn(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}(e[Sn],s,o,t.value,n,i,r)}function AY(t,e,n,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)TF(i,n,s[a++],s[a++],s[a++])}function TF(t,e,n,i,r){const o=yr(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==t.setInput?t.setInput(e,r,n,i):e[i]=r}finally{yr(o)}}function SY(t,e,n){let i=null,r=0;for(;r<n.length;){const o=n[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===i&&(i=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function MF(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null,null]}function IF(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const s=t.data[o];m_(n[i]),s.contentQueries(2,e[o],o)}}}function zx(t,e){return t[fc]?t[Xd][sa]=e:t[fc]=e,t[Xd]=e,e}function PT(t,e,n){m_(0);const i=yr(null);try{e(t,n)}finally{yr(i)}}function DF(t){return t[$d]||(t[$d]=[])}function RF(t){return t.cleanup||(t.cleanup=[])}function OF(t,e){const n=t[Vs],i=n?n.get(wc,null):null;i&&i.handleError(e)}function NT(t,e,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];TF(t.data[s],e[s],i,a,r)}}function CY(t,e){const n=ns(e,t),i=n[qt];!function TY(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[Tr];null!==r&&null===n[ys]&&(n[ys]=pb(r,n[Vs])),FT(i,n,n[dr])}function FT(t,e,n){Eo(e);try{const i=t.viewQuery;null!==i&&PT(1,i,n);const r=t.template;null!==r&&vF(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&IF(t,e),t.staticViewQueries&&PT(2,t.viewQuery,n);const o=t.components;null!==o&&function MY(t,e){for(let n=0;n<e.length;n++)CY(t,e[n])}(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[hn]&=-5,nl()}}let PF=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(i,r,o){const s=typeof Zone>"u"?null:Zone.current,a=new RS(i,d=>{this.all.has(d)&&this.queue.set(d,s)},o);let c;this.all.add(a),a.notify();const l=()=>{a.cleanup(),c?.(),this.all.delete(a),this.queue.delete(a)};return c=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[i,r]of this.queue)this.queue.delete(i),r?r.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>new t}),e})();function Gx(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=br(r,a):2==o&&(i=br(i,a+": "+e[++s]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function _b(t,e,n,i,r=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&i.push(Xi(o)),ts(o)){for(let a=so;a<o.length;a++){const c=o[a],l=c[qt].firstChild;null!==l&&_b(c[qt],c,l,i)}o[Pa]!==o[Tr]&&i.push(o[Pa])}const s=n.type;if(8&s)_b(t,e,n.child,i);else if(32&s){const a=P_(n,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=ur(e,n);if(Array.isArray(a))i.push(...a);else{const c=ll(e[$i]);_b(c[qt],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Wx(t,e,n,i=!0){const r=e[Zc],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{NF(t,e,t.template,n)}catch(c){throw i&&OF(e,c),c}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function NF(t,e,n,i){const r=e[hn];if(256!=(256&r)){e[Zc].effectManager?.flush(),Eo(e);try{c_(e),function vv(t){return Dn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&vF(t,e,n,2,i);const s=3==(3&r);if(s){const l=t.preOrderCheckHooks;null!==l&&_h(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Wl(e,l,0,null),vp(e,0)}if(function RY(t){for(let e=lx(t);null!==e;e=Vp(e)){if(!e[hi])continue;const n=e[Kd];for(let i=0;i<n.length;i++){mv(n[i])}}}(e),FF(e,2),null!==t.contentQueries&&IF(t,e),s){const l=t.contentCheckHooks;null!==l&&_h(e,l)}else{const l=t.contentHooks;null!==l&&Wl(e,l,1),vp(e,1)}!function nY(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const i=_F(e,Ne);try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)il(~o);else{const s=o,a=n[++r],c=n[++r];VS(a,s),i.runInContext(c,2,e[s])}}}finally{null===e[Ne]&&bF(e,Ne),il(-1)}}(t,e);const a=t.components;null!==a&&BF(e,a,0);const c=t.viewQuery;if(null!==c&&PT(2,c,i),s){const l=t.viewCheckHooks;null!==l&&_h(e,l)}else{const l=t.viewHooks;null!==l&&Wl(e,l,2),vp(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[hn]&=-73,gv(e)}finally{nl()}}}function FF(t,e){for(let n=lx(t);null!==n;n=Vp(n))for(let i=so;i<n.length;i++)LF(n[i],e)}function kY(t,e,n){LF(ns(e,t),n)}function LF(t,e){if(!function pv(t){return 128==(128&t[hn])}(t))return;const n=t[qt];if(80&t[hn]&&0===e||1024&t[hn]||2===e)NF(n,t,n.template,t[dr]);else if(t[ch]>0){FF(t,1);const r=t[qt].components;null!==r&&BF(t,r,1)}}function BF(t,e,n){for(let i=0;i<e.length;i++)kY(t,e[i],n)}class bb{get rootNodes(){const e=this._lView,n=e[qt];return _b(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dr]}set context(e){this._lView[dr]=e}get destroyed(){return 256==(256&this._lView[hn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[oi];if(ts(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(os(e,i),xh(n,i))}this._attachedToViewContainer=!1}L_(this._lView[qt],this._lView)}onDestroy(e){!function _v(t,e){if(256==(256&t[hn]))throw new Rt(911,!1);null===t[aa]&&(t[aa]=[]),t[aa].push(e)}(this._lView,e)}markForCheck(){mb(this._cdRefInjectingView||this._lView)}detach(){this._lView[hn]&=-129}reattach(){this._lView[hn]|=128}detectChanges(){Wx(this._lView[qt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kC(t,e){Ch(t,e,e[Sn],2,null,null)}(this._lView[qt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Rt(902,!1);this._appRef=e}}class OY extends bb{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Wx(e[qt],e,e[dr],!1)}checkNoChanges(){}get context(){return null}}class jF extends Xt{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Qn(e);return new yb(n,this.ngModule)}}function UF(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class NY{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=zd(i);const r=this.injector.get(e,Ss,i);return r!==Ss||n===Ss?r:this.parentInjector.get(e,n,i)}}class yb extends ot{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=UF(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return UF(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function wS(t){return t.map(xS).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=(r=r||this.ngModule)instanceof Ws?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new NY(e,o):e,a=s.get(ci,null);if(null===a)throw new Rt(407,!1);const h={rendererFactory:a,sanitizer:s.get(zo,null),effectManager:s.get(PF,null),afterRenderEventManager:s.get(AT,null)},p=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",x=i?function rY(t,e,n,i){const o=i.get(uF,!1)||n===Cr.ShadowDom,s=t.selectRootElement(e,o);return function oY(t){wF(t)}(s),s}(p,i,this.componentDef.encapsulation,s):zp(p,m,function PY(t){const e=t.toLowerCase();return"svg"===e?lp:"math"===e?"math":null}(m)),G=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let q=null;null!==x&&(q=pb(x,s,!0));const ee=DT(0,null,null,1,0,null,null,null,null,null,null),ve=Hx(null,ee,null,G,null,null,h,p,s,null,q);let Oe,Xe;Eo(ve);try{const rt=this.componentDef;let nt,ht=null;rt.findHostDirectiveDefs?(nt=[],ht=new Map,rt.findHostDirectiveDefs(rt,nt,ht),nt.push(rt)):nt=[rt];const gt=function LY(t,e){const n=t[qt],i=Jn;return t[i]=e,dm(n,i,2,"#host",null)}(ve,x),yt=function BY(t,e,n,i,r,o,s){const a=r[qt];!function jY(t,e,n,i){for(const r of t)e.mergedAttrs=lr(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Gx(e,e.mergedAttrs,!0),null!==n&&z_(i,n,e))}(i,t,e,s);let c=null;null!==e&&(c=pb(e,r[Vs]));const l=o.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const h=Hx(r,xF(n),null,d,r[t.index],t,o,l,null,null,c);return a.firstCreatePass&&kT(a,t,i.length-1),zx(r,h),r[t.index]=h}(gt,x,rt,nt,ve,h,p);Xe=hv(ee,Jn),x&&function VY(t,e,n,i){if(i)en(t,n,["ng-version",Ir.full]);else{const{attrs:r,classes:o}=function Jf(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!yo(r))break;r=o}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&en(t,n,r),o&&o.length>0&&bx(t,n,o.join(" "))}}(p,rt,x,i),void 0!==n&&function HY(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const o=n[r];i.push(null!=o?Array.from(o):null)}}(Xe,this.ngContentSelectors,n),Oe=function UY(t,e,n,i,r,o){const s=Ri(),a=r[qt],c=Lo(s,r);SF(a,r,s,n,null,i);for(let d=0;d<n.length;d++)So($l(r,a,s.directiveStart+d,s),r);CF(a,r,s),c&&So(c,r);const l=$l(r,a,s.directiveStart+s.componentOffset,s);if(t[dr]=r[dr]=l,null!==o)for(const d of o)d(l,e);return TT(a,s,t),l}(yt,rt,nt,ht,ve,[zY]),FT(ee,ve,null)}finally{nl()}return new FY(this.componentType,Oe,wn(Xe,ve),ve,Xe)}}class FY extends et{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new OY(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;NT(o[qt],o,r,e,n),this.previousInputValues.set(e,n),mb(ns(this._tNode.index,o))}}get injector(){return new jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function zY(){const t=Ri();yp(Tt()[qt],t)}function _n(t){let e=function VF(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(la(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Rt(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const s=t;s.inputs=$x(t.inputs),s.inputTransforms=$x(t.inputTransforms),s.declaredInputs=$x(t.declaredInputs),s.outputs=$x(t.outputs);const a=r.hostBindings;a&&XY(t,a);const c=r.viewQuery,l=r.contentQueries;if(c&&WY(t,c),l&&$Y(t,l),Yn(t.inputs,r.inputs),Yn(t.declaredInputs,r.declaredInputs),Yn(t.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Yn(s.inputTransforms,r.inputTransforms)),la(r)&&r.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===_n&&(n=!1)}}e=Object.getPrototypeOf(e)}!function GY(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=lr(r.hostAttrs,n=lr(n,r.hostAttrs))}}(i)}function $x(t){return t===oa?{}:t===wi?[]:t}function WY(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function $Y(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,o)=>{e(i,r,o),n(i,r,o)}:e}function XY(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function Xx(t){return!!function LT(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function fl(t,e,n){return t[e]=n}function cs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ai(t,e,n,i){const r=Tt();return cs(r,vs(),e)&&(gi(),hl(Fi(),r,t,e,n,i)),Ai}function hm(t,e,n,i){return cs(t,vs(),n)?e+jn(n)+i:Zn}function mn(t,e,n,i,r,o,s,a){const c=Tt(),l=gi(),d=t+Jn,h=l.firstCreatePass?function bK(t,e,n,i,r,o,s,a,c){const l=e.consts,d=dm(e,t,4,s||null,tl(l,a));RT(e,n,d,tl(l,c)),yp(e,d);const h=d.tView=DT(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,n,i,r,o,s):l.data[d];fa(h,!1);const p=rL(l,c,h,t);Gl()&&ql(l,c,p,h),So(p,c),zx(c,c[d]=MF(p,c,p,h)),tp(h)&&MT(l,c,h),null!=s&&IT(c,h,a)}let rL=function oL(t,e,n,i){return Ua(!0),e[Sn].createComment("")};function $s(t){return el(function h_(){return Dn.lFrame.contextLView}(),Jn+t)}function Lt(t,e,n){const i=Tt();return cs(i,vs(),e)&&ya(gi(),Fi(),i,t,e,i[Sn],n,!1),Lt}function zT(t,e,n,i,r){const s=r?"class":"style";NT(t,n,e.inputs[s],s,i)}function At(t,e,n,i){const r=Tt(),o=gi(),s=Jn+t,a=r[Sn],c=o.firstCreatePass?function wK(t,e,n,i,r,o){const s=e.consts,c=dm(e,t,2,i,tl(s,r));return RT(e,n,c,tl(s,o)),null!==c.attrs&&Gx(c,c.attrs,!1),null!==c.mergedAttrs&&Gx(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,n,i):o.data[s],l=sL(o,r,c,a,e,t);r[s]=l;const d=tp(c);return fa(c,!0),z_(a,l,c),32!=(32&c.flags)&&Gl()&&ql(o,r,l,c),0===function u_(){return Dn.lFrame.elementDepthCount}()&&So(l,r),function si(){Dn.lFrame.elementDepthCount++}(),d&&(MT(o,r,c),TT(o,c,r)),null!==i&&IT(r,c),At}function Mt(){let t=Ri();eu()?fp():(t=t.parent,fa(t,!1));const e=t;(function yv(t){return Dn.skipHydrationRootTNode===t})(e)&&function jS(){Dn.skipHydrationRootTNode=null}(),function FS(){Dn.lFrame.elementDepthCount--}();const n=gi();return n.firstCreatePass&&(yp(n,t),Qg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function GS(t){return 0!=(8&t.flags)}(e)&&zT(n,e,Tt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function bc(t){return 0!=(16&t.flags)}(e)&&zT(n,e,Tt(),e.stylesWithoutHost,!1),Mt}function Ln(t,e,n,i){return At(t,e,n,i),Mt(),Ln}let sL=(t,e,n,i,r,o)=>(Ua(!0),zp(i,r,function gh(){return Dn.lFrame.currentNamespace}()));function Ec(){return Tt()}function vm(t){return!!t&&"function"==typeof t.then}function lL(t){return!!t&&"function"==typeof t.subscribe}function bn(t,e,n,i){const r=Tt(),o=gi(),s=Ri();return function uL(t,e,n,i,r,o,s){const a=tp(i),l=t.firstCreatePass&&RF(t),d=e[dr],h=DF(e);let p=!0;if(3&i.type||s){const D=Lo(i,e),F=s?s(D):D,G=h.length,q=s?ve=>s(Xi(ve[i.index])):i.index;let ee=null;if(!s&&a&&(ee=function MK(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=e[$d],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(t,e,r,i.index)),null!==ee)(ee.__ngLastListenerFn__||ee).__ngNextListenerFn__=o,ee.__ngLastListenerFn__=o,p=!1;else{o=fL(i,e,d,o,!1);const ve=n.listen(F,r,o);h.push(o,ve),l&&l.push(r,q,G,G+1)}}else o=fL(i,e,d,o,!1);const m=i.outputs;let x;if(p&&null!==m&&(x=m[r])){const D=x.length;if(D)for(let F=0;F<D;F+=2){const Oe=e[x[F]][x[F+1]].subscribe(o),Xe=h.length;h.push(o,Oe),l&&l.push(r,i.index,Xe,-(Xe+1))}}}(o,r,r[Sn],s,t,e,i),bn}function hL(t,e,n,i){try{return La(6,e,n),!1!==n(i)}catch(r){return OF(t,r),!1}finally{La(7,e,n)}}function fL(t,e,n,i,r){return function o(s){if(s===Function)return i;mb(t.componentOffset>-1?ns(t.index,e):e);let c=hL(e,n,i,s),l=o.__ngNextListenerFn__;for(;l;)c=hL(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function Pn(t=1){return function Sv(t){return(Dn.lFrame.contextLView=function Cv(t,e){for(;t>0;)e=e[pc],t--;return e}(t,Dn.lFrame.contextLView))[dr]}(t)}function IK(t,e){let n=null;const i=function Di(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?rh(t,o,!0):qf(i,o))return r}else n=r}return n}function zr(t){const e=Tt()[$i][oo];if(!e.projection){const i=e.projection=wh(t?t.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=t?IK(o,t):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Rn(t,e=0,n){const i=Tt(),r=gi(),o=dm(r,Jn+t,16,null,n||null);null===o.projection&&(o.projection=e),fp(),(!i[ys]||Ba())&&32!=(32&o.flags)&&function BC(t,e,n){gx(e[Sn],0,e,n,j_(t,n,e),fx(n.parent||e[oo],n,e))}(r,i,o)}function Zx(t,e,n){return GT(t,"",e,"",n),Zx}function GT(t,e,n,i,r){const o=Tt(),s=hm(o,e,n,i);return s!==Zn&&ya(gi(),Fi(),o,t,s,o[Sn],r,!1),GT}function Qx(t,e){return t<<17|e<<2}function bu(t){return t>>17&32767}function WT(t){return 2|t}function Bh(t){return(131068&t)>>2}function $T(t,e){return-131069&t|e<<2}function XT(t){return 1|t}function wL(t,e,n,i,r){const o=t[n+1],s=null===e;let a=i?bu(o):Bh(o),c=!1;for(;0!==a&&(!1===c||s);){const d=t[a+1];NK(t[a],e)&&(c=!0,t[a+1]=i?XT(d):WT(d)),a=i?bu(d):Bh(d)}c&&(t[n+1]=i?WT(o):XT(o))}function NK(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&uu(t,e)>=0}const co={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function EL(t){return t.substring(co.key,co.keyEnd)}function AL(t,e){const n=co.textEnd;return n===e?-1:(e=co.keyEnd=function jK(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,co.key=e,n),xm(t,e,n))}function xm(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ew(t,e,n){return Sc(t,e,n,!1),ew}function kn(t,e){return Sc(t,e,null,!0),kn}function va(t){!function Cc(t,e,n,i){const r=gi(),o=ja(2);r.firstUpdatePass&&DL(r,null,o,i);const s=Tt();if(n!==Zn&&cs(s,o,n)){const a=r.data[Bo()];if(PL(a,i)&&!IL(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=br(c,n||"")),zT(r,a,s,n,i)}else!function KK(t,e,n,i,r,o,s,a){r===Zn&&(r=wi);let c=0,l=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const p=c<r.length?r[c+1]:void 0,m=l<o.length?o[l+1]:void 0;let D,x=null;d===h?(c+=2,l+=2,p!==m&&(x=h,D=m)):null===h||null!==d&&d<h?(c+=2,x=d):(l+=2,x=h,D=m),null!==x&&kL(t,e,n,i,x,D,s,a),d=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}(r,a,s,s[Sn],s[o+1],s[o+1]=function XK(t,e,n){if(null==n||""===n)return wi;const i=[],r=Es(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,o)}}(YK,pl,t,!0)}function pl(t,e){for(let n=function LK(t){return function CL(t){co.key=0,co.keyEnd=0,co.value=0,co.valueEnd=0,co.textEnd=t.length}(t),AL(t,xm(t,0,co.textEnd))}(e);n>=0;n=AL(e,n))xs(t,EL(e),!0)}function Sc(t,e,n,i){const r=Tt(),o=gi(),s=ja(2);o.firstUpdatePass&&DL(o,t,s,i),e!==Zn&&cs(r,s,e)&&kL(o,o.data[Bo()],r,r[Sn],t,r[s+1]=function qK(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=ri(Es(t)))),t}(e,n),i,s)}function IL(t,e){return e>=t.expandoStartIndex}function DL(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[Bo()],s=IL(t,n);PL(o,i)&&null===e&&!s&&(e=!1),e=function zK(t,e,n,i){const r=function gp(t){const e=Dn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Cb(n=KT(null,t,e,n,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==r)if(n=KT(r,t,e,n,i),null===o){let c=function GK(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Bh(i))return t[bu(i)]}(t,e,i);void 0!==c&&Array.isArray(c)&&(c=KT(null,t,e,c[1],i),c=Cb(c,e.attrs,i),function WK(t,e,n,i){t[bu(n?e.classBindings:e.styleBindings)]=i}(t,e,i,c))}else o=function $K(t,e,n){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Cb(i,t[o].hostAttrs,n);return Cb(i,e.attrs,n)}(t,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),n}(r,o,e,i),function OK(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=bu(s),c=Bh(s);t[i]=n;let d,l=!1;if(Array.isArray(n)?(d=n[1],(null===d||uu(n,d)>0)&&(l=!0)):d=n,r)if(0!==c){const p=bu(t[a+1]);t[i+1]=Qx(p,a),0!==p&&(t[p+1]=$T(t[p+1],i)),t[a+1]=function RK(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=Qx(a,0),0!==a&&(t[a+1]=$T(t[a+1],i)),a=i;else t[i+1]=Qx(c,0),0===a?a=i:t[c+1]=$T(t[c+1],i),c=i;l&&(t[i+1]=WT(t[i+1])),wL(t,d,i,!0),wL(t,d,i,!1),function PK(t,e,n,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&uu(o,e)>=0&&(n[i+1]=XT(n[i+1]))}(e,d,t,i,o),s=Qx(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,n,s,i)}}function KT(t,e,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],i=Cb(i,o.hostAttrs,r),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Cb(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),xs(t,s,!!n||e[++o]))}return void 0===t?null:t}function YK(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&xs(t,i,n)}function kL(t,e,n,i,r,o,s,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],d=function kK(t){return 1==(1&t)}(l)?OL(c,e,n,r,Bh(l),s):void 0;tw(d)||(tw(o)||function DK(t){return 2==(2&t)}(l)&&(o=OL(c,null,n,r,a,s)),function Th(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:cl.DashCase;null==r?t.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=cl.Important),t.setStyle(n,i,r,o))}}(i,s,dp(Bo(),n),r,o))}function OL(t,e,n,i,r,o){const s=null===e;let a;for(;r>0;){const c=t[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let p=n[r+1];p===Zn&&(p=h?wi:void 0);let m=h?w_(p,i):d===i?p:void 0;if(l&&!tw(m)&&(m=w_(c,i)),tw(m)&&(a=m,s))return a;const x=t[r+1];r=s?bu(x):Bh(x)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=w_(c,i))}return a}function tw(t){return void 0!==t}function PL(t,e){return 0!=(t.flags&(e?8:16))}function li(t,e=""){const n=Tt(),i=gi(),r=t+Jn,o=i.firstCreatePass?dm(i,r,1,e,null):i.data[r],s=NL(i,n,o,e,t);n[r]=s,Gl()&&ql(i,n,s,o),fa(o,!1)}let NL=(t,e,n,i,r)=>(Ua(!0),function Hp(t,e){return t.createText(e)}(e[Sn],i));function Co(t){return Cs("",t,""),Co}function Cs(t,e,n){const i=Tt(),r=hm(i,t,e,n);return r!==Zn&&function ed(t,e,n){const i=dp(e,t);!function dx(t,e,n){t.setValue(e,n)}(t[Sn],i,n)}(i,Bo(),r),Cs}function ml(t,e,n){const i=Tt();return cs(i,vs(),e)&&ya(gi(),Fi(),i,t,e,i[Sn],n,!0),ml}const Em="en-US";let tB=Em;function QT(t,e,n,i,r){if(t=On(t),Array.isArray(t))for(let o=0;o<t.length;o++)QT(t[o],e,n,i,r);else{const o=gi(),s=Tt(),a=Ri();let c=Zl(t)?t:On(t.provide);const l=Nx(t),d=1048575&a.providerIndexes,h=a.directiveStart,p=a.providerIndexes>>20;if(Zl(t)||!t.multi){const m=new tu(l,r,He),x=tM(c,e,r?d:d+p,h);-1===x?(b_(Ap(a,s),o,c),eM(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[x]=m,s[x]=m)}else{const m=tM(c,e,d+p,h),x=tM(c,e,d,d+p),F=x>=0&&n[x];if(r&&!F||!r&&!(m>=0&&n[m])){b_(Ap(a,s),o,c);const G=function _J(t,e,n,i,r){const o=new tu(t,n,He);return o.multi=[],o.index=e,o.componentProviders=0,CB(o,r,i&&!n),o}(r?gJ:mJ,n.length,r,i,l);!r&&F&&(n[x].providerFactory=G),eM(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(G),s.push(G)}else eM(o,t,m>-1?m:x,CB(n[r?x:m],l,!r&&i));!r&&i&&F&&n[x].componentProviders++}}}function eM(t,e,n,i){const r=Zl(e),o=function dT(t){return!!t.useClass}(e);if(r||o){const c=(o?On(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(n);-1===d?l.push(n,[i,c]):l[d+1].push(i,c)}else l.push(n,c)}}}function CB(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function tM(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function mJ(t,e,n,i){return nM(this.multi,[])}function gJ(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=$l(n,n[qt],this.providerFactory.index,i);o=a.slice(0,s),nM(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],nM(r,o);return o}function nM(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function di(t,e=[]){return n=>{n.providersResolver=(i,r)=>function pJ(t,e,n){const i=gi();if(i.firstCreatePass){const r=la(t);QT(n,i.data,i.blueprint,r,!0),QT(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}class Uh{}class TB{}class iM extends Uh{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jF(this);const r=function bs(t,e){const n=t[ev]||null;if(!n&&!0===e)throw new Error(`Type ${ri(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Ql(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=sF(e,n,[{provide:Uh,useValue:this},{provide:Xt,useValue:this.componentFactoryResolver},...i],ri(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class rM extends TB{constructor(e){super(),this.moduleType=e}create(e){return new iM(this.moduleType,e,[])}}function sw(t,e,n){const i=ao()+t,r=Tt();return r[i]===Zn?fl(r,i,n?e.call(n):e()):function vb(t,e){return t[e]}(r,i)}function LB(t,e,n,i,r,o){const s=e+n;return cs(t,s,r)?fl(t,s+1,o?i.call(o,r):i(r)):function kb(t,e){const n=t[e];return n===Zn?void 0:n}(t,s+1)}function Yr(t,e){const n=gi();let i;const r=t+Jn;n.firstCreatePass?(i=function BJ(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=da(i.type)),a=bo(He);try{const c=ru(!1),l=o();return ru(c),function xK(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,Tt(),r,l),l}finally{bo(a)}}function Go(t,e,n){const i=t+Jn,r=Tt(),o=el(r,i);return function Ob(t,e){return t[qt].data[e].pure}(r,i)?LB(r,ao(),e,o.transform,n,o):o.transform(n)}function sM(t){return e=>{setTimeout(t,void 0,e)}}const rn=class HJ extends Ve{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=sM(o),r&&(r=sM(r)),s&&(s=sM(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof ce&&e.add(a),a}};function zJ(){return this._results[Symbol.iterator]()}class Pb{get changes(){return this._changes||(this._changes=new rn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Pb.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=zJ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function zs(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function nC(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function WJ(t,e,n,i=!0){const r=e[qt];if(function PC(t,e,n,i){const r=so+i,o=n.length;i>0&&(n[r-1][sa]=e),i<o-so?(e[sa]=n[r],x_(n,so+i,e)):(n.push(e),e[sa]=null),e[oi]=n;const s=e[lh];null!==s&&n!==s&&function NC(t,e){const n=t[Kd];e[$i]!==e[oi][oi][$i]&&(t[hi]=!0),null===n?t[Kd]=[e]:n.push(e)}(s,e);const a=e[Oa];null!==a&&a.insertView(t),e[hn]|=128}(r,e,t,n),i){const o=$p(n,t),s=e[Sn],a=Gp(s,t[Pa]);null!==a&&function RC(t,e,n,i,r,o){i[Tr]=r,i[oo]=e,Ch(t,i,n,1,r,o)}(r,t[oo],s,e,a,o)}}let $a=(()=>{class e{}return e.__NG_ELEMENT_ID__=YJ,e})();const $J=$a,XJ=class extends $J{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=function GJ(t,e,n,i){const r=e.tView,a=Hx(t,r,n,4096&t[hn]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[lh]=t[e.index];const l=t[Oa];return null!==l&&(a[Oa]=l.createEmbeddedView(r)),FT(r,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:i});return new bb(r)}};function YJ(){return cw(Ri(),Tt())}function cw(t,e){return 4&t.type?new XJ(e,t,wn(t,e)):null}let Wo=(()=>{class e{}return e.__NG_ELEMENT_ID__=eZ,e})();function eZ(){return YB(Ri(),Tt())}const tZ=Wo,$B=class extends tZ{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return wn(this._hostTNode,this._hostLView)}get injector(){return new jo(this._hostTNode,this._hostLView)}get parentInjector(){const e=yh(this._hostTNode,this._hostLView);if(bh(e)){const n=xn(e,this._hostLView),i=ol(e);return new jo(n[qt].data[i+8],n)}return new jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=XB(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-so}createEmbeddedView(e,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,n,i,r,o){const s=e&&!function vh(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const D=n||{};a=D.index,i=D.injector,r=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}const c=s?e:new yb(Qn(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const F=(s?l:this.parentInjector).get(Ws,null);F&&(o=F)}Qn(c.componentType??{});const m=c.create(l,r,null,o);return this.insertImpl(m.hostView,a,false),m}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,i){const r=e._lView;if(function up(t){return ts(t[oi])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[oi],d=new $B(l,l[oo],l[oi]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return WJ(a,r,s,!i),e.attachToViewContainerRef(),x_(aM(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=XB(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=os(this._lContainer,n);i&&(xh(aM(this._lContainer),n),L_(i[qt],i))}detach(e){const n=this._adjustIndex(e,-1),i=os(this._lContainer,n);return i&&null!=xh(aM(this._lContainer),n)?new bb(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function XB(t){return t[8]}function aM(t){return t[8]||(t[8]=[])}function YB(t,e){let n;const i=e[t.index];return ts(i)?n=i:(n=MF(i,e,null,t),e[t.index]=n,zx(e,n)),KB(n,e,t,i),new $B(n,t,e)}let KB=function qB(t,e,n,i){if(t[Pa])return;let r;r=8&n.type?Xi(i):function nZ(t,e){const n=t[Sn],i=n.createComment(""),r=Lo(e,t);return Vi(n,Gp(n,r),i,function LC(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Pa]=r};class cM{constructor(e){this.queryList=e,this.matches=null}clone(){return new cM(this.queryList)}setDirty(){this.queryList.setDirty()}}class lM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new lM(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==t3(e,n).matches&&this.queries[n].setDirty()}}class JB{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class dM{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new dM(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class uM{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new uM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,n,oZ(n,o)),this.matchTNodeWithReadOption(e,n,su(n,e,o,!1,!1))}else i===$a?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,su(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ht||r===Wo||r===$a&&4&n.type)this.addMatch(n.index,-2);else{const o=su(n,e,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function oZ(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function aZ(t,e,n,i){return-1===n?function sZ(t,e){return 11&t.type?wn(t,e):4&t.type?cw(t,e):null}(e,t):-2===n?function cZ(t,e,n){return n===Ht?wn(e,t):n===$a?cw(e,t):n===Wo?YB(e,t):void 0}(t,e,i):$l(t,t[qt],n,e)}function ZB(t,e,n,i){const r=e[Oa].queries[i];if(null===r.matches){const o=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:aZ(e,o[l],s[c+1],n.metadata.read))}r.matches=a}return r.matches}function hM(t,e,n,i){const r=t.queries.getByIndex(n),o=r.matches;if(null!==o){const s=ZB(t,e,r,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],d=e[-c];for(let h=so;h<d.length;h++){const p=d[h];p[lh]===p[oi]&&hM(p[qt],p,l,i)}if(null!==d[Kd]){const h=d[Kd];for(let p=0;p<h.length;p++){const m=h[p];hM(m[qt],m,l,i)}}}}}return i}function Nn(t){const e=Tt(),n=gi(),i=p_();m_(i+1);const r=t3(n,i);if(t.dirty&&function fv(t){return 4==(4&t[hn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?hM(n,e,i,[]):ZB(n,e,r,i);t.reset(o,Cn),t.notifyOnChanges()}return!0}return!1}function Li(t,e,n){const i=gi();i.firstCreatePass&&(e3(i,new JB(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),QB(i,Tt(),e)}function Fn(){return function lZ(t,e){return t[Oa].queries[e].queryList}(Tt(),p_())}function QB(t,e,n){const i=new Pb(4==(4&n));(function cY(t,e,n,i){const r=DF(e);r.push(n),t.firstCreatePass&&RF(t).push(i,r.length-1)})(t,e,i,i.destroy),null===e[Oa]&&(e[Oa]=new lM),e[Oa].queries.push(new cM(i))}function e3(t,e,n){null===t.queries&&(t.queries=new dM),t.queries.track(new uM(e,n))}function t3(t,e){return t.queries.getByIndex(e)}const bM=new bt("Application Initializer");let yM=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Wt(bM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const o of this.appInits){const s=o();if(vm(s))i.push(s);else if(lL(s)){const a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});i.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),0===i.length&&r(),this.initialized=!0}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const gl=new bt("LocaleId",{providedIn:"root",factory:()=>Wt(gl,Un.Optional|Un.SkipSelf)||function RZ(){return typeof $localize<"u"&&$localize.locale||Em}()});let uw=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Q(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function E3(...t){}class an{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rn(!1),this.onMicrotaskEmpty=new rn(!1),this.onStable=new rn(!1),this.onError=new rn(!1),typeof Zone>"u")throw new Rt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function tQ(){const t="function"==typeof Ci.requestAnimationFrame;let e=Ci[t?"requestAnimationFrame":"setTimeout"],n=Ci[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function rQ(t){const e=()=>{!function iQ(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ci,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,EM(t),t.isCheckStableRunning=!0,wM(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),EM(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return A3(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),S3(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return A3(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),S3(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,EM(t),wM(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!an.isInAngularZone())throw new Rt(909,!1)}static assertNotInAngularZone(){if(an.isInAngularZone())throw new Rt(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,nQ,E3,E3);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const nQ={};function wM(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function EM(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function A3(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function S3(t){t._nesting--,wM(t)}class oQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rn,this.onMicrotaskEmpty=new rn,this.onStable=new rn,this.onError=new rn}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const C3=new bt("",{providedIn:"root",factory:T3});function T3(){const t=Wt(an);let e=!0;return no(new B(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),new B(r=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{an.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=t.onUnstable.subscribe(()=>{an.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(ke()))}const M3=new bt(""),fw=new bt("");let CM,AM=(()=>{var t;class e{constructor(i,r,o){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CM||(function sQ(t){CM=t}(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{an.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:s,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}}return(t=e).\u0275fac=function(i){return new(i||t)(it(an),it(SM),it(fw))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),SM=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return CM?.findTestabilityInTree(this,i,r)??null}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),yu=null;const I3=new bt("AllowMultipleToken"),TM=new bt("PlatformDestroyListeners"),pw=new bt("appBootstrapListener");function k3(t,e,n=[]){const i=`Platform: ${e}`,r=new bt(i);return(o=[])=>{let s=MM();if(!s||s.injector.get(I3,!1)){const a=[...n,...o,{provide:r,useValue:!0}];t?t(a):function lQ(t){if(yu&&!yu.get(I3,!1))throw new Rt(400,!1);(function D3(){!function Fa(t){rp=t}(()=>{throw new Rt(600,!1)})})(),yu=t;const e=t.get(P3);(function R3(t){t.get(im,null)?.forEach(n=>n())})(t)}(function O3(t=[],e){return fr.create({name:e,providers:[{provide:nb,useValue:"platform"},{provide:TM,useValue:new Set([()=>yu=null])},...t]})}(a,i))}return function uQ(t){const e=MM();if(!e)throw new Rt(401,!1);return e}()}}function MM(){return yu?.get(P3)??null}let P3=(()=>{var t;class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const o=function hQ(t="zone.js",e){return"noop"===t?new oQ:"zone.js"===t?new an(e):t}(r?.ngZone,function N3(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const s=function yJ(t,e,n){return new iM(t,e,n)}(i.moduleType,this.injector,function U3(t){return[{provide:an,useFactory:t},{provide:Dh,multi:!0,useFactory:()=>{const e=Wt(pQ,{optional:!0});return()=>e.initialize()}},{provide:j3,useFactory:fQ},{provide:C3,useFactory:T3}]}(()=>o)),a=s.injector.get(wc,null);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{mw(this._modules,s),c.unsubscribe()})}),function F3(t,e,n){try{const i=n();return vm(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(a,o,()=>{const c=s.injector.get(yM);return c.runInitializers(),c.donePromise.then(()=>(function nB(t){Zo(t,"Expected localeId to be defined"),"string"==typeof t&&(tB=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(gl,Em)||Em),this._moduleDoBootstrap(s),s))})})}bootstrapModule(i,r=[]){const o=L3({},r);return function aQ(t,e,n){const i=new rM(n);return Promise.resolve(i)}(0,0,i).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(i){const r=i.injector.get(Vh);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!i.instance.ngDoBootstrap)throw new Rt(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Rt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get(TM,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(i){return new(i||t)(it(fr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function L3(t,e){return Array.isArray(e)?e.reduce(L3,t):{...t,...e}}let Vh=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Wt(j3),this.zoneIsStable=Wt(C3),this.componentTypes=[],this.components=[],this.isStable=Wt(uw).hasPendingTasks.pipe(Je(i=>i?Yt(!1):this.zoneIsStable),pt(),ke()),this._injector=Wt(Ws)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const o=i instanceof ot;if(!this._injector.get(yM).done)throw!o&&function Gd(t){const e=Qn(t)||kr(t)||No(t);return null!==e&&e.standalone}(i),new Rt(405,!1);let a;a=o?i:this._injector.get(Xt).resolveComponentFactory(i),this.componentTypes.push(a.componentType);const c=function cQ(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Uh),d=a.create(fr.NULL,[],r||a.selector,c),h=d.location.nativeElement,p=d.injector.get(M3,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),mw(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Rt(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;mw(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(pw,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>mw(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Rt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function mw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const j3=new bt("",{providedIn:"root",factory:()=>Wt(wc).handleError.bind(void 0)});function fQ(){const t=Wt(an),e=Wt(wc);return n=>t.runOutsideAngular(()=>e.handleError(n))}let pQ=(()=>{var t;class e{constructor(){this.zone=Wt(an),this.applicationRef=Wt(Vh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let qr=(()=>{class e{}return e.__NG_ELEMENT_ID__=gQ,e})();function gQ(t){return function _Q(t,e,n){if(Fo(t)&&!n){const i=ns(t.index,e);return new bb(i,i)}return 47&t.type?new bb(e[$i],e):null}(Ri(),Tt(),16==(16&t))}class G3{constructor(){}supports(e){return Xx(e)}create(e){return new EQ(e)}}const wQ=(t,e)=>e;class EQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wQ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<$3(i,r,o)?n:i,a=$3(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,d=c-r;if(l!=d){for(let p=0;p<l;p++){const m=p<o.length?o[p]:o[p]=0,x=m+p;d<=x&&x<l&&(o[p]=m+1)}o[s.previousIndex]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Xx(e))throw new Rt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function eK(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new AQ(n,i),o,r),e}_verifyReinsertion(e,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new W3),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new W3),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class AQ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SQ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class W3{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new SQ,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $3(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function Y3(){return new bw([new G3])}let bw=(()=>{var t;class e{constructor(i){this.factories=i}static create(i,r){if(null!=r){const o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||Y3()),deps:[[e,new Dp,new al]]}}find(i){const r=this.factories.find(o=>o.supports(i));if(null!=r)return r;throw new Rt(901,!1)}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:Y3}),e})();const DQ=k3(null,"core",[]);let RQ=(()=>{var t;class e{constructor(i){}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Vh))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),e})(),PM=null;function vu(){return PM}class GQ{}const Wn=new bt("DocumentToken");let ij=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return Wt(WQ)},providedIn:"platform"}),e})(),WQ=(()=>{var t;class e extends ij{constructor(){super(),this._doc=Wt(Wn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vu().getBaseHref(this._doc)}onPopState(i){const r=vu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=vu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function rj(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function oj(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function zh(t){return t&&"?"!==t[0]?"?"+t:t}let vw=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return Wt(XQ)},providedIn:"root"}),e})();const $Q=new bt("appBaseHref");let XQ=(()=>{var t;class e extends vw{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Wt(Wn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return rj(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+zh(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){const a=this.prepareExternalUrl(o+zh(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){const a=this.prepareExternalUrl(o+zh(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(ij),it($Q,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),jb=(()=>{var t;class e{constructor(i){this._subject=new rn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function qQ(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(oj(sj(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+zh(r))}normalize(i){return e.stripTrailingSlash(function KQ(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,sj(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+zh(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+zh(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}}return(t=e).normalizeQueryParams=zh,t.joinWithSlash=rj,t.stripTrailingSlash=oj,t.\u0275fac=function(i){return new(i||t)(it(vw))},t.\u0275prov=Et({token:t,factory:function(){return function YQ(){return new jb(it(vw))}()},providedIn:"root"}),e})();function sj(t){return t.replace(/\/index.html$/,"")}function mj(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}class Nee{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rd=(()=>{var t;class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Nee(o.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,a),bj(c,o)}});for(let o=0,s=r.length;o<s;o++){const c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{bj(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Wo),He($a),He(bw))},t.\u0275dir=Ut({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function bj(t,e){t.context.$implicit=e.item}let Mc=(()=>{var t;class e{constructor(i,r){this._viewContainer=i,this._context=new Fee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){yj("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){yj("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Wo),He($a))},t.\u0275dir=Ut({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Fee{constructor(){this.$implicit=null,this.ngIf=null}}function yj(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ri(e)}'.`)}class jee{createSubscription(e,n){return xo(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){xo(()=>e.unsubscribe())}}class Uee{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const Vee=new Uee,Hee=new jee;let Hb=(()=>{var t;class e{constructor(i){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){return this._obj?i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue:(i&&this._subscribe(i),this._latestValue)}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(vm(i))return Vee;if(lL(i))return Hee;throw function Ic(t,e){return new Rt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return(t=e).\u0275fac=function(i){return new(i||t)(He(qr,16))},t.\u0275pipe=Rr({name:"async",type:t,pure:!1,standalone:!0}),e})(),Yi=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),e})();const Cj="browser";function xu(t){return t===Cj}function qM(t){return"server"===t}class Tj{}class Dte extends GQ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class QM extends Dte{static makeCurrent(){!function zQ(t){PM||(PM=t)}(new QM)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Rte(){return Gb=Gb||document.querySelector("base"),Gb?Gb.getAttribute("href"):null}();return null==n?null:function kte(t){Pw=Pw||document.createElement("a"),Pw.setAttribute("href",t);const e=Pw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Gb=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return mj(document.cookie,e)}}let Pw,Gb=null,Pte=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const eI=new bt("EventManagerPlugins");let kj=(()=>{var t;class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new Rt(5101,!1);return this._eventNameToPlugin.set(i,r),r}}return(t=e).\u0275fac=function(i){return new(i||t)(it(eI),it(an))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();class Oj{constructor(e){this._doc=e}}const tI="ng-app-id";let Pj=(()=>{var t;class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=qM(s),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(i){for(const r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){const r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${tI}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){const o=this.styleRef;if(o.has(i)){const s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){const o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(tI),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(tI,this.appId),a}}addStyleToHost(i,r){const o=this.getStyleElement(i,r);i.appendChild(o);const s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn),it(kh),it(cb,8),it(ba))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const nI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},iI=/%COMP%/g,Bte=new bt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Fj(t,e){return e.map(n=>n.replace(iI,t))}let Lj=(()=>{var t;class e{constructor(i,r,o,s,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=qM(c),this.defaultRenderer=new rI(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Cr.ShadowDom&&(r={...r,encapsulation:Cr.Emulated});const o=this.getOrCreateRenderer(i,r);return o instanceof jj?o.applyToHost(i):o instanceof oI&&o.applyStyles(),o}getOrCreateRenderer(i,r){const o=this.rendererByCompId;let s=o.get(r.id);if(!s){const a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Cr.Emulated:s=new jj(l,d,r,this.appId,h,a,c,p);break;case Cr.ShadowDom:return new Hte(l,d,i,r,a,c,this.nonce,p);default:s=new oI(l,d,r,h,a,c,p)}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(i){return new(i||t)(it(kj),it(Pj),it(kh),it(Bte),it(Wn),it(ba),it(an),it(cb))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();class rI{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(nI[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Bj(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(Bj(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Rt(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const o=nI[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=nI[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(cl.DashCase|cl.Important)?e.style.setProperty(n,i,r&cl.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&cl.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=vu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Bj(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Hte extends rI{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Fj(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class oI extends rI{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?Fj(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class jj extends oI{constructor(e,n,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,n,i,o,s,a,c,l),this.contentAttr=function jte(t){return"_ngcontent-%COMP%".replace(iI,t)}(l),this.hostAttr=function Ute(t){return"_nghost-%COMP%".replace(iI,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let zte=(()=>{var t;class e extends Oj{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const Uj=["alt","control","meta","shift"],Gte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wte={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let $te=(()=>{var t;class e extends Oj{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,o){const s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vu().onAndCancel(i,s.domEventName,a))}static parseEventName(i){const r=i.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const s=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Uj.forEach(d=>{const h=r.indexOf(d);h>-1&&(r.splice(h,1),a+=d+".")}),a+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=Gte[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Uj.forEach(a=>{a!==o&&(0,Wte[a])(i)&&(s+=a+".")}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const Hj=[{provide:ba,useValue:Cj},{provide:im,useValue:function Xte(){QM.makeCurrent()},multi:!0},{provide:Wn,useFactory:function Kte(){return function yx(t){G_=t}(document),document},deps:[]}],qte=k3(DQ,"browser",Hj),Jte=new bt(""),zj=[{provide:fw,useClass:class Ote{addToWindow(e){Ci.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Rt(5103,!1);return o},Ci.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ci.getAllAngularRootElements=()=>e.getAllRootElements(),Ci.frameworkStabilizers||(Ci.frameworkStabilizers=[]),Ci.frameworkStabilizers.push(i=>{const r=Ci.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?vu().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:M3,useClass:AM,deps:[an,SM,fw]},{provide:AM,useClass:AM,deps:[an,SM,fw]}],Gj=[{provide:nb,useValue:"root"},{provide:wc,useFactory:function Yte(){return new wc},deps:[]},{provide:eI,useClass:zte,multi:!0,deps:[Wn,an,ba]},{provide:eI,useClass:$te,multi:!0,deps:[Wn]},Lj,Pj,kj,{provide:ci,useExisting:Lj},{provide:Tj,useClass:Pte,deps:[]},[]];let Zte=(()=>{var t;class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:kh,useValue:i.appId}]}}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Jte,12))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({providers:[...Gj,...zj],imports:[Yi,RQ]}),e})();typeof window<"u"&&window;let Wb=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(i){let r=null;return r=i?new(i||t):it(Yj),r},providedIn:"root"}),e})(),Yj=(()=>{var t;class e extends Wb{constructor(i){super(),this._doc=i}sanitize(i,r){if(null==r)return null;switch(i){case hr.NONE:return r;case hr.HTML:return Ga(r,"HTML")?Es(r):Sx(this._doc,String(r)).toString();case hr.STYLE:return Ga(r,"Style")?Es(r):r;case hr.SCRIPT:if(Ga(r,"Script"))return Es(r);throw new Rt(5200,!1);case hr.URL:return Ga(r,"URL")?Es(r):mu(String(r));case hr.RESOURCE_URL:if(Ga(r,"ResourceURL"))return Es(r);throw new Rt(5201,!1);default:throw new Rt(5202,!1)}}bypassSecurityTrustHtml(i){return function $C(t){return new HC(t)}(i)}bypassSecurityTrustStyle(i){return function XC(t){return new xx(t)}(i)}bypassSecurityTrustScript(i){return function YC(t){return new Kp(t)}(i)}bypassSecurityTrustUrl(i){return function KC(t){return new zC(t)}(i)}bypassSecurityTrustResourceUrl(i){return function qC(t){return new GC(t)}(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn))},t.\u0275prov=Et({token:t,factory:function(i){let r=null;return r=i?new i:function rne(t){return new Yj(t.get(Wn))}(it(fr)),r},providedIn:"root"}),e})();const aI={now:()=>(aI.delegate||Date).now(),delegate:void 0};class Gh extends Ve{constructor(e=1/0,n=1/0,i=aI){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=n.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}const Nw={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return Nw.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return Nw.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let cI;function fne(t,e,n){let i=n;return function sne(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,o)=>!("*"===r||!function cne(t,e){if(!cI){const n=Element.prototype;cI=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&cI.call(t,e)}(t,r)||(i=o,0))),i}class mne{constructor(e,n){this.componentFactory=n.get(Xt).resolveComponentFactory(e)}create(e){return new gne(this.componentFactory,e)}}class gne{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new Gh(1),this.events=this.eventEmitters.pipe(Je(i=>no(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(an),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=Nw.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function lne(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=fr.create({providers:[],parent:this.injector}),i=function hne(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((o,s)=>"*"===o&&(r=s,!0));for(let o=0,s=n.length;o<s;++o){const a=n[o],c=fne(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(qr),this.implementsOnChanges=function ane(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Vh).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(ue(s=>({name:r,value:s}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Nw.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),o=r?void 0:this.getInputValue(e);this.inputChanges[e]=new dv(o,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class _ne extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const yne={initialConfig:{},parse:{},rename:{}};class vne{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...yne,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s={...r,...i.snapshot,...n};for(const[a,c]of Object.entries(e))this.processChange(a,c,s);i.setConfig(s)}processChange(e,n,i){const{options:{parse:r,rename:o}}=this,s=o[e]??e,a=n.currentValue,c=r[e]??r[s];if(null==a)delete i[s];else if(c)try{i[s]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a}`,l.message)}else i[s]=a}}let xne=(()=>{var t;class e{constructor(i,r,o={}){this.configState=i,this.cdr=r,this.options=o,this.initialized=!1,this.configManager=new vne(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(i){this.configManager.addChanges(i),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return(t=e).\u0275fac=function(i){_u()},t.\u0275dir=Ut({type:t,features:[Mr]}),e})();const lI={boolean:t=>"false"!=`${t}`,json:t=>"string"==typeof t?JSON.parse(t):t,stringArray:t=>"string"==typeof t?Array.from(t).filter(e=>!"[], ".includes(e)):t,function:t=>{if("function"!=typeof t)throw new Error("Expected a javascript function");return t}},Wh_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api--staging/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??"",useRemoteApi:!1,remoteApiEndpoint:"https://apps.humanatlas.io/hra-api--staging/v1"};function qj(t,e,n,i,r,o,s){try{var a=t[o](s),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function zt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function s(c){qj(o,i,r,s,a,"next",c)}function a(c){qj(o,i,r,s,a,"throw",c)}s(void 0)})}}function $b(t){return($b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function xe(t,e,n){return(e=function Ene(t){var e=function wne(t,e){if("object"!==$b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==$b(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$b(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jj(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function _l(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||Jj()}const Zj=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";_l();class Sne{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";xe(this,"storage",void 0),xe(this,"id",void 0),xe(this,"config",void 0),this.storage=function Ane(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function dI(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Fw;var t;function Qj(t){return"string"==typeof t?Fw[t.toUpperCase()]||Fw.WHITE:t}function Lw(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=Fw||(Fw={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const Eu={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},Bw=Eu.window||Eu.self||Eu.global,Xb=Eu.process||{};function Mm(){let t;var e,n;if(_l&&"performance"in Bw)t=null==Bw||null===(e=Bw.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Xb){var i;const r=null==Xb||null===(i=Xb.hrtime)||void 0===i?void 0:i.call(Xb);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const Im={debug:_l&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},kne={enabled:!0,level:0};function Ka(){}const e4={},t4={once:!0};class uI{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};xe(this,"id",void 0),xe(this,"VERSION",Zj),xe(this,"_startTs",Mm()),xe(this,"_deltaTs",Mm()),xe(this,"_storage",void 0),xe(this,"userData",{}),xe(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Sne("__probe-".concat(this.id,"__"),kne),this.timeStamp("".concat(this.id," started")),function Rne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(o=>r===o)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Mm()-this._startTs).toPrecision(10))}getDelta(){return Number((Mm()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Lw(e,n)}warn(e){return this._getLogFunction(0,e,Im.warn,arguments,t4)}error(e){return this._getLogFunction(0,e,Im.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Im.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Im.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return this._getLogFunction(e,n,Im.debug||Im.info,arguments,t4)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||Ka,i&&[i],{tag:Fne(n)}):Ka}image(e){let{logLevel:n,priority:i,image:r,message:o="",scale:s=1}=e;return this._shouldLog(n||i)?_l?function Nne(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=dI(o,n,i);console.log(...s)},o.src=e,Ka}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...dI(e,n,i)),Ka;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...dI(o,n,i)),o.src=e.toDataURL(),Ka}return Ka}({image:r,message:o,scale:s}):function Pne(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),Ka}({image:r,message:o,scale:s}):Ka}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Ka)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=i4({logLevel:e,message:n,opts:i}),{collapsed:o}=i;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Ka)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=n4(e)}_getLogFunction(e,n,i,r,o){if(this._shouldLog(e)){o=i4({logLevel:e,message:n,args:r,opts:o}),Lw(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Mm();const s=o.tag||o.message;if(o.once){if(e4[s])return Ka;e4[s]=Mm()}return n=function One(t,e,n){if("string"==typeof e){const i=n.time?function Tne(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function Cne(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function Dne(t,e,n){return!_l&&"string"==typeof t&&(e&&(e=Qj(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=Qj(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,o.message,o),i.bind(console,n,...o.args)}return Ka}}function n4(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Lw(Number.isFinite(e)&&e>=0),e}function i4(t){const{logLevel:e,message:n}=t;t.logLevel=n4(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return Lw("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Fne(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}xe(uI,"VERSION",Zj);const bi=new uI({id:"deck"}),Si={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Si,"IDENTITY",{get:()=>(bi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const bl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},jw={common:0,meters:1,pixels:2},r4={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},ln=new uI({id:"luma.gl"});function Ds(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Bne="Requires WebGL2";function Uw(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function fi(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function Vw(t){return Ds(Uw(t),"Invalid WebGLRenderingContext"),t}function ls(t){return Ds(fi(t),Bne),t}const Yb={};const Kb=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(Kb.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const $h=function(e){const n=this;this.gl=e,function zne(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(Yb[i]=!0)}while(0!==i);for(i in Yb)if(Yb[i])return delete Yb[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:n.currentArrayBuffer=s;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=s}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const c=n.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,d){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,o);const p=h.attribs[o];return p.buffer=n.currentArrayBuffer,p.size=s,p.type=a,p.normalized=c,p.stride=l,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Vne(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};$h.prototype.VERTEX_ARRAY_BINDING_OES=34229,$h.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new Kb(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},$h.prototype.createVertexArrayOES=function(){const e=new Kb(this);return this.vertexArrayObjects.push(e),e},$h.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},$h.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Kb&&e.hasBeenBound&&e.ext===this)},$h.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function Hne(t,e){Yb[t]=!0,void 0!==e&&function Une(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(r===o)return;(!r||o.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){const l=o.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(s!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const o4="OES_element_index",s4="WEBGL_draw_buffers",a4="WEBGL_debug_renderer_info",or=t=>fi(t)?void 0:0,eie={3074:t=>fi(t)?void 0:36064,35723:t=>fi(t)?void 0:4352,35977:or,32937:or,36795:(t,e)=>{const n=fi(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(a4);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(a4);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:or,35071:or,37447:or,36063:(t,e)=>{if(!fi(t)){const n=t.getExtension(s4);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:or,35374:or,35377:or,34852:t=>{if(!fi(t)){const e=t.getExtension(s4);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(o4)?2147483647:65535,33001:t=>t.getExtension(o4)?16777216:65535,33e3:t=>16777216,37157:or,35373:or,35657:or,36183:or,37137:or,34045:or,35978:or,35979:or,35968:or,35376:or,35375:or,35659:or,37154:or,35371:or,35658:or,35076:or,35077:or,35380:or},c4="ANGLE_instanced_arrays",l4={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Ds(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[c4]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Ds(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ds(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Ds(!1)},deleteQuery:()=>{Ds(!1)},beginQuery:()=>{Ds(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},hI={readBuffer:(t,e,n)=>{fi(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:o}=function aie(t,e){return{webgl2:fi(t),ext:t.getExtension(e)}}(t,c4);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!fi(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>fi(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,o=r.EXT_texture_filter_anisotropic;i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function tie(t,e,n){const i=eie[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function hie(t,e){let{extension:n,target:i,target2:r}=e;const o=l4[n];Ds(o);const{meta:s={}}=o,{suffix:a=""}=s,c=t.getExtension(n);for(const l of Object.keys(o)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof o[l]&&(h=o[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function cie(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function Gne(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new $h(this)),this.__OESVertexArrayObject))}}(t),function lie(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function uie(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&hie(t,{extension:n,target:t.luma,target2:t})}(t,l4),function die(t,e){let{target:n,target2:i}=e;Object.keys(hI).forEach(r=>{if("function"==typeof hI[r]){const o=t[r]?t[r].bind(t):()=>{},s=hI[r].bind(null,t,o);n[r]=s,i[r]=s}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const fI={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Au=(t,e,n)=>e?t.enable(n):t.disable(n),d4=(t,e,n)=>t.hint(n,e),wa=(t,e,n)=>t.pixelStorei(n,e);function qb(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const mie={3042:Au,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Au,2885:(t,e)=>t.cullFace(e),2929:Au,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Au,35723:d4,36006:(t,e)=>{const n=fi(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:d4,2849:(t,e)=>t.lineWidth(e),32823:Au,32824:"polygonOffset",10752:"polygonOffset",35977:Au,32938:"sampleCoverage",32939:"sampleCoverage",3089:Au,3088:(t,e)=>t.scissor(...e),2960:Au,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:wa,3317:wa,37440:wa,37441:wa,37443:wa,3330:wa,3332:wa,3331:wa,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:wa,32878:wa,3316:wa,3315:wa,32877:wa,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=qb(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=qb(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=qb(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=qb(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=qb(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Nr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const gie={blendEquation:(t,e,n)=>t.blendEquationSeparate(Nr(32777,e,n),Nr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Nr(32969,e,n),Nr(32968,e,n),Nr(32971,e,n),Nr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Nr(32824,e,n),Nr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Nr(32938,e,n),Nr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Nr(2962,e,n),Nr(2967,e,n),Nr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Nr(34816,e,n),Nr(36003,e,n),Nr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Nr(2964,e,n),Nr(2965,e,n),Nr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Nr(34817,e,n),Nr(34818,e,n),Nr(34819,e,n))},u4={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},yl=(t,e)=>t.isEnabled(e),h4={3042:yl,2884:yl,2929:yl,3024:yl,32823:yl,32926:yl,32928:yl,3089:yl,2960:yl,35977:yl};function f4(t){for(const e in t)return!1;return!0}function _ie(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function p4(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function bie(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...s);return c&&i(...s),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class vie{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function wie(t,e){if("number"==typeof(e=e||fI)){const r=e,o=h4[r];return o?o(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const o=h4[r];i[r]=o?o(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},fI),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Ds(this.stateStack.length>0),od(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Ds(void 0!==o);const s=e[o],a=this.cache[o];_ie(s,a)||(n=!0,i=a,r&&!(o in r)&&(r[o]=a),this.cache[o]=s)}return{valueChanged:n,oldValue:i}}}function m4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Ds(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new vie(t,{copyState:i}),function yie(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const o in u4)bie(t,o,u4[o]);p4(t,"getParameter"),p4(t,"isEnabled")}return t.state.enable=n,t}function g4(t){Ds(t.state),t.state.pop()}function od(t,e){if(Ds(Uw(t),"setParameters requires a WebGL context"),f4(e))return;const n={};for(const r in e){const o=Number(r),s=mie[r];s&&("string"==typeof s?n[s]=!0:s(t,e[r],o))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,gie[r])(t,e,i)}function Dc(t,e,n){if(f4(e))return n(t);const{nocatch:i=!0}=e;let r;if(function xie(t){t.state||m4(t,{copyState:!1}),t.state.push()}(t),od(t,e),i)r=n(t),g4(t);else try{r=n(t)}finally{g4(t)}return r}function Dm(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function pI(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function Sie(t,e,n,i,r){const o=_4(t[0],e,n);let s=b4(t[1],e,i,r),a=_4(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;return a=b4(t[1]+1,e,i,r),r?(a=0===a?a:a+1,l=s,s=a):l=a===i-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,Dm(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function _4(t,e,n){return Math.min(Math.round(t*e),n-1)}function b4(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const mI=_l(),Cie=mI&&typeof document<"u",y4={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function v4(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ds(mI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},y4,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:o}=t,s=function Die(t){let o,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(Cie&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}({canvas:o,width:e,height:n,onError:i});return r=function Iie(t,e){const{onError:n}=e;let i=null;const r=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(s,t),r?(r=gI(r,t),function Rie(t){const e=fi(t)?"WebGL2":"WebGL1",n=function Tie(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";ln.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function gI(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function kie(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},y4,e);const{manageState:n,debug:i}=e;return n&&m4(t,{copyState:!1,log:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return ln.log(1,...o)()}}),mI&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),ln.level=Math.max(ln.level,1)):ln.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function x4(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class w4{constructor(e,n){xe(this,"name",void 0),xe(this,"type",void 0),xe(this,"sampleSize",1),xe(this,"time",void 0),xe(this,"count",void 0),xe(this,"samples",void 0),xe(this,"lastTiming",void 0),xe(this,"lastSampleTime",void 0),xe(this,"lastSampleCount",void 0),xe(this,"_count",0),xe(this,"_time",0),xe(this,"_samples",0),xe(this,"_startTime",0),xe(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=x4(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(x4()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class _I{constructor(e){xe(this,"id",void 0),xe(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof w4?e:new w4(n,i)),this.stats[n]}}const Jb="8.5.21",Xh=new class Nie{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new _I({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==Jb)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Jb));function Kt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function bI(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Kt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function Su(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(_l()&&ln.log(1,"luma.gl ".concat(Jb," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Jb,version:Jb,log:ln,stats:Xh,globals:{modules:{},nodeIO:{}}}),globalThis;const yI={};function Ks(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";yI[t]=yI[t]||1;const e=yI[t]++;return"".concat(t,"-").concat(e)}function E4(t){return Kt("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function Rm(t){let e=!0;for(const n in t){e=!1;break}return e}function A4(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach(s=>{o.methodName||(o[s]=()=>{throw ln.removed("Calling removed method ".concat(e,".").concat(s,": "),r)(),new Error(s)})})}const km="Resource subclass must define virtual methods";class sd{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Vw(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||Ks(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Kt(e=bI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=fi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))return o&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},o=fi(this.gl),s={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?Su(this.gl,c):c;s[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(s[h]=Su(this.gl,s[h]))}}return s}setParameter(e,n){Kt(e=bI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=fi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=bI(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return A4(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(km)}_deleteHandle(){throw new Error(km)}_bindHandle(e){throw new Error(km)}_getOptsFromHandle(){throw new Error(km)}_getParameter(e,n){throw new Error(km)}_setParameter(e,n){throw new Error(km)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Xh.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Xh.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=Xh.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=Xh.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Fie="Failed to deduce GL constant from typed array";function vI(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Fie)}}function Zb(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Bie(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)s[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:s,width:r,height:o}}function xI(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";ln.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];ln.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let s=null;for(const a in o)if(a in e){const c=o[a];ln.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}const jie={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Uie={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class qs{static getBytesPerElement(e){return Zb(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Kt(e.size),Zb(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new qs(jie,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return qs.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return qs.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=xI("Accessor",e,Uie),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const C4={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Vie={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:C4},Hie={removedProps:C4};class Ki extends sd{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/qs.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/qs.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=xI("Buffer",e,Vie),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=xI("Buffer",e,Hie))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new qs(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,o=e.byteLength||e.length;Kt(n);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==o?(ls(this.gl),this.gl.bufferSubData(this.target,i,n,r,o)):this.gl.bufferSubData(s,i,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:o}=e;const{gl:s}=this;return ls(s),s.bindBuffer(36662,n.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,r,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ls(this.gl);const o=Zb(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(s,r||s),l=a+c);const d=Math.min(s,c);return r=r||d,Kt(r<=d),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(Kt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;Kt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const o=vI(e);return Kt(o),this.setAccessor(new qs(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Kt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/Zb(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new qs(this.accessor,{type:vI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return ln.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return ln.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return ln.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return ln.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new qs(this.accessor,e),this}}const wI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},T4={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},M4={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Wie=[9729,9728],I4=globalThis.WebGLBuffer||function(){};class Yh extends sd{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let o=!0;return i&&(o=o&&function zie(t,e){const n=wI[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=fi(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),o=o&&(!r||function Gie(t,e){const n=wI[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),o}constructor(e,n){const{id:i=Ks("texture"),handle:r,target:o}=n;super(e,{id:i,handle:r}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(q=>this.initialize(Object.assign({},e,{pixels:q,data:q}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;n||(n=r);let{width:h,height:p,dataFormat:m,type:x,compressed:D=!1,mipmaps:F=!0}=e;const{depth:G=0}=e;return({width:h,height:p,compressed:D,dataFormat:m,type:x}=this._deduceParameters({format:o,type:x,dataFormat:m,compressed:D,data:n,width:h,height:p})),this.width=h,this.height=p,this.depth=G,this.format=o,this.type=x,this.dataFormat=m,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),F&&this._isNPOT()&&(ln.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),F=!1,this._updateForNPOT(c)),this.mipmaps=F,this.setImageData({data:n,width:h,height:p,depth:G,format:o,type:x,dataFormat:m,border:s,mipmaps:F,parameters:l,compressed:D}),F&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(ln.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Dc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:p=this.height,dataFormat:m=this.dataFormat,compressed:x=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:x,width:h,height:p}=this._deduceParameters({format:o,type:d,dataFormat:m,compressed:x,data:l,width:h,height:p}));const{gl:D}=this;D.bindTexture(this.target,this.handle);let F=null;({data:l,dataType:F}=this._getDataType({data:l,compressed:x}));let G,q=0;return Dc(this.gl,c,()=>{switch(F){case"null":D.texImage2D(n,r,o,h,p,s,m,d,l);break;case"typed-array":D.texImage2D(n,r,o,h,p,s,m,d,l,a);break;case"buffer":G=ls(D),G.bindBuffer(35052,l.handle||l),G.texImage2D(n,r,o,h,p,s,m,d,a),G.bindBuffer(35052,null);break;case"browser-object":fi(D)?D.texImage2D(n,r,o,h,p,s,m,d,l):D.texImage2D(n,r,o,m,d,l);break;case"compressed":for(const[ee,ve]of l.entries())D.compressedTexImage2D(n,ee,ve.format,ve.width,ve.height,s,ve.data),q+=ve.levelSize;break;default:Kt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===F?q:l&&l.byteLength?l.byteLength:this.width*this.height*(T4[this.dataFormat]||4)*(M4[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:p=this.dataFormat,compressed:m=!1,offset:x=0,border:D=this.border,parameters:F={}}=e;if(({type:h,dataFormat:p,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:p,compressed:m,data:r,width:a,height:c})),Kt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const G=r;r=G.data,a=G.shape[0],c=G.shape[1]}r instanceof Ki&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Dc(this.gl,F,()=>{if(m)this.gl.compressedTexSubImage2D(n,l,o,s,a,c,d,r);else if(null===r)this.gl.texSubImage2D(n,l,o,s,a,c,p,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,o,s,a,c,p,h,r,x);else if(r instanceof I4){const G=ls(this.gl);G.bindBuffer(35052,r),G.texSubImage2D(n,l,o,s,a,c,p,h,x),G.bindBuffer(35052,null)}else fi(this.gl)?ls(this.gl).texSubImage2D(n,l,o,s,a,c,p,h,r):this.gl.texSubImage2D(n,l,o,s,p,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return ln.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Ki?{data:n.handle,dataType:"buffer"}:n instanceof I4?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:o,dataFormat:s,type:a,compressed:c}=e;const l=wI[n];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:o}=this._deduceImageSize(i,r,o)),{dataFormat:s,type:a,compressed:c,width:r,height:o,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},Kt(r,"Could not deduced texture size"),Kt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),Kt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Kt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(fi(this.gl)||!this.width||!this.height||E4(this.width)&&E4(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===Wie.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function $ie(t,e){return Kt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class Rs extends Yh{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Yh.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Vw(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:$ie(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Kh="EXT_color_buffer_float",D4={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Kh,bpp:2},33327:{gl2:Kh,bpp:4},34842:{gl2:Kh,bpp:8},33326:{gl2:Kh,bpp:4},33328:{gl2:Kh,bpp:8},34836:{gl2:Kh,bpp:16},35898:{gl2:Kh,bpp:4}};class Om extends sd{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function Xie(t,e,n){const i=n[e];if(!i)return!1;const r=fi(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,D4)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:o=0}=e;return Kt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==o&&fi(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*D4[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const R4=6144,N4="clear: bad arguments";function AI(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Kt(0!==s,N4),Dc(t,o,()=>{t.clear(s)})}const SI=[34069,34070,34071,34072,34073,34074];let Qie=(()=>{class t extends Yh{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Vw(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:o=0,y:s=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return zt(function*(){let{width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=n;const{gl:h}=i,p=s||a,m=yield Promise.all(SI.map(x=>{const D=p[x];return Promise.all(Array.isArray(D)?D:[D])}));i.bind(),SI.forEach((x,D)=>{m[D].length>1&&!1!==i.opts.mipmaps&&ln.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[D].forEach((F,G)=>{r&&o?h.texImage2D(x,G,l,r,o,c,l,d,F):h.texImage2D(x,G,l,l,d,F)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=n,{gl:h}=this,p=s||a;return this.bind(),p instanceof Promise?p.then(m=>this.setImageDataForFace(Object.assign({},n,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,o,c,l,d,p):h.texImage2D(i,0,l,l,d,p),this}}return t.FACES=SI,t})();class ere extends Yh{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return fi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ls(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:p={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Dc(this.gl,p,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,o,s,a,c,l,h),h instanceof Ki&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,o,s,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(T4[this.dataFormat]||4)*(M4[this.type]||1),"Texture"),this.loaded=!0,this}}function nre(t,e){const{gl:n,width:i,height:r,id:o}=t;return new lo(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:t}}))}function Hw(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=Qb(t);Kt(d);const{gl:p,handle:m,attachments:x}=d;a=a||d.width,c=c||d.height,36064===o&&null===m&&(o=1028),Kt(x[o]),l=l||x[o].type,s=function rre(t,e,n,i,r){if(t)return t;const o=Zb(e=e||5121,{clamped:!1}),s=function Zie(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Kt(!1),0}}(n);return new o(i*r*s)}(s,l,r,a,c),l=l||vI(s);const D=p.bindFramebuffer(36160,m);return p.readPixels(n,i,a,c,r,l,s),p.bindFramebuffer(36160,D||null),h&&d.delete(),s}function CI(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Hw(t,{sourceAttachment:e}),{width:r,height:o}=t;for(;o>n;)({data:i,width:r,height:o}=Bie({data:i,width:r,height:o}));!function Lie(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:o}=t;const s=n*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const c=a*s,l=(i-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),c=a.createImageData(r,o);return c.data.set(i),a.putImageData(c,0,0),s.toDataURL()}function Qb(t){return t instanceof lo?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:nre(t),deleteFramebuffer:!0}}const F4="Multiple render targets not supported";class lo extends sd{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(o=o&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new lo(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=ls(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=ls(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Kt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const p=r[h];(Array.isArray(p)?p[0]:p).resize({width:n,height:i})}else r=this._createDefaultAttachments(o,s,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return Kt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&ln.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(s=>{r[s]=null}),Object.assign(r,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in r){Kt(void 0!==s,"Misspelled framebuffer binding point?");const a=Number(s),c=r[a];let l=c;if(l)if(l instanceof Om)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,p=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:p})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function sre(t){return(lo.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&AI(this.gl,{color:n,depth:i,stencil:r}),o.forEach((a,c)=>{!function Jie(t){let{framebuffer:e=null,buffer:n=R4,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ls(t),Dc(t,{framebuffer:e},()=>{switch(n){case R4:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[o,s]=r;t.clearBufferfi(34041,0,o,s);break;default:Kt(!1,N4)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return ln.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return ln.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return ln.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return ln.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return ln.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return ln.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:o,height:s}=e;const a=ls(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=Su(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const o of i)r[n?Su(this.gl,o):o]=this.getAttachmentParameter(e,o,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const o=Number(r);i[e?Su(this.gl,o):o]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window<"u"&&window.open(CI(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>ln.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=CI(this,{targetMaxHeight:100});return ln.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,o){let s=null;return e&&(s=s||{},s[36064]=new Rs(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),n&&i?(s=s||{},s[33306]=new Om(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):n?(s=s||{},s[36096]=new Om(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o}),this.ownResources.push(s[36096])):i&&Kt(!1),s}_unattach(e){const n=this.attachments[e];n&&(n instanceof Om?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:o}=e;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:ls(s).framebufferTextureLayer(36160,n,i.target,o,r);break;case 34067:const c=function ore(t){return t<34069?t+34069:t}(r);s.framebufferTexture2D(36160,n,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,n,3553,i.handle,o);break;default:Kt(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function jne(t){return fi(t)?t:null}(this.gl);n?n.readBuffer(e):Kt(36064===e||1029===e,F4),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=ls(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Kt(1===e.length&&(36064===e[0]||1029===e[0]),F4)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function dre(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in L4)void 0===t.luma.caps[e]&&(t.luma.caps[e]=j4(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}lo.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const L4={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function cre(t){const e=new Rs(t,{format:6408,type:5126,dataFormat:6408}),n=new lo(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},lre=2;function TI(t,e){return B4(t,e)}function B4(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>j4(t,n))}function j4(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function ure(t,e){const n=L4[e];let i;Kt(n,e);const r=fi(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const o of r)i=i&&!!t.getExtension(o)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:Kt(!1);return i}(t,e)),t.luma.caps[e]||ln.log(lre,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}class MI{constructor(e,n){xe(this,"opts",void 0),xe(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let o=i;if(i&&i.length!==r){o=new Float32Array(r);const s=n.elementOffset||0;for(let a=0;a<r;++a)o[a]=i[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const ey=new class fre{constructor(e={}){xe(this,"_pool",[]),xe(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=n*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+o);const p=this._allocate(l,d,a,h);return e&&s?p.set(e):a||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,n,i,r){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>r&&(o=r);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(s.splice(c,1)[0],0,o);return i&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,o=n.findIndex(s=>s.byteLength>=r);o<0?n.push(i):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,i),n.length>this.opts.poolSize&&n.shift()}},pre=1/Math.PI*180,mre=1/180*Math.PI,Wr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function gre(t,{precision:e=Wr.precision}={}){return t=function xre(t){return Math.round(t/Wr.EPSILON)*Wr.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function ad(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function U4(t){return function bre(t,e){return cd(t,n=>n*mre,e)}(t)}function _re(t){return function yre(t,e){return cd(t,n=>n*pre,e)}(t)}function wr(t,e,n){return cd(t,i=>Math.max(e,Math.min(n,i)))}function zw(t,e,n){return ad(t)?t.map((i,r)=>zw(i,e[r],n)):n*e+(1-n)*t}function Cu(t,e,n){const i=Wr.EPSILON;n&&(Wr.EPSILON=n);try{if(t===e)return!0;if(ad(t)&&ad(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Cu(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=Wr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Wr.EPSILON=i}}function cd(t,e,n){if(ad(t)){const i=t;n=n||function wre(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class Gw extends(function Ere(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:ad(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Wr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+gre(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Cu(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(n[r]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Wr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function pi(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function ty(t,e,n=""){if(Wr.debug&&!function Are(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function ny(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class H4 extends Gw{get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return pi(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return pi(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return ny(e>=0&&e<this.ELEMENTS,"index is out of range"),pi(this[e])}setComponent(e,n){return ny(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var vl=1e-6,Js=typeof Float32Array<"u"?Float32Array:Array;function z4(){var t=new Js(3);return Js!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function G4(t,e,n){var i=new Js(3);return i[0]=t,i[1]=e,i[2]=n,i}function W4(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ww(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2];return t[0]=r*c-o*a,t[1]=o*s-i*c,t[2]=i*a-r*s,t}function II(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/(s=s||1),t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t}function $4(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function X4(t,e,n){var i=n[0],r=n[1],o=n[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,p=i*c-r*a,m=r*p-o*h,x=o*d-i*p,D=i*h-r*d,F=2*n[3];return h*=F,p*=F,x*=2,D*=2,t[0]=a+(d*=F)+(m*=2),t[1]=c+h+x,t[2]=l+p+D,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Y4(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o||1;return t[0]=(n[0]*i+n[4]*r+n[8]*o)/s,t[1]=(n[1]*i+n[5]*r+n[9]*o)/s,t[2]=(n[2]*i+n[6]*r+n[10]*o)/s,t}function K4(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*o,t[1]=n[1]*i+n[4]*r+n[7]*o,t[2]=n[2]*i+n[5]*r+n[8]*o,t[3]=e[3],t}z4();const DI=[0,0,0];let $w;class nn extends H4{static get ZERO(){return $w||($w=new nn(0,0,0),Object.freeze($w)),$w}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&ad(e)?this.copy(e):(Wr.debug&&(pi(e),pi(n),pi(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Wr.debug&&(pi(e.x),pi(e.y),pi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=pi(e)}angle(e){return function Ore(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&W4(t,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return Ww(this,this,e),this.check()}rotateX({radians:e,origin:n=DI}){return function Dre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=DI}){return function Rre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=DI}){return function kre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return II(this,this,e),this.check()}transformAsVector(e){return Y4(this,this,e),this.check()}transformByMatrix3(e){return $4(this,this,e),this.check()}transformByMatrix2(e){return function Lre(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return X4(this,this,e),this.check()}}const q4=new nn;function Pm(t,e,n,i){q4.set(t,e,n);const r=q4.len();return{distance:i/r,normal:new nn(-t/r,-e/r,-n/r)}}function Hre(t){return t-Math.fround(t)}let ry;function RI(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,o=(r-i)/n;ry=ey.allocate(ry,o,{type:Float32Array,size:2*n});let s=i,a=0;for(;s<r;){for(let c=0;c<n;c++){const l=t[s++];ry[a+c]=l,ry[a+c+n]=Hre(l)}a+=2*n}return ry.subarray(0,o*n*2)}function zre(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}function Xw(t){return t.stride||t.size*t.bytesPerElement}function J4(t,e){e.offset&&bi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Xw(t),o=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:n}}class Wre{constructor(e,n,i){xe(this,"gl",void 0),xe(this,"id",void 0),xe(this,"size",void 0),xe(this,"settings",void 0),xe(this,"value",void 0),xe(this,"doublePrecision",void 0),xe(this,"_buffer",void 0),xe(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,o=5130===r;let a,{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),a=o?5126:!r&&n.isIndexed?e&&TI(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function hre(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=o,o&&!1===n.fp64&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:s,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Ki(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Xw(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),ey.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,o=function Gre(t,e){const n=J4(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new MI(this,o.high),i["".concat(e,"64Low")]=r?new MI(this,o.low):new Float32Array(this.size),i}if(n){const i=J4(this.getAccessor(),n);return{[e]:new MI(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,o=i*r;if(n&&o&&n.length>=o){const s=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<r;l++){const d=n[c++];d<s[l]&&(s[l]=d),d>a[l]&&(a[l]=d)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Ki?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),n.constant&&this._areValuesEqual(o,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(i.buffer){const o=i.buffer;n.externalBuffer=o,n.constant=!1,this.value=i.value||null;const s=i.value instanceof Float64Array;r.type=i.type||o.accessor.type,r.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=Xw(r)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;n.externalBuffer=null,n.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=Xw(r);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=RI(o,r));const c=o.byteLength+a+2*r.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),r.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?RI(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,o=ey.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),n&&r&&s.subData({data:r instanceof Float64Array?RI(r,this):r,offset:a})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&bi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e){let s=o;for(;--s>=0;)n[i+s]=r[s];return n}switch(o){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=o;for(;--s>=0;)n[i+s]=Number.isFinite(e[s])?e[s]:r[s]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}function $o(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}const Z4=[],Q4=[];function Yw(t,e=0,n=1/0){let i=Z4;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(Q4.length=t.length,i=Q4):i=Z4,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function eU(t){return t&&t[Symbol.asyncIterator]}function kI(t,e=(()=>!0)){return Array.isArray(t)?tU(t,e,[]):e(t)?[t]:[]}function tU(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?tU(r,e,n):e(r)&&n.push(r)}return n}function Xre({target:t,source:e,start:n=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let a=n;s<r;s++)t[a++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}const Yre=[],Kw=[[0,1/0]];function OI(t){const{source:e,target:n,start:i=0,size:r,getData:o}=t,a=e.length,c=(t.end||n.length)-i;if(a>c)return void n.set(e.subarray(0,c),i);if(n.set(e,i),!o)return;let l=a;for(;l<c;){const d=o(l,e);for(let h=0;h<r;h++)n[i+l]=d[h]||0,l++}}const Jre={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function nU(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Jre[n],...e,...t,type:n}}function iU(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function rU(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function oU(t){t.push(t.shift())}function PI(t,e){const{doublePrecision:n,settings:i,value:r,size:o}=t,s=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function sU({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:o=(s=>s)}){const s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,c=n.byteOffset,l=n.startIndices,d=r&&l,h=PI(n,e),p=n.isConstant;if(!d&&i>=h)return;const m=p?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!p){const G=o;o=(q,ee)=>n.normalizeConstant(G(q,ee))}const x=p?(G,q)=>o(m,q):(G,q)=>o(m.subarray(G,G+a),q),D=t.getData({length:i}),F=new Float32Array(h);(function qre({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return OI({source:t,target:e,size:n,getData:i}),e;let s=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,o.length);for(let d=1;d<l;d++){const h=r[d]*n,p=o[d]*n;OI({source:t.subarray(s,h),target:e,start:a,end:p,size:n,getData:c}),s=h,a=p}a<e.length&&OI({source:[],target:e,start:a,size:n,getData:c})})({source:D,target:F,sourceStartIndices:r,targetStartIndices:l,size:a,getData:x}),t.byteLength<F.byteLength+c&&t.reallocate(F.byteLength+c),t.subData({data:F,offset:c})}class NI extends Wre{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Kw}),xe(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return nU(Array.isArray(n)?e[n.find(o=>e[o])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function Kre(t,e){if(t===Kw||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let o=0;o<i;o++){const s=t[o];s[1]<e[0]?(n.push(s),r=o+1):s[0]>e[1]?n.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=Kw}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Yre}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==Kw),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let c=!0;if(s){for(const[l,d]of o)s.call(r,this,{data:n,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of o){const h=Number.isFinite(l)?this.getVertexOffset(l):0,p=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:p})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;return $o(ArrayBuffer.isView(s.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function $re(t,e){const{size:n,stride:i,offset:r,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,c=i?i/a:n,l=r?r/a:0,d=Math.floor((t.length-l)/c);return(h,{index:p,target:m})=>{if(!o){const G=p*c+l;for(let q=0;q<n;q++)m[q]=t[G+q];return m}const x=o[p],D=o[p+1]||d;let F;if(s){F=new Array(D-x);for(let G=x;G<D;G++){const q=G*c+l;m=new Array(n);for(let ee=0;ee<n;ee++)m[ee]=t[q+ee];F[G-x]=m}}else if(c===n)F=t.subarray(x*n+l,D*n+l);else{F=new t.constructor((D-x)*n);let G=0;for(let q=x;q<D;q++){const ee=q*c+l;for(let ve=0;ve<n;ve++)F[G++]=t[ee+ve]}}return F}}(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:n,nested:!!s.size&&s.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:p,transform:m}=a,x=c.binaryAccessor||("function"==typeof p?p:o[p]);$o("function"==typeof x,'accessor "'.concat(p,'" is not a function'));let D=e.getVertexOffset(i);const{iterable:F,objectInfo:G}=Yw(n,i,r);for(const q of F){G.index++;let ee=x(q,G);if(m&&(ee=m.call(this,ee)),h){const ve=(G.index<h.length-1?h[G.index+1]:s)-h[G.index];if(ee&&Array.isArray(ee[0])){let Oe=D;for(const Xe of ee)e._normalizeValue(Xe,l,Oe),Oe+=d}else ee&&ee.length>d?l.set(ee,D):(e._normalizeValue(ee,G.target,0),Xre({target:l,source:G.target,start:D,count:ve}));D+=ve*d}else e._normalizeValue(ee,l,D),D+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}function Zre(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function oy(t){let n,e={};return i=>{for(const r in i)if(!Zre(i[r],e[r])){n=t(i),e=i;break}return n}}let FI={};function Qre(t){FI=t}function ds(t,e,n,i){bi.level>0&&FI[t]&&FI[t].call(null,e,n,i)}function Ea(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const aU="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",toe="#version 300 es\n".concat(aU);function cU(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,o]=n;return e.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function lU(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?toe:e>300?"#version ".concat(e,"\n").concat(aU):"void main() {gl_FragColor = vec4(0);}";const o=function roe(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ea(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class dU extends sd{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return fi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ls(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Rm(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(n);return i<0?(this.unused[e]=r,ln.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof Ki?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const o=n&&n.handle;return o&&void 0!==r?this.gl.bindBufferRange(35982,e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,o),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class ooe{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof Ki?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Kt(fi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const o=i[r];if("string"==typeof o){const s=n[o],{byteLength:a,usage:c,accessor:l}=s;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new dU(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const o=this.feedbackMap[r];n[r]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[r],Kt(i[o]instanceof Ki)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new Ki(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function uU(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const sy="vs",coe={[sy]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},qw="__LUMA_INJECT_DECLARATIONS__",hU=/void\s+main\s*\([^)]*\)\s*\{\n?/,fU=/}\n?[^{}]*$/,BI=[];function pU(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===sy;for(const o in n){const s=n[o];s.sort((c,l)=>c.order-l.order),BI.length=s.length;for(let c=0,l=s.length;c<l;++c)BI[c]=s[c].injection;const a="".concat(BI.join("\n"),"\n");switch(o){case"vs:#decl":r&&(t=t.replace(qw,a));break;case"vs:#main-start":r&&(t=t.replace(hU,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(fU,c=>a+c));break;case"fs:#decl":r||(t=t.replace(qw,a));break;case"fs:#main-start":r||(t=t.replace(hU,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(fU,c=>a+c));break;default:t=t.replace(o,c=>c+a)}}return t=t.replace(qw,""),i&&(t=t.replace(/\}\s*$/,o=>o+coe[e])),t}function jI(t){const e={};return Ea(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}const loe={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},Jw="transform_uSize_",mU="transform_position";const _oe={10241:9728,10240:9728,10242:33071,10243:33071};class yoe{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function hoe(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let o,s;n&&(({width:o,height:s}=i),r["".concat(Jw).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(Jw).concat(a)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=Hw(n);if(!e)return i;const r=i.constructor,o=function ioe(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ea(!1),null}}(this.targetTextureType),s=new r(i.length*o/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<o;l++)s[a++]=i[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof Rs)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,o)=>{o[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Ki(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new lo(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(_oe)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function tre(t,e){Kt(t instanceof Rs||t instanceof Qie||t instanceof ere);const n=t.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d}=t;return new n(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=function uoe(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,s=Object.keys(n).length,a=null;const c={};let l=e,d={};if(s>0||i){const h=l.split("\n"),p=h.slice();if(h.forEach((m,x,D)=>{if(s>0){const F=function goe(t,e){const n={},i=function foe(t){return cU(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const s="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function poe(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(Jw).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(o),d=function noe(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ea(!1),null}}(r),h="  ".concat(r," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return n[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:n}}return null}(m,n);if(F){const{updatedLine:G,inject:q}=F;p[x]=G,d=jI([d,q]),Object.assign(c,F.samplerTextureMap),s--}}i&&!a&&(a=function moe(t,e){const n=cU(t,["varying","out"]);return n&&n.name===e?n.type:null}(m,i))}),i){Kt(r);const m="".concat(Jw).concat(i),x="uniform vec2 ".concat(m,";\n"),D="     vec2 ".concat(mU," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat(mU,", 0, 1.);\n");d=jI([d,{"vs:#decl":x,"vs:#main-start":D}])}l=p.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=jI([e.inject||{},a]);return this.targetTextureType=s,this.samplerTextureMap=c,{vs:r,fs:e._fs||lU({version:uU(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[loe].concat(e.modules||[]):e.modules,uniforms:o,inject:l}}}const UI={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function xoe(t){let e=gU(t);return"object"===e?t?"type"in t?Object.assign({},t,UI[t.type]):"value"in t?(e=gU(t.value),Object.assign({type:e},t,UI[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},UI[e])}function gU(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class VI{constructor(e){let{name:n,vs:i,fs:r,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:p}=e;Ea("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||p,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Aoe(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(d),s&&(this.uniforms=function voe(t){const e={};for(const n in t){const r=xoe(t[n]);e[n]=r}return e}(s))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:Ea(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const o=i[r];r in e&&!o.private?(o.validate&&Ea(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=o.value}return n}}function Soe(t){return function _U(t){const e={},n={};return HI({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(bU(t))}function HI(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<n)&&(r[o.name]=n);for(const o of e)o.dependencies&&HI({modules:o.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function bU(t,e){return t.map(n=>(n instanceof VI||(Ea("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ea(n.name,"shader module has no name"),(n=new VI(n)).dependencies=bU(n.dependencies)),n))}const Toe=7936,Moe=7937,Ioe=7938,Doe=35724,zI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},qh={};function Ooe(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(zI).forEach(t=>{qh[t]=t});const GI={};function yU(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=zI[e];if(Ea(i,e),!function Coe(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in GI)return GI[e];const o=n.behavior||"enable",s="#extension GL_".concat(i[0]," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),GI[e]=c,c}function Zw(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function Poe(t,e){const n=zI[e];Ea(n,e);const i=function Roe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return Ea(!1===r||!0===r),r}(t,n))}function Nm(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const vU=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Loe=[...vU,[Nm("attribute"),"in $1"],[Nm("varying"),"out $1"]],Boe=[...vU,[Nm("varying"),"in $1"]],xU=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],joe=[...xU,[Nm("in"),"attribute $1"],[Nm("out"),"varying $1"]],Uoe=[...xU,[Nm("in"),"varying $1"]],WI="gl_FragColor",$I=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Voe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Qw(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const Woe="\n\n".concat(qw,"\n\n"),wU={[sy]:"vertex",fs:"fragment"};function EU(t,e){let{id:n,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;Ea("string"==typeof i,"shader source must be a string");const p=r===sy,m=i.split("\n");let x=100,D="",F=i;0===m[0].indexOf("#version ")?(x=300,D=m[0],F=m.slice(1).join("\n")):D="#version ".concat(x);const G={};o.forEach(rt=>{Object.assign(G,rt.getDefines())}),Object.assign(G,s);let q=d?"".concat(D,"\n").concat(function qoe(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(wU[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function Koe(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(wU[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Noe(t){switch(function koe(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Toe),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Moe);return{gpuVendor:Ooe(n,i),vendor:n,renderer:i,version:t.getParameter(Ioe),shadingLanguageVersion:t.getParameter(Doe)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function Foe(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Zw(t,qh.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Zw(t,qh.GLSL_DERIVATIVES)&&yU(t,qh.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),Zw(t,qh.GLSL_FRAG_DATA)&&yU(t,qh.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),Zw(t,qh.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function Joe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(G),"\n").concat(p?"":"precision highp float;\n\n","\n"):"".concat(D,"\n");const ee=function Qoe(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,o]=n.split(":"),s=n.replace(/\(.+/,"");e[r][s]=Object.assign(i,{signature:o})}),e}(a),ve={},Oe={},Xe={};for(const rt in c){const nt="string"==typeof c[rt]?{injection:c[rt],order:0}:c[rt],ht=rt.match(/^(v|f)s:(#)?([\w-]+)$/);ht?ht[2]?"decl"===ht[3]?Oe[rt]=[nt]:Xe[rt]=[nt]:ve[rt]=[nt]:Xe[rt]=[nt]}for(const rt of o){h&&rt.checkDeprecations(F,h),q+=rt.getModuleSource(r,x);const ht=rt.injections[r];for(const gt in ht){const yt=gt.match(/^(v|f)s:#([\w-]+)$/);if(yt){const mt="decl"===yt[2]?Oe:Xe;mt[gt]=mt[gt]||[],mt[gt].push(ht[gt])}else ve[gt]=ve[gt]||[],ve[gt].push(ht[gt])}}return q+=Woe,q=pU(q,r,Oe),q+=function Zoe(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const o=e[i];o.sort((s,a)=>s.order-a.order);for(const s of o)n+="  ".concat(s.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(ee[r],ve),q+=F,q=pU(q,r,Xe),q=function Hoe(t,e,n){switch(e){case 300:return n?Qw(t,Loe):function zoe(t){const e=(t=Qw(t,Boe)).match($I);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(WI,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(Voe,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(WI,"\\b"),"g"),n)}return t}(t);case 100:return n?Qw(t,joe):function Goe(t){const e=(t=Qw(t,Uoe)).match($I);if(e){const n=e[1];t=t.replace($I,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),WI)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(q,l?100:x,p),q}function Yoe(t){return function(n){const i={};for(const r of t){const o=r.getUniforms(n,i);Object.assign(i,o)}return i}}const ese={5126:pr.bind(null,"uniform1fv",Aa,1,us),35664:pr.bind(null,"uniform2fv",Aa,2,us),35665:pr.bind(null,"uniform3fv",Aa,3,us),35666:pr.bind(null,"uniform4fv",Aa,4,us),5124:pr.bind(null,"uniform1iv",Tu,1,us),35667:pr.bind(null,"uniform2iv",Tu,2,us),35668:pr.bind(null,"uniform3iv",Tu,3,us),35669:pr.bind(null,"uniform4iv",Tu,4,us),35670:pr.bind(null,"uniform1iv",Tu,1,us),35671:pr.bind(null,"uniform2iv",Tu,2,us),35672:pr.bind(null,"uniform3iv",Tu,3,us),35673:pr.bind(null,"uniform4iv",Tu,4,us),35674:pr.bind(null,"uniformMatrix2fv",Aa,4,ld),35675:pr.bind(null,"uniformMatrix3fv",Aa,9,ld),35676:pr.bind(null,"uniformMatrix4fv",Aa,16,ld),35678:Xo,35680:Xo,5125:pr.bind(null,"uniform1uiv",e1,1,us),36294:pr.bind(null,"uniform2uiv",e1,2,us),36295:pr.bind(null,"uniform3uiv",e1,3,us),36296:pr.bind(null,"uniform4uiv",e1,4,us),35685:pr.bind(null,"uniformMatrix2x3fv",Aa,6,ld),35686:pr.bind(null,"uniformMatrix2x4fv",Aa,8,ld),35687:pr.bind(null,"uniformMatrix3x2fv",Aa,6,ld),35688:pr.bind(null,"uniformMatrix3x4fv",Aa,12,ld),35689:pr.bind(null,"uniformMatrix4x2fv",Aa,8,ld),35690:pr.bind(null,"uniformMatrix4x3fv",Aa,12,ld),35678:Xo,35680:Xo,35679:Xo,35682:Xo,36289:Xo,36292:Xo,36293:Xo,36298:Xo,36299:Xo,36300:Xo,36303:Xo,36306:Xo,36307:Xo,36308:Xo,36311:Xo},tse={},nse={},ise={},AU=[0];function XI(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(AU[0]=t,t=AU);const r=t.length;if(r%e&&ln.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=i[r];o||(o=new n(r),i[r]=o);for(let s=0;s<r;s++)o[s]=t[s];return o}function Aa(t,e){return XI(t,e,Float32Array,tse)}function Tu(t,e){return XI(t,e,Int32Array,nse)}function e1(t,e){return XI(t,e,Uint32Array,ise)}function SU(t,e,n){const i=ese[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function rse(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function sse(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function cse(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof Yh||t instanceof Om)||t instanceof lo&&!!t.texture}function ase(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,o=n.length;r<o;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function Xo(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function pr(t,e,n,i){let r=null,o=null;return(s,a,c)=>{const l=e(c,n),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),o=d,h=!0;else{Kt(o===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(l[p]!==r[p]){h=!0;break}}return h&&(i(s,t,a,l),r.set(l)),h}}function us(t,e,n,i){t[e](n,i)}function ld(t,e,n,i){t[e](n,!1,i)}function t1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function TU(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const o=t[i+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();n+=MU("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function MU(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class ay extends sd{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Kt(!1),"unknown"}}constructor(e,n){Vw(e),Kt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:t1(n.source,null)||n.id||Ks("unnamed ".concat(ay.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=t1(n,null);i&&(this.id=Ks(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(ay.getTypeName(this.shaderType),":").concat(this.id)}getName(){return t1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:o,warnings:s}=function CU(t,e,n,i){const r=t.split(/\r?\n/),o={},s={},a=i||t1(e)||"(unnamed)",c="".concat(function use(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const p=h.split(":"),m=p[0],x=parseInt(p[2],10);if(isNaN(x))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==m?o[x]=h:s[x]=h}const l=function hse(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((o,s)=>{const a=String(s+e);return MU(a,r-a.length)+n+o})}(e);return{shaderName:c,errors:TU(o,l),warnings:TU(s,l)}}(i,this.source,this.shaderType,this.id);throw ln.error("GLSL compilation errors in ".concat(r,"\n").concat(o))(),ln.warn("GLSL compilation warnings in ".concat(r,"\n").concat(s))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class YI extends ay{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class KI extends ay{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const pse=5120,mse=5121,gse=5122,_se=5123,uo=5126,cy=5124,ly=5125,qI={[uo]:[uo,1,"float"],35664:[uo,2,"vec2"],35665:[uo,3,"vec3"],35666:[uo,4,"vec4"],[cy]:[cy,1,"int"],35667:[cy,2,"ivec2"],35668:[cy,3,"ivec3"],35669:[cy,4,"ivec4"],[ly]:[ly,1,"uint"],36294:[ly,2,"uvec2"],36295:[ly,3,"uvec3"],36296:[ly,4,"uvec4"],35670:[uo,1,"bool"],35671:[uo,2,"bvec2"],35672:[uo,3,"bvec3"],35673:[uo,4,"bvec4"],35674:[uo,8,"mat2"],35685:[uo,8,"mat2x3"],35686:[uo,8,"mat2x4"],35675:[uo,12,"mat3"],35687:[uo,12,"mat3x2"],35688:[uo,12,"mat3x4"],35676:[uo,16,"mat4"],35689:[uo,16,"mat4x2"],35690:[uo,16,"mat4x3"]};function PU(t){const e=qI[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function NU(t,e){switch(t){case pse:case mse:case gse:case _se:t=uo}for(const n in qI){const[i,r,o]=qI[n];if(i===t&&r===e)return{glType:n,name:o}}return null}class Vse{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((r,o)=>r.location-o.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!fi(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,o,s,a)}this.varyingInfos.sort((r,o)=>r.location-o.location)}_addAttribute(e,n,i,r){const{type:o,components:s}=PU(i),a={type:o,size:r*s};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new qs(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:o,components:s}=PU(i),c={location:e,name:n,accessor:new qs({type:o,size:r*s})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Hse=35981,zse=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class LU extends sd{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",zse),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:o,bufferMode:s=Hse}=e;return this.hash=n||"",this.vs="string"==typeof i?new YI(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new KI(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Kt(this.vs instanceof YI),Kt(this.fs instanceof KI),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(ls(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Vse(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:p=null,transformFeedback:m,framebuffer:x,parameters:D={},uniforms:F,samplers:G}=e;if((F||G)&&(ln.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(F||{})),ln.priority>=n){const q=x?x.id:"default",ee="mode=".concat(Su(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(Su(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(q);ln.log(n,ee)()}return Kt(p),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(p.bindForDraw(r,d,()=>{if(void 0!==x&&(D=Object.assign({},D,{framebuffer:x})),m){const q=function OU(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Kt(!1),0}}(i);m.begin(q)}this._bindTextures(),Dc(this.gl,D,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,o,d):c&&fi(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(i,s,a,r,l,o):c?this.gl.drawElements(i,r,l,o):h?this.gl2.drawArraysInstanced(i,o,r,d):this.gl.drawArrays(i,o,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ln.priority>=2&&function ose(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!sse(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let o=i,s=!1;if(o instanceof lo&&(o=o.texture),o instanceof Yh)if(s=this.uniforms[n]!==i,s){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:c}=r;a.bind(c),o=c,this._textureUniforms[n]=a}else o=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(o)||s)&&ase(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new YI({handle:r});break;case 35632:i.fs=new KI({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Ks(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),ln.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),ln.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||ln.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=rse(i.name);let o=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=SU(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(r,"[").concat(s,"]")),this._uniformSetters["".concat(r,"[").concat(s,"]")]=SU(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class dy{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new dy(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(n),h=this._getHash(i),p=l.map(ee=>this._getHash(ee.name)).sort(),m=s.map(ee=>this._getHash(ee)),x=Object.keys(r).sort(),D=Object.keys(o).sort(),F=[],G=[];for(const ee of x)F.push(this._getHash(ee)),F.push(this._getHash(r[ee]));for(const ee of D)G.push(this._getHash(ee)),G.push(this._getHash(o[ee]));const q="".concat(d,"/").concat(h,"D").concat(F.join("/"),"M").concat(p.join("/"),"I").concat(G.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[q]){const ee=function Xoe(t,e){const{vs:n,fs:i}=e,r=Soe(e.modules||[]);return{gl:t,vs:EU(t,Object.assign({},e,{source:n,type:sy,modules:r})),fs:EU(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Yoe(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[q]=new LU(this.gl,{hash:q,vs:ee.vs,fs:ee.fs,varyings:s,bufferMode:a}),this._getUniforms[q]=ee.getUniforms||(ve=>{}),this._useCounts[q]=0}return this._useCounts[q]++,this._programCache[q]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],c=a.name;n[r++]=a,i[c]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}let r1=null;const o1=globalThis;function BU(t){if(!t&&!_l())return"Node";if(Jj(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":o1.chrome?"Chrome":o1.safari?"Safari":o1.mozInnerScreenX?"Firefox":"Unknown"}class Sa extends sd{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||fi(e)||"Chrome"===BU()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Sa(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Sa.MAX_ATTRIBUTES=Sa.MAX_ATTRIBUTES||e.getParameter(34921),Sa.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Sa._setConstantFloatArray(e,n,i);break;case Int32Array:Sa._setConstantIntArray(e,n,i);break;case Uint32Array:Sa._setConstantUintArray(e,n,i);break;default:Kt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Sa.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Kt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:p}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(Kt(fi(h)),p.vertexAttribIPointer(e,r,o,s,a)):h.vertexAttribPointer(e,r,o,c,s,a),h.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!Sa.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,o=i.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new Ki(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){const a=function Wse(t,e){const n=function Gse(t){return(!r1||r1.byteLength<t)&&(r1=new ArrayBuffer(t)),r1}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,o);(function $se(t){let{target:e,source:n,start:i=0,count:r=1}=t;const o=n.length,s=r*o;let a=0;for(let c=i;a<o;a++)e[c++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)})({target:a,source:i,start:0,count:o}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Kt(!1)}}static _setConstantIntArray(e,n,i){switch(Kt(fi(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Kt(!1)}}static _setConstantUintArray(e,n,i){switch(Kt(fi(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Kt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Kt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const Kse=/^(.+)__LOCATION_([0-9]+)$/,qse=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Jse{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Sa(e),A4(this,"VertexArray","v6.0",qse),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,o)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ki(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Ki&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Ki&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=n,ln.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const c=this._getAttributeInfo(a||s);if(!c)return o;const d=qs.resolve(c.accessor,this.accessors[s]||{},i,r),{size:h,type:p}=d;return Kt(Number.isFinite(h)&&Number.isFinite(p)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=Kse.exec(e),r=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+o,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof Ki)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Ki)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof Ki))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)r=this.values[o],ArrayBuffer.isView(r)&&this._setConstantAttribute(o,r)}_setConstantAttributeZero(e,n){if(Sa.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Sa.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:o}=r,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof Ki){const a=i;if(s){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ln.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function uy(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function Zse(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(r+=",".concat(s%i==0?" ":"")),r+=uy(t[s],e);const o=t.length>n?"...":"]";return"".concat(r).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function jU(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,o="NOT PROVIDED",s=1,a=0,c=0;if(n&&(o=n.type,s=n.size,o=String(o).replace("Array",""),l=-1!==o.indexOf("nt")),e instanceof Ki){const p=e,{data:m,changed:x}=p.getDebugData();let D;return d=x?"*":"",h=m,c=p.byteLength,a=c/m.BYTES_PER_ELEMENT/s,n?D="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(Su(r,o),")"):(l=!0,D="".concat(c," bytes")),{[i]:"".concat(d).concat(uy(h,{size:s,isInteger:l})),"Format ":D}}return h=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=-1!==o.indexOf("nt"),{[i]:"".concat(uy(h,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function eae(t,e){const{type:n,size:i}=e,r=NU(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function UU(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Kt(n);const s=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(s)&&JI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(s)&&JI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||JI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const p={};if(!r)for(const m in i){const x=i[m];c[m]||(h++,p[m]={Type:"NOT USED: ".concat(x),[e]:uy(x)})}return{table:c,count:d,unusedTable:p,unusedCount:h}}function JI(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:o}=t;const s=i[r],a=function tae(t){return null!=t}(s);return!(o&&a||(e[r]={[n]:a?uy(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function VU(t){const{type:e,size:n}=t.accessor,i=NU(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const iae={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function oae(t,e){const{attributeMap:n=iae}=e||{};return n&&n[t]||t}function sae(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Kt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const HU=()=>{},lae={};class jm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=Ks("model")}=n;Kt(Uw(e)),this.id=i,this.gl=e,this.id=n.id||Ks("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||dy.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Kt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Kt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Kt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function rae(t,e,n){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=oae(o,n);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const c=s.value,l={...s};delete l.value,i[a]=[new Ki(t,c),l],sae(o,l)}}if(r){const o=r.value||r;Kt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Ki(t,{data:o,target:34963}),s]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Rm(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return AI(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(r),ln.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:p=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:x=d.isInstanced}=this.props;x&&!this.isInstanced&&ln.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:D,instanceCount:F}=this,{onBeforeRender:G=HU,onAfterRender:q=HU}=this.props;G(),this.program.setUniforms(this.uniforms);const ee=this.program.draw(Object.assign(lae,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:h,indexType:p,isInstanced:D,instanceCount:F,offset:h?m:0}));return q(),ln.priority>=2&&this._logDrawCallEnd(l,c,i),ee}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:o}=e;i&&this._setFeedbackBuffers(i),n&&(o=Object.assign({},o,{35977:n})),r.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{r.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ln.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Kt(n instanceof LU,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Jse(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Ki&&n.delete()}}_setAnimationProps(e){this.animated&&Kt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Rm(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new dU(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),ln.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:ln.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const o=function Qse(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=jU(e,e.elements,null,n));const r=e.values;for(const o in r){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(eae(s.name,c))),i[a]=jU(e,r[o],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=UU({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=UU({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&ln.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&ln.log("UNUSED UNIFORMS",Object.keys(a))();const h=function nae(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=VU(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=VU(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);ln.table(e,o)(),ln.table(e,s)(),ln.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),ln.groupEnd(2)()}}class ZI{static isSupported(e){return fi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();Kt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new jm(n,Object.assign({},e,{fs:e.fs||lU({version:uU(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function dae(t){return!(Rm(t.feedbackBuffers)&&Rm(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new ooe(e,n)),function uae(t){return!(Rm(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new yoe(e,n)),Kt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}class hy{constructor(e){xe(this,"_inProgress",void 0),xe(this,"_handle",void 0),xe(this,"_timeline",void 0),xe(this,"time",void 0),xe(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const yae={interpolation:class hae{constructor({gl:e,attribute:n,timeline:i}){xe(this,"gl",void 0),xe(this,"type","interpolation"),xe(this,"attributeInTransition",void 0),xe(this,"settings",void 0),xe(this,"attribute",void 0),xe(this,"transition",void 0),xe(this,"currentStartIndices",void 0),xe(this,"currentLength",void 0),xe(this,"transform",void 0),xe(this,"buffers",void 0),this.gl=e,this.transition=new hy(i),this.attribute=n,this.attributeInTransition=new NI(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function pae(t,e){const n=rU(e.size);return new ZI(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new Ki(e,r),new Ki(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:o}=this;oU(r);const s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)sU({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=PI(o,n),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:r[0],aTo:iU(0,o)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let o=r/n;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class mae{constructor({gl:e,attribute:n,timeline:i}){xe(this,"gl",void 0),xe(this,"type","spring"),xe(this,"attributeInTransition",void 0),xe(this,"settings",void 0),xe(this,"attribute",void 0),xe(this,"transition",void 0),xe(this,"currentStartIndices",void 0),xe(this,"currentLength",void 0),xe(this,"texture",void 0),xe(this,"framebuffer",void 0),xe(this,"transform",void 0),xe(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new hy(i),this.attribute=n,this.attributeInTransition=new NI(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function _ae(t){return new Rs(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function bae(t,e){return new lo(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function gae(t,e,n){const i=rU(e.size);return new ZI(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Ki(e,r),new Ki(e,r),new Ki(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:o}=this,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)sU({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=PI(o,n),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:iU(0,o)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const s=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),oU(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),Hw(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class vae{constructor(e,{id:n,timeline:i}){xe(this,"id",void 0),xe(this,"isSupported",void 0),xe(this,"gl",void 0),xe(this,"timeline",void 0),xe(this,"transitions",void 0),xe(this,"needsRedraw",void 0),xe(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=ZI.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const o=e[r],s=o.getTransitionSetting(n);s&&this._updateAttribute(r,o,s)}for(const r in this.transitions){const o=e[r];(!o||!o.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let o=!r||r.type!==i.type;if(o){if(!this.isSupported)return void bi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const s=yae[i.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):(bi.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const zU="attributeManager.invalidate";class Cae{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){xe(this,"id",void 0),xe(this,"gl",void 0),xe(this,"attributes",void 0),xe(this,"updateTriggers",void 0),xe(this,"needsRedraw",void 0),xe(this,"userData",void 0),xe(this,"stats",void 0),xe(this,"attributeTransitionManager",void 0),xe(this,"mergeBoundsMemoized",oy(zre)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new vae(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);ds(zU,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);ds(zU,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}){let c=!1;ds("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=n,o[l]&&bi.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(s[l])||d.setBinaryValue("string"==typeof h?s[h]:void 0,e.startIndices)||"string"==typeof h&&!s[h]&&d.setConstantValue(o[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&ds("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(i=>{var r;return null===(r=this.attributes[i])||void 0===r?void 0:r.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const o in n){const s=n[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(r[o]=s)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new NI(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,o=r[e];return o&&o.forEach(s=>{const a=i[s];a&&a.setNeedsUpdate(a.id,n)}),o}_updateAttribute(e){const{attribute:n,numInstances:i}=e;ds("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&ds("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,ds("attribute.updateEnd",n,i)))}}function WU(t,e,n,i,r){const o=e-t;return(n-e)*r+-o*i+o+e}function $U(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const Dae={interpolation:class Tae extends hy{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:o}}=this,s=o(e/r);this._value=zw(n,i,s)}},spring:class Iae extends hy{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=function Mae(t,e,n,i,r){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=WU(t[s],e[s],n[s],i,r);return o}return WU(t,e,n,i,r)}(o,s,n,i,r);const c=$U(a,n),l=$U(a,s);c<1e-5&&l<1e-5&&(a=n,this.end()),this._prevValue=s,this._currValue=a}}};class Rae{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:o}=this;if(o.has(e)){const c=o.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(!(r=nU(r)))return;const s=Dae[r.type];if(!s)return void bi.error("unsupported transition type '".concat(r.type,"'"))();const a=new s(this.timeline);a.start({...r,fromValue:n,toValue:i}),o.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const s1=Symbol.for("component"),Mu=Symbol.for("propTypes"),QI=Symbol.for("deprecatedProps"),Vm=Symbol.for("asyncPropDefaults"),Jh=Symbol.for("asyncPropOriginal"),Iu=Symbol.for("asyncPropResolved");function Pae(t,e){if(!t.transitions)return!1;const n={},i=t[Mu];let r=!1;for(const o in t.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&eD(t[o],e[o],s)&&(n[o]=!0,r=!0)}return!!r&&n}function XU({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(r,".").concat(o," added");const s=eD(t[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const s=eD(t[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}}return!1}function eD(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function Lae(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function YU(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},XU({oldProps:r,newProps:i,triggerName:n})}function zae(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function tD(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],p=e[10],m=e[11],x=e[12],D=e[13],F=e[14],G=e[15],q=n*a-i*s,ee=n*c-r*s,ve=n*l-o*s,Oe=i*c-r*a,Xe=i*l-o*a,rt=r*l-o*c,nt=d*D-h*x,ht=d*F-p*x,gt=d*G-m*x,yt=h*F-p*D,kt=h*G-m*D,mt=p*G-m*F,vt=q*mt-ee*kt+ve*yt+Oe*gt-Xe*ht+rt*nt;return vt?(t[0]=(a*mt-c*kt+l*yt)*(vt=1/vt),t[1]=(r*kt-i*mt-o*yt)*vt,t[2]=(D*rt-F*Xe+G*Oe)*vt,t[3]=(p*Xe-h*rt-m*Oe)*vt,t[4]=(c*gt-s*mt-l*ht)*vt,t[5]=(n*mt-r*gt+o*ht)*vt,t[6]=(F*ve-x*rt-G*ee)*vt,t[7]=(d*rt-p*ve+m*ee)*vt,t[8]=(s*kt-a*gt+l*nt)*vt,t[9]=(i*gt-n*kt-o*nt)*vt,t[10]=(x*Xe-D*ve+G*q)*vt,t[11]=(h*ve-d*Xe-m*q)*vt,t[12]=(a*ht-s*yt-c*nt)*vt,t[13]=(n*yt-i*ht+r*nt)*vt,t[14]=(D*ee-x*Oe-F*q)*vt,t[15]=(d*Oe-h*ee+p*q)*vt,t):null}function Zh(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=e[9],m=e[10],x=e[11],D=e[12],F=e[13],G=e[14],q=e[15],ee=n[0],ve=n[1],Oe=n[2],Xe=n[3];return t[0]=ee*i+ve*a+Oe*h+Xe*D,t[1]=ee*r+ve*c+Oe*p+Xe*F,t[2]=ee*o+ve*l+Oe*m+Xe*G,t[3]=ee*s+ve*d+Oe*x+Xe*q,t[4]=(ee=n[4])*i+(ve=n[5])*a+(Oe=n[6])*h+(Xe=n[7])*D,t[5]=ee*r+ve*c+Oe*p+Xe*F,t[6]=ee*o+ve*l+Oe*m+Xe*G,t[7]=ee*s+ve*d+Oe*x+Xe*q,t[8]=(ee=n[8])*i+(ve=n[9])*a+(Oe=n[10])*h+(Xe=n[11])*D,t[9]=ee*r+ve*c+Oe*p+Xe*F,t[10]=ee*o+ve*l+Oe*m+Xe*G,t[11]=ee*s+ve*d+Oe*x+Xe*q,t[12]=(ee=n[12])*i+(ve=n[13])*a+(Oe=n[14])*h+(Xe=n[15])*D,t[13]=ee*r+ve*c+Oe*p+Xe*F,t[14]=ee*o+ve*l+Oe*m+Xe*G,t[15]=ee*s+ve*d+Oe*x+Xe*q,t}function a1(t,e,n){var s,a,c,l,d,h,p,m,x,D,F,G,i=n[0],r=n[1],o=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*o+e[12],t[13]=e[1]*i+e[5]*r+e[9]*o+e[13],t[14]=e[2]*i+e[6]*r+e[10]*o+e[14],t[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],p=e[6],m=e[7],x=e[8],D=e[9],F=e[10],G=e[11],t[0]=s=e[0],t[1]=a,t[2]=c,t[3]=l,t[4]=d,t[5]=h,t[6]=p,t[7]=m,t[8]=x,t[9]=D,t[10]=F,t[11]=G,t[12]=s*i+d*r+x*o+e[12],t[13]=a*i+h*r+D*o+e[13],t[14]=c*i+p*r+F*o+e[14],t[15]=l*i+m*r+G*o+e[15]),t}function nD(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function KU(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+d*i,t[6]=a*r+h*i,t[7]=c*r+p*i,t[8]=l*r-o*i,t[9]=d*r-s*i,t[10]=h*r-a*i,t[11]=p*r-c*i,t}function qU(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+d*i,t[2]=a*r+h*i,t[3]=c*r+p*i,t[4]=l*r-o*i,t[5]=d*r-s*i,t[6]=h*r-a*i,t[7]=p*r-c*i,t}function ZU(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function fy(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}!function ice(){var t=new Js(4);Js!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const QU=[0,0,0,0],_ce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],e8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],bce=[0,0,0],t8=[0,0,0],yce=oy(function wce({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function vce(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=QU,c=QU,l=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:p}=n8(t,e,n);return p&&(c=t.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=fy([],c,s),o=i||o,s=Zh([],r,o),s=Zh([],s,_ce)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(t,n,i),d=t.getDistanceScales(),h=[t.width*e,t.height*e],p=fy([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,m={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:bce,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:e8,project_uCameraPosition:a};if(l){const x=t.getDistanceScales(l);switch(n){case Si.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=x.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=x.unitsPerMeter2;break;case Si.LNGLAT:case Si.LNGLAT_OFFSETS:t._pseudoMeters||(m.project_uCommonUnitsPerMeter=x.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=x.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=x.unitsPerDegree2;break;case Si.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,x.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,x.unitsPerMeter2[2]]}}return m});function n8(t,e,n=t8){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===Si.LNGLAT_OFFSETS||e===Si.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case bl.WEB_MERCATOR:(e===Si.LNGLAT||e===Si.CARTESIAN)&&(r=[0,0,0],o=!1);break;case bl.WEB_MERCATOR_AUTO_OFFSET:e===Si.LNGLAT?i=r:e===Si.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case bl.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case bl.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class i8 extends Gw{toString(){let e="[";if(Wr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=pi(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function c1(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function r8(t,e){return t[0]=-e[0],t[1]=-e[1],t}function o8(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}!function Ece(){var t=new Js(2);Js!=Float32Array&&(t[0]=0,t[1]=0)}();var s8=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(s8||{});const Cce=45*Math.PI/180,Tce=1,iD=.1,rD=500,Mce=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Hn extends i8{static get IDENTITY(){return function Dce(){return d1||(d1=new Hn,Object.freeze(d1)),d1}()}static get ZERO(){return function Ice(){return l1||(l1=new Hn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(l1)),l1}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return s8}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,o,s,a,c,l,d,h,p,m,x,D,F){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=p,this[12]=m,this[13]=x,this[14]=D,this[15]=F,this.check()}setRowMajor(e,n,i,r,o,s,a,c,l,d,h,p,m,x,D,F){return this[0]=e,this[1]=o,this[2]=l,this[3]=m,this[4]=n,this[5]=s,this[6]=d,this[7]=x,this[8]=i,this[9]=a,this[10]=h,this[11]=D,this[12]=r,this[13]=c,this[14]=p,this[15]=F,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Mce)}fromObject(e){return this.check()}fromQuaternion(e){return function qae(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,l=n*s,d=i*s,h=i*a,p=r*s,m=r*a,x=r*c,D=o*s,F=o*a,G=o*c;t[0]=1-h-x,t[1]=d+G,t[2]=p-F,t[3]=0,t[4]=d-G,t[5]=1-l-x,t[6]=m+D,t[7]=0,t[8]=p+F,t[9]=m-D,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:o,near:s=iD,far:a=rD}=e;return a===1/0?function Rce(t,e,n,i,r,o){const a=2*o/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),p=-2*o;t[0]=2*o/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=p,t[15]=0}(this,n,i,r,o,s):function Jae(t,e,n,i,r,o,s){var a=1/(n-e),c=1/(r-i),l=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0}(this,n,i,r,o,s,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function nce(t,e,n,i){var r,o,s,a,c,l,d,h,p,m,x=e[0],D=e[1],F=e[2],G=i[0],q=i[1],ee=i[2],ve=n[0],Oe=n[1],Xe=n[2];Math.abs(x-ve)<vl&&Math.abs(D-Oe)<vl&&Math.abs(F-Xe)<vl?function Gae(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(d=x-ve,h=D-Oe,p=F-Xe,r=q*(p*=m=1/Math.hypot(d,h,p))-ee*(h*=m),o=ee*(d*=m)-G*p,s=G*h-q*d,(m=Math.hypot(r,o,s))?(r*=m=1/m,o*=m,s*=m):(r=0,o=0,s=0),a=h*s-p*o,c=p*r-d*s,l=d*o-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),t[0]=r,t[1]=a,t[2]=d,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=p,t[11]=0,t[12]=-(r*x+o*D+s*F),t[13]=-(a*x+c*D+l*F),t[14]=-(d*x+h*D+p*F),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:o,near:s=iD,far:a=rD}=e;return function ece(t,e,n,i,r,o,s){var a=1/(e-n),c=1/(i-r),l=1/(o-s);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(s+o)*l,t[15]=1}(this,n,i,r,o,s,a),this.check()}orthographic(e){const{fovy:n=Cce,aspect:i=Tce,focalDistance:r=1,near:o=iD,far:s=rD}=e;a8(n);const c=r*Math.tan(n/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:o=500}=e;return a8(n),function Zae(t,e,n,i,r){var s,o=1/Math.tan(e/2);t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(s=1/(i-r)),t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,o),this.check()}determinant(){return function $ae(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],x=t[13],D=t[14],F=t[15];return(e*s-n*o)*(h*F-p*D)-(e*a-i*o)*(d*F-p*x)+(e*c-r*o)*(d*D-h*x)+(n*a-i*s)*(l*F-p*m)-(n*c-r*s)*(l*D-h*m)+(i*c-r*a)*(l*x-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return function Wae(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return tD(this,this),this.check()}multiplyLeft(e){return Zh(this,e,this),this.check()}multiplyRight(e){return Zh(this,this,e),this.check()}rotateX(e){return KU(this,this,e),this.check()}rotateY(e){return function Yae(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*i,t[1]=s*r-d*i,t[2]=a*r-h*i,t[3]=c*r-p*i,t[8]=o*i+l*r,t[9]=s*i+d*r,t[10]=a*i+h*r,t[11]=c*i+p*r}(this,this,e),this.check()}rotateZ(e){return qU(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function Xae(t,e,n,i){var c,l,d,h,p,m,x,D,F,G,q,ee,ve,Oe,Xe,rt,nt,ht,gt,yt,kt,mt,vt,Ft,r=i[0],o=i[1],s=i[2],a=Math.hypot(r,o,s);a<vl||(r*=a=1/a,o*=a,s*=a,c=Math.sin(n),l=Math.cos(n),p=e[1],m=e[2],x=e[3],F=e[5],G=e[6],q=e[7],ve=e[9],Oe=e[10],Xe=e[11],gt=r*o*(d=1-l)-s*c,yt=o*o*d+l,kt=s*o*d+r*c,mt=r*s*d+o*c,vt=o*s*d-r*c,Ft=s*s*d+l,t[0]=(h=e[0])*(rt=r*r*d+l)+(D=e[4])*(nt=o*r*d+s*c)+(ee=e[8])*(ht=s*r*d-o*c),t[1]=p*rt+F*nt+ve*ht,t[2]=m*rt+G*nt+Oe*ht,t[3]=x*rt+q*nt+Xe*ht,t[4]=h*gt+D*yt+ee*kt,t[5]=p*gt+F*yt+ve*kt,t[6]=m*gt+G*yt+Oe*kt,t[7]=x*gt+q*yt+Xe*kt,t[8]=h*mt+D*vt+ee*Ft,t[9]=p*mt+F*vt+ve*Ft,t[10]=m*mt+G*vt+Oe*Ft,t[11]=x*mt+q*vt+Xe*Ft,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return nD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return a1(this,this,e),this.check()}transform(e,n){return 4===e.length?(ty(n=fy(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function Sce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=II(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return ty(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function Fre(t,e,n){const i=e[0],r=e[1],o=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/o,t[1]=(n[1]*i+n[5]*r)/o,t}(n||[-0,-0],e,this);break;case 3:i=Y4(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return ty(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let l1,d1;function a8(t){if(t>2*Math.PI)throw Error("expected radians")}function Hm(t,e){const n=fy([],e,t);return ZU(n,n,1/n[3]),n}function c8(t,e){const n=t%e;return n<0?e+n:n}function oD(t,e,n){return t<e?e:t>n?n:t}const sD=Math.log2||function Oce(t){return Math.log(t)*Math.LOG2E};function dd(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Rc=Math.PI,l8=Rc/4,qa=Rc/180,aD=180/Rc,zm=512,u1=4003e4,h1=85.051129,Pce=1.5;function f1(t){const[e,n]=t;return dd(Number.isFinite(e)),dd(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[zm*(e*qa+Rc)/(2*Rc),zm*(Rc+Math.log(Math.tan(l8+n*qa*.5)))/(2*Rc)]}function Gm(t){const[e,n]=t,i=e/zm*(2*Rc)-Rc,r=2*(Math.atan(Math.exp(n/zm*(2*Rc)-Rc))-l8);return[i*aD,r*aD]}function cD(t){const e=Math.cos(t*qa);return zm/u1/e}function lD(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;dd(Number.isFinite(e)&&Number.isFinite(n));const r=zm,o=Math.cos(e*qa),s=r/360,a=s/o,c=r/u1/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(i){const d=qa*Math.tan(e*qa)/o,p=r/u1*d,m=p/a*c;l.unitsPerDegree2=[0,s*d/2,p],l.unitsPerMeter2=[m,0,m]}return l}function d8(t,e){const[n,i,r]=t,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=lD({longitude:n,latitude:i,highPrecision:!0}),d=f1(t);d[0]+=o*(c[0]+l[0]*s),d[1]+=s*(c[1]+l[1]*s);const h=Gm(d),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],p]:h}function p1(t){return 2*Math.atan(.5/t)*aD}function dD(t){return.5/Math.tan(.5*t*qa)}function h8(t,e){const[n,i,r=0]=t;return dd(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Hm(e,[n,i,r,1])}function py(t,e,n=0){const[i,r,o]=t;if(dd(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return Hm(e,[i,r,o,1]);const s=Hm(e,[i,r,0,1]),a=Hm(e,[i,r,1,1]),c=s[2],l=a[2];return o8([],s,a,c===l?0:((n||0)-c)/(l-c))}const f8=Math.PI/180;function p8(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=Hm(i,[e,0,1,1]),o=Hm(i,[e,t.height,1,1]),l=Gm(o8([],r,o,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return l.push(n),l}const zce=Math.PI/180,Gce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y8=[0,0,0],Wce={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Du{constructor(e={}){xe(this,"id",void 0),xe(this,"x",void 0),xe(this,"y",void 0),xe(this,"width",void 0),xe(this,"height",void 0),xe(this,"padding",void 0),xe(this,"isGeospatial",void 0),xe(this,"zoom",void 0),xe(this,"focalDistance",void 0),xe(this,"position",void 0),xe(this,"modelMatrix",void 0),xe(this,"distanceScales",void 0),xe(this,"scale",void 0),xe(this,"center",void 0),xe(this,"cameraPosition",void 0),xe(this,"projectionMatrix",void 0),xe(this,"viewMatrix",void 0),xe(this,"viewMatrixUncentered",void 0),xe(this,"viewMatrixInverse",void 0),xe(this,"viewProjectionMatrix",void 0),xe(this,"pixelProjectionMatrix",void 0),xe(this,"pixelUnprojectionMatrix",void 0),xe(this,"resolution",void 0),xe(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Wce,this.focalDistance=e.focalDistance||1,this.position=e.position||y8,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?bl.WEB_MERCATOR:bl.WEB_MERCATOR_AUTO_OFFSET:bl.IDENTITY}equals(e){return e instanceof Du&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Cu(e.projectionMatrix,this.projectionMatrix)&&Cu(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=h8(this.projectPosition(e),this.pixelProjectionMatrix),[o,s]=r,a=n?s:this.height-s;return 2===e.length?[o,a]:[o,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,o,s]=e,l=py([r,n?o:this.height-o,s],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,p]=this.unprojectPosition(l);return Number.isFinite(s)?[d,h,p]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=f1(e);return n[1]=wr(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Gm(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],o[0],s[0]),Math.min(i[1],r[1],o[1],s[1]),Math.max(i[0],r[0],o[0],s[0]),Math.max(i[1],r[1],o[1],s[1])]}getDistanceScales(e){return e?lD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Vre(t){return{left:Pm(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Pm(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Pm(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Pm(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Pm(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Pm(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Fce(t){const{latitude:e}=t;dd(Number.isFinite(e));const n=Math.cos(e*qa);return function Nce(t){return sD(t)}(u1*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||lD({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:s}=e;let a=y8;if(o&&(a=s?new Hn(s).transformAsVector(o,[]):o),this.isGeospatial){const c=this.projectPosition([n,i,0]);this.center=new nn(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=Gce,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new Hn).multiplyRight(n).translate(new nn(this.center).negate()),this.projectionMatrix=i||function $ce({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const c=t/e,l=n?(new Hn).orthographic({fovy:i,aspect:c,focalDistance:r,near:s,far:a}):(new Hn).perspective({fovy:i,aspect:c,near:s,far:a});if(o){const{left:d=0,right:h=0,top:p=0,bottom:m=0}=o,x=wr((d+t-h)/2,0,t)-t/2,D=wr((p+e-m)/2,0,e)-e/2;l[8]-=2*x/t,l[9]+=2*D/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||s*zce,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Zh(h,h,this.projectionMatrix),Zh(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=tD([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Ure(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];nD(p,p,[this.width/2,-this.height/2,1]),a1(p,p,[1,-1,0]),Zh(m,p,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=tD([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||bi.warn("Pixel project matrix not invertible")()}}xe(Du,"displayName","Viewport");class Wm extends Du{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:p=0,position:m,padding:x,legacyMeterSizes:D=!1}=e;let{width:F,height:G,altitude:q=1.5}=e;const ee=Math.pow(2,r);F=F||1,G=G||1;let ve,Oe=null;if(d)q=d[5]/2,ve=p1(q);else{let rt;if(e.fovy?(ve=e.fovy,q=dD(ve)):ve=p1(q),x){const{top:nt=0,bottom:ht=0}=x;rt=[0,wr((nt+G-ht)/2,0,G)-G/2]}Oe=function u8(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:d=p1(Pce)}=t;void 0!==i&&(d=p1(i));const h=d*qa,p=r*qa,m=dD(d);let x=m;s&&(x+=s[2]*a/Math.cos(p)/n);const D=h*(.5+(o?o[1]:0)/n),F=Math.sin(D)*x/Math.sin(oD(Math.PI/2-p-D,.01,Math.PI-.01)),G=Math.sin(p)*F+x;return{fov:h,aspect:e/n,focalDistance:m,near:c,far:Math.min(G*l,10*x)}}({width:F,height:G,scale:ee,center:m&&[0,0,m[2]*cD(n)],offset:rt,pitch:o,fovy:ve,nearZMultiplier:a,farZMultiplier:c})}let Xe=function Lce(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a1(a,a,[0,0,-r]),KU(a,a,-n*qa),qU(a,a,i*qa);const c=o/e;return nD(a,a,[c,c,c]),s&&a1(a,a,function Mre(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),a}({height:G,pitch:o,bearing:s,scale:ee,altitude:q});p&&(Xe=(new Hn).translate([512*p,0,0]).multiplyLeft(Xe)),super({...e,width:F,height:G,viewMatrix:Xe,longitude:i,latitude:n,zoom:r,...Oe,fovy:ve,focalDistance:q}),xe(this,"longitude",void 0),xe(this,"latitude",void 0),xe(this,"pitch",void 0),xe(this,"bearing",void 0),xe(this,"altitude",void 0),xe(this,"fovy",void 0),xe(this,"orthographic",void 0),xe(this,"_subViewports",void 0),xe(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=q,this.fovy=ve,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=D,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const o=r?new Wm({...this,worldOffset:r}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*cD(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/cD(i)]}addMetersToLngLat(e,n){return d8(e,n)}panByPosition(e,n){const i=py(n,this.pixelUnprojectionMatrix),o=c1([],this.projectFlat(e),r8([],i)),s=c1([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){const n=function Uce(t,e=0){const{width:n,height:i,unproject:r}=t,o={targetZ:e},s=r([0,i],o),a=r([n,i],o);let c,l;return(t.fovy?.5*t.fovy*f8:Math.atan(.5/t.altitude))>(90-t.pitch)*f8-.01?(c=p8(t,0,e),l=p8(t,n,e)):(c=r([0,0],o),l=r([n,0],o)),[s,a,l,c]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:o,latitude:s,zoom:a}=function Bce(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,c],[l,d]]=i,h=function jce(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(dd(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),p=f1([a,oD(d,-h1,h1)]),m=f1([l,oD(c,-h1,h1)]),x=[Math.max(Math.abs(m[0]-p[0]),r),Math.max(Math.abs(m[1]-p[1]),r)],D=[e-h.left-h.right-2*Math.abs(s[0]),n-h.top-h.bottom-2*Math.abs(s[1])];dd(D[0]>0&&D[1]>0);const F=D[0]/x[0],G=D[1]/x[1],Oe=Gm([(m[0]+p[0])/2+(h.right-h.left)/2/F,(m[1]+p[1])/2+(h.top-h.bottom)/2/G]),Xe=Math.min(o,sD(Math.abs(Math.min(F,G))));return dd(Number.isFinite(Xe)),{longitude:Oe[0],latitude:Oe[1],zoom:Xe}}({width:i,height:r,bounds:e,...n});return new Wm({width:i,height:r,longitude:o,latitude:s,zoom:a})}}xe(Wm,"displayName","WebMercatorViewport");const v8=[0,0,0];function hD(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof Wm){const[r,o,s=0]=t,a=e.getDistanceScales([r,o]);i[2]=s*a.unitsPerMeter[2]}return i}function x8(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,c=0]=t;switch(n&&([s,a,c]=fy([],[s,a,c,1],n)),i){case Si.LNGLAT:return hD([s,a,c],e,o);case Si.LNGLAT_OFFSETS:return hD([s+r[0],a+r[1],c+(r[2]||0)],e,o);case Si.METER_OFFSETS:return hD(d8(r,[s,a,c]),e,o);default:return e.isGeospatial?[s+r[0],a+r[1],c+r[2]]:e.projectPosition([s,a,c])}}const Kce={10241:9987,10240:9729,10242:33071,10243:33071},fD={};function xl(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!xl(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const o of i)if(!e.hasOwnProperty(o)||!xl(t[o],e[o],n-1))return!1;return!0}return!1}const Zce={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||pD(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>xl(t,e,1)},accessor:{validate(t,e){const n=m1(t);return"function"===n||n===m1(e.value)},equal:(t,e,n)=>"function"==typeof e||xl(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||pD(t),equal(t,e,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?xl(t,e,r):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?xl(t,e,r):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>{const i=n.context;return i&&i.gl?function qce(t,e,n,i){if(n instanceof Rs)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let r=null;n.compressed&&(r={10241:n.data.length>1?9985:9729});const o=new Rs(e,{...n,parameters:{...Kce,...r,...i}});return fD[o.id]=t,o}(n.id,i.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{!function Jce(t,e){!e||!(e instanceof Rs)||fD[e.id]===t&&(e.delete(),delete fD[e.id])}(n.id,t)}}};function ele(t,e){switch(m1(e)){case"object":return my(t,e);case"array":return my(t,{type:"array",value:e,compare:!1});case"boolean":return my(t,{type:"boolean",value:e});case"number":return my(t,{type:"number",value:e});case"function":return my(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function my(t,e){return"type"in e?{name:t,...Zce[e.type],...e}:"value"in e?{name:t,type:m1(e.value),...e}:{name:t,type:"object",value:e}}function pD(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function m1(t){return pD(t)?"array":null===t?"null":typeof t}function mD(t,e){let n="_mergedDefaultProps";if(e)for(const r of e){const o=r.constructor;o&&(n+=":".concat(o.extensionName||o.name))}return w8(t,n)||(t[n]=function ile(t,e){if(!t.prototype)return null;const r=mD(Object.getPrototypeOf(t)),s=function Qce(t){const e={},n={},i={};for(const[r,o]of Object.entries(t)){const s=o?.deprecatedFor;if(s)i[r]=Array.isArray(s)?s:[s];else{const a=ele(r,o);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(w8(t,"defaultProps")||{}),a=Object.assign(Object.create(null),r,s.defaultProps),c=Object.assign(Object.create(null),r?.[Mu],s.propTypes),l=Object.assign(Object.create(null),r?.[QI],s.deprecatedProps);for(const d of e){const h=mD(d.constructor);h&&(Object.assign(a,h),Object.assign(c,h[Mu]),Object.assign(l,h[QI]))}return function rle(t,e){const n=function cle(t){const e=t.componentName;return e||bi.warn("".concat(t.name,".componentName not specified"))(),e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}(a,t),function sle(t,e){const n={},i={};for(const r in e){const o=e[r],{name:s,value:a}=o;o.async&&(n[s]=a,i[s]=ale(s))}t[Vm]=n,t[Jh]={},Object.defineProperties(t,i)}(a,c),function ole(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const o of e[n])gD(this,o)||(this[o]=i);bi.deprecated(r,e[n].join("/"))()}})}(a,l),a[Mu]=c,a[QI]=l,0===e.length&&!gD(t,"_propTypes")&&(t._propTypes=c),a}(t,e||[]))}function ale(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||eU(e)?this[Jh][t]=e:this[Iu][t]=e},get(){if(this[Iu]){if(t in this[Iu])return this[Iu][t]||this[Vm][t];if(t in this[Jh]){const e=this[s1]&&this[s1].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Vm][t]}}return this[Vm][t]}}}function gD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w8(t,e){return gD(t,e)&&t[e]}let lle=0;class _D{constructor(...e){xe(this,"id",void 0),xe(this,"props",void 0),xe(this,"count",void 0),this.props=function tle(t,e){let n;for(let o=e.length-1;o>=0;o--){const s=e[o];"extensions"in s&&(n=s.extensions)}const i=mD(t.constructor,n),r=Object.create(i);r[s1]=t,r[Jh]={},r[Iu]={};for(let o=0;o<e.length;++o){const s=e[o];for(const a in s)r[a]=s[a]}return Object.freeze(r),r}(this,e),this.id=this.props.id,this.count=lle++}clone(e){const{props:n}=this,i={};for(const r in n[Vm])r in n[Iu]?i[r]=n[Iu][r]:r in n[Jh]&&(i[r]=n[Jh][r]);return new this.constructor({...n,...i,...e})}}function bD(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new g1(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function g1(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(g1=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new g1(t)}xe(_D,"componentName","Component"),xe(_D,"defaultProps",{});const dle=Object.freeze({});class ule{constructor(e){xe(this,"component",void 0),xe(this,"onAsyncPropUpdated",void 0),xe(this,"asyncProps",void 0),xe(this,"oldProps",void 0),xe(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||dle}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[s1]||this.component;const n=e[Iu]||{},i=e[Jh]||e,r=e[Vm]||{};for(const o in n){const s=n[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(const o in i){const s=i[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(eU(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(o=>{this.component&&(o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,r),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,n){var i=this;return zt(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const o=r.pendingLoadCount;let s=[],a=0;var d,c=!1,l=!1;try{for(var p,h=bD(n);c=!(p=yield h.next()).done;c=!1){const m=p.value;{if(!i.component)return;const{dataTransform:x}=i.component.props;s=x?x(m,s):s.concat(m),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,i._setAsyncPropValue(e,s,o)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,s)})()}_postProcessValue(e,n){const i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.props[Mu];this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class hle extends ule{constructor({attributeManager:e,layer:n}){super(n),xe(this,"attributeManager",void 0),xe(this,"needsRedraw",void 0),xe(this,"needsUpdate",void 0),xe(this,"subLayers",void 0),xe(this,"usesPickingColorCache",void 0),xe(this,"hasPickingBuffer",void 0),xe(this,"changeFlags",void 0),xe(this,"viewport",void 0),xe(this,"uniformTransitions",void 0),xe(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const i=this.layer,r=i?.props.fetch;return r?r(n,{propName:e,layer:i}):super._fetch(e,n)}_onResolve(e,n){const i=this.layer;if(i){const r=i.props.onDataLoad;"data"===e&&r&&r(n,{propName:e,layer:i})}}_onError(e,n){const i=this.layer;i&&i.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const kc=t=>"function"==typeof t,Ru=t=>null!==t&&"object"==typeof t,A8=t=>Ru(t)&&t.constructor==={}.constructor,fle=t=>t&&"function"==typeof t[Symbol.iterator],ple=t=>t&&"function"==typeof t[Symbol.asyncIterator],Qh=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,ef=t=>typeof Blob<"u"&&t instanceof Blob,mle=t=>t&&"object"==typeof t&&t.isBuffer,S8=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Ru(t)&&kc(t.tee)&&kc(t.cancel)&&kc(t.getReader))(t)||(t=>Ru(t)&&kc(t.read)&&kc(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function ud(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function yD(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function vD(t){var e,n;let i;return ud(t,"null loader"),ud(yD(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let xD="";const wD={},xle=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,wle=/^([-\w.]+\/[-\w.+]+)/;function C8(t){const e=xle.exec(t);return e?e[1]:""}const T8=/\?.*/;function ED(t){return t.replace(T8,"")}function _1(t){return Qh(t)?t.url:ef(t)?t.name||"":"string"==typeof t?t:""}function AD(t){if(Qh(t)){const e=t,n=e.headers.get("content-type")||"",i=ED(e.url);return function Ele(t){const e=wle.exec(t);return e?e[1]:t}(n)||C8(i)}return ef(t)?t.type||"":"string"==typeof t?C8(t):""}function M8(t){return SD.apply(this,arguments)}function SD(){return SD=zt(function*(t){if(Qh(t))return t;const e={},n=function Sle(t){return Qh(t)?t.headers["content-length"]||-1:ef(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const i=_1(t),r=AD(t);r&&(e["content-type"]=r);const o=yield function Mle(t){return MD.apply(this,arguments)}(t);o&&(e["x-first-bytes"]=o),"string"==typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}),SD.apply(this,arguments)}function CD(){return CD=zt(function*(t){if(!t.ok){const e=yield function Tle(t){return TD.apply(this,arguments)}(t);throw new Error(e)}}),CD.apply(this,arguments)}function TD(){return TD=zt(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),TD.apply(this,arguments)}function MD(){return MD=zt(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=o=>{var s;return i(null==o||null===(s=o.target)||void 0===s?void 0:s.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function Ile(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),MD.apply(this,arguments)}function I8(t,e){return ID.apply(this,arguments)}function ID(){return ID=zt(function*(t,e){if("string"==typeof t){t=function vle(t){for(const e in wD)t.startsWith(e)&&(t=t.replace(e,wD[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(xD).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield M8(t)}),ID.apply(this,arguments)}function $m(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function Dle(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}()}const D8=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";$m();class kle{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=function Rle(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function DD(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let b1;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(b1||(b1={}));function R8(t){return"string"!=typeof t?t:(t=t.toUpperCase(),b1[t]||b1.WHITE)}function y1(t,e){if(!t)throw new Error(e||"Assertion failed")}globalThis.self||globalThis.window||globalThis;const v1=globalThis.window||globalThis.self||globalThis.global,gy=(globalThis,globalThis.process||{});function Xm(){let t;var e,n;if($m()&&v1.performance)t=null==v1||null===(e=v1.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in gy){var i;const r=null==gy||null===(i=gy.hrtime)||void 0===i?void 0:i.call(gy);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}globalThis,globalThis;const Ym={debug:$m()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Ule={enabled:!0,level:0};function Ja(){}const k8={},O8={once:!0};let P8=(()=>{class t{constructor(){let{id:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.id=void 0,this.VERSION=D8,this._startTs=Xm(),this._deltaTs=Xm(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=n,this.userData={},this._storage=new kle("__probe-".concat(this.id,"__"),Ule),this.timeStamp("".concat(this.id," started")),function jle(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=t;for(const o of i){const s=r[o];"function"==typeof s&&(e.find(a=>o===a)||(r[o]=s.bind(t)))}}(this),Object.seal(this)}set level(n){this.setLevel(n)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Xm()-this._startTs).toPrecision(10))}getDelta(){return Number((Xm()-this._deltaTs).toPrecision(10))}set priority(n){this.level=n}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(n){return this._storage.setConfiguration({level:n}),this}get(n){return this._storage.config[n]}set(n,i){this._storage.setConfiguration({[n]:i})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(n,i){y1(n,i)}warn(n){return this._getLogFunction(0,n,Ym.warn,arguments,O8)}error(n){return this._getLogFunction(0,n,Ym.error,arguments)}deprecated(n,i){return this.warn("`".concat(n,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(n,i){return this.error("`".concat(n,"` has been removed. Use `").concat(i,"` instead"))}probe(n,i){return this._getLogFunction(n,i,Ym.log,arguments,{time:!0,once:!0})}log(n,i){return this._getLogFunction(n,i,Ym.debug,arguments)}info(n,i){return this._getLogFunction(n,i,console.info,arguments)}once(n,i){return this._getLogFunction(n,i,Ym.debug||Ym.info,arguments,O8)}table(n,i,r){return i?this._getLogFunction(n,i,console.table||Ja,r&&[r],{tag:Gle(i)}):Ja}image(n){let{logLevel:i,priority:r,image:o,message:s="",scale:a=1}=n;return this._shouldLog(i||r)?$m()?function zle(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=DD(o,n,i);console.log(...s)},o.src=e,Ja}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...DD(e,n,i)),Ja;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...DD(o,n,i)),o.src=e.toDataURL(),Ja}return Ja}({image:o,message:s,scale:a}):function Hle(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),Ja}({image:o,message:s,scale:a}):Ja}time(n,i){return this._getLogFunction(n,i,console.time?console.time:console.info)}timeEnd(n,i){return this._getLogFunction(n,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(n,i){return this._getLogFunction(n,i,console.timeStamp||Ja)}group(n,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const o=F8({logLevel:n,message:i,opts:r}),{collapsed:s}=r;return o.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(o)}groupCollapsed(n,i){return this.group(n,i,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(n){return this._getLogFunction(n,"",console.groupEnd||Ja)}withGroup(n,i,r){this.group(n,i)();try{r()}finally{this.groupEnd(n)()}}trace(){console.trace&&console.trace()}_shouldLog(n){return this.isEnabled()&&this.getLevel()>=N8(n)}_getLogFunction(n,i,r,o,s){if(this._shouldLog(n)){s=F8({logLevel:n,message:i,args:o,opts:s}),y1(r=r||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Xm();const a=s.tag||s.message;if(s.once&&a){if(k8[a])return Ja;k8[a]=Xm()}return i=function Vle(t,e,n){if("string"==typeof e){const i=n.time?function Ple(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function Ole(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function Ble(t,e,n){if(!$m&&"string"==typeof t){if(e){const i=R8(e);t="\x1b[".concat(i,"m").concat(t,"\x1b[39m")}if(n){const i=R8(n);t="\x1b[".concat(i+10,"m").concat(t,"\x1b[49m")}}return t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),r.bind(console,i,...s.args)}return Ja}}return t.VERSION=D8,t})();function N8(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return y1(Number.isFinite(e)&&e>=0),e}function F8(t){const{logLevel:e,message:n}=t;t.logLevel=N8(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return y1("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Gle(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const L8=new P8({id:"loaders.gl"});class Wle{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const x1=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),B8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),j8=(B8&&parseFloat(B8[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class $le{constructor(){xe(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.error.bind(this.console,...n)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:x1,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Xle={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function RD(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const kD=()=>{const t=RD();return t.globalOptions=t.globalOptions||{...j8},t.globalOptions};function Yle(t,e,n,i){return n=n||[],function Kle(t,e){U8(t,null,j8,Xle,e);for(const n of e)U8(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function V8(t,e,n){const r={...t.options||{}};return function Jle(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new Wle),H8(r,kD()),H8(r,e),r}(e,t,i)}function U8(t,e,n,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const c=!e&&Ru(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)L8.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=qle(a,r);L8.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(h))()}}}function qle(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const o in r.options){if(t===o)return"Did you mean '".concat(r.id,".").concat(o,"'?");const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(o,"'?"))}return i}function H8(t,e){for(const n in e)n in e&&(t[n]=A8(e[n])&&A8(t[n])?{...t[n],...e[n]}:e[n])}function z8(t,e){const n=kD(),i=t||n;return"function"==typeof i.fetch?i.fetch:Ru(i.fetch)?r=>I8(r,i):null!=e&&e.fetch?e?.fetch:I8}function El(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Zle="3.4.11",Al={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},ede=Al.global||Al.self||Al.window||{},Sl="object"!=typeof process||"[object process]"!==String(process)||process.browser,OD="function"==typeof importScripts,tde=typeof window<"u"&&typeof window.orientation<"u",G8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);G8&&parseFloat(G8[1]);class PD{terminate(){}}const ND=new Map;function W8(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function $8(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(t)if(X8(t))i.add(t);else if(X8(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)$8(t[r],e,i);return void 0===n?Array.from(i):[]}function X8(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const FD=()=>{};class LD{static isSupported(){return typeof Worker<"u"&&Sl||typeof PD<"u"&&!Sl}constructor(e){xe(this,"name",void 0),xe(this,"source",void 0),xe(this,"url",void 0),xe(this,"terminated",!1),xe(this,"worker",void 0),xe(this,"onMessage",void 0),xe(this,"onError",void 0),xe(this,"_loadableURL","");const{name:n,source:i,url:r}=e;El(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=FD,this.onError=o=>console.log(o),this.worker=Sl?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=FD,this.onError=FD,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||$8(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function nde(t){El(t.source&&!t.url||!t.source&&t.url);let e=ND.get(t.source||t.url);return e||(t.url&&(e=function ide(t){if(!t.startsWith("http"))return t;const e=function rde(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return W8(e)}(t.url),ND.set(t.url,e)),t.source&&(e=W8(t.source),ND.set(t.source,e))),El(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new PD(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new PD(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class sde{constructor(e,n){xe(this,"name",void 0),xe(this,"workerThread",void 0),xe(this,"isRunning",!0),xe(this,"result",void 0),xe(this,"_resolve",()=>{}),xe(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){El(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){El(this.isRunning),this.isRunning=!1,this._reject(e)}}class ade{static isSupported(){return LD.isSupported()}constructor(e){xe(this,"name","unnamed"),xe(this,"source",void 0),xe(this,"url",void 0),xe(this,"maxConcurrency",1),xe(this,"maxMobileConcurrency",1),xe(this,"onDebug",()=>{}),xe(this,"reuseWorkers",!0),xe(this,"props",{}),xe(this,"jobQueue",[]),xe(this,"idleQueue",[]),xe(this,"count",0),xe(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e){var n=arguments,i=this;return zt(function*(){let r=n.length>1&&void 0!==n[1]?n[1]:(a,c,l)=>a.done(l),o=n.length>2&&void 0!==n[2]?n[2]:(a,c)=>a.error(c);const s=new Promise(a=>(i.jobQueue.push({name:e,onMessage:r,onError:o,onStart:a}),i));return i._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return zt(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new sde(i.name,n);n.onMessage=o=>i.onMessage(r,o.type,o.payload),n.onError=o=>i.onError(r,o),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new LD({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return tde?this.maxMobileConcurrency:this.maxConcurrency}}const cde={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class hd{static isSupported(){return LD.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hd._workerFarm=hd._workerFarm||new hd({}),hd._workerFarm.setProps(e),hd._workerFarm}constructor(e){xe(this,"props",void 0),xe(this,"workerPools",new Map),this.props={...cde},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let o=this.workerPools.get(n);return o||(o=new ade({name:n,source:i,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}xe(hd,"_workerFarm",void 0);const lde="latest";function BD(){return BD=zt(function*(t,e,n,i,r){const o=t.id,s=function dde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let o=t.version;"latest"===o&&(o=lde);const s=o?"@".concat(o):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(i)}return El(r),r}(t,n),c=hd.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",fde.bind(null,r));return l.postMessage("process",{input:e,options:n,context:i}),yield(yield l.result).result}),BD.apply(this,arguments)}function fde(t,e,n,i){return jD.apply(this,arguments)}function jD(){return jD=zt(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const a=yield t(o,s);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),jD.apply(this,arguments)}function K8(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function VD(){return VD=zt(function*(t){const e=[];var r,n=!1,i=!1;try{for(var s,o=bD(t);n=!(s=yield o.next()).done;n=!1)e.push(s.value)}catch(a){i=!0,r=a}finally{try{n&&null!=o.return&&(yield o.return())}finally{if(i)throw r}}return function mde(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),r=i.reduce((a,c)=>a+c.byteLength,0),o=new Uint8Array(r);let s=0;for(const a of i)o.set(a,s),s+=a.byteLength;return o.buffer}(...e)}),VD.apply(this,arguments)}const _de=262144,yde=262144;function q8(t,e){this.v=t,this.k=e}function w1(t){return new q8(t,0)}function _y(t){var e,n;function i(o,s){try{var a=t[o](s),c=a.value,l=c instanceof q8;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===o?"return":"next";if(!c.k||d.done)return i(h,d);d=t[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(o,s){return new Promise(function(a,c){var l={key:o,arg:s,resolve:a,reject:c,next:null};n?n=n.next=l:(e=n=l,i(o,s))})},"function"!=typeof t.return&&(this.return=void 0)}function zD(t){return function(){return new _y(t.apply(this,arguments))}}_y.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},_y.prototype.next=function(t){return this._invoke("next",t)},_y.prototype.throw=function(t){return this._invoke("throw",t)},_y.prototype.return=function(t){return this._invoke("return",t)};const xde=1048576;function GD(){return GD=zD(function*(t,e){const n=e?.chunkSize||xde;let i=0;for(;i<t.size;){const r=i+n,o=yield w1(t.slice(i,r).arrayBuffer());i=r,yield o}}),GD.apply(this,arguments)}function J8(t){if(function Ede(t){return t&&"object"==typeof t&&t.isBuffer}(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Z8(t,e){return x1?function Ade(t,e){return WD.apply(this,arguments)}(t,e):function Sde(t,e){return $D.apply(this,arguments)}(t,e)}function WD(){return WD=zD(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:o,value:s}=yield w1(r);if(o)return;yield J8(s)}}catch{n.releaseLock()}}),WD.apply(this,arguments)}function $D(){return $D=zD(function*(t,e){var r,n=!1,i=!1;try{for(var s,o=bD(t);n=!(s=yield w1(o.next())).done;n=!1){const a=s.value;yield J8(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=o.return&&(yield w1(o.return()))}finally{if(i)throw r}}}),$D.apply(this,arguments)}const XD="Cannot convert supplied data type";function YD(){return YD=zt(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function Tde(t,e,n){if(e.text&&"string"==typeof t)return t;if(mle(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(XD)}(t,e);if(ef(t)&&(t=yield M8(t)),Qh(t)){const r=t;return yield function Cle(t){return CD.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(S8(t)&&(t=function Cde(t,e){if("string"==typeof t)return function*bde(t,e){const n=e?.chunkSize||_de;let i=0;const r=new TextEncoder;for(;i<t.length;){const o=Math.min(t.length-i,n),s=t.slice(i,i+o);i+=o,yield r.encode(s)}}(t,e);if(t instanceof ArrayBuffer)return function vde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=yde}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),o=new ArrayBuffer(r),s=new Uint8Array(t,i,r);new Uint8Array(o).set(s),i+=r,yield o}}()}(t,e);if(ef(t))return function wde(t,e){return GD.apply(this,arguments)}(t,e);if(S8(t))return Z8(t,e);if(Qh(t))return Z8(t.body,e);throw new Error("makeIterator")}(t,n)),fle(t)||ple(t))return function gde(t){return VD.apply(this,arguments)}(t);throw new Error(XD)}),YD.apply(this,arguments)}function Q8(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}const Pde=new P8({id:"loaders.gl"}),eV=()=>{const t=RD();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function tV(t){const e=eV();t=Array.isArray(t)?t:[t];for(const n of t){const i=vD(n);e.find(r=>i===r)||e.unshift(i)}}const Fde=/\.([^.]+)$/;function ZD(){return ZD=zt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!iV(t))return null;let r=nV(t,e,{...n,nothrow:!0},i);if(r)return r;if(ef(t)&&(r=nV(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(rV(t));return r}),ZD.apply(this,arguments)}function nV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!iV(t))return null;if(e&&!Array.isArray(e))return vD(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function Nde(){return eV()}()),function jde(t){for(const e of t)vD(e)}(r);const o=function Bde(t,e,n,i){const r=_1(t),o=AD(t),s=ED(r)||i?.url;let a=null,c="";var l;return null!=n&&n.mimeType&&(a=QD(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function Ude(t,e){const n=e&&Fde.exec(e),i=n&&n[1];return i?function Vde(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||QD(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function Hde(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(zde(e,n))return n}else if(ArrayBuffer.isView(e)){if(oV(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&oV(e,0,n))return n;return null}(e,t),c=c||(a?"matched initial data ".concat(sV(t)):""),a=a||QD(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&Pde.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(t,r,n,i);if(!(o||null!=n&&n.nothrow))throw new Error(rV(t));return o}function iV(t){return!(t instanceof Response&&204===t.status)}function rV(t){const e=_1(t),n=AD(t);let i="No valid loader found (";i+=e?"".concat(Q8(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?sV(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function QD(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function zde(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function oV(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function Gde(t,e,n,i){if(i instanceof ArrayBuffer)return function pde(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===eR(t,e,i.length);default:return!1}}(t,e,n,r))}function sV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?eR(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?eR(t,0,e):""}function eR(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function E1(t,e,n,i){return tR.apply(this,arguments)}function tR(){return tR=zt(function*(t,e,n,i){El(!i||"object"==typeof i),e&&!Array.isArray(e)&&!yD(e)&&(i=void 0,n=e,e=void 0),n=n||{};const r=_1(t=yield t),s=function Ode(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function Lde(t){return ZD.apply(this,arguments)}(t,s,n);return a?(i=function kde(t,e,n){if(n)return n;const i={fetch:z8(e,t),...t};if(i.url){const r=ED(i.url);i.baseUrl=r,i.queryString=function Ale(t){const e=t.match(T8);return e&&e[0]}(i.url),i.filename=Q8(r),i.baseUrl=function Dde(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(r)}return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:E1,loaders:s},n=Yle(n,a,s,r),i||null),yield function Wde(t,e,n,i){return nR.apply(this,arguments)}(a,t,n,i)):null}),tR.apply(this,arguments)}function nR(){return nR=zt(function*(t,e,n,i){if(function Qle(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zle;El(t,"no worker provided")}(t),Qh(e)){const r=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:o,redirected:s,status:a,statusText:c,type:l,url:d}}if(e=yield function Mde(t,e,n){return YD.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function ude(t,e){return!(!hd.isSupported()||!(Sl||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function hde(t,e,n,i,r){return BD.apply(this,arguments)}(t,e,n,i,E1);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw El(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),nR.apply(this,arguments)}function yy(t,e,n,i){return iR.apply(this,arguments)}function iR(){return iR=zt(function*(t,e,n,i){!Array.isArray(e)&&!yD(e)&&(n=e,e=void 0);const r=z8(n);let o=t;return"string"==typeof t&&(o=yield r(t)),ef(t)&&(o=yield r(t)),yield E1(o,e,n)}),iR.apply(this,arguments)}const Jde=Object.freeze([]),Zde=oy(({oldViewport:t,viewport:e})=>t.equals(e));let Cl=new Uint8ClampedArray(0);const Qde={data:{type:"data",value:Jde,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(t);return!c&&!r&&(s.add({resourceId:t,data:yy(t,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:l=>{var d;return null===(d=n.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):yy(t,i,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Si.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class tf extends _D{constructor(...e){super(...e),xe(this,"internalState",null),xe(this,"lifecycle","Awaiting state"),xe(this,"context",void 0),xe(this,"state",void 0),xe(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){$o(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=x8(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,s]=h8(i,n.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,s]}unproject(e){return $o(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return $o(this.internalState),function Yce(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function Xce(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return r===Si.DEFAULT&&(r=e.isGeospatial?Si.LNGLAT:Si.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:c=!0}=e,{geospatialOrigin:l=v8,shaderCoordinateOrigin:d=v8,offsetMode:h=!1}=c?n8(n,i,r):{},p=x8(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:h});h&&function Tre(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(p,p,n.projectPosition(l||d));return p}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Si.DEFAULT||e===Si.LNGLAT||e===Si.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){$o(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function Uae(t){if(!function Hae(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function Vae(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=zae(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const r of i)n.invalidateAll(r);else n.invalidateAll();if(n){const{props:r}=e,o=this.internalState.hasPickingBuffer,s=Number.isInteger(r.highlightedObjectIndex)||r.pickable||r.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(o!==s){this.internalState.hasPickingBuffer=s;const{pickingColors:a,instancePickingColors:c}=n.attributes,l=a||c;l&&(s&&l.constant&&(l.constant=!1,n.invalidate(l.id)),!l.value&&!s&&(l.constant=!0,l.value=[0,0,0]))}}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,o,s;n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(o=this.context)||void 0===o||null===(s=o.onError)||void 0===s||s.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!Zde({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(Cl.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&bi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Cl=ey.allocate(Cl,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(Cl.length/3),o=[];for(let s=i;s<r;s++)this.encodePickingColor(s,o),Cl[3*s+0]=o[0],Cl[3*s+1]=o[1],Cl[3*s+2]=o[2]}e.value=Cl.subarray(0,3*n)}_setModelAttributes(e,n){const o=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(o)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n))return void this._disablePickingIndex(e);const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,o=i||r,s=o&&n.attributes&&n.attributes[o.id];if(s&&s.value){const a=s.value,c=this.encodePickingColor(e);for(let l=0;l<n.length;l++){const d=o.getVertexOffset(l);a[d]===c[0]&&a[d+1]===c[1]&&a[d+2]===c[2]&&this._disablePickingIndex(l)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const o=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Cl.buffer&&(i.value=Cl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){$o(!this.internalState),$o(Number.isFinite(this.props.coordinateSystem)),ds("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new hle({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(bi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new Rae(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){ds("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(ds("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,o=i.viewport,s=this._updateUniformTransition();r.propsInTransition=s,i.viewport=r.viewport||o,this.props=s;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=o,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){ds("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];od(o.gl,{polygonOffset:c}),Dc(o.gl,i,()=>{const l={moduleParameters:e,uniforms:n,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let o=!1;if("dataChanged"===r){const s=e[r],a=n[r];s&&Array.isArray(a)&&(n.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0)}n[r]||(n[r]=e[r],o=!0),o&&ds("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function Oae(t,e){const n=XU({newProps:t,oldProps:e,propTypes:t[Mu],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function Nae(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function Fae(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&YU(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&YU(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:Lae(t,e),transitionsChanged:Pae(t,e)}}(e,n);if(i.updateTriggersChanged)for(const o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(const o in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,n[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(i)}validateProps(){!function kae(t){const e=t[Mu];for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Cae(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=i;if(n||r.autoHighlight!==s||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(n||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);if(n=n||r,n)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}xe(tf,"defaultProps",Qde),xe(tf,"layerName","Layer");class rR extends tf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:x,modelMatrix:D,extensions:F,fetch:G,operation:q,_subLayerProps:ee}=this.props,ve={id:"",updateTriggers:{},opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:x,modelMatrix:D,extensions:F,fetch:G,operation:q},Oe=ee&&e.id&&ee[e.id],Xe=Oe&&Oe.updateTriggers,rt=e.id||"sublayer";if(Oe){const nt=this.props[Mu],ht=e.type?e.type._propTypes:{};for(const gt in Oe){const yt=ht[gt]||nt[gt];yt&&"accessor"===yt.type&&(Oe[gt]=this.getSubLayerAccessor(Oe[gt]))}}Object.assign(ve,e,Oe),ve.id="".concat(this.props.id,"-").concat(rt),ve.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...Xe};for(const nt of F){const ht=nt.getSubLayerProps.call(this,nt);ht&&Object.assign(ve,ht,{updateTriggers:Object.assign(ve.updateTriggers,ht.updateTriggers)})}return ve}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=kI(this.renderLayers(),Boolean),this.internalState.subLayers=i),ds("compositeLayer.renderLayers",this,r,i);for(const o of i)o.parent=this}}xe(rR,"layerName","CompositeLayer");const tue=/([0-9]+\.?[0-9]*)(%|px)/;function ku(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=tue.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Ou(t,e){return t.relative?Math.round(t.position*e):t.position}class oR{constructor(e){xe(this,"id",void 0),xe(this,"viewportInstance",void 0),xe(this,"_x",void 0),xe(this,"_y",void 0),xe(this,"_width",void 0),xe(this,"_height",void 0),xe(this,"_padding",void 0),xe(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};$o(!c||c instanceof Du),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=ku(i),this._y=ku(r),this._width=ku(o),this._height=ku(s),this._padding=a&&{left:ku(a.left||0),right:ku(a.right||0),top:ku(a.top||0),bottom:ku(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&xl(this.props,e.props,2))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return r.height&&r.width?new this.ViewportType({...i,...this.props,...r}):null}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:Ou(this._x,e),y:Ou(this._y,n),width:Ou(this._width,e),height:Ou(this._height,n)};return this._padding&&(i.padding={left:Ou(this._padding.left,e),top:Ou(this._padding.top,n),right:Ou(this._padding.right,e),bottom:Ou(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const nue=(new Hn).lookAt({eye:[0,0,1]});function iue({width:t,height:e,near:n,far:i,padding:r}){let o=-t/2,s=t/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:p=0}=r,m=wr((l+t-d)/2,0,t)-t/2,x=wr((h+e-p)/2,0,e)-e/2;o-=m,s-=m,a+=x,c+=x}return(new Hn).ortho({left:o,right:s,bottom:a,top:c,near:n,far:i})}class rue extends Du{constructor(e){const{width:n,height:i,near:r=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,p=Math.min(d,h),m=Math.pow(2,p);let x;if(d!==h){const D=Math.pow(2,d),F=Math.pow(2,h);x={unitsPerMeter:[D/m,F/m,1],metersPerUnit:[m/D,m/F,1]}}super({...e,longitude:void 0,position:a,viewMatrix:nue.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:iue({width:n||1,height:i||1,padding:c,near:r,far:o}),zoom:p,distanceScales:x})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=py(n,this.pixelUnprojectionMatrix),o=c1([],this.projectFlat(e),r8([],i)),s=c1([],this.center,o);return{target:this.unprojectFlat(s)}}}const cV=()=>{},oue=t=>t;class aue{constructor(e){xe(this,"getControllerState",void 0),xe(this,"props",void 0),xe(this,"propsInTransition",void 0),xe(this,"transition",void 0),xe(this,"onViewStateChange",void 0),xe(this,"onStateChange",void 0),xe(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:o,endProps:s,duration:a,easing:c}}=n,l=c(i/a),d=r.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new hy(e.timeline),this.onViewStateChange=e.onViewStateChange||cV,this.onStateChange=e.onStateChange||cV}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;r={...i,...2===o?s:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(0===s)return;const a=o.initializeProps(e,r);this.propsInTransition={};const c={duration:s,easing:n.transitionEasing||oue,interpolator:o,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class cue{constructor(e){xe(this,"_propsToCompare",void 0),xe(this,"_propsToExtract",void 0),xe(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!Cu(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const o of this._propsToExtract)(o in e||o in n)&&(i[o]=e[o],r[o]=n[o]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];$o(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const lue=["longitude","latitude","zoom","bearing","pitch"],due=["longitude","latitude","zoom"];class A1 extends cue{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:lue,required:due},super(i.transitionProps),xe(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:o}=this.opts;if(r&&o){const s=r(e),a=r(n),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const o of this._propsToExtract)r[o]=zw(e[o]||0,n[o]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...n,...r});Object.assign(r,o.panByPosition(n.aroundPosition,zw(e.around,n.around,i)))}return r}}const Pu={transitionDuration:0},S1=t=>1-(1-t)*(1-t),Km_WHEEL=["wheel"],Km_PAN=["panstart","panmove","panend"],Km_PINCH=["pinchstart","pinchmove","pinchend"],Km_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Km_DOUBLE_TAP=["doubletap"],Km_KEYBOARD=["keydown"],nf={};class aR{constructor(e){xe(this,"props",void 0),xe(this,"state",{}),xe(this,"transitionManager",void 0),xe(this,"eventManager",void 0),xe(this,"onViewStateChange",void 0),xe(this,"onStateChange",void 0),xe(this,"makeViewport",void 0),xe(this,"_controllerState",void 0),xe(this,"_events",{}),xe(this,"_interactionState",{isDragging:!1}),xe(this,"_customEvents",[]),xe(this,"_eventStartBlocked",null),xe(this,"_panMove",!1),xe(this,"invertPan",!1),xe(this,"dragMode","rotate"),xe(this,"inertia",0),xe(this,"scrollZoom",!0),xe(this,"dragPan",!0),xe(this,"dragRotate",!0),xe(this,"doubleClickZoom",!0),xe(this,"touchZoom",!0),xe(this,"touchRotate",!1),xe(this,"keyboard",!0),this.transitionManager=new aue({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Km_WHEEL,d&&i),this.toggleEvents(Km_PAN,d),this.toggleEvents(Km_PINCH,d&&(a||c)),this.toggleEvents(Km_TRIPLE_PAN,d&&c),this.toggleEvents(Km_DOUBLE_TAP,d&&s),this.toggleEvents(Km_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,Pu,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Pu,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),o=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:S1},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Pu,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),o=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:S1},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&0!==s&&(s=1/s);const a=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Pu,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Pu,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:r});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:S1},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return nf._startPinchRotation=e.rotation,nf._lastPinchEvent=e,this.updateViewport(i,Pu,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:nf._startPinchRotation-i})}return this.updateViewport(n,Pu,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),nf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=nf;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+a*n/2);o=o.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:S1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return nf._startPinchRotation=null,nf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new A1({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:Pu}}class lV{constructor(e,n){xe(this,"_viewportProps",void 0),xe(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class dV extends lV{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:p,startRotatePos:m,startRotationX:x,startRotationOrbit:D,startZoomPosition:F,startZoom:G}=e;super({width:n,height:i,rotationX:r,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:p,startRotatePos:m,startRotationX:x,startRotationOrbit:D,startZoomPosition:F,startZoom:G}),xe(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let l;if(e){let d=(e[0]-r[0])/a;(o<-90||o>90)&&(d*=-1),l={rotationX:o+(e[1]-r[1])/c*180,rotationOrbit:s+180*d}}else l={rotationX:o+i,rotationOrbit:s+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),wr(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[wr(r[0],i,n),wr(r[1],i,n)]:wr(r,i,n),e.rotationX=wr(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=function jre(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class hue extends aR{constructor(...e){super(...e),xe(this,"ControllerState",dV),xe(this,"transition",{transitionDuration:300,transitionInterpolator:new A1({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class fue extends dV{constructor(e){super(e),xe(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[s,a]=n;switch(this.zoomAxis){case"X":s=wr(s+o,r,i);break;case"Y":a=wr(a+o,r,i);break;default:let c=Math.min(s+o,a+o);c<r&&(o+=r-c),c=Math.max(s+o,a+o),c>i&&(o+=i-c),s+=o,a+=o}return[s,a]}return wr(n+o,r,i)}}class pue extends aR{constructor(...e){super(...e),xe(this,"ControllerState",fue),xe(this,"transition",{transitionDuration:300,transitionInterpolator:new A1(["target","zoom"])}),xe(this,"dragMode","pan")}_onPanRotate(){return!1}}class uV extends oR{get ViewportType(){return rue}get ControllerType(){return pue}}xe(uV,"displayName","OrthographicView");const cR=Math.PI/180;function mue({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:o}){const s="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],c=(new Hn).lookAt({eye:a,up:s});c.rotateX(i*cR),"Z"===n?c.rotateZ(r*cR):c.rotateY(r*cR);const l=Math.pow(2,o)/t;return c.scale(l),c}class gue extends Du{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:dD(r);super({...e,longitude:void 0,viewMatrix:mue({height:n||1,focalDistance:d,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:s,zoom:l}),xe(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,o=this.projectedCenter[2]]=e,s=n?r:this.height-r,[a,c,l]=py([i,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class hV extends oR{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return gue}get ControllerType(){return hue}}xe(hV,"displayName","OrbitView");const _ue=[255,255,255],bue=1;let yue=0;class fV{constructor(e={}){xe(this,"id",void 0),xe(this,"color",void 0),xe(this,"intensity",void 0),xe(this,"type","ambient");const{color:n=_ue}=e,{intensity:i=bue}=e;this.id=e.id||"ambient-".concat(yue++),this.color=n,this.intensity=i}}const vue=[255,255,255],xue=1,wue=[0,0,-1];let Eue=0;class pV{constructor(e={}){xe(this,"id",void 0),xe(this,"color",void 0),xe(this,"intensity",void 0),xe(this,"type","directional"),xe(this,"direction",void 0),xe(this,"shadow",void 0);const{color:n=vue}=e,{intensity:i=xue}=e,{direction:r=wue}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(Eue++),this.color=n,this.intensity=i,this.type="directional",this.direction=new nn(r).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class Aue{constructor(e,n={id:"pass"}){xe(this,"id",void 0),xe(this,"gl",void 0),xe(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class lR extends Aue{constructor(...e){super(...e),xe(this,"_lastRenderIndex",-1)}render(e){return od(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function Cue(t,e){od(t,{viewport:[0,0,e?e.width:t.drawingBufferWidth,e?e.height:t.drawingBufferHeight]}),t.clear(16640)}(l,n),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const p=o&&o[h.id];s?.(h);const m=this._getDrawLayerParams(h,e),x=h.subViewports||[h];for(const D of x){const F=this._drawLayersInViewport(l,{target:n,moduleParameters:i,viewport:D,view:p,pass:e.pass,layers:e.layers},m);d.push(F)}}return d}_getDrawLayerParams(e,{layers:n,pass:i,isPicking:r=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:c},l=!1){const d=[],h=mV(this._lastRenderIndex+1),p={layer:n[0],viewport:e,isPicking:r,renderPass:i,cullRect:s},m={};for(let x=0;x<n.length;x++){const D=n[x],F=this._shouldDrawLayer(D,p,o,m),G={shouldDrawLayer:F};F&&!l&&(G.layerRenderIndex=h(D,F),G.moduleParameters=this._getModuleParameters(D,a,i,c),G.layerParameters=this.getLayerParameters(D,x,e)),d[x]=G}return d}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:o,viewport:s,view:a},c){const l=function Sue(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,o=e&&e.devicePixelRatio||Dm(t);return[i.x*o,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*o,i.width*o,i.height*o]}(e,{moduleParameters:i,target:o,viewport:s});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Dc(e,{scissorTest:!0,scissor:l},()=>AI(e,h))}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};od(e,{viewport:l});for(let h=0;h<n.length;h++){const p=n[h],{shouldDrawLayer:m,layerRenderIndex:x,moduleParameters:D,layerParameters:F}=c[h];if(m&&p.props.pickable&&d.pickableCount++,p.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,x),D.viewport=s;try{p._drawLayer({moduleParameters:D,uniforms:{layerIndex:x},parameters:F})}catch(G){p.raiseError(G,"drawing ".concat(p," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(n))return!1;n.layer=s,s=s.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var o;const s=Object.assign(Object.create((null===(o=e.internalState)||void 0===o?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Dm(this.gl)});if(n)for(const c of n){var a;Object.assign(s,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,n),r)}}function mV(t=0,e={}){const n={},i=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in n){const d=n[c]=n[c]||mV(e[c],e);l=d(r,o),n[a]=d}else Number.isFinite(s)?(l=s+(e[c]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return i}class Tue extends lR{constructor(e,n){super(e,n),xe(this,"shadowMap",void 0),xe(this,"depthBuffer",void 0),xe(this,"fbo",void 0),this.shadowMap=new Rs(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Om(e,{format:33189,width:1,height:1}),this.fbo=new lo(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Dc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=Dm(this.gl),o=i.width*r,s=i.height*r;(o!==n.width||s!==n.height)&&n.resize({width:o,height:s}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const gV="#define SMOOTH_EDGE_RADIUS 0.5",Rue={name:"geometry",vs:"\n".concat(gV,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(gV,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},kue=Object.keys(Si).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Si[t],";")).join(""),Oue=Object.keys(bl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(bl[t],";")).join(""),Pue=Object.keys(jw).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(jw[t],";")).join(""),Nue="".concat(kue,"\n").concat(Oue,"\n").concat(Pue,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),Fue={},dR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Rue],vs:Nue,getUniforms:function Lue(t=Fue){return"viewport"in t?function xce({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=Si.DEFAULT,coordinateOrigin:r=t8,autoWrapLongitude:o=!1}){i===Si.DEFAULT&&(i=t.isGeospatial?Si.LNGLAT:Si.CARTESIAN);const s=yce({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||e8,s}(t):{}}},Uue=oy(function Wue({viewport:t,center:e}){return new Hn(t.viewProjectionMatrix).invert().transform(e)}),Vue=oy(function $ue({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,o=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>function Gue(t,e){const[n,i,r]=t,o=py([n,i,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(s,i));for(const s of e){const a=s.clone().translate(new nn(t.center).negate()),c=o.map(d=>a.transform(d)),l=(new Hn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});n.push(l.multiplyRight(s))}return n}),Hue=[0,0,0,1],zue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],uR={name:"shadow",dependencies:[dR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function Xue(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Hue,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=Uue({viewport:t.viewport,center:e.project_uCenter}),o=[],s=Vue({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const c=s[a],l=c.clone().translate(new nn(t.viewport.center).negate());e.project_uCoordinateSystem===Si.LNGLAT&&e.project_uProjectionMode===bl.WEB_MERCATOR?(s[a]=l,o[a]=r):(s[a]=c.clone().multiplyRight(zue),o[a]=l.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},Yue={color:[255,255,255],intensity:1},_V=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Kue=[0,0,0,200/255];class hR{constructor(e={}){xe(this,"id","lighting-effect"),xe(this,"props",void 0),xe(this,"shadowColor",Kue),xe(this,"shadow",void 0),xe(this,"ambientLight",void 0),xe(this,"directionalLights",void 0),xe(this,"pointLights",void 0),xe(this,"shadowPasses",[]),xe(this,"shadowMaps",[]),xe(this,"dummyShadowMap",null),xe(this,"programManager",void 0),xe(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=dy.getDefaultProgramManager(e),uR&&this.programManager.addDefaultModule(uR)),this.dummyShadowMap||(this.dummyShadowMap=new Rs(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(uR),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new Hn).lookAt({eye:new nn(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new Tue(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new fV(Yue),this.directionalLights.push(new pV(_V[0]),new pV(_V[1])))}}let que=1,Jue=1;class bV{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:o=1}=e,s=que++,a={time:0,delay:n,duration:i,rate:r,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:o,channel:s}=r;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=Jue++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class Zue{constructor(e,n,i){xe(this,"id",void 0),xe(this,"context",void 0),xe(this,"isLoaded",void 0),xe(this,"persistent",void 0),xe(this,"_loadCount",0),xe(this,"_subscribers",new Set),xe(this,"_data",void 0),xe(this,"_loader",void 0),xe(this,"_error",void 0),xe(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=yy(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class Que{constructor({gl:e,protocol:n}){xe(this,"protocol",void 0),xe(this,"_context",void 0),xe(this,"_resources",void 0),xe(this,"_consumers",void 0),xe(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let o=this._resources[e];o?o.setData(n,i):(o=new Zue(e,n,this._context),this._resources[e]=o),o.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],o=this._resources[r.resourceId];o&&o.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(o[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const o=this._consumers,s=o[e]=o[e]||{},a=s[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(s[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const ehe=[dR],the=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function nhe(t){const e=dy.getDefaultProgramManager(t);for(const n of ehe)e.addDefaultModule(n);for(const n of the)e.addShaderHook(n);return e}class ohe{constructor(e,{deck:n,stats:i,viewport:r,timeline:o}={}){xe(this,"layers",void 0),xe(this,"context",void 0),xe(this,"resourceManager",void 0),xe(this,"_lastRenderedLayers",[]),xe(this,"_needsRedraw",!1),xe(this,"_needsUpdate",!1),xe(this,"_nextLayers",null),xe(this,"_debug",!1),xe(this,"activateViewport",s=>{ds("layerManager.activateViewport",this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new Que({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&nhe(e),stats:i||new _I({id:"deck.gl"}),viewport:r||new Du({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new bV,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){ds("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=kI(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const s of e)i[s.id]?bi.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let o=!1;for(const s of r)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const o=n[r.id];null===o&&bi.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let s=null;try{this._debug&&o!==r&&r.validateProps(),o?(this._transferLayerState(o,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}s&&this._updateSublayersRecursively(s,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class she{constructor(e){xe(this,"width",void 0),xe(this,"height",void 0),xe(this,"views",void 0),xe(this,"viewState",void 0),xe(this,"controllers",void 0),xe(this,"timeline",void 0),xe(this,"_viewports",void 0),xe(this,"_viewportMap",void 0),xe(this,"_isUpdating",void 0),xe(this,"_needsRedraw",void 0),xe(this,"_needsUpdate",void 0),xe(this,"_eventManager",void 0),xe(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){const s=i[o];if(s.containsPixel(r)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=kI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!xl(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):bi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return null===(s=this.getView(e.id))||void 0===s?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const o=e.controller;if(o&&i){const s={...n,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!r||r.constructor!==o.type)&&(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const o=e[r],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let c=n[o.id];const l=!!o.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),a&&this._viewports.unshift(a)}for(const r in n){const o=n[r];o&&!this.controllers[r]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}class che extends lV{constructor(e){const{width:n,height:i,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:p=0,maxPitch:m=60,minPitch:x=0,startPanLngLat:D,startZoomLngLat:F,startRotatePos:G,startBearing:q,startPitch:ee,startZoom:ve,normalize:Oe=!0}=e;$o(Number.isFinite(o)),$o(Number.isFinite(r)),$o(Number.isFinite(s)),super({width:n,height:i,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:p,maxPitch:m,minPitch:x,normalize:Oe,position:d},{startPanLngLat:D,startZoomLngLat:F,startRotatePos:G,startBearing:q,startPitch:ee,startZoom:ve}),xe(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+n,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=wr(c,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:o}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-n.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=wr(r,i,n);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=wr(a,s,o);const{normalize:c=!0}=e;return c&&Object.assign(e,function Vce(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=t;(r<-180||r>180)&&(r=c8(r+180,360)-180),(a<-180||a>180)&&(a=c8(a+180,360)-180);const c=sD(n/512);if(s<=c)s=c,o=0;else{const l=n/2/Math.pow(2,s),d=Gm([0,l])[1];if(o<d)o=d;else{const h=Gm([0,512-l])[1];o>h&&(o=h)}}return{width:e,height:n,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const o=e[0]-n[0],s=e[1]-n[1],a=e[1],c=n[1],{width:l,height:d}=this.getViewportProps(),h=o/l;let p=0;s>0?Math.abs(d-c)>5&&(p=s/(c-d)*1.2):s<0&&c>5&&(p=1-a/c),p=wr(p,-1,1);const{minPitch:m,maxPitch:x}=this.getViewportProps();let F=i;return p>0?F=i+p*(x-i):p<0&&(F=i-p*(m-i)),{pitch:F,bearing:r+180*h}}}class lhe extends aR{constructor(...e){super(...e),xe(this,"ControllerState",che),xe(this,"transition",{transitionDuration:300,transitionInterpolator:new A1({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),xe(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class vV extends oR{get ViewportType(){return Wm}get ControllerType(){return lhe}}xe(vV,"displayName","MapView");const dhe=new hR;class hhe{constructor(){xe(this,"effects",void 0),xe(this,"_resolvedEffects",[]),xe(this,"_defaultEffects",[]),xe(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(i=>i.id===e.id)){const i=n.findIndex(r=>function uhe(t,e){var n,i;return(null!==(n=t.order)&&void 0!==n?n:1/0)-(null!==(i=e.order)&&void 0!==i?i:1/0)}(r,e)>0);i<0?n.push(e):n.splice(i,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(xl(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const r of this.effects)n[r.id]=r;const i=[];for(const r of e){const o=n[r.id];o&&o!==r?o.setProps?(o.setProps(r.props),i.push(o)):(o.cleanup(),i.push(r)):i.push(r),delete n[r.id]}for(const r in n)n[r].cleanup();this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(r=>r instanceof hR)||this._resolvedEffects.push(dhe),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class fhe extends lR{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const xV={blendFunc:[1,0,32771,0],blendEquation:32774};class wV extends lR{constructor(...e){super(...e),xe(this,"pickZ",void 0),xe(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:p,pass:m="picking",pickZ:x,moduleParameters:D}){const F=this.gl;this.pickZ=x;const G=this._resetColorEncoder(x),q=Dc(F,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...xV,blend:!x},()=>super.render({target:s,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,cullRect:h,effects:p?.filter(ve=>ve.useInPicking),pass:m,isPicking:!0,moduleParameters:D}));return this._colorEncoderState=null,{decodePickingColor:G&&mhe.bind(null,G),stats:q}}shouldDrawLayer(e){const{pickable:n,operation:i}=e.props;return n&&i.includes("draw")||i.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters},{pickable:o,operation:s}=e.props;return this._colorEncoderState?o&&s.includes("draw")&&(Object.assign(r,xV),r.blend=!0,r.blendColor=function phe(t,e,n){const{byLayer:i,byAlpha:r}=t;let o,s=i.get(e);return s?(s.viewports.push(n),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},i.set(e,s),r[o]=s):(bi.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colorEncoderState,e,i)):r.blend=!1,s.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function mhe(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class _he{constructor(e){xe(this,"gl",void 0),xe(this,"layerFilter",void 0),xe(this,"drawPickingColors",void 0),xe(this,"drawLayersPass",void 0),xe(this,"pickLayersPass",void 0),xe(this,"renderCount",void 0),xe(this,"_needsRedraw",void 0),xe(this,"renderBuffers",void 0),xe(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new fhe(e),this.pickLayersPass=new wV(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||lo.getDefaultFramebuffer(this.gl)};i.effects&&this._preRender(i.effects,i);const r=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,o=n.render({...i,target:r});i.effects&&this._postRender(i.effects,i),this.renderCount++,ds("deckRenderer.renderLayers",this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const i of e)n.preRenderStats[i.id]=i.preRender(this.gl,n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new lo(this.gl),new lo(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={...n,inputBuffer:i[0],swapBuffer:i[1],target:null};for(const o of e)if(o.postRender){if(o.id===this.lastPostProcessEffect){r.target=n.target,o.postRender(this.gl,r);break}const s=o.postRender(this.gl,r);r.inputBuffer=s,r.swapBuffer=s===i[0]?i[1]:i[0]}}}const bhe={pickedColor:null,pickedObjectIndex:-1};function yhe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let d=r*r,h=-1,p=0;for(let m=0;m<l;m++){const x=m+a-i,D=x*x;if(D>d)p+=4*c;else for(let F=0;F<c;F++){if(t[p+3]-1>=0){const q=F+s-n,ee=q*q+D;ee<=d&&(d=ee,h=p)}p+=4}}if(h>=0){const m=t.slice(h,h+4),x=e(m);if(x){const D=Math.floor(h/4/c),F=h/4-D*c;return{...x,pickedColor:m,pickedX:s+F,pickedY:a+D}}bi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return bhe}function EV({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:o}){let a,s=e[0];if(e.length>1&&(s=function whe(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),s){const c=[i-s.x,r-s.y];void 0!==o&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function xhe(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===i){const p=n.layerId,m=s?s.props.id:null;if(m!==p||a!==n.index){if(m!==p){const x=r.find(D=>D.props.id===p);x&&c.unshift(x)}n.layerId=m,n.index=a,n.info=null}}const l=EV(t),d=new Map;return d.set(null,l),c.forEach(h=>{let p={...l};h===s&&(p.color=o,p.index=a,p.picked=!0),p=AV({layer:h,info:p,mode:i});const m=p.layer;h===s&&"hover"===i&&(n.info=p),d.set(m.id,p),"hover"===i&&m.updateAutoHighlight(p)}),d}function AV({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class Ehe{constructor(e){xe(this,"gl",void 0),xe(this,"pickingFBO",void 0),xe(this,"depthFBO",void 0),xe(this,"pickLayersPass",void 0),xe(this,"layerFilter",void 0),xe(this,"lastPickedInfo",void 0),xe(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new wV(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?i.find(p=>p.id===s):null,l=a&&r.find(p=>p.id===a)||r[0],d=l&&l.unproject([e-l.x,n-l.y]);return{...o,x:e,y:n,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new lo(i),lo.isSupported(i,{colorBufferFloat:!0}))){const r=new lo(i);r.attach({36064:new Rs(i,{format:fi(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const p=this._getPickable(e),m=Dm(this.gl);if(!p)return{result:[],emptyInfo:EV({viewports:i,x:r,y:o,pixelRatio:m})};this._resizeBuffer();const x=pI(this.gl,[r,o],!0),D=[x.x+Math.floor(x.width/2),x.y+Math.floor(x.height/2)],F=Math.round(s*m),{width:G,height:q}=this.pickingFBO,ee=this._getPickingRect({deviceX:D[0],deviceY:D[1],deviceRadius:F,deviceWidth:G,deviceHeight:q}),ve={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let Oe;const Xe=[],rt=new Set;for(let nt=0;nt<a;nt++){let ht,gt;if(ht=ee?yhe({...this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:ee,cullRect:ve,effects:h,pass:"picking:".concat(c)}),deviceX:D[0],deviceY:D[1],deviceRadius:F,deviceRect:ee}):{pickedColor:null,pickedObjectIndex:-1},ht.pickedLayer&&l&&this.depthFBO){const{pickedColors:yt}=this._drawAndSample({layers:[ht.pickedLayer],views:n,viewports:i,onViewportActive:d,deviceRect:{x:ht.pickedX,y:ht.pickedY,width:1,height:1},cullRect:ve,effects:h,pass:"picking:".concat(c,":z")},!0);yt[3]&&(gt=yt[0])}ht.pickedLayer&&nt+1<a&&(rt.add(ht.pickedLayer),ht.pickedLayer.disablePickingIndex(ht.pickedObjectIndex)),Oe=xhe({pickInfo:ht,lastPickedInfo:this.lastPickedInfo,mode:c,layers:p,viewports:i,x:r,y:o,z:gt,pixelRatio:m});for(const yt of Oe.values())yt.layer&&Xe.push(yt);if(!ht.pickedColor)break}for(const nt of rt)nt.restorePickingColors();return{result:Xe,emptyInfo:Oe.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const p=this._getPickable(e);if(!p)return[];this._resizeBuffer();const m=Dm(this.gl),x=pI(this.gl,[r,o],!0),D=x.x,F=x.y+x.height,G=pI(this.gl,[r+s,o+a],!0),ee=G.y,Xe=function vhe({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const o=t.slice(i,i+4),s=o.join(",");if(!n.has(s)){const a=e(o);a?n.set(s,{...a,color:o}):bi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:{x:D,y:ee,width:G.x+G.width-D,height:F-ee},cullRect:{x:r,y:o,width:s,height:a},effects:h,pass:"picking:".concat(c)})),rt=new Map,nt=Number.isFinite(l);for(let ht=0;ht<Xe.length&&!(nt&&l&&rt.size>=l);ht++){const gt=Xe[ht];let yt={color:gt.pickedColor,layer:null,index:gt.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:m};yt=AV({layer:gt.pickedLayer,info:yt,mode:c}),rt.has(yt.object)||rt.set(yt.object,yt)}return Array.from(rt.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,h={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l,preRenderStats:{}};for(const q of a)q.useInPicking&&(h.preRenderStats[q.id]=q.preRender(this.gl,h));const{decodePickingColor:p}=this.pickLayersPass.render(h),{x:m,y:x,width:D,height:F}=o,G=new(l?Float32Array:Uint8Array)(D*F*4);return Hw(d,{sourceX:m,sourceY:x,sourceWidth:D,sourceHeight:F,target:G}),{pickedColors:G,decodePickingColor:p}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:o}){const s=Math.max(0,e-i),a=Math.max(0,n-i),c=Math.min(r,e+i+1)-s,l=Math.min(o,n+i+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}const Ahe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class She{constructor(e){xe(this,"el",null),xe(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Ahe),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)"),e&&"object"==typeof e&&"style"in e&&Object.assign(r.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:The}=globalThis,fR=typeof Image<"u",pR=typeof ImageBitmap<"u",mR=!!x1||!!The;function SV(t){const e=function TV(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const Dhe=/^data:image\/svg\+xml/,Rhe=/\.svg((\?|#).*)?$/;function gR(t){return t&&(Dhe.test(t)||Rhe.test(t))}function MV(t,e){if(gR(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function IV(t,e,n){return _R.apply(this,arguments)}function _R(){return _R=zt(function*(t,e,n){const i=function khe(t,e){if(gR(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return MV(t,e)}(t,n),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function Ohe(t,e){return bR.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),_R.apply(this,arguments)}function bR(){return bR=zt(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=o=>r(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){r(o)}})}),bR.apply(this,arguments)}const Phe={};let DV=!0;function yR(){return yR=zt(function*(t,e,n){let i;i=gR(n)?yield IV(t,e,n):MV(t,n);const r=e&&e.imagebitmap;return yield function Fhe(t){return vR.apply(this,arguments)}(i,r)}),yR.apply(this,arguments)}function vR(){return vR=zt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function Lhe(t){for(const e in t||Phe)return!1;return!0}(e)||!DV)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),DV=!1}return yield createImageBitmap(t)}),vR.apply(this,arguments)}const Tl=!1,vy=!0;function xR(t){const e=xy(t);return function Ghe(t){const e=xy(t);return e.byteLength>=24&&2303741511===e.getUint32(0,Tl)?{mimeType:"image/png",width:e.getUint32(16,Tl),height:e.getUint32(20,Tl)}:null}(e)||function Xhe(t){const e=xy(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,Tl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Yhe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,Tl);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Tl),width:e.getUint16(o+7,Tl)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,Tl)}return null}(e)||function Whe(t){const e=xy(t);return e.byteLength>=10&&1195984440===e.getUint32(0,Tl)?{mimeType:"image/gif",width:e.getUint16(6,vy),height:e.getUint16(8,vy)}:null}(e)||function $he(t){const e=xy(t);return e.byteLength>=14&&16973===e.getUint16(0,Tl)&&e.getUint32(2,vy)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,vy),height:e.getUint32(22,vy)}:null}(e)||function zhe(t){const n=function Bhe(t){return function Hhe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function Vhe(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function jhe(t){switch(function Uhe(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function xy(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function wR(){return wR=zt(function*(t,e){const{mimeType:n}=xR(t)||{},i=globalThis._parseImageNode;return ud(i),yield i(t,n)}),wR.apply(this,arguments)}function ER(){return ER=zt(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:o}=n||{},s=function Jhe(t){switch(t){case"auto":case"data":return function Ihe(){if(pR)return"imagebitmap";if(fR)return"image";if(mR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Mhe(t){switch(t){case"auto":return pR||fR||mR;case"imagebitmap":return pR;case"image":return fR;case"data":return mR;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(s){case"imagebitmap":a=yield function Nhe(t,e,n){return yR.apply(this,arguments)}(t,e,o);break;case"image":a=yield IV(t,e,o);break;case"data":a=yield function Khe(t,e){return wR.apply(this,arguments)}(t,e);break;default:ud(!1)}return"data"===r&&(a=function CV(t){switch(SV(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),ER.apply(this,arguments)}const RV={id:"image",module:"images",name:"Images",version:"3.4.11",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function qhe(t,e,n){return ER.apply(this,arguments)},tests:[t=>!!xR(new DataView(t))],options:{image:{type:"auto",decode:!0}}},Qhe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function Zhe(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},tfe=function efe(){const t="8.9.24",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(bi.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:bi,_registerLoggers:Qre},tV([Qhe,[RV,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();class C1 extends sd{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=fi(e),r=B4(e,"TIMER_QUERY");let o=i||r;for(const s of n)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&r;break;default:Kt(!1)}return o}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return C1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const kV=_l()&&typeof document<"u";let ufe=0;class hfe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(F=>v4(F)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:s=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:m=!0,stats:x=Xh.get("animation-loop-".concat(ufe++))}=e;let{useDevicePixels:D=!0}=e;"useDevicePixelRatio"in e&&(ln.deprecated("useDevicePixelRatio","useDevicePixels")(),D=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=x,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:m,useDevicePixels:D}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Kt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=C1.isSupported(this.gl,["timers"])?new C1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return zt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return ln.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=kV?new Promise((e,n)=>{kV&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function dfe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function lfe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?gI(this.props.gl,e):this.onCreateContext(e),!Uw(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Eie(t){od(t,fI)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function Mie(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function Aie(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function Oie(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(ln.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let s=e;const a=Math.floor(i*s),c=Math.floor(r*s);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&(ln.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*s),t.canvas.height=Math.floor(r*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new lo(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var T1=g(7271);const ffe={mousedown:1,mousemove:2,mouseup:4};(function mfe(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function pfe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,o=>o.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(T1.PointerEventInput),function gfe(t){t.prototype.handler=function(n){let i=ffe[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(T1.MouseInput);const _fe=T1.Manager,Ml=T1;class M1{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const bfe=Ml?[[Ml.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ml.Rotate,{enable:!1}],[Ml.Pinch,{enable:!1}],[Ml.Swipe,{enable:!1}],[Ml.Pan,{threshold:0,enable:!1}],[Ml.Press,{enable:!1}],[Ml.Tap,{event:"doubletap",taps:2,enable:!1}],[Ml.Tap,{event:"anytap",enable:!1}],[Ml.Tap,{enable:!1}]]:null,NV={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},yfe={doubletap:["tap"]},vfe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},SR={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},xfe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},FV={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},wfe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",qm=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let CR=!1;try{qm.addEventListener("test",null,{get passive(){return CR=!0,!0}}),qm.removeEventListener("test",null)}catch{CR=!1}const Efe=-1!==wfe.indexOf("firefox"),{WHEEL_EVENTS:Afe}=SR,BV=4.000244140625;class Tfe extends M1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let o=r.deltaY;qm.WheelEvent&&(Efe&&r.deltaMode===qm.WheelEvent.DOM_DELTA_PIXEL&&(o/=qm.devicePixelRatio),r.deltaMode===qm.WheelEvent.DOM_DELTA_LINE&&(o*=40)),0!==o&&o%BV==0&&(o=Math.floor(o/BV)),r.shiftKey&&o&&(o*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-o,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(Afe),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!CR&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:Mfe}=SR,jV="pointermove",UV="pointerover",VV="pointerout",HV="pointerenter",zV="pointerleave";class Ife extends M1{constructor(e,n,i){super(e,n,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Mfe),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===jV&&(this.enableMoveEvent=n),e===UV&&(this.enableOverEvent=n),e===VV&&(this.enableOutEvent=n),e===HV&&(this.enableEnterEvent=n),e===zV&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(UV,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(VV,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(HV,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(zV,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(jV,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:Dfe}=SR,GV="keydown";class Rfe extends M1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const o=r.target||r.srcElement;"INPUT"===o.tagName&&"text"===o.type||"TEXTAREA"===o.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:GV,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Dfe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===GV&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const $V="contextmenu";class kfe extends M1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:$V,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===$V&&(this.options.enable=n)}}const Ofe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function zfe(t){const e=Ofe[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===r,s=2===r,a=3===r):2===e?(o=!!(1&n),s=!!(4&n),a=!!(2&n)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function Gfe(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const IR={srcElement:"root",priority:0};class Wfe{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let c=IR;"string"==typeof i||i&&i.addEventListener?c={...IR,srcElement:i}:i&&(c={...IR,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type===e&&s.handler===n){i.splice(o,1);const a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...zfe(e),...Gfe(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const $fe={events:null,recognizers:null,recognizerOptions:{},Manager:_fe,touchAction:"none",tabIndex:0};class Xfe{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:o}=r,s=vfe[o.type];s&&this.manager.emit(s,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...$fe,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||bfe}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(NV).forEach(r=>{const o=this.manager.get(r);o&&NV[r].forEach(s=>{o.recognizeWith(s)})});for(const r in n.recognizerOptions){const o=this.manager.get(r);if(o){const s=n.recognizerOptions[r];delete s.enable,o.set(s)}}this.wheelInput=new Tfe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Ife(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Rfe(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new kfe(e,this._onOtherEvent,{enable:!1});for(const[r,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(r,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const o=yfe[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=i.get(s);n?(a.requireFailure(e),r.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,o){if("string"!=typeof e){i=n;for(const d in e)this._addEventHandler(d,e[d],i,r,o);return}const{manager:s,events:a}=this,c=FV[e]||e;let l=a.get(c);l||(l=new Wfe(this),a.set(c,l),l.recognizerName=xfe[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,n,i,r,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:i}=this,o=i.get(FV[e]||e);if(o&&(o.remove(e,n),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function rf(){}const XV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:rf,onResize:rf,onViewStateChange:rf,onInteractionStateChange:rf,onBeforeRender:rf,onAfterRender:rf,onLoad:rf,onError:t=>bi.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class DR{constructor(e){xe(this,"props",void 0),xe(this,"width",0),xe(this,"height",0),xe(this,"userData",{}),xe(this,"canvas",null),xe(this,"viewManager",null),xe(this,"layerManager",null),xe(this,"effectManager",null),xe(this,"deckRenderer",null),xe(this,"deckPicker",null),xe(this,"eventManager",null),xe(this,"tooltip",null),xe(this,"metrics",void 0),xe(this,"animationLoop",void 0),xe(this,"stats",void 0),xe(this,"viewState",void 0),xe(this,"cursorState",void 0),xe(this,"_needsRedraw",void 0),xe(this,"_pickRequest",void 0),xe(this,"_lastPointerDownInfo",null),xe(this,"_metricsCounter",void 0),xe(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),xe(this,"_onEvent",n=>{const i=r4[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:o,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,s,n)),!d&&l&&l(s,n)}),xe(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...XV,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&bi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===BU()&&bi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new _I({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&ey.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,o,s,a,c,l;null===(e=this.animationLoop)||void 0===e||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(n=this.layerManager)||void 0===n||n.finalize(),this.layerManager=null,null===(i=this.viewManager)||void 0===i||i.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(o=this.deckRenderer)||void 0===o||o.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(a=this.eventManager)||void 0===a||a.destroy(),this.eventManager=null,null===(c=this.tooltip)||void 0===c||c.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&bi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&bi.removed("onLayerClick","onClick")(),e.initialViewState&&!xl(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||i||r||o||s,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return $o(this.viewManager),this.viewManager.views}getViewports(e){return $o(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,i){$o(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),$o(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(i||0===i){var r;const o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var e,n;const{canvas:i}=this;if(!i)return;const r=null!==(e=i.clientWidth)&&void 0!==e?e:i.width,o=null!==(n=i.clientHeight)&&void 0!==n?n:i.height;var s,a;r===this.width&&o===this.height||(this.width=r,this.height=o,null===(s=this.viewManager)||void 0===s||s.setProps({width:r,height:o}),null===(a=this.layerManager)||void 0===a||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:o}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new hfe({width:n,height:i,useDevicePixels:d,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:h=>v4({...o,...h,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new vV({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=r,s=!1;for(const a of i){var n;o=a,s=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,gI(e,{enable:!0,copyState:!0})),this.tooltip=new She(this.canvas),od(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new bV;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new Xfe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in r4)this.eventManager.on(r,this._onEvent);this.viewManager=new she({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new ohe(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new hhe,this.deckRenderer=new _he(e),this.deckPicker=new Ehe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;od(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),bi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=Xh.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}xe(DR,"defaultProps",XV),xe(DR,"VERSION",tfe);const D1={name:"project32",dependencies:[dR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Yfe={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},R1={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function Kfe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yfe;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},YV={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Nu{static get DRAW_MODE(){return YV}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("geometry"),drawMode:i=YV.TRIANGLES,attributes:r={},indices:o=null,vertexCount:s=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Kt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Kt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const o=e[r],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(i=Math.min(i,s.length/a))}return Kt(Number.isFinite(i)),i}}const KV=()=>{},qV={10241:9987,10240:9729,10242:33071,10243:33071};function epe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function tpe(t,e,n,i){const r=Math.min(n/e.width,i/e.height),o=Math.floor(e.width*r),s=Math.floor(e.height*r);return 1===r?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function wy(t){return t&&(t.id||t.url)}function JV(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];t[wy(r)]={...r,x:o,y:n}}}class ope{constructor(e,{onUpdate:n=KV,onError:i=KV}){xe(this,"gl",void 0),xe(this,"onUpdate",void 0),xe(this,"onError",void 0),xe(this,"_loadOptions",null),xe(this,"_texture",null),xe(this,"_externalTexture",null),xe(this,"_mapping",{}),xe(this,"_textureParameters",null),xe(this,"_pendingCount",0),xe(this,"_autoPacking",!1),xe(this,"_xOffset",0),xe(this,"_yOffset",0),xe(this,"_rowHeight",0),xe(this,"_buffer",4),xe(this,"_canvasWidth",1024),xe(this,"_canvasHeight",0),xe(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?wy(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:o}){var s;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i),o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function rpe(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=Yw(t);for(const s of r){o.index++;const a=e(s,o),c=wy(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||a.url!==n[c].url)&&(i[c]={...a,source:s,sourceIndex:o.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=function ipe({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[wy(l)]){const{height:h,width:p}=l;i+p+e>s&&(JV(n,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+p+e,o=Math.max(o,h)}}return a.length>0&&JV(n,a,r),{mapping:n,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:epe(o+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new Rs(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||qV})),this._texture.height!==this._canvasHeight&&(this._texture=function npe(t,e,n,i){const r=t.width,o=t.height,s=new Rs(t.gl,{width:e,height:n,parameters:i});return function ire(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=n;const{framebuffer:p,deleteFramebuffer:m}=Qb(t);Kt(p);const{gl:x,handle:D}=p,F=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const G=x.bindFramebuffer(36160,D);Kt(e);let q=null;if(e instanceof Yh&&(q=e,d=Number.isFinite(d)?d:q.width,h=Number.isFinite(h)?h:q.height,q.bind(0),e=q.target),F)switch(e){case 3553:case 34067:x.copyTexSubImage2D(e,o,a,c,i,r,d,h);break;case 35866:case 32879:ls(x).copyTexSubImage3D(e,o,a,c,l,i,r,d,h)}else x.copyTexImage2D(e,o,s,i,r,d,h,0);q&&q.unbind(),x.bindFramebuffer(36160,G||null),m&&p.delete()}(t,s,{targetY:0,width:r,height:o}),t.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||qV)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of e)this._pendingCount++,yy(i.url,this._loadOptions).then(r=>{const o=wy(i),s=this._mapping[o],{x:a,y:c,width:l,height:d}=s,{data:h,width:p,height:m}=tpe(n,r,l,d);this._texture.setSubImageData({data:h,x:a+(l-p)/2,y:c+(d-m)/2,width:p,height:m}),s.width=p,s.height=m,this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const ZV=[0,0,0,255],spe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:ZV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class RR extends tf{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[D1,R1]})}initializeState(){this.state={iconManager:new ope(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:ZV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:d}=n,{iconManager:h}=this.state,p=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!p,iconAtlas:s,iconMapping:p?a:null,textureParameters:d}),p?i.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:x}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(x),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:jw[o],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new jm(e,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):bi.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:o}=this.state.iconManager.getIconMapping(e);return[n,i,r,o]}}xe(RR,"defaultProps",spe),xe(RR,"layerName","IconLayer");const QV=[];class OR extends RR{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(o=>o/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&bi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:o}=this.state,s=r?Math.max(i,.75*(1-r)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:.75,outlineBuffer:s,gamma:i,sdf:!!n,outlineColor:o},super.draw(e),n&&r){const{iconManager:a}=this.state;a.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:.75}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):QV}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):QV}}xe(OR,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),xe(OR,"layerName","MultiIconLayer");const Ey=1e20;class lpe{constructor({fontSize:e=24,buffer:n=3,radius:i=8,cutoff:r=.25,fontFamily:o="sans-serif",fontWeight:s="normal",fontStyle:a="normal"}={}){this.buffer=n,this.cutoff=r,this.radius=i;const c=this.size=e+4*n,l=this._createCanvas(c),d=this.ctx=l.getContext("2d",{willReadFrequently:!0});d.font=`${a} ${s} ${e}px ${o}`,d.textBaseline="alphabetic",d.textAlign="left",d.fillStyle="black",this.gridOuter=new Float64Array(c*c),this.gridInner=new Float64Array(c*c),this.f=new Float64Array(c),this.z=new Float64Array(c+1),this.v=new Uint16Array(c)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:o,actualBoundingBoxRight:s}=this.ctx.measureText(e),a=Math.ceil(i),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-o))),d=Math.min(this.size-this.buffer,a+Math.ceil(r)),h=l+2*this.buffer,p=d+2*this.buffer,m=Math.max(h*p,0),x=new Uint8ClampedArray(m),D={data:x,width:h,height:p,glyphWidth:l,glyphHeight:d,glyphTop:a,glyphLeft:0,glyphAdvance:n};if(0===l||0===d)return D;const{ctx:F,buffer:G,gridInner:q,gridOuter:ee}=this;F.clearRect(G,G,l,d),F.fillText(e,G,G+a);const ve=F.getImageData(G,G,l,d);ee.fill(Ey,0,m),q.fill(0,0,m);for(let Oe=0;Oe<d;Oe++)for(let Xe=0;Xe<l;Xe++){const rt=ve.data[4*(Oe*l+Xe)+3]/255;if(0===rt)continue;const nt=(Oe+G)*h+Xe+G;if(1===rt)ee[nt]=0,q[nt]=Ey;else{const ht=.5-rt;ee[nt]=ht>0?ht*ht:0,q[nt]=ht<0?ht*ht:0}}e6(ee,0,0,h,p,h,this.f,this.v,this.z),e6(q,G,G,l,d,h,this.f,this.v,this.z);for(let Oe=0;Oe<m;Oe++){const Xe=Math.sqrt(ee[Oe])-Math.sqrt(q[Oe]);x[Oe]=Math.round(255-255*(Xe/this.radius+this.cutoff))}return D}}function e6(t,e,n,i,r,o,s,a,c){for(let l=e;l<e+i;l++)t6(t,n*o+l,o,r,s,a,c);for(let l=n;l<n+r;l++)t6(t,l*o+e,1,i,s,a,c)}function t6(t,e,n,i,r,o,s){o[0]=0,s[0]=-Ey,s[1]=Ey,r[0]=t[e];for(let a=1,c=0,l=0;a<i;a++){r[a]=t[e+a*n];const d=a*a;do{const h=o[c];l=(r[a]-r[h]+d-h*h)/(a-h)/2}while(l<=s[c]&&--c>-1);c++,o[c]=a,s[c]=l,s[c+1]=Ey}for(let a=0,c=0;a<i;a++){for(;s[c+1]<a;)c++;const l=o[c],d=a-l;t[e+a*n]=r[l]+d*d}}const upe=[];function hpe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function n6(t,e,n,i){let r=0;for(let s=e;s<n;s++){var o;r+=(null===(o=i[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return r}function i6(t,e,n,i,r,o){let s=e,a=0;for(let c=e;c<n;c++){const l=n6(t,c,c+1,r);a+l>i&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function mpe(t,e,n,i,r=0,o){void 0===o&&(o=t.length);const s=[];return"break-all"===e?i6(t,r,o,n,i,s):function ppe(t,e,n,i,r,o){let s=e,a=e,c=e,l=0;for(let d=e;d<n;d++)if((" "===t[d]||" "===t[d+1]||d+1===n)&&(c=d+1),c>a){let h=n6(t,a,c,r);l+h>i&&(s<a&&(o.push(a),s=a,l=0),h>i&&(h=i6(t,a,c,i,r,o),s=o[o.length-1])),a=c,l+=h}}(t,r,o,n,i,s),s}function gpe(t,e,n,i,r,o){let s=0,a=0;for(let c=e;c<n;c++){const l=t[c],d=i[l];d?(a||(a=d.layoutHeight),r[c]=s+d.layoutWidth/2,s+=d.layoutWidth):(bi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=s,s+=32)}o[0]=s,o[1]=a}class r6{constructor(e=5){xe(this,"limit",void 0),xe(this,"_cache",{}),xe(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const Jm={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function ype(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let k1=new r6(3);function xpe(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function l6(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class Epe{constructor(){xe(this,"props",{...Jm}),xe(this,"_key",void 0),xe(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(1.2*e+2*n)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=function vpe(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=k1.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),i=k1.get(this._key);if(i&&0===n.size)return void(this._atlas!==i&&(this._atlas=i));const r=this._generateFontAtlas(n,i);this._atlas=r,k1.set(this._key,r)}_generateFontAtlas(e,n){const{fontFamily:i,fontWeight:r,fontSize:o,buffer:s,sdf:a,radius:c,cutoff:l}=this.props;let d=n&&n.data;d||(d=document.createElement("canvas"),d.width=1024);const h=d.getContext("2d",{willReadFrequently:!0});l6(h,i,o,r);const{mapping:p,canvasHeight:m,xOffset:x,yOffset:D}=function fpe({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;const d=n+2*i;for(const h of t)if(!o[h]){const p=e(h);l+p+2*i>r&&(l=0,c++),o[h]={x:l+i,y:a+c*d+i,width:p,height:d,layoutWidth:p,layoutHeight:n},l+=p+2*i}return{mapping:o,xOffset:l,yOffset:a+c*d,canvasHeight:hpe(a+(c+1)*d)}}({getFontWidth:F=>h.measureText(F).width,fontHeight:1.2*o,buffer:s,characterSet:e,maxCanvasWidth:1024,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(d.height!==m){const F=h.getImageData(0,0,d.width,d.height);d.height=m,h.putImageData(F,0,0)}if(l6(h,i,o,r),a){const F=new lpe({fontSize:o,buffer:s,radius:c,cutoff:l,fontFamily:i,fontWeight:"".concat(r)});for(const G of e){const{data:q,width:ee,height:ve,glyphTop:Oe}=F.draw(G);p[G].width=ee,p[G].layoutOffsetY=.9*o-Oe;const Xe=h.createImageData(ee,ve);xpe(q,Xe),h.putImageData(Xe,p[G].x,p[G].y)}}else for(const F of e)h.fillText(F,p[F].x,p[F].y+s+.9*o);return{xOffset:x,yOffset:D,mapping:p,data:d,width:d.width,height:d.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const Cpe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class PR extends tf{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[D1,R1]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:jw[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new jm(e,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}xe(PR,"defaultProps",Cpe),xe(PR,"layerName","TextBackgroundLayer");const d6={start:1,middle:0,end:-1},u6={top:1,center:0,bottom:-1},NR=[0,0,0,255],Mpe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:NR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Jm.characterSet},fontFamily:Jm.fontFamily,fontWeight:Jm.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:NR},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:NR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class FR extends rR{constructor(...e){super(...e),xe(this,"state",void 0),xe(this,"getBoundingRect",(n,i)=>{let{size:[r,o]}=this.transformParagraph(n,i);const{fontSize:s}=this.state.fontAtlasManager.props;r/=s,o/=s;const{getTextAnchor:a,getAlignmentBaseline:c}=this.props;return[(d6["function"==typeof a?a(n,i):a]-1)*r/2,(u6["function"==typeof c?c(n,i):c]-1)*o/2,r,o]}),xe(this,"getIconOffsets",(n,i)=>{const{getTextAnchor:r,getAlignmentBaseline:o}=this.props,{x:s,y:a,rowWidth:c,size:[l,d]}=this.transformParagraph(n,i),h=d6["function"==typeof r?r(n,i):r],p=u6["function"==typeof o?o(n,i):o],m=s.length,x=new Array(2*m);let D=0;for(let F=0;F<m;F++)x[D++]=(h-1)*l/2+(1-h)*(l-c[F])/2+s[F],x[D++]=(p-1)*d/2+a[F];return x})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Epe},this.props.maxWidth>0&&bi.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(s),!0;for(const a in s)if(s[a]!==r.props[a])return r.setProps(s),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:o}=this.props,s=n.startIndices;const c="auto"===i&&new Set;if(r&&s){const{texts:l,characterCount:d}=function bpe({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=n?n/s:1,c=i?i/s:0,l=r[e]||Math.ceil((t.length-c)/a),d=o&&new Set,h=new Array(e);let p=t;if(a>1||c>0){p=new(0,t.constructor)(l);for(let x=0;x<l;x++)p[x]=t[x*a+c]}for(let m=0;m<e;m++){const F=p.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,F),d&&F.forEach(d.add,d)}if(d)for(const m of d)o.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:s,characterSet:c});a=d,o=(h,{index:p})=>l[p]}else{const{iterable:l,objectInfo:d}=Yw(n);s=[0],a=0;for(const h of l){d.index++;const p=Array.from(o(h,d)||"");c&&p.forEach(c.add,c),a+=p.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||i})}transformParagraph(e,n){const{fontAtlasManager:i}=this.state,r=i.mapping,o=this.state.getText,{wordBreak:s,lineHeight:a,maxWidth:c}=this.props;return function _pe(t,e,n,i,r){const o=Array.from(t),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),d=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],p=[0,0];let m=0,x=0,D=0;for(let G=0;G<=s;G++){const q=o[G];if(("\n"===q||G===s)&&(D=G),D>x){const ee=d?mpe(o,n,i,r,x,D):upe;for(let ve=0;ve<=ee.length;ve++){const Oe=0===ve?x:ee[ve-1],Xe=ve<ee.length?ee[ve]:D;gpe(o,Oe,Xe,r,a,p);for(let rt=Oe;rt<Xe;rt++){var F;const ht=(null===(F=r[o[rt]])||void 0===F?void 0:F.layoutOffsetY)||0;c[rt]=m+p[1]/2+ht,l[rt]=p[0]}m+=p[1]*e,h[0]=Math.max(h[0],p[0])}x=D}"\n"===q&&(a[x]=0,c[x]=0,l[x]=0,x++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}(o(e,n)||"",a,s,c*i.props.fontSize,r)}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:p,getAngle:m,getPixelOffset:x,getBackgroundColor:D,getBorderColor:F,getBorderWidth:G,backgroundPadding:q,background:ee,billboard:ve,fontSettings:Oe,outlineWidth:Xe,outlineColor:rt,sizeScale:nt,sizeUnits:ht,sizeMinPixels:gt,sizeMaxPixels:yt,transitions:kt,updateTriggers:mt}=this.props,vt=this.getSubLayerClass("characters",OR),Ft=this.getSubLayerClass("background",PR);return[ee&&new Ft({getFillColor:D,getLineColor:F,getLineWidth:G,padding:q,getPosition:d,getSize:p,getAngle:m,getPixelOffset:x,billboard:ve,sizeScale:nt,sizeUnits:ht,sizeMinPixels:gt,sizeMaxPixels:yt,transitions:kt&&{getPosition:kt.getPosition,getAngle:kt.getAngle,getSize:kt.getSize,getFillColor:kt.getBackgroundColor,getLineColor:kt.getBorderColor,getLineWidth:kt.getBorderWidth,getPixelOffset:kt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:mt.getPosition,getAngle:mt.getAngle,getSize:mt.getSize,getFillColor:mt.getBackgroundColor,getLineColor:mt.getBorderColor,getLineWidth:mt.getBorderWidth,getPixelOffset:mt.getPixelOffset,getBoundingRect:{getText:mt.getText,getTextAnchor:mt.getTextAnchor,getAlignmentBaseline:mt.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new vt({sdf:Oe.sdf,smoothing:Number.isFinite(Oe.smoothing)?Oe.smoothing:Jm.smoothing,outlineWidth:Xe/(Oe.radius||Jm.radius),outlineColor:rt,iconAtlas:o,iconMapping:s,getPosition:d,getColor:h,getSize:p,getAngle:m,getPixelOffset:x,billboard:ve,sizeScale:nt*r,sizeUnits:ht,sizeMinPixels:gt*r,sizeMaxPixels:yt*r,transitions:kt&&{getPosition:kt.getPosition,getAngle:kt.getAngle,getColor:kt.getColor,getSize:kt.getSize,getPixelOffset:kt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:mt.getText,getPosition:mt.getPosition,getAngle:mt.getAngle,getColor:mt.getColor,getSize:mt.getSize,getPixelOffset:mt.getPixelOffset,getIconOffsets:{getTextAnchor:mt.getTextAnchor,getAlignmentBaseline:mt.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function wpe(t){bi.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),k1=new r6(t)}(e)}}xe(FR,"defaultProps",Mpe),xe(FR,"layerName","TextLayer");const h6="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Ipe={lightSources:{}};function LR(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const BR={name:"lights",vs:h6,fs:h6,getUniforms:function f6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ipe;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function Dpe(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?LR(e):[0,0,0],n.forEach((o,s)=>{r["lighting_uPointLight[".concat(s,"].color")]=LR(o),r["lighting_uPointLight[".concat(s,"].position")]=o.position,r["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((o,s)=>{r["lighting_uDirectionalLight[".concat(s,"].color")]=LR(o),r["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return f6({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},Rpe={};const Ope={name:"phong-lighting",dependencies:[BR],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function m6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rpe;if(!("material"in t))return{};const{material:e}=t;return e?function kpe(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(o=>o/255)}}(e):{lighting_uEnabled:!1}}},jR=Math.PI/180,O1=new Float32Array(16),g6=new Float32Array(12);function _6(t,e,n){const i=e[0]*jR,r=e[1]*jR,o=e[2]*jR,s=Math.sin(o),a=Math.sin(i),c=Math.sin(r),l=Math.cos(o),d=Math.cos(i),h=Math.cos(r),p=n[0],m=n[1],x=n[2];t[0]=p*h*d,t[1]=p*c*d,t[2]=p*-a,t[3]=m*(-c*l+h*a*s),t[4]=m*(h*l+c*a*s),t[5]=m*d*s,t[6]=x*(c*s+h*a*l),t[7]=x*(-h*s+c*a*l),t[8]=x*d*l}function b6(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const y6={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(o),h=Array.isArray(r),p=Array.isArray(s),m=l||!c&&!!a(i[0]);t.constant=m?l:h&&d&&p;const x=t.value;if(t.constant){let D;m?(O1.set(a),D=b6(O1)):(D=g6,_6(D,r,o),D.set(s,9)),t.value=new Float32Array(D)}else{let D=e*t.size;const{iterable:F,objectInfo:G}=Yw(i,e,n);for(const q of F){let ee;G.index++,m?(O1.set(l?a:a(q,G)),ee=b6(O1)):(ee=g6,_6(ee,h?r:r(q,G),d?o:o(q,G)),ee.set(p?s:s(q,G),9)),x[D++]=ee[0],x[D++]=ee[1],x[D++]=ee[2],x[D++]=ee[3],x[D++]=ee[4],x[D++]=ee[5],x[D++]=ee[6],x[D++]=ee[7],x[D++]=ee[8],x[D++]=ee[9],x[D++]=ee[10],x[D++]=ee[11]}}}};function v6(t,e){return e===Si.CARTESIAN||e===Si.METER_OFFSETS||e===Si.DEFAULT&&!t.isGeospatial}function x6(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],p=a[l+2];e=d<e?d:e,n=h<n?h:n,i=p<i?p:i,r=d>r?d:r,o=h>o?h:o,s=p>s?p:s}return[[e,n,i],[r,o,s]]}function w6(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),bi.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function E6(t,e){if(t.attributes)return w6(t.attributes,e),t instanceof Nu?t:new Nu(t);if(t.positions||t.POSITION)return w6(t,e),new Nu({attributes:t});throw Error("Invalid mesh")}class UR extends tf{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){const e=!fi(this.context.gl),n={};return TI(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  DECKGL_FILTER_COLOR(color, geometry);\n\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n}\n",modules:[D1,Ope,R1],transpileToGLSL100:e,defines:n})}getBounds(){var e;if(this.props._instanced)return super.getBounds();let n=this.state.positionBounds;if(n)return n;const{mesh:i}=this.props;if(!i)return null;if(n=null===(e=i.header)||void 0===e?void 0:e.boundingBox,!n){const{attributes:r}=E6(i,this.props._useMeshColors);r.POSITION=r.POSITION||r.positions,n=x6(r)}return this.state.positionBounds=n,n}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:y6}),this.setState({emptyTexture:new Rs(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var o;if(this.state.positionBounds=null,null===(o=this.state.model)||void 0===o||o.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const s=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!s.NORMAL&&!s.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||v6(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new jm(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:E6(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}xe(UR,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}}),xe(UR,"layerName","SimpleMeshLayer");const A6={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[BR]};class Zm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||Ks(this.constructor.name),this.display=!0,this.position=new nn,this.rotation=new nn,this.scale=new nn(1,1,1),this.matrix=new Hn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Kt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Kt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Kt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:o=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){Kt(e),n=n||this.matrix;const i=new Hn(e).multiplyRight(n),r=i.invert(),o=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class Ay extends Zm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;ln.assert(n.every(i=>i instanceof Zm),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const o=n.getBounds();if(!o)return;const[s,a]=o,c=new nn(s).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new nn(a).subtract(s).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new nn(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let p=0;p<3;p++)e[0][p]=Math.min(e[0][p],h[p]),e[1][p]=Math.max(e[1][p],h[p])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new Hn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Hn(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof Ay?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let P1;class VR extends H4{static get ZERO(){return P1||(P1=new VR(0,0,0,0),Object.freeze(P1)),P1}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),ad(e)&&1===arguments.length?this.copy(e):(Wr.debug&&(pi(e),pi(n),pi(i),pi(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Wr.debug&&(pi(e.x),pi(e.y),pi(e.z),pi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=pi(e)}get w(){return this[3]}set w(e){this[3]=pi(e)}transform(e){return II(this,this,e),this.check()}transformByMatrix3(e){return K4(this,this,e),this.check()}transformByMatrix2(e){return function Bre(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return X4(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function S6(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],m=n[1],x=n[2],D=n[3],F=n[4],G=n[5],q=n[6],ee=n[7],ve=n[8];return t[0]=p*i+m*s+x*l,t[1]=p*r+m*a+x*d,t[2]=p*o+m*c+x*h,t[3]=D*i+F*s+G*l,t[4]=D*r+F*a+G*d,t[5]=D*o+F*c+G*h,t[6]=q*i+ee*s+ve*l,t[7]=q*r+ee*a+ve*d,t[8]=q*o+ee*c+ve*h,t}function C6(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function T6(){var t=new Js(4);return Js!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function M6(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function I6(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],c=n[1],l=n[2],d=n[3];return t[0]=i*d+s*a+r*l-o*c,t[1]=r*d+s*c+o*a-i*l,t[2]=o*d+s*l+i*c-r*a,t[3]=s*d-i*a-r*c-o*l,t}var R6=ZU,ime=function(){var t=z4(),e=G4(1,0,0),n=G4(0,1,0);return function(i,r,o){var s=W4(r,o);return s<-.999999?(Ww(t,e,r),function Cre(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&Ww(t,n,r),function Ire(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(t,t),M6(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(Ww(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,function uce(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=o*s,t}(i,i))}}();T6(),T6(),function Lpe(){var t=new Js(9);Js!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const rme=[0,0,0,1];class Sy extends Gw{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function D6(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*i,t[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),t[o]=(e[3*o+r]+e[3*r+o])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return M6(this,e,n),this.check()}identity(){return function Gpe(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}get z(){return this[2]}set z(e){this[2]=pi(e)}get w(){return this[3]}set w(e){this[3]=pi(e)}len(){return function lce(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function dce(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function hce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return ime(this,e,n),this.check()}add(e){return function cce(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function Ype(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function Zpe(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function Jpe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function fce(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return I6(this,this,e),this.check()}multiplyLeft(e){return I6(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function Wpe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+s*a,t[1]=r*c+o*a,t[2]=o*c-r*a,t[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function $pe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-o*a,t[1]=r*c+s*a,t[2]=o*c+i*a,t[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function Xpe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=o*c+s*a,t[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return R6(this,this,e),this.check()}slerp(e,n,i){let r,o,s;switch(arguments.length){case 1:({start:r=rme,target:o,ratio:s}=e);break;case 2:r=this,o=e,s=n;break;default:r=e,o=n,s=i}return function N1(t,e,n,i){var p,m,x,D,F,r=e[0],o=e[1],s=e[2],a=e[3],c=n[0],l=n[1],d=n[2],h=n[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>vl?(p=Math.acos(m),x=Math.sin(p),D=Math.sin((1-i)*p)/x,F=Math.sin(i*p)/x):(D=1-i,F=i),t[0]=D*r+F*c,t[1]=D*o+F*l,t[2]=D*s+F*d,t[3]=D*a+F*h,t}(this,r,o,s),this.check()}transformVector4(e,n=new VR){return function pce(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2],l=n[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,p=l*o+s*r-a*i,m=-s*i-a*r-c*o;t[0]=d*l+m*-s+h*-c-p*-a,t[1]=h*l+m*-a+p*-s-d*-c,t[2]=p*l+m*-c+d*-a-h*-s,t[3]=e[3]}(n,e,this),ty(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const ome={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},sme={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function P6(t){if(!t._animation){const e=sme[t.componentType],n=ome[t.type],i=n*t.count,{buffer:r,byteOffset:o}=t.bufferView.data,s=new e(r,o+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(s);else{const a=[];for(let c=0;c<s.length;c+=n)a.push(Array.from(s.slice(c,c+n)));t._animation=a}}return t._animation}const ame=new Hn,HR=new Sy;class fme{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:o,target:s,path:a}=r;(function hme(t,e,n,i){let{input:r,interpolation:o,output:s}=e;const c=t%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:ln.warn("Bad animation path ".concat(i))()}Kt(n[i].length===s[d].length);const h=r[d],p=r[l];switch(o){case"STEP":!function ume(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,s[d]);break;case"LINEAR":p>h&&function lme(t,e,n,i,r){if("rotation"===e){HR.slerp({start:n,target:i,ratio:r});for(let o=0;o<HR.length;o++)t[e][o]=HR[o]}else for(let o=0;o<n.length;o++)t[e][o]=r*i[o]+(1-r)*n[o]}(n,i,s[d],s[l],(c-h)/(p-h));break;case"CUBICSPLINE":p>h&&function dme(t,e,n){let{p0:i,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){const d=r[l]*a,h=o[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(n,i,{p0:s[3*d+1],outTangent0:s[3*d+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:p-h,ratio:(c-h)/(p-h)});break;default:ln.warn("Interpolation ".concat(o," not supported"))()}})(i,o,s,a),function cme(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=ame.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(s,s._node)})}}class pme{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),o=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:P6(e.accessors[c]),interpolation:l,output:P6(e.accessors[d])}}),s=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new fme({name:r,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class mme extends Zm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof jm?(this.model=e,this._setModelNodeProps(n)):this.model=new jm(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class gme{constructor(e,n){let{attributes:i,material:r,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},TI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.texture.source.image;let s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};const c=new Rs(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(ln.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function N6(t,e){return fi(t)?"#version 300 es\n".concat(e):e}const vme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xme={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class wme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},xme,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new pme(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(o=>this.createNode(o));return new Ay({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));const r=new Ay({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const o=(new Hn).fromQuaternion(e.rotation);r.matrix.multiplyRight(o)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),r=new Ay({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){ln.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function yme(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:o,modelOptions:s}=e,a=new gme(t,e);ln.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));const l=new mme(t,Object.assign({id:n,drawMode:i,vertexCount:r,modules:[A6],defines:a.defines,parameters:a.parameters,vs:N6(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:N6(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c},s));return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),ln.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new Ki(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new qs({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:vme[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var Cy=g(9125);const Cme="3.4.11",zR={};function sf(t){return GR.apply(this,arguments)}function GR(){return GR=zt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&(t=function Tme(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:Sl?n.CDN?(El(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Cme,"/dist/libs/").concat(t)):OD?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),zR[t]=zR[t]||function Mme(t){return WR.apply(this,arguments)}(t),yield zR[t]}),GR.apply(this,arguments)}function WR(){return WR=zt(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!Sl)try{return Cy&&Cy.requireFromFile&&(yield Cy.requireFromFile(t))}catch{return null}return OD?importScripts(t):function Ime(t,e){if(!Sl)return Cy.requireFromString&&Cy.requireFromString(t,e);if(OD)return eval.call(ede,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),WR.apply(this,arguments)}const Dme="https://unpkg.com/@loaders.gl/textures@".concat("3.4.11","/dist/libs/basis_encoder.wasm"),Rme="https://unpkg.com/@loaders.gl/textures@".concat("3.4.11","/dist/libs/basis_encoder.js");let $R,KR;function L6(t){return XR.apply(this,arguments)}function XR(){return XR=zt(function*(t){const e=t.modules||{};return e.basis?e.basis:($R=$R||function kme(t){return YR.apply(this,arguments)}(t),yield $R)}),XR.apply(this,arguments)}function YR(){return YR=zt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield sf("basis_transcoder.js","textures",t),yield sf("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function Ome(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:o,initializeBasis:s}=r;s(),i({BasisFile:o})})})}(e,n)}),YR.apply(this,arguments)}function B6(t){return qR.apply(this,arguments)}function qR(){return qR=zt(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(KR=KR||function Pme(t){return JR.apply(this,arguments)}(t),yield KR)}),qR.apply(this,arguments)}function JR(){return JR=zt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield sf(Rme,"textures",t),yield sf(Dme,"textures",t)]),e=e||globalThis.BASIS,yield function Nme(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}(e,n)}),JR.apply(this,arguments)}const Fme=["","WEBKIT_","MOZ_"],j6={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let F1=null;var ZR,L1,QR,B1,V6,ek,H6,z6;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(ZR||(ZR={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(L1||(L1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(QR||(QR={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(B1||(B1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(V6||(V6={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(ek||(ek={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(H6||(H6={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(z6||(z6={}));const Ca=[171,75,84,88,32,50,48,187,13,10,26,10],Hme={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function nk(){return nk=zt(function*(t,e){if("auto"===e.basis.containerFormat){if(function Vme(t){const e=new Uint8Array(t);return!(e.byteLength<Ca.length||e[0]!==Ca[0]||e[1]!==Ca[1]||e[2]!==Ca[2]||e[3]!==Ca[3]||e[4]!==Ca[4]||e[5]!==Ca[5]||e[6]!==Ca[6]||e[7]!==Ca[7]||e[8]!==Ca[8]||e[9]!==Ca[9]||e[10]!==Ca[10]||e[11]!==Ca[11])}(t))return $6((yield B6(e)).KTX2File,t,e);const{BasisFile:n}=yield L6(e);return ik(n,t,e)}if("encoder"===e.basis.module){const n=yield B6(e);return"ktx2"===e.basis.containerFormat?$6(n.KTX2File,t,e):ik(n.BasisFile,t,e)}{const{BasisFile:i}=yield L6(e);return ik(i,t,e)}}),nk.apply(this,arguments)}function ik(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),o=[];for(let s=0;s<r;s++){const a=i.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(Gme(i,s,l,n));o.push(c)}return o}finally{i.close(),i.delete()}}function Gme(t,e,n,i){const r=t.getImageWidth(e,n),o=t.getImageHeight(e,n),s=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=X6(i,s),d=t.getImageTranscodedSizeInBytes(e,n,l),h=new Uint8Array(d);if(!t.transcodeImage(h,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:c,hasAlpha:s}}function $6(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),o=[];for(let s=0;s<r;s++){o.push(Wme(i,s,n));break}return[o]}finally{i.close(),i.delete()}}function Wme(t,e,n){const{alphaFlag:i,height:r,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=X6(n,i),l=t.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!t.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:d,compressed:s,levelSize:l,hasAlpha:i,format:a}}function X6(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=Y6()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),Hme[n]}function Y6(){const t=function Lme(t){if(!F1){t=t||function Bme(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,F1=new Set;for(const e of Fme)for(const n in j6)t&&t.getExtension("".concat(e).concat(n))&&F1.add(j6[n])}return F1}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const $me={name:"Basis",id:Sl?"basis":"basis-nodejs",module:"textures",version:"3.4.11",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function zme(t,e){return nk.apply(this,arguments)}};function K6(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function Ta(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function q6(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function My(t,e){return ud(t>=0),ud(e>0),t+(e-1)&~(e-1)}function Kme(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+My(i.byteLength,4)}const Z6=["SCALAR","VEC2","VEC3","VEC4"],qme=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Jme=new Map(qme),Zme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Qme={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ege={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Q6(t){return Z6[t-1]||Z6[0]}function eH(t){const e=Jme.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function rk(t,e){const n=ege[t.componentType],i=Zme[t.type],o=t.count*i,s=t.count*i*Qme[t.componentType];return Ta(s>=0&&s<=e.byteLength),{ArrayType:n,length:o,byteLength:s}}const tge={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class Zs{constructor(e){xe(this,"gltf",void 0),xe(this,"sourceBuffers",void 0),xe(this,"byteLength",void 0),this.gltf=e||{json:{...tge},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Ta(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:o,length:s}=rk(e,n);return new o(r,n.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ta(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ta(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(!this.getExtension(e))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:o}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=xR(e),r=n||i?.mimeType,s={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Ta(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=My(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:Q6(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const o={size:n.size,componentType:eH(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(o,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),o=new Uint8Array(r);let s=0;for(const a of this.sourceBuffers||[])s=Kme(a,o,s);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={};for(const i in e){const r=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(r.value,r);n[o]=s}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const o of r)i.min.push(o),i.max.push(o);for(let o=n;o<e.length;o+=n)for(let s=0;s<n;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}}const ige="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",rge="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",oge=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),sge=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),tH={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},age={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function ck(){return ck=zt(function*(t,e,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const s=yield function U1(){return dk.apply(this,arguments)}();!function V1(t,e,n,i,r,o,s){const a=t.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(o.length),h=new Uint8Array(t.exports.memory.buffer);h.set(o,d);const p=e(l,i,r,d,o.length);if(0===p&&s&&s(l,c,r),n.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==p)throw new Error("Malformed buffer data: ".concat(p))}(s,s.exports[age[r]],t,e,n,i,s.exports[tH[o||"NONE"]])}),ck.apply(this,arguments)}let lk;function dk(){return dk=zt(function*(){return lk||(lk=function lge(){return uk.apply(this,arguments)}()),lk}),dk.apply(this,arguments)}function uk(){return uk=zt(function*(){let t=ige;WebAssembly.validate(oge)&&(t=rge,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function dge(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?sge[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),uk.apply(this,arguments)}const hk="EXT_meshopt_compression",uge=hk;function hge(t,e){return fk.apply(this,arguments)}function fk(){return fk=zt(function*(t,e){var n;const i=new Zs(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const o of t.json.bufferViews||[])r.push(fge(i,o));yield Promise.all(r),i.removeExtension(hk)}),fk.apply(this,arguments)}function fge(t,e){return pk.apply(this,arguments)}function pk(){return pk=zt(function*(t,e){const n=t.getObjectExtension(e,hk);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=n,d=t.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),p=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function cge(t,e,n,i,r){return ck.apply(this,arguments)}(p,s,o,h,a,c),p}return null}),pk.apply(this,arguments)}const gk={};function mge(t){if(void 0===gk[t]){const e=x1?function gge(t){switch(t){case"image/avif":case"image/webp":return function yge(t){try{return 0===document.createElement("canvas").toDataURL(t).indexOf("data:".concat(t))}catch{return!1}}(t);default:return!0}}(t):function iH(t){const e=["image/png","image/jpeg","image/gif"],{_parseImageNode:n,_imageFormatsNode:i=e}=globalThis;return!!n&&i.includes(t)}(t);gk[t]=e}return gk[t]}const eg="EXT_texture_webp",xge=eg;function wge(t,e){const n=new Zs(t);if(!mge("image/webp")){if(n.getRequiredExtensions().includes(eg))throw new Error("gltf: Required extension ".concat(eg," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const o=n.getObjectExtension(r,eg);o&&(r.source=o.source),n.removeObjectExtension(r,eg)}n.removeExtension(eg)}const H1="KHR_texture_basisu",Ege=H1;function Age(t,e){const n=new Zs(t),{json:i}=n;for(const r of i.textures||[]){const o=n.getObjectExtension(r,H1);o&&(r.source=o.source),n.removeObjectExtension(r,H1)}n.removeExtension(H1)}const oH={name:"Draco",id:Sl?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:"3.4.11",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class z1{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;xe(this,"name",void 0),xe(this,"type",void 0),xe(this,"nullable",void 0),xe(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new z1(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let sH,aH,cH,lH,dH,uH,hH,fH,ar=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({});class af{static isNull(e){return e&&e.typeId===ar.Null}static isInt(e){return e&&e.typeId===ar.Int}static isFloat(e){return e&&e.typeId===ar.Float}static isBinary(e){return e&&e.typeId===ar.Binary}static isUtf8(e){return e&&e.typeId===ar.Utf8}static isBool(e){return e&&e.typeId===ar.Bool}static isDecimal(e){return e&&e.typeId===ar.Decimal}static isDate(e){return e&&e.typeId===ar.Date}static isTime(e){return e&&e.typeId===ar.Time}static isTimestamp(e){return e&&e.typeId===ar.Timestamp}static isInterval(e){return e&&e.typeId===ar.Interval}static isList(e){return e&&e.typeId===ar.List}static isStruct(e){return e&&e.typeId===ar.Struct}static isUnion(e){return e&&e.typeId===ar.Union}static isFixedSizeBinary(e){return e&&e.typeId===ar.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===ar.FixedSizeList}static isMap(e){return e&&e.typeId===ar.Map}static isDictionary(e){return e&&e.typeId===ar.Dictionary}get typeId(){return ar.NONE}compareTo(e){return this===e}}Symbol,Symbol,sH=Symbol.toStringTag;class tg extends af{constructor(e,n){super(),xe(this,"isSigned",void 0),xe(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return ar.Int}get[sH](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class Sge extends tg{constructor(){super(!0,8)}}class Cge extends tg{constructor(){super(!0,16)}}class Tge extends tg{constructor(){super(!0,32)}}class Mge extends tg{constructor(){super(!1,8)}}class Ige extends tg{constructor(){super(!1,16)}}class Dge extends tg{constructor(){super(!1,32)}}aH=Symbol.toStringTag;class pH extends af{constructor(e){super(),xe(this,"precision",void 0),this.precision=e}get typeId(){return ar.Float}get[aH](){return"Float"}toString(){return"Float".concat(this.precision)}}class Rge extends pH{constructor(){super(32)}}class kge extends pH{constructor(){super(64)}}Symbol,Symbol,cH=Symbol.toStringTag,lH=Symbol.toStringTag,dH=Symbol.toStringTag,uH=Symbol.toStringTag,hH=Symbol.toStringTag;class Oge extends af{constructor(e,n){super(),xe(this,"listSize",void 0),xe(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return ar.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[hH](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}fH=Symbol.toStringTag;class ng{constructor(e,n){xe(this,"fields",void 0),xe(this,"metadata",void 0),function Lge(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function Bge(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(){const e=Object.create(null);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(const s of i)e[s]=!0;const o=this.fields.filter(s=>e[s.name]);return new ng(o,this.metadata)}selectAt(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.map(o=>this.fields[o]).filter(Boolean);return new ng(r,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof ng){const s=e;n=s.fields,i=gH(gH(new Map,this.metadata),s.metadata)}else n=e;const r=Object.create(null);for(const s of this.fields)r[s.name]=s;for(const s of n)r[s.name]=s;const o=Object.values(r);return new ng(o,i)}}function gH(t,e){return new Map([...t||new Map,...e||new Map])}function _H(t,e,n){return function mH(t,e,n){const i=function Pge(t){switch(t.constructor){case Int8Array:return new Sge;case Uint8Array:return new Mge;case Int16Array:return new Cge;case Uint16Array:return new Ige;case Int32Array:return new Tge;case Uint32Array:return new Dge;case Float32Array:return new Rge;case Float64Array:return new kge;default:throw new Error("array type not supported")}}(e.value),r=n||function Fge(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new z1(t,new Oge(e.size,new z1("value",i)),!1,r)}(t,e,n?bH(n.metadata):void 0)}function bH(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const yH={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Vge={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class zge{constructor(e){xe(this,"draco",void 0),xe(this,"decoder",void 0),xe(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(r){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){const p="DRACO decompression failed: ".concat(s.error_msg());throw new Error(p)}const a=this._getDracoLoaderData(o,r,n),c=this._getMeshData(o,a,n),l=x6(c.attributes),d=function jge(t,e,n){const i=bH(e.metadata),r=[],o=function Uge(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const s in t){const c=_H(s,t[s],o[s]);r.push(c)}if(n){const s=_H("indices",n);r.push(s)}return new ng(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:o}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const o=this.decoder.GetAttribute(e,r),s=this._getAttributeMetadata(e,r);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:r,metadata:s};const a=this._getQuantizationTransform(o,n);a&&(i[o.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(o,n);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const o of Object.values(e.attributes)){const s=this._deduceAttributeName(o,i);o.name=s;const{value:a,size:c}=this._getAttributeValues(n,o);r[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,o=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function $ge(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=Vge[n.data_type],r=n.num_components,s=e.num_points()*r,a=s*i.BYTES_PER_ELEMENT,c=function Gge(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[s,a]of Object.entries(n.extraAttributes||{}))if(a===i)return s;const r=e.attribute_type;for(const s in yH)if(this.draco[s]===r)return yH[s];const o=n.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const o=this.metadataQuerier.GetEntryName(e,r);n[o]=this._getDracoMetadataField(e,o)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function Wge(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const o of r)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}}const wk="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),Kge="".concat(wk,"/draco_decoder.js"),qge="".concat(wk,"/draco_wasm_wrapper.js"),Jge="".concat(wk,"/draco_decoder.wasm");let Iy;function Ek(){return Ek=zt(function*(t){const e=t.modules||{};return Iy=e.draco3d?Iy||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):Iy||function e_e(t){return Sk.apply(this,arguments)}(t),yield Iy}),Ek.apply(this,arguments)}function Sk(){return Sk=zt(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield sf(Kge,"draco",t):[e,n]=yield Promise.all([yield sf(qge,"draco",t),yield sf(Jge,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function t_e(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),Sk.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");const Tk={...oH,parse:function i_e(t,e){return Mk.apply(this,arguments)}};function Mk(){return Mk=zt(function*(t,e){const{draco:n}=yield function Qge(t){return Ek.apply(this,arguments)}(e),i=new zge(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),Mk.apply(this,arguments)}function vH(t){const{buffer:e,size:n,count:i}=function o_e(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function s_e(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:Q6(n),componentType:eH(e)}}const cf="KHR_draco_mesh_compression",a_e=cf;function c_e(t,e,n){const i=new Zs(t);for(const r of xH(i))i.getObjectExtension(r,cf)}function l_e(t,e,n){return Ik.apply(this,arguments)}function Ik(){return Ik=zt(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new Zs(t),o=[];for(const s of xH(r))r.getObjectExtension(s,cf)&&o.push(u_e(r,s,e,n));yield Promise.all(o),r.removeExtension(cf)}),Ik.apply(this,arguments)}function d_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Zs(t);for(const i of n.json.meshes||[])h_e(i,e),n.addRequiredExtension(cf)}function u_e(t,e,n,i){return Dk.apply(this,arguments)}function Dk(){return Dk=zt(function*(t,e,n,i){const r=t.getObjectExtension(e,cf);if(!r)return;const o=t.getTypedArrayForBufferView(r.bufferView),s=K8(o.buffer,o.byteOffset),{parse:a}=i,c={...n};delete c["3d-tiles"];const l=yield a(s,Tk,c,i),d=function r_e(t){const e={};for(const n in t)if("indices"!==n){const r=vH(t[n]);e[n]=r}return e}(l.attributes);for(const[h,p]of Object.entries(d))if(h in e.attributes){const x=t.getAccessor(e.attributes[h]);null!=x&&x.min&&null!=x&&x.max&&(p.min=x.min,p.max=x.max)}e.attributes=d,l.indices&&(e.indices=vH(l.indices)),function f_e(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),Dk.apply(this,arguments)}function h_e(t,e){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=r.DracoWriter.encodeSync({attributes:t}),a=null==o||null===(n=o.parseSync)||void 0===n?void 0:n.call(o,{attributes:t}),c=r._addFauxAttributes(a.attributes),l=r.addBufferView(s);return{primitives:[{attributes:c,mode:i,extensions:{[cf]:{bufferView:l,attributes:c}}}]}}function*xH(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}var wH=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2",t}(wH||{});const p_e=Object.freeze([1,0,0,0,1,0,0,0,1]);class Ko extends i8{static get IDENTITY(){return function g_e(){return W1||(W1=new Ko,Object.freeze(W1)),W1}()}static get ZERO(){return function m_e(){return G1||(G1=new Ko([0,0,0,0,0,0,0,0,0]),Object.freeze(G1)),G1}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return wH}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(p_e)}fromObject(e){return this.check()}fromQuaternion(e){return function zpe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,l=n*s,d=i*s,h=i*a,p=r*s,m=r*a,x=r*c,D=o*s,F=o*a,G=o*c;t[0]=1-h-x,t[3]=d-G,t[6]=p+F,t[1]=d+G,t[4]=1-l-x,t[7]=m-D,t[2]=p-F,t[5]=m+D,t[8]=1-l-h}(this,e),this.check()}set(e,n,i,r,o,s,a,c,l){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,n,i,r,o,s,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=l,this.check()}determinant(){return function Upe(t){var r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8];return t[0]*(l*o-s*c)+t[1]*(-l*r+s*a)+t[2]*(c*r-o*a)}(this)}transpose(){return function Bpe(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function jpe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*s-a*l,p=-d*o+a*c,m=l*o-s*c,x=n*h+i*p+r*m;x&&(t[0]=h*(x=1/x),t[1]=(-d*i+r*l)*x,t[2]=(a*i-r*s)*x,t[3]=p*x,t[4]=(d*n-r*c)*x,t[5]=(-a*n+r*o)*x,t[6]=m*x,t[7]=(-l*n+i*c)*x,t[8]=(s*n-i*o)*x)}(this,this),this.check()}multiplyLeft(e){return S6(this,e,this),this.check()}multiplyRight(e){return S6(this,this,e),this.check()}rotate(e){return function Hpe(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=Math.sin(n),m=Math.cos(n);t[0]=m*i+p*s,t[1]=m*r+p*a,t[2]=m*o+p*c,t[3]=m*s-p*i,t[4]=m*a-p*r,t[5]=m*c-p*o,t[6]=l,t[7]=d,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?C6(this,this,e):C6(this,this,[e,e]),this.check()}translate(e){return function Vpe(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],m=n[1];t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=p*i+m*s+l,t[7]=p*r+m*a+d,t[8]=p*o+m*c+h}(this,this,e),this.check()}transform(e,n){let i;switch(e.length){case 2:i=function Ace(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:i=$4(n||[-0,-0,-0],e,this);break;case 4:i=K4(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return ty(i,e.length),i}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let G1,W1;const EH={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},AH={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Rk="KHR_texture_transform",__e=Rk,$1=new nn,b_e=new Ko,y_e=new Ko;function v_e(t,e){return kk.apply(this,arguments)}function kk(){return kk=zt(function*(t,e){if(!new Zs(t).getExtension(Rk))return;const r=t.json.materials||[];for(let o=0;o<r.length;o++)x_e(o,t)}),kk.apply(this,arguments)}function x_e(t,e){var n,i,r;const o=[],s=null===(n=e.json.materials)||void 0===n?void 0:n[t],a=null==s||null===(i=s.pbrMetallicRoughness)||void 0===i?void 0:i.baseColorTexture;a&&Ry(e,t,a,o);const c=s?.emissiveTexture;c&&Ry(e,t,c,o);const l=s?.normalTexture;l&&Ry(e,t,l,o);const d=s?.occlusionTexture;d&&Ry(e,t,d,o);const h=null==s||null===(r=s.pbrMetallicRoughness)||void 0===r?void 0:r.metallicRoughnessTexture;h&&Ry(e,t,h,o)}function Ry(t,e,n,i){const r=function w_e(t,e){var n;const i=null===(n=t.extensions)||void 0===n?void 0:n[Rk],{texCoord:r=0}=t,{texCoord:o=r}=i;if(-1===e.findIndex(a=>{let[c,l]=a;return c===r&&l===o})){const a=function C_e(t){const{offset:e=[0,0],rotation:n=0,scale:i=[1,1]}=t,r=(new Ko).set(1,0,0,0,1,0,e[0],e[1],1),o=b_e.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),s=y_e.set(i[0],0,0,0,i[1],0,0,0,1);return r.multiplyRight(o).multiplyRight(s)}(i);return r!==o&&(t.texCoord=o),e.push([r,o]),{originalTexCoord:r,texCoord:o,matrix:a}}return null}(n,i);if(!r)return;const o=t.json.meshes||[];for(const s of o)for(const a of s.primitives){const c=a.material;Number.isFinite(c)&&e===c&&E_e(t,a,r)}}function E_e(t,e,n){const{originalTexCoord:i,texCoord:r,matrix:o}=n,s=e.attributes["TEXCOORD_".concat(i)];if(Number.isFinite(s)){var a;const l=null===(a=t.json.accessors)||void 0===a?void 0:a[s];if(l&&l.bufferView){var c;const d=null===(c=t.json.bufferViews)||void 0===c?void 0:c[l.bufferView];if(d){const{arrayBuffer:h,byteOffset:p}=t.buffers[d.buffer],m=(p||0)+(l.byteOffset||0)+(d.byteOffset||0),{ArrayType:x,length:D}=rk(l,d),G=EH[l.type],q=d.byteStride||AH[l.componentType]*G,ee=new Float32Array(D);for(let ve=0;ve<l.count;ve++){const Oe=new x(h,m+ve*q,2);$1.set(Oe[0],Oe[1],1),$1.transformByMatrix3(o),ee.set([$1[0],$1[1]],ve*G)}i===r?function A_e(t,e,n,i){t.componentType=5126,n.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=i.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(l,d,t.buffers,ee):function S_e(t,e,n,i,r){i.buffers.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength});const o=i.json.bufferViews;if(!o)return;o.push({buffer:i.buffers.length-1,byteLength:r.buffer.byteLength,byteOffset:0});const s=i.json.accessors;s&&(s.push({bufferView:o?.length-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes["TEXCOORD_".concat(t)]=s.length-1)}(r,l,e,t,ee)}}}}const lf="KHR_lights_punctual",T_e=lf;function M_e(t){return Ok.apply(this,arguments)}function Ok(){return Ok=zt(function*(t){const e=new Zs(t),{json:n}=e,i=e.getExtension(lf);i&&(e.json.lights=i.lights,e.removeExtension(lf));for(const r of n.nodes||[]){const o=e.getObjectExtension(r,lf);o&&(r.light=o.light),e.removeObjectExtension(r,lf)}}),Ok.apply(this,arguments)}function I_e(t){return Pk.apply(this,arguments)}function Pk(){return Pk=zt(function*(t){const e=new Zs(t),{json:n}=e;if(n.lights){const i=e.addExtension(lf);Ta(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,lf,i);delete e.json.lights}}),Pk.apply(this,arguments)}const ky="KHR_materials_unlit",D_e=ky;function R_e(t){return Nk.apply(this,arguments)}function Nk(){return Nk=zt(function*(t){const e=new Zs(t),{json:n}=e;for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,ky);e.removeExtension(ky)}),Nk.apply(this,arguments)}function k_e(t){const e=new Zs(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,ky,{}),e.addExtension(ky))}const Oy="KHR_techniques_webgl",O_e=Oy;function P_e(t){return Fk.apply(this,arguments)}function Fk(){return Fk=zt(function*(t){const e=new Zs(t),{json:n}=e,i=e.getExtension(Oy);if(i){const r=function F_e(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,o=new TextDecoder;return i.forEach(s=>{if(!Number.isFinite(s.bufferView))throw new Error("KHR_techniques_webgl: no shader code");s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView))}),n.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),r.forEach(s=>{s.program=n[s.program]}),r}(i,e);for(const o of n.materials||[]){const s=e.getObjectExtension(o,Oy);s&&(o.technique=Object.assign({},s,r[s.technique]),o.technique.values=L_e(o.technique,e)),e.removeObjectExtension(o,Oy)}e.removeExtension(Oy)}}),Fk.apply(this,arguments)}function N_e(t,e){return Lk.apply(this,arguments)}function Lk(){return(Lk=zt(function*(t,e){})).apply(this,arguments)}function L_e(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const SH="EXT_feature_metadata",B_e=SH;function j_e(t){return Bk.apply(this,arguments)}function Bk(){return Bk=zt(function*(t){!function U_e(t){var e;const n=t.getExtension(SH),i=null==n||null===(e=n.schema)||void 0===e?void 0:e.classes,r=n?.featureTables;if(n?.featureTextures&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),i&&r)for(const s in i){const a=i[s],c=z_e(r,s);c&&V_e(t,c,a)}}(new Zs(t))}),Bk.apply(this,arguments)}function V_e(t,e,n){for(const r in n.properties){var i;const s=null==e||null===(i=e.properties)||void 0===i?void 0:i[r];if(s){const c=H_e(t,n.properties[r],e.count,s);s.data=c}}}function H_e(t,e,n,i){let o=t.getTypedArrayForBufferView(i.bufferView);if("STRING"===e.type)o=function G_e(t,e,n){const i=[],r=new TextDecoder("utf8");let o=0;for(let a=0;a<n;a++){const c=e[4*(a+1)]-e[4*a],l=t.subarray(o,c+o),d=r.decode(l);i.push(d),o+=c}return i}(o,t.getTypedArrayForBufferView(i.stringOffsetBufferView),n);return o}function z_e(t,e){for(const n in t){const i=t[n];if(i.class===e)return i}return null}const CH=[E,b,R,A,_,y,M,P,U];function jk(){return jk=zt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=CH.filter(o=>TH(o.name,e));for(const o of i){var r;yield null===(r=o.decode)||void 0===r?void 0:r.call(o,t,e,n)}}),jk.apply(this,arguments)}function TH(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const Uk="KHR_binary_glTF",MH={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Y_e={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class K_e{constructor(){xe(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),xe(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function X_e(t){const e=new Zs(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,Uk);r&&Object.assign(i,r),e.removeObjectExtension(i,Uk)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(Uk)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in MH)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const o=i[r];o.id=o.id||r;const s=e[n].length;e[n].push(o),this.idToIndexMap[n][r]=s}}}_convertObjectIdsToArrayIndices(e){for(const n in MH)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:o}=n;for(const s in i)i[s]=this._convertIdToIndex(i[s],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const s=this._convertIdToIndex(i[r],r);i[r]=s}}_convertIdToIndex(e,n){const i=Y_e[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const o of e.materials){var n,i,r;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(n=o.values)||void 0===n?void 0:n.tex)||(null===(i=o.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=o.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===s);-1!==a&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}}const J_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Z_e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Q_e={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},ebe={10240:9729,10241:9986,10242:10497,10243:10497};class ibe{constructor(){xe(this,"baseUri",""),xe(this,"json",{}),xe(this,"buffers",[]),xe(this,"images",[])}postProcess(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{json:i,buffers:r=[],images:o=[],baseUri:s=""}=e;return Ta(i),this.baseUri=s,this.json=i,this.buffers=r,this.images=o,this._resolveTree(this.json,n),this.json}_resolveTree(e){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const o=this.getMesh(r);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const o in r)i.attributes[o]=this.getAccessor(r[o]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function tbe(t){return Z_e[t]}(e.componentType),e.components=function nbe(t){return J_e[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:o}=rk(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,o){const s=new Uint8Array(o*r);for(let a=0;a<o;a++){const c=n+a*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return s.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):ebe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return Q_e[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const IH=1735152710,Vk=12,X1=8,obe=1313821514,sbe=5130562,abe=0,cbe=1,lbe=0,ig=!0;function Hk(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),s=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(s),My(i,4)}function zk(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),My(i,4)}function Gk(){return Gk=zt(function*(t,e){var n,i,r,o;let a=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;(function _be(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function ube(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new DataView(t),{magic:r=IH}=n,o=i.getUint32(e,!1);return o===r||o===IH}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function Yme(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function Xme(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?K6(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?K6(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const s={};n=function hbe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=new DataView(e),o=function dbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),s=r.getUint32(n+4,ig),a=r.getUint32(n+8,ig);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),n+=Vk,t.version){case 1:return function fbe(t,e,n){ud(t.header.byteLength>Vk+X1);const i=e.getUint32(n+0,ig),r=e.getUint32(n+4,ig);return n+=X1,ud(r===lbe),Hk(t,e,n,i),(n+=i)+zk(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function pbe(t,e,n,i){return ud(t.header.byteLength>Vk+X1),function mbe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,ig),o=e.getUint32(n+4,ig);switch(n+=X1,o){case obe:Hk(t,e,n,r);break;case sbe:zk(t,e,n,r);break;case abe:i.strict||Hk(t,e,n,r);break;case cbe:i.strict||zk(t,e,n,r)}n+=My(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,i={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(s,e,n,i.glb),Ta("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),t._glb=s,t.json=s.json}else Ta(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:s}=t._glb;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a),function q_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(new K_e).normalize(t,e)}(t,{normalize:null==a||null===(n=a.gltf)||void 0===n?void 0:n.normalize}),function W_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=CH.filter(o=>TH(o.name,e));for(const o of i){var r;null===(r=o.preprocess)||void 0===r||r.call(o,t,e,n)}}(t,a,c);const l=[];if(null!=a&&null!==(i=a.gltf)&&void 0!==i&&i.loadBuffers&&t.json.buffers&&(yield function bbe(t,e,n){return Wk.apply(this,arguments)}(t,a,c)),null!=a&&null!==(r=a.gltf)&&void 0!==r&&r.loadImages){const h=function ybe(t,e,n){return $k.apply(this,arguments)}(t,a,c);l.push(h)}const d=function $_e(t){return jk.apply(this,arguments)}(t,a,c);return l.push(d),yield Promise.all(l),null!=a&&null!==(o=a.gltf)&&void 0!==o&&o.postProcess?function rbe(t,e){return(new ibe).postProcess(t,e)}(t,a):t}),Gk.apply(this,arguments)}function Wk(){return Wk=zt(function*(t,e,n){const i=t.json.buffers||[];for(let s=0;s<i.length;++s){const a=i[s];if(a.uri){var r,o;const{fetch:c}=n;Ta(c);const l=q6(a.uri,e),d=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,l),h=yield null==d||null===(o=d.arrayBuffer)||void 0===o?void 0:o.call(d);t.buffers[s]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[s]&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),Wk.apply(this,arguments)}function $k(){return $k=zt(function*(t,e,n){const i=function vbe(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],o=[];for(const s of i)o.push(xbe(t,r[s],s,e,n));return yield Promise.all(o)}),$k.apply(this,arguments)}function xbe(t,e,n,i,r){return Xk.apply(this,arguments)}function Xk(){return Xk=zt(function*(t,e,n,i,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=q6(e.uri,i);a=yield(yield o(l)).arrayBuffer(),e.bufferView={data:a}}if(Number.isFinite(e.bufferView)){const l=function J6(t,e,n){const i=t.bufferViews[n];Ta(i);const o=e[i.buffer];return Ta(o),new Uint8Array(o.arrayBuffer,(i.byteOffset||0)+o.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=K8(l.buffer,l.byteOffset,l.byteLength)}Ta(a,"glTF image has no data");let c=yield s(a,[RV,$me],{mimeType:e.mimeType,basis:i.basis||{format:Y6()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}),Xk.apply(this,arguments)}const rg={name:"glTF",id:"gltf",module:"gltf",version:"3.4.11",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function wbe(t){return Yk.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function Yk(){return Yk=zt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;e={...rg.options,...e},e.gltf={...rg.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function gbe(t,e){return Gk.apply(this,arguments)}({},t,i,e,n)}),Yk.apply(this,arguments)}function Kk(){return Kk=zt(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function Abe(t){return qk.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),Kk.apply(this,arguments)}function qk(){return qk=zt(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),qk.apply(this,arguments)}const DH=[255,255,255,255],Tbe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:DH},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[rg]};class Jk extends tf{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){const e=[D1,R1];return"pbr"===this.props._lighting&&e.push(A6),super.getShaders({vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    geometry.normal = project_normal(normal);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:DH,transition:!0},instanceModelMatrix:y6})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof Zm)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function Eme(t,e,n){const i=new wme(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...c},function Ebe(t){return Kk.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(bi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},o=e.getScene(i,r),s=e.getAnimator(i,r);o instanceof Zm?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&bi.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(o=>{const s=i[o];if("*"===o)r.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){const a=Number(o);a>=0&&a<r.length?Object.assign(r[a],s):bi.warn("animation ".concat(o," not found"))()}else{const a=r.find(({name:c})=>c===o);a?Object.assign(a,s):bi.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Zm&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!fi(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:p})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:v6(r,l),sceneModelMatrix:p,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}xe(Jk,"defaultProps",Tbe),xe(Jk,"layerName","ScenegraphLayer");class Mbe extends Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("sphere-geometry")}=e,{indices:i,attributes:r}=function Ibe(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const s=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(n+1);if("number"==typeof i){const G=i;i=(q,ee,ve,Oe,Xe)=>G}const h=new Float32Array(3*d),p=new Float32Array(3*d),m=new Float32Array(2*d),D=new(d>65535?Uint32Array:Uint16Array)(e*n*6);for(let G=0;G<=e;G++)for(let q=0;q<=n;q++){const ee=q/n,ve=G/e,Oe=q+G*(n+1),Xe=2*Oe,rt=3*Oe,nt=l*ee,ht=s*ve,gt=Math.sin(nt),yt=Math.cos(nt),kt=Math.sin(ht),vt=yt*kt,Ft=Math.cos(ht),Ot=gt*kt,An=i(vt,Ft,Ot,ee,ve);h[rt+0]=An*vt,h[rt+1]=An*Ft,h[rt+2]=An*Ot,p[rt+0]=vt,p[rt+1]=Ft,p[rt+2]=Ot,m[Xe+0]=ee,m[Xe+1]=1-ve}const F=n+1;for(let G=0;G<n;G++)for(let q=0;q<e;q++){const ee=6*(G*e+q);D[ee+0]=q*F+G,D[ee+1]=q*F+G+1,D[ee+2]=(q+1)*F+G,D[ee+3]=(q+1)*F+G,D[ee+4]=q*F+G+1,D[ee+5]=(q+1)*F+G+1}return{indices:{size:1,value:D},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:p},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const Dbe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class RH extends Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("truncated-code-geometry")}=e,{indices:i,attributes:r}=function Rbe(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),d=(r+1)*(o+1+l),h=Math.atan2(e-n,i),p=Math.sin,m=Math.cos,x=Math.PI,D=m(h),F=p(h),G=a?-2:0,q=o+(c?2:0),ee=r+1,ve=new Uint16Array(r*(o+l)*6),Oe=Dbe[s],Xe=new Float32Array(3*d),rt=new Float32Array(3*d),nt=new Float32Array(2*d);let ht=0,gt=0;for(let yt=G;yt<=q;yt++){let vt,kt=yt/o,mt=i*kt;yt<0?(mt=0,kt=1,vt=e):yt>o?(mt=i,kt=1,vt=n):vt=e+yt/o*(n-e),(-2===yt||yt===o+2)&&(vt=0,kt=0),mt-=i/2;for(let Ft=0;Ft<ee;Ft++){const Ot=p(Ft*x*2/r),An=m(Ft*x*2/r);Xe[ht+Oe[0]]=Ot*vt,Xe[ht+Oe[1]]=mt,Xe[ht+Oe[2]]=An*vt,rt[ht+Oe[0]]=yt<0||yt>o?0:Ot*D,rt[ht+Oe[1]]=yt<0?-1:yt>o?1:F,rt[ht+Oe[2]]=yt<0||yt>o?0:An*D,nt[gt+0]=Ft/r,nt[gt+1]=kt,gt+=2,ht+=3}}for(let yt=0;yt<o+l;yt++)for(let kt=0;kt<r;kt++){const mt=6*(yt*r+kt);ve[mt+0]=ee*(yt+0)+0+kt,ve[mt+1]=ee*(yt+0)+1+kt,ve[mt+2]=ee*(yt+1)+1+kt,ve[mt+3]=ee*(yt+0)+0+kt,ve[mt+4]=ee*(yt+1)+1+kt,ve[mt+5]=ee*(yt+1)+0+kt}return{indices:ve,attributes:{POSITION:{size:3,value:Xe},NORMAL:{size:3,value:rt},TEXCOORD_0:{size:2,value:nt}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class kbe extends RH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class Obe extends RH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const Pbe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Nbe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Fbe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Lbe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Bbe={POSITION:{size:3,value:new Float32Array(Nbe)},NORMAL:{size:3,value:new Float32Array(Fbe)},TEXCOORD_0:{size:2,value:new Float32Array(Lbe)}};class jbe extends Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(Pbe)},attributes:{...Bbe,...e.attributes}})}}class Oc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new ye);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new ye);const i=this.elements,r=e.x,o=e.y,s=e.z;return n.x=i[0]*r+i[1]*o+i[2]*s,n.y=i[3]*r+i[4]*o+i[5]*s,n.z=i[6]*r+i[7]*o+i[8]*s,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new Oc);const i=this.elements,r=e.elements,o=n.elements,s=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],p=i[6],m=i[7],x=i[8],D=r[0],F=r[1],G=r[2],q=r[3],ee=r[4],ve=r[5],Oe=r[6],Xe=r[7],rt=r[8];return o[0]=s*D+a*q+c*Oe,o[1]=s*F+a*ee+c*Xe,o[2]=s*G+a*ve+c*rt,o[3]=l*D+d*q+h*Oe,o[4]=l*F+d*ee+h*Xe,o[5]=l*G+d*ve+h*rt,o[6]=p*D+m*q+x*Oe,o[7]=p*F+m*ee+x*Xe,o[8]=p*G+m*ve+x*rt,n}scale(e,n){void 0===n&&(n=new Oc);const i=this.elements,r=n.elements;for(let o=0;3!==o;o++)r[3*o+0]=e.x*i[3*o+0],r[3*o+1]=e.y*i[3*o+1],r[3*o+2]=e.z*i[3*o+2];return n}solve(e,n){void 0===n&&(n=new ye);const o=[];let s,a;for(s=0;s<12;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+4*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3;const l=c;let d,p;do{if(s=l-c,0===o[s+4*s])for(a=s+1;a<l;a++)if(0!==o[s+4*a]){d=4;do{p=4-d,o[p+4*s]+=o[p+4*a]}while(--d);break}if(0!==o[s+4*s])for(a=s+1;a<l;a++){const m=o[s+4*a]/o[s+4*s];d=4;do{p=4-d,o[p+4*a]=p<=s?0:o[p+4*a]-o[p+4*s]*m}while(--d)}}while(--c);if(n.z=o[11]/o[10],n.y=(o[7]-o[6]*n.z)/o[5],n.x=(o[3]-o[2]*n.z-o[1]*n.y)/o[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Oc);const r=Ube;let o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)r[o+6*s]=this.elements[o+3*s];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(o=c-a,0===r[o+6*o])for(s=o+1;s<c;s++)if(0!==r[o+6*s]){l=6;do{h=6-l,r[h+6*o]+=r[h+6*s]}while(--l);break}if(0!==r[o+6*o])for(s=o+1;s<c;s++){const p=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=h<=o?0:r[h+6*s]-r[h+6*o]*p}while(--l)}}while(--a);o=2;do{s=o-1;do{const p=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]-r[h+6*o]*p}while(--l)}while(s--)}while(--o);o=2;do{const p=1/r[o+6*o];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]*p}while(--l)}while(o--);o=2;do{s=2;do{if(h=r[3+s+6*o],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,h)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,o=e.w,s=n+n,a=i+i,c=r+r,l=n*s,d=n*a,h=n*c,p=i*a,m=i*c,x=r*c,D=o*s,F=o*a,G=o*c,q=this.elements;return q[0]=1-(p+x),q[1]=d-G,q[2]=h+F,q[3]=d+G,q[4]=1-(l+x),q[5]=m-D,q[6]=h-F,q[7]=m+D,q[8]=1-(l+p),this}transpose(e){void 0===e&&(e=new Oc);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const Ube=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class ye{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return n.x=a*o-c*r,n.y=c*i-s*o,n.z=s*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new ye(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new ye(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new Oc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const o=1/r;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new ye);const n=this.x,i=this.y,r=this.z;let o=Math.sqrt(n*n+i*i+r*r);return o>0?(o=1/o,e.x=n*o,e.y=i*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-n)*(o-n)+(s-i)*(s-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return(o-n)*(o-n)+(s-i)*(s-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new ye);const r=this.y,o=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*o,n}vmul(e,n){return void 0===n&&(n=new ye),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new ye),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new ye),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=Vbe,o=1/i;r.set(this.x*o,this.y*o,this.z*o);const s=Hbe;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,o=this.y,s=this.z;i.x=r+(e.x-r)*n,i.y=o+(e.y-o)*n,i.z=s+(e.z-s)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(kH),kH.almostEquals(e,n)}clone(){return new ye(this.x,this.y,this.z)}}ye.ZERO=new ye(0,0,0),ye.UNIT_X=new ye(1,0,0),ye.UNIT_Y=new ye(0,1,0),ye.UNIT_Z=new ye(0,0,1);const Vbe=new ye,Hbe=new ye,kH=new ye;class Qi{constructor(e){void 0===e&&(e={}),this.lowerBound=new ye,this.upperBound=new ye,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const o=this.lowerBound,s=this.upperBound,a=i;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,OH),l=OH),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return n&&(n.vadd(o,o),n.vadd(s,s)),r&&(o.x-=r,o.y-=r,o.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new Qi).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return(r.x<=i.x&&i.x<=o.x||n.x<=o.x&&o.x<=i.x)&&(r.y<=i.y&&i.y<=o.y||n.y<=o.y&&o.y<=i.y)&&(r.z<=i.z&&i.z<=o.z||n.z<=o.z&&o.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return n.x<=r.x&&i.x>=o.x&&n.y<=r.y&&i.y>=o.y&&n.z<=r.z&&i.z>=o.z}getCorners(e,n,i,r,o,s,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),n.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),o.set(d.x,l.y,d.z),s.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,n){const i=PH;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const m=i[p];e.pointToLocal(m,m)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=PH;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const m=i[p];e.pointToWorld(m,m)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,o=1/n.y,s=1/n.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*o,d=(this.upperBound.y-i.y)*o,h=(this.lowerBound.z-i.z)*s,p=(this.upperBound.z-i.z)*s,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,p)),x=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,p));return!(x<0||m>x)}}const OH=new ye,PH=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class zbe{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}return this}}class Fr{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new ye),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=Gbe;e.tangents(i,Wbe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Fr);const i=this.x,r=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return n.x=i*d+s*a+r*l-o*c,n.y=r*d+s*c+o*a-i*l,n.z=o*d+s*l+i*c-r*a,n.w=s*d-i*a-r*c-o*l,n}inverse(e){void 0===e&&(e=new Fr);const n=this.x,i=this.y,r=this.z,o=this.w;this.conjugate(e);const s=1/(n*n+i*i+r*r+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new Fr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*o-c*r,h=l*r+c*i-s*o,p=l*o+s*r-a*i,m=-s*i-a*r-c*o;return n.x=d*l+m*-s+h*-c-p*-a,n.y=h*l+m*-a+p*-s-d*-c,n.z=p*l+m*-c+d*-a-h*-s,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,o;void 0===n&&(n="YZX");const s=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const d=s*a+c*l;if(d>.499&&(i=2*Math.atan2(s,l),r=Math.PI/2,o=0),d<-.499&&(i=-2*Math.atan2(s,l),r=-Math.PI/2,o=0),void 0===i){const h=s*s,m=c*c;i=Math.atan2(2*a*l-2*s*c,1-a*a*2-2*m),r=Math.asin(2*d),o=Math.atan2(2*s*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=o}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const o=Math.cos(e/2),s=Math.cos(n/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(n/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"YXZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"ZXY"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"ZYX"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"YZX"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a-c*l*d):"XZY"===r&&(this.x=c*s*a-o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a+c*l*d),this}clone(){return new Fr(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Fr);const r=this.x,o=this.y,s=this.z,a=this.w;let p,m,x,D,F,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+o*l+s*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(p=Math.acos(m),x=Math.sin(p),D=Math.sin((1-n)*p)/x,F=Math.sin(n*p)/x):(D=1-n,F=n),i.x=D*r+F*c,i.y=D*o+F*l,i.z=D*s+F*d,i.w=D*a+F*h,i}integrate(e,n,i,r){void 0===r&&(r=new Fr);const o=e.x*i.x,s=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,p=.5*n;return r.x+=p*(o*h+s*d-a*l),r.y+=p*(s*h+a*c-o*d),r.z+=p*(a*h+o*l-s*c),r.w+=p*(-o*c-s*l-a*d),r}}const Gbe=new ye,Wbe=new ye,$be={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let dn=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=$be,t})();class Ti{constructor(e){void 0===e&&(e={}),this.position=new ye,this.quaternion=new Fr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Ti.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Ti.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),i.vsub(e,r),n.conjugate(FH),FH.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new ye),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new ye),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const FH=new Fr;class df extends dn{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:o,boundingSphereRadius:s}=e;super({type:dn.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new ye;for(let o=0;o!==e.length;o++){const s=e[o],a=s.length;for(let c=0;c!==a;c++){n[s[c]].vsub(n[s[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new ye;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];df.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const o=new ye,s=new ye;n.vsub(e,s),i.vsub(n,o),o.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,o,s,a,c,l){const d=new ye;let h=-1,p=-Number.MAX_VALUE;for(let x=0;x<i.faces.length;x++){d.copy(i.faceNormals[x]),o.vmult(d,d);const D=d.dot(s);D>p&&(p=D,h=x)}const m=[];for(let x=0;x<i.faces[h].length;x++){const D=i.vertices[i.faces[h][x]],F=new ye;F.copy(D),o.vmult(F,F),r.vadd(F,F),m.push(F)}h>=0&&this.clipFaceAgainstHull(s,e,n,m,a,c,l)}findSeparatingAxis(e,n,i,r,o,s,a,c){const l=new ye,d=new ye,h=new ye,p=new ye,m=new ye,x=new ye;let D=Number.MAX_VALUE;const F=this;if(F.uniqueAxes)for(let G=0;G!==F.uniqueAxes.length;G++){i.vmult(F.uniqueAxes[G],l);const q=F.testSepAxis(l,e,n,i,r,o);if(!1===q)return!1;q<D&&(D=q,s.copy(l))}else{const G=a?a.length:F.faces.length;for(let q=0;q<G;q++){l.copy(F.faceNormals[a?a[q]:q]),i.vmult(l,l);const ve=F.testSepAxis(l,e,n,i,r,o);if(!1===ve)return!1;ve<D&&(D=ve,s.copy(l))}}if(e.uniqueAxes)for(let G=0;G!==e.uniqueAxes.length;G++){o.vmult(e.uniqueAxes[G],d);const q=F.testSepAxis(d,e,n,i,r,o);if(!1===q)return!1;q<D&&(D=q,s.copy(d))}else{const G=c?c.length:e.faces.length;for(let q=0;q<G;q++){d.copy(e.faceNormals[c?c[q]:q]),o.vmult(d,d);const ve=F.testSepAxis(d,e,n,i,r,o);if(!1===ve)return!1;ve<D&&(D=ve,s.copy(d))}}for(let G=0;G!==F.uniqueEdges.length;G++){i.vmult(F.uniqueEdges[G],p);for(let q=0;q!==e.uniqueEdges.length;q++)if(o.vmult(e.uniqueEdges[q],m),p.cross(m,x),!x.almostZero()){x.normalize();const ee=F.testSepAxis(x,e,n,i,r,o);if(!1===ee)return!1;ee<D&&(D=ee,s.copy(x))}}return r.vsub(n,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,n,i,r,o,s){df.project(this,e,i,r,Zk),df.project(n,e,o,s,Qk);const c=Zk[0],l=Zk[1],d=Qk[0],h=Qk[1];if(c<h||d<l)return!1;const p=c-h,m=d-l;return p<m?p:m}calculateLocalInertia(e,n){const i=new ye,r=new ye;this.computeLocalAABB(r,i);const o=i.x-r.x,s=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*s*2*s+2*a*2*a),n.y=1/12*e*(2*o*2*o+2*a*2*a),n.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,o,s,a){const c=new ye,l=new ye,d=new ye,h=new ye,p=new ye,m=new ye,x=new ye,D=new ye,F=this,q=r,ee=[];let ve=-1,Oe=Number.MAX_VALUE;for(let gt=0;gt<F.faces.length;gt++){c.copy(F.faceNormals[gt]),i.vmult(c,c);const yt=c.dot(e);yt<Oe&&(Oe=yt,ve=gt)}if(ve<0)return;const Xe=F.faces[ve];Xe.connectedFaces=[];for(let gt=0;gt<F.faces.length;gt++)for(let yt=0;yt<F.faces[gt].length;yt++)-1!==Xe.indexOf(F.faces[gt][yt])&&gt!==ve&&-1===Xe.connectedFaces.indexOf(gt)&&Xe.connectedFaces.push(gt);const rt=Xe.length;for(let gt=0;gt<rt;gt++){const yt=F.vertices[Xe[gt]];yt.vsub(F.vertices[Xe[(gt+1)%rt]],l),d.copy(l),i.vmult(d,d),n.vadd(d,d),h.copy(this.faceNormals[ve]),i.vmult(h,h),n.vadd(h,h),d.cross(h,p),p.negate(p),m.copy(yt),i.vmult(m,m),n.vadd(m,m);const mt=Xe.connectedFaces[gt];x.copy(this.faceNormals[mt]);const vt=this.getPlaneConstantOfFace(mt);D.copy(x),i.vmult(D,D);const Ft=vt-D.dot(n);for(this.clipFaceAgainstPlane(q,ee,D,Ft);q.length;)q.shift();for(;ee.length;)q.push(ee.shift())}x.copy(this.faceNormals[ve]);const nt=this.getPlaneConstantOfFace(ve);D.copy(x),i.vmult(D,D);const ht=nt-D.dot(n);for(let gt=0;gt<q.length;gt++){let yt=D.dot(q[gt])+ht;yt<=o&&(console.log(`clamped: depth=${yt} to minDist=${o}`),yt=o),yt<=s&&yt<=1e-6&&a.push({point:q[gt],normal:D,depth:yt})}}clipFaceAgainstPlane(e,n,i,r){let o,s;const a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];o=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],s=i.dot(l)+r,o<0)if(s<0){const h=new ye;h.copy(l),n.push(h)}else{const h=new ye;c.lerp(l,o/(o-s),h),n.push(h)}else if(s<0){const h=new ye;c.lerp(l,o/(o-s),h),n.push(h),n.push(l)}c=l,o=s}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new ye);const i=this.vertices,r=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)n.vmult(i[o],r[o]),e.vadd(r[o],r[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const o=i[r];o.x<e.x?e.x=o.x:o.x>n.x&&(n.x=o.x),o.y<e.y?e.y=o.y:o.y>n.y&&(n.y=o.y),o.z<e.z?e.z=o.z:o.z>n.z&&(n.z=o.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new ye);const i=this.faceNormals,r=this.worldFaceNormals;for(let o=0;o!==n;o++)e.vmult(i[o],r[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const o=this.vertices;let s,a,c,l,d,h,p=new ye;for(let m=0;m<o.length;m++)p.copy(o[m]),n.vmult(p,p),e.vadd(p,p),(void 0===s||p.x<s)&&(s=p.x),(void 0===l||p.x>l)&&(l=p.x),(void 0===a||p.y<a)&&(a=p.y),(void 0===d||p.y>d)&&(d=p.y),(void 0===c||p.z<c)&&(c=p.z),(void 0===h||p.z>h)&&(h=p.z);i.set(s,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new ye);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let o=0;o<i;o++){const s=r[o];n.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){const s=this.faceNormals[o];n.vmult(s,s)}}if(e)for(let o=0;o<i;o++){const s=r[o];s.vadd(e,s)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,s=new ye;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=n[i[a][0]],d=new ye;e.vsub(l,d);const h=c.dot(d),p=new ye;s.vsub(l,p);const m=c.dot(p);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,n,i,r,o){const s=e.vertices.length,a=Ybe;let c=0,l=0;const d=Kbe,h=e.vertices;d.setZero(),Ti.vectorToLocalFrame(i,r,n,a),Ti.pointToLocalFrame(i,r,d,d);const p=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<s;m++){const x=h[m].dot(a);x>c&&(c=x),x<l&&(l=x)}if(l-=p,c-=p,l>c){const m=l;l=c,c=m}o[0]=c,o[1]=l}}const Zk=[],Qk=[],Ybe=(new ye,new ye),Kbe=new ye;class Y1 extends dn{constructor(e){super({type:dn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=ye,o=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new df({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new ye),Y1.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let o=0;o!==i.length;o++)n.vmult(i[o],i[o]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,o=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let s=0;s<o.length;s++)Lu.set(o[s][0],o[s][1],o[s][2]),n.vmult(Lu,Lu),e.vadd(Lu,Lu),i(Lu.x,Lu.y,Lu.z)}calculateWorldAABB(e,n,i,r){const o=this.halfExtents;Il[0].set(o.x,o.y,o.z),Il[1].set(-o.x,o.y,o.z),Il[2].set(-o.x,-o.y,o.z),Il[3].set(-o.x,-o.y,-o.z),Il[4].set(o.x,-o.y,-o.z),Il[5].set(o.x,o.y,-o.z),Il[6].set(-o.x,o.y,-o.z),Il[7].set(o.x,-o.y,o.z);const s=Il[0];n.vmult(s,s),e.vadd(s,s),r.copy(s),i.copy(s);for(let a=1;a<8;a++){const c=Il[a];n.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const Lu=new ye,Il=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class un extends zbe{constructor(e){void 0===e&&(e={}),super(),this.id=un.idCounter++,this.index=-1,this.world=null,this.vlambda=new ye,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new ye,this.previousPosition=new ye,this.interpolatedPosition=new ye,this.initPosition=new ye,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new ye,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new ye,this.force=new ye;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?un.STATIC:un.DYNAMIC,typeof e.type==typeof un.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=un.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new ye,this.quaternion=new Fr,this.initQuaternion=new Fr,this.previousQuaternion=new Fr,this.interpolatedQuaternion=new Fr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new ye,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new ye,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new ye,this.invInertia=new ye,this.invInertiaWorld=new Oc,this.invMassSolve=0,this.invInertiaSolve=new ye,this.invInertiaWorldSolve=new Oc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new ye(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new ye(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new Qi,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new ye,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=un.AWAKE,this.wakeUpAfterNarrowphase=!1,e===un.SLEEPING&&this.dispatchEvent(un.wakeupEvent)}sleep(){this.sleepState=un.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===un.AWAKE&&i<r?(this.sleepState=un.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(un.sleepyEvent)):n===un.SLEEPY&&i>r?this.wakeUp():n===un.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(un.sleepEvent))}}updateSolveMassProperties(){this.sleepState===un.SLEEPING||this.type===un.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new ye),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new ye,o=new Fr;return n&&r.copy(n),i&&o.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let o=0;o!==i;o++){const s=e[o];s.updateBoundingSphereRadius();const a=n[o].length(),c=s.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,o=qbe,s=Jbe,a=this.quaternion,c=this.aabb,l=Zbe;for(let d=0;d!==r;d++){const h=e[d];a.vmult(n[d],o),o.vadd(this.position,o),a.mult(i[d],s),h.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=Qbe,r=eye;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new ye),this.type!==un.DYNAMIC)return;this.sleepState===un.SLEEPING&&this.wakeUp();const i=nye;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new ye),this.type!==un.DYNAMIC)return;const i=iye,r=rye;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===un.DYNAMIC&&(this.sleepState===un.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==un.DYNAMIC)return;this.sleepState===un.SLEEPING&&this.wakeUp();const i=n,r=oye;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const o=sye;i.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==un.DYNAMIC)return;const i=aye,r=cye;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=lye;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Y1.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new ye;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==un.DYNAMIC&&this.type!==un.KINEMATIC||this.sleepState===un.SLEEPING)return;const r=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,p=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*p.x,r.y+=a.y*m*p.y,r.z+=a.z*m*p.z;const x=h.elements,D=this.angularFactor,F=c.x*D.x,G=c.y*D.y,q=c.z*D.z;o.x+=e*(x[0]*F+x[1]*G+x[2]*q),o.y+=e*(x[3]*F+x[4]*G+x[5]*q),o.z+=e*(x[6]*F+x[7]*G+x[8]*q),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}un.idCounter=0,un.COLLIDE_EVENT_NAME="collide",un.DYNAMIC=1,un.STATIC=2,un.KINEMATIC=4,un.AWAKE=0,un.SLEEPY=1,un.SLEEPING=2,un.wakeupEvent={type:"wakeup"},un.sleepyEvent={type:"sleepy"},un.sleepEvent={type:"sleep"};const qbe=new ye,Jbe=new Fr,Zbe=new Qi,Qbe=new Oc,eye=new Oc,nye=(new Oc,new ye),iye=new ye,rye=new ye,oye=new ye,sye=new ye,aye=new ye,cye=new ye,lye=new ye;new ye,new ye,new Fr,new ye,new ye,new ye,new ye;class Py{constructor(){this.rayFromWorld=new ye,this.rayToWorld=new ye,this.hitNormalWorld=new ye,this.hitPointWorld=new ye,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=o,this.body=s,this.distance=a}}let LH,BH,jH,UH,VH,HH,zH;LH=dn.types.SPHERE,BH=dn.types.PLANE,jH=dn.types.BOX,UH=dn.types.CYLINDER,VH=dn.types.CONVEXPOLYHEDRON,HH=dn.types.HEIGHTFIELD,zH=dn.types.TRIMESH;class Zr{get[LH](){return this._intersectSphere}get[BH](){return this._intersectPlane}get[jH](){return this._intersectBox}get[UH](){return this._intersectConvex}get[VH](){return this._intersectConvex}get[HH](){return this._intersectHeightfield}get[zH](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new ye),void 0===n&&(n=new ye),this.from=e.clone(),this.to=n.clone(),this.direction=new ye,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Zr.ANY,this.result=new Py,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||Zr.ANY,this.result=n.result||new Py,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(GH),iO.length=0,e.broadphase.aabbQuery(e,GH,iO),this.intersectBodies(iO),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=gye,o=_ye;for(let s=0,a=e.shapes.length;s<a;s++){const c=e.shapes[s];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],r),r.vadd(e.position,r),this.intersectShape(c,o,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function Oye(t,e,n){n.vsub(t,uf);const i=uf.dot(e);return e.scale(i,q1),q1.vadd(t,q1),n.distanceTo(q1)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,o){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,o)}_intersectPlane(e,n,i,r,o){const s=this.from,a=this.to,c=this.direction,l=new ye(0,0,1);n.vmult(l,l);const d=new ye;s.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||s.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const x=new ye,D=new ye,F=new ye;s.vsub(i,x);const G=-l.dot(x)/m;c.scale(G,D),s.vadd(D,F),this.reportIntersection(l,F,o,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,o=this.from;n.x=Math.min(r.x,o.x),n.y=Math.min(r.y,o.y),n.z=Math.min(r.z,o.z),i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.z=Math.max(r.z,o.z)}_intersectHeightfield(e,n,i,r,o){const s=bye;s.from.copy(this.from),s.to.copy(this.to),Ti.pointToLocalFrame(i,n,s.from,s.from),Ti.pointToLocalFrame(i,n,s.to,s.to),s.updateDirection();const a=yye;let c,l,d,h;c=l=0,d=h=e.data.length-1;const p=new Qi;s.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let x=l;x<h;x++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,x,p),p.overlapsRay(s)){if(e.getConvexTrianglePillar(m,x,!1),Ti.pointToWorldFrame(i,n,e.pillarOffset,K1),this._intersectConvex(e.pillarConvex,n,K1,r,o,WH),this.result.shouldStop)return;e.getConvexTrianglePillar(m,x,!0),Ti.pointToWorldFrame(i,n,e.pillarOffset,K1),this._intersectConvex(e.pillarConvex,n,K1,r,o,WH)}}}_intersectSphere(e,n,i,r,o){const s=this.from,a=this.to,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,d=2*((a.x-s.x)*(s.x-i.x)+(a.y-s.y)*(s.y-i.y)+(a.z-s.z)*(s.z-i.z)),p=d**2-4*l*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-e.radius**2),m=vye,x=xye;if(!(p<0))if(0===p)s.lerp(a,p,m),m.vsub(i,x),x.normalize(),this.reportIntersection(x,m,o,r,-1);else{const D=(-d-Math.sqrt(p))/(2*l),F=(-d+Math.sqrt(p))/(2*l);if(D>=0&&D<=1&&(s.lerp(a,D,m),m.vsub(i,x),x.normalize(),this.reportIntersection(x,m,o,r,-1)),this.result.shouldStop)return;F>=0&&F<=1&&(s.lerp(a,F,m),m.vsub(i,x),x.normalize(),this.reportIntersection(x,m,o,r,-1))}}_intersectConvex(e,n,i,r,o,s){const a=wye,c=$H,l=s&&s.faceList||null,d=e.faces,h=e.vertices,p=e.faceNormals,m=this.direction,x=this.from,F=x.distanceTo(this.to),G=l?l.length:d.length,q=this.result;for(let ee=0;!q.shouldStop&&ee<G;ee++){const ve=l?l[ee]:ee,Oe=d[ve],Xe=p[ve],rt=n,nt=i;c.copy(h[Oe[0]]),rt.vmult(c,c),c.vadd(nt,c),c.vsub(x,c),rt.vmult(Xe,a);const ht=m.dot(a);if(Math.abs(ht)<this.precision)continue;const gt=a.dot(c)/ht;if(!(gt<0)){m.scale(gt,Qs),Qs.vadd(x,Qs),Pc.copy(h[Oe[0]]),rt.vmult(Pc,Pc),nt.vadd(Pc,Pc);for(let yt=1;!q.shouldStop&&yt<Oe.length-1;yt++){Dl.copy(h[Oe[yt]]),Rl.copy(h[Oe[yt+1]]),rt.vmult(Dl,Dl),rt.vmult(Rl,Rl),nt.vadd(Dl,Dl),nt.vadd(Rl,Rl);const kt=Qs.distanceTo(x);!Zr.pointInTriangle(Qs,Pc,Dl,Rl)&&!Zr.pointInTriangle(Qs,Dl,Pc,Rl)||kt>F||this.reportIntersection(a,Qs,o,r,ve)}}}}_intersectTrimesh(e,n,i,r,o,s){const a=Sye,c=Rye,l=kye,d=$H,h=Cye,p=Tye,m=Mye,x=Dye,D=Iye,F=e.indices,G=this.from,q=this.to,ee=this.direction;l.position.copy(i),l.quaternion.copy(n),Ti.vectorToLocalFrame(i,n,ee,h),Ti.pointToLocalFrame(i,n,G,p),Ti.pointToLocalFrame(i,n,q,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,m.vsub(p,h),h.normalize();const ve=p.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let Oe=0,Xe=c.length;!this.result.shouldStop&&Oe!==Xe;Oe++){const rt=c[Oe];e.getNormal(rt,a),e.getVertex(F[3*rt],Pc),Pc.vsub(p,d);const nt=h.dot(a),ht=a.dot(d)/nt;if(ht<0)continue;h.scale(ht,Qs),Qs.vadd(p,Qs),e.getVertex(F[3*rt+1],Dl),e.getVertex(F[3*rt+2],Rl);const gt=Qs.distanceSquared(p);!Zr.pointInTriangle(Qs,Dl,Pc,Rl)&&!Zr.pointInTriangle(Qs,Pc,Dl,Rl)||gt>ve||(Ti.vectorToWorldFrame(n,a,D),Ti.pointToWorldFrame(i,n,Qs,x),this.reportIntersection(D,x,o,r,rt))}c.length=0}reportIntersection(e,n,i,r,o){const s=this.from,a=this.to,c=s.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case Zr.ALL:this.hasHit=!0,l.set(s,a,e,n,i,r,c),l.hasHit=!0,this.callback(l);break;case Zr.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,i,r,c));break;case Zr.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,uf),i.vsub(n,Ny),e.vsub(n,rO);const o=uf.dot(uf),s=uf.dot(Ny),a=uf.dot(rO),c=Ny.dot(Ny),l=Ny.dot(rO);let d,h;return(d=c*a-s*l)>=0&&(h=o*l-s*a)>=0&&d+h<o*c-s*s}}Zr.CLOSEST=1,Zr.ANY=2,Zr.ALL=4;const GH=new Qi,iO=[],Ny=new ye,rO=new ye,gye=new ye,_ye=new Fr,Qs=new ye,Pc=new ye,Dl=new ye,Rl=new ye;new ye,new Py;const WH={faceList:[0]},K1=new ye,bye=new Zr,yye=[],vye=new ye,xye=new ye,wye=new ye,$H=(new ye,new ye,new ye),Sye=new ye,Cye=new ye,Tye=new ye,Mye=new ye,Iye=new ye,Dye=new ye;new Qi;const Rye=[],kye=new Ti,uf=new ye,q1=new ye;new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Zr,new ye,new ye,new ye,new ye(1,0,0),new ye(0,1,0),new ye(0,0,1),new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Qi,new ye,new Qi,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Qi,new ye,new Ti,new Qi,new ye,new ye,new ye,new ye,new ye,new Fr,new Fr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Qi,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Fr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Qi,new Zr;const ho=globalThis.performance||{};if(!ho.now){let t=Date.now();ho.timing&&ho.timing.navigationStart&&(t=ho.timing.navigationStart),ho.now=()=>Date.now()-t}new ye;var mf=g(1979);function cg(t,e,n){e||(e=new Hn(Hn.IDENTITY));const i=new Hn(Hn.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const o=new Hn(Hn.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(o)}t.scale&&i.scale(t.scale)}const r=new Hn(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const o of t.nodes||t.children||[])if(!1===cg(o,r,n))return!1;return!0}function y5(){tV([oH,rg])}function v5(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||cg(r,new Hn(Hn.IDENTITY),(o,s)=>o!==n||(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function cO(t,e){return lO.apply(this,arguments)}function lO(){return lO=zt(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(o=>o.blob())):fetch(n);const r=yield E1(i,rg,{DracoLoader:Tk,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),v5(t.scenegraphNode,r)}),lO.apply(this,arguments)}function Lxe(t,e){return dO.apply(this,arguments)}function dO(){return dO=zt(function*(t,e){return v5(t,yield e)}),dO.apply(this,arguments)}function uO(){return uO=zt(function*(t){console.log("Starting Collisioning");const e=t.filter(s=>!s.scenegraph&&"wireframe"!==s.geometry).map(s=>{const a=new Hn(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new Qi({lowerBound:new ye(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new ye(...l.map((d,h)=>Math.max(d,c[h])))})}}),n=[];for(const s of t.filter(a=>!!a.scenegraph)){const a=yield yy(s.scenegraph,rg,{DracoLoader:Tk,decompress:!0,postProcess:!0});for(const c of a.scenes)cg(c,new Hn(s.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new Qi({lowerBound:new ye(...p.map((x,D)=>Math.min(x,m[D]))),upperBound:new ye(...m.map((x,D)=>Math.max(x,p[D])))}),gltf:a})}return!0})}const i=[],r=[];for(const s of e){const a=[];for(const c of n)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":s.entityId,name:s.name,hits:a}):r.push(s)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(s=>s.hits.length))});const o=[];for(const s of i){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(const a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),i}),uO.apply(this,arguments)}function hO(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new Mbe;break;case"cone":i=new kbe;break;case"cylinder":i=new Obe;break;default:i=new jbe}return new UR({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Si.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function x5(t,e,n){if(e&&0!==e.length)return new FR({id:t,pickable:!0,data:e.map(i=>({...i,position:new Hn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}let jxe=(()=>{var t;class e extends rR{initializeState(){const{data:i}=this.props;this.setState({data:i??[],zoomOpacity:.8,doCollisions:!1}),y5()}renderLayers(){const i=this.state,r={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const a of i.data){const c=a.geometry??"cube";a.scenegraph?r.scenegraph.push(a):void 0!==r[c]&&r[c].push(a)}const o={};for(const a of r.scenegraph)a.scenegraph&&a.scenegraphNode&&!Object.prototype.hasOwnProperty.call(o,a.scenegraph)&&(o[a.scenegraph]=cO({scenegraph:a.scenegraph},e.gltfCache));const s=[];for(const[a,c]of Object.entries(r))if("scenegraph"===a)for(const l of c)s.push(new Jk({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?i.zoomOpacity:l.opacity??1,pickable:!l.unpickable,coordinateSystem:Si.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?Lxe(l.scenegraphNode,o[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:l.color??[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}}));else"text"===a?(s.push(x5("text",c.filter(l=>l.unpickable),{pickable:!1})),s.push(x5("textPickable",c.filter(l=>!l.unpickable),{pickable:!0}))):"wireframe"===a?s.push(hO(a,c,{wireframe:!0,pickable:!1,geometry:a})):(s.push(hO(a,c.filter(l=>l.unpickable),{wireframe:!1,pickable:!1,geometry:a})),s.push(hO(`${a}Pickable`,c.filter(l=>!l.unpickable),{wireframe:!1,pickable:!0,geometry:a})));return i.doCollisions&&function Bxe(t){uO.apply(this,arguments)}(i.data),s.filter(a=>!!a)}getPickingInfo(i){return i.info}}return(t=e).layerName="BodyUILayer",t.gltfCache={},e})();function w5(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),w5(n,e);return e}function fO(){return fO=zt(function*(t,e,n,i){y5();const r=yield cO({scenegraph:t,scenegraphNode:n},i),o={},s=[];for(const a of r.scenes)cg(a,e=new Hn(e||Hn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Hn(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:d["@id"],transformMatrix:new Hn(e||Hn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new Qi({lowerBound:new ye(...p.map((x,D)=>Math.min(x,m[D]))),upperBound:new ye(...m.map((x,D)=>Math.max(x,p[D])))})}return o[d["@id"]]=d,!0});for(const a of Object.values(o).filter(c=>!c.bbox)){for(const c of w5(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(const a of Object.values(o)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new ye(.5,.5,.5)),p=a.center=c.clone().vadd(h);a.transformMatrix=new Hn(Hn.IDENTITY).translate(p.toArray()).scale(h.toArray())}for(const a of s)o[a["@id"]]=a;return o}),fO.apply(this,arguments)}let Vxe=(()=>{class t{constructor(n){this.deckProps=n,this.bodyUILayer=new jxe({}),this.nodeClickSubject=new Ve,this.nodeHoverStartSubject=new Ve,this.nodeHoverStopSubject=new Ve,this.sceneRotationSubject=new Q([0,0]),this.nodeDragStartSubject=new Ve,this.nodeDragSubject=new Ve,this.nodeDragEndSubject=new Ve,this.nodeClick$=this.nodeClickSubject.pipe(ke()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(ke()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(ke()),this.sceneRotation$=this.sceneRotationSubject.pipe(ke()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(ke()),this.nodeDrag$=this.nodeDragSubject.pipe(ke()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(ke());const i={...n,views:["orthographic"===n.camera?new uV({flipY:!1,near:-1e3}):new hV({orbitAxis:"Y"})],controller:n.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};n.legacyLighting&&(i.effects=[new hR({ambientLight:new fV({color:[255,255,255],intensity:10})})]),this.deck=new DR(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:n.minRotationX??-15,maxRotationX:n.maxRotationX??15,target:n.target??[.5,.5,0],rotationX:0,rotationOrbit:n.rotation??0,zoom:n.zoom??9.5,camera:n.camera}}),n.rotation&&this.sceneRotationSubject.next([n.rotation,0])}initialize(){var n=this;return zt(function*(){for(;!n.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(n){if(n?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const o of n)o.zoomToOnLoad&&(this.zoomTo(o),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(n,i):this.bodyUILayer.setState({data:n,zoomOpacity:i})}}debugSceneNodeProcessing(n,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",o=new Hn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function Uxe(t,e,n,i){return fO.apply(this,arguments)})(r,o,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",n),(n=n.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:o,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:n,zoomOpacity:i})})}zoomTo(n){const i=new Hn(n.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:n}})}setRotationX(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:n}})}setZoom(n){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:n}})}setTarget(n){this.deck.setProps({viewState:{...this.deck.props.viewState,target:n}})}setInteractive(n){this.deck.setProps({controller:n})}_onHover(n){const{lastHovered:i}=this;this.cursor=n.picked?"pointer":void 0,n.picked&&n.object?.["@id"]?i!==n.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=n.object,this.nodeHoverStartSubject.next(n.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(n,i){n.picked&&n.object?.["@id"]&&this.nodeClickSubject.next({node:n.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(n){if(n.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(n.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...n.viewState}}),this.sceneRotationSubject.next([n.viewState.rotationOrbit,n.viewState.rotationX])}_onDragStart(n,i){this._dragEvent(n,i,this.nodeDragStartSubject)}_onDrag(n,i){this._dragEvent(n,i,this.nodeDragSubject)}_onDragEnd(n,i){this._dragEvent(n,i,this.nodeDragEndSubject)}_dragEvent(n,i,r){n?.object?.["@id"]&&r.next({node:n.object,info:n,e:i})}}return dt([mf.ak],t.prototype,"_onHover",null),dt([mf.ak],t.prototype,"_onClick",null),dt([mf.ak],t.prototype,"_onViewStateChange",null),dt([mf.ak],t.prototype,"_onDragStart",null),dt([mf.ak],t.prototype,"_onDrag",null),dt([mf.ak],t.prototype,"_onDragEnd",null),t})();const Vy=le(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:zxe}=Array,{getPrototypeOf:Gxe,prototype:Wxe,keys:$xe}=Object;function E5(t){if(1===t.length){const e=t[0];if(zxe(e))return{args:e,keys:null};if(function Xxe(t){return t&&"object"==typeof t&&Gxe(t)===Wxe}(e)){const n=$xe(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:Yxe}=Array;function Hy(t){return ue(e=>function Kxe(t,e){return Yxe(e)?t(...e):t(e)}(t,e))}function A5(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Qa(...t){const e=gn(t),n=tn(t),{args:i,keys:r}=E5(t);if(0===i.length)return Pi([],e);const o=new B(S5(i,e,r?s=>A5(r,s):st));return n?o.pipe(Hy(n)):o}function S5(t,e,n=st){return i=>{C5(e,()=>{const{length:r}=t,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)C5(e,()=>{const l=Pi(t[c],e);let d=!1;l.subscribe(O(i,h=>{o[c]=h,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function C5(t,e,n){t?V(n,t,e):e()}let T5=(()=>{class t{constructor(){this.bootstrap$=new Gh(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Jxe(t,e){return t===e}function mO(t,e=Jxe){let n=null,i=null;function r(){return function Zxe(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let Qxe=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const M5=new bt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>Qxe.pop()}),I5=new bt("\u0275NGXS_STATE_FACTORY"),D5=new bt("\u0275NGXS_STATE_CONTEXT_FACTORY");function zy(...t){const e=tn(t),{args:n,keys:i}=E5(t),r=new B(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let d=0;d<s;d++){let h=!1;xi(n[d]).subscribe(O(o,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?A5(i,a):a),o.complete())}))}});return e?r.pipe(Hy(e)):r}function yd(t,e){const n=j(t)?t:()=>t,i=r=>r.error(n());return new B(e?r=>e.schedule(i,0,r):i)}function gf(t){return!!t&&(t instanceof B||j(t.lift)&&j(t.subscribe))}function yi(t,e){return C((n,i)=>{let r=0;n.subscribe(O(i,o=>t.call(e,o,r++)&&i.next(o)))})}function ks(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,ke({connector:()=>new Gh(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function er(t){return t<=0?()=>$e:C((e,n)=>{let i=0;e.subscribe(O(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function R5(t,e){return e?n=>n.pipe(R5((i,r)=>xi(t(i,r)).pipe(ue((o,s)=>e(i,o,r,s))))):C((n,i)=>{let r=0,o=null,s=!1;n.subscribe(O(i,a=>{o||(o=O(i,void 0,()=>{o=null,s&&i.complete()}),xi(t(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function lg(t){return C((e,n)=>{let i=!1;e.subscribe(O(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function ec(t){return C((e,n)=>{let o,i=null,r=!1;i=e.subscribe(O(n,void 0,void 0,s=>{o=xi(t(s,ec(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function gr(t){return C((e,n)=>{xi(t).subscribe(O(n,()=>n.complete(),L)),!n.closed&&e.subscribe(n)})}function Bi(t,e,n){const i=j(t)||e||n?{next:t,error:e,complete:n}:t;return i?C((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(O(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):st}function Gy(...t){return function ewe(){return Be(1)}()(Pi(t,gn(t)))}function tc(...t){const e=gn(t);return C((n,i)=>{(e?Gy(t,n,e):Gy(t,n)).subscribe(i)})}function _f(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const k5=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((o,s,a)=>(o[s]=a===r?n:Array.isArray(o[s])?o[s].slice():Object.assign({},o[s]),o&&o[s]),t),t},gO=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),_O=t=>t&&"object"==typeof t&&!Array.isArray(t),bO=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(_O(t)&&_O(n))for(const i in n)_O(n[i])?(t[i]||Object.assign(t,{[i]:{}}),bO(t[i],n[i])):Object.assign(t,{[i]:n[i]});return bO(t,...e)};let O5=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return qM(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return an.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return an.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(it(an),it(ba))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const P5=new bt("ROOT_OPTIONS"),N5=new bt("ROOT_STATE_TOKEN"),F5=new bt("FEATURE_STATE_TOKEN"),L5=new bt("NGXS_PLUGINS"),vd="NGXS_META",B5="NGXS_OPTIONS_META",yO="NGXS_SELECTOR_META";let rE=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=O5}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:function(n){let i=null;return n?i=new n:(r=it(P5),i=bO(new t,r)),i;var r},providedIn:"root"}),t})();class lwe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let dwe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const j5=new bt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),uwe=new bt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=Wt(Zp),e=t.get(j5);return t.get(e||(typeof Ci.Zone<"u"?O5:dwe))}});function vO(t){if(!t.hasOwnProperty(vd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,vd,{value:e})}return bf(t)}function bf(t){return t[vd]}function oE(t){return t[yO]}function U5(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function hwe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function fwe(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let o=n;for(;++i<r;)o=o+" && "+(n=n+"."+e[i]);return new Function("store","return "+o+";")}(t)}function ywe(...t){return function dg(t,e,n=wwe){const i=function Ewe(t){return t.reduce((e,n)=>(e[_f(n)]=!0,e),{})}(t),r=e&&function Awe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(o){return o.pipe(function vwe(t,e){return yi(n=>{const i=_f(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function wwe(){return ue(t=>t.action)}function sE(t){return e=>new B(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let V5=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(it(uwe))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function H5(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const o=e.pop();o&&t(...o)}n=!1}}}class Swe extends Ve{constructor(){super(...arguments),this._orderedNext=H5(e=>super.next(e))}next(e){this._orderedNext(e)}}class Cwe extends Q{constructor(e){super(e),this._orderedNext=H5(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let z5=(()=>{class t extends Swe{ngOnDestroy(){this.complete()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ii(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const G5=t=>(...e)=>t.shift()(...e,(...i)=>G5(t)(...i));let W5=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(wc));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(it(fr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wO=(()=>{class t extends Cwe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EO=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(it(t,12),it(L5,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})(),$5=(()=>{class t extends Ve{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ii(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Mwe=(()=>{class t{constructor(n,i,r,o,s,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=s,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function Twe(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new B(r=>(i=!0,n.pipe(sE(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?Yt(this._stateStream.getValue()):zy(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return G5([...this._pluginManager.plugins,(o,s)=>{o!==i&&this._stateStream.next(o);const a=this.getActionResultStream(s);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(ks())}getActionResultStream(n){return this._actionResults.pipe(yi(i=>i.action===n&&"DISPATCHED"!==i.status),er(1),ks())}createDispatchObservable(n){return n.pipe(R5(i=>{switch(i.status){case"SUCCESSFUL":return Yt(this._stateStream.getValue());case"ERRORED":return yd(i.error);default:return $e}})).pipe(ks())}}return t.\u0275fac=function(n){return new(n||t)(it(z5),it($5),it(EO),it(wO),it(V5),it(W5))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Wy=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(it(wO),it(Mwe),it(rE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),AO=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();function r(c){return gO(c,n.path)}function o(c,l){const d=k5(c,n.path,l);return i.setState(d),d}function s(c,l){return o(c,l(r(c)))}return{getState:()=>r(i.getState()),patchState(c){const l=i.getState(),d=function Iwe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(c);return s(l,d)},setState(c){const l=i.getState();return function a(c){return"function"==typeof c}(c)?s(l,c):o(l,c)},dispatch:c=>i.dispatch(c)}}}return t.\u0275fac=function(n){return new(n||t)(it(Wy))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new RegExp("^[a-zA-Z0-9_]+$");class Y5{static get type(){return"@@INIT"}}class K5{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}new bt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let ug=(()=>{class t{constructor(n,i,r,o,s,a,c){this._injector=n,this._config=i,this._parentFactory=r,this._actions=o,this._actionResults=s,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=mO(()=>{const l=this;function d(p){const m=l.statePaths[p];return m?U5(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let m=d(p);return m||((...x)=>(m||(m=d(p)),m?m(...x):void 0))},getSelectorOptions:p=>Object.assign(Object.assign({},l._config.selectorOptions),p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(n){let i={};return i=Array.isArray(n)?n.slice():function bwe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?Object.assign({},n):void 0===n?{}:n,i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function pwe(t){const e=n=>t.find(r=>r===n)[vd].name;return t.reduce((n,i)=>{const{name:r,children:o}=i[vd];return n[r]=(o||[]).map(e),n},{})}(i),o=function _we(t){const e=[],n={},i=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),n[r]=!0,t[r].forEach(s=>{n[s]||i(s,o.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),s=function gwe(t,e={}){const n=(i,r)=>{for(const o in i)if(i.hasOwnProperty(o)&&i[o].indexOf(r)>=0){const s=n(i,o);return null!==s?`${s}.${o}`:o}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function mwe(t){return t.reduce((e,n)=>(e[n[vd].name]=n,e),{})}(i),c=[];for(const l of o){const d=a[l],h=s[l],p=d[vd];this.addRuntimeInfoToMeta(p,h);const m={name:l,path:h,isInitialised:!1,actions:p.actions,instance:this._injector.get(d),defaults:t.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((s,a)=>k5(s,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new Ve;this._actionsSubscription=this._actions.pipe(yi(i=>"DISPATCHED"===i.status),pe(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(ue(()=>({action:r,status:"SUCCESSFUL"})),lg({action:r,status:"CANCELED"}),ec(o=>Yt({action:r,status:"ERRORED",error:o})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=_f(i),o=[];let s=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=Pi(h)),gf(h)?(h=h.pipe(pe(p=>p instanceof Promise?Pi(p):gf(p)?p:Yt(p)),lg({})),l.options.cancelUncompleted&&(h=h.pipe(gr(n.pipe(ywe(i)))))):h=Yt({}).pipe(ks()),o.push(h)}catch(h){o.push(yd(h))}s=!0}}return o.length||o.push(Yt({})),zy(o)}addToStatesMap(n){const i=[],r=this.statesByName;for(const o of n){const s=bf(o).name;!r[s]&&(i.push(o),r[s]=o)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==gO(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(it(fr),it(rE),it(t,12),it(z5),it($5),it(AO),it(M5,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();function q5(t){const e=oE(t)||bf(t);return e&&e.makeRootSelector||(()=>t)}let kl=(()=>{class t{constructor(n,i,r,o,s,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=o,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(sE(this._internalExecutionStrategy),ks({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(ue(i),ec(r=>{const{suppressErrors:o}=this._config.selectorOptions;return r instanceof TypeError&&o?Yt(void 0):yd(r)}),pt(),sE(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(er(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(sE(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return q5(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const s=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(s)}}}return t.\u0275fac=function(n){return new(n||t)(it(wO),it(Wy),it(rE),it(V5),it(ug),it(M5,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aE=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(it(kl),it(rE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),J5=(()=>{class t{constructor(n,i,r,o,s){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=o,this._bootstrapper=s,this._destroy$=new Ve}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(yi(()=>!!i),Bi(()=>this._invokeInitOnStates(i.states)),pe(()=>this._bootstrapper.appBootstrapped$),yi(r=>!!r),ec(r=>(this._internalErrorReporter.reportErrorSafely(r),$e)),gr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(o=>gO(o,i.path)).pipe(tc(void 0),C((t,e)=>{let n,i=!1;t.subscribe(O(e,r=>{const o=n;n=r,i&&e.next([o,r]),i=!0}))}),gr(this._destroy$)).subscribe(([o,s])=>{const a=new lwe(o,s,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(it(kl),it(W5),it(Wy),it(AO),it(T5))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bwe=(()=>{class t{constructor(n,i,r,o,s=[],a){const c=n.addAndReturnDefaults(s);i.setStateToTheCurrentWithNew(c),n.connectActionHandlers(),a.ngxsBootstrap(new Y5,c)}}return t.\u0275fac=function(n){return new(n||t)(it(ug),it(Wy),it(kl),it(aE),it(N5,8),it(J5))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),t})(),jwe=(()=>{class t{constructor(n,i,r,o=[],s){const a=t.flattenStates(o),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),s.ngxsBootstrap(new K5(c.defaults),c))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(it(kl),it(Wy),it(ug),it(F5,8),it(J5))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),t})(),Z5=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:Bwe,providers:[ug,EO,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:jwe,providers:[ug,EO,...n,{provide:F5,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:j5,useValue:i.executionStrategy},{provide:N5,useValue:n},{provide:P5,useValue:i},{provide:pw,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[T5]},{provide:D5,useExisting:AO},{provide:I5,useExisting:ug}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),t})();function TO(t,e){return(n,i)=>{const r=vO(n.constructor);Array.isArray(t)||(t=[t]);for(const o of t){const s=o.type;r.actions[s]||(r.actions[s]=[]),r.actions[s].push({fn:i,options:e||{},type:s})}}}function Q5(t){return i=>{const r=i,o=vO(r),s=Object.getPrototypeOf(r),a=function e(i){return Object.assign(Object.assign({},i[B5]||{}),t)}(s);(function n(i){const{meta:r,inheritedStateClass:o,optionsWithInheritance:s}=i,{children:a,defaults:c,name:l}=s,d="string"==typeof l?l:l&&l.getName()||null;if(o.hasOwnProperty(vd)){const h=o[vd]||{};r.actions=Object.assign(Object.assign({},r.actions),h.actions)}r.children=a,r.defaults=c,r.name=d})({meta:o,inheritedStateClass:s,optionsWithInheritance:a}),r[B5]=a}}const Uwe=36;function cE(t,...e){return function(n,i){const r=i.toString(),o=`__${r}__selector`,s=function Hwe(t,e,n=[]){return e=e||function zwe(t){const e=t.length-1;return t.charCodeAt(e)===Uwe?t.slice(0,e):t}(t),"string"==typeof e?U5(n.length?[e,...n]:e.split("."),aE.config):e}(r,t,e);Object.defineProperties(n,{[o]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[o]||(this[o]=function Vwe(t){return aE.store||function cwe(){throw new Error("You have forgotten to import the NGXS module!")}(),aE.store.select(t)}(s))}}})}}const ez="NGXS_SELECTOR_OPTIONS_META",lE={getOptions:t=>t&&t[ez]||{},defineOptions:(t,e)=>{t&&(t[ez]=e)}};function Gwe(t,e){const n=function xO(t){return t.hasOwnProperty(yO)||Object.defineProperty(t,yO,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),oE(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function Wwe(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},lE.getOptions(t.containerClass)||{}),lE.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function $y(t,e,n){const i=function Nwe(t,e){const n=e&&e.containerClass,r=mO(function(...s){const a=t.apply(n,s);return a instanceof Function?mO.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=Gwe(e,n);return r.makeRootSelector=function Pwe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:o}=function Fwe(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),s=function Lwe(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&bf(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>q5(a)(t));return{selectorOptions:r,argumentSelectorFunctions:s}}(i,t,e);return function(a){const c=r.map(l=>l(a));try{return n(...c)}catch(l){if(l instanceof TypeError&&o.suppressErrors)return;throw l}}}}(r,t,i),i}function hg(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,o=$y(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),s={configurable:!0,get:()=>o};return s.originalFn=r,s}}const Os=new bt("NgValueAccessor");let KO;try{KO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{KO=!1}let Qy,Ef,qO,Dr=(()=>{var t;class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?xu(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!KO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(t=e).\u0275fac=function(i){return new(i||t)(it(ba))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function wf(t){return function W1e(){if(null==Qy&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Qy=!0}))}finally{Qy=Qy||!1}return Qy}()?t:!!t.capture}function $1e(){if(null==Ef){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ef=!1,Ef;if("scrollBehavior"in document.documentElement.style)Ef=!0;else{const t=Element.prototype.scrollTo;Ef=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Ef}function AE(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function wd(t){return t.composedPath?t.composedPath()[0]:t.target}function JO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Nc(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class iEe extends ce{constructor(e,n){super()}schedule(e,n=0){return this}}const TE={setInterval(t,e,...n){const{delegate:i}=TE;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=TE;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class e2 extends iEe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return TE.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&TE.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,X(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class t0{constructor(e,n=t0.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}t0.now=aI.now;class t2 extends t0{constructor(e,n=t0.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const ME=new t2(e2),rEe=ME;function r2(t){return yi((e,n)=>t<=n)}function ui(t){return null!=t&&"false"!=`${t}`}function nc(t,e=0){return function oEe(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function IE(t){return Array.isArray(t)?t:[t]}function Qr(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Ed(t){return t instanceof Ht?t.nativeElement:t}const _G=new Set;let Af,cEe=(()=>{var t;class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):dEe}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&function lEe(t,e){if(!_G.has(t))try{Af||(Af=document.createElement("style"),e&&(Af.nonce=e),Af.setAttribute("type","text/css"),document.head.appendChild(Af)),Af.sheet&&(Af.sheet.insertRule(`@media ${t} {body{ }}`,0),_G.add(t))}catch(n){console.error(n)}}(i,this._nonce),this._matchMedia(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Dr),it(cb,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function dEe(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let uEe=(()=>{var t;class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Ve}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return bG(IE(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let s=Qa(bG(IE(i)).map(a=>this._registerQuery(a).observable));return s=Gy(s.pipe(er(1)),s.pipe(r2(1),function n2(t,e=ME){return C((n,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=o;o=null,i.next(l)}};function c(){const l=s+t,d=e.now();if(d<l)return r=this.schedule(void 0,l-d),void i.add(r);a()}n.subscribe(O(i,l=>{o=l,s=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),s.pipe(ue(a=>{const c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);const r=this._mediaMatcher.matchMedia(i),s={observable:new B(a=>{const c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(tc(r),ue(({matches:a})=>({query:i,matches:a})),gr(this._destroySubject)),mql:r};return this._queries.set(i,s),s}}return(t=e).\u0275fac=function(i){return new(i||t)(it(cEe),it(an))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function bG(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}let kE=(()=>{var t;class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return function gEe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(i)&&"visible"===getComputedStyle(i).visibility}isTabbable(i){if(!this._platform.isBrowser)return!1;const r=function mEe(t){try{return t.frameElement}catch{return null}}(function AEe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(i));if(r&&(-1===SG(r)||!this.isVisible(r)))return!1;let o=i.nodeName.toLowerCase(),s=SG(i);return i.hasAttribute("contenteditable")?-1!==s:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function wEe(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(i))&&("audio"===o?!!i.hasAttribute("controls")&&-1!==s:"video"===o?-1!==s&&(null!==s||this._platform.FIREFOX||i.hasAttribute("controls")):i.tabIndex>=0)}isFocusable(i,r){return function EEe(t){return!function bEe(t){return function vEe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function _Ee(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function yEe(t){return function xEe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||AG(t))}(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Dr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function AG(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function SG(t){if(!AG(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class SEe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,o=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(er(1)).subscribe(e)}}let l2=(()=>{var t;class e{constructor(i,r,o){this._checker=i,this._ngZone=r,this._document=o}create(i,r=!1){return new SEe(i,this._checker,this._ngZone,this._document,r)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(kE),it(an),it(Wn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function CG(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function TG(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const CEe=new bt("cdk-input-modality-detector-options"),TEe={ignoreKeys:[18,17,224,91,16]},mg=wf({passive:!0,capture:!0});let MEe=(()=>{var t;class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new Q(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=wd(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(CG(a)?"keyboard":"mouse"),this._mostRecentTarget=wd(a))},this._onTouchstart=a=>{TG(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=wd(a))},this._options={...TEe,...s},this.modalityDetected=this._modality.pipe(r2(1)),this.modalityChanged=this.modalityDetected.pipe(pt()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,mg),o.addEventListener("mousedown",this._onMousedown,mg),o.addEventListener("touchstart",this._onTouchstart,mg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mg),document.removeEventListener("mousedown",this._onMousedown,mg),document.removeEventListener("touchstart",this._onTouchstart,mg))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Dr),it(an),it(Wn),it(CEe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const DEe=new bt("cdk-focus-monitor-default-options"),OE=wf({passive:!0,capture:!0});let Uu=(()=>{var t;class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ve,this._rootNodeFocusAndBlurListener=c=>{for(let d=wd(c);d;d=d.parentElement)"focus"===c.type?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){const o=Ed(i);if(!this._platform.isBrowser||1!==o.nodeType)return Yt();const s=function Y1e(t){if(function X1e(){if(null==qO){const t=typeof document<"u"?document.head:null;qO=!(!t||!t.createShadowRoot&&!t.attachShadow)}return qO}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new Ve,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){const r=Ed(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){const s=Ed(i);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return 1===this._detectionMode||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused","touch"===r),i.classList.toggle("cdk-keyboard-focused","keyboard"===r),i.classList.toggle("cdk-mouse-focused","mouse"===r),i.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=i,this._originFromTouchInteraction="touch"===i&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(i,r){const o=this._elementInfo.get(r),s=wd(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;const r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,OE),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,OE)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){const r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,OE),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,OE),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){const r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){const{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!r||r===i||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName||i.disabled)return!1;const s=i.labels;if(s)for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0;return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(it(an),it(Dr),it(MEe),it(Wn,8),it(DEe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const IG="cdk-high-contrast-black-on-white",DG="cdk-high-contrast-white-on-black",d2="cdk-high-contrast-active";let RG=(()=>{var t;class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=Wt(uEe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);const r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const i=this._document.body.classList;i.remove(d2,IG,DG),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?i.add(d2,IG):2===r&&i.add(d2,DG)}}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Dr),it(Wn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const REe=new bt("cdk-dir-doc",{providedIn:"root",factory:function kEe(){return Wt(Wn)}}),OEe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Sf=(()=>{var t;class e{constructor(i){this.value="ltr",this.change=new rn,i&&(this.value=function PEe(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?OEe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((i.body?i.body.dir:null)||(i.documentElement?i.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return(t=e).\u0275fac=function(i){return new(i||t)(it(REe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),n0=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),e})();const HEe=new bt("mat-sanity-checks",{providedIn:"root",factory:function VEe(){return!0}});let ji=(()=>{var t;class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return!JO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[i])}}return(t=e).\u0275fac=function(i){return new(i||t)(it(RG),it(HEe,8),it(Wn))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[n0,n0]}),e})();function PE(t){return class extends t{get disabled(){return this._disabled}set disabled(e){this._disabled=ui(e)}constructor(...e){super(...e),this._disabled=!1}}}function r0(t,e){return class extends t{get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function NE(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ui(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function FE(t,e=0){return class extends t{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?nc(n):this.defaultTabIndex}constructor(...n){super(...n),this._tabIndex=e,this.defaultTabIndex=e}}}class $Ee{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const FG=wf({passive:!0,capture:!0});class XEe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=wd(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){const o=this._events.get(n);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,FG)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const o=r.get(n);o&&(o.delete(i),0===o.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,FG)))}}const LG={enterDuration:225,exitDuration:150},BG=wf({passive:!0,capture:!0}),jG=["mousedown","touchstart"],UG=["mouseup","mouseleave","touchend","touchcancel"];class gg{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ed(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...LG,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const s=i.radius||function KEe(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,c=n-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=c-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,x="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,D=new $Ee(this,d,i,x);d.style.transform="scale3d(1, 1, 1)",D.state=0,i.persistent||(this._mostRecentTransientRipple=D);let F=null;return!x&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const G=()=>this._finishRippleTransition(D),q=()=>this._destroyRipple(D);d.addEventListener("transitionend",G),d.addEventListener("transitioncancel",q),F={onTransitionEnd:G,onTransitionCancel:q}}),this._activeRipples.set(D,F),(x||!l)&&this._finishRippleTransition(D),D}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,i={...LG,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=Ed(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,jG.forEach(i=>{gg._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{UG.forEach(n=>{this._triggerElement.addEventListener(n,this,BG)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=CG(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!TG(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(jG.forEach(n=>gg._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&UG.forEach(n=>e.removeEventListener(n,this,BG)))}}gg._eventManager=new XEe;const s0=new bt("mat-ripple-global-options");let _g=(()=>{var t;class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,s,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new gg(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return"number"==typeof i?this._rippleRenderer.fadeInRipple(i,r,{...this.rippleConfig,...o}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...i})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Ht),He(an),He(Dr),He(s0,8),He(Hr,8))},t.\u0275dir=Ut({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&kn("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),e})(),bg=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[ji,ji]}),e})();const nAe=["addListener","removeListener"],iAe=["addEventListener","removeEventListener"],rAe=["on","off"];function Cf(t,e,n,i){if(j(n)&&(i=n,n=void 0),i)return Cf(t,e,n).pipe(Hy(i));const[r,o]=function aAe(t){return j(t.addEventListener)&&j(t.removeEventListener)}(t)?iAe.map(s=>a=>t[s](e,a,n)):function oAe(t){return j(t.addListener)&&j(t.removeListener)}(t)?nAe.map(qG(t,e)):function sAe(t){return j(t.on)&&j(t.off)}(t)?rAe.map(qG(t,e)):[];if(!r&&Wc(t))return pe(s=>Cf(s,e,n))(xi(t));if(!r)throw new TypeError("Invalid event target");return new B(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function qG(t,e){return n=>i=>t[n](e,i)}const a0={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=a0;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(o=>{n=void 0,t(o)});return new ce(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=a0;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=a0;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class lAe extends t2{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class cAe extends e2{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=a0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(a0.cancelAnimationFrame(n),e._scheduled=void 0)}});let f2,uAe=1;const BE={};function JG(t){return t in BE&&(delete BE[t],!0)}const hAe={setImmediate(t){const e=uAe++;return BE[e]=!0,f2||(f2=Promise.resolve()),f2.then(()=>JG(e)&&t()),e},clearImmediate(t){JG(t)}},{setImmediate:fAe,clearImmediate:pAe}=hAe,jE={setImmediate(...t){const{delegate:e}=jE;return(e?.setImmediate||fAe)(...t)},clearImmediate(t){const{delegate:e}=jE;return(e?.clearImmediate||pAe)(t)},delegate:void 0};new class gAe extends t2{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class mAe extends e2{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=jE.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(jE.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}});function p2(t=0,e,n=rEe){let i=-1;return null!=e&&(It(e)?n=e:i=e),new B(r=>{let o=function yAe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function ZG(t,e=ME){return function bAe(t){return C((e,n)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const l=r;r=null,n.next(l)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};e.subscribe(O(n,l=>{i=!0,r=l,o||xi(t(l)).subscribe(o=O(n,a,c))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}(()=>p2(t,e))}let QG=(()=>{var t;class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Ve,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new B(r=>{this._globalSubscription||this._addGlobalListener();const o=i>0?this._scrolled.pipe(ZG(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Yt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){const o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(yi(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){const r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=Ed(r),s=i.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Cf(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(an),it(Dr),it(Wn,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),m2=(()=>{var t;class e{constructor(i,r,o){this._platform=i,this._change=new Ve,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect();return{top:-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,left:-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(ZG(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Dr),it(an),it(Wn,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class g2{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class VE extends g2{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class HE extends g2{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class wAe extends g2{constructor(e){super(),this.element=e instanceof Ht?e.nativeElement:e}}class _2{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof VE?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof HE?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof wAe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class EAe extends _2{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||fr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let zE=(()=>{var t;class e extends _2{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new rn,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);const r=null!=i.viewContainerRef?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Xt),He(Wo),He(Wn))},t.\u0275dir=Ut({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[_n]}),e})();const t9=$1e();class AAe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Qr(-this._previousScrollPosition.left),e.style.top=Qr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t9&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t9&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class SAe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(yi(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class n9{enable(){}disable(){}attach(){}}function b2(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function i9(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class CAe{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();b2(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let TAe=(()=>{var t;class e{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new n9,this.close=a=>new SAe(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new AAe(this._viewportRuler,this._document),this.reposition=a=>new CAe(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}}return(t=e).\u0275fac=function(i){return new(i||t)(it(QG),it(m2),it(an),it(Wn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class y2{constructor(e){if(this.scrollStrategy=new n9,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class MAe{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let r9=(()=>{var t;class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){const r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),IAe=(()=>{var t;class e extends r9{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{const s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){const c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn),it(an,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),DAe=(()=>{var t;class e extends r9{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=wd(s)},this._clickListener=s=>{const a=wd(s),c="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){const h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(c))break;const p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(i){if(super.add(i),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn),it(Dr),it(an,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),GE=(()=>{var t;class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i="cdk-overlay-container";if(this._platform.isBrowser||JO()){const o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}const r=this._document.createElement("div");r.classList.add(i),JO()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn),it(Dr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class l0{constructor(e,n,i,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Ve,this._attachments=new Ve,this._detachments=new Ve,this._locationChanges=ce.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Ve,this._outsidePointerEvents=new Ve,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(er(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Qr(this._config.width),e.height=Qr(this._config.height),e.minWidth=Qr(this._config.minWidth),e.minHeight=Qr(this._config.minHeight),e.maxWidth=Qr(this._config.maxWidth),e.maxHeight=Qr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=IE(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(gr(no(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const o9="cdk-overlay-connected-position-bounding-box",RAe=/([A-Za-z%]+)$/;class kAe{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ve,this._resizeSubscription=ce.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(o9),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),d=this._getOverlayFit(l,n,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(const l of o){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Tf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(o9),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return n.left<0&&(r-=n.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r,o;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,o="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){const o=a9(n);let{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let p=0-a,m=a+o.height-i.height,x=this._subtractOverflows(o.width,0-s,s+o.width-i.width),D=this._subtractOverflows(o.height,p,m),F=x*D;return{visibleArea:F,isCompletelyWithinViewport:o.width*o.height===F,fitsInViewportVertically:D===o.height,fitsInViewportHorizontally:x==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,o=i.right-n.x,s=s9(this._overlayRef.getConfig().minHeight),a=s9(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=a9(n),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=o.width?l||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,h=r.height<=o.height?c||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new MAe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,h,p;if("top"===n.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),x=this._lastBoundingBoxSize.height;o=2*m,s=e.y-m,o>x&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-x/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)p=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),x=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>x&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-x/2)}return{top:s,left:h,bottom:a,right:p,width:d,height:o}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Qr(i.height),r.top=Qr(i.top),r.bottom=Qr(i.bottom),r.width=Qr(i.width),r.left=Qr(i.left),r.right=Qr(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=Qr(o)),s&&(r.maxWidth=Qr(s))}this._lastBoundingBoxSize=i,Tf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Tf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Tf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Tf(i,this._getExactOverlayY(n,e,d)),Tf(i,this._getExactOverlayX(n,e,d))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Qr(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Qr(s.maxWidth):o&&(i.maxWidth="")),Tf(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=Qr(o.y),r}_getExactOverlayX(e,n,i){let s,r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=Qr(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:i9(e,i),isOriginOutsideView:b2(e,i),isOverlayClipped:i9(n,i),isOverlayOutsideView:b2(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&IE(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Ht)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function Tf(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function s9(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(RAe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function a9(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const c9="cdk-global-overlay-wrapper";class OAe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(c9),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",x="",D="";c?D="flex-start":"center"===d?(D="center",p?x=h:m=h):p?"left"===d||"end"===d?(D="flex-end",m=h):("right"===d||"start"===d)&&(D="flex-start",x=h):"left"===d||"start"===d?(D="flex-start",m=h):("right"===d||"end"===d)&&(D="flex-end",x=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":x,n.justifyContent=D,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(c9),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let PAe=(()=>{var t;class e{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new OAe}flexibleConnectedTo(i){return new kAe(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(m2),it(Wn),it(Dr),it(GE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),NAe=0,Ol=(()=>{var t;class e{constructor(i,r,o,s,a,c,l,d,h,p,m,x){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=h,this._location=p,this._outsideClickDispatcher=m,this._animationsModuleType=x}create(i){const r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new y2(i);return a.direction=a.direction||this._directionality.value,new l0(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(i){const r=this._document.createElement("div");return r.id="cdk-overlay-"+NAe++,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){const i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Vh)),new EAe(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(TAe),it(GE),it(Xt),it(PAe),it(IAe),it(fr),it(an),it(Wn),it(Sf),it(jb),it(DAe),it(Hr,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Mf(t,e){return{type:7,name:t,definitions:e,options:{}}}function ic(t,e=null){return{type:4,styles:e,timings:t}}function fo(t){return{type:6,styles:t,offset:null}}function rc(t,e,n){return{type:0,name:t,styles:e,options:n}}function Fc(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function d0(t){return new B(e=>{xi(t()).subscribe(e)})}function E2(t){return ue(()=>t)}function A9(t,e){return e?n=>Gy(e.pipe(er(1),function wSe(){return C((t,e)=>{t.subscribe(O(e,L))})}()),n.pipe(A9(t))):pe((n,i)=>xi(t(n,i)).pipe(er(1),E2(n)))}function S9(t,e=ME){const n=p2(t,e);return A9(()=>n)}function D9(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return ue(n=>{let i=n;for(let r=0;r<e;r++){const o=i?.[t[r]];if(!(typeof o<"u"))return;i=o}return i})}function If(t){return C((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}g(1563);class XE{}class YE{}class Lc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Lc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Lc;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Lc?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class XSe{encodeKey(e){return R9(e)}encodeValue(e){return R9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const KSe=/%(\d[a-f0-9])/gi,qSe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function R9(t){return encodeURIComponent(t).replace(KSe,(e,n)=>qSe[n]??e)}function KE(t){return`${t}`}class cr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new XSe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function YSe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(KE):[KE(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new cr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(KE(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(KE(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class eo{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function k9(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function O9(t){return typeof Blob<"u"&&t instanceof Blob}function P9(t){return typeof FormData<"u"&&t instanceof FormData}class h0{constructor(e,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function JSe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Lc),this.context||(this.context=new eo),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new cr,this.urlWithParams=n}serializeBody(){return null===this.body?null:k9(this.body)||O9(this.body)||P9(this.body)||function ZSe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof cr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||P9(this.body)?null:O9(this.body)?this.body.type||null:k9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),l)),new h0(n,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var yg=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(yg||{});class A2{constructor(e,n=200,i="OK"){this.headers=e.headers||new Lc,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class S2 extends A2{constructor(e={}){super(e),this.type=yg.ResponseHeader}clone(e={}){return new S2({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vg extends A2{constructor(e={}){super(e),this.type=yg.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new vg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class N9 extends A2{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function C2(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Vu=(()=>{var t;class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof h0)s=i;else{let l,d;l=o.headers instanceof Lc?o.headers:new Lc(o.headers),o.params&&(d=o.params instanceof cr?o.params:new cr({fromObject:o.params})),s=new h0(i,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const a=Yt(s).pipe(function u0(t,e){return j(e)?pe(t,e,1):pe(t,1)}(l=>this.handler.handle(l)));if(i instanceof h0||"events"===o.observe)return a;const c=a.pipe(yi(l=>l instanceof vg));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ue(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ue(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ue(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return c.pipe(ue(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:(new cr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,C2(o,r))}post(i,r,o={}){return this.request("POST",i,C2(o,r))}put(i,r,o={}){return this.request("PUT",i,C2(o,r))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(XE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();function B9(t,e){return e(t)}function eCe(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}const nCe=new bt(""),f0=new bt(""),j9=new bt("");function iCe(){let t=null;return(e,n)=>{null===t&&(t=(Wt(nCe,{optional:!0})??[]).reduceRight(eCe,B9));const i=Wt(uw),r=i.add();return t(e,n).pipe(If(()=>i.remove(r)))}}let U9=(()=>{var t;class e extends XE{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=Wt(uw)}handle(i){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(f0),...this.injector.get(j9,[])]));this.chain=o.reduceRight((s,a)=>function tCe(t,e,n){return(i,r)=>n.runInContext(()=>e(i,o=>t(o,r)))}(s,a,this.injector),B9)}const r=this.pendingTasks.add();return this.chain(i,o=>this.backend.handle(o)).pipe(If(()=>this.pendingTasks.remove(r)))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(YE),it(Ws))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const aCe=/^\)\]\}',?\n/;let H9=(()=>{var t;class e{constructor(i){this.xhrFactory=i}handle(i){if("JSONP"===i.method)throw new Rt(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Pi(r.\u0275loadImpl()):Yt(null)).pipe(Je(()=>new B(s=>{const a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((F,G)=>a.setRequestHeader(F,G.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){const F=i.detectContentTypeHeader();null!==F&&a.setRequestHeader("Content-Type",F)}if(i.responseType){const F=i.responseType.toLowerCase();a.responseType="json"!==F?F:"text"}const c=i.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const F=a.statusText||"OK",G=new Lc(a.getAllResponseHeaders()),q=function cCe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(a)||i.url;return l=new S2({headers:G,status:a.status,statusText:F,url:q}),l},h=()=>{let{headers:F,status:G,statusText:q,url:ee}=d(),ve=null;204!==G&&(ve=typeof a.response>"u"?a.responseText:a.response),0===G&&(G=ve?200:0);let Oe=G>=200&&G<300;if("json"===i.responseType&&"string"==typeof ve){const Xe=ve;ve=ve.replace(aCe,"");try{ve=""!==ve?JSON.parse(ve):null}catch(rt){ve=Xe,Oe&&(Oe=!1,ve={error:rt,text:ve})}}Oe?(s.next(new vg({body:ve,headers:F,status:G,statusText:q,url:ee||void 0})),s.complete()):s.error(new N9({error:ve,headers:F,status:G,statusText:q,url:ee||void 0}))},p=F=>{const{url:G}=d(),q=new N9({error:F,status:a.status||0,statusText:a.statusText||"Unknown Error",url:G||void 0});s.error(q)};let m=!1;const x=F=>{m||(s.next(d()),m=!0);let G={type:yg.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(G.total=F.total),"text"===i.responseType&&a.responseText&&(G.partialText=a.responseText),s.next(G)},D=F=>{let G={type:yg.UploadProgress,loaded:F.loaded};F.lengthComputable&&(G.total=F.total),s.next(G)};return a.addEventListener("load",h),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),i.reportProgress&&(a.addEventListener("progress",x),null!==c&&a.upload&&a.upload.addEventListener("progress",D)),a.send(c),s.next({type:yg.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",h),a.removeEventListener("timeout",p),i.reportProgress&&(a.removeEventListener("progress",x),null!==c&&a.upload&&a.upload.removeEventListener("progress",D)),a.readyState!==a.DONE&&a.abort()}})))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Tj))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const T2=new bt("XSRF_ENABLED"),z9=new bt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),G9=new bt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class W9{}let uCe=(()=>{var t;class e{constructor(i,r,o){this.doc=i,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=mj(i,this.cookieName),this.lastCookieString=i),this.lastToken}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Wn),it(ba),it(z9))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();function hCe(t,e){const n=t.url.toLowerCase();if(!Wt(T2)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const i=Wt(W9).getToken(),r=Wt(G9);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var Hu=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Hu||{});function Df(t,e){return{\u0275kind:t,\u0275providers:e}}function fCe(...t){const e=[Vu,H9,U9,{provide:XE,useExisting:U9},{provide:YE,useExisting:H9},{provide:f0,useValue:hCe,multi:!0},{provide:T2,useValue:!0},{provide:W9,useClass:uCe}];for(const n of t)e.push(...n.\u0275providers);return function Q_(t){return{\u0275providers:t}}(e)}const $9=new bt("LEGACY_INTERCEPTOR_FN");let X9=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({providers:[fCe(Df(Hu.LegacyInterceptors,[{provide:$9,useFactory:iCe},{provide:f0,useExisting:$9,multi:!0}]))]}),e})();const vCe=["*"];let JE;function p0(t){return function xCe(){if(void 0===JE&&(JE=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(JE=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return JE}()?.createHTML(t)||t}function Y9(t){return Error(`Unable to find icon with the name "${t}"`)}function K9(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function q9(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Rf{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let ZE=(()=>{var t;class e{constructor(i,r,o,s){this._httpClient=i,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(i,r,o){return this.addSvgIconInNamespace("",i,r,o)}addSvgIconLiteral(i,r,o){return this.addSvgIconLiteralInNamespace("",i,r,o)}addSvgIconInNamespace(i,r,o,s){return this._addSvgIconConfig(i,r,new Rf(o,null,s))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,o,s){const a=this._sanitizer.sanitize(hr.HTML,o);if(!a)throw q9(o);const c=p0(a);return this._addSvgIconConfig(i,r,new Rf("",c,s))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,o){return this._addSvgIconSetConfig(i,new Rf(r,null,o))}addSvgIconSetLiteralInNamespace(i,r,o){const s=this._sanitizer.sanitize(hr.HTML,r);if(!s)throw q9(r);const a=p0(s);return this._addSvgIconSetConfig(i,new Rf("",a,o))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){const r=this._sanitizer.sanitize(hr.RESOURCE_URL,i);if(!r)throw K9(i);const o=this._cachedIconsByUrl.get(r);return o?Yt(QE(o)):this._loadSvgIconFromConfig(new Rf(i,null)).pipe(Bi(s=>this._cachedIconsByUrl.set(r,s)),ue(s=>QE(s)))}getNamedSvgIcon(i,r=""){const o=J9(r,i);let s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,i),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):yd(Y9(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?Yt(QE(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(ue(r=>QE(r)))}_getSvgFromIconSetConfigs(i,r){const o=this._extractIconWithNameFromAnySet(i,r);return o?Yt(o):zy(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(ec(c=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(hr.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),Yt(null)})))).pipe(ue(()=>{const a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw Y9(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.svgText&&s.svgText.toString().indexOf(i)>-1){const a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,i,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(Bi(r=>i.svgText=r),ue(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?Yt(null):this._fetchIcon(i).pipe(Bi(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,o){const s=i.querySelector(`[id="${r}"]`);if(!s)return null;const a=s.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,o);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),o);const c=this._svgElementFromString(p0("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(i){const r=this._document.createElement("DIV");r.innerHTML=i;const o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(i){const r=this._svgElementFromString(p0("<svg></svg>")),o=i.attributes;for(let s=0;s<o.length;s++){const{name:a,value:c}=o[s];"id"!==a&&r.setAttribute(a,c)}for(let s=0;s<i.childNodes.length;s++)i.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){const{url:r,options:o}=i,s=o?.withCredentials??!1;if(!this._httpClient)throw function wCe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(hr.RESOURCE_URL,r);if(!a)throw K9(r);const c=this._inProgressUrlFetches.get(a);if(c)return c;const l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(ue(d=>p0(d)),If(()=>this._inProgressUrlFetches.delete(a)),ke());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(i,r,o){return this._svgIconConfigs.set(J9(i,r),o),this}_addSvgIconSetConfig(i,r){const o=this._iconSetConfigs.get(i);return o?o.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){const r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let o=0;o<this._resolvers.length;o++){const s=this._resolvers[o](r,i);if(s)return ACe(s)?new Rf(s.url,null,s.options):new Rf(s,null)}}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Vu,8),it(Wb),it(Wn,8),it(wc))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function QE(t){return t.cloneNode(!0)}function J9(t,e){return t+":"+e}function ACe(t){return!(!t.url||!t.options)}const SCe=r0(class{constructor(t){this._elementRef=t}}),CCe=new bt("MAT_ICON_DEFAULT_OPTIONS"),TCe=new bt("mat-icon-location",{providedIn:"root",factory:function MCe(){const t=Wt(Wn),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Z9=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ICe=Z9.map(t=>`[${t}]`).join(", "),DCe=/^url\(['"]?#(.*?)['"]?\)$/;let xg=(()=>{var t;class e extends SCe{get inline(){return this._inline}set inline(i){this._inline=ui(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){const r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){const r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,o,s,a,c){super(i),this._iconRegistry=r,this._location=s,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ce.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),o||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];const r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const i=this._elementsWithExternalReferences;if(i&&i.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){const i=this._elementRef.nativeElement;let r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const o=i.childNodes[r];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>i.classList.remove(o)),r.forEach(o=>i.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return"string"==typeof i?i.trim().split(" ")[0]:i}_prependPathToReferences(i){const r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){const r=i.querySelectorAll(ICe),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)Z9.forEach(a=>{const c=r[s],l=c.getAttribute(a),d=l?l.match(DCe):null;if(d){let h=o.get(c);h||(h=[],o.set(c,h)),h.push({name:a,value:d[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){const[r,o]=this._splitIconName(i);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(er(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${o}! ${s.message}`))})}}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Ht),He(ZE),ma("aria-hidden"),He(TCe),He(wc),He(CCe,8))},t.\u0275cmp=vn({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Ai("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),kn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[_n],ngContentSelectors:vCe,decls:1,vars:0,template:function(i,r){1&i&&(zr(),Rn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})();function iTe(t,e){}class eA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let o7=(()=>{var t;class e extends _2{constructor(i,r,o,s,a,c,l,d){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const p=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),p},this._document=o,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{i.removeEventListener("blur",o),i.removeEventListener("mousedown",o),i.removeAttribute("tabindex")};i.addEventListener("blur",o),i.addEventListener("mousedown",o)})),i.focus(r)}_focusByCssSelector(i,r){let o=this._elementRef.nativeElement.querySelector(i);o&&this._forceFocus(o,r)}_trapFocus(){const i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const i=this._config.restoreFocus;let r=null;if("string"==typeof i?r=this._document.querySelector(i):"boolean"==typeof i?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&"function"==typeof r.focus){const o=AE(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const i=this._elementRef.nativeElement,r=AE();return i===r||i.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=AE())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Ht),He(l2),He(Wn,8),He(eA),He(kE),He(an),He(l0),He(Uu))},t.\u0275cmp=vn({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Li(zE,7),2&i){let o;Nn(o=Fn())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Ai("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[_n],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&mn(0,iTe,0,0,"ng-template",0)},dependencies:[zE],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class I2{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Ve,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Nc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const s7=new bt("DialogScrollStrategy"),rTe=new bt("DialogData"),oTe=new bt("DefaultDialogConfig");let cTe=0,a7=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,o,s,a,c){this._overlay=i,this._injector=r,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ve,this._afterOpenedAtThisLevel=new Ve,this._ariaHiddenElements=new Map,this.afterAllClosed=d0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(tc(void 0))),this._scrollStrategy=c}open(i,r){(r={...this._defaultOptions||new eA,...r}).id=r.id||"cdk-dialog-"+cTe++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),a=this._overlay.create(s),c=new I2(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){D2(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){D2(this._openDialogsAtThisLevel,i=>{!1===i.config.closeOnDestroy&&this._removeOpenDialog(i,!1)}),D2(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){const r=new y2({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,o){const s=o.injector||o.viewContainerRef?.injector,a=[{provide:eA,useValue:o},{provide:I2,useValue:r},{provide:l0,useValue:i}];let c;o.container?"function"==typeof o.container?c=o.container:(c=o.container.type,a.push(...o.container.providers(o))):c=o7;const l=new VE(c,o.viewContainerRef,fr.create({parent:s||this._injector,providers:a}),o.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,o,s){if(i instanceof $a){const a=this._createInjector(s,r,o,void 0);let c={$implicit:s.data,dialogRef:r};s.templateContext&&(c={...c,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),o.attachTemplatePortal(new HE(i,null,c,a))}else{const a=this._createInjector(s,r,o,this._injector),c=o.attachComponentPortal(new VE(i,s.viewContainerRef,a,s.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,o,s){const a=i.injector||i.viewContainerRef?.injector,c=[{provide:rTe,useValue:i.data},{provide:I2,useValue:r}];return i.providers&&("function"==typeof i.providers?c.push(...i.providers(r,i,o)):c.push(...i.providers)),i.direction&&(!a||!a.get(Sf,null,{optional:!0}))&&c.push({provide:Sf,useValue:{value:i.direction,change:Yt()}}),fr.create({parent:a||s,providers:c})}_removeOpenDialog(i,r){const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const i=this._overlayContainer.getContainerElement();if(i.parentElement){const r=i.parentElement.children;for(let o=r.length-1;o>-1;o--){const s=r[o];s!==i&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Ol),it(fr),it(oTe,8),it(t,12),it(GE),it(s7))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();function D2(t,e){let n=t.length;for(;n--;)e(t[n])}function dTe(t,e){}class tA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const R2="mdc-dialog--open",c7="mdc-dialog--opening",l7="mdc-dialog--closing";let fTe=(()=>{var t;class e extends o7{constructor(i,r,o,s,a,c,l,d){super(i,r,o,s,a,c,l,d),this._animationStateChanged=new rn}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Ht),He(l2),He(Wn,8),He(tA),He(kE),He(an),He(l0),He(Uu))},t.\u0275cmp=vn({type:t,selectors:[["ng-component"]],features:[_n],decls:0,vars:0,template:function(i,r){},encapsulation:2}),e})();const d7="--mat-dialog-transition-duration";function u7(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?nc(t.substring(0,t.length-2)):t.endsWith("s")?1e3*nc(t.substring(0,t.length-1)):"0"===t?0:null}let pTe=(()=>{var t;class e extends fTe{constructor(i,r,o,s,a,c,l,d,h){super(i,r,o,s,a,c,l,h),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?u7(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?u7(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(d7,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(c7,R2)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(R2),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(R2),this._animationsEnabled?(this._hostElement.style.setProperty(d7,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(l7)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(c7,l7)}_waitForAnimationToComplete(i,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(i):i()})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Ht),He(l2),He(Wn,8),He(tA),He(kE),He(an),He(l0),He(Hr,8),He(Uu))},t.\u0275cmp=vn({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(ml("id",r._config.id),Ai("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),kn("_mat-animation-noopable",!r._animationsEnabled))},features:[_n],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(At(0,"div",0)(1,"div",1),mn(2,dTe,0,0,"ng-template",2),Mt()())},dependencies:[zE],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),e})();class k2{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Ve,this._beforeClosed=new Ve,this._state=0,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(yi(r=>"opened"===r.state),er(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(yi(r=>"closed"===r.state),er(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),no(this.backdropClick(),this.keydownEvents().pipe(yi(r=>27===r.keyCode&&!this.disableClose&&!Nc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function mTe(t,e,n){t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(yi(n=>"closing"===n.state),er(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const h7=new bt("MatMdcDialogData"),gTe=new bt("mat-mdc-dialog-default-options"),f7=new bt("mat-mdc-dialog-scroll-strategy");let yTe=0,vTe=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,o,s,a,c,l,d,h,p){this._overlay=i,this._defaultOptions=o,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=d,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ve,this._afterOpenedAtThisLevel=new Ve,this._idPrefix="mat-dialog-",this.dialogConfigClass=tA,this.afterAllClosed=d0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(tc(void 0))),this._scrollStrategy=c,this._dialog=r.get(a7)}open(i,r){let o;(r={...this._defaultOptions||new tA,...r}).id=r.id||`${this._idPrefix}${yTe++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(i,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:eA,useValue:r}]},templateContext:()=>({dialogRef:o}),providers:(a,c,l)=>(o=new this._dialogRefConstructor(a,r,l),o.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:o}])});return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(o);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}}return(t=e).\u0275fac=function(i){_u()},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),nA=(()=>{var t;class e extends vTe{constructor(i,r,o,s,a,c,l,d){super(i,r,s,c,l,a,k2,pTe,h7,d),this._idPrefix="mat-mdc-dialog-"}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Ol),it(fr),it(jb,8),it(gTe,8),it(f7),it(t,12),it(GE),it(Hr,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),xTe=0,p7=(()=>{var t;class e{constructor(i,r,o){this._dialogRef=i,this._elementRef=r,this._dialog=o,this.id="mat-mdc-dialog-title-"+xTe++}ngOnInit(){this._dialogRef||(this._dialogRef=function wTe(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const i=this._dialogRef?._containerInstance?._ariaLabelledByQueue;i&&Promise.resolve().then(()=>{const r=i.indexOf(this.id);r>-1&&i.splice(r,1)})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(k2,8),He(Ht),He(nA))},t.\u0275dir=Ut({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&ml("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),e})(),m7=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=Ut({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),e})(),b7=(()=>{var t;class e{constructor(){this._listeners=[]}notify(i,r){for(let o of this._listeners)o(i,r)}listen(i){return this._listeners.push(i),()=>{this._listeners=this._listeners.filter(r=>i!==r)}}ngOnDestroy(){this._listeners=[]}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const y7=new bt("CdkAccordion");let ETe=0,ATe=(()=>{var t;class e{get expanded(){return this._expanded}set expanded(i){i=ui(i),this._expanded!==i&&(this._expanded=i,this.expandedChange.emit(i),i?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(i){this._disabled=ui(i)}constructor(i,r,o){this.accordion=i,this._changeDetectorRef=r,this._expansionDispatcher=o,this._openCloseAllSubscription=ce.EMPTY,this.closed=new rn,this.opened=new rn,this.destroyed=new rn,this.expandedChange=new rn,this.id="cdk-accordion-child-"+ETe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=o.listen((s,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(i=>{this.disabled||(this.expanded=i)})}}return(t=e).\u0275fac=function(i){return new(i||t)(He(y7,12),He(qr),He(b7))},t.\u0275dir=Ut({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[di([{provide:y7,useValue:void 0}])]}),e})();const CTe=["body"];function TTe(t,e){}const MTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],ITe=["mat-expansion-panel-header","*","mat-action-row"];function DTe(t,e){1&t&&Ln(0,"span",2),2&t&&Lt("@indicatorRotate",Pn()._getExpandedState())}const RTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],kTe=["mat-panel-title","mat-panel-description","*"],v7=new bt("MAT_ACCORDION"),x7="225ms cubic-bezier(0.4,0.0,0.2,1)",w7={indicatorRotate:Mf("indicatorRotate",[rc("collapsed, void",fo({transform:"rotate(0deg)"})),rc("expanded",fo({transform:"rotate(180deg)"})),Fc("expanded <=> collapsed, void => collapsed",ic(x7))]),bodyExpansion:Mf("bodyExpansion",[rc("collapsed, void",fo({height:"0px",visibility:"hidden"})),rc("expanded",fo({height:"*",visibility:""})),Fc("expanded <=> collapsed, void => collapsed",ic(x7))])},E7=new bt("MAT_EXPANSION_PANEL");let OTe=(()=>{var t;class e{constructor(i,r){this._template=i,this._expansionPanel=r}}return(t=e).\u0275fac=function(i){return new(i||t)(He($a),He(E7,8))},t.\u0275dir=Ut({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),PTe=0;const A7=new bt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let S7=(()=>{var t;class e extends ATe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(i){this._hideToggle=ui(i)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(i){this._togglePosition=i}constructor(i,r,o,s,a,c,l){super(i,r,o),this._viewContainerRef=s,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new rn,this.afterCollapse=new rn,this._inputChanges=new Ve,this._headerId="mat-expansion-panel-header-"+PTe++,this._bodyAnimationDone=new Ve,this.accordion=i,this._document=a,this._bodyAnimationDone.pipe(pt((d,h)=>d.fromState===h.fromState&&d.toState===h.toState)).subscribe(d=>{"void"!==d.fromState&&("expanded"===d.toState?this.afterExpand.emit():"collapsed"===d.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(tc(null),yi(()=>this.expanded&&!this._portal),er(1)).subscribe(()=>{this._portal=new HE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(i){this._inputChanges.next(i)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const i=this._document.activeElement,r=this._body.nativeElement;return i===r||r.contains(i)}return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(He(v7,12),He(qr),He(b7),He(Wo),He(Wn),He(Hr,8),He(A7,8))},t.\u0275cmp=vn({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&function Kr(t,e,n,i){const r=gi();if(r.firstCreatePass){const o=Ri();e3(r,new JB(e,n,i),o.index),function dZ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}QB(r,Tt(),n)}(o,OTe,5),2&i){let s;Nn(s=Fn())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&Li(CTe,5),2&i){let o;Nn(o=Fn())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&kn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[di([{provide:v7,useValue:void 0},{provide:E7,useExisting:t}]),_n,Mr],ngContentSelectors:ITe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(zr(MTe),Rn(0),At(1,"div",0,1),bn("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),At(3,"div",2),Rn(4,1),mn(5,TTe,0,0,"ng-template",3),Mt(),Rn(6,2),Mt()),2&i&&(Dt(1),Lt("@bodyExpansion",r._getExpandedState())("id",r.id),Ai("aria-labelledby",r._headerId),Dt(4),Lt("cdkPortalOutlet",r._portal))},dependencies:[zE],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[w7.bodyExpansion]},changeDetection:0}),e})();class NTe{}const FTe=FE(NTe);let LTe=(()=>{var t;class e extends FTe{constructor(i,r,o,s,a,c,l){super(),this.panel=i,this._element=r,this._focusMonitor=o,this._changeDetectorRef=s,this._animationMode=c,this._parentChangeSubscription=ce.EMPTY;const d=i.accordion?i.accordion._stateChanges.pipe(yi(h=>!(!h.hideToggle&&!h.togglePosition))):$e;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=no(i.opened,i.closed,d,i._inputChanges.pipe(yi(h=>!!(h.hideToggle||h.disabled||h.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),i.closed.pipe(yi(()=>i._containsFocus())).subscribe(()=>o.focusVia(r,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const i=this._isExpanded();return i&&this.expandedHeight?this.expandedHeight:!i&&this.collapsedHeight?this.collapsedHeight:null}_keydown(i){switch(i.keyCode){case 32:case 13:Nc(i)||(i.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(i))}}focus(i,r){i?this._focusMonitor.focusVia(this._element,i,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(i=>{i&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return(t=e).\u0275fac=function(i){return new(i||t)(He(S7,1),He(Ht),He(Uu),He(qr),He(A7,8),He(Hr,8),ma("tabindex"))},t.\u0275cmp=vn({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&bn("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(Ai("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),ew("height",r._getHeaderHeight()),kn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[_n],ngContentSelectors:kTe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(zr(RTe),At(0,"span",0),Rn(1),Rn(2,1),Rn(3,2),Mt(),mn(4,DTe,1,1,"span",1)),2&i&&(kn("mat-content-hide-toggle",!r._showToggle()),Dt(4),Lt("ngIf",r._showToggle()))},dependencies:[Mc],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[w7.indicatorRotate]},changeDetection:0}),e})();function C7(t,e,n){return n?C7(t,e).pipe(Hy(n)):new B(i=>{const r=(...s)=>i.next(1===s.length?s[0]:s),o=t(r);return j(e)?()=>e(r,o):void 0})}function iA(){return C((t,e)=>{let n=null;t._refCount++;const i=O(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}class P2 extends B{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,W(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ce;const n=this.getSubject();e.add(this.source.subscribe(O(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ce.EMPTY)}return e}refCount(){return iA()(this)}}const UTe={connector:()=>new Ve};function T7(t,e=UTe){const{connector:n}=e;return C((i,r)=>{const o=n();xi(t(function jTe(t){return new B(e=>t.subscribe(e))}(o))).subscribe(r),r.add(i.subscribe(o))})}function M7(t,e){const n=j(t)?t:()=>t;return j(e)?T7(e,{connector:n}):i=>new P2(i,n)}function N2(...t){const e=tn(t);return C((n,i)=>{const r=t.length,o=new Array(r);let s=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)xi(t[c]).subscribe(O(i,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(st))&&(s=null))},L));n.subscribe(O(i,c=>{if(a){const l=[c,...o];i.next(e?e(...l):l)}}))})}const{isArray:zTe}=Array;function GTe(t){return 1===t.length&&zTe(t[0])?t[0]:t}function D7(...t){const e=tn(t);return e?Qe(D7(...t),Hy(e)):C((n,i)=>{S5([n,...GTe(t)])(i)})}const $Te=["youtubeContainer"];let O7=(()=>{var t;class e{get videoId(){return this._videoId.value}set videoId(i){this._videoId.next(i)}get height(){return this._height.value}set height(i){this._height.next(i||390)}get width(){return this._width.value}set width(i){this._width.next(i||640)}set startSeconds(i){this._startSeconds.next(i)}set endSeconds(i){this._endSeconds.next(i)}set suggestedQuality(i){this._suggestedQuality.next(i)}get playerVars(){return this._playerVars.value}set playerVars(i){this._playerVars.next(i)}get disableCookies(){return this._disableCookies.value}set disableCookies(i){this._disableCookies.next(!!i)}constructor(i,r){this._ngZone=i,this._youtubeContainer=new Ve,this._destroyed=new Ve,this._playerChanges=new Q(void 0),this._videoId=new Q(void 0),this._height=new Q(390),this._width=new Q(640),this._startSeconds=new Q(void 0),this._endSeconds=new Q(void 0),this._suggestedQuality=new Q(void 0),this._playerVars=new Q(void 0),this._disableCookies=new Q(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=xu(r)}ngOnInit(){if(!this._isBrowser)return;let i=Yt(!0);if(!window.YT||!window.YT.Player){const s=new Ve;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>s.next(!0))},i=s.pipe(er(1),tc(!1))}const r=this._disableCookies.pipe(ue(s=>s?"https://www.youtube-nocookie.com":void 0)),o=function qTe(t,e,n,i,r,o,s,a){const c=Qa([e,n,s]).pipe(N2(Qa([r,o])),ue(([l,d])=>{const[h,p,m]=l,[x,D]=d;if(h||m?.list&&m?.listType)return{videoId:h,playerVars:m,width:x,height:D,host:p}}));return Qa([t,c,Yt(a)]).pipe(function JTe(t){return Qe(D7(t),function WTe(t){return C((e,n)=>{let i=!1,r=0;e.subscribe(O(n,o=>(i||(i=!t(o,r++)))&&n.next(o)))})}(([e,n])=>!n),ue(([e])=>e))}(i),function I7(t,e){return C(function HTe(t,e,n,i,r){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(O(s,d=>{const h=l++;c=a?t(c,d,h):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}(ZTe,void 0),pt())}(this._youtubeContainer,this._videoId,r,i,this._width,this._height,this._playerVars,this._ngZone).pipe(Bi(s=>{this._playerChanges.next(s)}),function KTe(t){return pe(e=>e?P7(e)?Yt(e):new B(n=>{let i=!1,r=!1;const o=s=>{r=!0,i||(s.target.removeEventListener("onReady",o),n.next(s.target))};return e.addEventListener("onReady",o),()=>{i=!0,r||t(e)}}).pipe(er(1),tc(void 0)):Yt(void 0))}(s=>{P7(s)||s.destroy()}),gr(this._destroyed),function VTe(t){return t?e=>T7(t)(e):e=>M7(new Ve)(e)}());o.subscribe(s=>{this._player=s,s&&this._pendingPlayerState&&this._initializePlayer(s,this._pendingPlayerState),this._pendingPlayerState=void 0}),function XTe(t,e,n){Qa([t,e,n]).subscribe(([i,r,o])=>i&&i.setSize(r,o))}(o,this._width,this._height),function YTe(t,e){Qa([t,e]).subscribe(([n,i])=>n&&i&&n.setPlaybackQuality(i))}(o,this._suggestedQuality),function QTe(t,e,n,i,r,o){const s=Qa([n,i]).pipe(ue(([d,h])=>({startSeconds:d,endSeconds:h}))),a=s.pipe(F2(t,d=>!!d&&!function eMe(t){const e=t.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),c=e.pipe(F2(t,(d,h)=>!!d&&d.videoId!==h));no(t.pipe(F2(Qa([e,s]),([d,h],p)=>!(!p||d==p.videoId&&!h.startSeconds&&!h.endSeconds))),c,a).pipe(N2(Qa([t,e,s,r])),ue(([d,h])=>h),gr(o)).subscribe(([d,h,p,m])=>{!h||!d||(d.videoId=h,d.cueVideoById({videoId:h,suggestedQuality:m,...p}))})}(o,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),o.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(i,r){this._player?this._player.seekTo(i,r):this._getPendingState().seek={seconds:i,allowSeekAhead:r}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(i){this._player?this._player.setVolume(i):this._getPendingState().volume=i}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(i){if(this._player)return this._player.setPlaybackRate(i);this._getPendingState().playbackRate=i}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(i,r){const{playbackState:o,playbackRate:s,volume:a,muted:c,seek:l}=r;switch(o){case YT.PlayerState.PLAYING:i.playVideo();break;case YT.PlayerState.PAUSED:i.pauseVideo();break;case YT.PlayerState.CUED:i.stopVideo()}null!=s&&i.setPlaybackRate(s),null!=a&&i.setVolume(a),null!=c&&(c?i.mute():i.unMute()),null!=l&&i.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(i){return this._playerChanges.pipe(Je(r=>r?C7(o=>{r.addEventListener(i,o)},o=>{try{r.removeEventListener&&r.removeEventListener(i,o)}catch{}}):Yt()),r=>new B(o=>r.subscribe({next:s=>this._ngZone.run(()=>o.next(s)),error:s=>o.error(s),complete:()=>o.complete()})),gr(this._destroyed))}}return(t=e).\u0275fac=function(i){return new(i||t)(He(an),He(ba))},t.\u0275cmp=vn({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Li($Te,5),2&i){let o;Nn(o=Fn())&&(r.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&Ln(0,"div",null,0)},encapsulation:2,changeDetection:0}),e})();function ZTe(t,[e,n,i]){if(t&&n&&(t.playerVars!==n.playerVars||t.host!==n.host))t.destroy();else{if(!n)return void(t&&t.destroy());if(t)return t}const r=i.runOutsideAngular(()=>new YT.Player(e,n));return r.videoId=n.videoId,r.playerVars=n.playerVars,r.host=n.host,r}function P7(t){return"getPlayerStatus"in t}function F2(t,e){return Qe(N2(t),yi(([n,i])=>e(i,n)),ue(([n])=>n))}function N7(t=nMe){return C((e,n)=>{let i=!1;e.subscribe(O(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function nMe(){return new Vy}let Of={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const L7=/[&<>"']/,rMe=new RegExp(L7.source,"g"),B7=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,oMe=new RegExp(B7.source,"g"),sMe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},j7=t=>sMe[t];function hs(t,e){if(e){if(L7.test(t))return t.replace(rMe,j7)}else if(B7.test(t))return t.replace(oMe,j7);return t}const aMe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function U7(t){return t.replace(aMe,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const cMe=/(^|[^\[])\^/g;function tr(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(i,r)=>(r=(r=r.source||r).replace(cMe,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}const lMe=/[^\w:]/g,dMe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function V7(t,e,n){if(t){let i;try{i=decodeURIComponent(U7(n)).replace(lMe,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!dMe.test(n)&&(n=function pMe(t,e){rA[" "+t]||(rA[" "+t]=uMe.test(t)?t+"/":sA(t,"/",!0));const n=-1===(t=rA[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(hMe,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(fMe,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const rA={},uMe=/^[^:]+:\/*[^/]*$/,hMe=/^([^:]+:)[\s\S]*$/,fMe=/^([^:]+:\/*[^/]*)[\s\S]*$/,oA={exec:function(){}};function H7(t,e){const i=t.replace(/\|/g,(o,s,a)=>{let c=!1,l=s;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function sA(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const o=t.charAt(i-r-1);if(o!==e||n){if(o===e||!n)break;r++}else r++}return t.slice(0,i-r)}function z7(t,e){if(e<1)return"";let n="";for(;e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function G7(t,e,n,i){const r=e.href,o=e.title?hs(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:o,text:hs(s)}}class L2{constructor(e){this.options=e||Of}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:sA(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function _Me(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[s]=o;return s.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=sA(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:o,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i,r,o,s,a,c,l,d,h,p,m,x,D=n[1].trim();const F=D.length>1,G={type:"list",raw:"",ordered:F,start:F?+D.slice(0,-1):"",loose:!1,items:[]};D=F?`\\d{1,9}\\${D.slice(-1)}`:`\\${D}`,this.options.pedantic&&(D=F?D:"[*+-]");const q=new RegExp(`^( {0,3}${D})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(x=!1,(n=q.exec(e))&&!this.rules.block.hr.test(e));){if(i=n[0],e=e.substring(i.length),d=n[2].split("\n",1)[0].replace(/^\t+/,ve=>" ".repeat(3*ve.length)),h=e.split("\n",1)[0],this.options.pedantic?(s=2,m=d.trimLeft()):(s=n[2].search(/[^ ]/),s=s>4?1:s,m=d.slice(s),s+=n[1].length),c=!1,!d&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),x=!0),!x){const ve=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Oe=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Xe=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),rt=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(p=e.split("\n",1)[0],h=p,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Xe.test(h)||rt.test(h)||ve.test(h)||Oe.test(e)));){if(h.search(/[^ ]/)>=s||!h.trim())m+="\n"+h.slice(s);else{if(c||d.search(/[^ ]/)>=4||Xe.test(d)||rt.test(d)||Oe.test(d))break;m+="\n"+h}!c&&!h.trim()&&(c=!0),i+=p+"\n",e=e.substring(p.length+1),d=h.slice(s)}}G.loose||(l?G.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(m),r&&(o="[ ] "!==r[0],m=m.replace(/^\[[ xX]\] +/,""))),G.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:m}),G.raw+=i}G.items[G.items.length-1].raw=i.trimRight(),G.items[G.items.length-1].text=m.trimRight(),G.raw=G.raw.trimRight();const ee=G.items.length;for(a=0;a<ee;a++)if(this.lexer.state.top=!1,G.items[a].tokens=this.lexer.blockTokens(G.items[a].text,[]),!G.loose){const ve=G.items[a].tokens.filter(Xe=>"space"===Xe.type),Oe=ve.length>0&&ve.some(Xe=>/\n.*\n/.test(Xe.raw));G.loose=Oe}if(G.loose)for(a=0;a<ee;a++)G.items[a].loose=!0;return G}}html(e){const n=this.rules.block.html.exec(e);if(n){const i={type:"html",raw:n[0],pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(n[0]):hs(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:o}}}table(e){const n=this.rules.block.table.exec(e);if(n){const i={type:"table",header:H7(n[1]).map(r=>({text:r})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=n[0];let o,s,a,c,r=i.align.length;for(o=0;o<r;o++)i.align[o]=/^ *-+: *$/.test(i.align[o])?"right":/^ *:-+: *$/.test(i.align[o])?"center":/^ *:-+ *$/.test(i.align[o])?"left":null;for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=H7(i.rows[o],i.header.length).map(l=>({text:l}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(r=i.rows.length,s=0;s<r;s++)for(c=i.rows[s],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:hs(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):hs(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=sA(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function mMe(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let i=0,r=0;for(;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return-1}(n[2],"()");if(s>-1){const c=(0===n[0].indexOf("!")?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let r=n[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),G7(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return G7(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){const s=r[0].length-1;let a,c,l=s,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+s);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=a.length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&s%3&&!((s+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const p=e.slice(0,s+r.index+(r[0].length-a.length)+c);if(Math.min(s,c)%2){const x=p.slice(1,-1);return{type:"em",raw:p,text:x,tokens:this.lexer.inlineTokens(x)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=hs(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const i=this.rules.inline.autolink.exec(e);if(i){let r,o;return"@"===i[2]?(r=hs(this.options.mangle?n(i[1]):i[1]),o="mailto:"+r):(r=hs(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,n){let i;if(i=this.rules.inline.url.exec(e)){let r,o;if("@"===i[2])r=hs(this.options.mangle?n(i[0]):i[0]),o="mailto:"+r;else{let s;do{s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(s!==i[0]);r=hs(i[0]),o="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,n){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):hs(i[0]):i[0]:hs(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Tn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:oA,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Tn.def=tr(Tn.def).replace("label",Tn._label).replace("title",Tn._title).getRegex(),Tn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Tn.listItemStart=tr(/^( *)(bull) */).replace("bull",Tn.bullet).getRegex(),Tn.list=tr(Tn.list).replace(/bull/g,Tn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Tn.def.source+")").getRegex(),Tn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Tn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Tn.html=tr(Tn.html,"i").replace("comment",Tn._comment).replace("tag",Tn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Tn.paragraph=tr(Tn._paragraph).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.blockquote=tr(Tn.blockquote).replace("paragraph",Tn.paragraph).getRegex(),Tn.normal={...Tn},Tn.gfm={...Tn.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Tn.gfm.table=tr(Tn.gfm.table).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.gfm.paragraph=tr(Tn._paragraph).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Tn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.pedantic={...Tn.normal,html:tr("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Tn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:oA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:tr(Tn.normal._paragraph).replace("hr",Tn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Tn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const cn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:oA,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:oA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function bMe(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function W7(t){let n,i,e="";const r=t.length;for(n=0;n<r;n++)i=t.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}cn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",cn.punctuation=tr(cn.punctuation).replace(/punctuation/g,cn._punctuation).getRegex(),cn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,cn.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,cn._comment=tr(Tn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),cn.emStrong.lDelim=tr(cn.emStrong.lDelim).replace(/punct/g,cn._punctuation).getRegex(),cn.emStrong.rDelimAst=tr(cn.emStrong.rDelimAst,"g").replace(/punct/g,cn._punctuation).getRegex(),cn.emStrong.rDelimUnd=tr(cn.emStrong.rDelimUnd,"g").replace(/punct/g,cn._punctuation).getRegex(),cn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,cn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,cn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,cn.autolink=tr(cn.autolink).replace("scheme",cn._scheme).replace("email",cn._email).getRegex(),cn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,cn.tag=tr(cn.tag).replace("comment",cn._comment).replace("attribute",cn._attribute).getRegex(),cn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,cn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,cn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,cn.link=tr(cn.link).replace("label",cn._label).replace("href",cn._href).replace("title",cn._title).getRegex(),cn.reflink=tr(cn.reflink).replace("label",cn._label).replace("ref",Tn._label).getRegex(),cn.nolink=tr(cn.nolink).replace("ref",Tn._label).getRegex(),cn.reflinkSearch=tr(cn.reflinkSearch,"g").replace("reflink",cn.reflink).replace("nolink",cn.nolink).getRegex(),cn.normal={...cn},cn.pedantic={...cn.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:tr(/^!?\[(label)\]\((.*?)\)/).replace("label",cn._label).getRegex(),reflink:tr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",cn._label).getRegex()},cn.gfm={...cn.normal,escape:tr(cn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},cn.gfm.url=tr(cn.gfm.url,"i").replace("email",cn.gfm._extended_email).getRegex(),cn.breaks={...cn.gfm,br:tr(cn.br).replace("{2,}","*").getRegex(),text:tr(cn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class zu{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Of,this.options.tokenizer=this.options.tokenizer||new L2,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Tn.normal,inline:cn.normal};this.options.pedantic?(n.block=Tn.pedantic,n.inline=cn.pedantic):this.options.gfm&&(n.block=Tn.gfm,n.inline=this.options.breaks?cn.breaks:cn.gfm),this.tokenizer.rules=n}static get rules(){return{block:Tn,inline:cn}}static lex(e,n){return new zu(n).lex(e)}static lexInline(e,n){return new zu(n).inlineTokens(e)}lex(e){let n;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){let i,r,o,s;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(d){l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=n[n.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,o,a,c,l,s=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+z7("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+z7("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(s));)s=s.slice(0,a.index+a[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e,W7)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,W7))){e=e.substring(i.raw.length),n.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(function(m){p=m.call({lexer:this},h),"number"==typeof p&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o,bMe)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return n}}class g0{constructor(e){this.options=e||Of}code(e,n,i){const r=(n||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,r);null!=o&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+hs(r)+'">'+(i?e:hs(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:hs(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,n,i,r){return this.options.headerIds?`<h${n} id="${this.options.headerPrefix+r.slug(i)}">${e}</h${n}>\n`:`<h${n}>${e}</h${n}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){if(null===(e=V7(this.options.sanitize,this.options.baseUrl,e)))return i;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>",r}image(e,n,i){if(null===(e=V7(this.options.sanitize,this.options.baseUrl,e)))return i;let r=`<img src="${e}" alt="${i}"`;return n&&(r+=` title="${n}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class $7{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class X7{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{r++,i=e+"-"+r}while(this.seen.hasOwnProperty(i))}return n||(this.seen[e]=r,this.seen[i]=0),i}slug(e,n={}){const i=this.serialize(e);return this.getNextSafeSlug(i,n.dryrun)}}class Gu{constructor(e){this.options=e||Of,this.options.renderer=this.options.renderer||new g0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new $7,this.slugger=new X7}static parse(e,n){return new Gu(n).parse(e)}static parseInline(e,n){return new Gu(n).parseInline(e)}parse(e,n=!0){let r,o,s,a,c,l,d,h,p,m,x,D,F,G,q,ee,ve,Oe,Xe,i="";const rt=e.length;for(r=0;r<rt;r++)if(m=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(Xe=this.options.extensions.renderers[m.type].call({parser:this},m),!1!==Xe||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)))i+=Xe||"";else switch(m.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(m.tokens),m.depth,U7(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(m.text,m.lang,m.escaped);continue;case"table":for(h="",d="",a=m.header.length,o=0;o<a;o++)d+=this.renderer.tablecell(this.parseInline(m.header[o].tokens),{header:!0,align:m.align[o]});for(h+=this.renderer.tablerow(d),p="",a=m.rows.length,o=0;o<a;o++){for(l=m.rows[o],d="",c=l.length,s=0;s<c;s++)d+=this.renderer.tablecell(this.parseInline(l[s].tokens),{header:!1,align:m.align[s]});p+=this.renderer.tablerow(d)}i+=this.renderer.table(h,p);continue;case"blockquote":p=this.parse(m.tokens),i+=this.renderer.blockquote(p);continue;case"list":for(x=m.ordered,D=m.start,F=m.loose,a=m.items.length,p="",o=0;o<a;o++)q=m.items[o],ee=q.checked,ve=q.task,G="",q.task&&(Oe=this.renderer.checkbox(ee),F?q.tokens.length>0&&"paragraph"===q.tokens[0].type?(q.tokens[0].text=Oe+" "+q.tokens[0].text,q.tokens[0].tokens&&q.tokens[0].tokens.length>0&&"text"===q.tokens[0].tokens[0].type&&(q.tokens[0].tokens[0].text=Oe+" "+q.tokens[0].tokens[0].text)):q.tokens.unshift({type:"text",text:Oe}):G+=Oe),G+=this.parse(q.tokens,F),p+=this.renderer.listitem(G,ve,ee);i+=this.renderer.list(p,x,D);continue;case"html":i+=this.renderer.html(m.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(m.tokens));continue;case"text":for(p=m.tokens?this.parseInline(m.tokens):m.text;r+1<rt&&"text"===e[r+1].type;)m=e[++r],p+="\n"+(m.tokens?this.parseInline(m.tokens):m.text);i+=n?this.renderer.paragraph(p):p;continue;default:{const nt='Token with "'+m.type+'" type was not found.';if(this.options.silent)return void console.error(nt);throw new Error(nt)}}return i}parseInline(e,n){n=n||this.renderer;let r,o,s,i="";const a=e.length;for(r=0;r<a;r++)if(o=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))i+=s||"";else switch(o.type){case"escape":case"text":i+=n.text(o.text);break;case"html":i+=n.html(o.text);break;case"link":i+=n.link(o.href,o.title,this.parseInline(o.tokens,n));break;case"image":i+=n.image(o.href,o.title,o.text);break;case"strong":i+=n.strong(this.parseInline(o.tokens,n));break;case"em":i+=n.em(this.parseInline(o.tokens,n));break;case"codespan":i+=n.codespan(o.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(o.tokens,n));break;default:{const c='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return i}}class aA{constructor(e){this.options=e||Of}preprocess(e){return e}postprocess(e){return e}}function Y7(t,e){return(n,i,r)=>{"function"==typeof i&&(r=i,i=null);const o={...i},s=function yMe(t,e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const r="<p>An error occurred:</p><pre>"+hs(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):n?void n(null,r):r}if(e)return Promise.reject(i);if(!n)throw i;n(i)}}((i={...Mn.defaults,...o}).silent,i.async,r);if(typeof n>"u"||null===n)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function gMe(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const a=i.highlight;let c;try{i.hooks&&(n=i.hooks.preprocess(n)),c=t(n,i)}catch(h){return s(h)}const l=function(h){let p;if(!h)try{i.walkTokens&&Mn.walkTokens(c,i.walkTokens),p=e(c,i),i.hooks&&(p=i.hooks.postprocess(p))}catch(m){h=m}return i.highlight=a,h?s(h):r(null,p)};if(!a||a.length<3||(delete i.highlight,!c.length))return l();let d=0;return Mn.walkTokens(c,function(h){"code"===h.type&&(d++,setTimeout(()=>{a(h.text,h.lang,function(p,m){if(p)return l(p);null!=m&&m!==h.text&&(h.text=m,h.escaped=!0),d--,0===d&&l()})},0))}),void(0===d&&l())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(a=>t(a,i)).then(a=>i.walkTokens?Promise.all(Mn.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>e(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(s);try{i.hooks&&(n=i.hooks.preprocess(n));const a=t(n,i);i.walkTokens&&Mn.walkTokens(a,i.walkTokens);let c=e(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return s(a)}}}function Mn(t,e,n){return Y7(zu.lex,Gu.parse)(t,e,n)}xe(aA,"passThroughHooks",new Set(["preprocess","postprocess"])),Mn.options=Mn.setOptions=function(t){return function iMe(t){Of=t}(Mn.defaults={...Mn.defaults,...t}),Mn},Mn.getDefaults=function F7(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Mn.defaults=Of,Mn.use=function(...t){const e=Mn.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(n=>{const i={...n};if(i.async=Mn.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers[r.name];e.renderers[r.name]=o?function(...s){let a=r.renderer.apply(this,s);return!1===a&&(a=o.apply(this,s)),a}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=Mn.defaults.renderer||new g0;for(const o in n.renderer){const s=r[o];r[o]=(...a)=>{let c=n.renderer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.renderer=r}if(n.tokenizer){const r=Mn.defaults.tokenizer||new L2;for(const o in n.tokenizer){const s=r[o];r[o]=(...a)=>{let c=n.tokenizer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.tokenizer=r}if(n.hooks){const r=Mn.defaults.hooks||new aA;for(const o in n.hooks){const s=r[o];r[o]=aA.passThroughHooks.has(o)?a=>{if(Mn.defaults.async)return Promise.resolve(n.hooks[o].call(r,a)).then(l=>s.call(r,l));const c=n.hooks[o].call(r,a);return s.call(r,c)}:(...a)=>{let c=n.hooks[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.hooks=r}if(n.walkTokens){const r=Mn.defaults.walkTokens;i.walkTokens=function(o){let s=[];return s.push(n.walkTokens.call(this,o)),r&&(s=s.concat(r.call(this,o))),s}}Mn.setOptions(i)})},Mn.walkTokens=function(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(Mn,i)),i.type){case"table":for(const r of i.header)n=n.concat(Mn.walkTokens(r.tokens,e));for(const r of i.rows)for(const o of r)n=n.concat(Mn.walkTokens(o.tokens,e));break;case"list":n=n.concat(Mn.walkTokens(i.items,e));break;default:Mn.defaults.extensions&&Mn.defaults.extensions.childTokens&&Mn.defaults.extensions.childTokens[i.type]?Mn.defaults.extensions.childTokens[i.type].forEach(function(r){n=n.concat(Mn.walkTokens(i[r],e))}):i.tokens&&(n=n.concat(Mn.walkTokens(i.tokens,e)))}return n},Mn.parseInline=Y7(zu.lexInline,Gu.parseInline),Mn.Parser=Gu,Mn.parser=Gu.parse,Mn.Renderer=g0,Mn.TextRenderer=$7,Mn.Lexer=zu,Mn.lexer=zu.lex,Mn.Tokenizer=L2,Mn.Slugger=X7,Mn.Hooks=aA,Mn.parse=Mn;const vMe=["*"];let K7=(()=>{var t;class e{constructor(){this._buttonClick$=new Ve,this.copied$=this._buttonClick$.pipe(Je(()=>no(Yt(!0),p2(3e3).pipe(E2(!1)))),pt(),ks(1)),this.copiedText$=this.copied$.pipe(tc(!1),ue(i=>i?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=vn({type:t,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(At(0,"button",0),bn("click",function(){return r.onCopyToClipboardClick()}),Yr(1,"async"),li(2),Yr(3,"async"),Mt()),2&i&&(kn("copied",Go(1,3,r.copied$)),Dt(2),Co(Go(3,5,r.copiedText$)))},dependencies:[Hb],encapsulation:2,changeDetection:0}),e})();class EMe{}var B2=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(B2||{});class SMe{}const q7=new bt("SECURITY_CONTEXT");let j2=(()=>{var t;class e{get options(){return this._options}set options(i){this._options={...this.DEFAULT_MARKED_OPTIONS,...i}}get renderer(){return this.options.renderer}set renderer(i){this.options.renderer=i}constructor(i,r,o,s,a,c){this.platform=i,this.securityContext=r,this.http=o,this.clipboardOptions=s,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new g0},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Ve,this.reload$=this._reload$.asObservable(),this.options=a}parse(i,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:o,inline:s,emoji:a,mermaid:c,disableSanitizer:l}=r,d={...this.options,...r.markedOptions};c&&(this.renderer=this.extendRenderer(d.renderer||new g0));const h=this.trimIndentation(i),p=o?this.decodeHtml(h):h,m=a?this.parseEmoji(p):p,x=this.parseMarked(m,d,s);return(l?x:this.sanitizer.sanitize(this.securityContext,x))||""}render(i,r=this.DEFAULT_RENDER_OPTIONS,o){const{clipboard:s,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=r;s&&this.renderClipboard(i,o,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...a}),c&&this.renderKatex(i,{...this.DEFAULT_KATEX_OPTIONS,...l}),d&&this.renderMermaid(i,{...this.DEFAULT_MERMAID_OPTIONS,...h}),this.highlight(i)}reload(){this._reload$.next()}getSource(i){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(i,{responseType:"text"}).pipe(ue(r=>this.handleExtension(i,r)))}highlight(i){if(!xu(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;i||(i=document);const r=i.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,o=>o.classList.add("language-none")),Prism.highlightAllUnder(i)}decodeHtml(i){if(!xu(this.platform))return i;const r=document.createElement("textarea");return r.innerHTML=i,r.value}extendRenderer(i){const r=i;if(!0===r.\u0275NgxMarkdownRendererExtended)return i;const o=i.code;return i.code=function(s,a,c){return"mermaid"===a?`<div class="mermaid">${s}</div>`:o.call(this,s,a,c)},r.\u0275NgxMarkdownRendererExtended=!0,i}handleExtension(i,r){const o=i.lastIndexOf("://"),s=o>-1?i.substring(o+4):i,a=s.lastIndexOf("/"),c=a>-1?s.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&"md"!==d?"```"+d+"\n"+r+"\n```":r}parseMarked(i,r,o=!1){return o?Mn.parseInline(i,r):Mn.parse(i,r)}parseEmoji(i){if(!xu(this.platform))return i;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(i)}renderKatex(i,r){if(xu(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(i,r)}}renderClipboard(i,r,o){if(!xu(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:a}=o,c=i.querySelectorAll("pre");for(let l=0;l<c.length;l++){const d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);const p=document.createElement("div");let m,x;p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.opacity="0",p.style.transition="opacity 250ms ease-out",h.insertAdjacentElement("beforeend",p),d.onmouseover=()=>p.style.opacity="1",d.onmouseout=()=>p.style.opacity="0",m=s?r.createComponent(s).hostView:a?r.createEmbeddedView(a):r.createComponent(K7).hostView,m.rootNodes.forEach(D=>{D.onmouseover=()=>p.style.opacity="1",p.appendChild(D),x=new ClipboardJS(D,{text:()=>d.innerText})}),m.onDestroy(()=>x.destroy())}}renderMermaid(i,r=this.DEFAULT_MERMAID_OPTIONS){if(!xu(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const o=i.querySelectorAll(".mermaid");0!==o.length&&(mermaid.initialize(r),mermaid.init(o))}trimIndentation(i){if(!i)return"";let r;return i.split("\n").map(o=>{let s=r;return o.length>0&&(s=isNaN(s)?o.search(/\S|$/):Math.min(o.search(/\S|$/),s)),isNaN(r)&&(r=s),s?o.substring(s):o}).join("\n")}}return(t=e).\u0275fac=function(i){return new(i||t)(it(ba),it(q7),it(Vu,8),it(EMe,8),it(SMe,8),it(Wb))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),J7=(()=>{var t;class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(i){this._disableSanitizer=this.coerceBooleanProperty(i)}get inline(){return this._inline}set inline(i){this._inline=this.coerceBooleanProperty(i)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(i){this._srcRelativeLink=this.coerceBooleanProperty(i)}get clipboard(){return this._clipboard}set clipboard(i){this._clipboard=this.coerceBooleanProperty(i)}get emoji(){return this._emoji}set emoji(i){this._emoji=this.coerceBooleanProperty(i)}get katex(){return this._katex}set katex(i){this._katex=this.coerceBooleanProperty(i)}get mermaid(){return this._mermaid}set mermaid(i){this._mermaid=this.coerceBooleanProperty(i)}get lineHighlight(){return this._lineHighlight}set lineHighlight(i){this._lineHighlight=this.coerceBooleanProperty(i)}get lineNumbers(){return this._lineNumbers}set lineNumbers(i){this._lineNumbers=this.coerceBooleanProperty(i)}get commandLine(){return this._commandLine}set commandLine(i){this._commandLine=this.coerceBooleanProperty(i)}constructor(i,r,o){this.element=i,this.markdownService=r,this.viewContainerRef=o,this.error=new rn,this.load=new rn,this.ready=new rn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new Ve}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(gr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(i,r=!1){let o;this.src&&this.srcRelativeLink&&(o={baseUrl:new URL(this.src,location.origin).pathname});const a={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},c=this.markdownService.parse(i,{decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:o,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=c,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,a,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(i){return null!=i&&"false"!=`${String(i)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:i=>{this.render(i),this.load.emit(i)},error:i=>this.error.emit(i)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,B2.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,B2.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(i,r){const o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++){const a=r instanceof Array?r:[r];o.item(s).classList.add(...a)}}setPluginOptions(i,r){const o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++)Object.keys(r).forEach(a=>{const c=r[a];if(c){const l=this.toLispCase(a);o.item(s).setAttribute(l,c.toString())}})}toLispCase(i){const r=i.match(/([A-Z])/g);if(!r)return i;let o=i.toString();for(let s=0,a=r.length;s<a;s++)o=o.replace(new RegExp(r[s]),"-"+r[s].toLowerCase());return"-"===o.slice(0,1)&&(o=o.slice(1)),o}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Ht),He(j2),He(Wo))},t.\u0275cmp=vn({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[Mr],ngContentSelectors:vMe,decls:1,vars:0,template:function(i,r){1&i&&(zr(),Rn(0))},encapsulation:2}),e})();var Z7;!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(Z7||(Z7={}));let Q7=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=Ut({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]}),e})();function wg(t){return!0===t}function ea(t){return null===t||typeof t>"u"}function fs(t){return!ea(t)}function U2(t){return!!t}function oW(t){return ea(t)?t:JSON.parse(JSON.stringify(t))}function sW(t){return fs(t)&&"object"==typeof t&&function V2(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}const _Ie="NGXS_COMPUTED_OPTION",lW="NGXS_DATA_META",H2="NGXS_META",dW="NGXS_ARGUMENT_REGISTRY_META";let uW=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new Q(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(it(kl,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();function b0(t){return t[lW]}let sc=(()=>{class t{constructor(n,i,r){t.store=n.get(kl),t.ngZone=n.get(an),t.factory=i,t.context=r,t.computed=n.get(uW),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(it(fr),it(I5),it(D5))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();class $r{constructor(){$r.statesCachedMeta.clear()}static createStateContext(e){return sc.context.createStateContext(e)}static ensureMappedState(e){if(ea(sc.factory)||ea(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(fs(e.name)?$r.statesCachedMeta.get(e.name):null)||$r.ensureMeta(e)}static getRepositoryByInstance(e){const i=b0($r.getStateClassByInstance(e))??null;if(ea(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=$r.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[o,s]of r.entries()){const a=n?.getPayloadTypeByIndex(o);fs(a)&&(i[a]=s)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=$r.createPayload(n,i),o=function xIe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new o(r)}static ensureMeta(e){const n=fs(e.name)?sc.factory.states?.find(i=>i.name===e.name):null;return fs(n)&&fs(e.name)&&$r.statesCachedMeta.set(e.name,n),n}}$r.statesCachedMeta=new Map,$r.\u0275fac=function(e){return new(e||$r)},$r.\u0275prov=Et({token:$r,factory:$r.\u0275fac}),new class wIe{constructor(){this.subject=new Gh(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function Ad(t,e){const n=arguments.length>=2;return i=>i.pipe(t?yi((r,o)=>t(r,o,i)):st,er(1),n?lg(e):N7(()=>new Vy))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Gh(1)}};class AIe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${fs(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function hW(t){return t.NGXS_OPTIONS_META??{name:""}}function fW(t){const e=hW(t),n=e.children??[],r=oW(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(sW(r))return function SIe(t,e){return e.reduce((n,i)=>{const r=hW(i);if(function _0(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=fW(i),n},t??{})}(r,n);throw new AIe(r)}return r}function pW(){return`__${_Ie}__`}function mW(t){return t[pW()]??null}function gW(){return sc?.computed?.sequenceValue??0}function MIe(t){let e=!1;return gf(t)&&(e=!0),e}function z2(t){return t[dW]}class IIe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class DIe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if(U2(this.argumentMap.has(e))||U2(this.payloadMap.has(e)))throw new IIe(e,n)}}function FIe(t){return{enumerable:!0,configurable:!0,get(){const e=b0(t),n=$r.ensureMappedState(e.stateMeta);return $r.createStateContext(n)}}}const HIe={dataActionSubscribeRequired:!0},zIe=new bt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>HIe});let GIe=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[$r,sc,uW,...n]}}}return t.\u0275fac=function(n){return new(n||t)(it($r,2),it(sc,2))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),t})();function _W(){return(t,e,n)=>{!function vIe(t,e){if(!function dIe(t,e){let n=t,i=!1;if(sW(n))for(;null!==n;){if(wg(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const o=function TIe(t){return ea(mW(t))&&Object.defineProperties(t,{[pW()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),mW(t)}(this),s=o?.get(i);if(wg(s?.isObservable))return s?.value;if(ea(s)||s.sequenceId!==gW()){o.delete(i);const c=i.apply(this,r);return o.set(i,{value:c,sequenceId:gW(),isObservable:MIe(c)}),c}return s?.value},n}}const WIe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function G2(t={}){const e=function $Ie(t){const e=sc?.injector?.get(zIe,void 0,Un.Optional),n={...WIe};return fs(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function yIe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const o=r.value,s=i.toString();return r.value=function(...a){const c=this;let l=null;const d=$r.getRepositoryByInstance(c),h=d.operations;let p=h[s];const m=d.stateMeta,x=z2(o);if(ea(p)){const ee=function VIe(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(o),ve=function EIe(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let o="";for(let s=0;s<n.length;s++)fs(r?.getArgumentNameByIndex(s))?o+=r?.getArgumentNameByIndex(s):fs(r?.getPayloadTypeByIndex(s))?o+=r?.getPayloadTypeByIndex(s):o+=`$arg${s}`,s!==n.length-1&&(o+=", ");return`@${e.replace(/\./g,"/")}.${i}(${o})`}({statePath:m.path,methodName:s,argumentsNames:ee,argumentRegistry:x});p=h[s]={type:ve,options:{cancelUncompleted:e.cancelUncompleted??!1}},fs(p)&&(m.actions[p.type]=[{type:p.type,options:p.options,fn:p.type}])}$r.ensureMappedState(m).instance[p.type]=()=>(wg(e.insideZone)?sc.ngZone?.run(()=>{l=o.apply(c,a)}):l=o.apply(c,a),gf(l)&&wg(e.subscribeRequired)?Yt(null).pipe(ue(()=>l)):l);const G=$r.createAction(p,a,x),q=sc.store.dispatch(G);return gf(l)?function CIe(t,e){return zy([t,e]).pipe(ue(n=>n.pop()))}(q,l):l},r}}function bW(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function RIe(t,e){const n=t[e];return ea(z2(n))&&Object.defineProperties(n,{[dW]:{enumerable:!0,configurable:!0,value:new DIe}}),z2(n)})(e,n).createPayloadType(r,n,i)}}function YIe(){return t=>{const e=function UIe(t){if(function QMe(t){return!U2(t)}(t.hasOwnProperty(H2))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,H2,{value:e})}return function jIe(t){return t?.[H2]}(t)}(t);if(ea(e.name))throw new Error("@StateRepository should be add before decorator @State");!function PIe(t,e){(function OIe(t){const e=b0(t)??null;return(ea(e)||e?.stateClass!==t)&&function kIe(t){Object.defineProperty(t,lW,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),b0(t)}(t)).stateMeta=e}(t,e),function KIe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>oW(n)},context:FIe(t)})}(t,e,fW(t)),function LIe(t){const n=b0(t)?.stateMeta?.name??null;if(fs(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(fs(this[i]))return this[i];if(ea(sc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=sc.store.select(t).pipe(ue(r=>r),ks({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let qIe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new Ve,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})(),JIe=(()=>{class t extends qIe{get snapshot(){return this.getState()}get ctx(){return function BIe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ii(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac}),dt([_W(),se("design:type",Object),se("design:paramtypes",[])],t.prototype,"snapshot",null),dt([G2(),Gt(0,bW("patchValue")),se("design:type",Function),se("design:paramtypes",[Object]),se("design:returntype",void 0)],t.prototype,"patchState",null),dt([G2(),Gt(0,bW("stateValue")),se("design:type",Function),se("design:paramtypes",[Object]),se("design:returntype",void 0)],t.prototype,"setState",null),dt([G2(),se("design:type",Function),se("design:paramtypes",[]),se("design:returntype",void 0)],t.prototype,"reset",null),t})(),y$=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Ut({type:t,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),t})();const O0=new bt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),hP=new bt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=Wt(Wn);if(!t)throw new Error("Window is not available");return t}}),ake=new bt("ngx-data-layer",{providedIn:"root",factory:()=>function ske(t){return t?t.dataLayer=t.dataLayer||[]:null}(Wt(hP))}),v$=new bt("ngx-gtag-fn",{providedIn:"root",factory:()=>function cke(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(Wt(hP),Wt(ake))});let P0=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,o])=>Object.defineProperty(i,r,{value:o,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,o,s,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),o&&c.set("value",o),void 0!==s&&c.set("interaction",s),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",n,l):this.gtag("event",n)}catch(c){this.throw(c)}}pageView(n,i,r,o){try{const s=new Map([["page_path",n]]);i&&s.set("page_title",i),(r||this.document)&&s.set("page_location",r||this.document.location.href),o&&Object.entries(o).map(([a,c])=>s.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(s))}catch(s){this.throw(s)}}appView(n,i,r,o,s){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),o&&a.set("app_version",o),s&&a.set("app_installer_id",s),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(it(O0),it(Wn),it(v$))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lke=(()=>{class t{constructor(n,i,r,o){this.gaCategoryDirective=n,this.gaService=i,this.settings=r,this.el=o,this.gaBind="click"}set gaBind(n){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=n,this.bindSubscription=Cf(this.el.nativeElement,n).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(n){this.throw(n)}}throw(n){this.settings.enableTracing&&console&&console.warn&&console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)(He(y$,8),He(P0),He(O0),He(Ht))},t.\u0275dir=Ut({type:t,selectors:[["","gaEvent",""]],inputs:{gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent",gaBind:"gaBind"},exportAs:["gaEvent"]}),t})();const uke={provide:bM,multi:!0,useFactory:function hke(t,e,n){return zt(function*(){if(!t.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");n||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),t.uri=t.uri||`https://www.googletagmanager.com/gtag/js?id=${t.trackingCode}`,t.initCommands=t?.initCommands??[],t.initCommands.find(o=>"config"===o.command)||t.initCommands.unshift({command:"config",values:[t.trackingCode]}),t.initCommands.find(o=>"js"===o.command)||t.initCommands.unshift({command:"js",values:[new Date]});for(const o of t.initCommands)e(o.command,...o.values);const i=n.createElement("script");i.async=!0,i.src=t.uri,t.nonce&&i.setAttribute("nonce",t.nonce),n.getElementsByTagName("head")[0].appendChild(i)})},deps:[O0,v$,Wn]};new bt("ngx-google-analytics-routing-settings",{factory:()=>({})});let fP=(()=>{class t{static forRoot(n,i=[],r,o,s){return{ngModule:t,providers:[{provide:O0,useValue:{trackingCode:n,initCommands:i,uri:r,enableTracing:o,nonce:s}},uke]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),t})(),MA=(()=>{var t;class e{constructor(){this.consent="not-set",this.consentChange=new Gh(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(i){this.consent!==i&&(this.consent=i,this.consentChange.next(i))}unsetConsent(){this.setConsent("not-set")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),Rke=(()=>{var t;class e{constructor(i,r,{trackingCode:o}){this.window=r,this.subscriptions=new ce,this.token=o,this.subscriptions.add(i.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(i){this.window&&(this.window[`ga-disable-${this.token}`]=i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(MA),it(hP),it(O0))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const kke=new bt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),A$=[MA,Rke,(()=>{var t;class e{constructor(i,r){this.key=r,this.subscriptions=new ce;try{this.storage=localStorage}catch{}i.setConsent(this.loadConsent()),this.subscriptions.add(i.consentChange.subscribe(o=>this.saveConsent(o)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){const i=this.storage?.getItem?.(this.key);if(null==i)return"not-set";const r=i.trim().toLowerCase();switch(r){case"given":case"rescinded":return r;default:return"not-set"}}saveConsent(i){this.storage?.setItem?.(this.key,i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(MA),it(kke))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})()];function Oke(t){return Object.entries(t).reduce((e,[n,i])=>(null!=i&&(e[n]=`${i}`),e),{})}let Nke=(()=>{var t;class e{static forRoot(i){const{providers:r=[]}=fP.forRoot(i.gaToken,function Pke(t){const{appName:e,projectName:n,developmentMode:i}=t;return[{command:"set",values:[Oke({appName:e,projectName:n,developmentMode:i})]}]}(i));return{ngModule:e,providers:r}}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({providers:[...A$,{provide:bM,multi:!0,useFactory:()=>()=>{},deps:A$}],imports:[fP]}),e})();class Lke{}const jke=(t,e)=>JSON.stringify(t)===JSON.stringify(e),Uke=t=>t.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Uc={storageStrategy:class Bke extends Lke{constructor(){super(...arguments),this.cachePairs=[]}add(e,n,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,n){Object.assign(this.cachePairs[e],n)}update(e,n){Object.assign(this.cachePairs[e],n)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},Vke=new Ve;function Ma(t={}){return function(e,n,i){const r=t.cacheKey||e.constructor.name+"#"+n,o=i.value;if(i&&i.value){let s=t.storageStrategy?new t.storageStrategy:new Uc.storageStrategy;const a=[];t.cacheModifier&&t.cacheModifier.subscribe(d=>s.addMany(d(s.getAll(r,this)),r,this)),no(Vke.asObservable(),t.cacheBusterObserver?t.cacheBusterObserver:function at(t){return t?function wt(t){return new B(e=>t.schedule(()=>e.complete()))}(t):$e}()).subscribe(d=>{s.removeAll(r,this),a.length=0}),t.cacheResolver=t.cacheResolver||Uc.cacheResolver||jke,t.cacheHasher=t.cacheHasher||Uc.cacheHasher||Uke,i.value=function(...d){const h=s.getAll(r,this);let p=t.cacheHasher(d),m=h.find(D=>t.cacheResolver(D.parameters,p));const x=a.find(D=>t.cacheResolver(D.parameters,p));if((t.maxAge||Uc.maxAge)&&m&&m.created&&((new Date).getTime()-new Date(m.created).getTime()>(t.maxAge||Uc.maxAge)?(s.remove?s.remove(h.indexOf(m),m,r,this):s.removeAtIndex(h.indexOf(m),r,this),m=null):(t.slidingExpiration||Uc.slidingExpiration)&&(m.created=new Date,s.update?s.update(h.indexOf(m),m,r,this):s.updateAtIndex(h.indexOf(m),m,r,this))),m){const D=Yt(m.response);return t.async?D.pipe(S9(0)):D}if(x)return x.response;{const D=o.call(this,...d).pipe(If(()=>{const F=a.find(G=>t.cacheResolver(G.parameters,p));a.splice(a.indexOf(F),1)}),Bi(F=>{(!t.shouldCacheDecider||t.shouldCacheDecider(F))&&((!(t.maxCacheCount||Uc.maxCacheCount)||1===(t.maxCacheCount||Uc.maxCacheCount)||(t.maxCacheCount||Uc.maxCacheCount)&&(t.maxCacheCount||Uc.maxCacheCount)<h.length+1)&&(s.remove?s.remove(0,h[0],r,this):s.removeAtIndex(0,r,this)),s.add({parameters:p,response:F,created:t.maxAge||Uc.maxAge?new Date:null},r,this))}),function Fke(t,e,n,i){n&&!j(n)&&(i=n);const r=j(n)?n:void 0;return o=>M7(new Gh(t,e,i),r)(o)}(1),iA());return a.push({parameters:p,response:D,created:new Date}),D}}}return i}}class Hke{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const zke=new bt("basePath");class IA{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:n=>this.defaultEncodeParam(n),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}selectHeaderAccept(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(n.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const n=this.credentials[e];return"function"==typeof n?n():n}defaultEncodeParam(e){const n="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(n))}}let pP,S$=(()=>{class t{constructor(n,i,r){this.httpClient=n,this.basePath="http://./v1",this.defaultHeaders=new Lc,this.configuration=new IA,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new Hke}addToHttpParams(n,i,r){return this.addToHttpParamsRecursive(n,i,r)}addToHttpParamsRecursive(n,i,r){if(null==i)return n;if("object"==typeof i)if(Array.isArray(i))i.forEach(o=>n=this.addToHttpParamsRecursive(n,o,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");n=n.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(o=>n=this.addToHttpParamsRecursive(n,i[o],null!=r?`${r}.${o}`:o));else{if(null==r)throw Error("key may not be null if value is not object or array");n=n.append(r,i)}return n}aggregateResults(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.consortiums,x=n.providers,D=n.sex,F=n.spatial,G=n.technologies,q=n.token;let ee=new cr({encoder:this.encoder});null!=s&&(ee=this.addToHttpParams(ee,s,"age")),null!=a&&(ee=this.addToHttpParams(ee,a,"age-range")),null!=c&&(ee=this.addToHttpParams(ee,c,"bmi")),null!=l&&(ee=this.addToHttpParams(ee,l,"bmi-range")),null!=d&&(ee=this.addToHttpParams(ee,d,"cache")),h&&h.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"ontology-terms")}),p&&p.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"cell-type-terms")}),m&&m.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"consortiums")}),x&&x.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"providers")}),null!=D&&(ee=this.addToHttpParams(ee,D,"sex")),F&&F.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"spatial")}),G&&G.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"technologies")}),null!=q&&(ee=this.addToHttpParams(ee,q,"token"));let ve=this.defaultHeaders,Oe=o&&o.httpHeaderAccept;void 0===Oe&&(Oe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Oe&&(ve=ve.set("Accept",Oe));let Xe=o&&o.context;void 0===Xe&&(Xe=new eo);let rt="json";return Oe&&(rt=Oe.startsWith("text")?"text":this.configuration.isJsonMime(Oe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:Xe,params:ee,responseType:rt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}biomarkerTermOccurences(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.consortiums,x=n.providers,D=n.sex,F=n.spatial,G=n.technologies,q=n.token;let ee=new cr({encoder:this.encoder});null!=s&&(ee=this.addToHttpParams(ee,s,"age")),null!=a&&(ee=this.addToHttpParams(ee,a,"age-range")),null!=c&&(ee=this.addToHttpParams(ee,c,"bmi")),null!=l&&(ee=this.addToHttpParams(ee,l,"bmi-range")),null!=d&&(ee=this.addToHttpParams(ee,d,"cache")),h&&h.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"ontology-terms")}),p&&p.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"cell-type-terms")}),m&&m.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"consortiums")}),x&&x.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"providers")}),null!=D&&(ee=this.addToHttpParams(ee,D,"sex")),F&&F.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"spatial")}),G&&G.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"technologies")}),null!=q&&(ee=this.addToHttpParams(ee,q,"token"));let ve=this.defaultHeaders,Oe=o&&o.httpHeaderAccept;void 0===Oe&&(Oe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Oe&&(ve=ve.set("Accept",Oe));let Xe=o&&o.context;void 0===Xe&&(Xe=new eo);let rt="json";return Oe&&(rt=Oe.startsWith("text")?"text":this.configuration.isJsonMime(Oe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:Xe,params:ee,responseType:rt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}biomarkerTreeModel(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new cr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new eo);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.consortiums,x=n.providers,D=n.sex,F=n.spatial,G=n.technologies,q=n.token;let ee=new cr({encoder:this.encoder});null!=s&&(ee=this.addToHttpParams(ee,s,"age")),null!=a&&(ee=this.addToHttpParams(ee,a,"age-range")),null!=c&&(ee=this.addToHttpParams(ee,c,"bmi")),null!=l&&(ee=this.addToHttpParams(ee,l,"bmi-range")),null!=d&&(ee=this.addToHttpParams(ee,d,"cache")),h&&h.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"ontology-terms")}),p&&p.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"cell-type-terms")}),m&&m.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"consortiums")}),x&&x.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"providers")}),null!=D&&(ee=this.addToHttpParams(ee,D,"sex")),F&&F.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"spatial")}),G&&G.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"technologies")}),null!=q&&(ee=this.addToHttpParams(ee,q,"token"));let ve=this.defaultHeaders,Oe=o&&o.httpHeaderAccept;void 0===Oe&&(Oe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Oe&&(ve=ve.set("Accept",Oe));let Xe=o&&o.context;void 0===Xe&&(Xe=new eo);let rt="json";return Oe&&(rt=Oe.startsWith("text")?"text":this.configuration.isJsonMime(Oe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:Xe,params:ee,responseType:rt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}cellTypeTreeModel(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new cr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new eo);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(n,i="body",r=!1,o){const s=n.token;let a=new cr({encoder:this.encoder});null!=s&&(a=this.addToHttpParams(a,s,"token"));let c=this.defaultHeaders,l=o&&o.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=o&&o.context;void 0===d&&(d=new eo);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(n,i="body",r=!1,o){const s=n.getSpatialPlacementRequest;if(null==s)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=o&&o.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=o&&o.context;void 0===l&&(l=new eo);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let p="json";return c&&(p=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,s,{context:l,responseType:p,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(n,i="body",r=!1,o){const s=n.cache;let a=new cr({encoder:this.encoder});null!=s&&(a=this.addToHttpParams(a,s,"cache"));let c=this.defaultHeaders,l=o&&o.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=o&&o.context;void 0===d&&(d=new eo);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new cr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new eo);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.consortiums,x=n.providers,D=n.sex,F=n.spatial,G=n.technologies,q=n.token;let ee=new cr({encoder:this.encoder});null!=s&&(ee=this.addToHttpParams(ee,s,"age")),null!=a&&(ee=this.addToHttpParams(ee,a,"age-range")),null!=c&&(ee=this.addToHttpParams(ee,c,"bmi")),null!=l&&(ee=this.addToHttpParams(ee,l,"bmi-range")),null!=d&&(ee=this.addToHttpParams(ee,d,"cache")),h&&h.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"ontology-terms")}),p&&p.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"cell-type-terms")}),m&&m.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"consortiums")}),x&&x.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"providers")}),null!=D&&(ee=this.addToHttpParams(ee,D,"sex")),F&&F.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"spatial")}),G&&G.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"technologies")}),null!=q&&(ee=this.addToHttpParams(ee,q,"token"));let ve=this.defaultHeaders,Oe=o&&o.httpHeaderAccept;void 0===Oe&&(Oe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Oe&&(ve=ve.set("Accept",Oe));let Xe=o&&o.context;void 0===Xe&&(Xe=new eo);let rt="json";return Oe&&(rt=Oe.startsWith("text")?"text":this.configuration.isJsonMime(Oe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:Xe,params:ee,responseType:rt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}ontologyTreeModel(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new cr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new eo);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new cr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new eo);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(n,i="body",r=!1,o){const s=n.organIri;if(null==s)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=n.age,c=n.ageRange,l=n.bmi,d=n.bmiRange,h=n.cache,p=n.ontologyTerms,m=n.cellTypeTerms,x=n.consortiums,D=n.providers,F=n.sex,G=n.spatial,q=n.technologies,ee=n.token;let ve=new cr({encoder:this.encoder});null!=a&&(ve=this.addToHttpParams(ve,a,"age")),null!=c&&(ve=this.addToHttpParams(ve,c,"age-range")),null!=l&&(ve=this.addToHttpParams(ve,l,"bmi")),null!=d&&(ve=this.addToHttpParams(ve,d,"bmi-range")),null!=h&&(ve=this.addToHttpParams(ve,h,"cache")),p&&p.forEach(ht=>{ve=this.addToHttpParams(ve,ht,"ontology-terms")}),m&&m.forEach(ht=>{ve=this.addToHttpParams(ve,ht,"cell-type-terms")}),null!=s&&(ve=this.addToHttpParams(ve,s,"organ-iri")),x&&x.forEach(ht=>{ve=this.addToHttpParams(ve,ht,"consortiums")}),D&&D.forEach(ht=>{ve=this.addToHttpParams(ve,ht,"providers")}),null!=F&&(ve=this.addToHttpParams(ve,F,"sex")),G&&G.forEach(ht=>{ve=this.addToHttpParams(ve,ht,"spatial")}),q&&q.forEach(ht=>{ve=this.addToHttpParams(ve,ht,"technologies")}),null!=ee&&(ve=this.addToHttpParams(ve,ee,"token"));let Oe=this.defaultHeaders,Xe=o&&o.httpHeaderAccept;void 0===Xe&&(Xe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Xe&&(Oe=Oe.set("Accept",Xe));let rt=o&&o.context;void 0===rt&&(rt=new eo);let nt="json";return Xe&&(nt=Xe.startsWith("text")?"text":this.configuration.isJsonMime(Xe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:rt,params:ve,responseType:nt,withCredentials:this.configuration.withCredentials,headers:Oe,observe:i,reportProgress:r})}referenceOrgans(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new cr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new eo);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.consortiums,x=n.providers,D=n.sex,F=n.spatial,G=n.technologies,q=n.token;let ee=new cr({encoder:this.encoder});null!=s&&(ee=this.addToHttpParams(ee,s,"age")),null!=a&&(ee=this.addToHttpParams(ee,a,"age-range")),null!=c&&(ee=this.addToHttpParams(ee,c,"bmi")),null!=l&&(ee=this.addToHttpParams(ee,l,"bmi-range")),null!=d&&(ee=this.addToHttpParams(ee,d,"cache")),h&&h.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"ontology-terms")}),p&&p.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"cell-type-terms")}),m&&m.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"consortiums")}),x&&x.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"providers")}),null!=D&&(ee=this.addToHttpParams(ee,D,"sex")),F&&F.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"spatial")}),G&&G.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"technologies")}),null!=q&&(ee=this.addToHttpParams(ee,q,"token"));let ve=this.defaultHeaders,Oe=o&&o.httpHeaderAccept;void 0===Oe&&(Oe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Oe&&(ve=ve.set("Accept",Oe));let Xe=o&&o.context;void 0===Xe&&(Xe=new eo);let rt="json";return Oe&&(rt=Oe.startsWith("text")?"text":this.configuration.isJsonMime(Oe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:Xe,params:ee,responseType:rt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}sparql(n,i="body",r=!1,o){const s=n.query;if(null==s)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=n.token,c=n.format;let l=new cr({encoder:this.encoder});null!=s&&(l=this.addToHttpParams(l,s,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=o&&o.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let p=o&&o.context;void 0===p&&(p=new eo);let m="json";return h&&(m=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}sparqlPost(n,i="body",r=!1,o){const s=n.sparqlQueryRequest;if(null==s)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=n.token,c=n.format;let l=new cr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=o&&o.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let p=o&&o.context;void 0===p&&(p=new eo);const x=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==x&&(d=d.set("Content-Type",x));let D="json";return h&&(D=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,s,{context:p,params:l,responseType:D,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}technologyNames(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new cr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new eo);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.consortiums,x=n.providers,D=n.sex,F=n.spatial,G=n.technologies,q=n.token;let ee=new cr({encoder:this.encoder});null!=s&&(ee=this.addToHttpParams(ee,s,"age")),null!=a&&(ee=this.addToHttpParams(ee,a,"age-range")),null!=c&&(ee=this.addToHttpParams(ee,c,"bmi")),null!=l&&(ee=this.addToHttpParams(ee,l,"bmi-range")),null!=d&&(ee=this.addToHttpParams(ee,d,"cache")),h&&h.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"ontology-terms")}),p&&p.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"cell-type-terms")}),m&&m.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"consortiums")}),x&&x.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"providers")}),null!=D&&(ee=this.addToHttpParams(ee,D,"sex")),F&&F.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"spatial")}),G&&G.forEach(nt=>{ee=this.addToHttpParams(ee,nt,"technologies")}),null!=q&&(ee=this.addToHttpParams(ee,q,"token"));let ve=this.defaultHeaders,Oe=o&&o.httpHeaderAccept;void 0===Oe&&(Oe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Oe&&(ve=ve.set("Accept",Oe));let Xe=o&&o.context;void 0===Xe&&(Xe=new eo);let rt="json";return Oe&&(rt=Oe.startsWith("text")?"text":this.configuration.isJsonMime(Oe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:Xe,params:ee,responseType:rt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}}return t.\u0275fac=function(n){return new(n||t)(it(Vu),it(zke,8),it(IA,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gke=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:IA,useFactory:n}]}}constructor(n,i){if(n)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return t.\u0275fac=function(n){return new(n||t)(it(t,12),it(Vu,8))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),t})();function ta(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Vc(){return pP||(pP=function Wke(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=ta(n);return(r,o)=>i.then(s=>o(s.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),pP}function $ke(t,e=Vc()){return e("readonly",n=>ta(n.get(t)))}function Xke(t,e=Vc()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),ta(n.transaction)))}function Yke(t,e=Vc()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),ta(n.transaction)))}var Kke=g(5020),qke=g(7661);const N0="http://www.w3.org/1999/02/22-rdf-syntax-ns#",F0="http://www.w3.org/2001/XMLSchema#",gP="http://www.w3.org/2000/10/swap/",Ns={xsd:{decimal:`${F0}decimal`,boolean:`${F0}boolean`,double:`${F0}double`,integer:`${F0}integer`,string:`${F0}string`},rdf:{type:`${N0}type`,nil:`${N0}nil`,first:`${N0}first`,rest:`${N0}rest`,langString:`${N0}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${gP}reify#forSome`,forAll:`${gP}reify#forAll`},log:{implies:`${gP}log#implies`}};const{rdf:Jke,xsd:Ff}=Ns;let L0,Zke=0;const M$=/^"(.*".*)(?="[^"]*$)/,Qke=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,_P={namedNode:function rOe(t){return new I$(t)},blankNode:function oOe(t){return new eOe(t||"n3-"+Zke++)},variable:function aOe(t){return new tOe(t)},literal:function sOe(t,e){if("string"==typeof e)return new Rg(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=Ff.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?Ff.integer:Ff.double:(n=Ff.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new Rg(""===n||n===Ff.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function cOe(){return L0},quad:D$,triple:D$},Er=_P;class Td{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Td?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class I$ extends Td{get termType(){return"NamedNode"}}class Rg extends Td{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new I$(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?Ff.string:Jke.langString}equals(e){return e instanceof Rg?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class eOe extends Td{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class tOe extends Td{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function Md(t,e){if(e=e||_P,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===_P)return new Rg(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),"@"===t[n+1]?t.substr(n+2):e.namedNode(t.substr(n+3)));case"<":const i=Qke.exec(t);return e.quad(Md(DA(i[1]),e),Md(DA(i[2]),e),Md(DA(i[3]),e),i[4]&&Md(DA(i[4]),e));default:return e.namedNode(t)}}function Gi(t){if("string"==typeof t)return t;if(t instanceof Td&&"Quad"!==t.termType)return t.id;if(!t)return L0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Ff.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${bP(Gi(t.subject))} ${bP(Gi(t.predicate))} ${bP(Gi(t.object))}${function C$(t){return!!t&&"DefaultGraph"===t.termType}(t.graph)?"":` ${Gi(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}L0=new class nOe extends Td{constructor(){return super(""),L0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class iOe extends Td{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||L0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function bP(t){return t.replace(M$,(e,n)=>`"${n.replace(/"/g,'""')}`)}function DA(t){return t.replace(M$,(e,n)=>`"${n.replace(/""/g,'"')}`)}function D$(t,e,n,i){return new iOe(t,e,n,i)}var lOe=g(3410),dOe=g.n(lOe);const{xsd:RA}=Ns,uOe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,R$={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},hOe=/[\x00-\x20<>\\"\{\}\|\^\`]/,fOe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},pOe=/$0^/;class mOe{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in fOe)&&this[n]instanceof RegExp&&(this[n]=pOe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(c=this._comment.exec(i))&&o("comment",c[1],"",this._line,i.length),i=null,o("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",p="",m="",x=null,D=0,F=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(D=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){F=!0;break}case"<":if(x=this._unescapedIri.exec(i))h="IRI",p=x[1];else if(x=this._iri.exec(i)){if(p=this._unescape(x[1]),null===p||hOe.test(p))return s(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",D=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",D=2,p=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",D=2);break;case"_":((x=this._blank.exec(i))||n&&(x=this._blank.exec(`${i} `)))&&(h="blank",m="_",p=x[1]);break;case'"':if(x=this._simpleQuotedString.exec(i))p=x[1];else if(({value:p,matchLength:D}=this._parseLiteral(i)),null===p)return s(this);(null!==x||0!==D)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(x=this._simpleApostropheString.exec(i))p=x[1];else if(({value:p,matchLength:D}=this._parseLiteral(i)),null===p)return s(this);(null!==x||0!==D)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(x=this._variable.exec(i))&&(h="var",p=x[0]);break;case"@":"literal"===this._previousMarker&&(x=this._langcode.exec(i))?(h="langcode",p=x[1]):(x=this._keyword.exec(i))&&(h=x[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",D=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(x=this._number.exec(i)||n&&(x=this._number.exec(`${i} `)))&&(h="literal",p=x[0],m="string"==typeof x[1]?RA.double:"string"==typeof x[2]?RA.decimal:RA.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(x=this._sparqlKeyword.exec(i))?h=x[0].toUpperCase():F=!0;break;case"f":case"t":(x=this._boolean.exec(i))?(h="literal",p=x[0],m=RA.boolean):F=!0;break;case"a":(x=this._shortPredicates.exec(i))?(h="abbreviation",p="a"):F=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(D=1,p="="):(D=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(D=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",D=2):(h=d,D=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",D=2);break;default:F=!0}if(F&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(x=this._prefix.exec(i))?((x=this._prefixed.exec(i))||n&&(x=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=x[1]||"",p=this._unescape(x[2])):(h="prefix",p=x[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?s(this):this._input=i;const G=D||x[0].length,q=o(h,p,m,l,G);this.previousToken=q,this._previousMarker=h,i=i.substr(G,i.length)}function o(a,c,l,d,h){const p=i?r-i.length:r,x={type:a,value:c,prefix:l,line:d,start:p,end:p+h};return e(null,x),x}function s(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace(uOe,(r,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in R$?R$[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let o=0;for(;"\\"===e[r-o-1];)o++;if(o%2==0){const s=e.substring(i,r),a=s.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((o,s)=>o?r=o:i.push(s),!0),r)throw r;return i}dOe()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}let k$=0;class O${constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&P$(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),o=/triple/.test(n),s=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=o||s;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||o||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new mOe({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){k$=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:o,graph:n,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(void 0===o)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(o+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===o?null===a.predicate?a.subject=i:a.object=i:this._emit(o,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const s=this._predicate,a=this._object;o?this._emit(a,s,r,i):this._emit(r,s,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=yP}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,o=-1,s=0,a="/";for(;r<n;){switch(a){case":":if(o<0&&"/"===e[++r]&&"/"===e[++r])for(;(o=r+1)<n&&"/"!==e[o];)r=o;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return i+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(s,r-2),(s=i.lastIndexOf("/"))>=o&&(i=i.substr(0,s)),"/"!==a)return`${i}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return i+e.substring(s)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${k$++}_`,this._prefixCallback=i||yP,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&r.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return r}this._callback=n,this._lexer.tokenize(e,(r,o)=>{null!==r?(this._callback(r),this._callback=yP):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function yP(){}function P$(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(Ns.rdf.first),t.RDF_REST=n(Ns.rdf.rest),t.RDF_NIL=n(Ns.rdf.nil),t.N3_FORALL=n(Ns.r.forAll),t.N3_FORSOME=n(Ns.r.forSome),t.ABBREVIATIONS={a:n(Ns.rdf.type),"=":n(Ns.owl.sameAs),">":n(Ns.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}P$(O$.prototype,Er);var vP=g(8905);class xP{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||Er,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const o in n)for(const s in i=n[o].subjects)for(const a in r=i[s])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const o=e[n]||(e[n]={}),s=o[i]||(o[i]={}),a=r in s;return a||(s[r]=null),!a}_removeFromIndex(e,n,i,r){const o=e[n],s=o[i];delete s[r];for(const a in s)return;delete o[i];for(const a in o)return;delete e[n]}*_findInIndex(e,n,i,r,o,s,a,c){let l,d,h;const p=this._entities,m=Md(c,this._factory),x={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const D in e)if(d=e[D]){x[o]=Md(p[D],this._factory),i&&((l=d,d={})[i]=l[i]);for(const F in d)if(h=d[F]){x[s]=Md(p[F],this._factory);const G=r?r in h?[r]:[]:Object.keys(h);for(let q=0;q<G.length;q++)x[a]=Md(p[G[q]],this._factory),yield this._factory.quad(x.subject,x.predicate,x.object,m)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,o;if(r=e[n])for(o in r)i(o)}_loopByKey1(e,n,i){let r,o;for(r in e)o=e[r],o[n]&&i(r)}_loopBy2Keys(e,n,i,r){let o,s,a;if((o=e[n])&&(s=o[i]))for(a in s)r(a)}_countInIndex(e,n,i,r){let s,a,c,o=0;n&&((s=e,e={})[n]=s[n]);for(const l in e)if(a=e[l]){i&&((s=a,a={})[i]=s[i]);for(const d in a)(c=a[d])&&(r?r in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!Ia(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(Md(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Gi(e),n=Gi(n),i=Gi(i),r=Gi(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const s=this._ids,a=this._entities;e=s[e]||(s[a[++this._id]=e]=this._id),n=s[n]||(s[a[++this._id]=n]=this._id),i=s[i]||(s[a[++this._id]=i]=this._id);const c=this._addToIndex(o.subjects,e,n,i);return this._addToIndex(o.predicates,n,i,e),this._addToIndex(o.objects,i,e,n),this._size=null,c}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Gi(e),n=Gi(n),i=Gi(i),r=Gi(r);const o=this._ids,s=this._graphs;let a,c,l;if(!((e=o[e])&&(n=o[n])&&(i=o[i])&&(a=s[r])&&(c=a.subjects[e])&&(l=c[n])&&i in l))return!1;for(e in this._removeFromIndex(a.subjects,e,n,i),this._removeFromIndex(a.predicates,n,i,e),this._removeFromIndex(a.objects,i,e,n),null!==this._size&&this._size--,a.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const o=new vP.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,n,i,r))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){e=e&&Gi(e),n=n&&Gi(n),i=i&&Gi(i),r=r&&Gi(r);const o=this._getGraphs(r),s=this._ids;let a,c,l,d;if(!(Ia(e)&&!(c=s[e])||Ia(n)&&!(l=s[n])||Ia(i)&&!(d=s[i])))for(const h in o)(a=o[h])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",h):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",h):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h))}match(e,n,i,r){return new wP(this,e,n,i,r)}countQuads(e,n,i,r){e=e&&Gi(e),n=n&&Gi(n),i=i&&Gi(i),r=r&&Gi(r);const o=this._getGraphs(r),s=this._ids;let c,l,d,h,a=0;if(Ia(e)&&!(l=s[e])||Ia(n)&&!(d=s[n])||Ia(i)&&!(h=s[i]))return 0;for(const p in o)(c=o[p])&&(a+=e?i?this._countInIndex(c.objects,h,l,d):this._countInIndex(c.subjects,l,d,h):n?this._countInIndex(c.predicates,d,h,l):this._countInIndex(c.objects,h,l,d));return a}forEach(e,n,i,r,o){this.some(s=>(e(s),!1),n,i,r,o)}every(e,n,i,r,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),n,i,r,o);return s&&a}some(e,n,i,r,o){for(const s of this.readQuads(n,i,r,o))if(e(s))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(o=>{r.push(o)},e,n,i),r}forSubjects(e,n,i,r){n=n&&Gi(n),i=i&&Gi(i),r=r&&Gi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ia(n)&&!(c=o[n])||Ia(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(o=>{r.push(o)},e,n,i),r}forPredicates(e,n,i,r){n=n&&Gi(n),i=i&&Gi(i),r=r&&Gi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ia(n)&&!(c=o[n])||Ia(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(o=>{r.push(o)},e,n,i),r}forObjects(e,n,i,r){n=n&&Gi(n),i=i&&Gi(i),r=r&&Gi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ia(n)&&!(c=o[n])||Ia(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(o=>{r.push(o)},e,n,i),r}forGraphs(e,n,i,r){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),n,i,r,o)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,Ns.rdf.rest,Ns.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let d,h,l=!1;const p=a.graph;let m=a.subject;for(;m&&!l;){const x=this.getQuads(null,null,m,null),D=this.getQuads(m,null,null,null);let F,G=null,q=null,ee=null;for(let ve=0;ve<D.length&&!l;ve++)F=D[ve],F.graph.equals(p)?d?l=r(m,"has non-list arcs out"):F.predicate.value===Ns.rdf.first?G?l=r(m,"has multiple rdf:first arcs"):s.push(G=F):F.predicate.value===Ns.rdf.rest?q?l=r(m,"has multiple rdf:rest arcs"):s.push(q=F):x.length?l=r(m,"can't be subject and object"):(d=F,h="subject"):l=r(m,"not confined to single graph");for(let ve=0;ve<x.length&&!l;++ve)F=x[ve],d?l=r(m,"can't have coreferences"):F.predicate.value===Ns.rdf.rest?ee?l=r(m,"has incoming rdf:rest arcs"):ee=F:(d=F,h="object");G?c.unshift(G.object):l=r(m,"has no list head"),m=ee&&ee.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(s),i}*[Symbol.iterator](){yield*this.readQuads()}}function Ia(t){return"string"==typeof t||t instanceof String}class wP extends vP.Readable{constructor(e,n,i,r,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:o}=this,s=this._filtered=new xP({factory:e._factory});for(const a of e.readQuads(o,r,i,n))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new wP(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var gOe=g(2821);function Ar(t,e,n,i,r){return t.readQuads(e,n,i,r)}function N$(t){const e=t.length;let n=0;return new vP.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function EP(t,e){return AP.apply(this,arguments)}function AP(){return AP=zt(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield qke.toRDF(n);e.import(N$(i))}return e}),AP.apply(this,arguments)}function SP(){return SP=zt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new gOe.RdfXmlParser({dataFactory:Er,strict:!0}),r=new Promise(o=>{i.once("end",()=>o(e))});return e.import(i),i.write(n),i.end(),r}return e}),SP.apply(this,arguments)}function CP(){return CP=zt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new O$({format:"n3"}).parse(n);e.import(N$(i))}return e}),CP.apply(this,arguments)}function TP(t,e){const n=JSON.parse(t),i=new xP;return Object.assign(i,n,{_factory:e??Er}),i}const kA="Unknown Euler angle order",kg=.99999;var Mo=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(Mo||{});class Xr extends Gw{static get ZYX(){return Mo.ZYX}static get YXZ(){return Mo.YXZ}static get XZY(){return Mo.XZY}static get ZXY(){return Mo.ZXY}static get YZX(){return Mo.YZX}static get XYZ(){return Mo.XYZ}static get RollPitchYaw(){return Mo.ZYX}static get DefaultOrder(){return Mo.ZYX}static get RotationOrders(){return Mo}static rotationOrder(e){return Mo[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=Xr.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,o]=e,s=i*i,a=-2*(s+r*r)+1,c=2*(n*i+o*r);let l=-2*(n*r-o*i);l=l>1?1:l,l=l<-1?-1:l;const p=Math.atan2(2*(i*r+o*n),-2*(n*n+s)+1),m=Math.asin(l),x=Math.atan2(c,a);return this.set(p,m,x,Xr.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function vOe(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}get z(){return this[2]}set z(e){this[2]=pi(e)}get alpha(){return this[0]}set alpha(e){this[0]=pi(e)}get beta(){return this[1]}set beta(e){this[1]=pi(e)}get gamma(){return this[2]}set gamma(e){this[2]=pi(e)}get phi(){return this[0]}set phi(e){this[0]=pi(e)}get theta(){return this[1]}set theta(e){this[1]=pi(e)}get psi(){return this[2]}set psi(e){this[2]=pi(e)}get roll(){return this[0]}set roll(e){this[0]=pi(e)}get pitch(){return this[1]}set pitch(e){this[1]=pi(e)}get yaw(){return this[2]}set yaw(e){this[2]=pi(e)}get order(){return this[3]}set order(e){this[3]=function xOe(t){if(t<0&&t>=6)throw new Error(kA);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,Mo.ZYX)}fromRotationMatrix(e,n=Xr.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new Sy;switch(this[4]){case Mo.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Mo.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Mo.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Mo.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Mo.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Mo.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(kA)}}_fromRotationMatrix(e,n=Xr.DefaultOrder){const i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(n=n||this[3]){case Xr.XYZ:this[1]=Math.asin(wr(o,-1,1)),Math.abs(o)<kg?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case Xr.YXZ:this[0]=Math.asin(-wr(c,-1,1)),Math.abs(c)<kg?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case Xr.ZXY:this[0]=Math.asin(wr(d,-1,1)),Math.abs(d)<kg?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(s,i));break;case Xr.ZYX:this[1]=Math.asin(-wr(l,-1,1)),Math.abs(l)<kg?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case Xr.YZX:this[2]=Math.asin(wr(s,-1,1)),Math.abs(s)<kg?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case Xr.XZY:this[2]=Math.asin(-wr(r,-1,1)),Math.abs(r)<kg?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(kA)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,o=this.z,s=Math.cos(i),a=Math.cos(r),c=Math.cos(o),l=Math.sin(i),d=Math.sin(r),h=Math.sin(o);switch(this[3]){case Xr.XYZ:{const p=s*c,m=s*h,x=l*c,D=l*h;n[0]=a*c,n[4]=-a*h,n[8]=d,n[1]=m+x*d,n[5]=p-D*d,n[9]=-l*a,n[2]=D-p*d,n[6]=x+m*d,n[10]=s*a;break}case Xr.YXZ:{const p=a*c,m=a*h,x=d*c,D=d*h;n[0]=p+D*l,n[4]=x*l-m,n[8]=s*d,n[1]=s*h,n[5]=s*c,n[9]=-l,n[2]=m*l-x,n[6]=D+p*l,n[10]=s*a;break}case Xr.ZXY:{const p=a*c,m=a*h,x=d*c,D=d*h;n[0]=p-D*l,n[4]=-s*h,n[8]=x+m*l,n[1]=m+x*l,n[5]=s*c,n[9]=D-p*l,n[2]=-s*d,n[6]=l,n[10]=s*a;break}case Xr.ZYX:{const p=s*c,m=s*h,x=l*c,D=l*h;n[0]=a*c,n[4]=x*d-m,n[8]=p*d+D,n[1]=a*h,n[5]=D*d+p,n[9]=m*d-x,n[2]=-d,n[6]=l*a,n[10]=s*a;break}case Xr.YZX:{const p=s*a,m=s*d,x=l*a,D=l*d;n[0]=a*c,n[4]=D-p*h,n[8]=x*h+m,n[1]=h,n[5]=s*c,n[9]=-l*c,n[2]=-d*c,n[6]=m*h+x,n[10]=p-D*h;break}case Xr.XZY:{const p=s*a,m=s*d,x=l*a,D=l*d;n[0]=a*c,n[4]=-h,n[8]=d*c,n[1]=p*h+D,n[5]=s*c,n[9]=m*h-x,n[2]=x*h-m,n[6]=l*c,n[10]=D*h+p;break}default:throw new Error(kA)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),o=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch);return new Sy(e*r*o-n*i*s,e*i*s+n*r*o,n*i*o-e*r*s,e*i*o+n*r*s)}}var F$=g(4938),wOe=g.t(F$,2),EOe=g(7991),L$=g(5440);const B$={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let OA;const AOe=new Uint8Array(16);function SOe(){if(!OA&&(OA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!OA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return OA(AOe)}const qo=[];for(let t=0;t<256;++t)qo.push((t+256).toString(16).slice(1));const TOe=function COe(t,e,n){if(B$.randomUUID&&!e&&!t)return B$.randomUUID();const i=(t=t||{}).random||(t.rng||SOe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function j$(t,e=0){return(qo[t[e+0]]+qo[t[e+1]]+qo[t[e+2]]+qo[t[e+3]]+"-"+qo[t[e+4]]+qo[t[e+5]]+"-"+qo[t[e+6]]+qo[t[e+7]]+"-"+qo[t[e+8]]+qo[t[e+9]]+"-"+qo[t[e+10]]+qo[t[e+11]]+qo[t[e+12]]+qo[t[e+13]]+qo[t[e+14]]+qo[t[e+15]]).toLowerCase()}(i)};var PA=g(7184),NA=g(9689),MOe=g(6990),FA=g(6030);new nn,new nn;const B0=new nn,H$=new nn;class MP{constructor(e=[0,0,0],n=0){xe(this,"center",void 0),xe(this,"radius",void 0),this.radius=-0,this.center=new nn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=B0.from(n),this.center=(new nn).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new MP(this.center,this.radius)}union(e){const n=this.center,i=this.radius,o=e.radius,s=B0.copy(e.center).subtract(n),a=s.magnitude();if(i>=a+o)return this.clone();if(o>=a+i)return e.clone();const c=.5*(i+a+o);return H$.copy(s).scale((-i+c)/a).add(n),this.center.copy(H$),this.radius=c,this}expand(e){const i=B0.from(e).subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}transform(e){this.center.transform(e);const n=function JU(t,e){var o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(c,l,d),t}(B0,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const i=B0.from(e).subtract(this.center);return Math.max(0,i.len()-this.radius)}intersectPlane(e){const i=this.radius,o=e.normal.dot(this.center)+e.distance;return o<-i?-1:o<i?0:1}}const DOe=new nn,ROe=new nn,LA=new nn,BA=new nn,jA=new nn,kOe=new nn,OOe=new nn;class IP{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){xe(this,"center",void 0),xe(this,"halfAxes",void 0),this.center=(new nn).from(e),this.halfAxes=new Ko(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new nn(e).len(),new nn(n).len(),new nn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new nn(e).normalize(),o=new nn(n).normalize(),s=new nn(i).normalize();return(new Sy).fromMatrix3(new Ko([...r,...o,...s]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new Sy(i),o=(new Ko).fromQuaternion(r);return o[0]=o[0]*n[0],o[1]=o[1]*n[0],o[2]=o[2]*n[0],o[3]=o[3]*n[1],o[4]=o[4]*n[1],o[5]=o[5]*n[1],o[6]=o[6]*n[2],o[7]=o[7]*n[2],o[8]=o[8]*n[2],this.center=(new nn).from(e),this.halfAxes=o,this}clone(){return new IP(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new MP){const n=this.halfAxes,i=n.getColumn(0,LA),r=n.getColumn(1,BA),o=n.getColumn(2,jA),s=DOe.copy(i).add(r).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,o=i.x,s=i.y,a=i.z,c=Math.abs(o*r[0]+s*r[1]+a*r[2])+Math.abs(o*r[3]+s*r[4]+a*r[5])+Math.abs(o*r[6]+s*r[7]+a*r[8]),l=i.dot(n)+e.distance;return l<=-c?-1:l>=c?1:0}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=ROe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,LA),o=i.getColumn(1,BA),s=i.getColumn(2,jA),a=r.magnitude(),c=o.magnitude(),l=s.magnitude();r.normalize(),o.normalize(),s.normalize();let h,d=0;return h=Math.abs(n.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(n.dot(o))-c,h>0&&(d+=h*h),h=Math.abs(n.dot(s))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,c=a.getColumn(0,LA),l=a.getColumn(1,BA),d=a.getColumn(2,jA),h=kOe.copy(c).add(l).add(d).add(s),p=OOe.copy(h).subtract(e);let m=n.dot(p);return r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).add(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),i[0]=r,i[1]=o,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,LA);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,BA);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,jA);return r.transformAsPoint(e),this.halfAxes=new Ko([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const z$=new nn,G$=new nn;class j0{constructor(e=[0,0,1],n=0){xe(this,"normal",void 0),xe(this,"distance",void 0),this.normal=new nn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return ny(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=z$.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),ny(Cu(this.normal.len(),1)),this.distance=r,this}clone(){return new j0(this.normal,this.distance)}equals(e){return Cu(this.distance,e.distance)&&Cu(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=G$.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=z$.from(e);const i=this.getPointDistance(e),r=G$.copy(this.normal).scale(i);return e.subtract(r).to(n)}}const W$=[new nn([1,0,0]),new nn([0,1,0]),new nn([0,0,1])],X$=new nn,POe=new nn;new j0(new nn(1,0,0),0);class $u{constructor(e=[]){xe(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*W$.length;const n=e.center,i=e.radius;let r=0;for(const o of W$){let s=this.planes[r],a=this.planes[r+1];s||(s=this.planes[r]=new j0),a||(a=this.planes[r+1]=new j0);const c=X$.copy(o).scale(-i).add(n);o.dot(c),s.fromPointNormal(c,o);const d=X$.copy(o).scale(i).add(n),h=POe.copy(o).negate();h.dot(d),a.fromPointNormal(d,h),r+=2}return this}computeVisibility(e){let n=1;for(const i of this.planes)switch(e.intersectPlane(i)){case-1:return-1;case 0:n=0}return n}computeVisibilityWithPlaneMask(e,n){if(ny(Number.isFinite(n),"parentPlaneMask is required."),n===$u.MASK_OUTSIDE||n===$u.MASK_INSIDE)return n;let i=$u.MASK_INSIDE;const r=this.planes;for(let o=0;o<this.planes.length;++o){const s=o<31?1<<o:0;if(o<31&&!(n&s))continue;const c=e.intersectPlane(r[o]);if(-1===c)return $u.MASK_OUTSIDE;0===c&&(i|=s)}return i}}xe($u,"MASK_OUTSIDE",4294967295),xe($u,"MASK_INSIDE",0),xe($u,"MASK_INDETERMINATE",2147483647),new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,Math,new Ko,new Ko,new Ko,new Ko,new Ko,new nn,new nn,new nn,new nn,new nn,new Ko,new Ko,new Ko;var l2e=g(7659);function*VA(t,e,n){for(const[i,r]of Object.entries(n))for(const o of Ar(t,e,i,null,null)){const s="Literal"===o.object.termType?(0,NA.fromRdf)(o.object):o.object.id;yield[r,s]}}function Lf(t,e,n,i){const r={"@id":e,"@type":n};for(const[o,s]of Object.entries(i))for(const a of Ar(t,r["@id"],o,null,null)){const c="Literal"===a.object.termType?(0,NA.fromRdf)(a.object):a.object.id;r[s]=c}return r}const Wi=function T$(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,o){if("string"==typeof o){const s=Object.create(null);n[r]=a=>s[a]||(s[a]=e.namedNode(o+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||Er,i}({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Er),K$={x:Wi("rdf"),type:Wi("rdf")("type")},d2e_label=(Wi("rdfs"),Wi("rdfs")("label")),Qt=(Wi("rdfs")("comment"),Wi("rdfs")("isDefinedBy"),Wi("rdfs")("seeAlso"),Wi("ccf")),ti={id:Wi("ccf")("has_registration_location"),label:Wi("rdfs")("label"),description:Wi("rdfs")("comment"),link:Qt("url"),sex:Qt("sex"),age:Qt("age"),bmi:Qt("bmi"),Male:Er.literal("Male"),Female:Er.literal("Female"),consortiumName:Qt("consortium_name"),providerName:Qt("tissue_provider_name"),providerUUID:Qt("tissue_provider_uuid"),donor:Qt("comes_from"),sections:Qt("subdivided_into_sections"),datasets:Qt("generates_dataset"),sampleType:Qt("sample_type"),TissueBlock:Er.literal("Tissue Block"),TissueSection:Er.literal("Tissue Section"),NonStandard:Er.literal("Non-standard"),sectionCount:Qt("section_count"),sectionSize:Qt("section_size"),sectionUnits:Qt("section_size_unit"),sectionNumber:Qt("section_number"),spatialEntity:Qt("has_registration_location"),ontologyTerms:Qt("has_ontology_term"),cellTypeTerms:Qt("has_cell_type_term"),technology:Qt("technology"),thumbnail:Qt("thumbnail")},mi={x:Qt,base:Wi("base"),ontologyNode:{label:Qt("ccf_pref_label"),parent:Qt("ccf_part_of"),children:Qt("ccf_part_of"),rui_rank:Qt("rui_rank"),synonymLabels:Er.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Qt("ccf_part_of"),ct_is_a:Qt("ccf_ct_isa"),located_in:Qt("ccf_located_in"),characterizes:Qt("ccf_characterizes"),bm_located_in:Qt("ccf_bm_located_in")},spatial:{Female:Wi("base")("VHFemale"),Male:Wi("base")("VHMale"),BothSexes:Wi("base")("VHBothSexes"),FemaleOrgans:Wi("base")("VHFemaleOrgans"),MaleOrgans:Wi("base")("VHMaleOrgans")},SpatialObjectReference:Qt("spatial_object_reference"),SpatialEntity:Qt("spatial_entity"),SpatialPlacement:Qt("spatial_placement"),spatialObjectReference:{file:Qt("file_url"),file_format:Qt("file_format"),file_subpath:Qt("file_subpath")},extractionSet:{label:Wi("rdfs")("label"),rui_rank:Qt("rui_rank")},spatialEntity:{label:Wi("rdfs")("label"),description:Wi("rdfs")("comment"),creator:Wi("dcterms")("creator"),creator_first_name:Qt("creator_first_name"),creator_last_name:Qt("creator_last_name"),creator_orcid:Qt("creator_orcid"),creation_date:Wi("dcterms")("created"),updated_date:Qt("updated_date"),ccf_annotations:Qt("collides_with"),representation_of:Qt("representation_of"),reference_organ:Qt("has_reference_organ"),extraction_set_for:Qt("extraction_set_for"),extraction_set:Qt("has_extraction_set"),sex:Qt("organ_owner_sex"),side:Qt("organ_side"),rui_rank:Qt("rui_rank"),slice_thickness:Qt("slice_thickness"),slice_count:Qt("slice_count"),x_dimension:Qt("x_dimension"),y_dimension:Qt("y_dimension"),z_dimension:Qt("z_dimension"),dimension_units:Qt("dimension_unit"),object:Qt("has_object_reference")},spatialPlacement:{source:Qt("placement_for"),target:Qt("placement_relative_to"),placement_date:Wi("dcterms")("created"),x_scaling:Qt("x_scaling"),y_scaling:Qt("y_scaling"),z_scaling:Qt("z_scaling"),scaling_units:Qt("scaling_unit"),x_rotation:Qt("x_rotation"),y_rotation:Qt("y_rotation"),z_rotation:Qt("z_rotation"),w_rotation:Qt("theta_rotation"),rotation_order:Qt("rotation_order"),rotation_units:Qt("rotation_unit"),x_translation:Qt("x_translation"),y_translation:Qt("y_translation"),z_translation:Qt("z_translation"),translation_units:Qt("translation_unit")}},ni={x:Wi("uberon"),body:Wi("uberon")("0013702")},u2e={x:Wi("cl"),cell:Wi("cl")("0000000")},U0={x:Wi("fma")},Hc=(Wi("lmha"),{body:ni.body,cell:u2e.cell,respiratory_system:ni.x("0001004"),colon:ni.x("0001155"),left_lung:ni.x("0002168"),right_lung:ni.x("0002167"),left_bronchus:ni.x("0002178"),right_bronchus:ni.x("0002177"),kidney:ni.x("0002113"),ureter:ni.x("0000056"),eye:ni.x("0000970"),fallopian_tube:ni.x("0003889"),knee:ni.x("0001465"),ovary:ni.x("0000992"),trachea:ni.x("0003126"),aorta:ni.x("0000947"),blood:ni.x("0000178"),bone_marrow:ni.x("0002371"),male_reproductive_system:ni.x("0000079"),lymph_node:ni.x("0000029"),blood_vasculature:ni.x("0004537"),brain:ni.x("0000955"),eye_left:ni.x("0004548"),eye_right:U0.x("54449"),fallopian_tube_left:ni.x("0001303"),fallopian_tube_right:ni.x("0001302"),heart:ni.x("0000948"),kidney_left:ni.x("0004538"),kidney_right:ni.x("0004539"),knee_left:U0.x("24978"),knee_right:U0.x("24977"),large_intestine:ni.x("0000059"),liver:ni.x("0002107"),lungs:ni.x("0002048"),mesenteric_lymph_node:ni.x("0002509"),ovary_left:U0.x("7214"),ovary_right:U0.x("7213"),pancreas:ni.x("0001264"),pelvis:ni.x("0001270"),prostate_gland:ni.x("0002367"),skin:ni.x("0002097"),small_intestine:ni.x("0002108"),spleen:ni.x("0002106"),thymus:ni.x("0002370"),ureter_left:ni.x("0001223"),ureter_right:ni.x("0001222"),urinary_bladder:ni.x("0001255"),uterus:ni.x("0000995")});function PP(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const HA={spatialObjectReference:PP(mi.spatialObjectReference),spatialEntity:PP(mi.spatialEntity),spatialPlacement:PP(mi.spatialPlacement)};function q$(t,e){const n=Lf(t,e,"ExtractionSet",HA.spatialEntity);return n.extractionSites=PA(t.getSubjects(mi.spatialEntity.extraction_set,e,null).map(i=>Bf(t,i.id)),["rui_rank"]),n}function Bf(t,e){const n=Lf(t,e,"SpatialEntity",HA.spatialEntity);return n.object&&(n.object=function h2e(t,e){return Lf(t,e,"SpatialObjectReference",HA.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,mi.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,ti.spatialEntity,e,null),n}function g2e(t,e){const n=Lf(t,e,"SpatialPlacement",HA.spatialPlacement);return n.source&&(n.source=Bf(t,n.source)),n.target&&(n.target=Bf(t,n.target)),n}const b2e=(F$||wOe).DirectedGraph;function J$(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),o=[n.x_rotation,n.y_rotation,n.z_rotation].map(U4),s=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(o).scale(s)}class Z${constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new b2e;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},K$.type,mi.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},K$.type,mi.SpatialEntity,null);const n={};for(const i of Ar(e,null,mi.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of Ar(e,null,mi.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new Hn(Hn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new Hn(Hn.IDENTITY),o=EOe(this.graph,e,n);if(o&&o.length>0){o.reverse();let s="";for(const a of o)s&&J$(r,g2e(i,this.graph.getEdgeAttribute(a,s,"id"))),s=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=L$(e,"placement[0]",L$(e,"placement",void 0));let o;if(r&&this.graph.hasNode(r.target)?(o=this.getTransformationMatrix(r.target,n),o&&(o=J$(o,r))):i&&(o=this.getTransformationMatrix(i,n)),o){const s=(new Xr).fromRotationMatrix(o,Xr.XYZ),a=o.getTranslation().map(d=>1e3*d),c=s.toVector3().map(_re),l=o.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${TOe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class Q${constructor(e){this.db=e}getSpatialEntity(e){return Bf(this.db.store,e)}getExtractionSets(e){return function f2e(t,e){return PA(t.getSubjects(mi.spatialEntity.extraction_set_for,e,null).map(n=>q$(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return q$(this.db.store,e)}getAnatomicalStructures(e){return function p2e(t,e){return PA(t.getSubjects(mi.spatialEntity.reference_organ,e,null).map(n=>Bf(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function m2e(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(Bf(t,n.subject.id))},null,mi.spatialEntity.reference_organ,null,null),PA(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=mi.spatial.Male.id;break;case"Female":n=mi.spatial.Female.id;break;default:n=mi.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,o])=>i.concat(o.length>0?o:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(o=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of,a=this.getSceneNode(o,n,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s});return s&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(mi.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(o=>void 0!==o)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(o=>o.representation_of===e&&(!i||o.sex===n?.sex));if(r.length>0){const o=r[0],a=this.getSceneNode(o,o,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(n)??[]).map(l=>this.getSceneNode(l,o,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let s=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(s){if(r)s=new Hn(Hn.IDENTITY).rotateX(U4(90)).multiplyLeft(s);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);s.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:s,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const y2e={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function zA(t,e=y2e){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const{get:Yu,omit:v2e,set:GA,toNumber:NP}=MOe,WA="https://entity.api.hubmapconsortium.org/entities/",eX=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),x2e={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},Pg={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},FP="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class A2e{constructor(e,n="",i="",r){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const a=this.data.descendants||[],c=(this.data.ancestors||[]).find(ve=>"Donor"===ve.entity_type);this.donor=this.getDonor(c,i);const l=this.getRuiLocation(e,this.donor);l?this.rui_location=l:this.bad=!0,Pg[e.group_uuid]||(Pg[e.group_uuid]=e.group_name);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=Pg[e.group_uuid]||e.group_name,p=e.created_by_user_displayname;this["@id"]=WA+e.uuid,this.label=`Registered ${d}, ${p}, ${h}`,this.link=`${i}browse/sample/${e.uuid}`;const m={},x=[];this.sections=x;const D=[];this.datasets=D;for(const ve of a.filter(Oe=>"Sample"===Oe.entity_type)){const Oe=this.getSection(ve,e,i);m[ve.submission_id]=Oe,x.push(Oe),Oe.section_number=Oe.section_number??x.length}for(const ve of a)if("Dataset"===ve.entity_type){const Oe=this.getDataset(ve,n,i,r),Xe=Yu(ve,["ingest_metadata","metadata","tissue_id"]);m[Xe]?m[Xe].datasets?.push(Oe):D.push(Oe)}const F=l??{},G=`${F.x_dimension} x ${F.y_dimension} x ${F.z_dimension} ${F.dimension_units}`;this.section_count=F.slice_count||x.length;const q=parseFloat((F.slice_thickness||(F.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=q;const ee=F.dimension_units||"millimeter";this.section_units=ee,this.description=`${G}, ${q} ${ee}, ${this.section_count} Sections`,x.forEach((ve,Oe)=>{ve.description=`${F.x_dimension} x ${F.y_dimension} x ${q} ${ee}, ${q} ${ee}, ${ve.description}`,ve.section_number=Oe+1})}getSection(e,n,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":WA+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${Pg[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n="",i="",r){const o=new Date(e.last_modified_timestamp).toLocaleDateString(),s=Pg[e.group_uuid]||e.group_name,a=e.created_by_user_displayname,c=[...e.data_types,Yu(e,["ingest_metadata","metadata","assay_type"],"")],l=c.join("|").toLowerCase();let d,h="assets/icons/ico-unknown.svg";return-1!==l.indexOf("10x")?(d="10x",h="assets/icons/ico-bulk-10x.svg"):-1!==l.indexOf("af")?(d="AF",h="assets/icons/ico-spatial-af.svg"):-1!==l.indexOf("codex")?(d="CODEX",h="assets/icons/ico-spatial-codex.svg"):-1!==l.indexOf("imc")?(d="IMC",h="assets/icons/ico-spatial-imc.svg"):-1!==l.indexOf("lc")&&-1===l.indexOf("af")?(d="LC",h="assets/icons/ico-bulk-lc.svg"):d=-1!==l.indexOf("maldi")?"MALDI":-1!==l.indexOf("pas")?"PAS":"OTHER",h=this.getDatasetThumbnail(e,n,r)??h,{"@id":WA+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${a}, ${s}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:d,thumbnail:h}}getDatasetThumbnail(e,n,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${n}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=Yu(e,"metadata.files",[]).filter(o=>/\.(ome\.tif|ome\.tiff)$/.test(o.rel_path)).filter(o=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(o.rel_path)).filter(o=>eX.has(o.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(o=>`${n}/${e.uuid}/${o.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const o=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(eX.has(o))return`assets/thumbnails/TMC-Vanderbilt/DR1/${o}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=x2e[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,n){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const o=i.match(/age ([0-9]+)/);let s,a;o&&(s=NP(o[1]));for(const p of Yu(e,"metadata.organ_donor_data",Yu(e,"metadata.living_donor_data",[])))"Feminine gender"===p.preferred_term||"Female"===p.preferred_term?r="Female":"Masculine gender"===p.preferred_term||"Male"===p.preferred_term?r="Male":"Current chronological age"===p.preferred_term||"Age"===p.preferred_term?s=NP(p.data_value):"Body mass index"===p.preferred_term&&(a=NP(p.data_value));let c="";r&&s&&(c+=`${r}, Age ${s}`,a&&(c+=`, BMI ${a.toFixed(1)}`));const l=new Date(e.last_modified_timestamp).toLocaleDateString(),d=Pg[e.group_uuid]||e.group_name;return{"@id":WA+e.uuid,"@type":"Donor",label:c,description:`Entered ${l}, ${e.created_by_user_displayname}, ${d}`,link:`${n}browse/donor/${e.uuid}`,age:s,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:d,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const o=Yu(i,["placement","target"])??"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?GA(i,["placement","target"],o.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&GA(i,["placement","target"],"Male"===n.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return v2e({...this},["data","bad","donor"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const S2e=1e4,C2e=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],T2e={exists:{field:"rui_location"}};function tX(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??T2e,_source:{includes:C2e}})}function LP(t,e){return BP.apply(this,arguments)}function BP(){return BP=zt(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(o=>o.json()):JSON.parse(i):void 0}catch{return}}),BP.apply(this,arguments)}function jP(){return jP=zt(function*(t,e,n){const i=S2e,r=function M2e(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),o=tX(0,i,n),s=yield LP(t,{method:"POST",headers:r,body:o});if(!s)return;const a=s.hits.total.value;if(a<=i)return s;const c=[];for(let h=i;h<a;h+=i)c.push(LP(t,{method:"POST",headers:r,body:tX(h,i,n)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...s,hits:{...s.hits,hits:s.hits.hits.concat(...d)}}}),jP.apply(this,arguments)}function UP(){return UP=zt(function*(t,e,n,i,r="",o=""){let s;if("static"===e?s=yield LP(t):"search-api"===e&&(s=yield function I2e(t,e,n){return jP.apply(this,arguments)}(t,i,n)),s)return function w2e(t,e="",n="",i,r=!1){const s={},a=Yu(t,"hits.hits",[]).map(l=>Yu(l,"_source",{})).sort((l,d)=>l.uuid.localeCompare(d.uuid)).map(l=>new A2e(l,e,n,i).toJsonLd());for(const l of a){const d=l["@id"];s[d]?s[d].samples.push(l.samples[0]):s[d]=l}const c=Object.values(s);return r&&(function E2e(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let o=0;o<r.length;o++){const s=r[o]["@id"];e=e.concat(r[o].datasets);for(const a of r[o].sections)e=e.concat(a.datasets);for(let a=o+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===s)&&(r[o].deleteMe=!0,n++)}i.samples=r.filter(o=>!0!==o.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(c),console.log(c.map(l=>({"@context":FP,...l})))),zA(JSON.stringify({"@context":FP,"@graph":c}),FP)}(s,r,o,i);console.warn(`Unable to load ${t} as HuBMAP Data`)}),UP.apply(this,arguments)}function V0(t,e,n){const i=new Set;for(const r of e)for(const o of Ar(t,r,n,null,null))i.add(o.object.id);return i}const O2e={[mi.spatialEntity.x_dimension.id]:"x",[mi.spatialEntity.y_dimension.id]:"y",[mi.spatialEntity.z_dimension.id]:"z"};function N2e(t,e,n,i){const r=e.getTransformationMatrix(n,i);let o;if(r){const s=r.getTranslation(),a=function P2e(t,e){const n=Lf(t,e,"Dimensions",O2e);return[n.x,n.y,n.z]}(t,n).map(l=>l/1e3/2),c=(new Xr).fromRotationMatrix(r,Xr.XYZ).toQuaternion().normalize().calculateW();o=(new IP).fromCenterHalfSizeQuaternion(s,a,c)}return o}function F2e(t,e,n,i){const{x:r,y:o,z:s,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of n){const p=N2e(t,e,h,c);p&&p.distanceSquaredTo([r,o,s].map(x=>x/1e3))<=d&&l.add(h)}return l}function H0(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Ar(t,a,ti.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=n(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function $A(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Ar(t,a,ti.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=n(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function Ng(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function HP(t,e,n){const i=new Set;for(const r of n){const o=Er.namedNode(r);t.forSubjects(Ng(e,i),mi.spatialEntity.ccf_annotations,o,null)}return i}function zP(t,e){const n=function q2e(t,e){const n=new Map;for(const i of t)for(const r of Ar(e,i,ti.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id).add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const o=n.get(r);for(const s of Ar(e,r,mi.spatialEntity.ccf_annotations,null,null))if(i.has(s.object.id)){const a=i.get(s.object.id);o.forEach(c=>a.add(c))}else i.set(s.object.id,new Set(o))}return i}function ePe(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[mi.ontologyNode.label.id]:"label",[n]:"parent",[mi.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of VA(t,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=t.getSubjects(n,e,null).map(o=>o.id),i}function iX(t,e,n,i){const r={root:e,nodes:{}},o=new Set;for(const a of Ar(t,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=ePe(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const s=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,rX(r),r}function rX(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)rX(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const oX=l2e(function tPe(t){const e=iX(t,Hc.body.id,"body",mi.asctb.part_of.id);return e.nodes[Hc.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");function GP(t,e,n,i){return{"@id":`http://purl.org/ccf/${t}`,id:t,label:e,parent:n??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const XA={[ti.label.id]:"label",[ti.description.id]:"description",[ti.link.id]:"link"},rPe={...XA,[ti.providerName.id]:"providerName"},oPe={...XA,[ti.technology.id]:"technology",[ti.thumbnail.id]:"thumbnail"},sPe={...XA,[ti.sampleType.id]:"sampleType",[ti.sectionNumber.id]:"sectionNumber",[ti.datasets.id]:"datasets"},aPe={...XA,[ti.sampleType.id]:"sampleType",[ti.sectionCount.id]:"sectionCount",[ti.sectionSize.id]:"sectionSize",[ti.sectionUnits.id]:"sectionUnits",[ti.donor.id]:"donor",[ti.spatialEntity.id]:"spatialEntityId",[ti.sections.id]:"sections",[ti.datasets.id]:"datasets"};function cPe(t,e){return Lf(t,e,"Donor",rPe)}function sX(t,e){return Lf(t,e,"Dataset",oPe)}function lPe(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of VA(t,e,sPe))if("datasets"===i){const o=sX(t,r);n[i].push(o)}else n[i]=r;return n}class uPe{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const n=Date.now();return this.database.connect().then(function(){var i=zt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-n})}}function WP(){return WP=zt(function*(){const t=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(t,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),WP.apply(this,arguments)}const{delMany:gPe,get:aX,setMany:_Pe}=N,bPe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class yPe{constructor(e=bPe){this.options=e,this.store=new xP(void 0,{factory:Er}),this.graph=new Z$(this),this.scene=new Q$(this)}connect(e,n=!1){var i=this;return zt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return zt(function*(){const n=(new Date).getTime(),i=Kke(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,o=`ccf-database.${i}`,s=yield aX(r).catch(()=>{});let a;s&&n-new Date(+s).getTime()>36e5?yield gPe([o,r]).catch(()=>{}):a=yield aX(o).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),_Pe([[o,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return zt(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=TP(r,Er);else if(r.endsWith(".n3store.json")){const o=yield fetch(r).then(s=>s.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(e.store=TP(o,Er))}else r?.length>0&&i.push(r);i.push(yield function mPe(){return WP.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function nX(t,e,n,i){return UP.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken,e.options.hubmapAssetsUrl,e.options.hubmapPortalUrl).then(o=>{if(o)return e.addDataSources([o])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return zt(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var o=zt(function*(s){if("string"==typeof s)if((s.startsWith("http")||s.startsWith("assets/"))&&s.includes("jsonld")){const a=s;s=zA(s=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield EP(s,r)}else s.endsWith("n3")?yield function bOe(t,e){return CP.apply(this,arguments)}(s,r):s.endsWith("rdf")||s.endsWith("owl")||s.endsWith("xml")?yield function _Oe(t,e){return SP.apply(this,arguments)}(s,r):(s=zA(s),yield EP(s,r));else s=zA(JSON.stringify(s)),yield EP(s,r)});return function(s){return o.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return zt(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function hPe(t){const e=oX(t),n=new Map;for(const{subject:i,object:r}of Ar(t,null,mi.spatialEntity.representation_of,null,null)){const o=new Set([r.id]);let s=e.nodes[r.id]?.parent;for(;s&&!o.has(s);)o.add(s),s=e.nodes[s]?.parent;n.set(i.id,[...o].map(a=>Er.namedNode(a)))}for(const{object:i}of Ar(t,null,ti.spatialEntity,null,null))for(const{subject:r}of Ar(t,null,mi.spatialPlacement.source,i,null))for(const{object:o}of Ar(t,r,mi.spatialPlacement.target,null,null))for(const s of n.get(o.id)??[])t.addQuad(Er.namedNode(i.id),mi.spatialEntity.ccf_annotations,s)}(e.store),e})()}serialize(){return function yOe(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return zt(function*(){n.store=TP(e,Er),n.graph=new Z$(n),n.scene=new Q$(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function B2e(t,e,n){let i=function j2e(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),ti.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function Y2e(t,e,n=!0){const i=new Set;if(t.forSubjects(Ng(e,i),ti.spatialEntity,null,null),!n){const r=new Set;return e.forEach(o=>i.has(o)?void 0:r.add(o)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=H0(t,i,o=>function U2e(t,e,n){const i=new Set;return t.forSubjects(Ng(e,i),ti.sex,ti[n],null),i}(t,o,r))}if(i.size>0&&n.consortiums?.length>0&&(i=H0(t,i,r=>function V2e(t,e,n){const i=new Set;for(const r of n){const o=Er.literal(r);t.forSubjects(Ng(e,i),ti.consortiumName,o,null)}return i}(t,r,n.consortiums))),i.size>0&&n.tmc?.length>0&&(i=H0(t,i,r=>function H2e(t,e,n){const i=new Set;for(const r of n){const o=Er.literal(r);t.forSubjects(Ng(e,i),ti.providerName,o,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function L2e(t,e,n){const i=new Map,r=new Set,o=new Set(e);for(const c of e)for(const l of Ar(t,c,ti.sections,null,null))o.add(l.object.id);for(const c of o)for(const l of Ar(t,c,ti.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const s=n(r),a=new Set;for(const c of s)for(const l of i.get(c)??[])a.add(l);return a}(t,i,r=>function z2e(t,e,n){const i=new Set;for(const r of n){const o=Er.literal(r);t.forSubjects(Ng(e,i),ti.technology,o,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=$A(t,i,r=>function K2e(t,e,n,i){const r=new Set;for(const o of i)F2e(t,e,n,o).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(Hc.body.id)&&(i=$A(t,i,o=>HP(t,o,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(Hc.cell.id)&&(i=$A(t,i,o=>function G2e(t,e,n){const i=new Set;for(const r of n)t.forObjects(o=>{i.add(o.id)},r,mi.asctb.located_in,null),r===Hc.cell.id&&i.add(Hc.body.id);return HP(t,e,[...i])}(t,o,r)))}if(i.size>0&&n.biomarkerTerms?.length>0){const r=n.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=$A(t,i,o=>function W2e(t,e,n){const i=new Set;for(const r of n)t.forObjects(o=>{i.add(o.id)},r,mi.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(Hc.body.id);return HP(t,e,[...i])}(t,o,r)))}if(i.size>0&&2===n.ageRange?.length&&FA(n.ageRange[0])&&FA(n.ageRange[1])){const r=Math.max(...n.ageRange),o=Math.min(...n.ageRange);1===o&&110===r||(i=H0(t,i,s=>function $2e(t,e,n,i){const r=new Set;for(const o of e)for(const s of Ar(t,o,ti.age,null,null)){const a=(0,NA.fromRdf)(s.object);a>=n&&a<=i&&r.add(o)}return r}(t,s,o,r)))}if(i.size>0&&2===n.bmiRange?.length&&FA(n.bmiRange[0])&&FA(n.bmiRange[1])){const r=Math.max(...n.bmiRange),o=Math.min(...n.bmiRange);13===o&&83===r||(i=H0(t,i,s=>function X2e(t,e,n,i){const r=new Set;for(const o of e)for(const s of Ar(t,o,ti.bmi,null,null)){const a=(0,NA.fromRdf)(s.object);a>=n&&a<=i&&r.add(o)}return r}(t,s,o,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(Er.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function _2e(t,e){const n=t.getObjects(Er.namedNode(e),ti.spatialEntity,null);if(n.length>0)return Bf(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return zt(function*(){return e.status||(e.status=new uPe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return zt(function*(){return function R2e(t){const e=new Set;for(const n of Ar(t,null,ti.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return zt(function*(){return function k2e(t){const e=new Set;for(const n of Ar(t,null,ti.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return zt(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function dPe(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of VA(t,e,aPe))if("sections"===i){const o=lPe(t,r);n[i].push(o)}else if("datasets"===i){const o=sX(t,r);n[i].push(o)}else n[i]="donor"===i?cPe(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return zt(function*(){return function D2e(t,e){const n=V0(e,t,ti.donor.id),i=V0(e,n,ti.providerUUID.id),r=new Set;for(const c of t)for(const l of Ar(e,c,ti.spatialEntity,null,null))r.add(l.subject.id);const o=V0(e,r,ti.sections.id),s=new Set([...V0(e,r,ti.datasets.id),...V0(e,o,ti.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":o.size,"Tissue Datasets":s.size}).map(([c,l])=>({label:c,count:l}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return zt(function*(){return function J2e(t,e){const n={};return zP(t,e).forEach((r,o)=>{n[o]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return zt(function*(){return function Q2e(t,e){const n=zP(t,e),i=new Map;for(const o of n.keys()){const s=n.get(o);for(const a of Ar(e,null,mi.asctb.located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r[Hc.cell.id]=n.get(Hc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getBiomarkerTermOccurences(e){var n=this;return zt(function*(){return function Z2e(t,e){const n=zP(t,e),i=new Map;for(const o of n.keys()){const s=n.get(o);for(const a of Ar(e,null,mi.asctb.bm_located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r.biomarkers=n.get(Hc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return zt(function*(){return oX(e.store)})()}getCellTypeTreeModel(){var e=this;return zt(function*(){return function nPe(t){return iX(t,Hc.cell.id,"cell",mi.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return zt(function*(){return function iPe(t){const e=mi.x("ccf_biomarker_type"),n={biomarkers:GP("biomarkers","Biomarkers","",[])};for(const i of Ar(t,null,e,null,null)){const r=i.object.value,o=i.subject.id;n[r]||(n[r]=GP(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),n.biomarkers.children.push(r)),n[r].children.push(o);const s=GP(o,"",r,[]),a={[mi.ontologyNode.label.id]:"label",[d2e_label.id]:"synonymLabels"};for(const[c,l]of VA(t,o,a))"synonymLabels"===c?l&&l!==s.label&&s.synonymLabels.push(l):s[c]=l;for(const c of Object.values(n))c.children.length>1&&c.children.sort((l,d)=>n[l]?.label.localeCompare(n[d]?.label));n[o]=s}return{root:"biomarkers",nodes:n}}(e.store)})()}getReferenceOrgans(){var e=this;return zt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return zt(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return zt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return zt(function*(){return i.graph.getSpatialPlacement(e,n)})()}}class cX extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class TPe{constructor(){this.cancelUncompleted$=new Ve}cancelPreviousAction(){this.cancelUncompleted$.next()}}const $P="\u0275fac",lX=Symbol("InjectorInstance"),dX=Symbol("FactoryHasBeenDecorated");function uX(t,e){const n=t[lX];return n?n.get(e):null}const DPe={cancelUncompleted:!1};function hX(t=DPe){return(e,n,i)=>{let r;const o=function MPe(t){return t?new TPe:null}(t.cancelUncompleted);function s(){null!==o&&o.cancelPreviousAction();const a=uX(this,kl)||function SPe(){throw new cX}(),c=uX(this,an)||function CPe(){throw new cX}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function APe(t,e,n){return vm(e)?function EPe(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):gf(e)?function wPe(t,e,n){return null!==n&&(e=e.pipe(gr(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,l,o))}"function"==typeof i?.value?(r=i.value,i.value=s):Object.defineProperty(e,n,{set:a=>r=a,get:()=>s}),function IPe(t){if(dX in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[$P]&&function XP(t){const e=t[$P];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[lX]=He(Zp),r};n&&(n.factory=i),Object.defineProperty(t,$P,{get:()=>i})}(e),t.constructor.prototype[dX]=!0}(e)}}var jf;const xNe=["bodyCanvas"];let wNe=(()=>{var t;class e{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new rn,this.nodeDrag=new rn,this.nodeClick=new rn,this.nodeHoverStart=new rn,this.nodeHoverStop=new rn,this.initialized=new rn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(i){this._scene=i,this.bodyUI?.setScene(i)}get rotation(){return this._rotation}set rotation(i){this._rotation=i,this.bodyUI?.setRotation(i)}get rotationX(){return this._rotationX}set rotationX(i){this._rotationX=i,this.bodyUI?.setRotationX(i)}get zoom(){return this._zoom}set zoom(i){this._zoom=i,this.bodyUI?.setZoom(i)}get target(){return this._target}set target(i){this._target=i,this.bodyUI?.setTarget(i)}get bounds(){return this._bounds}set bounds(i){this._bounds=i,this.zoomToBounds(i)}get camera(){return this._camera}set camera(i){this._camera=i}get interactive(){return this._interactive}set interactive(i){this._interactive=i,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(i,r={x:48,y:48}){if(this.bodyCanvas){const{width:o,height:s}=this.bodyCanvas.nativeElement,a=window.devicePixelRatio,c=Math.min(Math.log2((o-r.x)/a/i.x),Math.log2((s-r.y)/a/i.y));this.zoom=c}}setupBodyUI(){var i=this;return zt(function*(){const r=i.bodyCanvas.nativeElement,o=new Vxe({id:"body-ui",canvas:r,zoom:i.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:i.interactive,camera:i.camera});r.addEventListener("contextmenu",s=>s.preventDefault()),yield o.initialize(),i.bodyUI=o,window.bodyUI=o,i.scene?.length>0&&i.bodyUI.setScene(i.scene),i.bounds&&i.zoomToBounds(i.bounds),i.target&&i.bodyUI.setTarget(i.target),i.subscriptions=[i.bodyUI.sceneRotation$.subscribe(s=>i.rotationChange.next(s)),i.bodyUI.nodeDrag$.subscribe(s=>i.nodeDrag.emit(s)),i.bodyUI.nodeClick$.subscribe(s=>i.nodeClick.emit(s)),i.bodyUI.nodeHoverStart$.subscribe(s=>i.nodeHoverStart.emit(s)),i.bodyUI.nodeHoverStop$.subscribe(s=>i.nodeHoverStop.emit(s))],i.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=vn({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Li(xNe,5,Ht),2&i){let o;Nn(o=Fn())&&(r.bodyCanvas=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&va(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&Ln(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0}),e})(),ENe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[Yi]}),e})();new bt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const CX=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name));function HNe(t,e){if(1&t&&(At(0,"div",16),Ln(1,"youtube-player",17),Mt()),2&t){const n=Pn(3);Dt(1),Zx("videoId",n.videoID)}}function zNe(t,e){if(1&t&&(At(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),li(3),Mt()(),At(4,"div",13),Ln(5,"markdown",14),mn(6,HNe,2,1,"div",15),Mt()()),2&t){const n=Pn(),i=n.index,r=n.$implicit;Lt("expanded",0===i),Dt(3),Co(r.title),Dt(2),kn("first",0===i),Lt("data",r.content),Dt(1),Lt("ngIf",0===i)}}function GNe(t,e){if(1&t&&(At(0,"div",9),mn(1,zNe,7,6,"mat-expansion-panel",10),Mt()),2&t){const n=e.$implicit;Dt(1),Lt("ngIf",n)}}CX.filter(t=>!0!==t.disabled);let TX=(()=>{var t;class e{constructor(i,r){this.dialogRef=i,this.data=r,this.documentationContents=r.content||[],this.infoTitle=r.title||"",this.videoID=r.videoID}ngOnInit(){const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",document.body.appendChild(i)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return(t=e).\u0275fac=function(i){return new(i||t)(He(k2),He(h7))},t.\u0275cmp=vn({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(At(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),li(5),Mt(),At(6,"div",5)(7,"mat-icon",6),bn("click",function(){return r.close()}),li(8,"clear"),Mt()()(),At(9,"mat-dialog-content",7),mn(10,GNe,2,1,"div",8),Mt()()()()),2&i&&(Dt(5),Co(r.infoTitle),Dt(5),Lt("ngForOf",r.documentationContents))},dependencies:[rd,Mc,p7,m7,xg,S7,LTe,O7,J7],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e})(),MX=(()=>{var t;class e{constructor(i){this.http=i,this.panelContent=new Q({content:[],infoTitle:"",videoID:""})}updateData(i,r,o){this.http.get(i,{responseType:"text"}).subscribe(s=>{const a={content:this.parseMarkdown(s),infoTitle:o,videoID:r};this.panelContent.next(a)})}parseMarkdown(i){const r=[],o=i.split("# ");for(const s of o)if(s.length){const a=s.includes("\n\n")?"\n\n":"\r\n\r\n",c=s.split(a);r.push({title:c[0],content:c.splice(1).join(a)})}return r}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Vu))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),$Ne=(()=>{var t;class e{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new rn,this.closeClicked=new rn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=vn({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&va(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(At(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),li(5),Mt(),At(6,"mat-icon",5),bn("click",function(){return r.close()}),li(7,"clear"),Mt()(),Ln(8,"img",6),At(9,"mat-dialog-content",7)(10,"div",8),li(11),Mt(),At(12,"a",9),bn("click",function(){return r.onDialogButtonClick()}),Mt()()()()()),2&i&&(Dt(5),Co(r.infoTitle),Dt(3),Lt("src",r.imageUrl,J_),Dt(3),Cs(" ",r.message,""),Dt(1),Lt("text",r.callToAction))},dependencies:[xg,p7,m7,Q7],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),e})(),Ug=(()=>{var t;let e=((t=class extends JIe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function ZIe(){return yi(t=>null!=t)}(),ks(1))}setConfig(i){this.setState(i)}patchConfig(i){this.patchState(i)}getProperty(i){return this.config$.pipe(D9(...i),pt(),ks(1))}getOption(...i){const r=this.getPathKey(i);if(this.optionCache.has(r))return this.optionCache.get(r);const o=this.config$.pipe(D9(...i),pt(),ks(1));return this.optionCache.set(r,o),o}getPathKey(i){return`${i.length}:${i.join(".")}`}}).\u0275fac=function(){let n;return function(r){return(n||(n=Ii(t)))(r||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t);return dt([_W()],e.prototype,"config$",null),e=dt([YIe(),Q5({name:"globalConfig",defaults:null})],e),e})();!function KNe(){const t=localStorage.getItem("ALLOW_TELEMETRY");null===t||t.toLowerCase()}();class ZNe{getDatabaseStatus(){return this.forwardCall("getDatabaseStatus")}getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getCellTypeTreeModel(){return this.forwardCall("getCellTypeTreeModel")}getBiomarkerTreeModel(){return this.forwardCall("getBiomarkerTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getCellTypeTermOccurences(e){return this.forwardCall("getCellTypeTermOccurences",e)}getBiomarkerTermOccurences(e){return this.forwardCall("getBiomarkerTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,n){return this.forwardCall("getReferenceOrganScene",e,n)}}class IX extends ZNe{forwardCall(e,...n){return this.impl$.pipe(Je(i=>i[e](...n)))}}let DX=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const KP=new Ve,Vg={cacheBusterObserver:KP},Uf={cacheBusterObserver:KP,maxCacheCount:4};function RX(t,e,n){return t?{min:t[0]>e?t[0]:void 0,max:t[1]<n?t[1]:void 0}:void 0}function QNe(t){return{age:RX(t?.ageRange,1,110),bmi:RX(t?.bmiRange,13,83),sex:t?.sex?.toLowerCase?.(),ontologyTerms:t?.ontologyTerms,cellTypeTerms:t?.cellTypeTerms,consortiums:t?.consortiums,providers:t?.tmc,technologies:t?.technologies,spatial:t?.spatialSearches}}function kX(t){return t.map(e=>({...e,transformMatrix:new Hn(e.transformMatrix??[])}))}let eFe=(()=>{var t;class e{constructor(i,r){this.api=i,this.globalConfig=r,r.getOption("hubmapToken").subscribe(KP)}getDatabaseStatus(){return this.doRequest(i=>this.api.dbStatus(i))}getProviderNames(){return this.doRequest(i=>this.api.providerNames(i))}getDatasetTechnologyNames(){return this.doRequest(i=>this.api.technologyNames(i))}getOntologyTreeModel(){return this.doRequest(i=>this.api.ontologyTreeModel(i),void 0,{},t=>t)}getCellTypeTreeModel(){return this.doRequest(i=>this.api.cellTypeTreeModel(i),void 0,{},t=>t)}getBiomarkerTreeModel(){return this.doRequest(i=>this.api.biomarkerTreeModel(i),void 0,{},t=>t)}getReferenceOrgans(){return this.doRequest(i=>this.api.referenceOrgans(i),void 0,{},t=>t)}getTissueBlockResults(i){return this.doRequest(r=>this.api.tissueBlocks(r),i,{},t=>t)}getAggregateResults(i){return this.doRequest(r=>this.api.aggregateResults(r),i)}getOntologyTermOccurences(i){return this.doRequest(r=>this.api.ontologyTermOccurences(r),i)}getCellTypeTermOccurences(i){return this.doRequest(r=>this.api.cellTypeTermOccurences(r),i)}getBiomarkerTermOccurences(i){return this.doRequest(r=>this.api.biomarkerTermOccurences(r),i)}getScene(i){return this.doRequest(r=>this.api.scene(r),i,{},kX)}getReferenceOrganScene(i,r){return this.doRequest(o=>this.api.referenceOrganScene(o),r,{organIri:i},kX)}doRequest(i,r,o,s){const{api:a,globalConfig:c}=this,l={...QNe(r),...o};return Qa([c.getOption("remoteApiEndpoint"),c.getOption("hubmapToken")]).pipe(er(1),Bi(([d,h])=>{a.configuration.basePath=d,h&&(l.token=h)}),Je(()=>i(l)),ue(d=>s?s(d):d))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(S$),it(Ug))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),dt([Ma(Vg)],e.prototype,"getProviderNames",null),dt([Ma(Vg)],e.prototype,"getDatasetTechnologyNames",null),dt([Ma(Vg)],e.prototype,"getOntologyTreeModel",null),dt([Ma(Vg)],e.prototype,"getCellTypeTreeModel",null),dt([Ma(Vg)],e.prototype,"getBiomarkerTreeModel",null),dt([Ma(Vg)],e.prototype,"getReferenceOrgans",null),dt([Ma(Uf)],e.prototype,"getTissueBlockResults",null),dt([Ma(Uf)],e.prototype,"getAggregateResults",null),dt([Ma(Uf)],e.prototype,"getOntologyTermOccurences",null),dt([Ma(Uf)],e.prototype,"getCellTypeTermOccurences",null),dt([Ma(Uf)],e.prototype,"getBiomarkerTermOccurences",null),dt([Ma(Uf)],e.prototype,"getScene",null),dt([Ma(Uf)],e.prototype,"getReferenceOrganScene",null),e})(),tFe=(()=>{var t;class e extends IX{constructor(i){super(),this.impl$=this.database$=i.config$.pipe(r=>r,yi(r=>Object.keys(r).length>0),Je(r=>function qxe(t,e){return new B(n=>{const i=t(),r=e(i);return(r?xi(r):$e).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDatabase(r),o=>this.connectDatabase(o,r))),ue(r=>r.database),ks(1))}connectDatabase(i,r){return zt(function*(){return yield i.database.connect(r,!0),i})()}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Ug))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),nFe=(()=>{var t;class e extends tFe{createDatabase(i){return{database:new yPe(i),unsubscribe:()=>{}}}}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=Ii(t)))(r||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),iFe=(()=>{var t;class e extends IX{constructor(i,r){super(),this.impl$=i.config$.pipe(o=>o,ue(o=>this.selectToken(o)),pt(),ue(o=>r.get(o)),ks(1))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Ug),it(fr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),qP=(()=>{class e{}return e.type="[CallToAction] Learn More",e})(),JP=(()=>{class e{}return e.type="[CallToAction] Open Dialog",e})(),ZP=(()=>{class e{}return e.type="[CallToAction] Close Dialog",e})();var QP;class Dd{get length(){return Dd.storage?.length??0}key(e){return Dd.storage?.key(e)??null}getItem(e,n){return Dd.storage?.getItem(e)??n??null}setItem(e,n){try{return Dd.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){Dd.storage?.removeItem(e)}clear(){Dd.storage?.clear()}}(jf=Dd).storage=(()=>{let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length?t:void 0}})(),jf.\u0275fac=function(e){return new(e||jf)},jf.\u0275prov=Et({token:jf,factory:jf.\u0275fac,providedIn:"root"});const OX="callToActionPopupShown";let Ku=(()=>{var t;let e=(t=class{static ctaDatePassed(i,r=Date.now){return+r()>+new Date(i)}constructor(i,r,o,s,a){this.dialog=i,this.ga=r,this.storage=o,this.infoService=s,this.http=a}ngxsOnInit(i){const{expirationDate:r,popupShown:o}=i.getState(),s=this.storage.getItem(OX,`${o}`),a=QP.ctaDatePassed(r);"true"!==s&&!a&&i.dispatch(new JP)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(ue(i=>this.infoService.parseMarkdown(i)))}launchLearnMore(i){this.dialog.open(TX,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:i,videoID:"UfxMpzatowE"}})}learnMore(i){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Bi(r=>this.launchLearnMore(r)))}open(i){this.dialog.open(oFe,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(OX,"true"),i.patchState({popupShown:!0})}close(i){this.dialog.closeAll(),this.ga.event("close","call_to_action")}},QP=t,t.\u0275fac=function(i){return new(i||t)(it(nA),it(P0),it(Dd),it(MX),it(Vu))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t);return dt([TO(qP)],e.prototype,"learnMore",null),dt([TO(JP)],e.prototype,"open",null),dt([TO(ZP)],e.prototype,"close",null),e})();Ku=QP=dt([Q5({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Ku);let JA=(()=>{class t{static title(n){return n.title}static message(n){return n.message}static callToAction(n){return n.callToAction}static imageUrl(n){return n.imageUrl}static expirationDate(n){return n.expirationDate}static popupShown(n){return n.popupShown}}return dt([hg([Ku])],t,"title",null),dt([hg([Ku])],t,"message",null),dt([hg([Ku])],t,"callToAction",null),dt([hg([Ku])],t,"imageUrl",null),dt([hg([Ku])],t,"expirationDate",null),dt([hg([Ku])],t,"popupShown",null),t})(),oFe=(()=>{var t;class e{constructor(){this.close=()=>new ZP,this.learnMore=()=>new qP}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=vn({type:t,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(At(0,"ccf-call-to-action",0),bn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),Yr(1,"async"),Yr(2,"async"),Yr(3,"async"),Yr(4,"async"),Mt()),2&i&&Lt("infoTitle",Go(1,4,r.title$))("message",Go(2,6,r.message$))("callToAction",Go(3,8,r.callToAction$))("imageUrl",Go(4,10,r.imageUrl$))},dependencies:[$Ne,Hb],changeDetection:0}),dt([cE(JA.title)],e.prototype,"title$",void 0),dt([cE(JA.message)],e.prototype,"message$",void 0),dt([cE(JA.callToAction)],e.prototype,"callToAction$",void 0),dt([cE(JA.imageUrl)],e.prototype,"imageUrl$",void 0),dt([hX()],e.prototype,"close",void 0),dt([hX()],e.prototype,"learnMore",void 0),e})(),cFe=(()=>{var t;class e{constructor(i){this.source=i,this.organs=CX}getOrganInfo(i,r,o="Female"){let s=this.organs.find(c=>c.id===i);if(!s)return Yt(void 0);const a=s.organ;return s.disabled&&(s=this.organs.find(c=>!c.disabled&&c.organ===a)),s?.side&&r&&s.side!==r&&(s=this.organs.find(c=>!c.disabled&&c.organ===a&&c.side===r)),Yt(s)}getOrgan(i,r="Both"){return this.source.getReferenceOrgans().pipe(ue(o=>o.find(s=>s.representation_of===i.id&&("Both"===r||s.sex===r))))}getOrganScene(i,r="Female"){return i.id?this.source.getReferenceOrganScene(i.id,{ontologyTerms:[i.id],sex:r}):Yt([])}getOrganStats(i,r="Female"){return i.id?this.source.getAggregateResults({ontologyTerms:[i.id],sex:r}):Yt([])}getBlocks(i,r="Female"){return i.id?this.source.getTissueBlockResults({ontologyTerms:[i.id],sex:r}):Yt([])}}return(t=e).\u0275fac=function(i){return new(i||t)(it(DX))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function lFe(t,e){if(1&t){const n=Ec();At(0,"div",6)(1,"div",7)(2,"div",8),li(3),Mt(),At(4,"div",9),bn("click",function(){const o=vr(n).$implicit;return xr(Pn().goToURL(o.buttonUrl))}),li(5),Mt()()()}if(2&t){const n=e.$implicit;Dt(3),Co(n.body),Dt(1),Lt("gaLabel",n.buttonUrl),Dt(1),Cs(" ",n.buttonTitle,"")}}function dFe(t,e){if(1&t){const n=Ec();At(0,"div",10),bn("click",function(){const o=vr(n).$implicit;return xr(Pn().goToURL(o.buttonUrl))}),li(1),Mt()}if(2&t){const n=e.$implicit;Lt("gaLabel",n.buttonUrl),Dt(1),Co(n.buttonTitle)}}let uFe=(()=>{var t;class e{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}goToURL(i){window.open(i,"_blank")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=vn({type:t,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(i,r){1&i&&(At(0,"div",0),mn(1,lFe,6,3,"div",1),Mt(),At(2,"div",2)(3,"div",3),li(4,"Human Reference Atlas (HRA) Deep Dive"),Mt(),At(5,"div",4),mn(6,dFe,2,2,"div",5),Mt()()),2&i&&(Dt(1),Lt("ngForOf",r.linkCards),Dt(5),Lt("ngForOf",r.deepDives))},dependencies:[rd,lke,y$],styles:[".link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0rem 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:Inter Variable,Helvetica,Arial,sans-serif}"],changeDetection:0}),e})();function hFe(t,e){if(1&t&&(At(0,"div",3)(1,"div",4),li(2),Mt(),At(3,"div",5),li(4),Mt()()),2&t){const n=e.$implicit;Dt(2),Co(n.count),Dt(2),Co(n.label)}}let fFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=vn({type:t,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(i,r){1&i&&(At(0,"div",0)(1,"div",1),li(2),Mt(),mn(3,hFe,5,2,"div",2),Mt()),2&i&&(Dt(2),Cs(" ",r.statsLabel," "),Dt(1),Lt("ngForOf",r.stats))},dependencies:[rd],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0}),e})();const pFe=["switch"];function mFe(t,e){1&t&&(At(0,"div",12),function rl(){Dn.lFrame.currentNamespace=lp}(),At(1,"svg",13),Ln(2,"path",14),Mt(),At(3,"svg",15),Ln(4,"path",16),Mt()())}const gFe=["*"],_Fe=new bt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),bFe={provide:Os,useExisting:zn(()=>NX),multi:!0};class PX{constructor(e,n){this.source=e,this.checked=n}}let yFe=0;const vFe=FE(r0(NE(PE(class{constructor(t){this._elementRef=t}}))));let xFe=(()=>{var t;class e extends vFe{get required(){return this._required}set required(i){this._required=ui(i)}get checked(){return this._checked}set checked(i){this._checked=ui(i),this._changeDetectorRef.markForCheck()}get hideIcon(){return this._hideIcon}set hideIcon(i){this._hideIcon=ui(i)}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(i,r,o,s,a,c,l){super(i),this._focusMonitor=r,this._changeDetectorRef=o,this.defaults=a,this._onChange=d=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this._hideIcon=!1,this.change=new rn,this.toggleChange=new rn,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=a.color||"accent",this._noopAnimations="NoopAnimations"===c,this.id=this._uniqueId=`${l}${++yFe}`,this._hideIcon=a.hideIcon??!1}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{"keyboard"===i||"program"===i?(this._focused=!0,this._changeDetectorRef.markForCheck()):i||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(i){this.checked=!!i}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return(t=e).\u0275fac=function(i){_u()},t.\u0275dir=Ut({type:t,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked",hideIcon:"hideIcon"},outputs:{change:"change",toggleChange:"toggleChange"},features:[_n]}),e})(),NX=(()=>{var t;class e extends xFe{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(i,r,o,s,a,c){super(i,r,o,s,a,c,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new PX(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(i){return new PX(this,i)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Ht),He(Uu),He(qr),ma("tabindex"),He(_Fe),He(Hr,8))},t.\u0275cmp=vn({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&Li(pFe,5),2&i){let o;Nn(o=Fn())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(i,r){2&i&&(ml("id",r.id),Ai("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),kn("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[di([bFe]),_n],ngContentSelectors:gFe,decls:13,vars:25,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons",4,"ngIf"],[1,"mdc-label",3,"for","click"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i&&(zr(),At(0,"div",0)(1,"button",1,2),bn("click",function(){return r._handleClick()}),Ln(3,"div",3),At(4,"div",4)(5,"div",5)(6,"div",6),Ln(7,"div",7),Mt(),At(8,"div",8),Ln(9,"div",9),Mt(),mn(10,mFe,5,0,"div",10),Mt()()(),At(11,"label",11),bn("click",function(s){return s.stopPropagation()}),Rn(12),Mt()()),2&i){const o=$s(2);kn("mdc-form-field--align-end","before"==r.labelPosition),Dt(1),kn("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),Lt("tabIndex",r.tabIndex)("disabled",r.disabled),Ai("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),Dt(8),Lt("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Dt(1),Lt("ngIf",!r.hideIcon),Dt(1),Lt("for",r.buttonId),Ai("id",r._labelId)}},dependencies:[_g,Mc],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width);--mdc-switch-disabled-handle-opacity:0.38;--mdc-switch-disabled-selected-icon-opacity:0.38;--mdc-switch-disabled-track-opacity:0.12;--mdc-switch-disabled-unselected-icon-opacity:0.38;--mdc-switch-handle-height:20px;--mdc-switch-handle-shape:10px;--mdc-switch-handle-width:20px;--mdc-switch-selected-icon-size:18px;--mdc-switch-track-height:14px;--mdc-switch-track-shape:7px;--mdc-switch-track-width:36px;--mdc-switch-unselected-icon-size:18px;--mdc-switch-state-layer-size:40px;--mdc-switch-selected-focus-state-layer-opacity:0.12;--mdc-switch-selected-hover-state-layer-opacity:0.04;--mdc-switch-selected-pressed-state-layer-opacity:0.1;--mdc-switch-unselected-focus-state-layer-opacity:0.12;--mdc-switch-unselected-hover-state-layer-opacity:0.04;--mdc-switch-unselected-pressed-state-layer-opacity:0.1}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0}),e})(),FX=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),e})(),AFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[FX,ji,bg,Yi,FX,ji]}),e})(),SFe=(()=>{var t;class e{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new rn}get left(){const{value:i,labels:r}=this;return i!==r[1]}updateToggle(i){this.value=i?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=vn({type:t,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(i,r){2&i&&va(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],["hideIcon","",1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(i,r){if(1&i){const o=Ec();At(0,"span",0),bn("click",function(){vr(o);const a=$s(3);return r.left||a.toggle(),xr(r.updateToggle(!0))}),li(1),Mt(),At(2,"mat-slide-toggle",1,2),bn("change",function(a){return r.updateToggle(!a.checked)}),Mt(),At(4,"span",0),bn("click",function(){vr(o);const a=$s(3);return r.left&&a.toggle(),xr(r.updateToggle(!1))}),li(5),Mt()}2&i&&(kn("disabled",r.disabled)("highlighted",r.left),Dt(1),Co(r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1)),Dt(1),Lt("disabled",r.disabled)("checked",!r.left),Dt(2),kn("disabled",r.disabled)("highlighted",!r.left),Dt(1),Co(r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1)))},dependencies:[NX],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mdc-switch__track:before, [_nghost-%COMP%]     .slider .mdc-switch__track:after{background-color:#43476580!important}[_nghost-%COMP%]     .slider .mdc-switch__shadow{background-color:#434765}"],changeDetection:0}),e})();const CFe=["bodyUI"],TFe=function(){return["Male","Female"]},MFe=function(){return["Left","Right"]};let IFe=(()=>{var t;class e{constructor(i){this.ga=i,this.sexChange=new rn,this.sideChange=new rn}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){const i=new Set(this.filter?.tmc??[]);this.filteredBlocks=this.blocks?.filter(r=>i.has(r.donor.providerName)).map(r=>r["@id"])??[],this.bodyUI.scene=this.bodyUI.scene.map(r=>({...r,color:r.entityId&&this.highlightedNodeId===r["@id"]?[30,136,229,255]:this.filteredBlocks.includes(r.entityId??"")?[173,255,47,229.5]:[255,255,255,229.5]}))}ngOnChanges(i){this.bodyUI&&"organ"in i&&this.zoomToFitOrgan()}updateSex(i){this.sex=i,this.sexChange.emit(this.sex)}updateSide(i){this.side=i,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:i,organ:r}=this;if(r){const{x_dimension:o,y_dimension:s,z_dimension:a}=r;i.rotation=i.rotationX=0,i.bounds={x:1.25*o/1e3,y:1.25*s/1e3,z:1.25*a/1e3},i.target=[o/1e3/2,s/1e3/2,a/1e3/2]}}nodeClicked(i){this.ga.event("node_click","organ",i.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===i.node["@id"]?"":i.node["@id"]}}return(t=e).\u0275fac=function(i){return new(i||t)(He(P0))},t.\u0275cmp=vn({type:t,selectors:[["ccf-organ"]],viewQuery:function(i,r){if(1&i&&Li(CFe,7),2&i){let o;Nn(o=Fn())&&(r.bodyUI=o.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange"},features:[Mr],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(i,r){1&i&&(At(0,"ccf-body-ui",0,1),bn("nodeClick",function(s){return r.nodeClicked(s)})("initialized",function(){return r.zoomToFitOrgan()}),Mt(),At(2,"div",2)(3,"ccf-slide-toggle",3),bn("valueChange",function(s){return r.updateSex(s)}),Mt(),At(4,"ccf-slide-toggle",3),bn("valueChange",function(s){return r.updateSide(s)}),Mt()()),2&i&&(Lt("scene",r.scene)("interactive",!0),Dt(3),Lt("labels",sw(8,TFe))("value",r.sex)("hidden",!r.sex),Dt(1),Lt("labels",sw(9,MFe))("value",r.side)("hidden",!r.side))},dependencies:[wNe,SFe],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0}),e})();const DFe=["left"],RFe=["right"],kFe=function(){return[]},OFe=[{color:[0,0,0,0],opacity:.001}];let PFe=(()=>{var t;class e{constructor(i,r,o){this.ga=r,this.configState=o,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(ue(s=>({tmc:s}))),this.latestConfig={},this.organInfo$=o.config$.pipe(Bi(s=>this.latestConfig=s),Je(s=>i.getOrganInfo(s.organIri??"",s.side?.toLowerCase?.(),s.sex)),Bi(s=>this.logOrganLookup(s)),Bi(s=>this.latestOrganInfo=s),ks(1)),this.organ$=this.organInfo$.pipe(Je(s=>s?i.getOrgan(s,s.hasSex?this.latestConfig.sex:void 0):Yt(void 0)),Bi(s=>{if(s&&this.latestOrganInfo){const a=this.latestOrganInfo?.hasSex?s.sex:void 0;a!==this.latestConfig.sex&&this.updateInput("sex",a),s.side!==this.latestConfig.side&&this.updateInput("side",s.side)}}),ks(1)),this.scene$=this.organ$.pipe(Je(s=>s&&this.latestOrganInfo?i.getOrganScene(this.latestOrganInfo,s.sex):Yt(OFe))),this.stats$=this.organ$.pipe(Je(s=>s&&this.latestOrganInfo?i.getOrganStats(this.latestOrganInfo,s.sex):Yt([]))),this.statsLabel$=this.organ$.pipe(ue(s=>this.makeStatsLabel(this.latestOrganInfo,s?.sex)),tc("Loading...")),this.blocks$=this.organ$.pipe(Je(s=>s&&this.latestOrganInfo?i.getBlocks(this.latestOrganInfo,s.sex):Yt([])))}ngAfterViewInit(){const{left:i,right:r}=this;i.nativeElement.style.height=`${r.nativeElement.offsetHeight}px`}updateInput(i,r){this.configState.patchConfig({[i]:r})}makeStatsLabel(i,r){let o=[`Unknown IRI: ${this.latestConfig.organIri}`];if(i){const s=i.side?i.side.charAt(0).toUpperCase()+i.side.slice(1):void 0;o=[r,i.organ,s]}return o.filter(s=>!!s).join(", ")}logOrganLookup(i){this.ga.event(i?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}}return(t=e).\u0275fac=function(i){return new(i||t)(He(cFe),He(P0),He(Ug))},t.\u0275cmp=vn({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&(Li(DFe,7,Ht),Li(RFe,7,Ht)),2&i){let o;Nn(o=Fn())&&(r.left=o.first),Nn(o=Fn())&&(r.right=o.first)}},decls:16,vars:25,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(i,r){if(1&i&&(At(0,"div",0)(1,"div",1,2)(3,"ccf-organ",3),bn("sexChange",function(s){return r.updateInput("sex",s)})("sideChange",function(s){return r.updateInput("side",s)}),Yr(4,"async"),Yr(5,"async"),Yr(6,"async"),Yr(7,"async"),Yr(8,"async"),Yr(9,"async"),Mt()(),At(10,"div",4,5),Ln(12,"ccf-stats-list",6),Yr(13,"async"),Yr(14,"async"),Ln(15,"ccf-link-cards"),Mt()()),2&i){let o;Dt(3),Lt("blocks",Go(4,8,r.blocks$))("filter",Go(5,10,r.filter$))("sex",Go(6,12,r.sex$))("side",Go(7,14,r.side$))("organ",Go(8,16,r.organ$))("scene",null!==(o=Go(9,18,r.scene$))&&void 0!==o?o:sw(24,kFe)),Dt(9),Lt("statsLabel",Go(13,20,r.statsLabel$))("stats",Go(14,22,r.stats$))}},dependencies:[uFe,fFe,IFe,Hb],styles:[".container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:Inter;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-moz-fit-content;height:fit-content;width:29rem}"],changeDetection:0}),e})();function NFe(t,e){1&t&&Ln(0,"ccf-root")}function FFe(t){const e=i=>"string"==typeof i,n=i=>Array.isArray(i)&&i.every(e);if("string"==typeof t){const i=lI.json(t);if(n(i))return i}else if(n(t))return t;throw new Error("Invalid data sources")}function LFe(t){const e=i=>"string"==typeof i,n=i=>Array.isArray(i)&&i.every(e);if("string"==typeof t){if(!t?.startsWith("["))return[t];{const i=lI.json(t);if(n(i))return i}}else if(n(t))return t;throw new Error("Invalid data sources")}let BFe=(()=>{var t;class e extends xne{constructor(i,r){super(i,r,{initialDelay:10,initialConfig:{...Wh_dbOptions,...globalThis.dbOptions},parse:{dataSources:FFe,highlightProviders:LFe,useRemoteApi:lI.boolean}}),this.sex="Female",this.side="Left"}}return(t=e).\u0275fac=function(i){return new(i||t)(He(Ug),He(qr))},t.\u0275cmp=vn({type:t,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint"},features:[_n],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(i,r){1&i&&mn(0,NFe,1,0,"ccf-root",0),2&i&&Lt("ngIf",r.initialized)},dependencies:[Mc,PFe],encapsulation:2,changeDetection:0}),e})(),jFe=(()=>{var t;class e extends iFe{selectToken(i){return i.useRemoteApi&&i.remoteApiEndpoint?eFe:nFe}}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=Ii(t)))(r||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const ZA=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class HFe{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=_f(this.action),i=function VFe(t){return ZA(t.getHours(),2)+":"+ZA(t.getMinutes(),2)+":"+ZA(t.getSeconds(),2)+"."+ZA(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class zFe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const LX=new bt("NGXS_LOGGER_PLUGIN_OPTIONS");let GFe=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new zFe(this._options),this._store=this._store||this._injector.get(kl);const o=new HFe(i,this._store,this._logWriter);return o.dispatched(n),r(n,i).pipe(Bi(s=>{o.completed(s)}),ec(s=>{throw o.errored(s),s}))}}return t.\u0275fac=function(n){return new(n||t)(it(LX),it(fr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();const BX=new bt("LOGGER_USER_OPTIONS");function WFe(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let $Fe=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:L5,useClass:GFe,multi:!0},{provide:BX,useValue:n},{provide:LX,useFactory:WFe,deps:[BX]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({}),t})();const XFe=[Ug];let YFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[GIe.forRoot(),Z5.forRoot(XFe,{developmentMode:!1}),$Fe.forRoot({disabled:true})]}),e})(),KFe=(()=>{var t;class e{constructor(i){if(i)throw new Error("The core module should only be imported once in the root module")}}return(t=e).\u0275fac=function(i){return new(i||t)(it(t,12))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({providers:[{provide:DX,useExisting:jFe}],imports:[X9,Nke.forRoot({gaToken:"G-ERNVZ1Q4KE",appName:"organ-info",projectName:"ccf",developmentMode:!1}),Gke.forRoot(()=>new IA({basePath:Wh_dbOptions.remoteApiEndpoint})),YFe]}),e})(),qFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[Yi,AFe]}),e})(),JFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[Yi,ENe,qFe]}),e})(),ZFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[Yi,fP]}),e})(),QFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[Yi]}),e})(),eLe=(()=>{var t;class e{constructor(i){this.injector=i}ngDoBootstrap(){const i=function bne(t,e){const i=function une(t,e){return e.get(Xt).resolveComponentFactory(t).inputs}(t,e.injector),r=e.strategyFactory||new mne(t,e.injector),o=function dne(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function one(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(i);class s extends _ne{get ngElementStrategy(){if(!this._ngElementStrategy){const c=this._ngElementStrategy=r.create(this.injector||e.injector);i.forEach(({propName:l,transform:d})=>{if(!this.hasOwnProperty(l))return;const h=this[l];delete this[l],c.setInputValue(l,h,d)})}return this._ngElementStrategy}constructor(c){super(),this.injector=c}attributeChangedCallback(c,l,d,h){const[p,m]=o[c];this.ngElementStrategy.setInputValue(p,d,m)}connectedCallback(){let c=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),c=!0),this.ngElementStrategy.connect(this),c||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(c=>{const l=new CustomEvent(c.name,{detail:c.value});this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(o),i.forEach(({propName:a,transform:c})=>{Object.defineProperty(s.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(l){this.ngElementStrategy.setInputValue(a,l,c)},configurable:!0,enumerable:!0})}),s}(BFe,{injector:this.injector});customElements.define("ccf-organ-info",i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(fr))},t.\u0275mod=Zt({type:t}),t.\u0275inj=Jt({imports:[Zte,KFe,ZFe,QFe,JFe]}),e})();qte().bootstrapModule(eLe).catch(t=>console.error(t))},2323:ne=>{ne.exports=function(g,E){var b=E.length;if(0!==b){var R=g.length;g.length+=b;for(var A=0;A<b;A++)g[R+A]=E[A]}}},3982:ne=>{"use strict";const{AbortController:Z,AbortSignal:g}=typeof self<"u"?self:typeof window<"u"?window:void 0;ne.exports=Z,ne.exports.AbortSignal=g,ne.exports.default=Z},9919:(ne,Z)=>{"use strict";Z.byteLength=function y(k){var X=_(k),Y=X[1];return 3*(X[0]+Y)/4-Y},Z.toByteArray=function U(k){var X,v,ce=_(k),Y=ce[0],oe=ce[1],ie=new b(function M(k,X,ce){return 3*(X+ce)/4-ce}(0,Y,oe)),$=0,H=oe>0?Y-4:Y;for(v=0;v<H;v+=4)X=E[k.charCodeAt(v)]<<18|E[k.charCodeAt(v+1)]<<12|E[k.charCodeAt(v+2)]<<6|E[k.charCodeAt(v+3)],ie[$++]=X>>16&255,ie[$++]=X>>8&255,ie[$++]=255&X;return 2===oe&&(X=E[k.charCodeAt(v)]<<2|E[k.charCodeAt(v+1)]>>4,ie[$++]=255&X),1===oe&&(X=E[k.charCodeAt(v)]<<10|E[k.charCodeAt(v+1)]<<4|E[k.charCodeAt(v+2)]>>2,ie[$++]=X>>8&255,ie[$++]=255&X),ie},Z.fromByteArray=function le(k){for(var X,ce=k.length,Y=ce%3,oe=[],$=0,H=ce-Y;$<H;$+=16383)oe.push(j(k,$,$+16383>H?H:$+16383));return 1===Y?oe.push(g[(X=k[ce-1])>>2]+g[X<<4&63]+"=="):2===Y&&oe.push(g[(X=(k[ce-2]<<8)+k[ce-1])>>10]+g[X>>4&63]+g[X<<2&63]+"="),oe.join("")};for(var g=[],E=[],b=typeof Uint8Array<"u"?Uint8Array:Array,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0;A<64;++A)g[A]=R[A],E[R.charCodeAt(A)]=A;function _(k){var X=k.length;if(X%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ce=k.indexOf("=");return-1===ce&&(ce=X),[ce,ce===X?0:4-ce%4]}function N(k){return g[k>>18&63]+g[k>>12&63]+g[k>>6&63]+g[63&k]}function j(k,X,ce){for(var oe=[],ie=X;ie<ce;ie+=3)oe.push(N((k[ie]<<16&16711680)+(k[ie+1]<<8&65280)+(255&k[ie+2])));return oe.join("")}E["-".charCodeAt(0)]=62,E["_".charCodeAt(0)]=63},1979:(ne,Z)=>{"use strict";var E=function(R){return R.typeOfFunction="function",R.boolTrue=!0,R}(E||{});Z.ak=function b(R,A,P){if(!P||typeof P.value!==E.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+A+"> is not a method!");return{configurable:E.boolTrue,get:function(){var _=P.value.bind(this);return Object.defineProperty(this,A,{value:_,configurable:E.boolTrue,writable:E.boolTrue}),_}}}},9007:(ne,Z,g)=>{"use strict";var E=g(9919),b=g(2601);Z.Buffer=_,Z.SlowBuffer=function Y(W){return+W!=W&&(W=0),_.alloc(+W)},Z.INSPECT_MAX_BYTES=50;var R=2147483647;function P(W){if(W>R)throw new RangeError('The value "'+W+'" is invalid for option "size"');var C=new Uint8Array(W);return C.__proto__=_.prototype,C}function _(W,C,O){if("number"==typeof W){if("string"==typeof C)throw new TypeError('The "string" argument must be of type string. Received type number');return N(W)}return y(W,C,O)}function y(W,C,O){if("string"==typeof W)return function j(W,C){if(("string"!=typeof C||""===C)&&(C="utf8"),!_.isEncoding(C))throw new TypeError("Unknown encoding: "+C);var O=0|oe(W,C),he=P(O),ue=he.write(W,C);return ue!==O&&(he=he.slice(0,ue)),he}(W,C);if(ArrayBuffer.isView(W))return le(W);if(null==W)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if(me(W,ArrayBuffer)||W&&me(W.buffer,ArrayBuffer))return function k(W,C,O){if(C<0||W.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(W.byteLength<C+(O||0))throw new RangeError('"length" is outside of buffer bounds');var he;return(he=void 0===C&&void 0===O?new Uint8Array(W):void 0===O?new Uint8Array(W,C):new Uint8Array(W,C,O)).__proto__=_.prototype,he}(W,C,O);if("number"==typeof W)throw new TypeError('The "value" argument must not be of type number. Received type number');var he=W.valueOf&&W.valueOf();if(null!=he&&he!==W)return _.from(he,C,O);var ue=function X(W){if(_.isBuffer(W)){var C=0|ce(W.length),O=P(C);return 0===O.length||W.copy(O,0,0,C),O}return void 0!==W.length?"number"!=typeof W.length||Q(W.length)?P(0):le(W):"Buffer"===W.type&&Array.isArray(W.data)?le(W.data):void 0}(W);if(ue)return ue;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof W[Symbol.toPrimitive])return _.from(W[Symbol.toPrimitive]("string"),C,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}function M(W){if("number"!=typeof W)throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function N(W){return M(W),P(W<0?0:0|ce(W))}function le(W){for(var C=W.length<0?0:0|ce(W.length),O=P(C),he=0;he<C;he+=1)O[he]=255&W[he];return O}function ce(W){if(W>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return 0|W}function oe(W,C){if(_.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||me(W,ArrayBuffer))return W.byteLength;if("string"!=typeof W)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);var O=W.length,he=arguments.length>2&&!0===arguments[2];if(!he&&0===O)return 0;for(var ue=!1;;)switch(C){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return I(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*O;case"hex":return O>>>1;case"base64":return Le(W).length;default:if(ue)return he?-1:I(W).length;C=(""+C).toLowerCase(),ue=!0}}function ie(W,C,O){var he=!1;if((void 0===C||C<0)&&(C=0),C>this.length||((void 0===O||O>this.length)&&(O=this.length),O<=0)||(O>>>=0)<=(C>>>=0))return"";for(W||(W="utf8");;)switch(W){case"hex":return Fe(this,C,O);case"utf8":case"utf-8":return Ie(this,C,O);case"ascii":return Ye(this,C,O);case"latin1":case"binary":return Se(this,C,O);case"base64":return we(this,C,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,C,O);default:if(he)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),he=!0}}function $(W,C,O){var he=W[C];W[C]=W[O],W[O]=he}function H(W,C,O,he,ue){if(0===W.length)return-1;if("string"==typeof O?(he=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),Q(O=+O)&&(O=ue?0:W.length-1),O<0&&(O=W.length+O),O>=W.length){if(ue)return-1;O=W.length-1}else if(O<0){if(!ue)return-1;O=0}if("string"==typeof C&&(C=_.from(C,he)),_.isBuffer(C))return 0===C.length?-1:v(W,C,O,he,ue);if("number"==typeof C)return C&=255,"function"==typeof Uint8Array.prototype.indexOf?ue?Uint8Array.prototype.indexOf.call(W,C,O):Uint8Array.prototype.lastIndexOf.call(W,C,O):v(W,[C],O,he,ue);throw new TypeError("val must be string, number or Buffer")}function v(W,C,O,he,ue){var dt,Ge=1,qe=W.length,ft=C.length;if(void 0!==he&&("ucs2"===(he=String(he).toLowerCase())||"ucs-2"===he||"utf16le"===he||"utf-16le"===he)){if(W.length<2||C.length<2)return-1;Ge=2,qe/=2,ft/=2,O/=2}function Pt(J,S){return 1===Ge?J[S]:J.readUInt16BE(S*Ge)}if(ue){var Gt=-1;for(dt=O;dt<qe;dt++)if(Pt(W,dt)===Pt(C,-1===Gt?0:dt-Gt)){if(-1===Gt&&(Gt=dt),dt-Gt+1===ft)return Gt*Ge}else-1!==Gt&&(dt-=dt-Gt),Gt=-1}else for(O+ft>qe&&(O=qe-ft),dt=O;dt>=0;dt--){for(var on=!0,Re=0;Re<ft;Re++)if(Pt(W,dt+Re)!==Pt(C,Re)){on=!1;break}if(on)return dt}return-1}function L(W,C,O,he){O=Number(O)||0;var ue=W.length-O;he?(he=Number(he))>ue&&(he=ue):he=ue;var Ge=C.length;he>Ge/2&&(he=Ge/2);for(var qe=0;qe<he;++qe){var ft=parseInt(C.substr(2*qe,2),16);if(Q(ft))return qe;W[O+qe]=ft}return qe}function T(W,C,O,he){return Ve(I(C,W.length-O),W,O,he)}function fe(W,C,O,he){return Ve(function ae(W){for(var C=[],O=0;O<W.length;++O)C.push(255&W.charCodeAt(O));return C}(C),W,O,he)}function z(W,C,O,he){return fe(W,C,O,he)}function Te(W,C,O,he){return Ve(Le(C),W,O,he)}function de(W,C,O,he){return Ve(function K(W,C){for(var O,he,Ge=[],qe=0;qe<W.length&&!((C-=2)<0);++qe)he=(O=W.charCodeAt(qe))>>8,Ge.push(O%256),Ge.push(he);return Ge}(C,W.length-O),W,O,he)}function we(W,C,O){return E.fromByteArray(0===C&&O===W.length?W:W.slice(C,O))}function Ie(W,C,O){O=Math.min(W.length,O);for(var he=[],ue=C;ue<O;){var Pt,dt,Gt,on,Ge=W[ue],qe=null,ft=Ge>239?4:Ge>223?3:Ge>191?2:1;if(ue+ft<=O)switch(ft){case 1:Ge<128&&(qe=Ge);break;case 2:128==(192&(Pt=W[ue+1]))&&(on=(31&Ge)<<6|63&Pt)>127&&(qe=on);break;case 3:dt=W[ue+2],128==(192&(Pt=W[ue+1]))&&128==(192&dt)&&(on=(15&Ge)<<12|(63&Pt)<<6|63&dt)>2047&&(on<55296||on>57343)&&(qe=on);break;case 4:dt=W[ue+2],Gt=W[ue+3],128==(192&(Pt=W[ue+1]))&&128==(192&dt)&&128==(192&Gt)&&(on=(15&Ge)<<18|(63&Pt)<<12|(63&dt)<<6|63&Gt)>65535&&on<1114112&&(qe=on)}null===qe?(qe=65533,ft=1):qe>65535&&(he.push((qe-=65536)>>>10&1023|55296),qe=56320|1023&qe),he.push(qe),ue+=ft}return function tt(W){var C=W.length;if(C<=De)return String.fromCharCode.apply(String,W);for(var O="",he=0;he<C;)O+=String.fromCharCode.apply(String,W.slice(he,he+=De));return O}(he)}Z.kMaxLength=R,!(_.TYPED_ARRAY_SUPPORT=function A(){try{var W=new Uint8Array(1);return W.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===W.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(W,C,O){return y(W,C,O)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(W,C,O){return function U(W,C,O){return M(W),W<=0?P(W):void 0!==C?"string"==typeof O?P(W).fill(C,O):P(W).fill(C):P(W)}(W,C,O)},_.allocUnsafe=function(W){return N(W)},_.allocUnsafeSlow=function(W){return N(W)},_.isBuffer=function(C){return null!=C&&!0===C._isBuffer&&C!==_.prototype},_.compare=function(C,O){if(me(C,Uint8Array)&&(C=_.from(C,C.offset,C.byteLength)),me(O,Uint8Array)&&(O=_.from(O,O.offset,O.byteLength)),!_.isBuffer(C)||!_.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===O)return 0;for(var he=C.length,ue=O.length,Ge=0,qe=Math.min(he,ue);Ge<qe;++Ge)if(C[Ge]!==O[Ge]){he=C[Ge],ue=O[Ge];break}return he<ue?-1:ue<he?1:0},_.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(C,O){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(0===C.length)return _.alloc(0);var he;if(void 0===O)for(O=0,he=0;he<C.length;++he)O+=C[he].length;var ue=_.allocUnsafe(O),Ge=0;for(he=0;he<C.length;++he){var qe=C[he];if(me(qe,Uint8Array)&&(qe=_.from(qe)),!_.isBuffer(qe))throw new TypeError('"list" argument must be an Array of Buffers');qe.copy(ue,Ge),Ge+=qe.length}return ue},_.byteLength=oe,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var C=this.length;if(C%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<C;O+=2)$(this,O,O+1);return this},_.prototype.swap32=function(){var C=this.length;if(C%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<C;O+=4)$(this,O,O+3),$(this,O+1,O+2);return this},_.prototype.swap64=function(){var C=this.length;if(C%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<C;O+=8)$(this,O,O+7),$(this,O+1,O+6),$(this,O+2,O+5),$(this,O+3,O+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var C=this.length;return 0===C?"":0===arguments.length?Ie(this,0,C):ie.apply(this,arguments)},_.prototype.equals=function(C){if(!_.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C||0===_.compare(this,C)},_.prototype.inspect=function(){var C="",O=Z.INSPECT_MAX_BYTES;return C=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(C+=" ... "),"<Buffer "+C+">"},_.prototype.compare=function(C,O,he,ue,Ge){if(me(C,Uint8Array)&&(C=_.from(C,C.offset,C.byteLength)),!_.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(void 0===O&&(O=0),void 0===he&&(he=C?C.length:0),void 0===ue&&(ue=0),void 0===Ge&&(Ge=this.length),O<0||he>C.length||ue<0||Ge>this.length)throw new RangeError("out of range index");if(ue>=Ge&&O>=he)return 0;if(ue>=Ge)return-1;if(O>=he)return 1;if(this===C)return 0;for(var qe=(Ge>>>=0)-(ue>>>=0),ft=(he>>>=0)-(O>>>=0),Pt=Math.min(qe,ft),dt=this.slice(ue,Ge),Gt=C.slice(O,he),on=0;on<Pt;++on)if(dt[on]!==Gt[on]){qe=dt[on],ft=Gt[on];break}return qe<ft?-1:ft<qe?1:0},_.prototype.includes=function(C,O,he){return-1!==this.indexOf(C,O,he)},_.prototype.indexOf=function(C,O,he){return H(this,C,O,he,!0)},_.prototype.lastIndexOf=function(C,O,he){return H(this,C,O,he,!1)},_.prototype.write=function(C,O,he,ue){if(void 0===O)ue="utf8",he=this.length,O=0;else if(void 0===he&&"string"==typeof O)ue=O,he=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(he)?(he>>>=0,void 0===ue&&(ue="utf8")):(ue=he,he=void 0)}var Ge=this.length-O;if((void 0===he||he>Ge)&&(he=Ge),C.length>0&&(he<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");for(var qe=!1;;)switch(ue){case"hex":return L(this,C,O,he);case"utf8":case"utf-8":return T(this,C,O,he);case"ascii":return fe(this,C,O,he);case"latin1":case"binary":return z(this,C,O,he);case"base64":return Te(this,C,O,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,C,O,he);default:if(qe)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),qe=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var De=4096;function Ye(W,C,O){var he="";O=Math.min(W.length,O);for(var ue=C;ue<O;++ue)he+=String.fromCharCode(127&W[ue]);return he}function Se(W,C,O){var he="";O=Math.min(W.length,O);for(var ue=C;ue<O;++ue)he+=String.fromCharCode(W[ue]);return he}function Fe(W,C,O){var he=W.length;(!C||C<0)&&(C=0),(!O||O<0||O>he)&&(O=he);for(var ue="",Ge=C;Ge<O;++Ge)ue+=B(W[Ge]);return ue}function Pe(W,C,O){for(var he=W.slice(C,O),ue="",Ge=0;Ge<he.length;Ge+=2)ue+=String.fromCharCode(he[Ge]+256*he[Ge+1]);return ue}function ze(W,C,O){if(W%1!=0||W<0)throw new RangeError("offset is not uint");if(W+C>O)throw new RangeError("Trying to access beyond buffer length")}function ge(W,C,O,he,ue,Ge){if(!_.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>ue||C<Ge)throw new RangeError('"value" argument is out of bounds');if(O+he>W.length)throw new RangeError("Index out of range")}function Ce(W,C,O,he,ue,Ge){if(O+he>W.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function Ke(W,C,O,he,ue){return C=+C,O>>>=0,ue||Ce(W,0,O,4),b.write(W,C,O,he,23,4),O+4}function st(W,C,O,he,ue){return C=+C,O>>>=0,ue||Ce(W,0,O,8),b.write(W,C,O,he,52,8),O+8}_.prototype.slice=function(C,O){var he=this.length;(C=~~C)<0?(C+=he)<0&&(C=0):C>he&&(C=he),(O=void 0===O?he:~~O)<0?(O+=he)<0&&(O=0):O>he&&(O=he),O<C&&(O=C);var ue=this.subarray(C,O);return ue.__proto__=_.prototype,ue},_.prototype.readUIntLE=function(C,O,he){C>>>=0,O>>>=0,he||ze(C,O,this.length);for(var ue=this[C],Ge=1,qe=0;++qe<O&&(Ge*=256);)ue+=this[C+qe]*Ge;return ue},_.prototype.readUIntBE=function(C,O,he){C>>>=0,O>>>=0,he||ze(C,O,this.length);for(var ue=this[C+--O],Ge=1;O>0&&(Ge*=256);)ue+=this[C+--O]*Ge;return ue},_.prototype.readUInt8=function(C,O){return C>>>=0,O||ze(C,1,this.length),this[C]},_.prototype.readUInt16LE=function(C,O){return C>>>=0,O||ze(C,2,this.length),this[C]|this[C+1]<<8},_.prototype.readUInt16BE=function(C,O){return C>>>=0,O||ze(C,2,this.length),this[C]<<8|this[C+1]},_.prototype.readUInt32LE=function(C,O){return C>>>=0,O||ze(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},_.prototype.readUInt32BE=function(C,O){return C>>>=0,O||ze(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},_.prototype.readIntLE=function(C,O,he){C>>>=0,O>>>=0,he||ze(C,O,this.length);for(var ue=this[C],Ge=1,qe=0;++qe<O&&(Ge*=256);)ue+=this[C+qe]*Ge;return ue>=(Ge*=128)&&(ue-=Math.pow(2,8*O)),ue},_.prototype.readIntBE=function(C,O,he){C>>>=0,O>>>=0,he||ze(C,O,this.length);for(var ue=O,Ge=1,qe=this[C+--ue];ue>0&&(Ge*=256);)qe+=this[C+--ue]*Ge;return qe>=(Ge*=128)&&(qe-=Math.pow(2,8*O)),qe},_.prototype.readInt8=function(C,O){return C>>>=0,O||ze(C,1,this.length),128&this[C]?-1*(255-this[C]+1):this[C]},_.prototype.readInt16LE=function(C,O){C>>>=0,O||ze(C,2,this.length);var he=this[C]|this[C+1]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt16BE=function(C,O){C>>>=0,O||ze(C,2,this.length);var he=this[C+1]|this[C]<<8;return 32768&he?4294901760|he:he},_.prototype.readInt32LE=function(C,O){return C>>>=0,O||ze(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},_.prototype.readInt32BE=function(C,O){return C>>>=0,O||ze(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},_.prototype.readFloatLE=function(C,O){return C>>>=0,O||ze(C,4,this.length),b.read(this,C,!0,23,4)},_.prototype.readFloatBE=function(C,O){return C>>>=0,O||ze(C,4,this.length),b.read(this,C,!1,23,4)},_.prototype.readDoubleLE=function(C,O){return C>>>=0,O||ze(C,8,this.length),b.read(this,C,!0,52,8)},_.prototype.readDoubleBE=function(C,O){return C>>>=0,O||ze(C,8,this.length),b.read(this,C,!1,52,8)},_.prototype.writeUIntLE=function(C,O,he,ue){C=+C,O>>>=0,he>>>=0,ue||ge(this,C,O,he,Math.pow(2,8*he)-1,0);var qe=1,ft=0;for(this[O]=255&C;++ft<he&&(qe*=256);)this[O+ft]=C/qe&255;return O+he},_.prototype.writeUIntBE=function(C,O,he,ue){C=+C,O>>>=0,he>>>=0,ue||ge(this,C,O,he,Math.pow(2,8*he)-1,0);var qe=he-1,ft=1;for(this[O+qe]=255&C;--qe>=0&&(ft*=256);)this[O+qe]=C/ft&255;return O+he},_.prototype.writeUInt8=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,1,255,0),this[O]=255&C,O+1},_.prototype.writeUInt16LE=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,2,65535,0),this[O]=255&C,this[O+1]=C>>>8,O+2},_.prototype.writeUInt16BE=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,2,65535,0),this[O]=C>>>8,this[O+1]=255&C,O+2},_.prototype.writeUInt32LE=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,4,4294967295,0),this[O+3]=C>>>24,this[O+2]=C>>>16,this[O+1]=C>>>8,this[O]=255&C,O+4},_.prototype.writeUInt32BE=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,4,4294967295,0),this[O]=C>>>24,this[O+1]=C>>>16,this[O+2]=C>>>8,this[O+3]=255&C,O+4},_.prototype.writeIntLE=function(C,O,he,ue){if(C=+C,O>>>=0,!ue){var Ge=Math.pow(2,8*he-1);ge(this,C,O,he,Ge-1,-Ge)}var qe=0,ft=1,Pt=0;for(this[O]=255&C;++qe<he&&(ft*=256);)C<0&&0===Pt&&0!==this[O+qe-1]&&(Pt=1),this[O+qe]=(C/ft>>0)-Pt&255;return O+he},_.prototype.writeIntBE=function(C,O,he,ue){if(C=+C,O>>>=0,!ue){var Ge=Math.pow(2,8*he-1);ge(this,C,O,he,Ge-1,-Ge)}var qe=he-1,ft=1,Pt=0;for(this[O+qe]=255&C;--qe>=0&&(ft*=256);)C<0&&0===Pt&&0!==this[O+qe+1]&&(Pt=1),this[O+qe]=(C/ft>>0)-Pt&255;return O+he},_.prototype.writeInt8=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,1,127,-128),C<0&&(C=255+C+1),this[O]=255&C,O+1},_.prototype.writeInt16LE=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,2,32767,-32768),this[O]=255&C,this[O+1]=C>>>8,O+2},_.prototype.writeInt16BE=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,2,32767,-32768),this[O]=C>>>8,this[O+1]=255&C,O+2},_.prototype.writeInt32LE=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,4,2147483647,-2147483648),this[O]=255&C,this[O+1]=C>>>8,this[O+2]=C>>>16,this[O+3]=C>>>24,O+4},_.prototype.writeInt32BE=function(C,O,he){return C=+C,O>>>=0,he||ge(this,C,O,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[O]=C>>>24,this[O+1]=C>>>16,this[O+2]=C>>>8,this[O+3]=255&C,O+4},_.prototype.writeFloatLE=function(C,O,he){return Ke(this,C,O,!0,he)},_.prototype.writeFloatBE=function(C,O,he){return Ke(this,C,O,!1,he)},_.prototype.writeDoubleLE=function(C,O,he){return st(this,C,O,!0,he)},_.prototype.writeDoubleBE=function(C,O,he){return st(this,C,O,!1,he)},_.prototype.copy=function(C,O,he,ue){if(!_.isBuffer(C))throw new TypeError("argument should be a Buffer");if(he||(he=0),!ue&&0!==ue&&(ue=this.length),O>=C.length&&(O=C.length),O||(O=0),ue>0&&ue<he&&(ue=he),ue===he||0===C.length||0===this.length)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),C.length-O<ue-he&&(ue=C.length-O+he);var Ge=ue-he;if(this===C&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(O,he,ue);else if(this===C&&he<O&&O<ue)for(var qe=Ge-1;qe>=0;--qe)C[qe+O]=this[qe+he];else Uint8Array.prototype.set.call(C,this.subarray(he,ue),O);return Ge},_.prototype.fill=function(C,O,he,ue){if("string"==typeof C){if("string"==typeof O?(ue=O,O=0,he=this.length):"string"==typeof he&&(ue=he,he=this.length),void 0!==ue&&"string"!=typeof ue)throw new TypeError("encoding must be a string");if("string"==typeof ue&&!_.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(1===C.length){var Ge=C.charCodeAt(0);("utf8"===ue&&Ge<128||"latin1"===ue)&&(C=Ge)}}else"number"==typeof C&&(C&=255);if(O<0||this.length<O||this.length<he)throw new RangeError("Out of range index");if(he<=O)return this;var qe;if(O>>>=0,he=void 0===he?this.length:he>>>0,C||(C=0),"number"==typeof C)for(qe=O;qe<he;++qe)this[qe]=C;else{var ft=_.isBuffer(C)?C:_.from(C,ue),Pt=ft.length;if(0===Pt)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(qe=0;qe<he-O;++qe)this[qe+O]=ft[qe%Pt]}return this};var Qe=/[^+/0-9A-Za-z-_]/g;function B(W){return W<16?"0"+W.toString(16):W.toString(16)}function I(W,C){C=C||1/0;for(var O,he=W.length,ue=null,Ge=[],qe=0;qe<he;++qe){if((O=W.charCodeAt(qe))>55295&&O<57344){if(!ue){if(O>56319){(C-=3)>-1&&Ge.push(239,191,189);continue}if(qe+1===he){(C-=3)>-1&&Ge.push(239,191,189);continue}ue=O;continue}if(O<56320){(C-=3)>-1&&Ge.push(239,191,189),ue=O;continue}O=65536+(ue-55296<<10|O-56320)}else ue&&(C-=3)>-1&&Ge.push(239,191,189);if(ue=null,O<128){if((C-=1)<0)break;Ge.push(O)}else if(O<2048){if((C-=2)<0)break;Ge.push(O>>6|192,63&O|128)}else if(O<65536){if((C-=3)<0)break;Ge.push(O>>12|224,O>>6&63|128,63&O|128)}else{if(!(O<1114112))throw new Error("Invalid code point");if((C-=4)<0)break;Ge.push(O>>18|240,O>>12&63|128,O>>6&63|128,63&O|128)}}return Ge}function Le(W){return E.toByteArray(function _e(W){if((W=(W=W.split("=")[0]).trim().replace(Qe,"")).length<2)return"";for(;W.length%4!=0;)W+="=";return W}(W))}function Ve(W,C,O,he){for(var ue=0;ue<he&&!(ue+O>=C.length||ue>=W.length);++ue)C[ue+O]=W[ue];return ue}function me(W,C){return W instanceof C||null!=W&&null!=W.constructor&&null!=W.constructor.name&&W.constructor.name===C.name}function Q(W){return W!=W}},1563:(ne,Z,g)=>{ne.exports={ResizeSensor:g(884),ElementQueries:g(8381)}},8381:function(ne,Z,g){"use strict";var E,b,R;typeof window<"u"&&window,b=[g(884)],void 0!==(R="function"==typeof(E=function(A){var P=function(){var y,M={},U=[];function N(z){z||(z=document.documentElement);var Te=window.getComputedStyle(z,null).fontSize;return parseFloat(Te)||16}function le(z,Te){var de=Te.split(/\d/),we=de[de.length-1];switch(Te=parseFloat(Te),we){case"px":default:return Te;case"em":return Te*N(z);case"rem":return Te*N();case"vw":return Te*document.documentElement.clientWidth/100;case"vh":return Te*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Ie=document.documentElement.clientWidth/100,De=document.documentElement.clientHeight/100;return Te*(0,Math["vmin"===we?"min":"max"])(Ie,De)}}function k(z,Te){this.element=z;var de,we,Ie,De,tt,Ye,Se,Fe,Pe=["min-width","min-height","max-width","max-height"];this.call=function(){for(de in Ie=function j(z){if(!z.getBoundingClientRect)return{width:z.offsetWidth,height:z.offsetHeight};var Te=z.getBoundingClientRect();return{width:Math.round(Te.width),height:Math.round(Te.height)}}(this.element),Ye={},M[Te])M[Te].hasOwnProperty(de)&&(De=le(this.element,(we=M[Te][de]).value),tt="width"===we.property?Ie.width:Ie.height,Se="","min"===we.mode&&tt>=De&&(Se+=we.value),"max"===we.mode&&tt<=De&&(Se+=we.value),Ye[Fe=we.mode+"-"+we.property]||(Ye[Fe]=""),Se&&-1===(" "+Ye[Fe]+" ").indexOf(" "+Se+" ")&&(Ye[Fe]+=" "+Se));for(var ze in Pe)Pe.hasOwnProperty(ze)&&(Ye[Pe[ze]]?this.element.setAttribute(Pe[ze],Ye[Pe[ze]].substr(1)):this.element.removeAttribute(Pe[ze]))}}function X(z,Te){z.elementQueriesSetupInformation||(z.elementQueriesSetupInformation=new k(z,Te)),z.elementQueriesSensor||(z.elementQueriesSensor=new A(z,function(){z.elementQueriesSetupInformation.call()}))}function ce(z,Te,de,we){if(typeof M[z]>"u"){M[z]=[];var Ie=U.length;y.innerHTML+="\n"+z+" {animation: 0.1s element-queries;}",y.innerHTML+="\n"+z+" > .resize-sensor {min-width: "+Ie+"px;}",U.push(z)}M[z].push({mode:Te,property:de,value:we})}function Y(z){var Te;if(document.querySelectorAll&&(Te=z?z.querySelectorAll.bind(z):document.querySelectorAll.bind(document)),!Te&&typeof $$<"u"&&(Te=$$),!Te&&typeof jQuery<"u"&&(Te=jQuery),!Te)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Te}function ie(z){var Te=[],de=[],we=[],Ie=0,De=-1,tt=[];for(var Ye in z.children)if(z.children.hasOwnProperty(Ye)&&z.children[Ye].tagName&&"img"===z.children[Ye].tagName.toLowerCase()){Te.push(z.children[Ye]);var Se=z.children[Ye].getAttribute("min-width")||z.children[Ye].getAttribute("data-min-width"),Fe=z.children[Ye].getAttribute("data-src")||z.children[Ye].getAttribute("url");we.push(Fe),de.push({minWidth:Se}),Se?z.children[Ye].style.display="none":(Ie=Te.length-1,z.children[Ye].style.display="block")}function ze(){var Ce,ge=!1;for(Ce in Te)Te.hasOwnProperty(Ce)&&de[Ce].minWidth&&z.offsetWidth>de[Ce].minWidth&&(ge=Ce);if(ge||(ge=Ie),De!==ge)if(tt[ge])Te[De].style.display="none",Te[ge].style.display="block",De=ge;else{var Ke=new Image;Ke.onload=function(){Te[ge].src=we[ge],Te[De].style.display="none",Te[ge].style.display="block",tt[ge]=!0,De=ge},Ke.src=we[ge]}else Te[ge].src=we[ge]}De=Ie,z.resizeSensorInstance=new A(z,ze),ze()}var H=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,v=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function L(z){var Te,de,we,Ie;for(z=z.replace(/'/g,'"');null!==(Te=H.exec(z));)for(de=Te[1]+Te[3],we=Te[2];null!==(Ie=v.exec(we));)ce(de,Ie[1],Ie[2],Ie[3])}function T(z){var Te="";if(z)if("string"==typeof z)(-1!==(z=z.toLowerCase()).indexOf("min-width")||-1!==z.indexOf("max-width"))&&L(z);else for(var de=0,we=z.length;de<we;de++)1===z[de].type?(-1!==(Te=z[de].selectorText||z[de].cssText).indexOf("min-height")||-1!==Te.indexOf("max-height")||-1!==Te.indexOf("min-width")||-1!==Te.indexOf("max-width"))&&L(Te):4===z[de].type?T(z[de].cssRules||z[de].rules):3===z[de].type&&z[de].styleSheet.hasOwnProperty("cssRules")&&T(z[de].styleSheet.cssRules)}var fe=!1;this.init=function(){var z="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?z="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?z="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(z="oanimationstart"),document.body.addEventListener(z,function(we){var Ie=we.target,De=Ie&&window.getComputedStyle(Ie,null),tt=De&&De.getPropertyValue("animation-name");if(tt&&-1!==tt.indexOf("element-queries")){Ie.elementQueriesSensor=new A(Ie,function(){Ie.elementQueriesSetupInformation&&Ie.elementQueriesSetupInformation.call()});var Fe=window.getComputedStyle(Ie.resizeSensor,null).getPropertyValue("min-width");Fe=parseInt(Fe.replace("px","")),X(we.target,U[Fe])}}),fe||((y=document.createElement("style")).type="text/css",y.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",y.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(y),fe=!0);for(var Te=0,de=document.styleSheets.length;Te<de;Te++)try{document.styleSheets[Te].href&&0===document.styleSheets[Te].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Te].href),T(document.styleSheets[Te].cssRules||document.styleSheets[Te].rules||document.styleSheets[Te].cssText)}catch{}!function $(){for(var Te=Y()("[data-responsive-image],[responsive-image]"),de=0,we=Te.length;de<we;de++)ie(Te[de])}()},this.findElementQueriesElements=function(z){!function oe(z){var Te=Y(z);for(var de in M)if(M.hasOwnProperty(de))for(var we=Te(de,z),Ie=0,De=we.length;Ie<De;Ie++)X(we[Ie],de)}(z)},this.update=function(){this.init()}};P.update=function(){P.instance.update()},P.detach=function(y){y.elementQueriesSetupInformation?(y.elementQueriesSensor.detach(),delete y.elementQueriesSetupInformation,delete y.elementQueriesSensor):y.resizeSensorInstance&&(y.resizeSensorInstance.detach(),delete y.resizeSensorInstance)},P.init=function(){P.instance||(P.instance=new P),P.instance.init()};return P.findElementQueriesElements=function(y){P.instance.findElementQueriesElements(y)},P.listen=function(){!function(y){if(document.addEventListener)document.addEventListener("DOMContentLoaded",y,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var M=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(y(),clearInterval(M))},10);else window.onload=y}(P.init)},P})?E.apply(Z,b):E)&&(ne.exports=R)},884:function(ne,Z,g){"use strict";var E,b;typeof window<"u"&&window,void 0!==(b="function"==typeof(E=function(){if(typeof window>"u")return null;var R=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),A=R.requestAnimationFrame||R.mozRequestAnimationFrame||R.webkitRequestAnimationFrame||function(j){return R.setTimeout(j,20)},P=R.cancelAnimationFrame||R.mozCancelAnimationFrame||R.webkitCancelAnimationFrame||function(j){R.clearTimeout(j)};function _(j,le){var k=Object.prototype.toString.call(j),X="[object Array]"===k||"[object NodeList]"===k||"[object HTMLCollection]"===k||"[object Object]"===k||typeof jQuery<"u"&&j instanceof jQuery||typeof Elements<"u"&&j instanceof Elements,ce=0,Y=j.length;if(X)for(;ce<Y;ce++)le(j[ce]);else le(j)}function y(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var le=j.getBoundingClientRect();return{width:Math.round(le.width),height:Math.round(le.height)}}function M(j,le){Object.keys(le).forEach(function(k){j.style[k]=le[k]})}var U=function(j,le){var k=0;function X(){var oe,ie,Y=[];this.add=function($){Y.push($)},this.call=function($){for(oe=0,ie=Y.length;oe<ie;oe++)Y[oe].call(this,$)},this.remove=function($){var H=[];for(oe=0,ie=Y.length;oe<ie;oe++)Y[oe]!==$&&H.push(Y[oe]);Y=H},this.length=function(){return Y.length}}function ce(Y,oe){if(Y){if(Y.resizedAttached)return void Y.resizedAttached.add(oe);Y.resizedAttached=new X,Y.resizedAttached.add(oe),Y.resizeSensor=document.createElement("div"),Y.resizeSensor.dir="ltr",Y.resizeSensor.className="resize-sensor";var ie={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},$={position:"absolute",left:"0px",top:"0px",transition:"0s"};M(Y.resizeSensor,ie);var H=document.createElement("div");H.className="resize-sensor-expand",M(H,ie);var v=document.createElement("div");M(v,$),H.appendChild(v);var L=document.createElement("div");L.className="resize-sensor-shrink",M(L,ie);var T=document.createElement("div");M(T,$),M(T,{width:"200%",height:"200%"}),L.appendChild(T),Y.resizeSensor.appendChild(H),Y.resizeSensor.appendChild(L),Y.appendChild(Y.resizeSensor);var fe=window.getComputedStyle(Y),z=fe?fe.getPropertyValue("position"):null;"absolute"!==z&&"relative"!==z&&"fixed"!==z&&"sticky"!==z&&(Y.style.position="relative");var Te=!1,de=0,we=y(Y),Ie=0,De=0,tt=!0;k=0;var Se=function(){if(tt){if(0===Y.offsetWidth&&0===Y.offsetHeight)return void(k||(k=A(function(){k=0,Se()})));tt=!1}var ge,Ce;Ce=Y.offsetHeight,v.style.width=(ge=Y.offsetWidth)+10+"px",v.style.height=Ce+10+"px",H.scrollLeft=ge+10,H.scrollTop=Ce+10,L.scrollLeft=ge+10,L.scrollTop=Ce+10};Y.resizeSensor.resetSensor=Se;var Fe=function(){de=0,Te&&(Ie=we.width,De=we.height,Y.resizedAttached&&Y.resizedAttached.call(we))},Pe=function(){we=y(Y),(Te=we.width!==Ie||we.height!==De)&&!de&&(de=A(Fe)),Se()},ze=function(ge,Ce,Ke){ge.attachEvent?ge.attachEvent("on"+Ce,Ke):ge.addEventListener(Ce,Ke)};ze(H,"scroll",Pe),ze(L,"scroll",Pe),k=A(function(){k=0,Se()})}}_(j,function(Y){ce(Y,le)}),this.detach=function(Y){k||(P(k),k=0),U.detach(j,Y)},this.reset=function(){j.resizeSensor.resetSensor()}};if(U.reset=function(j){_(j,function(le){le.resizeSensor.resetSensor()})},U.detach=function(j,le){_(j,function(k){k&&(k.resizedAttached&&"function"==typeof le&&(k.resizedAttached.remove(le),k.resizedAttached.length())||k.resizeSensor&&(k.contains(k.resizeSensor)&&k.removeChild(k.resizeSensor),delete k.resizeSensor,delete k.resizedAttached))})},typeof MutationObserver<"u"){var N=new MutationObserver(function(j){for(var le in j)if(j.hasOwnProperty(le))for(var k=j[le].addedNodes,X=0;X<k.length;X++)k[X].resizeSensor&&U.reset(k[X])});document.addEventListener("DOMContentLoaded",function(j){N.observe(document.body,{childList:!0,subtree:!0})})}return U})?E.call(Z,g,Z,ne):E)&&(ne.exports=b)},2016:ne=>{"use strict";var E,Z="object"==typeof Reflect?Reflect:null,g=Z&&"function"==typeof Z.apply?Z.apply:function(H,v,L){return Function.prototype.apply.call(H,v,L)};E=Z&&"function"==typeof Z.ownKeys?Z.ownKeys:Object.getOwnPropertySymbols?function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:function(H){return Object.getOwnPropertyNames(H)};var R=Number.isNaN||function(H){return H!=H};function A(){A.init.call(this)}ne.exports=A,ne.exports.once=function Y($,H){return new Promise(function(v,L){function T(z){$.removeListener(H,fe),L(z)}function fe(){"function"==typeof $.removeListener&&$.removeListener("error",T),v([].slice.call(arguments))}ie($,H,fe,{once:!0}),"error"!==H&&function oe($,H,v){"function"==typeof $.on&&ie($,"error",H,v)}($,T,{once:!0})})},A.EventEmitter=A,A.prototype._events=void 0,A.prototype._eventsCount=0,A.prototype._maxListeners=void 0;var P=10;function _($){if("function"!=typeof $)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}function y($){return void 0===$._maxListeners?A.defaultMaxListeners:$._maxListeners}function M($,H,v,L){var T,fe,z;if(_(v),void 0===(fe=$._events)?(fe=$._events=Object.create(null),$._eventsCount=0):(void 0!==fe.newListener&&($.emit("newListener",H,v.listener?v.listener:v),fe=$._events),z=fe[H]),void 0===z)z=fe[H]=v,++$._eventsCount;else if("function"==typeof z?z=fe[H]=L?[v,z]:[z,v]:L?z.unshift(v):z.push(v),(T=y($))>0&&z.length>T&&!z.warned){z.warned=!0;var Te=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");Te.name="MaxListenersExceededWarning",Te.emitter=$,Te.type=H,Te.count=z.length,function b($){console&&console.warn&&console.warn($)}(Te)}return $}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N($,H,v){var L={fired:!1,wrapFn:void 0,target:$,type:H,listener:v},T=U.bind(L);return T.listener=v,L.wrapFn=T,T}function j($,H,v){var L=$._events;if(void 0===L)return[];var T=L[H];return void 0===T?[]:"function"==typeof T?v?[T.listener||T]:[T]:v?function ce($){for(var H=new Array($.length),v=0;v<H.length;++v)H[v]=$[v].listener||$[v];return H}(T):k(T,T.length)}function le($){var H=this._events;if(void 0!==H){var v=H[$];if("function"==typeof v)return 1;if(void 0!==v)return v.length}return 0}function k($,H){for(var v=new Array(H),L=0;L<H;++L)v[L]=$[L];return v}function ie($,H,v,L){if("function"==typeof $.on)L.once?$.once(H,v):$.on(H,v);else{if("function"!=typeof $.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $);$.addEventListener(H,function T(fe){L.once&&$.removeEventListener(H,T),v(fe)})}}Object.defineProperty(A,"defaultMaxListeners",{enumerable:!0,get:function(){return P},set:function($){if("number"!=typeof $||$<0||R($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");P=$}}),A.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},A.prototype.setMaxListeners=function(H){if("number"!=typeof H||H<0||R(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this},A.prototype.getMaxListeners=function(){return y(this)},A.prototype.emit=function(H){for(var v=[],L=1;L<arguments.length;L++)v.push(arguments[L]);var T="error"===H,fe=this._events;if(void 0!==fe)T=T&&void 0===fe.error;else if(!T)return!1;if(T){var z;if(v.length>0&&(z=v[0]),z instanceof Error)throw z;var Te=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw Te.context=z,Te}var de=fe[H];if(void 0===de)return!1;if("function"==typeof de)g(de,this,v);else{var we=de.length,Ie=k(de,we);for(L=0;L<we;++L)g(Ie[L],this,v)}return!0},A.prototype.on=A.prototype.addListener=function(H,v){return M(this,H,v,!1)},A.prototype.prependListener=function(H,v){return M(this,H,v,!0)},A.prototype.once=function(H,v){return _(v),this.on(H,N(this,H,v)),this},A.prototype.prependOnceListener=function(H,v){return _(v),this.prependListener(H,N(this,H,v)),this},A.prototype.off=A.prototype.removeListener=function(H,v){var L,T,fe,z,Te;if(_(v),void 0===(T=this._events))return this;if(void 0===(L=T[H]))return this;if(L===v||L.listener===v)0==--this._eventsCount?this._events=Object.create(null):(delete T[H],T.removeListener&&this.emit("removeListener",H,L.listener||v));else if("function"!=typeof L){for(fe=-1,z=L.length-1;z>=0;z--)if(L[z]===v||L[z].listener===v){Te=L[z].listener,fe=z;break}if(fe<0)return this;0===fe?L.shift():function X($,H){for(;H+1<$.length;H++)$[H]=$[H+1];$.pop()}(L,fe),1===L.length&&(T[H]=L[0]),void 0!==T.removeListener&&this.emit("removeListener",H,Te||v)}return this},A.prototype.removeAllListeners=function(H){var v,L,T;if(void 0===(L=this._events))return this;if(void 0===L.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==L[H]&&(0==--this._eventsCount?this._events=Object.create(null):delete L[H]),this;if(0===arguments.length){var z,fe=Object.keys(L);for(T=0;T<fe.length;++T)"removeListener"!==(z=fe[T])&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(v=L[H]))this.removeListener(H,v);else if(void 0!==v)for(T=v.length-1;T>=0;T--)this.removeListener(H,v[T]);return this},A.prototype.listeners=function(H){return j(this,H,!0)},A.prototype.rawListeners=function(H){return j(this,H,!1)},A.listenerCount=function($,H){return"function"==typeof $.listenerCount?$.listenerCount(H):le.call($,H)},A.prototype.listenerCount=le,A.prototype.eventNames=function(){return this._eventsCount>0?E(this._events):[]}},7991:(ne,Z,g)=>{var E=g(6943),b=g(9151),R=g(2323);function A(j,le,k){if(!E(j))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!j.hasNode(le))throw new Error('graphology-shortest-path: the "'+le+'" source node does not exist in the given graph.');if(!j.hasNode(k))throw new Error('graphology-shortest-path: the "'+k+'" target node does not exist in the given graph.');if((le=""+le)==(k=""+k))return[le];var X=j.inboundNeighbors.bind(j),ce=j.outboundNeighbors.bind(j),Y={},oe={};Y[le]=null,oe[k]=null;var H,v,L,T,fe,z,Te,de,ie=[le],$=[k],we=!1;e:for(;ie.length&&$.length;)if(ie.length<=$.length){for(H=ie,ie=[],fe=0,Te=H.length;fe<Te;fe++)for(z=0,de=(L=ce(v=H[fe])).length;z<de;z++)if((T=L[z])in Y||(ie.push(T),Y[T]=v),T in oe){we=!0;break e}}else for(H=$,$=[],fe=0,Te=H.length;fe<Te;fe++)for(v=H[fe],L=X(v),z=0,de=L.length;z<de;z++)if(T=L[z],T in oe||($.push(T),oe[T]=v),T in Y){we=!0;break e}if(!we)return null;for(var Ie=[];T;)Ie.unshift(T),T=Y[T];for(T=oe[Ie[Ie.length-1]];T;)Ie.push(T),T=oe[T];return Ie.length?Ie:null}function P(j,le){if(!E(j))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!j.hasNode(le))throw new Error('graphology-shortest-path: the "'+le+'" source node does not exist in the given graph.');var ce,Y,oe,ie,$,H,k={},X={};for(k[le=""+le]=!0,X[le]=[le];Object.keys(k).length;)for(oe in ce=k,k={},ce)for($=0,H=(Y=j.outboundNeighbors(oe)).length;$<H;$++)X[ie=Y[$]]||(X[ie]=X[oe].concat(ie),k[ie]=!0);return X}function _(j,le,k){if(!E(le))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!le.hasNode(k))throw new Error('graphology-shortest-path: the "'+k+'" source node does not exist in the given graph.');k=""+k;var X=new Set,ce={},Y=0;ce[k]=0;for(var ie,$,H,oe=[k];0!==oe.length;){var v=[];for(ie=0,$=oe.length;ie<$;ie++)!X.has(H=oe[ie])&&(X.add(H),R(v,le[j](H)),ce[H]=Y);Y++,oe=v}return ce}var y=_.bind(null,"outboundNeighbors"),M=_.bind(null,"neighbors");function U(j,le,k){return arguments.length<3?P(j,le):A(j,le,k)}U.bidirectional=A,U.singleSource=P,U.singleSourceLength=y,U.undirectedSingleSourceLength=M,U.brandes=function N(j,le){le=""+le;var oe,ie,$,H,v,L,T,fe,z,k=[],X={},ce={},Y=j.nodes();for(L=0,fe=Y.length;L<fe;L++)X[H=Y[L]]=[],ce[H]=0;var Te={};ce[le]=1,Te[le]=0;for(var de=b.of(le);de.size;)for(H=de.dequeue(),k.push(H),oe=Te[H],ie=ce[H],T=0,z=($=j.outboundNeighbors(H)).length;T<z;T++)(v=$[T])in Te||(de.enqueue(v),Te[v]=oe+1),Te[v]===oe+1&&(ce[v]+=ie,X[v].push(H));return[k,X,ce]},ne.exports=U},6943:ne=>{ne.exports=function(g){return null!==g&&"object"==typeof g&&"function"==typeof g.addUndirectedEdgeWithKey&&"function"==typeof g.dropNode&&"boolean"==typeof g.multi}},4938:function(ne){ne.exports=function(){"use strict";function Z(be){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Me){return typeof Me}:function(Me){return Me&&"function"==typeof Symbol&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me})(be)}function g(be,Me){be.prototype=Object.create(Me.prototype),be.prototype.constructor=be,b(be,Me)}function E(be){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(Me){return Me.__proto__||Object.getPrototypeOf(Me)})(be)}function b(be,Me){return(b=Object.setPrototypeOf||function(Ee,V){return Ee.__proto__=V,Ee})(be,Me)}function A(be,Me,Ee){return(A=function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(V,re,pe){var Be=[null];Be.push.apply(Be,re);var $e=new(Function.bind.apply(V,Be));return pe&&b($e,pe.prototype),$e}).apply(null,arguments)}function P(be){var Me="function"==typeof Map?new Map:void 0;return(P=function(Ee){if(null===Ee||-1===Function.toString.call(Ee).indexOf("[native code]"))return Ee;if("function"!=typeof Ee)throw new TypeError("Super expression must either be null or a function");if(void 0!==Me){if(Me.has(Ee))return Me.get(Ee);Me.set(Ee,re)}function re(){return A(Ee,arguments,E(this).constructor)}return re.prototype=Object.create(Ee.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),b(re,Ee)})(be)}function _(be){if(void 0===be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}var y=function(){for(var be=arguments[0],Me=1,Ee=arguments.length;Me<Ee;Me++)if(arguments[Me])for(var V in arguments[Me])be[V]=arguments[Me][V];return be};function M(be,Me,Ee,V){var re=be._nodes.get(Me),pe=null;return re?pe="mixed"===V?re.out&&re.out[Ee]||re.undirected&&re.undirected[Ee]:"directed"===V?re.out&&re.out[Ee]:re.undirected&&re.undirected[Ee]:pe}function N(be){return"object"===Z(be)&&null!==be&&be.constructor===Object}function j(be){var Me;for(Me in be)return!1;return!0}function le(be,Me,Ee){Object.defineProperty(be,Me,{enumerable:!1,configurable:!1,writable:!0,value:Ee})}function k(be,Me,Ee){var V={enumerable:!0,configurable:!0};"function"==typeof Ee?V.get=Ee:(V.value=Ee,V.writable=!1),Object.defineProperty(be,Me,V)}function X(be){return!(!N(be)||be.attributes&&!Array.isArray(be.attributes))}"function"==typeof Object.assign&&(y=Object.assign);var ce,Y={exports:{}},oe="object"==typeof Reflect?Reflect:null,ie=oe&&"function"==typeof oe.apply?oe.apply:function(be,Me,Ee){return Function.prototype.apply.call(be,Me,Ee)};ce=oe&&"function"==typeof oe.ownKeys?oe.ownKeys:Object.getOwnPropertySymbols?function(be){return Object.getOwnPropertyNames(be).concat(Object.getOwnPropertySymbols(be))}:function(be){return Object.getOwnPropertyNames(be)};var $=Number.isNaN||function(be){return be!=be};function H(){H.init.call(this)}Y.exports=H,Y.exports.once=function(be,Me){return new Promise(function(Ee,V){function re(Be){be.removeListener(Me,pe),V(Be)}function pe(){"function"==typeof be.removeListener&&be.removeListener("error",re),Ee([].slice.call(arguments))}var Be;De(be,Me,pe,{once:!0}),"error"!==Me&&("function"==typeof(Be=be).on&&De(Be,"error",re,{once:!0}))})},H.EventEmitter=H,H.prototype._events=void 0,H.prototype._eventsCount=0,H.prototype._maxListeners=void 0;var v=10;function L(be){if("function"!=typeof be)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof be)}function T(be){return void 0===be._maxListeners?H.defaultMaxListeners:be._maxListeners}function fe(be,Me,Ee,V){var re,pe,Be;if(L(Ee),void 0===(pe=be._events)?(pe=be._events=Object.create(null),be._eventsCount=0):(void 0!==pe.newListener&&(be.emit("newListener",Me,Ee.listener?Ee.listener:Ee),pe=be._events),Be=pe[Me]),void 0===Be)Be=pe[Me]=Ee,++be._eventsCount;else if("function"==typeof Be?Be=pe[Me]=V?[Ee,Be]:[Be,Ee]:V?Be.unshift(Ee):Be.push(Ee),(re=T(be))>0&&Be.length>re&&!Be.warned){Be.warned=!0;var at=new Error("Possible EventEmitter memory leak detected. "+Be.length+" "+String(Me)+" listeners added. Use emitter.setMaxListeners() to increase limit");at.name="MaxListenersExceededWarning",at.emitter=be,at.type=Me,at.count=Be.length,console&&console.warn&&console.warn(at)}return be}function z(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Te(be,Me,Ee){var V={fired:!1,wrapFn:void 0,target:be,type:Me,listener:Ee},re=z.bind(V);return re.listener=Ee,V.wrapFn=re,re}function de(be,Me,Ee){var V=be._events;if(void 0===V)return[];var re=V[Me];return void 0===re?[]:"function"==typeof re?Ee?[re.listener||re]:[re]:Ee?function(pe){for(var Be=new Array(pe.length),$e=0;$e<Be.length;++$e)Be[$e]=pe[$e].listener||pe[$e];return Be}(re):Ie(re,re.length)}function we(be){var Me=this._events;if(void 0!==Me){var Ee=Me[be];if("function"==typeof Ee)return 1;if(void 0!==Ee)return Ee.length}return 0}function Ie(be,Me){for(var Ee=new Array(Me),V=0;V<Me;++V)Ee[V]=be[V];return Ee}function De(be,Me,Ee,V){if("function"==typeof be.on)V.once?be.once(Me,Ee):be.on(Me,Ee);else{if("function"!=typeof be.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof be);be.addEventListener(Me,function re(pe){V.once&&be.removeEventListener(Me,re),Ee(pe)})}}function tt(be){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:be}),this.done=!1}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(be){if("number"!=typeof be||be<0||$(be))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+be+".");v=be}}),H.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},H.prototype.setMaxListeners=function(be){if("number"!=typeof be||be<0||$(be))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+be+".");return this._maxListeners=be,this},H.prototype.getMaxListeners=function(){return T(this)},H.prototype.emit=function(be){for(var Me=[],Ee=1;Ee<arguments.length;Ee++)Me.push(arguments[Ee]);var V="error"===be,re=this._events;if(void 0!==re)V=V&&void 0===re.error;else if(!V)return!1;if(V){var pe;if(Me.length>0&&(pe=Me[0]),pe instanceof Error)throw pe;var Be=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw Be.context=pe,Be}var $e=re[be];if(void 0===$e)return!1;if("function"==typeof $e)ie($e,this,Me);else{var at=$e.length,wt=Ie($e,at);for(Ee=0;Ee<at;++Ee)ie(wt[Ee],this,Me)}return!0},H.prototype.addListener=function(be,Me){return fe(this,be,Me,!1)},H.prototype.on=H.prototype.addListener,H.prototype.prependListener=function(be,Me){return fe(this,be,Me,!0)},H.prototype.once=function(be,Me){return L(Me),this.on(be,Te(this,be,Me)),this},H.prototype.prependOnceListener=function(be,Me){return L(Me),this.prependListener(be,Te(this,be,Me)),this},H.prototype.removeListener=function(be,Me){var Ee,V,re,pe,Be;if(L(Me),void 0===(V=this._events))return this;if(void 0===(Ee=V[be]))return this;if(Ee===Me||Ee.listener===Me)0==--this._eventsCount?this._events=Object.create(null):(delete V[be],V.removeListener&&this.emit("removeListener",be,Ee.listener||Me));else if("function"!=typeof Ee){for(re=-1,pe=Ee.length-1;pe>=0;pe--)if(Ee[pe]===Me||Ee[pe].listener===Me){Be=Ee[pe].listener,re=pe;break}if(re<0)return this;0===re?Ee.shift():function($e,at){for(;at+1<$e.length;at++)$e[at]=$e[at+1];$e.pop()}(Ee,re),1===Ee.length&&(V[be]=Ee[0]),void 0!==V.removeListener&&this.emit("removeListener",be,Be||Me)}return this},H.prototype.off=H.prototype.removeListener,H.prototype.removeAllListeners=function(be){var Me,Ee,V;if(void 0===(Ee=this._events))return this;if(void 0===Ee.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ee[be]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ee[be]),this;if(0===arguments.length){var re,pe=Object.keys(Ee);for(V=0;V<pe.length;++V)"removeListener"!==(re=pe[V])&&this.removeAllListeners(re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Me=Ee[be]))this.removeListener(be,Me);else if(void 0!==Me)for(V=Me.length-1;V>=0;V--)this.removeListener(be,Me[V]);return this},H.prototype.listeners=function(be){return de(this,be,!0)},H.prototype.rawListeners=function(be){return de(this,be,!1)},H.listenerCount=function(be,Me){return"function"==typeof be.listenerCount?be.listenerCount(Me):we.call(be,Me)},H.prototype.listenerCount=we,H.prototype.eventNames=function(){return this._eventsCount>0?ce(this._events):[]},tt.prototype.next=function(){if(this.done)return{done:!0};var be=this._next();return be.done&&(this.done=!0),be},typeof Symbol<"u"&&(tt.prototype[Symbol.iterator]=function(){return this}),tt.of=function(){var be=arguments,Me=be.length,Ee=0;return new tt(function(){return Ee>=Me?{done:!0}:{done:!1,value:be[Ee++]}})},tt.empty=function(){var be=new tt(null);return be.done=!0,be},tt.is=function(be){return be instanceof tt||"object"==typeof be&&null!==be&&"function"==typeof be.next};var Ye=tt,Se=function(be,Me){for(var Ee,V=arguments.length>1?Me:1/0,re=V!==1/0?new Array(V):[],pe=0;;){if(pe===V)return re;if((Ee=be.next()).done)return pe!==Me?re.slice(0,pe):re;re[pe++]=Ee.value}},Fe=function(be){function Me(Ee,V){var re;return(re=be.call(this)||this).name="GraphError",re.message=Ee||"",re.data=V||{},re}return g(Me,be),Me}(P(Error)),Pe=function(be){function Me(Ee,V){var re;return(re=be.call(this,Ee,V)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(re),Me.prototype.constructor),re}return g(Me,be),Me}(Fe),ze=function(be){function Me(Ee,V){var re;return(re=be.call(this,Ee,V)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(re),Me.prototype.constructor),re}return g(Me,be),Me}(Fe),ge=function(be){function Me(Ee,V){var re;return(re=be.call(this,Ee,V)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(re),Me.prototype.constructor),re}return g(Me,be),Me}(Fe);function Ce(be,Me){this.key=be,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function Ke(be,Me){this.key=be,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function st(be,Me){this.key=be,this.attributes=Me,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Qe(be,Me,Ee,V,re,pe){this.key=Me,this.attributes=pe,this.undirected=be,this.source=V,this.target=re,this.generatedKey=Ee}function _e(be,Me,Ee,V,re,pe,Be){var $e,at,wt="out",It="in";if(Me&&(wt=It="undirected"),be.multi){if(void 0===(at=($e=pe[wt])[re])&&($e[re]=at=new Set),at.add(Ee),V===re&&Me)return;void 0===($e=Be[It])[V]&&($e[V]=at)}else{if(pe[wt][re]=Ee,V===re&&Me)return;Be[It][V]=Ee}}Ke.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},st.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var I=[{name:function(be){return"get".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(V,re){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new ge("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+V,$e=""+re;if(re=arguments[2],!(pe=M(this,Be,$e,Ee)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat($e,'").'))}else if(!(pe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(Ee," edge in the graph."));return pe.attributes[re]}}},{name:function(be){return"get".concat(be,"Attributes")},attacher:function(be,Me,Ee){be.prototype[Me]=function(V){var re;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new ge("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new ge("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var pe=""+V,Be=""+arguments[1];if(!(re=M(this,pe,Be,Ee)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(pe,'" - "').concat(Be,'").'))}else if(!(re=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==Ee&&re.undirected!==("undirected"===Ee))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(Ee," edge in the graph."));return re.attributes}}},{name:function(be){return"has".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(V,re){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new ge("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+V,$e=""+re;if(re=arguments[2],!(pe=M(this,Be,$e,Ee)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat($e,'").'))}else if(!(pe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(Ee," edge in the graph."));return pe.attributes.hasOwnProperty(re)}}},{name:function(be){return"set".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(V,re,pe){var Be;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new ge("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ge("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+V,at=""+re;if(re=arguments[2],pe=arguments[3],!(Be=M(this,$e,at,Ee)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat($e,'" - "').concat(at,'").'))}else if(!(Be=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==Ee&&Be.undirected!==("undirected"===Ee))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(Ee," edge in the graph."));return Be.attributes[re]=pe,this.emit("edgeAttributesUpdated",{key:Be.key,type:"set",attributes:Be.attributes,name:re}),this}}},{name:function(be){return"update".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(V,re,pe){var Be;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new ge("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ge("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+V,at=""+re;if(re=arguments[2],pe=arguments[3],!(Be=M(this,$e,at,Ee)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat($e,'" - "').concat(at,'").'))}else if(!(Be=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("function"!=typeof pe)throw new Pe("Graph.".concat(Me,": updater should be a function."));if("mixed"!==Ee&&Be.undirected!==("undirected"===Ee))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(Ee," edge in the graph."));return Be.attributes[re]=pe(Be.attributes[re]),this.emit("edgeAttributesUpdated",{key:Be.key,type:"set",attributes:Be.attributes,name:re}),this}}},{name:function(be){return"remove".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(V,re){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new ge("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+V,$e=""+re;if(re=arguments[2],!(pe=M(this,Be,$e,Ee)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat($e,'").'))}else if(!(pe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(Ee," edge in the graph."));return delete pe.attributes[re],this.emit("edgeAttributesUpdated",{key:pe.key,type:"remove",attributes:pe.attributes,name:re}),this}}},{name:function(be){return"replace".concat(be,"Attributes")},attacher:function(be,Me,Ee){be.prototype[Me]=function(V,re){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new ge("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+V,$e=""+re;if(re=arguments[2],!(pe=M(this,Be,$e,Ee)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat($e,'").'))}else if(!(pe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if(!N(re))throw new Pe("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(Ee," edge in the graph."));return pe.attributes=re,this.emit("edgeAttributesUpdated",{key:pe.key,type:"replace",attributes:pe.attributes}),this}}},{name:function(be){return"merge".concat(be,"Attributes")},attacher:function(be,Me,Ee){be.prototype[Me]=function(V,re){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new ge("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+V,$e=""+re;if(re=arguments[2],!(pe=M(this,Be,$e,Ee)))throw new ze("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat($e,'").'))}else if(!(pe=this._edges.get(V=""+V)))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" edge in the graph.'));if(!N(re))throw new Pe("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new ze("Graph.".concat(Me,': could not find the "').concat(V,'" ').concat(Ee," edge in the graph."));return y(pe.attributes,re),this.emit("edgeAttributesUpdated",{key:pe.key,type:"merge",attributes:pe.attributes,data:re}),this}}}],ae=Ye,K=function(){var be,Me=arguments,Ee=-1;return new ae(function V(){if(!be){if(++Ee>=Me.length)return{done:!0};be=Me[Ee]}var re=be.next();return re.done?(be=null,V()):re})},Le=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ve(be,Me){for(var Ee in Me)be.push(Me[Ee].key)}function me(be,Me){for(var Ee in Me)Me[Ee].forEach(function(V){return be.push(V.key)})}function Q(be,Me,Ee){for(var V in be)if(V!==Ee){var re=be[V];Me(re.key,re.attributes,re.source.key,re.target.key,re.source.attributes,re.target.attributes,re.undirected,re.generatedKey)}}function W(be,Me,Ee){for(var V in be)V!==Ee&&be[V].forEach(function(re){return Me(re.key,re.attributes,re.source.key,re.target.key,re.source.attributes,re.target.attributes,re.undirected,re.generatedKey)})}function C(be,Me,Ee){for(var V in be)if(V!==Ee){var re=be[V];if(Me(re.key,re.attributes,re.source.key,re.target.key,re.source.attributes,re.target.attributes,re.undirected,re.generatedKey))return!0}return!1}function O(be,Me,Ee){var V,re,pe,Be,$e;for(var at in be)if(at!==Ee)for(V=be[at].values();!0!==(re=V.next()).done;)if(Be=(pe=re.value).source,Me(pe.key,pe.attributes,Be.key,($e=pe.target).key,Be.attributes,$e.attributes,pe.undirected,pe.generatedKey))return!0;return!1}function he(be,Me){var Ee=Object.keys(be),V=Ee.length,re=null,pe=0;return new Ye(function Be(){var $e;if(re){var at=re.next();if(at.done)return re=null,pe++,Be();$e=at.value}else{if(pe>=V)return{done:!0};var wt=Ee[pe];if(wt===Me)return pe++,Be();if(($e=be[wt])instanceof Set)return re=$e.values(),Be();pe++}return{done:!1,value:[$e.key,$e.attributes,$e.source.key,$e.target.key,$e.source.attributes,$e.target.attributes]}})}function ue(be,Me,Ee){var V=Me[Ee];V&&be.push(V.key)}function Ge(be,Me,Ee){var V=Me[Ee];V&&V.forEach(function(re){return be.push(re.key)})}function qe(be,Me,Ee){var V=be[Me];if(V){var re=V.source,pe=V.target;Ee(V.key,V.attributes,re.key,pe.key,re.attributes,pe.attributes,V.undirected,V.generatedKey)}}function ft(be,Me,Ee){var V=be[Me];V&&V.forEach(function(re){return Ee(re.key,re.attributes,re.source.key,re.target.key,re.source.attributes,re.target.attributes,re.undirected,re.generatedKey)})}function Pt(be,Me,Ee){var V=be[Me];if(V){var re=V.source,pe=V.target;return Ee(V.key,V.attributes,re.key,pe.key,re.attributes,pe.attributes,V.undirected,V.generatedKey)}}function dt(be,Me,Ee){var V=be[Me];if(V){for(var re,pe,Be=V.values();!0!==(re=Be.next()).done;)if(Ee((pe=re.value).key,pe.attributes,pe.source.key,pe.target.key,pe.source.attributes,pe.target.attributes,pe.undirected,pe.generatedKey))return!0;return!1}}function Gt(be,Me){var Ee=be[Me];if(Ee instanceof Set){var V=Ee.values();return new Ye(function(){var re=V.next();if(re.done)return re;var pe=re.value;return{done:!1,value:[pe.key,pe.attributes,pe.source.key,pe.target.key,pe.source.attributes,pe.target.attributes]}})}return Ye.of([Ee.key,Ee.attributes,Ee.source.key,Ee.target.key,Ee.source.attributes,Ee.target.attributes])}var In=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Io(be,Me){if(void 0!==Me)for(var Ee in Me)be.add(Ee)}function Do(be,Me,Ee){for(var V in Me){var re=Me[V];re instanceof Set&&(re=re.values().next().value);var pe=re.source,$e=pe===be?re.target:pe;Ee($e.key,$e.attributes)}}function qi(be,Me,Ee,V){for(var re in Ee){var pe=Ee[re];pe instanceof Set&&(pe=pe.values().next().value);var Be=pe.source,at=Be===Me?pe.target:Be;be.has(at.key)||(be.add(at.key),V(at.key,at.attributes))}}function Br(be,Me,Ee){for(var V in Me){var re=Me[V];re instanceof Set&&(re=re.values().next().value);var pe=re.source,$e=pe===be?re.target:pe;if(Ee($e.key,$e.attributes))return!0}return!1}function ms(be,Me,Ee,V){for(var re in Ee){var pe=Ee[re];pe instanceof Set&&(pe=pe.values().next().value);var Be=pe.source,at=Be===Me?pe.target:Be;if(!be.has(at.key)&&(be.add(at.key),V(at.key,at.attributes)))return!0}return!1}function Ls(be,Me){var Ee=Object.keys(Me),V=Ee.length,re=0;return new Ye(function(){if(re>=V)return{done:!0};var pe=Me[Ee[re++]];pe instanceof Set&&(pe=pe.values().next().value);var Be=pe.source,at=Be===be?pe.target:Be;return{done:!1,value:[at.key,at.attributes]}})}function Ro(be,Me,Ee){var V=Object.keys(Ee),re=V.length,pe=0;return new Ye(function Be(){if(pe>=re)return{done:!0};var $e=Ee[V[pe++]];$e instanceof Set&&($e=$e.values().next().value);var at=$e.source,It=at===Me?$e.target:at;return be.has(It.key)?Be():(be.add(It.key),{done:!1,value:[It.key,It.attributes]})})}function zc(be,Me,Ee){for(var V,re,pe,Be,$e,at,wt,It=Me._nodes.values(),Vt=Me.type;!0!==(V=It.next()).done;){if(re=V.value,"undirected"!==Vt)for(pe in Be=re.out)if(at=($e=Be[pe]).target,wt=Ee(re.key,at.key,re.attributes,at.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),be&&wt)return;if("directed"!==Vt)for(pe in Be=re.undirected)if((at=($e=Be[pe]).target).key!==pe&&(at=$e.source),wt=Ee(re.key,at.key,re.attributes,at.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),be&&wt)return}}function ac(be,Me,Ee){for(var V,re,pe,Be,$e,at,wt,It,Vt,tn=Me._nodes.values(),gn=Me.type;!0!==(V=tn.next()).done;){if(re=V.value,"undirected"!==gn)for(pe in at=re.out)for(Be=at[pe].values();!0!==($e=Be.next()).done;)if(It=(wt=$e.value).target,Vt=Ee(re.key,It.key,re.attributes,It.attributes,wt.key,wt.attributes,wt.undirected,wt.generatedKey),be&&Vt)return;if("directed"!==gn)for(pe in at=re.undirected)for(Be=at[pe].values();!0!==($e=Be.next()).done;)if((It=(wt=$e.value).target).key!==pe&&(It=wt.source),Vt=Ee(re.key,It.key,re.attributes,It.attributes,wt.key,wt.attributes,wt.undirected,wt.generatedKey),be&&Vt)return}}function Gc(be,Me){var Ee={key:be};return j(Me.attributes)||(Ee.attributes=y({},Me.attributes)),Ee}function Zu(be,Me){var Ee={source:Me.source.key,target:Me.target.key};return Me.generatedKey||(Ee.key=be),j(Me.attributes)||(Ee.attributes=y({},Me.attributes)),Me.undirected&&(Ee.undirected=!0),Ee}var Fd=new Set(["directed","undirected","mixed"]),Xc=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ld={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Ll(be,Me,Ee){var V=new be.NodeDataClass(Me,Ee);return be._nodes.set(Me,V),be.emit("nodeAdded",{key:Me,attributes:Ee}),V}function Bl(be,Me,Ee,V,re,pe,Be,$e){if(!V&&"undirected"===be.type)throw new ge("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(V&&"directed"===be.type)throw new ge("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e&&!N($e))throw new Pe("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat($e,'"'));if(pe=""+pe,Be=""+Be,$e=$e||{},!be.allowSelfLoops&&pe===Be)throw new ge("Graph.".concat(Me,': source & target are the same ("').concat(pe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var at=be._nodes.get(pe),wt=be._nodes.get(Be);if(!at)throw new ze("Graph.".concat(Me,': source node "').concat(pe,'" not found.'));if(!wt)throw new ze("Graph.".concat(Me,': target node "').concat(Be,'" not found.'));var It={key:null,undirected:V,source:pe,target:Be,attributes:$e};if(Ee&&(re=be._edgeKeyGenerator(It)),be._edges.has(re=""+re))throw new ge("Graph.".concat(Me,': the "').concat(re,'" edge already exists in the graph.'));if(!be.multi&&(V?void 0!==at.undirected[Be]:void 0!==at.out[Be]))throw new ge("Graph.".concat(Me,': an edge linking "').concat(pe,'" to "').concat(Be,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Vt=new Qe(V,re,Ee,at,wt,$e);return be._edges.set(re,Vt),pe===Be?V?(at.undirectedSelfLoops++,be._undirectedSelfLoopCount++):(at.directedSelfLoops++,be._directedSelfLoopCount++):V?(at.undirectedDegree++,wt.undirectedDegree++):(at.outDegree++,wt.inDegree++),_e(be,V,Vt,pe,Be,at,wt),V?be._undirectedSize++:be._directedSize++,It.key=re,be.emit("edgeAdded",It),re}function Yc(be,Me,Ee,V,re,pe,Be,$e,at){if(!V&&"undirected"===be.type)throw new ge("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(V&&"directed"===be.type)throw new ge("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e)if(at){if("function"!=typeof $e)throw new Pe("Graph.".concat(Me,': invalid updater function. Expecting a function but got "').concat($e,'"'))}else if(!N($e))throw new Pe("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat($e,'"'));var wt;if(pe=""+pe,Be=""+Be,at&&(wt=$e,$e=void 0),!be.allowSelfLoops&&pe===Be)throw new ge("Graph.".concat(Me,': source & target are the same ("').concat(pe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var It,Vt,tn=be._nodes.get(pe),gn=be._nodes.get(Be);if(!Ee&&(It=be._edges.get(re))){if(It.source.key!==pe||It.target.key!==Be||V&&(It.source.key!==Be||It.target.key!==pe))throw new ge("Graph.".concat(Me,': inconsistency detected when attempting to merge the "').concat(re,'" edge with "').concat(pe,'" source & "').concat(Be,'" target vs. ("').concat(It.source.key,'", "').concat(It.target.key,'").'));Vt=It}if(Vt||be.multi||!tn||(Vt=V?tn.undirected[Be]:tn.out[Be]),Vt)return(at?wt:$e)?(at?(Vt.attributes=wt(Vt.attributes),be.emit("edgeAttributesUpdated",{type:"replace",key:Vt.key,attributes:Vt.attributes})):(y(Vt.attributes,$e),be.emit("edgeAttributesUpdated",{type:"merge",key:Vt.key,attributes:Vt.attributes,data:$e})),Vt.key):Vt.key;$e=$e||{},at&&wt&&($e=wt($e));var Sr={key:null,undirected:V,source:pe,target:Be,attributes:$e};if(Ee&&(re=be._edgeKeyGenerator(Sr)),be._edges.has(re=""+re))throw new ge("Graph.".concat(Me,': the "').concat(re,'" edge already exists in the graph.'));return tn||(tn=Ll(be,pe,{}),pe===Be&&(gn=tn)),gn||(gn=Ll(be,Be,{})),It=new Qe(V,re,Ee,tn,gn,$e),be._edges.set(re,It),pe===Be?V?(tn.undirectedSelfLoops++,be._undirectedSelfLoopCount++):(tn.directedSelfLoops++,be._directedSelfLoopCount++):V?(tn.undirectedDegree++,gn.undirectedDegree++):(tn.outDegree++,gn.inDegree++),_e(be,V,It,pe,Be,tn,gn),V?be._undirectedSize++:be._directedSize++,Sr.key=re,be.emit("edgeAdded",Sr),re}var be,vi=function(be){function Me(V){var re;if(re=be.call(this)||this,(V=y({},Ld,V)).edgeKeyGenerator&&"function"!=typeof V.edgeKeyGenerator)throw new Pe("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(V.edgeKeyGenerator,'".'));if("boolean"!=typeof V.multi)throw new Pe("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(V.multi,'".'));if(!Fd.has(V.type))throw new Pe('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(V.type,'".'));if("boolean"!=typeof V.allowSelfLoops)throw new Pe("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(V.allowSelfLoops,'".'));var pe,Be="mixed"===V.type?Ce:"directed"===V.type?Ke:st;return le(_(re),"NodeDataClass",Be),le(_(re),"_attributes",{}),le(_(re),"_nodes",new Map),le(_(re),"_edges",new Map),le(_(re),"_directedSize",0),le(_(re),"_undirectedSize",0),le(_(re),"_directedSelfLoopCount",0),le(_(re),"_undirectedSelfLoopCount",0),le(_(re),"_edgeKeyGenerator",V.edgeKeyGenerator||(pe=0,function(){return pe++})),le(_(re),"_options",V),Xc.forEach(function($e){return le(_(re),$e,re[$e])}),k(_(re),"order",function(){return re._nodes.size}),k(_(re),"size",function(){return re._edges.size}),k(_(re),"directedSize",function(){return re._directedSize}),k(_(re),"undirectedSize",function(){return re._undirectedSize}),k(_(re),"selfLoopCount",function(){return re._directedSelfLoopCount+re._undirectedSelfLoopCount}),k(_(re),"directedSelfLoopCount",function(){return re._directedSelfLoopCount}),k(_(re),"undirectedSelfLoopCount",function(){return re._undirectedSelfLoopCount}),k(_(re),"multi",re._options.multi),k(_(re),"type",re._options.type),k(_(re),"allowSelfLoops",re._options.allowSelfLoops),k(_(re),"implementation",function(){return"graphology"}),re}g(Me,be);var Ee=Me.prototype;return Ee.hasNode=function(V){return this._nodes.has(""+V)},Ee.hasDirectedEdge=function(V,re){if("undirected"===this.type)return!1;if(1===arguments.length){var Be=this._edges.get(""+V);return!!Be&&!Be.undirected}if(2===arguments.length){re=""+re;var $e=this._nodes.get(V=""+V);if(!$e)return!1;var at=$e.out[re];return!(!at||this.multi&&!at.size)}throw new Pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ee.hasUndirectedEdge=function(V,re){if("directed"===this.type)return!1;if(1===arguments.length){var Be=this._edges.get(""+V);return!!Be&&Be.undirected}if(2===arguments.length){re=""+re;var $e=this._nodes.get(V=""+V);if(!$e)return!1;var at=$e.undirected[re];return!(!at||this.multi&&!at.size)}throw new Pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ee.hasEdge=function(V,re){if(1===arguments.length)return this._edges.has(""+V);if(2===arguments.length){re=""+re;var Be=this._nodes.get(V=""+V);if(!Be)return!1;var $e=void 0!==Be.out&&Be.out[re];return $e||($e=void 0!==Be.undirected&&Be.undirected[re]),!(!$e||this.multi&&!$e.size)}throw new Pe("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ee.directedEdge=function(V,re){if("undirected"!==this.type){if(V=""+V,re=""+re,this.multi)throw new ge("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var pe=this._nodes.get(V);if(!pe)throw new ze('Graph.directedEdge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(re))throw new ze('Graph.directedEdge: could not find the "'.concat(re,'" target node in the graph.'));var Be=pe.out&&pe.out[re]||void 0;return Be?Be.key:void 0}},Ee.undirectedEdge=function(V,re){if("directed"!==this.type){if(V=""+V,re=""+re,this.multi)throw new ge("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var pe=this._nodes.get(V);if(!pe)throw new ze('Graph.undirectedEdge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(re))throw new ze('Graph.undirectedEdge: could not find the "'.concat(re,'" target node in the graph.'));var Be=pe.undirected&&pe.undirected[re]||void 0;return Be?Be.key:void 0}},Ee.edge=function(V,re){if(this.multi)throw new ge("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");re=""+re;var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.edge: could not find the "'.concat(V,'" source node in the graph.'));if(!this._nodes.has(re))throw new ze('Graph.edge: could not find the "'.concat(re,'" target node in the graph.'));var Be=pe.out&&pe.out[re]||pe.undirected&&pe.undirected[re]||void 0;if(Be)return Be.key},Ee.inDegree=function(V){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new Pe('Graph.inDegree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.inDegree: could not find the "'.concat(V,'" node in the graph.'));return"undirected"===this.type?0:pe.inDegree+(re?pe.directedSelfLoops:0)},Ee.outDegree=function(V){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new Pe('Graph.outDegree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.outDegree: could not find the "'.concat(V,'" node in the graph.'));return"undirected"===this.type?0:pe.outDegree+(re?pe.directedSelfLoops:0)},Ee.directedDegree=function(V){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new Pe('Graph.directedDegree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.directedDegree: could not find the "'.concat(V,'" node in the graph.'));if("undirected"===this.type)return 0;var Be=re?pe.directedSelfLoops:0;return pe.inDegree+Be+(pe.outDegree+Be)},Ee.undirectedDegree=function(V){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new Pe('Graph.undirectedDegree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.undirectedDegree: could not find the "'.concat(V,'" node in the graph.'));return"directed"===this.type?0:pe.undirectedDegree+2*(re?pe.undirectedSelfLoops:0)},Ee.degree=function(V){var re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof re)throw new Pe('Graph.degree: Expecting a boolean but got "'.concat(re,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.degree: could not find the "'.concat(V,'" node in the graph.'));var Be=0,$e=0;return"directed"!==this.type&&(re&&($e=pe.undirectedSelfLoops),Be+=pe.undirectedDegree+2*$e),"undirected"!==this.type&&(re&&($e=pe.directedSelfLoops),Be+=pe.inDegree+pe.outDegree+2*$e),Be},Ee.source=function(V){var re=this._edges.get(V=""+V);if(!re)throw new ze('Graph.source: could not find the "'.concat(V,'" edge in the graph.'));return re.source.key},Ee.target=function(V){var re=this._edges.get(V=""+V);if(!re)throw new ze('Graph.target: could not find the "'.concat(V,'" edge in the graph.'));return re.target.key},Ee.extremities=function(V){var re=this._edges.get(V=""+V);if(!re)throw new ze('Graph.extremities: could not find the "'.concat(V,'" edge in the graph.'));return[re.source.key,re.target.key]},Ee.opposite=function(V,re){V=""+V;var pe=this._edges.get(re=""+re);if(!pe)throw new ze('Graph.opposite: could not find the "'.concat(re,'" edge in the graph.'));var Be=pe.source.key,$e=pe.target.key;if(V!==Be&&V!==$e)throw new ze('Graph.opposite: the "'.concat(V,'" node is not attached to the "').concat(re,'" edge (').concat(Be,", ").concat($e,")."));return V===Be?$e:Be},Ee.hasExtremity=function(V,re){re=""+re;var pe=this._edges.get(V=""+V);if(!pe)throw new ze('Graph.hasExtremity: could not find the "'.concat(V,'" edge in the graph.'));return pe.source.key===re||pe.target.key===re},Ee.isUndirected=function(V){var re=this._edges.get(V=""+V);if(!re)throw new ze('Graph.isUndirected: could not find the "'.concat(V,'" edge in the graph.'));return re.undirected},Ee.isDirected=function(V){var re=this._edges.get(V=""+V);if(!re)throw new ze('Graph.isDirected: could not find the "'.concat(V,'" edge in the graph.'));return!re.undirected},Ee.isSelfLoop=function(V){var re=this._edges.get(V=""+V);if(!re)throw new ze('Graph.isSelfLoop: could not find the "'.concat(V,'" edge in the graph.'));return re.source===re.target},Ee.hasGeneratedKey=function(V){var re=this._edges.get(V=""+V);if(!re)throw new ze('Graph.hasGeneratedKey: could not find the "'.concat(V,'" edge in the graph.'));return re.generatedKey},Ee.addNode=function(V,re){return function(pe,Be,$e){if($e&&!N($e))throw new Pe('Graph.addNode: invalid attributes. Expecting an object but got "'.concat($e,'"'));if($e=$e||{},pe._nodes.has(Be=""+Be))throw new ge('Graph.addNode: the "'.concat(Be,'" node already exist in the graph.'));var at=new pe.NodeDataClass(Be,$e);return pe._nodes.set(Be,at),pe.emit("nodeAdded",{key:Be,attributes:$e}),at}(this,V,re).key},Ee.mergeNode=function(V,re){if(re&&!N(re))throw new Pe('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(re,'"'));re=re||{};var pe=this._nodes.get(V=""+V);return pe?(re&&(y(pe.attributes,re),this.emit("nodeAttributesUpdated",{type:"merge",key:V,attributes:pe.attributes,data:re})),V):(pe=new this.NodeDataClass(V,re),this._nodes.set(V,pe),this.emit("nodeAdded",{key:V,attributes:re}),V)},Ee.updateNode=function(V,re){if(re&&"function"!=typeof re)throw new Pe('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(re,'"'));var pe=this._nodes.get(V=""+V);if(pe)return re&&(pe.attributes=re(pe.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:V,attributes:pe.attributes})),V;var $e=re?re({}):{};return pe=new this.NodeDataClass(V,$e),this._nodes.set(V,pe),this.emit("nodeAdded",{key:V,attributes:$e}),V},Ee.dropNode=function(V){var re=this,pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.dropNode: could not find the "'.concat(V,'" node in the graph.'));this.forEachEdge(V,function(Be){re.dropEdge(Be)}),this._nodes.delete(V),this.emit("nodeDropped",{key:V,attributes:pe.attributes})},Ee.dropEdge=function(V){var re;if(arguments.length>1){var pe=""+arguments[0],Be=""+arguments[1];if(!(re=M(this,pe,Be,this.type)))throw new ze('Graph.dropEdge: could not find the "'.concat(pe,'" -> "').concat(Be,'" edge in the graph.'))}else if(!(re=this._edges.get(V=""+V)))throw new ze('Graph.dropEdge: could not find the "'.concat(V,'" edge in the graph.'));this._edges.delete(re.key);var at=re.source,wt=re.target,It=re.attributes,Vt=re.undirected;return at===wt?Vt?(at.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(at.directedSelfLoops--,this._directedSelfLoopCount--):Vt?(at.undirectedDegree--,wt.undirectedDegree--):(at.outDegree--,wt.inDegree--),function B(be,Me,Ee){var V=be.multi,re=Ee.source,pe=Ee.target,Be=re.key,$e=pe.key,at=re[Me?"undirected":"out"],wt=Me?"undirected":"in";if($e in at)if(V){var It=at[$e];1===It.size?(delete at[$e],delete pe[wt][Be]):It.delete(Ee)}else delete at[$e];V||delete pe[wt][Be]}(this,Vt,re),Vt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:V,attributes:It,source:at.key,target:wt.key,undirected:Vt}),this},Ee.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},Ee.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},Ee.getAttribute=function(V){return this._attributes[V]},Ee.getAttributes=function(){return this._attributes},Ee.hasAttribute=function(V){return this._attributes.hasOwnProperty(V)},Ee.setAttribute=function(V,re){return this._attributes[V]=re,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:V}),this},Ee.updateAttribute=function(V,re){if("function"!=typeof re)throw new Pe("Graph.updateAttribute: updater should be a function.");return this._attributes[V]=re(this._attributes[V]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:V}),this},Ee.removeAttribute=function(V){return delete this._attributes[V],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:V}),this},Ee.replaceAttributes=function(V){if(!N(V))throw new Pe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=V,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},Ee.mergeAttributes=function(V){if(!N(V))throw new Pe("Graph.mergeAttributes: provided attributes are not a plain object.");return y(this._attributes,V),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:V}),this},Ee.getNodeAttribute=function(V,re){var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.getNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return pe.attributes[re]},Ee.getNodeAttributes=function(V){var re=this._nodes.get(V=""+V);if(!re)throw new ze('Graph.getNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));return re.attributes},Ee.hasNodeAttribute=function(V,re){var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.hasNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return pe.attributes.hasOwnProperty(re)},Ee.setNodeAttribute=function(V,re,pe){var Be=this._nodes.get(V=""+V);if(!Be)throw new ze('Graph.setNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));if(arguments.length<3)throw new Pe("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Be.attributes[re]=pe,this.emit("nodeAttributesUpdated",{key:V,type:"set",attributes:Be.attributes,name:re}),this},Ee.updateNodeAttribute=function(V,re,pe){var Be=this._nodes.get(V=""+V);if(!Be)throw new ze('Graph.updateNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));if(arguments.length<3)throw new Pe("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof pe)throw new Pe("Graph.updateAttribute: updater should be a function.");var $e=Be.attributes,at=pe($e[re]);return $e[re]=at,this.emit("nodeAttributesUpdated",{key:V,type:"set",attributes:Be.attributes,name:re}),this},Ee.removeNodeAttribute=function(V,re){var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.hasNodeAttribute: could not find the "'.concat(V,'" node in the graph.'));return delete pe.attributes[re],this.emit("nodeAttributesUpdated",{key:V,type:"remove",attributes:pe.attributes,name:re}),this},Ee.replaceNodeAttributes=function(V,re){var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.replaceNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));if(!N(re))throw new Pe("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return pe.attributes=re,this.emit("nodeAttributesUpdated",{key:V,type:"replace",attributes:pe.attributes}),this},Ee.mergeNodeAttributes=function(V,re){var pe=this._nodes.get(V=""+V);if(!pe)throw new ze('Graph.mergeNodeAttributes: could not find the "'.concat(V,'" node in the graph.'));if(!N(re))throw new Pe("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return y(pe.attributes,re),this.emit("nodeAttributesUpdated",{key:V,type:"merge",attributes:pe.attributes,data:re}),this},Ee.updateEachNodeAttributes=function(V,re){if("function"!=typeof V)throw new Pe("Graph.updateEachNodeAttributes: expecting an updater function.");if(re&&!X(re))throw new Pe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var pe,Be,$e=this._nodes.values();!0!==(pe=$e.next()).done;)(Be=pe.value).attributes=V(Be.key,Be.attributes);this.emit("eachNodeAttributesUpdated",{hints:re||null})},Ee.updateEachEdgeAttributes=function(V,re){if("function"!=typeof V)throw new Pe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(re&&!X(re))throw new Pe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var pe,Be,$e=this._edges.values();!0!==(pe=$e.next()).done;)(Be=pe.value).attributes=V(Be.key,Be.attributes);this.emit("eachEdgeAttributesUpdated",{hints:re||null})},Ee.forEach=function(V){if("function"!=typeof V)throw new Pe("Graph.forEach: expecting a callback.");this.multi?ac(!1,this,V):zc(!1,this,V)},Ee.forEachUntil=function(V){if("function"!=typeof V)throw new Pe("Graph.forEach: expecting a callback.");this.multi?ac(!0,this,V):zc(!0,this,V)},Ee.adjacency=function(){return this.multi?(at=(V=this)._nodes.values(),wt=V.type,It="outer",Vt=null,new Ye(function tn(){var gn;if("outer"===It)return!0===(gn=at.next()).done?gn:(re=gn.value,It="directed",tn());if("directed"===It)return"undirected"===wt?(It="undirected",tn()):(Be=re.out,pe=Object.keys(re.out),$e=0,It="inner-directed",tn());if("undirected"===It){if("directed"===wt)return It="outer",tn();Be=re.undirected,pe=Object.keys(re.undirected),$e=0,It="inner-undirected"}if(!Vt&&$e>=pe.length)return It="inner-undirected"===It?"outer":"undirected",tn();if(!Vt){var mo=pe[$e++];return Vt=Be[mo].values(),tn()}if((gn=Vt.next()).done)return Vt=null,tn();var Sr=gn.value,go=Sr.target;return"inner-undirected"===It&&go.key===re.key&&(go=Sr.source),{done:!1,value:[re.key,go.key,re.attributes,go.attributes,Sr.key,Sr.attributes]}})):(Kc=(tn=this)._nodes.values(),ia=tn.type,jr="outer",new Ye(function Oo(){var dc;if("outer"===jr)return!0===(dc=Kc.next()).done?dc:(gn=dc.value,jr="directed",Oo());if("directed"===jr)return"undirected"===ia?(jr="undirected",Oo()):(Sr=gn.out,mo=Object.keys(gn.out),go=0,jr="inner-directed",Oo());if("undirected"===jr){if("directed"===ia)return jr="outer",Oo();Sr=gn.undirected,mo=Object.keys(gn.undirected),go=0,jr="inner-undirected"}if(go>=mo.length)return jr="inner-undirected"===jr?"outer":"undirected",Oo();var jl=mo[go++],Bs=Sr[jl],Pi=Bs.target;return"inner-undirected"===jr&&Pi.key===gn.key&&(Pi=Bs.source),{done:!1,value:[gn.key,Pi.key,gn.attributes,Pi.attributes,Bs.key,Bs.attributes]}}));var tn,gn,mo,Sr,go,Kc,ia,jr,V,re,pe,Be,$e,at,wt,It,Vt},Ee.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Se(this._nodes.keys(),this._nodes.size)},Ee.forEachNode=function(V){if("function"!=typeof V)throw new Pe("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(re,pe){V(pe,re.attributes)})},Ee.forEachNodeUntil=function(V){if("function"!=typeof V)throw new Pe("Graph.forEachNode: expecting a callback.");for(var re,pe,Be=this._nodes.values();!0!==(re=Be.next())&&!V((pe=re.value).key,pe.attributes););},Ee.nodeEntries=function(){var V=this._nodes.values();return new Ye(function(){var re=V.next();if(re.done)return re;var pe=re.value;return{value:[pe.key,pe.attributes],done:!1}})},Ee.exportNode=function(V){var re=this._nodes.get(V=""+V);if(!re)throw new ze('Graph.exportNode: could not find the "'.concat(V,'" node in the graph.'));return Gc(V,re)},Ee.exportEdge=function(V){var re=this._edges.get(V=""+V);if(!re)throw new ze('Graph.exportEdge: could not find the "'.concat(V,'" edge in the graph.'));return Zu(V,re)},Ee.export=function(){var V=new Array(this._nodes.size),re=0;this._nodes.forEach(function(Be,$e){V[re++]=Gc($e,Be)});var pe=new Array(this._edges.size);return re=0,this._edges.forEach(function(Be,$e){pe[re++]=Zu($e,Be)}),{attributes:this.getAttributes(),nodes:V,edges:pe,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},Ee.importNode=function(V){var re=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pe=function Wc(be){return N(be)?"key"in be?!("attributes"in be)||N(be.attributes)&&null!==be.attributes?null:"invalid-attributes":"no-key":"not-object"}(V);if(pe){if("not-object"===pe)throw new Pe('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===pe)throw new Pe("Graph.importNode: no key provided.");if("invalid-attributes"===pe)throw new Pe("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Be=V.key,$e=V.attributes,at=void 0===$e?{}:$e;return re?this.mergeNode(Be,at):this.addNode(Be,at),this},Ee.importEdge=function(V){var re=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pe=function $c(be){return N(be)?"source"in be?"target"in be?!("attributes"in be)||N(be.attributes)&&null!==be.attributes?"undirected"in be&&"boolean"!=typeof be.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(V);if(pe){if("not-object"===pe)throw new Pe('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===pe)throw new Pe("Graph.importEdge: missing souce.");if("no-target"===pe)throw new Pe("Graph.importEdge: missing target.");if("invalid-attributes"===pe)throw new Pe("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===pe)throw new Pe("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Be=V.source,$e=V.target,at=V.attributes,wt=void 0===at?{}:at,It=V.undirected,Vt=void 0!==It&&It;return"key"in V?(re?Vt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Vt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,V.key,Be,$e,wt):(re?Vt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Vt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Be,$e,wt),this},Ee.import=function(V){var re,pe,Be,$e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function U(be){return null!==be&&"object"===Z(be)&&"function"==typeof be.addUndirectedEdgeWithKey&&"function"==typeof be.dropNode}(V))return this.import(V.export(),$e),this;if(!N(V))throw new Pe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(V.attributes){if(!N(V.attributes))throw new Pe("Graph.import: invalid attributes. Expecting a plain object.");$e?this.mergeAttributes(V.attributes):this.replaceAttributes(V.attributes)}if(V.nodes){if(Be=V.nodes,!Array.isArray(Be))throw new Pe("Graph.import: invalid nodes. Expecting an array.");for(re=0,pe=Be.length;re<pe;re++)this.importNode(Be[re],$e)}if(V.edges){if(Be=V.edges,!Array.isArray(Be))throw new Pe("Graph.import: invalid edges. Expecting an array.");for(re=0,pe=Be.length;re<pe;re++)this.importEdge(Be[re],$e)}return this},Ee.nullCopy=function(V){return new Me(y({},this._options,V))},Ee.emptyCopy=function(V){var re=this.nullCopy(V);return this._nodes.forEach(function(pe,Be){var $e=y({},pe.attributes);pe=new re.NodeDataClass(Be,$e),re._nodes.set(Be,pe)}),re},Ee.copy=function(){var V=new Me(this._options);return V.import(this),V},Ee.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(V){return V.upgradeToMixed()}),this._options.type="mixed",k(this,"type",this._options.type),le(this,"NodeDataClass",Ce)),this},Ee.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,k(this,"multi",!0),(V=this)._nodes.forEach(function(re,pe){if(re.out)for(var Be in re.out){var $e=new Set;$e.add(re.out[Be]),re.out[Be]=$e,V._nodes.get(Be).in[pe]=$e}if(re.undirected)for(var at in re.undirected)if(!(at>pe)){var wt=new Set;wt.add(re.undirected[at]),re.undirected[at]=wt,V._nodes.get(at).undirected[pe]=wt}})),this;var V},Ee.clearIndex=function(){return this._nodes.forEach(function(V){void 0!==V.in&&(V.in={},V.out={}),void 0!==V.undirected&&(V.undirected={})}),this},Ee.toJSON=function(){return this.export()},Ee.toString=function(){return"[object Graph]"},Ee.inspect=function(){var V=this,re={};this._nodes.forEach(function(wt,It){re[It]=wt.attributes});var pe={},Be={};this._edges.forEach(function(wt,It){var Vt=wt.undirected?"--":"->",tn="",gn="(".concat(wt.source.key,")").concat(Vt,"(").concat(wt.target.key,")");wt.generatedKey?V.multi&&(void 0===Be[gn]?Be[gn]=0:Be[gn]++,tn+="".concat(Be[gn],". ")):tn+="[".concat(It,"]: "),pe[tn+=gn]=wt.attributes});var $e={};for(var at in this)this.hasOwnProperty(at)&&!Xc.has(at)&&"function"!=typeof this[at]&&($e[at]=this[at]);return $e.attributes=this._attributes,$e.nodes=re,$e.edges=pe,le($e,"constructor",this.constructor),$e},Me}(Y.exports.EventEmitter);typeof Symbol<"u"&&(vi.prototype[Symbol.for("nodejs.util.inspect.custom")]=vi.prototype.inspect),[{name:function(be){return"".concat(be,"Edge")},generateKey:!0},{name:function(be){return"".concat(be,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(be){return"".concat(be,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(be){return"".concat(be,"EdgeWithKey")}},{name:function(be){return"".concat(be,"DirectedEdgeWithKey")},type:"directed"},{name:function(be){return"".concat(be,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(be){["add","merge","update"].forEach(function(Me){var Ee=be.name(Me),V="add"===Me?Bl:Yc;vi.prototype[Ee]=be.generateKey?function(re,pe,Be){return V(this,Ee,!0,"undirected"===(be.type||this.type),null,re,pe,Be,"update"===Me)}:function(re,pe,Be,$e){return V(this,Ee,!1,"undirected"===(be.type||this.type),re,pe,Be,$e,"update"===Me)}})}),typeof Symbol<"u"&&(vi.prototype[Symbol.iterator]=vi.prototype.adjacency),be=vi,I.forEach(function(Me){var Ee=Me.name,V=Me.attacher;V(be,Ee("Edge"),"mixed"),V(be,Ee("DirectedEdge"),"directed"),V(be,Ee("UndirectedEdge"),"undirected")}),function(be){Le.forEach(function(Me){var V,re,pe,Be;pe=(V=Me).type,Be=V.direction,be.prototype[re=V.name]=function($e,at){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return[];if(!arguments.length)return function on(be,Me){if(0===be.size)return[];if("mixed"===Me||Me===be.type)return"function"==typeof Array.from?Array.from(be._edges.keys()):Se(be._edges.keys(),be._edges.size);for(var Ee,V,pe=new Array("undirected"===Me?be.undirectedSize:be.directedSize),Be="undirected"===Me,$e=be._edges.values(),at=0;!0!==(Ee=$e.next()).done;)(V=Ee.value).undirected===Be&&(pe[at++]=V.key);return pe}(this,pe);if(1===arguments.length){var wt=this._nodes.get($e=""+$e);if(void 0===wt)throw new ze("Graph.".concat(re,': could not find the "').concat($e,'" node in the graph.'));return function se(be,Me,Ee,V){var re=[],pe=be?me:Ve;return"undirected"!==Me&&("out"!==Ee&&pe(re,V.in),"in"!==Ee&&pe(re,V.out),!Ee&&V.directedSelfLoops>0&&re.splice(re.lastIndexOf(V.key),1)),"directed"!==Me&&pe(re,V.undirected),re}(this.multi,"mixed"===pe?this.type:pe,Be,wt)}if(2===arguments.length){at=""+at;var It=this._nodes.get($e=""+$e);if(!It)throw new ze("Graph.".concat(re,':  could not find the "').concat($e,'" source node in the graph.'));if(!this._nodes.has(at))throw new ze("Graph.".concat(re,':  could not find the "').concat(at,'" target node in the graph.'));return function $t(be,Me,Ee,V,re){var pe=Me?Ge:ue,Be=[];return"undirected"!==be&&(void 0!==V.in&&"out"!==Ee&&pe(Be,V.in,re),void 0!==V.out&&"in"!==Ee&&pe(Be,V.out,re),!Ee&&V.directedSelfLoops>0&&Be.splice(Be.lastIndexOf(V.key),1)),"directed"!==be&&void 0!==V.undirected&&pe(Be,V.undirected,re),Be}(pe,this.multi,Be,It,at)}throw new Pe("Graph.".concat(re,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(Ee,V){var re=V.name,pe=V.type,Be=V.direction,$e="forEach"+re[0].toUpperCase()+re.slice(1,-1);Ee.prototype[$e]=function(at,wt,It){if("mixed"===pe||"mixed"===this.type||pe===this.type){if(1===arguments.length)return function Re(be,Me,Ee){if(0!==be.size)for(var V,re,pe="mixed"!==Me&&Me!==be.type,Be="undirected"===Me,$e=be._edges.values();!0!==(V=$e.next()).done;)if(re=V.value,!pe||re.undirected===Be){var Vt=re.source,tn=re.target;Ee(re.key,re.attributes,Vt.key,tn.key,Vt.attributes,tn.attributes,re.undirected,re.generatedKey)}}(this,pe,It=at);if(2===arguments.length){It=wt;var Vt=this._nodes.get(at=""+at);if(void 0===Vt)throw new ze("Graph.".concat($e,': could not find the "').concat(at,'" node in the graph.'));return function We(be,Me,Ee,V,re){var pe=be?W:Q;"undirected"!==Me&&("out"!==Ee&&pe(V.in,re),"in"!==Ee&&pe(V.out,re,Ee?null:V.key)),"directed"!==Me&&pe(V.undirected,re)}(this.multi,"mixed"===pe?this.type:pe,Be,Vt,It)}if(3===arguments.length){wt=""+wt;var tn=this._nodes.get(at=""+at);if(!tn)throw new ze("Graph.".concat($e,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(wt))throw new ze("Graph.".concat($e,':  could not find the "').concat(wt,'" target node in the graph.'));return function sn(be,Me,Ee,V,re,pe){var Be=Me?ft:qe;"undirected"!==be&&(void 0!==V.in&&"out"!==Ee&&Be(V.in,re,pe),V.key!==re&&void 0!==V.out&&"in"!==Ee&&Be(V.out,re,pe)),"directed"!==be&&void 0!==V.undirected&&Be(V.undirected,re,pe)}(pe,this.multi,Be,tn,wt,It)}throw new Pe("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(be,Me),function(Ee,V){var re=V.name,pe=V.type,Be=V.direction,$e="forEach"+re[0].toUpperCase()+re.slice(1,-1)+"Until";Ee.prototype[$e]=function(at,wt,It){if("mixed"===pe||"mixed"===this.type||pe===this.type){if(1===arguments.length)return function J(be,Me,Ee){if(0!==be.size)for(var V,re,pe="mixed"!==Me&&Me!==be.type,Be="undirected"===Me,$e=be._edges.values();!0!==(V=$e.next()).done;)if(re=V.value,!pe||re.undirected===Be){var Vt=re.source,tn=re.target;if(Ee(re.key,re.attributes,Vt.key,tn.key,Vt.attributes,tn.attributes,re.undirected,re.generatedKey))break}}(this,pe,It=at);if(2===arguments.length){It=wt;var Vt=this._nodes.get(at=""+at);if(void 0===Vt)throw new ze("Graph.".concat($e,': could not find the "').concat(at,'" node in the graph.'));return function Ze(be,Me,Ee,V,re){var pe=be?O:C;"undirected"!==Me&&("out"!==Ee&&pe(V.in,re)||"in"!==Ee&&pe(V.out,re,Ee?null:V.key))||"directed"===Me||pe(V.undirected,re)}(this.multi,"mixed"===pe?this.type:pe,Be,Vt,It)}if(3===arguments.length){wt=""+wt;var tn=this._nodes.get(at=""+at);if(!tn)throw new ze("Graph.".concat($e,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(wt))throw new ze("Graph.".concat($e,':  could not find the "').concat(wt,'" target node in the graph.'));return function $n(be,Me,Ee,V,re,pe){var Be=Me?dt:Pt;"undirected"!==be&&(void 0!==V.in&&"out"!==Ee&&Be(V.in,re,pe)||V.key!==re&&void 0!==V.out&&"in"!==Ee&&Be(V.out,re,pe,Ee?null:V.key))||"directed"===be||void 0===V.undirected||Be(V.undirected,re,pe)}(pe,this.multi,Be,tn,wt,It)}throw new Pe("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(be,Me),function(Ee,V){var pe=V.type,Be=V.direction,$e=V.name.slice(0,-1)+"Entries";Ee.prototype[$e]=function(at,wt){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return Ye.empty();if(!arguments.length)return function S(be,Me){if(0===be.size)return Ye.empty();var Ee="mixed"!==Me&&Me!==be.type,V="undirected"===Me,re=be._edges.values();return new Ye(function(){for(var pe,Be;;){if((pe=re.next()).done)return pe;if(Be=pe.value,!Ee||Be.undirected===V)break}return{value:[Be.key,Be.attributes,Be.source.key,Be.target.key,Be.source.attributes,Be.target.attributes],done:!1}})}(this,pe);if(1===arguments.length){var It=this._nodes.get(at=""+at);if(!It)throw new ze("Graph.".concat($e,': could not find the "').concat(at,'" node in the graph.'));return function ct(be,Me,Ee){var V=Ye.empty();return"undirected"!==be&&("out"!==Me&&void 0!==Ee.in&&(V=K(V,he(Ee.in))),"in"!==Me&&void 0!==Ee.out&&(V=K(V,he(Ee.out,Me?null:Ee.key)))),"directed"!==be&&void 0!==Ee.undirected&&(V=K(V,he(Ee.undirected))),V}(pe,Be,It)}if(2===arguments.length){wt=""+wt;var Vt=this._nodes.get(at=""+at);if(!Vt)throw new ze("Graph.".concat($e,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(wt))throw new ze("Graph.".concat($e,':  could not find the "').concat(wt,'" target node in the graph.'));return function Xn(be,Me,Ee,V){var re=Ye.empty();return"undirected"!==be&&(void 0!==Ee.in&&"out"!==Me&&V in Ee.in&&(re=K(re,Gt(Ee.in,V))),void 0!==Ee.out&&"in"!==Me&&V in Ee.out&&(re=K(re,Gt(Ee.out,V)))),"directed"!==be&&void 0!==Ee.undirected&&V in Ee.undirected&&(re=K(re,Gt(Ee.undirected,V))),re}(pe,Be,Vt,wt)}throw new Pe("Graph.".concat($e,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(be,Me)})}(vi),function(be){In.forEach(function(Me){var V,re,pe,Be;pe=(V=Me).type,Be=V.direction,be.prototype[re=V.name]=function($e){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return[];if(2===arguments.length){var at=""+arguments[0],wt=""+arguments[1];if(!this._nodes.has(at))throw new ze("Graph.".concat(re,': could not find the "').concat(at,'" node in the graph.'));if(!this._nodes.has(wt))throw new ze("Graph.".concat(re,': could not find the "').concat(wt,'" node in the graph.'));return function po(be,Me,Ee,V,re){var pe=be._nodes.get(V);if("undirected"!==Me){if("out"!==Ee&&void 0!==pe.in)for(var Be in pe.in)if(Be===re)return!0;if("in"!==Ee&&void 0!==pe.out)for(var $e in pe.out)if($e===re)return!0}if("directed"!==Me&&void 0!==pe.undirected)for(var at in pe.undirected)if(at===re)return!0;return!1}(this,pe,Be,at,wt)}if(1===arguments.length){var It=this._nodes.get($e=""+$e);if(void 0===It)throw new ze("Graph.".concat(re,': could not find the "').concat($e,'" node in the graph.'));return function Lr(be,Me,Ee){if("mixed"!==be){if("undirected"===be)return Object.keys(Ee.undirected);if("string"==typeof Me)return Object.keys(Ee[Me])}var V=new Set;return"undirected"!==be&&("out"!==Me&&Io(V,Ee.in),"in"!==Me&&Io(V,Ee.out)),"directed"!==be&&Io(V,Ee.undirected),Se(V.values(),V.size)}("mixed"===pe?this.type:pe,Be,It)}throw new Pe("Graph.".concat(re,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function Nd(be,Me){var Ee=Me.name,V=Me.type,re=Me.direction,pe="forEach"+Ee[0].toUpperCase()+Ee.slice(1,-1);be.prototype[pe]=function(Be,$e){if("mixed"===V||"mixed"===this.type||V===this.type){var at=this._nodes.get(Be=""+Be);if(void 0===at)throw new ze("Graph.".concat(pe,': could not find the "').concat(Be,'" node in the graph.'));!function(wt,It,Vt,tn){if("mixed"!==wt){if("undirected"===wt)return Do(Vt,Vt.undirected,tn);if("string"==typeof It)return Do(Vt,Vt[It],tn)}var gn=new Set;"undirected"!==wt&&("out"!==It&&qi(gn,Vt,Vt.in,tn),"in"!==It&&qi(gn,Vt,Vt.out,tn)),"directed"!==wt&&qi(gn,Vt,Vt.undirected,tn)}("mixed"===V?this.type:V,re,at,$e)}}}(be,Me),function qu(be,Me){var Ee=Me.name,V=Me.type,re=Me.direction,pe="forEach"+Ee[0].toUpperCase()+Ee.slice(1,-1)+"Until";be.prototype[pe]=function(Be,$e){if("mixed"===V||"mixed"===this.type||V===this.type){var at=this._nodes.get(Be=""+Be);if(void 0===at)throw new ze("Graph.".concat(pe,': could not find the "').concat(Be,'" node in the graph.'));!function(wt,It,Vt,tn){if("mixed"!==wt){if("undirected"===wt)return Br(Vt,Vt.undirected,tn);if("string"==typeof It)return Br(Vt,Vt[It],tn)}var gn=new Set;"undirected"!==wt&&("out"!==It&&ms(gn,Vt,Vt.in,tn)||"in"!==It&&ms(gn,Vt,Vt.out,tn))||"directed"===wt||ms(gn,Vt,Vt.undirected,tn)}("mixed"===V?this.type:V,re,at,$e)}}}(be,Me),function Ju(be,Me){var V=Me.type,re=Me.direction,pe=Me.name.slice(0,-1)+"Entries";be.prototype[pe]=function(Be){if("mixed"!==V&&"mixed"!==this.type&&V!==this.type)return Ye.empty();var $e=this._nodes.get(Be=""+Be);if(void 0===$e)throw new ze("Graph.".concat(pe,': could not find the "').concat(Be,'" node in the graph.'));return function(at,wt,It){if("mixed"!==at){if("undirected"===at)return Ls(It,It.undirected);if("string"==typeof wt)return Ls(It,It[wt])}var Vt=Ye.empty(),tn=new Set;return"undirected"!==at&&("out"!==wt&&(Vt=K(Vt,Ro(tn,It,It.in))),"in"!==wt&&(Vt=K(Vt,Ro(tn,It,It.out)))),"directed"!==at&&(Vt=K(Vt,Ro(tn,It,It.undirected))),Vt}("mixed"===V?this.type:V,re,$e)}}(be,Me)})}(vi);var cc=function(be){function Me(Ee){var V=y({type:"directed"},Ee);if("multi"in V&&!1!==V.multi)throw new Pe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==V.type)throw new Pe('DirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return be.call(this,V)||this}return g(Me,be),Me}(vi),xi=function(be){function Me(Ee){var V=y({type:"undirected"},Ee);if("multi"in V&&!1!==V.multi)throw new Pe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==V.type)throw new Pe('UndirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return be.call(this,V)||this}return g(Me,be),Me}(vi),Ra=function(be){function Me(Ee){var V=y({multi:!0},Ee);if("multi"in V&&!0!==V.multi)throw new Pe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return be.call(this,V)||this}return g(Me,be),Me}(vi),ka=function(be){function Me(Ee){var V=y({type:"directed",multi:!0},Ee);if("multi"in V&&!0!==V.multi)throw new Pe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==V.type)throw new Pe('MultiDirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return be.call(this,V)||this}return g(Me,be),Me}(vi),lc=function(be){function Me(Ee){var V=y({type:"undirected",multi:!0},Ee);if("multi"in V&&!0!==V.multi)throw new Pe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==V.type)throw new Pe('MultiUndirectedGraph.from: inconsistent "'+V.type+'" type in given options!');return be.call(this,V)||this}return g(Me,be),Me}(vi);function ko(be){be.from=function(Me,Ee){var V=y({},Me.options,Ee),re=new be(V);return re.import(Me),re}}return ko(vi),ko(cc),ko(xi),ko(Ra),ko(ka),ko(lc),vi.Graph=vi,vi.DirectedGraph=cc,vi.UndirectedGraph=xi,vi.MultiGraph=Ra,vi.MultiDirectedGraph=ka,vi.MultiUndirectedGraph=lc,vi.InvalidArgumentsGraphError=Pe,vi.NotFoundGraphError=ze,vi.UsageGraphError=ge,vi}()},7271:(ne,Z,g)=>{var E;!function(b,R,A,P){"use strict";var Y,_=["","webkit","Moz","MS","ms","o"],y=R.createElement("div"),M="function",U=Math.round,N=Math.abs,j=Date.now;function le(ke,Ue,Je){return setTimeout(H(ke,Je),Ue)}function k(ke,Ue,Je){return!!Array.isArray(ke)&&(X(ke,Je[Ue],Je),!0)}function X(ke,Ue,Je){var pt;if(ke)if(ke.forEach)ke.forEach(Ue,Je);else if(ke.length!==P)for(pt=0;pt<ke.length;)Ue.call(Je,ke[pt],pt,ke),pt++;else for(pt in ke)ke.hasOwnProperty(pt)&&Ue.call(Je,ke[pt],pt,ke)}function ce(ke,Ue,Je){var pt="DEPRECATED METHOD: "+Ue+"\n"+Je+" AT \n";return function(){var Bt=new Error("get-stack-trace"),jt=Bt&&Bt.stack?Bt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yn=b.console&&(b.console.warn||b.console.log);return Yn&&Yn.call(b.console,pt,jt),ke.apply(this,arguments)}}Y="function"!=typeof Object.assign?function(Ue){if(Ue===P||null===Ue)throw new TypeError("Cannot convert undefined or null to object");for(var Je=Object(Ue),pt=1;pt<arguments.length;pt++){var Bt=arguments[pt];if(Bt!==P&&null!==Bt)for(var jt in Bt)Bt.hasOwnProperty(jt)&&(Je[jt]=Bt[jt])}return Je}:Object.assign;var oe=ce(function(Ue,Je,pt){for(var Bt=Object.keys(Je),jt=0;jt<Bt.length;)(!pt||pt&&Ue[Bt[jt]]===P)&&(Ue[Bt[jt]]=Je[Bt[jt]]),jt++;return Ue},"extend","Use `assign`."),ie=ce(function(Ue,Je){return oe(Ue,Je,!0)},"merge","Use `assign`.");function $(ke,Ue,Je){var Bt,pt=Ue.prototype;(Bt=ke.prototype=Object.create(pt)).constructor=ke,Bt._super=pt,Je&&Y(Bt,Je)}function H(ke,Ue){return function(){return ke.apply(Ue,arguments)}}function v(ke,Ue){return typeof ke==M?ke.apply(Ue&&Ue[0]||P,Ue):ke}function L(ke,Ue){return ke===P?Ue:ke}function T(ke,Ue,Je){X(de(Ue),function(pt){ke.addEventListener(pt,Je,!1)})}function fe(ke,Ue,Je){X(de(Ue),function(pt){ke.removeEventListener(pt,Je,!1)})}function z(ke,Ue){for(;ke;){if(ke==Ue)return!0;ke=ke.parentNode}return!1}function Te(ke,Ue){return ke.indexOf(Ue)>-1}function de(ke){return ke.trim().split(/\s+/g)}function we(ke,Ue,Je){if(ke.indexOf&&!Je)return ke.indexOf(Ue);for(var pt=0;pt<ke.length;){if(Je&&ke[pt][Je]==Ue||!Je&&ke[pt]===Ue)return pt;pt++}return-1}function Ie(ke){return Array.prototype.slice.call(ke,0)}function De(ke,Ue,Je){for(var pt=[],Bt=[],jt=0;jt<ke.length;){var Yn=Ue?ke[jt][Ue]:ke[jt];we(Bt,Yn)<0&&pt.push(ke[jt]),Bt[jt]=Yn,jt++}return Je&&(pt=Ue?pt.sort(function(br,io){return br[Ue]>io[Ue]}):pt.sort()),pt}function tt(ke,Ue){for(var Je,pt,Bt=Ue[0].toUpperCase()+Ue.slice(1),jt=0;jt<_.length;){if((pt=(Je=_[jt])?Je+Bt:Ue)in ke)return pt;jt++}return P}var Ye=1;function Fe(ke){var Ue=ke.ownerDocument||ke;return Ue.defaultView||Ue.parentWindow||b}var ze="ontouchstart"in b,ge=tt(b,"PointerEvent")!==P,Ce=ze&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ke="touch",Qe="mouse",B=25,I=1,K=4,Le=8,Ve=1,me=2,Q=4,W=8,C=16,O=me|Q,he=W|C,ue=O|he,Ge=["x","y"],qe=["clientX","clientY"];function ft(ke,Ue){var Je=this;this.manager=ke,this.callback=Ue,this.element=ke.element,this.target=ke.options.inputTarget,this.domHandler=function(pt){v(ke.options.enable,[ke])&&Je.handler(pt)},this.init()}function dt(ke,Ue,Je){var pt=Je.pointers.length,Bt=Je.changedPointers.length,jt=Ue&I&&pt-Bt==0,Yn=Ue&(K|Le)&&pt-Bt==0;Je.isFirst=!!jt,Je.isFinal=!!Yn,jt&&(ke.session={}),Je.eventType=Ue,function Gt(ke,Ue){var Je=ke.session,pt=Ue.pointers,Bt=pt.length;Je.firstInput||(Je.firstInput=J(Ue)),Bt>1&&!Je.firstMultiple?Je.firstMultiple=J(Ue):1===Bt&&(Je.firstMultiple=!1);var jt=Je.firstInput,Yn=Je.firstMultiple,ri=Yn?Yn.center:jt.center,br=Ue.center=S(pt);Ue.timeStamp=j(),Ue.deltaTime=Ue.timeStamp-jt.timeStamp,Ue.angle=ct(ri,br),Ue.distance=Ze(ri,br),function on(ke,Ue){var Je=Ue.center,pt=ke.offsetDelta||{},Bt=ke.prevDelta||{},jt=ke.prevInput||{};(Ue.eventType===I||jt.eventType===K)&&(Bt=ke.prevDelta={x:jt.deltaX||0,y:jt.deltaY||0},pt=ke.offsetDelta={x:Je.x,y:Je.y}),Ue.deltaX=Bt.x+(Je.x-pt.x),Ue.deltaY=Bt.y+(Je.y-pt.y)}(Je,Ue),Ue.offsetDirection=We(Ue.deltaX,Ue.deltaY);var io=se(Ue.deltaTime,Ue.deltaX,Ue.deltaY);Ue.overallVelocityX=io.x,Ue.overallVelocityY=io.y,Ue.overallVelocity=N(io.x)>N(io.y)?io.x:io.y,Ue.scale=Yn?function sn(ke,Ue){return Ze(Ue[0],Ue[1],qe)/Ze(ke[0],ke[1],qe)}(Yn.pointers,pt):1,Ue.rotation=Yn?function $t(ke,Ue){return ct(Ue[1],Ue[0],qe)+ct(ke[1],ke[0],qe)}(Yn.pointers,pt):0,Ue.maxPointers=Je.prevInput?Ue.pointers.length>Je.prevInput.maxPointers?Ue.pointers.length:Je.prevInput.maxPointers:Ue.pointers.length,function Re(ke,Ue){var Bt,jt,Yn,ri,Je=ke.lastInterval||Ue,pt=Ue.timeStamp-Je.timeStamp;if(Ue.eventType!=Le&&(pt>B||Je.velocity===P)){var br=Ue.deltaX-Je.deltaX,io=Ue.deltaY-Je.deltaY,zn=se(pt,br,io);jt=zn.x,Yn=zn.y,Bt=N(zn.x)>N(zn.y)?zn.x:zn.y,ri=We(br,io),ke.lastInterval=Ue}else Bt=Je.velocity,jt=Je.velocityX,Yn=Je.velocityY,ri=Je.direction;Ue.velocity=Bt,Ue.velocityX=jt,Ue.velocityY=Yn,Ue.direction=ri}(Je,Ue);var zn=ke.element;z(Ue.srcEvent.target,zn)&&(zn=Ue.srcEvent.target),Ue.target=zn}(ke,Je),ke.emit("hammer.input",Je),ke.recognize(Je),ke.session.prevInput=Je}function J(ke){for(var Ue=[],Je=0;Je<ke.pointers.length;)Ue[Je]={clientX:U(ke.pointers[Je].clientX),clientY:U(ke.pointers[Je].clientY)},Je++;return{timeStamp:j(),pointers:Ue,center:S(Ue),deltaX:ke.deltaX,deltaY:ke.deltaY}}function S(ke){var Ue=ke.length;if(1===Ue)return{x:U(ke[0].clientX),y:U(ke[0].clientY)};for(var Je=0,pt=0,Bt=0;Bt<Ue;)Je+=ke[Bt].clientX,pt+=ke[Bt].clientY,Bt++;return{x:U(Je/Ue),y:U(pt/Ue)}}function se(ke,Ue,Je){return{x:Ue/ke||0,y:Je/ke||0}}function We(ke,Ue){return ke===Ue?Ve:N(ke)>=N(Ue)?ke<0?me:Q:Ue<0?W:C}function Ze(ke,Ue,Je){Je||(Je=Ge);var pt=Ue[Je[0]]-ke[Je[0]],Bt=Ue[Je[1]]-ke[Je[1]];return Math.sqrt(pt*pt+Bt*Bt)}function ct(ke,Ue,Je){return Je||(Je=Ge),180*Math.atan2(Ue[Je[1]]-ke[Je[1]],Ue[Je[0]]-ke[Je[0]])/Math.PI}ft.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(Fe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&fe(this.element,this.evEl,this.domHandler),this.evTarget&&fe(this.target,this.evTarget,this.domHandler),this.evWin&&fe(Fe(this.element),this.evWin,this.domHandler)}};var $n={mousedown:I,mousemove:2,mouseup:K},Xn="mousedown",In="mousemove mouseup";function Io(){this.evEl=Xn,this.evWin=In,this.pressed=!1,ft.apply(this,arguments)}$(Io,ft,{handler:function(Ue){var Je=$n[Ue.type];Je&I&&0===Ue.button&&(this.pressed=!0),2&Je&&1!==Ue.which&&(Je=K),this.pressed&&(Je&K&&(this.pressed=!1),this.callback(this.manager,Je,{pointers:[Ue],changedPointers:[Ue],pointerType:Qe,srcEvent:Ue}))}});var Lr={pointerdown:I,pointermove:2,pointerup:K,pointercancel:Le,pointerout:Le},Do={2:Ke,3:"pen",4:Qe,5:"kinect"},qi="pointerdown",Br="pointermove pointerup pointercancel";function ms(){this.evEl=qi,this.evWin=Br,ft.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b.MSPointerEvent&&!b.PointerEvent&&(qi="MSPointerDown",Br="MSPointerMove MSPointerUp MSPointerCancel"),$(ms,ft,{handler:function(Ue){var Je=this.store,pt=!1,Bt=Ue.type.toLowerCase().replace("ms",""),jt=Lr[Bt],Yn=Do[Ue.pointerType]||Ue.pointerType,ri=Yn==Ke,br=we(Je,Ue.pointerId,"pointerId");jt&I&&(0===Ue.button||ri)?br<0&&(Je.push(Ue),br=Je.length-1):jt&(K|Le)&&(pt=!0),!(br<0)&&(Je[br]=Ue,this.callback(this.manager,jt,{pointers:Je,changedPointers:[Ue],pointerType:Yn,srcEvent:Ue}),pt&&Je.splice(br,1))}});var Ls={touchstart:I,touchmove:2,touchend:K,touchcancel:Le};function Nd(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,ft.apply(this,arguments)}function qu(ke,Ue){var Je=Ie(ke.touches),pt=Ie(ke.changedTouches);return Ue&(K|Le)&&(Je=De(Je.concat(pt),"identifier",!0)),[Je,pt]}$(Nd,ft,{handler:function(Ue){var Je=Ls[Ue.type];if(Je===I&&(this.started=!0),this.started){var pt=qu.call(this,Ue,Je);Je&(K|Le)&&pt[0].length-pt[1].length==0&&(this.started=!1),this.callback(this.manager,Je,{pointers:pt[0],changedPointers:pt[1],pointerType:Ke,srcEvent:Ue})}}});var Ju={touchstart:I,touchmove:2,touchend:K,touchcancel:Le},zc="touchstart touchmove touchend touchcancel";function ac(){this.evTarget=zc,this.targetIds={},ft.apply(this,arguments)}function Gc(ke,Ue){var Je=Ie(ke.touches),pt=this.targetIds;if(Ue&(2|I)&&1===Je.length)return pt[Je[0].identifier]=!0,[Je,Je];var Bt,jt,Yn=Ie(ke.changedTouches),ri=[],br=this.target;if(jt=Je.filter(function(io){return z(io.target,br)}),Ue===I)for(Bt=0;Bt<jt.length;)pt[jt[Bt].identifier]=!0,Bt++;for(Bt=0;Bt<Yn.length;)pt[Yn[Bt].identifier]&&ri.push(Yn[Bt]),Ue&(K|Le)&&delete pt[Yn[Bt].identifier],Bt++;return ri.length?[De(jt.concat(ri),"identifier",!0),ri]:void 0}$(ac,ft,{handler:function(Ue){var Je=Ju[Ue.type],pt=Gc.call(this,Ue,Je);pt&&this.callback(this.manager,Je,{pointers:pt[0],changedPointers:pt[1],pointerType:Ke,srcEvent:Ue})}});var Zu=2500;function $c(){ft.apply(this,arguments);var ke=H(this.handler,this);this.touch=new ac(this.manager,ke),this.mouse=new Io(this.manager,ke),this.primaryTouch=null,this.lastTouches=[]}function Fd(ke,Ue){ke&I?(this.primaryTouch=Ue.changedPointers[0].identifier,Xc.call(this,Ue)):ke&(K|Le)&&Xc.call(this,Ue)}function Xc(ke){var Ue=ke.changedPointers[0];if(Ue.identifier===this.primaryTouch){var Je={x:Ue.clientX,y:Ue.clientY};this.lastTouches.push(Je);var pt=this.lastTouches;setTimeout(function(){var jt=pt.indexOf(Je);jt>-1&&pt.splice(jt,1)},Zu)}}function Ld(ke){for(var Ue=ke.srcEvent.clientX,Je=ke.srcEvent.clientY,pt=0;pt<this.lastTouches.length;pt++){var Bt=this.lastTouches[pt],jt=Math.abs(Ue-Bt.x),Yn=Math.abs(Je-Bt.y);if(jt<=25&&Yn<=25)return!0}return!1}$($c,ft,{handler:function(Ue,Je,pt){var jt=pt.pointerType==Qe;if(!(jt&&pt.sourceCapabilities&&pt.sourceCapabilities.firesTouchEvents)){if(pt.pointerType==Ke)Fd.call(this,Je,pt);else if(jt&&Ld.call(this,pt))return;this.callback(Ue,Je,pt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ll=tt(y.style,"touchAction"),Bl=Ll!==P,Yc="compute",cc="manipulation",xi="none",Ra="pan-x",ka="pan-y",lc=function Me(){if(!Bl)return!1;var ke={},Ue=b.CSS&&b.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Je){ke[Je]=!Ue||b.CSS.supports("touch-action",Je)}),ke}();function ko(ke,Ue){this.manager=ke,this.set(Ue)}ko.prototype={set:function(ke){ke==Yc&&(ke=this.compute()),Bl&&this.manager.element.style&&lc[ke]&&(this.manager.element.style[Ll]=ke),this.actions=ke.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ke=[];return X(this.manager.recognizers,function(Ue){v(Ue.options.enable,[Ue])&&(ke=ke.concat(Ue.getTouchAction()))}),function be(ke){if(Te(ke,xi))return xi;var Ue=Te(ke,Ra),Je=Te(ke,ka);return Ue&&Je?xi:Ue||Je?Ue?Ra:ka:Te(ke,cc)?cc:"auto"}(ke.join(" "))},preventDefaults:function(ke){var Ue=ke.srcEvent,Je=ke.offsetDirection;if(!this.manager.session.prevented){var pt=this.actions,Bt=Te(pt,xi)&&!lc[xi],jt=Te(pt,ka)&&!lc[ka],Yn=Te(pt,Ra)&&!lc[Ra];if(Bt&&1===ke.pointers.length&&ke.distance<2&&ke.deltaTime<250)return;return Yn&&jt||!(Bt||jt&&Je&O||Yn&&Je&he)?void 0:this.preventSrc(Ue)}Ue.preventDefault()},preventSrc:function(ke){this.manager.session.prevented=!0,ke.preventDefault()}};var Ee=1;function wt(ke){this.options=Y({},this.defaults,ke||{}),this.id=function Se(){return Ye++}(),this.manager=null,this.options.enable=L(this.options.enable,!0),this.state=Ee,this.simultaneous={},this.requireFail=[]}function It(ke){return 16&ke?"cancel":8&ke?"end":4&ke?"move":2&ke?"start":""}function Vt(ke){return ke==C?"down":ke==W?"up":ke==me?"left":ke==Q?"right":""}function tn(ke,Ue){var Je=Ue.manager;return Je?Je.get(ke):ke}function gn(){wt.apply(this,arguments)}function mo(){gn.apply(this,arguments),this.pX=null,this.pY=null}function Sr(){gn.apply(this,arguments)}function go(){wt.apply(this,arguments),this._timer=null,this._input=null}function Kc(){gn.apply(this,arguments)}function ia(){gn.apply(this,arguments)}function jr(){wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Oo(ke,Ue){return(Ue=Ue||{}).recognizers=L(Ue.recognizers,Oo.defaults.preset),new Bs(ke,Ue)}function Bs(ke,Ue){this.options=Y({},Oo.defaults,Ue||{}),this.options.inputTarget=this.options.inputTarget||ke,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ke,this.input=function Pt(ke){return new(ke.options.inputClass||(ge?ms:Ce?ac:ze?$c:Io))(ke,dt)}(this),this.touchAction=new ko(this,this.options.touchAction),Pi(this,!0),X(this.options.recognizers,function(Je){var pt=this.add(new Je[0](Je[1]));Je[2]&&pt.recognizeWith(Je[2]),Je[3]&&pt.requireFailure(Je[3])},this)}function Pi(ke,Ue){var pt,Je=ke.element;Je.style&&(X(ke.options.cssProps,function(Bt,jt){pt=tt(Je.style,jt),Ue?(ke.oldCssProps[pt]=Je.style[pt],Je.style[pt]=Bt):Je.style[pt]=ke.oldCssProps[pt]||""}),Ue||(ke.oldCssProps={}))}wt.prototype={defaults:{},set:function(ke){return Y(this.options,ke),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ke){if(k(ke,"recognizeWith",this))return this;var Ue=this.simultaneous;return Ue[(ke=tn(ke,this)).id]||(Ue[ke.id]=ke,ke.recognizeWith(this)),this},dropRecognizeWith:function(ke){return k(ke,"dropRecognizeWith",this)||(ke=tn(ke,this),delete this.simultaneous[ke.id]),this},requireFailure:function(ke){if(k(ke,"requireFailure",this))return this;var Ue=this.requireFail;return-1===we(Ue,ke=tn(ke,this))&&(Ue.push(ke),ke.requireFailure(this)),this},dropRequireFailure:function(ke){if(k(ke,"dropRequireFailure",this))return this;ke=tn(ke,this);var Ue=we(this.requireFail,ke);return Ue>-1&&this.requireFail.splice(Ue,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ke){return!!this.simultaneous[ke.id]},emit:function(ke){var Ue=this,Je=this.state;function pt(Bt){Ue.manager.emit(Bt,ke)}Je<8&&pt(Ue.options.event+It(Je)),pt(Ue.options.event),ke.additionalEvent&&pt(ke.additionalEvent),Je>=8&&pt(Ue.options.event+It(Je))},tryEmit:function(ke){if(this.canEmit())return this.emit(ke);this.state=32},canEmit:function(){for(var ke=0;ke<this.requireFail.length;){if(!(this.requireFail[ke].state&(32|Ee)))return!1;ke++}return!0},recognize:function(ke){var Ue=Y({},ke);if(!v(this.options.enable,[this,Ue]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Ee),this.state=this.process(Ue),30&this.state&&this.tryEmit(Ue)},process:function(ke){},getTouchAction:function(){},reset:function(){}},$(gn,wt,{defaults:{pointers:1},attrTest:function(ke){var Ue=this.options.pointers;return 0===Ue||ke.pointers.length===Ue},process:function(ke){var Ue=this.state,Je=ke.eventType,pt=6&Ue,Bt=this.attrTest(ke);return pt&&(Je&Le||!Bt)?16|Ue:pt||Bt?Je&K?8|Ue:2&Ue?4|Ue:2:32}}),$(mo,gn,{defaults:{event:"pan",threshold:10,pointers:1,direction:ue},getTouchAction:function(){var ke=this.options.direction,Ue=[];return ke&O&&Ue.push(ka),ke&he&&Ue.push(Ra),Ue},directionTest:function(ke){var Ue=this.options,Je=!0,pt=ke.distance,Bt=ke.direction,jt=ke.deltaX,Yn=ke.deltaY;return Bt&Ue.direction||(Ue.direction&O?(Bt=0===jt?Ve:jt<0?me:Q,Je=jt!=this.pX,pt=Math.abs(ke.deltaX)):(Bt=0===Yn?Ve:Yn<0?W:C,Je=Yn!=this.pY,pt=Math.abs(ke.deltaY))),ke.direction=Bt,Je&&pt>Ue.threshold&&Bt&Ue.direction},attrTest:function(ke){return gn.prototype.attrTest.call(this,ke)&&(2&this.state||!(2&this.state)&&this.directionTest(ke))},emit:function(ke){this.pX=ke.deltaX,this.pY=ke.deltaY;var Ue=Vt(ke.direction);Ue&&(ke.additionalEvent=this.options.event+Ue),this._super.emit.call(this,ke)}}),$(Sr,gn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xi]},attrTest:function(ke){return this._super.attrTest.call(this,ke)&&(Math.abs(ke.scale-1)>this.options.threshold||2&this.state)},emit:function(ke){1!==ke.scale&&(ke.additionalEvent=this.options.event+(ke.scale<1?"in":"out")),this._super.emit.call(this,ke)}}),$(go,wt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(ke){var Ue=this.options,Je=ke.pointers.length===Ue.pointers,pt=ke.distance<Ue.threshold,Bt=ke.deltaTime>Ue.time;if(this._input=ke,!pt||!Je||ke.eventType&(K|Le)&&!Bt)this.reset();else if(ke.eventType&I)this.reset(),this._timer=le(function(){this.state=8,this.tryEmit()},Ue.time,this);else if(ke.eventType&K)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(ke){8===this.state&&(ke&&ke.eventType&K?this.manager.emit(this.options.event+"up",ke):(this._input.timeStamp=j(),this.manager.emit(this.options.event,this._input)))}}),$(Kc,gn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xi]},attrTest:function(ke){return this._super.attrTest.call(this,ke)&&(Math.abs(ke.rotation)>this.options.threshold||2&this.state)}}),$(ia,gn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:O|he,pointers:1},getTouchAction:function(){return mo.prototype.getTouchAction.call(this)},attrTest:function(ke){var Je,Ue=this.options.direction;return Ue&(O|he)?Je=ke.overallVelocity:Ue&O?Je=ke.overallVelocityX:Ue&he&&(Je=ke.overallVelocityY),this._super.attrTest.call(this,ke)&&Ue&ke.offsetDirection&&ke.distance>this.options.threshold&&ke.maxPointers==this.options.pointers&&N(Je)>this.options.velocity&&ke.eventType&K},emit:function(ke){var Ue=Vt(ke.offsetDirection);Ue&&this.manager.emit(this.options.event+Ue,ke),this.manager.emit(this.options.event,ke)}}),$(jr,wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[cc]},process:function(ke){var Ue=this.options,Je=ke.pointers.length===Ue.pointers,pt=ke.distance<Ue.threshold,Bt=ke.deltaTime<Ue.time;if(this.reset(),ke.eventType&I&&0===this.count)return this.failTimeout();if(pt&&Bt&&Je){if(ke.eventType!=K)return this.failTimeout();var jt=!this.pTime||ke.timeStamp-this.pTime<Ue.interval,Yn=!this.pCenter||Ze(this.pCenter,ke.center)<Ue.posThreshold;if(this.pTime=ke.timeStamp,this.pCenter=ke.center,Yn&&jt?this.count+=1:this.count=1,this._input=ke,0==this.count%Ue.taps)return this.hasRequireFailures()?(this._timer=le(function(){this.state=8,this.tryEmit()},Ue.interval,this),2):8}return 32},failTimeout:function(){return this._timer=le(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Oo.VERSION="2.0.7",Oo.defaults={domEvents:!1,touchAction:Yc,enable:!0,inputTarget:null,inputClass:null,preset:[[Kc,{enable:!1}],[Sr,{enable:!1},["rotate"]],[ia,{direction:O}],[mo,{direction:O},["swipe"]],[jr],[jr,{event:"doubletap",taps:2},["tap"]],[go]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Bs.prototype={set:function(ke){return Y(this.options,ke),ke.touchAction&&this.touchAction.update(),ke.inputTarget&&(this.input.destroy(),this.input.target=ke.inputTarget,this.input.init()),this},stop:function(ke){this.session.stopped=ke?2:1},recognize:function(ke){var Ue=this.session;if(!Ue.stopped){this.touchAction.preventDefaults(ke);var Je,pt=this.recognizers,Bt=Ue.curRecognizer;(!Bt||Bt&&8&Bt.state)&&(Bt=Ue.curRecognizer=null);for(var jt=0;jt<pt.length;)Je=pt[jt],2===Ue.stopped||Bt&&Je!=Bt&&!Je.canRecognizeWith(Bt)?Je.reset():Je.recognize(ke),!Bt&&14&Je.state&&(Bt=Ue.curRecognizer=Je),jt++}},get:function(ke){if(ke instanceof wt)return ke;for(var Ue=this.recognizers,Je=0;Je<Ue.length;Je++)if(Ue[Je].options.event==ke)return Ue[Je];return null},add:function(ke){if(k(ke,"add",this))return this;var Ue=this.get(ke.options.event);return Ue&&this.remove(Ue),this.recognizers.push(ke),ke.manager=this,this.touchAction.update(),ke},remove:function(ke){if(k(ke,"remove",this))return this;if(ke=this.get(ke)){var Ue=this.recognizers,Je=we(Ue,ke);-1!==Je&&(Ue.splice(Je,1),this.touchAction.update())}return this},on:function(ke,Ue){if(ke!==P&&Ue!==P){var Je=this.handlers;return X(de(ke),function(pt){Je[pt]=Je[pt]||[],Je[pt].push(Ue)}),this}},off:function(ke,Ue){if(ke!==P){var Je=this.handlers;return X(de(ke),function(pt){Ue?Je[pt]&&Je[pt].splice(we(Je[pt],Ue),1):delete Je[pt]}),this}},emit:function(ke,Ue){this.options.domEvents&&function no(ke,Ue){var Je=R.createEvent("Event");Je.initEvent(ke,!0,!0),Je.gesture=Ue,Ue.target.dispatchEvent(Je)}(ke,Ue);var Je=this.handlers[ke]&&this.handlers[ke].slice();if(Je&&Je.length){Ue.type=ke,Ue.preventDefault=function(){Ue.srcEvent.preventDefault()};for(var pt=0;pt<Je.length;)Je[pt](Ue),pt++}},destroy:function(){this.element&&Pi(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Y(Oo,{INPUT_START:I,INPUT_MOVE:2,INPUT_END:K,INPUT_CANCEL:Le,STATE_POSSIBLE:Ee,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Ve,DIRECTION_LEFT:me,DIRECTION_RIGHT:Q,DIRECTION_UP:W,DIRECTION_DOWN:C,DIRECTION_HORIZONTAL:O,DIRECTION_VERTICAL:he,DIRECTION_ALL:ue,Manager:Bs,Input:ft,TouchAction:ko,TouchInput:ac,MouseInput:Io,PointerEventInput:ms,TouchMouseInput:$c,SingleTouchInput:Nd,Recognizer:wt,AttrRecognizer:gn,Tap:jr,Pan:mo,Swipe:ia,Pinch:Sr,Rotate:Kc,Press:go,on:T,off:fe,each:X,merge:ie,extend:oe,assign:Y,inherit:$,bindFn:H,prefixed:tt}),(typeof b<"u"?b:typeof self<"u"?self:{}).Hammer=Oo,(E=function(){return Oo}.call(Z,g,Z,ne))!==P&&(ne.exports=E)}(window,document)},2601:(ne,Z)=>{Z.read=function(g,E,b,R,A){var P,_,y=8*A-R-1,M=(1<<y)-1,U=M>>1,N=-7,j=b?A-1:0,le=b?-1:1,k=g[E+j];for(j+=le,P=k&(1<<-N)-1,k>>=-N,N+=y;N>0;P=256*P+g[E+j],j+=le,N-=8);for(_=P&(1<<-N)-1,P>>=-N,N+=R;N>0;_=256*_+g[E+j],j+=le,N-=8);if(0===P)P=1-U;else{if(P===M)return _?NaN:1/0*(k?-1:1);_+=Math.pow(2,R),P-=U}return(k?-1:1)*_*Math.pow(2,P-R)},Z.write=function(g,E,b,R,A,P){var _,y,M,U=8*P-A-1,N=(1<<U)-1,j=N>>1,le=23===A?Math.pow(2,-24)-Math.pow(2,-77):0,k=R?0:P-1,X=R?1:-1,ce=E<0||0===E&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(y=isNaN(E)?1:0,_=N):(_=Math.floor(Math.log(E)/Math.LN2),E*(M=Math.pow(2,-_))<1&&(_--,M*=2),(E+=_+j>=1?le/M:le*Math.pow(2,1-j))*M>=2&&(_++,M/=2),_+j>=N?(y=0,_=N):_+j>=1?(y=(E*M-1)*Math.pow(2,A),_+=j):(y=E*Math.pow(2,j-1)*Math.pow(2,A),_=0));A>=8;g[b+k]=255&y,k+=X,y/=256,A-=8);for(_=_<<A|y,U+=A;U>0;g[b+k]=255&_,k+=X,_/=256,U-=8);g[b+k-X]|=128*ce}},6698:ne=>{ne.exports="function"==typeof Object.create?function(g,E){E&&(g.super_=E,g.prototype=Object.create(E.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,E){if(E){g.super_=E;var b=function(){};b.prototype=E.prototype,g.prototype=new b,g.prototype.constructor=g}}},4198:(ne,Z,g)=>{"use strict";var E=g(7156).default;const{isArray:b,isObject:R,isString:A}=g(8254),{asArray:P}=g(3521),{prependBase:_}=g(2651),y=g(1874),M=g(1252);function N(le){throw new y("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:le})}function j({context:le,base:k}){if(!le)return;const X=le["@context"];if(A(X))le["@context"]=_(k,X);else if(b(X))for(let ce=0;ce<X.length;++ce){const Y=X[ce];A(Y)?X[ce]=_(k,Y):R(Y)&&j({context:{"@context":Y},base:k})}else if(R(X))for(const ce in X)j({context:X[ce],base:k})}ne.exports=class{constructor({sharedCache:k}){this.perOpCache=new Map,this.sharedCache=k}resolve({activeCtx:k,context:X,documentLoader:ce,base:Y,cycles:oe=new Set}){var ie=this;return E(function*(){X&&R(X)&&X["@context"]&&(X=X["@context"]),X=P(X);const $=[];for(const H of X){if(A(H)){let T=ie._get(H);T||(T=yield ie._resolveRemoteContext({activeCtx:k,url:H,documentLoader:ce,base:Y,cycles:oe})),b(T)?$.push(...T):$.push(T);continue}if(null===H){$.push(new M({document:null}));continue}R(H)||N(X);const v=JSON.stringify(H);let L=ie._get(v);L||(L=new M({document:H}),ie._cacheResolvedContext({key:v,resolved:L,tag:"static"})),$.push(L)}return $})()}_get(k){let X=this.perOpCache.get(k);if(!X){const ce=this.sharedCache.get(k);ce&&(X=ce.get("static"),X&&this.perOpCache.set(k,X))}return X}_cacheResolvedContext({key:k,resolved:X,tag:ce}){if(this.perOpCache.set(k,X),void 0!==ce){let Y=this.sharedCache.get(k);Y||(Y=new Map,this.sharedCache.set(k,Y)),Y.set(ce,X)}return X}_resolveRemoteContext({activeCtx:k,url:X,documentLoader:ce,base:Y,cycles:oe}){var ie=this;return E(function*(){X=_(Y,X);const{context:$,remoteDoc:H}=yield ie._fetchContext({activeCtx:k,url:X,documentLoader:ce,cycles:oe});j({context:$,base:Y=H.documentUrl||X});const v=yield ie.resolve({activeCtx:k,context:$,documentLoader:ce,base:Y,cycles:oe});return ie._cacheResolvedContext({key:X,resolved:v,tag:H.tag}),v})()}_fetchContext({activeCtx:k,url:X,documentLoader:ce,cycles:Y}){return E(function*(){if(Y.size>10)throw new y("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===k.processingMode?"loading remote context failed":"context overflow",max:10});if(Y.has(X))throw new y("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===k.processingMode?"recursive context inclusion":"context overflow",url:X});let oe,ie;Y.add(X);try{ie=yield ce(X),oe=ie.document||null,A(oe)&&(oe=JSON.parse(oe))}catch($){throw new y("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:X,cause:$})}if(!R(oe))throw new y("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:X});return oe="@context"in oe?{"@context":oe["@context"]}:{"@context":{}},ie.contextUrl&&(b(oe["@context"])||(oe["@context"]=[oe["@context"]]),oe["@context"].push(ie.contextUrl)),{context:oe,remoteDoc:ie}})()}}},1874:ne=>{"use strict";ne.exports=class extends Error{constructor(g="An unspecified JSON-LD error occurred.",E="jsonld.Error",b={}){super(g),this.name=E,this.message=g,this.details=b}}},1828:ne=>{"use strict";ne.exports=Z=>{class g{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(g,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(g.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:g}),g.compact=function(E,b){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Z.compact(E,b)},g.expand=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Z.expand(E)},g.flatten=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Z.flatten(E)},g}},7260:(ne,Z,g)=>{"use strict";ne.exports=g(1986).NQuads},4044:(ne,Z,g)=>{"use strict";var E=g(7156).default;ne.exports=class{constructor(){this._requests={}}wrapLoader(R){const A=this;return A._loader=R,function(){return A.add.apply(A,arguments)}}add(R){var A=this;return E(function*(){let P=A._requests[R];if(P)return Promise.resolve(P);P=A._requests[R]=A._loader(R);try{return yield P}finally{delete A._requests[R]}})()}}},1252:(ne,Z,g)=>{"use strict";const E=g(1072);ne.exports=class{constructor({document:A}){this.document=A,this.cache=new E({max:10})}getProcessed(A){return this.cache.get(A)}setProcessed(A,P){this.cache.set(A,P)}}},8809:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),{isArray:R,isObject:A,isString:P,isUndefined:_}=g(8254),{isList:y,isValue:M,isGraph:U,isSimpleGraph:N,isSubjectReference:j}=g(543),{expandIri:le,getContextValue:k,isKeyword:X,process:ce,processingMode:Y}=g(9611),{removeBase:oe,prependBase:ie}=g(2651),{REGEX_KEYWORD:$,addValue:H,asArray:v,compareShortestLeast:L}=g(3521),T={};function z(Te,de,we){if("@nest"!==le(Te,de,{vocab:!0},we))throw new b("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ne.exports=T,T.compact=function(){var Te=E(function*({activeCtx:de,activeProperty:we=null,element:Ie,options:De={}}){if(R(Ie)){let Ye=[];for(let Se=0;Se<Ie.length;++Se){const Fe=yield T.compact({activeCtx:de,activeProperty:we,element:Ie[Se],options:De});null!==Fe&&Ye.push(Fe)}return De.compactArrays&&1===Ye.length&&0===(k(de,we,"@container")||[]).length&&(Ye=Ye[0]),Ye}const tt=k(de,we,"@context");if(_(tt)||(de=yield ce({activeCtx:de,localCtx:tt,propagate:!0,overrideProtected:!0,options:De})),A(Ie)){if(De.link&&"@id"in Ie&&De.link.hasOwnProperty(Ie["@id"])){const Ke=De.link[Ie["@id"]];for(let st=0;st<Ke.length;++st)if(Ke[st].expanded===Ie)return Ke[st].compacted}if(M(Ie)||j(Ie)){const Ke=T.compactValue({activeCtx:de,activeProperty:we,value:Ie,options:De});return De.link&&j(Ie)&&(De.link.hasOwnProperty(Ie["@id"])||(De.link[Ie["@id"]]=[]),De.link[Ie["@id"]].push({expanded:Ie,compacted:Ke})),Ke}if(y(Ie)&&(k(de,we,"@container")||[]).includes("@list"))return T.compact({activeCtx:de,activeProperty:we,element:Ie["@list"],options:De});const Ye="@reverse"===we,Se={},Fe=de;!M(Ie)&&!j(Ie)&&(de=de.revertToPreviousContext());const Pe=k(Fe,we,"@context");_(Pe)||(de=yield ce({activeCtx:de,localCtx:Pe,propagate:!0,overrideProtected:!0,options:De})),De.link&&"@id"in Ie&&(De.link.hasOwnProperty(Ie["@id"])||(De.link[Ie["@id"]]=[]),De.link[Ie["@id"]].push({expanded:Ie,compacted:Se}));let ze=Ie["@type"]||[];ze.length>1&&(ze=Array.from(ze).sort());const ge=de;for(const Ke of ze){const st=T.compactIri({activeCtx:ge,iri:Ke,relativeTo:{vocab:!0}}),Qe=k(Fe,st,"@context");_(Qe)||(de=yield ce({activeCtx:de,localCtx:Qe,options:De,propagate:!1}))}const Ce=Object.keys(Ie).sort();for(const Ke of Ce){const st=Ie[Ke];if("@id"!==Ke)if("@type"!==Ke)if("@reverse"!==Ke)if("@preserve"!==Ke)if("@index"!==Ke)if("@graph"!==Ke&&"@list"!==Ke&&"@included"!==Ke&&X(Ke)){const Qe=T.compactIri({activeCtx:de,iri:Ke,relativeTo:{vocab:!0}});H(Se,Qe,st)}else{if(!R(st))throw new b("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===st.length){const Qe=T.compactIri({activeCtx:de,iri:Ke,value:st,relativeTo:{vocab:!0},reverse:Ye}),_e=de.mappings.has(Qe)?de.mappings.get(Qe)["@nest"]:null;let B=Se;_e&&(z(de,_e,De),A(Se[_e])||(Se[_e]={}),B=Se[_e]),H(B,Qe,st,{propertyIsArray:!0})}for(const Qe of st){const _e=T.compactIri({activeCtx:de,iri:Ke,value:Qe,relativeTo:{vocab:!0},reverse:Ye}),B=de.mappings.has(_e)?de.mappings.get(_e)["@nest"]:null;let I=Se;B&&(z(de,B,De),A(Se[B])||(Se[B]={}),I=Se[B]);const ae=k(de,_e,"@container")||[],K=U(Qe),Le=y(Qe);let Ve;Le?Ve=Qe["@list"]:K&&(Ve=Qe["@graph"]);let me=yield T.compact({activeCtx:de,activeProperty:_e,element:Le||K?Ve:Qe,options:De});if(Le){if(R(me)||(me=[me]),ae.includes("@list")){H(I,_e,me,{valueIsArray:!0,allowDuplicate:!0});continue}me={[T.compactIri({activeCtx:de,iri:"@list",relativeTo:{vocab:!0}})]:me},"@index"in Qe&&(me[T.compactIri({activeCtx:de,iri:"@index",relativeTo:{vocab:!0}})]=Qe["@index"])}if(K)if(ae.includes("@graph")&&(ae.includes("@id")||ae.includes("@index")&&N(Qe))){let Q;I.hasOwnProperty(_e)?Q=I[_e]:I[_e]=Q={};const W=(ae.includes("@id")?Qe["@id"]:Qe["@index"])||T.compactIri({activeCtx:de,iri:"@none",relativeTo:{vocab:!0}});H(Q,W,me,{propertyIsArray:!De.compactArrays||ae.includes("@set")})}else ae.includes("@graph")&&N(Qe)?(R(me)&&me.length>1&&(me={"@included":me}),H(I,_e,me,{propertyIsArray:!De.compactArrays||ae.includes("@set")})):(R(me)&&1===me.length&&De.compactArrays&&(me=me[0]),me={[T.compactIri({activeCtx:de,iri:"@graph",relativeTo:{vocab:!0}})]:me},"@id"in Qe&&(me[T.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}})]=Qe["@id"]),"@index"in Qe&&(me[T.compactIri({activeCtx:de,iri:"@index",relativeTo:{vocab:!0}})]=Qe["@index"]),H(I,_e,me,{propertyIsArray:!De.compactArrays||ae.includes("@set")}));else if(ae.includes("@language")||ae.includes("@index")||ae.includes("@id")||ae.includes("@type")){let Q,W;if(I.hasOwnProperty(_e)?Q=I[_e]:I[_e]=Q={},ae.includes("@language"))M(me)&&(me=me["@value"]),W=Qe["@language"];else if(ae.includes("@index")){const C=k(de,_e,"@index")||"@index",O=T.compactIri({activeCtx:de,iri:C,relativeTo:{vocab:!0}});if("@index"===C)W=Qe["@index"],delete me[O];else{let he;if([W,...he]=v(me[C]||[]),P(W))switch(he.length){case 0:delete me[C];break;case 1:me[C]=he[0];break;default:me[C]=he}else W=null}}else if(ae.includes("@id")){const C=T.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}});W=me[C],delete me[C]}else if(ae.includes("@type")){const C=T.compactIri({activeCtx:de,iri:"@type",relativeTo:{vocab:!0}});let O;switch([W,...O]=v(me[C]||[]),O.length){case 0:delete me[C];break;case 1:me[C]=O[0];break;default:me[C]=O}1===Object.keys(me).length&&"@id"in Qe&&(me=yield T.compact({activeCtx:de,activeProperty:_e,element:{"@id":Qe["@id"]},options:De}))}W||(W=T.compactIri({activeCtx:de,iri:"@none",relativeTo:{vocab:!0}})),H(Q,W,me,{propertyIsArray:ae.includes("@set")})}else{const Q=!De.compactArrays||ae.includes("@set")||ae.includes("@list")||R(me)&&0===me.length||"@list"===Ke||"@graph"===Ke;H(I,_e,me,{propertyIsArray:Q})}}}else{if((k(de,we,"@container")||[]).includes("@index"))continue;const _e=T.compactIri({activeCtx:de,iri:Ke,relativeTo:{vocab:!0}});H(Se,_e,st)}else{const Qe=yield T.compact({activeCtx:de,activeProperty:we,element:st,options:De});R(Qe)&&0===Qe.length||H(Se,Ke,Qe)}else{const Qe=yield T.compact({activeCtx:de,activeProperty:"@reverse",element:st,options:De});for(const _e in Qe)if(de.mappings.has(_e)&&de.mappings.get(_e).reverse){const B=Qe[_e],ae=(k(de,_e,"@container")||[]).includes("@set")||!De.compactArrays;H(Se,_e,B,{propertyIsArray:ae}),delete Qe[_e]}if(Object.keys(Qe).length>0){const _e=T.compactIri({activeCtx:de,iri:Ke,relativeTo:{vocab:!0}});H(Se,_e,Qe)}}else{let Qe=v(st).map(K=>T.compactIri({activeCtx:Fe,iri:K,relativeTo:{vocab:!0}}));1===Qe.length&&(Qe=Qe[0]);const _e=T.compactIri({activeCtx:de,iri:"@type",relativeTo:{vocab:!0}}),ae=(k(de,_e,"@container")||[]).includes("@set")&&Y(de,1.1)||R(Qe)&&0===st.length;H(Se,_e,Qe,{propertyIsArray:ae})}else{let Qe=v(st).map(B=>T.compactIri({activeCtx:de,iri:B,relativeTo:{vocab:!1},base:De.base}));1===Qe.length&&(Qe=Qe[0]),Se[T.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}})]=Qe}}return Se}return Ie});return function(de){return Te.apply(this,arguments)}}(),T.compactIri=({activeCtx:Te,iri:de,value:we=null,relativeTo:Ie={vocab:!1},reverse:De=!1,base:tt=null})=>{if(null===de)return de;Te.isPropertyTermScoped&&Te.previousContext&&(Te=Te.previousContext);const Ye=Te.getInverse();if(X(de)&&de in Ye&&"@none"in Ye[de]&&"@type"in Ye[de]["@none"]&&"@none"in Ye[de]["@none"]["@type"])return Ye[de]["@none"]["@type"]["@none"];if(Ie.vocab&&de in Ye){const ge=Te["@language"]||"@none",Ce=[];A(we)&&"@index"in we&&!("@graph"in we)&&Ce.push("@index","@index@set"),A(we)&&"@preserve"in we&&(we=we["@preserve"][0]),U(we)?("@index"in we&&Ce.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in we&&Ce.push("@graph@id","@graph@id@set"),Ce.push("@graph","@graph@set","@set"),"@index"in we||Ce.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in we||Ce.push("@graph@id","@graph@id@set")):A(we)&&!M(we)&&Ce.push("@id","@id@set","@type","@set@type");let Ke="@language",st="@null";if(De)Ke="@type",st="@reverse",Ce.push("@set");else if(y(we)){"@index"in we||Ce.push("@list");const _e=we["@list"];if(0===_e.length)Ke="@any",st="@none";else{let B=0===_e.length?ge:null,I=null;for(let ae=0;ae<_e.length;++ae){const K=_e[ae];let Le="@none",Ve="@none";if(M(K)?"@direction"in K?Le=`${(K["@language"]||"").toLowerCase()}_${K["@direction"]}`:"@language"in K?Le=K["@language"].toLowerCase():"@type"in K?Ve=K["@type"]:Le="@null":Ve="@id",null===B?B=Le:Le!==B&&M(K)&&(B="@none"),null===I?I=Ve:Ve!==I&&(I="@none"),"@none"===B&&"@none"===I)break}B=B||"@none",I=I||"@none","@none"!==I?(Ke="@type",st=I):st=B}}else{if(M(we))if("@language"in we&&!("@index"in we)){Ce.push("@language","@language@set"),st=we["@language"];const _e=we["@direction"];_e&&(st=`${st}_${_e}`)}else"@direction"in we&&!("@index"in we)?st=`_${we["@direction"]}`:"@type"in we&&(Ke="@type",st=we["@type"]);else Ke="@type",st="@id";Ce.push("@set")}Ce.push("@none"),A(we)&&!("@index"in we)&&Ce.push("@index","@index@set"),M(we)&&1===Object.keys(we).length&&Ce.push("@language","@language@set");const Qe=function fe(Te,de,we,Ie,De,tt){null===tt&&(tt="@null");const Ye=[];if(("@id"===tt||"@reverse"===tt)&&A(we)&&"@id"in we){"@reverse"===tt&&Ye.push("@reverse");const Fe=T.compactIri({activeCtx:Te,iri:we["@id"],relativeTo:{vocab:!0}});Te.mappings.has(Fe)&&Te.mappings.get(Fe)&&Te.mappings.get(Fe)["@id"]===we["@id"]?Ye.push.apply(Ye,["@vocab","@id"]):Ye.push.apply(Ye,["@id","@vocab"])}else{Ye.push(tt);const Fe=Ye.find(Pe=>Pe.includes("_"));Fe&&Ye.push(Fe.replace(/^[^_]+_/,"_"))}Ye.push("@none");const Se=Te.inverse[de];for(const Fe of Ie){if(!(Fe in Se))continue;const Pe=Se[Fe][De];for(const ze of Ye)if(ze in Pe)return Pe[ze]}return null}(Te,de,we,Ce,Ke,st);if(null!==Qe)return Qe}if(Ie.vocab&&"@vocab"in Te){const ge=Te["@vocab"];if(0===de.indexOf(ge)&&de!==ge){const Ce=de.substr(ge.length);if(!Te.mappings.has(Ce))return Ce}}let Se=null;const Fe=[];let Pe=Te.fastCurieMap;const ze=de.length-1;for(let ge=0;ge<ze&&de[ge]in Pe;++ge)Pe=Pe[de[ge]],""in Pe&&Fe.push(Pe[""][0]);for(let ge=Fe.length-1;ge>=0;--ge){const Ce=Fe[ge],Ke=Ce.terms;for(const st of Ke){const Qe=st+":"+de.substr(Ce.iri.length);Te.mappings.get(st)._prefix&&(!Te.mappings.has(Qe)||null===we&&Te.mappings.get(Qe)["@id"]===de)&&(null===Se||L(Qe,Se)<0)&&(Se=Qe)}}if(null!==Se)return Se;for(const[ge,Ce]of Te.mappings)if(Ce&&Ce._prefix&&de.startsWith(ge+":"))throw new b(`Absolute IRI "${de}" confused with prefix "${ge}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Te});if(!Ie.vocab){if("@base"in Te){if(Te["@base"]){const ge=oe(ie(tt,Te["@base"]),de);return $.test(ge)?`./${ge}`:ge}return de}return oe(tt,de)}return de},T.compactValue=({activeCtx:Te,activeProperty:de,value:we,options:Ie})=>{if(M(we)){const Se=k(Te,de,"@type"),Fe=k(Te,de,"@language"),Pe=k(Te,de,"@direction"),ze=k(Te,de,"@container")||[],ge="@index"in we&&!ze.includes("@index");if(!ge&&"@none"!==Se&&(we["@type"]===Se||"@language"in we&&we["@language"]===Fe&&"@direction"in we&&we["@direction"]===Pe||"@language"in we&&we["@language"]===Fe||"@direction"in we&&we["@direction"]===Pe))return we["@value"];const Ce=Object.keys(we).length,Ke=1===Ce||2===Ce&&"@index"in we&&!ge,st="@language"in Te,Qe=P(we["@value"]),_e=Te.mappings.has(de)&&null===Te.mappings.get(de)["@language"];if(Ke&&"@none"!==Se&&(!st||!Qe||_e))return we["@value"];const B={};return ge&&(B[T.compactIri({activeCtx:Te,iri:"@index",relativeTo:{vocab:!0}})]=we["@index"]),"@type"in we?B[T.compactIri({activeCtx:Te,iri:"@type",relativeTo:{vocab:!0}})]=T.compactIri({activeCtx:Te,iri:we["@type"],relativeTo:{vocab:!0}}):"@language"in we&&(B[T.compactIri({activeCtx:Te,iri:"@language",relativeTo:{vocab:!0}})]=we["@language"]),"@direction"in we&&(B[T.compactIri({activeCtx:Te,iri:"@direction",relativeTo:{vocab:!0}})]=we["@direction"]),B[T.compactIri({activeCtx:Te,iri:"@value",relativeTo:{vocab:!0}})]=we["@value"],B}const De=le(Te,de,{vocab:!0},Ie),tt=k(Te,de,"@type"),Ye=T.compactIri({activeCtx:Te,iri:we["@id"],relativeTo:{vocab:"@vocab"===tt},base:Ie.base});return"@id"===tt||"@vocab"===tt||"@graph"===De?Ye:{[T.compactIri({activeCtx:Te,iri:"@id",relativeTo:{vocab:!0}})]:Ye}}},6982:ne=>{"use strict";const Z="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g="http://www.w3.org/2001/XMLSchema#";ne.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Z,RDF_LIST:Z+"List",RDF_FIRST:Z+"first",RDF_REST:Z+"rest",RDF_NIL:Z+"nil",RDF_TYPE:Z+"type",RDF_PLAIN_LITERAL:Z+"PlainLiteral",RDF_XML_LITERAL:Z+"XMLLiteral",RDF_JSON_LITERAL:Z+"JSON",RDF_OBJECT:Z+"object",RDF_LANGSTRING:Z+"langString",XSD:g,XSD_BOOLEAN:g+"boolean",XSD_DOUBLE:g+"double",XSD_INTEGER:g+"integer",XSD_STRING:g+"string"}},9611:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(3521),R=g(1874),{isArray:A,isObject:P,isString:_,isUndefined:y}=g(8254),{isAbsolute:M,isRelative:U,prependBase:N}=g(2651),{handleEvent:j}=g(3855),{REGEX_BCP47:le,REGEX_KEYWORD:k,asArray:X,compareShortestLeast:ce}=g(3521),Y=new Map,ie={};function $(v,L,T,fe,z,Te){if(null===L||!_(L)||ie.isKeyword(L))return L;if(L.match(k))return null;if(fe&&fe.hasOwnProperty(L)&&!0!==z.get(L)&&ie.createTermDefinition({activeCtx:v,localCtx:fe,term:L,defined:z,options:Te}),(T=T||{}).vocab){const we=v.mappings.get(L);if(null===we)return null;if(P(we)&&"@id"in we)return we["@id"]}const de=L.indexOf(":");if(de>0){const we=L.substr(0,de),Ie=L.substr(de+1);if("_"===we||0===Ie.indexOf("//"))return L;fe&&fe.hasOwnProperty(we)&&ie.createTermDefinition({activeCtx:v,localCtx:fe,term:we,defined:z,options:Te});const De=v.mappings.get(we);if(De&&De._prefix)return De["@id"]+Ie;if(M(L))return L}if(T.vocab&&"@vocab"in v)L=v["@vocab"]+L;else if(T.base){let we,Ie;"@base"in v?v["@base"]?(Ie=N(Te.base,v["@base"]),we=N(Ie,L)):(Ie=v["@base"],we=L):(Ie=Te.base,we=N(Te.base,L)),L=we}return L}function H(v,L){if(!v||"object"!=typeof v||!L||"object"!=typeof L)return v===L;const T=Array.isArray(v);if(T!==Array.isArray(L))return!1;if(T){if(v.length!==L.length)return!1;for(let Te=0;Te<v.length;++Te)if(!H(v[Te],L[Te]))return!1;return!0}const fe=Object.keys(v),z=Object.keys(L);if(fe.length!==z.length)return!1;for(const Te in v){let de=v[Te],we=L[Te];if("@container"===Te&&Array.isArray(de)&&Array.isArray(we)&&(de=de.slice().sort(),we=we.slice().sort()),!H(de,we))return!1}return!0}ne.exports=ie,ie.process=function(){var v=E(function*({activeCtx:L,localCtx:T,options:fe,propagate:z=!0,overrideProtected:Te=!1,cycles:de=new Set}){if(P(T)&&"@context"in T&&A(T["@context"])&&(T=T["@context"]),0===X(T).length)return L;const Ie=[],De=[({event:Fe,next:Pe})=>{Ie.push(Fe),Pe()}];fe.eventHandler&&De.push(fe.eventHandler);const tt=fe;fe={...fe,eventHandler:De};const Ye=yield fe.contextResolver.resolve({activeCtx:L,context:T,documentLoader:fe.documentLoader,base:fe.base});P(Ye[0].document)&&"boolean"==typeof Ye[0].document["@propagate"]&&(z=Ye[0].document["@propagate"]);let Se=L;!z&&!Se.previousContext&&(Se=Se.clone(),Se.previousContext=L);for(const Fe of Ye){let{document:Pe}=Fe;if(L=Se,null===Pe){if(!Te&&0!==Object.keys(L.protected).length)throw new R("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Se=L=ie.getInitialContext(fe).clone();continue}const ze=Fe.getProcessed(L);if(ze){if(tt.eventHandler)for(const Ce of ze.events)j({event:Ce,options:tt});Se=L=ze.context;continue}if(P(Pe)&&"@context"in Pe&&(Pe=Pe["@context"]),!P(Pe))throw new R("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Pe});Se=Se.clone();const ge=new Map;if("@version"in Pe){if(1.1!==Pe["@version"])throw new R("Unsupported JSON-LD version: "+Pe["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Pe});if(L.processingMode&&"json-ld-1.0"===L.processingMode)throw new R("@version: "+Pe["@version"]+" not compatible with "+L.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Pe});Se.processingMode="json-ld-1.1",Se["@version"]=Pe["@version"],ge.set("@version",!0)}if(Se.processingMode=Se.processingMode||L.processingMode,"@base"in Pe){let Ce=Pe["@base"];if(null!==Ce&&!M(Ce)){if(!U(Ce))throw new R('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Pe});Ce=N(Se["@base"],Ce)}Se["@base"]=Ce,ge.set("@base",!0)}if("@vocab"in Pe){const Ce=Pe["@vocab"];if(null===Ce)delete Se["@vocab"];else{if(!_(Ce))throw new R('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Pe});if(!M(Ce)&&ie.processingMode(Se,1))throw new R('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Pe});{const Ke=$(Se,Ce,{vocab:!0,base:!0},void 0,void 0,fe);M(Ke)||fe.eventHandler&&j({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Ke}},options:fe}),Se["@vocab"]=Ke}}ge.set("@vocab",!0)}if("@language"in Pe){const Ce=Pe["@language"];if(null===Ce)delete Se["@language"];else{if(!_(Ce))throw new R('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Pe});Ce.match(le)||fe.eventHandler&&j({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ce}},options:fe}),Se["@language"]=Ce.toLowerCase()}ge.set("@language",!0)}if("@direction"in Pe){const Ce=Pe["@direction"];if("json-ld-1.0"===L.processingMode)throw new R("Invalid JSON-LD syntax; @direction not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Pe});if(null===Ce)delete Se["@direction"];else{if("ltr"!==Ce&&"rtl"!==Ce)throw new R('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Pe});Se["@direction"]=Ce}ge.set("@direction",!0)}if("@propagate"in Pe){const Ce=Pe["@propagate"];if("json-ld-1.0"===L.processingMode)throw new R("Invalid JSON-LD syntax; @propagate not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Pe});if("boolean"!=typeof Ce)throw new R("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:T});ge.set("@propagate",!0)}if("@import"in Pe){const Ce=Pe["@import"];if("json-ld-1.0"===L.processingMode)throw new R("Invalid JSON-LD syntax; @import not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Pe});if(!_(Ce))throw new R("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:T});const Ke=yield fe.contextResolver.resolve({activeCtx:L,context:Ce,documentLoader:fe.documentLoader,base:fe.base});if(1!==Ke.length)throw new R("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:T});const st=Ke[0].getProcessed(L);if(st)Pe=st;else{const Qe=Ke[0].document;if("@import"in Qe)throw new R("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:T});for(const _e in Qe)Pe.hasOwnProperty(_e)||(Pe[_e]=Qe[_e]);Ke[0].setProcessed(L,Pe)}ge.set("@import",!0)}ge.set("@protected",Pe["@protected"]||!1);for(const Ce in Pe)if(ie.createTermDefinition({activeCtx:Se,localCtx:Pe,term:Ce,defined:ge,options:fe,overrideProtected:Te}),P(Pe[Ce])&&"@context"in Pe[Ce]){const Ke=Pe[Ce]["@context"];let st=!0;if(_(Ke)){const Qe=N(fe.base,Ke);de.has(Qe)?st=!1:de.add(Qe)}if(st)try{yield ie.process({activeCtx:Se.clone(),localCtx:Pe[Ce]["@context"],overrideProtected:!0,options:fe,cycles:de})}catch{throw new R("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Pe[Ce]["@context"],term:Ce})}}Fe.setProcessed(L,{context:Se,events:Ie})}return Se});return function(L){return v.apply(this,arguments)}}(),ie.createTermDefinition=({activeCtx:v,localCtx:L,term:T,defined:fe,options:z,overrideProtected:Te=!1})=>{if(fe.has(T)){if(fe.get(T))return;throw new R("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:L,term:T})}let de;if(fe.set(T,!1),L.hasOwnProperty(T)&&(de=L[T]),"@type"===T&&P(de)&&"@set"===(de["@container"]||"@set")&&ie.processingMode(v,1.1)){const Fe=["@container","@id","@protected"],Pe=Object.keys(de);if(0===Pe.length||Pe.some(ze=>!Fe.includes(ze)))throw new R("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:T})}else{if(ie.isKeyword(T))throw new R("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:T});if(T.match(k))return void(z.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:T}},options:z}));if(""===T)throw new R("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:L})}const we=v.mappings.get(T);v.mappings.has(T)&&v.mappings.delete(T);let Ie=!1;if((_(de)||null===de)&&(Ie=!0,de={"@id":de}),!P(de))throw new R("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:L});const De={};v.mappings.set(T,De),De.reverse=!1;const tt=["@container","@id","@language","@reverse","@type"];ie.processingMode(v,1.1)&&tt.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Fe in de)if(!tt.includes(Fe))throw new R("Invalid JSON-LD syntax; a term definition must not contain "+Fe,"jsonld.SyntaxError",{code:"invalid term definition",context:L});const Ye=T.indexOf(":");if(De._termHasColon=Ye>0,"@reverse"in de){if("@id"in de)throw new R("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});if("@nest"in de)throw new R("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});const Fe=de["@reverse"];if(!_(Fe))throw new R("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(Fe.match(k))return z.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Fe}},options:z}),void(we?v.mappings.set(T,we):v.mappings.delete(T));const Pe=$(v,Fe,{vocab:!0,base:!1},L,fe,z);if(!M(Pe))throw new R("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});De["@id"]=Pe,De.reverse=!0}else if("@id"in de){let Fe=de["@id"];if(Fe&&!_(Fe))throw new R("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(null===Fe)De["@id"]=null;else{if(!ie.isKeyword(Fe)&&Fe.match(k))return z.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Fe}},options:z}),void(we?v.mappings.set(T,we):v.mappings.delete(T));if(Fe!==T){if(Fe=$(v,Fe,{vocab:!0,base:!1},L,fe,z),!M(Fe)&&!ie.isKeyword(Fe))throw new R("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(T.match(/(?::[^:])|\//)&&$(v,T,{vocab:!0,base:!1},L,new Map(fe).set(T,!0),z)!==Fe)throw new R("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});De["@id"]=Fe,De._prefix=Ie&&!De._termHasColon&&Fe.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in De))if(De._termHasColon){const Fe=T.substr(0,Ye);if(L.hasOwnProperty(Fe)&&ie.createTermDefinition({activeCtx:v,localCtx:L,term:Fe,defined:fe,options:z}),v.mappings.has(Fe)){const Pe=T.substr(Ye+1);De["@id"]=v.mappings.get(Fe)["@id"]+Pe}else De["@id"]=T}else if("@type"===T)De["@id"]=T;else{if(!("@vocab"in v))throw new R("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L,term:T});De["@id"]=v["@vocab"]+T}if((!0===de["@protected"]||!0===fe.get("@protected")&&!1!==de["@protected"])&&(v.protected[T]=!0,De.protected=!0),fe.set(T,!0),"@type"in de){let Fe=de["@type"];if(!_(Fe))throw new R("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if("@json"===Fe||"@none"===Fe){if(ie.processingMode(v,1))throw new R(`Invalid JSON-LD syntax; an @context @type value must not be "${Fe}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else if("@id"!==Fe&&"@vocab"!==Fe){if(Fe=$(v,Fe,{vocab:!0,base:!1},L,fe,z),!M(Fe))throw new R("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if(0===Fe.indexOf("_:"))throw new R("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}De["@type"]=Fe}if("@container"in de){const Fe=_(de["@container"])?[de["@container"]]:de["@container"]||[],Pe=["@list","@set","@index","@language"];let ze=!0;const ge=Fe.includes("@set");if(ie.processingMode(v,1.1)){if(Pe.push("@graph","@id","@type"),Fe.includes("@list")){if(1!==Fe.length)throw new R("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else if(Fe.includes("@graph")){if(Fe.some(Ce=>"@graph"!==Ce&&"@id"!==Ce&&"@index"!==Ce&&"@set"!==Ce))throw new R("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else ze&=Fe.length<=(ge?2:1);if(Fe.includes("@type")&&(De["@type"]=De["@type"]||"@id",!["@id","@vocab"].includes(De["@type"])))throw new R("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else ze&=!A(de["@container"]),ze&=Fe.length<=1;if(ze&=Fe.every(Ce=>Pe.includes(Ce)),ze&=!(ge&&Fe.includes("@list")),!ze)throw new R("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Pe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:L});if(De.reverse&&!Fe.every(Ce=>["@index","@set"].includes(Ce)))throw new R("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});De["@container"]=Fe}if("@index"in de){if(!("@container"in de)||!De["@container"].includes("@index"))throw new R(`Invalid JSON-LD syntax; @index without @index in @container: "${de["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});if(!_(de["@index"])||0===de["@index"].indexOf("@"))throw new R(`Invalid JSON-LD syntax; @index must expand to an IRI: "${de["@index"]}" on term "${T}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});De["@index"]=de["@index"]}if("@context"in de&&(De["@context"]=de["@context"]),"@language"in de&&!("@type"in de)){let Fe=de["@language"];if(null!==Fe&&!_(Fe))throw new R("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:L});null!==Fe&&(Fe=Fe.toLowerCase()),De["@language"]=Fe}if("@prefix"in de){if(T.match(/:|\//))throw new R("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:L});if(ie.isKeyword(De["@id"]))throw new R("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:L});if("boolean"!=typeof de["@prefix"])throw new R("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:L});De._prefix=!0===de["@prefix"]}if("@direction"in de){const Fe=de["@direction"];if(null!==Fe&&"ltr"!==Fe&&"rtl"!==Fe)throw new R('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:L});De["@direction"]=Fe}if("@nest"in de){const Fe=de["@nest"];if(!_(Fe)||"@nest"!==Fe&&0===Fe.indexOf("@"))throw new R("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:L});De["@nest"]=Fe}const Se=De["@id"];if("@context"===Se||"@preserve"===Se)throw new R("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:L});if(we&&we.protected&&!Te&&(v.protected[T]=!0,De.protected=!0,!H(we,De)))throw new R("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:L,term:T})},ie.expandIri=(v,L,T,fe)=>$(v,L,T,void 0,void 0,fe),ie.getInitialContext=v=>{const L=JSON.stringify({processingMode:v.processingMode}),T=Y.get(L);if(T)return T;const fe={processingMode:v.processingMode,mappings:new Map,inverse:null,getInverse:function z(){const De=this;if(De.inverse)return De.inverse;const tt=De.inverse={},Ye=De.fastCurieMap={},Se={},Fe=(De["@language"]||"@none").toLowerCase(),Pe=De["@direction"],ze=De.mappings,ge=[...ze.keys()].sort(ce);for(const Ce of ge){const Ke=ze.get(Ce);if(null===Ke)continue;let st=Ke["@container"]||"@none";if(st=[].concat(st).sort().join(""),null===Ke["@id"])continue;const Qe=X(Ke["@id"]);for(const _e of Qe){let B=tt[_e];const I=ie.isKeyword(_e);if(B)!I&&!Ke._termHasColon&&Se[_e].push(Ce);else if(tt[_e]=B={},!I&&!Ke._termHasColon){Se[_e]=[Ce];const ae={iri:_e,terms:Se[_e]};_e[0]in Ye?Ye[_e[0]].push(ae):Ye[_e[0]]=[ae]}if(B[st]||(B[st]={"@language":{},"@type":{},"@any":{}}),B=B[st],de(Ce,B["@any"],"@none"),Ke.reverse)de(Ce,B["@type"],"@reverse");else if("@none"===Ke["@type"])de(Ce,B["@any"],"@none"),de(Ce,B["@language"],"@none"),de(Ce,B["@type"],"@none");else if("@type"in Ke)de(Ce,B["@type"],Ke["@type"]);else if("@language"in Ke&&"@direction"in Ke){const ae=Ke["@language"],K=Ke["@direction"];de(Ce,B["@language"],ae&&K?`${ae}_${K}`.toLowerCase():ae?ae.toLowerCase():K?`_${K}`:"@null")}else"@language"in Ke?de(Ce,B["@language"],(Ke["@language"]||"@null").toLowerCase()):"@direction"in Ke?de(Ce,B["@language"],Ke["@direction"]?`_${Ke["@direction"]}`:"@none"):Pe?(de(Ce,B["@language"],`_${Pe}`),de(Ce,B["@language"],"@none"),de(Ce,B["@type"],"@none")):(de(Ce,B["@language"],Fe),de(Ce,B["@language"],"@none"),de(Ce,B["@type"],"@none"))}}for(const Ce in Ye)Te(Ye,Ce,1);return tt},clone:function we(){const De={};return De.mappings=b.clone(this.mappings),De.clone=this.clone,De.inverse=null,De.getInverse=this.getInverse,De.protected=b.clone(this.protected),this.previousContext&&(De.previousContext=this.previousContext.clone()),De.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(De["@base"]=this["@base"]),"@language"in this&&(De["@language"]=this["@language"]),"@vocab"in this&&(De["@vocab"]=this["@vocab"]),De},revertToPreviousContext:function Ie(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===Y.size&&Y.clear(),Y.set(L,fe),fe;function Te(De,tt,Ye){const Se=De[tt],Fe=De[tt]={};let Pe,ze;for(const ge of Se)Pe=ge.iri,ze=Ye>=Pe.length?"":Pe[Ye],ze in Fe?Fe[ze].push(ge):Fe[ze]=[ge];for(const ge in Fe)""!==ge&&Te(Fe,ge,Ye+1)}function de(De,tt,Ye){tt.hasOwnProperty(Ye)||(tt[Ye]=De)}},ie.getContextValue=(v,L,T)=>{if(null===L)return"@context"===T?void 0:null;if(v.mappings.has(L)){const fe=v.mappings.get(L);if(y(T))return fe;if(fe.hasOwnProperty(T))return fe[T]}return"@language"===T&&T in v||"@direction"===T&&T in v?v[T]:"@context"!==T?null:void 0},ie.processingMode=(v,L)=>L.toString()>="1.1"?!v.processingMode||v.processingMode>="json-ld-"+L.toString():"json-ld-1.0"===v.processingMode,ie.isKeyword=v=>{if(!_(v)||"@"!==v[0])return!1;switch(v){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(ne,Z,g)=>{"use strict";var E=g(7156).default;const{parseLinkHeader:b,buildHeaders:R}=g(3521),{LINK_HEADER_CONTEXT:A}=g(6982),P=g(1874),_=g(4044),{prependBase:y}=g(2651),M=/(^|(\r\n))link:/i;ne.exports=({secure:N,headers:j={},xhr:le}={headers:{}})=>{return j=R(j),(new _).wrapLoader(X);function X(Y){return ce.apply(this,arguments)}function ce(){return ce=E(function*(Y){if(0!==Y.indexOf("http:")&&0!==Y.indexOf("https:"))throw new P('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});if(N&&0!==Y.indexOf("https"))throw new P('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});let oe;try{oe=yield function U(N,j,le){const k=new(N=N||XMLHttpRequest);return new Promise((X,ce)=>{k.onload=()=>X(k),k.onerror=Y=>ce(Y),k.open("GET",j,!0);for(const Y in le)k.setRequestHeader(Y,le[Y]);k.send()})}(le,Y,j)}catch(L){throw new P("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:Y,cause:L})}if(oe.status>=400)throw new P("URL could not be dereferenced: "+oe.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:Y,httpStatusCode:oe.status});let ie={contextUrl:null,documentUrl:Y,document:oe.response},$=null;const H=oe.getResponseHeader("Content-Type");let v;if(M.test(oe.getAllResponseHeaders())&&(v=oe.getResponseHeader("Link")),v&&"application/ld+json"!==H){const L=b(v),T=L[A];if(Array.isArray(T))throw new P("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:Y});T&&(ie.contextUrl=T.target),$=L.alternate,$&&"application/ld+json"==$.type&&!(H||"").match(/^application\/(\w*\+)?json$/)&&(ie=yield X(y(Y,$.target)))}return ie}),ce.apply(this,arguments)}}},3855:(ne,Z,g)=>{"use strict";const E=g(1874),{isArray:b}=g(8254),{asArray:R}=g(3521),A={};function P({event:y,handlers:M}){let U=!0;for(let N=0;U&&N<M.length;++N){U=!1;const j=M[N];if(b(j))U=P({event:y,handlers:j});else if("function"==typeof j)j({event:y,next:()=>{U=!0}});else{if("object"!=typeof j)throw new E("Invalid event handler.","jsonld.InvalidEventHandler",{event:y});y.code in j?j[y.code]({event:y,next:()=>{U=!0}}):U=!0}}return U}ne.exports=A,A.defaultEventHandler=null,A.setupEventHandler=({options:y={}})=>{const M=[].concat(y.safe?A.safeEventHandler:[],y.eventHandler?R(y.eventHandler):[],A.defaultEventHandler?A.defaultEventHandler:[]);return 0===M.length?null:M},A.handleEvent=({event:y,options:M})=>{P({event:y,handlers:M.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);A.safeEventHandler=function({event:M,next:U}){if("warning"===M.level&&_.has(M.code))throw new E("Safe mode validation error.","jsonld.ValidationError",{event:M});U()},A.logEventHandler=function({event:M,next:U}){console.log(`EVENT: ${M.message}`,{event:M}),U()},A.logWarningEventHandler=function({event:M,next:U}){"warning"===M.level&&console.warn(`WARNING: ${M.message}`,{event:M}),U()},A.unhandledEventHandler=function({event:M}){throw new E("No handler for event.","jsonld.UnhandledEvent",{event:M})},A.setDefaultEventHandler=function({eventHandler:y}={}){A.defaultEventHandler=y?R(y):null}},3860:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),{isArray:R,isObject:A,isEmptyObject:P,isString:_,isUndefined:y}=g(8254),{isList:M,isValue:U,isGraph:N,isSubject:j}=g(543),{expandIri:le,getContextValue:k,isKeyword:X,process:ce,processingMode:Y}=g(9611),{isAbsolute:oe}=g(2651),{REGEX_BCP47:ie,REGEX_KEYWORD:$,addValue:H,asArray:v,getValues:L,validateTypeValue:T}=g(3521),{handleEvent:fe}=g(3855),z={};function Te({value:Se,count:Fe,options:Pe}){if(0===Fe||"@value"in Se||"@list"in Se||1===Fe&&"@id"in Se){if(Pe.eventHandler){let ze,ge;0===Fe?(ze="empty object",ge="Dropping empty object."):"@value"in Se?(ze="object with only @value",ge="Dropping object with only @value."):"@list"in Se?(ze="object with only @list",ge="Dropping object with only @list."):1===Fe&&"@id"in Se&&(ze="object with only @id",ge="Dropping object with only @id."),fe({event:{type:["JsonLdEvent"],code:ze,level:"warning",message:ge,details:{value:Se}},options:Pe})}return null}return Se}function de(Se){return we.apply(this,arguments)}function we(){return(we=E(function*({activeCtx:Se,activeProperty:Fe,expandedActiveProperty:Pe,element:ze,expandedParent:ge,options:Ce={},insideList:Ke,typeKey:st,typeScopedContext:Qe}){const _e=Object.keys(ze).sort(),B=[];let I;const ae=ze[st]&&"@json"===le(Se,R(ze[st])?ze[st][0]:ze[st],{vocab:!0},{...Ce,typeExpansion:!0});for(const K of _e){let Ve,Le=ze[K];if("@context"===K)continue;const me=le(Se,K,{vocab:!0},Ce);if(null===me||!oe(me)&&!X(me)){Ce.eventHandler&&fe({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:K,expandedProperty:me}},options:Ce});continue}if(X(me)){if("@reverse"===Pe)throw new b("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Le});if(me in ge&&"@included"!==me&&"@type"!==me)throw new b("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:me})}if("@id"===me){if(!_(Le)){if(!Ce.isFrame)throw new b('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Le});if(A(Le)){if(!P(Le))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le})}else{if(!R(Le))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le});if(!Le.every(O=>_(O)))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le})}}H(ge,"@id",v(Le).map(O=>{if(_(O)){const he=le(Se,O,{base:!0},Ce);return Ce.eventHandler&&(null===he?fe(null===O?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:O}},options:Ce}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:O}},options:Ce}):oe(he)||fe({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:O,expandedId:he}},options:Ce})),he}return O}),{propertyIsArray:Ce.isFrame});continue}if("@type"===me){A(Le)&&(Le=Object.fromEntries(Object.entries(Le).map(([O,he])=>[le(Qe,O,{vocab:!0}),v(he).map(ue=>le(Qe,ue,{base:!0,vocab:!0},{...Ce,typeExpansion:!0}))]))),T(Le,Ce.isFrame),H(ge,"@type",v(Le).map(O=>{if(_(O)){const he=le(Qe,O,{base:!0,vocab:!0},{...Ce,typeExpansion:!0});return"@json"!==he&&!oe(he)&&Ce.eventHandler&&fe({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:O}},options:Ce}),he}return O}),{propertyIsArray:!!Ce.isFrame});continue}if("@included"===me&&Y(Se,1.1)){const O=v(yield z.expand({activeCtx:Se,activeProperty:Fe,element:Le,options:Ce}));if(!O.every(he=>j(he)))throw new b("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Le});H(ge,"@included",O,{propertyIsArray:!0});continue}if("@graph"===me&&!A(Le)&&!R(Le))throw new b('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Le});if("@value"===me){I=Le,ae&&Y(Se,1.1)?ge["@value"]=Le:H(ge,"@value",Le,{propertyIsArray:Ce.isFrame});continue}if("@language"===me){if(null===Le)continue;if(!_(Le)&&!Ce.isFrame)throw new b('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Le});Le=v(Le).map(O=>_(O)?O.toLowerCase():O);for(const O of Le)_(O)&&!O.match(ie)&&Ce.eventHandler&&fe({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:O}},options:Ce});H(ge,"@language",Le,{propertyIsArray:Ce.isFrame});continue}if("@direction"===me){if(!_(Le)&&!Ce.isFrame)throw new b('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Le});Le=v(Le);for(const O of Le)if(_(O)&&"ltr"!==O&&"rtl"!==O)throw new b('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Le});H(ge,"@direction",Le,{propertyIsArray:Ce.isFrame});continue}if("@index"===me){if(!_(Le))throw new b('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Le});H(ge,"@index",Le);continue}if("@reverse"===me){if(!A(Le))throw new b('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Le});if(Ve=yield z.expand({activeCtx:Se,activeProperty:"@reverse",element:Le,options:Ce}),"@reverse"in Ve)for(const he in Ve["@reverse"])H(ge,he,Ve["@reverse"][he],{propertyIsArray:!0});let O=ge["@reverse"]||null;for(const he in Ve){if("@reverse"===he)continue;null===O&&(O=ge["@reverse"]={}),H(O,he,[],{propertyIsArray:!0});const ue=Ve[he];for(let Ge=0;Ge<ue.length;++Ge){const qe=ue[Ge];if(U(qe)||M(qe))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ve});H(O,he,qe,{propertyIsArray:!0})}}continue}if("@nest"===me){B.push(K);continue}let Q=Se;const W=k(Se,K,"@context");y(W)||(Q=yield ce({activeCtx:Se,localCtx:W,propagate:!0,overrideProtected:!0,options:Ce}));const C=k(Q,K,"@container")||[];if(C.includes("@language")&&A(Le))Ve=De(Q,Le,k(Q,K,"@direction"),Ce);else if(C.includes("@index")&&A(Le)){const O=C.includes("@graph"),he=k(Q,K,"@index")||"@index",ue="@index"!==he&&le(Se,he,{vocab:!0},Ce);Ve=yield tt({activeCtx:Q,options:Ce,activeProperty:K,value:Le,asGraph:O,indexKey:he,propertyIndex:ue})}else if(C.includes("@id")&&A(Le)){const O=C.includes("@graph");Ve=yield tt({activeCtx:Q,options:Ce,activeProperty:K,value:Le,asGraph:O,indexKey:"@id"})}else if(C.includes("@type")&&A(Le))Ve=yield tt({activeCtx:Q.revertToPreviousContext(),options:Ce,activeProperty:K,value:Le,asGraph:!1,indexKey:"@type"});else{const O="@list"===me;if(O||"@set"===me){let he=Fe;O&&"@graph"===Pe&&(he=null),Ve=yield z.expand({activeCtx:Q,activeProperty:he,element:Le,options:Ce,insideList:O})}else Ve="@json"===k(Se,K,"@type")?{"@type":"@json","@value":Le}:yield z.expand({activeCtx:Q,activeProperty:K,element:Le,options:Ce,insideList:!1})}if(null!==Ve||"@value"===me){if("@list"!==me&&!M(Ve)&&C.includes("@list")&&(Ve={"@list":v(Ve)}),C.includes("@graph")&&!C.some(O=>"@id"===O||"@index"===O)){Ve=v(Ve);const O=Object.keys(Ve[0]).length;if(!Ce.isFrame&&null===Te({value:Ve[0],count:O,options:Ce}))continue;Ve=Ve.map(he=>({"@graph":v(he)}))}if(Q.mappings.has(K)&&Q.mappings.get(K).reverse){const O=ge["@reverse"]=ge["@reverse"]||{};Ve=v(Ve);for(let he=0;he<Ve.length;++he){const ue=Ve[he];if(U(ue)||M(ue))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ve});H(O,me,ue,{propertyIsArray:!0})}continue}H(ge,me,Ve,{propertyIsArray:!0})}}if("@value"in ge&&("@json"!==ge["@type"]||!Y(Se,1.1))&&(A(I)||R(I))&&!Ce.isFrame)throw new b('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:I});for(const K of B){const Le=R(ze[K])?ze[K]:[ze[K]];for(const Ve of Le){if(!A(Ve)||Object.keys(Ve).some(me=>"@value"===le(Se,me,{vocab:!0},Ce)))throw new b("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Ve});yield de({activeCtx:Se,activeProperty:Fe,expandedActiveProperty:Pe,element:Ve,expandedParent:ge,options:Ce,insideList:Ke,typeScopedContext:Qe,typeKey:st})}}})).apply(this,arguments)}function Ie({activeCtx:Se,activeProperty:Fe,value:Pe,options:ze}){if(null==Pe)return null;const ge=le(Se,Fe,{vocab:!0},ze);if("@id"===ge)return le(Se,Pe,{base:!0},ze);if("@type"===ge)return le(Se,Pe,{vocab:!0,base:!0},{...ze,typeExpansion:!0});const Ce=k(Se,Fe,"@type");if(("@id"===Ce||"@graph"===ge)&&_(Pe)){const st=le(Se,Pe,{base:!0},ze);return null===st&&Pe.match($)&&ze.eventHandler&&fe({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Fe}},options:ze}),{"@id":st}}if("@vocab"===Ce&&_(Pe))return{"@id":le(Se,Pe,{vocab:!0,base:!0},ze)};if(X(ge))return Pe;const Ke={};if(Ce&&!["@id","@vocab","@none"].includes(Ce))Ke["@type"]=Ce;else if(_(Pe)){const st=k(Se,Fe,"@language");null!==st&&(Ke["@language"]=st);const Qe=k(Se,Fe,"@direction");null!==Qe&&(Ke["@direction"]=Qe)}return["boolean","number","string"].includes(typeof Pe)||(Pe=Pe.toString()),Ke["@value"]=Pe,Ke}function De(Se,Fe,Pe,ze){const ge=[],Ce=Object.keys(Fe).sort();for(const Ke of Ce){const st=le(Se,Ke,{vocab:!0},ze);let Qe=Fe[Ke];R(Qe)||(Qe=[Qe]);for(const _e of Qe){if(null===_e)continue;if(!_(_e))throw new b("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Fe});const B={"@value":_e};"@none"!==st&&(Ke.match(ie)||ze.eventHandler&&fe({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ke}},options:ze}),B["@language"]=Ke.toLowerCase()),Pe&&(B["@direction"]=Pe),ge.push(B)}}return ge}function tt(Se){return Ye.apply(this,arguments)}function Ye(){return(Ye=E(function*({activeCtx:Se,options:Fe,activeProperty:Pe,value:ze,asGraph:ge,indexKey:Ce,propertyIndex:Ke}){const st=[],Qe=Object.keys(ze).sort(),_e="@type"===Ce;for(let B of Qe){if(_e){const K=k(Se,B,"@context");y(K)||(Se=yield ce({activeCtx:Se,localCtx:K,propagate:!1,options:Fe}))}let ae,I=ze[B];R(I)||(I=[I]),I=yield z.expand({activeCtx:Se,activeProperty:Pe,element:I,options:Fe,insideList:!1,insideIndex:!0}),ae=Ke?"@none"===B?"@none":Ie({activeCtx:Se,activeProperty:Ce,value:B,options:Fe}):le(Se,B,{vocab:!0},Fe),"@id"===Ce?B=le(Se,B,{base:!0},Fe):_e&&(B=ae);for(let K of I){if(ge&&!N(K)&&(K={"@graph":[K]}),"@type"===Ce)"@none"===ae||(K["@type"]=K["@type"]?[B].concat(K["@type"]):[B]);else{if(U(K)&&!["@language","@type","@index"].includes(Ce))throw new b(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ce}".`,"jsonld.SyntaxError",{code:"invalid value object",value:K});Ke?"@none"!==ae&&H(K,Ke,ae,{propertyIsArray:!0,prependValue:!0}):"@none"!==ae&&!(Ce in K)&&(K[Ce]=B)}st.push(K)}}return st})).apply(this,arguments)}ne.exports=z,z.expand=function(){var Se=E(function*({activeCtx:Fe,activeProperty:Pe=null,element:ze,options:ge={},insideList:Ce=!1,insideIndex:Ke=!1,typeScopedContext:st=null}){if(null==ze)return null;if("@default"===Pe&&(ge=Object.assign({},ge,{isFrame:!1})),!R(ze)&&!A(ze))return Ce||null!==Pe&&"@graph"!==le(Fe,Pe,{vocab:!0},ge)?Ie({activeCtx:Fe,activeProperty:Pe,value:ze,options:ge}):(ge.eventHandler&&fe({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:ze}},options:ge}),null);if(R(ze)){let Ve=[];const me=k(Fe,Pe,"@container")||[];Ce=Ce||me.includes("@list");for(let Q=0;Q<ze.length;++Q){let W=yield z.expand({activeCtx:Fe,activeProperty:Pe,element:ze[Q],options:ge,insideIndex:Ke,typeScopedContext:st});Ce&&R(W)&&(W={"@list":W}),null!==W&&(R(W)?Ve=Ve.concat(W):Ve.push(W))}return Ve}const Qe=le(Fe,Pe,{vocab:!0},ge),_e=k(Fe,Pe,"@context");st=st||(Fe.previousContext?Fe:null);let B=Object.keys(ze).sort(),I=!Ke;if(I&&st&&B.length<=2&&!B.includes("@context"))for(const Ve of B){const me=le(st,Ve,{vocab:!0},ge);if("@value"===me){I=!1,Fe=st;break}if("@id"===me&&1===B.length){I=!1;break}}I&&(Fe=Fe.revertToPreviousContext()),y(_e)||(Fe=yield ce({activeCtx:Fe,localCtx:_e,propagate:!0,overrideProtected:!0,options:ge})),"@context"in ze&&(Fe=yield ce({activeCtx:Fe,localCtx:ze["@context"],options:ge})),st=Fe;let ae=null;for(const Ve of B)if("@type"===le(Fe,Ve,{vocab:!0},ge)){ae=ae||Ve;const Q=ze[Ve],W=Array.isArray(Q)?Q.length>1?Q.slice().sort():Q:[Q];for(const C of W){const O=k(st,C,"@context");y(O)||(Fe=yield ce({activeCtx:Fe,localCtx:O,options:ge,propagate:!1}))}}let K={};yield de({activeCtx:Fe,activeProperty:Pe,expandedActiveProperty:Qe,element:ze,expandedParent:K,options:ge,insideList:Ce,typeKey:ae,typeScopedContext:st}),B=Object.keys(K);let Le=B.length;if("@value"in K){if("@type"in K&&("@language"in K||"@direction"in K))throw new b('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:K});let Ve=Le-1;if("@type"in K&&(Ve-=1),"@index"in K&&(Ve-=1),"@language"in K&&(Ve-=1),"@direction"in K&&(Ve-=1),0!==Ve)throw new b('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:K});const me=null===K["@value"]?[]:v(K["@value"]),Q=L(K,"@type");if(!Y(Fe,1.1)||!Q.includes("@json")||1!==Q.length)if(0===me.length)ge.eventHandler&&fe({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:K}},options:ge}),K=null;else{if(!me.every(W=>_(W)||P(W))&&"@language"in K)throw new b("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:K});if(!Q.every(W=>oe(W)&&!(_(W)&&0===W.indexOf("_:"))||P(W)))throw new b('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:K})}}else if("@type"in K&&!R(K["@type"]))K["@type"]=[K["@type"]];else if("@set"in K||"@list"in K){if(Le>1&&(2!==Le||!("@index"in K)))throw new b('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:K});"@set"in K&&(K=K["@set"],B=Object.keys(K),Le=B.length)}else 1===Le&&"@language"in K&&(ge.eventHandler&&fe({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:K}},options:ge}),K=null);return A(K)&&!ge.keepFreeFloatingNodes&&!Ce&&(null===Pe||"@graph"===Qe||(k(Fe,Pe,"@container")||[]).includes("@graph"))&&(K=Te({value:K,count:Le,options:ge})),K});return function(Fe){return Se.apply(this,arguments)}}()},8295:(ne,Z,g)=>{"use strict";const{isSubjectReference:E}=g(543),{createMergedNodeMap:b}=g(9783),R={};ne.exports=R,R.flatten=A=>{const P=b(A),_=[],y=Object.keys(P).sort();for(let M=0;M<y.length;++M){const U=P[y[M]];E(U)||_.push(U)}return _}},9193:(ne,Z,g)=>{"use strict";const{isKeyword:E}=g(9611),b=g(543),R=g(8254),A=g(3521),P=g(2651),_=g(1874),{createNodeMap:y,mergeNodeMapGraphs:M}=g(9783),U={};function N(v){const L={};for(const T in v)void 0!==v[T]&&(L["@"+T]=[v[T]]);return[L]}function j(v,L,T){for(let fe=T.length-1;fe>=0;--fe){const z=T[fe];if(z.graph===L&&z.subject["@id"]===v["@id"])return!0}return!1}function le(v,L,T){const fe="@"+T;let z=fe in v?v[fe][0]:L[T];if("embed"===T)if(!0===z)z="@once";else if(!1===z)z="@never";else if("@always"!==z&&"@never"!==z&&"@link"!==z&&"@first"!==z&&"@last"!==z&&"@once"!==z)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:v});return z}function k(v){if(!R.isArray(v)||1!==v.length||!R.isObject(v[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:v});if("@id"in v[0])for(const L of A.asArray(v[0]["@id"]))if(!R.isObject(L)&&!P.isAbsolute(L)||R.isString(L)&&0===L.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:v});if("@type"in v[0])for(const L of A.asArray(v[0]["@type"]))if(!R.isObject(L)&&!P.isAbsolute(L)&&"@json"!==L||R.isString(L)&&0===L.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:v})}function ce(v,L,T,fe){let z=!0,Te=!1;for(const de in T){let we=!1;const Ie=A.getValues(L,de),De=0===A.getValues(T,de).length;if("@id"===de){if(R.isEmptyObject(T["@id"][0]||{})?we=!0:T["@id"].length>=0&&(we=T["@id"].includes(Ie[0])),!fe.requireAll)return we}else if("@type"===de){if(z=!1,De){if(Ie.length>0)return!1;we=!0}else if(1===T["@type"].length&&R.isEmptyObject(T["@type"][0]))we=Ie.length>0;else for(const tt of T["@type"])we=!(!R.isObject(tt)||!("@default"in tt))||we||Ie.some(Ye=>Ye===tt);if(!fe.requireAll)return we}else{if(E(de))continue;{const tt=A.getValues(T,de)[0];let Ye=!1;if(tt&&(k([tt]),Ye="@default"in tt),z=!1,0===Ie.length&&Ye)continue;if(Ie.length>0&&De)return!1;if(void 0===tt){if(Ie.length>0)return!1;we=!0}else if(b.isList(tt)){const Se=tt["@list"][0];if(b.isList(Ie[0])){const Fe=Ie[0]["@list"];b.isValue(Se)?we=Fe.some(Pe=>H(Se,Pe)):(b.isSubject(Se)||b.isSubjectReference(Se))&&(we=Fe.some(Pe=>$(v,Se,Pe,fe)))}}else we=b.isValue(tt)?Ie.some(Se=>H(tt,Se)):b.isSubjectReference(tt)?Ie.some(Se=>$(v,tt,Se,fe)):!!R.isObject(tt)&&Ie.length>0}}if(!we&&fe.requireAll)return!1;Te=Te||we}return z||Te}function Y(v,L){const T=v.uniqueEmbeds[v.graph],fe=T[L],z=fe.parent,Te=fe.property,de={"@id":L};if(R.isArray(z)){for(let Ie=0;Ie<z.length;++Ie)if(A.compareValues(z[Ie],de)){z[Ie]=de;break}}else{const Ie=R.isArray(z[Te]);A.removeValue(z,Te,de,{propertyIsArray:Ie}),A.addValue(z,Te,de,{propertyIsArray:Ie})}const we=Ie=>{const De=Object.keys(T);for(const tt of De)tt in T&&R.isObject(T[tt].parent)&&T[tt].parent["@id"]===Ie&&(delete T[tt],we(tt))};we(L)}function oe(v,L){if(R.isArray(v))return v.map(T=>oe(T,L));if(R.isObject(v)){if("@preserve"in v)return v["@preserve"][0];if(b.isValue(v))return v;if(b.isList(v))return v["@list"]=oe(v["@list"],L),v;if("@id"in v){const T=v["@id"];if(L.link.hasOwnProperty(T)){const fe=L.link[T].indexOf(v);if(-1!==fe)return L.link[T][fe];L.link[T].push(v)}else L.link[T]=[v]}for(const T in v)"@id"===T&&L.bnodesToClear.includes(v[T])?delete v["@id"]:v[T]=oe(v[T],L)}return v}function ie(v,L,T){R.isObject(v)?A.addValue(v,L,T,{propertyIsArray:!0}):v.push(T)}function $(v,L,T,fe){if(!("@id"in T))return!1;const z=v.subjects[T["@id"]];return z&&ce(v,z,L,fe)}function H(v,L){const T=L["@value"],fe=L["@type"],z=L["@language"],Te=v["@value"]?R.isArray(v["@value"])?v["@value"]:[v["@value"]]:[],de=v["@type"]?R.isArray(v["@type"])?v["@type"]:[v["@type"]]:[],we=v["@language"]?R.isArray(v["@language"])?v["@language"]:[v["@language"]]:[];return 0===Te.length&&0===de.length&&0===we.length||!(!Te.includes(T)&&!R.isEmptyObject(Te[0])||!(!fe&&0===de.length||de.includes(fe)||fe&&R.isEmptyObject(de[0]))||!(!z&&0===we.length||we.includes(z)||z&&R.isEmptyObject(we[0])))}ne.exports=U,U.frameMergedOrDefault=(v,L,T)=>{const fe={options:T,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},z=new A.IdentifierIssuer("_:b");y(v,fe.graphMap,"@default",z),T.merged&&(fe.graphMap["@merged"]=M(fe.graphMap),fe.graph="@merged"),fe.subjects=fe.graphMap[fe.graph];const Te=[];return U.frame(fe,Object.keys(fe.subjects).sort(),L,Te),T.pruneBlankNodeIdentifiers&&(T.bnodesToClear=Object.keys(fe.bnodeMap).filter(de=>1===fe.bnodeMap[de].length)),T.link={},oe(Te,T)},U.frame=(v,L,T,fe,z=null)=>{k(T);const Te=v.options,de={embed:le(T=T[0],Te,"embed"),explicit:le(T,Te,"explicit"),requireAll:le(T,Te,"requireAll")};v.link.hasOwnProperty(v.graph)||(v.link[v.graph]={});const we=v.link[v.graph],Ie=function X(v,L,T,fe){const z={};for(const Te of L){const de=v.graphMap[v.graph][Te];ce(v,de,T,fe)&&(z[Te]=de)}return z}(v,L,T,de),De=Object.keys(Ie).sort();for(const tt of De){const Ye=Ie[tt];if(null===z?v.uniqueEmbeds={[v.graph]:{}}:v.uniqueEmbeds[v.graph]=v.uniqueEmbeds[v.graph]||{},"@link"===de.embed&&tt in we){ie(fe,z,we[tt]);continue}const Se={"@id":tt};if(0===tt.indexOf("_:")&&A.addValue(v.bnodeMap,tt,Se,{propertyIsArray:!0}),we[tt]=Se,("@first"===de.embed||"@last"===de.embed)&&v.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:T});if(v.embedded||!v.uniqueEmbeds[v.graph].hasOwnProperty(tt)){if(v.embedded&&("@never"===de.embed||j(Ye,v.graph,v.subjectStack))){ie(fe,z,Se);continue}if(v.embedded&&("@first"==de.embed||"@once"==de.embed)&&v.uniqueEmbeds[v.graph].hasOwnProperty(tt)){ie(fe,z,Se);continue}if("@last"===de.embed&&tt in v.uniqueEmbeds[v.graph]&&Y(v,tt),v.uniqueEmbeds[v.graph][tt]={parent:fe,property:z},v.subjectStack.push({subject:Ye,graph:v.graph}),tt in v.graphMap){let Fe=!1,Pe=null;"@graph"in T?(Pe=T["@graph"][0],Fe=!("@merged"===tt||"@default"===tt),R.isObject(Pe)||(Pe={})):(Fe="@merged"!==v.graph,Pe={}),Fe&&U.frame({...v,graph:tt,embedded:!1},Object.keys(v.graphMap[tt]).sort(),[Pe],Se,"@graph")}"@included"in T&&U.frame({...v,embedded:!1},L,T["@included"],Se,"@included");for(const Fe of Object.keys(Ye).sort())if(E(Fe)){if(Se[Fe]=A.clone(Ye[Fe]),"@type"===Fe)for(const Pe of Ye["@type"])0===Pe.indexOf("_:")&&A.addValue(v.bnodeMap,Pe,Se,{propertyIsArray:!0})}else if(!de.explicit||Fe in T)for(const Pe of Ye[Fe]){const ze=Fe in T?T[Fe]:N(de);if(b.isList(Pe)){const ge=T[Fe]&&T[Fe][0]&&T[Fe][0]["@list"]?T[Fe][0]["@list"]:N(de),Ce={"@list":[]};ie(Se,Fe,Ce);const Ke=Pe["@list"];for(const st of Ke)b.isSubjectReference(st)?U.frame({...v,embedded:!0},[st["@id"]],ge,Ce,"@list"):ie(Ce,"@list",A.clone(st))}else b.isSubjectReference(Pe)?U.frame({...v,embedded:!0},[Pe["@id"]],ze,Se,Fe):H(ze[0],Pe)&&ie(Se,Fe,A.clone(Pe))}for(const Fe of Object.keys(T).sort()){if("@type"===Fe){if(!R.isObject(T[Fe][0])||!("@default"in T[Fe][0]))continue}else if(E(Fe))continue;const Pe=T[Fe][0]||{};if(!le(Pe,Te,"omitDefault")&&!(Fe in Se)){let ge="@null";"@default"in Pe&&(ge=A.clone(Pe["@default"])),R.isArray(ge)||(ge=[ge]),Se[Fe]=[{"@preserve":ge}]}}for(const Fe of Object.keys(T["@reverse"]||{}).sort()){const Pe=T["@reverse"][Fe];for(const ze of Object.keys(v.subjects))A.getValues(v.subjects[ze],Fe).some(Ce=>Ce["@id"]===tt)&&(Se["@reverse"]=Se["@reverse"]||{},A.addValue(Se["@reverse"],Fe,[],{propertyIsArray:!0}),U.frame({...v,embedded:!0},[ze],Pe,Se["@reverse"][Fe],z))}ie(fe,z,Se),v.subjectStack.pop()}}},U.cleanupNull=(v,L)=>{if(R.isArray(v))return v.map(fe=>U.cleanupNull(fe,L)).filter(fe=>fe);if("@null"===v)return null;if(R.isObject(v)){if("@id"in v){const T=v["@id"];if(L.link.hasOwnProperty(T)){const fe=L.link[T].indexOf(v);if(-1!==fe)return L.link[T][fe];L.link[T].push(v)}else L.link[T]=[v]}for(const T in v)v[T]=U.cleanupNull(v[T],L)}return v}},9767:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),R=g(543),A=g(8254),{REGEX_BCP47:P,addValue:_}=g(3521),{handleEvent:y}=g(3855),{RDF_LIST:M,RDF_FIRST:U,RDF_REST:N,RDF_NIL:j,RDF_TYPE:le,RDF_JSON_LITERAL:k,XSD_BOOLEAN:X,XSD_DOUBLE:ce,XSD_INTEGER:Y,XSD_STRING:oe}=g(6982),ie={};function $(H,v,L,T){if(H.termType.endsWith("Node"))return{"@id":H.value};const fe={"@value":H.value};if(H.language)H.language.match(P)||T.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:H.language}},options:T}),fe["@language"]=H.language;else{let z=H.datatype.value;if(z||(z=oe),z===k){z="@json";try{fe["@value"]=JSON.parse(fe["@value"])}catch(Te){throw new b("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:fe["@value"],cause:Te})}}if(v){if(z===X)"true"===fe["@value"]?fe["@value"]=!0:"false"===fe["@value"]&&(fe["@value"]=!1);else if(A.isNumeric(fe["@value"]))if(z===Y){const Te=parseInt(fe["@value"],10);Te.toFixed(0)===fe["@value"]&&(fe["@value"]=Te)}else z===ce&&(fe["@value"]=parseFloat(fe["@value"]));[X,Y,ce,oe].includes(z)||(fe["@type"]=z)}else if("i18n-datatype"===L&&z.startsWith("https://www.w3.org/ns/i18n#")){const[,Te,de]=z.split(/[#_]/);Te.length>0&&(fe["@language"]=Te,Te.match(P)||T.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Te}},options:T})),fe["@direction"]=de}else z!==oe&&(fe["@type"]=z)}return fe}ne.exports=ie,ie.fromRDF=function(){var H=E(function*(v,L){const T={},fe={"@default":T},z={},{useRdfType:Te=!1,useNativeTypes:de=!1,rdfDirection:we=null}=L;for(const tt of v){const Ye="DefaultGraph"===tt.graph.termType?"@default":tt.graph.value;Ye in fe||(fe[Ye]={}),"@default"!==Ye&&!(Ye in T)&&(T[Ye]={"@id":Ye});const Se=fe[Ye],Fe=tt.subject.value,Pe=tt.predicate.value,ze=tt.object;Fe in Se||(Se[Fe]={"@id":Fe});const ge=Se[Fe],Ce=ze.termType.endsWith("Node");if(Ce&&!(ze.value in Se)&&(Se[ze.value]={"@id":ze.value}),Pe===le&&!Te&&Ce){_(ge,"@type",ze.value,{propertyIsArray:!0});continue}const Ke=$(ze,de,we,L);if(_(ge,Pe,Ke,{propertyIsArray:!0}),Ce)if(ze.value===j){const st=Se[ze.value];"usages"in st||(st.usages=[]),st.usages.push({node:ge,property:Pe,value:Ke})}else z[ze.value]=!(ze.value in z)&&{node:ge,property:Pe,value:Ke}}for(const tt in fe){const Ye=fe[tt];if(!(j in Ye))continue;const Se=Ye[j];if(Se.usages){for(let Fe of Se.usages){let Pe=Fe.node,ze=Fe.property,ge=Fe.value;const Ce=[],Ke=[];let st=Object.keys(Pe).length;for(;ze===N&&A.isObject(z[Pe["@id"]])&&A.isArray(Pe[U])&&1===Pe[U].length&&A.isArray(Pe[N])&&1===Pe[N].length&&(3===st||4===st&&A.isArray(Pe["@type"])&&1===Pe["@type"].length&&Pe["@type"][0]===M)&&(Ce.push(Pe[U][0]),Ke.push(Pe["@id"]),Fe=z[Pe["@id"]],Pe=Fe.node,ze=Fe.property,ge=Fe.value,st=Object.keys(Pe).length,R.isBlankNode(Pe)););delete ge["@id"],ge["@list"]=Ce.reverse();for(const Qe of Ke)delete Ye[Qe]}delete Se.usages}}const Ie=[],De=Object.keys(T).sort();for(const tt of De){const Ye=T[tt];if(tt in fe){const Se=Ye["@graph"]=[],Fe=fe[tt],Pe=Object.keys(Fe).sort();for(const ze of Pe){const ge=Fe[ze];R.isSubjectReference(ge)||Se.push(ge)}}R.isSubjectReference(Ye)||Ie.push(Ye)}return Ie});return function(v,L){return H.apply(this,arguments)}}()},543:(ne,Z,g)=>{"use strict";const E=g(8254),b={};ne.exports=b,b.isSubject=R=>!(!E.isObject(R)||"@value"in R||"@set"in R||"@list"in R)&&(Object.keys(R).length>1||!("@id"in R)),b.isSubjectReference=R=>E.isObject(R)&&1===Object.keys(R).length&&"@id"in R,b.isValue=R=>E.isObject(R)&&"@value"in R,b.isList=R=>E.isObject(R)&&"@list"in R,b.isGraph=R=>E.isObject(R)&&"@graph"in R&&1===Object.keys(R).filter(A=>"@id"!==A&&"@index"!==A).length,b.isSimpleGraph=R=>b.isGraph(R)&&!("@id"in R),b.isBlankNode=R=>{if(E.isObject(R)){if("@id"in R){const A=R["@id"];return!E.isString(A)||0===A.indexOf("_:")}return 0===Object.keys(R).length||!("@value"in R||"@set"in R||"@list"in R)}return!1}},7661:(ne,Z,g)=>{var E=g(7156).default;const b=g(1986),R=g(8924),A=g(3521),P=g(4198),_=A.IdentifierIssuer,y=g(1874),M=g(1072),U=g(7260),{expand:N}=g(3860),{flatten:j}=g(8295),{fromRDF:le}=g(9767),{toRDF:k}=g(240),{frameMergedOrDefault:X,cleanupNull:ce}=g(9193),{isArray:Y,isObject:oe,isString:ie}=g(8254),{isSubjectReference:$}=g(543),{expandIri:H,getInitialContext:v,process:L,processingMode:T}=g(9611),{compact:fe,compactIri:z}=g(8809),{createNodeMap:Te,createMergedNodeMap:de,mergeNodeMaps:we}=g(9783),{logEventHandler:Ie,logWarningEventHandler:De,safeEventHandler:tt,setDefaultEventHandler:Ye,setupEventHandler:Se,strictEventHandler:Fe,unhandledEventHandler:Pe}=g(3855),ze=function(Ce){const Ke={},Qe=new M({max:100});function _e(B,{documentLoader:I=Ce.documentLoader,...ae}){if(B&&"compactionMap"in B)throw new y('"compactionMap" not supported.',"jsonld.OptionsError");if(B&&"expansionMap"in B)throw new y('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:I},ae,B,{eventHandler:Se({options:B})})}return Ce.compact=function(){var B=E(function*(I,ae,K){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ae)throw new y("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===I)return null;let Le;(K=_e(K,{base:ie(I)?I:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new P({sharedCache:Qe})})).link&&(K.skipExpansion=!0),K.compactToRelative||delete K.base,Le=K.skipExpansion?I:yield Ce.expand(I,K);const Ve=yield Ce.processContext(v(K),ae,K);let me=yield fe({activeCtx:Ve,element:Le,options:K});K.compactArrays&&!K.graph&&Y(me)?1===me.length?me=me[0]:0===me.length&&(me={}):K.graph&&oe(me)&&(me=[me]),oe(ae)&&"@context"in ae&&(ae=ae["@context"]),ae=A.clone(ae),Y(ae)||(ae=[ae]);const Q=ae;ae=[];for(let C=0;C<Q.length;++C)(!oe(Q[C])||Object.keys(Q[C]).length>0)&&ae.push(Q[C]);const W=ae.length>0;if(1===ae.length&&(ae=ae[0]),Y(me)){const C=z({activeCtx:Ve,iri:"@graph",relativeTo:{vocab:!0}}),O=me;me={},W&&(me["@context"]=ae),me[C]=O}else if(oe(me)&&W){const C=me;me={"@context":ae};for(const O in C)me[O]=C[O]}return me});return function(I,ae,K){return B.apply(this,arguments)}}(),Ce.expand=function(){var B=E(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const K={},Le=[];if("expandContext"in(ae=_e(ae,{keepFreeFloatingNodes:!1,contextResolver:new P({sharedCache:Qe})}))){const W=A.clone(ae.expandContext);K.expandContext=oe(W)&&"@context"in W?W:{"@context":W},Le.push(K.expandContext)}let Ve;if(ie(I)){const W=yield Ce.get(I,ae);Ve=W.documentUrl,K.input=W.document,W.contextUrl&&(K.remoteContext={"@context":W.contextUrl},Le.push(K.remoteContext))}else K.input=A.clone(I);"base"in ae||(ae.base=Ve||"");let me=v(ae);for(const W of Le)me=yield L({activeCtx:me,localCtx:W,options:ae});let Q=yield N({activeCtx:me,element:K.input,options:ae});return oe(Q)&&"@graph"in Q&&1===Object.keys(Q).length?Q=Q["@graph"]:null===Q&&(Q=[]),Y(Q)||(Q=[Q]),Q});return function(I,ae){return B.apply(this,arguments)}}(),Ce.flatten=function(){var B=E(function*(I,ae,K){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ae="function"==typeof ae?null:ae||null,K=_e(K,{base:ie(I)?I:"",contextResolver:new P({sharedCache:Qe})});const Le=yield Ce.expand(I,K),Ve=j(Le);return null===ae?Ve:(K.graph=!0,K.skipExpansion=!0,yield Ce.compact(Ve,ae,K))});return function(I,ae,K){return B.apply(this,arguments)}}(),Ce.frame=function(){var B=E(function*(I,ae,K){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(K=_e(K,{base:ie(I)?I:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new P({sharedCache:Qe})}),ie(ae)){const ue=yield Ce.get(ae,K);if(ae=ue.document,ue.contextUrl){let Ge=ae["@context"];Ge?Y(Ge)?Ge.push(ue.contextUrl):Ge=[Ge,ue.contextUrl]:Ge=ue.contextUrl,ae["@context"]=Ge}}const Le=ae&&ae["@context"]||{},Ve=yield Ce.processContext(v(K),Le,K);K.hasOwnProperty("omitGraph")||(K.omitGraph=T(Ve,1.1)),K.hasOwnProperty("pruneBlankNodeIdentifiers")||(K.pruneBlankNodeIdentifiers=T(Ve,1.1));const me=yield Ce.expand(I,K),Q={...K};Q.isFrame=!0,Q.keepFreeFloatingNodes=!0;const W=yield Ce.expand(ae,Q),C=Object.keys(ae).map(ue=>H(Ve,ue,{vocab:!0}));Q.merged=!C.includes("@graph"),Q.is11=T(Ve,1.1);const O=X(me,W,Q);Q.graph=!K.omitGraph,Q.skipExpansion=!0,Q.link={},Q.framing=!0;let he=yield Ce.compact(O,Le,Q);return Q.link={},he=ce(he,Q),he});return function(I,ae,K){return B.apply(this,arguments)}}(),Ce.link=function(){var B=E(function*(I,ae,K){const Le={};return ae&&(Le["@context"]=ae),Le["@embed"]="@link",Ce.frame(I,Le,K)});return function(I,ae,K){return B.apply(this,arguments)}}(),Ce.normalize=Ce.canonize=function(){var B=E(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ae=_e(ae,{base:ie(I)?I:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new P({sharedCache:Qe})}))){if("application/n-quads"!==ae.inputFormat&&"application/nquads"!==ae.inputFormat)throw new y("Unknown canonicalization input format.","jsonld.CanonizeError");const Ve=U.parse(I);return b.canonize(Ve,ae)}const K={...ae};delete K.format,K.produceGeneralizedRdf=!1;const Le=yield Ce.toRDF(I,K);return b.canonize(Le,ae)});return function(I,ae){return B.apply(this,arguments)}}(),Ce.fromRDF=function(){var B=E(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ae=_e(ae,{format:ie(I)?"application/n-quads":void 0});const{format:K}=ae;let{rdfParser:Le}=ae;if(K){if(Le=Le||Ke[K],!Le)throw new y("Unknown input format.","jsonld.UnknownFormat",{format:K})}else Le=()=>I;const Ve=yield Le(I);return le(Ve,ae)});return function(I,ae){return B.apply(this,arguments)}}(),Ce.toRDF=function(){var B=E(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let K;K=(ae=_e(ae,{base:ie(I)?I:"",skipExpansion:!1,contextResolver:new P({sharedCache:Qe})})).skipExpansion?I:yield Ce.expand(I,ae);const Le=k(K,ae);if(ae.format){if("application/n-quads"===ae.format||"application/nquads"===ae.format)return U.serialize(Le);throw new y("Unknown output format.","jsonld.UnknownFormat",{format:ae.format})}return Le});return function(I,ae){return B.apply(this,arguments)}}(),Ce.createNodeMap=function(){var B=E(function*(I,ae){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ae=_e(ae,{base:ie(I)?I:"",contextResolver:new P({sharedCache:Qe})});const K=yield Ce.expand(I,ae);return de(K,ae)});return function(I,ae){return B.apply(this,arguments)}}(),Ce.merge=function(){var B=E(function*(I,ae,K){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Y(I))throw new TypeError('Could not merge, "docs" must be an array.');ae="function"==typeof ae?null:ae||null,K=_e(K,{contextResolver:new P({sharedCache:Qe})});const Le=yield Promise.all(I.map(ue=>{const Ge={...K};return Ce.expand(ue,Ge)}));let Ve=!0;"mergeNodes"in K&&(Ve=K.mergeNodes);const me=K.issuer||new _("_:b"),Q={"@default":{}};for(let ue=0;ue<Le.length;++ue){const Ge=A.relabelBlankNodes(Le[ue],{issuer:new _("_:b"+ue+"-")}),qe=Ve||0===ue?Q:{"@default":{}};if(Te(Ge,qe,"@default",me),qe!==Q)for(const ft in qe){const Pt=qe[ft];if(!(ft in Q)){Q[ft]=Pt;continue}const dt=Q[ft];for(const Gt in Pt)Gt in dt||(dt[Gt]=Pt[Gt])}}const W=we(Q),C=[],O=Object.keys(W).sort();for(let ue=0;ue<O.length;++ue){const Ge=W[O[ue]];$(Ge)||C.push(Ge)}return null===ae?C:(K.graph=!0,K.skipExpansion=!0,yield Ce.compact(C,ae,K))});return function(I,ae,K){return B.apply(this,arguments)}}(),Object.defineProperty(Ce,"documentLoader",{get:()=>Ce._documentLoader,set:B=>Ce._documentLoader=B}),Ce.documentLoader=function(){var B=E(function*(I){throw new y("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:I})});return function(I){return B.apply(this,arguments)}}(),Ce.get=function(){var B=E(function*(I,ae){let K;K="function"==typeof ae.documentLoader?ae.documentLoader:Ce.documentLoader;const Le=yield K(I);try{if(!Le.document)throw new y("No remote document found at the given URL.","jsonld.NullRemoteDocument");ie(Le.document)&&(Le.document=JSON.parse(Le.document))}catch(Ve){throw new y("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ve,remoteDoc:Le})}return Le});return function(I,ae){return B.apply(this,arguments)}}(),Ce.processContext=function(){var B=E(function*(I,ae,K){return K=_e(K,{base:"",contextResolver:new P({sharedCache:Qe})}),null===ae?v(K):(ae=A.clone(ae),oe(ae)&&"@context"in ae||(ae={"@context":ae}),L({activeCtx:I,localCtx:ae,options:K}))});return function(I,ae,K){return B.apply(this,arguments)}}(),Ce.getContextValue=g(9611).getContextValue,Ce.documentLoaders={},Ce.useDocumentLoader=function(B){if(!(B in Ce.documentLoaders))throw new y('Unknown document loader type: "'+B+'"',"jsonld.UnknownDocumentLoader",{type:B});Ce.documentLoader=Ce.documentLoaders[B].apply(Ce,Array.prototype.slice.call(arguments,1))},Ce.registerRDFParser=function(B,I){Ke[B]=I},Ce.unregisterRDFParser=function(B){delete Ke[B]},Ce.registerRDFParser("application/n-quads",U.parse),Ce.registerRDFParser("application/nquads",U.parse),Ce.url=g(2651),Ce.logEventHandler=Ie,Ce.logWarningEventHandler=De,Ce.safeEventHandler=tt,Ce.setDefaultEventHandler=Ye,Ce.strictEventHandler=Fe,Ce.unhandledEventHandler=Pe,Ce.util=A,Object.assign(Ce,A),Ce.promises=Ce,Ce.RequestQueue=g(4044),Ce.JsonLdProcessor=g(1828)(Ce),R.setupGlobals(Ce),R.setupDocumentLoaders(Ce),Ce},ge=function(){return ze(function(){return ge()})};ze(ge),ne.exports=ge},9783:(ne,Z,g)=>{"use strict";const{isKeyword:E}=g(9611),b=g(543),R=g(8254),A=g(3521),P=g(1874),_={};ne.exports=_,_.createMergedNodeMap=(y,M)=>{const U=(M=M||{}).issuer||new A.IdentifierIssuer("_:b"),N={"@default":{}};return _.createNodeMap(y,N,"@default",U),_.mergeNodeMaps(N)},_.createNodeMap=(y,M,U,N,j,le)=>{if(R.isArray(y)){for(const Y of y)_.createNodeMap(Y,M,U,N,void 0,le);return}if(!R.isObject(y))return void(le&&le.push(y));if(b.isValue(y)){if("@type"in y){let Y=y["@type"];0===Y.indexOf("_:")&&(y["@type"]=Y=N.getId(Y))}return void(le&&le.push(y))}if(le&&b.isList(y)){const Y=[];return _.createNodeMap(y["@list"],M,U,N,j,Y),void le.push({"@list":Y})}if("@type"in y){const Y=y["@type"];for(const oe of Y)0===oe.indexOf("_:")&&N.getId(oe)}R.isUndefined(j)&&(j=b.isBlankNode(y)?N.getId(y["@id"]):y["@id"]),le&&le.push({"@id":j});const k=M[U],X=k[j]=k[j]||{};X["@id"]=j;const ce=Object.keys(y).sort();for(let Y of ce){if("@id"===Y)continue;if("@reverse"===Y){const ie={"@id":j},$=y["@reverse"];for(const H in $){const v=$[H];for(const L of v){let T=L["@id"];b.isBlankNode(L)&&(T=N.getId(T)),_.createNodeMap(L,M,U,N,T),A.addValue(k[T],H,ie,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===Y){j in M||(M[j]={}),_.createNodeMap(y[Y],M,j,N);continue}if("@included"===Y){_.createNodeMap(y[Y],M,U,N);continue}if("@type"!==Y&&E(Y)){if("@index"===Y&&Y in X&&(y[Y]!==X[Y]||y[Y]["@id"]!==X[Y]["@id"]))throw new P("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:X});X[Y]=y[Y];continue}const oe=y[Y];if(0===Y.indexOf("_:")&&(Y=N.getId(Y)),0!==oe.length)for(let ie of oe)if("@type"===Y&&(ie=0===ie.indexOf("_:")?N.getId(ie):ie),b.isSubject(ie)||b.isSubjectReference(ie)){if("@id"in ie&&!ie["@id"])continue;const $=b.isBlankNode(ie)?N.getId(ie["@id"]):ie["@id"];A.addValue(X,Y,{"@id":$},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ie,M,U,N,$)}else if(b.isValue(ie))A.addValue(X,Y,ie,{propertyIsArray:!0,allowDuplicate:!1});else if(b.isList(ie)){const $=[];_.createNodeMap(ie["@list"],M,U,N,j,$),ie={"@list":$},A.addValue(X,Y,ie,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ie,M,U,N,j),A.addValue(X,Y,ie,{propertyIsArray:!0,allowDuplicate:!1});else A.addValue(X,Y,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=y=>{const M={};for(const U of Object.keys(y).sort())for(const N of Object.keys(y[U]).sort()){const j=y[U][N];N in M||(M[N]={"@id":N});const le=M[N];for(const k of Object.keys(j).sort())if(E(k)&&"@type"!==k)le[k]=A.clone(j[k]);else for(const X of j[k])A.addValue(le,k,A.clone(X),{propertyIsArray:!0,allowDuplicate:!1})}return M},_.mergeNodeMaps=y=>{const M=y["@default"],U=Object.keys(y).sort();for(const N of U){if("@default"===N)continue;const j=y[N];let le=M[N];le?"@graph"in le||(le["@graph"]=[]):M[N]=le={"@id":N,"@graph":[]};const k=le["@graph"];for(const X of Object.keys(j).sort()){const ce=j[X];b.isSubjectReference(ce)||k.push(ce)}}return M}},8924:(ne,Z,g)=>{"use strict";const E=g(627),b={};ne.exports=b,b.setupDocumentLoaders=function(R){typeof XMLHttpRequest<"u"&&(R.documentLoaders.xhr=E,R.useDocumentLoader("xhr"))},b.setupGlobals=function(R){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:R.JsonLdProcessor})}},240:(ne,Z,g)=>{"use strict";const{createNodeMap:E}=g(9783),{isKeyword:b}=g(9611),R=g(543),A=g(5041),P=g(8254),_=g(3521),{handleEvent:y}=g(3855),{RDF_FIRST:M,RDF_REST:U,RDF_NIL:N,RDF_TYPE:j,RDF_JSON_LITERAL:le,RDF_LANGSTRING:k,XSD_BOOLEAN:X,XSD_DOUBLE:ce,XSD_INTEGER:Y,XSD_STRING:oe}=g(6982),{isAbsolute:ie}=g(2651),$={};function H(T,fe,z,Te,de){const we=Object.keys(fe).sort();for(const Ie of we){const De=fe[Ie],tt=Object.keys(De).sort();for(let Ye of tt){const Se=De[Ye];if("@type"===Ye)Ye=j;else if(b(Ye))continue;for(const Fe of Se){const Pe={termType:Ie.startsWith("_:")?"BlankNode":"NamedNode",value:Ie};if(!ie(Ie)){de.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Ie}},options:de});continue}const ze={termType:Ye.startsWith("_:")?"BlankNode":"NamedNode",value:Ye};if(!ie(Ye)){de.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ye}},options:de});continue}if("BlankNode"===ze.termType&&!de.produceGeneralizedRdf){de.eventHandler&&y({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:Te.getOldIds().find(Ce=>Te.getId(Ce)===Ye)}},options:de});continue}const ge=L(Fe,Te,T,z,de.rdfDirection,de);ge&&T.push({subject:Pe,predicate:ze,object:ge,graph:z})}}}}function L(T,fe,z,Te,de,we){const Ie={};if(R.isValue(T)){Ie.termType="Literal",Ie.value=void 0,Ie.datatype={termType:"NamedNode"};let De=T["@value"];const tt=T["@type"]||null;"@json"===tt?(Ie.value=A(De),Ie.datatype.value=le):P.isBoolean(De)?(Ie.value=De.toString(),Ie.datatype.value=tt||X):P.isDouble(De)||tt===ce?(P.isDouble(De)||(De=parseFloat(De)),Ie.value=De.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ie.datatype.value=tt||ce):P.isNumber(De)?(Ie.value=De.toFixed(0),Ie.datatype.value=tt||Y):"i18n-datatype"===de&&"@direction"in T?(Ie.datatype.value="https://www.w3.org/ns/i18n#"+(T["@language"]||"")+`_${T["@direction"]}`,Ie.value=De):"@language"in T?(Ie.value=De,Ie.datatype.value=tt||k,Ie.language=T["@language"]):(Ie.value=De,Ie.datatype.value=tt||oe)}else if(R.isList(T)){const De=function v(T,fe,z,Te,de,we){const Ie={termType:"NamedNode",value:M},De={termType:"NamedNode",value:U},tt={termType:"NamedNode",value:N},Ye=T.pop(),Se=Ye?{termType:"BlankNode",value:fe.getId()}:tt;let Fe=Se;for(const Pe of T){const ze=L(Pe,fe,z,Te,de,we),ge={termType:"BlankNode",value:fe.getId()};z.push({subject:Fe,predicate:Ie,object:ze,graph:Te}),z.push({subject:Fe,predicate:De,object:ge,graph:Te}),Fe=ge}if(Ye){const Pe=L(Ye,fe,z,Te,de,we);z.push({subject:Fe,predicate:Ie,object:Pe,graph:Te}),z.push({subject:Fe,predicate:De,object:tt,graph:Te})}return Se}(T["@list"],fe,z,Te,de,we);Ie.termType=De.termType,Ie.value=De.value}else{const De=P.isObject(T)?T["@id"]:T;Ie.termType=De.startsWith("_:")?"BlankNode":"NamedNode",Ie.value=De}return"NamedNode"!==Ie.termType||ie(Ie.value)?Ie:(we.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Ie.value}},options:we}),null)}ne.exports=$,$.toRDF=(T,fe)=>{const z=new _.IdentifierIssuer("_:b"),Te={"@default":{}};E(T,Te,"@default",z);const de=[],we=Object.keys(Te).sort();for(const Ie of we){let De;if("@default"===Ie)De={termType:"DefaultGraph",value:""};else{if(!ie(Ie)){fe.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Ie}},options:fe});continue}De=Ie.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},De.value=Ie}H(de,Te[Ie],De,z,fe)}return de}},8254:ne=>{"use strict";const Z={};ne.exports=Z,Z.isArray=Array.isArray,Z.isBoolean=g=>"boolean"==typeof g||"[object Boolean]"===Object.prototype.toString.call(g),Z.isDouble=g=>Z.isNumber(g)&&(-1!==String(g).indexOf(".")||Math.abs(g)>=1e21),Z.isEmptyObject=g=>Z.isObject(g)&&0===Object.keys(g).length,Z.isNumber=g=>"number"==typeof g||"[object Number]"===Object.prototype.toString.call(g),Z.isNumeric=g=>!isNaN(parseFloat(g))&&isFinite(g),Z.isObject=g=>"[object Object]"===Object.prototype.toString.call(g),Z.isString=g=>"string"==typeof g||"[object String]"===Object.prototype.toString.call(g),Z.isUndefined=g=>typeof g>"u"},2651:(ne,Z,g)=>{"use strict";const E=g(8254),b={};ne.exports=b,b.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.parse=(A,P)=>{const _={},y=b.parsers[P||"full"],M=y.regex.exec(A);let U=y.keys.length;for(;U--;)_[y.keys[U]]=void 0===M[U]?null:M[U];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=b.removeDotSegments(_.path),_},b.prependBase=(A,P)=>{if(null===A||b.isAbsolute(P))return P;(!A||E.isString(A))&&(A=b.parse(A||""));const _=b.parse(P),y={protocol:A.protocol||""};if(null!==_.authority)y.authority=_.authority,y.path=_.path,y.query=_.query;else if(y.authority=A.authority,""===_.path)y.path=A.path,y.query=null!==_.query?_.query:A.query;else{if(0===_.path.indexOf("/"))y.path=_.path;else{let U=A.path;U=U.substr(0,U.lastIndexOf("/")+1),(U.length>0||A.authority)&&"/"!==U.substr(-1)&&(U+="/"),U+=_.path,y.path=U}y.query=_.query}""!==_.path&&(y.path=b.removeDotSegments(y.path));let M=y.protocol;return null!==y.authority&&(M+="//"+y.authority),M+=y.path,null!==y.query&&(M+="?"+y.query),null!==_.fragment&&(M+="#"+_.fragment),""===M&&(M="./"),M},b.removeBase=(A,P)=>{if(null===A)return P;(!A||E.isString(A))&&(A=b.parse(A||""));let _="";if(""!==A.href?_+=(A.protocol||"")+"//"+(A.authority||""):P.indexOf("//")&&(_+="//"),0!==P.indexOf(_))return P;const y=b.parse(P.substr(_.length)),M=A.normalizedPath.split("/"),U=y.normalizedPath.split("/"),N=y.fragment||y.query?0:1;for(;M.length>0&&U.length>N&&M[0]===U[0];)M.shift(),U.shift();let j="";if(M.length>0){M.pop();for(let le=0;le<M.length;++le)j+="../"}return j+=U.join("/"),null!==y.query&&(j+="?"+y.query),null!==y.fragment&&(j+="#"+y.fragment),""===j&&(j="./"),j},b.removeDotSegments=A=>{if(0===A.length)return"";const P=A.split("/"),_=[];for(;P.length>0;){const y=P.shift(),M=0===P.length;"."!==y?".."!==y?_.push(y):(_.pop(),M&&_.push("")):M&&_.push("")}return"/"===A[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const R=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;b.isAbsolute=A=>E.isString(A)&&R.test(A),b.isRelative=A=>E.isString(A)},3521:(ne,Z,g)=>{"use strict";const E=g(543),b=g(8254),R=g(1986).IdentifierIssuer,A=g(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,y=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,M=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,N_headers_accept="application/ld+json, application/json",j={};function le(k,X){if(b.isArray(X))for(let ce=0;ce<X.length;++ce)X[ce]=le(k,X[ce]);else if(E.isList(X))X["@list"]=le(k,X["@list"]);else if(b.isObject(X)){E.isBlankNode(X)&&(X["@id"]=k.getId(X["@id"]));const ce=Object.keys(X).sort();for(let Y=0;Y<ce.length;++Y){const oe=ce[Y];"@id"!==oe&&(X[oe]=le(k,X[oe]))}}return X}ne.exports=j,j.IdentifierIssuer=R,j.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,j.REGEX_KEYWORD=/^@[a-zA-Z]+$/,j.clone=function(k){if(k&&"object"==typeof k){let X;if(b.isArray(k)){X=[];for(let ce=0;ce<k.length;++ce)X[ce]=j.clone(k[ce])}else if(k instanceof Map){X=new Map;for(const[ce,Y]of k)X.set(ce,j.clone(Y))}else if(k instanceof Set){X=new Set;for(const ce of k)X.add(j.clone(ce))}else if(b.isObject(k)){X={};for(const ce in k)X[ce]=j.clone(k[ce])}else X=k.toString();return X}return k},j.asArray=function(k){return Array.isArray(k)?k:[k]},j.buildHeaders=(k={})=>{if(Object.keys(k).some(ce=>"accept"===ce.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+N_headers_accept+'" is supported.');return Object.assign({Accept:N_headers_accept},k)},j.parseLinkHeader=k=>{const X={},ce=k.match(_);for(let Y=0;Y<ce.length;++Y){let oe=ce[Y].match(y);if(!oe)continue;const ie={target:oe[1]},$=oe[2];for(;oe=M.exec($);)ie[oe[1]]=void 0===oe[2]?oe[3]:oe[2];const H=ie.rel||"";Array.isArray(X[H])?X[H].push(ie):X[H]=X.hasOwnProperty(H)?[X[H],ie]:ie}return X},j.validateTypeValue=(k,X)=>{if(!(b.isString(k)||b.isArray(k)&&k.every(ce=>b.isString(ce)))){if(X&&b.isObject(k))switch(Object.keys(k).length){case 0:return;case 1:if("@default"in k&&j.asArray(k["@default"]).every(ce=>b.isString(ce)))return}throw new A('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:k})}},j.hasProperty=(k,X)=>{if(k.hasOwnProperty(X)){const ce=k[X];return!b.isArray(ce)||ce.length>0}return!1},j.hasValue=(k,X,ce)=>{if(j.hasProperty(k,X)){let Y=k[X];const oe=E.isList(Y);if(b.isArray(Y)||oe){oe&&(Y=Y["@list"]);for(let ie=0;ie<Y.length;++ie)if(j.compareValues(ce,Y[ie]))return!0}else if(!b.isArray(ce))return j.compareValues(ce,Y)}return!1},j.addValue=(k,X,ce,Y)=>{if("propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1),"valueIsArray"in Y||(Y.valueIsArray=!1),"allowDuplicate"in Y||(Y.allowDuplicate=!0),"prependValue"in Y||(Y.prependValue=!1),Y.valueIsArray)k[X]=ce;else if(b.isArray(ce)){0===ce.length&&Y.propertyIsArray&&!k.hasOwnProperty(X)&&(k[X]=[]),Y.prependValue&&(ce=ce.concat(k[X]),k[X]=[]);for(let oe=0;oe<ce.length;++oe)j.addValue(k,X,ce[oe],Y)}else if(k.hasOwnProperty(X)){const oe=!Y.allowDuplicate&&j.hasValue(k,X,ce);!b.isArray(k[X])&&(!oe||Y.propertyIsArray)&&(k[X]=[k[X]]),oe||(Y.prependValue?k[X].unshift(ce):k[X].push(ce))}else k[X]=Y.propertyIsArray?[ce]:ce},j.getValues=(k,X)=>[].concat(k[X]||[]),j.removeProperty=(k,X)=>{delete k[X]},j.removeValue=(k,X,ce,Y)=>{"propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1);const oe=j.getValues(k,X).filter(ie=>!j.compareValues(ie,ce));0===oe.length?j.removeProperty(k,X):k[X]=1!==oe.length||Y.propertyIsArray?oe:oe[0]},j.relabelBlankNodes=(k,X)=>le((X=X||{}).issuer||new R("_:b"),k),j.compareValues=(k,X)=>!!(k===X||E.isValue(k)&&E.isValue(X)&&k["@value"]===X["@value"]&&k["@type"]===X["@type"]&&k["@language"]===X["@language"]&&k["@index"]===X["@index"])||!!(b.isObject(k)&&"@id"in k&&b.isObject(X)&&"@id"in X)&&k["@id"]===X["@id"],j.compareShortestLeast=(k,X)=>k.length<X.length?-1:X.length<k.length?1:k===X?0:k<X?-1:1},5041:ne=>{"use strict";ne.exports=function Z(g){return null===g||"object"!=typeof g||null!=g.toJSON?JSON.stringify(g):Array.isArray(g)?"["+g.reduce((E,b,R)=>E+(0===R?"":",")+Z(void 0===b||"symbol"==typeof b?null:b),"")+"]":"{"+Object.keys(g).sort().reduce((E,b,R)=>void 0===g[b]||"symbol"==typeof g[b]?E:E+(0===E.length?"":",")+Z(b)+":"+Z(g[b]),"")+"}"}},1072:(ne,Z,g)=>{"use strict";const E=g(4439),b=Symbol("max"),R=Symbol("length"),A=Symbol("lengthCalculator"),P=Symbol("allowStale"),_=Symbol("maxAge"),y=Symbol("dispose"),M=Symbol("noDisposeOnSet"),U=Symbol("lruList"),N=Symbol("cache"),j=Symbol("updateAgeOnGet"),le=()=>1,X=(H,v,L)=>{const T=H[N].get(v);if(T){const fe=T.value;if(ce(H,fe)){if(oe(H,T),!H[P])return}else L&&(H[j]&&(T.value.now=Date.now()),H[U].unshiftNode(T));return fe.value}},ce=(H,v)=>{if(!v||!v.maxAge&&!H[_])return!1;const L=Date.now()-v.now;return v.maxAge?L>v.maxAge:H[_]&&L>H[_]},Y=H=>{if(H[R]>H[b])for(let v=H[U].tail;H[R]>H[b]&&null!==v;){const L=v.prev;oe(H,v),v=L}},oe=(H,v)=>{if(v){const L=v.value;H[y]&&H[y](L.key,L.value),H[R]-=L.length,H[N].delete(L.key),H[U].removeNode(v)}};class ie{constructor(v,L,T,fe,z){this.key=v,this.value=L,this.length=T,this.now=fe,this.maxAge=z||0}}const $=(H,v,L,T)=>{let fe=L.value;ce(H,fe)&&(oe(H,L),H[P]||(fe=void 0)),fe&&v.call(T,fe.value,fe.key,H)};ne.exports=class k{constructor(v){if("number"==typeof v&&(v={max:v}),v||(v={}),v.max&&("number"!=typeof v.max||v.max<0))throw new TypeError("max must be a non-negative number");this[b]=v.max||1/0;const T=v.length||le;if(this[A]="function"!=typeof T?le:T,this[P]=v.stale||!1,v.maxAge&&"number"!=typeof v.maxAge)throw new TypeError("maxAge must be a number");this[_]=v.maxAge||0,this[y]=v.dispose,this[M]=v.noDisposeOnSet||!1,this[j]=v.updateAgeOnGet||!1,this.reset()}set max(v){if("number"!=typeof v||v<0)throw new TypeError("max must be a non-negative number");this[b]=v||1/0,Y(this)}get max(){return this[b]}set allowStale(v){this[P]=!!v}get allowStale(){return this[P]}set maxAge(v){if("number"!=typeof v)throw new TypeError("maxAge must be a non-negative number");this[_]=v,Y(this)}get maxAge(){return this[_]}set lengthCalculator(v){"function"!=typeof v&&(v=le),v!==this[A]&&(this[A]=v,this[R]=0,this[U].forEach(L=>{L.length=this[A](L.value,L.key),this[R]+=L.length})),Y(this)}get lengthCalculator(){return this[A]}get length(){return this[R]}get itemCount(){return this[U].length}rforEach(v,L){L=L||this;for(let T=this[U].tail;null!==T;){const fe=T.prev;$(this,v,T,L),T=fe}}forEach(v,L){L=L||this;for(let T=this[U].head;null!==T;){const fe=T.next;$(this,v,T,L),T=fe}}keys(){return this[U].toArray().map(v=>v.key)}values(){return this[U].toArray().map(v=>v.value)}reset(){this[y]&&this[U]&&this[U].length&&this[U].forEach(v=>this[y](v.key,v.value)),this[N]=new Map,this[U]=new E,this[R]=0}dump(){return this[U].map(v=>!ce(this,v)&&{k:v.key,v:v.value,e:v.now+(v.maxAge||0)}).toArray().filter(v=>v)}dumpLru(){return this[U]}set(v,L,T){if((T=T||this[_])&&"number"!=typeof T)throw new TypeError("maxAge must be a number");const fe=T?Date.now():0,z=this[A](L,v);if(this[N].has(v)){if(z>this[b])return oe(this,this[N].get(v)),!1;const we=this[N].get(v).value;return this[y]&&(this[M]||this[y](v,we.value)),we.now=fe,we.maxAge=T,we.value=L,this[R]+=z-we.length,we.length=z,this.get(v),Y(this),!0}const Te=new ie(v,L,z,fe,T);return Te.length>this[b]?(this[y]&&this[y](v,L),!1):(this[R]+=Te.length,this[U].unshift(Te),this[N].set(v,this[U].head),Y(this),!0)}has(v){if(!this[N].has(v))return!1;const L=this[N].get(v).value;return!ce(this,L)}get(v){return X(this,v,!0)}peek(v){return X(this,v,!1)}pop(){const v=this[U].tail;return v?(oe(this,v),v.value):null}del(v){oe(this,this[N].get(v))}load(v){this.reset();const L=Date.now();for(let T=v.length-1;T>=0;T--){const fe=v[T],z=fe.e||0;if(0===z)this.set(fe.k,fe.v);else{const Te=z-L;Te>0&&this.set(fe.k,fe.v,Te)}}}prune(){this[N].forEach((v,L)=>X(this,L,!1))}}},6506:(ne,Z,g)=>{var R=g(8745)(g(8492),"DataView");ne.exports=R},9618:(ne,Z,g)=>{var E=g(5602),b=g(1499),R=g(2990),A=g(480),P=g(4469);function _(y){var M=-1,U=null==y?0:y.length;for(this.clear();++M<U;){var N=y[M];this.set(N[0],N[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=R,_.prototype.has=A,_.prototype.set=P,ne.exports=_},3597:(ne,Z,g)=>{var E=g(9365),b=g(9343),R=g(4779),A=g(1509),P=g(7137);function _(y){var M=-1,U=null==y?0:y.length;for(this.clear();++M<U;){var N=y[M];this.set(N[0],N[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=R,_.prototype.has=A,_.prototype.set=P,ne.exports=_},1136:(ne,Z,g)=>{var R=g(8745)(g(8492),"Map");ne.exports=R},1811:(ne,Z,g)=>{var E=g(3413),b=g(5419),R=g(7253),A=g(1115),P=g(6648);function _(y){var M=-1,U=null==y?0:y.length;for(this.clear();++M<U;){var N=y[M];this.set(N[0],N[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=R,_.prototype.has=A,_.prototype.set=P,ne.exports=_},641:(ne,Z,g)=>{var R=g(8745)(g(8492),"Promise");ne.exports=R},1732:(ne,Z,g)=>{var R=g(8745)(g(8492),"Set");ne.exports=R},5960:(ne,Z,g)=>{var E=g(1811),b=g(6151),R=g(2154);function A(P){var _=-1,y=null==P?0:P.length;for(this.__data__=new E;++_<y;)this.add(P[_])}A.prototype.add=A.prototype.push=b,A.prototype.has=R,ne.exports=A},1339:(ne,Z,g)=>{var E=g(3597),b=g(9488),R=g(5943),A=g(5456),P=g(4793),_=g(8689);function y(M){var U=this.__data__=new E(M);this.size=U.size}y.prototype.clear=b,y.prototype.delete=R,y.prototype.get=A,y.prototype.has=P,y.prototype.set=_,ne.exports=y},1763:(ne,Z,g)=>{var E=g(8492);ne.exports=E.Symbol},2760:(ne,Z,g)=>{var E=g(8492);ne.exports=E.Uint8Array},6413:(ne,Z,g)=>{var R=g(8745)(g(8492),"WeakMap");ne.exports=R},7910:ne=>{ne.exports=function Z(g,E,b){switch(b.length){case 0:return g.call(E);case 1:return g.call(E,b[0]);case 2:return g.call(E,b[0],b[1]);case 3:return g.call(E,b[0],b[1],b[2])}return g.apply(E,b)}},2134:ne=>{ne.exports=function Z(g,E){for(var b=-1,R=null==g?0:g.length,A=0,P=[];++b<R;){var _=g[b];E(_,b,g)&&(P[A++]=_)}return P}},1384:(ne,Z,g)=>{var E=g(5025),b=g(1955),R=g(2261),A=g(7525),P=g(5188),_=g(4868),M=Object.prototype.hasOwnProperty;ne.exports=function U(N,j){var le=R(N),k=!le&&b(N),X=!le&&!k&&A(N),ce=!le&&!k&&!X&&_(N),Y=le||k||X||ce,oe=Y?E(N.length,String):[],ie=oe.length;for(var $ in N)(j||M.call(N,$))&&(!Y||!("length"==$||X&&("offset"==$||"parent"==$)||ce&&("buffer"==$||"byteLength"==$||"byteOffset"==$)||P($,ie)))&&oe.push($);return oe}},3880:ne=>{ne.exports=function Z(g,E){for(var b=-1,R=null==g?0:g.length,A=Array(R);++b<R;)A[b]=E(g[b],b,g);return A}},7853:ne=>{ne.exports=function Z(g,E){for(var b=-1,R=E.length,A=g.length;++b<R;)g[A+b]=E[b];return g}},5916:ne=>{ne.exports=function Z(g,E){for(var b=-1,R=null==g?0:g.length;++b<R;)if(E(g[b],b,g))return!0;return!1}},4056:(ne,Z,g)=>{var E=g(7826);ne.exports=function b(R,A){for(var P=R.length;P--;)if(E(R[P][0],A))return P;return-1}},5103:(ne,Z,g)=>{var E=g(7794),R=g(9386)(E);ne.exports=R},1883:(ne,Z,g)=>{var E=g(7853),b=g(2241);ne.exports=function R(A,P,_,y,M){var U=-1,N=A.length;for(_||(_=b),M||(M=[]);++U<N;){var j=A[U];P>0&&_(j)?P>1?R(j,P-1,_,y,M):E(M,j):y||(M[M.length]=j)}return M}},6483:(ne,Z,g)=>{var b=g(2086)();ne.exports=b},7794:(ne,Z,g)=>{var E=g(6483),b=g(4614);ne.exports=function R(A,P){return A&&E(A,P,b)}},2202:(ne,Z,g)=>{var E=g(4826),b=g(8916);ne.exports=function R(A,P){for(var _=0,y=(P=E(P,A)).length;null!=A&&_<y;)A=A[b(P[_++])];return _&&_==y?A:void 0}},7427:(ne,Z,g)=>{var E=g(7853),b=g(2261);ne.exports=function R(A,P,_){var y=P(A);return b(A)?y:E(y,_(A))}},4590:(ne,Z,g)=>{var E=g(1763),b=g(5933),R=g(9243),_=E?E.toStringTag:void 0;ne.exports=function y(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":_&&_ in Object(M)?b(M):R(M)}},3274:ne=>{ne.exports=function Z(g,E){return null!=g&&E in Object(g)}},3022:(ne,Z,g)=>{var E=g(4590),b=g(3714);ne.exports=function A(P){return b(P)&&"[object Arguments]"==E(P)}},7108:(ne,Z,g)=>{var E=g(7946),b=g(3714);ne.exports=function R(A,P,_,y,M){return A===P||(null==A||null==P||!b(A)&&!b(P)?A!=A&&P!=P:E(A,P,_,y,R,M))}},7946:(ne,Z,g)=>{var E=g(1339),b=g(7469),R=g(1642),A=g(9462),P=g(2472),_=g(2261),y=g(7525),M=g(4868),N="[object Arguments]",j="[object Array]",le="[object Object]",X=Object.prototype.hasOwnProperty;ne.exports=function ce(Y,oe,ie,$,H,v){var L=_(Y),T=_(oe),fe=L?j:P(Y),z=T?j:P(oe),Te=(fe=fe==N?le:fe)==le,de=(z=z==N?le:z)==le,we=fe==z;if(we&&y(Y)){if(!y(oe))return!1;L=!0,Te=!1}if(we&&!Te)return v||(v=new E),L||M(Y)?b(Y,oe,ie,$,H,v):R(Y,oe,fe,ie,$,H,v);if(!(1&ie)){var Ie=Te&&X.call(Y,"__wrapped__"),De=de&&X.call(oe,"__wrapped__");if(Ie||De){var tt=Ie?Y.value():Y,Ye=De?oe.value():oe;return v||(v=new E),H(tt,Ye,ie,$,v)}}return!!we&&(v||(v=new E),A(Y,oe,ie,$,H,v))}},2527:(ne,Z,g)=>{var E=g(1339),b=g(7108);ne.exports=function P(_,y,M,U){var N=M.length,j=N,le=!U;if(null==_)return!j;for(_=Object(_);N--;){var k=M[N];if(le&&k[2]?k[1]!==_[k[0]]:!(k[0]in _))return!1}for(;++N<j;){var X=(k=M[N])[0],ce=_[X],Y=k[1];if(le&&k[2]){if(void 0===ce&&!(X in _))return!1}else{var oe=new E;if(U)var ie=U(ce,Y,X,_,y,oe);if(!(void 0===ie?b(Y,ce,3,U,oe):ie))return!1}}return!0}},1082:(ne,Z,g)=>{var E=g(6861),b=g(9950),R=g(9794),A=g(7075),_=/^\[object .+?Constructor\]$/,j=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");ne.exports=function le(k){return!(!R(k)||b(k))&&(E(k)?j:_).test(A(k))}},8902:(ne,Z,g)=>{var E=g(4590),b=g(7765),R=g(3714),we={};we["[object Float32Array]"]=we["[object Float64Array]"]=we["[object Int8Array]"]=we["[object Int16Array]"]=we["[object Int32Array]"]=we["[object Uint8Array]"]=we["[object Uint8ClampedArray]"]=we["[object Uint16Array]"]=we["[object Uint32Array]"]=!0,we["[object Arguments]"]=we["[object Array]"]=we["[object ArrayBuffer]"]=we["[object Boolean]"]=we["[object DataView]"]=we["[object Date]"]=we["[object Error]"]=we["[object Function]"]=we["[object Map]"]=we["[object Number]"]=we["[object Object]"]=we["[object RegExp]"]=we["[object Set]"]=we["[object String]"]=we["[object WeakMap]"]=!1,ne.exports=function Ie(De){return R(De)&&b(De.length)&&!!we[E(De)]}},1627:(ne,Z,g)=>{var E=g(2924),b=g(8526),R=g(5657),A=g(2261),P=g(2692);ne.exports=function _(y){return"function"==typeof y?y:null==y?R:"object"==typeof y?A(y)?b(y[0],y[1]):E(y):P(y)}},190:(ne,Z,g)=>{var E=g(6587),b=g(366),A=Object.prototype.hasOwnProperty;ne.exports=function P(_){if(!E(_))return b(_);var y=[];for(var M in Object(_))A.call(_,M)&&"constructor"!=M&&y.push(M);return y}},2839:(ne,Z,g)=>{var E=g(5103),b=g(2447);ne.exports=function R(A,P){var _=-1,y=b(A)?Array(A.length):[];return E(A,function(M,U,N){y[++_]=P(M,U,N)}),y}},2924:(ne,Z,g)=>{var E=g(2527),b=g(7895),R=g(2265);ne.exports=function A(P){var _=b(P);return 1==_.length&&_[0][2]?R(_[0][0],_[0][1]):function(y){return y===P||E(y,P,_)}}},8526:(ne,Z,g)=>{var E=g(7108),b=g(5440),R=g(2494),A=g(6300),P=g(3921),_=g(2265),y=g(8916);ne.exports=function N(j,le){return A(j)&&P(le)?_(y(j),le):function(k){var X=b(k,j);return void 0===X&&X===le?R(k,j):E(le,X,3)}}},252:(ne,Z,g)=>{var E=g(3880),b=g(2202),R=g(1627),A=g(2839),P=g(6389),_=g(1156),y=g(9664),M=g(5657),U=g(2261);ne.exports=function N(j,le,k){le=le.length?E(le,function(Y){return U(Y)?function(oe){return b(oe,1===Y.length?Y[0]:Y)}:Y}):[M];var X=-1;le=E(le,_(R));var ce=A(j,function(Y,oe,ie){return{criteria:E(le,function(H){return H(Y)}),index:++X,value:Y}});return P(ce,function(Y,oe){return y(Y,oe,k)})}},3400:ne=>{ne.exports=function Z(g){return function(E){return E?.[g]}}},6443:(ne,Z,g)=>{var E=g(2202);ne.exports=function b(R){return function(A){return E(A,R)}}},8951:(ne,Z,g)=>{var E=g(5657),b=g(2394),R=g(6814);ne.exports=function A(P,_){return R(b(P,_,E),P+"")}},8235:(ne,Z,g)=>{var E=g(1075),b=g(9383),R=g(5657);ne.exports=b?function(P,_){return b(P,"toString",{configurable:!0,enumerable:!1,value:E(_),writable:!0})}:R},6389:ne=>{ne.exports=function Z(g,E){var b=g.length;for(g.sort(E);b--;)g[b]=g[b].value;return g}},5025:ne=>{ne.exports=function Z(g,E){for(var b=-1,R=Array(g);++b<g;)R[b]=E(b);return R}},7002:(ne,Z,g)=>{var E=g(1763),b=g(3880),R=g(2261),A=g(3423),_=E?E.prototype:void 0,y=_?_.toString:void 0;ne.exports=function M(U){if("string"==typeof U)return U;if(R(U))return b(U,M)+"";if(A(U))return y?y.call(U):"";var N=U+"";return"0"==N&&1/U==-1/0?"-0":N}},1156:ne=>{ne.exports=function Z(g){return function(E){return g(E)}}},4795:ne=>{ne.exports=function Z(g,E){return g.has(E)}},4826:(ne,Z,g)=>{var E=g(2261),b=g(6300),R=g(163),A=g(2674);ne.exports=function P(_,y){return E(_)?_:b(_,y)?[_]:R(A(_))}},5400:(ne,Z,g)=>{var E=g(3423);ne.exports=function b(R,A){if(R!==A){var P=void 0!==R,_=null===R,y=R==R,M=E(R),U=void 0!==A,N=null===A,j=A==A,le=E(A);if(!N&&!le&&!M&&R>A||M&&U&&j&&!N&&!le||_&&U&&j||!P&&j||!y)return 1;if(!_&&!M&&!le&&R<A||le&&P&&y&&!_&&!M||N&&P&&y||!U&&y||!j)return-1}return 0}},9664:(ne,Z,g)=>{var E=g(5400);ne.exports=function b(R,A,P){for(var _=-1,y=R.criteria,M=A.criteria,U=y.length,N=P.length;++_<U;){var j=E(y[_],M[_]);if(j)return _>=N?j:j*("desc"==P[_]?-1:1)}return R.index-A.index}},6189:(ne,Z,g)=>{var E=g(8492);ne.exports=E["__core-js_shared__"]},9386:(ne,Z,g)=>{var E=g(2447);ne.exports=function b(R,A){return function(P,_){if(null==P)return P;if(!E(P))return R(P,_);for(var y=P.length,M=A?y:-1,U=Object(P);(A?M--:++M<y)&&!1!==_(U[M],M,U););return P}}},2086:ne=>{ne.exports=function Z(g){return function(E,b,R){for(var A=-1,P=Object(E),_=R(E),y=_.length;y--;){var M=_[g?y:++A];if(!1===b(P[M],M,P))break}return E}}},9383:(ne,Z,g)=>{var E=g(8745),b=function(){try{var R=E(Object,"defineProperty");return R({},"",{}),R}catch{}}();ne.exports=b},7469:(ne,Z,g)=>{var E=g(5960),b=g(5916),R=g(4795);ne.exports=function _(y,M,U,N,j,le){var k=1&U,X=y.length,ce=M.length;if(X!=ce&&!(k&&ce>X))return!1;var Y=le.get(y),oe=le.get(M);if(Y&&oe)return Y==M&&oe==y;var ie=-1,$=!0,H=2&U?new E:void 0;for(le.set(y,M),le.set(M,y);++ie<X;){var v=y[ie],L=M[ie];if(N)var T=k?N(L,v,ie,M,y,le):N(v,L,ie,y,M,le);if(void 0!==T){if(T)continue;$=!1;break}if(H){if(!b(M,function(fe,z){if(!R(H,z)&&(v===fe||j(v,fe,U,N,le)))return H.push(z)})){$=!1;break}}else if(v!==L&&!j(v,L,U,N,le)){$=!1;break}}return le.delete(y),le.delete(M),$}},1642:(ne,Z,g)=>{var E=g(1763),b=g(2760),R=g(7826),A=g(7469),P=g(1575),_=g(8e3),H=E?E.prototype:void 0,v=H?H.valueOf:void 0;ne.exports=function L(T,fe,z,Te,de,we,Ie){switch(z){case"[object DataView]":if(T.byteLength!=fe.byteLength||T.byteOffset!=fe.byteOffset)return!1;T=T.buffer,fe=fe.buffer;case"[object ArrayBuffer]":return!(T.byteLength!=fe.byteLength||!we(new b(T),new b(fe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return R(+T,+fe);case"[object Error]":return T.name==fe.name&&T.message==fe.message;case"[object RegExp]":case"[object String]":return T==fe+"";case"[object Map]":var De=P;case"[object Set]":if(De||(De=_),T.size!=fe.size&&!(1&Te))return!1;var Ye=Ie.get(T);if(Ye)return Ye==fe;Te|=2,Ie.set(T,fe);var Se=A(De(T),De(fe),Te,de,we,Ie);return Ie.delete(T),Se;case"[object Symbol]":if(v)return v.call(T)==v.call(fe)}return!1}},9462:(ne,Z,g)=>{var E=g(6131),A=Object.prototype.hasOwnProperty;ne.exports=function P(_,y,M,U,N,j){var le=1&M,k=E(_),X=k.length;if(X!=E(y).length&&!le)return!1;for(var oe=X;oe--;){var ie=k[oe];if(!(le?ie in y:A.call(y,ie)))return!1}var $=j.get(_),H=j.get(y);if($&&H)return $==y&&H==_;var v=!0;j.set(_,y),j.set(y,_);for(var L=le;++oe<X;){var T=_[ie=k[oe]],fe=y[ie];if(U)var z=le?U(fe,T,ie,y,_,j):U(T,fe,ie,_,y,j);if(!(void 0===z?T===fe||N(T,fe,M,U,j):z)){v=!1;break}L||(L="constructor"==ie)}if(v&&!L){var Te=_.constructor,de=y.constructor;Te!=de&&"constructor"in _&&"constructor"in y&&!("function"==typeof Te&&Te instanceof Te&&"function"==typeof de&&de instanceof de)&&(v=!1)}return j.delete(_),j.delete(y),v}},248:ne=>{var Z="object"==typeof global&&global&&global.Object===Object&&global;ne.exports=Z},6131:(ne,Z,g)=>{var E=g(7427),b=g(771),R=g(4614);ne.exports=function A(P){return E(P,R,b)}},4113:(ne,Z,g)=>{var E=g(29);ne.exports=function b(R,A){var P=R.__data__;return E(A)?P["string"==typeof A?"string":"hash"]:P.map}},7895:(ne,Z,g)=>{var E=g(3921),b=g(4614);ne.exports=function R(A){for(var P=b(A),_=P.length;_--;){var y=P[_],M=A[y];P[_]=[y,M,E(M)]}return P}},8745:(ne,Z,g)=>{var E=g(1082),b=g(1015);ne.exports=function R(A,P){var _=b(A,P);return E(_)?_:void 0}},5933:(ne,Z,g)=>{var E=g(1763),b=Object.prototype,R=b.hasOwnProperty,A=b.toString,P=E?E.toStringTag:void 0;ne.exports=function _(y){var M=R.call(y,P),U=y[P];try{y[P]=void 0;var N=!0}catch{}var j=A.call(y);return N&&(M?y[P]=U:delete y[P]),j}},771:(ne,Z,g)=>{var E=g(2134),b=g(1315),A=Object.prototype.propertyIsEnumerable,P=Object.getOwnPropertySymbols;ne.exports=P?function(y){return null==y?[]:(y=Object(y),E(P(y),function(M){return A.call(y,M)}))}:b},2472:(ne,Z,g)=>{var E=g(6506),b=g(1136),R=g(641),A=g(1732),P=g(6413),_=g(4590),y=g(7075),M="[object Map]",N="[object Promise]",j="[object Set]",le="[object WeakMap]",k="[object DataView]",X=y(E),ce=y(b),Y=y(R),oe=y(A),ie=y(P),$=_;(E&&$(new E(new ArrayBuffer(1)))!=k||b&&$(new b)!=M||R&&$(R.resolve())!=N||A&&$(new A)!=j||P&&$(new P)!=le)&&($=function(H){var v=_(H),L="[object Object]"==v?H.constructor:void 0,T=L?y(L):"";if(T)switch(T){case X:return k;case ce:return M;case Y:return N;case oe:return j;case ie:return le}return v}),ne.exports=$},1015:ne=>{ne.exports=function Z(g,E){return g?.[E]}},4583:(ne,Z,g)=>{var E=g(4826),b=g(1955),R=g(2261),A=g(5188),P=g(7765),_=g(8916);ne.exports=function y(M,U,N){for(var j=-1,le=(U=E(U,M)).length,k=!1;++j<le;){var X=_(U[j]);if(!(k=null!=M&&N(M,X)))break;M=M[X]}return k||++j!=le?k:!!(le=null==M?0:M.length)&&P(le)&&A(X,le)&&(R(M)||b(M))}},5602:(ne,Z,g)=>{var E=g(893);ne.exports=function b(){this.__data__=E?E(null):{},this.size=0}},1499:ne=>{ne.exports=function Z(g){var E=this.has(g)&&delete this.__data__[g];return this.size-=E?1:0,E}},2990:(ne,Z,g)=>{var E=g(893),A=Object.prototype.hasOwnProperty;ne.exports=function P(_){var y=this.__data__;if(E){var M=y[_];return"__lodash_hash_undefined__"===M?void 0:M}return A.call(y,_)?y[_]:void 0}},480:(ne,Z,g)=>{var E=g(893),R=Object.prototype.hasOwnProperty;ne.exports=function A(P){var _=this.__data__;return E?void 0!==_[P]:R.call(_,P)}},4469:(ne,Z,g)=>{var E=g(893);ne.exports=function R(A,P){var _=this.__data__;return this.size+=this.has(A)?0:1,_[A]=E&&void 0===P?"__lodash_hash_undefined__":P,this}},2241:(ne,Z,g)=>{var E=g(1763),b=g(1955),R=g(2261),A=E?E.isConcatSpreadable:void 0;ne.exports=function P(_){return R(_)||b(_)||!!(A&&_&&_[A])}},5188:ne=>{var g=/^(?:0|[1-9]\d*)$/;ne.exports=function E(b,R){var A=typeof b;return!!(R=R??9007199254740991)&&("number"==A||"symbol"!=A&&g.test(b))&&b>-1&&b%1==0&&b<R}},3817:(ne,Z,g)=>{var E=g(7826),b=g(2447),R=g(5188),A=g(9794);ne.exports=function P(_,y,M){if(!A(M))return!1;var U=typeof y;return!!("number"==U?b(M)&&R(y,M.length):"string"==U&&y in M)&&E(M[y],_)}},6300:(ne,Z,g)=>{var E=g(2261),b=g(3423),R=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/;ne.exports=function P(_,y){if(E(_))return!1;var M=typeof _;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=_&&!b(_))||A.test(_)||!R.test(_)||null!=y&&_ in Object(y)}},29:ne=>{ne.exports=function Z(g){var E=typeof g;return"string"==E||"number"==E||"symbol"==E||"boolean"==E?"__proto__"!==g:null===g}},9950:(ne,Z,g)=>{var A,E=g(6189),b=(A=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";ne.exports=function R(A){return!!b&&b in A}},6587:ne=>{var Z=Object.prototype;ne.exports=function g(E){var b=E&&E.constructor;return E===("function"==typeof b&&b.prototype||Z)}},3921:(ne,Z,g)=>{var E=g(9794);ne.exports=function b(R){return R==R&&!E(R)}},9365:ne=>{ne.exports=function Z(){this.__data__=[],this.size=0}},9343:(ne,Z,g)=>{var E=g(4056),R=Array.prototype.splice;ne.exports=function A(P){var _=this.__data__,y=E(_,P);return!(y<0||(y==_.length-1?_.pop():R.call(_,y,1),--this.size,0))}},4779:(ne,Z,g)=>{var E=g(4056);ne.exports=function b(R){var A=this.__data__,P=E(A,R);return P<0?void 0:A[P][1]}},1509:(ne,Z,g)=>{var E=g(4056);ne.exports=function b(R){return E(this.__data__,R)>-1}},7137:(ne,Z,g)=>{var E=g(4056);ne.exports=function b(R,A){var P=this.__data__,_=E(P,R);return _<0?(++this.size,P.push([R,A])):P[_][1]=A,this}},3413:(ne,Z,g)=>{var E=g(9618),b=g(3597),R=g(1136);ne.exports=function A(){this.size=0,this.__data__={hash:new E,map:new(R||b),string:new E}}},5419:(ne,Z,g)=>{var E=g(4113);ne.exports=function b(R){var A=E(this,R).delete(R);return this.size-=A?1:0,A}},7253:(ne,Z,g)=>{var E=g(4113);ne.exports=function b(R){return E(this,R).get(R)}},1115:(ne,Z,g)=>{var E=g(4113);ne.exports=function b(R){return E(this,R).has(R)}},6648:(ne,Z,g)=>{var E=g(4113);ne.exports=function b(R,A){var P=E(this,R),_=P.size;return P.set(R,A),this.size+=P.size==_?0:1,this}},1575:ne=>{ne.exports=function Z(g){var E=-1,b=Array(g.size);return g.forEach(function(R,A){b[++E]=[A,R]}),b}},2265:ne=>{ne.exports=function Z(g,E){return function(b){return null!=b&&b[g]===E&&(void 0!==E||g in Object(b))}}},7371:(ne,Z,g)=>{var E=g(7659);ne.exports=function R(A){var P=E(A,function(y){return 500===_.size&&_.clear(),y}),_=P.cache;return P}},893:(ne,Z,g)=>{var b=g(8745)(Object,"create");ne.exports=b},366:(ne,Z,g)=>{var b=g(3106)(Object.keys,Object);ne.exports=b},8849:(ne,Z,g)=>{ne=g.nmd(ne);var E=g(248),b=Z&&!Z.nodeType&&Z,R=b&&ne&&!ne.nodeType&&ne,P=R&&R.exports===b&&E.process,_=function(){try{return R&&R.require&&R.require("util").types||P&&P.binding&&P.binding("util")}catch{}}();ne.exports=_},9243:ne=>{var g=Object.prototype.toString;ne.exports=function E(b){return g.call(b)}},3106:ne=>{ne.exports=function Z(g,E){return function(b){return g(E(b))}}},2394:(ne,Z,g)=>{var E=g(7910),b=Math.max;ne.exports=function R(A,P,_){return P=b(void 0===P?A.length-1:P,0),function(){for(var y=arguments,M=-1,U=b(y.length-P,0),N=Array(U);++M<U;)N[M]=y[P+M];M=-1;for(var j=Array(P+1);++M<P;)j[M]=y[M];return j[P]=_(N),E(A,this,j)}}},8492:(ne,Z,g)=>{var E=g(248),b="object"==typeof self&&self&&self.Object===Object&&self,R=E||b||Function("return this")();ne.exports=R},6151:ne=>{ne.exports=function g(E){return this.__data__.set(E,"__lodash_hash_undefined__"),this}},2154:ne=>{ne.exports=function Z(g){return this.__data__.has(g)}},8e3:ne=>{ne.exports=function Z(g){var E=-1,b=Array(g.size);return g.forEach(function(R){b[++E]=R}),b}},6814:(ne,Z,g)=>{var E=g(8235),R=g(9531)(E);ne.exports=R},9531:ne=>{var E=Date.now;ne.exports=function b(R){var A=0,P=0;return function(){var _=E(),y=16-(_-P);if(P=_,y>0){if(++A>=800)return arguments[0]}else A=0;return R.apply(void 0,arguments)}}},9488:(ne,Z,g)=>{var E=g(3597);ne.exports=function b(){this.__data__=new E,this.size=0}},5943:ne=>{ne.exports=function Z(g){var E=this.__data__,b=E.delete(g);return this.size=E.size,b}},5456:ne=>{ne.exports=function Z(g){return this.__data__.get(g)}},4793:ne=>{ne.exports=function Z(g){return this.__data__.has(g)}},8689:(ne,Z,g)=>{var E=g(3597),b=g(1136),R=g(1811);ne.exports=function P(_,y){var M=this.__data__;if(M instanceof E){var U=M.__data__;if(!b||U.length<199)return U.push([_,y]),this.size=++M.size,this;M=this.__data__=new R(U)}return M.set(_,y),this.size=M.size,this}},163:(ne,Z,g)=>{var E=g(7371),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g,A=E(function(P){var _=[];return 46===P.charCodeAt(0)&&_.push(""),P.replace(b,function(y,M,U,N){_.push(U?N.replace(R,"$1"):M||y)}),_});ne.exports=A},8916:(ne,Z,g)=>{var E=g(3423);ne.exports=function R(A){if("string"==typeof A||E(A))return A;var P=A+"";return"0"==P&&1/A==-1/0?"-0":P}},7075:ne=>{var g=Function.prototype.toString;ne.exports=function E(b){if(null!=b){try{return g.call(b)}catch{}try{return b+""}catch{}}return""}},1075:ne=>{ne.exports=function Z(g){return function(){return g}}},7826:ne=>{ne.exports=function Z(g,E){return g===E||g!=g&&E!=E}},5440:(ne,Z,g)=>{var E=g(2202);ne.exports=function b(R,A,P){var _=null==R?void 0:E(R,A);return void 0===_?P:_}},2494:(ne,Z,g)=>{var E=g(3274),b=g(4583);ne.exports=function R(A,P){return null!=A&&b(A,P,E)}},5657:ne=>{ne.exports=function Z(g){return g}},1955:(ne,Z,g)=>{var E=g(3022),b=g(3714),R=Object.prototype,A=R.hasOwnProperty,P=R.propertyIsEnumerable,_=E(function(){return arguments}())?E:function(y){return b(y)&&A.call(y,"callee")&&!P.call(y,"callee")};ne.exports=_},2261:ne=>{ne.exports=Array.isArray},2447:(ne,Z,g)=>{var E=g(6861),b=g(7765);ne.exports=function R(A){return null!=A&&b(A.length)&&!E(A)}},7525:(ne,Z,g)=>{ne=g.nmd(ne);var E=g(8492),b=g(5706),R=Z&&!Z.nodeType&&Z,A=R&&ne&&!ne.nodeType&&ne,_=A&&A.exports===R?E.Buffer:void 0;ne.exports=(_?_.isBuffer:void 0)||b},6030:(ne,Z,g)=>{var b=g(8492).isFinite;ne.exports=function R(A){return"number"==typeof A&&b(A)}},6861:(ne,Z,g)=>{var E=g(4590),b=g(9794);ne.exports=function y(M){if(!b(M))return!1;var U=E(M);return"[object Function]"==U||"[object GeneratorFunction]"==U||"[object AsyncFunction]"==U||"[object Proxy]"==U}},7765:ne=>{ne.exports=function g(E){return"number"==typeof E&&E>-1&&E%1==0&&E<=9007199254740991}},9794:ne=>{ne.exports=function Z(g){var E=typeof g;return null!=g&&("object"==E||"function"==E)}},3714:ne=>{ne.exports=function Z(g){return null!=g&&"object"==typeof g}},3423:(ne,Z,g)=>{var E=g(4590),b=g(3714);ne.exports=function A(P){return"symbol"==typeof P||b(P)&&"[object Symbol]"==E(P)}},4868:(ne,Z,g)=>{var E=g(8902),b=g(1156),R=g(8849),A=R&&R.isTypedArray,P=A?b(A):E;ne.exports=P},4614:(ne,Z,g)=>{var E=g(1384),b=g(190),R=g(2447);ne.exports=function A(P){return R(P)?E(P):b(P)}},6990:function(ne,Z,g){var E;ne=g.nmd(ne),function(){var b,_="Expected a function",M="__lodash_hash_undefined__",N="__lodash_placeholder__",v=32,T=128,Se=1/0,Fe=9007199254740991,ge=4294967295,st=[["ary",T],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",v],["partialRight",64],["rearg",256]],Qe="[object Arguments]",_e="[object Array]",I="[object Boolean]",ae="[object Date]",Le="[object Error]",Ve="[object Function]",me="[object GeneratorFunction]",Q="[object Map]",W="[object Number]",O="[object Object]",he="[object Promise]",Ge="[object RegExp]",qe="[object Set]",ft="[object String]",Pt="[object Symbol]",Gt="[object WeakMap]",Re="[object ArrayBuffer]",J="[object DataView]",S="[object Float32Array]",se="[object Float64Array]",We="[object Int8Array]",Ze="[object Int16Array]",ct="[object Int32Array]",$t="[object Uint8Array]",sn="[object Uint8ClampedArray]",$n="[object Uint16Array]",Xn="[object Uint32Array]",In=/\b__p \+= '';/g,Io=/\b(__p \+=) '' \+/g,Lr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Do=/&(?:amp|lt|gt|quot|#39);/g,qi=/[&<>"']/g,Br=RegExp(Do.source),ms=RegExp(qi.source),Ls=/<%-([\s\S]+?)%>/g,Ro=/<%([\s\S]+?)%>/g,po=/<%=([\s\S]+?)%>/g,Nd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qu=/^\w*$/,Ju=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zc=/[\\^$.*+?()[\]{}|]/g,ac=RegExp(zc.source),Gc=/^\s+/,Zu=/\s/,Wc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$c=/\{\n\/\* \[wrapped with (.+)\] \*/,Fd=/,? & /,Xc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ld=/[()=,{}\[\]\/\s]/,Ll=/\\(\\)?/g,Bl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yc=/\w*$/,vi=/^[-+]0x[0-9a-f]+$/i,cc=/^0b[01]+$/i,xi=/^\[object .+?Constructor\]$/,Ra=/^0o[0-7]+$/i,ka=/^(?:0|[1-9]\d*)$/,lc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ko=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Me="\\ud800-\\udfff",pe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Be="\\u2700-\\u27bf",$e="a-z\\xdf-\\xf6\\xf8-\\xff",tn="A-Z\\xc0-\\xd6\\xd8-\\xde",gn="\\ufe0e\\ufe0f",mo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",go="["+Me+"]",Kc="["+mo+"]",ia="["+pe+"]",jr="\\d+",Oo="["+Be+"]",dc="["+$e+"]",jl="[^"+Me+mo+jr+Be+$e+tn+"]",Bs="\\ud83c[\\udffb-\\udfff]",no="[^"+Me+"]",Yt="(?:\\ud83c[\\udde6-\\uddff]){2}",ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+tn+"]",pt="(?:"+dc+"|"+jl+")",Bt="(?:"+Ue+"|"+jl+")",jt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Yn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ri="(?:"+ia+"|"+Bs+")?",br="["+gn+"]?",Vf=br+ri+"(?:\\u200d(?:"+[no,Yt,ke].join("|")+")"+br+ri+")*",Wg="(?:"+[Oo,Yt,ke].join("|")+")"+Vf,eN="(?:"+[no+ia+"?",ia,Yt,ke,go].join("|")+")",W0=RegExp("['\u2019]","g"),Rt=RegExp(ia,"g"),Bd=RegExp(Bs+"(?="+Bs+")|"+eN+Vf,"g"),jn=RegExp([Ue+"?"+dc+"+"+jt+"(?="+[Kc,Ue,"$"].join("|")+")",Bt+"+"+Yn+"(?="+[Kc,Ue+pt,"$"].join("|")+")",Ue+"?"+pt+"+"+jt,Ue+"+"+Yn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jr,Wg].join("|"),"g"),Mi=RegExp("[\\u200d"+Me+pe+gn+"]"),eS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tN=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tS=-1,Ui={};Ui[S]=Ui[se]=Ui[We]=Ui[Ze]=Ui[ct]=Ui[$t]=Ui[sn]=Ui[$n]=Ui[Xn]=!0,Ui[Qe]=Ui[_e]=Ui[Re]=Ui[I]=Ui[J]=Ui[ae]=Ui[Le]=Ui[Ve]=Ui[Q]=Ui[W]=Ui[O]=Ui[Ge]=Ui[qe]=Ui[ft]=Ui[Gt]=!1;var ai={};ai[Qe]=ai[_e]=ai[Re]=ai[J]=ai[I]=ai[ae]=ai[S]=ai[se]=ai[We]=ai[Ze]=ai[ct]=ai[Q]=ai[W]=ai[O]=ai[Ge]=ai[qe]=ai[ft]=ai[Pt]=ai[$t]=ai[sn]=ai[$n]=ai[Xn]=!0,ai[Le]=ai[Ve]=ai[Gt]=!1;var Ul={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rN=parseFloat,oN=parseInt,iS="object"==typeof global&&global&&global.Object===Object&&global,sN="object"==typeof self&&self&&self.Object===Object&&self,ro=iS||sN||Function("return this")(),rS=Z&&!Z.nodeType&&Z,Qu=rS&&ne&&!ne.nodeType&&ne,oS=Qu&&Qu.exports===rS,Zo=oS&&iS.process,pn=function(){try{return Qu&&Qu.require&&Qu.require("util").types||Zo&&Zo.binding&&Zo.binding("util")}catch{}}(),sS=pn&&pn.isArrayBuffer,aS=pn&&pn.isDate,cS=pn&&pn.isMap,Et=pn&&pn.isRegExp,lS=pn&&pn.isSet,Jt=pn&&pn.isTypedArray;function _o(lt,xt,_t){switch(_t.length){case 0:return lt.call(xt);case 1:return lt.call(xt,_t[0]);case 2:return lt.call(xt,_t[0],_t[1]);case 3:return lt.call(xt,_t[0],_t[1],_t[2])}return lt.apply(xt,_t)}function dS(lt,xt,_t,en){for(var Vn=-1,Ei=null==lt?0:lt.length;++Vn<Ei;){var lr=lt[Vn];xt(en,lr,_t(lr),lt)}return en}function gs(lt,xt){for(var _t=-1,en=null==lt?0:lt.length;++_t<en&&!1!==xt(lt[_t],_t,lt););return lt}function uS(lt,xt){for(var _t=null==lt?0:lt.length;_t--&&!1!==xt(lt[_t],_t,lt););return lt}function eh(lt,xt){for(var _t=-1,en=null==lt?0:lt.length;++_t<en;)if(!xt(lt[_t],_t,lt))return!1;return!0}function ra(lt,xt){for(var _t=-1,en=null==lt?0:lt.length,Vn=0,Ei=[];++_t<en;){var lr=lt[_t];xt(lr,_t,lt)&&(Ei[Vn++]=lr)}return Ei}function jd(lt,xt){return!(null==lt||!lt.length)&&qc(lt,xt,0)>-1}function Hf(lt,xt,_t){for(var en=-1,Vn=null==lt?0:lt.length;++en<Vn;)if(_t(xt,lt[en]))return!0;return!1}function nr(lt,xt){for(var _t=-1,en=null==lt?0:lt.length,Vn=Array(en);++_t<en;)Vn[_t]=xt(lt[_t],_t,lt);return Vn}function Un(lt,xt){for(var _t=-1,en=xt.length,Vn=lt.length;++_t<en;)lt[Vn+_t]=xt[_t];return lt}function th(lt,xt,_t,en){var Vn=-1,Ei=null==lt?0:lt.length;for(en&&Ei&&(_t=lt[++Vn]);++Vn<Ei;)_t=xt(_t,lt[Vn],Vn,lt);return _t}function $0(lt,xt,_t,en){var Vn=null==lt?0:lt.length;for(en&&Vn&&(_t=lt[--Vn]);Vn--;)_t=xt(_t,lt[Vn],Vn,lt);return _t}function bo(lt,xt){for(var _t=-1,en=null==lt?0:lt.length;++_t<en;)if(xt(lt[_t],_t,lt))return!0;return!1}var X0=Kg("length");function hS(lt,xt,_t){var en;return _t(lt,function(Vn,Ei,lr){if(xt(Vn,Ei,lr))return en=Ei,!1}),en}function $g(lt,xt,_t,en){for(var Vn=lt.length,Ei=_t+(en?1:-1);en?Ei--:++Ei<Vn;)if(xt(lt[Ei],Ei,lt))return Ei;return-1}function qc(lt,xt,_t){return xt==xt?function _S(lt,xt,_t){for(var en=_t-1,Vn=lt.length;++en<Vn;)if(lt[en]===xt)return en;return-1}(lt,xt,_t):$g(lt,Yg,_t)}function Xg(lt,xt,_t,en){for(var Vn=_t-1,Ei=lt.length;++Vn<Ei;)if(en(lt[Vn],xt))return Vn;return-1}function Yg(lt){return lt!=lt}function zf(lt,xt){var _t=null==lt?0:lt.length;return _t?Y0(lt,xt)/_t:NaN}function Kg(lt){return function(xt){return null==xt?b:xt[lt]}}function nh(lt){return function(xt){return null==lt?b:lt[xt]}}function fS(lt,xt,_t,en,Vn){return Vn(lt,function(Ei,lr,Ni){_t=en?(en=!1,Ei):xt(_t,Ei,lr,Ni)}),_t}function Y0(lt,xt){for(var _t,en=-1,Vn=lt.length;++en<Vn;){var Ei=xt(lt[en]);Ei!==b&&(_t=_t===b?Ei:_t+Ei)}return _t}function K0(lt,xt){for(var _t=-1,en=Array(lt);++_t<lt;)en[_t]=xt(_t);return en}function Ud(lt){return lt&&lt.slice(0,oa(lt)+1).replace(Gc,"")}function Po(lt){return function(xt){return lt(xt)}}function Vd(lt,xt){return nr(xt,function(_t){return lt[_t]})}function ih(lt,xt){return lt.has(xt)}function q0(lt,xt){for(var _t=-1,en=lt.length;++_t<en&&qc(xt,lt[_t],0)>-1;);return _t}function J0(lt,xt){for(var _t=lt.length;_t--&&qc(xt,lt[_t],0)>-1;);return _t}var Hd=nh({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),pS=nh({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Jc(lt){return"\\"+Ul[lt]}function it(lt){return Mi.test(lt)}function zd(lt){var xt=-1,_t=Array(lt.size);return lt.forEach(function(en,Vn){_t[++xt]=[Vn,en]}),_t}function Gf(lt,xt){return function(_t){return lt(xt(_t))}}function js(lt,xt){for(var _t=-1,en=lt.length,Vn=0,Ei=[];++_t<en;){var lr=lt[_t];(lr===xt||lr===N)&&(lt[_t]=N,Ei[Vn++]=_t)}return Ei}function Wf(lt){var xt=-1,_t=Array(lt.size);return lt.forEach(function(en){_t[++xt]=en}),_t}function hc(lt){return it(lt)?function $f(lt){for(var xt=Bd.lastIndex=0;Bd.test(lt);)++xt;return xt}(lt):X0(lt)}function Cr(lt){return it(lt)?function qg(lt){return lt.match(Bd)||[]}(lt):function aN(lt){return lt.split("")}(lt)}function oa(lt){for(var xt=lt.length;xt--&&Zu.test(lt.charAt(xt)););return xt}var wi=nh({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Us=function lt(xt){var u,_t=(xt=null==xt?ro:Us.defaults(ro.Object(),xt,Us.pick(ro,tN))).Array,en=xt.Date,Vn=xt.Error,Ei=xt.Function,lr=xt.Math,Ni=xt.Object,Xf=xt.RegExp,bS=xt.String,_s=xt.TypeError,Yf=_t.prototype,yo=Ni.prototype,Kf=xt["__core-js_shared__"],rh=Ei.prototype.toString,Di=yo.hasOwnProperty,vS=0,tv=(u=/[^.]+$/.exec(Kf&&Kf.keys&&Kf.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",qf=yo.toString,nv=rh.call(Ni),xS=ro._,wS=Xf("^"+rh.call(Di).replace(zc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jf=oS?xt.Buffer:b,vn=xt.Symbol,Zf=xt.Uint8Array,iv=Jf?Jf.allocUnsafe:b,Qf=Gf(Ni.getPrototypeOf,Ni),Zt=Ni.create,rv=yo.propertyIsEnumerable,oh=Yf.splice,Ut=vn?vn.isConcatSpreadable:b,Rr=vn?vn.iterator:b,Qn=vn?vn.toStringTag:b,kr=function(){try{var u=ou(Ni,"defineProperty");return u({},"",{}),u}catch{}}(),No=xt.clearTimeout!==ro.clearTimeout&&xt.clearTimeout,Gd=en&&en.now!==ro.Date.now&&en.now,bs=xt.setTimeout!==ro.setTimeout&&xt.setTimeout,sh=lr.ceil,ah=lr.floor,Wd=Ni.getOwnPropertySymbols,ES=Jf?Jf.isBuffer:b,ov=xt.isFinite,Tr=Yf.join,qt=Gf(Ni.keys,Ni),hn=lr.max,oi=lr.min,sa=en.now,ch=xt.parseInt,oo=lr.random,$d=Yf.reverse,dr=ou(xt,"DataView"),Vs=ou(xt,"Map"),Zc=ou(xt,"Promise"),Sn=ou(xt,"Set"),fc=ou(xt,"WeakMap"),Xd=ou(Ni,"create"),pc=fc&&new fc,$i={},lh=lu(dr),Yd=lu(Vs),Oa=lu(Zc),dh=lu(Sn),sv=lu(fc),aa=vn?vn.prototype:b,ys=aa?aa.valueOf:b,uh=aa?aa.toString:b;function Ne(u){if(ur(u)&&!Kn(u)&&!(u instanceof hi)){if(u instanceof Qo)return u;if(Di.call(u,"__wrapped__"))return ZS(u)}return new Qo(u)}var Jn=function(){function u(){}return function(f){if(!Hi(f))return{};if(Zt)return Zt(f);u.prototype=f;var w=new u;return u.prototype=b,w}}();function Zg(){}function Qo(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=b}function hi(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function ca(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var te=u[f];this.set(te[0],te[1])}}function Fo(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var te=u[f];this.set(te[0],te[1])}}function Qc(u){var f=-1,w=null==u?0:u.length;for(this.clear();++f<w;){var te=u[f];this.set(te[0],te[1])}}function qd(u){var f=-1,w=null==u?0:u.length;for(this.__data__=new Qc;++f<w;)this.add(u[f])}function Na(u){var f=this.__data__=new Fo(u);this.size=f.size}function t_(u,f){var w=Kn(u),te=!w&&Kl(u),Ae=!w&&!te&&vc(u),je=!w&&!te&&!Ae&&_a(u),et=w||te||Ae||je,ot=et?K0(u.length,bS):[],ut=ot.length;for(var St in u)(f||Di.call(u,St))&&(!et||!("length"==St||Ae&&("offset"==St||"parent"==St)||je&&("buffer"==St||"byteLength"==St||"byteOffset"==St)||Va(St,ut)))&&ot.push(St);return ot}function n_(u){var f=u.length;return f?u[hp(0,f-1)]:b}function xN(u,f){return yc(Eo(u),Vl(f,0,u.length))}function wN(u){return yc(Eo(u))}function av(u,f,w){(w!==b&&!os(u[f],w)||w===b&&!(f in u))&&mc(u,f,w)}function da(u,f,w){var te=u[f];(!Di.call(u,f)||!os(te,w)||w===b&&!(f in u))&&mc(u,f,w)}function hh(u,f){for(var w=u.length;w--;)if(os(u[w][0],f))return w;return-1}function EN(u,f,w,te){return gc(u,function(Ae,je,et){f(te,Ae,w(Ae),et)}),te}function np(u,f){return u&&pa(f,Vr(f),u)}function mc(u,f,w){"__proto__"==f&&kr?kr(u,f,{configurable:!0,enumerable:!0,value:w,writable:!0}):u[f]=w}function i_(u,f){for(var w=-1,te=f.length,Ae=_t(te),je=null==u;++w<te;)Ae[w]=je?b:$_(u,f[w]);return Ae}function Vl(u,f,w){return u==u&&(w!==b&&(u=u<=w?u:w),f!==b&&(u=u>=f?u:f)),u}function ua(u,f,w,te,Ae,je){var et,ot=1&f,ut=2&f,St=4&f;if(w&&(et=Ae?w(u,te,Ae,je):w(u)),et!==b)return et;if(!Hi(u))return u;var Ct=Kn(u);if(Ct){if(et=function Nv(u){var f=u.length,w=new u.constructor(f);return f&&"string"==typeof u[0]&&Di.call(u,"index")&&(w.index=u.index,w.input=u.input),w}(u),!ot)return Eo(u,et)}else{var Nt=Ji(u),Xt=Nt==Ve||Nt==me;if(vc(u))return xv(u,ot);if(Nt==O||Nt==Qe||Xt&&!Ae){if(et=ut||Xt?{}:yh(u),!ot)return ut?function Av(u,f){return pa(u,Pv(u),f)}(u,function cv(u,f){return u&&pa(f,Ho(f),u)}(et,u)):function Ev(u,f){return pa(u,Ep(u),f)}(u,np(et,u))}else{if(!ai[Nt])return Ae?u:{};et=function b_(u,f,w){var te=u.constructor;switch(f){case Re:return mp(u);case I:case ae:return new te(+u);case J:return function VS(u,f){var w=f?mp(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.byteLength)}(u,w);case S:case se:case We:case Ze:case ct:case $t:case sn:case $n:case Xn:return gp(u,w);case Q:return new te;case W:case ft:return new te(u);case Ge:return function HS(u){var f=new u.constructor(u.source,Yc.exec(u));return f.lastIndex=u.lastIndex,f}(u);case qe:return new te;case Pt:return function f_(u){return ys?Ni(ys.call(u)):{}}(u)}}(u,Nt,ot)}}je||(je=new Na);var fn=je.get(u);if(fn)return fn;je.set(u,et),z_(u)?u.forEach(function(Cn){et.add(ua(Cn,f,w,Cn,u,je))}):$p(u)&&u.forEach(function(Cn,ci){et.set(ci,ua(Cn,f,w,ci,u,je))});var Ht=Ct?b:(St?ut?kv:Rv:ut?Ho:Vr)(u);return gs(Ht||u,function(Cn,ci){Ht&&(Cn=u[ci=Cn]),da(et,ci,ua(Cn,f,w,ci,u,je))}),et}function ha(u,f,w){var te=w.length;if(null==u)return!te;for(u=Ni(u);te--;){var Ae=w[te],et=u[Ae];if(et===b&&!(Ae in u)||!(0,f[Ae])(et))return!1}return!0}function fh(u,f,w){if("function"!=typeof u)throw new _s(_);return Ha(function(){u.apply(b,w)},f)}function yr(u,f,w,te){var Ae=-1,je=jd,et=!0,ot=u.length,ut=[],St=f.length;if(!ot)return ut;w&&(f=nr(f,Po(w))),te?(je=Hf,et=!1):f.length>=200&&(je=ih,et=!1,f=new qd(f));e:for(;++Ae<ot;){var Ct=u[Ae],Nt=null==w?Ct:w(Ct);if(Ct=te||0!==Ct?Ct:0,et&&Nt==Nt){for(var Xt=St;Xt--;)if(f[Xt]===Nt)continue e;ut.push(Ct)}else je(f,Nt,te)||ut.push(Ct)}return ut}Ne.templateSettings={escape:Ls,evaluate:Ro,interpolate:po,variable:"",imports:{_:Ne}},(Ne.prototype=Zg.prototype).constructor=Ne,(Qo.prototype=Jn(Zg.prototype)).constructor=Qo,(hi.prototype=Jn(Zg.prototype)).constructor=hi,ca.prototype.clear=function so(){this.__data__=Xd?Xd(null):{},this.size=0},ca.prototype.delete=function dN(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f},ca.prototype.get=function es(u){var f=this.__data__;if(Xd){var w=f[u];return w===M?b:w}return Di.call(f,u)?f[u]:b},ca.prototype.has=function ts(u){var f=this.__data__;return Xd?f[u]!==b:Di.call(f,u)},ca.prototype.set=function Qg(u,f){var w=this.__data__;return this.size+=this.has(u)?0:1,w[u]=Xd&&f===b?M:f,this},Fo.prototype.clear=function tp(){this.__data__=[],this.size=0},Fo.prototype.delete=function la(u){var f=this.__data__,w=hh(f,u);return!(w<0||(w==f.length-1?f.pop():oh.call(f,w,1),--this.size,0))},Fo.prototype.get=function e_(u){var f=this.__data__,w=hh(f,u);return w<0?b:f[w][1]},Fo.prototype.has=function AS(u){return hh(this.__data__,u)>-1},Fo.prototype.set=function SS(u,f){var w=this.__data__,te=hh(w,u);return te<0?(++this.size,w.push([u,f])):w[te][1]=f,this},Qc.prototype.clear=function CS(){this.size=0,this.__data__={hash:new ca,map:new(Vs||Fo),string:new ca}},Qc.prototype.delete=function TS(u){var f=iu(this,u).delete(u);return this.size-=f?1:0,f},Qc.prototype.get=function uN(u){return iu(this,u).get(u)},Qc.prototype.has=function hN(u){return iu(this,u).has(u)},Qc.prototype.set=function fN(u,f){var w=iu(this,u),te=w.size;return w.set(u,f),this.size+=w.size==te?0:1,this},qd.prototype.add=qd.prototype.push=function pN(u){return this.__data__.set(u,M),this},qd.prototype.has=function mN(u){return this.__data__.has(u)},Na.prototype.clear=function gN(){this.__data__=new Fo,this.size=0},Na.prototype.delete=function _N(u){var f=this.__data__,w=f.delete(u);return this.size=f.size,w},Na.prototype.get=function bN(u){return this.__data__.get(u)},Na.prototype.has=function yN(u){return this.__data__.has(u)},Na.prototype.set=function vN(u,f){var w=this.__data__;if(w instanceof Fo){var te=w.__data__;if(!Vs||te.length<199)return te.push([u,f]),this.size=++w.size,this;w=this.__data__=new Qc(te)}return w.set(u,f),this.size=w.size,this};var gc=Sv(Fa),IS=Sv(Zd,!0);function r_(u,f){var w=!0;return gc(u,function(te,Ae,je){return w=!!f(te,Ae,je)}),w}function Jd(u,f,w){for(var te=-1,Ae=u.length;++te<Ae;){var je=u[te],et=f(je);if(null!=et&&(ot===b?et==et&&!Vo(et):w(et,ot)))var ot=et,ut=je}return ut}function lv(u,f){var w=[];return gc(u,function(te,Ae,je){f(te,Ae,je)&&w.push(te)}),w}function vo(u,f,w,te,Ae){var je=-1,et=u.length;for(w||(w=Fv),Ae||(Ae=[]);++je<et;){var ot=u[je];f>0&&w(ot)?f>1?vo(ot,f-1,w,te,Ae):Un(Ae,ot):te||(Ae[Ae.length]=ot)}return Ae}var rp=Cv(),op=Cv(!0);function Fa(u,f){return u&&rp(u,f,Vr)}function Zd(u,f){return u&&op(u,f,Vr)}function sp(u,f){return ra(f,function(w){return ga(u[w])})}function Qd(u,f){for(var w=0,te=(f=wo(f,u)).length;null!=u&&w<te;)u=u[za(f[w++])];return w&&w==te?u:b}function DS(u,f,w){var te=f(u);return Kn(u)?te:Un(te,w(u))}function xo(u){return null==u?u===b?"[object Undefined]":"[object Null]":Qn&&Qn in Ni(u)?function Ov(u){var f=Di.call(u,Qn),w=u[Qn];try{u[Qn]=b;var te=!0}catch{}var Ae=qf.call(u);return te&&(f?u[Qn]=w:delete u[Qn]),Ae}(u):function Ii(u){return qf.call(u)}(u)}function ap(u,f){return u>f}function RS(u,f){return null!=u&&Di.call(u,f)}function dv(u,f){return null!=u&&f in Ni(u)}function cp(u,f,w){for(var te=w?Hf:jd,Ae=u[0].length,je=u.length,et=je,ot=_t(je),ut=1/0,St=[];et--;){var Ct=u[et];et&&f&&(Ct=nr(Ct,Po(f))),ut=oi(Ct.length,ut),ot[et]=!w&&(f||Ae>=120&&Ct.length>=120)?new qd(et&&Ct):b}Ct=u[0];var Nt=-1,Xt=ot[0];e:for(;++Nt<Ae&&St.length<ut;){var fn=Ct[Nt],wn=f?f(fn):fn;if(fn=w||0!==fn?fn:0,!(Xt?ih(Xt,wn):te(St,wn,w))){for(et=je;--et;){var Ht=ot[et];if(!(Ht?ih(Ht,wn):te(u[et],wn,w)))continue e}Xt&&Xt.push(wn),St.push(fn)}}return St}function ph(u,f,w){var te=null==(u=Lv(u,f=wo(f,u)))?u:u[za(Gs(f))];return null==te?b:_o(te,u,w)}function o_(u){return ur(u)&&xo(u)==Qe}function Hl(u,f,w,te,Ae){return u===f||(null==u||null==f||!ur(u)&&!ur(f)?u!=u&&f!=f:function PS(u,f,w,te,Ae,je){var et=Kn(u),ot=Kn(f),ut=et?_e:Ji(u),St=ot?_e:Ji(f),Ct=(ut=ut==Qe?O:ut)==O,Nt=(St=St==Qe?O:St)==O,Xt=ut==St;if(Xt&&vc(u)){if(!vc(f))return!1;et=!0,Ct=!1}if(Xt&&!Ct)return je||(je=new Na),et||_a(u)?wp(u,f,w,te,Ae,je):function CN(u,f,w,te,Ae,je,et){switch(w){case J:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case Re:return!(u.byteLength!=f.byteLength||!je(new Zf(u),new Zf(f)));case I:case ae:case W:return os(+u,+f);case Le:return u.name==f.name&&u.message==f.message;case Ge:case ft:return u==f+"";case Q:var ot=zd;case qe:if(ot||(ot=Wf),u.size!=f.size&&!(1&te))return!1;var St=et.get(u);if(St)return St==f;te|=2,et.set(u,f);var Ct=wp(ot(u),ot(f),te,Ae,je,et);return et.delete(u),Ct;case Pt:if(ys)return ys.call(u)==ys.call(f)}return!1}(u,f,ut,w,te,Ae,je);if(!(1&w)){var fn=Ct&&Di.call(u,"__wrapped__"),wn=Nt&&Di.call(f,"__wrapped__");if(fn||wn){var Ht=fn?u.value():u,Cn=wn?f.value():f;return je||(je=new Na),Ae(Ht,Cn,w,te,je)}}return!!Xt&&(je||(je=new Na),function GS(u,f,w,te,Ae,je){var et=1&w,ot=Rv(u),ut=ot.length;if(ut!=Rv(f).length&&!et)return!1;for(var Nt=ut;Nt--;){var Xt=ot[Nt];if(!(et?Xt in f:Di.call(f,Xt)))return!1}var fn=je.get(u),wn=je.get(f);if(fn&&wn)return fn==f&&wn==u;var Ht=!0;je.set(u,f),je.set(f,u);for(var Cn=et;++Nt<ut;){var ci=u[Xt=ot[Nt]],qn=f[Xt];if(te)var As=et?te(qn,ci,Xt,f,u,je):te(ci,qn,Xt,u,f,je);if(!(As===b?ci===qn||Ae(ci,qn,w,te,je):As)){Ht=!1;break}Cn||(Cn="constructor"==Xt)}if(Ht&&!Cn){var zo=u.constructor,Or=f.constructor;zo!=Or&&"constructor"in u&&"constructor"in f&&!("function"==typeof zo&&zo instanceof zo&&"function"==typeof Or&&Or instanceof Or)&&(Ht=!1)}return je.delete(u),je.delete(f),Ht}(u,f,w,te,Ae,je))}(u,f,w,te,Hl,Ae))}function lp(u,f,w,te){var Ae=w.length,je=Ae,et=!te;if(null==u)return!je;for(u=Ni(u);Ae--;){var ot=w[Ae];if(et&&ot[2]?ot[1]!==u[ot[0]]:!(ot[0]in u))return!1}for(;++Ae<je;){var ut=(ot=w[Ae])[0],St=u[ut],Ct=ot[1];if(et&&ot[2]){if(St===b&&!(ut in u))return!1}else{var Nt=new Na;if(te)var Xt=te(St,Ct,ut,u,f,Nt);if(!(Xt===b?Hl(Ct,St,3,te,Nt):Xt))return!1}}return!0}function s_(u){return!(!Hi(u)||function $l(u){return!!tv&&tv in u}(u))&&(ga(u)?wS:xi).test(lu(u))}function Lo(u){return"function"==typeof u?u:null==u?as:"object"==typeof u?Kn(u)?pv(u[0],u[1]):fv(u):mT(u)}function a_(u){if(!au(u))return qt(u);var f=[];for(var w in Ni(u))Di.call(u,w)&&"constructor"!=w&&f.push(w);return f}function el(u,f){return u<f}function ns(u,f){var w=-1,te=Uo(u)?_t(u.length):[];return gc(u,function(Ae,je,et){te[++w]=f(Ae,je,et)}),te}function fv(u){var f=ru(u);return 1==f.length&&f[0][2]?cu(f[0][0],f[0][1]):function(w){return w===u||lp(w,u,f)}}function pv(u,f){return Cp(u)&&y_(f)?cu(za(u),f):function(w){var te=$_(w,u);return te===b&&te===f?mu(w,u):Hl(f,te,3)}}function up(u,f,w,te,Ae){u!==f&&rp(f,function(je,et){if(Ae||(Ae=new Na),Hi(je))!function tl(u,f,w,te,Ae,je,et){var ot=ma(u,w),ut=ma(f,w),St=et.get(ut);if(St)av(u,w,St);else{var Ct=je?je(ot,ut,w+"",u,f,et):b,Nt=Ct===b;if(Nt){var Xt=Kn(ut),fn=!Xt&&vc(ut),wn=!Xt&&!fn&&_a(ut);Ct=ut,Xt||fn||wn?Kn(ot)?Ct=ot:Vi(ot)?Ct=Eo(ot):fn?(Nt=!1,Ct=xv(ut,!0)):wn?(Nt=!1,Ct=gp(ut,!0)):Ct=[]:Th(ut)||Kl(ut)?(Ct=ot,Kl(ot)?Ct=W_(ot):(!Hi(ot)||ga(ot))&&(Ct=yh(ut))):Nt=!1}Nt&&(et.set(ut,Ct),Ae(Ct,ut,te,je,et),et.delete(ut)),av(u,w,Ct)}}(u,f,et,w,up,te,Ae);else{var ot=te?te(ma(u,et),je,et+"",u,f,Ae):b;ot===b&&(ot=je),av(u,et,ot)}},Ho)}function c_(u,f){var w=u.length;if(w)return Va(f+=f<0?w:0,w)?u[f]:b}function mv(u,f,w){f=f.length?nr(f,function(je){return Kn(je)?function(et){return Qd(et,1===je.length?je[0]:je)}:je}):[as];var te=-1;return f=nr(f,Po(xn())),function cN(lt,xt){var _t=lt.length;for(lt.sort(xt);_t--;)lt[_t]=lt[_t].value;return lt}(ns(u,function(je,et,ot){return{criteria:nr(f,function(St){return St(je)}),index:++te,value:je}}),function(je,et){return function m_(u,f,w){for(var te=-1,Ae=u.criteria,je=f.criteria,et=Ae.length,ot=w.length;++te<et;){var ut=p_(Ae[te],je[te]);if(ut)return te>=ot?ut:ut*("desc"==w[te]?-1:1)}return u.index-f.index}(je,et,w)})}function l_(u,f,w){for(var te=-1,Ae=f.length,je={};++te<Ae;){var et=f[te],ot=Qd(u,et);w(ot,et)&&Ba(je,wo(et,u),ot)}return je}function d_(u,f,w,te){var Ae=te?Xg:qc,je=-1,et=f.length,ot=u;for(u===f&&(f=Eo(f)),w&&(ot=nr(u,Po(w)));++je<et;)for(var ut=0,St=f[je],Ct=w?w(St):St;(ut=Ae(ot,Ct,ut,te))>-1;)ot!==u&&oh.call(ot,ut,1),oh.call(u,ut,1);return u}function Dn(u,f){for(var w=u?f.length:0,te=w-1;w--;){var Ae=f[w];if(w==te||Ae!==je){var je=Ae;Va(Ae)?oh.call(u,Ae,1):zl(u,Ae)}}return u}function hp(u,f){return u+ah(oo()*(f-u+1))}function u_(u,f){var w="";if(!u||f<1||f>Fe)return w;do{f%2&&(w+=u),(f=ah(f/2))&&(u+=u)}while(f);return w}function si(u,f){return sl(Tp(u,f,as),u+"")}function FS(u){return n_(hr(u))}function bv(u,f){var w=hr(u);return yc(w,Vl(f,0,w.length))}function Ba(u,f,w,te){if(!Hi(u))return u;for(var Ae=-1,je=(f=wo(f,u)).length,et=je-1,ot=u;null!=ot&&++Ae<je;){var ut=za(f[Ae]),St=w;if("__proto__"===ut||"constructor"===ut||"prototype"===ut)return u;if(Ae!=et){var Ct=ot[ut];(St=te?te(Ct,ut,ot):b)===b&&(St=Hi(Ct)?Ct:Va(f[Ae+1])?[]:{})}da(ot,ut,St),ot=ot[ut]}return u}var yv=pc?function(u,f){return pc.set(u,f),u}:as,LS=kr?function(u,f){return kr(u,"toString",{configurable:!0,enumerable:!1,value:ob(f),writable:!0})}:as;function BS(u){return yc(hr(u))}function Hs(u,f,w){var te=-1,Ae=u.length;f<0&&(f=-f>Ae?0:Ae+f),(w=w>Ae?Ae:w)<0&&(w+=Ae),Ae=f>w?0:w-f>>>0,f>>>=0;for(var je=_t(Ae);++te<Ae;)je[te]=u[te+f];return je}function jS(u,f){var w;return gc(u,function(te,Ae,je){return!(w=f(te,Ae,je))}),!!w}function Tt(u,f,w){var te=0,Ae=null==u?te:u.length;if("number"==typeof f&&f==f&&Ae<=2147483647){for(;te<Ae;){var je=te+Ae>>>1,et=u[je];null!==et&&!Vo(et)&&(w?et<=f:et<f)?te=je+1:Ae=je}return Ae}return gi(u,f,as,w)}function gi(u,f,w,te){var Ae=0,je=null==u?0:u.length;if(0===je)return 0;for(var et=(f=w(f))!=f,ot=null===f,ut=Vo(f),St=f===b;Ae<je;){var Ct=ah((Ae+je)/2),Nt=w(u[Ct]),Xt=Nt!==b,fn=null===Nt,wn=Nt==Nt,Ht=Vo(Nt);if(et)var Cn=te||wn;else Cn=St?wn&&(te||Xt):ot?wn&&Xt&&(te||!fn):ut?wn&&Xt&&!fn&&(te||!Ht):!fn&&!Ht&&(te?Nt<=f:Nt<f);Cn?Ae=Ct+1:je=Ct}return oi(je,4294967294)}function vr(u,f){for(var w=-1,te=u.length,Ae=0,je=[];++w<te;){var et=u[w],ot=f?f(et):et;if(!w||!os(ot,ut)){var ut=ot;je[Ae++]=0===et?0:et}}return je}function xr(u){return"number"==typeof u?u:Vo(u)?NaN:+u}function Ri(u){if("string"==typeof u)return u;if(Kn(u))return nr(u,Ri)+"";if(Vo(u))return uh?uh.call(u):"";var f=u+"";return"0"==f&&1/u==-Se?"-0":f}function _c(u,f,w){var te=-1,Ae=jd,je=u.length,et=!0,ot=[],ut=ot;if(w)et=!1,Ae=Hf;else if(je>=200){var St=f?null:Mv(u);if(St)return Wf(St);et=!1,Ae=ih,ut=new qd}else ut=f?[]:ot;e:for(;++te<je;){var Ct=u[te],Nt=f?f(Ct):Ct;if(Ct=w||0!==Ct?Ct:0,et&&Nt==Nt){for(var Xt=ut.length;Xt--;)if(ut[Xt]===Nt)continue e;f&&ut.push(Nt),ot.push(Ct)}else Ae(ut,Nt,w)||(ut!==ot&&ut.push(Nt),ot.push(Ct))}return ot}function zl(u,f){return null==(u=Lv(u,f=wo(f,u)))||delete u[za(Gs(f))]}function fa(u,f,w,te){return Ba(u,f,w(Qd(u,f)),te)}function eu(u,f,w,te){for(var Ae=u.length,je=te?Ae:-1;(te?je--:++je<Ae)&&f(u[je],je,u););return w?Hs(u,te?0:je,te?je+1:Ae):Hs(u,te?je+1:0,te?Ae:je)}function fp(u,f){var w=u;return w instanceof hi&&(w=w.value()),th(f,function(te,Ae){return Ae.func.apply(Ae.thisArg,Un([te],Ae.args))},w)}function h_(u,f,w){var te=u.length;if(te<2)return te?_c(u[0]):[];for(var Ae=-1,je=_t(te);++Ae<te;)for(var et=u[Ae],ot=-1;++ot<te;)ot!=Ae&&(je[Ae]=yr(je[Ae]||et,u[ot],f,w));return _c(vo(je,1),f,w)}function US(u,f,w){for(var te=-1,Ae=u.length,je=f.length,et={};++te<Ae;)w(et,u[te],te<je?f[te]:b);return et}function pp(u){return Vi(u)?u:[]}function ao(u){return"function"==typeof u?u:as}function wo(u,f){return Kn(u)?u:Cp(u,f)?[u]:JS(_i(u))}var vv=si;function vs(u,f,w){var te=u.length;return w=w===b?te:w,!f&&w>=te?u:Hs(u,f,w)}var ja=No||function(u){return ro.clearTimeout(u)};function xv(u,f){if(f)return u.slice();var w=u.length,te=iv?iv(w):new u.constructor(w);return u.copy(te),te}function mp(u){var f=new u.constructor(u.byteLength);return new Zf(f).set(new Zf(u)),f}function gp(u,f){var w=f?mp(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.length)}function p_(u,f){if(u!==f){var w=u!==b,te=null===u,Ae=u==u,je=Vo(u),et=f!==b,ot=null===f,ut=f==f,St=Vo(f);if(!ot&&!St&&!je&&u>f||je&&et&&ut&&!ot&&!St||te&&et&&ut||!w&&ut||!Ae)return 1;if(!te&&!je&&!St&&u<f||St&&w&&Ae&&!te&&!je||ot&&w&&Ae||!et&&Ae||!ut)return-1}return 0}function wv(u,f,w,te){for(var Ae=-1,je=u.length,et=w.length,ot=-1,ut=f.length,St=hn(je-et,0),Ct=_t(ut+St),Nt=!te;++ot<ut;)Ct[ot]=f[ot];for(;++Ae<et;)(Nt||Ae<je)&&(Ct[w[Ae]]=u[Ae]);for(;St--;)Ct[ot++]=u[Ae++];return Ct}function g_(u,f,w,te){for(var Ae=-1,je=u.length,et=-1,ot=w.length,ut=-1,St=f.length,Ct=hn(je-ot,0),Nt=_t(Ct+St),Xt=!te;++Ae<Ct;)Nt[Ae]=u[Ae];for(var fn=Ae;++ut<St;)Nt[fn+ut]=f[ut];for(;++et<ot;)(Xt||Ae<je)&&(Nt[fn+w[et]]=u[Ae++]);return Nt}function Eo(u,f){var w=-1,te=u.length;for(f||(f=_t(te));++w<te;)f[w]=u[w];return f}function pa(u,f,w,te){var Ae=!w;w||(w={});for(var je=-1,et=f.length;++je<et;){var ot=f[je],ut=te?te(w[ot],u[ot],ot,w,u):b;ut===b&&(ut=u[ot]),Ae?mc(w,ot,ut):da(w,ot,ut)}return w}function mh(u,f){return function(w,te){var Ae=Kn(w)?dS:EN,je=f?f():{};return Ae(w,u,xn(te,2),je)}}function nl(u){return si(function(f,w){var te=-1,Ae=w.length,je=Ae>1?w[Ae-1]:b,et=Ae>2?w[2]:b;for(je=u.length>3&&"function"==typeof je?(Ae--,je):b,et&&Ao(w[0],w[1],et)&&(je=Ae<3?b:je,Ae=1),f=Ni(f);++te<Ae;){var ot=w[te];ot&&u(f,ot,te,je)}return f})}function Sv(u,f){return function(w,te){if(null==w)return w;if(!Uo(w))return u(w,te);for(var Ae=w.length,je=f?Ae:-1,et=Ni(w);(f?je--:++je<Ae)&&!1!==te(et[je],je,et););return w}}function Cv(u){return function(f,w,te){for(var Ae=-1,je=Ni(f),et=te(f),ot=et.length;ot--;){var ut=et[u?ot:++Ae];if(!1===w(je[ut],ut,je))break}return f}}function il(u){return function(f){var w=it(f=_i(f))?Cr(f):b,te=w?w[0]:f.charAt(0),Ae=w?vs(w,1).join(""):f.slice(1);return te[u]()+Ae}}function Fi(u){return function(f){return th(tm(Mx(f).replace(W0,"")),u,"")}}function rl(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var w=Jn(u.prototype),te=u.apply(w,f);return Hi(te)?te:w}}function _p(u){return function(f,w,te){var Ae=Ni(f);if(!Uo(f)){var je=xn(w,3);f=Vr(f),w=function(ot){return je(Ae[ot],ot,Ae)}}var et=u(f,w,te);return et>-1?Ae[je?f[et]:et]:b}}function Tv(u){return bc(function(f){var w=f.length,te=w,Ae=Qo.prototype.thru;for(u&&f.reverse();te--;){var je=f[te];if("function"!=typeof je)throw new _s(_);if(Ae&&!et&&"wrapper"==ol(je))var et=new Qo([],!0)}for(te=et?te:w;++te<w;){var ot=ol(je=f[te]),ut="wrapper"==ot?bh(je):b;et=ut&&su(ut[0])&&424==ut[1]&&!ut[4].length&&1==ut[9]?et[ol(ut[0])].apply(et,ut[3]):1==je.length&&su(je)?et[ot]():et.thru(je)}return function(){var St=arguments,Ct=St[0];if(et&&1==St.length&&Kn(Ct))return et.plant(Ct).value();for(var Nt=0,Xt=w?f[Nt].apply(this,St):Ct;++Nt<w;)Xt=f[Nt].call(this,Xt);return Xt}})}function gh(u,f,w,te,Ae,je,et,ot,ut,St){var Ct=f&T,Nt=1&f,Xt=2&f,fn=24&f,wn=512&f,Ht=Xt?b:rl(u);return function Cn(){for(var ci=arguments.length,qn=_t(ci),As=ci;As--;)qn[As]=arguments[As];if(fn)var zo=nu(Cn),Or=function Z0(lt,xt){for(var _t=lt.length,en=0;_t--;)lt[_t]===xt&&++en;return en}(qn,zo);if(te&&(qn=wv(qn,te,Ae,fn)),je&&(qn=g_(qn,je,et,fn)),ci-=Or,fn&&ci<St){var Ir=js(qn,zo);return vp(u,f,gh,Cn.placeholder,w,qn,Ir,ot,ut,St-ci)}var Ss=Nt?w:this,ul=Xt?Ss[u]:u;return ci=qn.length,ot?qn=function Bv(u,f){for(var w=u.length,te=oi(f.length,w),Ae=Eo(u);te--;){var je=f[te];u[te]=Va(je,w)?Ae[je]:b}return u}(qn,ot):wn&&ci>1&&qn.reverse(),Ct&&ut<ci&&(qn.length=ut),this&&this!==ro&&this instanceof Cn&&(ul=Ht||rl(ul)),ul.apply(Ss,qn)}}function __(u,f){return function(w,te){return function kS(u,f,w,te){return Fa(u,function(Ae,je,et){f(te,w(Ae),je,et)}),te}(w,u,f(te),{})}}function Gl(u,f){return function(w,te){var Ae;if(w===b&&te===b)return f;if(w!==b&&(Ae=w),te!==b){if(Ae===b)return te;"string"==typeof w||"string"==typeof te?(w=Ri(w),te=Ri(te)):(w=xr(w),te=xr(te)),Ae=u(w,te)}return Ae}}function Ua(u){return bc(function(f){return f=nr(f,Po(xn())),si(function(w){var te=this;return u(f,function(Ae){return _o(Ae,te,w)})})})}function bp(u,f){var w=(f=f===b?" ":Ri(f)).length;if(w<2)return w?u_(f,u):f;var te=u_(f,sh(u/hc(f)));return it(f)?vs(Cr(te),0,u).join(""):te.slice(0,u)}function _h(u){return function(f,w,te){return te&&"number"!=typeof te&&Ao(f,w,te)&&(w=te=b),f=ss(f),w===b?(w=f,f=0):w=ss(w),function AN(u,f,w,te){for(var Ae=-1,je=hn(sh((f-u)/(w||1)),0),et=_t(je);je--;)et[te?je:++Ae]=u,u+=w;return et}(f,w,te=te===b?f<w?1:-1:ss(te),u)}}function Wl(u){return function(f,w){return"string"==typeof f&&"string"==typeof w||(f=ws(f),w=ws(w)),u(f,w)}}function vp(u,f,w,te,Ae,je,et,ot,ut,St){var Ct=8&f;f|=Ct?v:64,4&(f&=~(Ct?64:v))||(f&=-4);var Ht=[u,f,Ae,Ct?je:b,Ct?et:b,Ct?b:je,Ct?b:et,ot,ut,St],Cn=w.apply(b,Ht);return su(u)&&Xl(Cn,Ht),Cn.placeholder=te,v_(Cn,u,f)}function xp(u){var f=lr[u];return function(w,te){if(w=ws(w),(te=null==te?0:oi(Gn(te),292))&&ov(w)){var Ae=(_i(w)+"e").split("e");return+((Ae=(_i(f(Ae[0]+"e"+(+Ae[1]+te)))+"e").split("e"))[0]+"e"+(+Ae[1]-te))}return f(w)}}var Mv=Sn&&1/Wf(new Sn([,-0]))[1]==Se?function(u){return new Sn(u)}:Fx;function Iv(u){return function(f){var w=Ji(f);return w==Q?zd(f):w==qe?function gS(lt){var xt=-1,_t=Array(lt.size);return lt.forEach(function(en){_t[++xt]=[en,en]}),_t}(f):function lN(lt,xt){return nr(xt,function(_t){return[_t,lt[_t]]})}(f,u(f))}}function is(u,f,w,te,Ae,je,et,ot){var ut=2&f;if(!ut&&"function"!=typeof u)throw new _s(_);var St=te?te.length:0;if(St||(f&=-97,te=Ae=b),et=et===b?et:hn(Gn(et),0),ot=ot===b?ot:Gn(ot),St-=Ae?Ae.length:0,64&f){var Ct=te,Nt=Ae;te=Ae=b}var Xt=ut?b:bh(u),fn=[u,f,w,te,Ae,Ct,Nt,je,et,ot];if(Xt&&function jo(u,f){var w=u[1],te=f[1],Ae=w|te;if(!(Ae<131)&&!(te==T&&8==w||te==T&&256==w&&u[7].length<=f[8]||384==te&&f[7].length<=f[8]&&8==w))return u;1&te&&(u[2]=f[2],Ae|=1&w?0:4);var ot=f[3];if(ot){var ut=u[3];u[3]=ut?wv(ut,ot,f[4]):ot,u[4]=ut?js(u[3],N):f[4]}(ot=f[5])&&(u[5]=(ut=u[5])?g_(ut,ot,f[6]):ot,u[6]=ut?js(u[5],N):f[6]),(ot=f[7])&&(u[7]=ot),te&T&&(u[8]=null==u[8]?f[8]:oi(u[8],f[8])),null==u[9]&&(u[9]=f[9]),u[0]=f[0],u[1]=Ae}(fn,Xt),u=fn[0],f=fn[1],w=fn[2],te=fn[3],Ae=fn[4],!(ot=fn[9]=fn[9]===b?ut?0:u.length:hn(fn[9]-St,0))&&24&f&&(f&=-25),f&&1!=f)wn=8==f||16==f?function zS(u,f,w){var te=rl(u);return function Ae(){for(var je=arguments.length,et=_t(je),ot=je,ut=nu(Ae);ot--;)et[ot]=arguments[ot];var St=je<3&&et[0]!==ut&&et[je-1]!==ut?[]:js(et,ut);return(je-=St.length)<w?vp(u,f,gh,Ae.placeholder,b,et,St,b,b,w-je):_o(this&&this!==ro&&this instanceof Ae?te:u,this,et)}}(u,f,ot):f!=v&&33!=f||Ae.length?gh.apply(b,fn):function yp(u,f,w,te){var Ae=1&f,je=rl(u);return function et(){for(var ot=-1,ut=arguments.length,St=-1,Ct=te.length,Nt=_t(Ct+ut),Xt=this&&this!==ro&&this instanceof et?je:u;++St<Ct;)Nt[St]=te[St];for(;ut--;)Nt[St++]=arguments[++ot];return _o(Xt,Ae?w:this,Nt)}}(u,f,w,te);else var wn=function Bo(u,f,w){var te=1&f,Ae=rl(u);return function je(){return(this&&this!==ro&&this instanceof je?Ae:u).apply(te?w:this,arguments)}}(u,f,w);return v_((Xt?yv:Xl)(wn,fn),u,f)}function tu(u,f,w,te){return u===b||os(u,yo[w])&&!Di.call(te,w)?f:u}function Dv(u,f,w,te,Ae,je){return Hi(u)&&Hi(f)&&(je.set(f,u),up(u,f,b,Dv,je),je.delete(f)),u}function SN(u){return Th(u)?b:u}function wp(u,f,w,te,Ae,je){var et=1&w,ot=u.length,ut=f.length;if(ot!=ut&&!(et&&ut>ot))return!1;var St=je.get(u),Ct=je.get(f);if(St&&Ct)return St==f&&Ct==u;var Nt=-1,Xt=!0,fn=2&w?new qd:b;for(je.set(u,f),je.set(f,u);++Nt<ot;){var wn=u[Nt],Ht=f[Nt];if(te)var Cn=et?te(Ht,wn,Nt,f,u,je):te(wn,Ht,Nt,u,f,je);if(Cn!==b){if(Cn)continue;Xt=!1;break}if(fn){if(!bo(f,function(ci,qn){if(!ih(fn,qn)&&(wn===ci||Ae(wn,ci,w,te,je)))return fn.push(qn)})){Xt=!1;break}}else if(wn!==Ht&&!Ae(wn,Ht,w,te,je)){Xt=!1;break}}return je.delete(u),je.delete(f),Xt}function bc(u){return sl(Tp(u,b,xh),u+"")}function Rv(u){return DS(u,Vr,Ep)}function kv(u){return DS(u,Ho,Pv)}var bh=pc?function(u){return pc.get(u)}:Fx;function ol(u){for(var f=u.name+"",w=$i[f],te=Di.call($i,f)?w.length:0;te--;){var Ae=w[te],je=Ae.func;if(null==je||je==u)return Ae.name}return f}function nu(u){return(Di.call(Ne,"placeholder")?Ne:u).placeholder}function xn(){var u=Ne.iteratee||sb;return u=u===sb?Lo:u,arguments.length?u(arguments[0],arguments[1]):u}function iu(u,f){var w=u.__data__;return function XS(u){var f=typeof u;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u}(f)?w["string"==typeof f?"string":"hash"]:w.map}function ru(u){for(var f=Vr(u),w=f.length;w--;){var te=f[w],Ae=u[te];f[w]=[te,Ae,y_(Ae)]}return f}function ou(u,f){var w=function mS(lt,xt){return null==lt?b:lt[xt]}(u,f);return s_(w)?w:b}var Ep=Wd?function(u){return null==u?[]:(u=Ni(u),ra(Wd(u),function(f){return rv.call(u,f)}))}:Oh,Pv=Wd?function(u){for(var f=[];u;)Un(f,Ep(u)),u=Qf(u);return f}:Oh,Ji=xo;function Sp(u,f,w){for(var te=-1,Ae=(f=wo(f,u)).length,je=!1;++te<Ae;){var et=za(f[te]);if(!(je=null!=u&&w(u,et)))break;u=u[et]}return je||++te!=Ae?je:!!(Ae=null==u?0:u.length)&&ql(Ae)&&Va(et,Ae)&&(Kn(u)||Kl(u))}function yh(u){return"function"!=typeof u.constructor||au(u)?{}:Jn(Qf(u))}function Fv(u){return Kn(u)||Kl(u)||!!(Ut&&u&&u[Ut])}function Va(u,f){var w=typeof u;return!!(f=f??Fe)&&("number"==w||"symbol"!=w&&ka.test(u))&&u>-1&&u%1==0&&u<f}function Ao(u,f,w){if(!Hi(w))return!1;var te=typeof f;return!!("number"==te?Uo(w)&&Va(f,w.length):"string"==te&&f in w)&&os(w[f],u)}function Cp(u,f){if(Kn(u))return!1;var w=typeof u;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=u&&!Vo(u))||qu.test(u)||!Nd.test(u)||null!=f&&u in Ni(f)}function su(u){var f=ol(u),w=Ne[f];if("function"!=typeof w||!(f in hi.prototype))return!1;if(u===w)return!0;var te=bh(w);return!!te&&u===te[0]}(dr&&Ji(new dr(new ArrayBuffer(1)))!=J||Vs&&Ji(new Vs)!=Q||Zc&&Ji(Zc.resolve())!=he||Sn&&Ji(new Sn)!=qe||fc&&Ji(new fc)!=Gt)&&(Ji=function(u){var f=xo(u),w=f==O?u.constructor:b,te=w?lu(w):"";if(te)switch(te){case lh:return J;case Yd:return Q;case Oa:return he;case dh:return qe;case sv:return Gt}return f});var YS=Kf?ga:dl;function au(u){var f=u&&u.constructor;return u===("function"==typeof f&&f.prototype||yo)}function y_(u){return u==u&&!Hi(u)}function cu(u,f){return function(w){return null!=w&&w[u]===f&&(f!==b||u in Ni(w))}}function Tp(u,f,w){return f=hn(f===b?u.length-1:f,0),function(){for(var te=arguments,Ae=-1,je=hn(te.length-f,0),et=_t(je);++Ae<je;)et[Ae]=te[f+Ae];Ae=-1;for(var ot=_t(f+1);++Ae<f;)ot[Ae]=te[Ae];return ot[f]=w(et),_o(u,this,ot)}}function Lv(u,f){return f.length<2?u:Qd(u,Hs(f,0,-1))}function ma(u,f){if(("constructor"!==f||"function"!=typeof u[f])&&"__proto__"!=f)return u[f]}var Xl=Mp(yv),Ha=bs||function(u,f){return ro.setTimeout(u,f)},sl=Mp(LS);function v_(u,f,w){var te=f+"";return sl(u,function $S(u,f){var w=f.length;if(!w)return u;var te=w-1;return f[te]=(w>1?"& ":"")+f[te],f=f.join(w>2?", ":" "),u.replace(Wc,"{\n/* [wrapped with "+f+"] */\n")}(te,function TN(u,f){return gs(st,function(w){var te="_."+w[0];f&w[1]&&!jd(u,te)&&u.push(te)}),u.sort()}(function Ap(u){var f=u.match($c);return f?f[1].split(Fd):[]}(te),w)))}function Mp(u){var f=0,w=0;return function(){var te=sa(),Ae=16-(te-w);if(w=te,Ae>0){if(++f>=800)return arguments[0]}else f=0;return u.apply(b,arguments)}}function yc(u,f){var w=-1,te=u.length,Ae=te-1;for(f=f===b?te:f;++w<f;){var je=hp(w,Ae),et=u[je];u[je]=u[w],u[w]=et}return u.length=f,u}var JS=function KS(u){var f=ll(u,function(te){return 500===w.size&&w.clear(),te}),w=f.cache;return f}(function(u){var f=[];return 46===u.charCodeAt(0)&&f.push(""),u.replace(Ju,function(w,te,Ae,je){f.push(Ae?je.replace(Ll,"$1"):te||w)}),f});function za(u){if("string"==typeof u||Vo(u))return u;var f=u+"";return"0"==f&&1/u==-Se?"-0":f}function lu(u){if(null!=u){try{return rh.call(u)}catch{}try{return u+""}catch{}}return""}function ZS(u){if(u instanceof hi)return u.clone();var f=new Qo(u.__wrapped__,u.__chain__);return f.__actions__=Eo(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}var du=si(function(u,f){return Vi(u)?yr(u,vo(f,1,Vi,!0)):[]}),QS=si(function(u,f){var w=Gs(f);return Vi(w)&&(w=b),Vi(u)?yr(u,vo(f,1,Vi,!0),xn(w,2)):[]}),eC=si(function(u,f){var w=Gs(f);return Vi(w)&&(w=b),Vi(u)?yr(u,vo(f,1,Vi,!0),b,w):[]});function Yl(u,f,w){var te=null==u?0:u.length;if(!te)return-1;var Ae=null==w?0:Gn(w);return Ae<0&&(Ae=hn(te+Ae,0)),$g(u,xn(f,3),Ae)}function x_(u,f,w){var te=null==u?0:u.length;if(!te)return-1;var Ae=te-1;return w!==b&&(Ae=Gn(w),Ae=w<0?hn(te+Ae,0):oi(Ae,te-1)),$g(u,xn(f,3),Ae,!0)}function xh(u){return null!=u&&u.length?vo(u,1):[]}function jv(u){return u&&u.length?u[0]:b}var w_=si(function(u){var f=nr(u,pp);return f.length&&f[0]===u[0]?cp(f):[]}),uu=si(function(u){var f=Gs(u),w=nr(u,pp);return f===Gs(w)?f=b:w.pop(),w.length&&w[0]===u[0]?cp(w,xn(f,2)):[]}),ON=si(function(u){var f=Gs(u),w=nr(u,pp);return(f="function"==typeof f?f:b)&&w.pop(),w.length&&w[0]===u[0]?cp(w,b,f):[]});function Gs(u){var f=null==u?0:u.length;return f?u[f-1]:b}var sC=si(Vv);function Vv(u,f){return u&&u.length&&f&&f.length?d_(u,f):u}var Ip=bc(function(u,f){var w=null==u?0:u.length,te=i_(u,f);return Dn(u,nr(f,function(Ae){return Va(Ae,w)?+Ae:Ae}).sort(p_)),te});function al(u){return null==u?u:$d.call(u)}var pC=si(function(u){return _c(vo(u,1,Vi,!0))}),NN=si(function(u){var f=Gs(u);return Vi(f)&&(f=b),_c(vo(u,1,Vi,!0),xn(f,2))}),mC=si(function(u){var f=Gs(u);return f="function"==typeof f?f:b,_c(vo(u,1,Vi,!0),b,f)});function Op(u){if(!u||!u.length)return[];var f=0;return u=ra(u,function(w){if(Vi(w))return f=hn(w.length,f),!0}),K0(f,function(w){return nr(u,Kg(w))})}function Wv(u,f){if(!u||!u.length)return[];var w=Op(u);return null==f?w:nr(w,function(te){return _o(f,b,te)})}var $v=si(function(u,f){return Vi(u)?yr(u,f):[]}),FN=si(function(u){return h_(ra(u,Vi))}),Xv=si(function(u){var f=Gs(u);return Vi(f)&&(f=b),h_(ra(u,Vi),xn(f,2))}),LN=si(function(u){var f=Gs(u);return f="function"==typeof f?f:b,h_(ra(u,Vi),b,f)}),bC=si(Op),BN=si(function(u){var f=u.length,w=f>1?u[f-1]:b;return w="function"==typeof w?(u.pop(),w):b,Wv(u,w)});function vC(u){var f=Ne(u);return f.__chain__=!0,f}function T_(u,f){return f(u)}var jN=bc(function(u){var f=u.length,w=f?u[0]:0,te=this.__wrapped__,Ae=function(je){return i_(je,u)};return!(f>1||this.__actions__.length)&&te instanceof hi&&Va(w)?((te=te.slice(w,+w+(f?1:0))).__actions__.push({func:T_,args:[Ae],thisArg:b}),new Qo(te,this.__chain__).thru(function(je){return f&&!je.length&&je.push(b),je})):this.thru(Ae)}),Kv=mh(function(u,f,w){Di.call(u,w)?++u[w]:mc(u,w,1)}),Jv=_p(Yl),Zv=_p(x_);function Qv(u,f){return(Kn(u)?gs:gc)(u,xn(f,3))}function ex(u,f){return(Kn(u)?uS:IS)(u,xn(f,3))}var wC=mh(function(u,f,w){Di.call(u,w)?u[w].push(f):mc(u,w,[f])}),M_=si(function(u,f,w){var te=-1,Ae="function"==typeof f,je=Uo(u)?_t(u.length):[];return gc(u,function(et){je[++te]=Ae?_o(f,et,w):ph(et,f,w)}),je}),EC=mh(function(u,f,w){mc(u,w,f)});function Bp(u,f){return(Kn(u)?nr:ns)(u,xn(f,3))}var nx=mh(function(u,f,w){u[w?0:1].push(f)},function(){return[[],[]]}),rx=si(function(u,f){if(null==u)return[];var w=f.length;return w>1&&Ao(u,f[0],f[1])?f=[]:w>2&&Ao(f[0],f[1],f[2])&&(f=[f[0]]),mv(u,vo(f,1),[])}),Sh=Gd||function(){return ro.Date.now()};function R_(u,f,w){return f=w?b:f,is(u,T,b,b,b,b,f=u&&null==f?u.length:f)}function ox(u,f){var w;if("function"!=typeof f)throw new _s(_);return u=Gn(u),function(){return--u>0&&(w=f.apply(this,arguments)),u<=1&&(f=b),w}}var jp=si(function(u,f,w){var te=1;if(w.length){var Ae=js(w,nu(jp));te|=v}return is(u,te,f,w,Ae)}),sx=si(function(u,f,w){var te=3;if(w.length){var Ae=js(w,nu(sx));te|=v}return is(f,te,u,w,Ae)});function cx(u,f,w){var te,Ae,je,et,ot,ut,St=0,Ct=!1,Nt=!1,Xt=!0;if("function"!=typeof u)throw new _s(_);function fn(Ir){var Ss=te,ul=Ae;return te=Ae=b,St=Ir,et=u.apply(ul,Ss)}function Cn(Ir){var Ss=Ir-ut;return ut===b||Ss>=f||Ss<0||Nt&&Ir-St>=je}function ci(){var Ir=Sh();if(Cn(Ir))return qn(Ir);ot=Ha(ci,function Ht(Ir){var am=f-(Ir-ut);return Nt?oi(am,je-(Ir-St)):am}(Ir))}function qn(Ir){return ot=b,Xt&&te?fn(Ir):(te=Ae=b,et)}function Or(){var Ir=Sh(),Ss=Cn(Ir);if(te=arguments,Ae=this,ut=Ir,Ss){if(ot===b)return function wn(Ir){return St=Ir,ot=Ha(ci,f),Ct?fn(Ir):et}(ut);if(Nt)return ja(ot),ot=Ha(ci,f),fn(ut)}return ot===b&&(ot=Ha(ci,f)),et}return f=ws(f)||0,Hi(w)&&(Ct=!!w.leading,je=(Nt="maxWait"in w)?hn(ws(w.maxWait)||0,f):je,Xt="trailing"in w?!!w.trailing:Xt),Or.cancel=function As(){ot!==b&&ja(ot),St=0,te=ut=Ae=ot=b},Or.flush=function zo(){return ot===b?et:qn(Sh())},Or}var O_=si(function(u,f){return fh(u,1,f)}),P_=si(function(u,f,w){return fh(u,ws(f)||0,w)});function ll(u,f){if("function"!=typeof u||null!=f&&"function"!=typeof f)throw new _s(_);var w=function(){var te=arguments,Ae=f?f.apply(this,te):te[0],je=w.cache;if(je.has(Ae))return je.get(Ae);var et=u.apply(this,te);return w.cache=je.set(Ae,et)||je,et};return w.cache=new(ll.Cache||Qc),w}function Up(u){if("function"!=typeof u)throw new _s(_);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}ll.Cache=Qc;var lx=vv(function(u,f){var w=(f=1==f.length&&Kn(f[0])?nr(f[0],Po(xn())):nr(vo(f,1),Po(xn()))).length;return si(function(te){for(var Ae=-1,je=oi(te.length,w);++Ae<je;)te[Ae]=f[Ae].call(this,te[Ae]);return _o(u,this,te)})}),Vp=si(function(u,f){var w=js(f,nu(Vp));return is(u,v,b,f,w)}),N_=si(function(u,f){var w=js(f,nu(N_));return is(u,64,b,f,w)}),pu=bc(function(u,f){return is(u,256,b,b,b,f)});function os(u,f){return u===f||u!=u&&f!=f}var L_=Wl(ap),B_=Wl(function(u,f){return u>=f}),Kl=o_(function(){return arguments}())?o_:function(u){return ur(u)&&Di.call(u,"callee")&&!rv.call(u,"callee")},Kn=_t.isArray,j_=sS?Po(sS):function uv(u){return ur(u)&&xo(u)==Re};function Uo(u){return null!=u&&ql(u.length)&&!ga(u)}function Vi(u){return ur(u)&&Uo(u)}var vc=ES||dl,FC=aS?Po(aS):function OS(u){return ur(u)&&xo(u)==ae};function Wp(u){if(!ur(u))return!1;var f=xo(u);return f==Le||"[object DOMException]"==f||"string"==typeof u.message&&"string"==typeof u.name&&!Th(u)}function ga(u){if(!Hi(u))return!1;var f=xo(u);return f==Ve||f==me||"[object AsyncFunction]"==f||"[object Proxy]"==f}function U_(u){return"number"==typeof u&&u==Gn(u)}function ql(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Fe}function Hi(u){var f=typeof u;return null!=u&&("object"==f||"function"==f)}function ur(u){return null!=u&&"object"==typeof u}var $p=cS?Po(cS):function La(u){return ur(u)&&Ji(u)==Q};function _x(u){return"number"==typeof u||ur(u)&&xo(u)==W}function Th(u){if(!ur(u)||xo(u)!=O)return!1;var f=Qf(u);if(null===f)return!0;var w=Di.call(f,"constructor")&&f.constructor;return"function"==typeof w&&w instanceof w&&rh.call(w)==nv}var H_=Et?Po(Et):function Xi(u){return ur(u)&&xo(u)==Ge},z_=lS?Po(lS):function NS(u){return ur(u)&&Ji(u)==qe};function Jl(u){return"string"==typeof u||!Kn(u)&&ur(u)&&xo(u)==ft}function Vo(u){return"symbol"==typeof u||ur(u)&&xo(u)==Pt}var _a=Jt?Po(Jt):function dp(u){return ur(u)&&ql(u.length)&&!!Ui[xo(u)]},VC=Wl(el),G_=Wl(function(u,f){return u<=f});function yx(u){if(!u)return[];if(Uo(u))return Jl(u)?Cr(u):Eo(u);if(Rr&&u[Rr])return function Wt(lt){for(var xt,_t=[];!(xt=lt.next()).done;)_t.push(xt.value);return _t}(u[Rr]());var f=Ji(u);return(f==Q?zd:f==qe?Wf:hr)(u)}function ss(u){return u?(u=ws(u))===Se||u===-Se?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Gn(u){var f=ss(u),w=f%1;return f==f?w?f-w:f:0}function Yp(u){return u?Vl(Gn(u),0,ge):0}function ws(u){if("number"==typeof u)return u;if(Vo(u))return NaN;if(Hi(u)){var f="function"==typeof u.valueOf?u.valueOf():u;u=Hi(f)?f+"":f}if("string"!=typeof u)return 0===u?u:+u;u=Ud(u);var w=cc.test(u);return w||Ra.test(u)?oN(u.slice(2),w?2:8):vi.test(u)?NaN:+u}function W_(u){return pa(u,Ho(u))}function _i(u){return null==u?"":Ri(u)}var HC=nl(function(u,f){if(au(f)||Uo(f))pa(f,Vr(f),u);else for(var w in f)Di.call(f,w)&&da(u,w,f[w])}),xx=nl(function(u,f){pa(f,Ho(f),u)}),Kp=nl(function(u,f,w,te){pa(f,Ho(f),u,te)}),zC=nl(function(u,f,w,te){pa(f,Vr(f),u,te)}),GC=bc(i_),Ga=si(function(u,f){u=Ni(u);var w=-1,te=f.length,Ae=te>2?f[2]:b;for(Ae&&Ao(f[0],f[1],Ae)&&(te=1);++w<te;)for(var je=f[w],et=Ho(je),ot=-1,ut=et.length;++ot<ut;){var St=et[ot],Ct=u[St];(Ct===b||os(Ct,yo[St])&&!Di.call(u,St))&&(u[St]=je[St])}return u}),WC=si(function(u){return u.push(b,Dv),_o(qp,b,u)});function $_(u,f,w){var te=null==u?b:Qd(u,f);return te===b?w:te}function mu(u,f){return null!=u&&Sp(u,f,dv)}var xc=__(function(u,f,w){null!=f&&"function"!=typeof f.toString&&(f=qf.call(f)),u[f]=w},ob(as)),Mh=__(function(u,f,w){null!=f&&"function"!=typeof f.toString&&(f=qf.call(f)),Di.call(u,f)?u[f].push(w):u[f]=[w]},xn),Ex=si(ph);function Vr(u){return Uo(u)?t_(u):a_(u)}function Ho(u){return Uo(u)?t_(u,!0):function hv(u){if(!Hi(u))return function qS(u){var f=[];if(null!=u)for(var w in Ni(u))f.push(w);return f}(u);var f=au(u),w=[];for(var te in u)"constructor"==te&&(f||!Di.call(u,te))||w.push(te);return w}(u)}var XN=nl(function(u,f,w){up(u,f,w)}),qp=nl(function(u,f,w,te){up(u,f,w,te)}),X_=bc(function(u,f){var w={};if(null==u)return w;var te=!1;f=nr(f,function(je){return je=wo(je,u),te||(te=je.length>1),je}),pa(u,kv(u),w),te&&(w=ua(w,7,SN));for(var Ae=f.length;Ae--;)zl(w,f[Ae]);return w}),KN=bc(function(u,f){return null==u?{}:function gv(u,f){return l_(u,f,function(w,te){return mu(u,te)})}(u,f)});function Y_(u,f){if(null==u)return{};var w=nr(kv(u),function(te){return[te]});return f=xn(f),l_(u,w,function(te,Ae){return f(te,Ae[0])})}var Ax=Iv(Vr),K_=Iv(Ho);function hr(u){return null==u?[]:Vd(u,Vr(u))}var sT=Fi(function(u,f,w){return f=f.toLowerCase(),u+(w?Tx(f):f)});function Tx(u){return ib(_i(u).toLowerCase())}function Mx(u){return(u=_i(u))&&u.replace(lc,Hd).replace(Rt,"")}var JN=Fi(function(u,f,w){return u+(w?"-":"")+f.toLowerCase()}),Ih=Fi(function(u,f,w){return u+(w?" ":"")+f.toLowerCase()}),bt=il("toLowerCase"),Rx=Fi(function(u,f,w){return u+(w?"_":"")+f.toLowerCase()}),Qp=Fi(function(u,f,w){return u+(w?" ":"")+ib(f)}),em=Fi(function(u,f,w){return u+(w?" ":"")+f.toUpperCase()}),ib=il("toUpperCase");function tm(u,f,w){return u=_i(u),(f=w?b:f)===b?function Q0(lt){return eS.test(lt)}(u)?function Jg(lt){return lt.match(jn)||[]}(u):function Ci(lt){return lt.match(Xc)||[]}(u):u.match(f)||[]}var Rh=si(function(u,f){try{return _o(u,b,f)}catch(w){return Wp(w)?w:new Vn(w)}}),Ws=bc(function(u,f){return gs(f,function(w){w=za(w),mc(u,w,jp(u[w],u))}),u});function ob(u){return function(){return u}}var Nx=Tv(),gu=Tv(!0);function as(u){return u}function sb(u){return Lo("function"==typeof u?u:ua(u,1))}var kh=si(function(u,f){return function(w){return ph(w,u,f)}}),fT=si(function(u,f){return function(w){return ph(u,w,f)}});function im(u,f,w){var te=Vr(f),Ae=sp(f,te);null==w&&(!Hi(f)||!Ae.length&&te.length)&&(w=f,f=u,u=this,Ae=sp(f,Vr(f)));var je=!(Hi(w)&&"chain"in w&&!w.chain),et=ga(u);return gs(Ae,function(ot){var ut=f[ot];u[ot]=ut,et&&(u.prototype[ot]=function(){var St=this.__chain__;if(je||St){var Ct=u(this.__wrapped__);return(Ct.__actions__=Eo(this.__actions__)).push({func:ut,args:arguments,thisArg:u}),Ct.__chain__=St,Ct}return ut.apply(u,Un([this.value()],arguments))})}),u}function Fx(){}var cb=Ua(nr),pT=Ua(eh),QN=Ua(bo);function mT(u){return Cp(u)?Kg(za(u)):function _v(u){return function(f){return Qd(f,u)}}(u)}var gT=_h(),lb=_h(!0);function Oh(){return[]}function dl(){return!1}var hb=Gl(function(u,f){return u+f},0),sm=xp("ceil"),eF=Gl(function(u,f){return u/f},1),fb=xp("floor"),jx=Gl(function(u,f){return u*f},1),vT=xp("round"),xT=Gl(function(u,f){return u-f},0);return Ne.after=function TC(u,f){if("function"!=typeof f)throw new _s(_);return u=Gn(u),function(){if(--u<1)return f.apply(this,arguments)}},Ne.ary=R_,Ne.assign=HC,Ne.assignIn=xx,Ne.assignInWith=Kp,Ne.assignWith=zC,Ne.at=GC,Ne.before=ox,Ne.bind=jp,Ne.bindAll=Ws,Ne.bindKey=sx,Ne.castArray=function RC(){if(!arguments.length)return[];var u=arguments[0];return Kn(u)?u:[u]},Ne.chain=vC,Ne.chunk=function MN(u,f,w){f=(w?Ao(u,f,w):f===b)?1:hn(Gn(f),0);var te=null==u?0:u.length;if(!te||f<1)return[];for(var Ae=0,je=0,et=_t(sh(te/f));Ae<te;)et[je++]=Hs(u,Ae,Ae+=f);return et},Ne.compact=function IN(u){for(var f=-1,w=null==u?0:u.length,te=0,Ae=[];++f<w;){var je=u[f];je&&(Ae[te++]=je)}return Ae},Ne.concat=function DN(){var u=arguments.length;if(!u)return[];for(var f=_t(u-1),w=arguments[0],te=u;te--;)f[te-1]=arguments[te];return Un(Kn(w)?Eo(w):[w],vo(f,1))},Ne.cond=function nm(u){var f=null==u?0:u.length,w=xn();return u=f?nr(u,function(te){if("function"!=typeof te[1])throw new _s(_);return[w(te[0]),te[1]]}):[],si(function(te){for(var Ae=-1;++Ae<f;){var je=u[Ae];if(_o(je[0],this,te))return _o(je[1],this,te)}})},Ne.conforms=function rb(u){return function MS(u){var f=Vr(u);return function(w){return ha(w,u,f)}}(ua(u,1))},Ne.constant=ob,Ne.countBy=Kv,Ne.create=function Es(u,f){var w=Jn(u);return null==f?w:np(w,f)},Ne.curry=function k_(u,f,w){var te=is(u,8,b,b,b,b,b,f=w?b:f);return te.placeholder=k_.placeholder,te},Ne.curryRight=function ax(u,f,w){var te=is(u,16,b,b,b,b,b,f=w?b:f);return te.placeholder=ax.placeholder,te},Ne.debounce=cx,Ne.defaults=Ga,Ne.defaultsDeep=WC,Ne.defer=O_,Ne.delay=P_,Ne.difference=du,Ne.differenceBy=QS,Ne.differenceWith=eC,Ne.drop=function Ur(u,f,w){var te=null==u?0:u.length;return te?Hs(u,(f=w||f===b?1:Gn(f))<0?0:f,te):[]},Ne.dropRight=function tC(u,f,w){var te=null==u?0:u.length;return te?Hs(u,0,(f=te-(f=w||f===b?1:Gn(f)))<0?0:f):[]},Ne.dropRightWhile=function vh(u,f){return u&&u.length?eu(u,xn(f,3),!0,!0):[]},Ne.dropWhile=function nC(u,f){return u&&u.length?eu(u,xn(f,3),!0):[]},Ne.fill=function zs(u,f,w,te){var Ae=null==u?0:u.length;return Ae?(w&&"number"!=typeof w&&Ao(u,f,w)&&(w=0,te=Ae),function ip(u,f,w,te){var Ae=u.length;for((w=Gn(w))<0&&(w=-w>Ae?0:Ae+w),(te=te===b||te>Ae?Ae:Gn(te))<0&&(te+=Ae),te=w>te?0:Yp(te);w<te;)u[w++]=f;return u}(u,f,w,te)):[]},Ne.filter=function fu(u,f){return(Kn(u)?ra:lv)(u,xn(f,3))},Ne.flatMap=function Fp(u,f){return vo(Bp(u,f),1)},Ne.flatMapDeep=function Lp(u,f){return vo(Bp(u,f),Se)},Ne.flatMapDepth=function cl(u,f,w){return w=w===b?1:Gn(w),vo(Bp(u,f),w)},Ne.flatten=xh,Ne.flattenDeep=function wh(u){return null!=u&&u.length?vo(u,Se):[]},Ne.flattenDepth=function iC(u,f){return null!=u&&u.length?vo(u,f=f===b?1:Gn(f)):[]},Ne.flip=function MC(u){return is(u,512)},Ne.flow=Nx,Ne.flowRight=gu,Ne.fromPairs=function RN(u){for(var f=-1,w=null==u?0:u.length,te={};++f<w;){var Ae=u[f];te[Ae[0]]=Ae[1]}return te},Ne.functions=function JC(u){return null==u?[]:sp(u,Vr(u))},Ne.functionsIn=function ZC(u){return null==u?[]:sp(u,Ho(u))},Ne.groupBy=wC,Ne.initial=function xs(u){return null!=u&&u.length?Hs(u,0,-1):[]},Ne.intersection=w_,Ne.intersectionBy=uu,Ne.intersectionWith=ON,Ne.invert=xc,Ne.invertBy=Mh,Ne.invokeMap=M_,Ne.iteratee=sb,Ne.keyBy=EC,Ne.keys=Vr,Ne.keysIn=Ho,Ne.map=Bp,Ne.mapKeys=function WN(u,f){var w={};return f=xn(f,3),Fa(u,function(te,Ae,je){mc(w,f(te,Ae,je),te)}),w},Ne.mapValues=function $N(u,f){var w={};return f=xn(f,3),Fa(u,function(te,Ae,je){mc(w,Ae,f(te,Ae,je))}),w},Ne.matches=function hT(u){return fv(ua(u,1))},Ne.matchesProperty=function ab(u,f){return pv(u,ua(f,1))},Ne.memoize=ll,Ne.merge=XN,Ne.mergeWith=qp,Ne.method=kh,Ne.methodOf=fT,Ne.mixin=im,Ne.negate=Up,Ne.nthArg=function Hr(u){return u=Gn(u),si(function(f){return c_(f,u)})},Ne.omit=X_,Ne.omitBy=function YN(u,f){return Y_(u,Up(xn(f)))},Ne.once=function IC(u){return ox(2,u)},Ne.orderBy=function AC(u,f,w,te){return null==u?[]:(Kn(f)||(f=null==f?[]:[f]),Kn(w=te?b:w)||(w=null==w?[]:[w]),mv(u,f,w))},Ne.over=cb,Ne.overArgs=lx,Ne.overEvery=pT,Ne.overSome=QN,Ne.partial=Vp,Ne.partialRight=N_,Ne.partition=nx,Ne.pick=KN,Ne.pickBy=Y_,Ne.property=mT,Ne.propertyOf=function rm(u){return function(f){return null==u?b:Qd(u,f)}},Ne.pull=sC,Ne.pullAll=Vv,Ne.pullAllBy=function aC(u,f,w){return u&&u.length&&f&&f.length?d_(u,f,xn(w,2)):u},Ne.pullAllWith=function E_(u,f,w){return u&&u.length&&f&&f.length?d_(u,f,b,w):u},Ne.pullAt=Ip,Ne.range=gT,Ne.rangeRight=lb,Ne.rearg=pu,Ne.reject=function rs(u,f){return(Kn(u)?ra:lv)(u,Up(xn(f,3)))},Ne.remove=function cC(u,f){var w=[];if(!u||!u.length)return w;var te=-1,Ae=[],je=u.length;for(f=xn(f,3);++te<je;){var et=u[te];f(et,te,u)&&(w.push(et),Ae.push(te))}return Dn(u,Ae),w},Ne.rest=function Hp(u,f){if("function"!=typeof u)throw new _s(_);return si(u,f=f===b?f:Gn(f))},Ne.reverse=al,Ne.sampleSize=function ix(u,f,w){return f=(w?Ao(u,f,w):f===b)?1:Gn(f),(Kn(u)?xN:bv)(u,f)},Ne.set=function tT(u,f,w){return null==u?u:Ba(u,f,w)},Ne.setWith=function nT(u,f,w,te){return te="function"==typeof te?te:b,null==u?u:Ba(u,f,w,te)},Ne.shuffle=function D_(u){return(Kn(u)?wN:BS)(u)},Ne.slice=function lC(u,f,w){var te=null==u?0:u.length;return te?(w&&"number"!=typeof w&&Ao(u,f,w)?(f=0,w=te):(f=null==f?0:Gn(f),w=w===b?te:Gn(w)),Hs(u,f,w)):[]},Ne.sortBy=rx,Ne.sortedUniq=function uC(u){return u&&u.length?vr(u):[]},Ne.sortedUniqBy=function hC(u,f){return u&&u.length?vr(u,xn(f,2)):[]},Ne.split=function kx(u,f,w){return w&&"number"!=typeof w&&Ao(u,f,w)&&(f=w=b),(w=w===b?ge:w>>>0)?(u=_i(u))&&("string"==typeof f||null!=f&&!H_(f))&&!(f=Ri(f))&&it(u)?vs(Cr(u),0,w):u.split(f,w):[]},Ne.spread=function dx(u,f){if("function"!=typeof u)throw new _s(_);return f=null==f?0:hn(Gn(f),0),si(function(w){var te=w[f],Ae=vs(w,0,f);return te&&Un(Ae,te),_o(u,this,Ae)})},Ne.tail=function hu(u){var f=null==u?0:u.length;return f?Hs(u,1,f):[]},Ne.take=function Eh(u,f,w){return u&&u.length?Hs(u,0,(f=w||f===b?1:Gn(f))<0?0:f):[]},Ne.takeRight=function fC(u,f,w){var te=null==u?0:u.length;return te?Hs(u,(f=te-(f=w||f===b?1:Gn(f)))<0?0:f,te):[]},Ne.takeRightWhile=function PN(u,f){return u&&u.length?eu(u,xn(f,3),!1,!0):[]},Ne.takeWhile=function Gv(u,f){return u&&u.length?eu(u,xn(f,3)):[]},Ne.tap=function C_(u,f){return f(u),u},Ne.throttle=function F_(u,f,w){var te=!0,Ae=!0;if("function"!=typeof u)throw new _s(_);return Hi(w)&&(te="leading"in w?!!w.leading:te,Ae="trailing"in w?!!w.trailing:Ae),cx(u,f,{leading:te,maxWait:f,trailing:Ae})},Ne.thru=T_,Ne.toArray=yx,Ne.toPairs=Ax,Ne.toPairsIn=K_,Ne.toPath=function Nh(u){return Kn(u)?nr(u,za):Vo(u)?[u]:Eo(JS(_i(u)))},Ne.toPlainObject=W_,Ne.transform=function Jp(u,f,w){var te=Kn(u),Ae=te||vc(u)||_a(u);if(f=xn(f,4),null==w){var je=u&&u.constructor;w=Ae?te?new je:[]:Hi(u)&&ga(je)?Jn(Qf(u)):{}}return(Ae?gs:Fa)(u,function(et,ot,ut){return f(w,et,ot,ut)}),w},Ne.unary=function zp(u){return R_(u,1)},Ne.union=pC,Ne.unionBy=NN,Ne.unionWith=mC,Ne.uniq=function gC(u){return u&&u.length?_c(u):[]},Ne.uniqBy=function _C(u,f){return u&&u.length?_c(u,xn(f,2)):[]},Ne.uniqWith=function kp(u,f){return f="function"==typeof f?f:b,u&&u.length?_c(u,b,f):[]},Ne.unset=function Sx(u,f){return null==u||zl(u,f)},Ne.unzip=Op,Ne.unzipWith=Wv,Ne.update=function q_(u,f,w){return null==u?u:fa(u,f,ao(w))},Ne.updateWith=function iT(u,f,w,te){return te="function"==typeof te?te:b,null==u?u:fa(u,f,ao(w),te)},Ne.values=hr,Ne.valuesIn=function rT(u){return null==u?[]:Vd(u,Ho(u))},Ne.without=$v,Ne.words=tm,Ne.wrap=function DC(u,f){return Vp(ao(f),u)},Ne.xor=FN,Ne.xorBy=Xv,Ne.xorWith=LN,Ne.zip=bC,Ne.zipObject=function yC(u,f){return US(u||[],f||[],da)},Ne.zipObjectDeep=function S_(u,f){return US(u||[],f||[],Ba)},Ne.zipWith=BN,Ne.entries=Ax,Ne.entriesIn=K_,Ne.extend=xx,Ne.extendWith=Kp,im(Ne,Ne),Ne.add=hb,Ne.attempt=Rh,Ne.camelCase=sT,Ne.capitalize=Tx,Ne.ceil=sm,Ne.clamp=function oT(u,f,w){return w===b&&(w=f,f=b),w!==b&&(w=(w=ws(w))==w?w:0),f!==b&&(f=(f=ws(f))==f?f:0),Vl(ws(u),f,w)},Ne.clone=function kC(u){return ua(u,4)},Ne.cloneDeep=function PC(u){return ua(u,5)},Ne.cloneDeepWith=function NC(u,f){return ua(u,5,f="function"==typeof f?f:b)},Ne.cloneWith=function OC(u,f){return ua(u,4,f="function"==typeof f?f:b)},Ne.conformsTo=function ux(u,f){return null==f||ha(u,f,Vr(f))},Ne.deburr=Mx,Ne.defaultTo=function uT(u,f){return null==u||u!=u?f:u},Ne.divide=eF,Ne.endsWith=function aT(u,f,w){u=_i(u),f=Ri(f);var te=u.length,Ae=w=w===b?te:Vl(Gn(w),0,te);return(w-=f.length)>=0&&u.slice(w,Ae)==f},Ne.eq=os,Ne.escape=function Ix(u){return(u=_i(u))&&ms.test(u)?u.replace(qi,pS):u},Ne.escapeRegExp=function qN(u){return(u=_i(u))&&ac.test(u)?u.replace(zc,"\\$&"):u},Ne.every=function qv(u,f,w){var te=Kn(u)?eh:r_;return w&&Ao(u,f,w)&&(f=b),te(u,xn(f,3))},Ne.find=Jv,Ne.findIndex=Yl,Ne.findKey=function $C(u,f){return hS(u,xn(f,3),Fa)},Ne.findLast=Zv,Ne.findLastIndex=x_,Ne.findLastKey=function XC(u,f){return hS(u,xn(f,3),Zd)},Ne.floor=fb,Ne.forEach=Qv,Ne.forEachRight=ex,Ne.forIn=function YC(u,f){return null==u?u:rp(u,xn(f,3),Ho)},Ne.forInRight=function KC(u,f){return null==u?u:op(u,xn(f,3),Ho)},Ne.forOwn=function qC(u,f){return u&&Fa(u,xn(f,3))},Ne.forOwnRight=function wx(u,f){return u&&Zd(u,xn(f,3))},Ne.get=$_,Ne.gt=L_,Ne.gte=B_,Ne.has=function QC(u,f){return null!=u&&Sp(u,f,RS)},Ne.hasIn=mu,Ne.head=jv,Ne.identity=as,Ne.includes=function tx(u,f,w,te){u=Uo(u)?u:hr(u),w=w&&!te?Gn(w):0;var Ae=u.length;return w<0&&(w=hn(Ae+w,0)),Jl(u)?w<=Ae&&u.indexOf(f,w)>-1:!!Ae&&qc(u,f,w)>-1},Ne.indexOf=function kN(u,f,w){var te=null==u?0:u.length;if(!te)return-1;var Ae=null==w?0:Gn(w);return Ae<0&&(Ae=hn(te+Ae,0)),qc(u,f,Ae)},Ne.inRange=function J_(u,f,w){return f=ss(f),w===b?(w=f,f=0):w=ss(w),function Mr(u,f,w){return u>=oi(f,w)&&u<hn(f,w)}(u=ws(u),f,w)},Ne.invoke=Ex,Ne.isArguments=Kl,Ne.isArray=Kn,Ne.isArrayBuffer=j_,Ne.isArrayLike=Uo,Ne.isArrayLikeObject=Vi,Ne.isBoolean=function hx(u){return!0===u||!1===u||ur(u)&&xo(u)==I},Ne.isBuffer=vc,Ne.isDate=FC,Ne.isElement=function zN(u){return ur(u)&&1===u.nodeType&&!Th(u)},Ne.isEmpty=function Gp(u){if(null==u)return!0;if(Uo(u)&&(Kn(u)||"string"==typeof u||"function"==typeof u.splice||vc(u)||_a(u)||Kl(u)))return!u.length;var f=Ji(u);if(f==Q||f==qe)return!u.size;if(au(u))return!a_(u).length;for(var w in u)if(Di.call(u,w))return!1;return!0},Ne.isEqual=function LC(u,f){return Hl(u,f)},Ne.isEqualWith=function fx(u,f,w){var te=(w="function"==typeof w?w:b)?w(u,f):b;return te===b?Hl(u,f,b,w):!!te},Ne.isError=Wp,Ne.isFinite=function px(u){return"number"==typeof u&&ov(u)},Ne.isFunction=ga,Ne.isInteger=U_,Ne.isLength=ql,Ne.isMap=$p,Ne.isMatch=function Xp(u,f){return u===f||lp(u,f,ru(f))},Ne.isMatchWith=function mx(u,f,w){return w="function"==typeof w?w:b,lp(u,f,ru(f),w)},Ne.isNaN=function V_(u){return _x(u)&&u!=+u},Ne.isNative=function Ch(u){if(YS(u))throw new Vn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return s_(u)},Ne.isNil=function gx(u){return null==u},Ne.isNull=function BC(u){return null===u},Ne.isNumber=_x,Ne.isObject=Hi,Ne.isObjectLike=ur,Ne.isPlainObject=Th,Ne.isRegExp=H_,Ne.isSafeInteger=function bx(u){return U_(u)&&u>=-Fe&&u<=Fe},Ne.isSet=z_,Ne.isString=Jl,Ne.isSymbol=Vo,Ne.isTypedArray=_a,Ne.isUndefined=function jC(u){return u===b},Ne.isWeakMap=function UC(u){return ur(u)&&Ji(u)==Gt},Ne.isWeakSet=function GN(u){return ur(u)&&"[object WeakSet]"==xo(u)},Ne.join=function Uv(u,f){return null==u?"":Tr.call(u,f)},Ne.kebabCase=JN,Ne.last=Gs,Ne.lastIndexOf=function rC(u,f,w){var te=null==u?0:u.length;if(!te)return-1;var Ae=te;return w!==b&&(Ae=(Ae=Gn(w))<0?hn(te+Ae,0):oi(Ae,te-1)),f==f?function uc(lt,xt,_t){for(var en=_t+1;en--;)if(lt[en]===xt)return en;return en}(u,f,Ae):$g(u,Yg,Ae,!0)},Ne.lowerCase=Ih,Ne.lowerFirst=bt,Ne.lt=VC,Ne.lte=G_,Ne.max=function Fh(u){return u&&u.length?Jd(u,as,ap):b},Ne.maxBy=function _T(u,f){return u&&u.length?Jd(u,xn(f,2),ap):b},Ne.mean=function Bx(u){return zf(u,as)},Ne.meanBy=function bT(u,f){return zf(u,xn(f,2))},Ne.min=function yT(u){return u&&u.length?Jd(u,as,el):b},Ne.minBy=function pb(u,f){return u&&u.length?Jd(u,xn(f,2),el):b},Ne.stubArray=Oh,Ne.stubFalse=dl,Ne.stubObject=function db(){return{}},Ne.stubString=function ub(){return""},Ne.stubTrue=function Ph(){return!0},Ne.multiply=jx,Ne.nth=function oC(u,f){return u&&u.length?c_(u,Gn(f)):b},Ne.noConflict=function ba(){return ro._===this&&(ro._=xS),this},Ne.noop=Fx,Ne.now=Sh,Ne.pad=function Dh(u,f,w){u=_i(u);var te=(f=Gn(f))?hc(u):0;if(!f||te>=f)return u;var Ae=(f-te)/2;return bp(ah(Ae),w)+u+bp(sh(Ae),w)},Ne.padEnd=function Zp(u,f,w){u=_i(u);var te=(f=Gn(f))?hc(u):0;return f&&te<f?u+bp(f-te,w):u},Ne.padStart=function Dx(u,f,w){u=_i(u);var te=(f=Gn(f))?hc(u):0;return f&&te<f?bp(f-te,w)+u:u},Ne.parseInt=function Z_(u,f,w){return w||null==f?f=0:f&&(f=+f),ch(_i(u).replace(Gc,""),f||0)},Ne.random=function Cx(u,f,w){if(w&&"boolean"!=typeof w&&Ao(u,f,w)&&(f=w=b),w===b&&("boolean"==typeof f?(w=f,f=b):"boolean"==typeof u&&(w=u,u=b)),u===b&&f===b?(u=0,f=1):(u=ss(u),f===b?(f=u,u=0):f=ss(f)),u>f){var te=u;u=f,f=te}if(w||u%1||f%1){var Ae=oo();return oi(u+Ae*(f-u+rN("1e-"+((Ae+"").length-1))),f)}return hp(u,f)},Ne.reduce=function SC(u,f,w){var te=Kn(u)?th:fS,Ae=arguments.length<3;return te(u,xn(f,4),w,Ae,gc)},Ne.reduceRight=function CC(u,f,w){var te=Kn(u)?$0:fS,Ae=arguments.length<3;return te(u,xn(f,4),w,Ae,IS)},Ne.repeat=function Q_(u,f,w){return f=(w?Ao(u,f,w):f===b)?1:Gn(f),u_(_i(u),f)},Ne.replace=function cT(){var u=arguments,f=_i(u[0]);return u.length<3?f:f.replace(u[1],u[2])},Ne.result=function eT(u,f,w){var te=-1,Ae=(f=wo(f,u)).length;for(Ae||(Ae=1,u=b);++te<Ae;){var je=null==u?b:u[za(f[te])];je===b&&(te=Ae,je=w),u=ga(je)?je.call(u):je}return u},Ne.round=vT,Ne.runInContext=lt,Ne.sample=function I_(u){return(Kn(u)?n_:FS)(u)},Ne.size=function So(u){if(null==u)return 0;if(Uo(u))return Jl(u)?hc(u):u.length;var f=Ji(u);return f==Q||f==qe?u.size:a_(u).length},Ne.snakeCase=Rx,Ne.some=function Ah(u,f,w){var te=Kn(u)?bo:jS;return w&&Ao(u,f,w)&&(f=b),te(u,xn(f,3))},Ne.sortedIndex=function Dp(u,f){return Tt(u,f)},Ne.sortedIndexBy=function dC(u,f,w){return gi(u,f,xn(w,2))},Ne.sortedIndexOf=function Hv(u,f){var w=null==u?0:u.length;if(w){var te=Tt(u,f);if(te<w&&os(u[te],f))return te}return-1},Ne.sortedLastIndex=function A_(u,f){return Tt(u,f,!0)},Ne.sortedLastIndexBy=function Rp(u,f,w){return gi(u,f,xn(w,2),!0)},Ne.sortedLastIndexOf=function zv(u,f){if(null!=u&&u.length){var te=Tt(u,f,!0)-1;if(os(u[te],f))return te}return-1},Ne.startCase=Qp,Ne.startsWith=function ZN(u,f,w){return u=_i(u),w=null==w?0:Vl(Gn(w),0,u.length),f=Ri(f),u.slice(w,w+f.length)==f},Ne.subtract=xT,Ne.sum=function tF(u){return u&&u.length?Y0(u,as):0},Ne.sumBy=function wT(u,f){return u&&u.length?Y0(u,xn(f,2)):0},Ne.template=function eb(u,f,w){var te=Ne.templateSettings;w&&Ao(u,f,w)&&(f=b),u=_i(u),f=Kp({},f,te,tu);var ot,ut,Ae=Kp({},f.imports,te.imports,tu),je=Vr(Ae),et=Vd(Ae,je),St=0,Ct=f.interpolate||ko,Nt="__p += '",Xt=Xf((f.escape||ko).source+"|"+Ct.source+"|"+(Ct===po?Bl:ko).source+"|"+(f.evaluate||ko).source+"|$","g"),fn="//# sourceURL="+(Di.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tS+"]")+"\n";u.replace(Xt,function(Cn,ci,qn,As,zo,Or){return qn||(qn=As),Nt+=u.slice(St,Or).replace(be,Jc),ci&&(ot=!0,Nt+="' +\n__e("+ci+") +\n'"),zo&&(ut=!0,Nt+="';\n"+zo+";\n__p += '"),qn&&(Nt+="' +\n((__t = ("+qn+")) == null ? '' : __t) +\n'"),St=Or+Cn.length,Cn}),Nt+="';\n";var wn=Di.call(f,"variable")&&f.variable;if(wn){if(Ld.test(wn))throw new Vn("Invalid `variable` option passed into `_.template`")}else Nt="with (obj) {\n"+Nt+"\n}\n";Nt=(ut?Nt.replace(In,""):Nt).replace(Io,"$1").replace(Lr,"$1;"),Nt="function("+(wn||"obj")+") {\n"+(wn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(ot?", __e = _.escape":"")+(ut?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Nt+"return __p\n}";var Ht=Rh(function(){return Ei(je,fn+"return "+Nt).apply(b,et)});if(Ht.source=Nt,Wp(Ht))throw Ht;return Ht},Ne.times=function om(u,f){if((u=Gn(u))<1||u>Fe)return[];var w=ge,te=oi(u,ge);f=xn(f),u-=ge;for(var Ae=K0(te,f);++w<u;)f(w);return Ae},Ne.toFinite=ss,Ne.toInteger=Gn,Ne.toLength=Yp,Ne.toLower=function lT(u){return _i(u).toLowerCase()},Ne.toNumber=ws,Ne.toSafeInteger=function vx(u){return u?Vl(Gn(u),-Fe,Fe):0===u?u:0},Ne.toString=_i,Ne.toUpper=function tb(u){return _i(u).toUpperCase()},Ne.trim=function Ox(u,f,w){if((u=_i(u))&&(w||f===b))return Ud(u);if(!u||!(f=Ri(f)))return u;var te=Cr(u),Ae=Cr(f);return vs(te,q0(te,Ae),J0(te,Ae)+1).join("")},Ne.trimEnd=function Px(u,f,w){if((u=_i(u))&&(w||f===b))return u.slice(0,oa(u)+1);if(!u||!(f=Ri(f)))return u;var te=Cr(u);return vs(te,0,J0(te,Cr(f))+1).join("")},Ne.trimStart=function Zl(u,f,w){if((u=_i(u))&&(w||f===b))return u.replace(Gc,"");if(!u||!(f=Ri(f)))return u;var te=Cr(u);return vs(te,q0(te,Cr(f))).join("")},Ne.truncate=function dT(u,f){var w=30,te="...";if(Hi(f)){var Ae="separator"in f?f.separator:Ae;w="length"in f?Gn(f.length):w,te="omission"in f?Ri(f.omission):te}var je=(u=_i(u)).length;if(it(u)){var et=Cr(u);je=et.length}if(w>=je)return u;var ot=w-hc(te);if(ot<1)return te;var ut=et?vs(et,0,ot).join(""):u.slice(0,ot);if(Ae===b)return ut+te;if(et&&(ot+=ut.length-ot),H_(Ae)){if(u.slice(ot).search(Ae)){var St,Ct=ut;for(Ae.global||(Ae=Xf(Ae.source,_i(Yc.exec(Ae))+"g")),Ae.lastIndex=0;St=Ae.exec(Ct);)var Nt=St.index;ut=ut.slice(0,Nt===b?ot:Nt)}}else if(u.indexOf(Ri(Ae),ot)!=ot){var Xt=ut.lastIndexOf(Ae);Xt>-1&&(ut=ut.slice(0,Xt))}return ut+te},Ne.unescape=function nb(u){return(u=_i(u))&&Br.test(u)?u.replace(Do,wi):u},Ne.uniqueId=function Lx(u){var f=++vS;return _i(u)+f},Ne.upperCase=em,Ne.upperFirst=ib,Ne.each=Qv,Ne.eachRight=ex,Ne.first=jv,im(Ne,function(){var u={};return Fa(Ne,function(f,w){Di.call(Ne.prototype,w)||(u[w]=f)}),u}(),{chain:!1}),Ne.VERSION="4.17.21",gs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Ne[u].placeholder=Ne}),gs(["drop","take"],function(u,f){hi.prototype[u]=function(w){w=w===b?1:hn(Gn(w),0);var te=this.__filtered__&&!f?new hi(this):this.clone();return te.__filtered__?te.__takeCount__=oi(w,te.__takeCount__):te.__views__.push({size:oi(w,ge),type:u+(te.__dir__<0?"Right":"")}),te},hi.prototype[u+"Right"]=function(w){return this.reverse()[u](w).reverse()}}),gs(["filter","map","takeWhile"],function(u,f){var w=f+1,te=1==w||3==w;hi.prototype[u]=function(Ae){var je=this.clone();return je.__iteratees__.push({iteratee:xn(Ae,3),type:w}),je.__filtered__=je.__filtered__||te,je}}),gs(["head","last"],function(u,f){var w="take"+(f?"Right":"");hi.prototype[u]=function(){return this[w](1).value()[0]}}),gs(["initial","tail"],function(u,f){var w="drop"+(f?"":"Right");hi.prototype[u]=function(){return this.__filtered__?new hi(this):this[w](1)}}),hi.prototype.compact=function(){return this.filter(as)},hi.prototype.find=function(u){return this.filter(u).head()},hi.prototype.findLast=function(u){return this.reverse().find(u)},hi.prototype.invokeMap=si(function(u,f){return"function"==typeof u?new hi(this):this.map(function(w){return ph(w,u,f)})}),hi.prototype.reject=function(u){return this.filter(Up(xn(u)))},hi.prototype.slice=function(u,f){u=Gn(u);var w=this;return w.__filtered__&&(u>0||f<0)?new hi(w):(u<0?w=w.takeRight(-u):u&&(w=w.drop(u)),f!==b&&(w=(f=Gn(f))<0?w.dropRight(-f):w.take(f-u)),w)},hi.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},hi.prototype.toArray=function(){return this.take(ge)},Fa(hi.prototype,function(u,f){var w=/^(?:filter|find|map|reject)|While$/.test(f),te=/^(?:head|last)$/.test(f),Ae=Ne[te?"take"+("last"==f?"Right":""):f],je=te||/^find/.test(f);Ae&&(Ne.prototype[f]=function(){var et=this.__wrapped__,ot=te?[1]:arguments,ut=et instanceof hi,St=ot[0],Ct=ut||Kn(et),Nt=function(ci){var qn=Ae.apply(Ne,Un([ci],ot));return te&&Xt?qn[0]:qn};Ct&&w&&"function"==typeof St&&1!=St.length&&(ut=Ct=!1);var Xt=this.__chain__,wn=je&&!Xt,Ht=ut&&!this.__actions__.length;if(!je&&Ct){et=Ht?et:new hi(this);var Cn=u.apply(et,ot);return Cn.__actions__.push({func:T_,args:[Nt],thisArg:b}),new Qo(Cn,Xt)}return wn&&Ht?u.apply(this,ot):(Cn=this.thru(Nt),wn?te?Cn.value()[0]:Cn.value():Cn)})}),gs(["pop","push","shift","sort","splice","unshift"],function(u){var f=Yf[u],w=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",te=/^(?:pop|shift)$/.test(u);Ne.prototype[u]=function(){var Ae=arguments;if(te&&!this.__chain__){var je=this.value();return f.apply(Kn(je)?je:[],Ae)}return this[w](function(et){return f.apply(Kn(et)?et:[],Ae)})}}),Fa(hi.prototype,function(u,f){var w=Ne[f];if(w){var te=w.name+"";Di.call($i,te)||($i[te]=[]),$i[te].push({name:f,func:w})}}),$i[gh(b,2).name]=[{name:"wrapper",func:b}],hi.prototype.clone=function Pa(){var u=new hi(this.__wrapped__);return u.__actions__=Eo(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Eo(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Eo(this.__views__),u},hi.prototype.reverse=function ep(){if(this.__filtered__){var u=new hi(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},hi.prototype.value=function Kd(){var u=this.__wrapped__.value(),f=this.__dir__,w=Kn(u),te=f<0,Ae=w?u.length:0,je=function WS(u,f,w){for(var te=-1,Ae=w.length;++te<Ae;){var je=w[te],et=je.size;switch(je.type){case"drop":u+=et;break;case"dropRight":f-=et;break;case"take":f=oi(f,u+et);break;case"takeRight":u=hn(u,f-et)}}return{start:u,end:f}}(0,Ae,this.__views__),et=je.start,ot=je.end,ut=ot-et,St=te?ot:et-1,Ct=this.__iteratees__,Nt=Ct.length,Xt=0,fn=oi(ut,this.__takeCount__);if(!w||!te&&Ae==ut&&fn==ut)return fp(u,this.__actions__);var wn=[];e:for(;ut--&&Xt<fn;){for(var Ht=-1,Cn=u[St+=f];++Ht<Nt;){var ci=Ct[Ht],As=ci.type,zo=(0,ci.iteratee)(Cn);if(2==As)Cn=zo;else if(!zo){if(1==As)continue e;break e}}wn[Xt++]=Cn}return wn},Ne.prototype.at=jN,Ne.prototype.chain=function UN(){return vC(this)},Ne.prototype.commit=function VN(){return new Qo(this.value(),this.__chain__)},Ne.prototype.next=function HN(){this.__values__===b&&(this.__values__=yx(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?b:this.__values__[this.__index__++]}},Ne.prototype.plant=function Pp(u){for(var f,w=this;w instanceof Zg;){var te=ZS(w);te.__index__=0,te.__values__=b,f?Ae.__wrapped__=te:f=te;var Ae=te;w=w.__wrapped__}return Ae.__wrapped__=u,f},Ne.prototype.reverse=function Np(){var u=this.__wrapped__;if(u instanceof hi){var f=u;return this.__actions__.length&&(f=new hi(this)),(f=f.reverse()).__actions__.push({func:T_,args:[al],thisArg:b}),new Qo(f,this.__chain__)}return this.thru(al)},Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=function Yv(){return fp(this.__wrapped__,this.__actions__)},Ne.prototype.first=Ne.prototype.head,Rr&&(Ne.prototype[Rr]=function xC(){return this}),Ne}();ro._=Us,(E=function(){return Us}.call(Z,g,Z,ne))!==b&&(ne.exports=E)}.call(this)},7659:(ne,Z,g)=>{var E=g(1811);function R(A,P){if("function"!=typeof A||null!=P&&"function"!=typeof P)throw new TypeError("Expected a function");var _=function(){var y=arguments,M=P?P.apply(this,y):y[0],U=_.cache;if(U.has(M))return U.get(M);var N=A.apply(this,y);return _.cache=U.set(M,N)||U,N};return _.cache=new(R.Cache||E),_}R.Cache=E,ne.exports=R},2692:(ne,Z,g)=>{var E=g(3400),b=g(6443),R=g(6300),A=g(8916);ne.exports=function P(_){return R(_)?E(A(_)):b(_)}},7184:(ne,Z,g)=>{var E=g(1883),b=g(252),R=g(8951),A=g(3817),P=R(function(_,y){if(null==_)return[];var M=y.length;return M>1&&A(_,y[0],y[1])?y=[]:M>2&&A(y[0],y[1],y[2])&&(y=[y[0]]),b(_,E(y,1),[])});ne.exports=P},1315:ne=>{ne.exports=function Z(){return[]}},5706:ne=>{ne.exports=function Z(){return!1}},2674:(ne,Z,g)=>{var E=g(7002);ne.exports=function b(R){return null==R?"":E(R)}},5249:(ne,Z,g)=>{var E=g(549),b=E.ARRAY_BUFFER_SUPPORT,R=E.SYMBOL_SUPPORT;ne.exports=function(P,_){var y,M,U,N,j;if(!P)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(P)||b&&ArrayBuffer.isView(P)||"string"==typeof P||"[object Arguments]"===P.toString())for(U=0,N=P.length;U<N;U++)_(P[U],U);else if("function"!=typeof P.forEach)if(R&&Symbol.iterator in P&&"function"!=typeof P.next&&(P=P[Symbol.iterator]()),"function"!=typeof P.next)for(M in P)P.hasOwnProperty(M)&&_(P[M],M);else for(y=P,U=0;!0!==(j=y.next()).done;)_(j.value,U),U++;else P.forEach(_)}},2508:ne=>{function Z(g){if("function"!=typeof g)throw new Error("obliterator/iterator: expecting a function!");this.next=g}typeof Symbol<"u"&&(Z.prototype[Symbol.iterator]=function(){return this}),Z.of=function(){var g=arguments,E=g.length,b=0;return new Z(function(){return b>=E?{done:!0}:{done:!1,value:g[b++]}})},Z.empty=function(){return new Z(function(){return{done:!0}})},Z.fromSequence=function(g){var E=0,b=g.length;return new Z(function(){return E>=b?{done:!0}:{done:!1,value:g[E++]}})},Z.is=function(g){return g instanceof Z||"object"==typeof g&&null!==g&&"function"==typeof g.next},ne.exports=Z},549:(ne,Z)=>{Z.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Z.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(ne,Z,g)=>{var E=g(2508),b=g(5249);function R(){this.clear()}R.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},R.prototype.enqueue=function(A){return this.items.push(A),++this.size},R.prototype.dequeue=function(){if(this.size){var A=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,A}},R.prototype.peek=function(){if(this.size)return this.items[this.offset]},R.prototype.forEach=function(A,P){P=arguments.length>1?P:this;for(var _=this.offset,y=0,M=this.items.length;_<M;_++,y++)A.call(P,this.items[_],y,this)},R.prototype.toArray=function(){return this.items.slice(this.offset)},R.prototype.values=function(){var A=this.items,P=this.offset;return new E(function(){if(P>=A.length)return{done:!0};var _=A[P];return P++,{value:_,done:!1}})},R.prototype.entries=function(){var A=this.items,P=this.offset,_=0;return new E(function(){if(P>=A.length)return{done:!0};var y=A[P];return P++,{value:[_++,y],done:!1}})},typeof Symbol<"u"&&(R.prototype[Symbol.iterator]=R.prototype.values),R.prototype.toString=function(){return this.toArray().join(",")},R.prototype.toJSON=function(){return this.toArray()},R.prototype.inspect=function(){var A=this.toArray();return Object.defineProperty(A,"constructor",{value:R,enumerable:!1}),A},typeof Symbol<"u"&&(R.prototype[Symbol.for("nodejs.util.inspect.custom")]=R.prototype.inspect),R.from=function(A){var P=new R;return b(A,function(_){P.enqueue(_)}),P},R.of=function(){return R.from(arguments)},ne.exports=R},5020:ne=>{ne.exports=function Z(g,E,b){function R(_,y){if(!E[_]){if(!g[_]){if(A)return A(_,!0);throw new Error("Cannot find module '"+_+"'")}y=E[_]={exports:{}},g[_][0].call(y.exports,function(U){return R(g[_][1][U]||U)},y,y.exports,Z,g,E,b)}return E[_].exports}for(var A=void 0,P=0;P<b.length;P++)R(b[P]);return R}({1:[function(Z,g,E){(function(b,R,A,P,_,y,M,U,N){"use strict";var j=Z("crypto");function le($,H){var v;return void 0===(v="passthrough"!==(H=ce($,H)).algorithm?j.createHash(H.algorithm):new ie).write&&(v.write=v.update,v.end=v.update),oe(H,v).dispatch($),v.update||v.end(""),v.digest?v.digest("buffer"===H.encoding?void 0:H.encoding):($=v.read(),"buffer"!==H.encoding?$.toString(H.encoding):$)}(E=g.exports=le).sha1=function($){return le($)},E.keys=function($){return le($,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},E.MD5=function($){return le($,{algorithm:"md5",encoding:"hex"})},E.keysMD5=function($){return le($,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var k=j.getHashes?j.getHashes().slice():["sha1","md5"],X=(k.push("passthrough"),["buffer","hex","binary","base64"]);function ce($,H){var v={};if(v.algorithm=(H=H||{}).algorithm||"sha1",v.encoding=H.encoding||"hex",v.excludeValues=!!H.excludeValues,v.algorithm=v.algorithm.toLowerCase(),v.encoding=v.encoding.toLowerCase(),v.ignoreUnknown=!0===H.ignoreUnknown,v.respectType=!1!==H.respectType,v.respectFunctionNames=!1!==H.respectFunctionNames,v.respectFunctionProperties=!1!==H.respectFunctionProperties,v.unorderedArrays=!0===H.unorderedArrays,v.unorderedSets=!1!==H.unorderedSets,v.unorderedObjects=!1!==H.unorderedObjects,v.replacer=H.replacer||void 0,v.excludeKeys=H.excludeKeys||void 0,void 0===$)throw new Error("Object argument required.");for(var L=0;L<k.length;++L)k[L].toLowerCase()===v.algorithm.toLowerCase()&&(v.algorithm=k[L]);if(-1===k.indexOf(v.algorithm))throw new Error('Algorithm "'+v.algorithm+'"  not supported. supported values: '+k.join(", "));if(-1===X.indexOf(v.encoding)&&"passthrough"!==v.algorithm)throw new Error('Encoding "'+v.encoding+'"  not supported. supported values: '+X.join(", "));return v}function Y($){if("function"==typeof $)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call($))}function oe($,H,v){function L(T){return H.update?H.update(T,"utf8"):H.write(T,"utf8")}return v=v||[],{dispatch:function(T){return this["_"+(null===(T=$.replacer?$.replacer(T):T)?"null":typeof T)](T)},_object:function(T){var fe,z=Object.prototype.toString.call(T),Te=/\[object (.*)\]/i.exec(z);if(Te=(Te=Te?Te[1]:"unknown:["+z+"]").toLowerCase(),0<=(z=v.indexOf(T)))return this.dispatch("[CIRCULAR:"+z+"]");if(v.push(T),void 0!==A&&A.isBuffer&&A.isBuffer(T))return L("buffer:"),L(T);if("object"===Te||"function"===Te||"asyncfunction"===Te)return z=Object.keys(T),$.unorderedObjects&&(z=z.sort()),!1===$.respectType||Y(T)||z.splice(0,0,"prototype","__proto__","constructor"),$.excludeKeys&&(z=z.filter(function(de){return!$.excludeKeys(de)})),L("object:"+z.length+":"),fe=this,z.forEach(function(de){fe.dispatch(de),L(":"),$.excludeValues||fe.dispatch(T[de]),L(",")});if(!this["_"+Te]){if($.ignoreUnknown)return L("["+Te+"]");throw new Error('Unknown object type "'+Te+'"')}this["_"+Te](T)},_array:function(T,de){de=void 0!==de?de:!1!==$.unorderedArrays;var z=this;if(L("array:"+T.length+":"),!de||T.length<=1)return T.forEach(function(we){return z.dispatch(we)});var Te=[];return de=T.map(function(we){var Ie=new ie,De=v.slice();return oe($,Ie,De).dispatch(we),Te=Te.concat(De.slice(v.length)),Ie.read().toString()}),v=v.concat(Te),de.sort(),this._array(de,!1)},_date:function(T){return L("date:"+T.toJSON())},_symbol:function(T){return L("symbol:"+T.toString())},_error:function(T){return L("error:"+T.toString())},_boolean:function(T){return L("bool:"+T.toString())},_string:function(T){L("string:"+T.length+":"),L(T.toString())},_function:function(T){L("fn:"),Y(T)?this.dispatch("[native]"):this.dispatch(T.toString()),!1!==$.respectFunctionNames&&this.dispatch("function-name:"+String(T.name)),$.respectFunctionProperties&&this._object(T)},_number:function(T){return L("number:"+T.toString())},_xml:function(T){return L("xml:"+T.toString())},_null:function(){return L("Null")},_undefined:function(){return L("Undefined")},_regexp:function(T){return L("regex:"+T.toString())},_uint8array:function(T){return L("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return L("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return L("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return L("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return L("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return L("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return L("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return L("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return L("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return L("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return L("url:"+T.toString())},_map:function(T){return L("map:"),T=Array.from(T),this._array(T,!1!==$.unorderedSets)},_set:function(T){return L("set:"),T=Array.from(T),this._array(T,!1!==$.unorderedSets)},_file:function(T){return L("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if($.ignoreUnknown)return L("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return L("domwindow")},_bigint:function(T){return L("bigint:"+T.toString())},_process:function(){return L("process")},_timer:function(){return L("timer")},_pipe:function(){return L("pipe")},_tcp:function(){return L("tcp")},_udp:function(){return L("udp")},_tty:function(){return L("tty")},_statwatcher:function(){return L("statwatcher")},_securecontext:function(){return L("securecontext")},_connection:function(){return L("connection")},_zlib:function(){return L("zlib")},_context:function(){return L("context")},_nodescript:function(){return L("nodescript")},_httpparser:function(){return L("httpparser")},_dataview:function(){return L("dataview")},_signal:function(){return L("signal")},_fsevent:function(){return L("fsevent")},_tlswrap:function(){return L("tlswrap")}}}function ie(){return{buf:"",write:function($){this.buf+=$},end:function($){this.buf+=$},read:function(){return this.buf}}}E.writeToStream=function($,H,v){return void 0===v&&(v=H,H={}),oe(H=ce($,H),v).dispatch($)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(Z,g,E){(function(b,R,A,P,_,y,M,U,N){!function(j){"use strict";var le=typeof Uint8Array<"u"?Uint8Array:Array,k="+".charCodeAt(0),X="/".charCodeAt(0),ce="0".charCodeAt(0),Y="a".charCodeAt(0),oe="A".charCodeAt(0),ie="-".charCodeAt(0),$="_".charCodeAt(0);function H(v){return(v=v.charCodeAt(0))===k||v===ie?62:v===X||v===$?63:v<ce?-1:v<ce+10?v-ce+26+26:v<oe+26?v-oe:v<Y+26?v-Y+26:void 0}j.toByteArray=function(v){var L,T;if(0<v.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var fe="="===v.charAt((fe=v.length)-2)?2:"="===v.charAt(fe-1)?1:0,z=new le(3*v.length/4-fe),Te=0<fe?v.length-4:v.length,de=0;function we(Ie){z[de++]=Ie}for(L=0;L<Te;L+=4,0)we((16711680&(T=H(v.charAt(L))<<18|H(v.charAt(L+1))<<12|H(v.charAt(L+2))<<6|H(v.charAt(L+3))))>>16),we((65280&T)>>8),we(255&T);return 2==fe?we(255&(T=H(v.charAt(L))<<2|H(v.charAt(L+1))>>4)):1==fe&&(we((T=H(v.charAt(L))<<10|H(v.charAt(L+1))<<4|H(v.charAt(L+2))>>2)>>8&255),we(255&T)),z},j.fromByteArray=function(v){var L,T,fe,z,Te=v.length%3,de="";function we(Ie){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Ie)}for(L=0,fe=v.length-Te;L<fe;L+=3)de+=we((z=T=(v[L]<<16)+(v[L+1]<<8)+v[L+2])>>18&63)+we(z>>12&63)+we(z>>6&63)+we(63&z);switch(Te){case 1:de=(de+=we((T=v[v.length-1])>>2))+we(T<<4&63)+"==";break;case 2:de=(de=(de+=we((T=(v[v.length-2]<<8)+v[v.length-1])>>10))+we(T>>4&63))+we(T<<2&63)+"="}return de}}(void 0===E?this.base64js={}:E)}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(Z,g,E){(function(b,R,k,P,_,y,M,U,N){var j=Z("base64-js"),le=Z("ieee754");function k(_e,B,I){if(!(this instanceof k))return new k(_e,B,I);var ae,K,Le,Ve,me=typeof _e;if("base64"===B&&"string"==me)for(_e=(Ve=_e).trim?Ve.trim():Ve.replace(/^\s+|\s+$/g,"");_e.length%4!=0;)_e+="=";if("number"==me)ae=tt(_e);else if("string"==me)ae=k.byteLength(_e,B);else{if("object"!=me)throw new Error("First argument needs to be a number, array or string.");ae=tt(_e.length)}if(k._useTypedArrays?K=k._augment(new Uint8Array(ae)):((K=this).length=ae,K._isBuffer=!0),k._useTypedArrays&&"number"==typeof _e.byteLength)K._set(_e);else if(Ye(Ve=_e)||k.isBuffer(Ve)||Ve&&"object"==typeof Ve&&"number"==typeof Ve.length)for(Le=0;Le<ae;Le++)K[Le]=k.isBuffer(_e)?_e.readUInt8(Le):_e[Le];else if("string"==me)K.write(_e,0,B);else if("number"==me&&!k._useTypedArrays&&!I)for(Le=0;Le<ae;Le++)K[Le]=0;return K}function oe(_e,B,I,Le){var K;if(Le||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(null!=B,"missing offset"),Qe(B+1<_e.length,"Trying to read beyond buffer length")),!((Le=_e.length)<=B))return I?(K=_e[B],B+1<Le&&(K|=_e[B+1]<<8)):(K=_e[B]<<8,B+1<Le&&(K|=_e[B+1])),K}function ie(_e,B,I,Le){var K;if(Le||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(null!=B,"missing offset"),Qe(B+3<_e.length,"Trying to read beyond buffer length")),!((Le=_e.length)<=B))return I?(B+2<Le&&(K=_e[B+2]<<16),B+1<Le&&(K|=_e[B+1]<<8),K|=_e[B],B+3<Le&&(K+=_e[B+3]<<24>>>0)):(B+1<Le&&(K=_e[B+1]<<16),B+2<Le&&(K|=_e[B+2]<<8),B+3<Le&&(K|=_e[B+3]),K+=_e[B]<<24>>>0),K}function $(_e,B,I,ae){if(ae||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(null!=B,"missing offset"),Qe(B+1<_e.length,"Trying to read beyond buffer length")),!(_e.length<=B))return 32768&(ae=oe(_e,B,I,!0))?-1*(65535-ae+1):ae}function H(_e,B,I,ae){if(ae||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(null!=B,"missing offset"),Qe(B+3<_e.length,"Trying to read beyond buffer length")),!(_e.length<=B))return 2147483648&(ae=ie(_e,B,I,!0))?-1*(4294967295-ae+1):ae}function v(_e,B,I,ae){return ae||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(B+3<_e.length,"Trying to read beyond buffer length")),le.read(_e,B,I,23,4)}function L(_e,B,I,ae){return ae||(Qe("boolean"==typeof I,"missing or invalid endian"),Qe(B+7<_e.length,"Trying to read beyond buffer length")),le.read(_e,B,I,52,8)}function T(_e,B,I,ae,K){if(K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof ae,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+1<_e.length,"trying to write beyond buffer length"),Ce(B,65535)),!((K=_e.length)<=I))for(var Le=0,Ve=Math.min(K-I,2);Le<Ve;Le++)_e[I+Le]=(B&255<<8*(ae?Le:1-Le))>>>8*(ae?Le:1-Le)}function fe(_e,B,I,ae,K){if(K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof ae,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+3<_e.length,"trying to write beyond buffer length"),Ce(B,4294967295)),!((K=_e.length)<=I))for(var Le=0,Ve=Math.min(K-I,4);Le<Ve;Le++)_e[I+Le]=B>>>8*(ae?Le:3-Le)&255}function z(_e,B,I,ae,K){K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof ae,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+1<_e.length,"Trying to write beyond buffer length"),Ke(B,32767,-32768)),_e.length<=I||T(_e,0<=B?B:65535+B+1,I,ae,K)}function Te(_e,B,I,ae,K){K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof ae,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+3<_e.length,"Trying to write beyond buffer length"),Ke(B,2147483647,-2147483648)),_e.length<=I||fe(_e,0<=B?B:4294967295+B+1,I,ae,K)}function de(_e,B,I,ae,K){K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof ae,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+3<_e.length,"Trying to write beyond buffer length"),st(B,34028234663852886e22,-34028234663852886e22)),_e.length<=I||le.write(_e,B,I,ae,23,4)}function we(_e,B,I,ae,K){K||(Qe(null!=B,"missing value"),Qe("boolean"==typeof ae,"missing or invalid endian"),Qe(null!=I,"missing offset"),Qe(I+7<_e.length,"Trying to write beyond buffer length"),st(B,17976931348623157e292,-17976931348623157e292)),_e.length<=I||le.write(_e,B,I,ae,52,8)}E.Buffer=k,E.SlowBuffer=k,E.INSPECT_MAX_BYTES=50,k.poolSize=8192,k._useTypedArrays=function(){try{var _e=new ArrayBuffer(0),B=new Uint8Array(_e);return B.foo=function(){return 42},42===B.foo()&&"function"==typeof B.subarray}catch{return!1}}(),k.isEncoding=function(_e){switch(String(_e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},k.isBuffer=function(_e){return!(null==_e||!_e._isBuffer)},k.byteLength=function(_e,B){var I;switch(_e+="",B||"utf8"){case"hex":I=_e.length/2;break;case"utf8":case"utf-8":I=Fe(_e).length;break;case"ascii":case"binary":case"raw":I=_e.length;break;case"base64":I=Pe(_e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":I=2*_e.length;break;default:throw new Error("Unknown encoding")}return I},k.concat=function(_e,B){if(Qe(Ye(_e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===_e.length)return new k(0);if(1===_e.length)return _e[0];if("number"!=typeof B)for(K=B=0;K<_e.length;K++)B+=_e[K].length;for(var I=new k(B),ae=0,K=0;K<_e.length;K++){var Le=_e[K];Le.copy(I,ae),ae+=Le.length}return I},k.prototype.write=function(_e,B,I,ae){isFinite(B)?isFinite(I)||(ae=I,I=void 0):(Q=ae,ae=B,B=I,I=Q),B=Number(B)||0;var K,Le,Ve,me,Q=this.length-B;switch((!I||Q<(I=Number(I)))&&(I=Q),ae=String(ae||"utf8").toLowerCase()){case"hex":K=function(W,C,O,he){O=Number(O)||0;var ue=W.length-O;(!he||ue<(he=Number(he)))&&(he=ue),Qe((ue=C.length)%2==0,"Invalid hex string"),ue/2<he&&(he=ue/2);for(var Ge=0;Ge<he;Ge++){var qe=parseInt(C.substr(2*Ge,2),16);Qe(!isNaN(qe),"Invalid hex string"),W[O+Ge]=qe}return k._charsWritten=2*Ge,Ge}(this,_e,B,I);break;case"utf8":case"utf-8":Le=this,Ve=B,me=I,K=k._charsWritten=ze(Fe(_e),Le,Ve,me);break;case"ascii":case"binary":K=function X(_e,B,I,ae){return k._charsWritten=ze(function(K){for(var Le=[],Ve=0;Ve<K.length;Ve++)Le.push(255&K.charCodeAt(Ve));return Le}(B),_e,I,ae)}(this,_e,B,I);break;case"base64":Le=this,Ve=B,me=I,K=k._charsWritten=ze(Pe(_e),Le,Ve,me);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":K=function ce(_e,B,I,ae){return k._charsWritten=ze(function(K){for(var Le,Ve,me=[],Q=0;Q<K.length;Q++)Le=(Ve=K.charCodeAt(Q))>>8,me.push(Ve%=256),me.push(Le);return me}(B),_e,I,ae)}(this,_e,B,I);break;default:throw new Error("Unknown encoding")}return K},k.prototype.toString=function(_e,B,I){var ae,K,Le,Ve,me=this;if(_e=String(_e||"utf8").toLowerCase(),B=Number(B)||0,(I=void 0!==I?Number(I):me.length)===B)return"";switch(_e){case"hex":ae=function(Q,W,C){var O=Q.length;(!W||W<0)&&(W=0),(!C||C<0||O<C)&&(C=O);for(var he="",ue=W;ue<C;ue++)he+=Se(Q[ue]);return he}(me,B,I);break;case"utf8":case"utf-8":ae=function(Q,W,C){var O="",he="";C=Math.min(Q.length,C);for(var ue=W;ue<C;ue++)Q[ue]<=127?(O+=ge(he)+String.fromCharCode(Q[ue]),he=""):he+="%"+Q[ue].toString(16);return O+ge(he)}(me,B,I);break;case"ascii":case"binary":ae=function Y(_e,B,I){var ae="";I=Math.min(_e.length,I);for(var K=B;K<I;K++)ae+=String.fromCharCode(_e[K]);return ae}(me,B,I);break;case"base64":K=me,Ve=I,ae=0===(Le=B)&&Ve===K.length?j.fromByteArray(K):j.fromByteArray(K.slice(Le,Ve));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ae=function(Q,W,C){for(var O=Q.slice(W,C),he="",ue=0;ue<O.length;ue+=2)he+=String.fromCharCode(O[ue]+256*O[ue+1]);return he}(me,B,I);break;default:throw new Error("Unknown encoding")}return ae},k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},k.prototype.copy=function(_e,B,I,ae){if(B=B||0,(ae=ae||0===ae?ae:this.length)!==(I=I||0)&&0!==_e.length&&0!==this.length){Qe(I<=ae,"sourceEnd < sourceStart"),Qe(0<=B&&B<_e.length,"targetStart out of bounds"),Qe(0<=I&&I<this.length,"sourceStart out of bounds"),Qe(0<=ae&&ae<=this.length,"sourceEnd out of bounds"),ae>this.length&&(ae=this.length);var K=(ae=_e.length-B<ae-I?_e.length-B+I:ae)-I;if(K<100||!k._useTypedArrays)for(var Le=0;Le<K;Le++)_e[Le+B]=this[Le+I];else _e._set(this.subarray(I,I+K),B)}},k.prototype.slice=function(_e,B){var I=this.length;if(_e=De(_e,I,0),B=De(B,I,I),k._useTypedArrays)return k._augment(this.subarray(_e,B));for(var ae=B-_e,K=new k(ae,void 0,!0),Le=0;Le<ae;Le++)K[Le]=this[Le+_e];return K},k.prototype.get=function(_e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(_e)},k.prototype.set=function(_e,B){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(_e,B)},k.prototype.readUInt8=function(_e,B){if(B||(Qe(null!=_e,"missing offset"),Qe(_e<this.length,"Trying to read beyond buffer length")),!(_e>=this.length))return this[_e]},k.prototype.readUInt16LE=function(_e,B){return oe(this,_e,!0,B)},k.prototype.readUInt16BE=function(_e,B){return oe(this,_e,!1,B)},k.prototype.readUInt32LE=function(_e,B){return ie(this,_e,!0,B)},k.prototype.readUInt32BE=function(_e,B){return ie(this,_e,!1,B)},k.prototype.readInt8=function(_e,B){if(B||(Qe(null!=_e,"missing offset"),Qe(_e<this.length,"Trying to read beyond buffer length")),!(_e>=this.length))return 128&this[_e]?-1*(255-this[_e]+1):this[_e]},k.prototype.readInt16LE=function(_e,B){return $(this,_e,!0,B)},k.prototype.readInt16BE=function(_e,B){return $(this,_e,!1,B)},k.prototype.readInt32LE=function(_e,B){return H(this,_e,!0,B)},k.prototype.readInt32BE=function(_e,B){return H(this,_e,!1,B)},k.prototype.readFloatLE=function(_e,B){return v(this,_e,!0,B)},k.prototype.readFloatBE=function(_e,B){return v(this,_e,!1,B)},k.prototype.readDoubleLE=function(_e,B){return L(this,_e,!0,B)},k.prototype.readDoubleBE=function(_e,B){return L(this,_e,!1,B)},k.prototype.writeUInt8=function(_e,B,I){I||(Qe(null!=_e,"missing value"),Qe(null!=B,"missing offset"),Qe(B<this.length,"trying to write beyond buffer length"),Ce(_e,255)),B>=this.length||(this[B]=_e)},k.prototype.writeUInt16LE=function(_e,B,I){T(this,_e,B,!0,I)},k.prototype.writeUInt16BE=function(_e,B,I){T(this,_e,B,!1,I)},k.prototype.writeUInt32LE=function(_e,B,I){fe(this,_e,B,!0,I)},k.prototype.writeUInt32BE=function(_e,B,I){fe(this,_e,B,!1,I)},k.prototype.writeInt8=function(_e,B,I){I||(Qe(null!=_e,"missing value"),Qe(null!=B,"missing offset"),Qe(B<this.length,"Trying to write beyond buffer length"),Ke(_e,127,-128)),B>=this.length||this.writeUInt8(0<=_e?_e:255+_e+1,B,I)},k.prototype.writeInt16LE=function(_e,B,I){z(this,_e,B,!0,I)},k.prototype.writeInt16BE=function(_e,B,I){z(this,_e,B,!1,I)},k.prototype.writeInt32LE=function(_e,B,I){Te(this,_e,B,!0,I)},k.prototype.writeInt32BE=function(_e,B,I){Te(this,_e,B,!1,I)},k.prototype.writeFloatLE=function(_e,B,I){de(this,_e,B,!0,I)},k.prototype.writeFloatBE=function(_e,B,I){de(this,_e,B,!1,I)},k.prototype.writeDoubleLE=function(_e,B,I){we(this,_e,B,!0,I)},k.prototype.writeDoubleBE=function(_e,B,I){we(this,_e,B,!1,I)},k.prototype.fill=function(_e,B,I){if(B=B||0,I=I||this.length,Qe("number"==typeof(_e="string"==typeof(_e=_e||0)?_e.charCodeAt(0):_e)&&!isNaN(_e),"value is not a number"),Qe(B<=I,"end < start"),I!==B&&0!==this.length){Qe(0<=B&&B<this.length,"start out of bounds"),Qe(0<=I&&I<=this.length,"end out of bounds");for(var ae=B;ae<I;ae++)this[ae]=_e}},k.prototype.inspect=function(){for(var _e=[],B=this.length,I=0;I<B;I++)if(_e[I]=Se(this[I]),I===E.INSPECT_MAX_BYTES){_e[I+1]="...";break}return"<Buffer "+_e.join(" ")+">"},k.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(k._useTypedArrays)return new k(this).buffer;for(var _e=new Uint8Array(this.length),B=0,I=_e.length;B<I;B+=1)_e[B]=this[B];return _e.buffer};var Ie=k.prototype;function De(_e,B,I){return"number"!=typeof _e?I:B<=(_e=~~_e)?B:0<=_e||0<=(_e+=B)?_e:0}function tt(_e){return(_e=~~Math.ceil(+_e))<0?0:_e}function Ye(_e){return(Array.isArray||function(B){return"[object Array]"===Object.prototype.toString.call(B)})(_e)}function Se(_e){return _e<16?"0"+_e.toString(16):_e.toString(16)}function Fe(_e){for(var B=[],I=0;I<_e.length;I++){var ae=_e.charCodeAt(I);if(ae<=127)B.push(_e.charCodeAt(I));else for(var K=I,Le=(55296<=ae&&ae<=57343&&I++,encodeURIComponent(_e.slice(K,I+1)).substr(1).split("%")),Ve=0;Ve<Le.length;Ve++)B.push(parseInt(Le[Ve],16))}return B}function Pe(_e){return j.toByteArray(_e)}function ze(_e,B,I,ae){for(var K=0;K<ae&&!(K+I>=B.length||K>=_e.length);K++)B[K+I]=_e[K];return K}function ge(_e){try{return decodeURIComponent(_e)}catch{return String.fromCharCode(65533)}}function Ce(_e,B){Qe("number"==typeof _e,"cannot write a non-number as a number"),Qe(0<=_e,"specified a negative value for writing an unsigned value"),Qe(_e<=B,"value is larger than maximum value for type"),Qe(Math.floor(_e)===_e,"value has a fractional component")}function Ke(_e,B,I){Qe("number"==typeof _e,"cannot write a non-number as a number"),Qe(_e<=B,"value larger than maximum allowed value"),Qe(I<=_e,"value smaller than minimum allowed value"),Qe(Math.floor(_e)===_e,"value has a fractional component")}function st(_e,B,I){Qe("number"==typeof _e,"cannot write a non-number as a number"),Qe(_e<=B,"value larger than maximum allowed value"),Qe(I<=_e,"value smaller than minimum allowed value")}function Qe(_e,B){if(!_e)throw new Error(B||"Failed assertion")}k._augment=function(_e){return _e._isBuffer=!0,_e._get=_e.get,_e._set=_e.set,_e.get=Ie.get,_e.set=Ie.set,_e.write=Ie.write,_e.toString=Ie.toString,_e.toLocaleString=Ie.toString,_e.toJSON=Ie.toJSON,_e.copy=Ie.copy,_e.slice=Ie.slice,_e.readUInt8=Ie.readUInt8,_e.readUInt16LE=Ie.readUInt16LE,_e.readUInt16BE=Ie.readUInt16BE,_e.readUInt32LE=Ie.readUInt32LE,_e.readUInt32BE=Ie.readUInt32BE,_e.readInt8=Ie.readInt8,_e.readInt16LE=Ie.readInt16LE,_e.readInt16BE=Ie.readInt16BE,_e.readInt32LE=Ie.readInt32LE,_e.readInt32BE=Ie.readInt32BE,_e.readFloatLE=Ie.readFloatLE,_e.readFloatBE=Ie.readFloatBE,_e.readDoubleLE=Ie.readDoubleLE,_e.readDoubleBE=Ie.readDoubleBE,_e.writeUInt8=Ie.writeUInt8,_e.writeUInt16LE=Ie.writeUInt16LE,_e.writeUInt16BE=Ie.writeUInt16BE,_e.writeUInt32LE=Ie.writeUInt32LE,_e.writeUInt32BE=Ie.writeUInt32BE,_e.writeInt8=Ie.writeInt8,_e.writeInt16LE=Ie.writeInt16LE,_e.writeInt16BE=Ie.writeInt16BE,_e.writeInt32LE=Ie.writeInt32LE,_e.writeInt32BE=Ie.writeInt32BE,_e.writeFloatLE=Ie.writeFloatLE,_e.writeFloatBE=Ie.writeFloatBE,_e.writeDoubleLE=Ie.writeDoubleLE,_e.writeDoubleBE=Ie.writeDoubleBE,_e.fill=Ie.fill,_e.inspect=Ie.inspect,_e.toArrayBuffer=Ie.toArrayBuffer,_e}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(Z,g,E){(function(b,R,j,P,_,y,M,U,N){j=Z("buffer").Buffer;var k=new j(4);k.fill(0),g.exports={hash:function(X,ce,Y,oe){for(var ie=ce(function(T,fe){T.length%4!=0&&(T=j.concat([T,k],T.length+(4-T.length%4)));for(var Te=[],de=fe?T.readInt32BE:T.readInt32LE,we=0;we<T.length;we+=4)Te.push(de.call(T,we));return Te}(X=j.isBuffer(X)?X:new j(X),oe),8*X.length),$=(ce=oe,new j(Y)),H=ce?$.writeInt32BE:$.writeInt32LE,v=0;v<ie.length;v++)H.call($,ie[v],4*v,!0);return $}}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(Z,g,E){(function(b,R,j,P,_,y,M,U,N){j=Z("buffer").Buffer;var le=Z("./sha"),k=Z("./sha256"),X=Z("./rng"),ce={sha1:le,sha256:k,md5:Z("./md5")},Y=64,oe=new j(Y);function ie(T,fe){var z=ce[T=T||"sha1"],Te=[];return z||$("algorithm:",T,"is not yet supported"),{update:function(de){return j.isBuffer(de)||(de=new j(de)),Te.push(de),this},digest:function(de){var we=j.concat(Te);return we=fe?function(Ie,De,tt){j.isBuffer(De)||(De=new j(De)),j.isBuffer(tt)||(tt=new j(tt)),De.length>Y?De=Ie(De):De.length<Y&&(De=j.concat([De,oe],Y));for(var Ye=new j(Y),Se=new j(Y),Fe=0;Fe<Y;Fe++)Ye[Fe]=54^De[Fe],Se[Fe]=92^De[Fe];return tt=Ie(j.concat([Ye,tt])),Ie(j.concat([Se,tt]))}(z,fe,we):z(we),Te=null,de?we.toString(de):we}}}function $(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}oe.fill(0),E.createHash=function(T){return ie(T)},E.createHmac=ie,E.randomBytes=function(T,fe){if(!fe||!fe.call)return new j(X(T));try{fe.call(this,void 0,new j(X(T)))}catch(z){fe(z)}};var H,v=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],L=function(T){E[T]=function(){$("sorry,",T,"is not implemented yet")}};for(H in v)L(v[H])}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(Z,g,E){(function(b,R,A,P,_,y,M,U,N){var j=Z("./helpers");function le($,H){$[H>>5]|=128<<H%32,$[14+(H+64>>>9<<4)]=H;for(var v=1732584193,L=-271733879,T=-1732584194,fe=271733878,z=0;z<$.length;z+=16){var Te=v,de=L,we=T,Ie=fe;v=X(v,L,T,fe,$[z+0],7,-680876936),fe=X(fe,v,L,T,$[z+1],12,-389564586),T=X(T,fe,v,L,$[z+2],17,606105819),L=X(L,T,fe,v,$[z+3],22,-1044525330),v=X(v,L,T,fe,$[z+4],7,-176418897),fe=X(fe,v,L,T,$[z+5],12,1200080426),T=X(T,fe,v,L,$[z+6],17,-1473231341),L=X(L,T,fe,v,$[z+7],22,-45705983),v=X(v,L,T,fe,$[z+8],7,1770035416),fe=X(fe,v,L,T,$[z+9],12,-1958414417),T=X(T,fe,v,L,$[z+10],17,-42063),L=X(L,T,fe,v,$[z+11],22,-1990404162),v=X(v,L,T,fe,$[z+12],7,1804603682),fe=X(fe,v,L,T,$[z+13],12,-40341101),T=X(T,fe,v,L,$[z+14],17,-1502002290),v=ce(v,L=X(L,T,fe,v,$[z+15],22,1236535329),T,fe,$[z+1],5,-165796510),fe=ce(fe,v,L,T,$[z+6],9,-1069501632),T=ce(T,fe,v,L,$[z+11],14,643717713),L=ce(L,T,fe,v,$[z+0],20,-373897302),v=ce(v,L,T,fe,$[z+5],5,-701558691),fe=ce(fe,v,L,T,$[z+10],9,38016083),T=ce(T,fe,v,L,$[z+15],14,-660478335),L=ce(L,T,fe,v,$[z+4],20,-405537848),v=ce(v,L,T,fe,$[z+9],5,568446438),fe=ce(fe,v,L,T,$[z+14],9,-1019803690),T=ce(T,fe,v,L,$[z+3],14,-187363961),L=ce(L,T,fe,v,$[z+8],20,1163531501),v=ce(v,L,T,fe,$[z+13],5,-1444681467),fe=ce(fe,v,L,T,$[z+2],9,-51403784),T=ce(T,fe,v,L,$[z+7],14,1735328473),v=Y(v,L=ce(L,T,fe,v,$[z+12],20,-1926607734),T,fe,$[z+5],4,-378558),fe=Y(fe,v,L,T,$[z+8],11,-2022574463),T=Y(T,fe,v,L,$[z+11],16,1839030562),L=Y(L,T,fe,v,$[z+14],23,-35309556),v=Y(v,L,T,fe,$[z+1],4,-1530992060),fe=Y(fe,v,L,T,$[z+4],11,1272893353),T=Y(T,fe,v,L,$[z+7],16,-155497632),L=Y(L,T,fe,v,$[z+10],23,-1094730640),v=Y(v,L,T,fe,$[z+13],4,681279174),fe=Y(fe,v,L,T,$[z+0],11,-358537222),T=Y(T,fe,v,L,$[z+3],16,-722521979),L=Y(L,T,fe,v,$[z+6],23,76029189),v=Y(v,L,T,fe,$[z+9],4,-640364487),fe=Y(fe,v,L,T,$[z+12],11,-421815835),T=Y(T,fe,v,L,$[z+15],16,530742520),v=oe(v,L=Y(L,T,fe,v,$[z+2],23,-995338651),T,fe,$[z+0],6,-198630844),fe=oe(fe,v,L,T,$[z+7],10,1126891415),T=oe(T,fe,v,L,$[z+14],15,-1416354905),L=oe(L,T,fe,v,$[z+5],21,-57434055),v=oe(v,L,T,fe,$[z+12],6,1700485571),fe=oe(fe,v,L,T,$[z+3],10,-1894986606),T=oe(T,fe,v,L,$[z+10],15,-1051523),L=oe(L,T,fe,v,$[z+1],21,-2054922799),v=oe(v,L,T,fe,$[z+8],6,1873313359),fe=oe(fe,v,L,T,$[z+15],10,-30611744),T=oe(T,fe,v,L,$[z+6],15,-1560198380),L=oe(L,T,fe,v,$[z+13],21,1309151649),v=oe(v,L,T,fe,$[z+4],6,-145523070),fe=oe(fe,v,L,T,$[z+11],10,-1120210379),T=oe(T,fe,v,L,$[z+2],15,718787259),L=oe(L,T,fe,v,$[z+9],21,-343485551),v=ie(v,Te),L=ie(L,de),T=ie(T,we),fe=ie(fe,Ie)}return Array(v,L,T,fe)}function k($,H,v,L,T,fe){return ie((H=ie(ie(H,$),ie(L,fe)))<<T|H>>>32-T,v)}function X($,H,v,L,T,fe,z){return k(H&v|~H&L,$,H,T,fe,z)}function ce($,H,v,L,T,fe,z){return k(H&L|v&~L,$,H,T,fe,z)}function Y($,H,v,L,T,fe,z){return k(H^v^L,$,H,T,fe,z)}function oe($,H,v,L,T,fe,z){return k(v^(H|~L),$,H,T,fe,z)}function ie($,H){var v=(65535&$)+(65535&H);return($>>16)+(H>>16)+(v>>16)<<16|65535&v}g.exports=function($){return j.hash($,le,16)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(Z,g,E){(function(b,R,A,P,_,y,M,U,N){g.exports=function(le){for(var k,X=new Array(le),ce=0;ce<le;ce++)!(3&ce)&&(k=4294967296*Math.random()),X[ce]=k>>>((3&ce)<<3)&255;return X}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(Z,g,E){(function(b,R,A,P,_,y,M,U,N){var j=Z("./helpers");function le(ce,Y){ce[Y>>5]|=128<<24-Y%32,ce[15+(Y+64>>9<<4)]=Y;for(var oe,ie,$,H=Array(80),v=1732584193,L=-271733879,T=-1732584194,fe=271733878,z=-1009589776,Te=0;Te<ce.length;Te+=16){for(var de=v,we=L,Ie=T,De=fe,tt=z,Ye=0;Ye<80;Ye++){H[Ye]=Ye<16?ce[Te+Ye]:X(H[Ye-3]^H[Ye-8]^H[Ye-14]^H[Ye-16],1);var Se=k(k(X(v,5),(Se=L,ie=T,$=fe,(oe=Ye)<20?Se&ie|~Se&$:!(oe<40)&&oe<60?Se&ie|Se&$|ie&$:Se^ie^$)),k(k(z,H[Ye]),(oe=Ye)<20?1518500249:oe<40?1859775393:oe<60?-1894007588:-899497514));z=fe,fe=T,T=X(L,30),L=v,v=Se}v=k(v,de),L=k(L,we),T=k(T,Ie),fe=k(fe,De),z=k(z,tt)}return Array(v,L,T,fe,z)}function k(ce,Y){var oe=(65535&ce)+(65535&Y);return(ce>>16)+(Y>>16)+(oe>>16)<<16|65535&oe}function X(ce,Y){return ce<<Y|ce>>>32-Y}g.exports=function(ce){return j.hash(ce,le,20,!0)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(Z,g,E){(function(b,R,A,P,_,y,M,U,N){function j(Y,oe){var ie=(65535&Y)+(65535&oe);return(Y>>16)+(oe>>16)+(ie>>16)<<16|65535&ie}function le(Y,oe){var ie,$=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),v=new Array(64);Y[oe>>5]|=128<<24-oe%32,Y[15+(oe+64>>9<<4)]=oe;for(var L,T,fe=0;fe<Y.length;fe+=16){for(var z=H[0],Te=H[1],de=H[2],we=H[3],Ie=H[4],De=H[5],tt=H[6],Ye=H[7],Se=0;Se<64;Se++)v[Se]=Se<16?Y[Se+fe]:j(j(j(X(T=v[Se-2],17)^X(T,19)^ce(T,10),v[Se-7]),X(T=v[Se-15],7)^X(T,18)^ce(T,3)),v[Se-16]),ie=j(j(j(j(Ye,X(T=Ie,6)^X(T,11)^X(T,25)),Ie&De^~Ie&tt),$[Se]),v[Se]),L=j(X(L=z,2)^X(L,13)^X(L,22),z&Te^z&de^Te&de),Ye=tt,tt=De,De=Ie,Ie=j(we,ie),we=de,de=Te,Te=z,z=j(ie,L);H[0]=j(z,H[0]),H[1]=j(Te,H[1]),H[2]=j(de,H[2]),H[3]=j(we,H[3]),H[4]=j(Ie,H[4]),H[5]=j(De,H[5]),H[6]=j(tt,H[6]),H[7]=j(Ye,H[7])}return H}var k=Z("./helpers"),X=function(Y,oe){return Y>>>oe|Y<<32-oe},ce=function(Y,oe){return Y>>>oe};g.exports=function(Y){return k.hash(Y,le,32,!0)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(Z,g,E){(function(b,R,A,P,_,y,M,U,N){E.read=function(j,le,k,X,fe){var Y,oe,ie=8*fe-X-1,$=(1<<ie)-1,H=$>>1,v=-7,L=k?fe-1:0,T=k?-1:1;for(fe=j[le+L],L+=T,Y=fe&(1<<-v)-1,fe>>=-v,v+=ie;0<v;Y=256*Y+j[le+L],L+=T,v-=8);for(oe=Y&(1<<-v)-1,Y>>=-v,v+=X;0<v;oe=256*oe+j[le+L],L+=T,v-=8);if(0===Y)Y=1-H;else{if(Y===$)return oe?NaN:1/0*(fe?-1:1);oe+=Math.pow(2,X),Y-=H}return(fe?-1:1)*oe*Math.pow(2,Y-X)},E.write=function(j,le,k,X,ce,z){var oe,ie,$=8*z-ce-1,H=(1<<$)-1,v=H>>1,L=23===ce?Math.pow(2,-24)-Math.pow(2,-77):0,T=X?0:z-1,fe=X?1:-1;for(z=le<0||0===le&&1/le<0?1:0,le=Math.abs(le),isNaN(le)||le===1/0?(ie=isNaN(le)?1:0,oe=H):(oe=Math.floor(Math.log(le)/Math.LN2),le*(X=Math.pow(2,-oe))<1&&(oe--,X*=2),2<=(le+=1<=oe+v?L/X:L*Math.pow(2,1-v))*X&&(oe++,X/=2),H<=oe+v?(ie=0,oe=H):1<=oe+v?(ie=(le*X-1)*Math.pow(2,ce),oe+=v):(ie=le*Math.pow(2,v-1)*Math.pow(2,ce),oe=0));8<=ce;j[k+T]=255&ie,T+=fe,ie/=256,ce-=8);for(oe=oe<<ce|ie,$+=ce;0<$;j[k+T]=255&oe,T+=fe,oe/=256,$-=8);j[k+T-fe]|=128*z}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(Z,g,E){(function(b,R,A,P,_,y,M,U,N){var j,le,k;function X(){}(b=g.exports={}).nextTick=(le=typeof window<"u"&&window.setImmediate,k=typeof window<"u"&&window.postMessage&&window.addEventListener,le?function(ce){return window.setImmediate(ce)}:k?(j=[],window.addEventListener("message",function(ce){var Y=ce.source;Y!==window&&null!==Y||"process-tick"!==ce.data||(ce.stopPropagation(),0<j.length&&j.shift()())},!0),function(ce){j.push(ce),window.postMessage("process-tick","*")}):function(ce){setTimeout(ce,0)}),b.title="browser",b.browser=!0,b.env={},b.argv=[],b.on=X,b.addListener=X,b.once=X,b.off=X,b.removeListener=X,b.removeAllListeners=X,b.emit=X,b.binding=function(ce){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(ce){throw new Error("process.chdir is not supported")}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:ne=>{var g,E,Z=ne.exports={};function b(){throw new Error("setTimeout has not been defined")}function R(){throw new Error("clearTimeout has not been defined")}function A(X){if(g===setTimeout)return setTimeout(X,0);if((g===b||!g)&&setTimeout)return g=setTimeout,setTimeout(X,0);try{return g(X,0)}catch{try{return g.call(null,X,0)}catch{return g.call(this,X,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:b}catch{g=b}try{E="function"==typeof clearTimeout?clearTimeout:R}catch{E=R}}();var M,_=[],y=!1,U=-1;function N(){!y||!M||(y=!1,M.length?_=M.concat(_):U=-1,_.length&&j())}function j(){if(!y){var X=A(N);y=!0;for(var ce=_.length;ce;){for(M=_,_=[];++U<ce;)M&&M[U].run();U=-1,ce=_.length}M=null,y=!1,function P(X){if(E===clearTimeout)return clearTimeout(X);if((E===R||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(X);try{return E(X)}catch{try{return E.call(null,X)}catch{return E.call(this,X)}}}(X)}}function le(X,ce){this.fun=X,this.array=ce}function k(){}Z.nextTick=function(X){var ce=new Array(arguments.length-1);if(arguments.length>1)for(var Y=1;Y<arguments.length;Y++)ce[Y-1]=arguments[Y];_.push(new le(X,ce)),1===_.length&&!y&&A(j)},le.prototype.run=function(){this.fun.apply(null,this.array)},Z.title="browser",Z.browser=!0,Z.env={},Z.argv=[],Z.version="",Z.versions={},Z.on=k,Z.addListener=k,Z.once=k,Z.off=k,Z.removeListener=k,Z.removeAllListeners=k,Z.emit=k,Z.prependListener=k,Z.prependOnceListener=k,Z.listeners=function(X){return[]},Z.binding=function(X){throw new Error("process.binding is not supported")},Z.cwd=function(){return"/"},Z.chdir=function(X){throw new Error("process.chdir is not supported")},Z.umask=function(){return 0}},3410:ne=>{let Z;ne.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):g=>(Z||(Z=Promise.resolve())).then(g).catch(E=>setTimeout(()=>{throw E},0))},1986:(ne,Z,g)=>{ne.exports=g(7842)},5327:ne=>{"use strict";ne.exports=class UX{constructor(g,E=new Map,b=0){this.prefix=g,this._existing=E,this.counter=b}clone(){const{prefix:g,_existing:E,counter:b}=this;return new UX(g,new Map(E),b)}getId(g){const E=g&&this._existing.get(g);if(E)return E;const b=this.prefix+this.counter;return this.counter++,g&&this._existing.set(g,b),b}hasId(g){return this._existing.has(g)}getOldIds(){return[...this._existing.keys()]}}},7475:(ne,Z,g)=>{"use strict";var E=g(7156).default;g(8280);const b=self.crypto||self.msCrypto;ne.exports=class{constructor(A){if(!b||!b.subtle)throw new Error("crypto.subtle not found.");if("sha256"===A)this.algorithm={name:"SHA-256"};else{if("sha1"!==A)throw new Error(`Unsupported algorithm "${A}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(A){this._content+=A}digest(){var A=this;return E(function*(){const P=(new TextEncoder).encode(A._content),_=new Uint8Array(yield b.subtle.digest(A.algorithm,P));let y="";for(let M=0;M<_.length;++M)y+=_[M].toString(16).padStart(2,"0");return y})()}}},8003:ne=>{"use strict";const E="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",b="http://www.w3.org/2001/XMLSchema#string",R="NamedNode",A="BlankNode",P="Literal",_="DefaultGraph",y={};function M(k,X){return k.subject.termType===X.subject.termType&&k.object.termType===X.object.termType&&k.subject.value===X.subject.value&&k.predicate.value===X.predicate.value&&k.object.value===X.object.value&&(k.object.termType!==P||k.object.datatype.termType===X.object.datatype.termType&&k.object.language===X.object.language&&k.object.datatype.value===X.object.datatype.value)}(()=>{const k="(?:<([^:]+:[^>]*)>)",ce="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",Y=ce+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ie="(_:(?:["+ce+"0-9])(?:(?:["+Y+".])*(?:["+Y+"]))?)",T="[ \\t]+",fe="[ \\t]*",z="(?:"+k+"|"+ie+")"+T,Te=k+T,de="(?:"+k+"|"+ie+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+k+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+fe,we="(?:\\.|(?:(?:"+k+"|"+ie+")"+fe+"\\.))";y.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,y.empty=new RegExp("^[ \\t]*$"),y.quad=new RegExp("^"+fe+z+Te+de+we+fe+"$")})(),ne.exports=class QA{static parse(X){const ce=[],Y={},oe=X.split(y.eoln);let ie=0;for(const $ of oe){if(ie++,y.empty.test($))continue;const H=$.match(y.quad);if(null===H)throw new Error("N-Quads parse error on line "+ie+".");const v={subject:null,predicate:null,object:null,graph:null};if(v.subject=void 0!==H[1]?{termType:R,value:H[1]}:{termType:A,value:H[2]},v.predicate={termType:R,value:H[3]},void 0!==H[4]?v.object={termType:R,value:H[4]}:void 0!==H[5]?v.object={termType:A,value:H[5]}:(v.object={termType:P,value:void 0,datatype:{termType:R}},void 0!==H[7]?v.object.datatype.value=H[7]:void 0!==H[8]?(v.object.datatype.value=E,v.object.language=H[8]):v.object.datatype.value=b,v.object.value=H[6].replace(j,function(X,ce,Y,oe){if(ce)switch(ce){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(Y)return String.fromCharCode(parseInt(Y,16));if(oe)throw new Error("Unsupported U escape")})),v.graph=void 0!==H[9]?{termType:R,value:H[9]}:void 0!==H[10]?{termType:A,value:H[10]}:{termType:_,value:""},v.graph.value in Y){let L=!0;const T=Y[v.graph.value];for(const fe of T)if(M(fe,v)){L=!1;break}L&&(T.push(v),ce.push(v))}else Y[v.graph.value]=[v],ce.push(v)}return ce}static serialize(X){Array.isArray(X)||(X=QA.legacyDatasetToQuads(X));const ce=[];for(const Y of X)ce.push(QA.serializeQuad(Y));return ce.sort().join("")}static serializeQuadComponents(X,ce,Y,oe){let ie="";return ie+=X.termType===R?`<${X.value}>`:`${X.value}`,ie+=` <${ce.value}> `,Y.termType===R?ie+=`<${Y.value}>`:Y.termType===A?ie+=Y.value:(ie+=`"${function N(k){return k.replace(U,function(X){switch(X){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(Y.value)}"`,Y.datatype.value===E?Y.language&&(ie+=`@${Y.language}`):Y.datatype.value!==b&&(ie+=`^^<${Y.datatype.value}>`)),oe.termType===R?ie+=` <${oe.value}>`:oe.termType===A&&(ie+=` ${oe.value}`),ie+=" .\n",ie}static serializeQuad(X){return QA.serializeQuadComponents(X.subject,X.predicate,X.object,X.graph)}static legacyDatasetToQuads(X){const ce=[],Y={"blank node":A,IRI:R,literal:P};for(const oe in X)X[oe].forEach($=>{const H={};for(const v in $){const L=$[v],T={termType:Y[L.type],value:L.value};T.termType===P&&(T.datatype={termType:R},"datatype"in L&&(T.datatype.value=L.datatype),"language"in L?("datatype"in L||(T.datatype.value=E),T.language=L.language):"datatype"in L||(T.datatype.value=b)),H[v]=T}H.graph="@default"===oe?{termType:_,value:""}:{termType:oe.startsWith("_:")?A:R,value:oe},ce.push(H)});return ce}};const U=/["\\\n\r]/g,j=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:ne=>{"use strict";ne.exports=class{constructor(g){this.current=g.sort(),this.done=!1,this.dir=new Map;for(let E=0;E<g.length;++E)this.dir.set(g[E],!0)}hasNext(){return!this.done}next(){const{current:g,dir:E}=this,b=g.slice();let R=null,A=0;const P=g.length;for(let _=0;_<P;++_){const y=g[_],M=E.get(y);(null===R||y>R)&&(M&&_>0&&y>g[_-1]||!M&&_<P-1&&y>g[_+1])&&(R=y,A=_)}if(null===R)this.done=!0;else{const _=E.get(R)?A-1:A+1;g[A]=g[_],g[_]=R;for(const y of g)y>R&&E.set(y,!E.get(y))}return b}}},7218:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(5327),R=g(7475),A=g(7790),P=g(8003);function _(y,M){return y.hash<M.hash?-1:y.hash>M.hash?1:0}ne.exports=class{constructor({createMessageDigest:M=(()=>new R("sha256")),canonicalIdMap:U=new Map,maxDeepIterations:N=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new b("_:c14n",U),this.createMessageDigest=M,this.maxDeepIterations=N,this.quads=null,this.deepIterations=null}main(M){var U=this;return E(function*(){U.deepIterations=new Map,U.quads=M;for(const Y of M)U._addBlankNodeQuadInfo({quad:Y,component:Y.subject}),U._addBlankNodeQuadInfo({quad:Y,component:Y.object}),U._addBlankNodeQuadInfo({quad:Y,component:Y.graph});const N=new Map,j=[...U.blankNodeInfo.keys()];let le=0;for(const Y of j)++le%100==0&&(yield U._yield()),yield U._hashAndTrackBlankNode({id:Y,hashToBlankNodes:N});const k=[...N.keys()].sort(),X=[];for(const Y of k){const oe=N.get(Y);oe.length>1?X.push(oe):U.canonicalIssuer.getId(oe[0])}for(const Y of X){const oe=[];for(const ie of Y){if(U.canonicalIssuer.hasId(ie))continue;const $=new b("_:b");$.getId(ie);const H=yield U.hashNDegreeQuads(ie,$);oe.push(H)}oe.sort(_);for(const ie of oe){const $=ie.issuer.getOldIds();for(const H of $)U.canonicalIssuer.getId(H)}}const ce=[];for(const Y of U.quads){const oe=P.serializeQuadComponents(U._componentWithCanonicalId(Y.subject),Y.predicate,U._componentWithCanonicalId(Y.object),U._componentWithCanonicalId(Y.graph));ce.push(oe)}return ce.sort(),ce.join("")})()}hashFirstDegreeQuads(M){var U=this;return E(function*(){const N=[],j=U.blankNodeInfo.get(M),le=j.quads;for(const X of le){const ce={subject:null,predicate:X.predicate,object:null,graph:null};ce.subject=U.modifyFirstDegreeComponent(M,X.subject,"subject"),ce.object=U.modifyFirstDegreeComponent(M,X.object,"object"),ce.graph=U.modifyFirstDegreeComponent(M,X.graph,"graph"),N.push(P.serializeQuad(ce))}N.sort();const k=U.createMessageDigest();for(const X of N)k.update(X);return j.hash=yield k.digest(),j.hash})()}hashRelatedBlankNode(M,U,N,j){var le=this;return E(function*(){let k;k=le.canonicalIssuer.hasId(M)?le.canonicalIssuer.getId(M):N.hasId(M)?N.getId(M):le.blankNodeInfo.get(M).hash;const X=le.createMessageDigest();return X.update(j),"g"!==j&&X.update(le.getRelatedPredicate(U)),X.update(k),X.digest()})()}hashNDegreeQuads(M,U){var N=this;return E(function*(){const j=N.deepIterations.get(M)||0;if(j>N.maxDeepIterations)throw new Error(`Maximum deep iterations (${N.maxDeepIterations}) exceeded.`);N.deepIterations.set(M,j+1);const le=N.createMessageDigest(),k=yield N.createHashToRelated(M,U),X=[...k.keys()].sort();for(const ce of X){le.update(ce);let oe,Y="";const ie=new A(k.get(ce));let $=0;for(;ie.hasNext();){const H=ie.next();++$%3==0&&(yield N._yield());let v=U.clone(),L="";const T=[];let fe=!1;for(const z of H)if(N.canonicalIssuer.hasId(z)?L+=N.canonicalIssuer.getId(z):(v.hasId(z)||T.push(z),L+=v.getId(z)),0!==Y.length&&L>Y){fe=!0;break}if(!fe){for(const z of T){const Te=yield N.hashNDegreeQuads(z,v);if(L+=v.getId(z),L+=`<${Te.hash}>`,v=Te.issuer,0!==Y.length&&L>Y){fe=!0;break}}fe||(0===Y.length||L<Y)&&(Y=L,oe=v)}}le.update(Y),U=oe}return{hash:yield le.digest(),issuer:U}})()}modifyFirstDegreeComponent(M,U){return"BlankNode"!==U.termType?U:{termType:"BlankNode",value:U.value===M?"_:a":"_:z"}}getRelatedPredicate(M){return`<${M.predicate.value}>`}createHashToRelated(M,U){var N=this;return E(function*(){const j=new Map,le=N.blankNodeInfo.get(M).quads;let k=0;for(const X of le)++k%100==0&&(yield N._yield()),yield Promise.all([N._addRelatedBlankNodeHash({quad:X,component:X.subject,position:"s",id:M,issuer:U,hashToRelated:j}),N._addRelatedBlankNodeHash({quad:X,component:X.object,position:"o",id:M,issuer:U,hashToRelated:j}),N._addRelatedBlankNodeHash({quad:X,component:X.graph,position:"g",id:M,issuer:U,hashToRelated:j})]);return j})()}_hashAndTrackBlankNode({id:M,hashToBlankNodes:U}){var N=this;return E(function*(){const j=yield N.hashFirstDegreeQuads(M),le=U.get(j);le?le.push(M):U.set(j,[M])})()}_addBlankNodeQuadInfo({quad:M,component:U}){if("BlankNode"!==U.termType)return;const N=U.value,j=this.blankNodeInfo.get(N);j?j.quads.add(M):this.blankNodeInfo.set(N,{quads:new Set([M]),hash:null})}_addRelatedBlankNodeHash({quad:M,component:U,position:N,id:j,issuer:le,hashToRelated:k}){var X=this;return E(function*(){if("BlankNode"!==U.termType||U.value===j)return;const ce=U.value,Y=yield X.hashRelatedBlankNode(ce,M,le,N),oe=k.get(Y);oe?oe.push(ce):k.set(Y,[ce])})()}_componentWithCanonicalId(M){return"BlankNode"!==M.termType||M.value.startsWith(this.canonicalIssuer.prefix)?M:{termType:"BlankNode",value:this.canonicalIssuer.getId(M.value)}}_yield(){return E(function*(){return new Promise(M=>setImmediate(M))})()}}},9123:(ne,Z,g)=>{"use strict";const E=g(5327),b=g(7475),R=g(7790),A=g(8003);function P(_,y){return _.hash<y.hash?-1:_.hash>y.hash?1:0}ne.exports=class{constructor({createMessageDigest:y=(()=>new b("sha256")),canonicalIdMap:M=new Map,maxDeepIterations:U=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new E("_:c14n",M),this.createMessageDigest=y,this.maxDeepIterations=U,this.quads=null,this.deepIterations=null}main(y){this.deepIterations=new Map,this.quads=y;for(const k of y)this._addBlankNodeQuadInfo({quad:k,component:k.subject}),this._addBlankNodeQuadInfo({quad:k,component:k.object}),this._addBlankNodeQuadInfo({quad:k,component:k.graph});const M=new Map,U=[...this.blankNodeInfo.keys()];for(const k of U)this._hashAndTrackBlankNode({id:k,hashToBlankNodes:M});const N=[...M.keys()].sort(),j=[];for(const k of N){const X=M.get(k);X.length>1?j.push(X):this.canonicalIssuer.getId(X[0])}for(const k of j){const X=[];for(const ce of k){if(this.canonicalIssuer.hasId(ce))continue;const Y=new E("_:b");Y.getId(ce);const oe=this.hashNDegreeQuads(ce,Y);X.push(oe)}X.sort(P);for(const ce of X){const Y=ce.issuer.getOldIds();for(const oe of Y)this.canonicalIssuer.getId(oe)}}const le=[];for(const k of this.quads){const X=A.serializeQuadComponents(this._componentWithCanonicalId({component:k.subject}),k.predicate,this._componentWithCanonicalId({component:k.object}),this._componentWithCanonicalId({component:k.graph}));le.push(X)}return le.sort(),le.join("")}hashFirstDegreeQuads(y){const M=[],U=this.blankNodeInfo.get(y),N=U.quads;for(const le of N){const k={subject:null,predicate:le.predicate,object:null,graph:null};k.subject=this.modifyFirstDegreeComponent(y,le.subject,"subject"),k.object=this.modifyFirstDegreeComponent(y,le.object,"object"),k.graph=this.modifyFirstDegreeComponent(y,le.graph,"graph"),M.push(A.serializeQuad(k))}M.sort();const j=this.createMessageDigest();for(const le of M)j.update(le);return U.hash=j.digest(),U.hash}hashRelatedBlankNode(y,M,U,N){let j;j=this.canonicalIssuer.hasId(y)?this.canonicalIssuer.getId(y):U.hasId(y)?U.getId(y):this.blankNodeInfo.get(y).hash;const le=this.createMessageDigest();return le.update(N),"g"!==N&&le.update(this.getRelatedPredicate(M)),le.update(j),le.digest()}hashNDegreeQuads(y,M){const U=this.deepIterations.get(y)||0;if(U>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(y,U+1);const N=this.createMessageDigest(),j=this.createHashToRelated(y,M),le=[...j.keys()].sort();for(const k of le){N.update(k);let ce,X="";const Y=new R(j.get(k));for(;Y.hasNext();){const oe=Y.next();let ie=M.clone(),$="";const H=[];let v=!1;for(const L of oe)if(this.canonicalIssuer.hasId(L)?$+=this.canonicalIssuer.getId(L):(ie.hasId(L)||H.push(L),$+=ie.getId(L)),0!==X.length&&$>X){v=!0;break}if(!v){for(const L of H){const T=this.hashNDegreeQuads(L,ie);if($+=ie.getId(L),$+=`<${T.hash}>`,ie=T.issuer,0!==X.length&&$>X){v=!0;break}}v||(0===X.length||$<X)&&(X=$,ce=ie)}}N.update(X),M=ce}return{hash:N.digest(),issuer:M}}modifyFirstDegreeComponent(y,M){return"BlankNode"!==M.termType?M:{termType:"BlankNode",value:M.value===y?"_:a":"_:z"}}getRelatedPredicate(y){return`<${y.predicate.value}>`}createHashToRelated(y,M){const U=new Map,N=this.blankNodeInfo.get(y).quads;for(const j of N)this._addRelatedBlankNodeHash({quad:j,component:j.subject,position:"s",id:y,issuer:M,hashToRelated:U}),this._addRelatedBlankNodeHash({quad:j,component:j.object,position:"o",id:y,issuer:M,hashToRelated:U}),this._addRelatedBlankNodeHash({quad:j,component:j.graph,position:"g",id:y,issuer:M,hashToRelated:U});return U}_hashAndTrackBlankNode({id:y,hashToBlankNodes:M}){const U=this.hashFirstDegreeQuads(y),N=M.get(U);N?N.push(y):M.set(U,[y])}_addBlankNodeQuadInfo({quad:y,component:M}){if("BlankNode"!==M.termType)return;const U=M.value,N=this.blankNodeInfo.get(U);N?N.quads.add(y):this.blankNodeInfo.set(U,{quads:new Set([y]),hash:null})}_addRelatedBlankNodeHash({quad:y,component:M,position:U,id:N,issuer:j,hashToRelated:le}){if("BlankNode"!==M.termType||M.value===N)return;const k=M.value,X=this.hashRelatedBlankNode(k,y,j,U),ce=le.get(X);ce?ce.push(k):le.set(X,[k])}_componentWithCanonicalId({component:y}){return"BlankNode"!==y.termType||y.value.startsWith(this.canonicalIssuer.prefix)?y:{termType:"BlankNode",value:this.canonicalIssuer.getId(y.value)}}}},1326:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(7475),R=g(7218);ne.exports=class extends R{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new b("sha1")}modifyFirstDegreeComponent(P,_,y){return"BlankNode"!==_.termType?_:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===P?"_:a":"_:z"}}getRelatedPredicate(P){return P.predicate.value}createHashToRelated(P,_){var y=this;return E(function*(){const M=new Map,U=y.blankNodeInfo.get(P).quads;let N=0;for(const j of U){let le,k;if("BlankNode"===j.subject.termType&&j.subject.value!==P)k=j.subject.value,le="p";else{if("BlankNode"!==j.object.termType||j.object.value===P)continue;k=j.object.value,le="r"}++N%100==0&&(yield y._yield());const X=yield y.hashRelatedBlankNode(k,j,_,le),ce=M.get(X);ce?ce.push(k):M.set(X,[k])}return M})()}}},9869:(ne,Z,g)=>{"use strict";const E=g(7475),b=g(9123);ne.exports=class extends b{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new E("sha1")}modifyFirstDegreeComponent(A,P,_){return"BlankNode"!==P.termType?P:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:P.value===A?"_:a":"_:z"}}getRelatedPredicate(A){return A.predicate.value}createHashToRelated(A,P){const _=new Map,y=this.blankNodeInfo.get(A).quads;for(const M of y){let U,N;if("BlankNode"===M.subject.termType&&M.subject.value!==A)N=M.subject.value,U="p";else{if("BlankNode"!==M.object.termType||M.object.value===A)continue;N=M.object.value,U="r"}const j=this.hashRelatedBlankNode(N,M,P,U),le=_.get(j);le?le.push(N):_.set(j,[N])}return _}}},7842:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(7218),R=g(1326),A=g(9123),P=g(9869);let _;try{_=g(7670)}catch{}function y(M){return Array.isArray(M)?M:Z.NQuads.legacyDatasetToQuads(M)}Z.NQuads=g(8003),Z.IdentifierIssuer=g(5327),Z._rdfCanonizeNative=function(M){return M&&(_=M),_},Z.canonize=function(){var M=E(function*(U,N){const j=y(U);if(N.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(N.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((le,k)=>_.canonize(j,N,(X,ce)=>X?k(X):le(ce)))}if("URDNA2015"===N.algorithm)return new b(N).main(j);if("URGNA2012"===N.algorithm){if(N.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new R(N).main(j)}throw"algorithm"in N?new Error("Invalid RDF Dataset Canonicalization algorithm: "+N.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(U,N){return M.apply(this,arguments)}}(),Z._canonizeSync=function(M,U){const N=y(M);if(U.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(U.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(N,U)}if("URDNA2015"===U.algorithm)return new A(U).main(N);if("URGNA2012"===U.algorithm){if(U.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new P(U).main(N)}throw"algorithm"in U?new Error("Invalid RDF Dataset Canonicalization algorithm: "+U.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(R,A,P,_){void 0===_&&(_=P),Object.defineProperty(R,_,{enumerable:!0,get:function(){return A[P]}})}:function(R,A,P,_){void 0===_&&(_=P),R[_]=A[P]}),b=this&&this.__exportStar||function(R,A){for(var P in R)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,R,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(4740),Z),b(g(3613),Z),b(g(9379),Z),b(g(5565),Z),b(g(3283),Z),b(g(3905),Z),b(g(2234),Z)},4740:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.BlankNode=void 0,Z.BlankNode=class g{constructor(b){this.termType="BlankNode",this.value=b}equals(b){return!!b&&"BlankNode"===b.termType&&b.value===this.value}}},3613:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.DataFactory=void 0;const E=g(4740),b=g(9379),R=g(5565),A=g(3283),P=g(3905),_=g(2234);let y=0;Z.DataFactory=class M{constructor(N){this.blankNodeCounter=0,this.blankNodePrefix=(N=N||{}).blankNodePrefix||`df_${y++}_`}namedNode(N){return new A.NamedNode(N)}blankNode(N){return new E.BlankNode(N||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(N,j){return new R.Literal(N,j)}variable(N){return new _.Variable(N)}defaultGraph(){return b.DefaultGraph.INSTANCE}quad(N,j,le,k){return new P.Quad(N,j,le,k||this.defaultGraph())}fromTerm(N){switch(N.termType){case"NamedNode":return this.namedNode(N.value);case"BlankNode":return this.blankNode(N.value);case"Literal":return N.language?this.literal(N.value,N.language):N.datatype.equals(R.Literal.XSD_STRING)?this.literal(N.value):this.literal(N.value,this.fromTerm(N.datatype));case"Variable":return this.variable(N.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(N.subject),this.fromTerm(N.predicate),this.fromTerm(N.object),this.fromTerm(N.graph))}}fromQuad(N){return this.fromTerm(N)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.DefaultGraph=void 0;class g{constructor(){this.termType="DefaultGraph",this.value=""}equals(b){return!!b&&"DefaultGraph"===b.termType}}Z.DefaultGraph=g,g.INSTANCE=new g},5565:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Literal=void 0;const E=g(3283);class b{constructor(A,P){this.termType="Literal",this.value=A,"string"==typeof P?(this.language=P,this.datatype=b.RDF_LANGUAGE_STRING):P?(this.language="",this.datatype=P):(this.language="",this.datatype=b.XSD_STRING)}equals(A){return!!A&&"Literal"===A.termType&&A.value===this.value&&A.language===this.language&&this.datatype.equals(A.datatype)}}Z.Literal=b,b.RDF_LANGUAGE_STRING=new E.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),b.XSD_STRING=new E.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.NamedNode=void 0,Z.NamedNode=class g{constructor(b){this.termType="NamedNode",this.value=b}equals(b){return!!b&&"NamedNode"===b.termType&&b.value===this.value}}},3905:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Quad=void 0,Z.Quad=class g{constructor(b,R,A,P){this.termType="Quad",this.value="",this.subject=b,this.predicate=R,this.object=A,this.graph=P}equals(b){return!!b&&("Quad"===b.termType||!b.termType)&&this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)&&this.graph.equals(b.graph)}}},2234:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Variable=void 0,Z.Variable=class g{constructor(b){this.termType="Variable",this.value=b}equals(b){return!!b&&"Variable"===b.termType&&b.value===this.value}}},9689:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,X,ce,Y){void 0===Y&&(Y=ce),Object.defineProperty(k,Y,{enumerable:!0,get:function(){return X[ce]}})}:function(k,X,ce,Y){void 0===Y&&(Y=ce),k[Y]=X[ce]}),b=this&&this.__exportStar||function(k,X){for(var ce in k)"default"!==ce&&!Object.prototype.hasOwnProperty.call(X,ce)&&E(X,k,ce)};Object.defineProperty(Z,"__esModule",{value:!0}),Z.getSupportedJavaScriptPrimitives=Z.getSupportedRdfDatatypes=Z.getTermRaw=Z.toRdf=Z.fromRdf=void 0;const R=g(2633),A=g(2538),P=g(6374);b(g(2538),Z),b(g(1815),Z),b(g(6374),Z);const _=new R.DataFactory,y=new P.Translator;function M(k,X){return y.fromRdf(k,X)}y.registerHandler(new A.TypeHandlerString,A.TypeHandlerString.TYPES.map(k=>_.namedNode(k)),["string"]),y.registerHandler(new A.TypeHandlerBoolean,[A.TypeHandlerBoolean.TYPE].map(k=>_.namedNode(k)),["boolean"]),y.registerHandler(new A.TypeHandlerNumberDouble,A.TypeHandlerNumberDouble.TYPES.map(k=>_.namedNode(k)),["number"]),y.registerHandler(new A.TypeHandlerNumberInteger,A.TypeHandlerNumberInteger.TYPES.map(k=>_.namedNode(k)),["number"]),y.registerHandler(new A.TypeHandlerDate,A.TypeHandlerDate.TYPES.map(k=>_.namedNode(k)),["object"]),Z.fromRdf=M,Z.toRdf=function U(k,X){return X&&"namedNode"in X&&(X={dataFactory:X}),(X=X||{})&&!X.dataFactory&&(X.dataFactory=_),y.toRdf(k,X)},Z.getTermRaw=function N(k,X){return"Literal"===k.termType?M(k,X):k.value},Z.getSupportedRdfDatatypes=function j(){return y.getSupportedRdfDatatypes()},Z.getSupportedJavaScriptPrimitives=function le(){return y.getSupportedJavaScriptPrimitives()}},1815:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0})},6374:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Translator=void 0,Z.Translator=class g{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(b){throw new Error(`Invalid RDF ${b.datatype.value} value: '${b.value}'`)}registerHandler(b,R,A){for(const P of R)this.supportedRdfDatatypes.push(P),this.fromRdfHandlers[P.value]=b;for(const P of A){let _=this.toRdfHandlers[P];_||(this.toRdfHandlers[P]=_=[]),_.push(b)}}fromRdf(b,R){const A=this.fromRdfHandlers[b.datatype.value];return A?A.fromRdf(b,R):b.value}toRdf(b,R){const A=this.toRdfHandlers[typeof b];if(A)for(const P of A){const _=P.toRdf(b,R);if(_)return _}throw new Error(`Invalid JavaScript value: '${b}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerBoolean=void 0;const E=g(6374);class b{fromRdf(A,P){switch(A.value){case"true":case"1":return!0;case"false":case"0":return!1}return P&&E.Translator.incorrectRdfDataType(A),!1}toRdf(A,{datatype:P,dataFactory:_}){return _.literal(A?"true":"false",P||_.namedNode(b.TYPE))}}Z.TypeHandlerBoolean=b,b.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerDate=void 0;const E=g(6374);class b{fromRdf(A,P){switch(P&&!A.value.match(b.VALIDATORS[A.datatype.value.substr(33,A.datatype.value.length)])&&E.Translator.incorrectRdfDataType(A),A.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(A.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const _=A.value.split("-");return new Date(0,parseInt(_[0],10)-1,parseInt(_[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(A.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(A.value+"-01");default:return new Date(A.value)}}toRdf(A,{datatype:P,dataFactory:_}){if(P=P||_.namedNode(b.TYPES[0]),!(A instanceof Date))return null;const y=A;let M;switch(P.value){case"http://www.w3.org/2001/XMLSchema#gDay":M=String(y.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":M=y.getUTCMonth()+1+"-"+y.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":M=String(y.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":M=y.getUTCFullYear()+"-"+(y.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":M=y.toISOString().replace(/T.*$/,"");break;default:M=y.toISOString()}return _.literal(M,P)}}Z.TypeHandlerDate=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],b.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerNumberDouble=void 0;const E=g(6374);class b{fromRdf(A,P){const _=parseFloat(A.value);return P&&isNaN(_)&&E.Translator.incorrectRdfDataType(A),_}toRdf(A,{datatype:P,dataFactory:_}){return P=P||_.namedNode(b.TYPES[0]),isNaN(A)?_.literal("NaN",P):isFinite(A)?A%1==0?null:_.literal(A.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),P):_.literal(A>0?"INF":"-INF",P)}}Z.TypeHandlerNumberDouble=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerNumberInteger=void 0;const E=g(6374);class b{fromRdf(A,P){const _=parseInt(A.value,10);return P&&(isNaN(_)||A.value.indexOf(".")>=0)&&E.Translator.incorrectRdfDataType(A),_}toRdf(A,{datatype:P,dataFactory:_}){return _.literal(String(A),P||_.namedNode(A<=b.MAX_INT&&A>=b.MIN_INT?b.TYPES[0]:b.TYPES[1]))}}Z.TypeHandlerNumberInteger=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],b.MAX_INT=2147483647,b.MIN_INT=-2147483648},2210:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerString=void 0;class g{fromRdf(b){return b.value}toRdf(b,{datatype:R,dataFactory:A}){return A.literal(b,R)}}Z.TypeHandlerString=g,g.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(R,A,P,_){void 0===_&&(_=P),Object.defineProperty(R,_,{enumerable:!0,get:function(){return A[P]}})}:function(R,A,P,_){void 0===_&&(_=P),R[_]=A[P]}),b=this&&this.__exportStar||function(R,A){for(var P in R)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,R,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(88),Z),b(g(1600),Z),b(g(1511),Z),b(g(9199),Z),b(g(2210),Z)},2821:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(R,A,P,_){void 0===_&&(_=P),Object.defineProperty(R,_,{enumerable:!0,get:function(){return A[P]}})}:function(R,A,P,_){void 0===_&&(_=P),R[_]=A[P]}),b=this&&this.__exportStar||function(R,A){for(var P in R)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,R,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(5664),Z)},758:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.ParseError=void 0;class g extends Error{constructor(b,R){const A=b.saxStream._parser;super(b.trackPosition?`Line ${A.line+1} column ${A.column+1}: ${R}`:R)}}Z.ParseError=g},5664:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.ParseType=Z.RdfXmlParser=void 0;const E=g(7054),b=g(9528),R=g(1793),A=g(758),P=g(2633);class _ extends R.Transform{constructor(U){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},U&&(Object.assign(this,U),this.options=U),this.dataFactory||(this.dataFactory=new P.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=b.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(U,N){const j={};let le=!1;for(const X in U.attributes)X.startsWith("xmlns")&&(5===X.length?(le=!0,j[""]=U.attributes[X]):":"===X.charAt(5)&&(le=!0,j[X.substr(6)]=U.attributes[X]));const k=N&&N.ns?N.ns:[_.DEFAULT_NS];return le?k.concat([j]):k}static expandPrefixedTerm(U,N,j){const le=U.indexOf(":");let k,X;le>=0?(k=U.substr(0,le),X=U.substr(le+1)):(k="",X=U);let ce=null,Y=null;for(let oe=N.length-1;oe>=0;oe--){const ie=N[oe][k];if(ie){ce=ie;break}Y||(Y=N[oe][""])}if(!ce){if(k&&"xmlns"!==k)throw new A.ParseError(j,`The prefix '${k}' in term '${U}' was not bound.`);ce=Y||""}return{prefix:k,local:X,uri:ce}}static isValidIri(U){return _.IRI_REGEX.test(U)}import(U){const N=new R.PassThrough({readableObjectMode:!0});U.on("error",le=>j.emit("error",le)),U.on("data",le=>N.push(le)),U.on("end",()=>N.push(null));const j=N.pipe(new _(this.options));return j}_transform(U,N,j){try{this.saxStream.write(U,N)}catch(le){return j(le)}j()}newParseError(U){return new A.ParseError(this,U)}valueToUri(U,N){return this.uriToNamedNode(E.resolve(U,N.baseIRI))}uriToNamedNode(U){if(!_.isValidIri(U))throw this.newParseError(`Invalid URI: ${U}`);return this.dataFactory.namedNode(U)}validateNcname(U){if(!_.NCNAME_MATCHER.test(U))throw this.newParseError(`Not a valid NCName: ${U}`)}attachSaxListeners(){this.saxStream.on("error",U=>this.emit("error",U)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(U){const N=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let j=y.RESOURCE;if(N&&(N.hadChildren=!0,j=N.childrenParseType),N&&N.childrenStringTags){const k=U.name;let X="";for(const ie in U.attributes)X+=` ${ie}="${U.attributes[ie]}"`;N.childrenStringTags.push(`<${k}${X}>`);const oe={childrenStringTags:N.childrenStringTags};return oe.childrenStringEmitClosingTag=`</${k}>`,void this.activeTagStack.push(oe)}const le={};N?(le.language=N.language,le.baseIRI=N.baseIRI):le.baseIRI=this.baseIRI,this.activeTagStack.push(le),le.ns=_.parseNamespace(U,N),j===y.RESOURCE?this.onTagResource(U,le,N,!N):this.onTagProperty(U,le,N)}onTagResource(U,N,j,le){const k=_.expandPrefixedTerm(U.name,N.ns,this);N.childrenParseType=y.PROPERTY;let X=!0;if(k.uri===_.RDF){if(!le&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(k.local)>=0)throw this.newParseError(`Illegal node element name: ${k.local}`);switch(k.local){case"RDF":N.childrenParseType=y.RESOURCE;case"Description":X=!1}}const ce=[],Y=[];let oe=null,ie=!1,$=!1,H=null;for(const v in U.attributes){const L=U.attributes[v],T=_.expandPrefixedTerm(v,N.ns,this);if(j&&T.uri===_.RDF)switch(T.local){case"about":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${L} and ${oe} where found.`);oe=L;continue;case"ID":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${L} and ${oe} where found.`);this.validateNcname(L),oe="#"+L,ie=!0;continue;case"nodeID":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${L} and ${oe} where found.`);this.validateNcname(L),oe=L,$=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":H=L;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(T.uri===_.XML){if("lang"===T.local){N.language=""===L?null:L.toLowerCase();continue}if("base"===T.local){N.baseIRI=E.resolve(L,N.baseIRI);continue}}"xml"!==T.prefix&&T.uri&&(ce.push(this.uriToNamedNode(T.uri+T.local)),Y.push(L))}if(null!==oe&&(N.subject=$?this.dataFactory.blankNode(oe):this.valueToUri(oe,N),ie&&this.claimNodeId(N.subject)),N.subject||(N.subject=this.dataFactory.blankNode()),X){const v=this.uriToNamedNode(k.uri+k.local);this.emitTriple(N.subject,this.dataFactory.namedNode(_.RDF+"type"),v,j?j.reifiedStatementId:null)}if(j){if(j.predicate)if(j.childrenCollectionSubject){const v=this.dataFactory.blankNode();this.emitTriple(j.childrenCollectionSubject,j.childrenCollectionPredicate,v,j.reifiedStatementId),this.emitTriple(v,this.dataFactory.namedNode(_.RDF+"first"),N.subject,N.reifiedStatementId),j.childrenCollectionSubject=v,j.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(j.subject,j.predicate,N.subject,j.reifiedStatementId);for(let v=0;v<j.predicateSubPredicates.length;v++)this.emitTriple(N.subject,j.predicateSubPredicates[v],j.predicateSubObjects[v],null);j.predicateSubPredicates=[],j.predicateSubObjects=[],j.predicateEmitted=!0}for(let v=0;v<ce.length;v++){const L=this.dataFactory.literal(Y[v],N.datatype||N.language);this.emitTriple(N.subject,ce[v],L,j.reifiedStatementId)}H&&this.emitTriple(N.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(H),null)}}onTagProperty(U,N,j){const le=_.expandPrefixedTerm(U.name,N.ns,this);if(N.childrenParseType=y.RESOURCE,N.subject=j.subject,le.uri===_.RDF&&"li"===le.local?(j.listItemCounter||(j.listItemCounter=1),N.predicate=this.uriToNamedNode(le.uri+"_"+j.listItemCounter++)):N.predicate=this.uriToNamedNode(le.uri+le.local),le.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(le.local)>=0)throw this.newParseError(`Illegal property element name: ${le.local}`);N.predicateSubPredicates=[],N.predicateSubObjects=[];let k=!1,X=!1,ce=null,Y=!0;const oe=[],ie=[];for(const $ in U.attributes){const H=U.attributes[$],v=_.expandPrefixedTerm($,N.ns,this);if(v.uri===_.RDF)switch(v.local){case"resource":if(ce)throw this.newParseError(`Found both rdf:resource (${H}) and rdf:nodeID (${ce}).`);if(k)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${H})`);N.hadChildren=!0,ce=H,Y=!1;continue;case"datatype":if(X)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${H}).`);if(k)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${H})`);N.datatype=this.valueToUri(H,N);continue;case"nodeID":if(X)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${H}).`);if(N.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${H}).`);if(k)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${H})`);this.validateNcname(H),N.hadChildren=!0,ce=H,Y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(X)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(N.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${N.datatype.value})`);if(ce)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ce})`);if("Resource"===H){k=!0,N.childrenParseType=y.PROPERTY;const L=this.dataFactory.blankNode();this.emitTriple(N.subject,N.predicate,L,N.reifiedStatementId),N.subject=L,N.predicate=null}else"Collection"===H?(k=!0,N.hadChildren=!0,N.childrenCollectionSubject=N.subject,N.childrenCollectionPredicate=N.predicate,Y=!1):"Literal"===H&&(k=!0,N.childrenTagsToString=!0,N.childrenStringTags=[]);continue;case"ID":this.validateNcname(H),N.reifiedStatementId=this.valueToUri("#"+H,N),this.claimNodeId(N.reifiedStatementId);continue}else if(v.uri===_.XML&&"lang"===v.local){N.language=""===H?null:H.toLowerCase();continue}if("xml"!==v.prefix&&"xmlns"!==v.prefix&&v.uri){if(k||N.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${H}`);N.hadChildren=!0,X=!0,oe.push(this.uriToNamedNode(v.uri+v.local)),ie.push(this.dataFactory.literal(H,N.datatype||N.language))}}if(null!==ce){const $=N.subject;N.subject=Y?this.dataFactory.blankNode(ce):this.valueToUri(ce,N),this.emitTriple($,N.predicate,N.subject,N.reifiedStatementId);for(let H=0;H<oe.length;H++)this.emitTriple(N.subject,oe[H],ie[H],null);N.predicateEmitted=!0}else Y&&(N.predicateSubPredicates=oe,N.predicateSubObjects=ie,N.predicateEmitted=!1)}emitTriple(U,N,j,le){this.push(this.dataFactory.quad(U,N,j,this.defaultGraph)),le&&(this.push(this.dataFactory.quad(le,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(le,this.dataFactory.namedNode(_.RDF+"subject"),U,this.defaultGraph)),this.push(this.dataFactory.quad(le,this.dataFactory.namedNode(_.RDF+"predicate"),N,this.defaultGraph)),this.push(this.dataFactory.quad(le,this.dataFactory.namedNode(_.RDF+"object"),j,this.defaultGraph)))}claimNodeId(U){if(!this.allowDuplicateRdfIds){if(this.nodeIds[U.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${U.value}'.`);this.nodeIds[U.value]=!0}}onText(U){const N=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;N&&(N.childrenStringTags?N.childrenStringTags.push(U):N.predicate&&(N.text=U))}onCloseTag(){const U=this.activeTagStack.pop();if(U.childrenStringEmitClosingTag&&U.childrenStringTags.push(U.childrenStringEmitClosingTag),U.childrenTagsToString&&(U.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),U.text=U.childrenStringTags.join(""),U.hadChildren=!1),U.childrenCollectionSubject)this.emitTriple(U.childrenCollectionSubject,U.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),U.reifiedStatementId);else if(U.predicate)if(U.hadChildren||U.childrenParseType===y.PROPERTY){if(!U.predicateEmitted){const N=this.dataFactory.blankNode();this.emitTriple(U.subject,U.predicate,N,U.reifiedStatementId);for(let j=0;j<U.predicateSubPredicates.length;j++)this.emitTriple(N,U.predicateSubPredicates[j],U.predicateSubObjects[j],null)}}else this.emitTriple(U.subject,U.predicate,this.dataFactory.literal(U.text||"",U.datatype||U.language),U.reifiedStatementId)}onDoctype(U){U.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(N,j,le)=>(this.saxStream._parser.ENTITIES[j]=le,""))}}var y,M;Z.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(M=y=Z.ParseType||(Z.ParseType={}))[M.RESOURCE=0]="RESOURCE",M[M.PROPERTY=1]="PROPERTY"},9987:(ne,Z,g)=>{"use strict";const{AbortError:E,codes:b}=g(4370),{isNodeStream:R,isWebStream:A,kControllerErrorFunction:P}=g(5428),_=g(4618),{ERR_INVALID_ARG_TYPE:y}=b;ne.exports.addAbortSignal=function(N,j){if(((U,N)=>{if("object"!=typeof U||!("aborted"in U))throw new y("signal","AbortSignal",U)})(N),!R(j)&&!A(j))throw new y("stream",["ReadableStream","WritableStream","Stream"],j);return ne.exports.addAbortSignalNoValidate(N,j)},ne.exports.addAbortSignalNoValidate=function(U,N){if("object"!=typeof U||!("aborted"in U))return N;const j=R(N)?()=>{N.destroy(new E(void 0,{cause:U.reason}))}:()=>{N[P](new E(void 0,{cause:U.reason}))};return U.aborted?j():(U.addEventListener("abort",j),_(N,()=>U.removeEventListener("abort",j))),N}},2960:(ne,Z,g)=>{"use strict";const{StringPrototypeSlice:E,SymbolIterator:b,TypedArrayPrototypeSet:R,Uint8Array:A}=g(6305),{Buffer:P}=g(1657),{inspect:_}=g(2656);ne.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(M){const U={data:M,next:null};this.length>0?this.tail.next=U:this.head=U,this.tail=U,++this.length}unshift(M){const U={data:M,next:this.head};0===this.length&&(this.tail=U),this.head=U,++this.length}shift(){if(0===this.length)return;const M=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,M}clear(){this.head=this.tail=null,this.length=0}join(M){if(0===this.length)return"";let U=this.head,N=""+U.data;for(;null!==(U=U.next);)N+=M+U.data;return N}concat(M){if(0===this.length)return P.alloc(0);const U=P.allocUnsafe(M>>>0);let N=this.head,j=0;for(;N;)R(U,N.data,j),j+=N.data.length,N=N.next;return U}consume(M,U){const N=this.head.data;if(M<N.length){const j=N.slice(0,M);return this.head.data=N.slice(M),j}return M===N.length?this.shift():U?this._getString(M):this._getBuffer(M)}first(){return this.head.data}*[b](){for(let M=this.head;M;M=M.next)yield M.data}_getString(M){let U="",N=this.head,j=0;do{const le=N.data;if(!(M>le.length)){M===le.length?(U+=le,++j,this.head=N.next?N.next:this.tail=null):(U+=E(le,0,M),this.head=N,N.data=E(le,M));break}U+=le,M-=le.length,++j}while(null!==(N=N.next));return this.length-=j,U}_getBuffer(M){const U=P.allocUnsafe(M),N=M;let j=this.head,le=0;do{const k=j.data;if(!(M>k.length)){M===k.length?(R(U,k,N-M),++le,this.head=j.next?j.next:this.tail=null):(R(U,new A(k.buffer,k.byteOffset,M),N-M),this.head=j,j.data=k.slice(M));break}R(U,k,N-M),M-=k.length,++le}while(null!==(j=j.next));return this.length-=le,U}[Symbol.for("nodejs.util.inspect.custom")](M,U){return _(this,{...U,depth:0,customInspect:!1})}}},7721:(ne,Z,g)=>{"use strict";var E=g(7156).default;const{pipeline:b}=g(4514),R=g(5931),{destroyer:A}=g(5601),{isNodeStream:P,isReadable:_,isWritable:y,isWebStream:M,isTransformStream:U,isWritableStream:N,isReadableStream:j}=g(5428),{AbortError:le,codes:{ERR_INVALID_ARG_VALUE:k,ERR_MISSING_ARGS:X}}=g(4370),ce=g(4618);ne.exports=function(...oe){if(0===oe.length)throw new X("streams");if(1===oe.length)return R.from(oe[0]);const ie=[...oe];if("function"==typeof oe[0]&&(oe[0]=R.from(oe[0])),"function"==typeof oe[oe.length-1]){const Ie=oe.length-1;oe[Ie]=R.from(oe[Ie])}for(let Ie=0;Ie<oe.length;++Ie)if(P(oe[Ie])||M(oe[Ie])){if(Ie<oe.length-1&&!(_(oe[Ie])||j(oe[Ie])||U(oe[Ie])))throw new k(`streams[${Ie}]`,ie[Ie],"must be readable");if(Ie>0&&!(y(oe[Ie])||N(oe[Ie])||U(oe[Ie])))throw new k(`streams[${Ie}]`,ie[Ie],"must be writable")}let $,H,v,L,T;const z=oe[0],Te=b(oe,function fe(Ie){const De=L;L=null,De?De(Ie):Ie?T.destroy(Ie):!we&&!de&&T.destroy()}),de=!!(y(z)||N(z)||U(z)),we=!!(_(Te)||j(Te)||U(Te));if(T=new R({writableObjectMode:!(null==z||!z.writableObjectMode),readableObjectMode:!(null==Te||!Te.writableObjectMode),writable:de,readable:we}),de){if(P(z))T._write=function(De,tt,Ye){z.write(De,tt)?Ye():$=Ye},T._final=function(De){z.end(),H=De},z.on("drain",function(){if($){const De=$;$=null,De()}});else if(M(z)){const tt=(U(z)?z.writable:z).getWriter();T._write=function(){var Ye=E(function*(Se,Fe,Pe){try{yield tt.ready,tt.write(Se).catch(()=>{}),Pe()}catch(ze){Pe(ze)}});return function(Se,Fe,Pe){return Ye.apply(this,arguments)}}(),T._final=function(){var Ye=E(function*(Se){try{yield tt.ready,tt.close().catch(()=>{}),H=Se}catch(Fe){Se(Fe)}});return function(Se){return Ye.apply(this,arguments)}}()}const Ie=U(Te)?Te.readable:Te;ce(Ie,()=>{if(H){const De=H;H=null,De()}})}if(we)if(P(Te))Te.on("readable",function(){if(v){const Ie=v;v=null,Ie()}}),Te.on("end",function(){T.push(null)}),T._read=function(){for(;;){const Ie=Te.read();if(null===Ie)return void(v=T._read);if(!T.push(Ie))return}};else if(M(Te)){const De=(U(Te)?Te.readable:Te).getReader();T._read=E(function*(){for(;;)try{const{value:tt,done:Ye}=yield De.read();if(!T.push(tt))return;if(Ye)return void T.push(null)}catch{return}})}return T._destroy=function(Ie,De){!Ie&&null!==L&&(Ie=new le),v=null,$=null,H=null,null===L?De(Ie):(L=De,P(Te)&&A(Te,Ie))},T}},5601:(ne,Z,g)=>{"use strict";const E=g(42),{aggregateTwoErrors:b,codes:{ERR_MULTIPLE_CALLBACK:R},AbortError:A}=g(4370),{Symbol:P}=g(6305),{kDestroyed:_,isDestroyed:y,isFinished:M,isServerRequest:U}=g(5428),N=P("kDestroy"),j=P("kConstruct");function le(de,we,Ie){de&&(we&&!we.errored&&(we.errored=de),Ie&&!Ie.errored&&(Ie.errored=de))}function X(de,we,Ie){let De=!1;function tt(Ye){if(De)return;De=!0;const Se=de._readableState,Fe=de._writableState;le(Ye,Fe,Se),Fe&&(Fe.closed=!0),Se&&(Se.closed=!0),"function"==typeof Ie&&Ie(Ye),Ye?E.nextTick(ce,de,Ye):E.nextTick(Y,de)}try{de._destroy(we||null,tt)}catch(Ye){tt(Ye)}}function ce(de,we){oe(de,we),Y(de)}function Y(de){const we=de._readableState,Ie=de._writableState;Ie&&(Ie.closeEmitted=!0),we&&(we.closeEmitted=!0),(null!=Ie&&Ie.emitClose||null!=we&&we.emitClose)&&de.emit("close")}function oe(de,we){const Ie=de._readableState,De=de._writableState;null!=De&&De.errorEmitted||null!=Ie&&Ie.errorEmitted||(De&&(De.errorEmitted=!0),Ie&&(Ie.errorEmitted=!0),de.emit("error",we))}function $(de,we,Ie){const De=de._readableState,tt=de._writableState;if(null!=tt&&tt.destroyed||null!=De&&De.destroyed)return this;null!=De&&De.autoDestroy||null!=tt&&tt.autoDestroy?de.destroy(we):we&&(tt&&!tt.errored&&(tt.errored=we),De&&!De.errored&&(De.errored=we),Ie?E.nextTick(oe,de,we):oe(de,we))}function v(de){let we=!1;function Ie(De){if(we)return void $(de,De??new R);we=!0;const tt=de._readableState,Ye=de._writableState,Se=Ye||tt;tt&&(tt.constructed=!0),Ye&&(Ye.constructed=!0),Se.destroyed?de.emit(N,De):De?$(de,De,!0):E.nextTick(L,de)}try{de._construct(De=>{E.nextTick(Ie,De)})}catch(De){E.nextTick(Ie,De)}}function L(de){de.emit(j)}function T(de){return de?.setHeader&&"function"==typeof de.abort}function fe(de){de.emit("close")}function z(de,we){de.emit("error",we),E.nextTick(fe,de)}ne.exports={construct:function H(de,we){if("function"!=typeof de._construct)return;const Ie=de._readableState,De=de._writableState;Ie&&(Ie.constructed=!1),De&&(De.constructed=!1),de.once(j,we),!(de.listenerCount(j)>1)&&E.nextTick(v,de)},destroyer:function Te(de,we){!de||y(de)||(!we&&!M(de)&&(we=new A),U(de)?(de.socket=null,de.destroy(we)):T(de)?de.abort():T(de.req)?de.req.abort():"function"==typeof de.destroy?de.destroy(we):"function"==typeof de.close?de.close():we?E.nextTick(z,de,we):E.nextTick(fe,de),de.destroyed||(de[_]=!0))},destroy:function k(de,we){const Ie=this._readableState,De=this._writableState,tt=De||Ie;return null!=De&&De.destroyed||null!=Ie&&Ie.destroyed?("function"==typeof we&&we(),this):(le(de,De,Ie),De&&(De.destroyed=!0),Ie&&(Ie.destroyed=!0),tt.constructed?X(this,de,we):this.once(N,function(Ye){X(this,b(Ye,de),we)}),this)},undestroy:function ie(){const de=this._readableState,we=this._writableState;de&&(de.constructed=!0,de.closed=!1,de.closeEmitted=!1,de.destroyed=!1,de.errored=null,de.errorEmitted=!1,de.reading=!1,de.ended=!1===de.readable,de.endEmitted=!1===de.readable),we&&(we.constructed=!0,we.destroyed=!1,we.closed=!1,we.closeEmitted=!1,we.errored=null,we.errorEmitted=!1,we.finalCalled=!1,we.prefinished=!1,we.ended=!1===we.writable,we.ending=!1===we.writable,we.finished=!1===we.writable)},errorOrDestroy:$}},5931:(ne,Z,g)=>{"use strict";const{ObjectDefineProperties:E,ObjectGetOwnPropertyDescriptor:b,ObjectKeys:R,ObjectSetPrototypeOf:A}=g(6305);ne.exports=y;const P=g(8383),_=g(9764);A(y.prototype,P.prototype),A(y,P);{const j=R(_.prototype);for(let le=0;le<j.length;le++){const k=j[le];y.prototype[k]||(y.prototype[k]=_.prototype[k])}}function y(j){if(!(this instanceof y))return new y(j);P.call(this,j),_.call(this,j),j?(this.allowHalfOpen=!1!==j.allowHalfOpen,!1===j.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===j.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let M,N;function U(){return void 0===M&&(M={}),M}E(y.prototype,{writable:{__proto__:null,...b(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...b(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...b(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...b(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...b(_.prototype,"writableLength")},writableFinished:{__proto__:null,...b(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...b(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...b(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...b(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(j){this._readableState&&this._writableState&&(this._readableState.destroyed=j,this._writableState.destroyed=j)}}}),y.fromWeb=function(j,le){return U().newStreamDuplexFromReadableWritablePair(j,le)},y.toWeb=function(j){return U().newReadableWritablePairFromDuplex(j)},y.from=function(j){return N||(N=g(8078)),N(j,"body")}},8078:(ne,Z,g)=>{var E=g(7156).default,b=g(6737).default,R=g(8186).default;const A=g(42),P=g(1657),{isReadable:_,isWritable:y,isIterable:M,isNodeStream:U,isReadableNodeStream:N,isWritableNodeStream:j,isDuplexNodeStream:le}=g(5428),k=g(4618),{AbortError:X,codes:{ERR_INVALID_ARG_TYPE:ce,ERR_INVALID_RETURN_VALUE:Y}}=g(4370),{destroyer:oe}=g(5601),ie=g(5931),$=g(8383),{createDeferredPromise:H}=g(2656),v=g(55),L=globalThis.Blob||P.Blob,T=typeof L<"u"?function(De){return De instanceof L}:function(De){return!1},fe=globalThis.AbortController||g(3982).AbortController,{FunctionPrototypeCall:z}=g(6305);class Te extends ie{constructor(De){super(De),!1===De?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===De?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function we(Ie){const De=Ie.readable&&"function"!=typeof Ie.readable.read?$.wrap(Ie.readable):Ie.readable,tt=Ie.writable;let Fe,Pe,ze,ge,Ce,Ye=!!_(De),Se=!!y(tt);function Ke(st){const Qe=ge;ge=null,Qe?Qe(st):st&&Ce.destroy(st)}return Ce=new Te({readableObjectMode:!(null==De||!De.readableObjectMode),writableObjectMode:!(null==tt||!tt.writableObjectMode),readable:Ye,writable:Se}),Se&&(k(tt,st=>{Se=!1,st&&oe(De,st),Ke(st)}),Ce._write=function(st,Qe,_e){tt.write(st,Qe)?_e():Fe=_e},Ce._final=function(st){tt.end(),Pe=st},tt.on("drain",function(){if(Fe){const st=Fe;Fe=null,st()}}),tt.on("finish",function(){if(Pe){const st=Pe;Pe=null,st()}})),Ye&&(k(De,st=>{Ye=!1,st&&oe(De,st),Ke(st)}),De.on("readable",function(){if(ze){const st=ze;ze=null,st()}}),De.on("end",function(){Ce.push(null)}),Ce._read=function(){for(;;){const st=De.read();if(null===st)return void(ze=Ce._read);if(!Ce.push(st))return}}),Ce._destroy=function(st,Qe){!st&&null!==ge&&(st=new X),ze=null,Fe=null,Pe=null,null===ge?Qe(st):(ge=Qe,oe(tt,st),oe(De,st))},Ce}ne.exports=function Ie(De,tt){if(le(De))return De;if(N(De))return we({readable:De});if(j(De))return we({writable:De});if(U(De))return we({writable:!1,readable:!1});if("function"==typeof De){const{value:Se,write:Fe,final:Pe,destroy:ze}=function de(Ie){let{promise:De,resolve:tt}=H();const Ye=new fe,Se=Ye.signal;return{value:Ie(R(function*(){for(;;){const Pe=De;De=null;const{chunk:ze,done:ge,cb:Ce}=yield b(Pe);if(A.nextTick(Ce),ge)return;if(Se.aborted)throw new X(void 0,{cause:Se.reason});({promise:De,resolve:tt}=H()),yield ze}})(),{signal:Se}),write(Pe,ze,ge){const Ce=tt;tt=null,Ce({chunk:Pe,done:!1,cb:ge})},final(Pe){const ze=tt;tt=null,ze({done:!0,cb:Pe})},destroy(Pe,ze){Ye.abort(),ze(Pe)}}}(De);if(M(Se))return v(Te,Se,{objectMode:!0,write:Fe,final:Pe,destroy:ze});const ge=Se?.then;if("function"==typeof ge){let Ce;const Ke=z(ge,Se,st=>{if(null!=st)throw new Y("nully","body",st)},st=>{oe(Ce,st)});return Ce=new Te({objectMode:!0,readable:!1,write:Fe,final(st){Pe(E(function*(){try{yield Ke,A.nextTick(st,null)}catch(Qe){A.nextTick(st,Qe)}}))},destroy:ze})}throw new Y("Iterable, AsyncIterable or AsyncFunction",tt,Se)}if(T(De))return Ie(De.arrayBuffer());if(M(De))return v(Te,De,{objectMode:!0,writable:!1});if("object"==typeof De?.writable||"object"==typeof De?.readable)return we({readable:null!=De&&De.readable?N(De?.readable)?De?.readable:Ie(De.readable):void 0,writable:null!=De&&De.writable?j(De?.writable)?De?.writable:Ie(De.writable):void 0});const Ye=De?.then;if("function"==typeof Ye){let Se;return z(Ye,De,Fe=>{null!=Fe&&Se.push(Fe),Se.push(null)},Fe=>{oe(Se,Fe)}),Se=new Te({objectMode:!0,writable:!1,read(){}})}throw new ce(tt,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],De)}},4618:(ne,Z,g)=>{const E=g(42),{AbortError:b,codes:R}=g(4370),{ERR_INVALID_ARG_TYPE:A,ERR_STREAM_PREMATURE_CLOSE:P}=R,{kEmptyObject:_,once:y}=g(2656),{validateAbortSignal:M,validateFunction:U,validateObject:N,validateBoolean:j}=g(2120),{Promise:le,PromisePrototypeThen:k}=g(6305),{isClosed:X,isReadable:ce,isReadableNodeStream:Y,isReadableStream:oe,isReadableFinished:ie,isReadableErrored:$,isWritable:H,isWritableNodeStream:v,isWritableStream:L,isWritableFinished:T,isWritableErrored:fe,isNodeStream:z,willEmitClose:Te,kIsClosedPromise:de}=g(5428),Ie=()=>{};function De(Se,Fe,Pe){var ze,ge;if(2===arguments.length?(Pe=Fe,Fe=_):null==Fe?Fe=_:N(Fe,"options"),U(Pe,"callback"),M(Fe.signal,"options.signal"),Pe=y(Pe),oe(Se)||L(Se))return function tt(Se,Fe,Pe){let ze=!1,ge=Ie;if(Fe.signal)if(ge=()=>{ze=!0,Pe.call(Se,new b(void 0,{cause:Fe.signal.reason}))},Fe.signal.aborted)E.nextTick(ge);else{const Ke=Pe;Pe=y((...st)=>{Fe.signal.removeEventListener("abort",ge),Ke.apply(Se,st)}),Fe.signal.addEventListener("abort",ge)}const Ce=(...Ke)=>{ze||E.nextTick(()=>Pe.apply(Se,Ke))};return k(Se[de].promise,Ce,Ce),Ie}(Se,Fe,Pe);if(!z(Se))throw new A("stream",["ReadableStream","WritableStream","Stream"],Se);const Ce=null!==(ze=Fe.readable)&&void 0!==ze?ze:Y(Se),Ke=null!==(ge=Fe.writable)&&void 0!==ge?ge:v(Se),st=Se._writableState,Qe=Se._readableState,_e=()=>{Se.writable||ae()};let B=Te(Se)&&Y(Se)===Ce&&v(Se)===Ke,I=T(Se,!1);const ae=()=>{I=!0,Se.destroyed&&(B=!1),(!B||Se.readable&&!Ce)&&(!Ce||K)&&Pe.call(Se)};let K=ie(Se,!1);const Le=()=>{K=!0,Se.destroyed&&(B=!1),(!B||Se.writable&&!Ke)&&(!Ke||I)&&Pe.call(Se)},Ve=he=>{Pe.call(Se,he)};let me=X(Se);const Q=()=>{me=!0;const he=fe(Se)||$(Se);return he&&"boolean"!=typeof he?Pe.call(Se,he):Ce&&!K&&Y(Se,!0)&&!ie(Se,!1)?Pe.call(Se,new P):!Ke||I||T(Se,!1)?void Pe.call(Se):Pe.call(Se,new P)},W=()=>{me=!0;const he=fe(Se)||$(Se);if(he&&"boolean"!=typeof he)return Pe.call(Se,he);Pe.call(Se)},C=()=>{Se.req.on("finish",ae)};!function we(Se){return Se.setHeader&&"function"==typeof Se.abort}(Se)?Ke&&!st&&(Se.on("end",_e),Se.on("close",_e)):(Se.on("complete",ae),B||Se.on("abort",Q),Se.req?C():Se.on("request",C)),!B&&"boolean"==typeof Se.aborted&&Se.on("aborted",Q),Se.on("end",Le),Se.on("finish",ae),!1!==Fe.error&&Se.on("error",Ve),Se.on("close",Q),me?E.nextTick(Q):null!=st&&st.errorEmitted||null!=Qe&&Qe.errorEmitted?B||E.nextTick(W):(!Ce&&(!B||ce(Se))&&(I||!1===H(Se))||!Ke&&(!B||H(Se))&&(K||!1===ce(Se))||Qe&&Se.req&&Se.aborted)&&E.nextTick(W);const O=()=>{Pe=Ie,Se.removeListener("aborted",Q),Se.removeListener("complete",ae),Se.removeListener("abort",Q),Se.removeListener("request",C),Se.req&&Se.req.removeListener("finish",ae),Se.removeListener("end",_e),Se.removeListener("close",_e),Se.removeListener("finish",ae),Se.removeListener("end",Le),Se.removeListener("error",Ve),Se.removeListener("close",Q)};if(Fe.signal&&!me){const he=()=>{const ue=Pe;O(),ue.call(Se,new b(void 0,{cause:Fe.signal.reason}))};if(Fe.signal.aborted)E.nextTick(he);else{const ue=Pe;Pe=y((...Ge)=>{Fe.signal.removeEventListener("abort",he),ue.apply(Se,Ge)}),Fe.signal.addEventListener("abort",he)}}return O}ne.exports=De,ne.exports.finished=function Ye(Se,Fe){var Pe;let ze=!1;return null===Fe&&(Fe=_),null!==(Pe=Fe)&&void 0!==Pe&&Pe.cleanup&&(j(Fe.cleanup,"cleanup"),ze=Fe.cleanup),new le((ge,Ce)=>{const Ke=De(Se,Fe,st=>{ze&&Ke(),st?Ce(st):ge()})})}},55:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(42),{PromisePrototypeThen:R,SymbolAsyncIterator:A,SymbolIterator:P}=g(6305),{Buffer:_}=g(1657),{ERR_INVALID_ARG_TYPE:y,ERR_STREAM_NULL_VALUES:M}=g(4370).codes;ne.exports=function U(N,j,le){let k,X;if("string"==typeof j||j instanceof _)return new N({objectMode:!0,...le,read(){this.push(j),this.push(null)}});if(j&&j[A])X=!0,k=j[A]();else{if(!j||!j[P])throw new y("iterable",["Iterable"],j);X=!1,k=j[P]()}const ce=new N({objectMode:!0,highWaterMark:1,...le});let Y=!1;function ie(){return(ie=E(function*(v){if(null!=v&&"function"==typeof k.throw){const{value:fe,done:z}=yield k.throw(v);if(yield fe,z)return}if("function"==typeof k.return){const{value:fe}=yield k.return();yield fe}})).apply(this,arguments)}function H(){return(H=E(function*(){for(;;){try{const{value:v,done:L}=X?yield k.next():k.next();if(L)ce.push(null);else{const T=v&&"function"==typeof v.then?yield v:v;if(null===T)throw Y=!1,new M;if(ce.push(T))continue;Y=!1}}catch(v){ce.destroy(v)}break}})).apply(this,arguments)}return ce._read=function(){Y||(Y=!0,function $(){H.apply(this,arguments)}())},ce._destroy=function(v,L){R(function oe(v){return ie.apply(this,arguments)}(v),()=>b.nextTick(L,v),T=>b.nextTick(L,T||v))},ce}},900:(ne,Z,g)=>{"use strict";const{ArrayIsArray:E,ObjectSetPrototypeOf:b}=g(6305),{EventEmitter:R}=g(2016);function A(_){R.call(this,_)}function P(_,y,M){if("function"==typeof _.prependListener)return _.prependListener(y,M);_._events&&_._events[y]?E(_._events[y])?_._events[y].unshift(M):_._events[y]=[M,_._events[y]]:_.on(y,M)}b(A.prototype,R.prototype),b(A,R),A.prototype.pipe=function(_,y){const M=this;function U(Y){_.writable&&!1===_.write(Y)&&M.pause&&M.pause()}function N(){M.readable&&M.resume&&M.resume()}M.on("data",U),_.on("drain",N),!_._isStdio&&(!y||!1!==y.end)&&(M.on("end",le),M.on("close",k));let j=!1;function le(){j||(j=!0,_.end())}function k(){j||(j=!0,"function"==typeof _.destroy&&_.destroy())}function X(Y){ce(),0===R.listenerCount(this,"error")&&this.emit("error",Y)}function ce(){M.removeListener("data",U),_.removeListener("drain",N),M.removeListener("end",le),M.removeListener("close",k),M.removeListener("error",X),_.removeListener("error",X),M.removeListener("end",ce),M.removeListener("close",ce),_.removeListener("close",ce)}return P(M,"error",X),P(_,"error",X),M.on("end",ce),M.on("close",ce),_.on("close",ce),_.emit("pipe",M),_},ne.exports={Stream:A,prependListener:P}},7624:(ne,Z,g)=>{"use strict";var E=g(7156).default,b=g(8131).default,R=g(8237).default,A=g(6737).default,P=g(8186).default;const _=globalThis.AbortController||g(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:y,ERR_INVALID_ARG_TYPE:M,ERR_MISSING_ARGS:U,ERR_OUT_OF_RANGE:N},AbortError:j}=g(4370),{validateAbortSignal:le,validateInteger:k,validateObject:X}=g(2120),ce=g(6305).Symbol("kWeak"),{finished:Y}=g(4618),oe=g(7721),{addAbortSignalNoValidate:ie}=g(9987),{isWritable:$,isNodeStream:H}=g(5428),{ArrayPrototypePush:v,MathFloor:L,Number:T,NumberIsNaN:fe,Promise:z,PromiseReject:Te,PromisePrototypeThen:de,Symbol:we}=g(6305),Ie=we("kEmpty"),De=we("kEof");function Ye(C,O){if("function"!=typeof C)throw new M("fn",["Function","AsyncFunction"],C);null!=O&&X(O,"options"),null!=O?.signal&&le(O.signal,"options.signal");let he=1;return null!=O?.concurrency&&(he=L(O.concurrency)),k(he,"concurrency",1),function(){var ue=P(function*(){var qe,ft;const Pt=new _,dt=this,Gt=[],on=Pt.signal,Re={signal:on},J=()=>Pt.abort();null!=O&&null!==(qe=O.signal)&&void 0!==qe&&qe.aborted&&J(),null==O||null===(ft=O.signal)||void 0===ft||ft.addEventListener("abort",J);let S,se,We=!1;function Ze(){We=!0}function $t(){return($t=E(function*(){try{var Xn,sn=!1,$n=!1;try{for(var Io,In=R(dt);sn=!(Io=yield In.next()).done;sn=!1){let qi=Io.value;var Lr;if(We)return;if(on.aborted)throw new j;try{qi=C(qi,Re)}catch(Br){qi=Te(Br)}qi!==Ie&&("function"==typeof(null===(Lr=qi)||void 0===Lr?void 0:Lr.catch)&&qi.catch(Ze),Gt.push(qi),S&&(S(),S=null),!We&&Gt.length&&Gt.length>=he&&(yield new z(Br=>{se=Br})))}}catch(qi){$n=!0,Xn=qi}finally{try{sn&&null!=In.return&&(yield In.return())}finally{if($n)throw Xn}}Gt.push(De)}catch(qi){const Br=Te(qi);de(Br,void 0,Ze),Gt.push(Br)}finally{var Do;We=!0,S&&(S(),S=null),null==O||null===(Do=O.signal)||void 0===Do||Do.removeEventListener("abort",J)}})).apply(this,arguments)}!function ct(){$t.apply(this,arguments)}();try{for(;;){for(;Gt.length>0;){const sn=yield A(Gt[0]);if(sn===De)return;if(on.aborted)throw new j;sn!==Ie&&(yield sn),Gt.shift(),se&&(se(),se=null)}yield A(new z(sn=>{S=sn}))}}finally{Pt.abort(),We=!0,se&&(se(),se=null)}});return function Ge(){return ue.apply(this,arguments)}}().call(this)}function Fe(C){return Pe.apply(this,arguments)}function Pe(){return(Pe=E(function*(C,O=void 0){var Ge,he=!1,ue=!1;try{for(var qe=R(_e.call(this,C,O));he=!(yield qe.next()).done;he=!1)return!0}catch(Pt){ue=!0,Ge=Pt}finally{try{he&&null!=qe.return&&(yield qe.return())}finally{if(ue)throw Ge}}return!1})).apply(this,arguments)}function ge(){return(ge=E(function*(C,O=void 0){if("function"!=typeof C)throw new M("fn",["Function","AsyncFunction"],C);return!(yield Fe.call(this,E(function*(...he){return!(yield C(...he))}),O))})).apply(this,arguments)}function Ke(){return(Ke=E(function*(C,O){var Ge,he=!1,ue=!1;try{for(var ft,qe=R(_e.call(this,C,O));he=!(ft=yield qe.next()).done;he=!1)return ft.value}catch(Pt){ue=!0,Ge=Pt}finally{try{he&&null!=qe.return&&(yield qe.return())}finally{if(ue)throw Ge}}})).apply(this,arguments)}function Qe(){return Qe=E(function*(C,O){if("function"!=typeof C)throw new M("fn",["Function","AsyncFunction"],C);function ue(){return(ue=E(function*(Gt,on){return yield C(Gt,on),Ie})).apply(this,arguments)}var ft,Ge=!1,qe=!1;try{for(var Pt=R(Ye.call(this,function he(Gt,on){return ue.apply(this,arguments)},O));Ge=!(yield Pt.next()).done;Ge=!1);}catch(Gt){qe=!0,ft=Gt}finally{try{Ge&&null!=Pt.return&&(yield Pt.return())}finally{if(qe)throw ft}}}),Qe.apply(this,arguments)}function _e(C,O){if("function"!=typeof C)throw new M("fn",["Function","AsyncFunction"],C);function ue(){return(ue=E(function*(Ge,qe){return(yield C(Ge,qe))?Ge:Ie})).apply(this,arguments)}return Ye.call(this,function he(Ge,qe){return ue.apply(this,arguments)},O)}class B extends U{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ae(){return ae=E(function*(C,O,he){var ue;if("function"!=typeof C)throw new M("reducer",["Function","AsyncFunction"],C);null!=he&&X(he,"options"),null!=he?.signal&&le(he.signal,"options.signal");let Ge=arguments.length>1;if(null!=he&&null!==(ue=he.signal)&&void 0!==ue&&ue.aborted){const se=new j(void 0,{cause:he.signal.reason});throw this.once("error",()=>{}),yield Y(this.destroy(se)),se}const qe=new _,ft=qe.signal;null!=he&&he.signal&&he.signal.addEventListener("abort",()=>qe.abort(),{once:!0,[ce]:this});let Pt=!1;try{var on,dt=!1,Gt=!1;try{for(var J,Re=R(this);dt=!(J=yield Re.next()).done;dt=!1){const se=J.value;var S;if(Pt=!0,null!=he&&null!==(S=he.signal)&&void 0!==S&&S.aborted)throw new j;Ge?O=yield C(O,se,{signal:ft}):(O=se,Ge=!0)}}catch(se){Gt=!0,on=se}finally{try{dt&&null!=Re.return&&(yield Re.return())}finally{if(Gt)throw on}}if(!Pt&&!Ge)throw new B}finally{qe.abort()}return O}),ae.apply(this,arguments)}function Le(){return(Le=E(function*(C){null!=C&&X(C,"options"),null!=C?.signal&&le(C.signal,"options.signal");const O=[];var Ge,he=!1,ue=!1;try{for(var ft,qe=R(this);he=!(ft=yield qe.next()).done;he=!1){const dt=ft.value;var Pt;if(null!=C&&null!==(Pt=C.signal)&&void 0!==Pt&&Pt.aborted)throw new j(void 0,{cause:C.signal.reason});v(O,dt)}}catch(dt){ue=!0,Ge=dt}finally{try{he&&null!=qe.return&&(yield qe.return())}finally{if(ue)throw Ge}}return O})).apply(this,arguments)}function me(C){if(C=T(C),fe(C))return 0;if(C<0)throw new N("number",">= 0",C);return C}ne.exports.streamReturningOperators={asIndexedPairs:function Se(C=void 0){return null!=C&&X(C,"options"),null!=C?.signal&&le(C.signal,"options.signal"),function(){var O=P(function*(){let ue=0;var ft,Ge=!1,qe=!1;try{for(var dt,Pt=R(this);Ge=!(dt=yield A(Pt.next())).done;Ge=!1){const on=dt.value;var Gt;if(null!=C&&null!==(Gt=C.signal)&&void 0!==Gt&&Gt.aborted)throw new j({cause:C.signal.reason});yield[ue++,on]}}catch(on){qe=!0,ft=on}finally{try{Ge&&null!=Pt.return&&(yield A(Pt.return()))}finally{if(qe)throw ft}}});return function he(){return O.apply(this,arguments)}}().call(this)},drop:function Q(C,O=void 0){return null!=O&&X(O,"options"),null!=O?.signal&&le(O.signal,"options.signal"),C=me(C),function(){var he=P(function*(){var Ge;if(null!=O&&null!==(Ge=O.signal)&&void 0!==Ge&&Ge.aborted)throw new j;var Pt,qe=!1,ft=!1;try{for(var Gt,dt=R(this);qe=!(Gt=yield A(dt.next())).done;qe=!1){const Re=Gt.value;var on;if(null!=O&&null!==(on=O.signal)&&void 0!==on&&on.aborted)throw new j;C--<=0&&(yield Re)}}catch(Re){ft=!0,Pt=Re}finally{try{qe&&null!=dt.return&&(yield A(dt.return()))}finally{if(ft)throw Pt}}});return function ue(){return he.apply(this,arguments)}}().call(this)},filter:_e,flatMap:function Ve(C,O){const he=Ye.call(this,C,O);return function(){var ue=P(function*(){var Pt,qe=!1,ft=!1;try{for(var Gt,dt=R(he);qe=!(Gt=yield A(dt.next())).done;qe=!1){const on=Gt.value;yield*b(R(on),A)}}catch(on){ft=!0,Pt=on}finally{try{qe&&null!=dt.return&&(yield A(dt.return()))}finally{if(ft)throw Pt}}});return function Ge(){return ue.apply(this,arguments)}}().call(this)},map:Ye,take:function W(C,O=void 0){return null!=O&&X(O,"options"),null!=O?.signal&&le(O.signal,"options.signal"),C=me(C),function(){var he=P(function*(){var Ge;if(null!=O&&null!==(Ge=O.signal)&&void 0!==Ge&&Ge.aborted)throw new j;var Pt,qe=!1,ft=!1;try{for(var Gt,dt=R(this);qe=!(Gt=yield A(dt.next())).done;qe=!1){const Re=Gt.value;var on;if(null!=O&&null!==(on=O.signal)&&void 0!==on&&on.aborted)throw new j;if(!(C-- >0))return;yield Re}}catch(Re){ft=!0,Pt=Re}finally{try{qe&&null!=dt.return&&(yield A(dt.return()))}finally{if(ft)throw Pt}}});return function ue(){return he.apply(this,arguments)}}().call(this)},compose:function tt(C,O){if(null!=O&&X(O,"options"),null!=O?.signal&&le(O.signal,"options.signal"),H(C)&&!$(C))throw new y("stream",C,"must be writable");const he=oe(this,C);return null!=O&&O.signal&&ie(O.signal,he),he}},ne.exports.promiseReturningOperators={every:function ze(C){return ge.apply(this,arguments)},forEach:function st(C,O){return Qe.apply(this,arguments)},reduce:function I(C,O,he){return ae.apply(this,arguments)},toArray:function K(C){return Le.apply(this,arguments)},some:Fe,find:function Ce(C,O){return Ke.apply(this,arguments)}}},6973:(ne,Z,g)=>{"use strict";const{ObjectSetPrototypeOf:E}=g(6305);ne.exports=R;const b=g(123);function R(A){if(!(this instanceof R))return new R(A);b.call(this,A)}E(R.prototype,b.prototype),E(R,b),R.prototype._transform=function(A,P,_){_(null,A)}},4514:(ne,Z,g)=>{var E=g(7156).default,b=g(8186).default,R=g(6737).default,A=g(8131).default,P=g(8237).default;const _=g(42),{ArrayIsArray:y,Promise:M,SymbolAsyncIterator:U}=g(6305),N=g(4618),{once:j}=g(2656),le=g(5601),k=g(5931),{aggregateTwoErrors:X,codes:{ERR_INVALID_ARG_TYPE:ce,ERR_INVALID_RETURN_VALUE:Y,ERR_MISSING_ARGS:oe,ERR_STREAM_DESTROYED:ie,ERR_STREAM_PREMATURE_CLOSE:$},AbortError:H}=g(4370),{validateFunction:v,validateAbortSignal:L}=g(2120),{isIterable:T,isReadable:fe,isReadableNodeStream:z,isNodeStream:Te,isTransformStream:de,isWebStream:we,isReadableStream:Ie,isReadableEnded:De}=g(5428),tt=globalThis.AbortController||g(3982).AbortController;let Ye,Se;function Fe(K,Le,Ve){let me=!1;return K.on("close",()=>{me=!0}),{destroy:W=>{me||(me=!0,le.destroyer(K,W||new ie("pipe")))},cleanup:N(K,{readable:Le,writable:Ve},W=>{me=!W})}}function ze(K){if(T(K))return K;if(z(K))return function ge(K){return Ce.apply(this,arguments)}(K);throw new ce("val",["Readable","Iterable","AsyncIterable"],K)}function Ce(){return(Ce=b(function*(K){Se||(Se=g(8383)),yield*A(P(Se.prototype[U].call(K)),R)})).apply(this,arguments)}function Ke(K,Le,Ve,me){return st.apply(this,arguments)}function st(){return(st=E(function*(K,Le,Ve,{end:me}){let Q,W=null;const C=dt=>{if(dt&&(Q=dt),W){const Gt=W;W=null,Gt()}},O=()=>new M((dt,Gt)=>{Q?Gt(Q):W=()=>{Q?Gt(Q):dt()}});Le.on("drain",C);const he=N(Le,{readable:!1},C);try{Le.writableNeedDrain&&(yield O());var qe,ue=!1,Ge=!1;try{for(var Pt,ft=P(K);ue=!(Pt=yield ft.next()).done;ue=!1)Le.write(Pt.value)||(yield O())}catch(dt){Ge=!0,qe=dt}finally{try{ue&&null!=ft.return&&(yield ft.return())}finally{if(Ge)throw qe}}me&&Le.end(),yield O(),Ve()}catch(dt){Ve(Q!==dt?X(Q,dt):dt)}finally{he(),Le.off("drain",C)}})).apply(this,arguments)}function Qe(K,Le,Ve,me){return _e.apply(this,arguments)}function _e(){return(_e=E(function*(K,Le,Ve,{end:me}){de(Le)&&(Le=Le.writable);const Q=Le.getWriter();try{var O,W=!1,C=!1;try{for(var ue,he=P(K);W=!(ue=yield he.next()).done;W=!1){const Ge=ue.value;yield Q.ready,Q.write(Ge).catch(()=>{})}}catch(Ge){C=!0,O=Ge}finally{try{W&&null!=he.return&&(yield he.return())}finally{if(C)throw O}}yield Q.ready,me&&(yield Q.close()),Ve()}catch(Ge){try{yield Q.abort(Ge),Ve(Ge)}catch(qe){Ve(qe)}}})).apply(this,arguments)}function I(K,Le,Ve){if(1===K.length&&y(K[0])&&(K=K[0]),K.length<2)throw new oe("streams");const me=new tt,Q=me.signal,W=Ve?.signal,C=[];function O(){Pt(new H)}let he,ue;L(W,"options.signal"),W?.addEventListener("abort",O);const Ge=[];let dt,qe=0;function ft(J){Pt(J,0==--qe)}function Pt(J,S){if(J&&(!he||"ERR_STREAM_PREMATURE_CLOSE"===he.code)&&(he=J),he||S){for(;Ge.length;)Ge.shift()(he);W?.removeEventListener("abort",O),me.abort(),S&&(he||C.forEach(se=>se()),_.nextTick(Le,he,ue))}}for(let J=0;J<K.length;J++){const S=K[J],se=J<K.length-1,We=J>0,Ze=se||!1!==Ve?.end,ct=J===K.length-1;if(Te(S)){let $t=function(sn){sn&&"AbortError"!==sn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==sn.code&&ft(sn)};if(Ze){const{destroy:sn,cleanup:$n}=Fe(S,se,We);Ge.push(sn),fe(S)&&ct&&C.push($n)}S.on("error",$t),fe(S)&&ct&&C.push(()=>{S.removeListener("error",$t)})}if(0===J)if("function"==typeof S){if(dt=S({signal:Q}),!T(dt))throw new Y("Iterable, AsyncIterable or Stream","source",dt)}else dt=T(S)||z(S)||de(S)?S:k.from(S);else if("function"==typeof S){var Gt;if(dt=de(dt)?ze(null===(Gt=dt)||void 0===Gt?void 0:Gt.readable):ze(dt),dt=S(dt,{signal:Q}),se){if(!T(dt,!0))throw new Y("AsyncIterable",`transform[${J-1}]`,dt)}else{var on;Ye||(Ye=g(6973));const $t=new Ye({objectMode:!0}),sn=null===(on=dt)||void 0===on?void 0:on.then;if("function"==typeof sn)qe++,sn.call(dt,In=>{ue=In,null!=In&&$t.write(In),Ze&&$t.end(),_.nextTick(ft)},In=>{$t.destroy(In),_.nextTick(ft,In)});else if(T(dt,!0))qe++,Ke(dt,$t,ft,{end:Ze});else{if(!Ie(dt)&&!de(dt))throw new Y("AsyncIterable or Promise","destination",dt);qe++,Ke(dt.readable||dt,$t,ft,{end:Ze})}dt=$t;const{destroy:$n,cleanup:Xn}=Fe(dt,!1,!0);Ge.push($n),ct&&C.push(Xn)}}else if(Te(S)){if(z(dt)){qe+=2;const $t=ae(dt,S,ft,{end:Ze});fe(S)&&ct&&C.push($t)}else if(de(dt)||Ie(dt))qe++,Ke(dt.readable||dt,S,ft,{end:Ze});else{if(!T(dt))throw new ce("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],dt);qe++,Ke(dt,S,ft,{end:Ze})}dt=S}else if(we(S)){if(z(dt))qe++,Qe(ze(dt),S,ft,{end:Ze});else if(Ie(dt)||T(dt))qe++,Qe(dt,S,ft,{end:Ze});else{if(!de(dt))throw new ce("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],dt);qe++,Qe(dt.readable,S,ft,{end:Ze})}dt=S}else dt=k.from(S)}return(null!=Q&&Q.aborted||null!=W&&W.aborted)&&_.nextTick(O),dt}function ae(K,Le,Ve,{end:me}){let Q=!1;if(Le.on("close",()=>{Q||Ve(new $)}),K.pipe(Le,{end:!1}),me){let C=function(){Q=!0,Le.end()};De(K)?_.nextTick(C):K.once("end",C)}else Ve();return N(K,{readable:!0,writable:!1},C=>{const O=K._readableState;C&&"ERR_STREAM_PREMATURE_CLOSE"===C.code&&O&&O.ended&&!O.errored&&!O.errorEmitted?K.once("end",Ve).once("error",Ve):Ve(C)}),N(Le,{readable:!1,writable:!0},Ve)}ne.exports={pipelineImpl:I,pipeline:function B(...K){return I(K,j(function Pe(K){return v(K[K.length-1],"streams[stream.length - 1]"),K.pop()}(K)))}}},8383:(ne,Z,g)=>{var E=g(6737).default,b=g(8186).default;const R=g(42),{ArrayPrototypeIndexOf:A,NumberIsInteger:P,NumberIsNaN:_,NumberParseInt:y,ObjectDefineProperties:M,ObjectKeys:U,ObjectSetPrototypeOf:N,Promise:j,SafeSet:le,SymbolAsyncIterator:k,Symbol:X}=g(6305);ne.exports=Ke,Ke.ReadableState=Ce;const{EventEmitter:ce}=g(2016),{Stream:Y,prependListener:oe}=g(900),{Buffer:ie}=g(1657),{addAbortSignal:$}=g(9987),H=g(4618);let v=g(2656).debuglog("stream",S=>{v=S});const L=g(2960),T=g(5601),{getHighWaterMark:fe,getDefaultHighWaterMark:z}=g(8782),{aggregateTwoErrors:Te,codes:{ERR_INVALID_ARG_TYPE:de,ERR_METHOD_NOT_IMPLEMENTED:we,ERR_OUT_OF_RANGE:Ie,ERR_STREAM_PUSH_AFTER_EOF:De,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:tt}}=g(4370),{validateObject:Ye}=g(2120),Se=X("kPaused"),{StringDecoder:Fe}=g(2024),Pe=g(55);N(Ke.prototype,Y.prototype),N(Ke,Y);const ze=()=>{},{errorOrDestroy:ge}=T;function Ce(S,se,We){"boolean"!=typeof We&&(We=se instanceof g(5931)),this.objectMode=!(!S||!S.objectMode),We&&(this.objectMode=this.objectMode||!(!S||!S.readableObjectMode)),this.highWaterMark=S?fe(this,S,"readableHighWaterMark",We):z(!1),this.buffer=new L,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Se]=null,this.errorEmitted=!1,this.emitClose=!S||!1!==S.emitClose,this.autoDestroy=!S||!1!==S.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=S&&S.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,S&&S.encoding&&(this.decoder=new Fe(S.encoding),this.encoding=S.encoding)}function Ke(S){if(!(this instanceof Ke))return new Ke(S);const se=this instanceof g(5931);this._readableState=new Ce(S,this,se),S&&("function"==typeof S.read&&(this._read=S.read),"function"==typeof S.destroy&&(this._destroy=S.destroy),"function"==typeof S.construct&&(this._construct=S.construct),S.signal&&!se&&$(S.signal,this)),Y.call(this,S),T.construct(this,()=>{this._readableState.needReadable&&Ve(this,this._readableState)})}function st(S,se,We,Ze){v("readableAddChunk",se);const ct=S._readableState;let $t;if(ct.objectMode||("string"==typeof se?ct.encoding!==(We=We||ct.defaultEncoding)&&(Ze&&ct.encoding?se=ie.from(se,We).toString(ct.encoding):(se=ie.from(se,We),We="")):se instanceof ie?We="":Y._isUint8Array(se)?(se=Y._uint8ArrayToBuffer(se),We=""):null!=se&&($t=new de("chunk",["string","Buffer","Uint8Array"],se))),$t)ge(S,$t);else if(null===se)ct.reading=!1,function ae(S,se){if(v("onEofChunk"),!se.ended){if(se.decoder){const We=se.decoder.end();We&&We.length&&(se.buffer.push(We),se.length+=se.objectMode?1:We.length)}se.ended=!0,se.sync?K(S):(se.needReadable=!1,se.emittedReadable=!0,Le(S))}}(S,ct);else if(ct.objectMode||se&&se.length>0)if(Ze)if(ct.endEmitted)ge(S,new tt);else{if(ct.destroyed||ct.errored)return!1;Qe(S,ct,se,!0)}else if(ct.ended)ge(S,new De);else{if(ct.destroyed||ct.errored)return!1;ct.reading=!1,ct.decoder&&!We?(se=ct.decoder.write(se),ct.objectMode||0!==se.length?Qe(S,ct,se,!1):Ve(S,ct)):Qe(S,ct,se,!1)}else Ze||(ct.reading=!1,Ve(S,ct));return!ct.ended&&(ct.length<ct.highWaterMark||0===ct.length)}function Qe(S,se,We,Ze){se.flowing&&0===se.length&&!se.sync&&S.listenerCount("data")>0?(se.multiAwaitDrain?se.awaitDrainWriters.clear():se.awaitDrainWriters=null,se.dataEmitted=!0,S.emit("data",We)):(se.length+=se.objectMode?1:We.length,Ze?se.buffer.unshift(We):se.buffer.push(We),se.needReadable&&K(S)),Ve(S,se)}function I(S,se){return S<=0||0===se.length&&se.ended?0:se.objectMode?1:_(S)?se.flowing&&se.length?se.buffer.first().length:se.length:S<=se.length?S:se.ended?se.length:0}function K(S){const se=S._readableState;v("emitReadable",se.needReadable,se.emittedReadable),se.needReadable=!1,se.emittedReadable||(v("emitReadable",se.flowing),se.emittedReadable=!0,R.nextTick(Le,S))}function Le(S){const se=S._readableState;v("emitReadable_",se.destroyed,se.length,se.ended),!se.destroyed&&!se.errored&&(se.length||se.ended)&&(S.emit("readable"),se.emittedReadable=!1),se.needReadable=!se.flowing&&!se.ended&&se.length<=se.highWaterMark,ue(S)}function Ve(S,se){!se.readingMore&&se.constructed&&(se.readingMore=!0,R.nextTick(me,S,se))}function me(S,se){for(;!se.reading&&!se.ended&&(se.length<se.highWaterMark||se.flowing&&0===se.length);){const We=se.length;if(v("maybeReadMore read 0"),S.read(0),We===se.length)break}se.readingMore=!1}function W(S){const se=S._readableState;se.readableListening=S.listenerCount("readable")>0,se.resumeScheduled&&!1===se[Se]?se.flowing=!0:S.listenerCount("data")>0?S.resume():se.readableListening||(se.flowing=null)}function C(S){v("readable nexttick read 0"),S.read(0)}function he(S,se){v("resume",se.reading),se.reading||S.read(0),se.resumeScheduled=!1,S.emit("resume"),ue(S),se.flowing&&!se.reading&&S.read(0)}function ue(S){const se=S._readableState;for(v("flow",se.flowing);se.flowing&&null!==S.read(););}function Ge(S,se){"function"!=typeof S.read&&(S=Ke.wrap(S,{objectMode:!0}));const We=function qe(S,se){return ft.apply(this,arguments)}(S,se);return We.stream=S,We}function ft(){return(ft=b(function*(S,se){let ct,We=ze;function Ze(sn){this===S?(We(),We=ze):We=sn}S.on("readable",Ze);const $t=H(S,{writable:!1},sn=>{ct=sn?Te(ct,sn):null,We(),We=ze});try{for(;;){const sn=S.destroyed?null:S.read();if(null!==sn)yield sn;else{if(ct)throw ct;if(null===ct)return;yield E(new j(Ze))}}}catch(sn){throw ct=Te(ct,sn),ct}finally{!ct&&!1===se?.destroyOnReturn||void 0!==ct&&!S._readableState.autoDestroy?(S.off("readable",Ze),$t()):T.destroyer(S,null)}})).apply(this,arguments)}function Pt(S,se){if(0===se.length)return null;let We;return se.objectMode?We=se.buffer.shift():!S||S>=se.length?(We=se.decoder?se.buffer.join(""):1===se.buffer.length?se.buffer.first():se.buffer.concat(se.length),se.buffer.clear()):We=se.buffer.consume(S,se.decoder),We}function dt(S){const se=S._readableState;v("endReadable",se.endEmitted),se.endEmitted||(se.ended=!0,R.nextTick(Gt,se,S))}function Gt(S,se){if(v("endReadableNT",S.endEmitted,S.length),!S.errored&&!S.closeEmitted&&!S.endEmitted&&0===S.length)if(S.endEmitted=!0,se.emit("end"),se.writable&&!1===se.allowHalfOpen)R.nextTick(on,se);else if(S.autoDestroy){const We=se._writableState;(!We||We.autoDestroy&&(We.finished||!1===We.writable))&&se.destroy()}}function on(S){S.writable&&!S.writableEnded&&!S.destroyed&&S.end()}let Re;function J(){return void 0===Re&&(Re={}),Re}Ke.prototype.destroy=T.destroy,Ke.prototype._undestroy=T.undestroy,Ke.prototype._destroy=function(S,se){se(S)},Ke.prototype[ce.captureRejectionSymbol]=function(S){this.destroy(S)},Ke.prototype.push=function(S,se){return st(this,S,se,!1)},Ke.prototype.unshift=function(S,se){return st(this,S,se,!0)},Ke.prototype.isPaused=function(){const S=this._readableState;return!0===S[Se]||!1===S.flowing},Ke.prototype.setEncoding=function(S){const se=new Fe(S);this._readableState.decoder=se,this._readableState.encoding=this._readableState.decoder.encoding;const We=this._readableState.buffer;let Ze="";for(const ct of We)Ze+=se.write(ct);return We.clear(),""!==Ze&&We.push(Ze),this._readableState.length=Ze.length,this},Ke.prototype.read=function(S){v("read",S),void 0===S?S=NaN:P(S)||(S=y(S,10));const se=this._readableState,We=S;if(S>se.highWaterMark&&(se.highWaterMark=function B(S){if(S>1073741824)throw new Ie("size","<= 1GiB",S);return S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,++S}(S)),0!==S&&(se.emittedReadable=!1),0===S&&se.needReadable&&((0!==se.highWaterMark?se.length>=se.highWaterMark:se.length>0)||se.ended))return v("read: emitReadable",se.length,se.ended),0===se.length&&se.ended?dt(this):K(this),null;if(0===(S=I(S,se))&&se.ended)return 0===se.length&&dt(this),null;let ct,Ze=se.needReadable;if(v("need readable",Ze),(0===se.length||se.length-S<se.highWaterMark)&&(Ze=!0,v("length less than watermark",Ze)),se.ended||se.reading||se.destroyed||se.errored||!se.constructed)Ze=!1,v("reading, ended or constructing",Ze);else if(Ze){v("do read"),se.reading=!0,se.sync=!0,0===se.length&&(se.needReadable=!0);try{this._read(se.highWaterMark)}catch($t){ge(this,$t)}se.sync=!1,se.reading||(S=I(We,se))}return ct=S>0?Pt(S,se):null,null===ct?(se.needReadable=se.length<=se.highWaterMark,S=0):(se.length-=S,se.multiAwaitDrain?se.awaitDrainWriters.clear():se.awaitDrainWriters=null),0===se.length&&(se.ended||(se.needReadable=!0),We!==S&&se.ended&&dt(this)),null!==ct&&!se.errorEmitted&&!se.closeEmitted&&(se.dataEmitted=!0,this.emit("data",ct)),ct},Ke.prototype._read=function(S){throw new we("_read()")},Ke.prototype.pipe=function(S,se){const We=this,Ze=this._readableState;1===Ze.pipes.length&&(Ze.multiAwaitDrain||(Ze.multiAwaitDrain=!0,Ze.awaitDrainWriters=new le(Ze.awaitDrainWriters?[Ze.awaitDrainWriters]:[]))),Ze.pipes.push(S),v("pipe count=%d opts=%j",Ze.pipes.length,se);const $t=se&&!1===se.end||S===R.stdout||S===R.stderr?Ls:$n;function $n(){v("onend"),S.end()}Ze.endEmitted?R.nextTick($t):We.once("end",$t),S.on("unpipe",function sn(Ro,po){v("onunpipe"),Ro===We&&po&&!1===po.hasUnpiped&&(po.hasUnpiped=!0,function Io(){v("cleanup"),S.removeListener("close",Br),S.removeListener("finish",ms),Xn&&S.removeListener("drain",Xn),S.removeListener("error",qi),S.removeListener("unpipe",sn),We.removeListener("end",$n),We.removeListener("end",Ls),We.removeListener("data",Do),In=!0,Xn&&Ze.awaitDrainWriters&&(!S._writableState||S._writableState.needDrain)&&Xn()}())});let Xn,In=!1;function Lr(){In||(1===Ze.pipes.length&&Ze.pipes[0]===S?(v("false write response, pause",0),Ze.awaitDrainWriters=S,Ze.multiAwaitDrain=!1):Ze.pipes.length>1&&Ze.pipes.includes(S)&&(v("false write response, pause",Ze.awaitDrainWriters.size),Ze.awaitDrainWriters.add(S)),We.pause()),Xn||(Xn=function Q(S,se){return function(){const Ze=S._readableState;Ze.awaitDrainWriters===se?(v("pipeOnDrain",1),Ze.awaitDrainWriters=null):Ze.multiAwaitDrain&&(v("pipeOnDrain",Ze.awaitDrainWriters.size),Ze.awaitDrainWriters.delete(se)),(!Ze.awaitDrainWriters||0===Ze.awaitDrainWriters.size)&&S.listenerCount("data")&&S.resume()}}(We,S),S.on("drain",Xn))}function Do(Ro){v("ondata");const po=S.write(Ro);v("dest.write",po),!1===po&&Lr()}function qi(Ro){if(v("onerror",Ro),Ls(),S.removeListener("error",qi),0===S.listenerCount("error")){const po=S._writableState||S._readableState;po&&!po.errorEmitted?ge(S,Ro):S.emit("error",Ro)}}function Br(){S.removeListener("finish",ms),Ls()}function ms(){v("onfinish"),S.removeListener("close",Br),Ls()}function Ls(){v("unpipe"),We.unpipe(S)}return We.on("data",Do),oe(S,"error",qi),S.once("close",Br),S.once("finish",ms),S.emit("pipe",We),!0===S.writableNeedDrain?Ze.flowing&&Lr():Ze.flowing||(v("pipe resume"),We.resume()),S},Ke.prototype.unpipe=function(S){const se=this._readableState;if(0===se.pipes.length)return this;if(!S){const ct=se.pipes;se.pipes=[],this.pause();for(let $t=0;$t<ct.length;$t++)ct[$t].emit("unpipe",this,{hasUnpiped:!1});return this}const Ze=A(se.pipes,S);return-1===Ze||(se.pipes.splice(Ze,1),0===se.pipes.length&&this.pause(),S.emit("unpipe",this,{hasUnpiped:!1})),this},Ke.prototype.addListener=Ke.prototype.on=function(S,se){const We=Y.prototype.on.call(this,S,se),Ze=this._readableState;return"data"===S?(Ze.readableListening=this.listenerCount("readable")>0,!1!==Ze.flowing&&this.resume()):"readable"===S&&!Ze.endEmitted&&!Ze.readableListening&&(Ze.readableListening=Ze.needReadable=!0,Ze.flowing=!1,Ze.emittedReadable=!1,v("on readable",Ze.length,Ze.reading),Ze.length?K(this):Ze.reading||R.nextTick(C,this)),We},Ke.prototype.off=Ke.prototype.removeListener=function(S,se){const We=Y.prototype.removeListener.call(this,S,se);return"readable"===S&&R.nextTick(W,this),We},Ke.prototype.removeAllListeners=function(S){const se=Y.prototype.removeAllListeners.apply(this,arguments);return("readable"===S||void 0===S)&&R.nextTick(W,this),se},Ke.prototype.resume=function(){const S=this._readableState;return S.flowing||(v("resume"),S.flowing=!S.readableListening,function O(S,se){se.resumeScheduled||(se.resumeScheduled=!0,R.nextTick(he,S,se))}(this,S)),S[Se]=!1,this},Ke.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Se]=!0,this},Ke.prototype.wrap=function(S){let se=!1;S.on("data",Ze=>{!this.push(Ze)&&S.pause&&(se=!0,S.pause())}),S.on("end",()=>{this.push(null)}),S.on("error",Ze=>{ge(this,Ze)}),S.on("close",()=>{this.destroy()}),S.on("destroy",()=>{this.destroy()}),this._read=()=>{se&&S.resume&&(se=!1,S.resume())};const We=U(S);for(let Ze=1;Ze<We.length;Ze++){const ct=We[Ze];void 0===this[ct]&&"function"==typeof S[ct]&&(this[ct]=S[ct].bind(S))}return this},Ke.prototype[k]=function(){return Ge(this)},Ke.prototype.iterator=function(S){return void 0!==S&&Ye(S,"options"),Ge(this,S)},M(Ke.prototype,{readable:{__proto__:null,get(){const S=this._readableState;return!(!S||!1===S.readable||S.destroyed||S.errorEmitted||S.endEmitted)},set(S){this._readableState&&(this._readableState.readable=!!S)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(S){this._readableState&&(this._readableState.flowing=S)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(S){this._readableState&&(this._readableState.destroyed=S)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),M(Ce.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Se]},set(S){this[Se]=!!S}}}),Ke._fromList=Pt,Ke.from=function(S,se){return Pe(Ke,S,se)},Ke.fromWeb=function(S,se){return J().newStreamReadableFromReadableStream(S,se)},Ke.toWeb=function(S,se){return J().newReadableStreamFromStreamReadable(S,se)},Ke.wrap=function(S,se){var We,Ze;return new Ke({objectMode:null===(We=null!==(Ze=S.readableObjectMode)&&void 0!==Ze?Ze:S.objectMode)||void 0===We||We,...se,destroy(ct,$t){T.destroyer(S,ct),$t(ct)}}).wrap(S)}},8782:(ne,Z,g)=>{"use strict";const{MathFloor:E,NumberIsInteger:b}=g(6305),{ERR_INVALID_ARG_VALUE:R}=g(4370).codes;function P(y){return y?16:16384}ne.exports={getHighWaterMark:function _(y,M,U,N){const j=function A(y,M,U){return null!=y.highWaterMark?y.highWaterMark:M?y[U]:null}(M,N,U);if(null!=j){if(!b(j)||j<0)throw new R(N?`options.${U}`:"options.highWaterMark",j);return E(j)}return P(y.objectMode)},getDefaultHighWaterMark:P}},123:(ne,Z,g)=>{"use strict";const{ObjectSetPrototypeOf:E,Symbol:b}=g(6305);ne.exports=y;const{ERR_METHOD_NOT_IMPLEMENTED:R}=g(4370).codes,A=g(5931),{getHighWaterMark:P}=g(8782);E(y.prototype,A.prototype),E(y,A);const _=b("kCallback");function y(N){if(!(this instanceof y))return new y(N);const j=N?P(this,N,"readableHighWaterMark",!0):null;0===j&&(N={...N,highWaterMark:null,readableHighWaterMark:j,writableHighWaterMark:N.writableHighWaterMark||0}),A.call(this,N),this._readableState.sync=!1,this[_]=null,N&&("function"==typeof N.transform&&(this._transform=N.transform),"function"==typeof N.flush&&(this._flush=N.flush)),this.on("prefinish",U)}function M(N){"function"!=typeof this._flush||this.destroyed?(this.push(null),N&&N()):this._flush((j,le)=>{j?N?N(j):this.destroy(j):(null!=le&&this.push(le),this.push(null),N&&N())})}function U(){this._final!==M&&M.call(this)}y.prototype._final=M,y.prototype._transform=function(N,j,le){throw new R("_transform()")},y.prototype._write=function(N,j,le){const k=this._readableState,X=this._writableState,ce=k.length;this._transform(N,j,(Y,oe)=>{Y?le(Y):(null!=oe&&this.push(oe),X.ended||ce===k.length||k.length<k.highWaterMark?le():this[_]=le)})},y.prototype._read=function(){if(this[_]){const N=this[_];this[_]=null,N()}}},5428:(ne,Z,g)=>{"use strict";const{Symbol:E,SymbolAsyncIterator:b,SymbolIterator:R,SymbolFor:A}=g(6305),P=E("kDestroyed"),_=E("kIsErrored"),y=E("kIsReadable"),M=E("kIsDisturbed"),U=A("nodejs.webstream.isClosedPromise"),N=A("nodejs.webstream.controllerErrorFunction");function j(ge,Ce=!1){var Ke;return!(!ge||"function"!=typeof ge.pipe||"function"!=typeof ge.on||Ce&&("function"!=typeof ge.pause||"function"!=typeof ge.resume)||ge._writableState&&!1===(null===(Ke=ge._readableState)||void 0===Ke?void 0:Ke.readable)||ge._writableState&&!ge._readableState)}function le(ge){var Ce;return!(!ge||"function"!=typeof ge.write||"function"!=typeof ge.on||ge._readableState&&!1===(null===(Ce=ge._writableState)||void 0===Ce?void 0:Ce.writable))}function X(ge){return ge&&(ge._readableState||ge._writableState||"function"==typeof ge.write&&"function"==typeof ge.on||"function"==typeof ge.pipe&&"function"==typeof ge.on)}function ce(ge){return!(!ge||X(ge)||"function"!=typeof ge.pipeThrough||"function"!=typeof ge.getReader||"function"!=typeof ge.cancel)}function Y(ge){return!(!ge||X(ge)||"function"!=typeof ge.getWriter||"function"!=typeof ge.abort)}function oe(ge){return!(!ge||X(ge)||"object"!=typeof ge.readable||"object"!=typeof ge.writable)}function H(ge){if(!X(ge))return null;const st=ge._writableState||ge._readableState;return!!(ge.destroyed||ge[P]||null!=st&&st.destroyed)}function v(ge){if(!le(ge))return null;if(!0===ge.writableEnded)return!0;const Ce=ge._writableState;return(null==Ce||!Ce.errored)&&("boolean"!=typeof Ce?.ended?null:Ce.ended)}function fe(ge,Ce){if(!j(ge))return null;const Ke=ge._readableState;return(null==Ke||!Ke.errored)&&("boolean"!=typeof Ke?.endEmitted?null:!!(Ke.endEmitted||!1===Ce&&!0===Ke.ended&&0===Ke.length))}function z(ge){return ge&&null!=ge[y]?ge[y]:"boolean"!=typeof ge?.readable?null:!H(ge)&&j(ge)&&ge.readable&&!fe(ge)}function Te(ge){return"boolean"!=typeof ge?.writable?null:!H(ge)&&le(ge)&&ge.writable&&!v(ge)}function tt(ge){return"boolean"==typeof ge._closed&&"boolean"==typeof ge._defaultKeepAlive&&"boolean"==typeof ge._removedConnection&&"boolean"==typeof ge._removedContLen}function Ye(ge){return"boolean"==typeof ge._sent100&&tt(ge)}ne.exports={kDestroyed:P,isDisturbed:function Pe(ge){var Ce;return!(!ge||!(null!==(Ce=ge[M])&&void 0!==Ce?Ce:ge.readableDidRead||ge.readableAborted))},kIsDisturbed:M,isErrored:function ze(ge){var Ce,Ke,st,Qe,_e,B,I,ae,K,Le;return!(!ge||!(null!==(Ce=null!==(Ke=null!==(st=null!==(Qe=null!==(_e=null!==(B=ge[_])&&void 0!==B?B:ge.readableErrored)&&void 0!==_e?_e:ge.writableErrored)&&void 0!==Qe?Qe:null===(I=ge._readableState)||void 0===I?void 0:I.errorEmitted)&&void 0!==st?st:null===(ae=ge._writableState)||void 0===ae?void 0:ae.errorEmitted)&&void 0!==Ke?Ke:null===(K=ge._readableState)||void 0===K?void 0:K.errored)&&void 0!==Ce?Ce:null!==(Le=ge._writableState)&&void 0!==Le&&Le.errored))},kIsErrored:_,isReadable:z,kIsReadable:y,kIsClosedPromise:U,kControllerErrorFunction:N,isClosed:function De(ge){if(!X(ge))return null;if("boolean"==typeof ge.closed)return ge.closed;const Ce=ge._writableState,Ke=ge._readableState;return"boolean"==typeof Ce?.closed||"boolean"==typeof Ke?.closed?Ce?.closed||Ke?.closed:"boolean"==typeof ge._closed&&tt(ge)?ge._closed:null},isDestroyed:H,isDuplexNodeStream:function k(ge){return!(!ge||"function"!=typeof ge.pipe||!ge._readableState||"function"!=typeof ge.on||"function"!=typeof ge.write)},isFinished:function de(ge,Ce){return X(ge)?!!H(ge)||!(!1!==Ce?.readable&&z(ge)||!1!==Ce?.writable&&Te(ge)):null},isIterable:function $(ge,Ce){return null!=ge&&(!0===Ce?"function"==typeof ge[b]:!1===Ce?"function"==typeof ge[R]:"function"==typeof ge[b]||"function"==typeof ge[R])},isReadableNodeStream:j,isReadableStream:ce,isReadableEnded:function T(ge){if(!j(ge))return null;if(!0===ge.readableEnded)return!0;const Ce=ge._readableState;return!(!Ce||Ce.errored)&&("boolean"!=typeof Ce?.ended?null:Ce.ended)},isReadableFinished:fe,isReadableErrored:function Ie(ge){var Ce,Ke;return X(ge)?ge.readableErrored?ge.readableErrored:null!==(Ce=null===(Ke=ge._readableState)||void 0===Ke?void 0:Ke.errored)&&void 0!==Ce?Ce:null:null},isNodeStream:X,isWebStream:function ie(ge){return ce(ge)||Y(ge)||oe(ge)},isWritable:Te,isWritableNodeStream:le,isWritableStream:Y,isWritableEnded:v,isWritableFinished:function L(ge,Ce){if(!le(ge))return null;if(!0===ge.writableFinished)return!0;const Ke=ge._writableState;return(null==Ke||!Ke.errored)&&("boolean"!=typeof Ke?.finished?null:!!(Ke.finished||!1===Ce&&!0===Ke.ended&&0===Ke.length))},isWritableErrored:function we(ge){var Ce,Ke;return X(ge)?ge.writableErrored?ge.writableErrored:null!==(Ce=null===(Ke=ge._writableState)||void 0===Ke?void 0:Ke.errored)&&void 0!==Ce?Ce:null:null},isServerRequest:function Se(ge){var Ce;return"boolean"==typeof ge._consuming&&"boolean"==typeof ge._dumped&&void 0===(null===(Ce=ge.req)||void 0===Ce?void 0:Ce.upgradeOrConnect)},isServerResponse:Ye,willEmitClose:function Fe(ge){if(!X(ge))return null;const st=ge._writableState||ge._readableState;return!st&&Ye(ge)||!!(st&&st.autoDestroy&&st.emitClose&&!1===st.closed)},isTransformStream:oe}},9764:(ne,Z,g)=>{const E=g(42),{ArrayPrototypeSlice:b,Error:R,FunctionPrototypeSymbolHasInstance:A,ObjectDefineProperty:P,ObjectDefineProperties:_,ObjectSetPrototypeOf:y,StringPrototypeToLowerCase:M,Symbol:U,SymbolHasInstance:N}=g(6305);ne.exports=Ye,Ye.WritableState=De;const{EventEmitter:j}=g(2016),le=g(900).Stream,{Buffer:k}=g(1657),X=g(5601),{addAbortSignal:ce}=g(9987),{getHighWaterMark:Y,getDefaultHighWaterMark:oe}=g(8782),{ERR_INVALID_ARG_TYPE:ie,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_MULTIPLE_CALLBACK:H,ERR_STREAM_CANNOT_PIPE:v,ERR_STREAM_DESTROYED:L,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:fe,ERR_STREAM_WRITE_AFTER_END:z,ERR_UNKNOWN_ENCODING:Te}=g(4370).codes,{errorOrDestroy:de}=X;function we(){}y(Ye.prototype,le.prototype),y(Ye,le);const Ie=U("kOnFinished");function De(Q,W,C){"boolean"!=typeof C&&(C=W instanceof g(5931)),this.objectMode=!(!Q||!Q.objectMode),C&&(this.objectMode=this.objectMode||!(!Q||!Q.writableObjectMode)),this.highWaterMark=Q?Y(this,Q,"writableHighWaterMark",C):oe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(Q&&!1===Q.decodeStrings),this.defaultEncoding=Q&&Q.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=ge.bind(void 0,W),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,tt(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Q||!1!==Q.emitClose,this.autoDestroy=!Q||!1!==Q.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ie]=[]}function tt(Q){Q.buffered=[],Q.bufferedIndex=0,Q.allBuffers=!0,Q.allNoop=!0}function Ye(Q){const W=this instanceof g(5931);if(!W&&!A(Ye,this))return new Ye(Q);this._writableState=new De(Q,this,W),Q&&("function"==typeof Q.write&&(this._write=Q.write),"function"==typeof Q.writev&&(this._writev=Q.writev),"function"==typeof Q.destroy&&(this._destroy=Q.destroy),"function"==typeof Q.final&&(this._final=Q.final),"function"==typeof Q.construct&&(this._construct=Q.construct),Q.signal&&ce(Q.signal,this)),le.call(this,Q),X.construct(this,()=>{const C=this._writableState;C.writing||Qe(this,C),ae(this,C)})}function Se(Q,W,C,O){const he=Q._writableState;if("function"==typeof C)O=C,C=he.defaultEncoding;else{if(C){if("buffer"!==C&&!k.isEncoding(C))throw new Te(C)}else C=he.defaultEncoding;"function"!=typeof O&&(O=we)}if(null===W)throw new fe;if(!he.objectMode)if("string"==typeof W)!1!==he.decodeStrings&&(W=k.from(W,C),C="buffer");else if(W instanceof k)C="buffer";else{if(!le._isUint8Array(W))throw new ie("chunk",["string","Buffer","Uint8Array"],W);W=le._uint8ArrayToBuffer(W),C="buffer"}let ue;return he.ending?ue=new z:he.destroyed&&(ue=new L("write")),ue?(E.nextTick(O,ue),de(Q,ue,!0),ue):(he.pendingcb++,function Fe(Q,W,C,O,he){const ue=W.objectMode?1:C.length;W.length+=ue;const Ge=W.length<W.highWaterMark;return Ge||(W.needDrain=!0),W.writing||W.corked||W.errored||!W.constructed?(W.buffered.push({chunk:C,encoding:O,callback:he}),W.allBuffers&&"buffer"!==O&&(W.allBuffers=!1),W.allNoop&&he!==we&&(W.allNoop=!1)):(W.writelen=ue,W.writecb=he,W.writing=!0,W.sync=!0,Q._write(C,O,W.onwrite),W.sync=!1),Ge&&!W.errored&&!W.destroyed}(Q,he,W,C,O))}function Pe(Q,W,C,O,he,ue,Ge){W.writelen=O,W.writecb=Ge,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new L("write")):C?Q._writev(he,W.onwrite):Q._write(he,ue,W.onwrite),W.sync=!1}function ze(Q,W,C,O){--W.pendingcb,O(C),st(W),de(Q,C)}function ge(Q,W){const C=Q._writableState,O=C.sync,he=C.writecb;"function"==typeof he?(C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0,W?(C.errored||(C.errored=W),Q._readableState&&!Q._readableState.errored&&(Q._readableState.errored=W),O?E.nextTick(ze,Q,C,W,he):ze(Q,C,W,he)):(C.buffered.length>C.bufferedIndex&&Qe(Q,C),O?null!==C.afterWriteTickInfo&&C.afterWriteTickInfo.cb===he?C.afterWriteTickInfo.count++:(C.afterWriteTickInfo={count:1,cb:he,stream:Q,state:C},E.nextTick(Ce,C.afterWriteTickInfo)):Ke(Q,C,1,he))):de(Q,new H)}function Ce({stream:Q,state:W,count:C,cb:O}){return W.afterWriteTickInfo=null,Ke(Q,W,C,O)}function Ke(Q,W,C,O){for(!W.ending&&!Q.destroyed&&0===W.length&&W.needDrain&&(W.needDrain=!1,Q.emit("drain"));C-- >0;)W.pendingcb--,O();W.destroyed&&st(W),ae(Q,W)}function st(Q){if(Q.writing)return;for(let he=Q.bufferedIndex;he<Q.buffered.length;++he){var W;const{chunk:ue,callback:Ge}=Q.buffered[he];Q.length-=Q.objectMode?1:ue.length,Ge(null!==(W=Q.errored)&&void 0!==W?W:new L("write"))}const C=Q[Ie].splice(0);for(let he=0;he<C.length;he++){var O;C[he](null!==(O=Q.errored)&&void 0!==O?O:new L("end"))}tt(Q)}function Qe(Q,W){if(W.corked||W.bufferProcessing||W.destroyed||!W.constructed)return;const{buffered:C,bufferedIndex:O,objectMode:he}=W,ue=C.length-O;if(!ue)return;let Ge=O;if(W.bufferProcessing=!0,ue>1&&Q._writev){W.pendingcb-=ue-1;const qe=W.allNoop?we:Pt=>{for(let dt=Ge;dt<C.length;++dt)C[dt].callback(Pt)},ft=W.allNoop&&0===Ge?C:b(C,Ge);ft.allBuffers=W.allBuffers,Pe(Q,W,!0,W.length,ft,"",qe),tt(W)}else{do{const{chunk:qe,encoding:ft,callback:Pt}=C[Ge];C[Ge++]=null,Pe(Q,W,!1,he?1:qe.length,qe,ft,Pt)}while(Ge<C.length&&!W.writing);Ge===C.length?tt(W):Ge>256?(C.splice(0,Ge),W.bufferedIndex=0):W.bufferedIndex=Ge}W.bufferProcessing=!1}function _e(Q){return Q.ending&&!Q.destroyed&&Q.constructed&&0===Q.length&&!Q.errored&&0===Q.buffered.length&&!Q.finished&&!Q.writing&&!Q.errorEmitted&&!Q.closeEmitted}function ae(Q,W,C){_e(W)&&(function I(Q,W){!W.prefinished&&!W.finalCalled&&("function"!=typeof Q._final||W.destroyed?(W.prefinished=!0,Q.emit("prefinish")):(W.finalCalled=!0,function B(Q,W){let C=!1;function O(he){if(C)de(Q,he??H());else if(C=!0,W.pendingcb--,he){const ue=W[Ie].splice(0);for(let Ge=0;Ge<ue.length;Ge++)ue[Ge](he);de(Q,he,W.sync)}else _e(W)&&(W.prefinished=!0,Q.emit("prefinish"),W.pendingcb++,E.nextTick(K,Q,W))}W.sync=!0,W.pendingcb++;try{Q._final(O)}catch(he){O(he)}W.sync=!1}(Q,W)))}(Q,W),0===W.pendingcb&&(C?(W.pendingcb++,E.nextTick((O,he)=>{_e(he)?K(O,he):he.pendingcb--},Q,W)):_e(W)&&(W.pendingcb++,K(Q,W))))}function K(Q,W){W.pendingcb--,W.finished=!0;const C=W[Ie].splice(0);for(let O=0;O<C.length;O++)C[O]();if(Q.emit("finish"),W.autoDestroy){const O=Q._readableState;(!O||O.autoDestroy&&(O.endEmitted||!1===O.readable))&&Q.destroy()}}De.prototype.getBuffer=function(){return b(this.buffered,this.bufferedIndex)},P(De.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),P(Ye,N,{__proto__:null,value:function(Q){return!!A(this,Q)||this===Ye&&Q&&Q._writableState instanceof De}}),Ye.prototype.pipe=function(){de(this,new v)},Ye.prototype.write=function(Q,W,C){return!0===Se(this,Q,W,C)},Ye.prototype.cork=function(){this._writableState.corked++},Ye.prototype.uncork=function(){const Q=this._writableState;Q.corked&&(Q.corked--,Q.writing||Qe(this,Q))},Ye.prototype.setDefaultEncoding=function(W){if("string"==typeof W&&(W=M(W)),!k.isEncoding(W))throw new Te(W);return this._writableState.defaultEncoding=W,this},Ye.prototype._write=function(Q,W,C){if(!this._writev)throw new $("_write()");this._writev([{chunk:Q,encoding:W}],C)},Ye.prototype._writev=null,Ye.prototype.end=function(Q,W,C){const O=this._writableState;let he;if("function"==typeof Q?(C=Q,Q=null,W=null):"function"==typeof W&&(C=W,W=null),null!=Q){const ue=Se(this,Q,W);ue instanceof R&&(he=ue)}return O.corked&&(O.corked=1,this.uncork()),he||(O.errored||O.ending?O.finished?he=new T("end"):O.destroyed&&(he=new L("end")):(O.ending=!0,ae(this,O,!0),O.ended=!0)),"function"==typeof C&&(he||O.finished?E.nextTick(C,he):O[Ie].push(C)),this},_(Ye.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(Q){this._writableState&&(this._writableState.destroyed=Q)}},writable:{__proto__:null,get(){const Q=this._writableState;return!(!Q||!1===Q.writable||Q.destroyed||Q.errored||Q.ending||Q.ended)},set(Q){this._writableState&&(this._writableState.writable=!!Q)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const Q=this._writableState;return!!Q&&!Q.destroyed&&!Q.ending&&Q.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Le=X.destroy;let Ve;function me(){return void 0===Ve&&(Ve={}),Ve}Ye.prototype.destroy=function(Q,W){const C=this._writableState;return!C.destroyed&&(C.bufferedIndex<C.buffered.length||C[Ie].length)&&E.nextTick(st,C),Le.call(this,Q,W),this},Ye.prototype._undestroy=X.undestroy,Ye.prototype._destroy=function(Q,W){W(Q)},Ye.prototype[j.captureRejectionSymbol]=function(Q){this.destroy(Q)},Ye.fromWeb=function(Q,W){return me().newStreamWritableFromWritableStream(Q,W)},Ye.toWeb=function(Q){return me().newWritableStreamFromStreamWritable(Q)}},2120:(ne,Z,g)=>{"use strict";const{ArrayIsArray:E,ArrayPrototypeIncludes:b,ArrayPrototypeJoin:R,ArrayPrototypeMap:A,NumberIsInteger:P,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:y,NumberMIN_SAFE_INTEGER:M,NumberParseInt:U,ObjectPrototypeHasOwnProperty:N,RegExpPrototypeExec:j,String:le,StringPrototypeToUpperCase:k,StringPrototypeTrim:X}=g(6305),{hideStackFrames:ce,codes:{ERR_SOCKET_BAD_PORT:Y,ERR_INVALID_ARG_TYPE:oe,ERR_INVALID_ARG_VALUE:ie,ERR_OUT_OF_RANGE:$,ERR_UNKNOWN_SIGNAL:H}}=g(4370),{normalizeEncoding:v}=g(2656),{isAsyncFunction:L,isArrayBufferView:T}=g(2656).types,fe={},de=/^[0-7]+$/,De=ce((ue,Ge,qe=M,ft=y)=>{if("number"!=typeof ue)throw new oe(Ge,"number",ue);if(!P(ue))throw new $(Ge,"an integer",ue);if(ue<qe||ue>ft)throw new $(Ge,`>= ${qe} && <= ${ft}`,ue)}),tt=ce((ue,Ge,qe=-2147483648,ft=2147483647)=>{if("number"!=typeof ue)throw new oe(Ge,"number",ue);if(!P(ue))throw new $(Ge,"an integer",ue);if(ue<qe||ue>ft)throw new $(Ge,`>= ${qe} && <= ${ft}`,ue)}),Ye=ce((ue,Ge,qe=!1)=>{if("number"!=typeof ue)throw new oe(Ge,"number",ue);if(!P(ue))throw new $(Ge,"an integer",ue);const ft=qe?1:0,Pt=4294967295;if(ue<ft||ue>Pt)throw new $(Ge,`>= ${ft} && <= ${Pt}`,ue)});function Se(ue,Ge){if("string"!=typeof ue)throw new oe(Ge,"string",ue)}const Pe=ce((ue,Ge,qe)=>{if(!b(qe,ue)){const Pt="must be one of: "+R(A(qe,dt=>"string"==typeof dt?`'${dt}'`:le(dt)),", ");throw new ie(Ge,ue,Pt)}});function ze(ue,Ge){if("boolean"!=typeof ue)throw new oe(Ge,"boolean",ue)}function ge(ue,Ge,qe){return null!=ue&&N(ue,Ge)?ue[Ge]:qe}const Ce=ce((ue,Ge,qe=null)=>{const ft=ge(qe,"allowArray",!1),Pt=ge(qe,"allowFunction",!1);if(!ge(qe,"nullable",!1)&&null===ue||!ft&&E(ue)||"object"!=typeof ue&&(!Pt||"function"!=typeof ue))throw new oe(Ge,"Object",ue)}),Ke=ce((ue,Ge)=>{if(null!=ue&&"object"!=typeof ue&&"function"!=typeof ue)throw new oe(Ge,"a dictionary",ue)}),st=ce((ue,Ge,qe=0)=>{if(!E(ue))throw new oe(Ge,"Array",ue);if(ue.length<qe)throw new ie(Ge,ue,`must be longer than ${qe}`)}),I=ce((ue,Ge="buffer")=>{if(!T(ue))throw new oe(Ge,["Buffer","TypedArray","DataView"],ue)}),Le=ce((ue,Ge)=>{if(void 0!==ue&&(null===ue||"object"!=typeof ue||!("aborted"in ue)))throw new oe(Ge,"AbortSignal",ue)}),Ve=ce((ue,Ge)=>{if("function"!=typeof ue)throw new oe(Ge,"Function",ue)}),me=ce((ue,Ge)=>{if("function"!=typeof ue||L(ue))throw new oe(Ge,"Function",ue)}),Q=ce((ue,Ge)=>{if(void 0!==ue)throw new oe(Ge,"undefined",ue)}),C=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function O(ue,Ge){if(typeof ue>"u"||!j(C,ue))throw new ie(Ge,ue,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}ne.exports={isInt32:function z(ue){return ue===(0|ue)},isUint32:function Te(ue){return ue===ue>>>0},parseFileMode:function Ie(ue,Ge,qe){if(typeof ue>"u"&&(ue=qe),"string"==typeof ue){if(null===j(de,ue))throw new ie(Ge,ue,"must be a 32-bit unsigned integer or an octal string");ue=U(ue,8)}return Ye(ue,Ge),ue},validateArray:st,validateStringArray:function Qe(ue,Ge){st(ue,Ge);for(let qe=0;qe<ue.length;qe++)Se(ue[qe],`${Ge}[${qe}]`)},validateBooleanArray:function _e(ue,Ge){st(ue,Ge);for(let qe=0;qe<ue.length;qe++)ze(ue[qe],`${Ge}[${qe}]`)},validateBoolean:ze,validateBuffer:I,validateDictionary:Ke,validateEncoding:function ae(ue,Ge){const qe=v(Ge),ft=ue.length;if("hex"===qe&&ft%2!=0)throw new ie("encoding",Ge,`is invalid for data of length ${ft}`)},validateFunction:Ve,validateInt32:tt,validateInteger:De,validateNumber:function Fe(ue,Ge,qe=void 0,ft){if("number"!=typeof ue)throw new oe(Ge,"number",ue);if(null!=qe&&ue<qe||null!=ft&&ue>ft||(null!=qe||null!=ft)&&_(ue))throw new $(Ge,`${null!=qe?`>= ${qe}`:""}${null!=qe&&null!=ft?" && ":""}${null!=ft?`<= ${ft}`:""}`,ue)},validateObject:Ce,validateOneOf:Pe,validatePlainFunction:me,validatePort:function K(ue,Ge="Port",qe=!0){if("number"!=typeof ue&&"string"!=typeof ue||"string"==typeof ue&&0===X(ue).length||+ue!=+ue>>>0||ue>65535||0===ue&&!qe)throw new Y(Ge,ue,qe);return 0|ue},validateSignalName:function B(ue,Ge="signal"){if(Se(ue,Ge),void 0===fe[ue])throw void 0!==fe[k(ue)]?new H(ue+" (signals must use all capital letters)"):new H(ue)},validateString:Se,validateUint32:Ye,validateUndefined:Q,validateUnion:function W(ue,Ge,qe){if(!b(qe,ue))throw new oe(Ge,`('${R(qe,"|")}')`,ue)},validateAbortSignal:Le,validateLinkHeaderValue:function he(ue){if("string"==typeof ue)return O(ue,"hints"),ue;if(E(ue)){const Ge=ue.length;let qe="";if(0===Ge)return qe;for(let ft=0;ft<Ge;ft++){const Pt=ue[ft];O(Pt,"hints"),qe+=Pt,ft!==Ge-1&&(qe+=", ")}return qe}throw new ie("hints",ue,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(ne,Z,g)=>{"use strict";const E=g(8110),b=g(16),R=E.Readable.destroy;ne.exports=E.Readable,ne.exports._uint8ArrayToBuffer=E._uint8ArrayToBuffer,ne.exports._isUint8Array=E._isUint8Array,ne.exports.isDisturbed=E.isDisturbed,ne.exports.isErrored=E.isErrored,ne.exports.isReadable=E.isReadable,ne.exports.Readable=E.Readable,ne.exports.Writable=E.Writable,ne.exports.Duplex=E.Duplex,ne.exports.Transform=E.Transform,ne.exports.PassThrough=E.PassThrough,ne.exports.addAbortSignal=E.addAbortSignal,ne.exports.finished=E.finished,ne.exports.destroy=E.destroy,ne.exports.destroy=R,ne.exports.pipeline=E.pipeline,ne.exports.compose=E.compose,Object.defineProperty(E,"promises",{configurable:!0,enumerable:!0,get:()=>b}),ne.exports.Stream=E.Stream,ne.exports.default=ne.exports},4370:(ne,Z,g)=>{"use strict";const{format:E,inspect:b,AggregateError:R}=g(2656),A=globalThis.AggregateError||R,P=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],y=/^([A-Z][a-z0-9]*)+$/,U={};function N(oe,ie){if(!oe)throw new U.ERR_INTERNAL_ASSERTION(ie)}function j(oe){let ie="",$=oe.length;const H="-"===oe[0]?1:0;for(;$>=H+4;$-=3)ie=`_${oe.slice($-3,$)}${ie}`;return`${oe.slice(0,$)}${ie}`}function k(oe,ie,$){$||($=Error);class H extends ${constructor(...L){super(function le(oe,ie,$){if("function"==typeof ie)return N(ie.length<=$.length,`Code: ${oe}; The provided arguments length (${$.length}) does not match the required ones (${ie.length}).`),ie(...$);const H=(ie.match(/%[dfijoOs]/g)||[]).length;return N(H===$.length,`Code: ${oe}; The provided arguments length (${$.length}) does not match the required ones (${H}).`),0===$.length?ie:E(ie,...$)}(oe,ie,L))}toString(){return`${this.name} [${oe}]: ${this.message}`}}Object.defineProperties(H.prototype,{name:{value:$.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${oe}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),H.prototype.code=oe,H.prototype[P]=!0,U[oe]=H}function X(oe){return Object.defineProperty(oe,"name",{value:"__node_internal_"+oe.name}),oe}class Y extends Error{constructor(ie="The operation was aborted",$=void 0){if(void 0!==$&&"object"!=typeof $)throw new U.ERR_INVALID_ARG_TYPE("options","Object",$);super(ie,$),this.code="ABORT_ERR",this.name="AbortError"}}k("ERR_ASSERTION","%s",Error),k("ERR_INVALID_ARG_TYPE",(oe,ie,$)=>{N("string"==typeof oe,"'name' must be a string"),Array.isArray(ie)||(ie=[ie]);let H="The ";oe.endsWith(" argument")?H+=`${oe} `:H+=`"${oe}" ${oe.includes(".")?"property":"argument"} `,H+="must be ";const v=[],L=[],T=[];for(const z of ie)N("string"==typeof z,"All expected entries have to be of type string"),_.includes(z)?v.push(z.toLowerCase()):y.test(z)?L.push(z):(N("object"!==z,'The value "object" should be written as "Object"'),T.push(z));if(L.length>0){const z=v.indexOf("object");-1!==z&&(v.splice(v,z,1),L.push("Object"))}if(v.length>0){switch(v.length){case 1:H+=`of type ${v[0]}`;break;case 2:H+=`one of type ${v[0]} or ${v[1]}`;break;default:{const z=v.pop();H+=`one of type ${v.join(", ")}, or ${z}`}}(L.length>0||T.length>0)&&(H+=" or ")}if(L.length>0){switch(L.length){case 1:H+=`an instance of ${L[0]}`;break;case 2:H+=`an instance of ${L[0]} or ${L[1]}`;break;default:{const z=L.pop();H+=`an instance of ${L.join(", ")}, or ${z}`}}T.length>0&&(H+=" or ")}switch(T.length){case 0:break;case 1:T[0].toLowerCase()!==T[0]&&(H+="an "),H+=`${T[0]}`;break;case 2:H+=`one of ${T[0]} or ${T[1]}`;break;default:{const z=T.pop();H+=`one of ${T.join(", ")}, or ${z}`}}if(null==$)H+=`. Received ${$}`;else if("function"==typeof $&&$.name)H+=`. Received function ${$.name}`;else if("object"==typeof $){var fe;null!==(fe=$.constructor)&&void 0!==fe&&fe.name?H+=`. Received an instance of ${$.constructor.name}`:H+=`. Received ${b($,{depth:-1})}`}else{let z=b($,{colors:!1});z.length>25&&(z=`${z.slice(0,25)}...`),H+=`. Received type ${typeof $} (${z})`}return H},TypeError),k("ERR_INVALID_ARG_VALUE",(oe,ie,$="is invalid")=>{let H=b(ie);return H.length>128&&(H=H.slice(0,128)+"..."),`The ${oe.includes(".")?"property":"argument"} '${oe}' ${$}. Received ${H}`},TypeError),k("ERR_INVALID_RETURN_VALUE",(oe,ie,$)=>{var H;return`Expected ${oe} to be returned from the "${ie}" function but got ${null!=$&&null!==(H=$.constructor)&&void 0!==H&&H.name?`instance of ${$.constructor.name}`:"type "+typeof $}.`},TypeError),k("ERR_MISSING_ARGS",(...oe)=>{let ie;N(oe.length>0,"At least one arg needs to be specified");const $=oe.length;switch(oe=(Array.isArray(oe)?oe:[oe]).map(H=>`"${H}"`).join(" or "),$){case 1:ie+=`The ${oe[0]} argument`;break;case 2:ie+=`The ${oe[0]} and ${oe[1]} arguments`;break;default:{const H=oe.pop();ie+=`The ${oe.join(", ")}, and ${H} arguments`}}return`${ie} must be specified`},TypeError),k("ERR_OUT_OF_RANGE",(oe,ie,$)=>{let H;return N(ie,'Missing "range" argument'),Number.isInteger($)&&Math.abs($)>2**32?H=j(String($)):"bigint"==typeof $?(H=String($),($>2n**32n||$<-(2n**32n))&&(H=j(H)),H+="n"):H=b($),`The value of "${oe}" is out of range. It must be ${ie}. Received ${H}`},RangeError),k("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),k("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),k("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),k("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),k("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),k("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),k("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),k("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),k("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),k("ERR_STREAM_WRITE_AFTER_END","write after end",Error),k("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),ne.exports={AbortError:Y,aggregateTwoErrors:X(function ce(oe,ie){if(oe&&ie&&oe!==ie){if(Array.isArray(ie.errors))return ie.errors.push(oe),ie;const $=new A([ie,oe],ie.message);return $.code=ie.code,$}return oe||ie}),hideStackFrames:X,codes:U}},6305:ne=>{"use strict";ne.exports={ArrayIsArray:Z=>Array.isArray(Z),ArrayPrototypeIncludes:(Z,g)=>Z.includes(g),ArrayPrototypeIndexOf:(Z,g)=>Z.indexOf(g),ArrayPrototypeJoin:(Z,g)=>Z.join(g),ArrayPrototypeMap:(Z,g)=>Z.map(g),ArrayPrototypePop:(Z,g)=>Z.pop(g),ArrayPrototypePush:(Z,g)=>Z.push(g),ArrayPrototypeSlice:(Z,g,E)=>Z.slice(g,E),Error,FunctionPrototypeCall:(Z,g,...E)=>Z.call(g,...E),FunctionPrototypeSymbolHasInstance:(Z,g)=>Function.prototype[Symbol.hasInstance].call(Z,g),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(Z,g)=>Object.defineProperties(Z,g),ObjectDefineProperty:(Z,g,E)=>Object.defineProperty(Z,g,E),ObjectGetOwnPropertyDescriptor:(Z,g)=>Object.getOwnPropertyDescriptor(Z,g),ObjectKeys:Z=>Object.keys(Z),ObjectSetPrototypeOf:(Z,g)=>Object.setPrototypeOf(Z,g),Promise,PromisePrototypeCatch:(Z,g)=>Z.catch(g),PromisePrototypeThen:(Z,g,E)=>Z.then(g,E),PromiseReject:Z=>Promise.reject(Z),ReflectApply:Reflect.apply,RegExpPrototypeTest:(Z,g)=>Z.test(g),SafeSet:Set,String,StringPrototypeSlice:(Z,g,E)=>Z.slice(g,E),StringPrototypeToLowerCase:Z=>Z.toLowerCase(),StringPrototypeToUpperCase:Z=>Z.toUpperCase(),StringPrototypeTrim:Z=>Z.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(Z,g,E)=>Z.set(g,E),Uint8Array}},2656:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1657),R=Object.getPrototypeOf(E(function*(){})).constructor,A=globalThis.Blob||b.Blob,P=typeof A<"u"?function(M){return M instanceof A}:function(M){return!1};class _ extends Error{constructor(M){if(!Array.isArray(M))throw new TypeError("Expected input to be an Array, got "+typeof M);let U="";for(let N=0;N<M.length;N++)U+=`    ${M[N].stack}\n`;super(U),this.name="AggregateError",this.errors=M}}ne.exports={AggregateError:_,kEmptyObject:Object.freeze({}),once(y){let M=!1;return function(...U){M||(M=!0,y.apply(this,U))}},createDeferredPromise:function(){let y,M;return{promise:new Promise((N,j)=>{y=N,M=j}),resolve:y,reject:M}},promisify:y=>new Promise((M,U)=>{y((N,...j)=>N?U(N):M(...j))}),debuglog:()=>function(){},format:(y,...M)=>y.replace(/%([sdifj])/g,function(...[U,N]){const j=M.shift();return"f"===N?j.toFixed(6):"j"===N?JSON.stringify(j):"s"===N&&"object"==typeof j?`${j.constructor!==Object?j.constructor.name:""} {}`.trim():j.toString()}),inspect(y){switch(typeof y){case"string":if(y.includes("'")){if(!y.includes('"'))return`"${y}"`;if(!y.includes("`")&&!y.includes("${"))return`\`${y}\``}return`'${y}'`;case"number":return isNaN(y)?"NaN":Object.is(y,-0)?String(y):y;case"bigint":return`${String(y)}n`;case"boolean":case"undefined":return String(y);case"object":return"{}"}},types:{isAsyncFunction:y=>y instanceof R,isArrayBufferView:y=>ArrayBuffer.isView(y)},isBlob:P},ne.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(ne,Z,g)=>{const{Buffer:E}=g(1657),{ObjectDefineProperty:b,ObjectKeys:R,ReflectApply:A}=g(6305),{promisify:{custom:P}}=g(2656),{streamReturningOperators:_,promiseReturningOperators:y}=g(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:M}}=g(4370),U=g(7721),{pipeline:N}=g(4514),{destroyer:j}=g(5601),le=g(4618),X=g(16),ce=g(5428),Y=ne.exports=g(900).Stream;Y.isDisturbed=ce.isDisturbed,Y.isErrored=ce.isErrored,Y.isReadable=ce.isReadable,Y.Readable=g(8383);for(const $ of R(_)){let v=function(...L){if(new.target)throw M();return Y.Readable.from(A(H,this,L))};const H=_[$];b(v,"name",{__proto__:null,value:H.name}),b(v,"length",{__proto__:null,value:H.length}),b(Y.Readable.prototype,$,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(const $ of R(y)){let v=function(...T){if(new.target)throw M();return A(H,this,T)};const H=y[$];b(v,"name",{__proto__:null,value:H.name}),b(v,"length",{__proto__:null,value:H.length}),b(Y.Readable.prototype,$,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}Y.Writable=g(9764),Y.Duplex=g(5931),Y.Transform=g(123),Y.PassThrough=g(6973),Y.pipeline=N;const{addAbortSignal:oe}=g(9987);Y.addAbortSignal=oe,Y.finished=le,Y.destroy=j,Y.compose=U,b(Y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>X}),b(N,P,{__proto__:null,enumerable:!0,get:()=>X.pipeline}),b(le,P,{__proto__:null,enumerable:!0,get:()=>X.finished}),Y.Stream=Y,Y._isUint8Array=function(H){return H instanceof Uint8Array},Y._uint8ArrayToBuffer=function(H){return E.from(H.buffer,H.byteOffset,H.byteLength)}},16:(ne,Z,g)=>{"use strict";const{ArrayPrototypePop:E,Promise:b}=g(6305),{isIterable:R,isNodeStream:A,isWebStream:P}=g(5428),{pipelineImpl:_}=g(4514),{finished:y}=g(4618);g(8110),ne.exports={finished:y,pipeline:function M(...U){return new b((N,j)=>{let le,k;const X=U[U.length-1];if(X&&"object"==typeof X&&!A(X)&&!R(X)&&!P(X)){const ce=E(U);le=ce.signal,k=ce.end}_(U,(ce,Y)=>{ce?j(ce):N(Y)},{signal:le,end:k})})}}},1657:(ne,Z,g)=>{"use strict";const E=g(9919),b=g(2601),R="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Z.Buffer=y,Z.SlowBuffer=function ie(Re){return+Re!=Re&&(Re=0),y.alloc(+Re)},Z.INSPECT_MAX_BYTES=50;const A=2147483647;function _(Re){if(Re>A)throw new RangeError('The value "'+Re+'" is invalid for option "size"');const J=new Uint8Array(Re);return Object.setPrototypeOf(J,y.prototype),J}function y(Re,J,S){if("number"==typeof Re){if("string"==typeof J)throw new TypeError('The "string" argument must be of type string. Received type number');return j(Re)}return M(Re,J,S)}function M(Re,J,S){if("string"==typeof Re)return function le(Re,J){if(("string"!=typeof J||""===J)&&(J="utf8"),!y.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const S=0|$(Re,J);let se=_(S);const We=se.write(Re,J);return We!==S&&(se=se.slice(0,We)),se}(Re,J);if(ArrayBuffer.isView(Re))return function X(Re){if(ft(Re,Uint8Array)){const J=new Uint8Array(Re);return ce(J.buffer,J.byteOffset,J.byteLength)}return k(Re)}(Re);if(null==Re)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Re);if(ft(Re,ArrayBuffer)||Re&&ft(Re.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ft(Re,SharedArrayBuffer)||Re&&ft(Re.buffer,SharedArrayBuffer)))return ce(Re,J,S);if("number"==typeof Re)throw new TypeError('The "value" argument must not be of type number. Received type number');const se=Re.valueOf&&Re.valueOf();if(null!=se&&se!==Re)return y.from(se,J,S);const We=function Y(Re){if(y.isBuffer(Re)){const J=0|oe(Re.length),S=_(J);return 0===S.length||Re.copy(S,0,0,J),S}return void 0!==Re.length?"number"!=typeof Re.length||Pt(Re.length)?_(0):k(Re):"Buffer"===Re.type&&Array.isArray(Re.data)?k(Re.data):void 0}(Re);if(We)return We;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Re[Symbol.toPrimitive])return y.from(Re[Symbol.toPrimitive]("string"),J,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Re)}function U(Re){if("number"!=typeof Re)throw new TypeError('"size" argument must be of type number');if(Re<0)throw new RangeError('The value "'+Re+'" is invalid for option "size"')}function j(Re){return U(Re),_(Re<0?0:0|oe(Re))}function k(Re){const J=Re.length<0?0:0|oe(Re.length),S=_(J);for(let se=0;se<J;se+=1)S[se]=255&Re[se];return S}function ce(Re,J,S){if(J<0||Re.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(Re.byteLength<J+(S||0))throw new RangeError('"length" is outside of buffer bounds');let se;return se=void 0===J&&void 0===S?new Uint8Array(Re):void 0===S?new Uint8Array(Re,J):new Uint8Array(Re,J,S),Object.setPrototypeOf(se,y.prototype),se}function oe(Re){if(Re>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return 0|Re}function $(Re,J){if(y.isBuffer(Re))return Re.length;if(ArrayBuffer.isView(Re)||ft(Re,ArrayBuffer))return Re.byteLength;if("string"!=typeof Re)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Re);const S=Re.length,se=arguments.length>2&&!0===arguments[2];if(!se&&0===S)return 0;let We=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return O(Re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return Ge(Re).length;default:if(We)return se?-1:O(Re).length;J=(""+J).toLowerCase(),We=!0}}function H(Re,J,S){let se=!1;if((void 0===J||J<0)&&(J=0),J>this.length||((void 0===S||S>this.length)&&(S=this.length),S<=0)||(S>>>=0)<=(J>>>=0))return"";for(Re||(Re="utf8");;)switch(Re){case"hex":return Pe(this,J,S);case"utf8":case"utf-8":return De(this,J,S);case"ascii":return Se(this,J,S);case"latin1":case"binary":return Fe(this,J,S);case"base64":return Ie(this,J,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,J,S);default:if(se)throw new TypeError("Unknown encoding: "+Re);Re=(Re+"").toLowerCase(),se=!0}}function v(Re,J,S){const se=Re[J];Re[J]=Re[S],Re[S]=se}function L(Re,J,S,se,We){if(0===Re.length)return-1;if("string"==typeof S?(se=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),Pt(S=+S)&&(S=We?0:Re.length-1),S<0&&(S=Re.length+S),S>=Re.length){if(We)return-1;S=Re.length-1}else if(S<0){if(!We)return-1;S=0}if("string"==typeof J&&(J=y.from(J,se)),y.isBuffer(J))return 0===J.length?-1:T(Re,J,S,se,We);if("number"==typeof J)return J&=255,"function"==typeof Uint8Array.prototype.indexOf?We?Uint8Array.prototype.indexOf.call(Re,J,S):Uint8Array.prototype.lastIndexOf.call(Re,J,S):T(Re,[J],S,se,We);throw new TypeError("val must be string, number or Buffer")}function T(Re,J,S,se,We){let $n,Ze=1,ct=Re.length,$t=J.length;if(void 0!==se&&("ucs2"===(se=String(se).toLowerCase())||"ucs-2"===se||"utf16le"===se||"utf-16le"===se)){if(Re.length<2||J.length<2)return-1;Ze=2,ct/=2,$t/=2,S/=2}function sn(Xn,In){return 1===Ze?Xn[In]:Xn.readUInt16BE(In*Ze)}if(We){let Xn=-1;for($n=S;$n<ct;$n++)if(sn(Re,$n)===sn(J,-1===Xn?0:$n-Xn)){if(-1===Xn&&(Xn=$n),$n-Xn+1===$t)return Xn*Ze}else-1!==Xn&&($n-=$n-Xn),Xn=-1}else for(S+$t>ct&&(S=ct-$t),$n=S;$n>=0;$n--){let Xn=!0;for(let In=0;In<$t;In++)if(sn(Re,$n+In)!==sn(J,In)){Xn=!1;break}if(Xn)return $n}return-1}function fe(Re,J,S,se){S=Number(S)||0;const We=Re.length-S;se?(se=Number(se))>We&&(se=We):se=We;const Ze=J.length;let ct;for(se>Ze/2&&(se=Ze/2),ct=0;ct<se;++ct){const $t=parseInt(J.substr(2*ct,2),16);if(Pt($t))return ct;Re[S+ct]=$t}return ct}function z(Re,J,S,se){return qe(O(J,Re.length-S),Re,S,se)}function Te(Re,J,S,se){return qe(function he(Re){const J=[];for(let S=0;S<Re.length;++S)J.push(255&Re.charCodeAt(S));return J}(J),Re,S,se)}function de(Re,J,S,se){return qe(Ge(J),Re,S,se)}function we(Re,J,S,se){return qe(function ue(Re,J){let S,se,We;const Ze=[];for(let ct=0;ct<Re.length&&!((J-=2)<0);++ct)S=Re.charCodeAt(ct),se=S>>8,We=S%256,Ze.push(We),Ze.push(se);return Ze}(J,Re.length-S),Re,S,se)}function Ie(Re,J,S){return E.fromByteArray(0===J&&S===Re.length?Re:Re.slice(J,S))}function De(Re,J,S){S=Math.min(Re.length,S);const se=[];let We=J;for(;We<S;){const Ze=Re[We];let ct=null,$t=Ze>239?4:Ze>223?3:Ze>191?2:1;if(We+$t<=S){let sn,$n,Xn,In;switch($t){case 1:Ze<128&&(ct=Ze);break;case 2:sn=Re[We+1],128==(192&sn)&&(In=(31&Ze)<<6|63&sn,In>127&&(ct=In));break;case 3:sn=Re[We+1],$n=Re[We+2],128==(192&sn)&&128==(192&$n)&&(In=(15&Ze)<<12|(63&sn)<<6|63&$n,In>2047&&(In<55296||In>57343)&&(ct=In));break;case 4:sn=Re[We+1],$n=Re[We+2],Xn=Re[We+3],128==(192&sn)&&128==(192&$n)&&128==(192&Xn)&&(In=(15&Ze)<<18|(63&sn)<<12|(63&$n)<<6|63&Xn,In>65535&&In<1114112&&(ct=In))}}null===ct?(ct=65533,$t=1):ct>65535&&(ct-=65536,se.push(ct>>>10&1023|55296),ct=56320|1023&ct),se.push(ct),We+=$t}return function Ye(Re){const J=Re.length;if(J<=tt)return String.fromCharCode.apply(String,Re);let S="",se=0;for(;se<J;)S+=String.fromCharCode.apply(String,Re.slice(se,se+=tt));return S}(se)}Z.kMaxLength=A,!(y.TYPED_ARRAY_SUPPORT=function P(){try{const Re=new Uint8Array(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,Uint8Array.prototype),Object.setPrototypeOf(Re,J),42===Re.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),y.poolSize=8192,y.from=function(Re,J,S){return M(Re,J,S)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(Re,J,S){return function N(Re,J,S){return U(Re),Re<=0?_(Re):void 0!==J?"string"==typeof S?_(Re).fill(J,S):_(Re).fill(J):_(Re)}(Re,J,S)},y.allocUnsafe=function(Re){return j(Re)},y.allocUnsafeSlow=function(Re){return j(Re)},y.isBuffer=function(J){return null!=J&&!0===J._isBuffer&&J!==y.prototype},y.compare=function(J,S){if(ft(J,Uint8Array)&&(J=y.from(J,J.offset,J.byteLength)),ft(S,Uint8Array)&&(S=y.from(S,S.offset,S.byteLength)),!y.isBuffer(J)||!y.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===S)return 0;let se=J.length,We=S.length;for(let Ze=0,ct=Math.min(se,We);Ze<ct;++Ze)if(J[Ze]!==S[Ze]){se=J[Ze],We=S[Ze];break}return se<We?-1:We<se?1:0},y.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(J,S){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(0===J.length)return y.alloc(0);let se;if(void 0===S)for(S=0,se=0;se<J.length;++se)S+=J[se].length;const We=y.allocUnsafe(S);let Ze=0;for(se=0;se<J.length;++se){let ct=J[se];if(ft(ct,Uint8Array))Ze+ct.length>We.length?(y.isBuffer(ct)||(ct=y.from(ct)),ct.copy(We,Ze)):Uint8Array.prototype.set.call(We,ct,Ze);else{if(!y.isBuffer(ct))throw new TypeError('"list" argument must be an Array of Buffers');ct.copy(We,Ze)}Ze+=ct.length}return We},y.byteLength=$,y.prototype._isBuffer=!0,y.prototype.swap16=function(){const J=this.length;if(J%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<J;S+=2)v(this,S,S+1);return this},y.prototype.swap32=function(){const J=this.length;if(J%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<J;S+=4)v(this,S,S+3),v(this,S+1,S+2);return this},y.prototype.swap64=function(){const J=this.length;if(J%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<J;S+=8)v(this,S,S+7),v(this,S+1,S+6),v(this,S+2,S+5),v(this,S+3,S+4);return this},y.prototype.toLocaleString=y.prototype.toString=function(){const J=this.length;return 0===J?"":0===arguments.length?De(this,0,J):H.apply(this,arguments)},y.prototype.equals=function(J){if(!y.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J||0===y.compare(this,J)},y.prototype.inspect=function(){let J="";const S=Z.INSPECT_MAX_BYTES;return J=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(J+=" ... "),"<Buffer "+J+">"},R&&(y.prototype[R]=y.prototype.inspect),y.prototype.compare=function(J,S,se,We,Ze){if(ft(J,Uint8Array)&&(J=y.from(J,J.offset,J.byteLength)),!y.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(void 0===S&&(S=0),void 0===se&&(se=J?J.length:0),void 0===We&&(We=0),void 0===Ze&&(Ze=this.length),S<0||se>J.length||We<0||Ze>this.length)throw new RangeError("out of range index");if(We>=Ze&&S>=se)return 0;if(We>=Ze)return-1;if(S>=se)return 1;if(this===J)return 0;let ct=(Ze>>>=0)-(We>>>=0),$t=(se>>>=0)-(S>>>=0);const sn=Math.min(ct,$t),$n=this.slice(We,Ze),Xn=J.slice(S,se);for(let In=0;In<sn;++In)if($n[In]!==Xn[In]){ct=$n[In],$t=Xn[In];break}return ct<$t?-1:$t<ct?1:0},y.prototype.includes=function(J,S,se){return-1!==this.indexOf(J,S,se)},y.prototype.indexOf=function(J,S,se){return L(this,J,S,se,!0)},y.prototype.lastIndexOf=function(J,S,se){return L(this,J,S,se,!1)},y.prototype.write=function(J,S,se,We){if(void 0===S)We="utf8",se=this.length,S=0;else if(void 0===se&&"string"==typeof S)We=S,se=this.length,S=0;else{if(!isFinite(S))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");S>>>=0,isFinite(se)?(se>>>=0,void 0===We&&(We="utf8")):(We=se,se=void 0)}const Ze=this.length-S;if((void 0===se||se>Ze)&&(se=Ze),J.length>0&&(se<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let ct=!1;for(;;)switch(We){case"hex":return fe(this,J,S,se);case"utf8":case"utf-8":return z(this,J,S,se);case"ascii":case"latin1":case"binary":return Te(this,J,S,se);case"base64":return de(this,J,S,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,J,S,se);default:if(ct)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),ct=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const tt=4096;function Se(Re,J,S){let se="";S=Math.min(Re.length,S);for(let We=J;We<S;++We)se+=String.fromCharCode(127&Re[We]);return se}function Fe(Re,J,S){let se="";S=Math.min(Re.length,S);for(let We=J;We<S;++We)se+=String.fromCharCode(Re[We]);return se}function Pe(Re,J,S){const se=Re.length;(!J||J<0)&&(J=0),(!S||S<0||S>se)&&(S=se);let We="";for(let Ze=J;Ze<S;++Ze)We+=dt[Re[Ze]];return We}function ze(Re,J,S){const se=Re.slice(J,S);let We="";for(let Ze=0;Ze<se.length-1;Ze+=2)We+=String.fromCharCode(se[Ze]+256*se[Ze+1]);return We}function ge(Re,J,S){if(Re%1!=0||Re<0)throw new RangeError("offset is not uint");if(Re+J>S)throw new RangeError("Trying to access beyond buffer length")}function Ce(Re,J,S,se,We,Ze){if(!y.isBuffer(Re))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>We||J<Ze)throw new RangeError('"value" argument is out of bounds');if(S+se>Re.length)throw new RangeError("Index out of range")}function Ke(Re,J,S,se,We){Ve(J,se,We,Re,S,7);let Ze=Number(J&BigInt(4294967295));Re[S++]=Ze,Ze>>=8,Re[S++]=Ze,Ze>>=8,Re[S++]=Ze,Ze>>=8,Re[S++]=Ze;let ct=Number(J>>BigInt(32)&BigInt(4294967295));return Re[S++]=ct,ct>>=8,Re[S++]=ct,ct>>=8,Re[S++]=ct,ct>>=8,Re[S++]=ct,S}function st(Re,J,S,se,We){Ve(J,se,We,Re,S,7);let Ze=Number(J&BigInt(4294967295));Re[S+7]=Ze,Ze>>=8,Re[S+6]=Ze,Ze>>=8,Re[S+5]=Ze,Ze>>=8,Re[S+4]=Ze;let ct=Number(J>>BigInt(32)&BigInt(4294967295));return Re[S+3]=ct,ct>>=8,Re[S+2]=ct,ct>>=8,Re[S+1]=ct,ct>>=8,Re[S]=ct,S+8}function Qe(Re,J,S,se,We,Ze){if(S+se>Re.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function _e(Re,J,S,se,We){return J=+J,S>>>=0,We||Qe(Re,0,S,4),b.write(Re,J,S,se,23,4),S+4}function B(Re,J,S,se,We){return J=+J,S>>>=0,We||Qe(Re,0,S,8),b.write(Re,J,S,se,52,8),S+8}y.prototype.slice=function(J,S){const se=this.length;(J=~~J)<0?(J+=se)<0&&(J=0):J>se&&(J=se),(S=void 0===S?se:~~S)<0?(S+=se)<0&&(S=0):S>se&&(S=se),S<J&&(S=J);const We=this.subarray(J,S);return Object.setPrototypeOf(We,y.prototype),We},y.prototype.readUintLE=y.prototype.readUIntLE=function(J,S,se){J>>>=0,S>>>=0,se||ge(J,S,this.length);let We=this[J],Ze=1,ct=0;for(;++ct<S&&(Ze*=256);)We+=this[J+ct]*Ze;return We},y.prototype.readUintBE=y.prototype.readUIntBE=function(J,S,se){J>>>=0,S>>>=0,se||ge(J,S,this.length);let We=this[J+--S],Ze=1;for(;S>0&&(Ze*=256);)We+=this[J+--S]*Ze;return We},y.prototype.readUint8=y.prototype.readUInt8=function(J,S){return J>>>=0,S||ge(J,1,this.length),this[J]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(J,S){return J>>>=0,S||ge(J,2,this.length),this[J]|this[J+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(J,S){return J>>>=0,S||ge(J,2,this.length),this[J]<<8|this[J+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(J,S){return J>>>=0,S||ge(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+16777216*this[J+3]},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(J,S){return J>>>=0,S||ge(J,4,this.length),16777216*this[J]+(this[J+1]<<16|this[J+2]<<8|this[J+3])},y.prototype.readBigUInt64LE=Gt(function(J){me(J>>>=0,"offset");const S=this[J],se=this[J+7];(void 0===S||void 0===se)&&Q(J,this.length-8);const We=S+256*this[++J]+65536*this[++J]+this[++J]*2**24,Ze=this[++J]+256*this[++J]+65536*this[++J]+se*2**24;return BigInt(We)+(BigInt(Ze)<<BigInt(32))}),y.prototype.readBigUInt64BE=Gt(function(J){me(J>>>=0,"offset");const S=this[J],se=this[J+7];(void 0===S||void 0===se)&&Q(J,this.length-8);const We=S*2**24+65536*this[++J]+256*this[++J]+this[++J],Ze=this[++J]*2**24+65536*this[++J]+256*this[++J]+se;return(BigInt(We)<<BigInt(32))+BigInt(Ze)}),y.prototype.readIntLE=function(J,S,se){J>>>=0,S>>>=0,se||ge(J,S,this.length);let We=this[J],Ze=1,ct=0;for(;++ct<S&&(Ze*=256);)We+=this[J+ct]*Ze;return Ze*=128,We>=Ze&&(We-=Math.pow(2,8*S)),We},y.prototype.readIntBE=function(J,S,se){J>>>=0,S>>>=0,se||ge(J,S,this.length);let We=S,Ze=1,ct=this[J+--We];for(;We>0&&(Ze*=256);)ct+=this[J+--We]*Ze;return Ze*=128,ct>=Ze&&(ct-=Math.pow(2,8*S)),ct},y.prototype.readInt8=function(J,S){return J>>>=0,S||ge(J,1,this.length),128&this[J]?-1*(255-this[J]+1):this[J]},y.prototype.readInt16LE=function(J,S){J>>>=0,S||ge(J,2,this.length);const se=this[J]|this[J+1]<<8;return 32768&se?4294901760|se:se},y.prototype.readInt16BE=function(J,S){J>>>=0,S||ge(J,2,this.length);const se=this[J+1]|this[J]<<8;return 32768&se?4294901760|se:se},y.prototype.readInt32LE=function(J,S){return J>>>=0,S||ge(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},y.prototype.readInt32BE=function(J,S){return J>>>=0,S||ge(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},y.prototype.readBigInt64LE=Gt(function(J){me(J>>>=0,"offset");const S=this[J],se=this[J+7];return(void 0===S||void 0===se)&&Q(J,this.length-8),(BigInt(this[J+4]+256*this[J+5]+65536*this[J+6]+(se<<24))<<BigInt(32))+BigInt(S+256*this[++J]+65536*this[++J]+this[++J]*2**24)}),y.prototype.readBigInt64BE=Gt(function(J){me(J>>>=0,"offset");const S=this[J],se=this[J+7];(void 0===S||void 0===se)&&Q(J,this.length-8);const We=(S<<24)+65536*this[++J]+256*this[++J]+this[++J];return(BigInt(We)<<BigInt(32))+BigInt(this[++J]*2**24+65536*this[++J]+256*this[++J]+se)}),y.prototype.readFloatLE=function(J,S){return J>>>=0,S||ge(J,4,this.length),b.read(this,J,!0,23,4)},y.prototype.readFloatBE=function(J,S){return J>>>=0,S||ge(J,4,this.length),b.read(this,J,!1,23,4)},y.prototype.readDoubleLE=function(J,S){return J>>>=0,S||ge(J,8,this.length),b.read(this,J,!0,52,8)},y.prototype.readDoubleBE=function(J,S){return J>>>=0,S||ge(J,8,this.length),b.read(this,J,!1,52,8)},y.prototype.writeUintLE=y.prototype.writeUIntLE=function(J,S,se,We){J=+J,S>>>=0,se>>>=0,We||Ce(this,J,S,se,Math.pow(2,8*se)-1,0);let Ze=1,ct=0;for(this[S]=255&J;++ct<se&&(Ze*=256);)this[S+ct]=J/Ze&255;return S+se},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(J,S,se,We){J=+J,S>>>=0,se>>>=0,We||Ce(this,J,S,se,Math.pow(2,8*se)-1,0);let Ze=se-1,ct=1;for(this[S+Ze]=255&J;--Ze>=0&&(ct*=256);)this[S+Ze]=J/ct&255;return S+se},y.prototype.writeUint8=y.prototype.writeUInt8=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,1,255,0),this[S]=255&J,S+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,2,65535,0),this[S]=255&J,this[S+1]=J>>>8,S+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,2,65535,0),this[S]=J>>>8,this[S+1]=255&J,S+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,4,4294967295,0),this[S+3]=J>>>24,this[S+2]=J>>>16,this[S+1]=J>>>8,this[S]=255&J,S+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,4,4294967295,0),this[S]=J>>>24,this[S+1]=J>>>16,this[S+2]=J>>>8,this[S+3]=255&J,S+4},y.prototype.writeBigUInt64LE=Gt(function(J,S=0){return Ke(this,J,S,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=Gt(function(J,S=0){return st(this,J,S,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(J,S,se,We){if(J=+J,S>>>=0,!We){const sn=Math.pow(2,8*se-1);Ce(this,J,S,se,sn-1,-sn)}let Ze=0,ct=1,$t=0;for(this[S]=255&J;++Ze<se&&(ct*=256);)J<0&&0===$t&&0!==this[S+Ze-1]&&($t=1),this[S+Ze]=(J/ct>>0)-$t&255;return S+se},y.prototype.writeIntBE=function(J,S,se,We){if(J=+J,S>>>=0,!We){const sn=Math.pow(2,8*se-1);Ce(this,J,S,se,sn-1,-sn)}let Ze=se-1,ct=1,$t=0;for(this[S+Ze]=255&J;--Ze>=0&&(ct*=256);)J<0&&0===$t&&0!==this[S+Ze+1]&&($t=1),this[S+Ze]=(J/ct>>0)-$t&255;return S+se},y.prototype.writeInt8=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,1,127,-128),J<0&&(J=255+J+1),this[S]=255&J,S+1},y.prototype.writeInt16LE=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,2,32767,-32768),this[S]=255&J,this[S+1]=J>>>8,S+2},y.prototype.writeInt16BE=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,2,32767,-32768),this[S]=J>>>8,this[S+1]=255&J,S+2},y.prototype.writeInt32LE=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,4,2147483647,-2147483648),this[S]=255&J,this[S+1]=J>>>8,this[S+2]=J>>>16,this[S+3]=J>>>24,S+4},y.prototype.writeInt32BE=function(J,S,se){return J=+J,S>>>=0,se||Ce(this,J,S,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[S]=J>>>24,this[S+1]=J>>>16,this[S+2]=J>>>8,this[S+3]=255&J,S+4},y.prototype.writeBigInt64LE=Gt(function(J,S=0){return Ke(this,J,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=Gt(function(J,S=0){return st(this,J,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeFloatLE=function(J,S,se){return _e(this,J,S,!0,se)},y.prototype.writeFloatBE=function(J,S,se){return _e(this,J,S,!1,se)},y.prototype.writeDoubleLE=function(J,S,se){return B(this,J,S,!0,se)},y.prototype.writeDoubleBE=function(J,S,se){return B(this,J,S,!1,se)},y.prototype.copy=function(J,S,se,We){if(!y.isBuffer(J))throw new TypeError("argument should be a Buffer");if(se||(se=0),!We&&0!==We&&(We=this.length),S>=J.length&&(S=J.length),S||(S=0),We>0&&We<se&&(We=se),We===se||0===J.length||0===this.length)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(se<0||se>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),J.length-S<We-se&&(We=J.length-S+se);const Ze=We-se;return this===J&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(S,se,We):Uint8Array.prototype.set.call(J,this.subarray(se,We),S),Ze},y.prototype.fill=function(J,S,se,We){if("string"==typeof J){if("string"==typeof S?(We=S,S=0,se=this.length):"string"==typeof se&&(We=se,se=this.length),void 0!==We&&"string"!=typeof We)throw new TypeError("encoding must be a string");if("string"==typeof We&&!y.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(1===J.length){const ct=J.charCodeAt(0);("utf8"===We&&ct<128||"latin1"===We)&&(J=ct)}}else"number"==typeof J?J&=255:"boolean"==typeof J&&(J=Number(J));if(S<0||this.length<S||this.length<se)throw new RangeError("Out of range index");if(se<=S)return this;let Ze;if(S>>>=0,se=void 0===se?this.length:se>>>0,J||(J=0),"number"==typeof J)for(Ze=S;Ze<se;++Ze)this[Ze]=J;else{const ct=y.isBuffer(J)?J:y.from(J,We),$t=ct.length;if(0===$t)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(Ze=0;Ze<se-S;++Ze)this[Ze+S]=ct[Ze%$t]}return this};const I={};function ae(Re,J,S){I[Re]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Re}]`,delete this.name}get code(){return Re}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${Re}]: ${this.message}`}}}function K(Re){let J="",S=Re.length;const se="-"===Re[0]?1:0;for(;S>=se+4;S-=3)J=`_${Re.slice(S-3,S)}${J}`;return`${Re.slice(0,S)}${J}`}function Ve(Re,J,S,se,We,Ze){if(Re>S||Re<J){const ct="bigint"==typeof J?"n":"";let $t;throw $t=Ze>3?0===J||J===BigInt(0)?`>= 0${ct} and < 2${ct} ** ${8*(Ze+1)}${ct}`:`>= -(2${ct} ** ${8*(Ze+1)-1}${ct}) and < 2 ** ${8*(Ze+1)-1}${ct}`:`>= ${J}${ct} and <= ${S}${ct}`,new I.ERR_OUT_OF_RANGE("value",$t,Re)}!function Le(Re,J,S){me(J,"offset"),(void 0===Re[J]||void 0===Re[J+S])&&Q(J,Re.length-(S+1))}(se,We,Ze)}function me(Re,J){if("number"!=typeof Re)throw new I.ERR_INVALID_ARG_TYPE(J,"number",Re)}function Q(Re,J,S){throw Math.floor(Re)!==Re?(me(Re,S),new I.ERR_OUT_OF_RANGE(S||"offset","an integer",Re)):J<0?new I.ERR_BUFFER_OUT_OF_BOUNDS:new I.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${J}`,Re)}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(Re){return Re?`${Re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(Re,J){return`The "${Re}" argument must be of type number. Received type ${typeof J}`},TypeError),ae("ERR_OUT_OF_RANGE",function(Re,J,S){let se=`The value of "${Re}" is out of range.`,We=S;return Number.isInteger(S)&&Math.abs(S)>2**32?We=K(String(S)):"bigint"==typeof S&&(We=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(We=K(We)),We+="n"),se+=` It must be ${J}. Received ${We}`,se},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function O(Re,J){let S;J=J||1/0;const se=Re.length;let We=null;const Ze=[];for(let ct=0;ct<se;++ct){if(S=Re.charCodeAt(ct),S>55295&&S<57344){if(!We){if(S>56319){(J-=3)>-1&&Ze.push(239,191,189);continue}if(ct+1===se){(J-=3)>-1&&Ze.push(239,191,189);continue}We=S;continue}if(S<56320){(J-=3)>-1&&Ze.push(239,191,189),We=S;continue}S=65536+(We-55296<<10|S-56320)}else We&&(J-=3)>-1&&Ze.push(239,191,189);if(We=null,S<128){if((J-=1)<0)break;Ze.push(S)}else if(S<2048){if((J-=2)<0)break;Ze.push(S>>6|192,63&S|128)}else if(S<65536){if((J-=3)<0)break;Ze.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((J-=4)<0)break;Ze.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return Ze}function Ge(Re){return E.toByteArray(function C(Re){if((Re=(Re=Re.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;Re.length%4!=0;)Re+="=";return Re}(Re))}function qe(Re,J,S,se){let We;for(We=0;We<se&&!(We+S>=J.length||We>=Re.length);++We)J[We+S]=Re[We];return We}function ft(Re,J){return Re instanceof J||null!=Re&&null!=Re.constructor&&null!=Re.constructor.name&&Re.constructor.name===J.name}function Pt(Re){return Re!=Re}const dt=function(){const Re="0123456789abcdef",J=new Array(256);for(let S=0;S<16;++S){const se=16*S;for(let We=0;We<16;++We)J[se+We]=Re[S]+Re[We]}return J}();function Gt(Re){return typeof BigInt>"u"?on:Re}function on(){throw new Error("BigInt not supported")}},7054:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(R,A,P,_){void 0===_&&(_=P),Object.defineProperty(R,_,{enumerable:!0,get:function(){return A[P]}})}:function(R,A,P,_){void 0===_&&(_=P),R[_]=A[P]}),b=this&&this.__exportStar||function(R,A){for(var P in R)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,R,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(361),Z)},361:(ne,Z)=>{"use strict";function E(A){const P=[];let _=0;for(;_<A.length;)switch(A[_]){case"/":if("."===A[_+1])if("."===A[_+2]){if(!R(A[_+3])){P.push([]),_++;break}P.pop(),A[_+3]||P.push([]),_+=3}else{if(!R(A[_+2])){P.push([]),_++;break}A[_+2]||P.push([]),_+=2}else P.push([]),_++;break;case"#":case"?":P.length||P.push([]),P[P.length-1].push(A.substr(_)),_=A.length;break;default:P.length||P.push([]),P[P.length-1].push(A[_]),_++}return"/"+P.map(y=>y.join("")).join("/")}function b(A,P){let _=P+1;P>=0?"/"===A[P+1]&&"/"===A[P+2]&&(_=P+3):"/"===A[0]&&"/"===A[1]&&(_=2);const y=A.indexOf("/",_);return y<0?A:A.substr(0,y)+E(A.substr(y))}function R(A){return!A||"#"===A||"?"===A||"/"===A}Object.defineProperty(Z,"__esModule",{value:!0}),Z.removeDotSegmentsOfPath=Z.removeDotSegments=Z.resolve=void 0,Z.resolve=function g(A,P){const _=(P=P||"").indexOf("#");if(_>0&&(P=P.substr(0,_)),!A.length){if(P.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${P}' for value '${A}'`);return P}if(A.startsWith("?")){const k=P.indexOf("?");return k>0&&(P=P.substr(0,k)),P+A}if(A.startsWith("#"))return P+A;if(!P.length){const k=A.indexOf(":");if(k<0)throw new Error(`Found invalid relative IRI '${A}' for a missing baseIRI`);return b(A,k)}const y=A.indexOf(":");if(y>=0)return b(A,y);const M=P.indexOf(":");if(M<0)throw new Error(`Found invalid baseIRI '${P}' for value '${A}'`);const U=P.substr(0,M+1);if(0===A.indexOf("//"))return U+b(A,y);let N;if(P.indexOf("//",M)===M+1){if(N=P.indexOf("/",M+3),N<0)return P.length>M+3?P+"/"+b(A,y):U+b(A,y)}else if(N=P.indexOf("/",M+1),N<0)return U+b(A,y);if(0===A.indexOf("/"))return P.substr(0,N)+E(A);let j=P.substr(N);const le=j.lastIndexOf("/");return le>=0&&le<j.length-1&&(j=j.substr(0,le+1),"."===A[0]&&"."!==A[1]&&"/"!==A[1]&&A[2]&&(A=A.substr(1))),A=E(A=j+A),P.substr(0,N)+A},Z.removeDotSegments=E,Z.removeDotSegmentsOfPath=b},9528:(ne,Z,g)=>{!function(E){E.parser=function(B,I){return new R(B,I)},E.SAXParser=R,E.SAXStream=N,E.createStream=function U(B,I){return new N(B,I)},E.MAX_BUFFER_LENGTH=65536;var y,b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function R(B,I){if(!(this instanceof R))return new R(B,I);var ae=this;(function P(B){for(var I=0,ae=b.length;I<ae;I++)B[b[I]]=""})(ae),ae.q=ae.c="",ae.bufferCheckPosition=E.MAX_BUFFER_LENGTH,ae.opt=I||{},ae.opt.lowercase=ae.opt.lowercase||ae.opt.lowercasetags,ae.looseCase=ae.opt.lowercase?"toLowerCase":"toUpperCase",ae.tags=[],ae.closed=ae.closedRoot=ae.sawRoot=!1,ae.tag=ae.error=null,ae.strict=!!B,ae.noscript=!(!B&&!ae.opt.noscript),ae.state=z.BEGIN,ae.strictEntities=ae.opt.strictEntities,ae.ENTITIES=Object.create(ae.strictEntities?E.XML_ENTITIES:E.ENTITIES),ae.attribList=[],ae.opt.xmlns&&(ae.ns=Object.create(ce)),ae.trackPosition=!1!==ae.opt.position,ae.trackPosition&&(ae.position=ae.line=ae.column=0),de(ae,"onready")}E.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(B){function I(){}return I.prototype=B,new I}),Object.keys||(Object.keys=function(B){var I=[];for(var ae in B)B.hasOwnProperty(ae)&&I.push(ae);return I}),R.prototype={end:function(){Ye(this)},write:function _e(B){var I=this;if(this.error)throw this.error;if(I.closed)return tt(I,"Cannot write after close. Assign an onready handler.");if(null===B)return Ye(I);"object"==typeof B&&(B=B.toString());for(var ae=0,K="";K=Qe(B,ae++),I.c=K,K;)switch(I.trackPosition&&(I.position++,"\n"===K?(I.line++,I.column=0):I.column++),I.state){case z.BEGIN:if(I.state=z.BEGIN_WHITESPACE,"\ufeff"===K)continue;st(I,K);continue;case z.BEGIN_WHITESPACE:st(I,K);continue;case z.TEXT:if(I.sawRoot&&!I.closedRoot){for(var Le=ae-1;K&&"<"!==K&&"&"!==K;)(K=Qe(B,ae++))&&I.trackPosition&&(I.position++,"\n"===K?(I.line++,I.column=0):I.column++);I.textNode+=B.substring(Le,ae-1)}"<"!==K||I.sawRoot&&I.closedRoot&&!I.strict?(!H(K)&&(!I.sawRoot||I.closedRoot)&&Se(I,"Text data outside of root node."),"&"===K?I.state=z.TEXT_ENTITY:I.textNode+=K):(I.state=z.OPEN_WAKA,I.startTagPosition=I.position);continue;case z.SCRIPT:"<"===K?I.state=z.SCRIPT_ENDING:I.script+=K;continue;case z.SCRIPT_ENDING:"/"===K?I.state=z.CLOSE_TAG:(I.script+="<"+K,I.state=z.SCRIPT);continue;case z.OPEN_WAKA:"!"===K?(I.state=z.SGML_DECL,I.sgmlDecl=""):H(K)||(T(Y,K)?(I.state=z.OPEN_TAG,I.tagName=K):"/"===K?(I.state=z.CLOSE_TAG,I.tagName=""):"?"===K?(I.state=z.PROC_INST,I.procInstName=I.procInstBody=""):(Se(I,"Unencoded <"),I.startTagPosition+1<I.position&&(K=new Array(I.position-I.startTagPosition).join(" ")+K),I.textNode+="<"+K,I.state=z.TEXT));continue;case z.SGML_DECL:(I.sgmlDecl+K).toUpperCase()===j?(we(I,"onopencdata"),I.state=z.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+K==="--"?(I.state=z.COMMENT,I.comment="",I.sgmlDecl=""):(I.sgmlDecl+K).toUpperCase()===le?(I.state=z.DOCTYPE,(I.doctype||I.sawRoot)&&Se(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):">"===K?(we(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=z.TEXT):(v(K)&&(I.state=z.SGML_DECL_QUOTED),I.sgmlDecl+=K);continue;case z.SGML_DECL_QUOTED:K===I.q&&(I.state=z.SGML_DECL,I.q=""),I.sgmlDecl+=K;continue;case z.DOCTYPE:">"===K?(I.state=z.TEXT,we(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=K,"["===K?I.state=z.DOCTYPE_DTD:v(K)&&(I.state=z.DOCTYPE_QUOTED,I.q=K));continue;case z.DOCTYPE_QUOTED:I.doctype+=K,K===I.q&&(I.q="",I.state=z.DOCTYPE);continue;case z.DOCTYPE_DTD:I.doctype+=K,"]"===K?I.state=z.DOCTYPE:v(K)&&(I.state=z.DOCTYPE_DTD_QUOTED,I.q=K);continue;case z.DOCTYPE_DTD_QUOTED:I.doctype+=K,K===I.q&&(I.state=z.DOCTYPE_DTD,I.q="");continue;case z.COMMENT:"-"===K?I.state=z.COMMENT_ENDING:I.comment+=K;continue;case z.COMMENT_ENDING:"-"===K?(I.state=z.COMMENT_ENDED,I.comment=De(I.opt,I.comment),I.comment&&we(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+K,I.state=z.COMMENT);continue;case z.COMMENT_ENDED:">"!==K?(Se(I,"Malformed comment"),I.comment+="--"+K,I.state=z.COMMENT):I.state=z.TEXT;continue;case z.CDATA:"]"===K?I.state=z.CDATA_ENDING:I.cdata+=K;continue;case z.CDATA_ENDING:"]"===K?I.state=z.CDATA_ENDING_2:(I.cdata+="]"+K,I.state=z.CDATA);continue;case z.CDATA_ENDING_2:">"===K?(I.cdata&&we(I,"oncdata",I.cdata),we(I,"onclosecdata"),I.cdata="",I.state=z.TEXT):"]"===K?I.cdata+="]":(I.cdata+="]]"+K,I.state=z.CDATA);continue;case z.PROC_INST:"?"===K?I.state=z.PROC_INST_ENDING:H(K)?I.state=z.PROC_INST_BODY:I.procInstName+=K;continue;case z.PROC_INST_BODY:if(!I.procInstBody&&H(K))continue;"?"===K?I.state=z.PROC_INST_ENDING:I.procInstBody+=K;continue;case z.PROC_INST_ENDING:">"===K?(we(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=z.TEXT):(I.procInstBody+="?"+K,I.state=z.PROC_INST_BODY);continue;case z.OPEN_TAG:T(oe,K)?I.tagName+=K:(Fe(I),">"===K?ge(I):"/"===K?I.state=z.OPEN_TAG_SLASH:(H(K)||Se(I,"Invalid character in tag name"),I.state=z.ATTRIB));continue;case z.OPEN_TAG_SLASH:">"===K?(ge(I,!0),Ce(I)):(Se(I,"Forward-slash in opening tag not followed by >"),I.state=z.ATTRIB);continue;case z.ATTRIB:if(H(K))continue;">"===K?ge(I):"/"===K?I.state=z.OPEN_TAG_SLASH:T(Y,K)?(I.attribName=K,I.attribValue="",I.state=z.ATTRIB_NAME):Se(I,"Invalid attribute name");continue;case z.ATTRIB_NAME:"="===K?I.state=z.ATTRIB_VALUE:">"===K?(Se(I,"Attribute without value"),I.attribValue=I.attribName,ze(I),ge(I)):H(K)?I.state=z.ATTRIB_NAME_SAW_WHITE:T(oe,K)?I.attribName+=K:Se(I,"Invalid attribute name");continue;case z.ATTRIB_NAME_SAW_WHITE:if("="===K)I.state=z.ATTRIB_VALUE;else{if(H(K))continue;Se(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",we(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",">"===K?ge(I):T(Y,K)?(I.attribName=K,I.state=z.ATTRIB_NAME):(Se(I,"Invalid attribute name"),I.state=z.ATTRIB)}continue;case z.ATTRIB_VALUE:if(H(K))continue;v(K)?(I.q=K,I.state=z.ATTRIB_VALUE_QUOTED):(Se(I,"Unquoted attribute value"),I.state=z.ATTRIB_VALUE_UNQUOTED,I.attribValue=K);continue;case z.ATTRIB_VALUE_QUOTED:if(K!==I.q){"&"===K?I.state=z.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=K;continue}ze(I),I.q="",I.state=z.ATTRIB_VALUE_CLOSED;continue;case z.ATTRIB_VALUE_CLOSED:H(K)?I.state=z.ATTRIB:">"===K?ge(I):"/"===K?I.state=z.OPEN_TAG_SLASH:T(Y,K)?(Se(I,"No whitespace between attributes"),I.attribName=K,I.attribValue="",I.state=z.ATTRIB_NAME):Se(I,"Invalid attribute name");continue;case z.ATTRIB_VALUE_UNQUOTED:if(!L(K)){"&"===K?I.state=z.ATTRIB_VALUE_ENTITY_U:I.attribValue+=K;continue}ze(I),">"===K?ge(I):I.state=z.ATTRIB;continue;case z.CLOSE_TAG:if(I.tagName)">"===K?Ce(I):T(oe,K)?I.tagName+=K:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=z.SCRIPT):(H(K)||Se(I,"Invalid tagname in closing tag"),I.state=z.CLOSE_TAG_SAW_WHITE);else{if(H(K))continue;fe(Y,K)?I.script?(I.script+="</"+K,I.state=z.SCRIPT):Se(I,"Invalid tagname in closing tag."):I.tagName=K}continue;case z.CLOSE_TAG_SAW_WHITE:if(H(K))continue;">"===K?Ce(I):Se(I,"Invalid characters in closing tag");continue;case z.TEXT_ENTITY:case z.ATTRIB_VALUE_ENTITY_Q:case z.ATTRIB_VALUE_ENTITY_U:var me,Q;switch(I.state){case z.TEXT_ENTITY:me=z.TEXT,Q="textNode";break;case z.ATTRIB_VALUE_ENTITY_Q:me=z.ATTRIB_VALUE_QUOTED,Q="attribValue";break;case z.ATTRIB_VALUE_ENTITY_U:me=z.ATTRIB_VALUE_UNQUOTED,Q="attribValue"}";"===K?(I[Q]+=Ke(I),I.entity="",I.state=me):T(I.entity.length?$:ie,K)?I.entity+=K:(Se(I,"Invalid character in entity name"),I[Q]+="&"+I.entity+K,I.entity="",I.state=me);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&function A(B){for(var I=Math.max(E.MAX_BUFFER_LENGTH,10),ae=0,K=0,Le=b.length;K<Le;K++){var Ve=B[b[K]].length;if(Ve>I)switch(b[K]){case"textNode":Ie(B);break;case"cdata":we(B,"oncdata",B.cdata),B.cdata="";break;case"script":we(B,"onscript",B.script),B.script="";break;default:tt(B,"Max buffer length exceeded: "+b[K])}ae=Math.max(ae,Ve)}B.bufferCheckPosition=E.MAX_BUFFER_LENGTH-ae+B.position}(I),I},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(B){Ie(B),""!==B.cdata&&(we(B,"oncdata",B.cdata),B.cdata=""),""!==B.script&&(we(B,"onscript",B.script),B.script="")}(this)}};try{y=g(1793).Stream}catch{y=function(){}}var M=E.EVENTS.filter(function(B){return"error"!==B&&"end"!==B});function N(B,I){if(!(this instanceof N))return new N(B,I);y.apply(this),this._parser=new R(B,I),this.writable=!0,this.readable=!0;var ae=this;this._parser.onend=function(){ae.emit("end")},this._parser.onerror=function(K){ae.emit("error",K),ae._parser.error=null},this._decoder=null,M.forEach(function(K){Object.defineProperty(ae,"on"+K,{get:function(){return ae._parser["on"+K]},set:function(Le){if(!Le)return ae.removeAllListeners(K),ae._parser["on"+K]=Le,Le;ae.on(K,Le)},enumerable:!0,configurable:!1})})}(N.prototype=Object.create(y.prototype,{constructor:{value:N}})).write=function(B){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(B)){if(!this._decoder){var I=g(2024).StringDecoder;this._decoder=new I("utf8")}B=this._decoder.write(B)}return this._parser.write(B.toString()),this.emit("data",B),!0},N.prototype.end=function(B){return B&&B.length&&this.write(B),this._parser.end(),!0},N.prototype.on=function(B,I){var ae=this;return!ae._parser["on"+B]&&-1!==M.indexOf(B)&&(ae._parser["on"+B]=function(){var K=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,B),ae.emit.apply(ae,K)}),y.prototype.on.call(ae,B,I)};var j="[CDATA[",le="DOCTYPE",k="http://www.w3.org/XML/1998/namespace",X="http://www.w3.org/2000/xmlns/",ce={xml:k,xmlns:X},Y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ie=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function H(B){return" "===B||"\n"===B||"\r"===B||"\t"===B}function v(B){return'"'===B||"'"===B}function L(B){return">"===B||H(B)}function T(B,I){return B.test(I)}function fe(B,I){return!T(B,I)}var B,I,ae,z=0;for(var Te in E.STATE={BEGIN:z++,BEGIN_WHITESPACE:z++,TEXT:z++,TEXT_ENTITY:z++,OPEN_WAKA:z++,SGML_DECL:z++,SGML_DECL_QUOTED:z++,DOCTYPE:z++,DOCTYPE_QUOTED:z++,DOCTYPE_DTD:z++,DOCTYPE_DTD_QUOTED:z++,COMMENT_STARTING:z++,COMMENT:z++,COMMENT_ENDING:z++,COMMENT_ENDED:z++,CDATA:z++,CDATA_ENDING:z++,CDATA_ENDING_2:z++,PROC_INST:z++,PROC_INST_BODY:z++,PROC_INST_ENDING:z++,OPEN_TAG:z++,OPEN_TAG_SLASH:z++,ATTRIB:z++,ATTRIB_NAME:z++,ATTRIB_NAME_SAW_WHITE:z++,ATTRIB_VALUE:z++,ATTRIB_VALUE_QUOTED:z++,ATTRIB_VALUE_CLOSED:z++,ATTRIB_VALUE_UNQUOTED:z++,ATTRIB_VALUE_ENTITY_Q:z++,ATTRIB_VALUE_ENTITY_U:z++,CLOSE_TAG:z++,CLOSE_TAG_SAW_WHITE:z++,SCRIPT:z++,SCRIPT_ENDING:z++},E.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},E.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(E.ENTITIES).forEach(function(B){var I=E.ENTITIES[B],ae="number"==typeof I?String.fromCharCode(I):I;E.ENTITIES[B]=ae}),E.STATE)E.STATE[E.STATE[Te]]=Te;function de(B,I,ae){B[I]&&B[I](ae)}function we(B,I,ae){B.textNode&&Ie(B),de(B,I,ae)}function Ie(B){B.textNode=De(B.opt,B.textNode),B.textNode&&de(B,"ontext",B.textNode),B.textNode=""}function De(B,I){return B.trim&&(I=I.trim()),B.normalize&&(I=I.replace(/\s+/g," ")),I}function tt(B,I){return Ie(B),B.trackPosition&&(I+="\nLine: "+B.line+"\nColumn: "+B.column+"\nChar: "+B.c),I=new Error(I),B.error=I,de(B,"onerror",I),B}function Ye(B){return B.sawRoot&&!B.closedRoot&&Se(B,"Unclosed root tag"),B.state!==z.BEGIN&&B.state!==z.BEGIN_WHITESPACE&&B.state!==z.TEXT&&tt(B,"Unexpected end"),Ie(B),B.c="",B.closed=!0,de(B,"onend"),R.call(B,B.strict,B.opt),B}function Se(B,I){if("object"!=typeof B||!(B instanceof R))throw new Error("bad call to strictFail");B.strict&&tt(B,I)}function Fe(B){B.strict||(B.tagName=B.tagName[B.looseCase]());var I=B.tags[B.tags.length-1]||B,ae=B.tag={name:B.tagName,attributes:{}};B.opt.xmlns&&(ae.ns=I.ns),B.attribList.length=0,we(B,"onopentagstart",ae)}function Pe(B,I){var K=B.indexOf(":")<0?["",B]:B.split(":"),Le=K[0],Ve=K[1];return I&&"xmlns"===B&&(Le="xmlns",Ve=""),{prefix:Le,local:Ve}}function ze(B){if(B.strict||(B.attribName=B.attribName[B.looseCase]()),-1!==B.attribList.indexOf(B.attribName)||B.tag.attributes.hasOwnProperty(B.attribName))B.attribName=B.attribValue="";else{if(B.opt.xmlns){var I=Pe(B.attribName,!0),K=I.local;if("xmlns"===I.prefix)if("xml"===K&&B.attribValue!==k)Se(B,"xml: prefix must be bound to "+k+"\nActual: "+B.attribValue);else if("xmlns"===K&&B.attribValue!==X)Se(B,"xmlns: prefix must be bound to "+X+"\nActual: "+B.attribValue);else{var Le=B.tag,Ve=B.tags[B.tags.length-1]||B;Le.ns===Ve.ns&&(Le.ns=Object.create(Ve.ns)),Le.ns[K]=B.attribValue}B.attribList.push([B.attribName,B.attribValue])}else B.tag.attributes[B.attribName]=B.attribValue,we(B,"onattribute",{name:B.attribName,value:B.attribValue});B.attribName=B.attribValue=""}}function ge(B,I){if(B.opt.xmlns){var ae=B.tag,K=Pe(B.tagName);ae.prefix=K.prefix,ae.local=K.local,ae.uri=ae.ns[K.prefix]||"",ae.prefix&&!ae.uri&&(Se(B,"Unbound namespace prefix: "+JSON.stringify(B.tagName)),ae.uri=K.prefix),ae.ns&&(B.tags[B.tags.length-1]||B).ns!==ae.ns&&Object.keys(ae.ns).forEach(function(ft){we(B,"onopennamespace",{prefix:ft,uri:ae.ns[ft]})});for(var Ve=0,me=B.attribList.length;Ve<me;Ve++){var Q=B.attribList[Ve],W=Q[0],C=Q[1],O=Pe(W,!0),he=O.prefix,Ge=""===he?"":ae.ns[he]||"",qe={name:W,value:C,prefix:he,local:O.local,uri:Ge};he&&"xmlns"!==he&&!Ge&&(Se(B,"Unbound namespace prefix: "+JSON.stringify(he)),qe.uri=he),B.tag.attributes[W]=qe,we(B,"onattribute",qe)}B.attribList.length=0}B.tag.isSelfClosing=!!I,B.sawRoot=!0,B.tags.push(B.tag),we(B,"onopentag",B.tag),I||(B.state=B.noscript||"script"!==B.tagName.toLowerCase()?z.TEXT:z.SCRIPT,B.tag=null,B.tagName=""),B.attribName=B.attribValue="",B.attribList.length=0}function Ce(B){if(!B.tagName)return Se(B,"Weird empty close tag."),B.textNode+="</>",void(B.state=z.TEXT);if(B.script){if("script"!==B.tagName)return B.script+="</"+B.tagName+">",B.tagName="",void(B.state=z.SCRIPT);we(B,"onscript",B.script),B.script=""}var I=B.tags.length,ae=B.tagName;B.strict||(ae=ae[B.looseCase]());for(var K=ae;I--&&B.tags[I].name!==K;)Se(B,"Unexpected close tag");if(I<0)return Se(B,"Unmatched closing tag: "+B.tagName),B.textNode+="</"+B.tagName+">",void(B.state=z.TEXT);B.tagName=ae;for(var Ve=B.tags.length;Ve-- >I;){var me=B.tag=B.tags.pop();B.tagName=B.tag.name,we(B,"onclosetag",B.tagName);var Q={};for(var W in me.ns)Q[W]=me.ns[W];B.opt.xmlns&&me.ns!==(B.tags[B.tags.length-1]||B).ns&&Object.keys(me.ns).forEach(function(O){we(B,"onclosenamespace",{prefix:O,uri:me.ns[O]})})}0===I&&(B.closedRoot=!0),B.tagName=B.attribValue=B.attribName="",B.attribList.length=0,B.state=z.TEXT}function Ke(B){var K,I=B.entity,ae=I.toLowerCase(),Le="";return B.ENTITIES[I]?B.ENTITIES[I]:B.ENTITIES[ae]?B.ENTITIES[ae]:("#"===(I=ae).charAt(0)&&("x"===I.charAt(1)?(I=I.slice(2),Le=(K=parseInt(I,16)).toString(16)):(I=I.slice(1),Le=(K=parseInt(I,10)).toString(10))),I=I.replace(/^0+/,""),isNaN(K)||Le.toLowerCase()!==I?(Se(B,"Invalid character entity"),"&"+B.entity+";"):String.fromCodePoint(K))}function st(B,I){"<"===I?(B.state=z.OPEN_WAKA,B.startTagPosition=B.position):H(I)||(Se(B,"Non-whitespace before first tag."),B.textNode=I,B.state=z.TEXT)}function Qe(B,I){var ae="";return I<B.length&&(ae=B.charAt(I)),ae}z=E.STATE,String.fromCodePoint||(B=String.fromCharCode,I=Math.floor,ae=function(){var Le=[],Q=-1,W=arguments.length;if(!W)return"";for(var C="";++Q<W;){var O=Number(arguments[Q]);if(!isFinite(O)||O<0||O>1114111||I(O)!==O)throw RangeError("Invalid code point: "+O);O<=65535?Le.push(O):Le.push(55296+((O-=65536)>>10),O%1024+56320),(Q+1===W||Le.length>16384)&&(C+=B.apply(null,Le),Le.length=0)}return C},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ae,configurable:!0,writable:!0}):String.fromCodePoint=ae)}(Z)},8280:function(){!function(ne,Z){"use strict";if(!ne.setImmediate){var A,g=1,E={},b=!1,R=ne.document,ce=Object.getPrototypeOf&&Object.getPrototypeOf(ne);ce=ce&&ce.setTimeout?ce:ne,"[object process]"==={}.toString.call(ne.process)?function U(){A=function(Y){process.nextTick(function(){M(Y)})}}():function N(){if(ne.postMessage&&!ne.importScripts){var Y=!0,oe=ne.onmessage;return ne.onmessage=function(){Y=!1},ne.postMessage("","*"),ne.onmessage=oe,Y}}()?function j(){var Y="setImmediate$"+Math.random()+"$",oe=function(ie){ie.source===ne&&"string"==typeof ie.data&&0===ie.data.indexOf(Y)&&M(+ie.data.slice(Y.length))};ne.addEventListener?ne.addEventListener("message",oe,!1):ne.attachEvent("onmessage",oe),A=function(ie){ne.postMessage(Y+ie,"*")}}():ne.MessageChannel?function le(){var Y=new MessageChannel;Y.port1.onmessage=function(oe){M(oe.data)},A=function(oe){Y.port2.postMessage(oe)}}():R&&"onreadystatechange"in R.createElement("script")?function k(){var Y=R.documentElement;A=function(oe){var ie=R.createElement("script");ie.onreadystatechange=function(){M(oe),ie.onreadystatechange=null,Y.removeChild(ie),ie=null},Y.appendChild(ie)}}():function X(){A=function(Y){setTimeout(M,0,Y)}}(),ce.setImmediate=function P(Y){"function"!=typeof Y&&(Y=new Function(""+Y));for(var oe=new Array(arguments.length-1),ie=0;ie<oe.length;ie++)oe[ie]=arguments[ie+1];return E[g]={callback:Y,args:oe},A(g),g++},ce.clearImmediate=_}function _(Y){delete E[Y]}function M(Y){if(b)setTimeout(M,0,Y);else{var oe=E[Y];if(oe){b=!0;try{!function y(Y){var oe=Y.callback,ie=Y.args;switch(ie.length){case 0:oe();break;case 1:oe(ie[0]);break;case 2:oe(ie[0],ie[1]);break;case 3:oe(ie[0],ie[1],ie[2]);break;default:oe.apply(undefined,ie)}}(oe)}finally{_(Y),b=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(ne,Z,g)=>{ne.exports=R;var E=g(2016).EventEmitter;function R(){E.call(this)}g(6698)(R,E),R.Readable=g(842),R.Writable=g(7597),R.Duplex=g(2232),R.Transform=g(555),R.PassThrough=g(8226),R.finished=g(1227),R.pipeline=g(2345),R.Stream=R,R.prototype.pipe=function(A,P){var _=this;function y(X){A.writable&&!1===A.write(X)&&_.pause&&_.pause()}function M(){_.readable&&_.resume&&_.resume()}_.on("data",y),A.on("drain",M),!A._isStdio&&(!P||!1!==P.end)&&(_.on("end",N),_.on("close",j));var U=!1;function N(){U||(U=!0,A.end())}function j(){U||(U=!0,"function"==typeof A.destroy&&A.destroy())}function le(X){if(k(),0===E.listenerCount(this,"error"))throw X}function k(){_.removeListener("data",y),A.removeListener("drain",M),_.removeListener("end",N),_.removeListener("close",j),_.removeListener("error",le),A.removeListener("error",le),_.removeListener("end",k),_.removeListener("close",k),A.removeListener("close",k)}return _.on("error",le),A.on("error",le),_.on("end",k),_.on("close",k),A.on("close",k),A.emit("pipe",_),A}},9555:ne=>{"use strict";var g={};function E(_,y,M){M||(M=Error);var N=function(j){function le(k,X,ce){return j.call(this,function U(j,le,k){return"string"==typeof y?y:y(j,le,k)}(k,X,ce))||this}return function Z(_,y){_.prototype=Object.create(y.prototype),_.prototype.constructor=_,_.__proto__=y}(le,j),le}(M);N.prototype.name=M.name,N.prototype.code=_,g[_]=N}function b(_,y){if(Array.isArray(_)){var M=_.length;return _=_.map(function(U){return String(U)}),M>2?"one of ".concat(y," ").concat(_.slice(0,M-1).join(", "),", or ")+_[M-1]:2===M?"one of ".concat(y," ").concat(_[0]," or ").concat(_[1]):"of ".concat(y," ").concat(_[0])}return"of ".concat(y," ").concat(String(_))}E("ERR_INVALID_OPT_VALUE",function(_,y){return'The value "'+y+'" is invalid for option "'+_+'"'},TypeError),E("ERR_INVALID_ARG_TYPE",function(_,y,M){var U,N;if("string"==typeof y&&function R(_,y,M){return _.substr(!M||M<0?0:+M,y.length)===y}(y,"not ")?(U="must not be",y=y.replace(/^not /,"")):U="must be",function A(_,y,M){return(void 0===M||M>_.length)&&(M=_.length),_.substring(M-y.length,M)===y}(_," argument"))N="The ".concat(_," ").concat(U," ").concat(b(y,"type"));else{var j=function P(_,y,M){return"number"!=typeof M&&(M=0),!(M+y.length>_.length)&&-1!==_.indexOf(y,M)}(_,".")?"property":"argument";N='The "'.concat(_,'" ').concat(j," ").concat(U," ").concat(b(y,"type"))}return N+". Received type ".concat(typeof M)},TypeError),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),E("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),E("ERR_STREAM_PREMATURE_CLOSE","Premature close"),E("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),E("ERR_STREAM_WRITE_AFTER_END","write after end"),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ne.exports.q=g},2232:(ne,Z,g)=>{"use strict";var E=Object.keys||function(N){var j=[];for(var le in N)j.push(le);return j};ne.exports=y;var b=g(842),R=g(7597);g(6698)(y,b);for(var A=E(R.prototype),P=0;P<A.length;P++){var _=A[P];y.prototype[_]||(y.prototype[_]=R.prototype[_])}function y(N){if(!(this instanceof y))return new y(N);b.call(this,N),R.call(this,N),this.allowHalfOpen=!0,N&&(!1===N.readable&&(this.readable=!1),!1===N.writable&&(this.writable=!1),!1===N.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",M)))}function M(){this._writableState.ended||process.nextTick(U,this)}function U(N){N.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(j){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=j,this._writableState.destroyed=j)}})},8226:(ne,Z,g)=>{"use strict";ne.exports=b;var E=g(555);function b(R){if(!(this instanceof b))return new b(R);E.call(this,R)}g(6698)(b,E),b.prototype._transform=function(R,A,P){P(null,R)}},842:(ne,Z,g)=>{"use strict";var E;ne.exports=de,de.ReadableState=Te,g(2016);var N,R=function(Q,W){return Q.listeners(W).length},A=g(3951),P=g(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},U=g(964);N=U&&U.debuglog?U.debuglog("stream"):function(){};var H,v,L,j=g(2998),le=g(3992),X=g(4962).getHighWaterMark,ce=g(9555).q,Y=ce.ERR_INVALID_ARG_TYPE,oe=ce.ERR_STREAM_PUSH_AFTER_EOF,ie=ce.ERR_METHOD_NOT_IMPLEMENTED,$=ce.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g(6698)(de,A);var T=le.errorOrDestroy,fe=["error","close","destroy","pause","resume"];function Te(me,Q,W){E=E||g(2232),"boolean"!=typeof W&&(W=Q instanceof E),this.objectMode=!!(me=me||{}).objectMode,W&&(this.objectMode=this.objectMode||!!me.readableObjectMode),this.highWaterMark=X(this,me,"readableHighWaterMark",W),this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==me.emitClose,this.autoDestroy=!!me.autoDestroy,this.destroyed=!1,this.defaultEncoding=me.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,me.encoding&&(H||(H=g(2024).StringDecoder),this.decoder=new H(me.encoding),this.encoding=me.encoding)}function de(me){if(E=E||g(2232),!(this instanceof de))return new de(me);this._readableState=new Te(me,this,this instanceof E),this.readable=!0,me&&("function"==typeof me.read&&(this._read=me.read),"function"==typeof me.destroy&&(this._destroy=me.destroy)),A.call(this)}function we(me,Q,W,C,O){N("readableAddChunk",Q);var ue,he=me._readableState;if(null===Q)he.reading=!1,function Fe(me,Q){if(N("onEofChunk"),!Q.ended){if(Q.decoder){var W=Q.decoder.end();W&&W.length&&(Q.buffer.push(W),Q.length+=Q.objectMode?1:W.length)}Q.ended=!0,Q.sync?Pe(me):(Q.needReadable=!1,Q.emittedReadable||(Q.emittedReadable=!0,ze(me)))}}(me,he);else if(O||(ue=function De(me,Q){var W;return!function M(me){return P.isBuffer(me)||me instanceof _}(Q)&&"string"!=typeof Q&&void 0!==Q&&!me.objectMode&&(W=new Y("chunk",["string","Buffer","Uint8Array"],Q)),W}(he,Q)),ue)T(me,ue);else if(he.objectMode||Q&&Q.length>0)if("string"!=typeof Q&&!he.objectMode&&Object.getPrototypeOf(Q)!==P.prototype&&(Q=function y(me){return P.from(me)}(Q)),C)he.endEmitted?T(me,new $):Ie(me,he,Q,!0);else if(he.ended)T(me,new oe);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!W?(Q=he.decoder.write(Q),he.objectMode||0!==Q.length?Ie(me,he,Q,!1):ge(me,he)):Ie(me,he,Q,!1)}else C||(he.reading=!1,ge(me,he));return!he.ended&&(he.length<he.highWaterMark||0===he.length)}function Ie(me,Q,W,C){Q.flowing&&0===Q.length&&!Q.sync?(Q.awaitDrain=0,me.emit("data",W)):(Q.length+=Q.objectMode?1:W.length,C?Q.buffer.unshift(W):Q.buffer.push(W),Q.needReadable&&Pe(me)),ge(me,Q)}Object.defineProperty(de.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Q){this._readableState&&(this._readableState.destroyed=Q)}}),de.prototype.destroy=le.destroy,de.prototype._undestroy=le.undestroy,de.prototype._destroy=function(me,Q){Q(me)},de.prototype.push=function(me,Q){var C,W=this._readableState;return W.objectMode?C=!0:"string"==typeof me&&((Q=Q||W.defaultEncoding)!==W.encoding&&(me=P.from(me,Q),Q=""),C=!0),we(this,me,Q,!1,C)},de.prototype.unshift=function(me){return we(this,me,null,!0,!1)},de.prototype.isPaused=function(){return!1===this._readableState.flowing},de.prototype.setEncoding=function(me){H||(H=g(2024).StringDecoder);var Q=new H(me);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,C="";null!==W;)C+=Q.write(W.data),W=W.next;return this._readableState.buffer.clear(),""!==C&&this._readableState.buffer.push(C),this._readableState.length=C.length,this};var tt=1073741824;function Se(me,Q){return me<=0||0===Q.length&&Q.ended?0:Q.objectMode?1:me!=me?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(me>Q.highWaterMark&&(Q.highWaterMark=function Ye(me){return me>=tt?me=tt:(me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++),me}(me)),me<=Q.length?me:Q.ended?Q.length:(Q.needReadable=!0,0))}function Pe(me){var Q=me._readableState;N("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(N("emitReadable",Q.flowing),Q.emittedReadable=!0,process.nextTick(ze,me))}function ze(me){var Q=me._readableState;N("emitReadable_",Q.destroyed,Q.length,Q.ended),!Q.destroyed&&(Q.length||Q.ended)&&(me.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,I(me)}function ge(me,Q){Q.readingMore||(Q.readingMore=!0,process.nextTick(Ce,me,Q))}function Ce(me,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&0===Q.length);){var W=Q.length;if(N("maybeReadMore read 0"),me.read(0),W===Q.length)break}Q.readingMore=!1}function st(me){var Q=me._readableState;Q.readableListening=me.listenerCount("readable")>0,Q.resumeScheduled&&!Q.paused?Q.flowing=!0:me.listenerCount("data")>0&&me.resume()}function Qe(me){N("readable nexttick read 0"),me.read(0)}function B(me,Q){N("resume",Q.reading),Q.reading||me.read(0),Q.resumeScheduled=!1,me.emit("resume"),I(me),Q.flowing&&!Q.reading&&me.read(0)}function I(me){var Q=me._readableState;for(N("flow",Q.flowing);Q.flowing&&null!==me.read(););}function ae(me,Q){return 0===Q.length?null:(Q.objectMode?W=Q.buffer.shift():!me||me>=Q.length?(W=Q.decoder?Q.buffer.join(""):1===Q.buffer.length?Q.buffer.first():Q.buffer.concat(Q.length),Q.buffer.clear()):W=Q.buffer.consume(me,Q.decoder),W);var W}function K(me){var Q=me._readableState;N("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,process.nextTick(Le,Q,me))}function Le(me,Q){if(N("endReadableNT",me.endEmitted,me.length),!me.endEmitted&&0===me.length&&(me.endEmitted=!0,Q.readable=!1,Q.emit("end"),me.autoDestroy)){var W=Q._writableState;(!W||W.autoDestroy&&W.finished)&&Q.destroy()}}function Ve(me,Q){for(var W=0,C=me.length;W<C;W++)if(me[W]===Q)return W;return-1}de.prototype.read=function(me){N("read",me),me=parseInt(me,10);var Q=this._readableState,W=me;if(0!==me&&(Q.emittedReadable=!1),0===me&&Q.needReadable&&((0!==Q.highWaterMark?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return N("read: emitReadable",Q.length,Q.ended),0===Q.length&&Q.ended?K(this):Pe(this),null;if(0===(me=Se(me,Q))&&Q.ended)return 0===Q.length&&K(this),null;var O,C=Q.needReadable;return N("need readable",C),(0===Q.length||Q.length-me<Q.highWaterMark)&&N("length less than watermark",C=!0),Q.ended||Q.reading?N("reading or ended",C=!1):C&&(N("do read"),Q.reading=!0,Q.sync=!0,0===Q.length&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(me=Se(W,Q))),null===(O=me>0?ae(me,Q):null)?(Q.needReadable=Q.length<=Q.highWaterMark,me=0):(Q.length-=me,Q.awaitDrain=0),0===Q.length&&(Q.ended||(Q.needReadable=!0),W!==me&&Q.ended&&K(this)),null!==O&&this.emit("data",O),O},de.prototype._read=function(me){T(this,new ie("_read()"))},de.prototype.pipe=function(me,Q){var W=this,C=this._readableState;switch(C.pipesCount){case 0:C.pipes=me;break;case 1:C.pipes=[C.pipes,me];break;default:C.pipes.push(me)}C.pipesCount+=1,N("pipe count=%d opts=%j",C.pipesCount,Q);var he=Q&&!1===Q.end||me===process.stdout||me===process.stderr?J:Ge;function Ge(){N("onend"),me.end()}C.endEmitted?process.nextTick(he):W.once("end",he),me.on("unpipe",function ue(S,se){N("onunpipe"),S===W&&se&&!1===se.hasUnpiped&&(se.hasUnpiped=!0,function Pt(){N("cleanup"),me.removeListener("close",on),me.removeListener("finish",Re),me.removeListener("drain",qe),me.removeListener("error",Gt),me.removeListener("unpipe",ue),W.removeListener("end",Ge),W.removeListener("end",J),W.removeListener("data",dt),ft=!0,C.awaitDrain&&(!me._writableState||me._writableState.needDrain)&&qe()}())});var qe=function Ke(me){return function(){var W=me._readableState;N("pipeOnDrain",W.awaitDrain),W.awaitDrain&&W.awaitDrain--,0===W.awaitDrain&&R(me,"data")&&(W.flowing=!0,I(me))}}(W);me.on("drain",qe);var ft=!1;function dt(S){N("ondata");var se=me.write(S);N("dest.write",se),!1===se&&((1===C.pipesCount&&C.pipes===me||C.pipesCount>1&&-1!==Ve(C.pipes,me))&&!ft&&(N("false write response, pause",C.awaitDrain),C.awaitDrain++),W.pause())}function Gt(S){N("onerror",S),J(),me.removeListener("error",Gt),0===R(me,"error")&&T(me,S)}function on(){me.removeListener("finish",Re),J()}function Re(){N("onfinish"),me.removeListener("close",on),J()}function J(){N("unpipe"),W.unpipe(me)}return W.on("data",dt),function z(me,Q,W){if("function"==typeof me.prependListener)return me.prependListener(Q,W);me._events&&me._events[Q]?Array.isArray(me._events[Q])?me._events[Q].unshift(W):me._events[Q]=[W,me._events[Q]]:me.on(Q,W)}(me,"error",Gt),me.once("close",on),me.once("finish",Re),me.emit("pipe",W),C.flowing||(N("pipe resume"),W.resume()),me},de.prototype.unpipe=function(me){var Q=this._readableState,W={hasUnpiped:!1};if(0===Q.pipesCount)return this;if(1===Q.pipesCount)return me&&me!==Q.pipes||(me||(me=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,me&&me.emit("unpipe",this,W)),this;if(!me){var C=Q.pipes,O=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var he=0;he<O;he++)C[he].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=Ve(Q.pipes,me);return-1===ue||(Q.pipes.splice(ue,1),Q.pipesCount-=1,1===Q.pipesCount&&(Q.pipes=Q.pipes[0]),me.emit("unpipe",this,W)),this},de.prototype.addListener=de.prototype.on=function(me,Q){var W=A.prototype.on.call(this,me,Q),C=this._readableState;return"data"===me?(C.readableListening=this.listenerCount("readable")>0,!1!==C.flowing&&this.resume()):"readable"===me&&!C.endEmitted&&!C.readableListening&&(C.readableListening=C.needReadable=!0,C.flowing=!1,C.emittedReadable=!1,N("on readable",C.length,C.reading),C.length?Pe(this):C.reading||process.nextTick(Qe,this)),W},de.prototype.removeListener=function(me,Q){var W=A.prototype.removeListener.call(this,me,Q);return"readable"===me&&process.nextTick(st,this),W},de.prototype.removeAllListeners=function(me){var Q=A.prototype.removeAllListeners.apply(this,arguments);return("readable"===me||void 0===me)&&process.nextTick(st,this),Q},de.prototype.resume=function(){var me=this._readableState;return me.flowing||(N("resume"),me.flowing=!me.readableListening,function _e(me,Q){Q.resumeScheduled||(Q.resumeScheduled=!0,process.nextTick(B,me,Q))}(this,me)),me.paused=!1,this},de.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},de.prototype.wrap=function(me){var Q=this,W=this._readableState,C=!1;for(var O in me.on("end",function(){if(N("wrapped end"),W.decoder&&!W.ended){var ue=W.decoder.end();ue&&ue.length&&Q.push(ue)}Q.push(null)}),me.on("data",function(ue){N("wrapped data"),W.decoder&&(ue=W.decoder.write(ue)),W.objectMode&&null==ue||!(W.objectMode||ue&&ue.length)||Q.push(ue)||(C=!0,me.pause())}),me)void 0===this[O]&&"function"==typeof me[O]&&(this[O]=function(Ge){return function(){return me[Ge].apply(me,arguments)}}(O));for(var he=0;he<fe.length;he++)me.on(fe[he],this.emit.bind(this,fe[he]));return this._read=function(ue){N("wrapped _read",ue),C&&(C=!1,me.resume())},this},"function"==typeof Symbol&&(de.prototype[Symbol.asyncIterator]=function(){return void 0===v&&(v=g(2590)),v(this)}),Object.defineProperty(de.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(de.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(de.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Q){this._readableState&&(this._readableState.flowing=Q)}}),de._fromList=ae,Object.defineProperty(de.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(de.from=function(me,Q){return void 0===L&&(L=g(5374)),L(de,me,Q)})},555:(ne,Z,g)=>{"use strict";ne.exports=M;var E=g(9555).q,b=E.ERR_METHOD_NOT_IMPLEMENTED,R=E.ERR_MULTIPLE_CALLBACK,A=E.ERR_TRANSFORM_ALREADY_TRANSFORMING,P=E.ERR_TRANSFORM_WITH_LENGTH_0,_=g(2232);function y(j,le){var k=this._transformState;k.transforming=!1;var X=k.writecb;if(null===X)return this.emit("error",new R);k.writechunk=null,k.writecb=null,null!=le&&this.push(le),X(j);var ce=this._readableState;ce.reading=!1,(ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}function M(j){if(!(this instanceof M))return new M(j);_.call(this,j),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,j&&("function"==typeof j.transform&&(this._transform=j.transform),"function"==typeof j.flush&&(this._flush=j.flush)),this.on("prefinish",U)}function U(){var j=this;"function"!=typeof this._flush||this._readableState.destroyed?N(this,null,null):this._flush(function(le,k){N(j,le,k)})}function N(j,le,k){if(le)return j.emit("error",le);if(null!=k&&j.push(k),j._writableState.length)throw new P;if(j._transformState.transforming)throw new A;return j.push(null)}g(6698)(M,_),M.prototype.push=function(j,le){return this._transformState.needTransform=!1,_.prototype.push.call(this,j,le)},M.prototype._transform=function(j,le,k){k(new b("_transform()"))},M.prototype._write=function(j,le,k){var X=this._transformState;if(X.writecb=k,X.writechunk=j,X.writeencoding=le,!X.transforming){var ce=this._readableState;(X.needTransform||ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}},M.prototype._read=function(j){var le=this._transformState;null===le.writechunk||le.transforming?le.needTransform=!0:(le.transforming=!0,this._transform(le.writechunk,le.writeencoding,le.afterTransform))},M.prototype._destroy=function(j,le){_.prototype._destroy.call(this,j,function(k){le(k)})}},7597:(ne,Z,g)=>{"use strict";function b(I){var ae=this;this.next=null,this.entry=null,this.finish=function(){!function B(I,ae,K){var Le=I.entry;for(I.entry=null;Le;){var Ve=Le.callback;ae.pendingcb--,Ve(K),Le=Le.next}ae.corkedRequestsFree.next=I}(ae,I)}}var R;ne.exports=Te,Te.WritableState=fe;var z,A={deprecate:g(496)},P=g(3951),_=g(9007).Buffer,y=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},N=g(3992),le=g(4962).getHighWaterMark,k=g(9555).q,X=k.ERR_INVALID_ARG_TYPE,ce=k.ERR_METHOD_NOT_IMPLEMENTED,Y=k.ERR_MULTIPLE_CALLBACK,oe=k.ERR_STREAM_CANNOT_PIPE,ie=k.ERR_STREAM_DESTROYED,$=k.ERR_STREAM_NULL_VALUES,H=k.ERR_STREAM_WRITE_AFTER_END,v=k.ERR_UNKNOWN_ENCODING,L=N.errorOrDestroy;function T(){}function fe(I,ae,K){R=R||g(2232),"boolean"!=typeof K&&(K=ae instanceof R),this.objectMode=!!(I=I||{}).objectMode,K&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=le(this,I,"writableHighWaterMark",K),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===I.decodeStrings),this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ve){!function Fe(I,ae){var K=I._writableState,Le=K.sync,Ve=K.writecb;if("function"!=typeof Ve)throw new Y;if(function Se(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}(K),ae)!function Ye(I,ae,K,Le,Ve){--ae.pendingcb,K?(process.nextTick(Ve,Le),process.nextTick(Qe,I,ae),I._writableState.errorEmitted=!0,L(I,Le)):(Ve(Le),I._writableState.errorEmitted=!0,L(I,Le),Qe(I,ae))}(I,K,Le,ae,Ve);else{var me=Ce(K)||I.destroyed;!me&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&ge(I,K),Le?process.nextTick(Pe,I,K,me,Ve):Pe(I,K,me,Ve)}}(ae,Ve)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==I.emitClose,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function Te(I){var ae=this instanceof(R=R||g(2232));if(!ae&&!z.call(Te,this))return new Te(I);this._writableState=new fe(I,this,ae),this.writable=!0,I&&("function"==typeof I.write&&(this._write=I.write),"function"==typeof I.writev&&(this._writev=I.writev),"function"==typeof I.destroy&&(this._destroy=I.destroy),"function"==typeof I.final&&(this._final=I.final)),P.call(this)}function tt(I,ae,K,Le,Ve,me,Q){ae.writelen=Le,ae.writecb=Q,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new ie("write")):K?I._writev(Ve,ae.onwrite):I._write(Ve,me,ae.onwrite),ae.sync=!1}function Pe(I,ae,K,Le){K||function ze(I,ae){0===ae.length&&ae.needDrain&&(ae.needDrain=!1,I.emit("drain"))}(I,ae),ae.pendingcb--,Le(),Qe(I,ae)}function ge(I,ae){ae.bufferProcessing=!0;var K=ae.bufferedRequest;if(I._writev&&K&&K.next){var Ve=new Array(ae.bufferedRequestCount),me=ae.corkedRequestsFree;me.entry=K;for(var Q=0,W=!0;K;)Ve[Q]=K,K.isBuf||(W=!1),K=K.next,Q+=1;Ve.allBuffers=W,tt(I,ae,!0,ae.length,Ve,"",me.finish),ae.pendingcb++,ae.lastBufferedRequest=null,me.next?(ae.corkedRequestsFree=me.next,me.next=null):ae.corkedRequestsFree=new b(ae),ae.bufferedRequestCount=0}else{for(;K;){var C=K.chunk;if(tt(I,ae,!1,ae.objectMode?1:C.length,C,K.encoding,K.callback),K=K.next,ae.bufferedRequestCount--,ae.writing)break}null===K&&(ae.lastBufferedRequest=null)}ae.bufferedRequest=K,ae.bufferProcessing=!1}function Ce(I){return I.ending&&0===I.length&&null===I.bufferedRequest&&!I.finished&&!I.writing}function Ke(I,ae){I._final(function(K){ae.pendingcb--,K&&L(I,K),ae.prefinished=!0,I.emit("prefinish"),Qe(I,ae)})}function Qe(I,ae){var K=Ce(ae);if(K&&(function st(I,ae){!ae.prefinished&&!ae.finalCalled&&("function"!=typeof I._final||ae.destroyed?(ae.prefinished=!0,I.emit("prefinish")):(ae.pendingcb++,ae.finalCalled=!0,process.nextTick(Ke,I,ae)))}(I,ae),0===ae.pendingcb&&(ae.finished=!0,I.emit("finish"),ae.autoDestroy))){var Le=I._readableState;(!Le||Le.autoDestroy&&Le.endEmitted)&&I.destroy()}return K}g(6698)(Te,P),fe.prototype.getBuffer=function(){for(var ae=this.bufferedRequest,K=[];ae;)K.push(ae),ae=ae.next;return K},function(){try{Object.defineProperty(fe.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(Te,Symbol.hasInstance,{value:function(ae){return!!z.call(this,ae)||this===Te&&ae&&ae._writableState instanceof fe}})):z=function(ae){return ae instanceof this},Te.prototype.pipe=function(){L(this,new oe)},Te.prototype.write=function(I,ae,K){var Le=this._writableState,Ve=!1,me=!Le.objectMode&&function U(I){return _.isBuffer(I)||I instanceof y}(I);return me&&!_.isBuffer(I)&&(I=function M(I){return _.from(I)}(I)),"function"==typeof ae&&(K=ae,ae=null),me?ae="buffer":ae||(ae=Le.defaultEncoding),"function"!=typeof K&&(K=T),Le.ending?function de(I,ae){var K=new H;L(I,K),process.nextTick(ae,K)}(this,K):(me||function we(I,ae,K,Le){var Ve;return null===K?Ve=new $:"string"!=typeof K&&!ae.objectMode&&(Ve=new X("chunk",["string","Buffer"],K)),!Ve||(L(I,Ve),process.nextTick(Le,Ve),!1)}(this,Le,I,K))&&(Le.pendingcb++,Ve=function De(I,ae,K,Le,Ve,me){if(!K){var Q=function Ie(I,ae,K){return!I.objectMode&&!1!==I.decodeStrings&&"string"==typeof ae&&(ae=_.from(ae,K)),ae}(ae,Le,Ve);Le!==Q&&(K=!0,Ve="buffer",Le=Q)}var W=ae.objectMode?1:Le.length;ae.length+=W;var C=ae.length<ae.highWaterMark;if(C||(ae.needDrain=!0),ae.writing||ae.corked){var O=ae.lastBufferedRequest;ae.lastBufferedRequest={chunk:Le,encoding:Ve,isBuf:K,callback:me,next:null},O?O.next=ae.lastBufferedRequest:ae.bufferedRequest=ae.lastBufferedRequest,ae.bufferedRequestCount+=1}else tt(I,ae,!1,W,Le,Ve,me);return C}(this,Le,me,I,ae,K)),Ve},Te.prototype.cork=function(){this._writableState.corked++},Te.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&ge(this,I))},Te.prototype.setDefaultEncoding=function(ae){if("string"==typeof ae&&(ae=ae.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ae+"").toLowerCase())>-1))throw new v(ae);return this._writableState.defaultEncoding=ae,this},Object.defineProperty(Te.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Te.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Te.prototype._write=function(I,ae,K){K(new ce("_write()"))},Te.prototype._writev=null,Te.prototype.end=function(I,ae,K){var Le=this._writableState;return"function"==typeof I?(K=I,I=null,ae=null):"function"==typeof ae&&(K=ae,ae=null),null!=I&&this.write(I,ae),Le.corked&&(Le.corked=1,this.uncork()),Le.ending||function _e(I,ae,K){ae.ending=!0,Qe(I,ae),K&&(ae.finished?process.nextTick(K):I.once("finish",K)),ae.ended=!0,I.writable=!1}(this,Le,K),this},Object.defineProperty(Te.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Te.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ae){this._writableState&&(this._writableState.destroyed=ae)}}),Te.prototype.destroy=N.destroy,Te.prototype._undestroy=N.undestroy,Te.prototype._destroy=function(I,ae){ae(I)}},2590:(ne,Z,g)=>{"use strict";var E;function b(H,v,L){return v=function R(H){var v=function A(H,v){if("object"!=typeof H||null===H)return H;var L=H[Symbol.toPrimitive];if(void 0!==L){var T=L.call(H,v||"default");if("object"!=typeof T)return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(H)}(H,"string");return"symbol"==typeof v?v:String(v)}(v),v in H?Object.defineProperty(H,v,{value:L,enumerable:!0,configurable:!0,writable:!0}):H[v]=L,H}var P=g(1227),_=Symbol("lastResolve"),y=Symbol("lastReject"),M=Symbol("error"),U=Symbol("ended"),N=Symbol("lastPromise"),j=Symbol("handlePromise"),le=Symbol("stream");function k(H,v){return{value:H,done:v}}function X(H){var v=H[_];if(null!==v){var L=H[le].read();null!==L&&(H[N]=null,H[_]=null,H[y]=null,v(k(L,!1)))}}function ce(H){process.nextTick(X,H)}var oe=Object.getPrototypeOf(function(){}),ie=Object.setPrototypeOf((b(E={get stream(){return this[le]},next:function(){var v=this,L=this[M];if(null!==L)return Promise.reject(L);if(this[U])return Promise.resolve(k(void 0,!0));if(this[le].destroyed)return new Promise(function(Te,de){process.nextTick(function(){v[M]?de(v[M]):Te(k(void 0,!0))})});var fe,T=this[N];if(T)fe=new Promise(function Y(H,v){return function(L,T){H.then(function(){v[U]?L(k(void 0,!0)):v[j](L,T)},T)}}(T,this));else{var z=this[le].read();if(null!==z)return Promise.resolve(k(z,!1));fe=new Promise(this[j])}return this[N]=fe,fe}},Symbol.asyncIterator,function(){return this}),b(E,"return",function(){var v=this;return new Promise(function(L,T){v[le].destroy(null,function(fe){fe?T(fe):L(k(void 0,!0))})})}),E),oe);ne.exports=function(v){var L,T=Object.create(ie,(b(L={},le,{value:v,writable:!0}),b(L,_,{value:null,writable:!0}),b(L,y,{value:null,writable:!0}),b(L,M,{value:null,writable:!0}),b(L,U,{value:v._readableState.endEmitted,writable:!0}),b(L,j,{value:function(z,Te){var de=T[le].read();de?(T[N]=null,T[_]=null,T[y]=null,z(k(de,!1))):(T[_]=z,T[y]=Te)},writable:!0}),L));return T[N]=null,P(v,function(fe){if(fe&&"ERR_STREAM_PREMATURE_CLOSE"!==fe.code){var z=T[y];return null!==z&&(T[N]=null,T[_]=null,T[y]=null,z(fe)),void(T[M]=fe)}var Te=T[_];null!==Te&&(T[N]=null,T[_]=null,T[y]=null,Te(k(void 0,!0))),T[U]=!0}),v.on("readable",ce.bind(null,T)),T}},2998:(ne,Z,g)=>{"use strict";function E(ce,Y){var oe=Object.keys(ce);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(ce);Y&&(ie=ie.filter(function($){return Object.getOwnPropertyDescriptor(ce,$).enumerable})),oe.push.apply(oe,ie)}return oe}function b(ce){for(var Y=1;Y<arguments.length;Y++){var oe=null!=arguments[Y]?arguments[Y]:{};Y%2?E(Object(oe),!0).forEach(function(ie){R(ce,ie,oe[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(oe)):E(Object(oe)).forEach(function(ie){Object.defineProperty(ce,ie,Object.getOwnPropertyDescriptor(oe,ie))})}return ce}function R(ce,Y,oe){return(Y=y(Y))in ce?Object.defineProperty(ce,Y,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ce[Y]=oe,ce}function P(ce,Y){for(var oe=0;oe<Y.length;oe++){var ie=Y[oe];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(ce,y(ie.key),ie)}}function y(ce){var Y=function M(ce,Y){if("object"!=typeof ce||null===ce)return ce;var oe=ce[Symbol.toPrimitive];if(void 0!==oe){var ie=oe.call(ce,Y||"default");if("object"!=typeof ie)return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Y?String:Number)(ce)}(ce,"string");return"symbol"==typeof Y?Y:String(Y)}var N=g(9007).Buffer,le=g(9862).inspect,k=le&&le.custom||"inspect";function X(ce,Y,oe){N.prototype.copy.call(ce,Y,oe)}ne.exports=function(){function ce(){(function A(ce,Y){if(!(ce instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,ce),this.head=null,this.tail=null,this.length=0}return function _(ce,Y,oe){Y&&P(ce.prototype,Y),oe&&P(ce,oe),Object.defineProperty(ce,"prototype",{writable:!1})}(ce,[{key:"push",value:function(oe){var ie={data:oe,next:null};this.length>0?this.tail.next=ie:this.head=ie,this.tail=ie,++this.length}},{key:"unshift",value:function(oe){var ie={data:oe,next:this.head};0===this.length&&(this.tail=ie),this.head=ie,++this.length}},{key:"shift",value:function(){if(0!==this.length){var oe=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,oe}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(oe){if(0===this.length)return"";for(var ie=this.head,$=""+ie.data;ie=ie.next;)$+=oe+ie.data;return $}},{key:"concat",value:function(oe){if(0===this.length)return N.alloc(0);for(var ie=N.allocUnsafe(oe>>>0),$=this.head,H=0;$;)X($.data,ie,H),H+=$.data.length,$=$.next;return ie}},{key:"consume",value:function(oe,ie){var $;return oe<this.head.data.length?($=this.head.data.slice(0,oe),this.head.data=this.head.data.slice(oe)):$=oe===this.head.data.length?this.shift():ie?this._getString(oe):this._getBuffer(oe),$}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(oe){var ie=this.head,$=1,H=ie.data;for(oe-=H.length;ie=ie.next;){var v=ie.data,L=oe>v.length?v.length:oe;if(H+=L===v.length?v:v.slice(0,oe),0==(oe-=L)){L===v.length?(++$,this.head=ie.next?ie.next:this.tail=null):(this.head=ie,ie.data=v.slice(L));break}++$}return this.length-=$,H}},{key:"_getBuffer",value:function(oe){var ie=N.allocUnsafe(oe),$=this.head,H=1;for($.data.copy(ie),oe-=$.data.length;$=$.next;){var v=$.data,L=oe>v.length?v.length:oe;if(v.copy(ie,ie.length-oe,0,L),0==(oe-=L)){L===v.length?(++H,this.head=$.next?$.next:this.tail=null):(this.head=$,$.data=v.slice(L));break}++H}return this.length-=H,ie}},{key:k,value:function(oe,ie){return le(this,b(b({},ie),{},{depth:0,customInspect:!1}))}}]),ce}()},3992:ne=>{"use strict";function g(P,_){R(P,_),E(P)}function E(P){P._writableState&&!P._writableState.emitClose||P._readableState&&!P._readableState.emitClose||P.emit("close")}function R(P,_){P.emit("error",_)}ne.exports={destroy:function Z(P,_){var y=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(P):P&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(R,this,P)):process.nextTick(R,this,P)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(P||null,function(N){!_&&N?y._writableState?y._writableState.errorEmitted?process.nextTick(E,y):(y._writableState.errorEmitted=!0,process.nextTick(g,y,N)):process.nextTick(g,y,N):_?(process.nextTick(E,y),_(N)):process.nextTick(E,y)}),this)},undestroy:function b(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function A(P,_){var y=P._readableState,M=P._writableState;y&&y.autoDestroy||M&&M.autoDestroy?P.destroy(_):P.emit("error",_)}}},1227:(ne,Z,g)=>{"use strict";var E=g(9555).q.ERR_STREAM_PREMATURE_CLOSE;function R(){}ne.exports=function P(_,y,M){if("function"==typeof y)return P(_,null,y);y||(y={}),M=function b(_){var y=!1;return function(){if(!y){y=!0;for(var M=arguments.length,U=new Array(M),N=0;N<M;N++)U[N]=arguments[N];_.apply(this,U)}}}(M||R);var U=y.readable||!1!==y.readable&&_.readable,N=y.writable||!1!==y.writable&&_.writable,j=function(){_.writable||k()},le=_._writableState&&_._writableState.finished,k=function(){N=!1,le=!0,U||M.call(_)},X=_._readableState&&_._readableState.endEmitted,ce=function(){U=!1,X=!0,N||M.call(_)},Y=function(H){M.call(_,H)},oe=function(){var H;return U&&!X?((!_._readableState||!_._readableState.ended)&&(H=new E),M.call(_,H)):N&&!le?((!_._writableState||!_._writableState.ended)&&(H=new E),M.call(_,H)):void 0},ie=function(){_.req.on("finish",k)};return function A(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",k),_.on("abort",oe),_.req?ie():_.on("request",ie)):N&&!_._writableState&&(_.on("end",j),_.on("close",j)),_.on("end",ce),_.on("finish",k),!1!==y.error&&_.on("error",Y),_.on("close",oe),function(){_.removeListener("complete",k),_.removeListener("abort",oe),_.removeListener("request",ie),_.req&&_.req.removeListener("finish",k),_.removeListener("end",j),_.removeListener("close",j),_.removeListener("finish",k),_.removeListener("end",ce),_.removeListener("error",Y),_.removeListener("close",oe)}}},5374:ne=>{ne.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(ne,Z,g)=>{"use strict";var E,R=g(9555).q,A=R.ERR_MISSING_ARGS,P=R.ERR_STREAM_DESTROYED;function _(k){if(k)throw k}function U(k){k()}function N(k,X){return k.pipe(X)}ne.exports=function le(){for(var k=arguments.length,X=new Array(k),ce=0;ce<k;ce++)X[ce]=arguments[ce];var Y=function j(k){return k.length&&"function"==typeof k[k.length-1]?k.pop():_}(X);if(Array.isArray(X[0])&&(X=X[0]),X.length<2)throw new A("streams");var oe,ie=X.map(function($,H){var v=H<X.length-1;return function M(k,X,ce,Y){Y=function b(k){var X=!1;return function(){X||(X=!0,k.apply(void 0,arguments))}}(Y);var oe=!1;k.on("close",function(){oe=!0}),void 0===E&&(E=g(1227)),E(k,{readable:X,writable:ce},function($){if($)return Y($);oe=!0,Y()});var ie=!1;return function($){if(!oe&&!ie){if(ie=!0,function y(k){return k.setHeader&&"function"==typeof k.abort}(k))return k.abort();if("function"==typeof k.destroy)return k.destroy();Y($||new P("pipe"))}}}($,v,H>0,function(T){oe||(oe=T),T&&ie.forEach(U),!v&&(ie.forEach(U),Y(oe))})});return X.reduce(N)}},4962:(ne,Z,g)=>{"use strict";var E=g(9555).q.ERR_INVALID_OPT_VALUE;ne.exports={getHighWaterMark:function R(A,P,_,y){var M=function b(A,P,_){return null!=A.highWaterMark?A.highWaterMark:P?A[_]:null}(P,y,_);if(null!=M){if(!isFinite(M)||Math.floor(M)!==M||M<0)throw new E(y?_:"highWaterMark",M);return Math.floor(M)}return A.objectMode?16:16384}}},3951:(ne,Z,g)=>{ne.exports=g(2016).EventEmitter},2024:(ne,Z,g)=>{"use strict";var E=g(4282).Buffer,b=E.isEncoding||function(ie){switch((ie=""+ie)&&ie.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function P(ie){var $;switch(this.encoding=function A(ie){var $=function R(ie){if(!ie)return"utf8";for(var $;;)switch(ie){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ie;default:if($)return;ie=(""+ie).toLowerCase(),$=!0}}(ie);if("string"!=typeof $&&(E.isEncoding===b||!b(ie)))throw new Error("Unknown encoding: "+ie);return $||ie}(ie),this.encoding){case"utf16le":this.text=le,this.end=k,$=4;break;case"utf8":this.fillLast=U,$=4;break;case"base64":this.text=X,this.end=ce,$=3;break;default:return this.write=Y,void(this.end=oe)}this.lastNeed=0,this.lastTotal=0,this.lastChar=E.allocUnsafe($)}function _(ie){return ie<=127?0:ie>>5==6?2:ie>>4==14?3:ie>>3==30?4:ie>>6==2?-1:-2}function U(ie){var $=this.lastTotal-this.lastNeed,H=function M(ie,$,H){if(128!=(192&$[0]))return ie.lastNeed=0,"\ufffd";if(ie.lastNeed>1&&$.length>1){if(128!=(192&$[1]))return ie.lastNeed=1,"\ufffd";if(ie.lastNeed>2&&$.length>2&&128!=(192&$[2]))return ie.lastNeed=2,"\ufffd"}}(this,ie);return void 0!==H?H:this.lastNeed<=ie.length?(ie.copy(this.lastChar,$,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ie.copy(this.lastChar,$,0,ie.length),void(this.lastNeed-=ie.length))}function le(ie,$){if((ie.length-$)%2==0){var H=ie.toString("utf16le",$);if(H){var v=H.charCodeAt(H.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ie[ie.length-2],this.lastChar[1]=ie[ie.length-1],H.slice(0,-1)}return H}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ie[ie.length-1],ie.toString("utf16le",$,ie.length-1)}function k(ie){var $=ie&&ie.length?this.write(ie):"";return this.lastNeed?$+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):$}function X(ie,$){var H=(ie.length-$)%3;return 0===H?ie.toString("base64",$):(this.lastNeed=3-H,this.lastTotal=3,1===H?this.lastChar[0]=ie[ie.length-1]:(this.lastChar[0]=ie[ie.length-2],this.lastChar[1]=ie[ie.length-1]),ie.toString("base64",$,ie.length-H))}function ce(ie){var $=ie&&ie.length?this.write(ie):"";return this.lastNeed?$+this.lastChar.toString("base64",0,3-this.lastNeed):$}function Y(ie){return ie.toString(this.encoding)}function oe(ie){return ie&&ie.length?this.write(ie):""}Z.StringDecoder=P,P.prototype.write=function(ie){if(0===ie.length)return"";var $,H;if(this.lastNeed){if(void 0===($=this.fillLast(ie)))return"";H=this.lastNeed,this.lastNeed=0}else H=0;return H<ie.length?$?$+this.text(ie,H):this.text(ie,H):$||""},P.prototype.end=function j(ie){var $=ie&&ie.length?this.write(ie):"";return this.lastNeed?$+"\ufffd":$},P.prototype.text=function N(ie,$){var H=function y(ie,$,H){var v=$.length-1;if(v<H)return 0;var L=_($[v]);return L>=0?(L>0&&(ie.lastNeed=L-1),L):--v<H||-2===L?0:(L=_($[v]))>=0?(L>0&&(ie.lastNeed=L-2),L):--v<H||-2===L?0:(L=_($[v]))>=0?(L>0&&(2===L?L=0:ie.lastNeed=L-3),L):0}(this,ie,$);if(!this.lastNeed)return ie.toString("utf8",$);this.lastTotal=H;var v=ie.length-(H-this.lastNeed);return ie.copy(this.lastChar,0,v),ie.toString("utf8",$,v)},P.prototype.fillLast=function(ie){if(this.lastNeed<=ie.length)return ie.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ie.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ie.length),this.lastNeed-=ie.length}},4282:(ne,Z,g)=>{var E=g(9007),b=E.Buffer;function R(P,_){for(var y in P)_[y]=P[y]}function A(P,_,y){return b(P,_,y)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?ne.exports=E:(R(E,Z),Z.Buffer=A),A.prototype=Object.create(b.prototype),R(b,A),A.from=function(P,_,y){if("number"==typeof P)throw new TypeError("Argument must not be a number");return b(P,_,y)},A.alloc=function(P,_,y){if("number"!=typeof P)throw new TypeError("Argument must be a number");var M=b(P);return void 0!==_?"string"==typeof y?M.fill(_,y):M.fill(_):M.fill(0),M},A.allocUnsafe=function(P){if("number"!=typeof P)throw new TypeError("Argument must be a number");return b(P)},A.allocUnsafeSlow=function(P){if("number"!=typeof P)throw new TypeError("Argument must be a number");return E.SlowBuffer(P)}},496:ne=>{function g(E){try{if(!global.localStorage)return!1}catch{return!1}var b=global.localStorage[E];return null!=b&&"true"===String(b).toLowerCase()}ne.exports=function Z(E,b){if(g("noDeprecation"))return E;var R=!1;return function A(){if(!R){if(g("throwDeprecation"))throw new Error(b);g("traceDeprecation")?console.trace(b):console.warn(b),R=!0}return E.apply(this,arguments)}}},1171:ne=>{"use strict";ne.exports=function(Z){Z.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},4439:(ne,Z,g)=>{"use strict";function E(_){var y=this;if(y instanceof E||(y=new E),y.tail=null,y.head=null,y.length=0,_&&"function"==typeof _.forEach)_.forEach(function(N){y.push(N)});else if(arguments.length>0)for(var M=0,U=arguments.length;M<U;M++)y.push(arguments[M]);return y}function b(_,y,M){var U=y===_.head?new P(M,null,y,_):new P(M,y,y.next,_);return null===U.next&&(_.tail=U),null===U.prev&&(_.head=U),_.length++,U}function R(_,y){_.tail=new P(y,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function A(_,y){_.head=new P(y,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function P(_,y,M,U){if(!(this instanceof P))return new P(_,y,M,U);this.list=U,this.value=_,y?(y.next=this,this.prev=y):this.prev=null,M?(M.prev=this,this.next=M):this.next=null}ne.exports=E,E.Node=P,E.create=E,E.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var y=_.next,M=_.prev;return y&&(y.prev=M),M&&(M.next=y),_===this.head&&(this.head=y),_===this.tail&&(this.tail=M),_.list.length--,_.next=null,_.prev=null,_.list=null,y},E.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var y=this.head;_.list=this,_.next=y,y&&(y.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},E.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var y=this.tail;_.list=this,_.prev=y,y&&(y.next=_),this.tail=_,this.head||(this.head=_),this.length++}},E.prototype.push=function(){for(var _=0,y=arguments.length;_<y;_++)R(this,arguments[_]);return this.length},E.prototype.unshift=function(){for(var _=0,y=arguments.length;_<y;_++)A(this,arguments[_]);return this.length},E.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},E.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},E.prototype.forEach=function(_,y){y=y||this;for(var M=this.head,U=0;null!==M;U++)_.call(y,M.value,U,this),M=M.next},E.prototype.forEachReverse=function(_,y){y=y||this;for(var M=this.tail,U=this.length-1;null!==M;U--)_.call(y,M.value,U,this),M=M.prev},E.prototype.get=function(_){for(var y=0,M=this.head;null!==M&&y<_;y++)M=M.next;if(y===_&&null!==M)return M.value},E.prototype.getReverse=function(_){for(var y=0,M=this.tail;null!==M&&y<_;y++)M=M.prev;if(y===_&&null!==M)return M.value},E.prototype.map=function(_,y){y=y||this;for(var M=new E,U=this.head;null!==U;)M.push(_.call(y,U.value,this)),U=U.next;return M},E.prototype.mapReverse=function(_,y){y=y||this;for(var M=new E,U=this.tail;null!==U;)M.push(_.call(y,U.value,this)),U=U.prev;return M},E.prototype.reduce=function(_,y){var M,U=this.head;if(arguments.length>1)M=y;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");U=this.head.next,M=this.head.value}for(var N=0;null!==U;N++)M=_(M,U.value,N),U=U.next;return M},E.prototype.reduceReverse=function(_,y){var M,U=this.tail;if(arguments.length>1)M=y;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");U=this.tail.prev,M=this.tail.value}for(var N=this.length-1;null!==U;N--)M=_(M,U.value,N),U=U.prev;return M},E.prototype.toArray=function(){for(var _=new Array(this.length),y=0,M=this.head;null!==M;y++)_[y]=M.value,M=M.next;return _},E.prototype.toArrayReverse=function(){for(var _=new Array(this.length),y=0,M=this.tail;null!==M;y++)_[y]=M.value,M=M.prev;return _},E.prototype.slice=function(_,y){(y=y||this.length)<0&&(y+=this.length),(_=_||0)<0&&(_+=this.length);var M=new E;if(y<_||y<0)return M;_<0&&(_=0),y>this.length&&(y=this.length);for(var U=0,N=this.head;null!==N&&U<_;U++)N=N.next;for(;null!==N&&U<y;U++,N=N.next)M.push(N.value);return M},E.prototype.sliceReverse=function(_,y){(y=y||this.length)<0&&(y+=this.length),(_=_||0)<0&&(_+=this.length);var M=new E;if(y<_||y<0)return M;_<0&&(_=0),y>this.length&&(y=this.length);for(var U=this.length,N=this.tail;null!==N&&U>y;U--)N=N.prev;for(;null!==N&&U>_;U--,N=N.prev)M.push(N.value);return M},E.prototype.splice=function(_,y,...M){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var U=0,N=this.head;null!==N&&U<_;U++)N=N.next;var j=[];for(U=0;N&&U<y;U++)j.push(N.value),N=this.removeNode(N);for(null===N&&(N=this.tail),N!==this.head&&N!==this.tail&&(N=N.prev),U=0;U<M.length;U++)N=b(this,N,M[U]);return j},E.prototype.reverse=function(){for(var _=this.head,y=this.tail,M=_;null!==M;M=M.prev){var U=M.prev;M.prev=M.next,M.next=U}return this.head=y,this.tail=_,this};try{g(1171)(E)}catch{}},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(ne,Z,g)=>{var E=g(3801);function b(R){var A,P;function _(M,U){try{var N=R[M](U),j=N.value,le=j instanceof E;Promise.resolve(le?j.v:j).then(function(k){if(le){var X="return"===M?"return":"next";if(!j.k||k.done)return _(X,k);k=R[X](k).value}y(N.done?"return":"normal",k)},function(k){_("throw",k)})}catch(k){y("throw",k)}}function y(M,U){switch(M){case"return":A.resolve({value:U,done:!0});break;case"throw":A.reject(U);break;default:A.resolve({value:U,done:!1})}(A=A.next)?_(A.key,A.arg):P=null}this._invoke=function(M,U){return new Promise(function(N,j){var le={key:M,arg:U,resolve:N,reject:j,next:null};P?P=P.next=le:(A=P=le,_(M,U))})},"function"!=typeof R.return&&(this.return=void 0)}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(R){return this._invoke("next",R)},b.prototype.throw=function(R){return this._invoke("throw",R)},b.prototype.return=function(R){return this._invoke("return",R)},ne.exports=b,ne.exports.__esModule=!0,ne.exports.default=ne.exports},3801:ne=>{ne.exports=function Z(g,E){this.v=g,this.k=E},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8131:(ne,Z,g)=>{var E=g(3801);ne.exports=function b(R){var A={},P=!1;function _(y,M){return P=!0,M=new Promise(function(U){U(R[y](M))}),{done:!1,value:new E(M,1)}}return A[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},A.next=function(y){return P?(P=!1,y):_("next",y)},"function"==typeof R.throw&&(A.throw=function(y){if(P)throw P=!1,y;return _("throw",y)}),"function"==typeof R.return&&(A.return=function(y){return P?(P=!1,y):_("return",y)}),A},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8237:ne=>{function g(E){function b(R){if(Object(R)!==R)return Promise.reject(new TypeError(R+" is not an object."));var A=R.done;return Promise.resolve(R.value).then(function(P){return{value:P,done:A}})}return(g=function(A){this.s=A,this.n=A.next}).prototype={s:null,n:null,next:function(){return b(this.n.apply(this.s,arguments))},return:function(A){var P=this.s.return;return void 0===P?Promise.resolve({value:A,done:!0}):b(P.apply(this.s,arguments))},throw:function(A){var P=this.s.return;return void 0===P?Promise.reject(A):b(P.apply(this.s,arguments))}},new g(E)}ne.exports=function Z(E){var b,R,A,P=2;for(typeof Symbol<"u"&&(R=Symbol.asyncIterator,A=Symbol.iterator);P--;){if(R&&null!=(b=E[R]))return b.call(E);if(A&&null!=(b=E[A]))return new g(b.call(E));R="@@asyncIterator",A="@@iterator"}throw new TypeError("Object is not async iterable")},ne.exports.__esModule=!0,ne.exports.default=ne.exports},7156:ne=>{function Z(E,b,R,A,P,_,y){try{var M=E[_](y),U=M.value}catch(N){return void R(N)}M.done?b(U):Promise.resolve(U).then(A,P)}ne.exports=function g(E){return function(){var b=this,R=arguments;return new Promise(function(A,P){var _=E.apply(b,R);function y(U){Z(_,A,P,y,M,"next",U)}function M(U){Z(_,A,P,y,M,"throw",U)}y(void 0)})}},ne.exports.__esModule=!0,ne.exports.default=ne.exports},6737:(ne,Z,g)=>{var E=g(3801);ne.exports=function b(R){return new E(R,0)},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8186:(ne,Z,g)=>{var E=g(4642);ne.exports=function b(R){return function(){return new E(R.apply(this,arguments))}},ne.exports.__esModule=!0,ne.exports.default=ne.exports}},ne=>{ne(ne.s=9941)}]);