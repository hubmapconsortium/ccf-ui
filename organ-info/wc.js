(()=>{"use strict";var e,d={},v={};function a(e){var n=v[e];if(void 0!==n)return n.exports;var r=v[e]={id:e,loaded:!1,exports:{}};return d[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=d,e=[],a.O=(n,r,u,l)=>{if(!r){var c=1/0;for(t=0;t<e.length;t++){for(var[r,u,l]=e[t],i=!0,f=0;f<r.length;f++)(!1&l||c>=l)&&Object.keys(a.O).every(b=>a.O[b](r[f]))?r.splice(f--,1):(i=!1,l<c&&(c=l));if(i){e.splice(t--,1);var o=u();void 0!==o&&(n=o)}}return n}l=l||0;for(var t=e.length;t>0&&e[t-1][2]>l;t--)e[t]=e[t-1];e[t]=[r,u,l]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var r in n)a.o(n,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};a.O.j=u=>0===e[u];var n=(u,l)=>{var f,o,[t,c,i]=l,s=0;for(f in c)a.o(c,f)&&(a.m[f]=c[f]);if(i)var _=i(a);for(u&&u(l);s<t.length;s++)a.o(e,o=t[s])&&e[o]&&e[o][0](),e[t[s]]=0;return a.O(_)},r=self.webpackChunkccf_ui=self.webpackChunkccf_ui||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})()})();
(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[429],{4138:()=>{!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const G=HTMLElement;window.HTMLElement=function(){return Reflect.construct(G,[],this.constructor)},HTMLElement.prototype=G.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,G)}()}()},142:()=>{!function(G,ne){"use strict";function he(){var e=Ge.splice(0,Ge.length);for(V=0;e.length;)e.shift().call(null,e.shift())}function ye(e,r){for(var i=0,h=e.length;i<h;i++)je(e[i],r)}function Ve(e){return function(r){L(r)&&(je(r,e),le.length&&ye(r.querySelectorAll(le),e))}}function Ie(e){var r=R.call(e,"is"),i=e.nodeName.toUpperCase(),h=Te.call(Ne,r?st+r.toUpperCase():Xe+i);return r&&-1<h&&!Ze(i,r)?-1:h}function Ze(e,r){return-1<le.indexOf(e+'[is="'+r+'"]')}function Ue(e){var r=e.currentTarget,i=e.attrChange,h=e.attrName,s=e.target,o=e[ot]||2,l=e[pt]||3;!n||s&&s!==r||!r[Ee]||"style"===h||e.prevValue===e.newValue&&(""!==e.newValue||i!==o&&i!==l)||r[Ee](h,i===o?null:e.prevValue,i===l?null:e.newValue)}function et(e){var r=Ve(e);return function(i){Ge.push(r,i.target),V&&clearTimeout(V),V=setTimeout(he,1)}}function de(e){k&&(k=!1,e.currentTarget.removeEventListener(bt,de)),le.length&&ye((e.target||A).querySelectorAll(le),e.detail===pe?pe:Le),z&&function(){for(var e,r=0,i=T.length;r<i;r++)De.contains(e=T[r])||(i--,T.splice(r--,1),je(e,pe))}()}function ve(e,r){var i=this;$.call(i,e,r),xe.call(i,{target:i})}function Ae(e,r,i){var h=r.apply(e,i),s=Ie(h);return-1<s&&ae(h,Ye[s]),i.pop()&&le.length&&function(e){for(var r,i=0,h=e.length;i<h;i++)ae(r=e[i],Ye[Ie(r)])}(h.querySelectorAll(le)),h}function Be(e,r){b(e,r),We?We.observe(e,oe):(I&&(e.setAttribute=ve,e[me]=nt(e),e[be](Et,xe)),e[be](He,Ue)),e[qe]&&n&&(e.created=!0,e[qe](),e.created=!1)}function U(e){throw new Error("A "+e+" type is already registered")}function je(e,r){var i,h,s=Ie(e);-1<s&&!B.call(e,"TEMPLATE")&&(we(e,Ye[s]),s=0,r!==Le||e[Le]?r!==pe||e[pe]||(e[Le]=!1,e[pe]=!0,h="disconnected",s=1):(e[pe]=!1,e[Le]=!0,h="connected",s=1,z&&Te.call(T,e)<0&&T.push(e)),s&&(i=e[r+ce]||e[h+ce])&&i.call(e))}function ke(){}function J(e,r,i){var h=i&&i[te]||"",s=r.prototype,o=w(s),l=r.observedAttributes||Oe,d={prototype:o};x(o,qe,{value:function(){if(f)f=!1;else if(!this[Je]){this[Je]=!0,new r(this),s[qe]&&s[qe].call(this);var p=m[v.get(r)];(!t||p.create.length>1)&&tt(this)}}}),x(o,Ee,{value:function(p){-1<Te.call(l,p)&&s[Ee]&&s[Ee].apply(this,arguments)}}),s[rt]&&x(o,vt,{value:s[rt]}),s[mt]&&x(o,kt,{value:s[mt]}),h&&(d[te]=h),e=e.toUpperCase(),m[e]={constructor:r,create:h?[h,C(e)]:[e]},v.set(r,e),A[se](e.toLowerCase(),d),ut(e),E[e].r()}function gt(e){var r=m[e.toUpperCase()];return r&&r.constructor}function yt(e){return"string"==typeof e?e:e&&e.is||""}function tt(e){for(var r,i=e[Ee],h=i?e.attributes:Oe,s=h.length;s--;)i.call(e,(r=h[s]).name||r.nodeName,null,r.value||r.nodeValue)}function ut(e){return(e=e.toUpperCase())in E||(E[e]={},E[e].p=new c(function(r){E[e].r=r})),E[e].p}function ft(){Me&&delete G.customElements,Re(G,"customElements",{configurable:!0,value:new ke}),Re(G,"CustomElementRegistry",{configurable:!0,value:ke});for(var e=ht.get(/^HTML[A-Z]*[a-z]/),r=e.length;r--;function(i){var h=G[i];if(h){G[i]=function(s){var o,l;return s||(s=this),s[Je]||(f=!0,o=m[v.get(s.constructor)],(s=(l=t&&1===o.create.length)?Reflect.construct(h,Oe,o.constructor):A.createElement.apply(A,o.create))[Je]=!0,f=!1,l||tt(s)),s},G[i].prototype=h.prototype;try{h.prototype.constructor=G[i]}catch(s){Re(h,Je,{value:G[i]})}}}(e[r]));A.createElement=function(i,h){var s=yt(h);return s?H.call(this,i,C(s)):H.call(this,i)},ue||(X=!0,A[se](""))}var A=G.document,re=G.Object,ht=function(e){var r,i,h,s,o=/^[A-Z]+[a-z]/,d=function(_,g){(g=g.toLowerCase())in p||(p[_]=(p[_]||[]).concat(g),p[g]=p[g.toUpperCase()]=_)},p=(re.create||re)(null),y={};for(i in e)for(s in e[i])for(p[s]=h=e[i][s],r=0;r<h.length;r++)p[h[r].toLowerCase()]=p[h[r].toUpperCase()]=s;return y.get=function(_){return"string"==typeof _?p[_]||(o.test(_)?[]:""):function(_){var g,M=[];for(g in p)_.test(g)&&M.push(g);return M}(_)},y.set=function(_,g){return o.test(_)?d(_,g):d(g,_),y},y}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof ne&&(ne={type:ne||"auto"});var Ge,xe,ze,nt,We,ie,we,ae,Ce,e,r,i,h,s,se="registerElement",dt=1e5*G.Math.random()>>0,me="__"+se+dt,be="addEventListener",Le="attached",ce="Callback",pe="detached",te="extends",Ee="attributeChanged"+ce,vt=Le+ce,rt="connected"+ce,mt="disconnected"+ce,qe="created"+ce,kt=pe+ce,ot="ADDITION",pt="REMOVAL",He="DOMAttrModified",bt="DOMContentLoaded",Et="DOMSubtreeModified",Xe="<",st="=",Mt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,wt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Ne=[],Ye=[],le="",De=A.documentElement,Te=Ne.indexOf||function(e){for(var r=this.length;r--&&this[r]!==e;);return r},it=re.prototype,Pe=it.hasOwnProperty,at=it.isPrototypeOf,Re=re.defineProperty,Oe=[],Ke=re.getOwnPropertyDescriptor,Y=re.getOwnPropertyNames,Ct=re.getPrototypeOf,$e=re.setPrototypeOf,Se=!!re.__proto__,Je="__dreCEv1",Me=G.customElements,t=!/^force/.test(ne.type)&&!!(Me&&Me.define&&Me.get&&Me.whenDefined),a=re.create||re,u=G.Map||function(){var e,r=[],i=[];return{get:function(h){return i[Te.call(r,h)]},set:function(h,s){(e=Te.call(r,h))<0?i[r.push(h)-1]=s:i[e]=s}}},c=G.Promise||function(e){function r(o){for(h=!0;i.length;)i.shift()(o)}var i=[],h=!1,s={catch:function(){return s},then:function(o){return i.push(o),h&&setTimeout(r,1),s}};return e(r),s},f=!1,m=a(null),E=a(null),v=new u,C=function(e){return e.toLowerCase()},w=re.create||function e(r){return r?(e.prototype=r,new e):this},b=$e||(Se?function(e,r){return e.__proto__=r,e}:Y&&Ke?function(){function e(r,i){for(var h,s=Y(i),o=0,l=s.length;o<l;o++)Pe.call(r,h=s[o])||Re(r,h,Ke(i,h))}return function(r,i){do{e(r,i)}while((i=Ct(i))&&!at.call(i,r));return r}}():function(e,r){for(var i in r)e[i]=r[i];return e}),N=G.MutationObserver||G.WebKitMutationObserver,S=G.HTMLAnchorElement,P=(G.HTMLElement||G.Element||G.Node).prototype,z=!at.call(P,De),x=z?function(e,r,i){return e[r]=i.value,e}:Re,L=z?function(e){return 1===e.nodeType}:function(e){return at.call(P,e)},T=z&&[],Z=P.attachShadow,W=P.cloneNode,B=P.closest||function(e){for(var r=this;r&&r.nodeName!==e;)r=r.parentNode;return r},K=P.dispatchEvent,R=P.getAttribute,Q=P.hasAttribute,F=P.removeAttribute,$=P.setAttribute,O=A.createElement,j=A.importNode,H=O,oe=N&&{attributes:!0,characterData:!0,attributeOldValue:!0},_e=N||function(e){I=!1,De.removeEventListener(He,_e)},V=0,ue=se in A&&!/^force-all/.test(ne.type),fe=!0,X=!1,I=!0,k=!0,n=!0;if(N&&((Ce=A.createElement("div")).innerHTML="<div><div></div></div>",new N(function(e,r){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var i=(Ce=Ke(P,"innerHTML"))&&Ce.set;i&&Re(P,"innerHTML",{set:function(h){for(;this.lastChild;)this.removeChild(this.lastChild);i.call(this,h)}})}r.disconnect(),Ce=null}).observe(Ce,{childList:!0,subtree:!0}),Ce.innerHTML=""),ue||($e||Se?(we=function(e,r){at.call(r,e)||Be(e,r)},ae=Be):ae=we=function(e,r){e[me]||(e[me]=re(!0),Be(e,r))},z?(I=!1,e=Ke(P,be),r=e.value,i=function(o){var l=new CustomEvent(He,{bubbles:!0});l.attrName=o,l.prevValue=R.call(this,o),l.newValue=null,l[pt]=l.attrChange=2,F.call(this,o),K.call(this,l)},h=function(o,l){var d=Q.call(this,o),p=d&&R.call(this,o),y=new CustomEvent(He,{bubbles:!0});$.call(this,o,l),y.attrName=o,y.prevValue=d?p:null,y.newValue=l,d?y.MODIFICATION=y.attrChange=1:y[ot]=y.attrChange=0,K.call(this,y)},s=function(o){var l,d=o.currentTarget,p=d[me],y=o.propertyName;p.hasOwnProperty(y)&&(p=p[y],(l=new CustomEvent(He,{bubbles:!0})).attrName=p.name,l.prevValue=p.value||null,l.newValue=p.value=d[y]||null,null==l.prevValue?l[ot]=l.attrChange=0:l.MODIFICATION=l.attrChange=1,K.call(d,l))},e.value=function(o,l,d){o===He&&this[Ee]&&this.setAttribute!==h&&(this[me]={className:{name:"class",value:this.className}},this.setAttribute=h,this.removeAttribute=i,r.call(this,"propertychange",s)),r.call(this,o,l,d)},Re(P,be,e)):N||(De[be](He,_e),De.setAttribute(me,1),De.removeAttribute(me),I&&(xe=function(e){var r,i,h,s=this;if(s===e.target){for(h in r=s[me],s[me]=i=nt(s),i){if(!(h in r))return ze(0,s,h,r[h],i[h],ot);if(i[h]!==r[h])return ze(1,s,h,r[h],i[h],"MODIFICATION")}for(h in r)if(!(h in i))return ze(2,s,h,r[h],i[h],pt)}},ze=function(e,r,i,h,s,o){var l={attrChange:e,currentTarget:r,attrName:i,prevValue:h,newValue:s};l[o]=e,Ue(l)},nt=function(e){for(var r,i,h={},s=e.attributes,o=0,l=s.length;o<l;o++)"setAttribute"!==(i=(r=s[o]).name)&&(h[i]=r.value);return h})),A[se]=function(e,r){if(i=e.toUpperCase(),fe&&(fe=!1,N?(We=function(p,y){function _(g,M){for(var D=0,q=g.length;D<q;M(g[D++]));}return new N(function(g){for(var M,D,q,ee=0,ge=g.length;ee<ge;ee++)"childList"===(M=g[ee]).type?(_(M.addedNodes,p),_(M.removedNodes,y)):(D=M.target,n&&D[Ee]&&"style"!==M.attributeName&&(q=R.call(D,M.attributeName))!==M.oldValue&&D[Ee](M.attributeName,M.oldValue,q))})}(Ve(Le),Ve(pe)),(ie=function(p){return We.observe(p,{childList:!0,subtree:!0}),p})(A),Z&&(P.attachShadow=function(){return ie(Z.apply(this,arguments))})):(Ge=[],A[be]("DOMNodeInserted",et(Le)),A[be]("DOMNodeRemoved",et(pe))),A[be](bt,de),A[be]("readystatechange",de),A.importNode=function(p,y){switch(p.nodeType){case 1:return Ae(A,j,[p,!!y]);case 11:for(var _=A.createDocumentFragment(),g=p.childNodes,M=g.length,D=0;D<M;D++)_.appendChild(A.importNode(g[D],!!y));return _;default:return W.call(p,!!y)}},P.cloneNode=function(p){return Ae(this,W,[!!p])}),X)return X=!1;if(-2<Te.call(Ne,st+i)+Te.call(Ne,Xe+i)&&U(e),!Mt.test(i)||-1<Te.call(wt,i))throw new Error("The type "+e+" is invalid");var i,h,s=function(){return l?A.createElement(d,i):A.createElement(d)},o=r||it,l=Pe.call(o,te),d=l?r[te].toUpperCase():i;return l&&-1<Te.call(Ne,Xe+d)&&U(d),h=Ne.push((l?st:Xe)+i)-1,le=le.concat(le.length?",":"",l?d+'[is="'+e.toLowerCase()+'"]':d),s.prototype=Ye[h]=Pe.call(o,"prototype")?o.prototype:w(P),le.length&&ye(A.querySelectorAll(le),Le),s},A.createElement=H=function(e,r){var i=yt(r),h=i?O.call(A,e,C(i)):O.call(A,e),s=""+e,o=Te.call(Ne,(i?st:Xe)+(i||s).toUpperCase()),l=-1<o;return i&&(h.setAttribute("is",i=i.toLowerCase()),l&&(l=Ze(s.toUpperCase(),i))),n=!A.createElement.innerHTMLHelper,l&&ae(h,Ye[o]),h}),addEventListener("beforeunload",function(){delete A.createElement,delete A.importNode,delete A[se]},!1),ke.prototype={constructor:ke,define:t?function(e,r,i){if(i)J(e,r,i);else{var h=e.toUpperCase();m[h]={constructor:r,create:[h]},v.set(r,h),Me.define(e,r)}}:J,get:t?function(e){return Me.get(e)||gt(e)}:gt,whenDefined:t?function(e){return c.race([Me.whenDefined(e),ut(e)])}:ut},!Me||/^force/.test(ne.type))ft();else if(!ne.noBuiltIn)try{!function(e,r,i){var h=new RegExp("^<a\\s+is=('|\")"+i+"\\1></a>$");if(r[te]="a",(e.prototype=w(S.prototype)).constructor=e,G.customElements.define(i,e,r),!h.test(A.createElement("a",{is:i}).outerHTML)||!h.test((new e).outerHTML))throw r}(function e(){return Reflect.construct(S,[],e)},{},"document-register-element-a"+dt)}catch(e){ft()}if(!ne.noBuiltIn)try{if(O.call(A,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){C=function(r){return{is:r.toLowerCase()}}}}(window)},7277:()=>{"use strict";!function(t){const a=t.performance;function u(I){a&&a.mark&&a.mark(I)}function c(I,k){a&&a.measure&&a.measure(I,k)}u("Zone");const f=t.__Zone_symbol_prefix||"__zone_symbol__";function m(I){return f+I}const E=!0===t[m("forceDuplicateZoneCheck")];if(t.Zone){if(E||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}let v=(()=>{class I{constructor(n,e){this._parent=n,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new w(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let n=I.current;for(;n.parent;)n=n.parent;return n}static get current(){return V.zone}static get currentTask(){return ue}static __load_patch(n,e,r=!1){if(oe.hasOwnProperty(n)){if(!r&&E)throw Error("Already loaded patch: "+n)}else if(!t["__Zone_disable_"+n]){const i="Zone:"+n;u(i),oe[n]=e(t,I,_e),c(i,i)}}get parent(){return this._parent}get name(){return this._name}get(n){const e=this.getZoneWith(n);if(e)return e._properties[n]}getZoneWith(n){let e=this;for(;e;){if(e._properties.hasOwnProperty(n))return e;e=e._parent}return null}fork(n){if(!n)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,n)}wrap(n,e){if("function"!=typeof n)throw new Error("Expecting function got: "+n);const r=this._zoneDelegate.intercept(this,n,e),i=this;return function(){return i.runGuarded(r,this,arguments,e)}}run(n,e,r,i){V={parent:V,zone:this};try{return this._zoneDelegate.invoke(this,n,e,r,i)}finally{V=V.parent}}runGuarded(n,e=null,r,i){V={parent:V,zone:this};try{try{return this._zoneDelegate.invoke(this,n,e,r,i)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{V=V.parent}}runTask(n,e,r){if(n.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");if(n.state===B&&(n.type===H||n.type===j))return;const i=n.state!=Q;i&&n._transitionTo(Q,R),n.runCount++;const h=ue;ue=n,V={parent:V,zone:this};try{n.type==j&&n.data&&!n.data.isPeriodic&&(n.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,n,e,r)}catch(s){if(this._zoneDelegate.handleError(this,s))throw s}}finally{n.state!==B&&n.state!==$&&(n.type==H||n.data&&n.data.isPeriodic?i&&n._transitionTo(R,Q):(n.runCount=0,this._updateTaskCount(n,-1),i&&n._transitionTo(B,Q,B))),V=V.parent,ue=h}}scheduleTask(n){if(n.zone&&n.zone!==this){let r=this;for(;r;){if(r===n.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);r=r.parent}}n._transitionTo(K,B);const e=[];n._zoneDelegates=e,n._zone=this;try{n=this._zoneDelegate.scheduleTask(this,n)}catch(r){throw n._transitionTo($,K,B),this._zoneDelegate.handleError(this,r),r}return n._zoneDelegates===e&&this._updateTaskCount(n,1),n.state==K&&n._transitionTo(R,K),n}scheduleMicroTask(n,e,r,i){return this.scheduleTask(new b(O,n,e,r,i,void 0))}scheduleMacroTask(n,e,r,i,h){return this.scheduleTask(new b(j,n,e,r,i,h))}scheduleEventTask(n,e,r,i,h){return this.scheduleTask(new b(H,n,e,r,i,h))}cancelTask(n){if(n.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");n._transitionTo(F,R,Q);try{this._zoneDelegate.cancelTask(this,n)}catch(e){throw n._transitionTo($,F),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(n,-1),n._transitionTo(B,F),n.runCount=0,n}_updateTaskCount(n,e){const r=n._zoneDelegates;-1==e&&(n._zoneDelegates=null);for(let i=0;i<r.length;i++)r[i]._updateTaskCount(n.type,e)}}return I.__symbol__=m,I})();const C={name:"",onHasTask:(I,k,n,e)=>I.hasTask(n,e),onScheduleTask:(I,k,n,e)=>I.scheduleTask(n,e),onInvokeTask:(I,k,n,e,r,i)=>I.invokeTask(n,e,r,i),onCancelTask:(I,k,n,e)=>I.cancelTask(n,e)};class w{constructor(k,n,e){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=k,this._parentDelegate=n,this._forkZS=e&&(e&&e.onFork?e:n._forkZS),this._forkDlgt=e&&(e.onFork?n:n._forkDlgt),this._forkCurrZone=e&&(e.onFork?this.zone:n._forkCurrZone),this._interceptZS=e&&(e.onIntercept?e:n._interceptZS),this._interceptDlgt=e&&(e.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=e&&(e.onIntercept?this.zone:n._interceptCurrZone),this._invokeZS=e&&(e.onInvoke?e:n._invokeZS),this._invokeDlgt=e&&(e.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=e&&(e.onInvoke?this.zone:n._invokeCurrZone),this._handleErrorZS=e&&(e.onHandleError?e:n._handleErrorZS),this._handleErrorDlgt=e&&(e.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=e&&(e.onHandleError?this.zone:n._handleErrorCurrZone),this._scheduleTaskZS=e&&(e.onScheduleTask?e:n._scheduleTaskZS),this._scheduleTaskDlgt=e&&(e.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=e&&(e.onScheduleTask?this.zone:n._scheduleTaskCurrZone),this._invokeTaskZS=e&&(e.onInvokeTask?e:n._invokeTaskZS),this._invokeTaskDlgt=e&&(e.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=e&&(e.onInvokeTask?this.zone:n._invokeTaskCurrZone),this._cancelTaskZS=e&&(e.onCancelTask?e:n._cancelTaskZS),this._cancelTaskDlgt=e&&(e.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=e&&(e.onCancelTask?this.zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=e&&e.onHasTask;(r||n&&n._hasTaskZS)&&(this._hasTaskZS=r?e:C,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=k,e.onScheduleTask||(this._scheduleTaskZS=C,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this.zone),e.onInvokeTask||(this._invokeTaskZS=C,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this.zone),e.onCancelTask||(this._cancelTaskZS=C,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this.zone))}fork(k,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,k,n):new v(k,n)}intercept(k,n,e){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,k,n,e):n}invoke(k,n,e,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,k,n,e,r,i):n.apply(e,r)}handleError(k,n){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,k,n)}scheduleTask(k,n){let e=n;if(this._scheduleTaskZS)this._hasTaskZS&&e._zoneDelegates.push(this._hasTaskDlgtOwner),e=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,k,n),e||(e=n);else if(n.scheduleFn)n.scheduleFn(n);else{if(n.type!=O)throw new Error("Task is missing scheduleFn.");T(n)}return e}invokeTask(k,n,e,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,k,n,e,r):n.callback.apply(e,r)}cancelTask(k,n){let e;if(this._cancelTaskZS)e=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,k,n);else{if(!n.cancelFn)throw Error("Task is not cancelable");e=n.cancelFn(n)}return e}hasTask(k,n){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,k,n)}catch(e){this.handleError(k,e)}}_updateTaskCount(k,n){const e=this._taskCounts,r=e[k],i=e[k]=r+n;if(i<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=i||this.hasTask(this.zone,{microTask:e.microTask>0,macroTask:e.macroTask>0,eventTask:e.eventTask>0,change:k})}}class b{constructor(k,n,e,r,i,h){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=k,this.source=n,this.data=r,this.scheduleFn=i,this.cancelFn=h,!e)throw new Error("callback is not defined");this.callback=e;const s=this;this.invoke=k===H&&r&&r.useG?b.invokeTask:function(){return b.invokeTask.call(t,s,this,arguments)}}static invokeTask(k,n,e){k||(k=this),fe++;try{return k.runCount++,k.zone.runTask(k,n,e)}finally{1==fe&&Z(),fe--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(B,K)}_transitionTo(k,n,e){if(this._state!==n&&this._state!==e)throw new Error(`${this.type} '${this.source}': can not transition to '${k}', expecting state '${n}'${e?" or '"+e+"'":""}, was '${this._state}'.`);this._state=k,k==B&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const N=m("setTimeout"),S=m("Promise"),P=m("then");let L,z=[],x=!1;function T(I){if(0===fe&&0===z.length)if(L||t[S]&&(L=t[S].resolve(0)),L){let k=L[P];k||(k=L.then),k.call(L,Z)}else t[N](Z,0);I&&z.push(I)}function Z(){if(!x){for(x=!0;z.length;){const I=z;z=[];for(let k=0;k<I.length;k++){const n=I[k];try{n.zone.runTask(n,null,null)}catch(e){_e.onUnhandledError(e)}}}_e.microtaskDrainDone(),x=!1}}const W={name:"NO ZONE"},B="notScheduled",K="scheduling",R="scheduled",Q="running",F="canceling",$="unknown",O="microTask",j="macroTask",H="eventTask",oe={},_e={symbol:m,currentZoneFrame:()=>V,onUnhandledError:X,microtaskDrainDone:X,scheduleMicroTask:T,showUncaughtError:()=>!v[m("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:X,patchMethod:()=>X,bindArguments:()=>[],patchThen:()=>X,patchMacroTask:()=>X,patchEventPrototype:()=>X,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>X,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>X,wrapWithCurrentZone:()=>X,filterProperties:()=>[],attachOriginToPatched:()=>X,_redefineProperty:()=>X,patchCallbacks:()=>X};let V={parent:null,zone:new v(null,null)},ue=null,fe=0;function X(){}c("Zone","Zone"),t.Zone=v}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const ne=Object.getOwnPropertyDescriptor,he=Object.defineProperty,ye=Object.getPrototypeOf,_t=Object.create,Ve=Array.prototype.slice,Ie="addEventListener",Ze="removeEventListener",Ue=Zone.__symbol__(Ie),et=Zone.__symbol__(Ze),de="true",ve="false",Ae=Zone.__symbol__("");function Be(t,a){return Zone.current.wrap(t,a)}function lt(t,a,u,c,f){return Zone.current.scheduleMacroTask(t,a,u,c,f)}const U=Zone.__symbol__,je="undefined"!=typeof window,ke=je?window:void 0,J=je&&ke||"object"==typeof self&&self||global,yt=[null];function tt(t,a){for(let u=t.length-1;u>=0;u--)"function"==typeof t[u]&&(t[u]=Be(t[u],a+"_"+u));return t}function ft(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const A="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,re=!("nw"in J)&&void 0!==J.process&&"[object process]"==={}.toString.call(J.process),ht=!re&&!A&&!(!je||!ke.HTMLElement),Ge=void 0!==J.process&&"[object process]"==={}.toString.call(J.process)&&!A&&!(!je||!ke.HTMLElement),xe={},ze=function(t){if(!(t=t||J.event))return;let a=xe[t.type];a||(a=xe[t.type]=U("ON_PROPERTY"+t.type));const u=this||t.target||J,c=u[a];let f;if(ht&&u===ke&&"error"===t.type){const m=t;f=c&&c.call(this,m.message,m.filename,m.lineno,m.colno,m.error),!0===f&&t.preventDefault()}else f=c&&c.apply(this,arguments),null!=f&&!f&&t.preventDefault();return f};function nt(t,a,u){let c=ne(t,a);if(!c&&u&&ne(u,a)&&(c={enumerable:!0,configurable:!0}),!c||!c.configurable)return;const f=U("on"+a+"patched");if(t.hasOwnProperty(f)&&t[f])return;delete c.writable,delete c.value;const m=c.get,E=c.set,v=a.substr(2);let C=xe[v];C||(C=xe[v]=U("ON_PROPERTY"+v)),c.set=function(w){let b=this;!b&&t===J&&(b=J),b&&(b[C]&&b.removeEventListener(v,ze),E&&E.apply(b,yt),"function"==typeof w?(b[C]=w,b.addEventListener(v,ze,!1)):b[C]=null)},c.get=function(){let w=this;if(!w&&t===J&&(w=J),!w)return null;const b=w[C];if(b)return b;if(m){let N=m&&m.call(this);if(N)return c.set.call(this,N),"function"==typeof w.removeAttribute&&w.removeAttribute(a),N}return null},he(t,a,c),t[f]=!0}function We(t,a,u){if(a)for(let c=0;c<a.length;c++)nt(t,"on"+a[c],u);else{const c=[];for(const f in t)"on"==f.substr(0,2)&&c.push(f);for(let f=0;f<c.length;f++)nt(t,c[f],u)}}const ie=U("originalInstance");function we(t){const a=J[t];if(!a)return;J[U(t)]=a,J[t]=function(){const f=tt(arguments,t);switch(f.length){case 0:this[ie]=new a;break;case 1:this[ie]=new a(f[0]);break;case 2:this[ie]=new a(f[0],f[1]);break;case 3:this[ie]=new a(f[0],f[1],f[2]);break;case 4:this[ie]=new a(f[0],f[1],f[2],f[3]);break;default:throw new Error("Arg list too long.")}},se(J[t],a);const u=new a(function(){});let c;for(c in u)"XMLHttpRequest"===t&&"responseBlob"===c||function(f){"function"==typeof u[f]?J[t].prototype[f]=function(){return this[ie][f].apply(this[ie],arguments)}:he(J[t].prototype,f,{set:function(m){"function"==typeof m?(this[ie][f]=Be(m,t+"."+f),se(this[ie][f],m)):this[ie][f]=m},get:function(){return this[ie][f]}})}(c);for(c in a)"prototype"!==c&&a.hasOwnProperty(c)&&(J[t][c]=a[c])}function ae(t,a,u){let c=t;for(;c&&!c.hasOwnProperty(a);)c=ye(c);!c&&t[a]&&(c=t);const f=U(a);let m=null;if(c&&(!(m=c[f])||!c.hasOwnProperty(f))&&(m=c[f]=c[a],ft(c&&ne(c,a)))){const v=u(m,f,a);c[a]=function(){return v(this,arguments)},se(c[a],m)}return m}function Ce(t,a,u){let c=null;function f(m){const E=m.data;return E.args[E.cbIdx]=function(){m.invoke.apply(this,arguments)},c.apply(E.target,E.args),m}c=ae(t,a,m=>function(E,v){const C=u(E,v);return C.cbIdx>=0&&"function"==typeof v[C.cbIdx]?lt(C.name,v[C.cbIdx],C,f):m.apply(E,v)})}function se(t,a){t[U("OriginalDelegate")]=a}let dt=!1,me=!1;function Le(){if(dt)return me;dt=!0;try{const t=ke.navigator.userAgent;(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"))&&(me=!0)}catch(t){}return me}Zone.__load_patch("ZoneAwarePromise",(t,a,u)=>{const c=Object.getOwnPropertyDescriptor,f=Object.defineProperty,E=u.symbol,v=[],C=!0===t[E("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],w=E("Promise"),b=E("then");u.onUnhandledError=s=>{if(u.showUncaughtError()){const o=s&&s.rejection;o?console.error("Unhandled Promise rejection:",o instanceof Error?o.message:o,"; Zone:",s.zone.name,"; Task:",s.task&&s.task.source,"; Value:",o,o instanceof Error?o.stack:void 0):console.error(s)}},u.microtaskDrainDone=()=>{for(;v.length;){const s=v.shift();try{s.zone.runGuarded(()=>{throw s.throwOriginal?s.rejection:s})}catch(o){P(o)}}};const S=E("unhandledPromiseRejectionHandler");function P(s){u.onUnhandledError(s);try{const o=a[S];"function"==typeof o&&o.call(this,s)}catch(o){}}function z(s){return s&&s.then}function x(s){return s}function L(s){return n.reject(s)}const T=E("state"),Z=E("value"),W=E("finally"),B=E("parentPromiseValue"),K=E("parentPromiseState"),Q=null,F=!0,$=!1;function j(s,o){return l=>{try{V(s,o,l)}catch(d){V(s,!1,d)}}}const _e=E("currentTaskTrace");function V(s,o,l){const d=function(){let s=!1;return function(l){return function(){s||(s=!0,l.apply(null,arguments))}}}();if(s===l)throw new TypeError("Promise resolved with itself");if(s[T]===Q){let p=null;try{("object"==typeof l||"function"==typeof l)&&(p=l&&l.then)}catch(y){return d(()=>{V(s,!1,y)})(),s}if(o!==$&&l instanceof n&&l.hasOwnProperty(T)&&l.hasOwnProperty(Z)&&l[T]!==Q)fe(l),V(s,l[T],l[Z]);else if(o!==$&&"function"==typeof p)try{p.call(l,d(j(s,o)),d(j(s,!1)))}catch(y){d(()=>{V(s,!1,y)})()}else{s[T]=o;const y=s[Z];if(s[Z]=l,s[W]===W&&o===F&&(s[T]=s[K],s[Z]=s[B]),o===$&&l instanceof Error){const _=a.currentTask&&a.currentTask.data&&a.currentTask.data.__creationTrace__;_&&f(l,_e,{configurable:!0,enumerable:!1,writable:!0,value:_})}for(let _=0;_<y.length;)X(s,y[_++],y[_++],y[_++],y[_++]);if(0==y.length&&o==$){s[T]=0;let _=l;try{throw new Error("Uncaught (in promise): "+function(s){return s&&s.toString===Object.prototype.toString?(s.constructor&&s.constructor.name||"")+": "+JSON.stringify(s):s?s.toString():Object.prototype.toString.call(s)}(l)+(l&&l.stack?"\n"+l.stack:""))}catch(g){_=g}C&&(_.throwOriginal=!0),_.rejection=l,_.promise=s,_.zone=a.current,_.task=a.currentTask,v.push(_),u.scheduleMicroTask()}}}return s}const ue=E("rejectionHandledHandler");function fe(s){if(0===s[T]){try{const o=a[ue];o&&"function"==typeof o&&o.call(this,{rejection:s[Z],promise:s})}catch(o){}s[T]=$;for(let o=0;o<v.length;o++)s===v[o].promise&&v.splice(o,1)}}function X(s,o,l,d,p){fe(s);const y=s[T],_=y?"function"==typeof d?d:x:"function"==typeof p?p:L;o.scheduleMicroTask("Promise.then",()=>{try{const g=s[Z],M=!!l&&W===l[W];M&&(l[B]=g,l[K]=y);const D=o.run(_,void 0,M&&_!==L&&_!==x?[]:[g]);V(l,!0,D)}catch(g){V(l,!1,g)}},l)}const k=function(){};class n{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(o){return V(new this(null),F,o)}static reject(o){return V(new this(null),$,o)}static race(o){let l,d,p=new this((g,M)=>{l=g,d=M});function y(g){l(g)}function _(g){d(g)}for(let g of o)z(g)||(g=this.resolve(g)),g.then(y,_);return p}static all(o){return n.allWithCallback(o)}static allSettled(o){return(this&&this.prototype instanceof n?this:n).allWithCallback(o,{thenCallback:d=>({status:"fulfilled",value:d}),errorCallback:d=>({status:"rejected",reason:d})})}static allWithCallback(o,l){let d,p,y=new this((D,q)=>{d=D,p=q}),_=2,g=0;const M=[];for(let D of o){z(D)||(D=this.resolve(D));const q=g;try{D.then(ee=>{M[q]=l?l.thenCallback(ee):ee,_--,0===_&&d(M)},ee=>{l?(M[q]=l.errorCallback(ee),_--,0===_&&d(M)):p(ee)})}catch(ee){p(ee)}_++,g++}return _-=2,0===_&&d(M),y}constructor(o){const l=this;if(!(l instanceof n))throw new Error("Must be an instanceof Promise.");l[T]=Q,l[Z]=[];try{o&&o(j(l,F),j(l,$))}catch(d){V(l,!1,d)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return n}then(o,l){let d=this.constructor[Symbol.species];(!d||"function"!=typeof d)&&(d=this.constructor||n);const p=new d(k),y=a.current;return this[T]==Q?this[Z].push(y,p,o,l):X(this,y,p,o,l),p}catch(o){return this.then(null,o)}finally(o){let l=this.constructor[Symbol.species];(!l||"function"!=typeof l)&&(l=n);const d=new l(k);d[W]=W;const p=a.current;return this[T]==Q?this[Z].push(p,d,o,o):X(this,p,d,o,o),d}}n.resolve=n.resolve,n.reject=n.reject,n.race=n.race,n.all=n.all;const e=t[w]=t.Promise;t.Promise=n;const r=E("thenPatched");function i(s){const o=s.prototype,l=c(o,"then");if(l&&(!1===l.writable||!l.configurable))return;const d=o.then;o[b]=d,s.prototype.then=function(p,y){return new n((g,M)=>{d.call(this,g,M)}).then(p,y)},s[r]=!0}return u.patchThen=i,e&&(i(e),ae(t,"fetch",s=>function(s){return function(o,l){let d=s.apply(o,l);if(d instanceof n)return d;let p=d.constructor;return p[r]||i(p),d}}(s))),Promise[a.__symbol__("uncaughtPromiseErrors")]=v,n}),Zone.__load_patch("toString",t=>{const a=Function.prototype.toString,u=U("OriginalDelegate"),c=U("Promise"),f=U("Error"),m=function(){if("function"==typeof this){const w=this[u];if(w)return"function"==typeof w?a.call(w):Object.prototype.toString.call(w);if(this===Promise){const b=t[c];if(b)return a.call(b)}if(this===Error){const b=t[f];if(b)return a.call(b)}}return a.call(this)};m[u]=a,Function.prototype.toString=m;const E=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":E.call(this)}});let ce=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){ce=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){ce=!1}const pe={useG:!0},te={},Ee={},vt=new RegExp("^"+Ae+"(\\w+)(true|false)$"),rt=U("propagationStopped");function mt(t,a){const u=(a?a(t):t)+ve,c=(a?a(t):t)+de,f=Ae+u,m=Ae+c;te[t]={},te[t][ve]=f,te[t][de]=m}function qe(t,a,u){const c=u&&u.add||Ie,f=u&&u.rm||Ze,m=u&&u.listeners||"eventListeners",E=u&&u.rmAll||"removeAllListeners",v=U(c),C="."+c+":",N=function(L,T,Z){if(L.isRemoved)return;const W=L.callback;"object"==typeof W&&W.handleEvent&&(L.callback=K=>W.handleEvent(K),L.originalDelegate=W),L.invoke(L,T,[Z]);const B=L.options;B&&"object"==typeof B&&B.once&&T[f].call(T,Z.type,L.originalDelegate?L.originalDelegate:L.callback,B)},S=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][ve]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}},P=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][de]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}};function z(L,T){if(!L)return!1;let Z=!0;T&&void 0!==T.useG&&(Z=T.useG);const W=T&&T.vh;let B=!0;T&&void 0!==T.chkDup&&(B=T.chkDup);let K=!1;T&&void 0!==T.rt&&(K=T.rt);let R=L;for(;R&&!R.hasOwnProperty(c);)R=ye(R);if(!R&&L[c]&&(R=L),!R||R[v])return!1;const Q=T&&T.eventNameToString,F={},$=R[v]=R[c],O=R[U(f)]=R[f],j=R[U(m)]=R[m],H=R[U(E)]=R[E];let oe;function _e(o,l){return!ce&&"object"==typeof o&&o?!!o.capture:ce&&l?"boolean"==typeof o?{capture:o,passive:!0}:o?"object"==typeof o&&!1!==o.passive?Object.assign(Object.assign({},o),{passive:!0}):o:{passive:!0}:o}T&&T.prepend&&(oe=R[U(T.prepend)]=R[T.prepend]);const k=Z?function(o){if(!F.isExisting)return $.call(F.target,F.eventName,F.capture?P:S,F.options)}:function(o){return $.call(F.target,F.eventName,o.invoke,F.options)},n=Z?function(o){if(!o.isRemoved){const l=te[o.eventName];let d;l&&(d=l[o.capture?de:ve]);const p=d&&o.target[d];if(p)for(let y=0;y<p.length;y++)if(p[y]===o){p.splice(y,1),o.isRemoved=!0,0===p.length&&(o.allRemoved=!0,o.target[d]=null);break}}if(o.allRemoved)return O.call(o.target,o.eventName,o.capture?P:S,o.options)}:function(o){return O.call(o.target,o.eventName,o.invoke,o.options)},r=T&&T.diff?T.diff:function(o,l){const d=typeof l;return"function"===d&&o.callback===l||"object"===d&&o.originalDelegate===l},i=Zone[U("UNPATCHED_EVENTS")],h=t[U("PASSIVE_EVENTS")],s=function(o,l,d,p,y=!1,_=!1){return function(){const g=this||t;let M=arguments[0];T&&T.transferEventName&&(M=T.transferEventName(M));let D=arguments[1];if(!D)return o.apply(this,arguments);if(re&&"uncaughtException"===M)return o.apply(this,arguments);let q=!1;if("function"!=typeof D){if(!D.handleEvent)return o.apply(this,arguments);q=!0}if(W&&!W(o,D,g,arguments))return;const ee=ce&&!!h&&-1!==h.indexOf(M),ge=_e(arguments[2],ee);if(i)for(let Qe=0;Qe<i.length;Qe++)if(M===i[Qe])return ee?o.call(g,M,D,ge):o.apply(this,arguments);const Ot=!!ge&&("boolean"==typeof ge||ge.capture),Nt=!(!ge||"object"!=typeof ge)&&ge.once,Zt=Zone.current;let Ht=te[M];Ht||(mt(M,Q),Ht=te[M]);const Dt=Ht[Ot?de:ve];let Lt,ct=g[Dt],Rt=!1;if(ct){if(Rt=!0,B)for(let Qe=0;Qe<ct.length;Qe++)if(r(ct[Qe],D))return}else ct=g[Dt]=[];const St=g.constructor.name,It=Ee[St];It&&(Lt=It[M]),Lt||(Lt=St+l+(Q?Q(M):M)),F.options=ge,Nt&&(F.options.once=!1),F.target=g,F.capture=Ot,F.eventName=M,F.isExisting=Rt;const Tt=Z?pe:void 0;Tt&&(Tt.taskData=F);const Fe=Zt.scheduleEventTask(Lt,D,Tt,d,p);return F.target=null,Tt&&(Tt.taskData=null),Nt&&(ge.once=!0),!ce&&"boolean"==typeof Fe.options||(Fe.options=ge),Fe.target=g,Fe.capture=Ot,Fe.eventName=M,q&&(Fe.originalDelegate=D),_?ct.unshift(Fe):ct.push(Fe),y?g:void 0}};return R[c]=s($,C,k,n,K),oe&&(R.prependListener=s(oe,".prependListener:",function(o){return oe.call(F.target,F.eventName,o.invoke,F.options)},n,K,!0)),R[f]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=arguments[2],p=!!d&&("boolean"==typeof d||d.capture),y=arguments[1];if(!y)return O.apply(this,arguments);if(W&&!W(O,y,o,arguments))return;const _=te[l];let g;_&&(g=_[p?de:ve]);const M=g&&o[g];if(M)for(let D=0;D<M.length;D++){const q=M[D];if(r(q,y))return M.splice(D,1),q.isRemoved=!0,0===M.length&&(q.allRemoved=!0,o[g]=null,"string"==typeof l)&&(o[Ae+"ON_PROPERTY"+l]=null),q.zone.cancelTask(q),K?o:void 0}return O.apply(this,arguments)},R[m]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=[],p=kt(o,Q?Q(l):l);for(let y=0;y<p.length;y++){const _=p[y];d.push(_.originalDelegate?_.originalDelegate:_.callback)}return d},R[E]=function(){const o=this||t;let l=arguments[0];if(l){T&&T.transferEventName&&(l=T.transferEventName(l));const d=te[l];if(d){const _=o[d[ve]],g=o[d[de]];if(_){const M=_.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}if(g){const M=g.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}}}else{const d=Object.keys(o);for(let p=0;p<d.length;p++){const _=vt.exec(d[p]);let g=_&&_[1];g&&"removeListener"!==g&&this[E].call(this,g)}this[E].call(this,"removeListener")}if(K)return this},se(R[c],$),se(R[f],O),H&&se(R[E],H),j&&se(R[m],j),!0}let x=[];for(let L=0;L<a.length;L++)x[L]=z(a[L],u);return x}function kt(t,a){if(!a){const m=[];for(let E in t){const v=vt.exec(E);let C=v&&v[1];if(C&&(!a||C===a)){const w=t[E];if(w)for(let b=0;b<w.length;b++)m.push(w[b])}}return m}let u=te[a];u||(mt(a),u=te[a]);const c=t[u[ve]],f=t[u[de]];return c?f?c.concat(f):c.slice():f?f.slice():[]}function ot(t,a){const u=t.Event;u&&u.prototype&&a.patchMethod(u.prototype,"stopImmediatePropagation",c=>function(f,m){f[rt]=!0,c&&c.apply(f,m)})}function pt(t,a,u,c,f){const m=Zone.__symbol__(c);if(a[m])return;const E=a[m]=a[c];a[c]=function(v,C,w){return C&&C.prototype&&f.forEach(function(b){const N=`${u}.${c}::`+b,S=C.prototype;if(S.hasOwnProperty(b)){const P=t.ObjectGetOwnPropertyDescriptor(S,b);P&&P.value?(P.value=t.wrapWithCurrentZone(P.value,N),t._redefineProperty(C.prototype,b,P)):S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}else S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}),E.call(a,v,C,w)},t.attachOriginToPatched(a[c],E)}const Et=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],st=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],le=["load"],De=["blur","error","focus","load","resize","scroll","messageerror"],Te=["bounce","finish","start"],it=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],Pe=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],at=["close","error","open","message"],Re=["error","message"],Oe=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Et,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function Ke(t,a,u){if(!u||0===u.length)return a;const c=u.filter(m=>m.target===t);if(!c||0===c.length)return a;const f=c[0].ignoreProperties;return a.filter(m=>-1===f.indexOf(m))}function Y(t,a,u,c){t&&We(t,Ke(t,a,u),c)}Zone.__load_patch("util",(t,a,u)=>{u.patchOnProperties=We,u.patchMethod=ae,u.bindArguments=tt,u.patchMacroTask=Ce;const c=a.__symbol__("BLACK_LISTED_EVENTS"),f=a.__symbol__("UNPATCHED_EVENTS");t[f]&&(t[c]=t[f]),t[c]&&(a[c]=a[f]=t[c]),u.patchEventPrototype=ot,u.patchEventTarget=qe,u.isIEOrEdge=Le,u.ObjectDefineProperty=he,u.ObjectGetOwnPropertyDescriptor=ne,u.ObjectCreate=_t,u.ArraySlice=Ve,u.patchClass=we,u.wrapWithCurrentZone=Be,u.filterProperties=Ke,u.attachOriginToPatched=se,u._redefineProperty=Object.defineProperty,u.patchCallbacks=pt,u.getGlobalObjects=()=>({globalSources:Ee,zoneSymbolEventNames:te,eventNames:Oe,isBrowser:ht,isMix:Ge,isNode:re,TRUE_STR:de,FALSE_STR:ve,ZONE_SYMBOL_PREFIX:Ae,ADD_EVENT_LISTENER_STR:Ie,REMOVE_EVENT_LISTENER_STR:Ze})});const $e=U("zoneTask");function Se(t,a,u,c){let f=null,m=null;u+=c;const E={};function v(w){const b=w.data;return b.args[0]=function(){return w.invoke.apply(this,arguments)},b.handleId=f.apply(t,b.args),w}function C(w){return m.call(t,w.data.handleId)}f=ae(t,a+=c,w=>function(b,N){if("function"==typeof N[0]){const S={isPeriodic:"Interval"===c,delay:"Timeout"===c||"Interval"===c?N[1]||0:void 0,args:N},P=N[0];N[0]=function(){try{return P.apply(this,arguments)}finally{S.isPeriodic||("number"==typeof S.handleId?delete E[S.handleId]:S.handleId&&(S.handleId[$e]=null))}};const z=lt(a,N[0],S,v,C);if(!z)return z;const x=z.data.handleId;return"number"==typeof x?E[x]=z:x&&(x[$e]=z),x&&x.ref&&x.unref&&"function"==typeof x.ref&&"function"==typeof x.unref&&(z.ref=x.ref.bind(x),z.unref=x.unref.bind(x)),"number"==typeof x||x?x:z}return w.apply(t,N)}),m=ae(t,u,w=>function(b,N){const S=N[0];let P;"number"==typeof S?P=E[S]:(P=S&&S[$e],P||(P=S)),P&&"string"==typeof P.type?"notScheduled"!==P.state&&(P.cancelFn&&P.data.isPeriodic||0===P.runCount)&&("number"==typeof S?delete E[S]:S&&(S[$e]=null),P.zone.cancelTask(P)):w.apply(t,N)})}Zone.__load_patch("legacy",t=>{const a=t[Zone.__symbol__("legacyPatch")];a&&a()}),Zone.__load_patch("queueMicrotask",(t,a,u)=>{u.patchMethod(t,"queueMicrotask",c=>function(f,m){a.current.scheduleMicroTask("queueMicrotask",m[0])})}),Zone.__load_patch("timers",t=>{const a="set",u="clear";Se(t,a,u,"Timeout"),Se(t,a,u,"Interval"),Se(t,a,u,"Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{Se(t,"request","cancel","AnimationFrame"),Se(t,"mozRequest","mozCancel","AnimationFrame"),Se(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,a)=>{const u=["alert","prompt","confirm"];for(let c=0;c<u.length;c++)ae(t,u[c],(m,E,v)=>function(C,w){return a.current.run(m,t,w,v)})}),Zone.__load_patch("EventTarget",(t,a,u)=>{(function(t,a){a.patchEventPrototype(t,a)})(t,u),function(t,a){if(Zone[a.symbol("patchEventTarget")])return;const{eventNames:u,zoneSymbolEventNames:c,TRUE_STR:f,FALSE_STR:m,ZONE_SYMBOL_PREFIX:E}=a.getGlobalObjects();for(let C=0;C<u.length;C++){const w=u[C],S=E+(w+m),P=E+(w+f);c[w]={},c[w][m]=S,c[w][f]=P}const v=t.EventTarget;v&&v.prototype&&a.patchEventTarget(t,[v&&v.prototype])}(t,u);const c=t.XMLHttpRequestEventTarget;c&&c.prototype&&u.patchEventTarget(t,[c.prototype])}),Zone.__load_patch("MutationObserver",(t,a,u)=>{we("MutationObserver"),we("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(t,a,u)=>{we("IntersectionObserver")}),Zone.__load_patch("FileReader",(t,a,u)=>{we("FileReader")}),Zone.__load_patch("on_property",(t,a,u)=>{!function(t,a){if(re&&!Ge||Zone[t.symbol("patchEvents")])return;const u="undefined"!=typeof WebSocket,c=a.__Zone_ignore_on_properties;if(ht){const E=window,v=function(){try{const t=ke.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:E,ignoreProperties:["error"]}]:[];Y(E,Oe.concat(["messageerror"]),c&&c.concat(v),ye(E)),Y(Document.prototype,Oe,c),void 0!==E.SVGElement&&Y(E.SVGElement.prototype,Oe,c),Y(Element.prototype,Oe,c),Y(HTMLElement.prototype,Oe,c),Y(HTMLMediaElement.prototype,st,c),Y(HTMLFrameSetElement.prototype,Et.concat(De),c),Y(HTMLBodyElement.prototype,Et.concat(De),c),Y(HTMLFrameElement.prototype,le,c),Y(HTMLIFrameElement.prototype,le,c);const C=E.HTMLMarqueeElement;C&&Y(C.prototype,Te,c);const w=E.Worker;w&&Y(w.prototype,Re,c)}const f=a.XMLHttpRequest;f&&Y(f.prototype,it,c);const m=a.XMLHttpRequestEventTarget;m&&Y(m&&m.prototype,it,c),"undefined"!=typeof IDBIndex&&(Y(IDBIndex.prototype,Pe,c),Y(IDBRequest.prototype,Pe,c),Y(IDBOpenDBRequest.prototype,Pe,c),Y(IDBDatabase.prototype,Pe,c),Y(IDBTransaction.prototype,Pe,c),Y(IDBCursor.prototype,Pe,c)),u&&Y(WebSocket.prototype,at,c)}(u,t)}),Zone.__load_patch("customElements",(t,a,u)=>{!function(t,a){const{isBrowser:u,isMix:c}=a.getGlobalObjects();(u||c)&&t.customElements&&"customElements"in t&&a.patchCallbacks(a,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,u)}),Zone.__load_patch("XHR",(t,a)=>{!function(w){const b=w.XMLHttpRequest;if(!b)return;const N=b.prototype;let P=N[Ue],z=N[et];if(!P){const O=w.XMLHttpRequestEventTarget;if(O){const j=O.prototype;P=j[Ue],z=j[et]}}const x="readystatechange",L="scheduled";function T(O){const j=O.data,H=j.target;H[m]=!1,H[v]=!1;const oe=H[f];P||(P=H[Ue],z=H[et]),oe&&z.call(H,x,oe);const _e=H[f]=()=>{if(H.readyState===H.DONE)if(!j.aborted&&H[m]&&O.state===L){const ue=H[a.__symbol__("loadfalse")];if(0!==H.status&&ue&&ue.length>0){const fe=O.invoke;O.invoke=function(){const X=H[a.__symbol__("loadfalse")];for(let I=0;I<X.length;I++)X[I]===O&&X.splice(I,1);!j.aborted&&O.state===L&&fe.call(O)},ue.push(O)}else O.invoke()}else!j.aborted&&!1===H[m]&&(H[v]=!0)};return P.call(H,x,_e),H[u]||(H[u]=O),F.apply(H,j.args),H[m]=!0,O}function Z(){}function W(O){const j=O.data;return j.aborted=!0,$.apply(j.target,j.args)}const B=ae(N,"open",()=>function(O,j){return O[c]=0==j[2],O[E]=j[1],B.apply(O,j)}),R=U("fetchTaskAborting"),Q=U("fetchTaskScheduling"),F=ae(N,"send",()=>function(O,j){if(!0===a.current[Q]||O[c])return F.apply(O,j);{const H={target:O,url:O[E],isPeriodic:!1,args:j,aborted:!1},oe=lt("XMLHttpRequest.send",Z,H,T,W);O&&!0===O[v]&&!H.aborted&&oe.state===L&&oe.invoke()}}),$=ae(N,"abort",()=>function(O,j){const H=function(O){return O[u]}(O);if(H&&"string"==typeof H.type){if(null==H.cancelFn||H.data&&H.data.aborted)return;H.zone.cancelTask(H)}else if(!0===a.current[R])return $.apply(O,j)})}(t);const u=U("xhrTask"),c=U("xhrSync"),f=U("xhrListener"),m=U("xhrScheduled"),E=U("xhrURL"),v=U("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function(t,a){const u=t.constructor.name;for(let c=0;c<a.length;c++){const f=a[c],m=t[f];if(m){if(!ft(ne(t,f)))continue;t[f]=(v=>{const C=function(){return v.apply(this,tt(arguments,u+"."+f))};return se(C,v),C})(m)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,a)=>{function u(c){return function(f){kt(t,c).forEach(E=>{const v=t.PromiseRejectionEvent;if(v){const C=new v(c,{promise:f.promise,reason:f.rejection});E.invoke(C)}})}}t.PromiseRejectionEvent&&(a[U("unhandledPromiseRejectionHandler")]=u("unhandledrejection"),a[U("rejectionHandledHandler")]=u("rejectionhandled"))})},8454:(G,ne,he)=>{"use strict";he(7277),he(142),he(4138)}},G=>{G(G.s=8454)}]);
/*! (C) Andrea Giammarchi - @WebReflection - ISC Style License */
!function(e,t){"use strict";function n(){var e=C.splice(0,C.length);for(We=0;e.length;)e.shift().call(null,e.shift())}function r(e,t){for(var n=0,r=e.length;n<r;n++)p(e[n],t)}function o(e){return function(t){Re(t)&&(p(t,e),le.length&&r(t.querySelectorAll(le),e))}}function l(e){var t=Be.call(e,"is"),n=e.nodeName.toUpperCase(),r=ie.call(re,t?ee+t.toUpperCase():J+n);return t&&-1<r&&!a(n,t)?-1:r}function a(e,t){return-1<le.indexOf(e+'[is="'+t+'"]')}function i(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[X]||2,a=e[$]||3;!rt||o&&o!==t||!t[B]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[B](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function u(e){var t=o(e);return function(e){C.push(t,e.target),We&&clearTimeout(We),We=setTimeout(n,1)}}function c(e){nt&&(nt=!1,e.currentTarget.removeEventListener(W,c)),le.length&&r((e.target||g).querySelectorAll(le),e.detail===x?x:_),Ve&&function(){for(var e,t=0,n=Ue.length;t<n;t++)e=Ue[t],ae.contains(e)||(n--,Ue.splice(t--,1),p(e,x))}()}function s(e,t){var n=this;Ge.call(n,e,t),w.call(n,{target:n})}function m(e,t,n){var r=t.apply(e,n),o=l(r);return-1<o&&F(r,oe[o]),n.pop()&&le.length&&function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],F(t,oe[l(t)])}(r.querySelectorAll(le)),r}function f(e,t){De(e,t),N?N.observe(e,$e):(tt&&(e.setAttribute=s,e[R]=O(e),e[U](Y,w)),e[U](Q,i)),e[z]&&rt&&(e.created=!0,e[z](),e.created=!1)}function d(e){throw new Error("A "+e+" type is already registered")}function p(e,t){var n,r,o=l(e);-1<o&&!xe.call(e,"TEMPLATE")&&(I(e,oe[o]),o=0,t!==_||e[_]?t!==x||e[x]||(e[_]=!1,e[x]=!0,r="disconnected",o=1):(e[x]=!1,e[_]=!0,r="connected",o=1,Ve&&ie.call(Ue,e)<0&&Ue.push(e)),o&&(n=e[t+k]||e[r+k])&&n.call(e))}function h(){}function T(e,t,n){var r=n&&n[q]||"",o=t.prototype,l=Ne(o),a=t.observedAttributes||fe,i={prototype:l};Pe(l,z,{value:function(){if(ye)ye=!1;else if(!this[Me]){this[Me]=!0,new t(this),o[z]&&o[z].call(this);var e=Ce[Ae.get(t)];(!ve||e.create.length>1)&&E(this)}}}),Pe(l,B,{value:function(e){-1<ie.call(a,e)&&o[B]&&o[B].apply(this,arguments)}}),o[j]&&Pe(l,Z,{value:o[j]}),o[G]&&Pe(l,K,{value:o[G]}),r&&(i[q]=r),e=e.toUpperCase(),Ce[e]={constructor:t,create:r?[r,Oe(e)]:[e]},Ae.set(t,e),g[V](e.toLowerCase(),i),v(e),we[e].r()}function L(e){var t=Ce[e.toUpperCase()];return t&&t.constructor}function M(e){return"string"==typeof e?e:e&&e.is||""}function E(e){for(var t,n=e[B],r=n?e.attributes:fe,o=r.length;o--;)t=r[o],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function v(e){return(e=e.toUpperCase())in we||(we[e]={},we[e].p=new be(function(t){we[e].r=t})),we[e].p}function H(){Ee&&delete e.customElements,me(e,"customElements",{configurable:!0,value:new h}),me(e,"CustomElementRegistry",{configurable:!0,value:h});for(var t=y.get(/^HTML[A-Z]*[a-z]/),n=t.length;n--;function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[Me]||(ye=!0,t=Ce[Ae.get(e.constructor)],(e=(r=ve&&1===t.create.length)?Reflect.construct(n,fe,t.constructor):g.createElement.apply(g,t.create))[Me]=!0,ye=!1,r||E(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){!0,me(n,Me,{value:e[t]})}}}(t[n]));g.createElement=function(e,t){var n=M(t);return n?Xe.call(this,e,Oe(n)):Xe.call(this,e)},Ye||(et=!0,g[V](""))}var g=e.document,b=e.Object,y=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,a=function(e,t){(t=t.toLowerCase())in i||(i[e]=(i[e]||[]).concat(t),i[t]=i[t.toUpperCase()]=e)},i=(b.create||b)(null),u={};for(n in e)for(o in e[n])for(r=e[n][o],i[o]=r,t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return u.get=function(e){return"string"==typeof e?i[e]||(l.test(e)?[]:""):function(e){var t,n=[];for(t in i)e.test(t)&&n.push(t);return n}(e)},u.set=function(e,t){return l.test(e)?a(e,t):a(t,e),u},u}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof t&&(t={type:t||"auto"});var C,w,A,O,N,D,I,F,S,V="registerElement",P=1e5*e.Math.random()>>0,R="__"+V+P,U="addEventListener",_="attached",k="Callback",x="detached",q="extends",B="attributeChanged"+k,Z=_+k,j="connected"+k,G="disconnected"+k,z="created"+k,K=x+k,X="ADDITION",$="REMOVAL",Q="DOMAttrModified",W="DOMContentLoaded",Y="DOMSubtreeModified",J="<",ee="=",te=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ne=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],re=[],oe=[],le="",ae=g.documentElement,ie=re.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ue=b.prototype,ce=ue.hasOwnProperty,se=ue.isPrototypeOf,me=b.defineProperty,fe=[],de=b.getOwnPropertyDescriptor,pe=b.getOwnPropertyNames,he=b.getPrototypeOf,Te=b.setPrototypeOf,Le=!!b.__proto__,Me="__dreCEv1",Ee=e.customElements,ve=!/^force/.test(t.type)&&!!(Ee&&Ee.define&&Ee.get&&Ee.whenDefined),He=b.create||b,ge=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[ie.call(t,e)]},set:function(r,o){(e=ie.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},be=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,o={catch:function(){return o},then:function(e){return n.push(e),r&&setTimeout(t,1),o}};return e(t),o},ye=!1,Ce=He(null),we=He(null),Ae=new ge,Oe=function(e){return e.toLowerCase()},Ne=b.create||function e(t){return t?(e.prototype=t,new e):this},De=Te||(Le?function(e,t){return e.__proto__=t,e}:pe&&de?function(){function e(e,t){for(var n,r=pe(t),o=0,l=r.length;o<l;o++)n=r[o],ce.call(e,n)||me(e,n,de(t,n))}return function(t,n){do{e(t,n)}while((n=he(n))&&!se.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Ie=e.MutationObserver||e.WebKitMutationObserver,Fe=e.HTMLAnchorElement,Se=(e.HTMLElement||e.Element||e.Node).prototype,Ve=!se.call(Se,ae),Pe=Ve?function(e,t,n){return e[t]=n.value,e}:me,Re=Ve?function(e){return 1===e.nodeType}:function(e){return se.call(Se,e)},Ue=Ve&&[],_e=Se.attachShadow,ke=Se.cloneNode,xe=Se.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},qe=Se.dispatchEvent,Be=Se.getAttribute,Ze=Se.hasAttribute,je=Se.removeAttribute,Ge=Se.setAttribute,ze=g.createElement,Ke=g.importNode,Xe=ze,$e=Ie&&{attributes:!0,characterData:!0,attributeOldValue:!0},Qe=Ie||function(e){tt=!1,ae.removeEventListener(Q,Qe)},We=0,Ye=V in g&&!/^force-all/.test(t.type),Je=!0,et=!1,tt=!0,nt=!0,rt=!0;if(Ie&&((S=g.createElement("div")).innerHTML="<div><div></div></div>",new Ie(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(S=de(Se,"innerHTML"))&&S.set;n&&me(Se,"innerHTML",{set:function(e){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,e)}})}t.disconnect(),S=null}).observe(S,{childList:!0,subtree:!0}),S.innerHTML=""),Ye||(Te||Le?(I=function(e,t){se.call(t,e)||f(e,t)},F=f):F=I=function(e,t){e[R]||(e[R]=b(!0),f(e,t))},Ve?(tt=!1,function(){var e=de(Se,U),t=e.value,n=function(e){var t=new CustomEvent(Q,{bubbles:!0});t.attrName=e,t.prevValue=Be.call(this,e),t.newValue=null,t[$]=t.attrChange=2,je.call(this,e),qe.call(this,t)},r=function(e,t){var n=Ze.call(this,e),r=n&&Be.call(this,e),o=new CustomEvent(Q,{bubbles:!0});Ge.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o.MODIFICATION=o.attrChange=1:o[X]=o.attrChange=0,qe.call(this,o)},o=function(e){var t,n=e.currentTarget,r=n[R],o=e.propertyName;r.hasOwnProperty(o)&&(r=r[o],(t=new CustomEvent(Q,{bubbles:!0})).attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[o]||null,null==t.prevValue?t[X]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,qe.call(n,t))};e.value=function(e,l,a){e===Q&&this[B]&&this.setAttribute!==r&&(this[R]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,e,l,a)},me(Se,U,e)}()):Ie||(ae[U](Q,Qe),ae.setAttribute(R,1),ae.removeAttribute(R),tt&&(w=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[R],o[R]=n=O(o),n){if(!(r in t))return A(0,o,r,t[r],n[r],X);if(n[r]!==t[r])return A(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return A(2,o,r,t[r],n[r],$)}},A=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,i(a)},O=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),g[V]=function(e,t){if(n=e.toUpperCase(),Je&&(Je=!1,Ie?(N=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new Ie(function(r){for(var o,l,a,i=0,u=r.length;i<u;i++)"childList"===(o=r[i]).type?(n(o.addedNodes,e),n(o.removedNodes,t)):(l=o.target,rt&&l[B]&&"style"!==o.attributeName&&(a=Be.call(l,o.attributeName))!==o.oldValue&&l[B](o.attributeName,o.oldValue,a))})}(o(_),o(x)),(D=function(e){return N.observe(e,{childList:!0,subtree:!0}),e})(g),_e&&(Se.attachShadow=function(){return D(_e.apply(this,arguments))})):(C=[],g[U]("DOMNodeInserted",u(_)),g[U]("DOMNodeRemoved",u(x))),g[U](W,c),g[U]("readystatechange",c),g.importNode=function(e,t){switch(e.nodeType){case 1:return m(g,Ke,[e,!!t]);case 11:for(var n=g.createDocumentFragment(),r=e.childNodes,o=r.length,l=0;l<o;l++)n.appendChild(g.importNode(r[l],!!t));return n;default:return ke.call(e,!!t)}},Se.cloneNode=function(e){return m(this,ke,[!!e])}),et)return et=!1;if(-2<ie.call(re,ee+n)+ie.call(re,J+n)&&d(e),!te.test(n)||-1<ie.call(ne,n))throw new Error("The type "+e+" is invalid");var n,l,a=function(){return s?g.createElement(f,n):g.createElement(f)},i=t||ue,s=ce.call(i,q),f=s?t[q].toUpperCase():n;return s&&-1<ie.call(re,J+f)&&d(f),l=re.push((s?ee:J)+n)-1,le=le.concat(le.length?",":"",s?f+'[is="'+e.toLowerCase()+'"]':f),a.prototype=oe[l]=ce.call(i,"prototype")?i.prototype:Ne(Se),le.length&&r(g.querySelectorAll(le),_),a},g.createElement=Xe=function(e,t){var n=M(t),r=n?ze.call(g,e,Oe(n)):ze.call(g,e),o=""+e,l=ie.call(re,(n?ee:J)+(n||o).toUpperCase()),i=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),i&&(i=a(o.toUpperCase(),n))),rt=!g.createElement.innerHTMLHelper,i&&F(r,oe[l]),r}),addEventListener("beforeunload",function(){delete g.createElement,delete g.importNode,delete g[V]},!1),h.prototype={constructor:h,define:ve?function(e,t,n){if(n)T(e,t,n);else{var r=e.toUpperCase();Ce[r]={constructor:t,create:[r]},Ae.set(t,r),Ee.define(e,t)}}:T,get:ve?function(e){return Ee.get(e)||L(e)}:L,whenDefined:ve?function(e){return be.race([Ee.whenDefined(e),v(e)])}:v},!Ee||/^force/.test(t.type))H();else if(!t.noBuiltIn)try{!function(t,n,r){var o=new RegExp("^<a\\s+is=('|\")"+r+"\\1></a>$");if(n[q]="a",(t.prototype=Ne(Fe.prototype)).constructor=t,e.customElements.define(r,t,n),!o.test(g.createElement("a",{is:r}).outerHTML)||!o.test((new t).outerHTML))throw n}(function e(){return Reflect.construct(Fe,[],e)},{},"document-register-element-a"+P)}catch(e){H()}if(!t.noBuiltIn)try{if(ze.call(g,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){Oe=function(e){return{is:e.toLowerCase()}}}}(window);
var tFe=Object.defineProperty,nFe=Object.defineProperties,iFe=Object.getOwnPropertyDescriptors,CC=Object.getOwnPropertySymbols,Oq=Object.prototype.hasOwnProperty,Rq=Object.prototype.propertyIsEnumerable,Er=Math.pow,Nq=(Vt,Xe,et)=>Xe in Vt?tFe(Vt,Xe,{enumerable:!0,configurable:!0,writable:!0,value:et}):Vt[Xe]=et,at=(Vt,Xe)=>{for(var et in Xe||(Xe={}))Oq.call(Xe,et)&&Nq(Vt,et,Xe[et]);if(CC)for(var et of CC(Xe))Rq.call(Xe,et)&&Nq(Vt,et,Xe[et]);return Vt},Sn=(Vt,Xe)=>nFe(Vt,iFe(Xe)),Pq=(Vt,Xe)=>{var et={};for(var lt in Vt)Oq.call(Vt,lt)&&Xe.indexOf(lt)<0&&(et[lt]=Vt[lt]);if(null!=Vt&&CC)for(var lt of CC(Vt))Xe.indexOf(lt)<0&&Rq.call(Vt,lt)&&(et[lt]=Vt[lt]);return et};(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[179],{1440:(Vt,Xe,et)=>{var lt=et(1052).default;Vt.exports=function Q(Ee,pe,X){function U(B,w){if(!pe[B]){if(!Ee[B]){if(F)return F(B,!0);var R=new Error("Cannot find module '"+B+"'");throw R.code="MODULE_NOT_FOUND",R}var M=pe[B]={exports:{}};Ee[B][0].call(M.exports,function(y){return U(Ee[B][1][y]||y)},M,M.exports,Q,Ee,pe,X)}return pe[B].exports}for(var F=void 0,Y=0;Y<X.length;Y++)U(X[Y]);return U}({1:[function(Q,Ee,pe){var X,U;X=this,U=function(X,U,F,Y,B){"use strict";function S(Se,ze,Ke,Ve){return new(Ke||(Ke=Promise))(function(q,ge){function ce(gt){try{_t(Ve.next(gt))}catch(Ae){ge(Ae)}}function Ye(gt){try{_t(Ve.throw(gt))}catch(Ae){ge(Ae)}}function _t(gt){gt.done?q(gt.value):function(q){return q instanceof Ke?q:new Ke(function(ge){ge(q)})}(gt.value).then(ce,Ye)}_t((Ve=Ve.apply(Se,ze||[])).next())})}function T(Se,ze){var Ve,K,q,ge,Ke={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]};return ge={next:ce(0),throw:ce(1),return:ce(2)},"function"==typeof Symbol&&(ge[Symbol.iterator]=function(){return this}),ge;function ce(_t){return function(gt){return function(_t){if(Ve)throw new TypeError("Generator is already executing.");for(;Ke;)try{if(Ve=1,K&&(q=2&_t[0]?K.return:_t[0]?K.throw||((q=K.return)&&q.call(K),0):K.next)&&!(q=q.call(K,_t[1])).done)return q;switch(K=0,q&&(_t=[2&_t[0],q.value]),_t[0]){case 0:case 1:q=_t;break;case 4:return Ke.label++,{value:_t[1],done:!1};case 5:Ke.label++,K=_t[1],_t=[0];continue;case 7:_t=Ke.ops.pop(),Ke.trys.pop();continue;default:if(!(q=(q=Ke.trys).length>0&&q[q.length-1])&&(6===_t[0]||2===_t[0])){Ke=0;continue}if(3===_t[0]&&(!q||_t[1]>q[0]&&_t[1]<q[3])){Ke.label=_t[1];break}if(6===_t[0]&&Ke.label<q[1]){Ke.label=q[1],q=_t;break}if(q&&Ke.label<q[2]){Ke.label=q[2],Ke.ops.push(_t);break}q[2]&&Ke.ops.pop(),Ke.trys.pop();continue}_t=ze.call(Se,Ke)}catch(gt){_t=[6,gt],K=0}finally{Ve=q=0}if(5&_t[0])throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}([_t,gt])}}}function J(Se){var ze=Se.length,Ke=0;return new B.Readable({objectMode:!0,read:function(){this.push(Ke<ze?Se[Ke++]:null)}})}X.addJsonLdToStore=function(Se,ze){return S(this,void 0,void 0,function(){var Ke,Ve,K;return T(this,function(q){switch(q.label){case 0:return"string"!=typeof Se?[3,4]:[4,fetch(Se,{redirect:"follow"})];case 1:return(Ve=q.sent()).ok?[4,Ve.json()]:[3,3];case 2:Ke=q.sent(),q.label=3;case 3:return[3,5];case 4:Ke=Se,q.label=5;case 5:return Ke?[4,U.toRDF(Ke)]:[3,7];case 6:K=q.sent(),ze.import(J(K)),q.label=7;case 7:return[2,ze]}})})},X.addN3ToStore=function(Se,ze){return S(this,void 0,void 0,function(){var Ke,Ve,K;return T(this,function(q){switch(q.label){case 0:return"string"==typeof Se&&(null==Se?void 0:Se.startsWith("http"))?[4,fetch(Se,{redirect:"follow"})]:[3,4];case 1:return(Ve=q.sent()).ok?[4,Ve.text()]:[3,3];case 2:Ke=q.sent(),q.label=3;case 3:return[3,5];case 4:Ke=Se,q.label=5;case 5:return Ke&&(K=new F.Parser({format:"n3"}).parse(Ke),ze.import(J(K))),[2,ze]}})})},X.addRdfXmlToStore=function(Se,ze){return S(this,void 0,void 0,function(){var Ke,Ve,K,q;return T(this,function(ge){switch(ge.label){case 0:return"string"==typeof Se&&(null==Se?void 0:Se.startsWith("http"))?[4,fetch(Se,{redirect:"follow"})]:[3,4];case 1:return(Ve=ge.sent()).ok?[4,Ve.text()]:[3,3];case 2:Ke=ge.sent(),ge.label=3;case 3:return[3,5];case 4:Ke=Se,ge.label=5;case 5:return Ke?(K=new Y.RdfXmlParser({dataFactory:F.DataFactory,strict:!0}),q=new Promise(function(ce){K.once("end",function(){return ce(ze)})}),ze.import(K),K.write(Ke),K.end(),[2,q]):[2,ze]}})})},X.arrayToStream=J,X.deserializeN3Store=function(Se,ze){var Ke=JSON.parse(Se),Ve=new F.Store;return Object.assign(Ve,Ke,{_factory:null!=ze?ze:F.DataFactory}),Ve},X.readQuads=function(Se,ze,Ke,Ve,K){return Se.readQuads(ze,Ke,Ve,K)},X.serializeN3Store=function(Se){var ze=Object.assign({},Se);return delete ze._factory,JSON.stringify(ze)},X.streamToArray=function(Se){return new Promise(function(ze,Ke){var Ve=[];Se.on("data",function(K){Ve.push(K)}).once("end",function(){ze(Ve)}).once("error",function(K){Ke(K)})})},Object.keys(F).forEach(function(Se){"default"!==Se&&!X.hasOwnProperty(Se)&&Object.defineProperty(X,Se,{enumerable:!0,get:function(){return F[Se]}})}),Object.defineProperty(X,"__esModule",{value:!0})},"object"==typeof pe&&void 0!==Ee?U(pe,Q("jsonld"),Q("n3"),Q("rdfxml-streaming-parser"),Q("readable-stream")):U((X="undefined"!=typeof globalThis?globalThis:X||self).tripleStoreUtils={},X.jsonld,X.n3,X.rdfxmlStreamingParser,X.readablestream)},{jsonld:26,n3:43,"rdfxml-streaming-parser":64,"readable-stream":81}],2:[function(Q,Ee,pe){"use strict";pe.byteLength=function(T){var E=C(T),$=E[1];return 3*(E[0]+$)/4-$},pe.toByteArray=function(T){var E,W,O=C(T),$=O[0],D=O[1],P=new F(function(T,E,O){return 3*(E+O)/4-O}(0,$,D)),Z=0,x=D>0?$-4:$;for(W=0;W<x;W+=4)E=U[T.charCodeAt(W)]<<18|U[T.charCodeAt(W+1)]<<12|U[T.charCodeAt(W+2)]<<6|U[T.charCodeAt(W+3)],P[Z++]=E>>16&255,P[Z++]=E>>8&255,P[Z++]=255&E;return 2===D&&(E=U[T.charCodeAt(W)]<<2|U[T.charCodeAt(W+1)]>>4,P[Z++]=255&E),1===D&&(E=U[T.charCodeAt(W)]<<10|U[T.charCodeAt(W+1)]<<4|U[T.charCodeAt(W+2)]>>2,P[Z++]=E>>8&255,P[Z++]=255&E),P},pe.fromByteArray=function(T){for(var E,O=T.length,$=O%3,D=[],P=16383,Z=0,x=O-$;Z<x;Z+=P)D.push(b(T,Z,Z+P>x?x:Z+P));return 1===$?D.push(X[(E=T[O-1])>>2]+X[E<<4&63]+"=="):2===$&&D.push(X[(E=(T[O-2]<<8)+T[O-1])>>10]+X[E>>4&63]+X[E<<2&63]+"="),D.join("")};for(var X=[],U=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=0,w=Y.length;B<w;++B)X[B]=Y[B],U[Y.charCodeAt(B)]=B;function C(T){var E=T.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=T.indexOf("=");return-1===O&&(O=E),[O,O===E?0:4-O%4]}function v(T){return X[T>>18&63]+X[T>>12&63]+X[T>>6&63]+X[63&T]}function b(T,E,O){for(var D=[],P=E;P<O;P+=3)D.push(v((T[P]<<16&16711680)+(T[P+1]<<8&65280)+(255&T[P+2])));return D.join("")}U["-".charCodeAt(0)]=62,U["_".charCodeAt(0)]=63},{}],3:[function(Q,Ee,pe){},{}],4:[function(Q,Ee,pe){var X=Q("buffer"),U=X.Buffer;function F(B,w){for(var C in B)w[C]=B[C]}function Y(B,w,C){return U(B,w,C)}U.from&&U.alloc&&U.allocUnsafe&&U.allocUnsafeSlow?Ee.exports=X:(F(X,pe),pe.Buffer=Y),F(U,Y),Y.from=function(B,w,C){if("number"==typeof B)throw new TypeError("Argument must not be a number");return U(B,w,C)},Y.alloc=function(B,w,C){if("number"!=typeof B)throw new TypeError("Argument must be a number");var R=U(B);return void 0!==w?"string"==typeof C?R.fill(w,C):R.fill(w):R.fill(0),R},Y.allocUnsafe=function(B){if("number"!=typeof B)throw new TypeError("Argument must be a number");return U(B)},Y.allocUnsafeSlow=function(B){if("number"!=typeof B)throw new TypeError("Argument must be a number");return X.SlowBuffer(B)}},{buffer:6}],5:[function(Q,Ee,pe){"use strict";var X=Q("safe-buffer").Buffer,U=X.isEncoding||function(D){switch((D=""+D)&&D.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function B(D){var P;switch(this.encoding=function(D){var P=function(D){if(!D)return"utf8";for(var P;;)switch(D){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return D;default:if(P)return;D=(""+D).toLowerCase(),P=!0}}(D);if("string"!=typeof P&&(X.isEncoding===U||!U(D)))throw new Error("Unknown encoding: "+D);return P||D}(D),this.encoding){case"utf16le":this.text=b,this.end=S,P=4;break;case"utf8":this.fillLast=M,P=4;break;case"base64":this.text=T,this.end=E,P=3;break;default:return this.write=O,void(this.end=$)}this.lastNeed=0,this.lastTotal=0,this.lastChar=X.allocUnsafe(P)}function w(D){return D<=127?0:D>>5==6?2:D>>4==14?3:D>>3==30?4:D>>6==2?-1:-2}function M(D){var P=this.lastTotal-this.lastNeed,Z=function(D,P,Z){if(128!=(192&P[0]))return D.lastNeed=0,"\ufffd";if(D.lastNeed>1&&P.length>1){if(128!=(192&P[1]))return D.lastNeed=1,"\ufffd";if(D.lastNeed>2&&P.length>2&&128!=(192&P[2]))return D.lastNeed=2,"\ufffd"}}(this,D);return void 0!==Z?Z:this.lastNeed<=D.length?(D.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(D.copy(this.lastChar,P,0,D.length),void(this.lastNeed-=D.length))}function b(D,P){if((D.length-P)%2==0){var Z=D.toString("utf16le",P);if(Z){var x=Z.charCodeAt(Z.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=D[D.length-2],this.lastChar[1]=D[D.length-1],Z.slice(0,-1)}return Z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=D[D.length-1],D.toString("utf16le",P,D.length-1)}function S(D){var P=D&&D.length?this.write(D):"";return this.lastNeed?P+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):P}function T(D,P){var Z=(D.length-P)%3;return 0===Z?D.toString("base64",P):(this.lastNeed=3-Z,this.lastTotal=3,1===Z?this.lastChar[0]=D[D.length-1]:(this.lastChar[0]=D[D.length-2],this.lastChar[1]=D[D.length-1]),D.toString("base64",P,D.length-Z))}function E(D){var P=D&&D.length?this.write(D):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function O(D){return D.toString(this.encoding)}function $(D){return D&&D.length?this.write(D):""}pe.StringDecoder=B,B.prototype.write=function(D){if(0===D.length)return"";var P,Z;if(this.lastNeed){if(void 0===(P=this.fillLast(D)))return"";Z=this.lastNeed,this.lastNeed=0}else Z=0;return Z<D.length?P?P+this.text(D,Z):this.text(D,Z):P||""},B.prototype.end=function(D){var P=D&&D.length?this.write(D):"";return this.lastNeed?P+"\ufffd":P},B.prototype.text=function(D,P){var Z=function(D,P,Z){var x=P.length-1;if(x<Z)return 0;var W=w(P[x]);return W>=0?(W>0&&(D.lastNeed=W-1),W):--x<Z||-2===W?0:(W=w(P[x]))>=0?(W>0&&(D.lastNeed=W-2),W):--x<Z||-2===W?0:(W=w(P[x]))>=0?(W>0&&(2===W?W=0:D.lastNeed=W-3),W):0}(this,D,P);if(!this.lastNeed)return D.toString("utf8",P);this.lastTotal=Z;var x=D.length-(Z-this.lastNeed);return D.copy(this.lastChar,0,x),D.toString("utf8",P,x)},B.prototype.fillLast=function(D){if(this.lastNeed<=D.length)return D.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);D.copy(this.lastChar,this.lastTotal-this.lastNeed,0,D.length),this.lastNeed-=D.length}},{"safe-buffer":4}],6:[function(Q,Ee,pe){(function(X){(function(){"use strict";var U=Q("base64-js"),F=Q("ieee754");pe.Buffer=C,pe.SlowBuffer=function(z){return+z!=z&&(z=0),C.alloc(+z)},pe.INSPECT_MAX_BYTES=50;var Y=2147483647;function w(z){if(z>Y)throw new RangeError('The value "'+z+'" is invalid for option "size"');var L=new Uint8Array(z);return L.__proto__=C.prototype,L}function C(z,L,H){if("number"==typeof z){if("string"==typeof L)throw new TypeError('The "string" argument must be of type string. Received type number');return v(z)}return R(z,L,H)}function R(z,L,H){if("string"==typeof z)return function(z,L){if(("string"!=typeof L||""===L)&&(L="utf8"),!C.isEncoding(L))throw new TypeError("Unknown encoding: "+L);var H=0|D(z,L),Le=w(H),it=Le.write(z,L);return it!==H&&(Le=Le.slice(0,it)),Le}(z,L);if(ArrayBuffer.isView(z))return S(z);if(null==z)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(gt(z,ArrayBuffer)||z&&gt(z.buffer,ArrayBuffer))return function(z,L,H){if(L<0||z.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<L+(H||0))throw new RangeError('"length" is outside of buffer bounds');var Le;return(Le=void 0===L&&void 0===H?new Uint8Array(z):void 0===H?new Uint8Array(z,L):new Uint8Array(z,L,H)).__proto__=C.prototype,Le}(z,L,H);if("number"==typeof z)throw new TypeError('The "value" argument must not be of type number. Received type number');var Le=z.valueOf&&z.valueOf();if(null!=Le&&Le!==z)return C.from(Le,L,H);var it=function(z){if(C.isBuffer(z)){var L=0|O(z.length),H=w(L);return 0===H.length||z.copy(H,0,0,L),H}return void 0!==z.length?"number"!=typeof z.length||Ae(z.length)?w(0):S(z):"Buffer"===z.type&&Array.isArray(z.data)?S(z.data):void 0}(z);if(it)return it;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof z[Symbol.toPrimitive])return C.from(z[Symbol.toPrimitive]("string"),L,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}function M(z){if("number"!=typeof z)throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function v(z){return M(z),w(z<0?0:0|O(z))}function S(z){for(var L=z.length<0?0:0|O(z.length),H=w(L),Le=0;Le<L;Le+=1)H[Le]=255&z[Le];return H}function O(z){if(z>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return 0|z}function D(z,L){if(C.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||gt(z,ArrayBuffer))return z.byteLength;if("string"!=typeof z)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);var H=z.length,Le=arguments.length>2&&!0===arguments[2];if(!Le&&0===H)return 0;for(var it=!1;;)switch(L){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return q(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return Ye(z).length;default:if(it)return Le?-1:q(z).length;L=(""+L).toLowerCase(),it=!0}}function P(z,L,H){var Le=!1;if((void 0===L||L<0)&&(L=0),L>this.length||((void 0===H||H>this.length)&&(H=this.length),H<=0)||(H>>>=0)<=(L>>>=0))return"";for(z||(z="utf8");;)switch(z){case"hex":return le(this,L,H);case"utf8":case"utf-8":return ve(this,L,H);case"ascii":return Ge(this,L,H);case"latin1":case"binary":return J(this,L,H);case"base64":return re(this,L,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,L,H);default:if(Le)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),Le=!0}}function Z(z,L,H){var Le=z[L];z[L]=z[H],z[H]=Le}function x(z,L,H,Le,it){if(0===z.length)return-1;if("string"==typeof H?(Le=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),Ae(H=+H)&&(H=it?0:z.length-1),H<0&&(H=z.length+H),H>=z.length){if(it)return-1;H=z.length-1}else if(H<0){if(!it)return-1;H=0}if("string"==typeof L&&(L=C.from(L,Le)),C.isBuffer(L))return 0===L.length?-1:W(z,L,H,Le,it);if("number"==typeof L)return L&=255,"function"==typeof Uint8Array.prototype.indexOf?it?Uint8Array.prototype.indexOf.call(z,L,H):Uint8Array.prototype.lastIndexOf.call(z,L,H):W(z,[L],H,Le,it);throw new TypeError("val must be string, number or Buffer")}function W(z,L,H,Le,it){var Yn,At=1,kt=z.length,In=L.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(z.length<2||L.length<2)return-1;At=2,kt/=2,In/=2,H/=2}function Pn(Ls,fs){return 1===At?Ls[fs]:Ls.readUInt16BE(fs*At)}if(it){var Mi=-1;for(Yn=H;Yn<kt;Yn++)if(Pn(z,Yn)===Pn(L,-1===Mi?0:Yn-Mi)){if(-1===Mi&&(Mi=Yn),Yn-Mi+1===In)return Mi*At}else-1!==Mi&&(Yn-=Yn-Mi),Mi=-1}else for(H+In>kt&&(H=kt-In),Yn=H;Yn>=0;Yn--){for(var xi=!0,Xr=0;Xr<In;Xr++)if(Pn(z,Yn+Xr)!==Pn(L,Xr)){xi=!1;break}if(xi)return Yn}return-1}function ne(z,L,H,Le){H=Number(H)||0;var it=z.length-H;Le?(Le=Number(Le))>it&&(Le=it):Le=it;var At=L.length;Le>At/2&&(Le=At/2);for(var kt=0;kt<Le;++kt){var In=parseInt(L.substr(2*kt,2),16);if(Ae(In))return kt;z[H+kt]=In}return kt}function ue(z,L,H,Le){return _t(q(L,z.length-H),z,H,Le)}function se(z,L,H,Le){return _t(function(z){for(var L=[],H=0;H<z.length;++H)L.push(255&z.charCodeAt(H));return L}(L),z,H,Le)}function te(z,L,H,Le){return se(z,L,H,Le)}function Re(z,L,H,Le){return _t(Ye(L),z,H,Le)}function be(z,L,H,Le){return _t(function(z,L){for(var H,Le,At=[],kt=0;kt<z.length&&!((L-=2)<0);++kt)Le=(H=z.charCodeAt(kt))>>8,At.push(H%256),At.push(Le);return At}(L,z.length-H),z,H,Le)}function re(z,L,H){return U.fromByteArray(0===L&&H===z.length?z:z.slice(L,H))}function ve(z,L,H){H=Math.min(z.length,H);for(var Le=[],it=L;it<H;){var Pn,Yn,Mi,xi,At=z[it],kt=null,In=At>239?4:At>223?3:At>191?2:1;if(it+In<=H)switch(In){case 1:At<128&&(kt=At);break;case 2:128==(192&(Pn=z[it+1]))&&(xi=(31&At)<<6|63&Pn)>127&&(kt=xi);break;case 3:Yn=z[it+2],128==(192&(Pn=z[it+1]))&&128==(192&Yn)&&(xi=(15&At)<<12|(63&Pn)<<6|63&Yn)>2047&&(xi<55296||xi>57343)&&(kt=xi);break;case 4:Yn=z[it+2],Mi=z[it+3],128==(192&(Pn=z[it+1]))&&128==(192&Yn)&&128==(192&Mi)&&(xi=(15&At)<<18|(63&Pn)<<12|(63&Yn)<<6|63&Mi)>65535&&xi<1114112&&(kt=xi)}null===kt?(kt=65533,In=1):kt>65535&&(Le.push((kt-=65536)>>>10&1023|55296),kt=56320|1023&kt),Le.push(kt),it+=In}return function(z){var L=z.length;if(L<=4096)return String.fromCharCode.apply(String,z);for(var H="",Le=0;Le<L;)H+=String.fromCharCode.apply(String,z.slice(Le,Le+=4096));return H}(Le)}pe.kMaxLength=Y,!(C.TYPED_ARRAY_SUPPORT=function(){try{var z=new Uint8Array(1);return z.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===z.foo()}catch(L){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),C.poolSize=8192,C.from=function(z,L,H){return R(z,L,H)},C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array,C.alloc=function(z,L,H){return function(z,L,H){return M(z),z<=0?w(z):void 0!==L?"string"==typeof H?w(z).fill(L,H):w(z).fill(L):w(z)}(z,L,H)},C.allocUnsafe=function(z){return v(z)},C.allocUnsafeSlow=function(z){return v(z)},C.isBuffer=function(L){return null!=L&&!0===L._isBuffer&&L!==C.prototype},C.compare=function(L,H){if(gt(L,Uint8Array)&&(L=C.from(L,L.offset,L.byteLength)),gt(H,Uint8Array)&&(H=C.from(H,H.offset,H.byteLength)),!C.isBuffer(L)||!C.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===H)return 0;for(var Le=L.length,it=H.length,At=0,kt=Math.min(Le,it);At<kt;++At)if(L[At]!==H[At]){Le=L[At],it=H[At];break}return Le<it?-1:it<Le?1:0},C.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(L,H){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(0===L.length)return C.alloc(0);var Le;if(void 0===H)for(H=0,Le=0;Le<L.length;++Le)H+=L[Le].length;var it=C.allocUnsafe(H),At=0;for(Le=0;Le<L.length;++Le){var kt=L[Le];if(gt(kt,Uint8Array)&&(kt=C.from(kt)),!C.isBuffer(kt))throw new TypeError('"list" argument must be an Array of Buffers');kt.copy(it,At),At+=kt.length}return it},C.byteLength=D,C.prototype._isBuffer=!0,C.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<L;H+=2)Z(this,H,H+1);return this},C.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<L;H+=4)Z(this,H,H+3),Z(this,H+1,H+2);return this},C.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<L;H+=8)Z(this,H,H+7),Z(this,H+1,H+6),Z(this,H+2,H+5),Z(this,H+3,H+4);return this},C.prototype.toLocaleString=C.prototype.toString=function(){var L=this.length;return 0===L?"":0===arguments.length?ve(this,0,L):P.apply(this,arguments)},C.prototype.equals=function(L){if(!C.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||0===C.compare(this,L)},C.prototype.inspect=function(){var L="",H=pe.INSPECT_MAX_BYTES;return L=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(L+=" ... "),"<Buffer "+L+">"},C.prototype.compare=function(L,H,Le,it,At){if(gt(L,Uint8Array)&&(L=C.from(L,L.offset,L.byteLength)),!C.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(void 0===H&&(H=0),void 0===Le&&(Le=L?L.length:0),void 0===it&&(it=0),void 0===At&&(At=this.length),H<0||Le>L.length||it<0||At>this.length)throw new RangeError("out of range index");if(it>=At&&H>=Le)return 0;if(it>=At)return-1;if(H>=Le)return 1;if(this===L)return 0;for(var kt=(At>>>=0)-(it>>>=0),In=(Le>>>=0)-(H>>>=0),Pn=Math.min(kt,In),Yn=this.slice(it,At),Mi=L.slice(H,Le),xi=0;xi<Pn;++xi)if(Yn[xi]!==Mi[xi]){kt=Yn[xi],In=Mi[xi];break}return kt<In?-1:In<kt?1:0},C.prototype.includes=function(L,H,Le){return-1!==this.indexOf(L,H,Le)},C.prototype.indexOf=function(L,H,Le){return x(this,L,H,Le,!0)},C.prototype.lastIndexOf=function(L,H,Le){return x(this,L,H,Le,!1)},C.prototype.write=function(L,H,Le,it){if(void 0===H)it="utf8",Le=this.length,H=0;else if(void 0===Le&&"string"==typeof H)it=H,Le=this.length,H=0;else{if(!isFinite(H))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");H>>>=0,isFinite(Le)?(Le>>>=0,void 0===it&&(it="utf8")):(it=Le,Le=void 0)}var At=this.length-H;if((void 0===Le||Le>At)&&(Le=At),L.length>0&&(Le<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");it||(it="utf8");for(var kt=!1;;)switch(it){case"hex":return ne(this,L,H,Le);case"utf8":case"utf-8":return ue(this,L,H,Le);case"ascii":return se(this,L,H,Le);case"latin1":case"binary":return te(this,L,H,Le);case"base64":return Re(this,L,H,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,L,H,Le);default:if(kt)throw new TypeError("Unknown encoding: "+it);it=(""+it).toLowerCase(),kt=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ge(z,L,H){var Le="";H=Math.min(z.length,H);for(var it=L;it<H;++it)Le+=String.fromCharCode(127&z[it]);return Le}function J(z,L,H){var Le="";H=Math.min(z.length,H);for(var it=L;it<H;++it)Le+=String.fromCharCode(z[it]);return Le}function le(z,L,H){var Le=z.length;(!L||L<0)&&(L=0),(!H||H<0||H>Le)&&(H=Le);for(var it="",At=L;At<H;++At)it+=K(z[At]);return it}function _e(z,L,H){for(var Le=z.slice(L,H),it="",At=0;At<Le.length;At+=2)it+=String.fromCharCode(Le[At]+256*Le[At+1]);return it}function Me(z,L,H){if(z%1!=0||z<0)throw new RangeError("offset is not uint");if(z+L>H)throw new RangeError("Trying to access beyond buffer length")}function Ce(z,L,H,Le,it,At){if(!C.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>it||L<At)throw new RangeError('"value" argument is out of bounds');if(H+Le>z.length)throw new RangeError("Index out of range")}function $e(z,L,H,Le,it,At){if(H+Le>z.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function Se(z,L,H,Le,it){return L=+L,H>>>=0,it||$e(z,0,H,4),F.write(z,L,H,Le,23,4),H+4}function ze(z,L,H,Le,it){return L=+L,H>>>=0,it||$e(z,0,H,8),F.write(z,L,H,Le,52,8),H+8}C.prototype.slice=function(L,H){var Le=this.length;(L=~~L)<0?(L+=Le)<0&&(L=0):L>Le&&(L=Le),(H=void 0===H?Le:~~H)<0?(H+=Le)<0&&(H=0):H>Le&&(H=Le),H<L&&(H=L);var it=this.subarray(L,H);return it.__proto__=C.prototype,it},C.prototype.readUIntLE=function(L,H,Le){L>>>=0,H>>>=0,Le||Me(L,H,this.length);for(var it=this[L],At=1,kt=0;++kt<H&&(At*=256);)it+=this[L+kt]*At;return it},C.prototype.readUIntBE=function(L,H,Le){L>>>=0,H>>>=0,Le||Me(L,H,this.length);for(var it=this[L+--H],At=1;H>0&&(At*=256);)it+=this[L+--H]*At;return it},C.prototype.readUInt8=function(L,H){return L>>>=0,H||Me(L,1,this.length),this[L]},C.prototype.readUInt16LE=function(L,H){return L>>>=0,H||Me(L,2,this.length),this[L]|this[L+1]<<8},C.prototype.readUInt16BE=function(L,H){return L>>>=0,H||Me(L,2,this.length),this[L]<<8|this[L+1]},C.prototype.readUInt32LE=function(L,H){return L>>>=0,H||Me(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},C.prototype.readUInt32BE=function(L,H){return L>>>=0,H||Me(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},C.prototype.readIntLE=function(L,H,Le){L>>>=0,H>>>=0,Le||Me(L,H,this.length);for(var it=this[L],At=1,kt=0;++kt<H&&(At*=256);)it+=this[L+kt]*At;return it>=(At*=128)&&(it-=Math.pow(2,8*H)),it},C.prototype.readIntBE=function(L,H,Le){L>>>=0,H>>>=0,Le||Me(L,H,this.length);for(var it=H,At=1,kt=this[L+--it];it>0&&(At*=256);)kt+=this[L+--it]*At;return kt>=(At*=128)&&(kt-=Math.pow(2,8*H)),kt},C.prototype.readInt8=function(L,H){return L>>>=0,H||Me(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},C.prototype.readInt16LE=function(L,H){L>>>=0,H||Me(L,2,this.length);var Le=this[L]|this[L+1]<<8;return 32768&Le?4294901760|Le:Le},C.prototype.readInt16BE=function(L,H){L>>>=0,H||Me(L,2,this.length);var Le=this[L+1]|this[L]<<8;return 32768&Le?4294901760|Le:Le},C.prototype.readInt32LE=function(L,H){return L>>>=0,H||Me(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},C.prototype.readInt32BE=function(L,H){return L>>>=0,H||Me(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},C.prototype.readFloatLE=function(L,H){return L>>>=0,H||Me(L,4,this.length),F.read(this,L,!0,23,4)},C.prototype.readFloatBE=function(L,H){return L>>>=0,H||Me(L,4,this.length),F.read(this,L,!1,23,4)},C.prototype.readDoubleLE=function(L,H){return L>>>=0,H||Me(L,8,this.length),F.read(this,L,!0,52,8)},C.prototype.readDoubleBE=function(L,H){return L>>>=0,H||Me(L,8,this.length),F.read(this,L,!1,52,8)},C.prototype.writeUIntLE=function(L,H,Le,it){L=+L,H>>>=0,Le>>>=0,it||Ce(this,L,H,Le,Math.pow(2,8*Le)-1,0);var kt=1,In=0;for(this[H]=255&L;++In<Le&&(kt*=256);)this[H+In]=L/kt&255;return H+Le},C.prototype.writeUIntBE=function(L,H,Le,it){L=+L,H>>>=0,Le>>>=0,it||Ce(this,L,H,Le,Math.pow(2,8*Le)-1,0);var kt=Le-1,In=1;for(this[H+kt]=255&L;--kt>=0&&(In*=256);)this[H+kt]=L/In&255;return H+Le},C.prototype.writeUInt8=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,1,255,0),this[H]=255&L,H+1},C.prototype.writeUInt16LE=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,2,65535,0),this[H]=255&L,this[H+1]=L>>>8,H+2},C.prototype.writeUInt16BE=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,2,65535,0),this[H]=L>>>8,this[H+1]=255&L,H+2},C.prototype.writeUInt32LE=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,4,4294967295,0),this[H+3]=L>>>24,this[H+2]=L>>>16,this[H+1]=L>>>8,this[H]=255&L,H+4},C.prototype.writeUInt32BE=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,4,4294967295,0),this[H]=L>>>24,this[H+1]=L>>>16,this[H+2]=L>>>8,this[H+3]=255&L,H+4},C.prototype.writeIntLE=function(L,H,Le,it){if(L=+L,H>>>=0,!it){var At=Math.pow(2,8*Le-1);Ce(this,L,H,Le,At-1,-At)}var kt=0,In=1,Pn=0;for(this[H]=255&L;++kt<Le&&(In*=256);)L<0&&0===Pn&&0!==this[H+kt-1]&&(Pn=1),this[H+kt]=(L/In>>0)-Pn&255;return H+Le},C.prototype.writeIntBE=function(L,H,Le,it){if(L=+L,H>>>=0,!it){var At=Math.pow(2,8*Le-1);Ce(this,L,H,Le,At-1,-At)}var kt=Le-1,In=1,Pn=0;for(this[H+kt]=255&L;--kt>=0&&(In*=256);)L<0&&0===Pn&&0!==this[H+kt+1]&&(Pn=1),this[H+kt]=(L/In>>0)-Pn&255;return H+Le},C.prototype.writeInt8=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,1,127,-128),L<0&&(L=255+L+1),this[H]=255&L,H+1},C.prototype.writeInt16LE=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,2,32767,-32768),this[H]=255&L,this[H+1]=L>>>8,H+2},C.prototype.writeInt16BE=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,2,32767,-32768),this[H]=L>>>8,this[H+1]=255&L,H+2},C.prototype.writeInt32LE=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,4,2147483647,-2147483648),this[H]=255&L,this[H+1]=L>>>8,this[H+2]=L>>>16,this[H+3]=L>>>24,H+4},C.prototype.writeInt32BE=function(L,H,Le){return L=+L,H>>>=0,Le||Ce(this,L,H,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[H]=L>>>24,this[H+1]=L>>>16,this[H+2]=L>>>8,this[H+3]=255&L,H+4},C.prototype.writeFloatLE=function(L,H,Le){return Se(this,L,H,!0,Le)},C.prototype.writeFloatBE=function(L,H,Le){return Se(this,L,H,!1,Le)},C.prototype.writeDoubleLE=function(L,H,Le){return ze(this,L,H,!0,Le)},C.prototype.writeDoubleBE=function(L,H,Le){return ze(this,L,H,!1,Le)},C.prototype.copy=function(L,H,Le,it){if(!C.isBuffer(L))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!it&&0!==it&&(it=this.length),H>=L.length&&(H=L.length),H||(H=0),it>0&&it<Le&&(it=Le),it===Le||0===L.length||0===this.length)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(it<0)throw new RangeError("sourceEnd out of bounds");it>this.length&&(it=this.length),L.length-H<it-Le&&(it=L.length-H+Le);var At=it-Le;if(this===L&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(H,Le,it);else if(this===L&&Le<H&&H<it)for(var kt=At-1;kt>=0;--kt)L[kt+H]=this[kt+Le];else Uint8Array.prototype.set.call(L,this.subarray(Le,it),H);return At},C.prototype.fill=function(L,H,Le,it){if("string"==typeof L){if("string"==typeof H?(it=H,H=0,Le=this.length):"string"==typeof Le&&(it=Le,Le=this.length),void 0!==it&&"string"!=typeof it)throw new TypeError("encoding must be a string");if("string"==typeof it&&!C.isEncoding(it))throw new TypeError("Unknown encoding: "+it);if(1===L.length){var At=L.charCodeAt(0);("utf8"===it&&At<128||"latin1"===it)&&(L=At)}}else"number"==typeof L&&(L&=255);if(H<0||this.length<H||this.length<Le)throw new RangeError("Out of range index");if(Le<=H)return this;var kt;if(H>>>=0,Le=void 0===Le?this.length:Le>>>0,L||(L=0),"number"==typeof L)for(kt=H;kt<Le;++kt)this[kt]=L;else{var In=C.isBuffer(L)?L:C.from(L,it),Pn=In.length;if(0===Pn)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(kt=0;kt<Le-H;++kt)this[kt+H]=In[kt%Pn]}return this};var Ke=/[^+/0-9A-Za-z-_]/g;function K(z){return z<16?"0"+z.toString(16):z.toString(16)}function q(z,L){L=L||1/0;for(var H,Le=z.length,it=null,At=[],kt=0;kt<Le;++kt){if((H=z.charCodeAt(kt))>55295&&H<57344){if(!it){if(H>56319){(L-=3)>-1&&At.push(239,191,189);continue}if(kt+1===Le){(L-=3)>-1&&At.push(239,191,189);continue}it=H;continue}if(H<56320){(L-=3)>-1&&At.push(239,191,189),it=H;continue}H=65536+(it-55296<<10|H-56320)}else it&&(L-=3)>-1&&At.push(239,191,189);if(it=null,H<128){if((L-=1)<0)break;At.push(H)}else if(H<2048){if((L-=2)<0)break;At.push(H>>6|192,63&H|128)}else if(H<65536){if((L-=3)<0)break;At.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((L-=4)<0)break;At.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return At}function Ye(z){return U.toByteArray(function(z){if((z=(z=z.split("=")[0]).trim().replace(Ke,"")).length<2)return"";for(;z.length%4!=0;)z+="=";return z}(z))}function _t(z,L,H,Le){for(var it=0;it<Le&&!(it+H>=L.length||it>=z.length);++it)L[it+H]=z[it];return it}function gt(z,L){return z instanceof L||null!=z&&null!=z.constructor&&null!=z.constructor.name&&z.constructor.name===L.name}function Ae(z){return z!=z}}).call(this)}).call(this,Q("buffer").Buffer)},{"base64-js":2,buffer:6,ieee754:9}],7:[function(Q,Ee,pe){"use strict";Ee.exports=function X(U){return null===U||"object"!=typeof U||null!=U.toJSON?JSON.stringify(U):Array.isArray(U)?"["+U.reduce((F,Y,B)=>F+(0===B?"":",")+X(void 0===Y||"symbol"==typeof Y?null:Y),"")+"]":"{"+Object.keys(U).sort().reduce((F,Y,B)=>void 0===U[Y]||"symbol"==typeof U[Y]?F:F+(0===F.length?"":",")+X(Y)+":"+X(U[Y]),"")+"}"}},{}],8:[function(Q,Ee,pe){"use strict";var F,X="object"==typeof Reflect?Reflect:null,U=X&&"function"==typeof X.apply?X.apply:function(W,ne,ue){return Function.prototype.apply.call(W,ne,ue)};F=X&&"function"==typeof X.ownKeys?X.ownKeys:Object.getOwnPropertySymbols?function(W){return Object.getOwnPropertyNames(W).concat(Object.getOwnPropertySymbols(W))}:function(W){return Object.getOwnPropertyNames(W)};var B=Number.isNaN||function(W){return W!=W};function w(){w.init.call(this)}Ee.exports=w,Ee.exports.once=function(x,W){return new Promise(function(ne,ue){function se(Re){x.removeListener(W,te),ue(Re)}function te(){"function"==typeof x.removeListener&&x.removeListener("error",se),ne([].slice.call(arguments))}Z(x,W,te,{once:!0}),"error"!==W&&function(x,W,ne){"function"==typeof x.on&&Z(x,"error",W,ne)}(x,se,{once:!0})})},w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var C=10;function R(x){if("function"!=typeof x)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}function M(x){return void 0===x._maxListeners?w.defaultMaxListeners:x._maxListeners}function y(x,W,ne,ue){var se,te,Re;if(R(ne),void 0===(te=x._events)?(te=x._events=Object.create(null),x._eventsCount=0):(void 0!==te.newListener&&(x.emit("newListener",W,ne.listener?ne.listener:ne),te=x._events),Re=te[W]),void 0===Re)Re=te[W]=ne,++x._eventsCount;else if("function"==typeof Re?Re=te[W]=ue?[ne,Re]:[Re,ne]:ue?Re.unshift(ne):Re.push(ne),(se=M(x))>0&&Re.length>se&&!Re.warned){Re.warned=!0;var be=new Error("Possible EventEmitter memory leak detected. "+Re.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");be.name="MaxListenersExceededWarning",be.emitter=x,be.type=W,be.count=Re.length,function(x){console&&console.warn&&console.warn(x)}(be)}return x}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(x,W,ne){var ue={fired:!1,wrapFn:void 0,target:x,type:W,listener:ne},se=v.bind(ue);return se.listener=ne,ue.wrapFn=se,se}function S(x,W,ne){var ue=x._events;if(void 0===ue)return[];var se=ue[W];return void 0===se?[]:"function"==typeof se?ne?[se.listener||se]:[se]:ne?function(x){for(var W=new Array(x.length),ne=0;ne<W.length;++ne)W[ne]=x[ne].listener||x[ne];return W}(se):E(se,se.length)}function T(x){var W=this._events;if(void 0!==W){var ne=W[x];if("function"==typeof ne)return 1;if(void 0!==ne)return ne.length}return 0}function E(x,W){for(var ne=new Array(W),ue=0;ue<W;++ue)ne[ue]=x[ue];return ne}function Z(x,W,ne,ue){if("function"==typeof x.on)ue.once?x.once(W,ne):x.on(W,ne);else{if("function"!=typeof x.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x);x.addEventListener(W,function se(te){ue.once&&x.removeEventListener(W,se),ne(te)})}}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(x){if("number"!=typeof x||x<0||B(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");C=x}}),w.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(W){if("number"!=typeof W||W<0||B(W))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+W+".");return this._maxListeners=W,this},w.prototype.getMaxListeners=function(){return M(this)},w.prototype.emit=function(W){for(var ne=[],ue=1;ue<arguments.length;ue++)ne.push(arguments[ue]);var se="error"===W,te=this._events;if(void 0!==te)se=se&&void 0===te.error;else if(!se)return!1;if(se){var Re;if(ne.length>0&&(Re=ne[0]),Re instanceof Error)throw Re;var be=new Error("Unhandled error."+(Re?" ("+Re.message+")":""));throw be.context=Re,be}var re=te[W];if(void 0===re)return!1;if("function"==typeof re)U(re,this,ne);else{var ve=re.length,Fe=E(re,ve);for(ue=0;ue<ve;++ue)U(Fe[ue],this,ne)}return!0},w.prototype.on=w.prototype.addListener=function(W,ne){return y(this,W,ne,!1)},w.prototype.prependListener=function(W,ne){return y(this,W,ne,!0)},w.prototype.once=function(W,ne){return R(ne),this.on(W,b(this,W,ne)),this},w.prototype.prependOnceListener=function(W,ne){return R(ne),this.prependListener(W,b(this,W,ne)),this},w.prototype.off=w.prototype.removeListener=function(W,ne){var ue,se,te,Re,be;if(R(ne),void 0===(se=this._events))return this;if(void 0===(ue=se[W]))return this;if(ue===ne||ue.listener===ne)0==--this._eventsCount?this._events=Object.create(null):(delete se[W],se.removeListener&&this.emit("removeListener",W,ue.listener||ne));else if("function"!=typeof ue){for(te=-1,Re=ue.length-1;Re>=0;Re--)if(ue[Re]===ne||ue[Re].listener===ne){be=ue[Re].listener,te=Re;break}if(te<0)return this;0===te?ue.shift():function(x,W){for(;W+1<x.length;W++)x[W]=x[W+1];x.pop()}(ue,te),1===ue.length&&(se[W]=ue[0]),void 0!==se.removeListener&&this.emit("removeListener",W,be||ne)}return this},w.prototype.removeAllListeners=function(W){var ne,ue,se;if(void 0===(ue=this._events))return this;if(void 0===ue.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ue[W]&&(0==--this._eventsCount?this._events=Object.create(null):delete ue[W]),this;if(0===arguments.length){var Re,te=Object.keys(ue);for(se=0;se<te.length;++se)"removeListener"!==(Re=te[se])&&this.removeAllListeners(Re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ne=ue[W]))this.removeListener(W,ne);else if(void 0!==ne)for(se=ne.length-1;se>=0;se--)this.removeListener(W,ne[se]);return this},w.prototype.listeners=function(W){return S(this,W,!0)},w.prototype.rawListeners=function(W){return S(this,W,!1)},w.listenerCount=function(x,W){return"function"==typeof x.listenerCount?x.listenerCount(W):T.call(x,W)},w.prototype.listenerCount=T,w.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]}},{}],9:[function(Q,Ee,pe){pe.read=function(X,U,F,Y,B){var w,C,R=8*B-Y-1,M=(1<<R)-1,y=M>>1,v=-7,b=F?B-1:0,S=F?-1:1,T=X[U+b];for(b+=S,w=T&(1<<-v)-1,T>>=-v,v+=R;v>0;w=256*w+X[U+b],b+=S,v-=8);for(C=w&(1<<-v)-1,w>>=-v,v+=Y;v>0;C=256*C+X[U+b],b+=S,v-=8);if(0===w)w=1-y;else{if(w===M)return C?NaN:1/0*(T?-1:1);C+=Math.pow(2,Y),w-=y}return(T?-1:1)*C*Math.pow(2,w-Y)},pe.write=function(X,U,F,Y,B,w){var C,R,M,y=8*w-B-1,v=(1<<y)-1,b=v>>1,S=23===B?Math.pow(2,-24)-Math.pow(2,-77):0,T=Y?0:w-1,E=Y?1:-1,O=U<0||0===U&&1/U<0?1:0;for(U=Math.abs(U),isNaN(U)||U===1/0?(R=isNaN(U)?1:0,C=v):(C=Math.floor(Math.log(U)/Math.LN2),U*(M=Math.pow(2,-C))<1&&(C--,M*=2),(U+=C+b>=1?S/M:S*Math.pow(2,1-b))*M>=2&&(C++,M/=2),C+b>=v?(R=0,C=v):C+b>=1?(R=(U*M-1)*Math.pow(2,B),C+=b):(R=U*Math.pow(2,b-1)*Math.pow(2,B),C=0));B>=8;X[F+T]=255&R,T+=E,R/=256,B-=8);for(C=C<<B|R,y+=B;y>0;X[F+T]=255&C,T+=E,C/=256,y-=8);X[F+T-E]|=128*O}},{}],10:[function(Q,Ee,pe){Ee.exports="function"==typeof Object.create?function(U,F){F&&(U.super_=F,U.prototype=Object.create(F.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}))}:function(U,F){if(F){U.super_=F;var Y=function(){};Y.prototype=F.prototype,U.prototype=new Y,U.prototype.constructor=U}}},{}],11:[function(Q,Ee,pe){"use strict";const{isArray:X,isObject:U,isString:F}=Q("./types"),{asArray:Y}=Q("./util"),{prependBase:B}=Q("./url"),w=Q("./JsonLdError"),C=Q("./ResolvedContext");function M(v){throw new w("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:v})}function y({context:v,base:b}){if(!v)return;const S=v["@context"];if(F(S))v["@context"]=B(b,S);else if(X(S))for(let T=0;T<S.length;++T){const E=S[T];F(E)?S[T]=B(b,E):U(E)&&y({context:{"@context":E},base:b})}else if(U(S))for(const T in S)y({context:S[T],base:b})}Ee.exports=class{constructor({sharedCache:b}){this.perOpCache=new Map,this.sharedCache=b}resolve({activeCtx:b,context:S,documentLoader:T,base:E,cycles:O=new Set}){var $=this;return lt(function*(){S&&U(S)&&S["@context"]&&(S=S["@context"]),S=Y(S);const D=[];for(const P of S){if(F(P)){let W=$._get(P);W||(W=yield $._resolveRemoteContext({activeCtx:b,url:P,documentLoader:T,base:E,cycles:O})),X(W)?D.push(...W):D.push(W);continue}if(null===P){D.push(new C({document:null}));continue}U(P)||M(S);const Z=JSON.stringify(P);let x=$._get(Z);x||(x=new C({document:P}),$._cacheResolvedContext({key:Z,resolved:x,tag:"static"})),D.push(x)}return D})()}_get(b){let S=this.perOpCache.get(b);if(!S){const T=this.sharedCache.get(b);T&&(S=T.get("static"),S&&this.perOpCache.set(b,S))}return S}_cacheResolvedContext({key:b,resolved:S,tag:T}){if(this.perOpCache.set(b,S),void 0!==T){let E=this.sharedCache.get(b);E||(E=new Map,this.sharedCache.set(b,E)),E.set(T,S)}return S}_resolveRemoteContext({activeCtx:b,url:S,documentLoader:T,base:E,cycles:O}){var $=this;return lt(function*(){S=B(E,S);const{context:D,remoteDoc:P}=yield $._fetchContext({activeCtx:b,url:S,documentLoader:T,cycles:O});y({context:D,base:E=P.documentUrl||S});const Z=yield $.resolve({activeCtx:b,context:D,documentLoader:T,base:E,cycles:O});return $._cacheResolvedContext({key:S,resolved:Z,tag:P.tag}),Z})()}_fetchContext({activeCtx:b,url:S,documentLoader:T,cycles:E}){return lt(function*(){if(E.size>10)throw new w("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===b.processingMode?"loading remote context failed":"context overflow",max:10});if(E.has(S))throw new w("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===b.processingMode?"recursive context inclusion":"context overflow",url:S});let O,$;E.add(S);try{$=yield T(S),O=$.document||null,F(O)&&(O=JSON.parse(O))}catch(D){throw new w("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:S,cause:D})}if(!U(O))throw new w("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:S});return O="@context"in O?{"@context":O["@context"]}:{"@context":{}},$.contextUrl&&(X(O["@context"])||(O["@context"]=[O["@context"]]),O["@context"].push($.contextUrl)),{context:O,remoteDoc:$}})()}}},{"./JsonLdError":12,"./ResolvedContext":16,"./types":30,"./url":31,"./util":32}],12:[function(Q,Ee,pe){"use strict";Ee.exports=class extends Error{constructor(U="An unspecified JSON-LD error occurred.",F="jsonld.Error",Y={}){super(U),this.name=F,this.message=U,this.details=Y}}},{}],13:[function(Q,Ee,pe){"use strict";Ee.exports=X=>{class U{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(U,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(U.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:U}),U.compact=function(F,Y){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):X.compact(F,Y)},U.expand=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):X.expand(F)},U.flatten=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):X.flatten(F)},U}},{}],14:[function(Q,Ee,pe){"use strict";Ee.exports=Q("rdf-canonize").NQuads},{"rdf-canonize":46}],15:[function(Q,Ee,pe){"use strict";Ee.exports=class{constructor(){this._requests={}}wrapLoader(U){const F=this;return F._loader=U,function(){return F.add.apply(F,arguments)}}add(U){var F=this;return lt(function*(){let Y=F._requests[U];if(Y)return Promise.resolve(Y);Y=F._requests[U]=F._loader(U);try{return yield Y}finally{delete F._requests[U]}})()}}},{}],16:[function(Q,Ee,pe){"use strict";const X=Q("lru-cache");Ee.exports=class{constructor({document:Y}){this.document=Y,this.cache=new X({max:10})}getProcessed(Y){return this.cache.get(Y)}setProcessed(Y,B){this.cache.set(Y,B)}}},{"lru-cache":33}],17:[function(Q,Ee,pe){"use strict";const X=Q("./JsonLdError"),{isArray:U,isObject:F,isString:Y,isUndefined:B}=Q("./types"),{isList:w,isValue:C,isGraph:R,isSimpleGraph:M,isSubjectReference:y}=Q("./graphTypes"),{expandIri:v,getContextValue:b,isKeyword:S,process:T,processingMode:E}=Q("./context"),{removeBase:O,prependBase:$}=Q("./url"),{addValue:D,asArray:P,compareShortestLeast:Z}=Q("./util"),x={};function ne(ue,se,te){if("@nest"!==v(ue,se,{vocab:!0},te))throw new X("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ee.exports=x,x.compact=function(){var ue=lt(function*({activeCtx:se,activeProperty:te=null,element:Re,options:be={},compactionMap:re=(()=>{})}){if(U(Re)){let Fe=[];for(let Ze=0;Ze<Re.length;++Ze){let Ge=yield x.compact({activeCtx:se,activeProperty:te,element:Re[Ze],options:be,compactionMap:re});null===Ge&&(Ge=yield re({unmappedValue:Re[Ze],activeCtx:se,activeProperty:te,parent:Re,index:Ze,options:be}),void 0===Ge)||Fe.push(Ge)}return be.compactArrays&&1===Fe.length&&0===(b(se,te,"@container")||[]).length&&(Fe=Fe[0]),Fe}const ve=b(se,te,"@context");if(B(ve)||(se=yield T({activeCtx:se,localCtx:ve,propagate:!0,overrideProtected:!0,options:be})),F(Re)){if(be.link&&"@id"in Re&&be.link.hasOwnProperty(Re["@id"])){const Ce=be.link[Re["@id"]];for(let $e=0;$e<Ce.length;++$e)if(Ce[$e].expanded===Re)return Ce[$e].compacted}if(C(Re)||y(Re)){const Ce=x.compactValue({activeCtx:se,activeProperty:te,value:Re,options:be});return be.link&&y(Re)&&(be.link.hasOwnProperty(Re["@id"])||(be.link[Re["@id"]]=[]),be.link[Re["@id"]].push({expanded:Re,compacted:Ce})),Ce}if(w(Re)&&(b(se,te,"@container")||[]).includes("@list"))return x.compact({activeCtx:se,activeProperty:te,element:Re["@list"],options:be,compactionMap:re});const Fe="@reverse"===te,Ze={},Ge=se;!C(Re)&&!y(Re)&&(se=se.revertToPreviousContext());const J=b(Ge,te,"@context");B(J)||(se=yield T({activeCtx:se,localCtx:J,propagate:!0,overrideProtected:!0,options:be})),be.link&&"@id"in Re&&(be.link.hasOwnProperty(Re["@id"])||(be.link[Re["@id"]]=[]),be.link[Re["@id"]].push({expanded:Re,compacted:Ze}));let le=Re["@type"]||[];le.length>1&&(le=Array.from(le).sort());const _e=se;for(const Ce of le){const $e=x.compactIri({activeCtx:_e,iri:Ce,relativeTo:{vocab:!0}}),Se=b(Ge,$e,"@context");B(Se)||(se=yield T({activeCtx:se,localCtx:Se,options:be,propagate:!1}))}const Me=Object.keys(Re).sort();for(const Ce of Me){const $e=Re[Ce];if("@id"!==Ce)if("@type"!==Ce)if("@reverse"!==Ce)if("@preserve"!==Ce)if("@index"!==Ce)if("@graph"!==Ce&&"@list"!==Ce&&"@included"!==Ce&&S(Ce)){const Se=x.compactIri({activeCtx:se,iri:Ce,relativeTo:{vocab:!0}});D(Ze,Se,$e)}else{if(!U($e))throw new X("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===$e.length){const Se=x.compactIri({activeCtx:se,iri:Ce,value:$e,relativeTo:{vocab:!0},reverse:Fe}),ze=se.mappings.has(Se)?se.mappings.get(Se)["@nest"]:null;let Ke=Ze;ze&&(ne(se,ze,be),F(Ze[ze])||(Ze[ze]={}),Ke=Ze[ze]),D(Ke,Se,$e,{propertyIsArray:!0})}for(const Se of $e){const ze=x.compactIri({activeCtx:se,iri:Ce,value:Se,relativeTo:{vocab:!0},reverse:Fe}),Ke=se.mappings.has(ze)?se.mappings.get(ze)["@nest"]:null;let Ve=Ze;Ke&&(ne(se,Ke,be),F(Ze[Ke])||(Ze[Ke]={}),Ve=Ze[Ke]);const K=b(se,ze,"@container")||[],q=R(Se),ge=w(Se);let ce;ge?ce=Se["@list"]:q&&(ce=Se["@graph"]);let Ye=yield x.compact({activeCtx:se,activeProperty:ze,element:ge||q?ce:Se,options:be,compactionMap:re});if(ge){if(U(Ye)||(Ye=[Ye]),K.includes("@list")){D(Ve,ze,Ye,{valueIsArray:!0,allowDuplicate:!0});continue}Ye={[x.compactIri({activeCtx:se,iri:"@list",relativeTo:{vocab:!0}})]:Ye},"@index"in Se&&(Ye[x.compactIri({activeCtx:se,iri:"@index",relativeTo:{vocab:!0}})]=Se["@index"])}if(q)if(K.includes("@graph")&&(K.includes("@id")||K.includes("@index")&&M(Se))){let _t;Ve.hasOwnProperty(ze)?_t=Ve[ze]:Ve[ze]=_t={};const gt=(K.includes("@id")?Se["@id"]:Se["@index"])||x.compactIri({activeCtx:se,iri:"@none",relativeTo:{vocab:!0}});D(_t,gt,Ye,{propertyIsArray:!be.compactArrays||K.includes("@set")})}else K.includes("@graph")&&M(Se)?(U(Ye)&&Ye.length>1&&(Ye={"@included":Ye}),D(Ve,ze,Ye,{propertyIsArray:!be.compactArrays||K.includes("@set")})):(U(Ye)&&1===Ye.length&&be.compactArrays&&(Ye=Ye[0]),Ye={[x.compactIri({activeCtx:se,iri:"@graph",relativeTo:{vocab:!0}})]:Ye},"@id"in Se&&(Ye[x.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}})]=Se["@id"]),"@index"in Se&&(Ye[x.compactIri({activeCtx:se,iri:"@index",relativeTo:{vocab:!0}})]=Se["@index"]),D(Ve,ze,Ye,{propertyIsArray:!be.compactArrays||K.includes("@set")}));else if(K.includes("@language")||K.includes("@index")||K.includes("@id")||K.includes("@type")){let _t,gt;if(Ve.hasOwnProperty(ze)?_t=Ve[ze]:Ve[ze]=_t={},K.includes("@language"))C(Ye)&&(Ye=Ye["@value"]),gt=Se["@language"];else if(K.includes("@index")){const Ae=b(se,ze,"@index")||"@index",z=x.compactIri({activeCtx:se,iri:Ae,relativeTo:{vocab:!0}});if("@index"===Ae)gt=Se["@index"],delete Ye[z];else{let L;if([gt,...L]=P(Ye[Ae]||[]),Y(gt))switch(L.length){case 0:delete Ye[Ae];break;case 1:Ye[Ae]=L[0];break;default:Ye[Ae]=L}else gt=null}}else if(K.includes("@id")){const Ae=x.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}});gt=Ye[Ae],delete Ye[Ae]}else if(K.includes("@type")){const Ae=x.compactIri({activeCtx:se,iri:"@type",relativeTo:{vocab:!0}});let z;switch([gt,...z]=P(Ye[Ae]||[]),z.length){case 0:delete Ye[Ae];break;case 1:Ye[Ae]=z[0];break;default:Ye[Ae]=z}1===Object.keys(Ye).length&&"@id"in Se&&(Ye=yield x.compact({activeCtx:se,activeProperty:ze,element:{"@id":Se["@id"]},options:be,compactionMap:re}))}gt||(gt=x.compactIri({activeCtx:se,iri:"@none",relativeTo:{vocab:!0}})),D(_t,gt,Ye,{propertyIsArray:K.includes("@set")})}else{const _t=!be.compactArrays||K.includes("@set")||K.includes("@list")||U(Ye)&&0===Ye.length||"@list"===Ce||"@graph"===Ce;D(Ve,ze,Ye,{propertyIsArray:_t})}}}else{if((b(se,te,"@container")||[]).includes("@index"))continue;const ze=x.compactIri({activeCtx:se,iri:Ce,relativeTo:{vocab:!0}});D(Ze,ze,$e)}else{const Se=yield x.compact({activeCtx:se,activeProperty:te,element:$e,options:be,compactionMap:re});U(Se)&&0===Se.length||D(Ze,Ce,Se)}else{const Se=yield x.compact({activeCtx:se,activeProperty:"@reverse",element:$e,options:be,compactionMap:re});for(const ze in Se)if(se.mappings.has(ze)&&se.mappings.get(ze).reverse){const Ke=Se[ze],K=(b(se,ze,"@container")||[]).includes("@set")||!be.compactArrays;D(Ze,ze,Ke,{propertyIsArray:K}),delete Se[ze]}if(Object.keys(Se).length>0){const ze=x.compactIri({activeCtx:se,iri:Ce,relativeTo:{vocab:!0}});D(Ze,ze,Se)}}else{let Se=P($e).map(q=>x.compactIri({activeCtx:Ge,iri:q,relativeTo:{vocab:!0}}));1===Se.length&&(Se=Se[0]);const ze=x.compactIri({activeCtx:se,iri:"@type",relativeTo:{vocab:!0}}),K=(b(se,ze,"@container")||[]).includes("@set")&&E(se,1.1)||U(Se)&&0===$e.length;D(Ze,ze,Se,{propertyIsArray:K})}else{let Se=P($e).map(Ke=>x.compactIri({activeCtx:se,iri:Ke,relativeTo:{vocab:!1},base:be.base}));1===Se.length&&(Se=Se[0]),Ze[x.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}})]=Se}}return Ze}return Re});return function(se){return ue.apply(this,arguments)}}(),x.compactIri=({activeCtx:ue,iri:se,value:te=null,relativeTo:Re={vocab:!1},reverse:be=!1,base:re=null})=>{if(null===se)return se;ue.isPropertyTermScoped&&ue.previousContext&&(ue=ue.previousContext);const ve=ue.getInverse();if(S(se)&&se in ve&&"@none"in ve[se]&&"@type"in ve[se]["@none"]&&"@none"in ve[se]["@none"]["@type"])return ve[se]["@none"]["@type"]["@none"];if(Re.vocab&&se in ve){const le=ue["@language"]||"@none",_e=[];F(te)&&"@index"in te&&!("@graph"in te)&&_e.push("@index","@index@set"),F(te)&&"@preserve"in te&&(te=te["@preserve"][0]),R(te)?("@index"in te&&_e.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in te&&_e.push("@graph@id","@graph@id@set"),_e.push("@graph","@graph@set","@set"),"@index"in te||_e.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in te||_e.push("@graph@id","@graph@id@set")):F(te)&&!C(te)&&_e.push("@id","@id@set","@type","@set@type");let Me="@language",Ce="@null";if(be)Me="@type",Ce="@reverse",_e.push("@set");else if(w(te)){"@index"in te||_e.push("@list");const Se=te["@list"];if(0===Se.length)Me="@any",Ce="@none";else{let ze=0===Se.length?le:null,Ke=null;for(let Ve=0;Ve<Se.length;++Ve){const K=Se[Ve];let q="@none",ge="@none";if(C(K)?"@direction"in K?q=`${(K["@language"]||"").toLowerCase()}_${K["@direction"]}`:"@language"in K?q=K["@language"].toLowerCase():"@type"in K?ge=K["@type"]:q="@null":ge="@id",null===ze?ze=q:q!==ze&&C(K)&&(ze="@none"),null===Ke?Ke=ge:ge!==Ke&&(Ke="@none"),"@none"===ze&&"@none"===Ke)break}ze=ze||"@none",Ke=Ke||"@none","@none"!==Ke?(Me="@type",Ce=Ke):Ce=ze}}else{if(C(te))if("@language"in te&&!("@index"in te)){_e.push("@language","@language@set"),Ce=te["@language"];const Se=te["@direction"];Se&&(Ce=`${Ce}_${Se}`)}else"@direction"in te&&!("@index"in te)?Ce=`_${te["@direction"]}`:"@type"in te&&(Me="@type",Ce=te["@type"]);else Me="@type",Ce="@id";_e.push("@set")}_e.push("@none"),F(te)&&!("@index"in te)&&_e.push("@index","@index@set"),C(te)&&1===Object.keys(te).length&&_e.push("@language","@language@set");const $e=function(ue,se,te,Re,be,re){null===re&&(re="@null");const ve=[];if(("@id"===re||"@reverse"===re)&&F(te)&&"@id"in te){"@reverse"===re&&ve.push("@reverse");const Ze=x.compactIri({activeCtx:ue,iri:te["@id"],relativeTo:{vocab:!0}});ue.mappings.has(Ze)&&ue.mappings.get(Ze)&&ue.mappings.get(Ze)["@id"]===te["@id"]?ve.push.apply(ve,["@vocab","@id"]):ve.push.apply(ve,["@id","@vocab"])}else{ve.push(re);const Ze=ve.find(Ge=>Ge.includes("_"));Ze&&ve.push(Ze.replace(/^[^_]+_/,"_"))}ve.push("@none");const Fe=ue.inverse[se];for(const Ze of Re){if(!(Ze in Fe))continue;const Ge=Fe[Ze][be];for(const J of ve)if(J in Ge)return Ge[J]}return null}(ue,se,te,_e,Me,Ce);if(null!==$e)return $e}if(Re.vocab&&"@vocab"in ue){const le=ue["@vocab"];if(0===se.indexOf(le)&&se!==le){const _e=se.substr(le.length);if(!ue.mappings.has(_e))return _e}}let Fe=null;const Ze=[];let Ge=ue.fastCurieMap;const J=se.length-1;for(let le=0;le<J&&se[le]in Ge;++le)Ge=Ge[se[le]],""in Ge&&Ze.push(Ge[""][0]);for(let le=Ze.length-1;le>=0;--le){const _e=Ze[le],Me=_e.terms;for(const Ce of Me){const $e=Ce+":"+se.substr(_e.iri.length);ue.mappings.get(Ce)._prefix&&(!ue.mappings.has($e)||null===te&&ue.mappings.get($e)["@id"]===se)&&(null===Fe||Z($e,Fe)<0)&&(Fe=$e)}}if(null!==Fe)return Fe;for(const[le,_e]of ue.mappings)if(_e&&_e._prefix&&se.startsWith(le+":"))throw new X(`Absolute IRI "${se}" confused with prefix "${le}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:ue});return Re.vocab?se:"@base"in ue?ue["@base"]?O($(re,ue["@base"]),se):se:O(re,se)},x.compactValue=({activeCtx:ue,activeProperty:se,value:te,options:Re})=>{if(C(te)){const Fe=b(ue,se,"@type"),Ze=b(ue,se,"@language"),Ge=b(ue,se,"@direction"),J=b(ue,se,"@container")||[],le="@index"in te&&!J.includes("@index");if(!le&&"@none"!==Fe&&(te["@type"]===Fe||"@language"in te&&te["@language"]===Ze&&"@direction"in te&&te["@direction"]===Ge||"@language"in te&&te["@language"]===Ze||"@direction"in te&&te["@direction"]===Ge))return te["@value"];const _e=Object.keys(te).length,Me=1===_e||2===_e&&"@index"in te&&!le,Ce="@language"in ue,$e=Y(te["@value"]),Se=ue.mappings.has(se)&&null===ue.mappings.get(se)["@language"];if(Me&&"@none"!==Fe&&(!Ce||!$e||Se))return te["@value"];const ze={};return le&&(ze[x.compactIri({activeCtx:ue,iri:"@index",relativeTo:{vocab:!0}})]=te["@index"]),"@type"in te?ze[x.compactIri({activeCtx:ue,iri:"@type",relativeTo:{vocab:!0}})]=x.compactIri({activeCtx:ue,iri:te["@type"],relativeTo:{vocab:!0}}):"@language"in te&&(ze[x.compactIri({activeCtx:ue,iri:"@language",relativeTo:{vocab:!0}})]=te["@language"]),"@direction"in te&&(ze[x.compactIri({activeCtx:ue,iri:"@direction",relativeTo:{vocab:!0}})]=te["@direction"]),ze[x.compactIri({activeCtx:ue,iri:"@value",relativeTo:{vocab:!0}})]=te["@value"],ze}const be=v(ue,se,{vocab:!0},Re),re=b(ue,se,"@type"),ve=x.compactIri({activeCtx:ue,iri:te["@id"],relativeTo:{vocab:"@vocab"===re},base:Re.base});return"@id"===re||"@vocab"===re||"@graph"===be?ve:{[x.compactIri({activeCtx:ue,iri:"@id",relativeTo:{vocab:!0}})]:ve}}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],18:[function(Q,Ee,pe){"use strict";const X="http://www.w3.org/1999/02/22-rdf-syntax-ns#",U="http://www.w3.org/2001/XMLSchema#";Ee.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:X,RDF_LIST:X+"List",RDF_FIRST:X+"first",RDF_REST:X+"rest",RDF_NIL:X+"nil",RDF_TYPE:X+"type",RDF_PLAIN_LITERAL:X+"PlainLiteral",RDF_XML_LITERAL:X+"XMLLiteral",RDF_JSON_LITERAL:X+"JSON",RDF_OBJECT:X+"object",RDF_LANGSTRING:X+"langString",XSD:U,XSD_BOOLEAN:U+"boolean",XSD_DOUBLE:U+"double",XSD_INTEGER:U+"integer",XSD_STRING:U+"string"}},{}],19:[function(Q,Ee,pe){"use strict";const X=Q("./util"),U=Q("./JsonLdError"),{isArray:F,isObject:Y,isString:B,isUndefined:w}=Q("./types"),{isAbsolute:C,isRelative:R,prependBase:M}=Q("./url"),{asArray:y,compareShortestLeast:v}=Q("./util"),b=new Map,T=/^@[a-zA-Z]+$/,E={};function O(D,P,Z,x,W,ne){if(null===P||!B(P)||E.isKeyword(P))return P;if(P.match(T))return null;if(x&&x.hasOwnProperty(P)&&!0!==W.get(P)&&E.createTermDefinition({activeCtx:D,localCtx:x,term:P,defined:W,options:ne}),(Z=Z||{}).vocab){const se=D.mappings.get(P);if(null===se)return null;if(Y(se)&&"@id"in se)return se["@id"]}const ue=P.indexOf(":");if(ue>0){const se=P.substr(0,ue),te=P.substr(ue+1);if("_"===se||0===te.indexOf("//"))return P;x&&x.hasOwnProperty(se)&&E.createTermDefinition({activeCtx:D,localCtx:x,term:se,defined:W,options:ne});const Re=D.mappings.get(se);if(Re&&Re._prefix)return Re["@id"]+te;if(C(P))return P}if(Z.vocab&&"@vocab"in D)return D["@vocab"]+P;if(Z.base&&"@base"in D){if(D["@base"])return M(M(ne.base,D["@base"]),P)}else if(Z.base)return M(ne.base,P);return P}function $(D,P){if(!D||"object"!=typeof D||!P||"object"!=typeof P)return D===P;const Z=Array.isArray(D);if(Z!==Array.isArray(P))return!1;if(Z){if(D.length!==P.length)return!1;for(let ne=0;ne<D.length;++ne)if(!$(D[ne],P[ne]))return!1;return!0}const x=Object.keys(D),W=Object.keys(P);if(x.length!==W.length)return!1;for(const ne in D){let ue=D[ne],se=P[ne];if("@container"===ne&&Array.isArray(ue)&&Array.isArray(se)&&(ue=ue.slice().sort(),se=se.slice().sort()),!$(ue,se))return!1}return!0}Ee.exports=E,E.process=function(){var D=lt(function*({activeCtx:P,localCtx:Z,options:x,propagate:W=!0,overrideProtected:ne=!1,cycles:ue=new Set}){if(Y(Z)&&"@context"in Z&&F(Z["@context"])&&(Z=Z["@context"]),0===y(Z).length)return P;const te=yield x.contextResolver.resolve({activeCtx:P,context:Z,documentLoader:x.documentLoader,base:x.base});Y(te[0].document)&&"boolean"==typeof te[0].document["@propagate"]&&(W=te[0].document["@propagate"]);let Re=P;!W&&!Re.previousContext&&(Re=Re.clone(),Re.previousContext=P);for(const be of te){let{document:re}=be;if(P=Re,null===re){if(!ne&&0!==Object.keys(P.protected).length){const Ze=x&&x.protectedMode||"error";if("error"===Ze)throw new U("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===Ze){console.warn("WARNING: invalid context nullification");const Ge=be.getProcessed(P);if(Ge){Re=P=Ge;continue}const J=P;Re=P=E.getInitialContext(x).clone();for(const[le,_e]of Object.entries(J.protected))_e&&(P.mappings[le]=X.clone(J.mappings[le]));P.protected=X.clone(J.protected),be.setProcessed(J,Re);continue}throw new U("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:Z,protectedMode:Ze})}Re=P=E.getInitialContext(x).clone();continue}const ve=be.getProcessed(P);if(ve){Re=P=ve;continue}if(Y(re)&&"@context"in re&&(re=re["@context"]),!Y(re))throw new U("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:re});Re=Re.clone();const Fe=new Map;if("@version"in re){if(1.1!==re["@version"])throw new U("Unsupported JSON-LD version: "+re["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:re});if(P.processingMode&&"json-ld-1.0"===P.processingMode)throw new U("@version: "+re["@version"]+" not compatible with "+P.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:re});Re.processingMode="json-ld-1.1",Re["@version"]=re["@version"],Fe.set("@version",!0)}if(Re.processingMode=Re.processingMode||P.processingMode,"@base"in re){let Ze=re["@base"];if(null!==Ze&&!C(Ze)){if(!R(Ze))throw new U('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:re});Ze=M(Re["@base"],Ze)}Re["@base"]=Ze,Fe.set("@base",!0)}if("@vocab"in re){const Ze=re["@vocab"];if(null===Ze)delete Re["@vocab"];else{if(!B(Ze))throw new U('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:re});if(!C(Ze)&&E.processingMode(Re,1))throw new U('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:re});Re["@vocab"]=O(Re,Ze,{vocab:!0,base:!0},void 0,void 0,x)}Fe.set("@vocab",!0)}if("@language"in re){const Ze=re["@language"];if(null===Ze)delete Re["@language"];else{if(!B(Ze))throw new U('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:re});Re["@language"]=Ze.toLowerCase()}Fe.set("@language",!0)}if("@direction"in re){const Ze=re["@direction"];if("json-ld-1.0"===P.processingMode)throw new U("Invalid JSON-LD syntax; @direction not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:re});if(null===Ze)delete Re["@direction"];else{if("ltr"!==Ze&&"rtl"!==Ze)throw new U('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:re});Re["@direction"]=Ze}Fe.set("@direction",!0)}if("@propagate"in re){const Ze=re["@propagate"];if("json-ld-1.0"===P.processingMode)throw new U("Invalid JSON-LD syntax; @propagate not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:re});if("boolean"!=typeof Ze)throw new U("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:Z});Fe.set("@propagate",!0)}if("@import"in re){const Ze=re["@import"];if("json-ld-1.0"===P.processingMode)throw new U("Invalid JSON-LD syntax; @import not compatible with "+P.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:re});if(!B(Ze))throw new U("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:Z});const Ge=yield x.contextResolver.resolve({activeCtx:P,context:Ze,documentLoader:x.documentLoader,base:x.base});if(1!==Ge.length)throw new U("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:Z});const J=Ge[0].getProcessed(P);if(J)re=J;else{const le=Ge[0].document;if("@import"in le)throw new U("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:Z});for(const _e in le)re.hasOwnProperty(_e)||(re[_e]=le[_e]);Ge[0].setProcessed(P,re)}Fe.set("@import",!0)}Fe.set("@protected",re["@protected"]||!1);for(const Ze in re)if(E.createTermDefinition({activeCtx:Re,localCtx:re,term:Ze,defined:Fe,options:x,overrideProtected:ne}),Y(re[Ze])&&"@context"in re[Ze]){const Ge=re[Ze]["@context"];let J=!0;if(B(Ge)){const le=M(x.base,Ge);ue.has(le)?J=!1:ue.add(le)}if(J)try{yield E.process({activeCtx:Re.clone(),localCtx:re[Ze]["@context"],overrideProtected:!0,options:x,cycles:ue})}catch(le){throw new U("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:re[Ze]["@context"],term:Ze})}}be.setProcessed(P,Re)}return Re});return function(P){return D.apply(this,arguments)}}(),E.createTermDefinition=({activeCtx:D,localCtx:P,term:Z,defined:x,options:W,overrideProtected:ne=!1})=>{if(x.has(Z)){if(x.get(Z))return;throw new U("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:P,term:Z})}let ue;if(x.set(Z,!1),P.hasOwnProperty(Z)&&(ue=P[Z]),"@type"===Z&&Y(ue)&&"@set"===(ue["@container"]||"@set")&&E.processingMode(D,1.1)){const Fe=["@container","@id","@protected"],Ze=Object.keys(ue);if(0===Ze.length||Ze.some(Ge=>!Fe.includes(Ge)))throw new U("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:Z})}else{if(E.isKeyword(Z))throw new U("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:Z});if(Z.match(T))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:Z});if(""===Z)throw new U("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:P})}const se=D.mappings.get(Z);D.mappings.has(Z)&&D.mappings.delete(Z);let te=!1;if((B(ue)||null===ue)&&(te=!0,ue={"@id":ue}),!Y(ue))throw new U("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:P});const Re={};D.mappings.set(Z,Re),Re.reverse=!1;const be=["@container","@id","@language","@reverse","@type"];E.processingMode(D,1.1)&&be.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Fe in ue)if(!be.includes(Fe))throw new U("Invalid JSON-LD syntax; a term definition must not contain "+Fe,"jsonld.SyntaxError",{code:"invalid term definition",context:P});const re=Z.indexOf(":");if(Re._termHasColon=re>0,"@reverse"in ue){if("@id"in ue)throw new U("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});if("@nest"in ue)throw new U("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});const Fe=ue["@reverse"];if(!B(Fe))throw new U("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(!E.isKeyword(Fe)&&Fe.match(T))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:Fe}),void(se?D.mappings.set(Z,se):D.mappings.delete(Z));const Ze=O(D,Fe,{vocab:!0,base:!1},P,x,W);if(!C(Ze))throw new U("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});Re["@id"]=Ze,Re.reverse=!0}else if("@id"in ue){let Fe=ue["@id"];if(Fe&&!B(Fe))throw new U("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(null===Fe)Re["@id"]=null;else{if(!E.isKeyword(Fe)&&Fe.match(T))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:Fe}),void(se?D.mappings.set(Z,se):D.mappings.delete(Z));if(Fe!==Z){if(Fe=O(D,Fe,{vocab:!0,base:!1},P,x,W),!C(Fe)&&!E.isKeyword(Fe))throw new U("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(Z.match(/(?::[^:])|\//)&&O(D,Z,{vocab:!0,base:!1},P,new Map(x).set(Z,!0),W)!==Fe)throw new U("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});Re["@id"]=Fe,Re._prefix=te&&!Re._termHasColon&&Fe.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Re))if(Re._termHasColon){const Fe=Z.substr(0,re);if(P.hasOwnProperty(Fe)&&E.createTermDefinition({activeCtx:D,localCtx:P,term:Fe,defined:x,options:W}),D.mappings.has(Fe)){const Ze=Z.substr(re+1);Re["@id"]=D.mappings.get(Fe)["@id"]+Ze}else Re["@id"]=Z}else if("@type"===Z)Re["@id"]=Z;else{if(!("@vocab"in D))throw new U("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P,term:Z});Re["@id"]=D["@vocab"]+Z}if((!0===ue["@protected"]||!0===x.get("@protected")&&!1!==ue["@protected"])&&(D.protected[Z]=!0,Re.protected=!0),x.set(Z,!0),"@type"in ue){let Fe=ue["@type"];if(!B(Fe))throw new U("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if("@json"===Fe||"@none"===Fe){if(E.processingMode(D,1))throw new U(`Invalid JSON-LD syntax; an @context @type value must not be "${Fe}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else if("@id"!==Fe&&"@vocab"!==Fe){if(Fe=O(D,Fe,{vocab:!0,base:!1},P,x,W),!C(Fe))throw new U("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if(0===Fe.indexOf("_:"))throw new U("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}Re["@type"]=Fe}if("@container"in ue){const Fe=B(ue["@container"])?[ue["@container"]]:ue["@container"]||[],Ze=["@list","@set","@index","@language"];let Ge=!0;const J=Fe.includes("@set");if(E.processingMode(D,1.1)){if(Ze.push("@graph","@id","@type"),Fe.includes("@list")){if(1!==Fe.length)throw new U("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else if(Fe.includes("@graph")){if(Fe.some(le=>"@graph"!==le&&"@id"!==le&&"@index"!==le&&"@set"!==le))throw new U("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else Ge&=Fe.length<=(J?2:1);if(Fe.includes("@type")&&(Re["@type"]=Re["@type"]||"@id",!["@id","@vocab"].includes(Re["@type"])))throw new U("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else Ge&=!F(ue["@container"]),Ge&=Fe.length<=1;if(Ge&=Fe.every(le=>Ze.includes(le)),Ge&=!(J&&Fe.includes("@list")),!Ge)throw new U("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Ze.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:P});if(Re.reverse&&!Fe.every(le=>["@index","@set"].includes(le)))throw new U("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});Re["@container"]=Fe}if("@index"in ue){if(!("@container"in ue)||!Re["@container"].includes("@index"))throw new U(`Invalid JSON-LD syntax; @index without @index in @container: "${ue["@index"]}" on term "${Z}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});if(!B(ue["@index"])||0===ue["@index"].indexOf("@"))throw new U(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ue["@index"]}" on term "${Z}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});Re["@index"]=ue["@index"]}if("@context"in ue&&(Re["@context"]=ue["@context"]),"@language"in ue&&!("@type"in ue)){let Fe=ue["@language"];if(null!==Fe&&!B(Fe))throw new U("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:P});null!==Fe&&(Fe=Fe.toLowerCase()),Re["@language"]=Fe}if("@prefix"in ue){if(Z.match(/:|\//))throw new U("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:P});if(E.isKeyword(Re["@id"]))throw new U("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:P});if("boolean"!=typeof ue["@prefix"])throw new U("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:P});Re._prefix=!0===ue["@prefix"]}if("@direction"in ue){const Fe=ue["@direction"];if(null!==Fe&&"ltr"!==Fe&&"rtl"!==Fe)throw new U('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:P});Re["@direction"]=Fe}if("@nest"in ue){const Fe=ue["@nest"];if(!B(Fe)||"@nest"!==Fe&&0===Fe.indexOf("@"))throw new U("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:P});Re["@nest"]=Fe}const ve=Re["@id"];if("@context"===ve||"@preserve"===ve)throw new U("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:P});if(se&&se.protected&&!ne&&(D.protected[Z]=!0,Re.protected=!0,!$(se,Re))){const Fe=W&&W.protectedMode||"error";if("error"===Fe)throw new U(`Invalid JSON-LD syntax; tried to redefine "${Z}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:P,term:Z});if("warn"===Fe)return void console.warn("WARNING: protected term redefinition",{term:Z});throw new U("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:P,term:Z,protectedMode:Fe})}},E.expandIri=(D,P,Z,x)=>O(D,P,Z,void 0,void 0,x),E.getInitialContext=D=>{const P=JSON.stringify({processingMode:D.processingMode}),Z=b.get(P);if(Z)return Z;const x={processingMode:D.processingMode,mappings:new Map,inverse:null,getInverse:function(){const Re=this;if(Re.inverse)return Re.inverse;const be=Re.inverse={},re=Re.fastCurieMap={},ve={},Fe=(Re["@language"]||"@none").toLowerCase(),Ze=Re["@direction"],Ge=Re.mappings,J=[...Ge.keys()].sort(v);for(const le of J){const _e=Ge.get(le);if(null===_e)continue;let Me=_e["@container"]||"@none";if(Me=[].concat(Me).sort().join(""),null===_e["@id"])continue;const Ce=y(_e["@id"]);for(const $e of Ce){let Se=be[$e];const ze=E.isKeyword($e);if(Se)!ze&&!_e._termHasColon&&ve[$e].push(le);else if(be[$e]=Se={},!ze&&!_e._termHasColon){ve[$e]=[le];const Ke={iri:$e,terms:ve[$e]};$e[0]in re?re[$e[0]].push(Ke):re[$e[0]]=[Ke]}if(Se[Me]||(Se[Me]={"@language":{},"@type":{},"@any":{}}),Se=Se[Me],ue(le,Se["@any"],"@none"),_e.reverse)ue(le,Se["@type"],"@reverse");else if("@none"===_e["@type"])ue(le,Se["@any"],"@none"),ue(le,Se["@language"],"@none"),ue(le,Se["@type"],"@none");else if("@type"in _e)ue(le,Se["@type"],_e["@type"]);else if("@language"in _e&&"@direction"in _e){const Ke=_e["@language"],Ve=_e["@direction"];ue(le,Se["@language"],Ke&&Ve?`${Ke}_${Ve}`.toLowerCase():Ke?Ke.toLowerCase():Ve?`_${Ve}`:"@null")}else"@language"in _e?ue(le,Se["@language"],(_e["@language"]||"@null").toLowerCase()):"@direction"in _e?ue(le,Se["@language"],_e["@direction"]?`_${_e["@direction"]}`:"@none"):Ze?(ue(le,Se["@language"],`_${Ze}`),ue(le,Se["@language"],"@none"),ue(le,Se["@type"],"@none")):(ue(le,Se["@language"],Fe),ue(le,Se["@language"],"@none"),ue(le,Se["@type"],"@none"))}}for(const le in re)ne(re,le,1);return be},clone:function(){const Re={};return Re.mappings=X.clone(this.mappings),Re.clone=this.clone,Re.inverse=null,Re.getInverse=this.getInverse,Re.protected=X.clone(this.protected),this.previousContext&&(Re.previousContext=this.previousContext.clone()),Re.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Re["@base"]=this["@base"]),"@language"in this&&(Re["@language"]=this["@language"]),"@vocab"in this&&(Re["@vocab"]=this["@vocab"]),Re},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===b.size&&b.clear(),b.set(P,x),x;function ne(Re,be,re){const ve=Re[be],Fe=Re[be]={};let Ze,Ge;for(const J of ve)Ze=J.iri,Ge=re>=Ze.length?"":Ze[re],Ge in Fe?Fe[Ge].push(J):Fe[Ge]=[J];for(const J in Fe)""!==J&&ne(Fe,J,re+1)}function ue(Re,be,re){be.hasOwnProperty(re)||(be[re]=Re)}},E.getContextValue=(D,P,Z)=>{if(null===P)return"@context"===Z?void 0:null;if(D.mappings.has(P)){const x=D.mappings.get(P);if(w(Z))return x;if(x.hasOwnProperty(Z))return x[Z]}return"@language"===Z&&Z in D||"@direction"===Z&&Z in D?D[Z]:"@context"!==Z?null:void 0},E.processingMode=(D,P)=>P.toString()>="1.1"?!D.processingMode||D.processingMode>="json-ld-"+P.toString():"json-ld-1.0"===D.processingMode,E.isKeyword=D=>{if(!B(D)||"@"!==D[0])return!1;switch(D){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":12,"./types":30,"./url":31,"./util":32}],20:[function(Q,Ee,pe){"use strict";const{parseLinkHeader:X,buildHeaders:U}=Q("../util"),{LINK_HEADER_CONTEXT:F}=Q("../constants"),Y=Q("../JsonLdError"),B=Q("../RequestQueue"),{prependBase:w}=Q("../url"),C=/(^|(\r\n))link:/i;function R(M,y,v){const b=new(M=M||XMLHttpRequest);return new Promise((S,T)=>{b.onload=()=>S(b),b.onerror=E=>T(E),b.open("GET",y,!0);for(const E in v)b.setRequestHeader(E,v[E]);b.send()})}Ee.exports=({secure:M,headers:y={},xhr:v}={headers:{}})=>{return y=U(y),(new B).wrapLoader(S);function S(E){return T.apply(this,arguments)}function T(){return(T=lt(function*(E){if(0!==E.indexOf("http:")&&0!==E.indexOf("https:"))throw new Y('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:E});if(M&&0!==E.indexOf("https"))throw new Y('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:E});let O;try{O=yield R(v,E,y)}catch(x){throw new Y("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:E,cause:x})}if(O.status>=400)throw new Y("URL could not be dereferenced: "+O.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:E,httpStatusCode:O.status});let $={contextUrl:null,documentUrl:E,document:O.response},D=null;const P=O.getResponseHeader("Content-Type");let Z;if(C.test(O.getAllResponseHeaders())&&(Z=O.getResponseHeader("Link")),Z&&"application/ld+json"!==P){const x=X(Z),W=x[F];if(Array.isArray(W))throw new Y("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:E});W&&($.contextUrl=W.target),D=x.alternate,D&&"application/ld+json"==D.type&&!(P||"").match(/^application\/(\w*\+)?json$/)&&($=yield S(w(E,D.target)))}return $})).apply(this,arguments)}}},{"../JsonLdError":12,"../RequestQueue":15,"../constants":18,"../url":31,"../util":32}],21:[function(Q,Ee,pe){"use strict";const X=Q("./JsonLdError"),{isArray:U,isObject:F,isEmptyObject:Y,isString:B,isUndefined:w}=Q("./types"),{isList:C,isValue:R,isGraph:M,isSubject:y}=Q("./graphTypes"),{expandIri:v,getContextValue:b,isKeyword:S,process:T,processingMode:E}=Q("./context"),{isAbsolute:O}=Q("./url"),{addValue:$,asArray:D,getValues:P,validateTypeValue:Z}=Q("./util"),x={};Ee.exports=x;const W=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function ne(re){return ue.apply(this,arguments)}function ue(){return(ue=lt(function*({activeCtx:re,activeProperty:ve,expandedActiveProperty:Fe,element:Ze,expandedParent:Ge,options:J={},insideList:le,typeKey:_e,typeScopedContext:Me,expansionMap:Ce}){const $e=Object.keys(Ze).sort(),Se=[];let ze;const Ke=Ze[_e]&&"@json"===v(re,U(Ze[_e])?Ze[_e][0]:Ze[_e],{vocab:!0},J);for(const Ve of $e){let q,K=Ze[Ve];if("@context"===Ve)continue;let ge=v(re,Ve,{vocab:!0},J);if((null===ge||!O(ge)&&!S(ge))&&(ge=Ce({unmappedProperty:Ve,activeCtx:re,activeProperty:ve,parent:Ze,options:J,insideList:le,value:K,expandedParent:Ge}),void 0===ge))continue;if(S(ge)){if("@reverse"===Fe)throw new X("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:K});if(ge in Ge&&"@included"!==ge&&"@type"!==ge)throw new X("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ge})}if("@id"===ge){if(!B(K)){if(!J.isFrame)throw new X('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:K});if(F(K)){if(!Y(K))throw new X('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:K})}else{if(!U(K))throw new X('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:K});if(!K.every(gt=>B(gt)))throw new X('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:K})}}$(Ge,"@id",D(K).map(gt=>B(gt)?v(re,gt,{base:!0},J):gt),{propertyIsArray:J.isFrame});continue}if("@type"===ge){F(K)&&(K=Object.fromEntries(Object.entries(K).map(([gt,Ae])=>[v(Me,gt,{vocab:!0}),D(Ae).map(z=>v(Me,z,{base:!0,vocab:!0}))]))),Z(K,J.isFrame),$(Ge,"@type",D(K).map(gt=>B(gt)?v(Me,gt,{base:!0,vocab:!0},J):gt),{propertyIsArray:J.isFrame});continue}if("@included"===ge&&E(re,1.1)){const gt=D(yield x.expand({activeCtx:re,activeProperty:ve,element:K,options:J,expansionMap:Ce}));if(!gt.every(Ae=>y(Ae)))throw new X("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:K});$(Ge,"@included",gt,{propertyIsArray:!0});continue}if("@graph"===ge&&!F(K)&&!U(K))throw new X('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:K});if("@value"===ge){ze=K,Ke&&E(re,1.1)?Ge["@value"]=K:$(Ge,"@value",K,{propertyIsArray:J.isFrame});continue}if("@language"===ge){if(null===K)continue;if(!B(K)&&!J.isFrame)throw new X('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:K});K=D(K).map(gt=>B(gt)?gt.toLowerCase():gt);for(const gt of K)B(gt)&&!gt.match(W)&&console.warn(`@language must be valid BCP47: ${gt}`);$(Ge,"@language",K,{propertyIsArray:J.isFrame});continue}if("@direction"===ge){if(!B(K)&&!J.isFrame)throw new X('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:K});K=D(K);for(const gt of K)if(B(gt)&&"ltr"!==gt&&"rtl"!==gt)throw new X('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:K});$(Ge,"@direction",K,{propertyIsArray:J.isFrame});continue}if("@index"===ge){if(!B(K))throw new X('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:K});$(Ge,"@index",K);continue}if("@reverse"===ge){if(!F(K))throw new X('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:K});if(q=yield x.expand({activeCtx:re,activeProperty:"@reverse",element:K,options:J,expansionMap:Ce}),"@reverse"in q)for(const Ae in q["@reverse"])$(Ge,Ae,q["@reverse"][Ae],{propertyIsArray:!0});let gt=Ge["@reverse"]||null;for(const Ae in q){if("@reverse"===Ae)continue;null===gt&&(gt=Ge["@reverse"]={}),$(gt,Ae,[],{propertyIsArray:!0});const z=q[Ae];for(let L=0;L<z.length;++L){const H=z[L];if(R(H)||C(H))throw new X('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});$(gt,Ae,H,{propertyIsArray:!0})}}continue}if("@nest"===ge){Se.push(Ve);continue}let ce=re;const Ye=b(re,Ve,"@context");w(Ye)||(ce=yield T({activeCtx:re,localCtx:Ye,propagate:!0,overrideProtected:!0,options:J}));const _t=b(ce,Ve,"@container")||[];if(_t.includes("@language")&&F(K))q=te(ce,K,b(ce,Ve,"@direction"),J);else if(_t.includes("@index")&&F(K)){const gt=_t.includes("@graph"),Ae=b(ce,Ve,"@index")||"@index",z="@index"!==Ae&&v(re,Ae,{vocab:!0},J);q=yield Re({activeCtx:ce,options:J,activeProperty:Ve,value:K,expansionMap:Ce,asGraph:gt,indexKey:Ae,propertyIndex:z})}else if(_t.includes("@id")&&F(K)){const gt=_t.includes("@graph");q=yield Re({activeCtx:ce,options:J,activeProperty:Ve,value:K,expansionMap:Ce,asGraph:gt,indexKey:"@id"})}else if(_t.includes("@type")&&F(K))q=yield Re({activeCtx:ce.revertToPreviousContext(),options:J,activeProperty:Ve,value:K,expansionMap:Ce,asGraph:!1,indexKey:"@type"});else{const gt="@list"===ge;if(gt||"@set"===ge){let Ae=ve;gt&&"@graph"===Fe&&(Ae=null),q=yield x.expand({activeCtx:ce,activeProperty:Ae,element:K,options:J,insideList:gt,expansionMap:Ce})}else q="@json"===b(re,Ve,"@type")?{"@type":"@json","@value":K}:yield x.expand({activeCtx:ce,activeProperty:Ve,element:K,options:J,insideList:!1,expansionMap:Ce})}if(null!==q||"@value"===ge||(q=Ce({unmappedValue:K,expandedProperty:ge,activeCtx:ce,activeProperty:ve,parent:Ze,options:J,insideList:le,key:Ve,expandedParent:Ge}),void 0!==q)){if("@list"!==ge&&!C(q)&&_t.includes("@list")&&(q={"@list":D(q)}),_t.includes("@graph")&&!_t.some(gt=>"@id"===gt||"@index"===gt)&&(q=D(q).map(gt=>({"@graph":D(gt)}))),ce.mappings.has(Ve)&&ce.mappings.get(Ve).reverse){const gt=Ge["@reverse"]=Ge["@reverse"]||{};q=D(q);for(let Ae=0;Ae<q.length;++Ae){const z=q[Ae];if(R(z)||C(z))throw new X('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});$(gt,ge,z,{propertyIsArray:!0})}continue}$(Ge,ge,q,{propertyIsArray:!0})}}if("@value"in Ge&&("@json"!==Ge["@type"]||!E(re,1.1))&&(F(ze)||U(ze))&&!J.isFrame)throw new X('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:ze});for(const Ve of Se){const K=U(Ze[Ve])?Ze[Ve]:[Ze[Ve]];for(const q of K){if(!F(q)||Object.keys(q).some(ge=>"@value"===v(re,ge,{vocab:!0},J)))throw new X("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:q});yield ne({activeCtx:re,activeProperty:ve,expandedActiveProperty:Fe,element:q,expandedParent:Ge,options:J,insideList:le,typeScopedContext:Me,typeKey:_e,expansionMap:Ce})}}})).apply(this,arguments)}function se({activeCtx:re,activeProperty:ve,value:Fe,options:Ze}){if(null==Fe)return null;const Ge=v(re,ve,{vocab:!0},Ze);if("@id"===Ge)return v(re,Fe,{base:!0},Ze);if("@type"===Ge)return v(re,Fe,{vocab:!0,base:!0},Ze);const J=b(re,ve,"@type");if(("@id"===J||"@graph"===Ge)&&B(Fe))return{"@id":v(re,Fe,{base:!0},Ze)};if("@vocab"===J&&B(Fe))return{"@id":v(re,Fe,{vocab:!0,base:!0},Ze)};if(S(Ge))return Fe;const le={};if(J&&!["@id","@vocab","@none"].includes(J))le["@type"]=J;else if(B(Fe)){const _e=b(re,ve,"@language");null!==_e&&(le["@language"]=_e);const Me=b(re,ve,"@direction");null!==Me&&(le["@direction"]=Me)}return["boolean","number","string"].includes(typeof Fe)||(Fe=Fe.toString()),le["@value"]=Fe,le}function te(re,ve,Fe,Ze){const Ge=[],J=Object.keys(ve).sort();for(const le of J){const _e=v(re,le,{vocab:!0},Ze);let Me=ve[le];U(Me)||(Me=[Me]);for(const Ce of Me){if(null===Ce)continue;if(!B(Ce))throw new X("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ve});const $e={"@value":Ce};"@none"!==_e&&($e["@language"]=le.toLowerCase()),Fe&&($e["@direction"]=Fe),Ge.push($e)}}return Ge}function Re(re){return be.apply(this,arguments)}function be(){return(be=lt(function*({activeCtx:re,options:ve,activeProperty:Fe,value:Ze,expansionMap:Ge,asGraph:J,indexKey:le,propertyIndex:_e}){const Me=[],Ce=Object.keys(Ze).sort(),$e="@type"===le;for(let Se of Ce){if($e){const Ve=b(re,Se,"@context");w(Ve)||(re=yield T({activeCtx:re,localCtx:Ve,propagate:!1,options:ve}))}let Ke,ze=Ze[Se];U(ze)||(ze=[ze]),ze=yield x.expand({activeCtx:re,activeProperty:Fe,element:ze,options:ve,insideList:!1,insideIndex:!0,expansionMap:Ge}),Ke=_e?"@none"===Se?"@none":se({activeCtx:re,activeProperty:le,value:Se,options:ve}):v(re,Se,{vocab:!0},ve),"@id"===le?Se=v(re,Se,{base:!0},ve):$e&&(Se=Ke);for(let Ve of ze){if(J&&!M(Ve)&&(Ve={"@graph":[Ve]}),"@type"===le)"@none"===Ke||(Ve["@type"]=Ve["@type"]?[Se].concat(Ve["@type"]):[Se]);else{if(R(Ve)&&!["@language","@type","@index"].includes(le))throw new X(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${le}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Ve});_e?"@none"!==Ke&&$(Ve,_e,Ke,{propertyIsArray:!0,prependValue:!0}):"@none"!==Ke&&!(le in Ve)&&(Ve[le]=Se)}Me.push(Ve)}}return Me})).apply(this,arguments)}x.expand=function(){var re=lt(function*({activeCtx:ve,activeProperty:Fe=null,element:Ze,options:Ge={},insideList:J=!1,insideIndex:le=!1,typeScopedContext:_e=null,expansionMap:Me=(()=>{})}){if(null==Ze)return null;if("@default"===Fe&&(Ge=Object.assign({},Ge,{isFrame:!1})),!U(Ze)&&!F(Ze)){if(!J&&(null===Fe||"@graph"===v(ve,Fe,{vocab:!0},Ge))){const q=yield Me({unmappedValue:Ze,activeCtx:ve,activeProperty:Fe,options:Ge,insideList:J});return void 0===q?null:q}return se({activeCtx:ve,activeProperty:Fe,value:Ze,options:Ge})}if(U(Ze)){let q=[];const ge=b(ve,Fe,"@container")||[];J=J||ge.includes("@list");for(let ce=0;ce<Ze.length;++ce){let Ye=yield x.expand({activeCtx:ve,activeProperty:Fe,element:Ze[ce],options:Ge,expansionMap:Me,insideIndex:le,typeScopedContext:_e});J&&U(Ye)&&(Ye={"@list":Ye}),(null!==Ye||(Ye=yield Me({unmappedValue:Ze[ce],activeCtx:ve,activeProperty:Fe,parent:Ze,index:ce,options:Ge,expandedParent:q,insideList:J}),void 0!==Ye))&&(U(Ye)?q=q.concat(Ye):q.push(Ye))}return q}const Ce=v(ve,Fe,{vocab:!0},Ge),$e=b(ve,Fe,"@context");_e=_e||(ve.previousContext?ve:null);let Se=Object.keys(Ze).sort(),ze=!le;if(ze&&_e&&Se.length<=2&&!Se.includes("@context"))for(const q of Se){const ge=v(_e,q,{vocab:!0},Ge);if("@value"===ge){ze=!1,ve=_e;break}if("@id"===ge&&1===Se.length){ze=!1;break}}ze&&(ve=ve.revertToPreviousContext()),w($e)||(ve=yield T({activeCtx:ve,localCtx:$e,propagate:!0,overrideProtected:!0,options:Ge})),"@context"in Ze&&(ve=yield T({activeCtx:ve,localCtx:Ze["@context"],options:Ge})),_e=ve;let Ke=null;for(const q of Se)if("@type"===v(ve,q,{vocab:!0},Ge)){Ke=Ke||q;const ce=Ze[q],Ye=Array.isArray(ce)?ce.length>1?ce.slice().sort():ce:[ce];for(const _t of Ye){const gt=b(_e,_t,"@context");w(gt)||(ve=yield T({activeCtx:ve,localCtx:gt,options:Ge,propagate:!1}))}}let Ve={};yield ne({activeCtx:ve,activeProperty:Fe,expandedActiveProperty:Ce,element:Ze,expandedParent:Ve,options:Ge,insideList:J,typeKey:Ke,typeScopedContext:_e,expansionMap:Me}),Se=Object.keys(Ve);let K=Se.length;if("@value"in Ve){if("@type"in Ve&&("@language"in Ve||"@direction"in Ve))throw new X('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ve});let q=K-1;if("@type"in Ve&&(q-=1),"@index"in Ve&&(q-=1),"@language"in Ve&&(q-=1),"@direction"in Ve&&(q-=1),0!==q)throw new X('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ve});const ge=null===Ve["@value"]?[]:D(Ve["@value"]),ce=P(Ve,"@type");if(!E(ve,1.1)||!ce.includes("@json")||1!==ce.length)if(0===ge.length){const Ye=yield Me({unmappedValue:Ve,activeCtx:ve,activeProperty:Fe,element:Ze,options:Ge,insideList:J});Ve=void 0!==Ye?Ye:null}else{if(!ge.every(Ye=>B(Ye)||Y(Ye))&&"@language"in Ve)throw new X("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Ve});if(!ce.every(Ye=>O(Ye)&&!(B(Ye)&&0===Ye.indexOf("_:"))||Y(Ye)))throw new X('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Ve})}}else if("@type"in Ve&&!U(Ve["@type"]))Ve["@type"]=[Ve["@type"]];else if("@set"in Ve||"@list"in Ve){if(K>1&&(2!==K||!("@index"in Ve)))throw new X('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Ve});"@set"in Ve&&(Ve=Ve["@set"],Se=Object.keys(Ve),K=Se.length)}else if(1===K&&"@language"in Ve){const q=yield Me(Ve,{unmappedValue:Ve,activeCtx:ve,activeProperty:Fe,element:Ze,options:Ge,insideList:J});Ve=void 0!==q?q:null}if(F(Ve)&&!Ge.keepFreeFloatingNodes&&!J&&(null===Fe||"@graph"===Ce)&&(0===K||"@value"in Ve||"@list"in Ve||1===K&&"@id"in Ve)){const q=yield Me({unmappedValue:Ve,activeCtx:ve,activeProperty:Fe,element:Ze,options:Ge,insideList:J});Ve=void 0!==q?q:null}return Ve});return function(ve){return re.apply(this,arguments)}}()},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],22:[function(Q,Ee,pe){"use strict";const{isSubjectReference:X}=Q("./graphTypes"),{createMergedNodeMap:U}=Q("./nodeMap"),F={};Ee.exports=F,F.flatten=Y=>{const B=U(Y),w=[],C=Object.keys(B).sort();for(let R=0;R<C.length;++R){const M=B[C[R]];X(M)||w.push(M)}return w}},{"./graphTypes":25,"./nodeMap":27}],23:[function(Q,Ee,pe){"use strict";const{isKeyword:X}=Q("./context"),U=Q("./graphTypes"),F=Q("./types"),Y=Q("./util"),B=Q("./url"),w=Q("./JsonLdError"),{createNodeMap:C,mergeNodeMapGraphs:R}=Q("./nodeMap"),M={};function y(x){const W={};for(const ne in x)void 0!==x[ne]&&(W["@"+ne]=[x[ne]]);return[W]}function v(x,W,ne){for(let ue=ne.length-1;ue>=0;--ue){const se=ne[ue];if(se.graph===W&&se.subject["@id"]===x["@id"])return!0}return!1}function b(x,W,ne){const ue="@"+ne;let se=ue in x?x[ue][0]:W[ne];if("embed"===ne)if(!0===se)se="@once";else if(!1===se)se="@never";else if("@always"!==se&&"@never"!==se&&"@link"!==se&&"@first"!==se&&"@last"!==se&&"@once"!==se)throw new w("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:x});return se}function S(x){if(!F.isArray(x)||1!==x.length||!F.isObject(x[0]))throw new w("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:x});if("@id"in x[0])for(const W of Y.asArray(x[0]["@id"]))if(!F.isObject(W)&&!B.isAbsolute(W)||F.isString(W)&&0===W.indexOf("_:"))throw new w("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x});if("@type"in x[0])for(const W of Y.asArray(x[0]["@type"]))if(!F.isObject(W)&&!B.isAbsolute(W)||F.isString(W)&&0===W.indexOf("_:"))throw new w("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x})}function E(x,W,ne,ue){let se=!0,te=!1;for(const Re in ne){let be=!1;const re=Y.getValues(W,Re),ve=0===Y.getValues(ne,Re).length;if("@id"===Re){if(F.isEmptyObject(ne["@id"][0]||{})?be=!0:ne["@id"].length>=0&&(be=ne["@id"].includes(re[0])),!ue.requireAll)return be}else if("@type"===Re){if(se=!1,ve){if(re.length>0)return!1;be=!0}else if(1===ne["@type"].length&&F.isEmptyObject(ne["@type"][0]))be=re.length>0;else for(const Fe of ne["@type"])be=!(!F.isObject(Fe)||!("@default"in Fe))||be||re.some(Ze=>Ze===Fe);if(!ue.requireAll)return be}else{if(X(Re))continue;{const Fe=Y.getValues(ne,Re)[0];let Ze=!1;if(Fe&&(S([Fe]),Ze="@default"in Fe),se=!1,0===re.length&&Ze)continue;if(re.length>0&&ve)return!1;if(void 0===Fe){if(re.length>0)return!1;be=!0}else if(U.isList(Fe)){const Ge=Fe["@list"][0];if(U.isList(re[0])){const J=re[0]["@list"];U.isValue(Ge)?be=J.some(le=>Z(Ge,le)):(U.isSubject(Ge)||U.isSubjectReference(Ge))&&(be=J.some(le=>P(x,Ge,le,ue)))}}else be=U.isValue(Fe)?re.some(Ge=>Z(Fe,Ge)):U.isSubjectReference(Fe)?re.some(Ge=>P(x,Fe,Ge,ue)):!!F.isObject(Fe)&&re.length>0}}if(!be&&ue.requireAll)return!1;te=te||be}return se||te}function O(x,W){const ne=x.uniqueEmbeds[x.graph],ue=ne[W],se=ue.parent,te=ue.property,Re={"@id":W};if(F.isArray(se)){for(let re=0;re<se.length;++re)if(Y.compareValues(se[re],Re)){se[re]=Re;break}}else{const re=F.isArray(se[te]);Y.removeValue(se,te,Re,{propertyIsArray:re}),Y.addValue(se,te,Re,{propertyIsArray:re})}const be=re=>{const ve=Object.keys(ne);for(const Fe of ve)Fe in ne&&F.isObject(ne[Fe].parent)&&ne[Fe].parent["@id"]===re&&(delete ne[Fe],be(Fe))};be(W)}function $(x,W){if(F.isArray(x))return x.map(ne=>$(ne,W));if(F.isObject(x)){if("@preserve"in x)return x["@preserve"][0];if(U.isValue(x))return x;if(U.isList(x))return x["@list"]=$(x["@list"],W),x;if("@id"in x){const ne=x["@id"];if(W.link.hasOwnProperty(ne)){const ue=W.link[ne].indexOf(x);if(-1!==ue)return W.link[ne][ue];W.link[ne].push(x)}else W.link[ne]=[x]}for(const ne in x)"@id"===ne&&W.bnodesToClear.includes(x[ne])?delete x["@id"]:x[ne]=$(x[ne],W)}return x}function D(x,W,ne){F.isObject(x)?Y.addValue(x,W,ne,{propertyIsArray:!0}):x.push(ne)}function P(x,W,ne,ue){if(!("@id"in ne))return!1;const se=x.subjects[ne["@id"]];return se&&E(x,se,W,ue)}function Z(x,W){const ne=W["@value"],ue=W["@type"],se=W["@language"],te=x["@value"]?F.isArray(x["@value"])?x["@value"]:[x["@value"]]:[],Re=x["@type"]?F.isArray(x["@type"])?x["@type"]:[x["@type"]]:[],be=x["@language"]?F.isArray(x["@language"])?x["@language"]:[x["@language"]]:[];return 0===te.length&&0===Re.length&&0===be.length||!(!te.includes(ne)&&!F.isEmptyObject(te[0])||!(!ue&&0===Re.length||Re.includes(ue)||ue&&F.isEmptyObject(Re[0]))||!(!se&&0===be.length||be.includes(se)||se&&F.isEmptyObject(be[0])))}Ee.exports=M,M.frameMergedOrDefault=(x,W,ne)=>{const ue={options:ne,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},se=new Y.IdentifierIssuer("_:b");C(x,ue.graphMap,"@default",se),ne.merged&&(ue.graphMap["@merged"]=R(ue.graphMap),ue.graph="@merged"),ue.subjects=ue.graphMap[ue.graph];const te=[];return M.frame(ue,Object.keys(ue.subjects).sort(),W,te),ne.pruneBlankNodeIdentifiers&&(ne.bnodesToClear=Object.keys(ue.bnodeMap).filter(Re=>1===ue.bnodeMap[Re].length)),ne.link={},$(te,ne)},M.frame=(x,W,ne,ue,se=null)=>{S(ne);const te=x.options,Re={embed:b(ne=ne[0],te,"embed"),explicit:b(ne,te,"explicit"),requireAll:b(ne,te,"requireAll")};x.link.hasOwnProperty(x.graph)||(x.link[x.graph]={});const be=x.link[x.graph],re=function(x,W,ne,ue){const se={};for(const te of W){const Re=x.graphMap[x.graph][te];E(x,Re,ne,ue)&&(se[te]=Re)}return se}(x,W,ne,Re),ve=Object.keys(re).sort();for(const Fe of ve){const Ze=re[Fe];if(null===se?x.uniqueEmbeds={[x.graph]:{}}:x.uniqueEmbeds[x.graph]=x.uniqueEmbeds[x.graph]||{},"@link"===Re.embed&&Fe in be){D(ue,se,be[Fe]);continue}const Ge={"@id":Fe};if(0===Fe.indexOf("_:")&&Y.addValue(x.bnodeMap,Fe,Ge,{propertyIsArray:!0}),be[Fe]=Ge,("@first"===Re.embed||"@last"===Re.embed)&&x.is11)throw new w("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:ne});if(x.embedded||!x.uniqueEmbeds[x.graph].hasOwnProperty(Fe)){if(x.embedded&&("@never"===Re.embed||v(Ze,x.graph,x.subjectStack))){D(ue,se,Ge);continue}if(x.embedded&&("@first"==Re.embed||"@once"==Re.embed)&&x.uniqueEmbeds[x.graph].hasOwnProperty(Fe)){D(ue,se,Ge);continue}if("@last"===Re.embed&&Fe in x.uniqueEmbeds[x.graph]&&O(x,Fe),x.uniqueEmbeds[x.graph][Fe]={parent:ue,property:se},x.subjectStack.push({subject:Ze,graph:x.graph}),Fe in x.graphMap){let J=!1,le=null;"@graph"in ne?(le=ne["@graph"][0],J=!("@merged"===Fe||"@default"===Fe),F.isObject(le)||(le={})):(J="@merged"!==x.graph,le={}),J&&M.frame(Sn(at({},x),{graph:Fe,embedded:!1}),Object.keys(x.graphMap[Fe]).sort(),[le],Ge,"@graph")}"@included"in ne&&M.frame(Sn(at({},x),{embedded:!1}),W,ne["@included"],Ge,"@included");for(const J of Object.keys(Ze).sort())if(X(J)){if(Ge[J]=Y.clone(Ze[J]),"@type"===J)for(const le of Ze["@type"])0===le.indexOf("_:")&&Y.addValue(x.bnodeMap,le,Ge,{propertyIsArray:!0})}else if(!Re.explicit||J in ne)for(const le of Ze[J]){const _e=J in ne?ne[J]:y(Re);if(U.isList(le)){const Me=ne[J]&&ne[J][0]&&ne[J][0]["@list"]?ne[J][0]["@list"]:y(Re),Ce={"@list":[]};D(Ge,J,Ce);const $e=le["@list"];for(const Se of $e)U.isSubjectReference(Se)?M.frame(Sn(at({},x),{embedded:!0}),[Se["@id"]],Me,Ce,"@list"):D(Ce,"@list",Y.clone(Se))}else U.isSubjectReference(le)?M.frame(Sn(at({},x),{embedded:!0}),[le["@id"]],_e,Ge,J):Z(_e[0],le)&&D(Ge,J,Y.clone(le))}for(const J of Object.keys(ne).sort()){if("@type"===J){if(!F.isObject(ne[J][0])||!("@default"in ne[J][0]))continue}else if(X(J))continue;const le=ne[J][0]||{};if(!b(le,te,"omitDefault")&&!(J in Ge)){let Me="@null";"@default"in le&&(Me=Y.clone(le["@default"])),F.isArray(Me)||(Me=[Me]),Ge[J]=[{"@preserve":Me}]}}for(const J of Object.keys(ne["@reverse"]||{}).sort()){const le=ne["@reverse"][J];for(const _e of Object.keys(x.subjects))Y.getValues(x.subjects[_e],J).some(Ce=>Ce["@id"]===Fe)&&(Ge["@reverse"]=Ge["@reverse"]||{},Y.addValue(Ge["@reverse"],J,[],{propertyIsArray:!0}),M.frame(Sn(at({},x),{embedded:!0}),[_e],le,Ge["@reverse"][J],se))}D(ue,se,Ge),x.subjectStack.pop()}}},M.cleanupNull=(x,W)=>{if(F.isArray(x))return x.map(ue=>M.cleanupNull(ue,W)).filter(ue=>ue);if("@null"===x)return null;if(F.isObject(x)){if("@id"in x){const ne=x["@id"];if(W.link.hasOwnProperty(ne)){const ue=W.link[ne].indexOf(x);if(-1!==ue)return W.link[ne][ue];W.link[ne].push(x)}else W.link[ne]=[x]}for(const ne in x)x[ne]=M.cleanupNull(x[ne],W)}return x}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32}],24:[function(Q,Ee,pe){"use strict";const X=Q("./JsonLdError"),U=Q("./graphTypes"),F=Q("./types"),Y=Q("./util"),{RDF_LIST:B,RDF_FIRST:w,RDF_REST:C,RDF_NIL:R,RDF_TYPE:M,RDF_JSON_LITERAL:y,XSD_BOOLEAN:v,XSD_DOUBLE:b,XSD_INTEGER:S,XSD_STRING:T}=Q("./constants"),E=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,O={};function $(D,P,Z){if(D.termType.endsWith("Node"))return{"@id":D.value};const x={"@value":D.value};if(D.language)x["@language"]=D.language;else{let W=D.datatype.value;if(W||(W=T),W===y){W="@json";try{x["@value"]=JSON.parse(x["@value"])}catch(ne){throw new X("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:x["@value"],cause:ne})}}if(P){if(W===v)"true"===x["@value"]?x["@value"]=!0:"false"===x["@value"]&&(x["@value"]=!1);else if(F.isNumeric(x["@value"]))if(W===S){const ne=parseInt(x["@value"],10);ne.toFixed(0)===x["@value"]&&(x["@value"]=ne)}else W===b&&(x["@value"]=parseFloat(x["@value"]));[v,S,b,T].includes(W)||(x["@type"]=W)}else if("i18n-datatype"===Z&&W.startsWith("https://www.w3.org/ns/i18n#")){const[,ne,ue]=W.split(/[#_]/);ne.length>0&&(x["@language"]=ne,ne.match(E)||console.warn(`@language must be valid BCP47: ${ne}`)),x["@direction"]=ue}else W!==T&&(x["@type"]=W)}return x}Ee.exports=O,O.fromRDF=function(){var D=lt(function*(P,{useRdfType:Z=!1,useNativeTypes:x=!1,rdfDirection:W=null}){const ne={},ue={"@default":ne},se={};for(const be of P){const re="DefaultGraph"===be.graph.termType?"@default":be.graph.value;re in ue||(ue[re]={}),"@default"!==re&&!(re in ne)&&(ne[re]={"@id":re});const ve=ue[re],Fe=be.subject.value,Ze=be.predicate.value,Ge=be.object;Fe in ve||(ve[Fe]={"@id":Fe});const J=ve[Fe],le=Ge.termType.endsWith("Node");if(le&&!(Ge.value in ve)&&(ve[Ge.value]={"@id":Ge.value}),Ze===M&&!Z&&le){Y.addValue(J,"@type",Ge.value,{propertyIsArray:!0});continue}const _e=$(Ge,x,W);if(Y.addValue(J,Ze,_e,{propertyIsArray:!0}),le)if(Ge.value===R){const Me=ve[Ge.value];"usages"in Me||(Me.usages=[]),Me.usages.push({node:J,property:Ze,value:_e})}else se[Ge.value]=!(Ge.value in se)&&{node:J,property:Ze,value:_e}}for(const be in ue){const re=ue[be];if(!(R in re))continue;const ve=re[R];if(ve.usages){for(let Fe of ve.usages){let Ze=Fe.node,Ge=Fe.property,J=Fe.value;const le=[],_e=[];let Me=Object.keys(Ze).length;for(;Ge===C&&F.isObject(se[Ze["@id"]])&&F.isArray(Ze[w])&&1===Ze[w].length&&F.isArray(Ze[C])&&1===Ze[C].length&&(3===Me||4===Me&&F.isArray(Ze["@type"])&&1===Ze["@type"].length&&Ze["@type"][0]===B)&&(le.push(Ze[w][0]),_e.push(Ze["@id"]),Fe=se[Ze["@id"]],Ze=Fe.node,Ge=Fe.property,J=Fe.value,Me=Object.keys(Ze).length,U.isBlankNode(Ze)););delete J["@id"],J["@list"]=le.reverse();for(const Ce of _e)delete re[Ce]}delete ve.usages}}const te=[],Re=Object.keys(ne).sort();for(const be of Re){const re=ne[be];if(be in ue){const ve=re["@graph"]=[],Fe=ue[be],Ze=Object.keys(Fe).sort();for(const Ge of Ze){const J=Fe[Ge];U.isSubjectReference(J)||ve.push(J)}}U.isSubjectReference(re)||te.push(re)}return te});return function(P,Z){return D.apply(this,arguments)}}()},{"./JsonLdError":12,"./constants":18,"./graphTypes":25,"./types":30,"./util":32}],25:[function(Q,Ee,pe){"use strict";const X=Q("./types"),U={};Ee.exports=U,U.isSubject=F=>!(!X.isObject(F)||"@value"in F||"@set"in F||"@list"in F)&&(Object.keys(F).length>1||!("@id"in F)),U.isSubjectReference=F=>X.isObject(F)&&1===Object.keys(F).length&&"@id"in F,U.isValue=F=>X.isObject(F)&&"@value"in F,U.isList=F=>X.isObject(F)&&"@list"in F,U.isGraph=F=>X.isObject(F)&&"@graph"in F&&1===Object.keys(F).filter(Y=>"@id"!==Y&&"@index"!==Y).length,U.isSimpleGraph=F=>U.isGraph(F)&&!("@id"in F),U.isBlankNode=F=>!!X.isObject(F)&&("@id"in F?0===F["@id"].indexOf("_:"):0===Object.keys(F).length||!("@value"in F||"@set"in F||"@list"in F))},{"./types":30}],26:[function(Q,Ee,pe){const X=Q("rdf-canonize"),U=Q("./platform"),F=Q("./util"),Y=Q("./ContextResolver"),B=F.IdentifierIssuer,w=Q("./JsonLdError"),C=Q("lru-cache"),R=Q("./NQuads"),{expand:M}=Q("./expand"),{flatten:y}=Q("./flatten"),{fromRDF:v}=Q("./fromRdf"),{toRDF:b}=Q("./toRdf"),{frameMergedOrDefault:S,cleanupNull:T}=Q("./frame"),{isArray:E,isObject:O,isString:$}=Q("./types"),{isSubjectReference:D}=Q("./graphTypes"),{expandIri:P,getInitialContext:Z,process:x,processingMode:W}=Q("./context"),{compact:ne,compactIri:ue}=Q("./compact"),{createNodeMap:se,createMergedNodeMap:te,mergeNodeMaps:Re}=Q("./nodeMap"),be=function(ve){const Fe={},Ge=new C({max:100});function J(le,Ce){var $e=Ce,{documentLoader:_e=ve.documentLoader}=$e,Me=Pq($e,["documentLoader"]);return Object.assign({},{documentLoader:_e},Me,le)}return ve.compact=function(){var le=lt(function*(_e,Me,Ce){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===Me)throw new w("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===_e)return null;let $e;(Ce=J(Ce,{base:$(_e)?_e:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new B("_:b"),contextResolver:new Y({sharedCache:Ge})})).link&&(Ce.skipExpansion=!0),Ce.compactToRelative||delete Ce.base,$e=Ce.skipExpansion?_e:yield ve.expand(_e,Ce);const Se=yield ve.processContext(Z(Ce),Me,Ce);let ze=yield ne({activeCtx:Se,element:$e,options:Ce,compactionMap:Ce.compactionMap});Ce.compactArrays&&!Ce.graph&&E(ze)?1===ze.length?ze=ze[0]:0===ze.length&&(ze={}):Ce.graph&&O(ze)&&(ze=[ze]),O(Me)&&"@context"in Me&&(Me=Me["@context"]),Me=F.clone(Me),E(Me)||(Me=[Me]);const Ke=Me;Me=[];for(let K=0;K<Ke.length;++K)(!O(Ke[K])||Object.keys(Ke[K]).length>0)&&Me.push(Ke[K]);const Ve=Me.length>0;if(1===Me.length&&(Me=Me[0]),E(ze)){const K=ue({activeCtx:Se,iri:"@graph",relativeTo:{vocab:!0}}),q=ze;ze={},Ve&&(ze["@context"]=Me),ze[K]=q}else if(O(ze)&&Ve){const K=ze;ze={"@context":Me};for(const q in K)ze[q]=K[q]}return ze});return function(_e,Me,Ce){return le.apply(this,arguments)}}(),ve.expand=function(){var le=lt(function*(_e,Me){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(Me=J(Me,{keepFreeFloatingNodes:!1,contextResolver:new Y({sharedCache:Ge})})).expansionMap&&(Me.expansionMap=void 0);const Ce={},$e=[];if("expandContext"in Me){const Ve=F.clone(Me.expandContext);Ce.expandContext=O(Ve)&&"@context"in Ve?Ve:{"@context":Ve},$e.push(Ce.expandContext)}let Se;if($(_e)){const Ve=yield ve.get(_e,Me);Se=Ve.documentUrl,Ce.input=Ve.document,Ve.contextUrl&&(Ce.remoteContext={"@context":Ve.contextUrl},$e.push(Ce.remoteContext))}else Ce.input=F.clone(_e);"base"in Me||(Me.base=Se||"");let ze=Z(Me);for(const Ve of $e)ze=yield x({activeCtx:ze,localCtx:Ve,options:Me});let Ke=yield M({activeCtx:ze,element:Ce.input,options:Me,expansionMap:Me.expansionMap});return O(Ke)&&"@graph"in Ke&&1===Object.keys(Ke).length?Ke=Ke["@graph"]:null===Ke&&(Ke=[]),E(Ke)||(Ke=[Ke]),Ke});return function(_e,Me){return le.apply(this,arguments)}}(),ve.flatten=function(){var le=lt(function*(_e,Me,Ce){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");Me="function"==typeof Me?null:Me||null,Ce=J(Ce,{base:$(_e)?_e:"",contextResolver:new Y({sharedCache:Ge})});const $e=yield ve.expand(_e,Ce),Se=y($e);return null===Me?Se:(Ce.graph=!0,Ce.skipExpansion=!0,yield ve.compact(Se,Me,Ce))});return function(_e,Me,Ce){return le.apply(this,arguments)}}(),ve.frame=function(){var le=lt(function*(_e,Me,Ce){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Ce=J(Ce,{base:$(_e)?_e:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new Y({sharedCache:Ge})}),$(Me)){const ce=yield ve.get(Me,Ce);if(Me=ce.document,ce.contextUrl){let Ye=Me["@context"];Ye?E(Ye)?Ye.push(ce.contextUrl):Ye=[Ye,ce.contextUrl]:Ye=ce.contextUrl,Me["@context"]=Ye}}const $e=Me&&Me["@context"]||{},Se=yield ve.processContext(Z(Ce),$e,Ce);Ce.hasOwnProperty("omitGraph")||(Ce.omitGraph=W(Se,1.1)),Ce.hasOwnProperty("pruneBlankNodeIdentifiers")||(Ce.pruneBlankNodeIdentifiers=W(Se,1.1));const ze=yield ve.expand(_e,Ce),Ke=at({},Ce);Ke.isFrame=!0,Ke.keepFreeFloatingNodes=!0;const Ve=yield ve.expand(Me,Ke),K=Object.keys(Me).map(ce=>P(Se,ce,{vocab:!0}));Ke.merged=!K.includes("@graph"),Ke.is11=W(Se,1.1);const q=S(ze,Ve,Ke);Ke.graph=!Ce.omitGraph,Ke.skipExpansion=!0,Ke.link={},Ke.framing=!0;let ge=yield ve.compact(q,$e,Ke);return Ke.link={},ge=T(ge,Ke),ge});return function(_e,Me,Ce){return le.apply(this,arguments)}}(),ve.link=function(){var le=lt(function*(_e,Me,Ce){const $e={};return Me&&($e["@context"]=Me),$e["@embed"]="@link",ve.frame(_e,$e,Ce)});return function(_e,Me,Ce){return le.apply(this,arguments)}}(),ve.normalize=ve.canonize=function(){var le=lt(function*(_e,Me){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(Me=J(Me,{base:$(_e)?_e:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new Y({sharedCache:Ge})}))){if("application/n-quads"!==Me.inputFormat&&"application/nquads"!==Me.inputFormat)throw new w("Unknown canonicalization input format.","jsonld.CanonizeError");const Se=R.parse(_e);return X.canonize(Se,Me)}const Ce=at({},Me);delete Ce.format,Ce.produceGeneralizedRdf=!1;const $e=yield ve.toRDF(_e,Ce);return X.canonize($e,Me)});return function(_e,Me){return le.apply(this,arguments)}}(),ve.fromRDF=function(){var le=lt(function*(_e,Me){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Me=J(Me,{format:$(_e)?"application/n-quads":void 0});const{format:Ce}=Me;let{rdfParser:$e}=Me;if(Ce){if($e=$e||Fe[Ce],!$e)throw new w("Unknown input format.","jsonld.UnknownFormat",{format:Ce})}else $e=()=>_e;const Se=yield $e(_e);return v(Se,Me)});return function(_e,Me){return le.apply(this,arguments)}}(),ve.toRDF=function(){var le=lt(function*(_e,Me){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Ce;Ce=(Me=J(Me,{base:$(_e)?_e:"",skipExpansion:!1,contextResolver:new Y({sharedCache:Ge})})).skipExpansion?_e:yield ve.expand(_e,Me);const $e=b(Ce,Me);if(Me.format){if("application/n-quads"===Me.format||"application/nquads"===Me.format)return R.serialize($e);throw new w("Unknown output format.","jsonld.UnknownFormat",{format:Me.format})}return $e});return function(_e,Me){return le.apply(this,arguments)}}(),ve.createNodeMap=function(){var le=lt(function*(_e,Me){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Me=J(Me,{base:$(_e)?_e:"",contextResolver:new Y({sharedCache:Ge})});const Ce=yield ve.expand(_e,Me);return te(Ce,Me)});return function(_e,Me){return le.apply(this,arguments)}}(),ve.merge=function(){var le=lt(function*(_e,Me,Ce){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!E(_e))throw new TypeError('Could not merge, "docs" must be an array.');Me="function"==typeof Me?null:Me||null,Ce=J(Ce,{contextResolver:new Y({sharedCache:Ge})});const $e=yield Promise.all(_e.map(ce=>{const Ye=at({},Ce);return ve.expand(ce,Ye)}));let Se=!0;"mergeNodes"in Ce&&(Se=Ce.mergeNodes);const ze=Ce.issuer||new B("_:b"),Ke={"@default":{}};for(let ce=0;ce<$e.length;++ce){const Ye=F.relabelBlankNodes($e[ce],{issuer:new B("_:b"+ce+"-")}),_t=Se||0===ce?Ke:{"@default":{}};if(se(Ye,_t,"@default",ze),_t!==Ke)for(const gt in _t){const Ae=_t[gt];if(!(gt in Ke)){Ke[gt]=Ae;continue}const z=Ke[gt];for(const L in Ae)L in z||(z[L]=Ae[L])}}const Ve=Re(Ke),K=[],q=Object.keys(Ve).sort();for(let ce=0;ce<q.length;++ce){const Ye=Ve[q[ce]];D(Ye)||K.push(Ye)}return null===Me?K:(Ce.graph=!0,Ce.skipExpansion=!0,yield ve.compact(K,Me,Ce))});return function(_e,Me,Ce){return le.apply(this,arguments)}}(),Object.defineProperty(ve,"documentLoader",{get:()=>ve._documentLoader,set:le=>ve._documentLoader=le}),ve.documentLoader=function(){var le=lt(function*(_e){throw new w("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:_e})});return function(_e){return le.apply(this,arguments)}}(),ve.get=function(){var le=lt(function*(_e,Me){let Ce;Ce="function"==typeof Me.documentLoader?Me.documentLoader:ve.documentLoader;const $e=yield Ce(_e);try{if(!$e.document)throw new w("No remote document found at the given URL.","jsonld.NullRemoteDocument");$($e.document)&&($e.document=JSON.parse($e.document))}catch(Se){throw new w("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Se,remoteDoc:$e})}return $e});return function(_e,Me){return le.apply(this,arguments)}}(),ve.processContext=function(){var le=lt(function*(_e,Me,Ce){return Ce=J(Ce,{base:"",contextResolver:new Y({sharedCache:Ge})}),null===Me?Z(Ce):(Me=F.clone(Me),O(Me)&&"@context"in Me||(Me={"@context":Me}),x({activeCtx:_e,localCtx:Me,options:Ce}))});return function(_e,Me,Ce){return le.apply(this,arguments)}}(),ve.getContextValue=Q("./context").getContextValue,ve.documentLoaders={},ve.useDocumentLoader=function(le){if(!(le in ve.documentLoaders))throw new w('Unknown document loader type: "'+le+'"',"jsonld.UnknownDocumentLoader",{type:le});ve.documentLoader=ve.documentLoaders[le].apply(ve,Array.prototype.slice.call(arguments,1))},ve.registerRDFParser=function(le,_e){Fe[le]=_e},ve.unregisterRDFParser=function(le){delete Fe[le]},ve.registerRDFParser("application/n-quads",R.parse),ve.registerRDFParser("application/nquads",R.parse),ve.url=Q("./url"),ve.util=F,Object.assign(ve,F),ve.promises=ve,ve.RequestQueue=Q("./RequestQueue"),ve.JsonLdProcessor=Q("./JsonLdProcessor")(ve),U.setupGlobals(ve),U.setupDocumentLoaders(ve),ve},re=function(){return be(function(){return re()})};be(re),Ee.exports=re},{"./ContextResolver":11,"./JsonLdError":12,"./JsonLdProcessor":13,"./NQuads":14,"./RequestQueue":15,"./compact":17,"./context":19,"./expand":21,"./flatten":22,"./frame":23,"./fromRdf":24,"./graphTypes":25,"./nodeMap":27,"./platform":28,"./toRdf":29,"./types":30,"./url":31,"./util":32,"lru-cache":33,"rdf-canonize":46}],27:[function(Q,Ee,pe){"use strict";const{isKeyword:X}=Q("./context"),U=Q("./graphTypes"),F=Q("./types"),Y=Q("./util"),B=Q("./JsonLdError"),w={};Ee.exports=w,w.createMergedNodeMap=(C,R)=>{const M=(R=R||{}).issuer||new Y.IdentifierIssuer("_:b"),y={"@default":{}};return w.createNodeMap(C,y,"@default",M),w.mergeNodeMaps(y)},w.createNodeMap=(C,R,M,y,v,b)=>{if(F.isArray(C)){for(const O of C)w.createNodeMap(O,R,M,y,void 0,b);return}if(!F.isObject(C))return void(b&&b.push(C));if(U.isValue(C)){if("@type"in C){let O=C["@type"];0===O.indexOf("_:")&&(C["@type"]=O=y.getId(O))}return void(b&&b.push(C))}if(b&&U.isList(C)){const O=[];return w.createNodeMap(C["@list"],R,M,y,v,O),void b.push({"@list":O})}if("@type"in C){const O=C["@type"];for(const $ of O)0===$.indexOf("_:")&&y.getId($)}F.isUndefined(v)&&(v=U.isBlankNode(C)?y.getId(C["@id"]):C["@id"]),b&&b.push({"@id":v});const S=R[M],T=S[v]=S[v]||{};T["@id"]=v;const E=Object.keys(C).sort();for(let O of E){if("@id"===O)continue;if("@reverse"===O){const D={"@id":v},P=C["@reverse"];for(const Z in P){const x=P[Z];for(const W of x){let ne=W["@id"];U.isBlankNode(W)&&(ne=y.getId(ne)),w.createNodeMap(W,R,M,y,ne),Y.addValue(S[ne],Z,D,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===O){v in R||(R[v]={}),w.createNodeMap(C[O],R,v,y);continue}if("@included"===O){w.createNodeMap(C[O],R,M,y);continue}if("@type"!==O&&X(O)){if("@index"===O&&O in T&&(C[O]!==T[O]||C[O]["@id"]!==T[O]["@id"]))throw new B("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:T});T[O]=C[O];continue}const $=C[O];if(0===O.indexOf("_:")&&(O=y.getId(O)),0!==$.length)for(let D of $)if("@type"===O&&(D=0===D.indexOf("_:")?y.getId(D):D),U.isSubject(D)||U.isSubjectReference(D)){if("@id"in D&&!D["@id"])continue;const P=U.isBlankNode(D)?y.getId(D["@id"]):D["@id"];Y.addValue(T,O,{"@id":P},{propertyIsArray:!0,allowDuplicate:!1}),w.createNodeMap(D,R,M,y,P)}else if(U.isValue(D))Y.addValue(T,O,D,{propertyIsArray:!0,allowDuplicate:!1});else if(U.isList(D)){const P=[];w.createNodeMap(D["@list"],R,M,y,v,P),D={"@list":P},Y.addValue(T,O,D,{propertyIsArray:!0,allowDuplicate:!1})}else w.createNodeMap(D,R,M,y,v),Y.addValue(T,O,D,{propertyIsArray:!0,allowDuplicate:!1});else Y.addValue(T,O,[],{propertyIsArray:!0})}},w.mergeNodeMapGraphs=C=>{const R={};for(const M of Object.keys(C).sort())for(const y of Object.keys(C[M]).sort()){const v=C[M][y];y in R||(R[y]={"@id":y});const b=R[y];for(const S of Object.keys(v).sort())if(X(S)&&"@type"!==S)b[S]=Y.clone(v[S]);else for(const T of v[S])Y.addValue(b,S,Y.clone(T),{propertyIsArray:!0,allowDuplicate:!1})}return R},w.mergeNodeMaps=C=>{const R=C["@default"],M=Object.keys(C).sort();for(const y of M){if("@default"===y)continue;const v=C[y];let b=R[y];b?"@graph"in b||(b["@graph"]=[]):R[y]=b={"@id":y,"@graph":[]};const S=b["@graph"];for(const T of Object.keys(v).sort()){const E=v[T];U.isSubjectReference(E)||S.push(E)}}return R}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./util":32}],28:[function(Q,Ee,pe){"use strict";const X=Q("./documentLoaders/xhr"),U={};Ee.exports=U,U.setupDocumentLoaders=function(F){"undefined"!=typeof XMLHttpRequest&&(F.documentLoaders.xhr=X,F.useDocumentLoader("xhr"))},U.setupGlobals=function(F){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:F.JsonLdProcessor})}},{"./documentLoaders/xhr":20}],29:[function(Q,Ee,pe){"use strict";const{createNodeMap:X}=Q("./nodeMap"),{isKeyword:U}=Q("./context"),F=Q("./graphTypes"),Y=Q("canonicalize"),B=Q("./types"),w=Q("./util"),{RDF_FIRST:C,RDF_REST:R,RDF_NIL:M,RDF_TYPE:y,RDF_JSON_LITERAL:v,RDF_LANGSTRING:b,XSD_BOOLEAN:S,XSD_DOUBLE:T,XSD_INTEGER:E,XSD_STRING:O}=Q("./constants"),{isAbsolute:$}=Q("./url"),D={};function P(W,ne,ue,se,te){const Re=Object.keys(ne).sort();for(const be of Re){const re=ne[be],ve=Object.keys(re).sort();for(let Fe of ve){const Ze=re[Fe];if("@type"===Fe)Fe=y;else if(U(Fe))continue;for(const Ge of Ze){const J={termType:be.startsWith("_:")?"BlankNode":"NamedNode",value:be};if(!$(be))continue;const le={termType:Fe.startsWith("_:")?"BlankNode":"NamedNode",value:Fe};if(!$(Fe)||"BlankNode"===le.termType&&!te.produceGeneralizedRdf)continue;const _e=x(Ge,se,W,ue,te.rdfDirection);_e&&W.push({subject:J,predicate:le,object:_e,graph:ue})}}}}function x(W,ne,ue,se,te){const Re={};if(F.isValue(W)){Re.termType="Literal",Re.value=void 0,Re.datatype={termType:"NamedNode"};let be=W["@value"];const re=W["@type"]||null;"@json"===re?(Re.value=Y(be),Re.datatype.value=v):B.isBoolean(be)?(Re.value=be.toString(),Re.datatype.value=re||S):B.isDouble(be)||re===T?(B.isDouble(be)||(be=parseFloat(be)),Re.value=be.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Re.datatype.value=re||T):B.isNumber(be)?(Re.value=be.toFixed(0),Re.datatype.value=re||E):"i18n-datatype"===te&&"@direction"in W?(Re.datatype.value="https://www.w3.org/ns/i18n#"+(W["@language"]||"")+`_${W["@direction"]}`,Re.value=be):"@language"in W?(Re.value=be,Re.datatype.value=re||b,Re.language=W["@language"]):(Re.value=be,Re.datatype.value=re||O)}else if(F.isList(W)){const be=function(W,ne,ue,se,te){const Re={termType:"NamedNode",value:C},be={termType:"NamedNode",value:R},re={termType:"NamedNode",value:M},ve=W.pop(),Fe=ve?{termType:"BlankNode",value:ne.getId()}:re;let Ze=Fe;for(const Ge of W){const J=x(Ge,ne,ue,se,te),le={termType:"BlankNode",value:ne.getId()};ue.push({subject:Ze,predicate:Re,object:J,graph:se}),ue.push({subject:Ze,predicate:be,object:le,graph:se}),Ze=le}if(ve){const Ge=x(ve,ne,ue,se,te);ue.push({subject:Ze,predicate:Re,object:Ge,graph:se}),ue.push({subject:Ze,predicate:be,object:re,graph:se})}return Fe}(W["@list"],ne,ue,se,te);Re.termType=be.termType,Re.value=be.value}else{const be=B.isObject(W)?W["@id"]:W;Re.termType=be.startsWith("_:")?"BlankNode":"NamedNode",Re.value=be}return"NamedNode"!==Re.termType||$(Re.value)?Re:null}Ee.exports=D,D.toRDF=(W,ne)=>{const ue=new w.IdentifierIssuer("_:b"),se={"@default":{}};X(W,se,"@default",ue);const te=[],Re=Object.keys(se).sort();for(const be of Re){let re;if("@default"===be)re={termType:"DefaultGraph",value:""};else{if(!$(be))continue;re=be.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},re.value=be}P(te,se[be],re,ue,ne)}return te}},{"./constants":18,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32,canonicalize:7}],30:[function(Q,Ee,pe){"use strict";const X={};Ee.exports=X,X.isArray=Array.isArray,X.isBoolean=U=>"boolean"==typeof U||"[object Boolean]"===Object.prototype.toString.call(U),X.isDouble=U=>X.isNumber(U)&&(-1!==String(U).indexOf(".")||Math.abs(U)>=1e21),X.isEmptyObject=U=>X.isObject(U)&&0===Object.keys(U).length,X.isNumber=U=>"number"==typeof U||"[object Number]"===Object.prototype.toString.call(U),X.isNumeric=U=>!isNaN(parseFloat(U))&&isFinite(U),X.isObject=U=>"[object Object]"===Object.prototype.toString.call(U),X.isString=U=>"string"==typeof U||"[object String]"===Object.prototype.toString.call(U),X.isUndefined=U=>void 0===U},{}],31:[function(Q,Ee,pe){"use strict";const X=Q("./types"),U={};Ee.exports=U,U.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},U.parse=(Y,B)=>{const w={},C=U.parsers[B||"full"],R=C.regex.exec(Y);let M=C.keys.length;for(;M--;)w[C.keys[M]]=void 0===R[M]?null:R[M];return("https"===w.scheme&&"443"===w.port||"http"===w.scheme&&"80"===w.port)&&(w.href=w.href.replace(":"+w.port,""),w.authority=w.authority.replace(":"+w.port,""),w.port=null),w.normalizedPath=U.removeDotSegments(w.path),w},U.prependBase=(Y,B)=>{if(null===Y||U.isAbsolute(B))return B;(!Y||X.isString(Y))&&(Y=U.parse(Y||""));const w=U.parse(B),C={protocol:Y.protocol||""};if(null!==w.authority)C.authority=w.authority,C.path=w.path,C.query=w.query;else if(C.authority=Y.authority,""===w.path)C.path=Y.path,C.query=null!==w.query?w.query:Y.query;else{if(0===w.path.indexOf("/"))C.path=w.path;else{let M=Y.path;M=M.substr(0,M.lastIndexOf("/")+1),(M.length>0||Y.authority)&&"/"!==M.substr(-1)&&(M+="/"),M+=w.path,C.path=M}C.query=w.query}""!==w.path&&(C.path=U.removeDotSegments(C.path));let R=C.protocol;return null!==C.authority&&(R+="//"+C.authority),R+=C.path,null!==C.query&&(R+="?"+C.query),null!==w.fragment&&(R+="#"+w.fragment),""===R&&(R="./"),R},U.removeBase=(Y,B)=>{if(null===Y)return B;(!Y||X.isString(Y))&&(Y=U.parse(Y||""));let w="";if(""!==Y.href?w+=(Y.protocol||"")+"//"+(Y.authority||""):B.indexOf("//")&&(w+="//"),0!==B.indexOf(w))return B;const C=U.parse(B.substr(w.length)),R=Y.normalizedPath.split("/"),M=C.normalizedPath.split("/"),y=C.fragment||C.query?0:1;for(;R.length>0&&M.length>y&&R[0]===M[0];)R.shift(),M.shift();let v="";if(R.length>0){R.pop();for(let b=0;b<R.length;++b)v+="../"}return v+=M.join("/"),null!==C.query&&(v+="?"+C.query),null!==C.fragment&&(v+="#"+C.fragment),""===v&&(v="./"),v},U.removeDotSegments=Y=>{if(0===Y.length)return"";const B=Y.split("/"),w=[];for(;B.length>0;){const C=B.shift(),R=0===B.length;"."!==C?".."!==C?w.push(C):(w.pop(),R&&w.push("")):R&&w.push("")}return"/"===Y[0]&&w.length>0&&""!==w[0]&&w.unshift(""),1===w.length&&""===w[0]?"/":w.join("/")};const F=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;U.isAbsolute=Y=>X.isString(Y)&&F.test(Y),U.isRelative=Y=>X.isString(Y)},{"./types":30}],32:[function(Q,Ee,pe){"use strict";const X=Q("./graphTypes"),U=Q("./types"),F=Q("rdf-canonize").IdentifierIssuer,Y=Q("./JsonLdError"),B=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,w=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,C=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,R_headers={accept:"application/ld+json, application/json"},M={};function y(v,b){if(U.isArray(b))for(let S=0;S<b.length;++S)b[S]=y(v,b[S]);else if(X.isList(b))b["@list"]=y(v,b["@list"]);else if(U.isObject(b)){X.isBlankNode(b)&&(b["@id"]=v.getId(b["@id"]));const S=Object.keys(b).sort();for(let T=0;T<S.length;++T){const E=S[T];"@id"!==E&&(b[E]=y(v,b[E]))}}return b}Ee.exports=M,M.IdentifierIssuer=F,M.clone=function(v){if(v&&"object"==typeof v){let b;if(U.isArray(v)){b=[];for(let S=0;S<v.length;++S)b[S]=M.clone(v[S])}else if(v instanceof Map){b=new Map;for(const[S,T]of v)b.set(S,M.clone(T))}else if(v instanceof Set){b=new Set;for(const S of v)b.add(M.clone(S))}else if(U.isObject(v)){b={};for(const S in v)b[S]=M.clone(v[S])}else b=v.toString();return b}return v},M.asArray=function(v){return Array.isArray(v)?v:[v]},M.buildHeaders=(v={})=>{if(Object.keys(v).some(S=>"accept"===S.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+R_headers.accept+'" is supported.');return Object.assign({Accept:R_headers.accept},v)},M.parseLinkHeader=v=>{const b={},S=v.match(B);for(let T=0;T<S.length;++T){let E=S[T].match(w);if(!E)continue;const O={target:E[1]},$=E[2];for(;E=C.exec($);)O[E[1]]=void 0===E[2]?E[3]:E[2];const D=O.rel||"";Array.isArray(b[D])?b[D].push(O):b[D]=b.hasOwnProperty(D)?[b[D],O]:O}return b},M.validateTypeValue=(v,b)=>{if(!(U.isString(v)||U.isArray(v)&&v.every(S=>U.isString(S)))){if(b&&U.isObject(v))switch(Object.keys(v).length){case 0:return;case 1:if("@default"in v&&M.asArray(v["@default"]).every(S=>U.isString(S)))return}throw new Y('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:v})}},M.hasProperty=(v,b)=>{if(v.hasOwnProperty(b)){const S=v[b];return!U.isArray(S)||S.length>0}return!1},M.hasValue=(v,b,S)=>{if(M.hasProperty(v,b)){let T=v[b];const E=X.isList(T);if(U.isArray(T)||E){E&&(T=T["@list"]);for(let O=0;O<T.length;++O)if(M.compareValues(S,T[O]))return!0}else if(!U.isArray(S))return M.compareValues(S,T)}return!1},M.addValue=(v,b,S,T)=>{if("propertyIsArray"in(T=T||{})||(T.propertyIsArray=!1),"valueIsArray"in T||(T.valueIsArray=!1),"allowDuplicate"in T||(T.allowDuplicate=!0),"prependValue"in T||(T.prependValue=!1),T.valueIsArray)v[b]=S;else if(U.isArray(S)){0===S.length&&T.propertyIsArray&&!v.hasOwnProperty(b)&&(v[b]=[]),T.prependValue&&(S=S.concat(v[b]),v[b]=[]);for(let E=0;E<S.length;++E)M.addValue(v,b,S[E],T)}else if(v.hasOwnProperty(b)){const E=!T.allowDuplicate&&M.hasValue(v,b,S);!U.isArray(v[b])&&(!E||T.propertyIsArray)&&(v[b]=[v[b]]),E||(T.prependValue?v[b].unshift(S):v[b].push(S))}else v[b]=T.propertyIsArray?[S]:S},M.getValues=(v,b)=>[].concat(v[b]||[]),M.removeProperty=(v,b)=>{delete v[b]},M.removeValue=(v,b,S,T)=>{"propertyIsArray"in(T=T||{})||(T.propertyIsArray=!1);const E=M.getValues(v,b).filter(O=>!M.compareValues(O,S));0===E.length?M.removeProperty(v,b):v[b]=1!==E.length||T.propertyIsArray?E:E[0]},M.relabelBlankNodes=(v,b)=>y((b=b||{}).issuer||new F("_:b"),v),M.compareValues=(v,b)=>!!(v===b||X.isValue(v)&&X.isValue(b)&&v["@value"]===b["@value"]&&v["@type"]===b["@type"]&&v["@language"]===b["@language"]&&v["@index"]===b["@index"])||!!(U.isObject(v)&&"@id"in v&&U.isObject(b)&&"@id"in b)&&v["@id"]===b["@id"],M.compareShortestLeast=(v,b)=>v.length<b.length?-1:b.length<v.length?1:v===b?0:v<b?-1:1},{"./JsonLdError":12,"./graphTypes":25,"./types":30,"rdf-canonize":46}],33:[function(Q,Ee,pe){"use strict";const X=Q("yallist"),U=Symbol("max"),F=Symbol("length"),Y=Symbol("lengthCalculator"),B=Symbol("allowStale"),w=Symbol("maxAge"),C=Symbol("dispose"),R=Symbol("noDisposeOnSet"),M=Symbol("lruList"),y=Symbol("cache"),v=Symbol("updateAgeOnGet"),b=()=>1;const T=(Z,x,W)=>{const ne=Z[y].get(x);if(ne){const ue=ne.value;if(E(Z,ue)){if($(Z,ne),!Z[B])return}else W&&(Z[v]&&(ne.value.now=Date.now()),Z[M].unshiftNode(ne));return ue.value}},E=(Z,x)=>{if(!x||!x.maxAge&&!Z[w])return!1;const W=Date.now()-x.now;return x.maxAge?W>x.maxAge:Z[w]&&W>Z[w]},O=Z=>{if(Z[F]>Z[U])for(let x=Z[M].tail;Z[F]>Z[U]&&null!==x;){const W=x.prev;$(Z,x),x=W}},$=(Z,x)=>{if(x){const W=x.value;Z[C]&&Z[C](W.key,W.value),Z[F]-=W.length,Z[y].delete(W.key),Z[M].removeNode(x)}};class D{constructor(x,W,ne,ue,se){this.key=x,this.value=W,this.length=ne,this.now=ue,this.maxAge=se||0}}const P=(Z,x,W,ne)=>{let ue=W.value;E(Z,ue)&&($(Z,W),Z[B]||(ue=void 0)),ue&&x.call(ne,ue.value,ue.key,Z)};Ee.exports=class{constructor(x){if("number"==typeof x&&(x={max:x}),x||(x={}),x.max&&("number"!=typeof x.max||x.max<0))throw new TypeError("max must be a non-negative number");this[U]=x.max||1/0;const ne=x.length||b;if(this[Y]="function"!=typeof ne?b:ne,this[B]=x.stale||!1,x.maxAge&&"number"!=typeof x.maxAge)throw new TypeError("maxAge must be a number");this[w]=x.maxAge||0,this[C]=x.dispose,this[R]=x.noDisposeOnSet||!1,this[v]=x.updateAgeOnGet||!1,this.reset()}set max(x){if("number"!=typeof x||x<0)throw new TypeError("max must be a non-negative number");this[U]=x||1/0,O(this)}get max(){return this[U]}set allowStale(x){this[B]=!!x}get allowStale(){return this[B]}set maxAge(x){if("number"!=typeof x)throw new TypeError("maxAge must be a non-negative number");this[w]=x,O(this)}get maxAge(){return this[w]}set lengthCalculator(x){"function"!=typeof x&&(x=b),x!==this[Y]&&(this[Y]=x,this[F]=0,this[M].forEach(W=>{W.length=this[Y](W.value,W.key),this[F]+=W.length})),O(this)}get lengthCalculator(){return this[Y]}get length(){return this[F]}get itemCount(){return this[M].length}rforEach(x,W){W=W||this;for(let ne=this[M].tail;null!==ne;){const ue=ne.prev;P(this,x,ne,W),ne=ue}}forEach(x,W){W=W||this;for(let ne=this[M].head;null!==ne;){const ue=ne.next;P(this,x,ne,W),ne=ue}}keys(){return this[M].toArray().map(x=>x.key)}values(){return this[M].toArray().map(x=>x.value)}reset(){this[C]&&this[M]&&this[M].length&&this[M].forEach(x=>this[C](x.key,x.value)),this[y]=new Map,this[M]=new X,this[F]=0}dump(){return this[M].map(x=>!E(this,x)&&{k:x.key,v:x.value,e:x.now+(x.maxAge||0)}).toArray().filter(x=>x)}dumpLru(){return this[M]}set(x,W,ne){if((ne=ne||this[w])&&"number"!=typeof ne)throw new TypeError("maxAge must be a number");const ue=ne?Date.now():0,se=this[Y](W,x);if(this[y].has(x)){if(se>this[U])return $(this,this[y].get(x)),!1;const be=this[y].get(x).value;return this[C]&&(this[R]||this[C](x,be.value)),be.now=ue,be.maxAge=ne,be.value=W,this[F]+=se-be.length,be.length=se,this.get(x),O(this),!0}const te=new D(x,W,se,ue,ne);return te.length>this[U]?(this[C]&&this[C](x,W),!1):(this[F]+=te.length,this[M].unshift(te),this[y].set(x,this[M].head),O(this),!0)}has(x){if(!this[y].has(x))return!1;const W=this[y].get(x).value;return!E(this,W)}get(x){return T(this,x,!0)}peek(x){return T(this,x,!1)}pop(){const x=this[M].tail;return x?($(this,x),x.value):null}del(x){$(this,this[y].get(x))}load(x){this.reset();const W=Date.now();for(let ne=x.length-1;ne>=0;ne--){const ue=x[ne],se=ue.e||0;if(0===se)this.set(ue.k,ue.v);else{const te=se-W;te>0&&this.set(ue.k,ue.v,te)}}}prune(){this[y].forEach((x,W)=>T(this,W,!1))}}},{yallist:92}],34:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;const X="http://www.w3.org/1999/02/22-rdf-syntax-ns#",U="http://www.w3.org/2001/XMLSchema#",F="http://www.w3.org/2000/10/swap/";pe.default={xsd:{decimal:`${U}decimal`,boolean:`${U}boolean`,double:`${U}double`,integer:`${U}integer`,string:`${U}string`},rdf:{type:`${X}type`,nil:`${X}nil`,first:`${X}first`,rest:`${X}rest`,langString:`${X}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${F}reify#forSome`,forAll:`${F}reify#forAll`},log:{implies:`${F}log#implies`}}},{}],35:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=pe.Variable=pe.Triple=pe.Term=pe.Quad=pe.NamedNode=pe.Literal=pe.DefaultGraph=pe.BlankNode=void 0,pe.escapeQuotes=x,pe.termFromId=function D(re,ve){if(ve=ve||y,!re)return ve.defaultGraph();switch(re[0]){case"?":return ve.variable(re.substr(1));case"_":return ve.blankNode(re.substr(2));case'"':if(ve===y)return new T(re);if('"'===re[re.length-1])return ve.literal(re.substr(1,re.length-2));const Fe=re.lastIndexOf('"',re.length-1);return ve.literal(re.substr(1,Fe-1),"@"===re[Fe+1]?re.substr(Fe+2):ve.namedNode(re.substr(Fe+3)));case"<":const Ze=M.exec(re);return ve.quad(D(W(Ze[1]),ve),D(W(Ze[2]),ve),D(W(Ze[3]),ve),Ze[4]&&D(W(Ze[4]),ve));default:return ve.namedNode(re)}},pe.termToId=function P(re){if("string"==typeof re)return re;if(re instanceof b&&"Quad"!==re.termType)return re.id;if(!re)return w.id;switch(re.termType){case"NamedNode":return re.value;case"BlankNode":return`_:${re.value}`;case"Variable":return`?${re.value}`;case"DefaultGraph":return"";case"Literal":return`"${re.value}"${re.language?`@${re.language}`:re.datatype&&re.datatype.value!==B.string?`^^${re.datatype.value}`:""}`;case"Quad":return`<<${x(P(re.subject))} ${x(P(re.predicate))} ${x(P(re.object))}${(0,U.isDefaultGraph)(re.graph)?"":` ${P(re.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${re.termType}`)}},pe.unescapeQuotes=W;var re,X=(re=Q("./IRIs"))&&re.__esModule?re:{default:re},U=Q("./N3Util");const{rdf:Y,xsd:B}=X.default;let w,C=0;const R=/^"(.*".*)(?="[^"]*$)/,M=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,y={namedNode:function(re){return new S(re)},blankNode:function(re){return new E(re||"n3-"+C++)},variable:function(re){return new O(re)},literal:function(re,ve){if("string"==typeof ve)return new T(`"${re}"@${ve.toLowerCase()}`);let Fe=ve?ve.value:"";return""===Fe&&("boolean"==typeof re?Fe=B.boolean:"number"==typeof re&&(Number.isFinite(re)?Fe=Number.isInteger(re)?B.integer:B.double:(Fe=B.double,Number.isNaN(re)||(re=re>0?"INF":"-INF")))),new T(""===Fe||Fe===B.string?`"${re}"`:`"${re}"^^${Fe}`)},defaultGraph:function(){return w},quad:be,triple:be};pe.default=y;class b{constructor(ve){this.id=ve}get value(){return this.id}equals(ve){return ve instanceof b?this.id===ve.id:!!ve&&this.termType===ve.termType&&this.value===ve.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}pe.Term=b;class S extends b{get termType(){return"NamedNode"}}pe.NamedNode=S;class T extends b{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const ve=this.id;let Fe=ve.lastIndexOf('"')+1;return Fe<ve.length&&"@"===ve[Fe++]?ve.substr(Fe).toLowerCase():""}get datatype(){return new S(this.datatypeString)}get datatypeString(){const ve=this.id,Fe=ve.lastIndexOf('"')+1,Ze=Fe<ve.length?ve[Fe]:"";return"^"===Ze?ve.substr(Fe+2):"@"!==Ze?B.string:Y.langString}equals(ve){return ve instanceof T?this.id===ve.id:!!ve&&!!ve.datatype&&this.termType===ve.termType&&this.value===ve.value&&this.language===ve.language&&this.datatype.value===ve.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}pe.Literal=T;class E extends b{constructor(ve){super(`_:${ve}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}pe.BlankNode=E;class O extends b{constructor(ve){super(`?${ve}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}pe.Variable=O;class $ extends b{constructor(){return super(""),w||this}get termType(){return"DefaultGraph"}equals(ve){return this===ve||!!ve&&this.termType===ve.termType}}pe.DefaultGraph=$,w=new $;class Z extends b{constructor(ve,Fe,Ze,Ge){super(""),this._subject=ve,this._predicate=Fe,this._object=Ze,this._graph=Ge||w}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(ve){return!!ve&&this._subject.equals(ve.subject)&&this._predicate.equals(ve.predicate)&&this._object.equals(ve.object)&&this._graph.equals(ve.graph)}}function x(re){return re.replace(R,(ve,Fe)=>`"${Fe.replace(/"/g,'""')}`)}function W(re){return re.replace(R,(ve,Fe)=>`"${Fe.replace(/""/g,'"')}`)}function be(re,ve,Fe,Ze){return new Z(re,ve,Fe,Ze)}pe.Triple=pe.Quad=Z},{"./IRIs":34,"./N3Util":41}],36:[function(Q,Ee,pe){(function(X){(function(){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var U=Y(Q("./IRIs")),F=Y(Q("queue-microtask"));function Y(b){return b&&b.__esModule?b:{default:b}}const{xsd:B}=U.default,w=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,C={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},R=/[\x00-\x20<>\\"\{\}\|\^\`]/,M={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},y=/$0^/;pe.default=class{constructor(S){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(S=S||{}).lineMode){this._n3Mode=!1;for(const T in this)!(T in M)&&this[T]instanceof RegExp&&(this[T]=y)}else this._n3Mode=!1!==S.n3;this._comments=!!S.comments,this._literalClosingPos=0}_tokenizeToEnd(S,T){let E=this._input,O=E.length;for(;;){let P,Z;for(;P=this._newline.exec(E);)this._comments&&(Z=this._comment.exec(P[0]))&&$("comment",Z[1],"",this._line,P[0].length),E=E.substr(P[0].length,E.length),O=E.length,this._line++;if(!P&&(P=this._whitespace.exec(E))&&(E=E.substr(P[0].length,E.length)),this._endOfFile.test(E))return T&&(this._comments&&(Z=this._comment.exec(E))&&$("comment",Z[1],"",this._line,E.length),E=null,$("eof","","",this._line,0)),this._input=E;const x=this._line,W=E[0];let ne="",ue="",se="",te=null,Re=0,be=!1;switch(W){case"^":if(E.length<3)break;if("^"!==E[1]){this._n3Mode&&(Re=1,ne="^");break}if(this._previousMarker="^^",E=E.substr(2),"<"!==E[0]){be=!0;break}case"<":if(te=this._unescapedIri.exec(E))ne="IRI",ue=te[1];else if(te=this._iri.exec(E)){if(ue=this._unescape(te[1]),null===ue||R.test(ue))return D(this);ne="IRI"}else E.length>1&&"<"===E[1]?(ne="<<",Re=2):this._n3Mode&&E.length>1&&"="===E[1]&&(ne="inverse",Re=2,ue=">");break;case">":E.length>1&&">"===E[1]&&(ne=">>",Re=2);break;case"_":((te=this._blank.exec(E))||T&&(te=this._blank.exec(`${E} `)))&&(ne="blank",se="_",ue=te[1]);break;case'"':if(te=this._simpleQuotedString.exec(E))ue=te[1];else if(({value:ue,matchLength:Re}=this._parseLiteral(E)),null===ue)return D(this);(null!==te||0!==Re)&&(ne="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(te=this._simpleApostropheString.exec(E))ue=te[1];else if(({value:ue,matchLength:Re}=this._parseLiteral(E)),null===ue)return D(this);(null!==te||0!==Re)&&(ne="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(te=this._variable.exec(E))&&(ne="var",ue=te[0]);break;case"@":"literal"===this._previousMarker&&(te=this._langcode.exec(E))?(ne="langcode",ue=te[1]):(te=this._keyword.exec(E))&&(ne=te[0]);break;case".":if(1===E.length?T:E[1]<"0"||E[1]>"9"){ne=".",Re=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(te=this._number.exec(E)||T&&(te=this._number.exec(`${E} `)))&&(ne="literal",ue=te[0],se="string"==typeof te[1]?B.double:"string"==typeof te[2]?B.decimal:B.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(te=this._sparqlKeyword.exec(E))?ne=te[0].toUpperCase():be=!0;break;case"f":case"t":(te=this._boolean.exec(E))?(ne="literal",ue=te[0],se=B.boolean):be=!0;break;case"a":(te=this._shortPredicates.exec(E))?(ne="abbreviation",ue="a"):be=!0;break;case"=":this._n3Mode&&E.length>1&&(ne="abbreviation",">"!==E[1]?(Re=1,ue="="):(Re=2,ue=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(Re=1,ne=W);break;default:be=!0}if(be&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(te=this._prefix.exec(E))?((te=this._prefixed.exec(E))||T&&(te=this._prefixed.exec(`${E} `)))&&(ne="prefixed",se=te[1]||"",ue=this._unescape(te[2])):(ne="prefix",ue=te[1]||"")),"^^"===this._previousMarker)switch(ne){case"prefixed":ne="type";break;case"IRI":ne="typeIRI";break;default:ne=""}if(!ne)return T||!/^'''|^"""/.test(E)&&/\n|\r/.test(E)?D(this):this._input=E;const re=Re||te[0].length,ve=$(ne,ue,se,x,re);this.previousToken=ve,this._previousMarker=ne,E=E.substr(re,E.length)}function $(P,Z,x,W,ne){const ue=E?O-E.length:O,te={type:P,value:Z,prefix:x,line:W,start:ue,end:ue+ne};return S(null,te),te}function D(P){S(P._syntaxError(/^\S*/.exec(E)[0]))}}_unescape(S){let T=!1;const E=S.replace(w,(O,$,D,P)=>{if("string"==typeof $)return String.fromCharCode(Number.parseInt($,16));if("string"==typeof D){let Z=Number.parseInt(D,16);return Z<=65535?String.fromCharCode(Number.parseInt(D,16)):String.fromCharCode(55296+((Z-=65536)>>10),56320+(1023&Z))}return P in C?C[P]:(T=!0,"")});return T?null:E}_parseLiteral(S){if(S.length>=3){const T=S.match(/^(?:"""|"|'''|'|)/)[0],E=T.length;let O=Math.max(this._literalClosingPos,E);for(;(O=S.indexOf(T,O))>0;){let $=0;for(;"\\"===S[O-$-1];)$++;if($%2==0){const D=S.substring(E,O),P=D.split(/\r\n|\r|\n/).length-1,Z=O+E;if(1===E&&0!==P||3===E&&this._lineMode)break;return this._line+=P,{value:this._unescape(D),matchLength:Z}}O++}this._literalClosingPos=S.length-E+1}return{value:"",matchLength:0}}_syntaxError(S){this._input=null;const T=new Error(`Unexpected "${S}" on line ${this._line}.`);return T.context={token:void 0,line:this._line,previousToken:this.previousToken},T}_readStartingBom(S){return S.startsWith("\ufeff")?S.substr(1):S}tokenize(S,T){if(this._line=1,"string"==typeof S){if(this._input=this._readStartingBom(S),"function"!=typeof T){const E=[];let O;if(this._tokenizeToEnd(($,D)=>$?O=$:E.push(D),!0),O)throw O;return E}(0,F.default)(()=>this._tokenizeToEnd(T,!0))}else this._pendingBuffer=null,"function"==typeof S.setEncoding&&S.setEncoding("utf8"),S.on("data",E=>{null!==this._input&&0!==E.length&&(this._pendingBuffer&&(E=X.concat([this._pendingBuffer,E]),this._pendingBuffer=null),128&E[E.length-1]?this._pendingBuffer=E:(void 0===this._input?this._input=this._readStartingBom("string"==typeof E?E:E.toString()):this._input+=E,this._tokenizeToEnd(T,!1)))}),S.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(T,!0)}),S.on("error",T)}}}).call(this)}).call(this,Q("buffer").Buffer)},{"./IRIs":34,buffer:6,"queue-microtask":45}],37:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var X=Y(Q("./N3Lexer")),U=Y(Q("./N3DataFactory")),F=Y(Q("./IRIs"));function Y(M){return M&&M.__esModule?M:{default:M}}let B=0;class w{constructor(y){this._contextStack=[],this._graph=null,this._setBase((y=y||{}).baseIRI),y.factory&&R(this,y.factory);const v="string"==typeof y.format?y.format.match(/\w*$/)[0].toLowerCase():"",b=/turtle/.test(v),S=/trig/.test(v),T=/triple/.test(v),E=/quad/.test(v),O=this._n3Mode=/n3/.test(v),$=T||E;(this._supportsNamedGraphs=!(b||O))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(b||S||T||O),this._supportsRDFStar=""===v||/star|\*$/.test(v),$&&(this._resolveRelativeIRI=D=>null),this._blankNodePrefix="string"!=typeof y.blankNodePrefix?"":y.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=y.lexer||new X.default({lineMode:$,n3:O}),this._explicitQuantifiers=!!y.explicitQuantifiers}static _resetBlankNodePrefix(){B=0}_setBase(y){if(y){const v=y.indexOf("#");v>=0&&(y=y.substr(0,v)),this._base=y,this._basePath=y.indexOf("/")<0?y:y.replace(/[^\/?]*(?:\?.*)?$/,""),y=y.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=y[0],this._baseScheme=y[1]}else this._base="",this._basePath=""}_saveContext(y,v,b,S,T){const E=this._n3Mode;this._contextStack.push({subject:b,predicate:S,object:T,graph:v,type:y,inverse:!!E&&this._inversePredicate,blankPrefix:E?this._prefixes._:"",quantified:E?this._quantified:null}),E&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(){const y=this._contextStack.pop(),v=this._n3Mode;this._subject=y.subject,this._predicate=y.predicate,this._object=y.object,this._graph=y.graph,v&&(this._inversePredicate=y.inverse,this._prefixes._=y.blankPrefix,this._quantified=y.quantified)}_readInTopContext(y){switch(y.type){case"eof":return null!==this._graph?this._error("Unclosed graph",y):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(y)}}_readEntity(y,v){let b;switch(y.type){case"IRI":case"typeIRI":const S=this._resolveIRI(y.value);if(null===S)return this._error("Invalid IRI",y);b=this._namedNode(S);break;case"type":case"prefixed":const T=this._prefixes[y.prefix];if(void 0===T)return this._error(`Undefined prefix "${y.prefix}:"`,y);b=this._namedNode(T+y.value);break;case"blank":b=this._blankNode(this._prefixes[y.prefix]+y.value);break;case"var":b=this._variable(y.value.substr(1));break;default:return this._error(`Expected entity but got ${y.type}`,y)}return!v&&this._n3Mode&&b.id in this._quantified&&(b=this._quantified[b.id]),b}_readSubject(y){switch(this._predicate=null,y.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",y);case"}":return this._readPunctuation(y);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',y);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',y);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",y);if(0===y.prefix.length)return this._literalValue=y.value,this._completeSubjectLiteral;this._subject=this._literal(y.value,this._namedNode(y.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",y);default:if(void 0===(this._subject=this._readEntity(y)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(y){const v=y.type;switch(v){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[y.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${v}`,y):(this._subject=null,"]"===v?this._readBlankNodeTail(y):this._readPunctuation(y));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",y);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",y);default:if(void 0===(this._predicate=this._readEntity(y)))return}return this._readObject}_readObject(y){switch(y.type){case"literal":if(0===y.prefix.length)return this._literalValue=y.value,this._readDataTypeOrLang;this._object=this._literal(y.value,this._namedNode(y.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",y);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",y);default:if(void 0===(this._object=this._readEntity(y)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(y){return"{"===y.type?this._readGraph(y):this._readPredicate(y)}_readGraph(y){return"{"!==y.type?this._error(`Expected graph but got ${y.type}`,y):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(y){return"]"===y.type?(this._subject=null,this._readBlankNodeTail(y)):(this._predicate=null,this._readPredicate(y))}_readBlankNodeTail(y){if("]"!==y.type)return this._readBlankNodePunctuation(y);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const v=null===this._predicate;return this._restoreContext(),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:v?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(y){switch(y.type){case".":case"}":return this._subject=null,this._readPunctuation(y);default:return this._readPredicate(y)}}_readListItem(y){let v=null,b=null,S=this._readListItem;const T=this._subject,E=this._contextStack,O=E[E.length-1];switch(y.type){case"[":this._saveContext("blank",this._graph,b=this._blankNode(),this.RDF_FIRST,this._subject=v=this._blankNode()),S=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,b=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==E.length&&"list"===E[E.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(S=this._readPredicate,this._subject===this.RDF_NIL)return S}else if(S=this._getContextEndReader(),this._object===this.RDF_NIL)return S;b=this.RDF_NIL;break;case"literal":0===y.prefix.length?(this._literalValue=y.value,S=this._readListItemDataTypeOrLang):(v=this._literal(y.value,this._namedNode(y.prefix)),S=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",y);default:if(void 0===(v=this._readEntity(y)))return}if(null===b&&(this._subject=b=this._blankNode()),null===T?null===O.predicate?O.subject=b:O.object=b:this._emit(T,this.RDF_REST,b,this._graph),null!==v){if(this._n3Mode&&("IRI"===y.type||"prefixed"===y.type))return this._saveContext("item",this._graph,b,this.RDF_FIRST,v),this._subject=v,this._predicate=null,this._getPathReader(this._readListItem);this._emit(b,this.RDF_FIRST,v,this._graph)}return S}_readDataTypeOrLang(y){return this._completeObjectLiteral(y,!1)}_readListItemDataTypeOrLang(y){return this._completeObjectLiteral(y,!0)}_completeLiteral(y){let v=this._literal(this._literalValue);switch(y.type){case"type":case"typeIRI":const b=this._readEntity(y);if(void 0===b)return;v=this._literal(this._literalValue,b),y=null;break;case"langcode":v=this._literal(this._literalValue,y.value),y=null}return{token:y,literal:v}}_completeSubjectLiteral(y){return this._subject=this._completeLiteral(y).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(y,v){const b=this._completeLiteral(y);if(b)return this._object=b.literal,v&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===b.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(b.token))}_readFormulaTail(y){return"}"!==y.type?this._readPunctuation(y):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(y){let v,b=this._graph;const S=this._subject,T=this._inversePredicate;switch(y.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",y);if(this._n3Mode)return this._readFormulaTail(y);this._graph=null;case".":this._subject=null,v=this._contextStack.length?this._readSubject:this._readInTopContext,T&&(this._inversePredicate=!1);break;case";":v=this._readPredicate;break;case",":v=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(b=this._readEntity(y))){v=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,y)}if(null!==S){const E=this._predicate,O=this._object;T?this._emit(O,E,S,b):this._emit(S,E,O,b)}return v}_readBlankNodePunctuation(y){let v;switch(y.type){case";":v=this._readPredicate;break;case",":v=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,y)}return this._emit(this._subject,this._predicate,this._object,this._graph),v}_readQuadPunctuation(y){return"."!==y.type?this._error("Expected dot to follow quad",y):this._readInTopContext}_readPrefix(y){return"prefix"!==y.type?this._error("Expected prefix to follow @prefix",y):(this._prefix=y.value,this._readPrefixIRI)}_readPrefixIRI(y){if("IRI"!==y.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,y);const v=this._readEntity(y);return this._prefixes[this._prefix]=v.value,this._prefixCallback(this._prefix,v),this._readDeclarationPunctuation}_readBaseIRI(y){const v="IRI"===y.type&&this._resolveIRI(y.value);return v?(this._setBase(v),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",y)}_readNamedGraphLabel(y){switch(y.type){case"IRI":case"blank":case"prefixed":return this._readSubject(y),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",y)}}_readNamedGraphBlankLabel(y){return"]"!==y.type?this._error("Invalid graph label",y):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(y){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(y)):"."!==y.type?this._error("Expected declaration to end with a dot",y):this._readInTopContext}_readQuantifierList(y){let v;switch(y.type){case"IRI":case"prefixed":if(void 0!==(v=this._readEntity(y,!0)))break;default:return this._error(`Unexpected ${y.type}`,y)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,v,this.QUANTIFIERS_GRAPH)):this._quantified[v.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(y){return","===y.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(y))}_getPathReader(y){return this._afterPath=y,this._readPath}_readPath(y){switch(y.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const v=this._contextStack,b=v.length&&v[v.length-1];if(b&&"item"===b.type){const S=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,S,this._graph)}return this._afterPath(y)}}_readForwardPath(y){let v,b;const S=this._blankNode();if(void 0!==(b=this._readEntity(y)))return null===this._predicate?(v=this._subject,this._subject=S):(v=this._object,this._object=S),this._emit(v,b,S,this._graph),this._readPath}_readBackwardPath(y){const v=this._blankNode();let b,S;if(void 0!==(b=this._readEntity(y)))return null===this._predicate?(S=this._subject,this._subject=v):(S=this._object,this._object=v),this._emit(v,b,S,this._graph),this._readPath}_readRDFStarTailOrGraph(y){return">>"!==y.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(y))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,y):this._readRDFStarTail(y)}_readRDFStarTail(y){if(">>"!==y.type)return this._error(`Expected >> but got ${y.type}`,y);const v=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=v,this._readPredicate):(this._object=v,this._getContextEndReader())}_getContextEndReader(){const y=this._contextStack;if(!y.length)return this._readPunctuation;switch(y[y.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(y,v,b,S){this._callback(null,this._quad(y,v,b,S||this.DEFAULTGRAPH))}_error(y,v){const b=new Error(`${y} on line ${v.line}.`);b.context={token:v,line:v.line,previousToken:this._lexer.previousToken},this._callback(b),this._callback=C}_resolveIRI(y){return/^[a-z][a-z0-9+.-]*:/i.test(y)?y:this._resolveRelativeIRI(y)}_resolveRelativeIRI(y){if(!y.length)return this._base;switch(y[0]){case"#":return this._base+y;case"?":return this._base.replace(/(?:\?.*)?$/,y);case"/":return("/"===y[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(y);default:return/^[^/:]*:/.test(y)?null:this._removeDotSegments(this._basePath+y)}}_removeDotSegments(y){if(!/(^|\/)\.\.?($|[/#?])/.test(y))return y;const v=y.length;let b="",S=-1,T=-1,E=0,O="/";for(;S<v;){switch(O){case":":if(T<0&&"/"===y[++S]&&"/"===y[++S])for(;(T=S+1)<v&&"/"!==y[T];)S=T;break;case"?":case"#":S=v;break;case"/":if("."===y[S+1])switch(O=y[1+ ++S],O){case"/":b+=y.substring(E,S-1),E=S+1;break;case void 0:case"?":case"#":return b+y.substring(E,S)+y.substr(S+1);case".":if(O=y[1+ ++S],void 0===O||"/"===O||"?"===O||"#"===O){if(b+=y.substring(E,S-2),(E=b.lastIndexOf("/"))>=T&&(b=b.substr(0,E)),"/"!==O)return`${b}/${y.substr(S+1)}`;E=S+1}}}O=y[++S]}return b+y.substring(E)}parse(y,v,b){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${B++}_`,this._prefixCallback=b||C,this._inversePredicate=!1,this._quantified=Object.create(null),!v){const S=[];let T;if(this._callback=(E,O)=>{E?T=E:O&&S.push(O)},this._lexer.tokenize(y).every(E=>this._readCallback=this._readCallback(E)),T)throw T;return S}this._callback=v,this._lexer.tokenize(y,(S,T)=>{null!==S?(this._callback(S),this._callback=C):this._readCallback&&(this._readCallback=this._readCallback(T))})}}function C(){}function R(M,y){const v=y.namedNode;M._namedNode=v,M._blankNode=y.blankNode,M._literal=y.literal,M._variable=y.variable,M._quad=y.quad,M.DEFAULTGRAPH=y.defaultGraph(),M.RDF_FIRST=v(F.default.rdf.first),M.RDF_REST=v(F.default.rdf.rest),M.RDF_NIL=v(F.default.rdf.nil),M.N3_FORALL=v(F.default.r.forAll),M.N3_FORSOME=v(F.default.r.forSome),M.ABBREVIATIONS={a:v(F.default.rdf.type),"=":v(F.default.owl.sameAs),">":v(F.default.log.implies)},M.QUANTIFIERS_GRAPH=v("urn:n3:quantifiers")}pe.default=w,R(w.prototype,U.default)},{"./IRIs":34,"./N3DataFactory":35,"./N3Lexer":36}],38:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var y,X=function(y,v){if(!v&&y&&y.__esModule)return y;if(null===y||"object"!=typeof y&&"function"!=typeof y)return{default:y};var b=B(v);if(b&&b.has(y))return b.get(y);var S={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in y)if("default"!==E&&Object.prototype.hasOwnProperty.call(y,E)){var O=T?Object.getOwnPropertyDescriptor(y,E):null;O&&(O.get||O.set)?Object.defineProperty(S,E,O):S[E]=y[E]}return S.default=y,b&&b.set(y,S),S}(Q("./N3DataFactory")),U=Q("readable-stream"),F=(y=Q("./IRIs"))&&y.__esModule?y:{default:y};function B(y){if("function"!=typeof WeakMap)return null;var v=new WeakMap,b=new WeakMap;return(B=function(S){return S?b:v})(y)}class C{constructor(v,b){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!b&&v&&!v[0]&&(b=v,v=null),this._factory=(b=b||{}).factory||X.default,v&&this.addQuads(v)}get size(){let v=this._size;if(null!==v)return v;v=0;const b=this._graphs;let S,T;for(const E in b)for(const O in S=b[E].subjects)for(const $ in T=S[O])v+=Object.keys(T[$]).length;return this._size=v}_addToIndex(v,b,S,T){const E=v[b]||(v[b]={}),O=E[S]||(E[S]={}),$=T in O;return $||(O[T]=null),!$}_removeFromIndex(v,b,S,T){const E=v[b],O=E[S];delete O[T];for(const $ in O)return;delete E[S];for(const $ in E)return;delete v[b]}*_findInIndex(v,b,S,T,E,O,$,D){let P,Z,x;const ne=!b+!S+!T>1?Object.keys(this._ids):this._entities,ue=(0,X.termFromId)(D,this._factory);b&&((P=v,v={})[b]=P[b]);for(const se in v){const te=ne[se];if(Z=v[se]){S&&((P=Z,Z={})[S]=P[S]);for(const Re in Z){const be=ne[Re];if(x=Z[Re]){const re=T?T in x?[T]:[]:Object.keys(x);for(let ve=0;ve<re.length;ve++){const Fe={subject:null,predicate:null,object:null};Fe[E]=(0,X.termFromId)(te,this._factory),Fe[O]=(0,X.termFromId)(be,this._factory),Fe[$]=(0,X.termFromId)(ne[re[ve]],this._factory),yield this._factory.quad(Fe.subject,Fe.predicate,Fe.object,ue)}}}}}}_loop(v,b){for(const S in v)b(S)}_loopByKey0(v,b,S){let T,E;if(T=v[b])for(E in T)S(E)}_loopByKey1(v,b,S){let T,E;for(T in v)E=v[T],E[b]&&S(T)}_loopBy2Keys(v,b,S,T){let E,O,$;if((E=v[b])&&(O=E[S]))for($ in O)T($)}_countInIndex(v,b,S,T){let O,$,D,E=0;b&&((O=v,v={})[b]=O[b]);for(const P in v)if($=v[P]){S&&((O=$,$={})[S]=O[S]);for(const Z in $)(D=$[Z])&&(T?T in D&&E++:E+=Object.keys(D).length)}return E}_getGraphs(v){if(!R(v))return this._graphs;const b={};return b[v]=this._graphs[v],b}_uniqueEntities(v){const b=Object.create(null);return S=>{S in b||(b[S]=!0,v((0,X.termFromId)(this._entities[S],this._factory)))}}add(v){return this.addQuad(v),this}addQuad(v,b,S,T){b||(T=v.graph,S=v.object,b=v.predicate,v=v.subject),v=(0,X.termToId)(v),b=(0,X.termToId)(b),S=(0,X.termToId)(S),T=(0,X.termToId)(T);let E=this._graphs[T];E||(E=this._graphs[T]={subjects:{},predicates:{},objects:{}},Object.freeze(E));const O=this._ids,$=this._entities;v=O[v]||(O[$[++this._id]=v]=this._id),b=O[b]||(O[$[++this._id]=b]=this._id),S=O[S]||(O[$[++this._id]=S]=this._id);const D=this._addToIndex(E.subjects,v,b,S);return this._addToIndex(E.predicates,b,S,v),this._addToIndex(E.objects,S,v,b),this._size=null,D}addQuads(v){for(let b=0;b<v.length;b++)this.addQuad(v[b])}delete(v){return this.removeQuad(v),this}has(v,b,S,T){return v&&v.subject&&({subject:v,predicate:b,object:S,graph:T}=v),!this.readQuads(v,b,S,T).next().done}import(v){return v.on("data",b=>{this.addQuad(b)}),v}removeQuad(v,b,S,T){b||(T=v.graph,S=v.object,b=v.predicate,v=v.subject),v=(0,X.termToId)(v),b=(0,X.termToId)(b),S=(0,X.termToId)(S),T=(0,X.termToId)(T);const E=this._ids,O=this._graphs;let $,D,P;if(!((v=E[v])&&(b=E[b])&&(S=E[S])&&($=O[T])&&(D=$.subjects[v])&&(P=D[b])&&S in P))return!1;for(v in this._removeFromIndex($.subjects,v,b,S),this._removeFromIndex($.predicates,b,S,v),this._removeFromIndex($.objects,S,v,b),null!==this._size&&this._size--,$.subjects)return!0;return delete O[T],!0}removeQuads(v){for(let b=0;b<v.length;b++)this.removeQuad(v[b])}remove(v){return v.on("data",b=>{this.removeQuad(b)}),v}removeMatches(v,b,S,T){const E=new U.Readable({objectMode:!0});return E._read=()=>{for(const O of this.readQuads(v,b,S,T))E.push(O);E.push(null)},this.remove(E)}deleteGraph(v){return this.removeMatches(null,null,null,v)}getQuads(v,b,S,T){return[...this.readQuads(v,b,S,T)]}*readQuads(v,b,S,T){v=v&&(0,X.termToId)(v),b=b&&(0,X.termToId)(b),S=S&&(0,X.termToId)(S),T=T&&(0,X.termToId)(T);const E=this._getGraphs(T),O=this._ids;let $,D,P,Z;if(!(R(v)&&!(D=O[v])||R(b)&&!(P=O[b])||R(S)&&!(Z=O[S])))for(const x in E)($=E[x])&&(D?Z?yield*this._findInIndex($.objects,Z,D,P,"object","subject","predicate",x,null,!0):yield*this._findInIndex($.subjects,D,P,null,"subject","predicate","object",x,null,!0):P?yield*this._findInIndex($.predicates,P,Z,null,"predicate","object","subject",x,null,!0):Z?yield*this._findInIndex($.objects,Z,null,null,"object","subject","predicate",x,null,!0):yield*this._findInIndex($.subjects,null,null,null,"subject","predicate","object",x,null,!0))}match(v,b,S,T){return new M(this,v,b,S,T)}countQuads(v,b,S,T){v=v&&(0,X.termToId)(v),b=b&&(0,X.termToId)(b),S=S&&(0,X.termToId)(S),T=T&&(0,X.termToId)(T);const E=this._getGraphs(T),O=this._ids;let D,P,Z,x,$=0;if(R(v)&&!(P=O[v])||R(b)&&!(Z=O[b])||R(S)&&!(x=O[S]))return 0;for(const W in E)(D=E[W])&&($+=v?S?this._countInIndex(D.objects,x,P,Z):this._countInIndex(D.subjects,P,Z,x):b?this._countInIndex(D.predicates,Z,x,P):this._countInIndex(D.objects,x,P,Z));return $}forEach(v,b,S,T,E){this.some(O=>(v(O),!1),b,S,T,E)}every(v,b,S,T,E){let O=!1;const $=!this.some(D=>(O=!0,!v(D)),b,S,T,E);return O&&$}some(v,b,S,T,E){for(const O of this.readQuads(b,S,T,E))if(v(O))return!0;return!1}getSubjects(v,b,S){const T=[];return this.forSubjects(E=>{T.push(E)},v,b,S),T}forSubjects(v,b,S,T){b=b&&(0,X.termToId)(b),S=S&&(0,X.termToId)(S),T=T&&(0,X.termToId)(T);const E=this._ids,O=this._getGraphs(T);let $,D,P;if(v=this._uniqueEntities(v),!(R(b)&&!(D=E[b])||R(S)&&!(P=E[S])))for(T in O)($=O[T])&&(D?P?this._loopBy2Keys($.predicates,D,P,v):this._loopByKey1($.subjects,D,v):P?this._loopByKey0($.objects,P,v):this._loop($.subjects,v))}getPredicates(v,b,S){const T=[];return this.forPredicates(E=>{T.push(E)},v,b,S),T}forPredicates(v,b,S,T){b=b&&(0,X.termToId)(b),S=S&&(0,X.termToId)(S),T=T&&(0,X.termToId)(T);const E=this._ids,O=this._getGraphs(T);let $,D,P;if(v=this._uniqueEntities(v),!(R(b)&&!(D=E[b])||R(S)&&!(P=E[S])))for(T in O)($=O[T])&&(D?P?this._loopBy2Keys($.objects,P,D,v):this._loopByKey0($.subjects,D,v):P?this._loopByKey1($.predicates,P,v):this._loop($.predicates,v))}getObjects(v,b,S){const T=[];return this.forObjects(E=>{T.push(E)},v,b,S),T}forObjects(v,b,S,T){b=b&&(0,X.termToId)(b),S=S&&(0,X.termToId)(S),T=T&&(0,X.termToId)(T);const E=this._ids,O=this._getGraphs(T);let $,D,P;if(v=this._uniqueEntities(v),!(R(b)&&!(D=E[b])||R(S)&&!(P=E[S])))for(T in O)($=O[T])&&(D?P?this._loopBy2Keys($.subjects,D,P,v):this._loopByKey1($.objects,D,v):P?this._loopByKey0($.predicates,P,v):this._loop($.objects,v))}getGraphs(v,b,S){const T=[];return this.forGraphs(E=>{T.push(E)},v,b,S),T}forGraphs(v,b,S,T){for(const E in this._graphs)this.some(O=>(v(O.graph),!0),b,S,T,E)}createBlankNode(v){let b,S;if(v)for(b=v=`_:${v}`,S=1;this._ids[b];)b=v+S++;else do{b="_:b"+this._blankNodeIndex++}while(this._ids[b]);return this._ids[b]=++this._id,this._entities[this._id]=b,this._factory.blankNode(b.substr(2))}extractLists({remove:v=!1,ignoreErrors:b=!1}={}){const S={},T=b?()=>!0:($,D)=>{throw new Error(`${$.value} ${D}`)},E=this.getQuads(null,F.default.rdf.rest,F.default.rdf.nil,null),O=v?[...E]:[];return E.forEach($=>{const D=[];let Z,x,P=!1;const W=$.graph;let ne=$.subject;for(;ne&&!P;){const ue=this.getQuads(null,null,ne,null),se=this.getQuads(ne,null,null,null);let te,Re=null,be=null,re=null;for(let ve=0;ve<se.length&&!P;ve++)te=se[ve],te.graph.equals(W)?Z?P=T(ne,"has non-list arcs out"):te.predicate.value===F.default.rdf.first?Re?P=T(ne,"has multiple rdf:first arcs"):O.push(Re=te):te.predicate.value===F.default.rdf.rest?be?P=T(ne,"has multiple rdf:rest arcs"):O.push(be=te):ue.length?P=T(ne,"can't be subject and object"):(Z=te,x="subject"):P=T(ne,"not confined to single graph");for(let ve=0;ve<ue.length&&!P;++ve)te=ue[ve],Z?P=T(ne,"can't have coreferences"):te.predicate.value===F.default.rdf.rest?re?P=T(ne,"has incoming rdf:rest arcs"):re=te:(Z=te,x="object");Re?D.unshift(Re.object):P=T(ne,"has no list head"),ne=re&&re.subject}P?v=!1:Z&&(S[Z[x].value]=D)}),v&&this.removeQuads(O),S}*[Symbol.iterator](){yield*this.readQuads()}}function R(y){return"string"==typeof y||y instanceof String}pe.default=C;class M extends U.Readable{constructor(v,b,S,T,E){super({objectMode:!0}),Object.assign(this,{n3Store:v,subject:b,predicate:S,object:T,graph:E})}get filtered(){if(!this._filtered){const{n3Store:v,graph:b,object:S,predicate:T,subject:E}=this,O=v.getQuads(E,T,S,b);this._filtered=new C(O,{factory:v._factory})}return this._filtered}get size(){return this.filtered.size}_read(){for(const v of this)this.push(v);this.push(null)}add(v){return this.filtered.add(v)}delete(v){return this.filtered.delete(v)}has(v){return this.filtered.has(v)}match(v,b,S,T){return new M(this.filtered,v,b,S,T)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}},{"./IRIs":34,"./N3DataFactory":35,"readable-stream":81}],39:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var B,X=(B=Q("./N3Parser"))&&B.__esModule?B:{default:B},U=Q("readable-stream");pe.default=class extends U.Transform{constructor(w){let R,M;super({decodeStrings:!0}),this._readableState.objectMode=!0,new X.default(w).parse({on:(y,v)=>{switch(y){case"data":R=v;break;case"end":M=v}}},(y,v)=>{y&&this.emit("error",y)||v&&this.push(v)},(y,v)=>{this.emit("prefix",y,v)}),this._transform=(y,v,b)=>{R(y),b()},this._flush=y=>{M(),y()}}import(w){return w.on("data",C=>{this.write(C)}),w.on("end",()=>{this.end()}),w.on("error",C=>{this.emit("error",C)}),this}}},{"./N3Parser":37,"readable-stream":81}],40:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var B,X=Q("readable-stream"),U=(B=Q("./N3Writer"))&&B.__esModule?B:{default:B};pe.default=class extends X.Transform{constructor(w){super({encoding:"utf8",writableObjectMode:!0});const C=this._writer=new U.default({write:(R,M,y)=>{this.push(R),y&&y()},end:R=>{this.push(null),R&&R()}},w);this._transform=(R,M,y)=>{C.addQuad(R,y)},this._flush=R=>{C.end(R)}}import(w){return w.on("data",C=>{this.write(C)}),w.on("end",()=>{this.end()}),w.on("error",C=>{this.emit("error",C)}),w.on("prefix",(C,R)=>{this._writer.addPrefix(C,R)}),this}}},{"./N3Writer":42,"readable-stream":81}],41:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.inDefaultGraph=function(v){return C(v.graph)},pe.isBlankNode=function(v){return!!v&&"BlankNode"===v.termType},pe.isDefaultGraph=C,pe.isLiteral=function(v){return!!v&&"Literal"===v.termType},pe.isNamedNode=function(v){return!!v&&"NamedNode"===v.termType},pe.isVariable=function(v){return!!v&&"Variable"===v.termType},pe.prefix=function(v,b){return y({"":v.value||v},b)("")},pe.prefixes=y;var v,X=(v=Q("./N3DataFactory"))&&v.__esModule?v:{default:v};function C(v){return!!v&&"DefaultGraph"===v.termType}function y(v,b){const S=Object.create(null);for(const E in v)T(E,v[E]);function T(E,O){if("string"==typeof O){const $=Object.create(null);S[E]=D=>$[D]||($[D]=b.namedNode(O+D))}else if(!(E in S))throw new Error(`Unknown prefix: ${E}`);return S[E]}return b=b||X.default,T}},{"./N3DataFactory":35}],42:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var $,X=($=Q("./IRIs"))&&$.__esModule?$:{default:$},U=function($,D){if(!D&&$&&$.__esModule)return $;if(null===$||"object"!=typeof $&&"function"!=typeof $)return{default:$};var P=Y(D);if(P&&P.has($))return P.get($);var Z={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in $)if("default"!==W&&Object.prototype.hasOwnProperty.call($,W)){var ne=x?Object.getOwnPropertyDescriptor($,W):null;ne&&(ne.get||ne.set)?Object.defineProperty(Z,W,ne):Z[W]=$[W]}return Z.default=$,P&&P.set($,Z),Z}(Q("./N3DataFactory")),F=Q("./N3Util");function Y($){if("function"!=typeof WeakMap)return null;var D=new WeakMap,P=new WeakMap;return(Y=function(Z){return Z?P:D})($)}const C=U.default.defaultGraph(),{rdf:R,xsd:M}=X.default,y=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,v=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,b={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class S extends U.Term{equals(){return!1}}function E($){let D=b[$];return void 0===D&&(1===$.length?(D=$.charCodeAt(0).toString(16),D="\\u0000".substr(0,6-D.length)+D):(D=(1024*($.charCodeAt(0)-55296)+$.charCodeAt(1)+9216).toString(16),D="\\U00000000".substr(0,10-D.length)+D)),D}function O($){return $.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}pe.default=class{constructor(D,P){if(this._prefixRegex=/$0^/,D&&"function"!=typeof D.write&&(P=D,D=null),this._lists=(P=P||{}).lists,D)this._outputStream=D,this._endStream=void 0===P.end||!!P.end;else{let Z="";this._outputStream={write(x,W,ne){Z+=x,ne&&ne()},end:x=>{x&&x(null,Z)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(P.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=C,this._prefixIRIs=Object.create(null),P.prefixes&&this.addPrefixes(P.prefixes),P.baseIRI&&(this._baseMatcher=new RegExp(`^${O(P.baseIRI)}${P.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=P.baseIRI.length))}get _inDefaultGraph(){return C.equals(this._graph)}_write(D,P){this._outputStream.write(D,"utf8",P)}_writeQuad(D,P,Z,x,W){try{x.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(C.equals(x)?"":`${this._encodeIriOrBlank(x)} {\n`)),this._graph=x,this._subject=null),D.equals(this._subject)?P.equals(this._predicate)?this._write(`, ${this._encodeObject(Z)}`,W):this._write(`;\n    ${this._encodePredicate(this._predicate=P)} ${this._encodeObject(Z)}`,W):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=D)} ${this._encodePredicate(this._predicate=P)} ${this._encodeObject(Z)}`,W)}catch(ne){W&&W(ne)}}_writeQuadLine(D,P,Z,x,W){delete this._prefixMatch,this._write(this.quadToString(D,P,Z,x),W)}quadToString(D,P,Z,x){return`${this._encodeSubject(D)} ${this._encodeIriOrBlank(P)} ${this._encodeObject(Z)}${x&&x.value?` ${this._encodeIriOrBlank(x)} .\n`:" .\n"}`}quadsToString(D){return D.map(P=>this.quadToString(P.subject,P.predicate,P.object,P.graph)).join("")}_encodeSubject(D){return"Quad"===D.termType?this._encodeQuad(D):this._encodeIriOrBlank(D)}_encodeIriOrBlank(D){if("NamedNode"!==D.termType)return this._lists&&D.value in this._lists&&(D=this.list(this._lists[D.value])),"id"in D?D.id:`_:${D.value}`;let P=D.value;this._baseMatcher&&this._baseMatcher.test(P)&&(P=P.substr(this._baseLength)),y.test(P)&&(P=P.replace(v,E));const Z=this._prefixRegex.exec(P);return Z?Z[1]?this._prefixIRIs[Z[1]]+Z[2]:P:`<${P}>`}_encodeLiteral(D){let P=D.value;if(y.test(P)&&(P=P.replace(v,E)),D.language)return`"${P}"@${D.language}`;if(this._lineMode){if(D.datatype.value===M.string)return`"${P}"`}else switch(D.datatype.value){case M.string:return`"${P}"`;case M.boolean:if("true"===P||"false"===P)return P;break;case M.integer:if(/^[+-]?\d+$/.test(P))return P;break;case M.decimal:if(/^[+-]?\d*\.\d+$/.test(P))return P;break;case M.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(P))return P}return`"${P}"^^${this._encodeIriOrBlank(D.datatype)}`}_encodePredicate(D){return D.value===R.type?"a":this._encodeIriOrBlank(D)}_encodeObject(D){switch(D.termType){case"Quad":return this._encodeQuad(D);case"Literal":return this._encodeLiteral(D);default:return this._encodeIriOrBlank(D)}}_encodeQuad({subject:D,predicate:P,object:Z,graph:x}){return`<<${this._encodeSubject(D)} ${this._encodePredicate(P)} ${this._encodeObject(Z)}${(0,F.isDefaultGraph)(x)?"":` ${this._encodeIriOrBlank(x)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(D,P,Z,x,W){void 0===Z?this._writeQuad(D.subject,D.predicate,D.object,D.graph,P):"function"==typeof x?this._writeQuad(D,P,Z,C,x):this._writeQuad(D,P,Z,x||C,W)}addQuads(D){for(let P=0;P<D.length;P++)this.addQuad(D[P])}addPrefix(D,P,Z){const x={};x[D]=P,this.addPrefixes(x,Z)}addPrefixes(D,P){if(!this._prefixIRIs)return P&&P();let Z=!1;for(let x in D){let W=D[x];"string"!=typeof W&&(W=W.value),Z=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[W]=x+=":",this._write(`@prefix ${x} <${W}>.\n`)}if(Z){let x="",W="";for(const ne in this._prefixIRIs)x+=x?`|${ne}`:ne,W+=(W?"|":"")+this._prefixIRIs[ne];x=O(x),this._prefixRegex=new RegExp(`^(?:${W})[^/]*$|^(${x})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(Z?"\n":"",P)}blank(D,P){let x,W,Z=D;switch(void 0===D?Z=[]:D.termType?Z=[{predicate:D,object:P}]:"length"in D||(Z=[D]),W=Z.length){case 0:return new S("[]");case 1:if(x=Z[0],!(x.object instanceof S))return new S(`[ ${this._encodePredicate(x.predicate)} ${this._encodeObject(x.object)} ]`);default:let ne="[";for(let ue=0;ue<W;ue++)x=Z[ue],x.predicate.equals(D)?ne+=`, ${this._encodeObject(x.object)}`:(ne+=`${(ue?";\n  ":"\n  ")+this._encodePredicate(x.predicate)} ${this._encodeObject(x.object)}`,D=x.predicate);return new S(`${ne}\n]`)}}list(D){const P=D&&D.length||0,Z=new Array(P);for(let x=0;x<P;x++)Z[x]=this._encodeObject(D[x]);return new S(`(${Z.join(" ")})`)}end(D){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let P=D&&((Z,x)=>{P=null,D(Z,x)});if(this._endStream)try{return this._outputStream.end(P)}catch(Z){}P&&P()}}},{"./IRIs":34,"./N3DataFactory":35,"./N3Util":41}],43:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),Object.defineProperty(pe,"BlankNode",{enumerable:!0,get:function(){return R.BlankNode}}),Object.defineProperty(pe,"DataFactory",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(pe,"DefaultGraph",{enumerable:!0,get:function(){return R.DefaultGraph}}),Object.defineProperty(pe,"Lexer",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(pe,"Literal",{enumerable:!0,get:function(){return R.Literal}}),Object.defineProperty(pe,"NamedNode",{enumerable:!0,get:function(){return R.NamedNode}}),Object.defineProperty(pe,"Parser",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(pe,"Quad",{enumerable:!0,get:function(){return R.Quad}}),Object.defineProperty(pe,"Store",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(pe,"StreamParser",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(pe,"StreamWriter",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(pe,"Term",{enumerable:!0,get:function(){return R.Term}}),Object.defineProperty(pe,"Triple",{enumerable:!0,get:function(){return R.Triple}}),pe.Util=void 0,Object.defineProperty(pe,"Variable",{enumerable:!0,get:function(){return R.Variable}}),Object.defineProperty(pe,"Writer",{enumerable:!0,get:function(){return F.default}}),pe.default=void 0,Object.defineProperty(pe,"termFromId",{enumerable:!0,get:function(){return R.termFromId}}),Object.defineProperty(pe,"termToId",{enumerable:!0,get:function(){return R.termToId}});var X=v(Q("./N3Lexer")),U=v(Q("./N3Parser")),F=v(Q("./N3Writer")),Y=v(Q("./N3Store")),B=v(Q("./N3StreamParser")),w=v(Q("./N3StreamWriter")),C=y(Q("./N3Util"));pe.Util=C;var R=y(Q("./N3DataFactory"));function M(S){if("function"!=typeof WeakMap)return null;var T=new WeakMap,E=new WeakMap;return(M=function(O){return O?E:T})(S)}function y(S,T){if(!T&&S&&S.__esModule)return S;if(null===S||"object"!=typeof S&&"function"!=typeof S)return{default:S};var E=M(T);if(E&&E.has(S))return E.get(S);var O={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in S)if("default"!==D&&Object.prototype.hasOwnProperty.call(S,D)){var P=$?Object.getOwnPropertyDescriptor(S,D):null;P&&(P.get||P.set)?Object.defineProperty(O,D,P):O[D]=S[D]}return O.default=S,E&&E.set(S,O),O}function v(S){return S&&S.__esModule?S:{default:S}}pe.default={Lexer:X.default,Parser:U.default,Writer:F.default,Store:Y.default,StreamParser:B.default,StreamWriter:w.default,Util:C,DataFactory:R.default,Term:R.Term,NamedNode:R.NamedNode,Literal:R.Literal,BlankNode:R.BlankNode,Variable:R.Variable,DefaultGraph:R.DefaultGraph,Quad:R.Quad,Triple:R.Triple,termFromId:R.termFromId,termToId:R.termToId}},{"./N3DataFactory":35,"./N3Lexer":36,"./N3Parser":37,"./N3Store":38,"./N3StreamParser":39,"./N3StreamWriter":40,"./N3Util":41,"./N3Writer":42}],44:[function(Q,Ee,pe){var U,F,X=Ee.exports={};function Y(){throw new Error("setTimeout has not been defined")}function B(){throw new Error("clearTimeout has not been defined")}function w(O){if(U===setTimeout)return setTimeout(O,0);if((U===Y||!U)&&setTimeout)return U=setTimeout,setTimeout(O,0);try{return U(O,0)}catch($){try{return U.call(null,O,0)}catch(D){return U.call(this,O,0)}}}!function(){try{U="function"==typeof setTimeout?setTimeout:Y}catch(O){U=Y}try{F="function"==typeof clearTimeout?clearTimeout:B}catch(O){F=B}}();var y,R=[],M=!1,v=-1;function b(){!M||!y||(M=!1,y.length?R=y.concat(R):v=-1,R.length&&S())}function S(){if(!M){var O=w(b);M=!0;for(var $=R.length;$;){for(y=R,R=[];++v<$;)y&&y[v].run();v=-1,$=R.length}y=null,M=!1,function(O){if(F===clearTimeout)return clearTimeout(O);if((F===B||!F)&&clearTimeout)return F=clearTimeout,clearTimeout(O);try{F(O)}catch($){try{return F.call(null,O)}catch(D){return F.call(this,O)}}}(O)}}function T(O,$){this.fun=O,this.array=$}function E(){}X.nextTick=function(O){var $=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)$[D-1]=arguments[D];R.push(new T(O,$)),1===R.length&&!M&&w(S)},T.prototype.run=function(){this.fun.apply(null,this.array)},X.title="browser",X.browser=!0,X.env={},X.argv=[],X.version="",X.versions={},X.on=E,X.addListener=E,X.once=E,X.off=E,X.removeListener=E,X.removeAllListeners=E,X.emit=E,X.prependListener=E,X.prependOnceListener=E,X.listeners=function(O){return[]},X.binding=function(O){throw new Error("process.binding is not supported")},X.cwd=function(){return"/"},X.chdir=function(O){throw new Error("process.chdir is not supported")},X.umask=function(){return 0}},{}],45:[function(Q,Ee,pe){(function(X){(function(){let U;Ee.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:X):F=>(U||(U=Promise.resolve())).then(F).catch(Y=>setTimeout(()=>{throw Y},0))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(Q,Ee,pe){Ee.exports=Q("./lib")},{"./lib":55}],47:[function(Q,Ee,pe){"use strict";Ee.exports=class kq{constructor(U,F=new Map,Y=0){this.prefix=U,this._existing=F,this.counter=Y}clone(){const{prefix:U,_existing:F,counter:Y}=this;return new kq(U,new Map(F),Y)}getId(U){const F=U&&this._existing.get(U);if(F)return F;const Y=this.prefix+this.counter;return this.counter++,U&&this._existing.set(U,Y),Y}hasId(U){return this._existing.has(U)}getOldIds(){return[...this._existing.keys()]}}},{}],48:[function(Q,Ee,pe){"use strict";Q("setimmediate");const X=self.crypto||self.msCrypto;Ee.exports=class{constructor(F){if(!X||!X.subtle)throw new Error("crypto.subtle not found.");if("sha256"===F)this.algorithm={name:"SHA-256"};else{if("sha1"!==F)throw new Error(`Unsupport algorithm "${F}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(F){this._content+=F}digest(){var F=this;return lt(function*(){const Y=(new TextEncoder).encode(F._content),B=new Uint8Array(yield X.subtle.digest(F.algorithm,Y));let w="";for(let C=0;C<B.length;++C)w+=B[C].toString(16).padStart(2,"0");return w})()}}},{setimmediate:86}],49:[function(Q,Ee,pe){"use strict";const F="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",Y="http://www.w3.org/2001/XMLSchema#string",B="NamedNode",w="BlankNode",C="Literal",R="DefaultGraph",M={};function y(E,O){return E.subject.termType===O.subject.termType&&E.object.termType===O.object.termType&&E.subject.value===O.subject.value&&E.predicate.value===O.predicate.value&&E.object.value===O.object.value&&(E.object.termType!==C||E.object.datatype.termType===O.object.datatype.termType&&E.object.language===O.object.language&&E.object.datatype.value===O.object.datatype.value)}M.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,M.empty=new RegExp("^[ \\t]*$"),M.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),Ee.exports=class rk{static parse(O){const $=[],D={},P=O.split(M.eoln);let Z=0;for(const x of P){if(Z++,M.empty.test(x))continue;const W=x.match(M.quad);if(null===W)throw new Error("N-Quads parse error on line "+Z+".");const ne={subject:null,predicate:null,object:null,graph:null};if(ne.subject=void 0!==W[1]?{termType:B,value:W[1]}:{termType:w,value:W[2]},ne.predicate={termType:B,value:W[3]},void 0!==W[4]?ne.object={termType:B,value:W[4]}:void 0!==W[5]?ne.object={termType:w,value:W[5]}:(ne.object={termType:C,value:void 0,datatype:{termType:B}},void 0!==W[7]?ne.object.datatype.value=W[7]:void 0!==W[8]?(ne.object.datatype.value=F,ne.object.language=W[8]):ne.object.datatype.value=Y,ne.object.value=W[6].replace(S,function(O,$,D,P){if($)switch($){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(D)return String.fromCharCode(parseInt(D,16));if(P)throw new Error("Unsupported U escape")})),ne.graph=void 0!==W[9]?{termType:B,value:W[9]}:void 0!==W[10]?{termType:w,value:W[10]}:{termType:R,value:""},ne.graph.value in D){let ue=!0;const se=D[ne.graph.value];for(const te of se)if(y(te,ne)){ue=!1;break}ue&&(se.push(ne),$.push(ne))}else D[ne.graph.value]=[ne],$.push(ne)}return $}static serialize(O){Array.isArray(O)||(O=rk.legacyDatasetToQuads(O));const $=[];for(const D of O)$.push(rk.serializeQuad(D));return $.sort().join("")}static serializeQuad(O){const $=O.subject,P=O.object,Z=O.graph;let x="";return x+=$.termType===B?`<${$.value}>`:`${$.value}`,x+=` <${O.predicate.value}> `,P.termType===B?x+=`<${P.value}>`:P.termType===w?x+=P.value:(x+=`"${E=P.value,E.replace(v,function(O){switch(O){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,P.datatype.value===F?P.language&&(x+=`@${P.language}`):P.datatype.value!==Y&&(x+=`^^<${P.datatype.value}>`)),Z.termType===B?x+=` <${Z.value}>`:Z.termType===w&&(x+=` ${Z.value}`),x+=" .\n",x;var E}static legacyDatasetToQuads(O){const $=[],D={"blank node":w,IRI:B,literal:C};for(const P in O)O[P].forEach(x=>{const W={};for(const ne in x){const ue=x[ne],se={termType:D[ue.type],value:ue.value};se.termType===C&&(se.datatype={termType:B},"datatype"in ue&&(se.datatype.value=ue.datatype),"language"in ue?("datatype"in ue||(se.datatype.value=F),se.language=ue.language):"datatype"in ue||(se.datatype.value=Y)),W[ne]=se}W.graph="@default"===P?{termType:R,value:""}:{termType:P.startsWith("_:")?w:B,value:P},$.push(W)});return $}};const v=/["\\\n\r]/g;const S=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],50:[function(Q,Ee,pe){"use strict";Ee.exports=class{constructor(U){this.current=U.sort(),this.done=!1,this.dir=new Map;for(let F=0;F<U.length;++F)this.dir.set(U[F],!0)}hasNext(){return!this.done}next(){const{current:U,dir:F}=this,Y=U.slice();let B=null,w=0;const C=U.length;for(let R=0;R<C;++R){const M=U[R],y=F.get(M);(null===B||M>B)&&(y&&R>0&&M>U[R-1]||!y&&R<C-1&&M>U[R+1])&&(B=M,w=R)}if(null===B)this.done=!0;else{const R=F.get(B)?w-1:w+1;U[w]=U[R],U[R]=B;for(const M of U)M>B&&F.set(M,!F.get(M))}return Y}}},{}],51:[function(Q,Ee,pe){(function(X){(function(){"use strict";const U=Q("./IdentifierIssuer"),F=Q("./MessageDigest"),Y=Q("./Permuter"),B=Q("./NQuads");function w(C,R){return C.hash<R.hash?-1:C.hash>R.hash?1:0}Ee.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new U("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(R){var M=this;return lt(function*(){M.quads=R;for(const O of R)M._addBlankNodeQuadInfo({quad:O,component:O.subject}),M._addBlankNodeQuadInfo({quad:O,component:O.object}),M._addBlankNodeQuadInfo({quad:O,component:O.graph});const y=new Map,v=[...M.blankNodeInfo.keys()];let b=0;for(const O of v)++b%100==0&&(yield M._yield()),yield M._hashAndTrackBlankNode({id:O,hashToBlankNodes:y});const S=[...y.keys()].sort(),T=[];for(const O of S){const $=y.get(O);$.length>1?T.push($):M.canonicalIssuer.getId($[0])}for(const O of T){const $=[];for(const D of O){if(M.canonicalIssuer.hasId(D))continue;const P=new U("_:b");P.getId(D);const Z=yield M.hashNDegreeQuads(D,P);$.push(Z)}$.sort(w);for(const D of $){const P=D.issuer.getOldIds();for(const Z of P)M.canonicalIssuer.getId(Z)}}const E=[];for(const O of M.quads){const $=at({},O);$.subject=M._useCanonicalId({component:$.subject}),$.object=M._useCanonicalId({component:$.object}),$.graph=M._useCanonicalId({component:$.graph}),E.push(B.serializeQuad($))}return E.sort(),E.join("")})()}hashFirstDegreeQuads(R){var M=this;return lt(function*(){const y=[],v=M.blankNodeInfo.get(R),b=v.quads;for(const T of b){const E={subject:null,predicate:T.predicate,object:null,graph:null};E.subject=M.modifyFirstDegreeComponent(R,T.subject,"subject"),E.object=M.modifyFirstDegreeComponent(R,T.object,"object"),E.graph=M.modifyFirstDegreeComponent(R,T.graph,"graph"),y.push(B.serializeQuad(E))}y.sort();const S=new F(M.hashAlgorithm);for(const T of y)S.update(T);return v.hash=yield S.digest(),v.hash})()}hashRelatedBlankNode(R,M,y,v){var b=this;return lt(function*(){let S;S=b.canonicalIssuer.hasId(R)?b.canonicalIssuer.getId(R):y.hasId(R)?y.getId(R):b.blankNodeInfo.get(R).hash;const T=new F(b.hashAlgorithm);return T.update(v),"g"!==v&&T.update(b.getRelatedPredicate(M)),T.update(S),T.digest()})()}hashNDegreeQuads(R,M){var y=this;return lt(function*(){const v=new F(y.hashAlgorithm),b=yield y.createHashToRelated(R,M),S=[...b.keys()].sort();for(const T of S){v.update(T);let O,E="";const $=new Y(b.get(T));let D=0;for(;$.hasNext();){const P=$.next();++D%3==0&&(yield y._yield());let Z=M.clone(),x="";const W=[];let ne=!1;for(const ue of P)if(y.canonicalIssuer.hasId(ue)?x+=y.canonicalIssuer.getId(ue):(Z.hasId(ue)||W.push(ue),x+=Z.getId(ue)),0!==E.length&&x>E){ne=!0;break}if(!ne){for(const ue of W){const se=yield y.hashNDegreeQuads(ue,Z);if(x+=Z.getId(ue),x+=`<${se.hash}>`,Z=se.issuer,0!==E.length&&x>E){ne=!0;break}}ne||(0===E.length||x<E)&&(E=x,O=Z)}}v.update(E),M=O}return{hash:yield v.digest(),issuer:M}})()}modifyFirstDegreeComponent(R,M){return"BlankNode"!==M.termType?M:{termType:"BlankNode",value:M.value===R?"_:a":"_:z"}}getRelatedPredicate(R){return`<${R.predicate.value}>`}createHashToRelated(R,M){var y=this;return lt(function*(){const v=new Map,b=y.blankNodeInfo.get(R).quads;let S=0;for(const T of b)++S%100==0&&(yield y._yield()),yield Promise.all([y._addRelatedBlankNodeHash({quad:T,component:T.subject,position:"s",id:R,issuer:M,hashToRelated:v}),y._addRelatedBlankNodeHash({quad:T,component:T.object,position:"o",id:R,issuer:M,hashToRelated:v}),y._addRelatedBlankNodeHash({quad:T,component:T.graph,position:"g",id:R,issuer:M,hashToRelated:v})]);return v})()}_hashAndTrackBlankNode({id:R,hashToBlankNodes:M}){var y=this;return lt(function*(){const v=yield y.hashFirstDegreeQuads(R),b=M.get(v);b?b.push(R):M.set(v,[R])})()}_addBlankNodeQuadInfo({quad:R,component:M}){if("BlankNode"!==M.termType)return;const y=M.value,v=this.blankNodeInfo.get(y);v?v.quads.add(R):this.blankNodeInfo.set(y,{quads:new Set([R]),hash:null})}_addRelatedBlankNodeHash({quad:R,component:M,position:y,id:v,issuer:b,hashToRelated:S}){var T=this;return lt(function*(){if("BlankNode"!==M.termType||M.value===v)return;const E=M.value,O=yield T.hashRelatedBlankNode(E,R,b,y),$=S.get(O);$?$.push(E):S.set(O,[E])})()}_useCanonicalId({component:R}){return"BlankNode"!==R.termType||R.value.startsWith(this.canonicalIssuer.prefix)?R:{termType:"BlankNode",value:this.canonicalIssuer.getId(R.value)}}_yield(){return lt(function*(){return new Promise(R=>X(R))})()}}}).call(this)}).call(this,Q("timers").setImmediate)},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50,timers:89}],52:[function(Q,Ee,pe){"use strict";const X=Q("./IdentifierIssuer"),U=Q("./MessageDigest"),F=Q("./Permuter"),Y=Q("./NQuads");function B(w,C){return w.hash<C.hash?-1:w.hash>C.hash?1:0}Ee.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new X("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(C){this.quads=C;for(const S of C)this._addBlankNodeQuadInfo({quad:S,component:S.subject}),this._addBlankNodeQuadInfo({quad:S,component:S.object}),this._addBlankNodeQuadInfo({quad:S,component:S.graph});const R=new Map,M=[...this.blankNodeInfo.keys()];for(const S of M)this._hashAndTrackBlankNode({id:S,hashToBlankNodes:R});const y=[...R.keys()].sort(),v=[];for(const S of y){const T=R.get(S);T.length>1?v.push(T):this.canonicalIssuer.getId(T[0])}for(const S of v){const T=[];for(const E of S){if(this.canonicalIssuer.hasId(E))continue;const O=new X("_:b");O.getId(E);const $=this.hashNDegreeQuads(E,O);T.push($)}T.sort(B);for(const E of T){const O=E.issuer.getOldIds();for(const $ of O)this.canonicalIssuer.getId($)}}const b=[];for(const S of this.quads){const T=at({},S);T.subject=this._useCanonicalId({component:T.subject}),T.object=this._useCanonicalId({component:T.object}),T.graph=this._useCanonicalId({component:T.graph}),b.push(Y.serializeQuad(T))}return b.sort(),b.join("")}hashFirstDegreeQuads(C){const R=[],M=this.blankNodeInfo.get(C),y=M.quads;for(const b of y){const S={subject:null,predicate:b.predicate,object:null,graph:null};S.subject=this.modifyFirstDegreeComponent(C,b.subject,"subject"),S.object=this.modifyFirstDegreeComponent(C,b.object,"object"),S.graph=this.modifyFirstDegreeComponent(C,b.graph,"graph"),R.push(Y.serializeQuad(S))}R.sort();const v=new U(this.hashAlgorithm);for(const b of R)v.update(b);return M.hash=v.digest(),M.hash}hashRelatedBlankNode(C,R,M,y){let v;v=this.canonicalIssuer.hasId(C)?this.canonicalIssuer.getId(C):M.hasId(C)?M.getId(C):this.blankNodeInfo.get(C).hash;const b=new U(this.hashAlgorithm);return b.update(y),"g"!==y&&b.update(this.getRelatedPredicate(R)),b.update(v),b.digest()}hashNDegreeQuads(C,R){const M=new U(this.hashAlgorithm),y=this.createHashToRelated(C,R),v=[...y.keys()].sort();for(const b of v){M.update(b);let T,S="";const E=new F(y.get(b));for(;E.hasNext();){const O=E.next();let $=R.clone(),D="";const P=[];let Z=!1;for(const x of O)if(this.canonicalIssuer.hasId(x)?D+=this.canonicalIssuer.getId(x):($.hasId(x)||P.push(x),D+=$.getId(x)),0!==S.length&&D>S){Z=!0;break}if(!Z){for(const x of P){const W=this.hashNDegreeQuads(x,$);if(D+=$.getId(x),D+=`<${W.hash}>`,$=W.issuer,0!==S.length&&D>S){Z=!0;break}}Z||(0===S.length||D<S)&&(S=D,T=$)}}M.update(S),R=T}return{hash:M.digest(),issuer:R}}modifyFirstDegreeComponent(C,R){return"BlankNode"!==R.termType?R:{termType:"BlankNode",value:R.value===C?"_:a":"_:z"}}getRelatedPredicate(C){return`<${C.predicate.value}>`}createHashToRelated(C,R){const M=new Map,y=this.blankNodeInfo.get(C).quads;for(const v of y)this._addRelatedBlankNodeHash({quad:v,component:v.subject,position:"s",id:C,issuer:R,hashToRelated:M}),this._addRelatedBlankNodeHash({quad:v,component:v.object,position:"o",id:C,issuer:R,hashToRelated:M}),this._addRelatedBlankNodeHash({quad:v,component:v.graph,position:"g",id:C,issuer:R,hashToRelated:M});return M}_hashAndTrackBlankNode({id:C,hashToBlankNodes:R}){const M=this.hashFirstDegreeQuads(C),y=R.get(M);y?y.push(C):R.set(M,[C])}_addBlankNodeQuadInfo({quad:C,component:R}){if("BlankNode"!==R.termType)return;const M=R.value,y=this.blankNodeInfo.get(M);y?y.quads.add(C):this.blankNodeInfo.set(M,{quads:new Set([C]),hash:null})}_addRelatedBlankNodeHash({quad:C,component:R,position:M,id:y,issuer:v,hashToRelated:b}){if("BlankNode"!==R.termType||R.value===y)return;const S=R.value,T=this.hashRelatedBlankNode(S,C,v,M),E=b.get(T);E?E.push(S):b.set(T,[S])}_useCanonicalId({component:C}){return"BlankNode"!==C.termType||C.value.startsWith(this.canonicalIssuer.prefix)?C:{termType:"BlankNode",value:this.canonicalIssuer.getId(C.value)}}}},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50}],53:[function(Q,Ee,pe){"use strict";const X=Q("./URDNA2015");Ee.exports=class extends X{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(F,Y,B){return"BlankNode"!==Y.termType?Y:"graph"===B?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:Y.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,Y){var B=this;return lt(function*(){const w=new Map,C=B.blankNodeInfo.get(F).quads;let R=0;for(const M of C){let y,v;if("BlankNode"===M.subject.termType&&M.subject.value!==F)v=M.subject.value,y="p";else{if("BlankNode"!==M.object.termType||M.object.value===F)continue;v=M.object.value,y="r"}++R%100==0&&(yield B._yield());const b=yield B.hashRelatedBlankNode(v,M,Y,y),S=w.get(b);S?S.push(v):w.set(b,[v])}return w})()}}},{"./URDNA2015":51}],54:[function(Q,Ee,pe){"use strict";const X=Q("./URDNA2015Sync");Ee.exports=class extends X{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(F,Y,B){return"BlankNode"!==Y.termType?Y:"graph"===B?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:Y.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,Y){const B=new Map,w=this.blankNodeInfo.get(F).quads;for(const C of w){let R,M;if("BlankNode"===C.subject.termType&&C.subject.value!==F)M=C.subject.value,R="p";else{if("BlankNode"!==C.object.termType||C.object.value===F)continue;M=C.object.value,R="r"}const y=this.hashRelatedBlankNode(M,C,Y,R),v=B.get(y);v?v.push(M):B.set(y,[M])}return B}}},{"./URDNA2015Sync":52}],55:[function(Q,Ee,pe){"use strict";const X=Q("./URDNA2015"),U=Q("./URGNA2012"),F=Q("./URDNA2015Sync"),Y=Q("./URGNA2012Sync");let B;try{B=Q("rdf-canonize-native")}catch(C){}const w={};Ee.exports=w,w.NQuads=Q("./NQuads"),w.IdentifierIssuer=Q("./IdentifierIssuer"),w._rdfCanonizeNative=function(C){return C&&(B=C),B},w.canonize=function(){var C=lt(function*(R,M){if(Array.isArray(R)||(R=w.NQuads.legacyDatasetToQuads(R)),M.useNative){if(!B)throw new Error("rdf-canonize-native not available");return new Promise((y,v)=>B.canonize(R,M,(b,S)=>b?v(b):y(S)))}if("URDNA2015"===M.algorithm)return new X(M).main(R);if("URGNA2012"===M.algorithm)return new U(M).main(R);throw"algorithm"in M?new Error("Invalid RDF Dataset Canonicalization algorithm: "+M.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(R,M){return C.apply(this,arguments)}}(),w._canonizeSync=function(C,R){if(Array.isArray(C)||(C=w.NQuads.legacyDatasetToQuads(C)),R.useNative){if(B)return B.canonizeSync(C,R);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===R.algorithm)return new F(R).main(C);if("URGNA2012"===R.algorithm)return new Y(R).main(C);throw"algorithm"in R?new Error("Invalid RDF Dataset Canonicalization algorithm: "+R.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":47,"./NQuads":49,"./URDNA2015":51,"./URDNA2015Sync":52,"./URGNA2012":53,"./URGNA2012Sync":54,"rdf-canonize-native":3}],56:[function(Q,Ee,pe){"use strict";var X=this&&this.__createBinding||(Object.create?function(F,Y,B,w){void 0===w&&(w=B),Object.defineProperty(F,w,{enumerable:!0,get:function(){return Y[B]}})}:function(F,Y,B,w){void 0===w&&(w=B),F[w]=Y[B]}),U=this&&this.__exportStar||function(F,Y){for(var B in F)"default"!==B&&!Object.prototype.hasOwnProperty.call(Y,B)&&X(Y,F,B)};Object.defineProperty(pe,"__esModule",{value:!0}),U(Q("./lib/BlankNode"),pe),U(Q("./lib/DataFactory"),pe),U(Q("./lib/DefaultGraph"),pe),U(Q("./lib/Literal"),pe),U(Q("./lib/NamedNode"),pe),U(Q("./lib/Quad"),pe),U(Q("./lib/Variable"),pe)},{"./lib/BlankNode":57,"./lib/DataFactory":58,"./lib/DefaultGraph":59,"./lib/Literal":60,"./lib/NamedNode":61,"./lib/Quad":62,"./lib/Variable":63}],57:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.BlankNode=void 0;pe.BlankNode=class{constructor(F){this.termType="BlankNode",this.value=F}equals(F){return!!F&&"BlankNode"===F.termType&&F.value===this.value}}},{}],58:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.DataFactory=void 0;const X=Q("./BlankNode"),U=Q("./DefaultGraph"),F=Q("./Literal"),Y=Q("./NamedNode"),B=Q("./Quad"),w=Q("./Variable");let C=0;pe.DataFactory=class{constructor(y){this.blankNodeCounter=0,this.blankNodePrefix=(y=y||{}).blankNodePrefix||`df_${C++}_`}namedNode(y){return new Y.NamedNode(y)}blankNode(y){return new X.BlankNode(y||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(y,v){return new F.Literal(y,v)}variable(y){return new w.Variable(y)}defaultGraph(){return U.DefaultGraph.INSTANCE}quad(y,v,b,S){return new B.Quad(y,v,b,S||this.defaultGraph())}fromTerm(y){switch(y.termType){case"NamedNode":return this.namedNode(y.value);case"BlankNode":return this.blankNode(y.value);case"Literal":return y.language?this.literal(y.value,y.language):y.datatype.equals(F.Literal.XSD_STRING)?this.literal(y.value):this.literal(y.value,this.fromTerm(y.datatype));case"Variable":return this.variable(y.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(y.subject),this.fromTerm(y.predicate),this.fromTerm(y.object),this.fromTerm(y.graph))}}fromQuad(y){return this.fromTerm(y)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},{"./BlankNode":57,"./DefaultGraph":59,"./Literal":60,"./NamedNode":61,"./Quad":62,"./Variable":63}],59:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.DefaultGraph=void 0;class X{constructor(){this.termType="DefaultGraph",this.value=""}equals(F){return!!F&&"DefaultGraph"===F.termType}}pe.DefaultGraph=X,X.INSTANCE=new X},{}],60:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.Literal=void 0;const X=Q("./NamedNode");class U{constructor(Y,B){this.termType="Literal",this.value=Y,"string"==typeof B?(this.language=B,this.datatype=U.RDF_LANGUAGE_STRING):B?(this.language="",this.datatype=B):(this.language="",this.datatype=U.XSD_STRING)}equals(Y){return!!Y&&"Literal"===Y.termType&&Y.value===this.value&&Y.language===this.language&&Y.datatype.equals(this.datatype)}}pe.Literal=U,U.RDF_LANGUAGE_STRING=new X.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),U.XSD_STRING=new X.NamedNode("http://www.w3.org/2001/XMLSchema#string")},{"./NamedNode":61}],61:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.NamedNode=void 0;pe.NamedNode=class{constructor(F){this.termType="NamedNode",this.value=F}equals(F){return!!F&&"NamedNode"===F.termType&&F.value===this.value}}},{}],62:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.Quad=void 0;pe.Quad=class{constructor(F,Y,B,w){this.termType="Quad",this.value="",this.subject=F,this.predicate=Y,this.object=B,this.graph=w}equals(F){return!!F&&("Quad"===F.termType||!F.termType)&&this.subject.equals(F.subject)&&this.predicate.equals(F.predicate)&&this.object.equals(F.object)&&this.graph.equals(F.graph)}}},{}],63:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.Variable=void 0;pe.Variable=class{constructor(F){this.termType="Variable",this.value=F}equals(F){return!!F&&"Variable"===F.termType&&F.value===this.value}}},{}],64:[function(Q,Ee,pe){"use strict";var X=this&&this.__createBinding||(Object.create?function(F,Y,B,w){void 0===w&&(w=B),Object.defineProperty(F,w,{enumerable:!0,get:function(){return Y[B]}})}:function(F,Y,B,w){void 0===w&&(w=B),F[w]=Y[B]}),U=this&&this.__exportStar||function(F,Y){for(var B in F)"default"!==B&&!Object.prototype.hasOwnProperty.call(Y,B)&&X(Y,F,B)};Object.defineProperty(pe,"__esModule",{value:!0}),U(Q("./lib/RdfXmlParser"),pe)},{"./lib/RdfXmlParser":66}],65:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.ParseError=void 0;class X extends Error{constructor(F,Y){const B=F.saxStream._parser;super(F.trackPosition?`Line ${B.line+1} column ${B.column+1}: ${Y}`:Y)}}pe.ParseError=X},{}],66:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.ParseType=pe.RdfXmlParser=void 0;const X=Q("relative-to-absolute-iri"),U=Q("sax"),F=Q("stream"),Y=Q("./ParseError"),B=Q("rdf-data-factory");class w extends F.Transform{constructor(M){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},M&&(Object.assign(this,M),this.options=M),this.dataFactory||(this.dataFactory=new B.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=U.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(M,y){const v={};let b=!1;for(const T in M.attributes)T.startsWith("xmlns")&&(5===T.length?(b=!0,v[""]=M.attributes[T]):":"===T.charAt(5)&&(b=!0,v[T.substr(6)]=M.attributes[T]));const S=y&&y.ns?y.ns:[w.DEFAULT_NS];return b?S.concat([v]):S}static expandPrefixedTerm(M,y,v){const b=M.indexOf(":");let S,T;b>=0?(S=M.substr(0,b),T=M.substr(b+1)):(S="",T=M);let E=null,O=null;for(let $=y.length-1;$>=0;$--){const D=y[$][S];if(D){E=D;break}O||(O=y[$][""])}if(!E){if(S&&"xmlns"!==S)throw new Y.ParseError(v,`The prefix '${S}' in term '${M}' was not bound.`);E=O||""}return{prefix:S,local:T,uri:E}}static isValidIri(M){return w.IRI_REGEX.test(M)}import(M){const y=new F.PassThrough({readableObjectMode:!0});M.on("error",b=>v.emit("error",b)),M.on("data",b=>y.push(b)),M.on("end",()=>y.push(null));const v=y.pipe(new w(this.options));return v}_transform(M,y,v){try{this.saxStream.write(M,y)}catch(b){return v(b)}v()}newParseError(M){return new Y.ParseError(this,M)}valueToUri(M,y){return this.uriToNamedNode(X.resolve(M,y.baseIRI))}uriToNamedNode(M){if(!w.isValidIri(M))throw this.newParseError(`Invalid URI: ${M}`);return this.dataFactory.namedNode(M)}validateNcname(M){if(!w.NCNAME_MATCHER.test(M))throw this.newParseError(`Not a valid NCName: ${M}`)}attachSaxListeners(){this.saxStream.on("error",M=>this.emit("error",M)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(M){const y=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let v=C.RESOURCE;if(y&&(y.hadChildren=!0,v=y.childrenParseType),y&&y.childrenStringTags){const S=M.name;let T="";for(const D in M.attributes)T+=` ${D}="${M.attributes[D]}"`;y.childrenStringTags.push(`<${S}${T}>`);const $={childrenStringTags:y.childrenStringTags};return $.childrenStringEmitClosingTag=`</${S}>`,void this.activeTagStack.push($)}const b={};y?(b.language=y.language,b.baseIRI=y.baseIRI):b.baseIRI=this.baseIRI,this.activeTagStack.push(b),b.ns=w.parseNamespace(M,y),v===C.RESOURCE?this.onTagResource(M,b,y,!y):this.onTagProperty(M,b,y)}onTagResource(M,y,v,b){const S=w.expandPrefixedTerm(M.name,y.ns,this);y.childrenParseType=C.PROPERTY;let T=!0;if(S.uri===w.RDF){if(!b&&w.FORBIDDEN_NODE_ELEMENTS.indexOf(S.local)>=0)throw this.newParseError(`Illegal node element name: ${S.local}`);switch(S.local){case"RDF":y.childrenParseType=C.RESOURCE;case"Description":T=!1}}const E=[],O=[];let $=null,D=!1,P=!1,Z=null;for(const x in M.attributes){const W=M.attributes[x],ne=w.expandPrefixedTerm(x,y.ns,this);if(v&&ne.uri===w.RDF)switch(ne.local){case"about":if($)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${W} and ${$} where found.`);$=W;continue;case"ID":if($)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${W} and ${$} where found.`);this.validateNcname(W),$="#"+W,D=!0;continue;case"nodeID":if($)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${W} and ${$} where found.`);this.validateNcname(W),$=W,P=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":Z=W;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(ne.uri===w.XML){if("lang"===ne.local){y.language=""===W?null:W.toLowerCase();continue}if("base"===ne.local){y.baseIRI=X.resolve(W,y.baseIRI);continue}}"xml"!==ne.prefix&&ne.uri&&(E.push(this.uriToNamedNode(ne.uri+ne.local)),O.push(W))}if(null!==$&&(y.subject=P?this.dataFactory.blankNode($):this.valueToUri($,y),D&&this.claimNodeId(y.subject)),y.subject||(y.subject=this.dataFactory.blankNode()),T){const x=this.uriToNamedNode(S.uri+S.local);this.emitTriple(y.subject,this.dataFactory.namedNode(w.RDF+"type"),x,v?v.reifiedStatementId:null)}if(v){if(v.predicate)if(v.childrenCollectionSubject){const x=this.dataFactory.blankNode();this.emitTriple(v.childrenCollectionSubject,v.childrenCollectionPredicate,x,v.reifiedStatementId),this.emitTriple(x,this.dataFactory.namedNode(w.RDF+"first"),y.subject,y.reifiedStatementId),v.childrenCollectionSubject=x,v.childrenCollectionPredicate=this.dataFactory.namedNode(w.RDF+"rest")}else{this.emitTriple(v.subject,v.predicate,y.subject,v.reifiedStatementId);for(let x=0;x<v.predicateSubPredicates.length;x++)this.emitTriple(y.subject,v.predicateSubPredicates[x],v.predicateSubObjects[x],null);v.predicateSubPredicates=[],v.predicateSubObjects=[],v.predicateEmitted=!0}for(let x=0;x<E.length;x++){const W=this.dataFactory.literal(O[x],y.datatype||y.language);this.emitTriple(y.subject,E[x],W,v.reifiedStatementId)}Z&&this.emitTriple(y.subject,this.dataFactory.namedNode(w.RDF+"type"),this.uriToNamedNode(Z),null)}}onTagProperty(M,y,v){const b=w.expandPrefixedTerm(M.name,y.ns,this);if(y.childrenParseType=C.RESOURCE,y.subject=v.subject,b.uri===w.RDF&&"li"===b.local?(v.listItemCounter||(v.listItemCounter=1),y.predicate=this.uriToNamedNode(b.uri+"_"+v.listItemCounter++)):y.predicate=this.uriToNamedNode(b.uri+b.local),b.uri===w.RDF&&w.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(b.local)>=0)throw this.newParseError(`Illegal property element name: ${b.local}`);y.predicateSubPredicates=[],y.predicateSubObjects=[];let S=!1,T=!1,E=null,O=!0;const $=[],D=[];for(const P in M.attributes){const Z=M.attributes[P],x=w.expandPrefixedTerm(P,y.ns,this);if(x.uri===w.RDF)switch(x.local){case"resource":if(E)throw this.newParseError(`Found both rdf:resource (${Z}) and rdf:nodeID (${E}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${Z})`);y.hadChildren=!0,E=Z,O=!1;continue;case"datatype":if(T)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${Z}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${Z})`);y.datatype=this.valueToUri(Z,y);continue;case"nodeID":if(T)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${Z}).`);if(y.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${Z}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${Z})`);this.validateNcname(Z),y.hadChildren=!0,E=Z,O=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(T)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(y.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${y.datatype.value})`);if(E)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${E})`);if("Resource"===Z){S=!0,y.childrenParseType=C.PROPERTY;const W=this.dataFactory.blankNode();this.emitTriple(y.subject,y.predicate,W,y.reifiedStatementId),y.subject=W,y.predicate=null}else"Collection"===Z?(S=!0,y.hadChildren=!0,y.childrenCollectionSubject=y.subject,y.childrenCollectionPredicate=y.predicate,O=!1):"Literal"===Z&&(S=!0,y.childrenTagsToString=!0,y.childrenStringTags=[]);continue;case"ID":this.validateNcname(Z),y.reifiedStatementId=this.valueToUri("#"+Z,y),this.claimNodeId(y.reifiedStatementId);continue}else if(x.uri===w.XML&&"lang"===x.local){y.language=""===Z?null:Z.toLowerCase();continue}if("xml"!==x.prefix&&"xmlns"!==x.prefix&&x.uri){if(S||y.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${Z}`);y.hadChildren=!0,T=!0,$.push(this.uriToNamedNode(x.uri+x.local)),D.push(this.dataFactory.literal(Z,y.datatype||y.language))}}if(null!==E){const P=y.subject;y.subject=O?this.dataFactory.blankNode(E):this.valueToUri(E,y),this.emitTriple(P,y.predicate,y.subject,y.reifiedStatementId);for(let Z=0;Z<$.length;Z++)this.emitTriple(y.subject,$[Z],D[Z],null);y.predicateEmitted=!0}else O&&(y.predicateSubPredicates=$,y.predicateSubObjects=D,y.predicateEmitted=!1)}emitTriple(M,y,v,b){this.push(this.dataFactory.quad(M,y,v,this.defaultGraph)),b&&(this.push(this.dataFactory.quad(b,this.dataFactory.namedNode(w.RDF+"type"),this.dataFactory.namedNode(w.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(b,this.dataFactory.namedNode(w.RDF+"subject"),M,this.defaultGraph)),this.push(this.dataFactory.quad(b,this.dataFactory.namedNode(w.RDF+"predicate"),y,this.defaultGraph)),this.push(this.dataFactory.quad(b,this.dataFactory.namedNode(w.RDF+"object"),v,this.defaultGraph)))}claimNodeId(M){if(!this.allowDuplicateRdfIds){if(this.nodeIds[M.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${M.value}'.`);this.nodeIds[M.value]=!0}}onText(M){const y=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;y&&(y.childrenStringTags?y.childrenStringTags.push(M):y.predicate&&(y.text=M))}onCloseTag(){const M=this.activeTagStack.pop();if(M.childrenStringEmitClosingTag&&M.childrenStringTags.push(M.childrenStringEmitClosingTag),M.childrenTagsToString&&(M.datatype=this.dataFactory.namedNode(w.RDF+"XMLLiteral"),M.text=M.childrenStringTags.join(""),M.hadChildren=!1),M.childrenCollectionSubject)this.emitTriple(M.childrenCollectionSubject,M.childrenCollectionPredicate,this.dataFactory.namedNode(w.RDF+"nil"),M.reifiedStatementId);else if(M.predicate)if(M.hadChildren||M.childrenParseType===C.PROPERTY){if(!M.predicateEmitted){const y=this.dataFactory.blankNode();this.emitTriple(M.subject,M.predicate,y,M.reifiedStatementId);for(let v=0;v<M.predicateSubPredicates.length;v++)this.emitTriple(y,M.predicateSubPredicates[v],M.predicateSubObjects[v],null)}}else this.emitTriple(M.subject,M.predicate,this.dataFactory.literal(M.text||"",M.datatype||M.language),M.reifiedStatementId)}onDoctype(M){M.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(y,v,b)=>(this.saxStream._parser.ENTITIES[v]=b,""))}}var C,R;pe.RdfXmlParser=w,w.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,w.MIME_TYPE="application/rdf+xml",w.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",w.XML="http://www.w3.org/XML/1998/namespace",w.XMLNS="http://www.w3.org/2000/xmlns/",w.DEFAULT_NS={xml:w.XML},w.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],w.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],w.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(R=C=pe.ParseType||(pe.ParseType={}))[R.RESOURCE=0]="RESOURCE",R[R.PROPERTY=1]="PROPERTY"},{"./ParseError":65,"rdf-data-factory":56,"relative-to-absolute-iri":82,sax:85,stream:87}],67:[function(Q,Ee,pe){"use strict";var U={};function F(R,M,y){y||(y=Error);var b=function(S){function T(E,O,$){return S.call(this,function(S,T,E){return"string"==typeof M?M:M(S,T,E)}(E,O,$))||this}return function(R,M){R.prototype=Object.create(M.prototype),R.prototype.constructor=R,R.__proto__=M}(T,S),T}(y);b.prototype.name=y.name,b.prototype.code=R,U[R]=b}function Y(R,M){if(Array.isArray(R)){var y=R.length;return R=R.map(function(v){return String(v)}),y>2?"one of ".concat(M," ").concat(R.slice(0,y-1).join(", "),", or ")+R[y-1]:2===y?"one of ".concat(M," ").concat(R[0]," or ").concat(R[1]):"of ".concat(M," ").concat(R[0])}return"of ".concat(M," ").concat(String(R))}F("ERR_INVALID_OPT_VALUE",function(R,M){return'The value "'+M+'" is invalid for option "'+R+'"'},TypeError),F("ERR_INVALID_ARG_TYPE",function(R,M,y){var v,b;if("string"==typeof M&&function(R,M,y){return R.substr(!y||y<0?0:+y,M.length)===M}(M,"not ")?(v="must not be",M=M.replace(/^not /,"")):v="must be",function(R,M,y){return(void 0===y||y>R.length)&&(y=R.length),R.substring(y-M.length,y)===M}(R," argument"))b="The ".concat(R," ").concat(v," ").concat(Y(M,"type"));else{var S=function(R,M,y){return"number"!=typeof y&&(y=0),!(y+M.length>R.length)&&-1!==R.indexOf(M,y)}(R,".")?"property":"argument";b='The "'.concat(R,'" ').concat(S," ").concat(v," ").concat(Y(M,"type"))}return b+". Received type ".concat(typeof y)},TypeError),F("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),F("ERR_METHOD_NOT_IMPLEMENTED",function(R){return"The "+R+" method is not implemented"}),F("ERR_STREAM_PREMATURE_CLOSE","Premature close"),F("ERR_STREAM_DESTROYED",function(R){return"Cannot call "+R+" after a stream was destroyed"}),F("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),F("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),F("ERR_STREAM_WRITE_AFTER_END","write after end"),F("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),F("ERR_UNKNOWN_ENCODING",function(R){return"Unknown encoding: "+R},TypeError),F("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ee.exports.codes=U},{}],68:[function(Q,Ee,pe){(function(X){(function(){"use strict";var U=Object.keys||function(v){var b=[];for(var S in v)b.push(S);return b};Ee.exports=R;var F=Q("./_stream_readable"),Y=Q("./_stream_writable");Q("inherits")(R,F);for(var B=U(Y.prototype),w=0;w<B.length;w++){var C=B[w];R.prototype[C]||(R.prototype[C]=Y.prototype[C])}function R(v){if(!(this instanceof R))return new R(v);F.call(this,v),Y.call(this,v),this.allowHalfOpen=!0,v&&(!1===v.readable&&(this.readable=!1),!1===v.writable&&(this.writable=!1),!1===v.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",M)))}function M(){this._writableState.ended||X.nextTick(y,this)}function y(v){v.end()}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=b,this._writableState.destroyed=b)}})}).call(this)}).call(this,Q("_process"))},{"./_stream_readable":70,"./_stream_writable":72,_process:44,inherits:10}],69:[function(Q,Ee,pe){"use strict";Ee.exports=U;var X=Q("./_stream_transform");function U(F){if(!(this instanceof U))return new U(F);X.call(this,F)}Q("inherits")(U,X),U.prototype._transform=function(F,Y,B){B(null,F)}},{"./_stream_transform":71,inherits:10}],70:[function(Q,Ee,pe){(function(X,U){(function(){"use strict";var F;Ee.exports=re,re.ReadableState=be,Q("events");var B=function(z,L){return z.listeners(L).length},w=Q("./internal/streams/stream"),C=Q("buffer").Buffer,R=U.Uint8Array||function(){};var b,v=Q("util");b=v&&v.debuglog?v.debuglog("stream"):function(){};var W,ne,ue,S=Q("./internal/streams/buffer_list"),T=Q("./internal/streams/destroy"),O=Q("./internal/streams/state").getHighWaterMark,$=Q("../errors").codes,D=$.ERR_INVALID_ARG_TYPE,P=$.ERR_STREAM_PUSH_AFTER_EOF,Z=$.ERR_METHOD_NOT_IMPLEMENTED,x=$.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Q("inherits")(re,w);var se=T.errorOrDestroy,te=["error","close","destroy","pause","resume"];function be(Ae,z,L){F=F||Q("./_stream_duplex"),"boolean"!=typeof L&&(L=z instanceof F),this.objectMode=!!(Ae=Ae||{}).objectMode,L&&(this.objectMode=this.objectMode||!!Ae.readableObjectMode),this.highWaterMark=O(this,Ae,"readableHighWaterMark",L),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Ae.emitClose,this.autoDestroy=!!Ae.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ae.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ae.encoding&&(W||(W=Q("string_decoder/").StringDecoder),this.decoder=new W(Ae.encoding),this.encoding=Ae.encoding)}function re(Ae){if(F=F||Q("./_stream_duplex"),!(this instanceof re))return new re(Ae);this._readableState=new be(Ae,this,this instanceof F),this.readable=!0,Ae&&("function"==typeof Ae.read&&(this._read=Ae.read),"function"==typeof Ae.destroy&&(this._destroy=Ae.destroy)),w.call(this)}function ve(Ae,z,L,H,Le){b("readableAddChunk",z);var At,it=Ae._readableState;if(null===z)it.reading=!1,function(Ae,z){if(b("onEofChunk"),!z.ended){if(z.decoder){var L=z.decoder.end();L&&L.length&&(z.buffer.push(L),z.length+=z.objectMode?1:L.length)}z.ended=!0,z.sync?Me(Ae):(z.needReadable=!1,z.emittedReadable||(z.emittedReadable=!0,Ce(Ae)))}}(Ae,it);else if(Le||(At=function(Ae,z){var L;return!function(Ae){return C.isBuffer(Ae)||Ae instanceof R}(z)&&"string"!=typeof z&&void 0!==z&&!Ae.objectMode&&(L=new D("chunk",["string","Buffer","Uint8Array"],z)),L}(it,z)),At)se(Ae,At);else if(it.objectMode||z&&z.length>0)if("string"!=typeof z&&!it.objectMode&&Object.getPrototypeOf(z)!==C.prototype&&(z=function(Ae){return C.from(Ae)}(z)),H)it.endEmitted?se(Ae,new x):Fe(Ae,it,z,!0);else if(it.ended)se(Ae,new P);else{if(it.destroyed)return!1;it.reading=!1,it.decoder&&!L?(z=it.decoder.write(z),it.objectMode||0!==z.length?Fe(Ae,it,z,!1):$e(Ae,it)):Fe(Ae,it,z,!1)}else H||(it.reading=!1,$e(Ae,it));return!it.ended&&(it.length<it.highWaterMark||0===it.length)}function Fe(Ae,z,L,H){z.flowing&&0===z.length&&!z.sync?(z.awaitDrain=0,Ae.emit("data",L)):(z.length+=z.objectMode?1:L.length,H?z.buffer.unshift(L):z.buffer.push(L),z.needReadable&&Me(Ae)),$e(Ae,z)}Object.defineProperty(re.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(z){!this._readableState||(this._readableState.destroyed=z)}}),re.prototype.destroy=T.destroy,re.prototype._undestroy=T.undestroy,re.prototype._destroy=function(Ae,z){z(Ae)},re.prototype.push=function(Ae,z){var H,L=this._readableState;return L.objectMode?H=!0:"string"==typeof Ae&&((z=z||L.defaultEncoding)!==L.encoding&&(Ae=C.from(Ae,z),z=""),H=!0),ve(this,Ae,z,!1,H)},re.prototype.unshift=function(Ae){return ve(this,Ae,null,!0,!1)},re.prototype.isPaused=function(){return!1===this._readableState.flowing},re.prototype.setEncoding=function(Ae){W||(W=Q("string_decoder/").StringDecoder);var z=new W(Ae);this._readableState.decoder=z,this._readableState.encoding=this._readableState.decoder.encoding;for(var L=this._readableState.buffer.head,H="";null!==L;)H+=z.write(L.data),L=L.next;return this._readableState.buffer.clear(),""!==H&&this._readableState.buffer.push(H),this._readableState.length=H.length,this};var Ge=1073741824;function le(Ae,z){return Ae<=0||0===z.length&&z.ended?0:z.objectMode?1:Ae!=Ae?z.flowing&&z.length?z.buffer.head.data.length:z.length:(Ae>z.highWaterMark&&(z.highWaterMark=function(Ae){return Ae>=Ge?Ae=Ge:(Ae--,Ae|=Ae>>>1,Ae|=Ae>>>2,Ae|=Ae>>>4,Ae|=Ae>>>8,Ae|=Ae>>>16,Ae++),Ae}(Ae)),Ae<=z.length?Ae:z.ended?z.length:(z.needReadable=!0,0))}function Me(Ae){var z=Ae._readableState;b("emitReadable",z.needReadable,z.emittedReadable),z.needReadable=!1,z.emittedReadable||(b("emitReadable",z.flowing),z.emittedReadable=!0,X.nextTick(Ce,Ae))}function Ce(Ae){var z=Ae._readableState;b("emitReadable_",z.destroyed,z.length,z.ended),!z.destroyed&&(z.length||z.ended)&&(Ae.emit("readable"),z.emittedReadable=!1),z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark,ge(Ae)}function $e(Ae,z){z.readingMore||(z.readingMore=!0,X.nextTick(Se,Ae,z))}function Se(Ae,z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&0===z.length);){var L=z.length;if(b("maybeReadMore read 0"),Ae.read(0),L===z.length)break}z.readingMore=!1}function Ke(Ae){var z=Ae._readableState;z.readableListening=Ae.listenerCount("readable")>0,z.resumeScheduled&&!z.paused?z.flowing=!0:Ae.listenerCount("data")>0&&Ae.resume()}function Ve(Ae){b("readable nexttick read 0"),Ae.read(0)}function q(Ae,z){b("resume",z.reading),z.reading||Ae.read(0),z.resumeScheduled=!1,Ae.emit("resume"),ge(Ae),z.flowing&&!z.reading&&Ae.read(0)}function ge(Ae){var z=Ae._readableState;for(b("flow",z.flowing);z.flowing&&null!==Ae.read(););}function ce(Ae,z){return 0===z.length?null:(z.objectMode?L=z.buffer.shift():!Ae||Ae>=z.length?(L=z.decoder?z.buffer.join(""):1===z.buffer.length?z.buffer.first():z.buffer.concat(z.length),z.buffer.clear()):L=z.buffer.consume(Ae,z.decoder),L);var L}function Ye(Ae){var z=Ae._readableState;b("endReadable",z.endEmitted),z.endEmitted||(z.ended=!0,X.nextTick(_t,z,Ae))}function _t(Ae,z){if(b("endReadableNT",Ae.endEmitted,Ae.length),!Ae.endEmitted&&0===Ae.length&&(Ae.endEmitted=!0,z.readable=!1,z.emit("end"),Ae.autoDestroy)){var L=z._writableState;(!L||L.autoDestroy&&L.finished)&&z.destroy()}}function gt(Ae,z){for(var L=0,H=Ae.length;L<H;L++)if(Ae[L]===z)return L;return-1}re.prototype.read=function(Ae){b("read",Ae),Ae=parseInt(Ae,10);var z=this._readableState,L=Ae;if(0!==Ae&&(z.emittedReadable=!1),0===Ae&&z.needReadable&&((0!==z.highWaterMark?z.length>=z.highWaterMark:z.length>0)||z.ended))return b("read: emitReadable",z.length,z.ended),0===z.length&&z.ended?Ye(this):Me(this),null;if(0===(Ae=le(Ae,z))&&z.ended)return 0===z.length&&Ye(this),null;var Le,H=z.needReadable;return b("need readable",H),(0===z.length||z.length-Ae<z.highWaterMark)&&b("length less than watermark",H=!0),z.ended||z.reading?b("reading or ended",H=!1):H&&(b("do read"),z.reading=!0,z.sync=!0,0===z.length&&(z.needReadable=!0),this._read(z.highWaterMark),z.sync=!1,z.reading||(Ae=le(L,z))),null===(Le=Ae>0?ce(Ae,z):null)?(z.needReadable=z.length<=z.highWaterMark,Ae=0):(z.length-=Ae,z.awaitDrain=0),0===z.length&&(z.ended||(z.needReadable=!0),L!==Ae&&z.ended&&Ye(this)),null!==Le&&this.emit("data",Le),Le},re.prototype._read=function(Ae){se(this,new Z("_read()"))},re.prototype.pipe=function(Ae,z){var L=this,H=this._readableState;switch(H.pipesCount){case 0:H.pipes=Ae;break;case 1:H.pipes=[H.pipes,Ae];break;default:H.pipes.push(Ae)}H.pipesCount+=1,b("pipe count=%d opts=%j",H.pipesCount,z);var it=z&&!1===z.end||Ae===X.stdout||Ae===X.stderr?fs:kt;function At(Bs,Kr){b("onunpipe"),Bs===L&&Kr&&!1===Kr.hasUnpiped&&(Kr.hasUnpiped=!0,b("cleanup"),Ae.removeListener("close",Xr),Ae.removeListener("finish",Ls),Ae.removeListener("drain",In),Ae.removeListener("error",xi),Ae.removeListener("unpipe",At),L.removeListener("end",kt),L.removeListener("end",fs),L.removeListener("data",Mi),Pn=!0,H.awaitDrain&&(!Ae._writableState||Ae._writableState.needDrain)&&In())}function kt(){b("onend"),Ae.end()}H.endEmitted?X.nextTick(it):L.once("end",it),Ae.on("unpipe",At);var In=function(Ae){return function(){var L=Ae._readableState;b("pipeOnDrain",L.awaitDrain),L.awaitDrain&&L.awaitDrain--,0===L.awaitDrain&&B(Ae,"data")&&(L.flowing=!0,ge(Ae))}}(L);Ae.on("drain",In);var Pn=!1;function Mi(Bs){b("ondata");var Kr=Ae.write(Bs);b("dest.write",Kr),!1===Kr&&((1===H.pipesCount&&H.pipes===Ae||H.pipesCount>1&&-1!==gt(H.pipes,Ae))&&!Pn&&(b("false write response, pause",H.awaitDrain),H.awaitDrain++),L.pause())}function xi(Bs){b("onerror",Bs),fs(),Ae.removeListener("error",xi),0===B(Ae,"error")&&se(Ae,Bs)}function Xr(){Ae.removeListener("finish",Ls),fs()}function Ls(){b("onfinish"),Ae.removeListener("close",Xr),fs()}function fs(){b("unpipe"),L.unpipe(Ae)}return L.on("data",Mi),function(Ae,z,L){if("function"==typeof Ae.prependListener)return Ae.prependListener(z,L);Ae._events&&Ae._events[z]?Array.isArray(Ae._events[z])?Ae._events[z].unshift(L):Ae._events[z]=[L,Ae._events[z]]:Ae.on(z,L)}(Ae,"error",xi),Ae.once("close",Xr),Ae.once("finish",Ls),Ae.emit("pipe",L),H.flowing||(b("pipe resume"),L.resume()),Ae},re.prototype.unpipe=function(Ae){var z=this._readableState,L={hasUnpiped:!1};if(0===z.pipesCount)return this;if(1===z.pipesCount)return Ae&&Ae!==z.pipes||(Ae||(Ae=z.pipes),z.pipes=null,z.pipesCount=0,z.flowing=!1,Ae&&Ae.emit("unpipe",this,L)),this;if(!Ae){var H=z.pipes,Le=z.pipesCount;z.pipes=null,z.pipesCount=0,z.flowing=!1;for(var it=0;it<Le;it++)H[it].emit("unpipe",this,{hasUnpiped:!1});return this}var At=gt(z.pipes,Ae);return-1===At||(z.pipes.splice(At,1),z.pipesCount-=1,1===z.pipesCount&&(z.pipes=z.pipes[0]),Ae.emit("unpipe",this,L)),this},re.prototype.addListener=re.prototype.on=function(Ae,z){var L=w.prototype.on.call(this,Ae,z),H=this._readableState;return"data"===Ae?(H.readableListening=this.listenerCount("readable")>0,!1!==H.flowing&&this.resume()):"readable"===Ae&&!H.endEmitted&&!H.readableListening&&(H.readableListening=H.needReadable=!0,H.flowing=!1,H.emittedReadable=!1,b("on readable",H.length,H.reading),H.length?Me(this):H.reading||X.nextTick(Ve,this)),L},re.prototype.removeListener=function(Ae,z){var L=w.prototype.removeListener.call(this,Ae,z);return"readable"===Ae&&X.nextTick(Ke,this),L},re.prototype.removeAllListeners=function(Ae){var z=w.prototype.removeAllListeners.apply(this,arguments);return("readable"===Ae||void 0===Ae)&&X.nextTick(Ke,this),z},re.prototype.resume=function(){var Ae=this._readableState;return Ae.flowing||(b("resume"),Ae.flowing=!Ae.readableListening,function(Ae,z){z.resumeScheduled||(z.resumeScheduled=!0,X.nextTick(q,Ae,z))}(this,Ae)),Ae.paused=!1,this},re.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},re.prototype.wrap=function(Ae){var z=this,L=this._readableState,H=!1;for(var Le in Ae.on("end",function(){if(b("wrapped end"),L.decoder&&!L.ended){var At=L.decoder.end();At&&At.length&&z.push(At)}z.push(null)}),Ae.on("data",function(At){b("wrapped data"),L.decoder&&(At=L.decoder.write(At)),L.objectMode&&null==At||!(L.objectMode||At&&At.length)||z.push(At)||(H=!0,Ae.pause())}),Ae)void 0===this[Le]&&"function"==typeof Ae[Le]&&(this[Le]=function(kt){return function(){return Ae[kt].apply(Ae,arguments)}}(Le));for(var it=0;it<te.length;it++)Ae.on(te[it],this.emit.bind(this,te[it]));return this._read=function(At){b("wrapped _read",At),H&&(H=!1,Ae.resume())},this},"function"==typeof Symbol&&(re.prototype[Symbol.asyncIterator]=function(){return void 0===ne&&(ne=Q("./internal/streams/async_iterator")),ne(this)}),Object.defineProperty(re.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(re.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(re.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(z){this._readableState&&(this._readableState.flowing=z)}}),re._fromList=ce,Object.defineProperty(re.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(re.from=function(Ae,z){return void 0===ue&&(ue=Q("./internal/streams/from")),ue(re,Ae,z)})}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/async_iterator":73,"./internal/streams/buffer_list":74,"./internal/streams/destroy":75,"./internal/streams/from":77,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,events:8,inherits:10,"string_decoder/":88,util:3}],71:[function(Q,Ee,pe){"use strict";Ee.exports=R;var X=Q("../errors").codes,U=X.ERR_METHOD_NOT_IMPLEMENTED,F=X.ERR_MULTIPLE_CALLBACK,Y=X.ERR_TRANSFORM_ALREADY_TRANSFORMING,B=X.ERR_TRANSFORM_WITH_LENGTH_0,w=Q("./_stream_duplex");function C(v,b){var S=this._transformState;S.transforming=!1;var T=S.writecb;if(null===T)return this.emit("error",new F);S.writechunk=null,S.writecb=null,null!=b&&this.push(b),T(v);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function R(v){if(!(this instanceof R))return new R(v);w.call(this,v),this._transformState={afterTransform:C.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",M)}function M(){var v=this;"function"!=typeof this._flush||this._readableState.destroyed?y(this,null,null):this._flush(function(b,S){y(v,b,S)})}function y(v,b,S){if(b)return v.emit("error",b);if(null!=S&&v.push(S),v._writableState.length)throw new B;if(v._transformState.transforming)throw new Y;return v.push(null)}Q("inherits")(R,w),R.prototype.push=function(v,b){return this._transformState.needTransform=!1,w.prototype.push.call(this,v,b)},R.prototype._transform=function(v,b,S){S(new U("_transform()"))},R.prototype._write=function(v,b,S){var T=this._transformState;if(T.writecb=S,T.writechunk=v,T.writeencoding=b,!T.transforming){var E=this._readableState;(T.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},R.prototype._read=function(v){var b=this._transformState;null===b.writechunk||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},R.prototype._destroy=function(v,b){w.prototype._destroy.call(this,v,function(S){b(S)})}},{"../errors":67,"./_stream_duplex":68,inherits:10}],72:[function(Q,Ee,pe){(function(X,U){(function(){"use strict";function Y(ge){var ce=this;this.next=null,this.entry=null,this.finish=function(){!function(ge,ce,Ye){var _t=ge.entry;for(ge.entry=null;_t;){var gt=_t.callback;ce.pendingcb--,gt(Ye),_t=_t.next}ce.corkedRequestsFree.next=ge}(ce,ge)}}var B;Ee.exports=be,be.WritableState=te;var w={deprecate:Q("util-deprecate")},C=Q("./internal/streams/stream"),R=Q("buffer").Buffer,M=U.Uint8Array||function(){};var Re,b=Q("./internal/streams/destroy"),T=Q("./internal/streams/state").getHighWaterMark,E=Q("../errors").codes,O=E.ERR_INVALID_ARG_TYPE,$=E.ERR_METHOD_NOT_IMPLEMENTED,D=E.ERR_MULTIPLE_CALLBACK,P=E.ERR_STREAM_CANNOT_PIPE,Z=E.ERR_STREAM_DESTROYED,x=E.ERR_STREAM_NULL_VALUES,W=E.ERR_STREAM_WRITE_AFTER_END,ne=E.ERR_UNKNOWN_ENCODING,ue=b.errorOrDestroy;function se(){}function te(ge,ce,Ye){B=B||Q("./_stream_duplex"),"boolean"!=typeof Ye&&(Ye=ce instanceof B),this.objectMode=!!(ge=ge||{}).objectMode,Ye&&(this.objectMode=this.objectMode||!!ge.writableObjectMode),this.highWaterMark=T(this,ge,"writableHighWaterMark",Ye),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===ge.decodeStrings),this.defaultEncoding=ge.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(gt){!function(ge,ce){var Ye=ge._writableState,_t=Ye.sync,gt=Ye.writecb;if("function"!=typeof gt)throw new D;if(function(ge){ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0}(Ye),ce)!function(ge,ce,Ye,_t,gt){--ce.pendingcb,Ye?(X.nextTick(gt,_t),X.nextTick(Ve,ge,ce),ge._writableState.errorEmitted=!0,ue(ge,_t)):(gt(_t),ge._writableState.errorEmitted=!0,ue(ge,_t),Ve(ge,ce))}(ge,Ye,_t,ce,gt);else{var Ae=Se(Ye)||ge.destroyed;!Ae&&!Ye.corked&&!Ye.bufferProcessing&&Ye.bufferedRequest&&$e(ge,Ye),_t?X.nextTick(Me,ge,Ye,Ae,gt):Me(ge,Ye,Ae,gt)}}(ce,gt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==ge.emitClose,this.autoDestroy=!!ge.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Y(this)}function be(ge){var ce=this instanceof(B=B||Q("./_stream_duplex"));if(!ce&&!Re.call(be,this))return new be(ge);this._writableState=new te(ge,this,ce),this.writable=!0,ge&&("function"==typeof ge.write&&(this._write=ge.write),"function"==typeof ge.writev&&(this._writev=ge.writev),"function"==typeof ge.destroy&&(this._destroy=ge.destroy),"function"==typeof ge.final&&(this._final=ge.final)),C.call(this)}function Ze(ge,ce,Ye,_t,gt,Ae){if(!Ye){var z=function(ge,ce,Ye){return!ge.objectMode&&!1!==ge.decodeStrings&&"string"==typeof ce&&(ce=R.from(ce,Ye)),ce}(ce,_t,gt);_t!==z&&(Ye=!0,gt="buffer",_t=z)}var L=ce.objectMode?1:_t.length;ce.length+=L;var H=ce.length<ce.highWaterMark;if(H||(ce.needDrain=!0),ce.writing||ce.corked){var Le=ce.lastBufferedRequest;ce.lastBufferedRequest={chunk:_t,encoding:gt,isBuf:Ye,callback:Ae,next:null},Le?Le.next=ce.lastBufferedRequest:ce.bufferedRequest=ce.lastBufferedRequest,ce.bufferedRequestCount+=1}else Ge(ge,ce,!1,L,_t,gt,Ae);return H}function Ge(ge,ce,Ye,_t,gt,Ae,z){ce.writelen=_t,ce.writecb=z,ce.writing=!0,ce.sync=!0,ce.destroyed?ce.onwrite(new Z("write")):Ye?ge._writev(gt,ce.onwrite):ge._write(gt,Ae,ce.onwrite),ce.sync=!1}function Me(ge,ce,Ye,_t){Ye||function(ge,ce){0===ce.length&&ce.needDrain&&(ce.needDrain=!1,ge.emit("drain"))}(ge,ce),ce.pendingcb--,_t(),Ve(ge,ce)}function $e(ge,ce){ce.bufferProcessing=!0;var Ye=ce.bufferedRequest;if(ge._writev&&Ye&&Ye.next){var gt=new Array(ce.bufferedRequestCount),Ae=ce.corkedRequestsFree;Ae.entry=Ye;for(var z=0,L=!0;Ye;)gt[z]=Ye,Ye.isBuf||(L=!1),Ye=Ye.next,z+=1;gt.allBuffers=L,Ge(ge,ce,!0,ce.length,gt,"",Ae.finish),ce.pendingcb++,ce.lastBufferedRequest=null,Ae.next?(ce.corkedRequestsFree=Ae.next,Ae.next=null):ce.corkedRequestsFree=new Y(ce),ce.bufferedRequestCount=0}else{for(;Ye;){var H=Ye.chunk;if(Ge(ge,ce,!1,ce.objectMode?1:H.length,H,Ye.encoding,Ye.callback),Ye=Ye.next,ce.bufferedRequestCount--,ce.writing)break}null===Ye&&(ce.lastBufferedRequest=null)}ce.bufferedRequest=Ye,ce.bufferProcessing=!1}function Se(ge){return ge.ending&&0===ge.length&&null===ge.bufferedRequest&&!ge.finished&&!ge.writing}function ze(ge,ce){ge._final(function(Ye){ce.pendingcb--,Ye&&ue(ge,Ye),ce.prefinished=!0,ge.emit("prefinish"),Ve(ge,ce)})}function Ve(ge,ce){var Ye=Se(ce);if(Ye&&(function(ge,ce){!ce.prefinished&&!ce.finalCalled&&("function"!=typeof ge._final||ce.destroyed?(ce.prefinished=!0,ge.emit("prefinish")):(ce.pendingcb++,ce.finalCalled=!0,X.nextTick(ze,ge,ce)))}(ge,ce),0===ce.pendingcb&&(ce.finished=!0,ge.emit("finish"),ce.autoDestroy))){var _t=ge._readableState;(!_t||_t.autoDestroy&&_t.endEmitted)&&ge.destroy()}return Ye}Q("inherits")(be,C),te.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,Ye=[];ce;)Ye.push(ce),ce=ce.next;return Ye},function(){try{Object.defineProperty(te.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(ge){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Re=Function.prototype[Symbol.hasInstance],Object.defineProperty(be,Symbol.hasInstance,{value:function(ce){return!!Re.call(this,ce)||this===be&&ce&&ce._writableState instanceof te}})):Re=function(ce){return ce instanceof this},be.prototype.pipe=function(){ue(this,new P)},be.prototype.write=function(ge,ce,Ye){var _t=this._writableState,gt=!1,Ae=!_t.objectMode&&function(ge){return R.isBuffer(ge)||ge instanceof M}(ge);return Ae&&!R.isBuffer(ge)&&(ge=function(ge){return R.from(ge)}(ge)),"function"==typeof ce&&(Ye=ce,ce=null),Ae?ce="buffer":ce||(ce=_t.defaultEncoding),"function"!=typeof Ye&&(Ye=se),_t.ending?function(ge,ce){var Ye=new W;ue(ge,Ye),X.nextTick(ce,Ye)}(this,Ye):(Ae||function(ge,ce,Ye,_t){var gt;return null===Ye?gt=new x:"string"!=typeof Ye&&!ce.objectMode&&(gt=new O("chunk",["string","Buffer"],Ye)),!gt||(ue(ge,gt),X.nextTick(_t,gt),!1)}(this,_t,ge,Ye))&&(_t.pendingcb++,gt=Ze(this,_t,Ae,ge,ce,Ye)),gt},be.prototype.cork=function(){this._writableState.corked++},be.prototype.uncork=function(){var ge=this._writableState;ge.corked&&(ge.corked--,!ge.writing&&!ge.corked&&!ge.bufferProcessing&&ge.bufferedRequest&&$e(this,ge))},be.prototype.setDefaultEncoding=function(ce){if("string"==typeof ce&&(ce=ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())>-1))throw new ne(ce);return this._writableState.defaultEncoding=ce,this},Object.defineProperty(be.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(be.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),be.prototype._write=function(ge,ce,Ye){Ye(new $("_write()"))},be.prototype._writev=null,be.prototype.end=function(ge,ce,Ye){var _t=this._writableState;return"function"==typeof ge?(Ye=ge,ge=null,ce=null):"function"==typeof ce&&(Ye=ce,ce=null),null!=ge&&this.write(ge,ce),_t.corked&&(_t.corked=1,this.uncork()),_t.ending||function(ge,ce,Ye){ce.ending=!0,Ve(ge,ce),Ye&&(ce.finished?X.nextTick(Ye):ge.once("finish",Ye)),ce.ended=!0,ge.writable=!1}(this,_t,Ye),this},Object.defineProperty(be.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(be.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ce){!this._writableState||(this._writableState.destroyed=ce)}}),be.prototype.destroy=b.destroy,be.prototype._undestroy=b.undestroy,be.prototype._destroy=function(ge,ce){ce(ge)}}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/destroy":75,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,inherits:10,"util-deprecate":90}],73:[function(Q,Ee,pe){(function(X){(function(){"use strict";var U;function F(P,Z,x){return Z in P?Object.defineProperty(P,Z,{value:x,enumerable:!0,configurable:!0,writable:!0}):P[Z]=x,P}var Y=Q("./end-of-stream"),B=Symbol("lastResolve"),w=Symbol("lastReject"),C=Symbol("error"),R=Symbol("ended"),M=Symbol("lastPromise"),y=Symbol("handlePromise"),v=Symbol("stream");function b(P,Z){return{value:P,done:Z}}function S(P){var Z=P[B];if(null!==Z){var x=P[v].read();null!==x&&(P[M]=null,P[B]=null,P[w]=null,Z(b(x,!1)))}}function T(P){X.nextTick(S,P)}var O=Object.getPrototypeOf(function(){}),$=Object.setPrototypeOf((F(U={get stream(){return this[v]},next:function(){var Z=this,x=this[C];if(null!==x)return Promise.reject(x);if(this[R])return Promise.resolve(b(void 0,!0));if(this[v].destroyed)return new Promise(function(se,te){X.nextTick(function(){Z[C]?te(Z[C]):se(b(void 0,!0))})});var ne,W=this[M];if(W)ne=new Promise(function(P,Z){return function(x,W){P.then(function(){Z[R]?x(b(void 0,!0)):Z[y](x,W)},W)}}(W,this));else{var ue=this[v].read();if(null!==ue)return Promise.resolve(b(ue,!1));ne=new Promise(this[y])}return this[M]=ne,ne}},Symbol.asyncIterator,function(){return this}),F(U,"return",function(){var Z=this;return new Promise(function(x,W){Z[v].destroy(null,function(ne){ne?W(ne):x(b(void 0,!0))})})}),U),O);Ee.exports=function(Z){var x,W=Object.create($,(F(x={},v,{value:Z,writable:!0}),F(x,B,{value:null,writable:!0}),F(x,w,{value:null,writable:!0}),F(x,C,{value:null,writable:!0}),F(x,R,{value:Z._readableState.endEmitted,writable:!0}),F(x,y,{value:function(ue,se){var te=W[v].read();te?(W[M]=null,W[B]=null,W[w]=null,ue(b(te,!1))):(W[B]=ue,W[w]=se)},writable:!0}),x));return W[M]=null,Y(Z,function(ne){if(ne&&"ERR_STREAM_PREMATURE_CLOSE"!==ne.code){var ue=W[w];return null!==ue&&(W[M]=null,W[B]=null,W[w]=null,ue(ne)),void(W[C]=ne)}var se=W[B];null!==se&&(W[M]=null,W[B]=null,W[w]=null,se(b(void 0,!0))),W[R]=!0}),Z.on("readable",T.bind(null,W)),W}}).call(this)}).call(this,Q("_process"))},{"./end-of-stream":76,_process:44}],74:[function(Q,Ee,pe){"use strict";function X(S,T){var E=Object.keys(S);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(S);T&&(O=O.filter(function($){return Object.getOwnPropertyDescriptor(S,$).enumerable})),E.push.apply(E,O)}return E}function F(S,T,E){return T in S?Object.defineProperty(S,T,{value:E,enumerable:!0,configurable:!0,writable:!0}):S[T]=E,S}function B(S,T){for(var E=0;E<T.length;E++){var O=T[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}var R=Q("buffer").Buffer,y=Q("util").inspect,v=y&&y.custom||"inspect";function b(S,T,E){R.prototype.copy.call(S,T,E)}Ee.exports=function(){function S(){(function(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")})(this,S),this.head=null,this.tail=null,this.length=0}return function(S,T,E){T&&B(S.prototype,T),E&&B(S,E)}(S,[{key:"push",value:function(E){var O={data:E,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}},{key:"unshift",value:function(E){var O={data:E,next:this.head};0===this.length&&(this.tail=O),this.head=O,++this.length}},{key:"shift",value:function(){if(0!==this.length){var E=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,E}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(E){if(0===this.length)return"";for(var O=this.head,$=""+O.data;O=O.next;)$+=E+O.data;return $}},{key:"concat",value:function(E){if(0===this.length)return R.alloc(0);for(var O=R.allocUnsafe(E>>>0),$=this.head,D=0;$;)b($.data,O,D),D+=$.data.length,$=$.next;return O}},{key:"consume",value:function(E,O){var $;return E<this.head.data.length?($=this.head.data.slice(0,E),this.head.data=this.head.data.slice(E)):$=E===this.head.data.length?this.shift():O?this._getString(E):this._getBuffer(E),$}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(E){var O=this.head,$=1,D=O.data;for(E-=D.length;O=O.next;){var P=O.data,Z=E>P.length?P.length:E;if(D+=Z===P.length?P:P.slice(0,E),0==(E-=Z)){Z===P.length?(++$,this.head=O.next?O.next:this.tail=null):(this.head=O,O.data=P.slice(Z));break}++$}return this.length-=$,D}},{key:"_getBuffer",value:function(E){var O=R.allocUnsafe(E),$=this.head,D=1;for($.data.copy(O),E-=$.data.length;$=$.next;){var P=$.data,Z=E>P.length?P.length:E;if(P.copy(O,O.length-E,0,Z),0==(E-=Z)){Z===P.length?(++D,this.head=$.next?$.next:this.tail=null):(this.head=$,$.data=P.slice(Z));break}++D}return this.length-=D,O}},{key:v,value:function(E,O){return y(this,function(S){for(var T=1;T<arguments.length;T++){var E=null!=arguments[T]?arguments[T]:{};T%2?X(Object(E),!0).forEach(function(O){F(S,O,E[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(E)):X(Object(E)).forEach(function(O){Object.defineProperty(S,O,Object.getOwnPropertyDescriptor(E,O))})}return S}({},O,{depth:0,customInspect:!1}))}}]),S}()},{buffer:6,util:3}],75:[function(Q,Ee,pe){(function(X){(function(){"use strict";function F(R,M){w(R,M),Y(R)}function Y(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function w(R,M){R.emit("error",M)}Ee.exports={destroy:function(R,M){var y=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(M?M(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,X.nextTick(w,this,R)):X.nextTick(w,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(S){!M&&S?y._writableState?y._writableState.errorEmitted?X.nextTick(Y,y):(y._writableState.errorEmitted=!0,X.nextTick(F,y,S)):X.nextTick(F,y,S):M?(X.nextTick(Y,y),M(S)):X.nextTick(Y,y)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(R,M){var y=R._readableState,v=R._writableState;y&&y.autoDestroy||v&&v.autoDestroy?R.destroy(M):R.emit("error",M)}}}).call(this)}).call(this,Q("_process"))},{_process:44}],76:[function(Q,Ee,pe){"use strict";var X=Q("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function F(){}Ee.exports=function B(w,C,R){if("function"==typeof C)return B(w,null,C);C||(C={}),R=function(w){var C=!1;return function(){if(!C){C=!0;for(var R=arguments.length,M=new Array(R),y=0;y<R;y++)M[y]=arguments[y];w.apply(this,M)}}}(R||F);var M=C.readable||!1!==C.readable&&w.readable,y=C.writable||!1!==C.writable&&w.writable,v=function(){w.writable||S()},b=w._writableState&&w._writableState.finished,S=function(){y=!1,b=!0,M||R.call(w)},T=w._readableState&&w._readableState.endEmitted,E=function(){M=!1,T=!0,y||R.call(w)},O=function(Z){R.call(w,Z)},$=function(){var Z;return M&&!T?((!w._readableState||!w._readableState.ended)&&(Z=new X),R.call(w,Z)):y&&!b?((!w._writableState||!w._writableState.ended)&&(Z=new X),R.call(w,Z)):void 0},D=function(){w.req.on("finish",S)};return function(w){return w.setHeader&&"function"==typeof w.abort}(w)?(w.on("complete",S),w.on("abort",$),w.req?D():w.on("request",D)):y&&!w._writableState&&(w.on("end",v),w.on("close",v)),w.on("end",E),w.on("finish",S),!1!==C.error&&w.on("error",O),w.on("close",$),function(){w.removeListener("complete",S),w.removeListener("abort",$),w.removeListener("request",D),w.req&&w.req.removeListener("finish",S),w.removeListener("end",v),w.removeListener("close",v),w.removeListener("finish",S),w.removeListener("end",E),w.removeListener("error",O),w.removeListener("close",$)}}},{"../../../errors":67}],77:[function(Q,Ee,pe){Ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],78:[function(Q,Ee,pe){"use strict";var X;var F=Q("../../../errors").codes,Y=F.ERR_MISSING_ARGS,B=F.ERR_STREAM_DESTROYED;function w(S){if(S)throw S}function R(S,T,E,O){O=function(S){var T=!1;return function(){T||(T=!0,S.apply(void 0,arguments))}}(O);var $=!1;S.on("close",function(){$=!0}),void 0===X&&(X=Q("./end-of-stream")),X(S,{readable:T,writable:E},function(P){if(P)return O(P);$=!0,O()});var D=!1;return function(P){if(!$&&!D){if(D=!0,function(S){return S.setHeader&&"function"==typeof S.abort}(S))return S.abort();if("function"==typeof S.destroy)return S.destroy();O(P||new B("pipe"))}}}function M(S){S()}function y(S,T){return S.pipe(T)}function v(S){return S.length&&"function"==typeof S[S.length-1]?S.pop():w}Ee.exports=function(){for(var S=arguments.length,T=new Array(S),E=0;E<S;E++)T[E]=arguments[E];var O=v(T);if(Array.isArray(T[0])&&(T=T[0]),T.length<2)throw new Y("streams");var $,D=T.map(function(P,Z){var x=Z<T.length-1;return R(P,x,Z>0,function(ne){$||($=ne),ne&&D.forEach(M),!x&&(D.forEach(M),O($))})});return T.reduce(y)}},{"../../../errors":67,"./end-of-stream":76}],79:[function(Q,Ee,pe){"use strict";var X=Q("../../../errors").codes.ERR_INVALID_OPT_VALUE;Ee.exports={getHighWaterMark:function(Y,B,w,C){var R=function(Y,B,w){return null!=Y.highWaterMark?Y.highWaterMark:B?Y[w]:null}(B,C,w);if(null!=R){if(!isFinite(R)||Math.floor(R)!==R||R<0)throw new X(C?w:"highWaterMark",R);return Math.floor(R)}return Y.objectMode?16:16384}}},{"../../../errors":67}],80:[function(Q,Ee,pe){Ee.exports=Q("events").EventEmitter},{events:8}],81:[function(Q,Ee,pe){(pe=Ee.exports=Q("./lib/_stream_readable.js")).Stream=pe,pe.Readable=pe,pe.Writable=Q("./lib/_stream_writable.js"),pe.Duplex=Q("./lib/_stream_duplex.js"),pe.Transform=Q("./lib/_stream_transform.js"),pe.PassThrough=Q("./lib/_stream_passthrough.js"),pe.finished=Q("./lib/internal/streams/end-of-stream.js"),pe.pipeline=Q("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":68,"./lib/_stream_passthrough.js":69,"./lib/_stream_readable.js":70,"./lib/_stream_transform.js":71,"./lib/_stream_writable.js":72,"./lib/internal/streams/end-of-stream.js":76,"./lib/internal/streams/pipeline.js":78}],82:[function(Q,Ee,pe){"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),function(U){for(var F in U)pe.hasOwnProperty(F)||(pe[F]=U[F])}(Q("./lib/Resolve"))},{"./lib/Resolve":83}],83:[function(Q,Ee,pe){"use strict";function U(B){const w=[];let C=0;for(;C<B.length;)switch(B[C]){case"/":if("."===B[C+1])if("."===B[C+2]){if(!Y(B[C+3])){w.push([]),C++;break}w.pop(),B[C+3]||w.push([]),C+=3}else{if(!Y(B[C+2])){w.push([]),C++;break}B[C+2]||w.push([]),C+=2}else w.push([]),C++;break;case"#":case"?":w.length||w.push([]),w[w.length-1].push(B.substr(C)),C=B.length;break;default:w.length||w.push([]),w[w.length-1].push(B[C]),C++}return"/"+w.map(R=>R.join("")).join("/")}function F(B,w){let C=w+1;w>=0?"/"===B[w+1]&&"/"===B[w+2]&&(C=w+3):"/"===B[0]&&"/"===B[1]&&(C=2);const R=B.indexOf("/",C);return R<0?B:B.substr(0,R)+U(B.substr(R))}function Y(B){return!B||"#"===B||"?"===B||"/"===B}Object.defineProperty(pe,"__esModule",{value:!0}),pe.resolve=function(B,w){const C=(w=w||"").indexOf("#");if(C>0&&(w=w.substr(0,C)),!B.length){if(w.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${w}' for value '${B}'`);return w}if(B.startsWith("?")){const T=w.indexOf("?");return T>0&&(w=w.substr(0,T)),w+B}if(B.startsWith("#"))return w+B;if(!w.length){const T=B.indexOf(":");if(T<0)throw new Error(`Found invalid relative IRI '${B}' for a missing baseIRI`);return F(B,T)}const R=B.indexOf(":");if(R>=0)return F(B,R);const M=w.indexOf(":");if(M<0)throw new Error(`Found invalid baseIRI '${w}' for value '${B}'`);const y=w.substr(0,M+1);if(0===B.indexOf("//"))return y+F(B,R);let v;if(w.indexOf("//",M)===M+1){if(v=w.indexOf("/",M+3),v<0)return w.length>M+3?w+"/"+F(B,R):y+F(B,R)}else if(v=w.indexOf("/",M+1),v<0)return y+F(B,R);if(0===B.indexOf("/"))return w.substr(0,v)+U(B);let b=w.substr(v);const S=b.lastIndexOf("/");return S>=0&&S<b.length-1&&(b=b.substr(0,S+1),"."===B[0]&&"."!==B[1]&&"/"!==B[1]&&B[2]&&(B=B.substr(1))),B=U(B=b+B),w.substr(0,v)+B},pe.removeDotSegments=U,pe.removeDotSegmentsOfPath=F},{}],84:[function(Q,Ee,pe){var X=Q("buffer"),U=X.Buffer;function F(B,w){for(var C in B)w[C]=B[C]}function Y(B,w,C){return U(B,w,C)}U.from&&U.alloc&&U.allocUnsafe&&U.allocUnsafeSlow?Ee.exports=X:(F(X,pe),pe.Buffer=Y),Y.prototype=Object.create(U.prototype),F(U,Y),Y.from=function(B,w,C){if("number"==typeof B)throw new TypeError("Argument must not be a number");return U(B,w,C)},Y.alloc=function(B,w,C){if("number"!=typeof B)throw new TypeError("Argument must be a number");var R=U(B);return void 0!==w?"string"==typeof C?R.fill(w,C):R.fill(w):R.fill(0),R},Y.allocUnsafe=function(B){if("number"!=typeof B)throw new TypeError("Argument must be a number");return U(B)},Y.allocUnsafeSlow=function(B){if("number"!=typeof B)throw new TypeError("Argument must be a number");return X.SlowBuffer(B)}},{buffer:6}],85:[function(Q,Ee,pe){(function(X){(function(){!function(U){U.parser=function(K,q){return new Y(K,q)},U.SAXParser=Y,U.SAXStream=v,U.createStream=function(K,q){return new v(K,q)},U.MAX_BUFFER_LENGTH=65536;var R,F=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function Y(K,q){if(!(this instanceof Y))return new Y(K,q);var ge=this;(function(K){for(var q=0,ge=F.length;q<ge;q++)K[F[q]]=""})(ge),ge.q=ge.c="",ge.bufferCheckPosition=U.MAX_BUFFER_LENGTH,ge.opt=q||{},ge.opt.lowercase=ge.opt.lowercase||ge.opt.lowercasetags,ge.looseCase=ge.opt.lowercase?"toLowerCase":"toUpperCase",ge.tags=[],ge.closed=ge.closedRoot=ge.sawRoot=!1,ge.tag=ge.error=null,ge.strict=!!K,ge.noscript=!(!K&&!ge.opt.noscript),ge.state=te.BEGIN,ge.strictEntities=ge.opt.strictEntities,ge.ENTITIES=Object.create(ge.strictEntities?U.XML_ENTITIES:U.ENTITIES),ge.attribList=[],ge.opt.xmlns&&(ge.ns=Object.create(O)),ge.trackPosition=!1!==ge.opt.position,ge.trackPosition&&(ge.position=ge.line=ge.column=0),be(ge,"onready")}U.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(K){function q(){}return q.prototype=K,new q}),Object.keys||(Object.keys=function(K){var q=[];for(var ge in K)K.hasOwnProperty(ge)&&q.push(ge);return q}),Y.prototype={end:function(){Ge(this)},write:function(K){var q=this;if(this.error)throw this.error;if(q.closed)return Ze(q,"Cannot write after close. Assign an onready handler.");if(null===K)return Ge(q);"object"==typeof K&&(K=K.toString());for(var ge=0,ce="";ce=Ke(K,ge++),q.c=ce,ce;)switch(q.trackPosition&&(q.position++,"\n"===ce?(q.line++,q.column=0):q.column++),q.state){case te.BEGIN:if(q.state=te.BEGIN_WHITESPACE,"\ufeff"===ce)continue;ze(q,ce);continue;case te.BEGIN_WHITESPACE:ze(q,ce);continue;case te.TEXT:if(q.sawRoot&&!q.closedRoot){for(var Ye=ge-1;ce&&"<"!==ce&&"&"!==ce;)(ce=Ke(K,ge++))&&q.trackPosition&&(q.position++,"\n"===ce?(q.line++,q.column=0):q.column++);q.textNode+=K.substring(Ye,ge-1)}"<"!==ce||q.sawRoot&&q.closedRoot&&!q.strict?(!x(ce)&&(!q.sawRoot||q.closedRoot)&&J(q,"Text data outside of root node."),"&"===ce?q.state=te.TEXT_ENTITY:q.textNode+=ce):(q.state=te.OPEN_WAKA,q.startTagPosition=q.position);continue;case te.SCRIPT:"<"===ce?q.state=te.SCRIPT_ENDING:q.script+=ce;continue;case te.SCRIPT_ENDING:"/"===ce?q.state=te.CLOSE_TAG:(q.script+="<"+ce,q.state=te.SCRIPT);continue;case te.OPEN_WAKA:"!"===ce?(q.state=te.SGML_DECL,q.sgmlDecl=""):x(ce)||(ue($,ce)?(q.state=te.OPEN_TAG,q.tagName=ce):"/"===ce?(q.state=te.CLOSE_TAG,q.tagName=""):"?"===ce?(q.state=te.PROC_INST,q.procInstName=q.procInstBody=""):(J(q,"Unencoded <"),q.startTagPosition+1<q.position&&(ce=new Array(q.position-q.startTagPosition).join(" ")+ce),q.textNode+="<"+ce,q.state=te.TEXT));continue;case te.SGML_DECL:"[CDATA["===(q.sgmlDecl+ce).toUpperCase()?(re(q,"onopencdata"),q.state=te.CDATA,q.sgmlDecl="",q.cdata=""):q.sgmlDecl+ce==="--"?(q.state=te.COMMENT,q.comment="",q.sgmlDecl=""):"DOCTYPE"===(q.sgmlDecl+ce).toUpperCase()?(q.state=te.DOCTYPE,(q.doctype||q.sawRoot)&&J(q,"Inappropriately located doctype declaration"),q.doctype="",q.sgmlDecl=""):">"===ce?(re(q,"onsgmldeclaration",q.sgmlDecl),q.sgmlDecl="",q.state=te.TEXT):(W(ce)&&(q.state=te.SGML_DECL_QUOTED),q.sgmlDecl+=ce);continue;case te.SGML_DECL_QUOTED:ce===q.q&&(q.state=te.SGML_DECL,q.q=""),q.sgmlDecl+=ce;continue;case te.DOCTYPE:">"===ce?(q.state=te.TEXT,re(q,"ondoctype",q.doctype),q.doctype=!0):(q.doctype+=ce,"["===ce?q.state=te.DOCTYPE_DTD:W(ce)&&(q.state=te.DOCTYPE_QUOTED,q.q=ce));continue;case te.DOCTYPE_QUOTED:q.doctype+=ce,ce===q.q&&(q.q="",q.state=te.DOCTYPE);continue;case te.DOCTYPE_DTD:q.doctype+=ce,"]"===ce?q.state=te.DOCTYPE:W(ce)&&(q.state=te.DOCTYPE_DTD_QUOTED,q.q=ce);continue;case te.DOCTYPE_DTD_QUOTED:q.doctype+=ce,ce===q.q&&(q.state=te.DOCTYPE_DTD,q.q="");continue;case te.COMMENT:"-"===ce?q.state=te.COMMENT_ENDING:q.comment+=ce;continue;case te.COMMENT_ENDING:"-"===ce?(q.state=te.COMMENT_ENDED,q.comment=Fe(q.opt,q.comment),q.comment&&re(q,"oncomment",q.comment),q.comment=""):(q.comment+="-"+ce,q.state=te.COMMENT);continue;case te.COMMENT_ENDED:">"!==ce?(J(q,"Malformed comment"),q.comment+="--"+ce,q.state=te.COMMENT):q.state=te.TEXT;continue;case te.CDATA:"]"===ce?q.state=te.CDATA_ENDING:q.cdata+=ce;continue;case te.CDATA_ENDING:"]"===ce?q.state=te.CDATA_ENDING_2:(q.cdata+="]"+ce,q.state=te.CDATA);continue;case te.CDATA_ENDING_2:">"===ce?(q.cdata&&re(q,"oncdata",q.cdata),re(q,"onclosecdata"),q.cdata="",q.state=te.TEXT):"]"===ce?q.cdata+="]":(q.cdata+="]]"+ce,q.state=te.CDATA);continue;case te.PROC_INST:"?"===ce?q.state=te.PROC_INST_ENDING:x(ce)?q.state=te.PROC_INST_BODY:q.procInstName+=ce;continue;case te.PROC_INST_BODY:if(!q.procInstBody&&x(ce))continue;"?"===ce?q.state=te.PROC_INST_ENDING:q.procInstBody+=ce;continue;case te.PROC_INST_ENDING:">"===ce?(re(q,"onprocessinginstruction",{name:q.procInstName,body:q.procInstBody}),q.procInstName=q.procInstBody="",q.state=te.TEXT):(q.procInstBody+="?"+ce,q.state=te.PROC_INST_BODY);continue;case te.OPEN_TAG:ue(D,ce)?q.tagName+=ce:(le(q),">"===ce?Ce(q):"/"===ce?q.state=te.OPEN_TAG_SLASH:(x(ce)||J(q,"Invalid character in tag name"),q.state=te.ATTRIB));continue;case te.OPEN_TAG_SLASH:">"===ce?(Ce(q,!0),$e(q)):(J(q,"Forward-slash in opening tag not followed by >"),q.state=te.ATTRIB);continue;case te.ATTRIB:if(x(ce))continue;">"===ce?Ce(q):"/"===ce?q.state=te.OPEN_TAG_SLASH:ue($,ce)?(q.attribName=ce,q.attribValue="",q.state=te.ATTRIB_NAME):J(q,"Invalid attribute name");continue;case te.ATTRIB_NAME:"="===ce?q.state=te.ATTRIB_VALUE:">"===ce?(J(q,"Attribute without value"),q.attribValue=q.attribName,Me(q),Ce(q)):x(ce)?q.state=te.ATTRIB_NAME_SAW_WHITE:ue(D,ce)?q.attribName+=ce:J(q,"Invalid attribute name");continue;case te.ATTRIB_NAME_SAW_WHITE:if("="===ce)q.state=te.ATTRIB_VALUE;else{if(x(ce))continue;J(q,"Attribute without value"),q.tag.attributes[q.attribName]="",q.attribValue="",re(q,"onattribute",{name:q.attribName,value:""}),q.attribName="",">"===ce?Ce(q):ue($,ce)?(q.attribName=ce,q.state=te.ATTRIB_NAME):(J(q,"Invalid attribute name"),q.state=te.ATTRIB)}continue;case te.ATTRIB_VALUE:if(x(ce))continue;W(ce)?(q.q=ce,q.state=te.ATTRIB_VALUE_QUOTED):(J(q,"Unquoted attribute value"),q.state=te.ATTRIB_VALUE_UNQUOTED,q.attribValue=ce);continue;case te.ATTRIB_VALUE_QUOTED:if(ce!==q.q){"&"===ce?q.state=te.ATTRIB_VALUE_ENTITY_Q:q.attribValue+=ce;continue}Me(q),q.q="",q.state=te.ATTRIB_VALUE_CLOSED;continue;case te.ATTRIB_VALUE_CLOSED:x(ce)?q.state=te.ATTRIB:">"===ce?Ce(q):"/"===ce?q.state=te.OPEN_TAG_SLASH:ue($,ce)?(J(q,"No whitespace between attributes"),q.attribName=ce,q.attribValue="",q.state=te.ATTRIB_NAME):J(q,"Invalid attribute name");continue;case te.ATTRIB_VALUE_UNQUOTED:if(!ne(ce)){"&"===ce?q.state=te.ATTRIB_VALUE_ENTITY_U:q.attribValue+=ce;continue}Me(q),">"===ce?Ce(q):q.state=te.ATTRIB;continue;case te.CLOSE_TAG:if(q.tagName)">"===ce?$e(q):ue(D,ce)?q.tagName+=ce:q.script?(q.script+="</"+q.tagName,q.tagName="",q.state=te.SCRIPT):(x(ce)||J(q,"Invalid tagname in closing tag"),q.state=te.CLOSE_TAG_SAW_WHITE);else{if(x(ce))continue;se($,ce)?q.script?(q.script+="</"+ce,q.state=te.SCRIPT):J(q,"Invalid tagname in closing tag."):q.tagName=ce}continue;case te.CLOSE_TAG_SAW_WHITE:if(x(ce))continue;">"===ce?$e(q):J(q,"Invalid characters in closing tag");continue;case te.TEXT_ENTITY:case te.ATTRIB_VALUE_ENTITY_Q:case te.ATTRIB_VALUE_ENTITY_U:var gt,Ae;switch(q.state){case te.TEXT_ENTITY:gt=te.TEXT,Ae="textNode";break;case te.ATTRIB_VALUE_ENTITY_Q:gt=te.ATTRIB_VALUE_QUOTED,Ae="attribValue";break;case te.ATTRIB_VALUE_ENTITY_U:gt=te.ATTRIB_VALUE_UNQUOTED,Ae="attribValue"}";"===ce?(q[Ae]+=Se(q),q.entity="",q.state=gt):ue(q.entity.length?Z:P,ce)?q.entity+=ce:(J(q,"Invalid character in entity name"),q[Ae]+="&"+q.entity+ce,q.entity="",q.state=gt);continue;default:throw new Error(q,"Unknown state: "+q.state)}return q.position>=q.bufferCheckPosition&&function(K){for(var q=Math.max(U.MAX_BUFFER_LENGTH,10),ge=0,ce=0,Ye=F.length;ce<Ye;ce++){var _t=K[F[ce]].length;if(_t>q)switch(F[ce]){case"textNode":ve(K);break;case"cdata":re(K,"oncdata",K.cdata),K.cdata="";break;case"script":re(K,"onscript",K.script),K.script="";break;default:Ze(K,"Max buffer length exceeded: "+F[ce])}ge=Math.max(ge,_t)}K.bufferCheckPosition=U.MAX_BUFFER_LENGTH-ge+K.position}(q),q},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(K){ve(K),""!==K.cdata&&(re(K,"oncdata",K.cdata),K.cdata=""),""!==K.script&&(re(K,"onscript",K.script),K.script="")}(this)}};try{R=Q("stream").Stream}catch(K){R=function(){}}var M=U.EVENTS.filter(function(K){return"error"!==K&&"end"!==K});function v(K,q){if(!(this instanceof v))return new v(K,q);R.apply(this),this._parser=new Y(K,q),this.writable=!0,this.readable=!0;var ge=this;this._parser.onend=function(){ge.emit("end")},this._parser.onerror=function(ce){ge.emit("error",ce),ge._parser.error=null},this._decoder=null,M.forEach(function(ce){Object.defineProperty(ge,"on"+ce,{get:function(){return ge._parser["on"+ce]},set:function(Ye){if(!Ye)return ge.removeAllListeners(ce),ge._parser["on"+ce]=Ye,Ye;ge.on(ce,Ye)},enumerable:!0,configurable:!1})})}(v.prototype=Object.create(R.prototype,{constructor:{value:v}})).write=function(K){if("function"==typeof X&&"function"==typeof X.isBuffer&&X.isBuffer(K)){if(!this._decoder){var q=Q("string_decoder").StringDecoder;this._decoder=new q("utf8")}K=this._decoder.write(K)}return this._parser.write(K.toString()),this.emit("data",K),!0},v.prototype.end=function(K){return K&&K.length&&this.write(K),this._parser.end(),!0},v.prototype.on=function(K,q){var ge=this;return!ge._parser["on"+K]&&-1!==M.indexOf(K)&&(ge._parser["on"+K]=function(){var ce=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);ce.splice(0,0,K),ge.emit.apply(ge,ce)}),R.prototype.on.call(ge,K,q)};var T="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",O={xml:T,xmlns:E},$=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(K){return" "===K||"\n"===K||"\r"===K||"\t"===K}function W(K){return'"'===K||"'"===K}function ne(K){return">"===K||x(K)}function ue(K,q){return K.test(q)}function se(K,q){return!ue(K,q)}var K,q,ge,te=0;for(var Re in U.STATE={BEGIN:te++,BEGIN_WHITESPACE:te++,TEXT:te++,TEXT_ENTITY:te++,OPEN_WAKA:te++,SGML_DECL:te++,SGML_DECL_QUOTED:te++,DOCTYPE:te++,DOCTYPE_QUOTED:te++,DOCTYPE_DTD:te++,DOCTYPE_DTD_QUOTED:te++,COMMENT_STARTING:te++,COMMENT:te++,COMMENT_ENDING:te++,COMMENT_ENDED:te++,CDATA:te++,CDATA_ENDING:te++,CDATA_ENDING_2:te++,PROC_INST:te++,PROC_INST_BODY:te++,PROC_INST_ENDING:te++,OPEN_TAG:te++,OPEN_TAG_SLASH:te++,ATTRIB:te++,ATTRIB_NAME:te++,ATTRIB_NAME_SAW_WHITE:te++,ATTRIB_VALUE:te++,ATTRIB_VALUE_QUOTED:te++,ATTRIB_VALUE_CLOSED:te++,ATTRIB_VALUE_UNQUOTED:te++,ATTRIB_VALUE_ENTITY_Q:te++,ATTRIB_VALUE_ENTITY_U:te++,CLOSE_TAG:te++,CLOSE_TAG_SAW_WHITE:te++,SCRIPT:te++,SCRIPT_ENDING:te++},U.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},U.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(U.ENTITIES).forEach(function(K){var q=U.ENTITIES[K],ge="number"==typeof q?String.fromCharCode(q):q;U.ENTITIES[K]=ge}),U.STATE)U.STATE[U.STATE[Re]]=Re;function be(K,q,ge){K[q]&&K[q](ge)}function re(K,q,ge){K.textNode&&ve(K),be(K,q,ge)}function ve(K){K.textNode=Fe(K.opt,K.textNode),K.textNode&&be(K,"ontext",K.textNode),K.textNode=""}function Fe(K,q){return K.trim&&(q=q.trim()),K.normalize&&(q=q.replace(/\s+/g," ")),q}function Ze(K,q){return ve(K),K.trackPosition&&(q+="\nLine: "+K.line+"\nColumn: "+K.column+"\nChar: "+K.c),q=new Error(q),K.error=q,be(K,"onerror",q),K}function Ge(K){return K.sawRoot&&!K.closedRoot&&J(K,"Unclosed root tag"),K.state!==te.BEGIN&&K.state!==te.BEGIN_WHITESPACE&&K.state!==te.TEXT&&Ze(K,"Unexpected end"),ve(K),K.c="",K.closed=!0,be(K,"onend"),Y.call(K,K.strict,K.opt),K}function J(K,q){if("object"!=typeof K||!(K instanceof Y))throw new Error("bad call to strictFail");K.strict&&Ze(K,q)}function le(K){K.strict||(K.tagName=K.tagName[K.looseCase]());var q=K.tags[K.tags.length-1]||K,ge=K.tag={name:K.tagName,attributes:{}};K.opt.xmlns&&(ge.ns=q.ns),K.attribList.length=0,re(K,"onopentagstart",ge)}function _e(K,q){var ce=K.indexOf(":")<0?["",K]:K.split(":"),Ye=ce[0],_t=ce[1];return q&&"xmlns"===K&&(Ye="xmlns",_t=""),{prefix:Ye,local:_t}}function Me(K){if(K.strict||(K.attribName=K.attribName[K.looseCase]()),-1!==K.attribList.indexOf(K.attribName)||K.tag.attributes.hasOwnProperty(K.attribName))K.attribName=K.attribValue="";else{if(K.opt.xmlns){var q=_e(K.attribName,!0),ce=q.local;if("xmlns"===q.prefix)if("xml"===ce&&K.attribValue!==T)J(K,"xml: prefix must be bound to "+T+"\nActual: "+K.attribValue);else if("xmlns"===ce&&K.attribValue!==E)J(K,"xmlns: prefix must be bound to "+E+"\nActual: "+K.attribValue);else{var Ye=K.tag,_t=K.tags[K.tags.length-1]||K;Ye.ns===_t.ns&&(Ye.ns=Object.create(_t.ns)),Ye.ns[ce]=K.attribValue}K.attribList.push([K.attribName,K.attribValue])}else K.tag.attributes[K.attribName]=K.attribValue,re(K,"onattribute",{name:K.attribName,value:K.attribValue});K.attribName=K.attribValue=""}}function Ce(K,q){if(K.opt.xmlns){var ge=K.tag,ce=_e(K.tagName);ge.prefix=ce.prefix,ge.local=ce.local,ge.uri=ge.ns[ce.prefix]||"",ge.prefix&&!ge.uri&&(J(K,"Unbound namespace prefix: "+JSON.stringify(K.tagName)),ge.uri=ce.prefix),ge.ns&&(K.tags[K.tags.length-1]||K).ns!==ge.ns&&Object.keys(ge.ns).forEach(function(In){re(K,"onopennamespace",{prefix:In,uri:ge.ns[In]})});for(var _t=0,gt=K.attribList.length;_t<gt;_t++){var Ae=K.attribList[_t],z=Ae[0],L=Ae[1],H=_e(z,!0),Le=H.prefix,At=""===Le?"":ge.ns[Le]||"",kt={name:z,value:L,prefix:Le,local:H.local,uri:At};Le&&"xmlns"!==Le&&!At&&(J(K,"Unbound namespace prefix: "+JSON.stringify(Le)),kt.uri=Le),K.tag.attributes[z]=kt,re(K,"onattribute",kt)}K.attribList.length=0}K.tag.isSelfClosing=!!q,K.sawRoot=!0,K.tags.push(K.tag),re(K,"onopentag",K.tag),q||(K.state=K.noscript||"script"!==K.tagName.toLowerCase()?te.TEXT:te.SCRIPT,K.tag=null,K.tagName=""),K.attribName=K.attribValue="",K.attribList.length=0}function $e(K){if(!K.tagName)return J(K,"Weird empty close tag."),K.textNode+="</>",void(K.state=te.TEXT);if(K.script){if("script"!==K.tagName)return K.script+="</"+K.tagName+">",K.tagName="",void(K.state=te.SCRIPT);re(K,"onscript",K.script),K.script=""}var q=K.tags.length,ge=K.tagName;K.strict||(ge=ge[K.looseCase]());for(var ce=ge;q--&&K.tags[q].name!==ce;)J(K,"Unexpected close tag");if(q<0)return J(K,"Unmatched closing tag: "+K.tagName),K.textNode+="</"+K.tagName+">",void(K.state=te.TEXT);K.tagName=ge;for(var _t=K.tags.length;_t-- >q;){var gt=K.tag=K.tags.pop();K.tagName=K.tag.name,re(K,"onclosetag",K.tagName);var Ae={};for(var z in gt.ns)Ae[z]=gt.ns[z];K.opt.xmlns&&gt.ns!==(K.tags[K.tags.length-1]||K).ns&&Object.keys(gt.ns).forEach(function(H){re(K,"onclosenamespace",{prefix:H,uri:gt.ns[H]})})}0===q&&(K.closedRoot=!0),K.tagName=K.attribValue=K.attribName="",K.attribList.length=0,K.state=te.TEXT}function Se(K){var ce,q=K.entity,ge=q.toLowerCase(),Ye="";return K.ENTITIES[q]?K.ENTITIES[q]:K.ENTITIES[ge]?K.ENTITIES[ge]:("#"===(q=ge).charAt(0)&&("x"===q.charAt(1)?(q=q.slice(2),Ye=(ce=parseInt(q,16)).toString(16)):(q=q.slice(1),Ye=(ce=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),isNaN(ce)||Ye.toLowerCase()!==q?(J(K,"Invalid character entity"),"&"+K.entity+";"):String.fromCodePoint(ce))}function ze(K,q){"<"===q?(K.state=te.OPEN_WAKA,K.startTagPosition=K.position):x(q)||(J(K,"Non-whitespace before first tag."),K.textNode=q,K.state=te.TEXT)}function Ke(K,q){var ge="";return q<K.length&&(ge=K.charAt(q)),ge}te=U.STATE,String.fromCodePoint||(K=String.fromCharCode,q=Math.floor,ge=function(){var ce=16384,Ye=[],Ae=-1,z=arguments.length;if(!z)return"";for(var L="";++Ae<z;){var H=Number(arguments[Ae]);if(!isFinite(H)||H<0||H>1114111||q(H)!==H)throw RangeError("Invalid code point: "+H);H<=65535?Ye.push(H):Ye.push(55296+((H-=65536)>>10),H%1024+56320),(Ae+1===z||Ye.length>ce)&&(L+=K.apply(null,Ye),Ye.length=0)}return L},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ge,configurable:!0,writable:!0}):String.fromCodePoint=ge)}(void 0===pe?this.sax={}:pe)}).call(this)}).call(this,Q("buffer").Buffer)},{buffer:6,stream:87,string_decoder:5}],86:[function(Q,Ee,pe){(function(X,U){(function(){!function(F,Y){"use strict";if(!F.setImmediate){var M,B=1,w={},C=!1,R=F.document,Z=Object.getPrototypeOf&&Object.getPrototypeOf(F);Z=Z&&Z.setTimeout?Z:F,"[object process]"==={}.toString.call(F.process)?M=function(x){X.nextTick(function(){S(x)})}:function(){if(F.postMessage&&!F.importScripts){var x=!0,W=F.onmessage;return F.onmessage=function(){x=!1},F.postMessage("","*"),F.onmessage=W,x}}()?(x="setImmediate$"+Math.random()+"$",W=function(ne){ne.source===F&&"string"==typeof ne.data&&0===ne.data.indexOf(x)&&S(+ne.data.slice(x.length))},F.addEventListener?F.addEventListener("message",W,!1):F.attachEvent("onmessage",W),M=function(ne){F.postMessage(x+ne,"*")}):F.MessageChannel?function(){var x=new MessageChannel;x.port1.onmessage=function(W){S(W.data)},M=function(W){x.port2.postMessage(W)}}():R&&"onreadystatechange"in R.createElement("script")?function(){var x=R.documentElement;M=function(W){var ne=R.createElement("script");ne.onreadystatechange=function(){S(W),ne.onreadystatechange=null,x.removeChild(ne),ne=null},x.appendChild(ne)}}():M=function(x){setTimeout(S,0,x)},Z.setImmediate=function(x){"function"!=typeof x&&(x=new Function(""+x));for(var W=new Array(arguments.length-1),ne=0;ne<W.length;ne++)W[ne]=arguments[ne+1];return w[B]={callback:x,args:W},M(B),B++},Z.clearImmediate=v}var x,W;function v(x){delete w[x]}function S(x){if(C)setTimeout(S,0,x);else{var W=w[x];if(W){C=!0;try{!function(x){var W=x.callback,ne=x.args;switch(ne.length){case 0:W();break;case 1:W(ne[0]);break;case 2:W(ne[0],ne[1]);break;case 3:W(ne[0],ne[1],ne[2]);break;default:W.apply(void 0,ne)}}(W)}finally{v(x),C=!1}}}}}("undefined"==typeof self?void 0===U?this:U:self)}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:44}],87:[function(Q,Ee,pe){Ee.exports=F;var X=Q("events").EventEmitter;function F(){X.call(this)}Q("inherits")(F,X),F.Readable=Q("readable-stream/lib/_stream_readable.js"),F.Writable=Q("readable-stream/lib/_stream_writable.js"),F.Duplex=Q("readable-stream/lib/_stream_duplex.js"),F.Transform=Q("readable-stream/lib/_stream_transform.js"),F.PassThrough=Q("readable-stream/lib/_stream_passthrough.js"),F.finished=Q("readable-stream/lib/internal/streams/end-of-stream.js"),F.pipeline=Q("readable-stream/lib/internal/streams/pipeline.js"),F.Stream=F,F.prototype.pipe=function(Y,B){var w=this;function C(T){Y.writable&&!1===Y.write(T)&&w.pause&&w.pause()}function R(){w.readable&&w.resume&&w.resume()}w.on("data",C),Y.on("drain",R),!Y._isStdio&&(!B||!1!==B.end)&&(w.on("end",y),w.on("close",v));var M=!1;function y(){M||(M=!0,Y.end())}function v(){M||(M=!0,"function"==typeof Y.destroy&&Y.destroy())}function b(T){if(S(),0===X.listenerCount(this,"error"))throw T}function S(){w.removeListener("data",C),Y.removeListener("drain",R),w.removeListener("end",y),w.removeListener("close",v),w.removeListener("error",b),Y.removeListener("error",b),w.removeListener("end",S),w.removeListener("close",S),Y.removeListener("close",S)}return w.on("error",b),Y.on("error",b),w.on("end",S),w.on("close",S),Y.on("close",S),Y.emit("pipe",w),Y}},{events:8,inherits:10,"readable-stream/lib/_stream_duplex.js":68,"readable-stream/lib/_stream_passthrough.js":69,"readable-stream/lib/_stream_readable.js":70,"readable-stream/lib/_stream_transform.js":71,"readable-stream/lib/_stream_writable.js":72,"readable-stream/lib/internal/streams/end-of-stream.js":76,"readable-stream/lib/internal/streams/pipeline.js":78}],88:[function(Q,Ee,pe){arguments[4][5][0].apply(pe,arguments)},{dup:5,"safe-buffer":84}],89:[function(Q,Ee,pe){(function(X,U){(function(){var F=Q("process/browser.js").nextTick,Y=Function.prototype.apply,B=Array.prototype.slice,w={},C=0;function R(M,y){this._id=M,this._clearFn=y}pe.setTimeout=function(){return new R(Y.call(setTimeout,window,arguments),clearTimeout)},pe.setInterval=function(){return new R(Y.call(setInterval,window,arguments),clearInterval)},pe.clearTimeout=pe.clearInterval=function(M){M.close()},R.prototype.unref=R.prototype.ref=function(){},R.prototype.close=function(){this._clearFn.call(window,this._id)},pe.enroll=function(M,y){clearTimeout(M._idleTimeoutId),M._idleTimeout=y},pe.unenroll=function(M){clearTimeout(M._idleTimeoutId),M._idleTimeout=-1},pe._unrefActive=pe.active=function(M){clearTimeout(M._idleTimeoutId);var y=M._idleTimeout;y>=0&&(M._idleTimeoutId=setTimeout(function(){M._onTimeout&&M._onTimeout()},y))},pe.setImmediate="function"==typeof X?X:function(M){var y=C++,v=!(arguments.length<2)&&B.call(arguments,1);return w[y]=!0,F(function(){w[y]&&(v?M.apply(null,v):M.call(null),pe.clearImmediate(y))}),y},pe.clearImmediate="function"==typeof U?U:function(M){delete w[M]}}).call(this)}).call(this,Q("timers").setImmediate,Q("timers").clearImmediate)},{"process/browser.js":44,timers:89}],90:[function(Q,Ee,pe){(function(X){(function(){function F(Y){try{if(!X.localStorage)return!1}catch(w){return!1}var B=X.localStorage[Y];return null!=B&&"true"===String(B).toLowerCase()}Ee.exports=function(Y,B){if(F("noDeprecation"))return Y;var w=!1;return function(){if(!w){if(F("throwDeprecation"))throw new Error(B);F("traceDeprecation")?console.trace(B):console.warn(B),w=!0}return Y.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(Q,Ee,pe){"use strict";Ee.exports=function(X){X.prototype[Symbol.iterator]=function*(){for(let U=this.head;U;U=U.next)yield U.value}}},{}],92:[function(Q,Ee,pe){"use strict";function X(w){var C=this;if(C instanceof X||(C=new X),C.tail=null,C.head=null,C.length=0,w&&"function"==typeof w.forEach)w.forEach(function(y){C.push(y)});else if(arguments.length>0)for(var R=0,M=arguments.length;R<M;R++)C.push(arguments[R]);return C}function U(w,C,R){var M=C===w.head?new B(R,null,C,w):new B(R,C,C.next,w);return null===M.next&&(w.tail=M),null===M.prev&&(w.head=M),w.length++,M}function F(w,C){w.tail=new B(C,w.tail,null,w),w.head||(w.head=w.tail),w.length++}function Y(w,C){w.head=new B(C,null,w.head,w),w.tail||(w.tail=w.head),w.length++}function B(w,C,R,M){if(!(this instanceof B))return new B(w,C,R,M);this.list=M,this.value=w,C?(C.next=this,this.prev=C):this.prev=null,R?(R.prev=this,this.next=R):this.next=null}Ee.exports=X,X.Node=B,X.create=X,X.prototype.removeNode=function(w){if(w.list!==this)throw new Error("removing node which does not belong to this list");var C=w.next,R=w.prev;return C&&(C.prev=R),R&&(R.next=C),w===this.head&&(this.head=C),w===this.tail&&(this.tail=R),w.list.length--,w.next=null,w.prev=null,w.list=null,C},X.prototype.unshiftNode=function(w){if(w!==this.head){w.list&&w.list.removeNode(w);var C=this.head;w.list=this,w.next=C,C&&(C.prev=w),this.head=w,this.tail||(this.tail=w),this.length++}},X.prototype.pushNode=function(w){if(w!==this.tail){w.list&&w.list.removeNode(w);var C=this.tail;w.list=this,w.prev=C,C&&(C.next=w),this.tail=w,this.head||(this.head=w),this.length++}},X.prototype.push=function(){for(var w=0,C=arguments.length;w<C;w++)F(this,arguments[w]);return this.length},X.prototype.unshift=function(){for(var w=0,C=arguments.length;w<C;w++)Y(this,arguments[w]);return this.length},X.prototype.pop=function(){if(this.tail){var w=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,w}},X.prototype.shift=function(){if(this.head){var w=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,w}},X.prototype.forEach=function(w,C){C=C||this;for(var R=this.head,M=0;null!==R;M++)w.call(C,R.value,M,this),R=R.next},X.prototype.forEachReverse=function(w,C){C=C||this;for(var R=this.tail,M=this.length-1;null!==R;M--)w.call(C,R.value,M,this),R=R.prev},X.prototype.get=function(w){for(var C=0,R=this.head;null!==R&&C<w;C++)R=R.next;if(C===w&&null!==R)return R.value},X.prototype.getReverse=function(w){for(var C=0,R=this.tail;null!==R&&C<w;C++)R=R.prev;if(C===w&&null!==R)return R.value},X.prototype.map=function(w,C){C=C||this;for(var R=new X,M=this.head;null!==M;)R.push(w.call(C,M.value,this)),M=M.next;return R},X.prototype.mapReverse=function(w,C){C=C||this;for(var R=new X,M=this.tail;null!==M;)R.push(w.call(C,M.value,this)),M=M.prev;return R},X.prototype.reduce=function(w,C){var R,M=this.head;if(arguments.length>1)R=C;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");M=this.head.next,R=this.head.value}for(var y=0;null!==M;y++)R=w(R,M.value,y),M=M.next;return R},X.prototype.reduceReverse=function(w,C){var R,M=this.tail;if(arguments.length>1)R=C;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");M=this.tail.prev,R=this.tail.value}for(var y=this.length-1;null!==M;y--)R=w(R,M.value,y),M=M.prev;return R},X.prototype.toArray=function(){for(var w=new Array(this.length),C=0,R=this.head;null!==R;C++)w[C]=R.value,R=R.next;return w},X.prototype.toArrayReverse=function(){for(var w=new Array(this.length),C=0,R=this.tail;null!==R;C++)w[C]=R.value,R=R.prev;return w},X.prototype.slice=function(w,C){(C=C||this.length)<0&&(C+=this.length),(w=w||0)<0&&(w+=this.length);var R=new X;if(C<w||C<0)return R;w<0&&(w=0),C>this.length&&(C=this.length);for(var M=0,y=this.head;null!==y&&M<w;M++)y=y.next;for(;null!==y&&M<C;M++,y=y.next)R.push(y.value);return R},X.prototype.sliceReverse=function(w,C){(C=C||this.length)<0&&(C+=this.length),(w=w||0)<0&&(w+=this.length);var R=new X;if(C<w||C<0)return R;w<0&&(w=0),C>this.length&&(C=this.length);for(var M=this.length,y=this.tail;null!==y&&M>C;M--)y=y.prev;for(;null!==y&&M>w;M--,y=y.prev)R.push(y.value);return R},X.prototype.splice=function(w,C,...R){w>this.length&&(w=this.length-1),w<0&&(w=this.length+w);for(var M=0,y=this.head;null!==y&&M<w;M++)y=y.next;var v=[];for(M=0;y&&M<C;M++)v.push(y.value),y=this.removeNode(y);for(null===y&&(y=this.tail),y!==this.head&&y!==this.tail&&(y=y.prev),M=0;M<R.length;M++)y=U(this,y,R[M]);return v},X.prototype.reverse=function(){for(var w=this.head,C=this.tail,R=w;null!==R;R=R.prev){var M=R.prev;R.prev=R.next,R.next=M}return this.head=C,this.tail=w,this};try{Q("./iterator.js")(X)}catch(w){}},{"./iterator.js":91}]},{},[1])(1)},1002:Vt=>{"use strict";Vt.exports=et,Vt.exports.default=et;var Xe=1e20;function et(Q,Ee,pe,X,U,F){this.fontSize=Q||24,this.buffer=void 0===Ee?3:Ee,this.cutoff=X||.25,this.fontFamily=U||"sans-serif",this.fontWeight=F||"normal",this.radius=pe||8;var Y=this.size=this.fontSize+2*this.buffer,B=Y+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Y,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Uint16Array(B),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(Y/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ct(Q,Ee,pe,X,U,F){for(var Y=0;Y<Ee;Y++)je(Q,Y,Ee,pe,X,U,F);for(var B=0;B<pe;B++)je(Q,B*Ee,1,Ee,X,U,F)}function je(Q,Ee,pe,X,U,F,Y){var B,w,C,R;for(F[0]=0,Y[0]=-Xe,Y[1]=Xe,B=0;B<X;B++)U[B]=Q[Ee+B*pe];for(B=1,w=0,C=0;B<X;B++){do{C=(U[B]-U[R=F[w]]+B*B-R*R)/(B-R)/2}while(C<=Y[w]&&--w>-1);F[++w]=B,Y[w]=C,Y[w+1]=Xe}for(B=0,w=0;B<X;B++){for(;Y[w+1]<B;)w++;Q[Ee+B*pe]=U[R=F[w]]+(B-R)*(B-R)}}et.prototype._draw=function(Q,Ee){var F,Y,B,w,C,R,M,y,v,pe=this.ctx.measureText(Q),X=pe.width,U=2*this.buffer;Ee&&this.useMetrics?(C=Math.floor(pe.actualBoundingBoxAscent),y=this.buffer+Math.ceil(pe.actualBoundingBoxAscent),R=this.buffer,M=this.buffer,F=(Y=Math.min(this.size,Math.ceil(pe.actualBoundingBoxRight-pe.actualBoundingBoxLeft)))+U,B=(w=Math.min(this.size-R,Math.ceil(pe.actualBoundingBoxAscent+pe.actualBoundingBoxDescent)))+U,this.ctx.textBaseline="alphabetic"):(F=Y=this.size,B=w=this.size,C=19*this.fontSize/24,R=M=0,y=this.middle,this.ctx.textBaseline="middle"),Y&&w&&(this.ctx.clearRect(M,R,Y,w),this.ctx.fillText(Q,this.buffer,y),v=this.ctx.getImageData(M,R,Y,w));var b=new Uint8ClampedArray(F*B);return function(Q,Ee,pe,X,U,F,Y){F.fill(Xe,0,Ee*pe),Y.fill(0,0,Ee*pe);for(var B=(Ee-X)/2,w=0;w<U;w++)for(var C=0;C<X;C++){var R=(w+B)*Ee+C+B,M=Q.data[4*(w*X+C)+3]/255;if(1===M)F[R]=0,Y[R]=Xe;else if(0===M)F[R]=Xe,Y[R]=0;else{var y=Math.max(0,.5-M),v=Math.max(0,M-.5);F[R]=y*y,Y[R]=v*v}}}(v,F,B,Y,w,this.gridOuter,this.gridInner),Ct(this.gridOuter,F,B,this.f,this.v,this.z),Ct(this.gridInner,F,B,this.f,this.v,this.z),function(Q,Ee,pe,X,U,F,Y){for(var B=0;B<Ee*pe;B++){var w=Math.sqrt(X[B])-Math.sqrt(U[B]);Q[B]=Math.round(255-255*(w/F+Y))}}(b,F,B,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:b,metrics:{width:Y,height:w,sdfWidth:F,sdfHeight:B,top:C,left:0,advance:X}}},et.prototype.draw=function(Q){return this._draw(Q,!1).data},et.prototype.drawWithMetrics=function(Q){return this._draw(Q,!0)}},322:Vt=>{Vt.exports=function(et,lt){var ee=lt.length;if(0!==ee){var Ct=et.length;et.length+=ee;for(var je=0;je<ee;je++)et[Ct+je]=lt[je]}}},4517:(Vt,Xe)=>{"use strict";var lt=(()=>{return(Ct=lt||(lt={})).typeOfFunction="function",Ct.boolTrue=!0,lt;var Ct})();function ee(Ct,je,Q){if(!Q||typeof Q.value!==lt.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+je+"> is not a method!");return{configurable:lt.boolTrue,get:function(){var Ee=Q.value.bind(this);return Object.defineProperty(this,je,{value:Ee,configurable:lt.boolTrue,writable:lt.boolTrue}),Ee}}}Xe.ak=ee,Xe.ZP=ee},7266:(Vt,Xe,et)=>{Vt.exports={ResizeSensor:et(9835),ElementQueries:et(4845)}},4845:function(Vt,Xe,et){"use strict";var lt,ee,Ct;"undefined"!=typeof window&&window,ee=[et(9835)],void 0!==(Ct="function"==typeof(lt=function(je){var Q=function(){var pe,X={},U=[];function F(D){D||(D=document.documentElement);var P=window.getComputedStyle(D,null).fontSize;return parseFloat(P)||16}function B(D,P){var Z=P.split(/\d/),x=Z[Z.length-1];switch(P=parseFloat(P),x){case"px":return P;case"em":return P*F(D);case"rem":return P*F();case"vw":return P*document.documentElement.clientWidth/100;case"vh":return P*document.documentElement.clientHeight/100;case"vmin":case"vmax":var W=document.documentElement.clientWidth/100,ne=document.documentElement.clientHeight/100;return P*(0,Math["vmin"===x?"min":"max"])(W,ne);default:return P}}function w(D,P){this.element=D;var Z,x,W,ne,ue,se,te,Re,be=["min-width","min-height","max-width","max-height"];this.call=function(){for(Z in W=function(D){if(!D.getBoundingClientRect)return{width:D.offsetWidth,height:D.offsetHeight};var P=D.getBoundingClientRect();return{width:Math.round(P.width),height:Math.round(P.height)}}(this.element),se={},X[P])!X[P].hasOwnProperty(Z)||(ne=B(this.element,(x=X[P][Z]).value),ue="width"===x.property?W.width:W.height,te="","min"===x.mode&&ue>=ne&&(te+=x.value),"max"===x.mode&&ue<=ne&&(te+=x.value),se[Re=x.mode+"-"+x.property]||(se[Re]=""),te&&-1===(" "+se[Re]+" ").indexOf(" "+te+" ")&&(se[Re]+=" "+te));for(var re in be)!be.hasOwnProperty(re)||(se[be[re]]?this.element.setAttribute(be[re],se[be[re]].substr(1)):this.element.removeAttribute(be[re]))}}function C(D,P){D.elementQueriesSetupInformation||(D.elementQueriesSetupInformation=new w(D,P)),D.elementQueriesSensor||(D.elementQueriesSensor=new je(D,function(){D.elementQueriesSetupInformation.call()}))}function R(D,P,Z,x){if(void 0===X[D]){X[D]=[];var W=U.length;pe.innerHTML+="\n"+D+" {animation: 0.1s element-queries;}",pe.innerHTML+="\n"+D+" > .resize-sensor {min-width: "+W+"px;}",U.push(D)}X[D].push({mode:P,property:Z,value:x})}function M(D){var P;if(document.querySelectorAll&&(P=D?D.querySelectorAll.bind(D):document.querySelectorAll.bind(document)),!P&&"undefined"!=typeof $$&&(P=$$),!P&&"undefined"!=typeof jQuery&&(P=jQuery),!P)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return P}function v(D){var P=[],Z=[],x=[],W=0,ne=-1,ue=[];for(var se in D.children)if(D.children.hasOwnProperty(se)&&D.children[se].tagName&&"img"===D.children[se].tagName.toLowerCase()){P.push(D.children[se]);var te=D.children[se].getAttribute("min-width")||D.children[se].getAttribute("data-min-width"),Re=D.children[se].getAttribute("data-src")||D.children[se].getAttribute("url");x.push(Re),Z.push({minWidth:te}),te?D.children[se].style.display="none":(W=P.length-1,D.children[se].style.display="block")}function re(){var Fe,ve=!1;for(Fe in P)!P.hasOwnProperty(Fe)||Z[Fe].minWidth&&D.offsetWidth>Z[Fe].minWidth&&(ve=Fe);if(ve||(ve=W),ne!==ve)if(ue[ve])P[ne].style.display="none",P[ve].style.display="block",ne=ve;else{var Ze=new Image;Ze.onload=function(){P[ve].src=x[ve],P[ne].style.display="none",P[ve].style.display="block",ue[ve]=!0,ne=ve},Ze.src=x[ve]}else P[ve].src=x[ve]}ne=W,D.resizeSensorInstance=new je(D,re),re()}var S=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,T=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function E(D){var P,Z,x,W;for(D=D.replace(/'/g,'"');null!==(P=S.exec(D));)for(Z=P[1]+P[3],x=P[2];null!==(W=T.exec(x));)R(Z,W[1],W[2],W[3])}function O(D){var P="";if(D)if("string"==typeof D)(-1!==(D=D.toLowerCase()).indexOf("min-width")||-1!==D.indexOf("max-width"))&&E(D);else for(var Z=0,x=D.length;Z<x;Z++)1===D[Z].type?(-1!==(P=D[Z].selectorText||D[Z].cssText).indexOf("min-height")||-1!==P.indexOf("max-height")||-1!==P.indexOf("min-width")||-1!==P.indexOf("max-width"))&&E(P):4===D[Z].type?O(D[Z].cssRules||D[Z].rules):3===D[Z].type&&D[Z].styleSheet.hasOwnProperty("cssRules")&&O(D[Z].styleSheet.cssRules)}var $=!1;this.init=function(){var D="animationstart";void 0!==document.documentElement.style.webkitAnimationName?D="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?D="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(D="oanimationstart"),document.body.addEventListener(D,function(x){var W=x.target,ne=W&&window.getComputedStyle(W,null),ue=ne&&ne.getPropertyValue("animation-name");if(ue&&-1!==ue.indexOf("element-queries")){W.elementQueriesSensor=new je(W,function(){W.elementQueriesSetupInformation&&W.elementQueriesSetupInformation.call()});var Re=window.getComputedStyle(W.resizeSensor,null).getPropertyValue("min-width");Re=parseInt(Re.replace("px","")),C(x.target,U[Re])}}),$||((pe=document.createElement("style")).type="text/css",pe.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",pe.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(pe),$=!0);for(var P=0,Z=document.styleSheets.length;P<Z;P++)try{document.styleSheets[P].href&&0===document.styleSheets[P].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[P].href),O(document.styleSheets[P].cssRules||document.styleSheets[P].rules||document.styleSheets[P].cssText)}catch(x){}!function(){for(var P=M()("[data-responsive-image],[responsive-image]"),Z=0,x=P.length;Z<x;Z++)v(P[Z])}()},this.findElementQueriesElements=function(D){!function(D){var P=M(D);for(var Z in X)if(X.hasOwnProperty(Z))for(var x=P(Z,D),W=0,ne=x.length;W<ne;W++)C(x[W],Z)}(D)},this.update=function(){this.init()}};Q.update=function(){Q.instance.update()},Q.detach=function(pe){pe.elementQueriesSetupInformation?(pe.elementQueriesSensor.detach(),delete pe.elementQueriesSetupInformation,delete pe.elementQueriesSensor):pe.resizeSensorInstance&&(pe.resizeSensorInstance.detach(),delete pe.resizeSensorInstance)},Q.init=function(){Q.instance||(Q.instance=new Q),Q.instance.init()};return Q.findElementQueriesElements=function(pe){Q.instance.findElementQueriesElements(pe)},Q.listen=function(){!function(pe){if(document.addEventListener)document.addEventListener("DOMContentLoaded",pe,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var X=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(pe(),clearInterval(X))},10);else window.onload=pe}(Q.init)},Q})?lt.apply(Xe,ee):lt)&&(Vt.exports=Ct)},9835:function(Vt,Xe,et){"use strict";var lt,ee;"undefined"!=typeof window&&window,void 0!==(ee="function"==typeof(lt=function(){if("undefined"==typeof window)return null;var Ct="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),je=Ct.requestAnimationFrame||Ct.mozRequestAnimationFrame||Ct.webkitRequestAnimationFrame||function(Y){return Ct.setTimeout(Y,20)},Q=Ct.cancelAnimationFrame||Ct.mozCancelAnimationFrame||Ct.webkitCancelAnimationFrame||function(Y){Ct.clearTimeout(Y)};function Ee(Y,B){var w=Object.prototype.toString.call(Y),C="[object Array]"===w||"[object NodeList]"===w||"[object HTMLCollection]"===w||"[object Object]"===w||"undefined"!=typeof jQuery&&Y instanceof jQuery||"undefined"!=typeof Elements&&Y instanceof Elements,R=0,M=Y.length;if(C)for(;R<M;R++)B(Y[R]);else B(Y)}function pe(Y){if(!Y.getBoundingClientRect)return{width:Y.offsetWidth,height:Y.offsetHeight};var B=Y.getBoundingClientRect();return{width:Math.round(B.width),height:Math.round(B.height)}}function X(Y,B){Object.keys(B).forEach(function(w){Y.style[w]=B[w]})}var U=function(Y,B){var w=0;function C(){var y,v,M=[];this.add=function(b){M.push(b)},this.call=function(b){for(y=0,v=M.length;y<v;y++)M[y].call(this,b)},this.remove=function(b){var S=[];for(y=0,v=M.length;y<v;y++)M[y]!==b&&S.push(M[y]);M=S},this.length=function(){return M.length}}function R(M,y){if(M){if(M.resizedAttached)return void M.resizedAttached.add(y);M.resizedAttached=new C,M.resizedAttached.add(y),M.resizeSensor=document.createElement("div"),M.resizeSensor.dir="ltr",M.resizeSensor.className="resize-sensor";var v={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},b={position:"absolute",left:"0px",top:"0px",transition:"0s"};X(M.resizeSensor,v);var S=document.createElement("div");S.className="resize-sensor-expand",X(S,v);var T=document.createElement("div");X(T,b),S.appendChild(T);var E=document.createElement("div");E.className="resize-sensor-shrink",X(E,v);var O=document.createElement("div");X(O,b),X(O,{width:"200%",height:"200%"}),E.appendChild(O),M.resizeSensor.appendChild(S),M.resizeSensor.appendChild(E),M.appendChild(M.resizeSensor);var $=window.getComputedStyle(M),D=$?$.getPropertyValue("position"):null;"absolute"!==D&&"relative"!==D&&"fixed"!==D&&"sticky"!==D&&(M.style.position="relative");var P=!1,Z=0,x=pe(M),W=0,ne=0,ue=!0;w=0;var te=function(){if(ue){if(0===M.offsetWidth&&0===M.offsetHeight)return void(w||(w=je(function(){w=0,te()})));ue=!1}var ve,Fe;Fe=M.offsetHeight,T.style.width=(ve=M.offsetWidth)+10+"px",T.style.height=Fe+10+"px",S.scrollLeft=ve+10,S.scrollTop=Fe+10,E.scrollLeft=ve+10,E.scrollTop=Fe+10};M.resizeSensor.resetSensor=te;var Re=function(){Z=0,P&&(W=x.width,ne=x.height,M.resizedAttached&&M.resizedAttached.call(x))},be=function(){x=pe(M),(P=x.width!==W||x.height!==ne)&&!Z&&(Z=je(Re)),te()},re=function(ve,Fe,Ze){ve.attachEvent?ve.attachEvent("on"+Fe,Ze):ve.addEventListener(Fe,Ze)};re(S,"scroll",be),re(E,"scroll",be),w=je(function(){w=0,te()})}}Ee(Y,function(M){R(M,B)}),this.detach=function(M){w||(Q(w),w=0),U.detach(Y,M)},this.reset=function(){Y.resizeSensor.resetSensor()}};if(U.reset=function(Y){Ee(Y,function(B){B.resizeSensor.resetSensor()})},U.detach=function(Y,B){Ee(Y,function(w){!w||w.resizedAttached&&"function"==typeof B&&(w.resizedAttached.remove(B),w.resizedAttached.length())||w.resizeSensor&&(w.contains(w.resizeSensor)&&w.removeChild(w.resizeSensor),delete w.resizeSensor,delete w.resizedAttached)})},"undefined"!=typeof MutationObserver){var F=new MutationObserver(function(Y){for(var B in Y)if(Y.hasOwnProperty(B))for(var w=Y[B].addedNodes,C=0;C<w.length;C++)w[C].resizeSensor&&U.reset(w[C])});document.addEventListener("DOMContentLoaded",function(Y){F.observe(document.body,{childList:!0,subtree:!0})})}return U})?lt.call(Xe,et,Xe,Vt):lt)&&(Vt.exports=ee)},7445:(Vt,Xe,et)=>{var lt=et(3910),ee=et(9369),Ct=et(322);function je(Y,B,w){if(!lt(Y))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!Y.hasNode(B))throw new Error('graphology-shortest-path: the "'+B+'" source node does not exist in the given graph.');if(!Y.hasNode(w))throw new Error('graphology-shortest-path: the "'+w+'" target node does not exist in the given graph.');if((B=""+B)==(w=""+w))return[B];var C=Y.inboundNeighbors.bind(Y),R=Y.outboundNeighbors.bind(Y),M={},y={};M[B]=null,y[w]=null;var S,T,E,O,$,D,P,Z,v=[B],b=[w],x=!1;e:for(;v.length&&b.length;)if(v.length<=b.length){for(S=v,v=[],$=0,P=S.length;$<P;$++)for(D=0,Z=(E=R(T=S[$])).length;D<Z;D++)if((O=E[D])in M||(v.push(O),M[O]=T),O in y){x=!0;break e}}else for(S=b,b=[],$=0,P=S.length;$<P;$++)for(T=S[$],E=C(T),D=0,Z=E.length;D<Z;D++)if(O=E[D],O in y||(b.push(O),y[O]=T),O in M){x=!0;break e}if(!x)return null;for(var W=[];O;)W.unshift(O),O=M[O];for(O=y[W[W.length-1]];O;)W.push(O),O=y[O];return W.length?W:null}function Q(Y,B){if(!lt(Y))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!Y.hasNode(B))throw new Error('graphology-shortest-path: the "'+B+'" source node does not exist in the given graph.');var R,M,y,v,b,S,w={},C={};for(w[B=""+B]=!0,C[B]=[B];Object.keys(w).length;)for(y in R=w,w={},R)for(b=0,S=(M=Y.outboundNeighbors(y)).length;b<S;b++)C[v=M[b]]||(C[v]=C[y].concat(v),w[v]=!0);return C}function Ee(Y,B,w){if(!lt(B))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!B.hasNode(w))throw new Error('graphology-shortest-path: the "'+w+'" source node does not exist in the given graph.');w=""+w;var C=new Set,R={},M=0;R[w]=0;for(var v,b,S,y=[w];0!==y.length;){var T=[];for(v=0,b=y.length;v<b;v++)!C.has(S=y[v])&&(C.add(S),Ct(T,B[Y](S)),R[S]=M);M++,y=T}return R}var pe=Ee.bind(null,"outboundNeighbors"),X=Ee.bind(null,"neighbors");function U(Y,B,w){return arguments.length<3?Q(Y,B):je(Y,B,w)}U.bidirectional=je,U.singleSource=Q,U.singleSourceLength=pe,U.undirectedSingleSourceLength=X,U.brandes=function(Y,B){B=""+B;var y,v,b,S,T,E,O,$,D,w=[],C={},R={},M=Y.nodes();for(E=0,$=M.length;E<$;E++)C[S=M[E]]=[],R[S]=0;var P={};R[B]=1,P[B]=0;for(var Z=ee.of(B);Z.size;)for(S=Z.dequeue(),w.push(S),y=P[S],v=R[S],O=0,D=(b=Y.outboundNeighbors(S)).length;O<D;O++)(T=b[O])in P||(Z.enqueue(T),P[T]=y+1),P[T]===y+1&&(R[T]+=v,C[T].push(S));return[w,C,R]},Vt.exports=U},3910:Vt=>{Vt.exports=function(et){return null!==et&&"object"==typeof et&&"function"==typeof et.addUndirectedEdgeWithKey&&"function"==typeof et.dropNode&&"boolean"==typeof et.multi}},698:function(Vt){Vt.exports=function(){"use strict";function Xe(ae){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(me){return typeof me}:function(me){return me&&"function"==typeof Symbol&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(ae)}function et(ae,me){ae.prototype=Object.create(me.prototype),ae.prototype.constructor=ae,ee(ae,me)}function lt(ae){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(me){return me.__proto__||Object.getPrototypeOf(me)})(ae)}function ee(ae,me){return(ee=Object.setPrototypeOf||function(de,N){return de.__proto__=N,de})(ae,me)}function Ct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ae){return!1}}function je(ae,me,de){return(je=Ct()?Reflect.construct:function(N,j,ie){var De=[null];De.push.apply(De,j);var He=new(Function.bind.apply(N,De));return ie&&ee(He,ie.prototype),He}).apply(null,arguments)}function Q(ae){var me="function"==typeof Map?new Map:void 0;return(Q=function(de){if(null===de||-1===Function.toString.call(de).indexOf("[native code]"))return de;if("function"!=typeof de)throw new TypeError("Super expression must either be null or a function");if(void 0!==me){if(me.has(de))return me.get(de);me.set(de,j)}function j(){return je(de,arguments,lt(this).constructor)}return j.prototype=Object.create(de.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),ee(j,de)})(ae)}function Ee(ae){if(void 0===ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}var pe=function(){for(var ae=arguments[0],me=1,de=arguments.length;me<de;me++)if(arguments[me])for(var N in arguments[me])ae[N]=arguments[me][N];return ae};function X(ae,me,de,N){var j=ae._nodes.get(me),ie=null;return j?ie="mixed"===N?j.out&&j.out[de]||j.undirected&&j.undirected[de]:"directed"===N?j.out&&j.out[de]:j.undirected&&j.undirected[de]:ie}function U(ae){return null!==ae&&"object"===Xe(ae)&&"function"==typeof ae.addUndirectedEdgeWithKey&&"function"==typeof ae.dropNode}function F(ae){return"object"===Xe(ae)&&null!==ae&&ae.constructor===Object}function Y(ae){var me;for(me in ae)return!1;return!0}function B(ae,me,de){Object.defineProperty(ae,me,{enumerable:!1,configurable:!1,writable:!0,value:de})}function w(ae,me,de){var N={enumerable:!0,configurable:!0};"function"==typeof de?N.get=de:(N.value=de,N.writable=!1),Object.defineProperty(ae,me,N)}function C(ae){return!(!F(ae)||ae.attributes&&!Array.isArray(ae.attributes))}"function"==typeof Object.assign&&(pe=Object.assign);var R,M={exports:{}},y="object"==typeof Reflect?Reflect:null,v=y&&"function"==typeof y.apply?y.apply:function(ae,me,de){return Function.prototype.apply.call(ae,me,de)};R=y&&"function"==typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(ae){return Object.getOwnPropertyNames(ae).concat(Object.getOwnPropertySymbols(ae))}:function(ae){return Object.getOwnPropertyNames(ae)};var b=Number.isNaN||function(ae){return ae!=ae};function S(){S.init.call(this)}M.exports=S,M.exports.once=function(ae,me){return new Promise(function(de,N){function j(De){ae.removeListener(me,ie),N(De)}function ie(){"function"==typeof ae.removeListener&&ae.removeListener("error",j),de([].slice.call(arguments))}var De;ne(ae,me,ie,{once:!0}),"error"!==me&&("function"==typeof(De=ae).on&&ne(De,"error",j,{once:!0}))})},S.EventEmitter=S,S.prototype._events=void 0,S.prototype._eventsCount=0,S.prototype._maxListeners=void 0;var T=10;function E(ae){if("function"!=typeof ae)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ae)}function O(ae){return void 0===ae._maxListeners?S.defaultMaxListeners:ae._maxListeners}function $(ae,me,de,N){var j,ie,De;if(E(de),void 0===(ie=ae._events)?(ie=ae._events=Object.create(null),ae._eventsCount=0):(void 0!==ie.newListener&&(ae.emit("newListener",me,de.listener?de.listener:de),ie=ae._events),De=ie[me]),void 0===De)De=ie[me]=de,++ae._eventsCount;else if("function"==typeof De?De=ie[me]=N?[de,De]:[De,de]:N?De.unshift(de):De.push(de),(j=O(ae))>0&&De.length>j&&!De.warned){De.warned=!0;var st=new Error("Possible EventEmitter memory leak detected. "+De.length+" "+String(me)+" listeners added. Use emitter.setMaxListeners() to increase limit");st.name="MaxListenersExceededWarning",st.emitter=ae,st.type=me,st.count=De.length,console&&console.warn&&console.warn(st)}return ae}function D(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(ae,me,de){var N={fired:!1,wrapFn:void 0,target:ae,type:me,listener:de},j=D.bind(N);return j.listener=de,N.wrapFn=j,j}function Z(ae,me,de){var N=ae._events;if(void 0===N)return[];var j=N[me];return void 0===j?[]:"function"==typeof j?de?[j.listener||j]:[j]:de?function(ie){for(var De=new Array(ie.length),He=0;He<De.length;++He)De[He]=ie[He].listener||ie[He];return De}(j):W(j,j.length)}function x(ae){var me=this._events;if(void 0!==me){var de=me[ae];if("function"==typeof de)return 1;if(void 0!==de)return de.length}return 0}function W(ae,me){for(var de=new Array(me),N=0;N<me;++N)de[N]=ae[N];return de}function ne(ae,me,de,N){if("function"==typeof ae.on)N.once?ae.once(me,de):ae.on(me,de);else{if("function"!=typeof ae.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ae);ae.addEventListener(me,function j(ie){N.once&&ae.removeEventListener(me,j),de(ie)})}}function ue(ae){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:ae}),this.done=!1}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(ae){if("number"!=typeof ae||ae<0||b(ae))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ae+".");T=ae}}),S.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},S.prototype.setMaxListeners=function(ae){if("number"!=typeof ae||ae<0||b(ae))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ae+".");return this._maxListeners=ae,this},S.prototype.getMaxListeners=function(){return O(this)},S.prototype.emit=function(ae){for(var me=[],de=1;de<arguments.length;de++)me.push(arguments[de]);var N="error"===ae,j=this._events;if(void 0!==j)N=N&&void 0===j.error;else if(!N)return!1;if(N){var ie;if(me.length>0&&(ie=me[0]),ie instanceof Error)throw ie;var De=new Error("Unhandled error."+(ie?" ("+ie.message+")":""));throw De.context=ie,De}var He=j[ae];if(void 0===He)return!1;if("function"==typeof He)v(He,this,me);else{var st=He.length,Nt=W(He,st);for(de=0;de<st;++de)v(Nt[de],this,me)}return!0},S.prototype.on=S.prototype.addListener=function(ae,me){return $(this,ae,me,!1)},S.prototype.prependListener=function(ae,me){return $(this,ae,me,!0)},S.prototype.once=function(ae,me){return E(me),this.on(ae,P(this,ae,me)),this},S.prototype.prependOnceListener=function(ae,me){return E(me),this.prependListener(ae,P(this,ae,me)),this},S.prototype.off=S.prototype.removeListener=function(ae,me){var de,N,j,ie,De;if(E(me),void 0===(N=this._events))return this;if(void 0===(de=N[ae]))return this;if(de===me||de.listener===me)0==--this._eventsCount?this._events=Object.create(null):(delete N[ae],N.removeListener&&this.emit("removeListener",ae,de.listener||me));else if("function"!=typeof de){for(j=-1,ie=de.length-1;ie>=0;ie--)if(de[ie]===me||de[ie].listener===me){De=de[ie].listener,j=ie;break}if(j<0)return this;0===j?de.shift():function(He,st){for(;st+1<He.length;st++)He[st]=He[st+1];He.pop()}(de,j),1===de.length&&(N[ae]=de[0]),void 0!==N.removeListener&&this.emit("removeListener",ae,De||me)}return this},S.prototype.removeAllListeners=function(ae){var me,de,N;if(void 0===(de=this._events))return this;if(void 0===de.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==de[ae]&&(0==--this._eventsCount?this._events=Object.create(null):delete de[ae]),this;if(0===arguments.length){var j,ie=Object.keys(de);for(N=0;N<ie.length;++N)"removeListener"!==(j=ie[N])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(me=de[ae]))this.removeListener(ae,me);else if(void 0!==me)for(N=me.length-1;N>=0;N--)this.removeListener(ae,me[N]);return this},S.prototype.listeners=function(ae){return Z(this,ae,!0)},S.prototype.rawListeners=function(ae){return Z(this,ae,!1)},S.listenerCount=function(ae,me){return"function"==typeof ae.listenerCount?ae.listenerCount(me):x.call(ae,me)},S.prototype.listenerCount=x,S.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]},ue.prototype.next=function(){if(this.done)return{done:!0};var ae=this._next();return ae.done&&(this.done=!0),ae},"undefined"!=typeof Symbol&&(ue.prototype[Symbol.iterator]=function(){return this}),ue.of=function(){var ae=arguments,me=ae.length,de=0;return new ue(function(){return de>=me?{done:!0}:{done:!1,value:ae[de++]}})},ue.empty=function(){var ae=new ue(null);return ae.done=!0,ae},ue.is=function(ae){return ae instanceof ue||"object"==typeof ae&&null!==ae&&"function"==typeof ae.next};var se=ue,te=function(ae,me){for(var de,N=arguments.length>1?me:1/0,j=N!==1/0?new Array(N):[],ie=0;;){if(ie===N)return j;if((de=ae.next()).done)return ie!==me?j.slice(0,ie):j;j[ie++]=de.value}},Re=function(ae){function me(de,N){var j;return(j=ae.call(this)||this).name="GraphError",j.message=de||"",j.data=N||{},j}return et(me,ae),me}(Q(Error)),be=function(ae){function me(de,N){var j;return(j=ae.call(this,de,N)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Ee(j),me.prototype.constructor),j}return et(me,ae),me}(Re),re=function(ae){function me(de,N){var j;return(j=ae.call(this,de,N)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Ee(j),me.prototype.constructor),j}return et(me,ae),me}(Re),ve=function(ae){function me(de,N){var j;return(j=ae.call(this,de,N)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Ee(j),me.prototype.constructor),j}return et(me,ae),me}(Re);function Fe(ae,me){this.key=ae,this.attributes=me,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function Ze(ae,me){this.key=ae,this.attributes=me,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function Ge(ae,me){this.key=ae,this.attributes=me,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function J(ae,me,de,N,j,ie){this.key=me,this.attributes=ie,this.undirected=ae,this.source=N,this.target=j,this.generatedKey=de}function le(ae,me,de,N,j,ie,De){var He,st,Nt="out",tt="in";if(me&&(Nt=tt="undirected"),ae.multi){if(void 0===(st=(He=ie[Nt])[j])&&(st=new Set,He[j]=st),st.add(de),N===j&&me)return;void 0===(He=De[tt])[N]&&(He[N]=st)}else{if(ie[Nt][j]=de,N===j&&me)return;De[tt][N]=de}}function _e(ae,me,de){var N=ae.multi,j=de.source,ie=de.target,De=j.key,He=ie.key,st=j[me?"undirected":"out"],Nt=me?"undirected":"in";if(He in st)if(N){var tt=st[He];1===tt.size?(delete st[He],delete ie[Nt][De]):tt.delete(de)}else delete st[He];N||delete ie[Nt][De]}Ze.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},Ge.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var Me=[{name:function(ae){return"get".concat(ae,"Attribute")},attacher:function(ae,me,de){ae.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+N,He=""+j;if(j=arguments[2],!(ie=X(this,De,He,de)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(De,'" - "').concat(He,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==de&&ie.undirected!==("undirected"===de))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(de," edge in the graph."));return ie.attributes[j]}}},{name:function(ae){return"get".concat(ae,"Attributes")},attacher:function(ae,me,de){ae.prototype[me]=function(N){var j;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ie=""+N,De=""+arguments[1];if(!(j=X(this,ie,De,de)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(ie,'" - "').concat(De,'").'))}else if(!(j=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==de&&j.undirected!==("undirected"===de))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(de," edge in the graph."));return j.attributes}}},{name:function(ae){return"has".concat(ae,"Attribute")},attacher:function(ae,me,de){ae.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+N,He=""+j;if(j=arguments[2],!(ie=X(this,De,He,de)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(De,'" - "').concat(He,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==de&&ie.undirected!==("undirected"===de))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(de," edge in the graph."));return ie.attributes.hasOwnProperty(j)}}},{name:function(ae){return"set".concat(ae,"Attribute")},attacher:function(ae,me,de){ae.prototype[me]=function(N,j,ie){var De;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var He=""+N,st=""+j;if(j=arguments[2],ie=arguments[3],!(De=X(this,He,st,de)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(He,'" - "').concat(st,'").'))}else if(!(De=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==de&&De.undirected!==("undirected"===de))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(de," edge in the graph."));return De.attributes[j]=ie,this.emit("edgeAttributesUpdated",{key:De.key,type:"set",attributes:De.attributes,name:j}),this}}},{name:function(ae){return"update".concat(ae,"Attribute")},attacher:function(ae,me,de){ae.prototype[me]=function(N,j,ie){var De;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var He=""+N,st=""+j;if(j=arguments[2],ie=arguments[3],!(De=X(this,He,st,de)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(He,'" - "').concat(st,'").'))}else if(!(De=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("function"!=typeof ie)throw new be("Graph.".concat(me,": updater should be a function."));if("mixed"!==de&&De.undirected!==("undirected"===de))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(de," edge in the graph."));return De.attributes[j]=ie(De.attributes[j]),this.emit("edgeAttributesUpdated",{key:De.key,type:"set",attributes:De.attributes,name:j}),this}}},{name:function(ae){return"remove".concat(ae,"Attribute")},attacher:function(ae,me,de){ae.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+N,He=""+j;if(j=arguments[2],!(ie=X(this,De,He,de)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(De,'" - "').concat(He,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if("mixed"!==de&&ie.undirected!==("undirected"===de))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(de," edge in the graph."));return delete ie.attributes[j],this.emit("edgeAttributesUpdated",{key:ie.key,type:"remove",attributes:ie.attributes,name:j}),this}}},{name:function(ae){return"replace".concat(ae,"Attributes")},attacher:function(ae,me,de){ae.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+N,He=""+j;if(j=arguments[2],!(ie=X(this,De,He,de)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(De,'" - "').concat(He,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if(!F(j))throw new be("Graph.".concat(me,": provided attributes are not a plain object."));if("mixed"!==de&&ie.undirected!==("undirected"===de))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(de," edge in the graph."));return ie.attributes=j,this.emit("edgeAttributesUpdated",{key:ie.key,type:"replace",attributes:ie.attributes}),this}}},{name:function(ae){return"merge".concat(ae,"Attributes")},attacher:function(ae,me,de){ae.prototype[me]=function(N,j){var ie;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new ve("Graph.".concat(me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ve("Graph.".concat(me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+N,He=""+j;if(j=arguments[2],!(ie=X(this,De,He,de)))throw new re("Graph.".concat(me,': could not find an edge for the given path ("').concat(De,'" - "').concat(He,'").'))}else if(!(ie=this._edges.get(N=""+N)))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" edge in the graph.'));if(!F(j))throw new be("Graph.".concat(me,": provided attributes are not a plain object."));if("mixed"!==de&&ie.undirected!==("undirected"===de))throw new re("Graph.".concat(me,': could not find the "').concat(N,'" ').concat(de," edge in the graph."));return pe(ie.attributes,j),this.emit("edgeAttributesUpdated",{key:ie.key,type:"merge",attributes:ie.attributes,data:j}),this}}}],Ce=se,$e=function(){var ae,me=arguments,de=-1;return new Ce(function N(){if(!ae){if(++de>=me.length)return{done:!0};ae=me[de]}var j=ae.next();return j.done?(ae=null,N()):j})},Se=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function ze(ae,me){for(var de in me)ae.push(me[de].key)}function Ke(ae,me){for(var de in me)me[de].forEach(function(N){return ae.push(N.key)})}function Ve(ae,me,de){for(var N in ae)if(N!==de){var j=ae[N];me(j.key,j.attributes,j.source.key,j.target.key,j.source.attributes,j.target.attributes,j.undirected,j.generatedKey)}}function K(ae,me,de){for(var N in ae)N!==de&&ae[N].forEach(function(j){return me(j.key,j.attributes,j.source.key,j.target.key,j.source.attributes,j.target.attributes,j.undirected,j.generatedKey)})}function q(ae,me,de){for(var N in ae)if(N!==de){var j=ae[N];if(me(j.key,j.attributes,j.source.key,j.target.key,j.source.attributes,j.target.attributes,j.undirected,j.generatedKey))return!0}return!1}function ge(ae,me,de){var N,j,ie,De,He;for(var st in ae)if(st!==de)for(N=ae[st].values();!0!==(j=N.next()).done;)if(De=(ie=j.value).source,me(ie.key,ie.attributes,De.key,(He=ie.target).key,De.attributes,He.attributes,ie.undirected,ie.generatedKey))return!0;return!1}function ce(ae,me){var de=Object.keys(ae),N=de.length,j=null,ie=0;return new se(function De(){var He;if(j){var st=j.next();if(st.done)return j=null,ie++,De();He=st.value}else{if(ie>=N)return{done:!0};var Nt=de[ie];if(Nt===me)return ie++,De();if((He=ae[Nt])instanceof Set)return j=He.values(),De();ie++}return{done:!1,value:[He.key,He.attributes,He.source.key,He.target.key,He.source.attributes,He.target.attributes]}})}function Ye(ae,me,de){var N=me[de];N&&ae.push(N.key)}function _t(ae,me,de){var N=me[de];N&&N.forEach(function(j){return ae.push(j.key)})}function gt(ae,me,de){var N=ae[me];if(N){var j=N.source,ie=N.target;de(N.key,N.attributes,j.key,ie.key,j.attributes,ie.attributes,N.undirected,N.generatedKey)}}function Ae(ae,me,de){var N=ae[me];N&&N.forEach(function(j){return de(j.key,j.attributes,j.source.key,j.target.key,j.source.attributes,j.target.attributes,j.undirected,j.generatedKey)})}function z(ae,me,de){var N=ae[me];if(N){var j=N.source,ie=N.target;return de(N.key,N.attributes,j.key,ie.key,j.attributes,ie.attributes,N.undirected,N.generatedKey)}}function L(ae,me,de){var N=ae[me];if(N){for(var j,ie,De=N.values();!0!==(j=De.next()).done;)if(de((ie=j.value).key,ie.attributes,ie.source.key,ie.target.key,ie.source.attributes,ie.target.attributes,ie.undirected,ie.generatedKey))return!0;return!1}}function H(ae,me){var de=ae[me];if(de instanceof Set){var N=de.values();return new se(function(){var j=N.next();if(j.done)return j;var ie=j.value;return{done:!1,value:[ie.key,ie.attributes,ie.source.key,ie.target.key,ie.source.attributes,ie.target.attributes]}})}return se.of([de.key,de.attributes,de.source.key,de.target.key,de.source.attributes,de.target.attributes])}function Le(ae,me){if(0===ae.size)return[];if("mixed"===me||me===ae.type)return"function"==typeof Array.from?Array.from(ae._edges.keys()):te(ae._edges.keys(),ae._edges.size);for(var de,N,ie=new Array("undirected"===me?ae.undirectedSize:ae.directedSize),De="undirected"===me,He=ae._edges.values(),st=0;!0!==(de=He.next()).done;)(N=de.value).undirected===De&&(ie[st++]=N.key);return ie}function it(ae,me,de){if(0!==ae.size)for(var N,j,ie="mixed"!==me&&me!==ae.type,De="undirected"===me,He=ae._edges.values();!0!==(N=He.next()).done;)if(j=N.value,!ie||j.undirected===De){var qt=j.source,St=j.target;de(j.key,j.attributes,qt.key,St.key,qt.attributes,St.attributes,j.undirected,j.generatedKey)}}function At(ae,me,de){if(0!==ae.size)for(var N,j,ie="mixed"!==me&&me!==ae.type,De="undirected"===me,He=ae._edges.values();!0!==(N=He.next()).done;)if(j=N.value,!ie||j.undirected===De){var qt=j.source,St=j.target;if(de(j.key,j.attributes,qt.key,St.key,qt.attributes,St.attributes,j.undirected,j.generatedKey))break}}function kt(ae,me){if(0===ae.size)return se.empty();var de="mixed"!==me&&me!==ae.type,N="undirected"===me,j=ae._edges.values();return new se(function(){for(var ie,De;;){if((ie=j.next()).done)return ie;if(De=ie.value,!de||De.undirected===N)break}return{value:[De.key,De.attributes,De.source.key,De.target.key,De.source.attributes,De.target.attributes],done:!1}})}function In(ae,me,de,N){var j=[],ie=ae?Ke:ze;return"undirected"!==me&&("out"!==de&&ie(j,N.in),"in"!==de&&ie(j,N.out),!de&&N.directedSelfLoops>0&&j.splice(j.lastIndexOf(N.key),1)),"directed"!==me&&ie(j,N.undirected),j}function Pn(ae,me,de,N,j){var ie=ae?K:Ve;"undirected"!==me&&("out"!==de&&ie(N.in,j),"in"!==de&&ie(N.out,j,de?null:N.key)),"directed"!==me&&ie(N.undirected,j)}function Yn(ae,me,de,N,j){var ie=ae?ge:q;"undirected"!==me&&("out"!==de&&ie(N.in,j)||"in"!==de&&ie(N.out,j,de?null:N.key))||"directed"===me||ie(N.undirected,j)}function Mi(ae,me,de){var N=se.empty();return"undirected"!==ae&&("out"!==me&&void 0!==de.in&&(N=$e(N,ce(de.in))),"in"!==me&&void 0!==de.out&&(N=$e(N,ce(de.out,me?null:de.key)))),"directed"!==ae&&void 0!==de.undirected&&(N=$e(N,ce(de.undirected))),N}function xi(ae,me,de,N,j){var ie=me?_t:Ye,De=[];return"undirected"!==ae&&(void 0!==N.in&&"out"!==de&&ie(De,N.in,j),void 0!==N.out&&"in"!==de&&ie(De,N.out,j),!de&&N.directedSelfLoops>0&&De.splice(De.lastIndexOf(N.key),1)),"directed"!==ae&&void 0!==N.undirected&&ie(De,N.undirected,j),De}function Xr(ae,me,de,N,j,ie){var De=me?Ae:gt;"undirected"!==ae&&(void 0!==N.in&&"out"!==de&&De(N.in,j,ie),N.key!==j&&void 0!==N.out&&"in"!==de&&De(N.out,j,ie)),"directed"!==ae&&void 0!==N.undirected&&De(N.undirected,j,ie)}function Ls(ae,me,de,N,j,ie){var De=me?L:z;"undirected"!==ae&&(void 0!==N.in&&"out"!==de&&De(N.in,j,ie)||N.key!==j&&void 0!==N.out&&"in"!==de&&De(N.out,j,ie,de?null:N.key))||"directed"===ae||void 0===N.undirected||De(N.undirected,j,ie)}function fs(ae,me,de,N){var j=se.empty();return"undirected"!==ae&&(void 0!==de.in&&"out"!==me&&N in de.in&&(j=$e(j,H(de.in,N))),void 0!==de.out&&"in"!==me&&N in de.out&&(j=$e(j,H(de.out,N)))),"directed"!==ae&&void 0!==de.undirected&&N in de.undirected&&(j=$e(j,H(de.undirected,N))),j}var Bs=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Kr(ae,me){if(void 0!==me)for(var de in me)ae.add(de)}function xa(ae,me,de){if("mixed"!==ae){if("undirected"===ae)return Object.keys(de.undirected);if("string"==typeof me)return Object.keys(de[me])}var N=new Set;return"undirected"!==ae&&("out"!==me&&Kr(N,de.in),"in"!==me&&Kr(N,de.out)),"directed"!==ae&&Kr(N,de.undirected),te(N.values(),N.size)}function kl(ae,me,de){for(var N in me){var j=me[N];j instanceof Set&&(j=j.values().next().value);var ie=j.source,He=ie===ae?j.target:ie;de(He.key,He.attributes)}}function Sa(ae,me,de,N){for(var j in de){var ie=de[j];ie instanceof Set&&(ie=ie.values().next().value);var De=ie.source,st=De===me?ie.target:De;ae.has(st.key)||(ae.add(st.key),N(st.key,st.attributes))}}function ws(ae,me,de){for(var N in me){var j=me[N];j instanceof Set&&(j=j.values().next().value);var ie=j.source,He=ie===ae?j.target:ie;if(de(He.key,He.attributes))return!0}return!1}function en(ae,me,de,N){for(var j in de){var ie=de[j];ie instanceof Set&&(ie=ie.values().next().value);var De=ie.source,st=De===me?ie.target:De;if(!ae.has(st.key)&&(ae.add(st.key),N(st.key,st.attributes)))return!0}return!1}function nl(ae,me){var de=Object.keys(me),N=de.length,j=0;return new se(function(){if(j>=N)return{done:!0};var ie=me[de[j++]];ie instanceof Set&&(ie=ie.values().next().value);var De=ie.source,st=De===ae?ie.target:De;return{done:!1,value:[st.key,st.attributes]}})}function ot(ae,me,de){var N=Object.keys(de),j=N.length,ie=0;return new se(function De(){if(ie>=j)return{done:!0};var He=de[N[ie++]];He instanceof Set&&(He=He.values().next().value);var st=He.source,tt=st===me?He.target:st;return ae.has(tt.key)?De():(ae.add(tt.key),{done:!1,value:[tt.key,tt.attributes]})})}function ut(ae,me,de,N,j){var ie=ae._nodes.get(N);if("undirected"!==me){if("out"!==de&&void 0!==ie.in)for(var De in ie.in)if(De===j)return!0;if("in"!==de&&void 0!==ie.out)for(var He in ie.out)if(He===j)return!0}if("directed"!==me&&void 0!==ie.undirected)for(var st in ie.undirected)if(st===j)return!0;return!1}function We(ae,me,de){for(var N,j,ie,De,He,st,Nt,tt=me._nodes.values(),qt=me.type;!0!==(N=tt.next()).done;){if(j=N.value,"undirected"!==qt)for(ie in De=j.out)if(st=(He=De[ie]).target,Nt=de(j.key,st.key,j.attributes,st.attributes,He.key,He.attributes,He.undirected,He.generatedKey),ae&&Nt)return;if("directed"!==qt)for(ie in De=j.undirected)if((st=(He=De[ie]).target).key!==ie&&(st=He.source),Nt=de(j.key,st.key,j.attributes,st.attributes,He.key,He.attributes,He.undirected,He.generatedKey),ae&&Nt)return}}function ht(ae,me,de){for(var N,j,ie,De,He,st,Nt,tt,qt,St=me._nodes.values(),vn=me.type;!0!==(N=St.next()).done;){if(j=N.value,"undirected"!==vn)for(ie in st=j.out)for(De=st[ie].values();!0!==(He=De.next()).done;)if(tt=(Nt=He.value).target,qt=de(j.key,tt.key,j.attributes,tt.attributes,Nt.key,Nt.attributes,Nt.undirected,Nt.generatedKey),ae&&qt)return;if("directed"!==vn)for(ie in st=j.undirected)for(De=st[ie].values();!0!==(He=De.next()).done;)if((tt=(Nt=He.value).target).key!==ie&&(tt=Nt.source),qt=de(j.key,tt.key,j.attributes,tt.attributes,Nt.key,Nt.attributes,Nt.undirected,Nt.generatedKey),ae&&qt)return}}function rt(ae,me){var de={key:ae};return Y(me.attributes)||(de.attributes=pe({},me.attributes)),de}function Dt(ae,me){var de={source:me.source.key,target:me.target.key};return me.generatedKey||(de.key=ae),Y(me.attributes)||(de.attributes=pe({},me.attributes)),me.undirected&&(de.undirected=!0),de}function It(ae){return F(ae)?"key"in ae?!("attributes"in ae)||F(ae.attributes)&&null!==ae.attributes?null:"invalid-attributes":"no-key":"not-object"}function Ot(ae){return F(ae)?"source"in ae?"target"in ae?!("attributes"in ae)||F(ae.attributes)&&null!==ae.attributes?"undirected"in ae&&"boolean"!=typeof ae.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}var Qt=new Set(["directed","undirected","mixed"]),zn=new Set(["domain","_events","_eventsCount","_maxListeners"]),ci={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Rn(ae,me,de){var N=new ae.NodeDataClass(me,de);return ae._nodes.set(me,N),ae.emit("nodeAdded",{key:me,attributes:de}),N}function bn(ae,me,de,N,j,ie,De,He){if(!N&&"undirected"===ae.type)throw new ve("Graph.".concat(me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(N&&"directed"===ae.type)throw new ve("Graph.".concat(me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(He&&!F(He))throw new be("Graph.".concat(me,': invalid attributes. Expecting an object but got "').concat(He,'"'));if(ie=""+ie,De=""+De,He=He||{},!ae.allowSelfLoops&&ie===De)throw new ve("Graph.".concat(me,': source & target are the same ("').concat(ie,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var st=ae._nodes.get(ie),Nt=ae._nodes.get(De);if(!st)throw new re("Graph.".concat(me,': source node "').concat(ie,'" not found.'));if(!Nt)throw new re("Graph.".concat(me,': target node "').concat(De,'" not found.'));var tt={key:null,undirected:N,source:ie,target:De,attributes:He};if(de&&(j=ae._edgeKeyGenerator(tt)),ae._edges.has(j=""+j))throw new ve("Graph.".concat(me,': the "').concat(j,'" edge already exists in the graph.'));if(!ae.multi&&(N?void 0!==st.undirected[De]:void 0!==st.out[De]))throw new ve("Graph.".concat(me,': an edge linking "').concat(ie,'" to "').concat(De,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var qt=new J(N,j,de,st,Nt,He);return ae._edges.set(j,qt),ie===De?N?(st.undirectedSelfLoops++,ae._undirectedSelfLoopCount++):(st.directedSelfLoops++,ae._directedSelfLoopCount++):N?(st.undirectedDegree++,Nt.undirectedDegree++):(st.outDegree++,Nt.inDegree++),le(ae,N,qt,ie,De,st,Nt),N?ae._undirectedSize++:ae._directedSize++,tt.key=j,ae.emit("edgeAdded",tt),j}function Xn(ae,me,de,N,j,ie,De,He,st){if(!N&&"undirected"===ae.type)throw new ve("Graph.".concat(me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(N&&"directed"===ae.type)throw new ve("Graph.".concat(me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(He)if(st){if("function"!=typeof He)throw new be("Graph.".concat(me,': invalid updater function. Expecting a function but got "').concat(He,'"'))}else if(!F(He))throw new be("Graph.".concat(me,': invalid attributes. Expecting an object but got "').concat(He,'"'));var Nt;if(ie=""+ie,De=""+De,st&&(Nt=He,He=void 0),!ae.allowSelfLoops&&ie===De)throw new ve("Graph.".concat(me,': source & target are the same ("').concat(ie,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var tt,qt,St=ae._nodes.get(ie),vn=ae._nodes.get(De);if(!de&&(tt=ae._edges.get(j))){if(tt.source.key!==ie||tt.target.key!==De||N&&(tt.source.key!==De||tt.target.key!==ie))throw new ve("Graph.".concat(me,': inconsistency detected when attempting to merge the "').concat(j,'" edge with "').concat(ie,'" source & "').concat(De,'" target vs. ("').concat(tt.source.key,'", "').concat(tt.target.key,'").'));qt=tt}if(qt||ae.multi||!St||(qt=N?St.undirected[De]:St.out[De]),qt)return(st?Nt:He)?(st?(qt.attributes=Nt(qt.attributes),ae.emit("edgeAttributesUpdated",{type:"replace",key:qt.key,attributes:qt.attributes})):(pe(qt.attributes,He),ae.emit("edgeAttributesUpdated",{type:"merge",key:qt.key,attributes:qt.attributes,data:He})),qt.key):qt.key;He=He||{},st&&Nt&&(He=Nt(He));var Zr={key:null,undirected:N,source:ie,target:De,attributes:He};if(de&&(j=ae._edgeKeyGenerator(Zr)),ae._edges.has(j=""+j))throw new ve("Graph.".concat(me,': the "').concat(j,'" edge already exists in the graph.'));return St||(St=Rn(ae,ie,{}),ie===De&&(vn=St)),vn||(vn=Rn(ae,De,{})),tt=new J(N,j,de,St,vn,He),ae._edges.set(j,tt),ie===De?N?(St.undirectedSelfLoops++,ae._undirectedSelfLoopCount++):(St.directedSelfLoops++,ae._directedSelfLoopCount++):N?(St.undirectedDegree++,vn.undirectedDegree++):(St.outDegree++,vn.inDegree++),le(ae,N,tt,ie,De,St,vn),N?ae._undirectedSize++:ae._directedSize++,Zr.key=j,ae.emit("edgeAdded",Zr),j}var ae,Cn=function(ae){function me(N){var j;if(j=ae.call(this)||this,(N=pe({},ci,N)).edgeKeyGenerator&&"function"!=typeof N.edgeKeyGenerator)throw new be("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(N.edgeKeyGenerator,'".'));if("boolean"!=typeof N.multi)throw new be("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(N.multi,'".'));if(!Qt.has(N.type))throw new be('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(N.type,'".'));if("boolean"!=typeof N.allowSelfLoops)throw new be("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(N.allowSelfLoops,'".'));var ie,De="mixed"===N.type?Fe:"directed"===N.type?Ze:Ge;return B(Ee(j),"NodeDataClass",De),B(Ee(j),"_attributes",{}),B(Ee(j),"_nodes",new Map),B(Ee(j),"_edges",new Map),B(Ee(j),"_directedSize",0),B(Ee(j),"_undirectedSize",0),B(Ee(j),"_directedSelfLoopCount",0),B(Ee(j),"_undirectedSelfLoopCount",0),B(Ee(j),"_edgeKeyGenerator",N.edgeKeyGenerator||(ie=0,function(){return ie++})),B(Ee(j),"_options",N),zn.forEach(function(He){return B(Ee(j),He,j[He])}),w(Ee(j),"order",function(){return j._nodes.size}),w(Ee(j),"size",function(){return j._edges.size}),w(Ee(j),"directedSize",function(){return j._directedSize}),w(Ee(j),"undirectedSize",function(){return j._undirectedSize}),w(Ee(j),"selfLoopCount",function(){return j._directedSelfLoopCount+j._undirectedSelfLoopCount}),w(Ee(j),"directedSelfLoopCount",function(){return j._directedSelfLoopCount}),w(Ee(j),"undirectedSelfLoopCount",function(){return j._undirectedSelfLoopCount}),w(Ee(j),"multi",j._options.multi),w(Ee(j),"type",j._options.type),w(Ee(j),"allowSelfLoops",j._options.allowSelfLoops),w(Ee(j),"implementation",function(){return"graphology"}),j}et(me,ae);var de=me.prototype;return de.hasNode=function(N){return this._nodes.has(""+N)},de.hasDirectedEdge=function(N,j){if("undirected"===this.type)return!1;if(1===arguments.length){var De=this._edges.get(""+N);return!!De&&!De.undirected}if(2===arguments.length){j=""+j;var He=this._nodes.get(N=""+N);if(!He)return!1;var st=He.out[j];return!(!st||this.multi&&!st.size)}throw new be("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},de.hasUndirectedEdge=function(N,j){if("directed"===this.type)return!1;if(1===arguments.length){var De=this._edges.get(""+N);return!!De&&De.undirected}if(2===arguments.length){j=""+j;var He=this._nodes.get(N=""+N);if(!He)return!1;var st=He.undirected[j];return!(!st||this.multi&&!st.size)}throw new be("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},de.hasEdge=function(N,j){if(1===arguments.length)return this._edges.has(""+N);if(2===arguments.length){j=""+j;var De=this._nodes.get(N=""+N);if(!De)return!1;var He=void 0!==De.out&&De.out[j];return He||(He=void 0!==De.undirected&&De.undirected[j]),!(!He||this.multi&&!He.size)}throw new be("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},de.directedEdge=function(N,j){if("undirected"!==this.type){if(N=""+N,j=""+j,this.multi)throw new ve("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var ie=this._nodes.get(N);if(!ie)throw new re('Graph.directedEdge: could not find the "'.concat(N,'" source node in the graph.'));if(!this._nodes.has(j))throw new re('Graph.directedEdge: could not find the "'.concat(j,'" target node in the graph.'));var De=ie.out&&ie.out[j]||void 0;return De?De.key:void 0}},de.undirectedEdge=function(N,j){if("directed"!==this.type){if(N=""+N,j=""+j,this.multi)throw new ve("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var ie=this._nodes.get(N);if(!ie)throw new re('Graph.undirectedEdge: could not find the "'.concat(N,'" source node in the graph.'));if(!this._nodes.has(j))throw new re('Graph.undirectedEdge: could not find the "'.concat(j,'" target node in the graph.'));var De=ie.undirected&&ie.undirected[j]||void 0;return De?De.key:void 0}},de.edge=function(N,j){if(this.multi)throw new ve("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");j=""+j;var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.edge: could not find the "'.concat(N,'" source node in the graph.'));if(!this._nodes.has(j))throw new re('Graph.edge: could not find the "'.concat(j,'" target node in the graph.'));var De=ie.out&&ie.out[j]||ie.undirected&&ie.undirected[j]||void 0;if(De)return De.key},de.inDegree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new be('Graph.inDegree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.inDegree: could not find the "'.concat(N,'" node in the graph.'));return"undirected"===this.type?0:ie.inDegree+(j?ie.directedSelfLoops:0)},de.outDegree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new be('Graph.outDegree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.outDegree: could not find the "'.concat(N,'" node in the graph.'));return"undirected"===this.type?0:ie.outDegree+(j?ie.directedSelfLoops:0)},de.directedDegree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new be('Graph.directedDegree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.directedDegree: could not find the "'.concat(N,'" node in the graph.'));if("undirected"===this.type)return 0;var De=j?ie.directedSelfLoops:0;return ie.inDegree+De+(ie.outDegree+De)},de.undirectedDegree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new be('Graph.undirectedDegree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.undirectedDegree: could not find the "'.concat(N,'" node in the graph.'));return"directed"===this.type?0:ie.undirectedDegree+2*(j?ie.undirectedSelfLoops:0)},de.degree=function(N){var j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof j)throw new be('Graph.degree: Expecting a boolean but got "'.concat(j,'" for the second parameter (allowing self-loops to be counted).'));var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.degree: could not find the "'.concat(N,'" node in the graph.'));var De=0,He=0;return"directed"!==this.type&&(j&&(He=ie.undirectedSelfLoops),De+=ie.undirectedDegree+2*He),"undirected"!==this.type&&(j&&(He=ie.directedSelfLoops),De+=ie.inDegree+ie.outDegree+2*He),De},de.source=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.source: could not find the "'.concat(N,'" edge in the graph.'));return j.source.key},de.target=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.target: could not find the "'.concat(N,'" edge in the graph.'));return j.target.key},de.extremities=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.extremities: could not find the "'.concat(N,'" edge in the graph.'));return[j.source.key,j.target.key]},de.opposite=function(N,j){N=""+N;var ie=this._edges.get(j=""+j);if(!ie)throw new re('Graph.opposite: could not find the "'.concat(j,'" edge in the graph.'));var De=ie.source.key,He=ie.target.key;if(N!==De&&N!==He)throw new re('Graph.opposite: the "'.concat(N,'" node is not attached to the "').concat(j,'" edge (').concat(De,", ").concat(He,")."));return N===De?He:De},de.hasExtremity=function(N,j){j=""+j;var ie=this._edges.get(N=""+N);if(!ie)throw new re('Graph.hasExtremity: could not find the "'.concat(N,'" edge in the graph.'));return ie.source.key===j||ie.target.key===j},de.isUndirected=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.isUndirected: could not find the "'.concat(N,'" edge in the graph.'));return j.undirected},de.isDirected=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.isDirected: could not find the "'.concat(N,'" edge in the graph.'));return!j.undirected},de.isSelfLoop=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.isSelfLoop: could not find the "'.concat(N,'" edge in the graph.'));return j.source===j.target},de.hasGeneratedKey=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.hasGeneratedKey: could not find the "'.concat(N,'" edge in the graph.'));return j.generatedKey},de.addNode=function(N,j){return function(ie,De,He){if(He&&!F(He))throw new be('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(He,'"'));if(He=He||{},ie._nodes.has(De=""+De))throw new ve('Graph.addNode: the "'.concat(De,'" node already exist in the graph.'));var st=new ie.NodeDataClass(De,He);return ie._nodes.set(De,st),ie.emit("nodeAdded",{key:De,attributes:He}),st}(this,N,j).key},de.mergeNode=function(N,j){if(j&&!F(j))throw new be('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(j,'"'));j=j||{};var ie=this._nodes.get(N=""+N);return ie?(j&&(pe(ie.attributes,j),this.emit("nodeAttributesUpdated",{type:"merge",key:N,attributes:ie.attributes,data:j})),N):(ie=new this.NodeDataClass(N,j),this._nodes.set(N,ie),this.emit("nodeAdded",{key:N,attributes:j}),N)},de.updateNode=function(N,j){if(j&&"function"!=typeof j)throw new be('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(j,'"'));var ie=this._nodes.get(N=""+N);if(ie)return j&&(ie.attributes=j(ie.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:N,attributes:ie.attributes})),N;var He=j?j({}):{};return ie=new this.NodeDataClass(N,He),this._nodes.set(N,ie),this.emit("nodeAdded",{key:N,attributes:He}),N},de.dropNode=function(N){var j=this,ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.dropNode: could not find the "'.concat(N,'" node in the graph.'));this.forEachEdge(N,function(De){j.dropEdge(De)}),this._nodes.delete(N),this.emit("nodeDropped",{key:N,attributes:ie.attributes})},de.dropEdge=function(N){var j;if(arguments.length>1){var ie=""+arguments[0],De=""+arguments[1];if(!(j=X(this,ie,De,this.type)))throw new re('Graph.dropEdge: could not find the "'.concat(ie,'" -> "').concat(De,'" edge in the graph.'))}else if(!(j=this._edges.get(N=""+N)))throw new re('Graph.dropEdge: could not find the "'.concat(N,'" edge in the graph.'));this._edges.delete(j.key);var st=j.source,Nt=j.target,tt=j.attributes,qt=j.undirected;return st===Nt?qt?(st.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(st.directedSelfLoops--,this._directedSelfLoopCount--):qt?(st.undirectedDegree--,Nt.undirectedDegree--):(st.outDegree--,Nt.inDegree--),_e(this,qt,j),qt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:N,attributes:tt,source:st.key,target:Nt.key,undirected:qt}),this},de.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},de.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},de.getAttribute=function(N){return this._attributes[N]},de.getAttributes=function(){return this._attributes},de.hasAttribute=function(N){return this._attributes.hasOwnProperty(N)},de.setAttribute=function(N,j){return this._attributes[N]=j,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:N}),this},de.updateAttribute=function(N,j){if("function"!=typeof j)throw new be("Graph.updateAttribute: updater should be a function.");return this._attributes[N]=j(this._attributes[N]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:N}),this},de.removeAttribute=function(N){return delete this._attributes[N],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:N}),this},de.replaceAttributes=function(N){if(!F(N))throw new be("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=N,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},de.mergeAttributes=function(N){if(!F(N))throw new be("Graph.mergeAttributes: provided attributes are not a plain object.");return pe(this._attributes,N),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:N}),this},de.getNodeAttribute=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.getNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));return ie.attributes[j]},de.getNodeAttributes=function(N){var j=this._nodes.get(N=""+N);if(!j)throw new re('Graph.getNodeAttributes: could not find the "'.concat(N,'" node in the graph.'));return j.attributes},de.hasNodeAttribute=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.hasNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));return ie.attributes.hasOwnProperty(j)},de.setNodeAttribute=function(N,j,ie){var De=this._nodes.get(N=""+N);if(!De)throw new re('Graph.setNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));if(arguments.length<3)throw new be("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return De.attributes[j]=ie,this.emit("nodeAttributesUpdated",{key:N,type:"set",attributes:De.attributes,name:j}),this},de.updateNodeAttribute=function(N,j,ie){var De=this._nodes.get(N=""+N);if(!De)throw new re('Graph.updateNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));if(arguments.length<3)throw new be("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof ie)throw new be("Graph.updateAttribute: updater should be a function.");var He=De.attributes,st=ie(He[j]);return He[j]=st,this.emit("nodeAttributesUpdated",{key:N,type:"set",attributes:De.attributes,name:j}),this},de.removeNodeAttribute=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.hasNodeAttribute: could not find the "'.concat(N,'" node in the graph.'));return delete ie.attributes[j],this.emit("nodeAttributesUpdated",{key:N,type:"remove",attributes:ie.attributes,name:j}),this},de.replaceNodeAttributes=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.replaceNodeAttributes: could not find the "'.concat(N,'" node in the graph.'));if(!F(j))throw new be("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return ie.attributes=j,this.emit("nodeAttributesUpdated",{key:N,type:"replace",attributes:ie.attributes}),this},de.mergeNodeAttributes=function(N,j){var ie=this._nodes.get(N=""+N);if(!ie)throw new re('Graph.mergeNodeAttributes: could not find the "'.concat(N,'" node in the graph.'));if(!F(j))throw new be("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return pe(ie.attributes,j),this.emit("nodeAttributesUpdated",{key:N,type:"merge",attributes:ie.attributes,data:j}),this},de.updateEachNodeAttributes=function(N,j){if("function"!=typeof N)throw new be("Graph.updateEachNodeAttributes: expecting an updater function.");if(j&&!C(j))throw new be("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ie,De,He=this._nodes.values();!0!==(ie=He.next()).done;)(De=ie.value).attributes=N(De.key,De.attributes);this.emit("eachNodeAttributesUpdated",{hints:j||null})},de.updateEachEdgeAttributes=function(N,j){if("function"!=typeof N)throw new be("Graph.updateEachEdgeAttributes: expecting an updater function.");if(j&&!C(j))throw new be("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ie,De,He=this._edges.values();!0!==(ie=He.next()).done;)(De=ie.value).attributes=N(De.key,De.attributes);this.emit("eachEdgeAttributesUpdated",{hints:j||null})},de.forEach=function(N){if("function"!=typeof N)throw new be("Graph.forEach: expecting a callback.");this.multi?ht(!1,this,N):We(!1,this,N)},de.forEachUntil=function(N){if("function"!=typeof N)throw new be("Graph.forEach: expecting a callback.");this.multi?ht(!0,this,N):We(!0,this,N)},de.adjacency=function(){return this.multi?(st=(N=this)._nodes.values(),Nt=N.type,tt="outer",qt=null,new se(function St(){var vn;if("outer"===tt)return!0===(vn=st.next()).done?vn:(j=vn.value,tt="directed",St());if("directed"===tt)return"undirected"===Nt?(tt="undirected",St()):(De=j.out,ie=Object.keys(j.out),He=0,tt="inner-directed",St());if("undirected"===tt){if("directed"===Nt)return tt="outer",St();De=j.undirected,ie=Object.keys(j.undirected),He=0,tt="inner-undirected"}if(!qt&&He>=ie.length)return tt="inner-undirected"===tt?"outer":"undirected",St();if(!qt){var Es=ie[He++];return qt=De[Es].values(),St()}if((vn=qt.next()).done)return qt=null,St();var Zr=vn.value,Js=Zr.target;return"inner-undirected"===tt&&Js.key===j.key&&(Js=Zr.source),{done:!1,value:[j.key,Js.key,j.attributes,Js.attributes,Zr.key,Zr.attributes]}})):(Fl=(St=this)._nodes.values(),fo=St.type,Br="outer",new se(function Vs(){var Ac;if("outer"===Br)return!0===(Ac=Fl.next()).done?Ac:(vn=Ac.value,Br="directed",Vs());if("directed"===Br)return"undirected"===fo?(Br="undirected",Vs()):(Zr=vn.out,Es=Object.keys(vn.out),Js=0,Br="inner-directed",Vs());if("undirected"===Br){if("directed"===fo)return Br="outer",Vs();Zr=vn.undirected,Es=Object.keys(vn.undirected),Js=0,Br="inner-undirected"}if(Js>=Es.length)return Br="inner-undirected"===Br?"outer":"undirected",Vs();var xn=Es[Js++],po=Zr[xn],Ll=po.target;return"inner-undirected"===Br&&Ll.key===vn.key&&(Ll=po.source),{done:!1,value:[vn.key,Ll.key,vn.attributes,Ll.attributes,po.key,po.attributes]}}));var St,vn,Es,Zr,Js,Fl,fo,Br,N,j,ie,De,He,st,Nt,tt,qt},de.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):te(this._nodes.keys(),this._nodes.size)},de.forEachNode=function(N){if("function"!=typeof N)throw new be("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(j,ie){N(ie,j.attributes)})},de.forEachNodeUntil=function(N){if("function"!=typeof N)throw new be("Graph.forEachNode: expecting a callback.");for(var j,ie,De=this._nodes.values();!0!==(j=De.next())&&!N((ie=j.value).key,ie.attributes););},de.nodeEntries=function(){var N=this._nodes.values();return new se(function(){var j=N.next();if(j.done)return j;var ie=j.value;return{value:[ie.key,ie.attributes],done:!1}})},de.exportNode=function(N){var j=this._nodes.get(N=""+N);if(!j)throw new re('Graph.exportNode: could not find the "'.concat(N,'" node in the graph.'));return rt(N,j)},de.exportEdge=function(N){var j=this._edges.get(N=""+N);if(!j)throw new re('Graph.exportEdge: could not find the "'.concat(N,'" edge in the graph.'));return Dt(N,j)},de.export=function(){var N=new Array(this._nodes.size),j=0;this._nodes.forEach(function(De,He){N[j++]=rt(He,De)});var ie=new Array(this._edges.size);return j=0,this._edges.forEach(function(De,He){ie[j++]=Dt(He,De)}),{attributes:this.getAttributes(),nodes:N,edges:ie,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},de.importNode=function(N){var j=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ie=It(N);if(ie){if("not-object"===ie)throw new be('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===ie)throw new be("Graph.importNode: no key provided.");if("invalid-attributes"===ie)throw new be("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var De=N.key,He=N.attributes,st=void 0===He?{}:He;return j?this.mergeNode(De,st):this.addNode(De,st),this},de.importEdge=function(N){var j=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ie=Ot(N);if(ie){if("not-object"===ie)throw new be('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===ie)throw new be("Graph.importEdge: missing souce.");if("no-target"===ie)throw new be("Graph.importEdge: missing target.");if("invalid-attributes"===ie)throw new be("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===ie)throw new be("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var De=N.source,He=N.target,st=N.attributes,Nt=void 0===st?{}:st,tt=N.undirected,qt=void 0!==tt&&tt;return"key"in N?(j?qt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:qt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,N.key,De,He,Nt):(j?qt?this.mergeUndirectedEdge:this.mergeDirectedEdge:qt?this.addUndirectedEdge:this.addDirectedEdge).call(this,De,He,Nt),this},de.import=function(N){var j,ie,De,He=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(U(N))return this.import(N.export(),He),this;if(!F(N))throw new be("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(N.attributes){if(!F(N.attributes))throw new be("Graph.import: invalid attributes. Expecting a plain object.");He?this.mergeAttributes(N.attributes):this.replaceAttributes(N.attributes)}if(N.nodes){if(De=N.nodes,!Array.isArray(De))throw new be("Graph.import: invalid nodes. Expecting an array.");for(j=0,ie=De.length;j<ie;j++)this.importNode(De[j],He)}if(N.edges){if(De=N.edges,!Array.isArray(De))throw new be("Graph.import: invalid edges. Expecting an array.");for(j=0,ie=De.length;j<ie;j++)this.importEdge(De[j],He)}return this},de.nullCopy=function(N){return new me(pe({},this._options,N))},de.emptyCopy=function(N){var j=this.nullCopy(N);return this._nodes.forEach(function(ie,De){var He=pe({},ie.attributes);ie=new j.NodeDataClass(De,He),j._nodes.set(De,ie)}),j},de.copy=function(){var N=new me(this._options);return N.import(this),N},de.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(N){return N.upgradeToMixed()}),this._options.type="mixed",w(this,"type",this._options.type),B(this,"NodeDataClass",Fe)),this},de.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,w(this,"multi",!0),(N=this)._nodes.forEach(function(j,ie){if(j.out)for(var De in j.out){var He=new Set;He.add(j.out[De]),j.out[De]=He,N._nodes.get(De).in[ie]=He}if(j.undirected)for(var st in j.undirected)if(!(st>ie)){var Nt=new Set;Nt.add(j.undirected[st]),j.undirected[st]=Nt,N._nodes.get(st).undirected[ie]=Nt}})),this;var N},de.clearIndex=function(){return this._nodes.forEach(function(N){void 0!==N.in&&(N.in={},N.out={}),void 0!==N.undirected&&(N.undirected={})}),this},de.toJSON=function(){return this.export()},de.toString=function(){return"[object Graph]"},de.inspect=function(){var N=this,j={};this._nodes.forEach(function(Nt,tt){j[tt]=Nt.attributes});var ie={},De={};this._edges.forEach(function(Nt,tt){var qt=Nt.undirected?"--":"->",St="",vn="(".concat(Nt.source.key,")").concat(qt,"(").concat(Nt.target.key,")");Nt.generatedKey?N.multi&&(void 0===De[vn]?De[vn]=0:De[vn]++,St+="".concat(De[vn],". ")):St+="[".concat(tt,"]: "),ie[St+=vn]=Nt.attributes});var He={};for(var st in this)this.hasOwnProperty(st)&&!zn.has(st)&&"function"!=typeof this[st]&&(He[st]=this[st]);return He.attributes=this._attributes,He.nodes=j,He.edges=ie,B(He,"constructor",this.constructor),He},me}(M.exports.EventEmitter);"undefined"!=typeof Symbol&&(Cn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Cn.prototype.inspect),[{name:function(ae){return"".concat(ae,"Edge")},generateKey:!0},{name:function(ae){return"".concat(ae,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(ae){return"".concat(ae,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(ae){return"".concat(ae,"EdgeWithKey")}},{name:function(ae){return"".concat(ae,"DirectedEdgeWithKey")},type:"directed"},{name:function(ae){return"".concat(ae,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(ae){["add","merge","update"].forEach(function(me){var de=ae.name(me),N="add"===me?bn:Xn;Cn.prototype[de]=ae.generateKey?function(j,ie,De){return N(this,de,!0,"undirected"===(ae.type||this.type),null,j,ie,De,"update"===me)}:function(j,ie,De,He){return N(this,de,!1,"undirected"===(ae.type||this.type),j,ie,De,He,"update"===me)}})}),"undefined"!=typeof Symbol&&(Cn.prototype[Symbol.iterator]=Cn.prototype.adjacency),ae=Cn,Me.forEach(function(me){var de=me.name,N=me.attacher;N(ae,de("Edge"),"mixed"),N(ae,de("DirectedEdge"),"directed"),N(ae,de("UndirectedEdge"),"undirected")}),function(ae){Se.forEach(function(me){var N,j,ie,De;ie=(N=me).type,De=N.direction,ae.prototype[j=N.name]=function(He,st){if("mixed"!==ie&&"mixed"!==this.type&&ie!==this.type)return[];if(!arguments.length)return Le(this,ie);if(1===arguments.length){var Nt=this._nodes.get(He=""+He);if(void 0===Nt)throw new re("Graph.".concat(j,': could not find the "').concat(He,'" node in the graph.'));return In(this.multi,"mixed"===ie?this.type:ie,De,Nt)}if(2===arguments.length){st=""+st;var tt=this._nodes.get(He=""+He);if(!tt)throw new re("Graph.".concat(j,':  could not find the "').concat(He,'" source node in the graph.'));if(!this._nodes.has(st))throw new re("Graph.".concat(j,':  could not find the "').concat(st,'" target node in the graph.'));return xi(ie,this.multi,De,tt,st)}throw new be("Graph.".concat(j,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(de,N){var j=N.name,ie=N.type,De=N.direction,He="forEach"+j[0].toUpperCase()+j.slice(1,-1);de.prototype[He]=function(st,Nt,tt){if("mixed"===ie||"mixed"===this.type||ie===this.type){if(1===arguments.length)return it(this,ie,tt=st);if(2===arguments.length){tt=Nt;var qt=this._nodes.get(st=""+st);if(void 0===qt)throw new re("Graph.".concat(He,': could not find the "').concat(st,'" node in the graph.'));return Pn(this.multi,"mixed"===ie?this.type:ie,De,qt,tt)}if(3===arguments.length){Nt=""+Nt;var St=this._nodes.get(st=""+st);if(!St)throw new re("Graph.".concat(He,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Nt))throw new re("Graph.".concat(He,':  could not find the "').concat(Nt,'" target node in the graph.'));return Xr(ie,this.multi,De,St,Nt,tt)}throw new be("Graph.".concat(He,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ae,me),function(de,N){var j=N.name,ie=N.type,De=N.direction,He="forEach"+j[0].toUpperCase()+j.slice(1,-1)+"Until";de.prototype[He]=function(st,Nt,tt){if("mixed"===ie||"mixed"===this.type||ie===this.type){if(1===arguments.length)return At(this,ie,tt=st);if(2===arguments.length){tt=Nt;var qt=this._nodes.get(st=""+st);if(void 0===qt)throw new re("Graph.".concat(He,': could not find the "').concat(st,'" node in the graph.'));return Yn(this.multi,"mixed"===ie?this.type:ie,De,qt,tt)}if(3===arguments.length){Nt=""+Nt;var St=this._nodes.get(st=""+st);if(!St)throw new re("Graph.".concat(He,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Nt))throw new re("Graph.".concat(He,':  could not find the "').concat(Nt,'" target node in the graph.'));return Ls(ie,this.multi,De,St,Nt,tt)}throw new be("Graph.".concat(He,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ae,me),function(de,N){var ie=N.type,De=N.direction,He=N.name.slice(0,-1)+"Entries";de.prototype[He]=function(st,Nt){if("mixed"!==ie&&"mixed"!==this.type&&ie!==this.type)return se.empty();if(!arguments.length)return kt(this,ie);if(1===arguments.length){var tt=this._nodes.get(st=""+st);if(!tt)throw new re("Graph.".concat(He,': could not find the "').concat(st,'" node in the graph.'));return Mi(ie,De,tt)}if(2===arguments.length){Nt=""+Nt;var qt=this._nodes.get(st=""+st);if(!qt)throw new re("Graph.".concat(He,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(Nt))throw new re("Graph.".concat(He,':  could not find the "').concat(Nt,'" target node in the graph.'));return fs(ie,De,qt,Nt)}throw new be("Graph.".concat(He,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(ae,me)})}(Cn),function(ae){Bs.forEach(function(me){var N,j,ie,De;ie=(N=me).type,De=N.direction,ae.prototype[j=N.name]=function(He){if("mixed"!==ie&&"mixed"!==this.type&&ie!==this.type)return[];if(2===arguments.length){var st=""+arguments[0],Nt=""+arguments[1];if(!this._nodes.has(st))throw new re("Graph.".concat(j,': could not find the "').concat(st,'" node in the graph.'));if(!this._nodes.has(Nt))throw new re("Graph.".concat(j,': could not find the "').concat(Nt,'" node in the graph.'));return ut(this,ie,De,st,Nt)}if(1===arguments.length){var tt=this._nodes.get(He=""+He);if(void 0===tt)throw new re("Graph.".concat(j,': could not find the "').concat(He,'" node in the graph.'));return xa("mixed"===ie?this.type:ie,De,tt)}throw new be("Graph.".concat(j,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function(ae,me){var de=me.name,N=me.type,j=me.direction,ie="forEach"+de[0].toUpperCase()+de.slice(1,-1);ae.prototype[ie]=function(De,He){if("mixed"===N||"mixed"===this.type||N===this.type){var st=this._nodes.get(De=""+De);if(void 0===st)throw new re("Graph.".concat(ie,': could not find the "').concat(De,'" node in the graph.'));!function(Nt,tt,qt,St){if("mixed"!==Nt){if("undirected"===Nt)return kl(qt,qt.undirected,St);if("string"==typeof tt)return kl(qt,qt[tt],St)}var vn=new Set;"undirected"!==Nt&&("out"!==tt&&Sa(vn,qt,qt.in,St),"in"!==tt&&Sa(vn,qt,qt.out,St)),"directed"!==Nt&&Sa(vn,qt,qt.undirected,St)}("mixed"===N?this.type:N,j,st,He)}}}(ae,me),function(ae,me){var de=me.name,N=me.type,j=me.direction,ie="forEach"+de[0].toUpperCase()+de.slice(1,-1)+"Until";ae.prototype[ie]=function(De,He){if("mixed"===N||"mixed"===this.type||N===this.type){var st=this._nodes.get(De=""+De);if(void 0===st)throw new re("Graph.".concat(ie,': could not find the "').concat(De,'" node in the graph.'));!function(Nt,tt,qt,St){if("mixed"!==Nt){if("undirected"===Nt)return ws(qt,qt.undirected,St);if("string"==typeof tt)return ws(qt,qt[tt],St)}var vn=new Set;"undirected"!==Nt&&("out"!==tt&&en(vn,qt,qt.in,St)||"in"!==tt&&en(vn,qt,qt.out,St))||"directed"===Nt||en(vn,qt,qt.undirected,St)}("mixed"===N?this.type:N,j,st,He)}}}(ae,me),function(ae,me){var N=me.type,j=me.direction,ie=me.name.slice(0,-1)+"Entries";ae.prototype[ie]=function(De){if("mixed"!==N&&"mixed"!==this.type&&N!==this.type)return se.empty();var He=this._nodes.get(De=""+De);if(void 0===He)throw new re("Graph.".concat(ie,': could not find the "').concat(De,'" node in the graph.'));return function(st,Nt,tt){if("mixed"!==st){if("undirected"===st)return nl(tt,tt.undirected);if("string"==typeof Nt)return nl(tt,tt[Nt])}var qt=se.empty(),St=new Set;return"undirected"!==st&&("out"!==Nt&&(qt=$e(qt,ot(St,tt,tt.in))),"in"!==Nt&&(qt=$e(qt,ot(St,tt,tt.out)))),"directed"!==st&&(qt=$e(qt,ot(St,tt,tt.undirected))),qt}("mixed"===N?this.type:N,j,He)}}(ae,me)})}(Cn);var rr=function(ae){function me(de){var N=pe({type:"directed"},de);if("multi"in N&&!1!==N.multi)throw new be("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==N.type)throw new be('DirectedGraph.from: inconsistent "'+N.type+'" type in given options!');return ae.call(this,N)||this}return et(me,ae),me}(Cn),sr=function(ae){function me(de){var N=pe({type:"undirected"},de);if("multi"in N&&!1!==N.multi)throw new be("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==N.type)throw new be('UndirectedGraph.from: inconsistent "'+N.type+'" type in given options!');return ae.call(this,N)||this}return et(me,ae),me}(Cn),Qn=function(ae){function me(de){var N=pe({multi:!0},de);if("multi"in N&&!0!==N.multi)throw new be("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return ae.call(this,N)||this}return et(me,ae),me}(Cn),Wi=function(ae){function me(de){var N=pe({type:"directed",multi:!0},de);if("multi"in N&&!0!==N.multi)throw new be("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==N.type)throw new be('MultiDirectedGraph.from: inconsistent "'+N.type+'" type in given options!');return ae.call(this,N)||this}return et(me,ae),me}(Cn),Ca=function(ae){function me(de){var N=pe({type:"undirected",multi:!0},de);if("multi"in N&&!0!==N.multi)throw new be("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==N.type)throw new be('MultiUndirectedGraph.from: inconsistent "'+N.type+'" type in given options!');return ae.call(this,N)||this}return et(me,ae),me}(Cn);function Qr(ae){ae.from=function(me,de){var N=pe({},me.options,de),j=new ae(N);return j.import(me),j}}return Qr(Cn),Qr(rr),Qr(sr),Qr(Qn),Qr(Wi),Qr(Ca),Cn.Graph=Cn,Cn.DirectedGraph=rr,Cn.UndirectedGraph=sr,Cn.MultiGraph=Qn,Cn.MultiDirectedGraph=Wi,Cn.MultiUndirectedGraph=Ca,Cn.InvalidArgumentsGraphError=be,Cn.NotFoundGraphError=re,Cn.UsageGraphError=ve,Cn}()},1524:(Vt,Xe,et)=>{var lt;!function(ee,Ct,je,Q){"use strict";var M,Ee=["","webkit","Moz","MS","ms","o"],pe=Ct.createElement("div"),U=Math.round,F=Math.abs,Y=Date.now;function B(xe,Pe,Je){return setTimeout(S(xe,Je),Pe)}function w(xe,Pe,Je){return!!Array.isArray(xe)&&(C(xe,Je[Pe],Je),!0)}function C(xe,Pe,Je){var vt;if(xe)if(xe.forEach)xe.forEach(Pe,Je);else if(xe.length!==Q)for(vt=0;vt<xe.length;)Pe.call(Je,xe[vt],vt,xe),vt++;else for(vt in xe)xe.hasOwnProperty(vt)&&Pe.call(Je,xe[vt],vt,xe)}function R(xe,Pe,Je){var vt="DEPRECATED METHOD: "+Pe+"\n"+Je+" AT \n";return function(){var $t=new Error("get-stack-trace"),Xt=$t&&$t.stack?$t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ui=ee.console&&(ee.console.warn||ee.console.log);return ui&&ui.call(ee.console,vt,Xt),xe.apply(this,arguments)}}M="function"!=typeof Object.assign?function(Pe){if(Pe===Q||null===Pe)throw new TypeError("Cannot convert undefined or null to object");for(var Je=Object(Pe),vt=1;vt<arguments.length;vt++){var $t=arguments[vt];if($t!==Q&&null!==$t)for(var Xt in $t)$t.hasOwnProperty(Xt)&&(Je[Xt]=$t[Xt])}return Je}:Object.assign;var y=R(function(Pe,Je,vt){for(var $t=Object.keys(Je),Xt=0;Xt<$t.length;)(!vt||vt&&Pe[$t[Xt]]===Q)&&(Pe[$t[Xt]]=Je[$t[Xt]]),Xt++;return Pe},"extend","Use `assign`."),v=R(function(Pe,Je){return y(Pe,Je,!0)},"merge","Use `assign`.");function b(xe,Pe,Je){var $t,vt=Pe.prototype;($t=xe.prototype=Object.create(vt)).constructor=xe,$t._super=vt,Je&&M($t,Je)}function S(xe,Pe){return function(){return xe.apply(Pe,arguments)}}function T(xe,Pe){return"function"==typeof xe?xe.apply(Pe&&Pe[0]||Q,Pe):xe}function E(xe,Pe){return xe===Q?Pe:xe}function O(xe,Pe,Je){C(Z(Pe),function(vt){xe.addEventListener(vt,Je,!1)})}function $(xe,Pe,Je){C(Z(Pe),function(vt){xe.removeEventListener(vt,Je,!1)})}function D(xe,Pe){for(;xe;){if(xe==Pe)return!0;xe=xe.parentNode}return!1}function P(xe,Pe){return xe.indexOf(Pe)>-1}function Z(xe){return xe.trim().split(/\s+/g)}function x(xe,Pe,Je){if(xe.indexOf&&!Je)return xe.indexOf(Pe);for(var vt=0;vt<xe.length;){if(Je&&xe[vt][Je]==Pe||!Je&&xe[vt]===Pe)return vt;vt++}return-1}function W(xe){return Array.prototype.slice.call(xe,0)}function ne(xe,Pe,Je){for(var vt=[],$t=[],Xt=0;Xt<xe.length;){var ui=Pe?xe[Xt][Pe]:xe[Xt];x($t,ui)<0&&vt.push(xe[Xt]),$t[Xt]=ui,Xt++}return Je&&(vt=Pe?vt.sort(function(Jr,xs){return Jr[Pe]>xs[Pe]}):vt.sort()),vt}function ue(xe,Pe){for(var Je,vt,$t=Pe[0].toUpperCase()+Pe.slice(1),Xt=0;Xt<Ee.length;){if((vt=(Je=Ee[Xt])?Je+$t:Pe)in xe)return vt;Xt++}return Q}var se=1;function Re(xe){var Pe=xe.ownerDocument||xe;return Pe.defaultView||Pe.parentWindow||ee}var re="ontouchstart"in ee,ve=ue(ee,"PointerEvent")!==Q,Fe=re&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ze="touch",J="mouse",_t=["x","y"],gt=["clientX","clientY"];function Ae(xe,Pe){var Je=this;this.manager=xe,this.callback=Pe,this.element=xe.element,this.target=xe.options.inputTarget,this.domHandler=function(vt){T(xe.options.enable,[xe])&&Je.handler(vt)},this.init()}function L(xe,Pe,Je){var vt=Je.pointers.length,$t=Je.changedPointers.length,Xt=1&Pe&&vt-$t==0,ui=12&Pe&&vt-$t==0;Je.isFirst=!!Xt,Je.isFinal=!!ui,Xt&&(xe.session={}),Je.eventType=Pe,function(xe,Pe){var Je=xe.session,vt=Pe.pointers,$t=vt.length;Je.firstInput||(Je.firstInput=At(Pe)),$t>1&&!Je.firstMultiple?Je.firstMultiple=At(Pe):1===$t&&(Je.firstMultiple=!1);var Xt=Je.firstInput,ui=Je.firstMultiple,Vr=ui?ui.center:Xt.center,Jr=Pe.center=kt(vt);Pe.timeStamp=Y(),Pe.deltaTime=Pe.timeStamp-Xt.timeStamp,Pe.angle=Mi(Vr,Jr),Pe.distance=Yn(Vr,Jr),function(xe,Pe){var Je=Pe.center,vt=xe.offsetDelta||{},$t=xe.prevDelta||{},Xt=xe.prevInput||{};(1===Pe.eventType||4===Xt.eventType)&&($t=xe.prevDelta={x:Xt.deltaX||0,y:Xt.deltaY||0},vt=xe.offsetDelta={x:Je.x,y:Je.y}),Pe.deltaX=$t.x+(Je.x-vt.x),Pe.deltaY=$t.y+(Je.y-vt.y)}(Je,Pe),Pe.offsetDirection=Pn(Pe.deltaX,Pe.deltaY);var xs=In(Pe.deltaTime,Pe.deltaX,Pe.deltaY);Pe.overallVelocityX=xs.x,Pe.overallVelocityY=xs.y,Pe.overallVelocity=F(xs.x)>F(xs.y)?xs.x:xs.y,Pe.scale=ui?function(xe,Pe){return Yn(Pe[0],Pe[1],gt)/Yn(xe[0],xe[1],gt)}(ui.pointers,vt):1,Pe.rotation=ui?function(xe,Pe){return Mi(Pe[1],Pe[0],gt)+Mi(xe[1],xe[0],gt)}(ui.pointers,vt):0,Pe.maxPointers=Je.prevInput?Pe.pointers.length>Je.prevInput.maxPointers?Pe.pointers.length:Je.prevInput.maxPointers:Pe.pointers.length,function(xe,Pe){var $t,Xt,ui,Vr,Je=xe.lastInterval||Pe,vt=Pe.timeStamp-Je.timeStamp;if(8!=Pe.eventType&&(vt>25||Je.velocity===Q)){var Jr=Pe.deltaX-Je.deltaX,xs=Pe.deltaY-Je.deltaY,Zn=In(vt,Jr,xs);Xt=Zn.x,ui=Zn.y,$t=F(Zn.x)>F(Zn.y)?Zn.x:Zn.y,Vr=Pn(Jr,xs),xe.lastInterval=Pe}else $t=Je.velocity,Xt=Je.velocityX,ui=Je.velocityY,Vr=Je.direction;Pe.velocity=$t,Pe.velocityX=Xt,Pe.velocityY=ui,Pe.direction=Vr}(Je,Pe);var Zn=xe.element;D(Pe.srcEvent.target,Zn)&&(Zn=Pe.srcEvent.target),Pe.target=Zn}(xe,Je),xe.emit("hammer.input",Je),xe.recognize(Je),xe.session.prevInput=Je}function At(xe){for(var Pe=[],Je=0;Je<xe.pointers.length;)Pe[Je]={clientX:U(xe.pointers[Je].clientX),clientY:U(xe.pointers[Je].clientY)},Je++;return{timeStamp:Y(),pointers:Pe,center:kt(Pe),deltaX:xe.deltaX,deltaY:xe.deltaY}}function kt(xe){var Pe=xe.length;if(1===Pe)return{x:U(xe[0].clientX),y:U(xe[0].clientY)};for(var Je=0,vt=0,$t=0;$t<Pe;)Je+=xe[$t].clientX,vt+=xe[$t].clientY,$t++;return{x:U(Je/Pe),y:U(vt/Pe)}}function In(xe,Pe,Je){return{x:Pe/xe||0,y:Je/xe||0}}function Pn(xe,Pe){return xe===Pe?1:F(xe)>=F(Pe)?xe<0?2:4:Pe<0?8:16}function Yn(xe,Pe,Je){Je||(Je=_t);var vt=Pe[Je[0]]-xe[Je[0]],$t=Pe[Je[1]]-xe[Je[1]];return Math.sqrt(vt*vt+$t*$t)}function Mi(xe,Pe,Je){return Je||(Je=_t),180*Math.atan2(Pe[Je[1]]-xe[Je[1]],Pe[Je[0]]-xe[Je[0]])/Math.PI}Ae.prototype={handler:function(){},init:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(Re(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&$(this.element,this.evEl,this.domHandler),this.evTarget&&$(this.target,this.evTarget,this.domHandler),this.evWin&&$(Re(this.element),this.evWin,this.domHandler)}};var Ls={mousedown:1,mousemove:2,mouseup:4},fs="mousedown",Bs="mousemove mouseup";function Kr(){this.evEl=fs,this.evWin=Bs,this.pressed=!1,Ae.apply(this,arguments)}b(Kr,Ae,{handler:function(Pe){var Je=Ls[Pe.type];1&Je&&0===Pe.button&&(this.pressed=!0),2&Je&&1!==Pe.which&&(Je=4),this.pressed&&(4&Je&&(this.pressed=!1),this.callback(this.manager,Je,{pointers:[Pe],changedPointers:[Pe],pointerType:J,srcEvent:Pe}))}});var xa={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},kl={2:Ze,3:"pen",4:J,5:"kinect"},Sa="pointerdown",ws="pointermove pointerup pointercancel";function en(){this.evEl=Sa,this.evWin=ws,Ae.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ee.MSPointerEvent&&!ee.PointerEvent&&(Sa="MSPointerDown",ws="MSPointerMove MSPointerUp MSPointerCancel"),b(en,Ae,{handler:function(Pe){var Je=this.store,vt=!1,$t=Pe.type.toLowerCase().replace("ms",""),Xt=xa[$t],ui=kl[Pe.pointerType]||Pe.pointerType,Vr=ui==Ze,Jr=x(Je,Pe.pointerId,"pointerId");1&Xt&&(0===Pe.button||Vr)?Jr<0&&(Je.push(Pe),Jr=Je.length-1):12&Xt&&(vt=!0),!(Jr<0)&&(Je[Jr]=Pe,this.callback(this.manager,Xt,{pointers:Je,changedPointers:[Pe],pointerType:ui,srcEvent:Pe}),vt&&Je.splice(Jr,1))}});var nl={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ot="touchstart",ut="touchstart touchmove touchend touchcancel";function ft(){this.evTarget=ot,this.evWin=ut,this.started=!1,Ae.apply(this,arguments)}function ye(xe,Pe){var Je=W(xe.touches),vt=W(xe.changedTouches);return 12&Pe&&(Je=ne(Je.concat(vt),"identifier",!0)),[Je,vt]}b(ft,Ae,{handler:function(Pe){var Je=nl[Pe.type];if(1===Je&&(this.started=!0),this.started){var vt=ye.call(this,Pe,Je);12&Je&&vt[0].length-vt[1].length==0&&(this.started=!1),this.callback(this.manager,Je,{pointers:vt[0],changedPointers:vt[1],pointerType:Ze,srcEvent:Pe})}}});var Te={touchstart:1,touchmove:2,touchend:4,touchcancel:8},We="touchstart touchmove touchend touchcancel";function ht(){this.evTarget=We,this.targetIds={},Ae.apply(this,arguments)}function rt(xe,Pe){var Je=W(xe.touches),vt=this.targetIds;if(3&Pe&&1===Je.length)return vt[Je[0].identifier]=!0,[Je,Je];var $t,Xt,ui=W(xe.changedTouches),Vr=[],Jr=this.target;if(Xt=Je.filter(function(xs){return D(xs.target,Jr)}),1===Pe)for($t=0;$t<Xt.length;)vt[Xt[$t].identifier]=!0,$t++;for($t=0;$t<ui.length;)vt[ui[$t].identifier]&&Vr.push(ui[$t]),12&Pe&&delete vt[ui[$t].identifier],$t++;return Vr.length?[ne(Xt.concat(Vr),"identifier",!0),Vr]:void 0}function Ot(){Ae.apply(this,arguments);var xe=S(this.handler,this);this.touch=new ht(this.manager,xe),this.mouse=new Kr(this.manager,xe),this.primaryTouch=null,this.lastTouches=[]}function Qt(xe,Pe){1&xe?(this.primaryTouch=Pe.changedPointers[0].identifier,zn.call(this,Pe)):12&xe&&zn.call(this,Pe)}function zn(xe){var Pe=xe.changedPointers[0];if(Pe.identifier===this.primaryTouch){var Je={x:Pe.clientX,y:Pe.clientY};this.lastTouches.push(Je);var vt=this.lastTouches;setTimeout(function(){var Xt=vt.indexOf(Je);Xt>-1&&vt.splice(Xt,1)},2500)}}function ci(xe){for(var Pe=xe.srcEvent.clientX,Je=xe.srcEvent.clientY,vt=0;vt<this.lastTouches.length;vt++){var $t=this.lastTouches[vt],Xt=Math.abs(Pe-$t.x),ui=Math.abs(Je-$t.y);if(Xt<=25&&ui<=25)return!0}return!1}b(ht,Ae,{handler:function(Pe){var Je=Te[Pe.type],vt=rt.call(this,Pe,Je);!vt||this.callback(this.manager,Je,{pointers:vt[0],changedPointers:vt[1],pointerType:Ze,srcEvent:Pe})}}),b(Ot,Ae,{handler:function(Pe,Je,vt){var Xt=vt.pointerType==J;if(!(Xt&&vt.sourceCapabilities&&vt.sourceCapabilities.firesTouchEvents)){if(vt.pointerType==Ze)Qt.call(this,Je,vt);else if(Xt&&ci.call(this,vt))return;this.callback(Pe,Je,vt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Rn=ue(pe.style,"touchAction"),bn=Rn!==Q,Xn="compute",rr="manipulation",sr="none",Qn="pan-x",Wi="pan-y",Ca=function(){if(!bn)return!1;var xe={},Pe=ee.CSS&&ee.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Je){xe[Je]=!Pe||ee.CSS.supports("touch-action",Je)}),xe}();function Qr(xe,Pe){this.manager=xe,this.set(Pe)}function Nt(xe){this.options=M({},this.defaults,xe||{}),this.id=se++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function tt(xe){return 16&xe?"cancel":8&xe?"end":4&xe?"move":2&xe?"start":""}function qt(xe){return 16==xe?"down":8==xe?"up":2==xe?"left":4==xe?"right":""}function St(xe,Pe){var Je=Pe.manager;return Je?Je.get(xe):xe}function vn(){Nt.apply(this,arguments)}function Es(){vn.apply(this,arguments),this.pX=null,this.pY=null}function Zr(){vn.apply(this,arguments)}function Js(){Nt.apply(this,arguments),this._timer=null,this._input=null}function Fl(){vn.apply(this,arguments)}function fo(){vn.apply(this,arguments)}function Br(){Nt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Vs(xe,Pe){return(Pe=Pe||{}).recognizers=E(Pe.recognizers,Vs.defaults.preset),new po(xe,Pe)}function po(xe,Pe){this.options=M({},Vs.defaults,Pe||{}),this.options.inputTarget=this.options.inputTarget||xe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=xe,this.input=function(xe){return new(xe.options.inputClass||(ve?en:Fe?ht:re?Ot:Kr))(xe,L)}(this),this.touchAction=new Qr(this,this.options.touchAction),Ll(this,!0),C(this.options.recognizers,function(Je){var vt=this.add(new Je[0](Je[1]));Je[2]&&vt.recognizeWith(Je[2]),Je[3]&&vt.requireFailure(Je[3])},this)}function Ll(xe,Pe){var vt,Je=xe.element;Je.style&&(C(xe.options.cssProps,function($t,Xt){vt=ue(Je.style,Xt),Pe?(xe.oldCssProps[vt]=Je.style[vt],Je.style[vt]=$t):Je.style[vt]=xe.oldCssProps[vt]||""}),Pe||(xe.oldCssProps={}))}Qr.prototype={set:function(xe){xe==Xn&&(xe=this.compute()),bn&&this.manager.element.style&&Ca[xe]&&(this.manager.element.style[Rn]=xe),this.actions=xe.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var xe=[];return C(this.manager.recognizers,function(Pe){T(Pe.options.enable,[Pe])&&(xe=xe.concat(Pe.getTouchAction()))}),function(xe){if(P(xe,sr))return sr;var Pe=P(xe,Qn),Je=P(xe,Wi);return Pe&&Je?sr:Pe||Je?Pe?Qn:Wi:P(xe,rr)?rr:"auto"}(xe.join(" "))},preventDefaults:function(xe){var Pe=xe.srcEvent,Je=xe.offsetDirection;if(!this.manager.session.prevented){var vt=this.actions,$t=P(vt,sr)&&!Ca[sr],Xt=P(vt,Wi)&&!Ca[Wi],ui=P(vt,Qn)&&!Ca[Qn];if($t&&1===xe.pointers.length&&xe.distance<2&&xe.deltaTime<250)return;return ui&&Xt||!($t||Xt&&6&Je||ui&&24&Je)?void 0:this.preventSrc(Pe)}Pe.preventDefault()},preventSrc:function(xe){this.manager.session.prevented=!0,xe.preventDefault()}},Nt.prototype={defaults:{},set:function(xe){return M(this.options,xe),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(xe){if(w(xe,"recognizeWith",this))return this;var Pe=this.simultaneous;return Pe[(xe=St(xe,this)).id]||(Pe[xe.id]=xe,xe.recognizeWith(this)),this},dropRecognizeWith:function(xe){return w(xe,"dropRecognizeWith",this)||(xe=St(xe,this),delete this.simultaneous[xe.id]),this},requireFailure:function(xe){if(w(xe,"requireFailure",this))return this;var Pe=this.requireFail;return-1===x(Pe,xe=St(xe,this))&&(Pe.push(xe),xe.requireFailure(this)),this},dropRequireFailure:function(xe){if(w(xe,"dropRequireFailure",this))return this;xe=St(xe,this);var Pe=x(this.requireFail,xe);return Pe>-1&&this.requireFail.splice(Pe,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(xe){return!!this.simultaneous[xe.id]},emit:function(xe){var Pe=this,Je=this.state;function vt($t){Pe.manager.emit($t,xe)}Je<8&&vt(Pe.options.event+tt(Je)),vt(Pe.options.event),xe.additionalEvent&&vt(xe.additionalEvent),Je>=8&&vt(Pe.options.event+tt(Je))},tryEmit:function(xe){if(this.canEmit())return this.emit(xe);this.state=32},canEmit:function(){for(var xe=0;xe<this.requireFail.length;){if(!(33&this.requireFail[xe].state))return!1;xe++}return!0},recognize:function(xe){var Pe=M({},xe);if(!T(this.options.enable,[this,Pe]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(Pe),30&this.state&&this.tryEmit(Pe)},process:function(xe){},getTouchAction:function(){},reset:function(){}},b(vn,Nt,{defaults:{pointers:1},attrTest:function(xe){var Pe=this.options.pointers;return 0===Pe||xe.pointers.length===Pe},process:function(xe){var Pe=this.state,Je=xe.eventType,vt=6&Pe,$t=this.attrTest(xe);return vt&&(8&Je||!$t)?16|Pe:vt||$t?4&Je?8|Pe:2&Pe?4|Pe:2:32}}),b(Es,vn,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var xe=this.options.direction,Pe=[];return 6&xe&&Pe.push(Wi),24&xe&&Pe.push(Qn),Pe},directionTest:function(xe){var Pe=this.options,Je=!0,vt=xe.distance,$t=xe.direction,Xt=xe.deltaX,ui=xe.deltaY;return $t&Pe.direction||(6&Pe.direction?($t=0===Xt?1:Xt<0?2:4,Je=Xt!=this.pX,vt=Math.abs(xe.deltaX)):($t=0===ui?1:ui<0?8:16,Je=ui!=this.pY,vt=Math.abs(xe.deltaY))),xe.direction=$t,Je&&vt>Pe.threshold&&$t&Pe.direction},attrTest:function(xe){return vn.prototype.attrTest.call(this,xe)&&(2&this.state||!(2&this.state)&&this.directionTest(xe))},emit:function(xe){this.pX=xe.deltaX,this.pY=xe.deltaY;var Pe=qt(xe.direction);Pe&&(xe.additionalEvent=this.options.event+Pe),this._super.emit.call(this,xe)}}),b(Zr,vn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[sr]},attrTest:function(xe){return this._super.attrTest.call(this,xe)&&(Math.abs(xe.scale-1)>this.options.threshold||2&this.state)},emit:function(xe){1!==xe.scale&&(xe.additionalEvent=this.options.event+(xe.scale<1?"in":"out")),this._super.emit.call(this,xe)}}),b(Js,Nt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(xe){var Pe=this.options,Je=xe.pointers.length===Pe.pointers,vt=xe.distance<Pe.threshold,$t=xe.deltaTime>Pe.time;if(this._input=xe,!vt||!Je||12&xe.eventType&&!$t)this.reset();else if(1&xe.eventType)this.reset(),this._timer=B(function(){this.state=8,this.tryEmit()},Pe.time,this);else if(4&xe.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(xe){8===this.state&&(xe&&4&xe.eventType?this.manager.emit(this.options.event+"up",xe):(this._input.timeStamp=Y(),this.manager.emit(this.options.event,this._input)))}}),b(Fl,vn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[sr]},attrTest:function(xe){return this._super.attrTest.call(this,xe)&&(Math.abs(xe.rotation)>this.options.threshold||2&this.state)}}),b(fo,vn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Es.prototype.getTouchAction.call(this)},attrTest:function(xe){var Je,Pe=this.options.direction;return 30&Pe?Je=xe.overallVelocity:6&Pe?Je=xe.overallVelocityX:24&Pe&&(Je=xe.overallVelocityY),this._super.attrTest.call(this,xe)&&Pe&xe.offsetDirection&&xe.distance>this.options.threshold&&xe.maxPointers==this.options.pointers&&F(Je)>this.options.velocity&&4&xe.eventType},emit:function(xe){var Pe=qt(xe.offsetDirection);Pe&&this.manager.emit(this.options.event+Pe,xe),this.manager.emit(this.options.event,xe)}}),b(Br,Nt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[rr]},process:function(xe){var Pe=this.options,Je=xe.pointers.length===Pe.pointers,vt=xe.distance<Pe.threshold,$t=xe.deltaTime<Pe.time;if(this.reset(),1&xe.eventType&&0===this.count)return this.failTimeout();if(vt&&$t&&Je){if(4!=xe.eventType)return this.failTimeout();var Xt=!this.pTime||xe.timeStamp-this.pTime<Pe.interval,ui=!this.pCenter||Yn(this.pCenter,xe.center)<Pe.posThreshold;if(this.pTime=xe.timeStamp,this.pCenter=xe.center,ui&&Xt?this.count+=1:this.count=1,this._input=xe,0==this.count%Pe.taps)return this.hasRequireFailures()?(this._timer=B(function(){this.state=8,this.tryEmit()},Pe.interval,this),2):8}return 32},failTimeout:function(){return this._timer=B(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Vs.VERSION="2.0.7",Vs.defaults={domEvents:!1,touchAction:Xn,enable:!0,inputTarget:null,inputClass:null,preset:[[Fl,{enable:!1}],[Zr,{enable:!1},["rotate"]],[fo,{direction:6}],[Es,{direction:6},["swipe"]],[Br],[Br,{event:"doubletap",taps:2},["tap"]],[Js]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},po.prototype={set:function(xe){return M(this.options,xe),xe.touchAction&&this.touchAction.update(),xe.inputTarget&&(this.input.destroy(),this.input.target=xe.inputTarget,this.input.init()),this},stop:function(xe){this.session.stopped=xe?2:1},recognize:function(xe){var Pe=this.session;if(!Pe.stopped){this.touchAction.preventDefaults(xe);var Je,vt=this.recognizers,$t=Pe.curRecognizer;(!$t||$t&&8&$t.state)&&($t=Pe.curRecognizer=null);for(var Xt=0;Xt<vt.length;)Je=vt[Xt],2===Pe.stopped||$t&&Je!=$t&&!Je.canRecognizeWith($t)?Je.reset():Je.recognize(xe),!$t&&14&Je.state&&($t=Pe.curRecognizer=Je),Xt++}},get:function(xe){if(xe instanceof Nt)return xe;for(var Pe=this.recognizers,Je=0;Je<Pe.length;Je++)if(Pe[Je].options.event==xe)return Pe[Je];return null},add:function(xe){if(w(xe,"add",this))return this;var Pe=this.get(xe.options.event);return Pe&&this.remove(Pe),this.recognizers.push(xe),xe.manager=this,this.touchAction.update(),xe},remove:function(xe){if(w(xe,"remove",this))return this;if(xe=this.get(xe)){var Pe=this.recognizers,Je=x(Pe,xe);-1!==Je&&(Pe.splice(Je,1),this.touchAction.update())}return this},on:function(xe,Pe){if(xe!==Q&&Pe!==Q){var Je=this.handlers;return C(Z(xe),function(vt){Je[vt]=Je[vt]||[],Je[vt].push(Pe)}),this}},off:function(xe,Pe){if(xe!==Q){var Je=this.handlers;return C(Z(xe),function(vt){Pe?Je[vt]&&Je[vt].splice(x(Je[vt],Pe),1):delete Je[vt]}),this}},emit:function(xe,Pe){this.options.domEvents&&function(xe,Pe){var Je=Ct.createEvent("Event");Je.initEvent(xe,!0,!0),Je.gesture=Pe,Pe.target.dispatchEvent(Je)}(xe,Pe);var Je=this.handlers[xe]&&this.handlers[xe].slice();if(Je&&Je.length){Pe.type=xe,Pe.preventDefault=function(){Pe.srcEvent.preventDefault()};for(var vt=0;vt<Je.length;)Je[vt](Pe),vt++}},destroy:function(){this.element&&Ll(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},M(Vs,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:po,Input:Ae,TouchAction:Qr,TouchInput:ht,MouseInput:Kr,PointerEventInput:en,TouchMouseInput:Ot,SingleTouchInput:ft,Recognizer:Nt,AttrRecognizer:vn,Tap:Br,Pan:Es,Swipe:fo,Pinch:Zr,Rotate:Fl,Press:Js,on:O,off:$,each:C,merge:v,extend:y,assign:M,inherit:b,bindFn:S,prefixed:ue}),(void 0!==ee?ee:"undefined"!=typeof self?self:{}).Hammer=Vs,(lt=function(){return Vs}.call(Xe,et,Xe,Vt))!==Q&&(Vt.exports=lt)}(window,document)},3815:function(Vt,Xe,et){var lt;Vt=et.nmd(Vt),function(){var ee,Ee="Expected a function",X="__lodash_hash_undefined__",F="__lodash_placeholder__",T=32,O=128,te=1/0,Re=9007199254740991,ve=4294967295,Ge=[["ary",O],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",T],["partialRight",64],["rearg",256]],J="[object Arguments]",le="[object Array]",Me="[object Boolean]",Ce="[object Date]",Se="[object Error]",ze="[object Function]",Ke="[object GeneratorFunction]",Ve="[object Map]",K="[object Number]",ge="[object Object]",ce="[object Promise]",_t="[object RegExp]",gt="[object Set]",Ae="[object String]",z="[object Symbol]",H="[object WeakMap]",it="[object ArrayBuffer]",At="[object DataView]",kt="[object Float32Array]",In="[object Float64Array]",Pn="[object Int8Array]",Yn="[object Int16Array]",Mi="[object Int32Array]",xi="[object Uint8Array]",Xr="[object Uint8ClampedArray]",Ls="[object Uint16Array]",fs="[object Uint32Array]",Bs=/\b__p \+= '';/g,Kr=/\b(__p \+=) '' \+/g,xa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kl=/&(?:amp|lt|gt|quot|#39);/g,Sa=/[&<>"']/g,ws=RegExp(kl.source),en=RegExp(Sa.source),nl=/<%-([\s\S]+?)%>/g,ot=/<%([\s\S]+?)%>/g,ut=/<%=([\s\S]+?)%>/g,ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ye=/^\w*$/,Te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,We=/[\\^$.*+?()[\]{}|]/g,ht=RegExp(We.source),rt=/^\s+/,Dt=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ot=/\{\n\/\* \[wrapped with (.+)\] \*/,Qt=/,? & /,zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ci=/[()=,{}\[\]\/\s]/,Rn=/\\(\\)?/g,bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xn=/\w*$/,Cn=/^[-+]0x[0-9a-f]+$/i,rr=/^0b[01]+$/i,sr=/^\[object .+?Constructor\]$/,Qn=/^0o[0-7]+$/i,Wi=/^(?:0|[1-9]\d*)$/,Ca=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qr=/($^)/,ae=/['\n\r\u2028\u2029\\]/g,me="\\ud800-\\udfff",ie="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",De="\\u2700-\\u27bf",He="a-z\\xdf-\\xf6\\xf8-\\xff",St="A-Z\\xc0-\\xd6\\xd8-\\xde",vn="\\ufe0e\\ufe0f",Es="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Js="["+me+"]",Fl="["+Es+"]",fo="["+ie+"]",Br="\\d+",Vs="["+De+"]",Ac="["+He+"]",xn="[^"+me+Es+Br+De+He+St+"]",po="\\ud83c[\\udffb-\\udfff]",Ta="[^"+me+"]",Ed="(?:\\ud83c[\\udde6-\\uddff]){2}",xe="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="["+St+"]",vt="(?:"+Ac+"|"+xn+")",$t="(?:"+Pe+"|"+xn+")",Xt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ui="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Vr="(?:"+fo+"|"+po+")?",Jr="["+vn+"]?",TC=Jr+Vr+"(?:\\u200d(?:"+[Ta,Ed,xe].join("|")+")"+Jr+Vr+")*",xd="(?:"+[Vs,Ed,xe].join("|")+")"+TC,er="(?:"+[Ta+fo+"?",fo,Ed,xe,Js].join("|")+")",fp=RegExp("['\u2019]","g"),n_=RegExp(fo,"g"),Oh=RegExp(po+"(?="+po+")|"+er+TC,"g"),iv=RegExp([Pe+"?"+Ac+"+"+Xt+"(?="+[Fl,Pe,"$"].join("|")+")",$t+"+"+ui+"(?="+[Fl,Pe+vt,"$"].join("|")+")",Pe+"?"+vt+"+"+Xt,Pe+"+"+ui,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Br,xd].join("|"),"g"),AC=RegExp("[\\u200d"+me+ie+vn+"]"),Bl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],MC=-1,rn={};rn[kt]=rn[In]=rn[Pn]=rn[Yn]=rn[Mi]=rn[xi]=rn[Xr]=rn[Ls]=rn[fs]=!0,rn[J]=rn[le]=rn[it]=rn[Me]=rn[At]=rn[Ce]=rn[Se]=rn[ze]=rn[Ve]=rn[K]=rn[ge]=rn[_t]=rn[gt]=rn[Ae]=rn[H]=!1;var or={};or[J]=or[le]=or[it]=or[At]=or[Me]=or[Ce]=or[kt]=or[In]=or[Pn]=or[Yn]=or[Mi]=or[Ve]=or[K]=or[ge]=or[_t]=or[gt]=or[Ae]=or[z]=or[xi]=or[Xr]=or[Ls]=or[fs]=!0,or[Se]=or[ze]=or[H]=!1;var tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},DC=parseFloat,av=parseInt,Pt="object"==typeof global&&global&&global.Object===Object&&global,js="object"==typeof self&&self&&self.Object===Object&&self,Ui=Pt||js||Function("return this")(),Vl=Xe&&!Xe.nodeType&&Xe,Aa=Vl&&Vt&&!Vt.nodeType&&Vt,Po=Aa&&Aa.exports===Vl,i_=Po&&Pt.process,xr=function(){try{return Aa&&Aa.require&&Aa.require("util").types||i_&&i_.binding&&i_.binding("util")}catch(Rt){}}(),an=xr&&xr.isArrayBuffer,hi=xr&&xr.isDate,ur=xr&&xr.isMap,go=xr&&xr.isRegExp,Mc=xr&&xr.isSet,ss=xr&&xr.isTypedArray;function os(ct,Rt,Tt){switch(Tt.length){case 0:return ct.call(Rt);case 1:return ct.call(Rt,Tt[0]);case 2:return ct.call(Rt,Tt[0],Tt[1]);case 3:return ct.call(Rt,Tt[0],Tt[1],Tt[2])}return ct.apply(Rt,Tt)}function jr(ct,Rt,Tt,hn){for(var Mn=-1,Li=null==ct?0:ct.length;++Mn<Li;){var es=ct[Mn];Rt(hn,es,Tt(es),ct)}return hn}function Us(ct,Rt){for(var Tt=-1,hn=null==ct?0:ct.length;++Tt<hn&&!1!==Rt(ct[Tt],Tt,ct););return ct}function Sd(ct,Rt){for(var Tt=null==ct?0:ct.length;Tt--&&!1!==Rt(ct[Tt],Tt,ct););return ct}function ri(ct,Rt){for(var Tt=-1,hn=null==ct?0:ct.length;++Tt<hn;)if(!Rt(ct[Tt],Tt,ct))return!1;return!0}function Ma(ct,Rt){for(var Tt=-1,hn=null==ct?0:ct.length,Mn=0,Li=[];++Tt<hn;){var es=ct[Tt];Rt(es,Tt,ct)&&(Li[Mn++]=es)}return Li}function jl(ct,Rt){return!(null==ct||!ct.length)&&il(ct,Rt,0)>-1}function Nh(ct,Rt,Tt){for(var hn=-1,Mn=null==ct?0:ct.length;++hn<Mn;)if(Tt(Rt,ct[hn]))return!0;return!1}function qi(ct,Rt){for(var Tt=-1,hn=null==ct?0:ct.length,Mn=Array(hn);++Tt<hn;)Mn[Tt]=Rt(ct[Tt],Tt,ct);return Mn}function Ur(ct,Rt){for(var Tt=-1,hn=Rt.length,Mn=ct.length;++Tt<hn;)ct[Mn+Tt]=Rt[Tt];return ct}function Eu(ct,Rt,Tt,hn){var Mn=-1,Li=null==ct?0:ct.length;for(hn&&Li&&(Tt=ct[++Mn]);++Mn<Li;)Tt=Rt(Tt,ct[Mn],Mn,ct);return Tt}function Cd(ct,Rt,Tt,hn){var Mn=null==ct?0:ct.length;for(hn&&Mn&&(Tt=ct[--Mn]);Mn--;)Tt=Rt(Tt,ct[Mn],Mn,ct);return Tt}function ko(ct,Rt){for(var Tt=-1,hn=null==ct?0:ct.length;++Tt<hn;)if(Rt(ct[Tt],Tt,ct))return!0;return!1}var ar=r_("length");function Ph(ct,Rt,Tt){var hn;return Tt(ct,function(Mn,Li,es){if(Rt(Mn,Li,es))return hn=Li,!1}),hn}function Td(ct,Rt,Tt,hn){for(var Mn=ct.length,Li=Tt+(hn?1:-1);hn?Li--:++Li<Mn;)if(Rt(ct[Li],Li,ct))return Li;return-1}function il(ct,Rt,Tt){return Rt==Rt?function(ct,Rt,Tt){for(var hn=Tt-1,Mn=ct.length;++hn<Mn;)if(ct[hn]===Rt)return hn;return-1}(ct,Rt,Tt):Td(ct,Dc,Tt)}function pp(ct,Rt,Tt,hn){for(var Mn=Tt-1,Li=ct.length;++Mn<Li;)if(hn(ct[Mn],Rt))return Mn;return-1}function Dc(ct){return ct!=ct}function Ss(ct,Rt){var Tt=null==ct?0:ct.length;return Tt?Ad(ct,Rt)/Tt:NaN}function r_(ct){return function(Rt){return null==Rt?ee:Rt[ct]}}function Jo(ct){return function(Rt){return null==ct?ee:ct[Rt]}}function ea(ct,Rt,Tt,hn,Mn){return Mn(ct,function(Li,es,Yi){Tt=hn?(hn=!1,Li):Rt(Tt,Li,es,Yi)}),Tt}function Ad(ct,Rt){for(var Tt,hn=-1,Mn=ct.length;++hn<Mn;){var Li=Rt(ct[hn]);Li!==ee&&(Tt=Tt===ee?Li:Tt+Li)}return Tt}function Md(ct,Rt){for(var Tt=-1,hn=Array(ct);++Tt<ct;)hn[Tt]=Rt(Tt);return hn}function lv(ct){return ct&&ct.slice(0,Ic(ct)+1).replace(rt,"")}function ta(ct){return function(Rt){return ct(Rt)}}function o_(ct,Rt){return qi(Rt,function(Tt){return ct[Tt]})}function kh(ct,Rt){return ct.has(Rt)}function RC(ct,Rt){for(var Tt=-1,hn=ct.length;++Tt<hn&&il(Rt,ct[Tt],0)>-1;);return Tt}function NC(ct,Rt){for(var Tt=ct.length;Tt--&&il(Rt,ct[Tt],0)>-1;);return Tt}function ok(ct,Rt){for(var Tt=ct.length,hn=0;Tt--;)ct[Tt]===Rt&&++hn;return hn}var ak=Jo({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),lk=Jo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ck(ct){return"\\"+tn[ct]}function Fh(ct){return AC.test(ct)}function cv(ct){var Rt=-1,Tt=Array(ct.size);return ct.forEach(function(hn,Mn){Tt[++Rt]=[Mn,hn]}),Tt}function PC(ct,Rt){return function(Tt){return ct(Rt(Tt))}}function xu(ct,Rt){for(var Tt=-1,hn=ct.length,Mn=0,Li=[];++Tt<hn;){var es=ct[Tt];(es===Rt||es===F)&&(ct[Tt]=F,Li[Mn++]=Tt)}return Li}function a_(ct){var Rt=-1,Tt=Array(ct.size);return ct.forEach(function(hn){Tt[++Rt]=hn}),Tt}function Lh(ct){return Fh(ct)?function(ct){for(var Rt=Oh.lastIndex=0;Oh.test(ct);)++Rt;return Rt}(ct):ar(ct)}function rl(ct){return Fh(ct)?function(ct){return ct.match(Oh)||[]}(ct):function(ct){return ct.split("")}(ct)}function Ic(ct){for(var Rt=ct.length;Rt--&&Dt.test(ct.charAt(Rt)););return Rt}var c_=Jo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Bh=function ct(Rt){var d,Tt=(Rt=null==Rt?Ui:Bh.defaults(Ui.Object(),Rt,Bh.pick(Ui,Rh))).Array,hn=Rt.Date,Mn=Rt.Error,Li=Rt.Function,es=Rt.Math,Yi=Rt.Object,u_=Rt.RegExp,d_=Rt.String,Ia=Rt.TypeError,dr=Tt.prototype,Su=Yi.prototype,gp=Rt["__core-js_shared__"],Sr=Li.prototype.toString,Xi=Su.hasOwnProperty,gk=0,Vh=(d=/[^.]+$/.exec(gp&&gp.keys&&gp.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",eo=Su.toString,LC=Sr.call(Yi),h_=Ui._,Dd=u_("^"+Sr.call(Xi).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zs=Po?Rt.Buffer:ee,Ul=Rt.Symbol,Id=Rt.Uint8Array,hv=zs?zs.allocUnsafe:ee,Oa=PC(Yi.getPrototypeOf,Yi),f_=Yi.create,mp=Su.propertyIsEnumerable,Ln=dr.splice,BC=Ul?Ul.isConcatSpreadable:ee,jh=Ul?Ul.iterator:ee,Cu=Ul?Ul.toStringTag:ee,_p=function(){try{var d=jc(Yi,"defineProperty");return d({},"",{}),d}catch(p){}}(),fv=Rt.clearTimeout!==Ui.clearTimeout&&Rt.clearTimeout,VC=hn&&hn.now!==Ui.Date.now&&hn.now,jC=Rt.setTimeout!==Ui.setTimeout&&Rt.setTimeout,jt=es.ceil,Si=es.floor,_r=Yi.getOwnPropertySymbols,as=zs?zs.isBuffer:ee,p_=Rt.isFinite,Uh=dr.join,sl=PC(Yi.keys,Yi),zr=es.max,ps=es.min,mk=hn.now,UC=Rt.parseInt,zh=es.random,yp=dr.reverse,Cs=jc(Rt,"DataView"),mo=jc(Rt,"Map"),bp=jc(Rt,"Promise"),Ra=jc(Rt,"Set"),Fo=jc(Rt,"WeakMap"),Hh=jc(Yi,"create"),Gh=Fo&&new Fo,Od={},zC=Lu(Cs),g_=Lu(mo),m_=Lu(bp),pv=Lu(Ra),__=Lu(Fo),vp=Ul?Ul.prototype:ee,Rd=vp?vp.valueOf:ee,$h=vp?vp.toString:ee;function Ie(d){if(Ar(d)&&!On(d)&&!(d instanceof fi)){if(d instanceof Lo)return d;if(Xi.call(d,"__wrapped__"))return sf(d)}return new Lo(d)}var Tu=function(){function d(){}return function(p){if(!Tr(p))return{};if(f_)return f_(p);d.prototype=p;var _=new d;return d.prototype=ee,_}}();function Wh(){}function Lo(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=ee}function fi(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ve,this.__views__=[]}function _o(d){var p=-1,_=null==d?0:d.length;for(this.clear();++p<_;){var V=d[p];this.set(V[0],V[1])}}function zl(d){var p=-1,_=null==d?0:d.length;for(this.clear();++p<_;){var V=d[p];this.set(V[0],V[1])}}function ol(d){var p=-1,_=null==d?0:d.length;for(this.clear();++p<_;){var V=d[p];this.set(V[0],V[1])}}function Na(d){var p=-1,_=null==d?0:d.length;for(this.__data__=new ol;++p<_;)this.add(d[p])}function Pa(d){var p=this.__data__=new zl(d);this.size=p.size}function Yh(d,p){var _=On(d),V=!_&&gl(d),he=!_&&!V&&ml(d),Ne=!_&&!V&&!he&&df(d),Qe=_||V||he||Ne,nt=Qe?Md(d.length,d_):[],dt=nt.length;for(var Ft in d)(p||Xi.call(d,Ft))&&(!Qe||!("length"==Ft||he&&("offset"==Ft||"parent"==Ft)||Ne&&("buffer"==Ft||"byteLength"==Ft||"byteOffset"==Ft)||jo(Ft,dt)))&&nt.push(Ft);return nt}function w_(d){var p=d.length;return p?d[Hl(0,p-1)]:ee}function yv(d,p){return qd(no(d),Au(p,0,d.length))}function Nd(d){return qd(no(d))}function E_(d,p,_){(_!==ee&&!Dn(d[p],_)||_===ee&&!(p in d))&&ll(d,p,_)}function al(d,p,_){var V=d[p];(!Xi.call(d,p)||!Dn(V,_)||_===ee&&!(p in d))&&ll(d,p,_)}function Pd(d,p){for(var _=d.length;_--;)if(Dn(d[_][0],p))return _;return-1}function Cp(d,p,_,V){return Nc(d,function(he,Ne,Qe){p(V,he,_(he),Qe)}),V}function ZC(d,p){return d&&Fa(p,Is(p),d)}function ll(d,p,_){"__proto__"==p&&_p?_p(d,p,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[p]=_}function x_(d,p){for(var _=-1,V=p.length,he=Tt(V),Ne=null==d;++_<V;)he[_]=Ne?ee:pf(d,p[_]);return he}function Au(d,p,_){return d==d&&(_!==ee&&(d=d<=_?d:_),p!==ee&&(d=d>=p?d:p)),d}function Hs(d,p,_,V,he,Ne){var Qe,nt=1&p,dt=2&p,Ft=4&p;if(_&&(Qe=he?_(d,V,he,Ne):_(d)),Qe!==ee)return Qe;if(!Tr(d))return d;var Lt=On(d);if(Lt){if(Qe=function(d){var p=d.length,_=new d.constructor(p);return p&&"string"==typeof d[0]&&Xi.call(d,"index")&&(_.index=d.index,_.input=d.input),_}(d),!nt)return no(d,Qe)}else{var Gt=$s(d),nn=Gt==ze||Gt==Ke;if(ml(d))return Np(d,nt);if(Gt==ge||Gt==J||nn&&!he){if(Qe=dt||nn?{}:Uv(d),!nt)return dt?function(d,p){return Fa(d,Bv(d),p)}(d,function(d,p){return d&&Fa(p,ro(p),d)}(Qe,d)):function(d,p){return Fa(d,V_(d),p)}(d,ZC(Qe,d))}else{if(!or[Gt])return he?d:{};Qe=function(d,p,_){var V=d.constructor;switch(p){case it:return Nu(d);case Me:case Ce:return new V(+d);case At:return function(d,p){var _=p?Nu(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.byteLength)}(d,_);case kt:case In:case Pn:case Yn:case Mi:case xi:case Xr:case Ls:case fs:return P_(d,_);case Ve:return new V;case K:case Ae:return new V(d);case _t:return function(d){var p=new d.constructor(d.source,Xn.exec(d));return p.lastIndex=d.lastIndex,p}(d);case gt:return new V;case z:return function(d){return Rd?Yi(Rd.call(d)):{}}(d)}}(d,Gt,nt)}}Ne||(Ne=new Pa);var wn=Ne.get(d);if(wn)return wn;Ne.set(d,Qe),bA(d)?d.forEach(function(Bn){Qe.add(Hs(Bn,p,_,Bn,d,Ne))}):gA(d)&&d.forEach(function(Bn,mi){Qe.set(mi,Hs(Bn,p,_,mi,d,Ne))});var gi=Lt?ee:(Ft?dt?L_:ql:dt?ro:Is)(d);return Us(gi||d,function(Bn,mi){gi&&(Bn=d[mi=Bn]),al(Qe,mi,Hs(Bn,p,_,mi,d,Ne))}),Qe}function Tp(d,p,_){var V=_.length;if(null==d)return!V;for(d=Yi(d);V--;){var he=_[V],Qe=d[he];if(Qe===ee&&!(he in d)||!(0,p[he])(Qe))return!1}return!0}function Xh(d,p,_){if("function"!=typeof d)throw new Ia(Ee);return nf(function(){d.apply(ee,_)},p)}function Rc(d,p,_,V){var he=-1,Ne=jl,Qe=!0,nt=d.length,dt=[],Ft=p.length;if(!nt)return dt;_&&(p=qi(p,ta(_))),V?(Ne=Nh,Qe=!1):p.length>=200&&(Ne=kh,Qe=!1,p=new Na(p));e:for(;++he<nt;){var Lt=d[he],Gt=null==_?Lt:_(Lt);if(Lt=V||0!==Lt?Lt:0,Qe&&Gt==Gt){for(var nn=Ft;nn--;)if(p[nn]===Gt)continue e;dt.push(Lt)}else Ne(p,Gt,V)||dt.push(Lt)}return dt}Ie.templateSettings={escape:nl,evaluate:ot,interpolate:ut,variable:"",imports:{_:Ie}},(Ie.prototype=Wh.prototype).constructor=Ie,(Lo.prototype=Tu(Wh.prototype)).constructor=Lo,(fi.prototype=Tu(Wh.prototype)).constructor=fi,_o.prototype.clear=function(){this.__data__=Hh?Hh(null):{},this.size=0},_o.prototype.delete=function(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p},_o.prototype.get=function(d){var p=this.__data__;if(Hh){var _=p[d];return _===X?ee:_}return Xi.call(p,d)?p[d]:ee},_o.prototype.has=function(d){var p=this.__data__;return Hh?p[d]!==ee:Xi.call(p,d)},_o.prototype.set=function(d,p){var _=this.__data__;return this.size+=this.has(d)?0:1,_[d]=Hh&&p===ee?X:p,this},zl.prototype.clear=function(){this.__data__=[],this.size=0},zl.prototype.delete=function(d){var p=this.__data__,_=Pd(p,d);return!(_<0||(_==p.length-1?p.pop():Ln.call(p,_,1),--this.size,0))},zl.prototype.get=function(d){var p=this.__data__,_=Pd(p,d);return _<0?ee:p[_][1]},zl.prototype.has=function(d){return Pd(this.__data__,d)>-1},zl.prototype.set=function(d,p){var _=this.__data__,V=Pd(_,d);return V<0?(++this.size,_.push([d,p])):_[V][1]=p,this},ol.prototype.clear=function(){this.size=0,this.__data__={hash:new _o,map:new(mo||zl),string:new _o}},ol.prototype.delete=function(d){var p=Gs(this,d).delete(d);return this.size-=p?1:0,p},ol.prototype.get=function(d){return Gs(this,d).get(d)},ol.prototype.has=function(d){return Gs(this,d).has(d)},ol.prototype.set=function(d,p){var _=Gs(this,d),V=_.size;return _.set(d,p),this.size+=_.size==V?0:1,this},Na.prototype.add=Na.prototype.push=function(d){return this.__data__.set(d,X),this},Na.prototype.has=function(d){return this.__data__.has(d)},Pa.prototype.clear=function(){this.__data__=new zl,this.size=0},Pa.prototype.delete=function(d){var p=this.__data__,_=p.delete(d);return this.size=p.size,_},Pa.prototype.get=function(d){return this.__data__.get(d)},Pa.prototype.has=function(d){return this.__data__.has(d)},Pa.prototype.set=function(d,p){var _=this.__data__;if(_ instanceof zl){var V=_.__data__;if(!mo||V.length<199)return V.push([d,p]),this.size=++_.size,this;_=this.__data__=new ol(V)}return _.set(d,p),this.size=_.size,this};var Nc=dl(cl),C_=dl(Ap,!0);function vv(d,p){var _=!0;return Nc(d,function(V,he,Ne){return _=!!p(V,he,Ne)}),_}function Kh(d,p,_){for(var V=-1,he=d.length;++V<he;){var Ne=d[V],Qe=p(Ne);if(null!=Qe&&(nt===ee?Qe==Qe&&!da(Qe):_(Qe,nt)))var nt=Qe,dt=Ne}return dt}function Ev(d,p){var _=[];return Nc(d,function(V,he,Ne){p(V,he,Ne)&&_.push(V)}),_}function Ts(d,p,_,V,he){var Ne=-1,Qe=d.length;for(_||(_=mT),he||(he=[]);++Ne<Qe;){var nt=d[Ne];p>0&&_(nt)?p>1?Ts(nt,p-1,_,V,he):Ur(he,nt):V||(he[he.length]=nt)}return he}var kd=Dv(),Fd=Dv(!0);function cl(d,p){return d&&kd(d,p,Is)}function Ap(d,p){return d&&Fd(d,p,Is)}function Qh(d,p){return Ma(p,function(_){return ua(d[_])})}function na(d,p){for(var _=0,V=(p=Lc(p,d)).length;null!=d&&_<V;)d=d[si(p[_++])];return _&&_==V?d:ee}function zi(d,p,_){var V=p(d);return On(d)?V:Ur(V,_(d))}function As(d){return null==d?d===ee?"[object Undefined]":"[object Null]":Cu&&Cu in Yi(d)?function(d){var p=Xi.call(d,Cu),_=d[Cu];try{d[Cu]=ee;var V=!0}catch(Ne){}var he=eo.call(d);return V&&(p?d[Cu]=_:delete d[Cu]),he}(d):function(d){return eo.call(d)}(d)}function yo(d,p){return d>p}function Ld(d,p){return null!=d&&Xi.call(d,p)}function Bd(d,p){return null!=d&&p in Yi(d)}function Mu(d,p,_){for(var V=_?Nh:jl,he=d[0].length,Ne=d.length,Qe=Ne,nt=Tt(Ne),dt=1/0,Ft=[];Qe--;){var Lt=d[Qe];Qe&&p&&(Lt=qi(Lt,ta(p))),dt=ps(Lt.length,dt),nt[Qe]=!_&&(p||he>=120&&Lt.length>=120)?new Na(Qe&&Lt):ee}Lt=d[0];var Gt=-1,nn=nt[0];e:for(;++Gt<he&&Ft.length<dt;){var wn=Lt[Gt],Fn=p?p(wn):wn;if(wn=_||0!==wn?wn:0,!(nn?kh(nn,Fn):V(Ft,Fn,_))){for(Qe=Ne;--Qe;){var gi=nt[Qe];if(!(gi?kh(gi,Fn):V(d[Qe],Fn,_)))continue e}nn&&nn.push(Fn),Ft.push(wn)}}return Ft}function ka(d,p,_){var V=null==(d=H_(d,p=Lc(p,d)))?d:d[si(aa(p))];return null==V?ee:os(V,d,_)}function JC(d){return Ar(d)&&As(d)==J}function Mp(d,p,_,V,he){return d===p||(null==d||null==p||!Ar(d)&&!Ar(p)?d!=d&&p!=p:function(d,p,_,V,he,Ne){var Qe=On(d),nt=On(p),dt=Qe?le:$s(d),Ft=nt?le:$s(p),Lt=(dt=dt==J?ge:dt)==ge,Gt=(Ft=Ft==J?ge:Ft)==ge,nn=dt==Ft;if(nn&&ml(d)){if(!ml(p))return!1;Qe=!0,Lt=!1}if(nn&&!Lt)return Ne||(Ne=new Pa),Qe||df(d)?Vp(d,p,_,V,he,Ne):function(d,p,_,V,he,Ne,Qe){switch(_){case At:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case it:return!(d.byteLength!=p.byteLength||!Ne(new Id(d),new Id(p)));case Me:case Ce:case K:return Dn(+d,+p);case Se:return d.name==p.name&&d.message==p.message;case _t:case Ae:return d==p+"";case Ve:var nt=cv;case gt:if(nt||(nt=a_),d.size!=p.size&&!(1&V))return!1;var Ft=Qe.get(d);if(Ft)return Ft==p;V|=2,Qe.set(d,p);var Lt=Vp(nt(d),nt(p),V,he,Ne,Qe);return Qe.delete(d),Lt;case z:if(Rd)return Rd.call(d)==Rd.call(p)}return!1}(d,p,dt,_,V,he,Ne);if(!(1&_)){var wn=Lt&&Xi.call(d,"__wrapped__"),Fn=Gt&&Xi.call(p,"__wrapped__");if(wn||Fn){var gi=wn?d.value():d,Bn=Fn?p.value():p;return Ne||(Ne=new Pa),he(gi,Bn,_,V,Ne)}}return!!nn&&(Ne||(Ne=new Pa),function(d,p,_,V,he,Ne){var Qe=1&_,nt=ql(d),dt=nt.length;if(dt!=ql(p).length&&!Qe)return!1;for(var Gt=dt;Gt--;){var nn=nt[Gt];if(!(Qe?nn in p:Xi.call(p,nn)))return!1}var wn=Ne.get(d),Fn=Ne.get(p);if(wn&&Fn)return wn==p&&Fn==d;var gi=!0;Ne.set(d,p),Ne.set(p,d);for(var Bn=Qe;++Gt<dt;){var mi=d[nn=nt[Gt]],Di=p[nn];if(V)var wo=Qe?V(Di,mi,nn,p,d,Ne):V(mi,Di,nn,d,p,Ne);if(!(wo===ee?mi===Di||he(mi,Di,_,V,Ne):wo)){gi=!1;break}Bn||(Bn="constructor"==nn)}if(gi&&!Bn){var qs=d.constructor,ha=p.constructor;qs!=ha&&"constructor"in d&&"constructor"in p&&!("function"==typeof qs&&qs instanceof qs&&"function"==typeof ha&&ha instanceof ha)&&(gi=!1)}return Ne.delete(d),Ne.delete(p),gi}(d,p,_,V,he,Ne))}(d,p,_,V,Mp,he))}function A_(d,p,_,V){var he=_.length,Ne=he,Qe=!V;if(null==d)return!Ne;for(d=Yi(d);he--;){var nt=_[he];if(Qe&&nt[2]?nt[1]!==d[nt[0]]:!(nt[0]in d))return!1}for(;++he<Ne;){var dt=(nt=_[he])[0],Ft=d[dt],Lt=nt[1];if(Qe&&nt[2]){if(Ft===ee&&!(dt in d))return!1}else{var Gt=new Pa;if(V)var nn=V(Ft,Lt,dt,d,p,Gt);if(!(nn===ee?Mp(Lt,Ft,3,V,Gt):nn))return!1}}return!0}function M_(d){return!(!Tr(d)||function(d){return!!Vh&&Vh in d}(d))&&(ua(d)?Dd:sr).test(Lu(d))}function nT(d){return"function"==typeof d?d:null==d?so:"object"==typeof d?On(d)?jd(d[0],d[1]):rT(d):Uu(d)}function xv(d){if(!zp(d))return sl(d);var p=[];for(var _ in Yi(d))Xi.call(d,_)&&"constructor"!=_&&p.push(_);return p}function Sv(d,p){return d<p}function iT(d,p){var _=-1,V=bo(d)?Tt(d.length):[];return Nc(d,function(he,Ne,Qe){V[++_]=p(he,Ne,Qe)}),V}function rT(d){var p=sa(d);return 1==p.length&&p[0][2]?yT(p[0][0],p[0][1]):function(_){return _===d||A_(_,d,p)}}function jd(d,p){return oa(d)&&_T(p)?yT(si(d),p):function(_){var V=pf(_,d);return V===ee&&V===p?eg(_,d):Mp(p,V,3)}}function D_(d,p,_,V,he){d!==p&&kd(p,function(Ne,Qe){if(he||(he=new Pa),Tr(Ne))!function(d,p,_,V,he,Ne,Qe){var nt=G_(d,_),dt=G_(p,_),Ft=Qe.get(dt);if(Ft)E_(d,_,Ft);else{var Lt=Ne?Ne(nt,dt,_+"",d,p,Qe):ee,Gt=Lt===ee;if(Gt){var nn=On(dt),wn=!nn&&ml(dt),Fn=!nn&&!wn&&df(dt);Lt=dt,nn||wn||Fn?On(nt)?Lt=nt:Cr(nt)?Lt=no(nt):wn?(Gt=!1,Lt=Np(dt,!0)):Fn?(Gt=!1,Lt=P_(dt,!0)):Lt=[]:Jp(dt)||gl(dt)?(Lt=nt,gl(nt)?Lt=Nw(nt):(!Tr(nt)||ua(nt))&&(Lt=Uv(dt))):Gt=!1}Gt&&(Qe.set(dt,Lt),he(Lt,dt,V,Ne,Qe),Qe.delete(dt)),E_(d,_,Lt)}}(d,p,Qe,_,D_,V,he);else{var nt=V?V(G_(d,Qe),Ne,Qe+"",d,p,he):ee;nt===ee&&(nt=Ne),E_(d,Qe,nt)}},ro)}function Du(d,p){var _=d.length;if(_)return jo(p+=p<0?_:0,_)?d[p]:ee}function Zh(d,p,_){p=p.length?qi(p,function(Ne){return On(Ne)?function(Qe){return na(Qe,1===Ne.length?Ne[0]:Ne)}:Ne}):[so];var V=-1;return p=qi(p,ta(kn())),function(ct,Rt){var Tt=ct.length;for(ct.sort(function(Ne,Qe){return function(d,p,_){for(var V=-1,he=d.criteria,Ne=p.criteria,Qe=he.length,nt=_.length;++V<Qe;){var dt=Bc(he[V],Ne[V]);if(dt)return V>=nt?dt:dt*("desc"==_[V]?-1:1)}return d.index-p.index}(Ne,Qe,_)});Tt--;)ct[Tt]=ct[Tt].value;return ct}(iT(d,function(Ne,Qe,nt){return{criteria:qi(p,function(Ft){return Ft(Ne)}),index:++V,value:Ne}}))}function Cv(d,p,_){for(var V=-1,he=p.length,Ne={};++V<he;){var Qe=p[V],nt=na(d,Qe);_(nt,Qe)&&Ip(Ne,Lc(Qe,d),nt)}return Ne}function ra(d,p,_,V){var he=V?pp:il,Ne=-1,Qe=p.length,nt=d;for(d===p&&(p=no(p)),_&&(nt=qi(d,ta(_)));++Ne<Qe;)for(var dt=0,Ft=p[Ne],Lt=_?_(Ft):Ft;(dt=he(nt,Lt,dt,V))>-1;)nt!==d&&Ln.call(nt,dt,1),Ln.call(d,dt,1);return d}function Jh(d,p){for(var _=d?p.length:0,V=_-1;_--;){var he=p[_];if(_==V||he!==Ne){var Ne=he;jo(he)?Ln.call(d,he,1):Iu(d,he)}}return d}function Hl(d,p){return d+Si(zh()*(p-d+1))}function Dp(d,p){var _="";if(!d||p<1||p>Re)return _;do{p%2&&(_+=d),(p=Si(p/2))&&(d+=d)}while(p);return _}function pi(d,p){return Hp(bT(d,p,so),d+"")}function sT(d){return w_(nh(d))}function Ck(d,p){var _=nh(d);return qd(_,Au(p,0,_.length))}function Ip(d,p,_,V){if(!Tr(d))return d;for(var he=-1,Ne=(p=Lc(p,d)).length,Qe=Ne-1,nt=d;null!=nt&&++he<Ne;){var dt=si(p[he]),Ft=_;if("__proto__"===dt||"constructor"===dt||"prototype"===dt)return d;if(he!=Qe){var Lt=nt[dt];(Ft=V?V(Lt,dt,nt):ee)===ee&&(Ft=Tr(Lt)?Lt:jo(p[he+1])?[]:{})}al(nt,dt,Ft),nt=nt[dt]}return d}var I_=Gh?function(d,p){return Gh.set(d,p),d}:so,Bo=_p?function(d,p){return _p(d,"toString",{configurable:!0,enumerable:!1,value:Oy(p),writable:!0})}:so;function O_(d){return qd(nh(d))}function Ms(d,p,_){var V=-1,he=d.length;p<0&&(p=-p>he?0:he+p),(_=_>he?he:_)<0&&(_+=he),he=p>_?0:_-p>>>0,p>>>=0;for(var Ne=Tt(he);++V<he;)Ne[V]=d[V+p];return Ne}function Tk(d,p){var _;return Nc(d,function(V,he,Ne){return!(_=p(V,he,Ne))}),!!_}function ef(d,p,_){var V=0,he=null==d?V:d.length;if("number"==typeof p&&p==p&&he<=2147483647){for(;V<he;){var Ne=V+he>>>1,Qe=d[Ne];null!==Qe&&!da(Qe)&&(_?Qe<=p:Qe<p)?V=Ne+1:he=Ne}return he}return R_(d,p,so,_)}function R_(d,p,_,V){var he=0,Ne=null==d?0:d.length;if(0===Ne)return 0;for(var Qe=(p=_(p))!=p,nt=null===p,dt=da(p),Ft=p===ee;he<Ne;){var Lt=Si((he+Ne)/2),Gt=_(d[Lt]),nn=Gt!==ee,wn=null===Gt,Fn=Gt==Gt,gi=da(Gt);if(Qe)var Bn=V||Fn;else Bn=Ft?Fn&&(V||nn):nt?Fn&&nn&&(V||!wn):dt?Fn&&nn&&!wn&&(V||!gi):!wn&&!gi&&(V?Gt<=p:Gt<p);Bn?he=Lt+1:Ne=Lt}return ps(Ne,4294967294)}function Tv(d,p){for(var _=-1,V=d.length,he=0,Ne=[];++_<V;){var Qe=d[_],nt=p?p(Qe):Qe;if(!_||!Dn(nt,dt)){var dt=nt;Ne[he++]=0===Qe?0:Qe}}return Ne}function Av(d){return"number"==typeof d?d:da(d)?NaN:+d}function Vo(d){if("string"==typeof d)return d;if(On(d))return qi(d,Vo)+"";if(da(d))return $h?$h.call(d):"";var p=d+"";return"0"==p&&1/d==-te?"-0":p}function kc(d,p,_){var V=-1,he=jl,Ne=d.length,Qe=!0,nt=[],dt=nt;if(_)Qe=!1,he=Nh;else if(Ne>=200){var Ft=p?null:F_(d);if(Ft)return a_(Ft);Qe=!1,he=kh,dt=new Na}else dt=p?[]:nt;e:for(;++V<Ne;){var Lt=d[V],Gt=p?p(Lt):Lt;if(Lt=_||0!==Lt?Lt:0,Qe&&Gt==Gt){for(var nn=dt.length;nn--;)if(dt[nn]===Gt)continue e;p&&dt.push(Gt),nt.push(Lt)}else he(dt,Gt,_)||(dt!==nt&&dt.push(Gt),nt.push(Lt))}return nt}function Iu(d,p){return null==(d=H_(d,p=Lc(p,d)))||delete d[si(aa(p))]}function Op(d,p,_,V){return Ip(d,p,_(na(d,p)),V)}function Ou(d,p,_,V){for(var he=d.length,Ne=V?he:-1;(V?Ne--:++Ne<he)&&p(d[Ne],Ne,d););return _?Ms(d,V?0:Ne,V?Ne+1:he):Ms(d,V?Ne+1:0,V?he:Ne)}function oT(d,p){var _=d;return _ instanceof fi&&(_=_.value()),Eu(p,function(V,he){return he.func.apply(he.thisArg,Ur([V],he.args))},_)}function Ru(d,p,_){var V=d.length;if(V<2)return V?kc(d[0]):[];for(var he=-1,Ne=Tt(V);++he<V;)for(var Qe=d[he],nt=-1;++nt<V;)nt!=he&&(Ne[he]=Rc(Ne[he]||Qe,d[nt],p,_));return kc(Ts(Ne,1),p,_)}function Rp(d,p,_){for(var V=-1,he=d.length,Ne=p.length,Qe={};++V<he;)_(Qe,d[V],V<Ne?p[V]:ee);return Qe}function Fc(d){return Cr(d)?d:[]}function N_(d){return"function"==typeof d?d:so}function Lc(d,p){return On(d)?d:oa(d,p)?[d]:$v(Hi(d))}var aT=pi;function ul(d,p,_){var V=d.length;return _=_===ee?V:_,!p&&_>=V?d:Ms(d,p,_)}var lT=fv||function(d){return Ui.clearTimeout(d)};function Np(d,p){if(p)return d.slice();var _=d.length,V=hv?hv(_):new d.constructor(_);return d.copy(V),V}function Nu(d){var p=new d.constructor(d.byteLength);return new Id(p).set(new Id(d)),p}function P_(d,p){var _=p?Nu(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}function Bc(d,p){if(d!==p){var _=d!==ee,V=null===d,he=d==d,Ne=da(d),Qe=p!==ee,nt=null===p,dt=p==p,Ft=da(p);if(!nt&&!Ft&&!Ne&&d>p||Ne&&Qe&&dt&&!nt&&!Ft||V&&Qe&&dt||!_&&dt||!he)return 1;if(!V&&!Ne&&!Ft&&d<p||Ft&&_&&he&&!V&&!Ne||nt&&_&&he||!Qe&&he||!dt)return-1}return 0}function zd(d,p,_,V){for(var he=-1,Ne=d.length,Qe=_.length,nt=-1,dt=p.length,Ft=zr(Ne-Qe,0),Lt=Tt(dt+Ft),Gt=!V;++nt<dt;)Lt[nt]=p[nt];for(;++he<Qe;)(Gt||he<Ne)&&(Lt[_[he]]=d[he]);for(;Ft--;)Lt[nt++]=d[he++];return Lt}function Mv(d,p,_,V){for(var he=-1,Ne=d.length,Qe=-1,nt=_.length,dt=-1,Ft=p.length,Lt=zr(Ne-nt,0),Gt=Tt(Lt+Ft),nn=!V;++he<Lt;)Gt[he]=d[he];for(var wn=he;++dt<Ft;)Gt[wn+dt]=p[dt];for(;++Qe<nt;)(nn||he<Ne)&&(Gt[wn+_[Qe]]=d[he++]);return Gt}function no(d,p){var _=-1,V=d.length;for(p||(p=Tt(V));++_<V;)p[_]=d[_];return p}function Fa(d,p,_,V){var he=!_;_||(_={});for(var Ne=-1,Qe=p.length;++Ne<Qe;){var nt=p[Ne],dt=V?V(_[nt],d[nt],nt,_,d):ee;dt===ee&&(dt=d[nt]),he?ll(_,nt,dt):al(_,nt,dt)}return _}function ts(d,p){return function(_,V){var he=On(_)?jr:Cp,Ne=p?p():{};return he(_,d,kn(V,2),Ne)}}function Gl(d){return pi(function(p,_){var V=-1,he=_.length,Ne=he>1?_[he-1]:ee,Qe=he>2?_[2]:ee;for(Ne=d.length>3&&"function"==typeof Ne?(he--,Ne):ee,Qe&&Ws(_[0],_[1],Qe)&&(Ne=he<3?ee:Ne,he=1),p=Yi(p);++V<he;){var nt=_[V];nt&&d(p,nt,V,Ne)}return p})}function dl(d,p){return function(_,V){if(null==_)return _;if(!bo(_))return d(_,V);for(var he=_.length,Ne=p?he:-1,Qe=Yi(_);(p?Ne--:++Ne<he)&&!1!==V(Qe[Ne],Ne,Qe););return _}}function Dv(d){return function(p,_,V){for(var he=-1,Ne=Yi(p),Qe=V(p),nt=Qe.length;nt--;){var dt=Qe[d?nt:++he];if(!1===_(Ne[dt],dt,Ne))break}return p}}function Pp(d){return function(p){var _=Fh(p=Hi(p))?rl(p):ee,V=_?_[0]:p.charAt(0),he=_?ul(_,1).join(""):p.slice(1);return V[d]()+he}}function $l(d){return function(p){return Eu(Dy(Ey(p).replace(fp,"")),d,"")}}function Gd(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var _=Tu(d.prototype),V=d.apply(_,p);return Tr(V)?V:_}}function Ov(d){return function(p,_,V){var he=Yi(p);if(!bo(p)){var Ne=kn(_,3);p=Is(p),_=function(nt){return Ne(he[nt],nt,he)}}var Qe=d(p,_,V);return Qe>-1?he[Ne?p[Qe]:Qe]:ee}}function ku(d){return hl(function(p){var _=p.length,V=_,he=Lo.prototype.thru;for(d&&p.reverse();V--;){var Ne=p[V];if("function"!=typeof Ne)throw new Ia(Ee);if(he&&!Qe&&"wrapper"==jp(Ne))var Qe=new Lo([],!0)}for(V=Qe?V:_;++V<_;){var nt=jp(Ne=p[V]),dt="wrapper"==nt?B_(Ne):ee;Qe=dt&&Up(dt[0])&&424==dt[1]&&!dt[4].length&&1==dt[9]?Qe[jp(dt[0])].apply(Qe,dt[3]):1==Ne.length&&Up(Ne)?Qe[nt]():Qe.thru(Ne)}return function(){var Ft=arguments,Lt=Ft[0];if(Qe&&1==Ft.length&&On(Lt))return Qe.plant(Lt).value();for(var Gt=0,nn=_?p[Gt].apply(this,Ft):Lt;++Gt<_;)nn=p[Gt].call(this,nn);return nn}})}function Vc(d,p,_,V,he,Ne,Qe,nt,dt,Ft){var Lt=p&O,Gt=1&p,nn=2&p,wn=24&p,Fn=512&p,gi=nn?ee:Gd(d);return function Bn(){for(var mi=arguments.length,Di=Tt(mi),wo=mi;wo--;)Di[wo]=arguments[wo];if(wn)var qs=Wd(Bn),ha=ok(Di,qs);if(V&&(Di=zd(Di,V,he,wn)),Ne&&(Di=Mv(Di,Ne,Qe,wn)),mi-=ha,wn&&mi<Ft){var Gi=xu(Di,qs);return Pv(d,p,Vc,Bn.placeholder,_,Di,Gi,nt,dt,Ft-mi)}var bl=Gt?_:this,Gc=nn?bl[d]:d;return mi=Di.length,nt?Di=vT(Di,nt):Fn&&mi>1&&Di.reverse(),Lt&&dt<mi&&(Di.length=dt),this&&this!==Ui&&this instanceof Bn&&(Gc=gi||Gd(Gc)),Gc.apply(bl,Di)}}function Rv(d,p){return function(_,V){return function(d,p,_,V){return cl(d,function(he,Ne,Qe){p(V,_(he),Ne,Qe)}),V}(_,d,p(V),{})}}function k_(d,p){return function(_,V){var he;if(_===ee&&V===ee)return p;if(_!==ee&&(he=_),V!==ee){if(he===ee)return V;"string"==typeof _||"string"==typeof V?(_=Vo(_),V=Vo(V)):(_=Av(_),V=Av(V)),he=d(_,V)}return he}}function kp(d){return hl(function(p){return p=qi(p,ta(kn())),pi(function(_){var V=this;return d(p,function(he){return os(he,V,_)})})})}function Fp(d,p){var _=(p=p===ee?" ":Vo(p)).length;if(_<2)return _?Dp(p,d):p;var V=Dp(p,jt(d/Lh(p)));return Fh(p)?ul(rl(V),0,d).join(""):V.slice(0,d)}function Nv(d){return function(p,_,V){return V&&"number"!=typeof V&&Ws(p,_,V)&&(_=V=ee),p=_l(p),_===ee?(_=p,p=0):_=_l(_),function(d,p,_,V){for(var he=-1,Ne=zr(jt((p-d)/(_||1)),0),Qe=Tt(Ne);Ne--;)Qe[V?Ne:++he]=d,d+=_;return Qe}(p,_,V=V===ee?p<_?1:-1:_l(V),d)}}function Lp(d){return function(p,_){return"string"==typeof p&&"string"==typeof _||(p=vo(p),_=vo(_)),d(p,_)}}function Pv(d,p,_,V,he,Ne,Qe,nt,dt,Ft){var Lt=8&p;p|=Lt?T:64,4&(p&=~(Lt?64:T))||(p&=-4);var gi=[d,p,he,Lt?Ne:ee,Lt?Qe:ee,Lt?ee:Ne,Lt?ee:Qe,nt,dt,Ft],Bn=_.apply(ee,gi);return Up(d)&&Gv(Bn,gi),Bn.placeholder=V,rf(Bn,d,p)}function $d(d){var p=es[d];return function(_,V){if(_=vo(_),(V=null==V?0:ps(ti(V),292))&&p_(_)){var he=(Hi(_)+"e").split("e");return+((he=(Hi(p(he[0]+"e"+(+he[1]+V)))+"e").split("e"))[0]+"e"+(+he[1]-V))}return p(_)}}var F_=Ra&&1/a_(new Ra([,-0]))[1]==te?function(d){return new Ra(d)}:Py;function Fu(d){return function(p){var _=$s(p);return _==Ve?cv(p):_==gt?function(ct){var Rt=-1,Tt=Array(ct.size);return ct.forEach(function(hn){Tt[++Rt]=[hn,hn]}),Tt}(p):function(ct,Rt){return qi(Rt,function(Tt){return[Tt,ct[Tt]]})}(p,d(p))}}function Wl(d,p,_,V,he,Ne,Qe,nt){var dt=2&p;if(!dt&&"function"!=typeof d)throw new Ia(Ee);var Ft=V?V.length:0;if(Ft||(p&=-97,V=he=ee),Qe=Qe===ee?Qe:zr(ti(Qe),0),nt=nt===ee?nt:ti(nt),Ft-=he?he.length:0,64&p){var Lt=V,Gt=he;V=he=ee}var nn=dt?ee:B_(d),wn=[d,p,_,V,he,Lt,Gt,Ne,Qe,nt];if(nn&&function(d,p){var _=d[1],V=p[1],he=_|V;if(!(he<131||(V==O&&8==_||V==O&&256==_&&d[7].length<=p[8]||384==V&&p[7].length<=p[8]&&8==_)))return d;1&V&&(d[2]=p[2],he|=1&_?0:4);var nt=p[3];if(nt){var dt=d[3];d[3]=dt?zd(dt,nt,p[4]):nt,d[4]=dt?xu(d[3],F):p[4]}(nt=p[5])&&(d[5]=(dt=d[5])?Mv(dt,nt,p[6]):nt,d[6]=dt?xu(d[5],F):p[6]),(nt=p[7])&&(d[7]=nt),V&O&&(d[8]=null==d[8]?p[8]:ps(d[8],p[8])),null==d[9]&&(d[9]=p[9]),d[0]=p[0],d[1]=he}(wn,nn),d=wn[0],p=wn[1],_=wn[2],V=wn[3],he=wn[4],!(nt=wn[9]=wn[9]===ee?dt?0:d.length:zr(wn[9]-Ft,0))&&24&p&&(p&=-25),p&&1!=p)Fn=8==p||16==p?function(d,p,_){var V=Gd(d);return function he(){for(var Ne=arguments.length,Qe=Tt(Ne),nt=Ne,dt=Wd(he);nt--;)Qe[nt]=arguments[nt];var Ft=Ne<3&&Qe[0]!==dt&&Qe[Ne-1]!==dt?[]:xu(Qe,dt);return(Ne-=Ft.length)<_?Pv(d,p,Vc,he.placeholder,ee,Qe,Ft,ee,ee,_-Ne):os(this&&this!==Ui&&this instanceof he?V:d,this,Qe)}}(d,p,nt):p!=T&&33!=p||he.length?Vc.apply(ee,wn):function(d,p,_,V){var he=1&p,Ne=Gd(d);return function Qe(){for(var nt=-1,dt=arguments.length,Ft=-1,Lt=V.length,Gt=Tt(Lt+dt),nn=this&&this!==Ui&&this instanceof Qe?Ne:d;++Ft<Lt;)Gt[Ft]=V[Ft];for(;dt--;)Gt[Ft++]=arguments[++nt];return os(nn,he?_:this,Gt)}}(d,p,_,V);else var Fn=function(d,p,_){var V=1&p,he=Gd(d);return function Ne(){return(this&&this!==Ui&&this instanceof Ne?he:d).apply(V?_:this,arguments)}}(d,p,_);return rf((nn?I_:Gv)(Fn,wn),d,p)}function kv(d,p,_,V){return d===ee||Dn(d,Su[_])&&!Xi.call(V,_)?p:d}function dT(d,p,_,V,he,Ne){return Tr(d)&&Tr(p)&&(Ne.set(p,d),D_(d,p,ee,dT,Ne),Ne.delete(p)),d}function Bp(d){return Jp(d)?ee:d}function Vp(d,p,_,V,he,Ne){var Qe=1&_,nt=d.length,dt=p.length;if(nt!=dt&&!(Qe&&dt>nt))return!1;var Ft=Ne.get(d),Lt=Ne.get(p);if(Ft&&Lt)return Ft==p&&Lt==d;var Gt=-1,nn=!0,wn=2&_?new Na:ee;for(Ne.set(d,p),Ne.set(p,d);++Gt<nt;){var Fn=d[Gt],gi=p[Gt];if(V)var Bn=Qe?V(gi,Fn,Gt,p,d,Ne):V(Fn,gi,Gt,d,p,Ne);if(Bn!==ee){if(Bn)continue;nn=!1;break}if(wn){if(!ko(p,function(mi,Di){if(!kh(wn,Di)&&(Fn===mi||he(Fn,mi,_,V,Ne)))return wn.push(Di)})){nn=!1;break}}else if(Fn!==gi&&!he(Fn,gi,_,V,Ne)){nn=!1;break}}return Ne.delete(d),Ne.delete(p),nn}function hl(d){return Hp(bT(d,ee,Ds),d+"")}function ql(d){return zi(d,Is,V_)}function L_(d){return zi(d,ro,Bv)}var B_=Gh?function(d){return Gh.get(d)}:Py;function jp(d){for(var p=d.name+"",_=Od[p],V=Xi.call(Od,p)?_.length:0;V--;){var he=_[V],Ne=he.func;if(null==Ne||Ne==d)return he.name}return p}function Wd(d){return(Xi.call(Ie,"placeholder")?Ie:d).placeholder}function kn(){var d=Ie.iteratee||ju;return d=d===ju?nT:d,arguments.length?d(arguments[0],arguments[1]):d}function Gs(d,p){var _=d.__data__;return function(d){var p=typeof d;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==d:null===d}(p)?_["string"==typeof p?"string":"hash"]:_.map}function sa(d){for(var p=Is(d),_=p.length;_--;){var V=p[_],he=d[V];p[_]=[V,he,_T(he)]}return p}function jc(d,p){var _=function(ct,Rt){return null==ct?ee:ct[Rt]}(d,p);return M_(_)?_:ee}var V_=_r?function(d){return null==d?[]:(d=Yi(d),Ma(_r(d),function(p){return mp.call(d,p)}))}:Hc,Bv=_r?function(d){for(var p=[];d;)Ur(p,V_(d)),d=Oa(d);return p}:Hc,$s=As;function jv(d,p,_){for(var V=-1,he=(p=Lc(p,d)).length,Ne=!1;++V<he;){var Qe=si(p[V]);if(!(Ne=null!=d&&_(d,Qe)))break;d=d[Qe]}return Ne||++V!=he?Ne:!!(he=null==d?0:d.length)&&fy(he)&&jo(Qe,he)&&(On(d)||gl(d))}function Uv(d){return"function"!=typeof d.constructor||zp(d)?{}:Tu(Oa(d))}function mT(d){return On(d)||gl(d)||!!(BC&&d&&d[BC])}function jo(d,p){var _=typeof d;return!!(p=null==p?Re:p)&&("number"==_||"symbol"!=_&&Wi.test(d))&&d>-1&&d%1==0&&d<p}function Ws(d,p,_){if(!Tr(_))return!1;var V=typeof p;return!!("number"==V?bo(_)&&jo(p,_.length):"string"==V&&p in _)&&Dn(_[p],d)}function oa(d,p){if(On(d))return!1;var _=typeof d;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=d&&!da(d))||ye.test(d)||!ft.test(d)||null!=p&&d in Yi(p)}function Up(d){var p=jp(d),_=Ie[p];if("function"!=typeof _||!(p in fi.prototype))return!1;if(d===_)return!0;var V=B_(_);return!!V&&d===V[0]}(Cs&&$s(new Cs(new ArrayBuffer(1)))!=At||mo&&$s(new mo)!=Ve||bp&&$s(bp.resolve())!=ce||Ra&&$s(new Ra)!=gt||Fo&&$s(new Fo)!=H)&&($s=function(d){var p=As(d),_=p==ge?d.constructor:ee,V=_?Lu(_):"";if(V)switch(V){case zC:return At;case g_:return Ve;case m_:return ce;case pv:return gt;case __:return H}return p});var Hv=gp?ua:Fy;function zp(d){var p=d&&d.constructor;return d===("function"==typeof p&&p.prototype||Su)}function _T(d){return d==d&&!Tr(d)}function yT(d,p){return function(_){return null!=_&&_[d]===p&&(p!==ee||d in Yi(_))}}function bT(d,p,_){return p=zr(p===ee?d.length-1:p,0),function(){for(var V=arguments,he=-1,Ne=zr(V.length-p,0),Qe=Tt(Ne);++he<Ne;)Qe[he]=V[p+he];he=-1;for(var nt=Tt(p+1);++he<p;)nt[he]=V[he];return nt[p]=_(Qe),os(d,this,nt)}}function H_(d,p){return p.length<2?d:na(d,Ms(p,0,-1))}function vT(d,p){for(var _=d.length,V=ps(p.length,_),he=no(d);V--;){var Ne=p[V];d[V]=jo(Ne,_)?he[Ne]:ee}return d}function G_(d,p){if(("constructor"!==p||"function"!=typeof d[p])&&"__proto__"!=p)return d[p]}var Gv=$_(I_),nf=jC||function(d,p){return Ui.setTimeout(d,p)},Hp=$_(Bo);function rf(d,p,_){var V=p+"";return Hp(d,function(d,p){var _=p.length;if(!_)return d;var V=_-1;return p[V]=(_>1?"& ":"")+p[V],p=p.join(_>2?", ":" "),d.replace(It,"{\n/* [wrapped with "+p+"] */\n")}(V,function(d,p){return Us(Ge,function(_){var V="_."+_[0];p&_[1]&&!jl(d,V)&&d.push(V)}),d.sort()}(function(d){var p=d.match(Ot);return p?p[1].split(Qt):[]}(V),_)))}function $_(d){var p=0,_=0;return function(){var V=mk(),he=16-(V-_);if(_=V,he>0){if(++p>=800)return arguments[0]}else p=0;return d.apply(ee,arguments)}}function qd(d,p){var _=-1,V=d.length,he=V-1;for(p=p===ee?V:p;++_<p;){var Ne=Hl(_,he),Qe=d[Ne];d[Ne]=d[_],d[_]=Qe}return d.length=p,d}var p,_,$v=(p=uf(function(d){var p=[];return 46===d.charCodeAt(0)&&p.push(""),d.replace(Te,function(_,V,he,Ne){p.push(he?Ne.replace(Rn,"$1"):V||_)}),p},function(V){return 500===_.size&&_.clear(),V}),_=p.cache,p);function si(d){if("string"==typeof d||da(d))return d;var p=d+"";return"0"==p&&1/d==-te?"-0":p}function Lu(d){if(null!=d){try{return Sr.call(d)}catch(p){}try{return d+""}catch(p){}}return""}function sf(d){if(d instanceof fi)return d.clone();var p=new Lo(d.__wrapped__,d.__chain__);return p.__actions__=no(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}var ST=pi(function(d,p){return Cr(d)?Rc(d,Ts(p,1,Cr,!0)):[]}),CT=pi(function(d,p){var _=aa(p);return Cr(_)&&(_=ee),Cr(d)?Rc(d,Ts(p,1,Cr,!0),kn(_,2)):[]}),TT=pi(function(d,p){var _=aa(p);return Cr(_)&&(_=ee),Cr(d)?Rc(d,Ts(p,1,Cr,!0),ee,_):[]});function q_(d,p,_){var V=null==d?0:d.length;if(!V)return-1;var he=null==_?0:ti(_);return he<0&&(he=zr(V+he,0)),Td(d,kn(p,3),he)}function Y_(d,p,_){var V=null==d?0:d.length;if(!V)return-1;var he=V-1;return _!==ee&&(he=ti(_),he=_<0?zr(V+he,0):ps(he,V-1)),Td(d,kn(p,3),he,!0)}function Ds(d){return null!=d&&d.length?Ts(d,1):[]}function qv(d){return d&&d.length?d[0]:ee}var Xv=pi(function(d){var p=qi(d,Fc);return p.length&&p[0]===d[0]?Mu(p):[]}),DT=pi(function(d){var p=aa(d),_=qi(d,Fc);return p===aa(_)?p=ee:_.pop(),_.length&&_[0]===d[0]?Mu(_,kn(p,2)):[]}),Kv=pi(function(d){var p=aa(d),_=qi(d,Fc);return(p="function"==typeof p?p:ee)&&_.pop(),_.length&&_[0]===d[0]?Mu(_,ee,p):[]});function aa(d){var p=null==d?0:d.length;return p?d[p-1]:ee}var K_=pi(Q_);function Q_(d,p){return d&&d.length&&p&&p.length?ra(d,p):d}var Zv=hl(function(d,p){var _=null==d?0:d.length,V=x_(d,p);return Jh(d,qi(p,function(he){return jo(he,_)?+he:he}).sort(Bc)),V});function Z_(d){return null==d?d:yp.call(d)}var tw=pi(function(d){return kc(Ts(d,1,Cr,!0))}),UT=pi(function(d){var p=aa(d);return Cr(p)&&(p=ee),kc(Ts(d,1,Cr,!0),kn(p,2))}),zT=pi(function(d){var p=aa(d);return p="function"==typeof p?p:ee,kc(Ts(d,1,Cr,!0),ee,p)});function nw(d){if(!d||!d.length)return[];var p=0;return d=Ma(d,function(_){if(Cr(_))return p=zr(_.length,p),!0}),Md(p,function(_){return qi(d,r_(_))})}function GT(d,p){if(!d||!d.length)return[];var _=nw(d);return null==p?_:qi(_,function(V){return os(p,ee,V)})}var iw=pi(function(d,p){return Cr(d)?Rc(d,p):[]}),kk=pi(function(d){return Ru(Ma(d,Cr))}),Uo=pi(function(d){var p=aa(d);return Cr(p)&&(p=ee),Ru(Ma(d,Cr),kn(p,2))}),J_=pi(function(d){var p=aa(d);return p="function"==typeof p?p:ee,Ru(Ma(d,Cr),ee,p)}),ey=pi(nw),lf=pi(function(d){var p=d.length,_=p>1?d[p-1]:ee;return _="function"==typeof _?(d.pop(),_):ee,GT(d,_)});function ty(d){var p=Ie(d);return p.__chain__=!0,p}function Xd(d,p){return p(d)}var ny=hl(function(d){var p=d.length,_=p?d[0]:0,V=this.__wrapped__,he=function(Ne){return x_(Ne,d)};return!(p>1||this.__actions__.length)&&V instanceof fi&&jo(_)?((V=V.slice(_,+_+(p?1:0))).__actions__.push({func:Xd,args:[he],thisArg:ee}),new Lo(V,this.__chain__).thru(function(Ne){return p&&!Ne.length&&Ne.push(ee),Ne})):this.thru(he)}),qT=ts(function(d,p,_){Xi.call(d,_)?++d[_]:ll(d,_,1)}),QT=Ov(q_),ZT=Ov(Y_);function oy(d,p){return(On(d)?Us:Nc)(d,kn(p,3))}function Wp(d,p){return(On(d)?Sd:C_)(d,kn(p,3))}var eA=ts(function(d,p,_){Xi.call(d,_)?d[_].push(p):ll(d,_,[p])}),cw=pi(function(d,p,_){var V=-1,he="function"==typeof p,Ne=bo(d)?Tt(d.length):[];return Nc(d,function(Qe){Ne[++V]=he?os(p,Qe,_):ka(Qe,p,_)}),Ne}),uw=ts(function(d,p,_){ll(d,_,p)});function pl(d,p){return(On(d)?qi:iT)(d,kn(p,3))}var hw=ts(function(d,p,_){d[_?0:1].push(p)},function(){return[[],[]]}),Yp=pi(function(d,p){if(null==d)return[];var _=p.length;return _>1&&Ws(d,p[0],p[1])?p=[]:_>2&&Ws(p[0],p[1],p[2])&&(p=[p[0]]),Zh(d,Ts(p,1),[])}),Bu=VC||function(){return Ui.Date.now()};function Xp(d,p,_){return p=_?ee:p,Wl(d,O,ee,ee,ee,ee,p=d&&null==p?d.length:p)}function ly(d,p){var _;if("function"!=typeof p)throw new Ia(Ee);return d=ti(d),function(){return--d>0&&(_=p.apply(this,arguments)),d<=1&&(p=ee),_}}var cf=pi(function(d,p,_){var V=1;if(_.length){var he=xu(_,Wd(cf));V|=T}return Wl(d,V,p,_,he)}),Qd=pi(function(d,p,_){var V=3;if(_.length){var he=xu(_,Wd(Qd));V|=T}return Wl(p,V,d,_,he)});function bw(d,p,_){var V,he,Ne,Qe,nt,dt,Ft=0,Lt=!1,Gt=!1,nn=!0;if("function"!=typeof d)throw new Ia(Ee);function wn(Gi){var bl=V,Gc=he;return V=he=ee,Ft=Gi,Qe=d.apply(Gc,bl)}function Fn(Gi){return Ft=Gi,nt=nf(mi,p),Lt?wn(Gi):Qe}function Bn(Gi){var bl=Gi-dt;return dt===ee||bl>=p||bl<0||Gt&&Gi-Ft>=Ne}function mi(){var Gi=Bu();if(Bn(Gi))return Di(Gi);nt=nf(mi,function(Gi){var lM=p-(Gi-dt);return Gt?ps(lM,Ne-(Gi-Ft)):lM}(Gi))}function Di(Gi){return nt=ee,nn&&V?wn(Gi):(V=he=ee,Qe)}function ha(){var Gi=Bu(),bl=Bn(Gi);if(V=arguments,he=this,dt=Gi,bl){if(nt===ee)return Fn(dt);if(Gt)return lT(nt),nt=nf(mi,p),wn(dt)}return nt===ee&&(nt=nf(mi,p)),Qe}return p=vo(p)||0,Tr(_)&&(Lt=!!_.leading,Ne=(Gt="maxWait"in _)?zr(vo(_.maxWait)||0,p):Ne,nn="trailing"in _?!!_.trailing:nn),ha.cancel=function(){nt!==ee&&lT(nt),Ft=0,V=dt=he=nt=ee},ha.flush=function(){return nt===ee?Qe:Di(Bu())},ha}var rA=pi(function(d,p){return Xh(d,1,p)}),vw=pi(function(d,p,_){return Xh(d,vo(p)||0,_)});function uf(d,p){if("function"!=typeof d||null!=p&&"function"!=typeof p)throw new Ia(Ee);var _=function(){var V=arguments,he=p?p.apply(this,V):V[0],Ne=_.cache;if(Ne.has(he))return Ne.get(he);var Qe=d.apply(this,V);return _.cache=Ne.set(he,Qe)||Ne,Qe};return _.cache=new(uf.Cache||ol),_}function dy(d){if("function"!=typeof d)throw new Ia(Ee);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}uf.Cache=ol;var sA=aT(function(d,p){var _=(p=1==p.length&&On(p[0])?qi(p[0],ta(kn())):qi(Ts(p,1),ta(kn()))).length;return pi(function(V){for(var he=-1,Ne=ps(V.length,_);++he<Ne;)V[he]=p[he].call(this,V[he]);return os(d,this,V)})}),Kp=pi(function(d,p){var _=xu(p,Wd(Kp));return Wl(d,T,ee,p,_)}),Ew=pi(function(d,p){var _=xu(p,Wd(Ew));return Wl(d,64,ee,p,_)}),oA=hl(function(d,p){return Wl(d,256,ee,ee,ee,p)});function Dn(d,p){return d===p||d!=d&&p!=p}var zt=Lp(yo),Cw=Lp(function(d,p){return d>=p}),gl=JC(function(){return arguments}())?JC:function(d){return Ar(d)&&Xi.call(d,"callee")&&!mp.call(d,"callee")},On=Tt.isArray,Tw=an?ta(an):function(d){return Ar(d)&&As(d)==it};function bo(d){return null!=d&&fy(d.length)&&!ua(d)}function Cr(d){return Ar(d)&&bo(d)}var ml=as||Fy,Aw=hi?ta(hi):function(d){return Ar(d)&&As(d)==Ce};function Ba(d){if(!Ar(d))return!1;var p=As(d);return p==Se||"[object DOMException]"==p||"string"==typeof d.message&&"string"==typeof d.name&&!Jp(d)}function ua(d){if(!Tr(d))return!1;var p=As(d);return p==ze||p==Ke||"[object AsyncFunction]"==p||"[object Proxy]"==p}function Zp(d){return"number"==typeof d&&d==ti(d)}function fy(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=Re}function Tr(d){var p=typeof d;return null!=d&&("object"==p||"function"==p)}function Ar(d){return null!=d&&"object"==typeof d}var gA=ur?ta(ur):function(d){return Ar(d)&&$s(d)==Ve};function yA(d){return"number"==typeof d||Ar(d)&&As(d)==K}function Jp(d){if(!Ar(d)||As(d)!=ge)return!1;var p=Oa(d);if(null===p)return!0;var _=Xi.call(p,"constructor")&&p.constructor;return"function"==typeof _&&_ instanceof _&&Sr.call(_)==LC}var Ow=go?ta(go):function(d){return Ar(d)&&As(d)==_t},bA=Mc?ta(Mc):function(d){return Ar(d)&&$s(d)==gt};function gy(d){return"string"==typeof d||!On(d)&&Ar(d)&&As(d)==Ae}function da(d){return"symbol"==typeof d||Ar(d)&&As(d)==z}var df=ss?ta(ss):function(d){return Ar(d)&&fy(d.length)&&!!rn[As(d)]},Uc=Lp(Sv),my=Lp(function(d,p){return d<=p});function Rw(d){if(!d)return[];if(bo(d))return gy(d)?rl(d):no(d);if(jh&&d[jh])return function(ct){for(var Rt,Tt=[];!(Rt=ct.next()).done;)Tt.push(Rt.value);return Tt}(d[jh]());var p=$s(d);return(p==Ve?cv:p==gt?a_:nh)(d)}function _l(d){return d?(d=vo(d))===te||d===-te?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function ti(d){var p=_l(d),_=p%1;return p==p?_?p-_:p:0}function _y(d){return d?Au(ti(d),0,ve):0}function vo(d){if("number"==typeof d)return d;if(da(d))return NaN;if(Tr(d)){var p="function"==typeof d.valueOf?d.valueOf():d;d=Tr(p)?p+"":p}if("string"!=typeof d)return 0===d?d:+d;d=lv(d);var _=rr.test(d);return _||Qn.test(d)?av(d.slice(2),_?2:8):Cn.test(d)?NaN:+d}function Nw(d){return Fa(d,ro(d))}function Hi(d){return null==d?"":Vo(d)}var vA=Gl(function(d,p){if(zp(p)||bo(p))Fa(p,Is(p),d);else for(var _ in p)Xi.call(p,_)&&al(d,_,p[_])}),wA=Gl(function(d,p){Fa(p,ro(p),d)}),Zd=Gl(function(d,p,_,V){Fa(p,ro(p),d,V)}),EA=Gl(function(d,p,_,V){Fa(p,Is(p),d,V)}),Pw=hl(x_),SA=pi(function(d,p){d=Yi(d);var _=-1,V=p.length,he=V>2?p[2]:ee;for(he&&Ws(p[0],p[1],he)&&(V=1);++_<V;)for(var Ne=p[_],Qe=ro(Ne),nt=-1,dt=Qe.length;++nt<dt;){var Ft=Qe[nt],Lt=d[Ft];(Lt===ee||Dn(Lt,Su[Ft])&&!Xi.call(d,Ft))&&(d[Ft]=Ne[Ft])}return d}),hf=pi(function(d){return d.push(ee,dT),os(jw,ee,d)});function pf(d,p,_){var V=null==d?ee:na(d,p);return V===ee?_:V}function eg(d,p){return null!=d&&jv(d,p,Bd)}var tg=Rv(function(d,p,_){null!=p&&"function"!=typeof p.toString&&(p=eo.call(p)),d[p]=_},Oy(so)),TA=Rv(function(d,p,_){null!=p&&"function"!=typeof p.toString&&(p=eo.call(p)),Xi.call(d,p)?d[p].push(_):d[p]=[_]},kn),Lw=pi(ka);function Is(d){return bo(d)?Yh(d):xv(d)}function ro(d){return bo(d)?Yh(d,!0):function(d){if(!Tr(d))return function(d){var p=[];if(null!=d)for(var _ in Yi(d))p.push(_);return p}(d);var p=zp(d),_=[];for(var V in d)"constructor"==V&&(p||!Xi.call(d,V))||_.push(V);return _}(d)}var Vw=Gl(function(d,p,_){D_(d,p,_)}),jw=Gl(function(d,p,_,V){D_(d,p,_,V)}),MA=hl(function(d,p){var _={};if(null==d)return _;var V=!1;p=qi(p,function(Ne){return Ne=Lc(Ne,d),V||(V=Ne.length>1),Ne}),Fa(d,L_(d),_),V&&(_=Hs(_,7,Bp));for(var he=p.length;he--;)Iu(_,p[he]);return _}),DA=hl(function(d,p){return null==d?{}:function(d,p){return Cv(d,p,function(_,V){return eg(d,V)})}(d,p)});function Uw(d,p){if(null==d)return{};var _=qi(L_(d),function(V){return[V]});return p=kn(p),Cv(d,_,function(V,he){return p(V,he[0])})}var IA=Fu(Is),Hw=Fu(ro);function nh(d){return null==d?[]:o_(d,Is(d))}var kA=$l(function(d,p,_){return p=p.toLowerCase(),d+(_?wy(p):p)});function wy(d){return ig(Hi(d).toLowerCase())}function Ey(d){return(d=Hi(d))&&d.replace(Ca,ak).replace(n_,"")}var LA=$l(function(d,p,_){return d+(_?"-":"")+p.toLowerCase()}),BA=$l(function(d,p,_){return d+(_?" ":"")+p.toLowerCase()}),Wk=Pp("toLowerCase"),HA=$l(function(d,p,_){return d+(_?"_":"")+p.toLowerCase()}),Cy=$l(function(d,p,_){return d+(_?" ":"")+ig(p)}),Xw=$l(function(d,p,_){return d+(_?" ":"")+p.toUpperCase()}),ig=Pp("toUpperCase");function Dy(d,p,_){return d=Hi(d),(p=_?ee:p)===ee?function(ct){return Bl.test(ct)}(d)?function(ct){return ct.match(iv)||[]}(d):function(ct){return ct.match(zn)||[]}(d):d.match(p)||[]}var Iy=pi(function(d,p){try{return os(d,ee,p)}catch(_){return Ba(_)?_:new Mn(_)}}),Kw=hl(function(d,p){return Us(p,function(_){_=si(_),ll(d,_,cf(d[_],d))}),d});function Oy(d){return function(){return d}}var Yk=ku(),Vu=ku(!0);function so(d){return d}function ju(d){return nT("function"==typeof d?d:Hs(d,1))}var Ry=pi(function(d,p){return function(_){return ka(_,d,p)}}),Qw=pi(function(d,p){return function(_){return ka(d,_,p)}});function Ny(d,p,_){var V=Is(p),he=Qh(p,V);null==_&&(!Tr(p)||!he.length&&V.length)&&(_=p,p=d,d=this,he=Qh(p,Is(p)));var Ne=!(Tr(_)&&"chain"in _&&!_.chain),Qe=ua(d);return Us(he,function(nt){var dt=p[nt];d[nt]=dt,Qe&&(d.prototype[nt]=function(){var Ft=this.__chain__;if(Ne||Ft){var Lt=d(this.__wrapped__),Gt=Lt.__actions__=no(this.__actions__);return Gt.push({func:dt,args:arguments,thisArg:d}),Lt.__chain__=Ft,Lt}return dt.apply(d,Ur([this.value()],arguments))})}),d}function Py(){}var KA=kp(qi),QA=kp(ri),Jw=kp(ko);function Uu(d){return oa(d)?r_(si(d)):function(d){return function(p){return na(p,d)}}(d)}var ZA=Nv(),JA=Nv(!0);function Hc(){return[]}function Fy(){return!1}var Hn=k_(function(d,p){return d+p},0),Ly=$d("ceil"),Kk=k_(function(d,p){return d/p},1),Kl=$d("floor"),iE=k_(function(d,p){return d*p},1),rE=$d("round"),sE=k_(function(d,p){return d-p},0);return Ie.after=function(d,p){if("function"!=typeof p)throw new Ia(Ee);return d=ti(d),function(){if(--d<1)return p.apply(this,arguments)}},Ie.ary=Xp,Ie.assign=vA,Ie.assignIn=wA,Ie.assignInWith=Zd,Ie.assignWith=EA,Ie.at=Pw,Ie.before=ly,Ie.bind=cf,Ie.bindAll=Kw,Ie.bindKey=Qd,Ie.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return On(d)?d:[d]},Ie.chain=ty,Ie.chunk=function(d,p,_){p=(_?Ws(d,p,_):p===ee)?1:zr(ti(p),0);var V=null==d?0:d.length;if(!V||p<1)return[];for(var he=0,Ne=0,Qe=Tt(jt(V/p));he<V;)Qe[Ne++]=Ms(d,he,he+=p);return Qe},Ie.compact=function(d){for(var p=-1,_=null==d?0:d.length,V=0,he=[];++p<_;){var Ne=d[p];Ne&&(he[V++]=Ne)}return he},Ie.concat=function(){var d=arguments.length;if(!d)return[];for(var p=Tt(d-1),_=arguments[0],V=d;V--;)p[V-1]=arguments[V];return Ur(On(_)?no(_):[_],Ts(p,1))},Ie.cond=function(d){var p=null==d?0:d.length,_=kn();return d=p?qi(d,function(V){if("function"!=typeof V[1])throw new Ia(Ee);return[_(V[0]),V[1]]}):[],pi(function(V){for(var he=-1;++he<p;){var Ne=d[he];if(os(Ne[0],this,V))return os(Ne[1],this,V)}})},Ie.conforms=function(d){return function(d){var p=Is(d);return function(_){return Tp(_,d,p)}}(Hs(d,1))},Ie.constant=Oy,Ie.countBy=qT,Ie.create=function(d,p){var _=Tu(d);return null==p?_:ZC(_,p)},Ie.curry=function yw(d,p,_){var V=Wl(d,8,ee,ee,ee,ee,ee,p=_?ee:p);return V.placeholder=yw.placeholder,V},Ie.curryRight=function cy(d,p,_){var V=Wl(d,16,ee,ee,ee,ee,ee,p=_?ee:p);return V.placeholder=cy.placeholder,V},Ie.debounce=bw,Ie.defaults=SA,Ie.defaultsDeep=hf,Ie.defer=rA,Ie.delay=vw,Ie.difference=ST,Ie.differenceBy=CT,Ie.differenceWith=TT,Ie.drop=function(d,p,_){var V=null==d?0:d.length;return V?Ms(d,(p=_||p===ee?1:ti(p))<0?0:p,V):[]},Ie.dropRight=function(d,p,_){var V=null==d?0:d.length;return V?Ms(d,0,(p=V-(p=_||p===ee?1:ti(p)))<0?0:p):[]},Ie.dropRightWhile=function(d,p){return d&&d.length?Ou(d,kn(p,3),!0,!0):[]},Ie.dropWhile=function(d,p){return d&&d.length?Ou(d,kn(p,3),!0):[]},Ie.fill=function(d,p,_,V){var he=null==d?0:d.length;return he?(_&&"number"!=typeof _&&Ws(d,p,_)&&(_=0,V=he),function(d,p,_,V){var he=d.length;for((_=ti(_))<0&&(_=-_>he?0:he+_),(V=V===ee||V>he?he:ti(V))<0&&(V+=he),V=_>V?0:_y(V);_<V;)d[_++]=p;return d}(d,p,_,V)):[]},Ie.filter=function(d,p){return(On(d)?Ma:Ev)(d,kn(p,3))},Ie.flatMap=function(d,p){return Ts(pl(d,p),1)},Ie.flatMapDeep=function(d,p){return Ts(pl(d,p),te)},Ie.flatMapDepth=function(d,p,_){return _=_===ee?1:ti(_),Ts(pl(d,p),_)},Ie.flatten=Ds,Ie.flattenDeep=function(d){return null!=d&&d.length?Ts(d,te):[]},Ie.flattenDepth=function(d,p){return null!=d&&d.length?Ts(d,p=p===ee?1:ti(p)):[]},Ie.flip=function(d){return Wl(d,512)},Ie.flow=Yk,Ie.flowRight=Vu,Ie.fromPairs=function(d){for(var p=-1,_=null==d?0:d.length,V={};++p<_;){var he=d[p];V[he[0]]=he[1]}return V},Ie.functions=function(d){return null==d?[]:Qh(d,Is(d))},Ie.functionsIn=function(d){return null==d?[]:Qh(d,ro(d))},Ie.groupBy=eA,Ie.initial=function(d){return null!=d&&d.length?Ms(d,0,-1):[]},Ie.intersection=Xv,Ie.intersectionBy=DT,Ie.intersectionWith=Kv,Ie.invert=tg,Ie.invertBy=TA,Ie.invokeMap=cw,Ie.iteratee=ju,Ie.keyBy=uw,Ie.keys=Is,Ie.keysIn=ro,Ie.map=pl,Ie.mapKeys=function(d,p){var _={};return p=kn(p,3),cl(d,function(V,he,Ne){ll(_,p(V,he,Ne),V)}),_},Ie.mapValues=function(d,p){var _={};return p=kn(p,3),cl(d,function(V,he,Ne){ll(_,he,p(V,he,Ne))}),_},Ie.matches=function(d){return rT(Hs(d,1))},Ie.matchesProperty=function(d,p){return jd(d,Hs(p,1))},Ie.memoize=uf,Ie.merge=Vw,Ie.mergeWith=jw,Ie.method=Ry,Ie.methodOf=Qw,Ie.mixin=Ny,Ie.negate=dy,Ie.nthArg=function(d){return d=ti(d),pi(function(p){return Du(p,d)})},Ie.omit=MA,Ie.omitBy=function(d,p){return Uw(d,dy(kn(p)))},Ie.once=function(d){return ly(2,d)},Ie.orderBy=function(d,p,_,V){return null==d?[]:(On(p)||(p=null==p?[]:[p]),On(_=V?ee:_)||(_=null==_?[]:[_]),Zh(d,p,_))},Ie.over=KA,Ie.overArgs=sA,Ie.overEvery=QA,Ie.overSome=Jw,Ie.partial=Kp,Ie.partialRight=Ew,Ie.partition=hw,Ie.pick=DA,Ie.pickBy=Uw,Ie.property=Uu,Ie.propertyOf=function(d){return function(p){return null==d?ee:na(d,p)}},Ie.pull=K_,Ie.pullAll=Q_,Ie.pullAllBy=function(d,p,_){return d&&d.length&&p&&p.length?ra(d,p,kn(_,2)):d},Ie.pullAllWith=function(d,p,_){return d&&d.length&&p&&p.length?ra(d,p,ee,_):d},Ie.pullAt=Zv,Ie.range=ZA,Ie.rangeRight=JA,Ie.rearg=oA,Ie.reject=function(d,p){return(On(d)?Ma:Ev)(d,dy(kn(p,3)))},Ie.remove=function(d,p){var _=[];if(!d||!d.length)return _;var V=-1,he=[],Ne=d.length;for(p=kn(p,3);++V<Ne;){var Qe=d[V];p(Qe,V,d)&&(_.push(Qe),he.push(V))}return Jh(d,he),_},Ie.rest=function(d,p){if("function"!=typeof d)throw new Ia(Ee);return pi(d,p=p===ee?p:ti(p))},Ie.reverse=Z_,Ie.sampleSize=function(d,p,_){return p=(_?Ws(d,p,_):p===ee)?1:ti(p),(On(d)?yv:Ck)(d,p)},Ie.set=function(d,p,_){return null==d?d:Ip(d,p,_)},Ie.setWith=function(d,p,_,V){return V="function"==typeof V?V:ee,null==d?d:Ip(d,p,_,V)},Ie.shuffle=function(d){return(On(d)?Nd:O_)(d)},Ie.slice=function(d,p,_){var V=null==d?0:d.length;return V?(_&&"number"!=typeof _&&Ws(d,p,_)?(p=0,_=V):(p=null==p?0:ti(p),_=_===ee?V:ti(_)),Ms(d,p,_)):[]},Ie.sortBy=Yp,Ie.sortedUniq=function(d){return d&&d.length?Tv(d):[]},Ie.sortedUniqBy=function(d,p){return d&&d.length?Tv(d,kn(p,2)):[]},Ie.split=function(d,p,_){return _&&"number"!=typeof _&&Ws(d,p,_)&&(p=_=ee),(_=_===ee?ve:_>>>0)?(d=Hi(d))&&("string"==typeof p||null!=p&&!Ow(p))&&!(p=Vo(p))&&Fh(d)?ul(rl(d),0,_):d.split(p,_):[]},Ie.spread=function(d,p){if("function"!=typeof d)throw new Ia(Ee);return p=null==p?0:zr(ti(p),0),pi(function(_){var V=_[p],he=ul(_,0,p);return V&&Ur(he,V),os(d,this,he)})},Ie.tail=function(d){var p=null==d?0:d.length;return p?Ms(d,1,p):[]},Ie.take=function(d,p,_){return d&&d.length?Ms(d,0,(p=_||p===ee?1:ti(p))<0?0:p):[]},Ie.takeRight=function(d,p,_){var V=null==d?0:d.length;return V?Ms(d,(p=V-(p=_||p===ee?1:ti(p)))<0?0:p,V):[]},Ie.takeRightWhile=function(d,p){return d&&d.length?Ou(d,kn(p,3),!1,!0):[]},Ie.takeWhile=function(d,p){return d&&d.length?Ou(d,kn(p,3)):[]},Ie.tap=function(d,p){return p(d),d},Ie.throttle=function(d,p,_){var V=!0,he=!0;if("function"!=typeof d)throw new Ia(Ee);return Tr(_)&&(V="leading"in _?!!_.leading:V,he="trailing"in _?!!_.trailing:he),bw(d,p,{leading:V,maxWait:p,trailing:he})},Ie.thru=Xd,Ie.toArray=Rw,Ie.toPairs=IA,Ie.toPairsIn=Hw,Ie.toPath=function(d){return On(d)?qi(d,si):da(d)?[d]:no($v(Hi(d)))},Ie.toPlainObject=Nw,Ie.transform=function(d,p,_){var V=On(d),he=V||ml(d)||df(d);if(p=kn(p,4),null==_){var Ne=d&&d.constructor;_=he?V?new Ne:[]:Tr(d)&&ua(Ne)?Tu(Oa(d)):{}}return(he?Us:cl)(d,function(Qe,nt,dt){return p(_,Qe,nt,dt)}),_},Ie.unary=function(d){return Xp(d,1)},Ie.union=tw,Ie.unionBy=UT,Ie.unionWith=zT,Ie.uniq=function(d){return d&&d.length?kc(d):[]},Ie.uniqBy=function(d,p){return d&&d.length?kc(d,kn(p,2)):[]},Ie.uniqWith=function(d,p){return p="function"==typeof p?p:ee,d&&d.length?kc(d,ee,p):[]},Ie.unset=function(d,p){return null==d||Iu(d,p)},Ie.unzip=nw,Ie.unzipWith=GT,Ie.update=function(d,p,_){return null==d?d:Op(d,p,N_(_))},Ie.updateWith=function(d,p,_,V){return V="function"==typeof V?V:ee,null==d?d:Op(d,p,N_(_),V)},Ie.values=nh,Ie.valuesIn=function(d){return null==d?[]:o_(d,ro(d))},Ie.without=iw,Ie.words=Dy,Ie.wrap=function(d,p){return Kp(N_(p),d)},Ie.xor=kk,Ie.xorBy=Uo,Ie.xorWith=J_,Ie.zip=ey,Ie.zipObject=function(d,p){return Rp(d||[],p||[],al)},Ie.zipObjectDeep=function(d,p){return Rp(d||[],p||[],Ip)},Ie.zipWith=lf,Ie.entries=IA,Ie.entriesIn=Hw,Ie.extend=wA,Ie.extendWith=Zd,Ny(Ie,Ie),Ie.add=Hn,Ie.attempt=Iy,Ie.camelCase=kA,Ie.capitalize=wy,Ie.ceil=Ly,Ie.clamp=function(d,p,_){return _===ee&&(_=p,p=ee),_!==ee&&(_=(_=vo(_))==_?_:0),p!==ee&&(p=(p=vo(p))==p?p:0),Au(vo(d),p,_)},Ie.clone=function(d){return Hs(d,4)},Ie.cloneDeep=function(d){return Hs(d,5)},Ie.cloneDeepWith=function(d,p){return Hs(d,5,p="function"==typeof p?p:ee)},Ie.cloneWith=function(d,p){return Hs(d,4,p="function"==typeof p?p:ee)},Ie.conformsTo=function(d,p){return null==p||Tp(d,p,Is(p))},Ie.deburr=Ey,Ie.defaultTo=function(d,p){return null==d||d!=d?p:d},Ie.divide=Kk,Ie.endsWith=function(d,p,_){d=Hi(d),p=Vo(p);var V=d.length,he=_=_===ee?V:Au(ti(_),0,V);return(_-=p.length)>=0&&d.slice(_,he)==p},Ie.eq=Dn,Ie.escape=function(d){return(d=Hi(d))&&en.test(d)?d.replace(Sa,lk):d},Ie.escapeRegExp=function(d){return(d=Hi(d))&&ht.test(d)?d.replace(We,"\\$&"):d},Ie.every=function(d,p,_){var V=On(d)?ri:vv;return _&&Ws(d,p,_)&&(p=ee),V(d,kn(p,3))},Ie.find=QT,Ie.findIndex=q_,Ie.findKey=function(d,p){return Ph(d,kn(p,3),cl)},Ie.findLast=ZT,Ie.findLastIndex=Y_,Ie.findLastKey=function(d,p){return Ph(d,kn(p,3),Ap)},Ie.floor=Kl,Ie.forEach=oy,Ie.forEachRight=Wp,Ie.forIn=function(d,p){return null==d?d:kd(d,kn(p,3),ro)},Ie.forInRight=function(d,p){return null==d?d:Fd(d,kn(p,3),ro)},Ie.forOwn=function(d,p){return d&&cl(d,kn(p,3))},Ie.forOwnRight=function(d,p){return d&&Ap(d,kn(p,3))},Ie.get=pf,Ie.gt=zt,Ie.gte=Cw,Ie.has=function(d,p){return null!=d&&jv(d,p,Ld)},Ie.hasIn=eg,Ie.head=qv,Ie.identity=so,Ie.includes=function(d,p,_,V){d=bo(d)?d:nh(d),_=_&&!V?ti(_):0;var he=d.length;return _<0&&(_=zr(he+_,0)),gy(d)?_<=he&&d.indexOf(p,_)>-1:!!he&&il(d,p,_)>-1},Ie.indexOf=function(d,p,_){var V=null==d?0:d.length;if(!V)return-1;var he=null==_?0:ti(_);return he<0&&(he=zr(V+he,0)),il(d,p,he)},Ie.inRange=function(d,p,_){return p=_l(p),_===ee?(_=p,p=0):_=_l(_),function(d,p,_){return d>=ps(p,_)&&d<zr(p,_)}(d=vo(d),p,_)},Ie.invoke=Lw,Ie.isArguments=gl,Ie.isArray=On,Ie.isArrayBuffer=Tw,Ie.isArrayLike=bo,Ie.isArrayLikeObject=Cr,Ie.isBoolean=function(d){return!0===d||!1===d||Ar(d)&&As(d)==Me},Ie.isBuffer=ml,Ie.isDate=Aw,Ie.isElement=function(d){return Ar(d)&&1===d.nodeType&&!Jp(d)},Ie.isEmpty=function(d){if(null==d)return!0;if(bo(d)&&(On(d)||"string"==typeof d||"function"==typeof d.splice||ml(d)||df(d)||gl(d)))return!d.length;var p=$s(d);if(p==Ve||p==gt)return!d.size;if(zp(d))return!xv(d).length;for(var _ in d)if(Xi.call(d,_))return!1;return!0},Ie.isEqual=function(d,p){return Mp(d,p)},Ie.isEqualWith=function(d,p,_){var V=(_="function"==typeof _?_:ee)?_(d,p):ee;return V===ee?Mp(d,p,ee,_):!!V},Ie.isError=Ba,Ie.isFinite=function(d){return"number"==typeof d&&p_(d)},Ie.isFunction=ua,Ie.isInteger=Zp,Ie.isLength=fy,Ie.isMap=gA,Ie.isMatch=function(d,p){return d===p||A_(d,p,sa(p))},Ie.isMatchWith=function(d,p,_){return _="function"==typeof _?_:ee,A_(d,p,sa(p),_)},Ie.isNaN=function(d){return yA(d)&&d!=+d},Ie.isNative=function(d){if(Hv(d))throw new Mn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return M_(d)},Ie.isNil=function(d){return null==d},Ie.isNull=function(d){return null===d},Ie.isNumber=yA,Ie.isObject=Tr,Ie.isObjectLike=Ar,Ie.isPlainObject=Jp,Ie.isRegExp=Ow,Ie.isSafeInteger=function(d){return Zp(d)&&d>=-Re&&d<=Re},Ie.isSet=bA,Ie.isString=gy,Ie.isSymbol=da,Ie.isTypedArray=df,Ie.isUndefined=function(d){return d===ee},Ie.isWeakMap=function(d){return Ar(d)&&$s(d)==H},Ie.isWeakSet=function(d){return Ar(d)&&"[object WeakSet]"==As(d)},Ie.join=function(d,p){return null==d?"":Uh.call(d,p)},Ie.kebabCase=LA,Ie.last=aa,Ie.lastIndexOf=function(d,p,_){var V=null==d?0:d.length;if(!V)return-1;var he=V;return _!==ee&&(he=(he=ti(_))<0?zr(V+he,0):ps(he,V-1)),p==p?function(ct,Rt,Tt){for(var hn=Tt+1;hn--;)if(ct[hn]===Rt)return hn;return hn}(d,p,he):Td(d,Dc,he,!0)},Ie.lowerCase=BA,Ie.lowerFirst=Wk,Ie.lt=Uc,Ie.lte=my,Ie.max=function(d){return d&&d.length?Kh(d,so,yo):ee},Ie.maxBy=function(d,p){return d&&d.length?Kh(d,kn(p,2),yo):ee},Ie.mean=function(d){return Ss(d,so)},Ie.meanBy=function(d,p){return Ss(d,kn(p,2))},Ie.min=function(d){return d&&d.length?Kh(d,so,Sv):ee},Ie.minBy=function(d,p){return d&&d.length?Kh(d,kn(p,2),Sv):ee},Ie.stubArray=Hc,Ie.stubFalse=Fy,Ie.stubObject=function(){return{}},Ie.stubString=function(){return""},Ie.stubTrue=function(){return!0},Ie.multiply=iE,Ie.nth=function(d,p){return d&&d.length?Du(d,ti(p)):ee},Ie.noConflict=function(){return Ui._===this&&(Ui._=h_),this},Ie.noop=Py,Ie.now=Bu,Ie.pad=function(d,p,_){d=Hi(d);var V=(p=ti(p))?Lh(d):0;if(!p||V>=p)return d;var he=(p-V)/2;return Fp(Si(he),_)+d+Fp(jt(he),_)},Ie.padEnd=function(d,p,_){d=Hi(d);var V=(p=ti(p))?Lh(d):0;return p&&V<p?d+Fp(p-V,_):d},Ie.padStart=function(d,p,_){d=Hi(d);var V=(p=ti(p))?Lh(d):0;return p&&V<p?Fp(p-V,_)+d:d},Ie.parseInt=function(d,p,_){return _||null==p?p=0:p&&(p=+p),UC(Hi(d).replace(rt,""),p||0)},Ie.random=function(d,p,_){if(_&&"boolean"!=typeof _&&Ws(d,p,_)&&(p=_=ee),_===ee&&("boolean"==typeof p?(_=p,p=ee):"boolean"==typeof d&&(_=d,d=ee)),d===ee&&p===ee?(d=0,p=1):(d=_l(d),p===ee?(p=d,d=0):p=_l(p)),d>p){var V=d;d=p,p=V}if(_||d%1||p%1){var he=zh();return ps(d+he*(p-d+DC("1e-"+((he+"").length-1))),p)}return Hl(d,p)},Ie.reduce=function(d,p,_){var V=On(d)?Eu:ea,he=arguments.length<3;return V(d,kn(p,4),_,he,Nc)},Ie.reduceRight=function(d,p,_){var V=On(d)?Cd:ea,he=arguments.length<3;return V(d,kn(p,4),_,he,C_)},Ie.repeat=function(d,p,_){return p=(_?Ws(d,p,_):p===ee)?1:ti(p),Dp(Hi(d),p)},Ie.replace=function(){var d=arguments,p=Hi(d[0]);return d.length<3?p:p.replace(d[1],d[2])},Ie.result=function(d,p,_){var V=-1,he=(p=Lc(p,d)).length;for(he||(he=1,d=ee);++V<he;){var Ne=null==d?ee:d[si(p[V])];Ne===ee&&(V=he,Ne=_),d=ua(Ne)?Ne.call(d):Ne}return d},Ie.round=rE,Ie.runInContext=ct,Ie.sample=function(d){return(On(d)?w_:sT)(d)},Ie.size=function(d){if(null==d)return 0;if(bo(d))return gy(d)?Lh(d):d.length;var p=$s(d);return p==Ve||p==gt?d.size:xv(d).length},Ie.snakeCase=HA,Ie.some=function(d,p,_){var V=On(d)?ko:Tk;return _&&Ws(d,p,_)&&(p=ee),V(d,kn(p,3))},Ie.sortedIndex=function(d,p){return ef(d,p)},Ie.sortedIndexBy=function(d,p,_){return R_(d,p,kn(_,2))},Ie.sortedIndexOf=function(d,p){var _=null==d?0:d.length;if(_){var V=ef(d,p);if(V<_&&Dn(d[V],p))return V}return-1},Ie.sortedLastIndex=function(d,p){return ef(d,p,!0)},Ie.sortedLastIndexBy=function(d,p,_){return R_(d,p,kn(_,2),!0)},Ie.sortedLastIndexOf=function(d,p){if(null!=d&&d.length){var V=ef(d,p,!0)-1;if(Dn(d[V],p))return V}return-1},Ie.startCase=Cy,Ie.startsWith=function(d,p,_){return d=Hi(d),_=null==_?0:Au(ti(_),0,d.length),p=Vo(p),d.slice(_,_+p.length)==p},Ie.subtract=sE,Ie.sum=function(d){return d&&d.length?Ad(d,so):0},Ie.sumBy=function(d,p){return d&&d.length?Ad(d,kn(p,2)):0},Ie.template=function(d,p,_){var V=Ie.templateSettings;_&&Ws(d,p,_)&&(p=ee),d=Hi(d),p=Zd({},p,V,kv);var nt,dt,he=Zd({},p.imports,V.imports,kv),Ne=Is(he),Qe=o_(he,Ne),Ft=0,Lt=p.interpolate||Qr,Gt="__p += '",nn=u_((p.escape||Qr).source+"|"+Lt.source+"|"+(Lt===ut?bn:Qr).source+"|"+(p.evaluate||Qr).source+"|$","g"),wn="//# sourceURL="+(Xi.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++MC+"]")+"\n";d.replace(nn,function(Bn,mi,Di,wo,qs,ha){return Di||(Di=wo),Gt+=d.slice(Ft,ha).replace(ae,ck),mi&&(nt=!0,Gt+="' +\n__e("+mi+") +\n'"),qs&&(dt=!0,Gt+="';\n"+qs+";\n__p += '"),Di&&(Gt+="' +\n((__t = ("+Di+")) == null ? '' : __t) +\n'"),Ft=ha+Bn.length,Bn}),Gt+="';\n";var Fn=Xi.call(p,"variable")&&p.variable;if(Fn){if(ci.test(Fn))throw new Mn("Invalid `variable` option passed into `_.template`")}else Gt="with (obj) {\n"+Gt+"\n}\n";Gt=(dt?Gt.replace(Bs,""):Gt).replace(Kr,"$1").replace(xa,"$1;"),Gt="function("+(Fn||"obj")+") {\n"+(Fn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(nt?", __e = _.escape":"")+(dt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Gt+"return __p\n}";var gi=Iy(function(){return Li(Ne,wn+"return "+Gt).apply(ee,Qe)});if(gi.source=Gt,Ba(gi))throw gi;return gi},Ie.times=function(d,p){if((d=ti(d))<1||d>Re)return[];var _=ve,V=ps(d,ve);p=kn(p),d-=ve;for(var he=Md(V,p);++_<d;)p(_);return he},Ie.toFinite=_l,Ie.toInteger=ti,Ie.toLength=_y,Ie.toLower=function(d){return Hi(d).toLowerCase()},Ie.toNumber=vo,Ie.toSafeInteger=function(d){return d?Au(ti(d),-Re,Re):0===d?d:0},Ie.toString=Hi,Ie.toUpper=function(d){return Hi(d).toUpperCase()},Ie.trim=function(d,p,_){if((d=Hi(d))&&(_||p===ee))return lv(d);if(!d||!(p=Vo(p)))return d;var V=rl(d),he=rl(p);return ul(V,RC(V,he),NC(V,he)+1).join("")},Ie.trimEnd=function(d,p,_){if((d=Hi(d))&&(_||p===ee))return d.slice(0,Ic(d)+1);if(!d||!(p=Vo(p)))return d;var V=rl(d);return ul(V,0,NC(V,rl(p))+1).join("")},Ie.trimStart=function(d,p,_){if((d=Hi(d))&&(_||p===ee))return d.replace(rt,"");if(!d||!(p=Vo(p)))return d;var V=rl(d);return ul(V,RC(V,rl(p))).join("")},Ie.truncate=function(d,p){var _=30,V="...";if(Tr(p)){var he="separator"in p?p.separator:he;_="length"in p?ti(p.length):_,V="omission"in p?Vo(p.omission):V}var Ne=(d=Hi(d)).length;if(Fh(d)){var Qe=rl(d);Ne=Qe.length}if(_>=Ne)return d;var nt=_-Lh(V);if(nt<1)return V;var dt=Qe?ul(Qe,0,nt).join(""):d.slice(0,nt);if(he===ee)return dt+V;if(Qe&&(nt+=dt.length-nt),Ow(he)){if(d.slice(nt).search(he)){var Ft,Lt=dt;for(he.global||(he=u_(he.source,Hi(Xn.exec(he))+"g")),he.lastIndex=0;Ft=he.exec(Lt);)var Gt=Ft.index;dt=dt.slice(0,Gt===ee?nt:Gt)}}else if(d.indexOf(Vo(he),nt)!=nt){var nn=dt.lastIndexOf(he);nn>-1&&(dt=dt.slice(0,nn))}return dt+V},Ie.unescape=function(d){return(d=Hi(d))&&ws.test(d)?d.replace(kl,c_):d},Ie.uniqueId=function(d){var p=++gk;return Hi(d)+p},Ie.upperCase=Xw,Ie.upperFirst=ig,Ie.each=oy,Ie.eachRight=Wp,Ie.first=qv,Ny(Ie,function(){var d={};return cl(Ie,function(p,_){Xi.call(Ie.prototype,_)||(d[_]=p)}),d}(),{chain:!1}),Ie.VERSION="4.17.21",Us(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Ie[d].placeholder=Ie}),Us(["drop","take"],function(d,p){fi.prototype[d]=function(_){_=_===ee?1:zr(ti(_),0);var V=this.__filtered__&&!p?new fi(this):this.clone();return V.__filtered__?V.__takeCount__=ps(_,V.__takeCount__):V.__views__.push({size:ps(_,ve),type:d+(V.__dir__<0?"Right":"")}),V},fi.prototype[d+"Right"]=function(_){return this.reverse()[d](_).reverse()}}),Us(["filter","map","takeWhile"],function(d,p){var _=p+1,V=1==_||3==_;fi.prototype[d]=function(he){var Ne=this.clone();return Ne.__iteratees__.push({iteratee:kn(he,3),type:_}),Ne.__filtered__=Ne.__filtered__||V,Ne}}),Us(["head","last"],function(d,p){var _="take"+(p?"Right":"");fi.prototype[d]=function(){return this[_](1).value()[0]}}),Us(["initial","tail"],function(d,p){var _="drop"+(p?"":"Right");fi.prototype[d]=function(){return this.__filtered__?new fi(this):this[_](1)}}),fi.prototype.compact=function(){return this.filter(so)},fi.prototype.find=function(d){return this.filter(d).head()},fi.prototype.findLast=function(d){return this.reverse().find(d)},fi.prototype.invokeMap=pi(function(d,p){return"function"==typeof d?new fi(this):this.map(function(_){return ka(_,d,p)})}),fi.prototype.reject=function(d){return this.filter(dy(kn(d)))},fi.prototype.slice=function(d,p){d=ti(d);var _=this;return _.__filtered__&&(d>0||p<0)?new fi(_):(d<0?_=_.takeRight(-d):d&&(_=_.drop(d)),p!==ee&&(_=(p=ti(p))<0?_.dropRight(-p):_.take(p-d)),_)},fi.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},fi.prototype.toArray=function(){return this.take(ve)},cl(fi.prototype,function(d,p){var _=/^(?:filter|find|map|reject)|While$/.test(p),V=/^(?:head|last)$/.test(p),he=Ie[V?"take"+("last"==p?"Right":""):p],Ne=V||/^find/.test(p);!he||(Ie.prototype[p]=function(){var Qe=this.__wrapped__,nt=V?[1]:arguments,dt=Qe instanceof fi,Ft=nt[0],Lt=dt||On(Qe),Gt=function(mi){var Di=he.apply(Ie,Ur([mi],nt));return V&&nn?Di[0]:Di};Lt&&_&&"function"==typeof Ft&&1!=Ft.length&&(dt=Lt=!1);var nn=this.__chain__,wn=!!this.__actions__.length,Fn=Ne&&!nn,gi=dt&&!wn;if(!Ne&&Lt){Qe=gi?Qe:new fi(this);var Bn=d.apply(Qe,nt);return Bn.__actions__.push({func:Xd,args:[Gt],thisArg:ee}),new Lo(Bn,nn)}return Fn&&gi?d.apply(this,nt):(Bn=this.thru(Gt),Fn?V?Bn.value()[0]:Bn.value():Bn)})}),Us(["pop","push","shift","sort","splice","unshift"],function(d){var p=dr[d],_=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",V=/^(?:pop|shift)$/.test(d);Ie.prototype[d]=function(){var he=arguments;if(V&&!this.__chain__){var Ne=this.value();return p.apply(On(Ne)?Ne:[],he)}return this[_](function(Qe){return p.apply(On(Qe)?Qe:[],he)})}}),cl(fi.prototype,function(d,p){var _=Ie[p];if(_){var V=_.name+"";Xi.call(Od,V)||(Od[V]=[]),Od[V].push({name:p,func:_})}}),Od[Vc(ee,2).name]=[{name:"wrapper",func:ee}],fi.prototype.clone=function(){var d=new fi(this.__wrapped__);return d.__actions__=no(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=no(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=no(this.__views__),d},fi.prototype.reverse=function(){if(this.__filtered__){var d=new fi(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},fi.prototype.value=function(){var d=this.__wrapped__.value(),p=this.__dir__,_=On(d),V=p<0,he=_?d.length:0,Ne=function(d,p,_){for(var V=-1,he=_.length;++V<he;){var Ne=_[V],Qe=Ne.size;switch(Ne.type){case"drop":d+=Qe;break;case"dropRight":p-=Qe;break;case"take":p=ps(p,d+Qe);break;case"takeRight":d=zr(d,p-Qe)}}return{start:d,end:p}}(0,he,this.__views__),Qe=Ne.start,nt=Ne.end,dt=nt-Qe,Ft=V?nt:Qe-1,Lt=this.__iteratees__,Gt=Lt.length,nn=0,wn=ps(dt,this.__takeCount__);if(!_||!V&&he==dt&&wn==dt)return oT(d,this.__actions__);var Fn=[];e:for(;dt--&&nn<wn;){for(var gi=-1,Bn=d[Ft+=p];++gi<Gt;){var mi=Lt[gi],wo=mi.type,qs=(0,mi.iteratee)(Bn);if(2==wo)Bn=qs;else if(!qs){if(1==wo)continue e;break e}}Fn[nn++]=Bn}return Fn},Ie.prototype.at=ny,Ie.prototype.chain=function(){return ty(this)},Ie.prototype.commit=function(){return new Lo(this.value(),this.__chain__)},Ie.prototype.next=function(){this.__values__===ee&&(this.__values__=Rw(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?ee:this.__values__[this.__index__++]}},Ie.prototype.plant=function(d){for(var p,_=this;_ instanceof Wh;){var V=sf(_);V.__index__=0,V.__values__=ee,p?he.__wrapped__=V:p=V;var he=V;_=_.__wrapped__}return he.__wrapped__=d,p},Ie.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof fi){var p=d;return this.__actions__.length&&(p=new fi(this)),(p=p.reverse()).__actions__.push({func:Xd,args:[Z_],thisArg:ee}),new Lo(p,this.__chain__)}return this.thru(Z_)},Ie.prototype.toJSON=Ie.prototype.valueOf=Ie.prototype.value=function(){return oT(this.__wrapped__,this.__actions__)},Ie.prototype.first=Ie.prototype.head,jh&&(Ie.prototype[jh]=function(){return this}),Ie}();Ui._=Bh,(lt=function(){return Bh}.call(Xe,et,Xe,Vt))!==ee&&(Vt.exports=lt)}.call(this)},5478:function(Vt){Vt.exports=function(){"use strict";function Xe(ot,ut){for(var ft=0;ft<ut.length;ft++){var ye=ut[ft];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ot,ye.key,ye)}}function ee(ot,ut){(null==ut||ut>ot.length)&&(ut=ot.length);for(var ft=0,ye=new Array(ut);ft<ut;ft++)ye[ft]=ot[ft];return ye}function Ct(ot,ut){var ft="undefined"!=typeof Symbol&&ot[Symbol.iterator]||ot["@@iterator"];if(ft)return(ft=ft.call(ot)).next.bind(ft);if(Array.isArray(ot)||(ft=function(ot,ut){if(ot){if("string"==typeof ot)return ee(ot,ut);var ft=Object.prototype.toString.call(ot).slice(8,-1);if("Object"===ft&&ot.constructor&&(ft=ot.constructor.name),"Map"===ft||"Set"===ft)return Array.from(ot);if("Arguments"===ft||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return ee(ot,ut)}}(ot))||ut&&ot&&"number"==typeof ot.length){ft&&(ot=ft);var ye=0;return function(){return ye>=ot.length?{done:!0}:{done:!1,value:ot[ye++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je={exports:{}};function Q(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}je.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:Q,changeDefaults:function(ot){je.exports.defaults=ot}};var pe=/[&<>"']/,X=/[&<>"']/g,U=/[<>"']|&(?!#?\w+;)/,F=/[<>"']|&(?!#?\w+;)/g,Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},B=function(ut){return Y[ut]};var C=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function R(ot){return ot.replace(C,function(ut,ft){return"colon"===(ft=ft.toLowerCase())?":":"#"===ft.charAt(0)?"x"===ft.charAt(1)?String.fromCharCode(parseInt(ft.substring(2),16)):String.fromCharCode(+ft.substring(1)):""})}var M=/(^|[^\[])\^/g;var v=/[^\w:]/g,b=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var T={},E=/^[^:]+:\/*[^/]*$/,O=/^([^:]+:)[\s\S]*$/,$=/^([^:]+:\/*[^/]*)[\s\S]*$/;function D(ot,ut){T[" "+ot]||(T[" "+ot]=E.test(ot)?ot+"/":W(ot,"/",!0));var ft=-1===(ot=T[" "+ot]).indexOf(":");return"//"===ut.substring(0,2)?ft?ut:ot.replace(O,"$1")+ut:"/"===ut.charAt(0)?ft?ut:ot.replace($,"$1")+ut:ot+ut}function W(ot,ut,ft){var ye=ot.length;if(0===ye)return"";for(var Te=0;Te<ye;){var We=ot.charAt(ye-Te-1);if(We!==ut||ft){if(We===ut||!ft)break;Te++}else Te++}return ot.substr(0,ye-Te)}var te_escape=function(ot,ut){if(ut){if(pe.test(ot))return ot.replace(X,B)}else if(U.test(ot))return ot.replace(F,B);return ot},te_unescape=R,te_edit=function(ot,ut){ot=ot.source||ot,ut=ut||"";var ft={replace:function(Te,We){return We=(We=We.source||We).replace(M,"$1"),ot=ot.replace(Te,We),ft},getRegex:function(){return new RegExp(ot,ut)}};return ft},te_cleanUrl=function(ot,ut,ft){if(ot){var ye;try{ye=decodeURIComponent(R(ft)).replace(v,"").toLowerCase()}catch(Te){return null}if(0===ye.indexOf("javascript:")||0===ye.indexOf("vbscript:")||0===ye.indexOf("data:"))return null}ut&&!b.test(ft)&&(ft=D(ut,ft));try{ft=encodeURI(ft).replace(/%25/g,"%")}catch(Te){return null}return ft},te_noopTest={exec:function(){}},te_merge=function(ot){for(var ft,ye,ut=1;ut<arguments.length;ut++)for(ye in ft=arguments[ut])Object.prototype.hasOwnProperty.call(ft,ye)&&(ot[ye]=ft[ye]);return ot},te_checkSanitizeDeprecation=function(ot){ot&&ot.sanitize&&!ot.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},te_repeatString=function(ot,ut){if(ut<1)return"";for(var ft="";ut>1;)1&ut&&(ft+=ot),ut>>=1,ot+=ot;return ft+ot},Re=je.exports.defaults,be=W,re=function(ot,ut){var ye=ot.replace(/\|/g,function(We,ht,rt){for(var Dt=!1,It=ht;--It>=0&&"\\"===rt[It];)Dt=!Dt;return Dt?"|":" |"}).split(/ \|/),Te=0;if(ye.length>ut)ye.splice(ut);else for(;ye.length<ut;)ye.push("");for(;Te<ye.length;Te++)ye[Te]=ye[Te].trim().replace(/\\\|/g,"|");return ye},ve=te_escape,Fe=function(ot,ut){if(-1===ot.indexOf(ut[1]))return-1;for(var ft=ot.length,ye=0,Te=0;Te<ft;Te++)if("\\"===ot[Te])Te++;else if(ot[Te]===ut[0])ye++;else if(ot[Te]===ut[1]&&--ye<0)return Te;return-1};function Ze(ot,ut,ft){var ye=ut.href,Te=ut.title?ve(ut.title):null,We=ot[1].replace(/\\([\[\]])/g,"$1");return"!"!==ot[0].charAt(0)?{type:"link",raw:ft,href:ye,title:Te,text:We}:{type:"image",raw:ft,href:ye,title:Te,text:ve(We)}}var J=function(){function ot(ft){this.options=ft||Re}var ut=ot.prototype;return ut.space=function(ye){var Te=this.rules.block.newline.exec(ye);if(Te)return Te[0].length>1?{type:"space",raw:Te[0]}:{raw:"\n"}},ut.code=function(ye){var Te=this.rules.block.code.exec(ye);if(Te){var We=Te[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:Te[0],codeBlockStyle:"indented",text:this.options.pedantic?We:be(We,"\n")}}},ut.fences=function(ye){var Te=this.rules.block.fences.exec(ye);if(Te){var We=Te[0],ht=function(ot,ut){var ft=ot.match(/^(\s+)(?:```)/);if(null===ft)return ut;var ye=ft[1];return ut.split("\n").map(function(Te){var We=Te.match(/^\s+/);return null===We?Te:We[0].length>=ye.length?Te.slice(ye.length):Te}).join("\n")}(We,Te[3]||"");return{type:"code",raw:We,lang:Te[2]?Te[2].trim():Te[2],text:ht}}},ut.heading=function(ye){var Te=this.rules.block.heading.exec(ye);if(Te){var We=Te[2].trim();if(/#$/.test(We)){var ht=be(We,"#");(this.options.pedantic||!ht||/ $/.test(ht))&&(We=ht.trim())}return{type:"heading",raw:Te[0],depth:Te[1].length,text:We}}},ut.nptable=function(ye){var Te=this.rules.block.nptable.exec(ye);if(Te){var We={type:"table",header:re(Te[1].replace(/^ *| *\| *$/g,"")),align:Te[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:Te[3]?Te[3].replace(/\n$/,"").split("\n"):[],raw:Te[0]};if(We.header.length===We.align.length){var rt,ht=We.align.length;for(rt=0;rt<ht;rt++)We.align[rt]=/^ *-+: *$/.test(We.align[rt])?"right":/^ *:-+: *$/.test(We.align[rt])?"center":/^ *:-+ *$/.test(We.align[rt])?"left":null;for(ht=We.cells.length,rt=0;rt<ht;rt++)We.cells[rt]=re(We.cells[rt],We.header.length);return We}}},ut.hr=function(ye){var Te=this.rules.block.hr.exec(ye);if(Te)return{type:"hr",raw:Te[0]}},ut.blockquote=function(ye){var Te=this.rules.block.blockquote.exec(ye);if(Te){var We=Te[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:Te[0],text:We}}},ut.list=function(ye){var Te=this.rules.block.list.exec(ye);if(Te){var Qt,zn,ci,Rn,bn,Xn,Cn,rr,sr,We=Te[0],ht=Te[2],rt=ht.length>1,Dt={type:"list",raw:We,ordered:rt,start:rt?+ht.slice(0,-1):"",loose:!1,items:[]},It=Te[0].match(this.rules.block.item),Ot=!1,Qn=It.length;ci=this.rules.block.listItemStart.exec(It[0]);for(var Wi=0;Wi<Qn;Wi++){if(We=Qt=It[Wi],this.options.pedantic||(sr=Qt.match(new RegExp("\\n\\s*\\n {0,"+(ci[0].length-1)+"}\\S")))&&(bn=Qt.length-sr.index+It.slice(Wi+1).join("\n").length,Dt.raw=Dt.raw.substring(0,Dt.raw.length-bn),We=Qt=Qt.substring(0,sr.index),Qn=Wi+1),Wi!==Qn-1){if(Rn=this.rules.block.listItemStart.exec(It[Wi+1]),this.options.pedantic?Rn[1].length>ci[1].length:Rn[1].length>=ci[0].length||Rn[1].length>3){It.splice(Wi,2,It[Wi]+(!this.options.pedantic&&Rn[1].length<ci[0].length&&!It[Wi].match(/\n$/)?"":"\n")+It[Wi+1]),Wi--,Qn--;continue}(!this.options.pedantic||this.options.smartLists?Rn[2][Rn[2].length-1]!==ht[ht.length-1]:rt===(1===Rn[2].length))&&(bn=It.slice(Wi+1).join("\n").length,Dt.raw=Dt.raw.substring(0,Dt.raw.length-bn),Wi=Qn-1),ci=Rn}zn=Qt.length,~(Qt=Qt.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(zn-=Qt.length,Qt=Qt.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+zn+"}","gm"),"")),Qt=be(Qt,"\n"),Wi!==Qn-1&&(We+="\n"),Xn=Ot||/\n\n(?!\s*$)/.test(We),Wi!==Qn-1&&(Ot="\n\n"===We.slice(-2),Xn||(Xn=Ot)),Xn&&(Dt.loose=!0),this.options.gfm&&(rr=void 0,(Cn=/^\[[ xX]\] /.test(Qt))&&(rr=" "!==Qt[1],Qt=Qt.replace(/^\[[ xX]\] +/,""))),Dt.items.push({type:"list_item",raw:We,task:Cn,checked:rr,loose:Xn,text:Qt})}return Dt}},ut.html=function(ye){var Te=this.rules.block.html.exec(ye);if(Te)return{type:this.options.sanitize?"paragraph":"html",raw:Te[0],pre:!this.options.sanitizer&&("pre"===Te[1]||"script"===Te[1]||"style"===Te[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Te[0]):ve(Te[0]):Te[0]}},ut.def=function(ye){var Te=this.rules.block.def.exec(ye);if(Te)return Te[3]&&(Te[3]=Te[3].substring(1,Te[3].length-1)),{type:"def",tag:Te[1].toLowerCase().replace(/\s+/g," "),raw:Te[0],href:Te[2],title:Te[3]}},ut.table=function(ye){var Te=this.rules.block.table.exec(ye);if(Te){var We={type:"table",header:re(Te[1].replace(/^ *| *\| *$/g,"")),align:Te[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:Te[3]?Te[3].replace(/\n$/,"").split("\n"):[]};if(We.header.length===We.align.length){We.raw=Te[0];var rt,ht=We.align.length;for(rt=0;rt<ht;rt++)We.align[rt]=/^ *-+: *$/.test(We.align[rt])?"right":/^ *:-+: *$/.test(We.align[rt])?"center":/^ *:-+ *$/.test(We.align[rt])?"left":null;for(ht=We.cells.length,rt=0;rt<ht;rt++)We.cells[rt]=re(We.cells[rt].replace(/^ *\| *| *\| *$/g,""),We.header.length);return We}}},ut.lheading=function(ye){var Te=this.rules.block.lheading.exec(ye);if(Te)return{type:"heading",raw:Te[0],depth:"="===Te[2].charAt(0)?1:2,text:Te[1]}},ut.paragraph=function(ye){var Te=this.rules.block.paragraph.exec(ye);if(Te)return{type:"paragraph",raw:Te[0],text:"\n"===Te[1].charAt(Te[1].length-1)?Te[1].slice(0,-1):Te[1]}},ut.text=function(ye){var Te=this.rules.block.text.exec(ye);if(Te)return{type:"text",raw:Te[0],text:Te[0]}},ut.escape=function(ye){var Te=this.rules.inline.escape.exec(ye);if(Te)return{type:"escape",raw:Te[0],text:ve(Te[1])}},ut.tag=function(ye,Te,We){var ht=this.rules.inline.tag.exec(ye);if(ht)return!Te&&/^<a /i.test(ht[0])?Te=!0:Te&&/^<\/a>/i.test(ht[0])&&(Te=!1),!We&&/^<(pre|code|kbd|script)(\s|>)/i.test(ht[0])?We=!0:We&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ht[0])&&(We=!1),{type:this.options.sanitize?"text":"html",raw:ht[0],inLink:Te,inRawBlock:We,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ht[0]):ve(ht[0]):ht[0]}},ut.link=function(ye){var Te=this.rules.inline.link.exec(ye);if(Te){var We=Te[2].trim();if(!this.options.pedantic&&/^</.test(We)){if(!/>$/.test(We))return;var ht=be(We.slice(0,-1),"\\");if((We.length-ht.length)%2==0)return}else{var rt=Fe(Te[2],"()");if(rt>-1){var It=(0===Te[0].indexOf("!")?5:4)+Te[1].length+rt;Te[2]=Te[2].substring(0,rt),Te[0]=Te[0].substring(0,It).trim(),Te[3]=""}}var Ot=Te[2],Qt="";if(this.options.pedantic){var zn=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Ot);zn&&(Ot=zn[1],Qt=zn[3])}else Qt=Te[3]?Te[3].slice(1,-1):"";return Ot=Ot.trim(),/^</.test(Ot)&&(Ot=this.options.pedantic&&!/>$/.test(We)?Ot.slice(1):Ot.slice(1,-1)),Ze(Te,{href:Ot&&Ot.replace(this.rules.inline._escapes,"$1"),title:Qt&&Qt.replace(this.rules.inline._escapes,"$1")},Te[0])}},ut.reflink=function(ye,Te){var We;if((We=this.rules.inline.reflink.exec(ye))||(We=this.rules.inline.nolink.exec(ye))){var ht=(We[2]||We[1]).replace(/\s+/g," ");if(!(ht=Te[ht.toLowerCase()])||!ht.href){var rt=We[0].charAt(0);return{type:"text",raw:rt,text:rt}}return Ze(We,ht,We[0])}},ut.emStrong=function(ye,Te,We){void 0===We&&(We="");var ht=this.rules.inline.emStrong.lDelim.exec(ye);if(ht&&(!ht[3]||!We.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var rt=ht[1]||ht[2]||"";if(!rt||rt&&(""===We||this.rules.inline.punctuation.exec(We))){var It,Ot,Dt=ht[0].length-1,Qt=Dt,zn=0,ci="*"===ht[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(ci.lastIndex=0,Te=Te.slice(-1*ye.length+Dt);null!=(ht=ci.exec(Te));)if(It=ht[1]||ht[2]||ht[3]||ht[4]||ht[5]||ht[6]){if(Ot=It.length,ht[3]||ht[4]){Qt+=Ot;continue}if((ht[5]||ht[6])&&Dt%3&&!((Dt+Ot)%3)){zn+=Ot;continue}if(!((Qt-=Ot)>0))return Ot=Math.min(Ot,Ot+Qt+zn),Math.min(Dt,Ot)%2?{type:"em",raw:ye.slice(0,Dt+ht.index+Ot+1),text:ye.slice(1,Dt+ht.index+Ot)}:{type:"strong",raw:ye.slice(0,Dt+ht.index+Ot+1),text:ye.slice(2,Dt+ht.index+Ot-1)}}}}},ut.codespan=function(ye){var Te=this.rules.inline.code.exec(ye);if(Te){var We=Te[2].replace(/\n/g," "),ht=/[^ ]/.test(We),rt=/^ /.test(We)&&/ $/.test(We);return ht&&rt&&(We=We.substring(1,We.length-1)),We=ve(We,!0),{type:"codespan",raw:Te[0],text:We}}},ut.br=function(ye){var Te=this.rules.inline.br.exec(ye);if(Te)return{type:"br",raw:Te[0]}},ut.del=function(ye){var Te=this.rules.inline.del.exec(ye);if(Te)return{type:"del",raw:Te[0],text:Te[2]}},ut.autolink=function(ye,Te){var ht,rt,We=this.rules.inline.autolink.exec(ye);if(We)return rt="@"===We[2]?"mailto:"+(ht=ve(this.options.mangle?Te(We[1]):We[1])):ht=ve(We[1]),{type:"link",raw:We[0],text:ht,href:rt,tokens:[{type:"text",raw:ht,text:ht}]}},ut.url=function(ye,Te){var We;if(We=this.rules.inline.url.exec(ye)){var ht,rt;if("@"===We[2])rt="mailto:"+(ht=ve(this.options.mangle?Te(We[0]):We[0]));else{var Dt;do{Dt=We[0],We[0]=this.rules.inline._backpedal.exec(We[0])[0]}while(Dt!==We[0]);ht=ve(We[0]),rt="www."===We[1]?"http://"+ht:ht}return{type:"link",raw:We[0],text:ht,href:rt,tokens:[{type:"text",raw:ht,text:ht}]}}},ut.inlineText=function(ye,Te,We){var rt,ht=this.rules.inline.text.exec(ye);if(ht)return rt=Te?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ht[0]):ve(ht[0]):ht[0]:ve(this.options.smartypants?We(ht[0]):ht[0]),{type:"text",raw:ht[0],text:rt}},ot}(),le=te_noopTest,_e=te_edit,Me=te_merge,Ce={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:le,table:le,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Ce.def=_e(Ce.def).replace("label",Ce._label).replace("title",Ce._title).getRegex(),Ce.bullet=/(?:[*+-]|\d{1,9}[.)])/,Ce.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,Ce.item=_e(Ce.item,"gm").replace(/bull/g,Ce.bullet).getRegex(),Ce.listItemStart=_e(/^( *)(bull) */).replace("bull",Ce.bullet).getRegex(),Ce.list=_e(Ce.list).replace(/bull/g,Ce.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ce.def.source+")").getRegex(),Ce._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ce._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Ce.html=_e(Ce.html,"i").replace("comment",Ce._comment).replace("tag",Ce._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ce.paragraph=_e(Ce._paragraph).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.blockquote=_e(Ce.blockquote).replace("paragraph",Ce.paragraph).getRegex(),Ce.normal=Me({},Ce),Ce.gfm=Me({},Ce.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Ce.gfm.nptable=_e(Ce.gfm.nptable).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.gfm.table=_e(Ce.gfm.table).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.pedantic=Me({},Ce.normal,{html:_e("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Ce._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:le,paragraph:_e(Ce.normal._paragraph).replace("hr",Ce.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Ce.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var $e={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:le,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:le,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};$e.punctuation=_e($e.punctuation).replace(/punctuation/g,$e._punctuation).getRegex(),$e.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,$e.escapedEmSt=/\\\*|\\_/g,$e._comment=_e(Ce._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),$e.emStrong.lDelim=_e($e.emStrong.lDelim).replace(/punct/g,$e._punctuation).getRegex(),$e.emStrong.rDelimAst=_e($e.emStrong.rDelimAst,"g").replace(/punct/g,$e._punctuation).getRegex(),$e.emStrong.rDelimUnd=_e($e.emStrong.rDelimUnd,"g").replace(/punct/g,$e._punctuation).getRegex(),$e._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,$e._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,$e._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,$e.autolink=_e($e.autolink).replace("scheme",$e._scheme).replace("email",$e._email).getRegex(),$e._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,$e.tag=_e($e.tag).replace("comment",$e._comment).replace("attribute",$e._attribute).getRegex(),$e._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$e._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,$e._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,$e.link=_e($e.link).replace("label",$e._label).replace("href",$e._href).replace("title",$e._title).getRegex(),$e.reflink=_e($e.reflink).replace("label",$e._label).getRegex(),$e.reflinkSearch=_e($e.reflinkSearch,"g").replace("reflink",$e.reflink).replace("nolink",$e.nolink).getRegex(),$e.normal=Me({},$e),$e.pedantic=Me({},$e.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:_e(/^!?\[(label)\]\((.*?)\)/).replace("label",$e._label).getRegex(),reflink:_e(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$e._label).getRegex()}),$e.gfm=Me({},$e.normal,{escape:_e($e.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),$e.gfm.url=_e($e.gfm.url,"i").replace("email",$e.gfm._extended_email).getRegex(),$e.breaks=Me({},$e.gfm,{br:_e($e.br).replace("{2,}","*").getRegex(),text:_e($e.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Se={block:Ce,inline:$e},ze=J,Ke=je.exports.defaults,Ve=Se.block,K=Se.inline,q=te_repeatString;function ge(ot){return ot.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function ce(ot){var ft,ye,ut="",Te=ot.length;for(ft=0;ft<Te;ft++)ye=ot.charCodeAt(ft),Math.random()>.5&&(ye="x"+ye.toString(16)),ut+="&#"+ye+";";return ut}var Ye=function(){function ot(ft){this.tokens=[],this.tokens.links=Object.create(null),this.options=ft||Ke,this.options.tokenizer=this.options.tokenizer||new ze,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var ye={block:Ve.normal,inline:K.normal};this.options.pedantic?(ye.block=Ve.pedantic,ye.inline=K.pedantic):this.options.gfm&&(ye.block=Ve.gfm,ye.inline=this.options.breaks?K.breaks:K.gfm),this.tokenizer.rules=ye}ot.lex=function(ye,Te){return new ot(Te).lex(ye)},ot.lexInline=function(ye,Te){return new ot(Te).inlineTokens(ye)};var ut=ot.prototype;return ut.lex=function(ye){return ye=ye.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(ye,this.tokens,!0),this.inline(this.tokens),this.tokens},ut.blockTokens=function(ye,Te,We){var rt,Dt,It,Ot,Qt,zn,ht=this;for(void 0===Te&&(Te=[]),void 0===We&&(We=!0),this.options.pedantic&&(ye=ye.replace(/^ +$/gm,""));ye;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Rn){return!!(rt=Rn.call(ht,ye,Te))&&(ye=ye.substring(rt.raw.length),Te.push(rt),!0)}))){if(rt=this.tokenizer.space(ye)){ye=ye.substring(rt.raw.length),rt.type&&Te.push(rt);continue}if(rt=this.tokenizer.code(ye)){ye=ye.substring(rt.raw.length),(Ot=Te[Te.length-1])&&"paragraph"===Ot.type?(Ot.raw+="\n"+rt.raw,Ot.text+="\n"+rt.text):Te.push(rt);continue}if(rt=this.tokenizer.fences(ye)){ye=ye.substring(rt.raw.length),Te.push(rt);continue}if(rt=this.tokenizer.heading(ye)){ye=ye.substring(rt.raw.length),Te.push(rt);continue}if(rt=this.tokenizer.nptable(ye)){ye=ye.substring(rt.raw.length),Te.push(rt);continue}if(rt=this.tokenizer.hr(ye)){ye=ye.substring(rt.raw.length),Te.push(rt);continue}if(rt=this.tokenizer.blockquote(ye)){ye=ye.substring(rt.raw.length),rt.tokens=this.blockTokens(rt.text,[],We),Te.push(rt);continue}if(rt=this.tokenizer.list(ye)){for(ye=ye.substring(rt.raw.length),It=rt.items.length,Dt=0;Dt<It;Dt++)rt.items[Dt].tokens=this.blockTokens(rt.items[Dt].text,[],!1);Te.push(rt);continue}if(rt=this.tokenizer.html(ye)){ye=ye.substring(rt.raw.length),Te.push(rt);continue}if(We&&(rt=this.tokenizer.def(ye))){ye=ye.substring(rt.raw.length),this.tokens.links[rt.tag]||(this.tokens.links[rt.tag]={href:rt.href,title:rt.title});continue}if(rt=this.tokenizer.table(ye)){ye=ye.substring(rt.raw.length),Te.push(rt);continue}if(rt=this.tokenizer.lheading(ye)){ye=ye.substring(rt.raw.length),Te.push(rt);continue}if(Qt=ye,this.options.extensions&&this.options.extensions.startBlock&&function(){var Rn=1/0,bn=ye.slice(1),Xn=void 0;ht.options.extensions.startBlock.forEach(function(Cn){"number"==typeof(Xn=Cn.call(this,bn))&&Xn>=0&&(Rn=Math.min(Rn,Xn))}),Rn<1/0&&Rn>=0&&(Qt=ye.substring(0,Rn+1))}(),We&&(rt=this.tokenizer.paragraph(Qt))){Ot=Te[Te.length-1],zn&&"paragraph"===Ot.type?(Ot.raw+="\n"+rt.raw,Ot.text+="\n"+rt.text):Te.push(rt),zn=Qt.length!==ye.length,ye=ye.substring(rt.raw.length);continue}if(rt=this.tokenizer.text(ye)){ye=ye.substring(rt.raw.length),(Ot=Te[Te.length-1])&&"text"===Ot.type?(Ot.raw+="\n"+rt.raw,Ot.text+="\n"+rt.text):Te.push(rt);continue}if(ye){var ci="Infinite loop on byte: "+ye.charCodeAt(0);if(this.options.silent){console.error(ci);break}throw new Error(ci)}}return Te},ut.inline=function(ye){var Te,We,ht,rt,Dt,It,Ot=ye.length;for(Te=0;Te<Ot;Te++)switch(It=ye[Te],It.type){case"paragraph":case"text":case"heading":It.tokens=[],this.inlineTokens(It.text,It.tokens);break;case"table":for(It.tokens={header:[],cells:[]},rt=It.header.length,We=0;We<rt;We++)It.tokens.header[We]=[],this.inlineTokens(It.header[We],It.tokens.header[We]);for(rt=It.cells.length,We=0;We<rt;We++)for(Dt=It.cells[We],It.tokens.cells[We]=[],ht=0;ht<Dt.length;ht++)It.tokens.cells[We][ht]=[],this.inlineTokens(Dt[ht],It.tokens.cells[We][ht]);break;case"blockquote":this.inline(It.tokens);break;case"list":for(rt=It.items.length,We=0;We<rt;We++)this.inline(It.items[We].tokens)}return ye},ut.inlineTokens=function(ye,Te,We,ht){var rt=this;void 0===Te&&(Te=[]),void 0===We&&(We=!1),void 0===ht&&(ht=!1);var Dt,It,Ot,zn,ci,Rn,Qt=ye;if(this.tokens.links){var bn=Object.keys(this.tokens.links);if(bn.length>0)for(;null!=(zn=this.tokenizer.rules.inline.reflinkSearch.exec(Qt));)bn.includes(zn[0].slice(zn[0].lastIndexOf("[")+1,-1))&&(Qt=Qt.slice(0,zn.index)+"["+q("a",zn[0].length-2)+"]"+Qt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(zn=this.tokenizer.rules.inline.blockSkip.exec(Qt));)Qt=Qt.slice(0,zn.index)+"["+q("a",zn[0].length-2)+"]"+Qt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(zn=this.tokenizer.rules.inline.escapedEmSt.exec(Qt));)Qt=Qt.slice(0,zn.index)+"++"+Qt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;ye;)if(ci||(Rn=""),ci=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Cn){return!!(Dt=Cn.call(rt,ye,Te))&&(ye=ye.substring(Dt.raw.length),Te.push(Dt),!0)}))){if(Dt=this.tokenizer.escape(ye)){ye=ye.substring(Dt.raw.length),Te.push(Dt);continue}if(Dt=this.tokenizer.tag(ye,We,ht)){ye=ye.substring(Dt.raw.length),We=Dt.inLink,ht=Dt.inRawBlock,(It=Te[Te.length-1])&&"text"===Dt.type&&"text"===It.type?(It.raw+=Dt.raw,It.text+=Dt.text):Te.push(Dt);continue}if(Dt=this.tokenizer.link(ye)){ye=ye.substring(Dt.raw.length),"link"===Dt.type&&(Dt.tokens=this.inlineTokens(Dt.text,[],!0,ht)),Te.push(Dt);continue}if(Dt=this.tokenizer.reflink(ye,this.tokens.links)){ye=ye.substring(Dt.raw.length),It=Te[Te.length-1],"link"===Dt.type?(Dt.tokens=this.inlineTokens(Dt.text,[],!0,ht),Te.push(Dt)):It&&"text"===Dt.type&&"text"===It.type?(It.raw+=Dt.raw,It.text+=Dt.text):Te.push(Dt);continue}if(Dt=this.tokenizer.emStrong(ye,Qt,Rn)){ye=ye.substring(Dt.raw.length),Dt.tokens=this.inlineTokens(Dt.text,[],We,ht),Te.push(Dt);continue}if(Dt=this.tokenizer.codespan(ye)){ye=ye.substring(Dt.raw.length),Te.push(Dt);continue}if(Dt=this.tokenizer.br(ye)){ye=ye.substring(Dt.raw.length),Te.push(Dt);continue}if(Dt=this.tokenizer.del(ye)){ye=ye.substring(Dt.raw.length),Dt.tokens=this.inlineTokens(Dt.text,[],We,ht),Te.push(Dt);continue}if(Dt=this.tokenizer.autolink(ye,ce)){ye=ye.substring(Dt.raw.length),Te.push(Dt);continue}if(!We&&(Dt=this.tokenizer.url(ye,ce))){ye=ye.substring(Dt.raw.length),Te.push(Dt);continue}if(Ot=ye,this.options.extensions&&this.options.extensions.startInline&&function(){var Cn=1/0,rr=ye.slice(1),sr=void 0;rt.options.extensions.startInline.forEach(function(Qn){"number"==typeof(sr=Qn.call(this,rr))&&sr>=0&&(Cn=Math.min(Cn,sr))}),Cn<1/0&&Cn>=0&&(Ot=ye.substring(0,Cn+1))}(),Dt=this.tokenizer.inlineText(Ot,ht,ge)){ye=ye.substring(Dt.raw.length),"_"!==Dt.raw.slice(-1)&&(Rn=Dt.raw.slice(-1)),ci=!0,(It=Te[Te.length-1])&&"text"===It.type?(It.raw+=Dt.raw,It.text+=Dt.text):Te.push(Dt);continue}if(ye){var Xn="Infinite loop on byte: "+ye.charCodeAt(0);if(this.options.silent){console.error(Xn);break}throw new Error(Xn)}}return Te},function(ot,ut,ft){ut&&Xe(ot.prototype,ut),ft&&Xe(ot,ft)}(ot,null,[{key:"rules",get:function(){return{block:Ve,inline:K}}}]),ot}(),_t=je.exports.defaults,gt=te_cleanUrl,Ae=te_escape,z=function(){function ot(ft){this.options=ft||_t}var ut=ot.prototype;return ut.code=function(ye,Te,We){var ht=(Te||"").match(/\S*/)[0];if(this.options.highlight){var rt=this.options.highlight(ye,ht);null!=rt&&rt!==ye&&(We=!0,ye=rt)}return ye=ye.replace(/\n$/,"")+"\n",ht?'<pre><code class="'+this.options.langPrefix+Ae(ht,!0)+'">'+(We?ye:Ae(ye,!0))+"</code></pre>\n":"<pre><code>"+(We?ye:Ae(ye,!0))+"</code></pre>\n"},ut.blockquote=function(ye){return"<blockquote>\n"+ye+"</blockquote>\n"},ut.html=function(ye){return ye},ut.heading=function(ye,Te,We,ht){return this.options.headerIds?"<h"+Te+' id="'+this.options.headerPrefix+ht.slug(We)+'">'+ye+"</h"+Te+">\n":"<h"+Te+">"+ye+"</h"+Te+">\n"},ut.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},ut.list=function(ye,Te,We){var ht=Te?"ol":"ul";return"<"+ht+(Te&&1!==We?' start="'+We+'"':"")+">\n"+ye+"</"+ht+">\n"},ut.listitem=function(ye){return"<li>"+ye+"</li>\n"},ut.checkbox=function(ye){return"<input "+(ye?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ut.paragraph=function(ye){return"<p>"+ye+"</p>\n"},ut.table=function(ye,Te){return Te&&(Te="<tbody>"+Te+"</tbody>"),"<table>\n<thead>\n"+ye+"</thead>\n"+Te+"</table>\n"},ut.tablerow=function(ye){return"<tr>\n"+ye+"</tr>\n"},ut.tablecell=function(ye,Te){var We=Te.header?"th":"td";return(Te.align?"<"+We+' align="'+Te.align+'">':"<"+We+">")+ye+"</"+We+">\n"},ut.strong=function(ye){return"<strong>"+ye+"</strong>"},ut.em=function(ye){return"<em>"+ye+"</em>"},ut.codespan=function(ye){return"<code>"+ye+"</code>"},ut.br=function(){return this.options.xhtml?"<br/>":"<br>"},ut.del=function(ye){return"<del>"+ye+"</del>"},ut.link=function(ye,Te,We){if(null===(ye=gt(this.options.sanitize,this.options.baseUrl,ye)))return We;var ht='<a href="'+Ae(ye)+'"';return Te&&(ht+=' title="'+Te+'"'),ht+">"+We+"</a>"},ut.image=function(ye,Te,We){if(null===(ye=gt(this.options.sanitize,this.options.baseUrl,ye)))return We;var ht='<img src="'+ye+'" alt="'+We+'"';return Te&&(ht+=' title="'+Te+'"'),ht+(this.options.xhtml?"/>":">")},ut.text=function(ye){return ye},ot}(),L=function(){function ot(){}var ut=ot.prototype;return ut.strong=function(ye){return ye},ut.em=function(ye){return ye},ut.codespan=function(ye){return ye},ut.del=function(ye){return ye},ut.html=function(ye){return ye},ut.text=function(ye){return ye},ut.link=function(ye,Te,We){return""+We},ut.image=function(ye,Te,We){return""+We},ut.br=function(){return""},ot}(),H=function(){function ot(){this.seen={}}var ut=ot.prototype;return ut.serialize=function(ye){return ye.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ut.getNextSafeSlug=function(ye,Te){var We=ye,ht=0;if(this.seen.hasOwnProperty(We)){ht=this.seen[ye];do{We=ye+"-"+ ++ht}while(this.seen.hasOwnProperty(We))}return Te||(this.seen[ye]=ht,this.seen[We]=0),We},ut.slug=function(ye,Te){void 0===Te&&(Te={});var We=this.serialize(ye);return this.getNextSafeSlug(We,Te.dryrun)},ot}(),Le=z,it=L,At=H,kt=je.exports.defaults,In=te_unescape,Yn=Ye,Mi=function(){function ot(ft){this.options=ft||kt,this.options.renderer=this.options.renderer||new Le,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new it,this.slugger=new At}ot.parse=function(ye,Te){return new ot(Te).parse(ye)},ot.parseInline=function(ye,Te){return new ot(Te).parseInline(ye)};var ut=ot.prototype;return ut.parse=function(ye,Te){void 0===Te&&(Te=!0);var ht,rt,Dt,It,Ot,Qt,zn,ci,Rn,bn,Xn,Cn,rr,sr,Qn,Wi,Ca,Qr,ae,We="",me=ye.length;for(ht=0;ht<me;ht++)if(bn=ye[ht],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[bn.type]&&(!1!==(ae=this.options.extensions.renderers[bn.type].call(this,bn))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(bn.type)))We+=ae||"";else switch(bn.type){case"space":continue;case"hr":We+=this.renderer.hr();continue;case"heading":We+=this.renderer.heading(this.parseInline(bn.tokens),bn.depth,In(this.parseInline(bn.tokens,this.textRenderer)),this.slugger);continue;case"code":We+=this.renderer.code(bn.text,bn.lang,bn.escaped);continue;case"table":for(ci="",zn="",It=bn.header.length,rt=0;rt<It;rt++)zn+=this.renderer.tablecell(this.parseInline(bn.tokens.header[rt]),{header:!0,align:bn.align[rt]});for(ci+=this.renderer.tablerow(zn),Rn="",It=bn.cells.length,rt=0;rt<It;rt++){for(zn="",Ot=(Qt=bn.tokens.cells[rt]).length,Dt=0;Dt<Ot;Dt++)zn+=this.renderer.tablecell(this.parseInline(Qt[Dt]),{header:!1,align:bn.align[Dt]});Rn+=this.renderer.tablerow(zn)}We+=this.renderer.table(ci,Rn);continue;case"blockquote":Rn=this.parse(bn.tokens),We+=this.renderer.blockquote(Rn);continue;case"list":for(Xn=bn.ordered,Cn=bn.start,rr=bn.loose,It=bn.items.length,Rn="",rt=0;rt<It;rt++)Wi=(Qn=bn.items[rt]).checked,Ca=Qn.task,sr="",Qn.task&&(Qr=this.renderer.checkbox(Wi),rr?Qn.tokens.length>0&&"text"===Qn.tokens[0].type?(Qn.tokens[0].text=Qr+" "+Qn.tokens[0].text,Qn.tokens[0].tokens&&Qn.tokens[0].tokens.length>0&&"text"===Qn.tokens[0].tokens[0].type&&(Qn.tokens[0].tokens[0].text=Qr+" "+Qn.tokens[0].tokens[0].text)):Qn.tokens.unshift({type:"text",text:Qr}):sr+=Qr),sr+=this.parse(Qn.tokens,rr),Rn+=this.renderer.listitem(sr,Ca,Wi);We+=this.renderer.list(Rn,Xn,Cn);continue;case"html":We+=this.renderer.html(bn.text);continue;case"paragraph":We+=this.renderer.paragraph(this.parseInline(bn.tokens));continue;case"text":for(Rn=bn.tokens?this.parseInline(bn.tokens):bn.text;ht+1<me&&"text"===ye[ht+1].type;)Rn+="\n"+((bn=ye[++ht]).tokens?this.parseInline(bn.tokens):bn.text);We+=Te?this.renderer.paragraph(Rn):Rn;continue;default:var de='Token with "'+bn.type+'" type was not found.';if(this.options.silent)return void console.error(de);throw new Error(de)}return We},ut.parseInline=function(ye,Te){Te=Te||this.renderer;var ht,rt,Dt,We="",It=ye.length;for(ht=0;ht<It;ht++)if(rt=ye[ht],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[rt.type]&&(!1!==(Dt=this.options.extensions.renderers[rt.type].call(this,rt))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(rt.type)))We+=Dt||"";else switch(rt.type){case"escape":We+=Te.text(rt.text);break;case"html":We+=Te.html(rt.text);break;case"link":We+=Te.link(rt.href,rt.title,this.parseInline(rt.tokens,Te));break;case"image":We+=Te.image(rt.href,rt.title,rt.text);break;case"strong":We+=Te.strong(this.parseInline(rt.tokens,Te));break;case"em":We+=Te.em(this.parseInline(rt.tokens,Te));break;case"codespan":We+=Te.codespan(rt.text);break;case"br":We+=Te.br();break;case"del":We+=Te.del(this.parseInline(rt.tokens,Te));break;case"text":We+=Te.text(rt.text);break;default:var Ot='Token with "'+rt.type+'" type was not found.';if(this.options.silent)return void console.error(Ot);throw new Error(Ot)}return We},ot}(),xi=J,Xr=z,Ls=L,fs=H,Bs=te_merge,Kr=te_checkSanitizeDeprecation,xa=te_escape,kl=je.exports.getDefaults,Sa=je.exports.changeDefaults,ws=je.exports.defaults;function en(ot,ut,ft){if(null==ot)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof ot)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ot)+", string expected");if("function"==typeof ut&&(ft=ut,ut=null),ut=Bs({},en.defaults,ut||{}),Kr(ut),ft){var Te,ye=ut.highlight;try{Te=Yn.lex(ot,ut)}catch(Dt){return ft(Dt)}var We=function(It){var Ot;if(!It)try{ut.walkTokens&&en.walkTokens(Te,ut.walkTokens),Ot=Mi.parse(Te,ut)}catch(Qt){It=Qt}return ut.highlight=ye,It?ft(It):ft(null,Ot)};if(!ye||ye.length<3||(delete ut.highlight,!Te.length))return We();var ht=0;return en.walkTokens(Te,function(Dt){"code"===Dt.type&&(ht++,setTimeout(function(){ye(Dt.text,Dt.lang,function(It,Ot){if(It)return We(It);null!=Ot&&Ot!==Dt.text&&(Dt.text=Ot,Dt.escaped=!0),0==--ht&&We()})},0))}),void(0===ht&&We())}try{var rt=Yn.lex(ot,ut);return ut.walkTokens&&en.walkTokens(rt,ut.walkTokens),Mi.parse(rt,ut)}catch(Dt){if(Dt.message+="\nPlease report this to https://github.com/markedjs/marked.",ut.silent)return"<p>An error occurred:</p><pre>"+xa(Dt.message+"",!0)+"</pre>";throw Dt}}return en.options=en.setOptions=function(ot){return Bs(en.defaults,ot),Sa(en.defaults),en},en.getDefaults=kl,en.defaults=ws,en.use=function(){for(var ot=this,ut=arguments.length,ft=new Array(ut),ye=0;ye<ut;ye++)ft[ye]=arguments[ye];var ht,Te=Bs.apply(void 0,[{}].concat(ft)),We=en.defaults.extensions||{renderers:{},childTokens:{}};ft.forEach(function(rt){if(rt.extensions&&(ht=!0,rt.extensions.forEach(function(It){if(!It.name)throw new Error("extension name required");if(It.renderer){var Ot=We.renderers?We.renderers[It.name]:null;We.renderers[It.name]=Ot?function(){for(var Qt=arguments.length,zn=new Array(Qt),ci=0;ci<Qt;ci++)zn[ci]=arguments[ci];var Rn=It.renderer.apply(this,zn);return!1===Rn&&(Rn=Ot.apply(this,zn)),Rn}:It.renderer}if(It.tokenizer){if(!It.level||"block"!==It.level&&"inline"!==It.level)throw new Error("extension level must be 'block' or 'inline'");We[It.level]?We[It.level].unshift(It.tokenizer):We[It.level]=[It.tokenizer],It.start&&("block"===It.level?We.startBlock?We.startBlock.push(It.start):We.startBlock=[It.start]:"inline"===It.level&&(We.startInline?We.startInline.push(It.start):We.startInline=[It.start]))}It.childTokens&&(We.childTokens[It.name]=It.childTokens)})),rt.renderer&&function(){var It=en.defaults.renderer||new Xr,Ot=function(ci){var Rn=It[ci];It[ci]=function(){for(var bn=arguments.length,Xn=new Array(bn),Cn=0;Cn<bn;Cn++)Xn[Cn]=arguments[Cn];var rr=rt.renderer[ci].apply(It,Xn);return!1===rr&&(rr=Rn.apply(It,Xn)),rr}};for(var Qt in rt.renderer)Ot(Qt);Te.renderer=It}(),rt.tokenizer&&function(){var It=en.defaults.tokenizer||new xi,Ot=function(ci){var Rn=It[ci];It[ci]=function(){for(var bn=arguments.length,Xn=new Array(bn),Cn=0;Cn<bn;Cn++)Xn[Cn]=arguments[Cn];var rr=rt.tokenizer[ci].apply(It,Xn);return!1===rr&&(rr=Rn.apply(It,Xn)),rr}};for(var Qt in rt.tokenizer)Ot(Qt);Te.tokenizer=It}(),rt.walkTokens){var Dt=en.defaults.walkTokens;Te.walkTokens=function(It){rt.walkTokens.call(ot,It),Dt&&Dt(It)}}ht&&(Te.extensions=We),en.setOptions(Te)})},en.walkTokens=function(ot,ut){for(var Te,ft=function(){var ht=Te.value;switch(ut(ht),ht.type){case"table":for(var Dt,rt=Ct(ht.tokens.header);!(Dt=rt()).done;)en.walkTokens(Dt.value,ut);for(var Qt,Ot=Ct(ht.tokens.cells);!(Qt=Ot()).done;)for(var Rn,ci=Ct(Qt.value);!(Rn=ci()).done;)en.walkTokens(Rn.value,ut);break;case"list":en.walkTokens(ht.items,ut);break;default:en.defaults.extensions&&en.defaults.extensions.childTokens&&en.defaults.extensions.childTokens[ht.type]?en.defaults.extensions.childTokens[ht.type].forEach(function(Xn){en.walkTokens(ht[Xn],ut)}):ht.tokens&&en.walkTokens(ht.tokens,ut)}},ye=Ct(ot);!(Te=ye()).done;)ft()},en.parseInline=function(ot,ut){if(null==ot)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof ot)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ot)+", string expected");ut=Bs({},en.defaults,ut||{}),Kr(ut);try{var ft=Yn.lexInline(ot,ut);return ut.walkTokens&&en.walkTokens(ft,ut.walkTokens),Mi.parseInline(ft,ut)}catch(ye){if(ye.message+="\nPlease report this to https://github.com/markedjs/marked.",ut.silent)return"<p>An error occurred:</p><pre>"+xa(ye.message+"",!0)+"</pre>";throw ye}},en.Parser=Mi,en.parser=Mi.parse,en.Renderer=Xr,en.TextRenderer=Ls,en.Lexer=Yn,en.lexer=Yn.lex,en.Tokenizer=xi,en.Slugger=fs,en.parse=en,en}()},9369:(Vt,Xe,et)=>{var lt=et(6284),ee=et(7830);function Ct(){this.clear()}Ct.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},Ct.prototype.enqueue=function(je){return this.items.push(je),++this.size},Ct.prototype.dequeue=function(){if(this.size){var je=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,je}},Ct.prototype.peek=function(){if(this.size)return this.items[this.offset]},Ct.prototype.forEach=function(je,Q){Q=arguments.length>1?Q:this;for(var Ee=this.offset,pe=0,X=this.items.length;Ee<X;Ee++,pe++)je.call(Q,this.items[Ee],pe,this)},Ct.prototype.toArray=function(){return this.items.slice(this.offset)},Ct.prototype.values=function(){var je=this.items,Q=this.offset;return new lt(function(){if(Q>=je.length)return{done:!0};var Ee=je[Q];return Q++,{value:Ee,done:!1}})},Ct.prototype.entries=function(){var je=this.items,Q=this.offset,Ee=0;return new lt(function(){if(Q>=je.length)return{done:!0};var pe=je[Q];return Q++,{value:[Ee++,pe],done:!1}})},"undefined"!=typeof Symbol&&(Ct.prototype[Symbol.iterator]=Ct.prototype.values),Ct.prototype.toString=function(){return this.toArray().join(",")},Ct.prototype.toJSON=function(){return this.toArray()},Ct.prototype.inspect=function(){var je=this.toArray();return Object.defineProperty(je,"constructor",{value:Ct,enumerable:!1}),je},"undefined"!=typeof Symbol&&(Ct.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ct.prototype.inspect),Ct.from=function(je){var Q=new Ct;return ee(je,function(Ee){Q.enqueue(Ee)}),Q},Ct.of=function(){return Ct.from(arguments)},Vt.exports=Ct},8104:Vt=>{Vt.exports=function Xe(et,lt,ee){function Ct(Ee,pe){if(!lt[Ee]){if(!et[Ee]){if(je)return je(Ee,!0);throw new Error("Cannot find module '"+Ee+"'")}pe=lt[Ee]={exports:{}},et[Ee][0].call(pe.exports,function(U){return Ct(et[Ee][1][U]||U)},pe,pe.exports,Xe,et,lt,ee)}return lt[Ee].exports}for(var je=void 0,Q=0;Q<ee.length;Q++)Ct(ee[Q]);return Ct}({1:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){"use strict";var Y=Xe("crypto");function B(b,S){var T;return void 0===(T="passthrough"!==(S=R(b,S)).algorithm?Y.createHash(S.algorithm):new v).write&&(T.write=T.update,T.end=T.update),y(S,T).dispatch(b),T.update||T.end(""),T.digest?T.digest("buffer"===S.encoding?void 0:S.encoding):(b=T.read(),"buffer"!==S.encoding?b.toString(S.encoding):b)}(lt=et.exports=B).sha1=function(b){return B(b)},lt.keys=function(b){return B(b,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},lt.MD5=function(b){return B(b,{algorithm:"md5",encoding:"hex"})},lt.keysMD5=function(b){return B(b,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var w=Y.getHashes?Y.getHashes().slice():["sha1","md5"],C=(w.push("passthrough"),["buffer","hex","binary","base64"]);function R(b,S){var T={};if(T.algorithm=(S=S||{}).algorithm||"sha1",T.encoding=S.encoding||"hex",T.excludeValues=!!S.excludeValues,T.algorithm=T.algorithm.toLowerCase(),T.encoding=T.encoding.toLowerCase(),T.ignoreUnknown=!0===S.ignoreUnknown,T.respectType=!1!==S.respectType,T.respectFunctionNames=!1!==S.respectFunctionNames,T.respectFunctionProperties=!1!==S.respectFunctionProperties,T.unorderedArrays=!0===S.unorderedArrays,T.unorderedSets=!1!==S.unorderedSets,T.unorderedObjects=!1!==S.unorderedObjects,T.replacer=S.replacer||void 0,T.excludeKeys=S.excludeKeys||void 0,void 0===b)throw new Error("Object argument required.");for(var E=0;E<w.length;++E)w[E].toLowerCase()===T.algorithm.toLowerCase()&&(T.algorithm=w[E]);if(-1===w.indexOf(T.algorithm))throw new Error('Algorithm "'+T.algorithm+'"  not supported. supported values: '+w.join(", "));if(-1===C.indexOf(T.encoding)&&"passthrough"!==T.algorithm)throw new Error('Encoding "'+T.encoding+'"  not supported. supported values: '+C.join(", "));return T}function M(b){if("function"==typeof b)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(b))}function y(b,S,T){function E(O){return S.update?S.update(O,"utf8"):S.write(O,"utf8")}return T=T||[],{dispatch:function(O){return this["_"+(null===(O=b.replacer?b.replacer(O):O)?"null":typeof O)](O)},_object:function(O){var $,D=Object.prototype.toString.call(O),P=/\[object (.*)\]/i.exec(D);if(P=(P=P?P[1]:"unknown:["+D+"]").toLowerCase(),0<=(D=T.indexOf(O)))return this.dispatch("[CIRCULAR:"+D+"]");if(T.push(O),void 0!==je&&je.isBuffer&&je.isBuffer(O))return E("buffer:"),E(O);if("object"===P||"function"===P||"asyncfunction"===P)return D=Object.keys(O),b.unorderedObjects&&(D=D.sort()),!1===b.respectType||M(O)||D.splice(0,0,"prototype","__proto__","constructor"),b.excludeKeys&&(D=D.filter(function(Z){return!b.excludeKeys(Z)})),E("object:"+D.length+":"),$=this,D.forEach(function(Z){$.dispatch(Z),E(":"),b.excludeValues||$.dispatch(O[Z]),E(",")});if(!this["_"+P]){if(b.ignoreUnknown)return E("["+P+"]");throw new Error('Unknown object type "'+P+'"')}this["_"+P](O)},_array:function(O,$){$=void 0!==$?$:!1!==b.unorderedArrays;var D=this;if(E("array:"+O.length+":"),!$||O.length<=1)return O.forEach(function(Z){return D.dispatch(Z)});var P=[];return $=O.map(function(Z){var x=new v,W=T.slice();return y(b,x,W).dispatch(Z),P=P.concat(W.slice(T.length)),x.read().toString()}),T=T.concat(P),$.sort(),this._array($,!1)},_date:function(O){return E("date:"+O.toJSON())},_symbol:function(O){return E("symbol:"+O.toString())},_error:function(O){return E("error:"+O.toString())},_boolean:function(O){return E("bool:"+O.toString())},_string:function(O){E("string:"+O.length+":"),E(O.toString())},_function:function(O){E("fn:"),M(O)?this.dispatch("[native]"):this.dispatch(O.toString()),!1!==b.respectFunctionNames&&this.dispatch("function-name:"+String(O.name)),b.respectFunctionProperties&&this._object(O)},_number:function(O){return E("number:"+O.toString())},_xml:function(O){return E("xml:"+O.toString())},_null:function(){return E("Null")},_undefined:function(){return E("Undefined")},_regexp:function(O){return E("regex:"+O.toString())},_uint8array:function(O){return E("uint8array:"),this.dispatch(Array.prototype.slice.call(O))},_uint8clampedarray:function(O){return E("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(O))},_int8array:function(O){return E("int8array:"),this.dispatch(Array.prototype.slice.call(O))},_uint16array:function(O){return E("uint16array:"),this.dispatch(Array.prototype.slice.call(O))},_int16array:function(O){return E("int16array:"),this.dispatch(Array.prototype.slice.call(O))},_uint32array:function(O){return E("uint32array:"),this.dispatch(Array.prototype.slice.call(O))},_int32array:function(O){return E("int32array:"),this.dispatch(Array.prototype.slice.call(O))},_float32array:function(O){return E("float32array:"),this.dispatch(Array.prototype.slice.call(O))},_float64array:function(O){return E("float64array:"),this.dispatch(Array.prototype.slice.call(O))},_arraybuffer:function(O){return E("arraybuffer:"),this.dispatch(new Uint8Array(O))},_url:function(O){return E("url:"+O.toString())},_map:function(O){return E("map:"),O=Array.from(O),this._array(O,!1!==b.unorderedSets)},_set:function(O){return E("set:"),O=Array.from(O),this._array(O,!1!==b.unorderedSets)},_file:function(O){return E("file:"),this.dispatch([O.name,O.size,O.type,O.lastModfied])},_blob:function(){if(b.ignoreUnknown)return E("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return E("domwindow")},_bigint:function(O){return E("bigint:"+O.toString())},_process:function(){return E("process")},_timer:function(){return E("timer")},_pipe:function(){return E("pipe")},_tcp:function(){return E("tcp")},_udp:function(){return E("udp")},_tty:function(){return E("tty")},_statwatcher:function(){return E("statwatcher")},_securecontext:function(){return E("securecontext")},_connection:function(){return E("connection")},_zlib:function(){return E("zlib")},_context:function(){return E("context")},_nodescript:function(){return E("nodescript")},_httpparser:function(){return E("httpparser")},_dataview:function(){return E("dataview")},_signal:function(){return E("signal")},_fsevent:function(){return E("fsevent")},_tlswrap:function(){return E("tlswrap")}}}function v(){return{buf:"",write:function(b){this.buf+=b},end:function(b){this.buf+=b},read:function(){return this.buf}}}lt.writeToStream=function(b,S,T){return void 0===T&&(T=S,S={}),y(S=R(b,S),T).dispatch(b)}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){!function(Y){"use strict";var B="undefined"!=typeof Uint8Array?Uint8Array:Array,w="+".charCodeAt(0),C="/".charCodeAt(0),R="0".charCodeAt(0),M="a".charCodeAt(0),y="A".charCodeAt(0),v="-".charCodeAt(0),b="_".charCodeAt(0);function S(T){return(T=T.charCodeAt(0))===w||T===v?62:T===C||T===b?63:T<R?-1:T<R+10?T-R+26+26:T<y+26?T-y:T<M+26?T-M+26:void 0}Y.toByteArray=function(T){var E,O;if(0<T.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var $="="===T.charAt(($=T.length)-2)?2:"="===T.charAt($-1)?1:0,D=new B(3*T.length/4-$),P=0<$?T.length-4:T.length,Z=0;function x(W){D[Z++]=W}for(E=0;E<P;E+=4,0)x((16711680&(O=S(T.charAt(E))<<18|S(T.charAt(E+1))<<12|S(T.charAt(E+2))<<6|S(T.charAt(E+3))))>>16),x((65280&O)>>8),x(255&O);return 2==$?x(255&(O=S(T.charAt(E))<<2|S(T.charAt(E+1))>>4)):1==$&&(x((O=S(T.charAt(E))<<10|S(T.charAt(E+1))<<4|S(T.charAt(E+2))>>2)>>8&255),x(255&O)),D},Y.fromByteArray=function(T){var E,O,$,D,P=T.length%3,Z="";function x(W){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(W)}for(E=0,$=T.length-P;E<$;E+=3)Z+=x((D=O=(T[E]<<16)+(T[E+1]<<8)+T[E+2])>>18&63)+x(D>>12&63)+x(D>>6&63)+x(63&D);switch(P){case 1:Z=(Z+=x((O=T[T.length-1])>>2))+x(O<<4&63)+"==";break;case 2:Z=(Z=(Z+=x((O=(T[T.length-2]<<8)+T[T.length-1])>>10))+x(O>>4&63))+x(O<<2&63)+"="}return Z}}(void 0===lt?this.base64js={}:lt)}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){var Y=Xe("base64-js"),B=Xe("ieee754");function je(J,le,_e){if(!(this instanceof je))return new je(J,le,_e);var Me,Ce,$e,Se,ze=typeof J;if("base64"===le&&"string"==ze)for(J=(Se=J).trim?Se.trim():Se.replace(/^\s+|\s+$/g,"");J.length%4!=0;)J+="=";if("number"==ze)Me=ne(J);else if("string"==ze)Me=je.byteLength(J,le);else{if("object"!=ze)throw new Error("First argument needs to be a number, array or string.");Me=ne(J.length)}if(je._useTypedArrays?Ce=je._augment(new Uint8Array(Me)):((Ce=this).length=Me,Ce._isBuffer=!0),je._useTypedArrays&&"number"==typeof J.byteLength)Ce._set(J);else if(ue(Se=J)||je.isBuffer(Se)||Se&&"object"==typeof Se&&"number"==typeof Se.length)for($e=0;$e<Me;$e++)Ce[$e]=je.isBuffer(J)?J.readUInt8($e):J[$e];else if("string"==ze)Ce.write(J,0,le);else if("number"==ze&&!je._useTypedArrays&&!_e)for($e=0;$e<Me;$e++)Ce[$e]=0;return Ce}function M(J,le,_e,Me){var Ce;if(Me||(Ge("boolean"==typeof _e,"missing or invalid endian"),Ge(null!=le,"missing offset"),Ge(le+1<J.length,"Trying to read beyond buffer length")),!((Me=J.length)<=le))return _e?(Ce=J[le],le+1<Me&&(Ce|=J[le+1]<<8)):(Ce=J[le]<<8,le+1<Me&&(Ce|=J[le+1])),Ce}function y(J,le,_e,Me){var Ce;if(Me||(Ge("boolean"==typeof _e,"missing or invalid endian"),Ge(null!=le,"missing offset"),Ge(le+3<J.length,"Trying to read beyond buffer length")),!((Me=J.length)<=le))return _e?(le+2<Me&&(Ce=J[le+2]<<16),le+1<Me&&(Ce|=J[le+1]<<8),Ce|=J[le],le+3<Me&&(Ce+=J[le+3]<<24>>>0)):(le+1<Me&&(Ce=J[le+1]<<16),le+2<Me&&(Ce|=J[le+2]<<8),le+3<Me&&(Ce|=J[le+3]),Ce+=J[le]<<24>>>0),Ce}function v(J,le,_e,Me){if(Me||(Ge("boolean"==typeof _e,"missing or invalid endian"),Ge(null!=le,"missing offset"),Ge(le+1<J.length,"Trying to read beyond buffer length")),!(J.length<=le))return 32768&(Me=M(J,le,_e,!0))?-1*(65535-Me+1):Me}function b(J,le,_e,Me){if(Me||(Ge("boolean"==typeof _e,"missing or invalid endian"),Ge(null!=le,"missing offset"),Ge(le+3<J.length,"Trying to read beyond buffer length")),!(J.length<=le))return 2147483648&(Me=y(J,le,_e,!0))?-1*(4294967295-Me+1):Me}function S(J,le,_e,Me){return Me||(Ge("boolean"==typeof _e,"missing or invalid endian"),Ge(le+3<J.length,"Trying to read beyond buffer length")),B.read(J,le,_e,23,4)}function T(J,le,_e,Me){return Me||(Ge("boolean"==typeof _e,"missing or invalid endian"),Ge(le+7<J.length,"Trying to read beyond buffer length")),B.read(J,le,_e,52,8)}function E(J,le,_e,Me,Ce){if(Ce||(Ge(null!=le,"missing value"),Ge("boolean"==typeof Me,"missing or invalid endian"),Ge(null!=_e,"missing offset"),Ge(_e+1<J.length,"trying to write beyond buffer length"),ve(le,65535)),!((Ce=J.length)<=_e))for(var $e=0,Se=Math.min(Ce-_e,2);$e<Se;$e++)J[_e+$e]=(le&255<<8*(Me?$e:1-$e))>>>8*(Me?$e:1-$e)}function O(J,le,_e,Me,Ce){if(Ce||(Ge(null!=le,"missing value"),Ge("boolean"==typeof Me,"missing or invalid endian"),Ge(null!=_e,"missing offset"),Ge(_e+3<J.length,"trying to write beyond buffer length"),ve(le,4294967295)),!((Ce=J.length)<=_e))for(var $e=0,Se=Math.min(Ce-_e,4);$e<Se;$e++)J[_e+$e]=le>>>8*(Me?$e:3-$e)&255}function $(J,le,_e,Me,Ce){Ce||(Ge(null!=le,"missing value"),Ge("boolean"==typeof Me,"missing or invalid endian"),Ge(null!=_e,"missing offset"),Ge(_e+1<J.length,"Trying to write beyond buffer length"),Fe(le,32767,-32768)),J.length<=_e||E(J,0<=le?le:65535+le+1,_e,Me,Ce)}function D(J,le,_e,Me,Ce){Ce||(Ge(null!=le,"missing value"),Ge("boolean"==typeof Me,"missing or invalid endian"),Ge(null!=_e,"missing offset"),Ge(_e+3<J.length,"Trying to write beyond buffer length"),Fe(le,2147483647,-2147483648)),J.length<=_e||O(J,0<=le?le:4294967295+le+1,_e,Me,Ce)}function P(J,le,_e,Me,Ce){Ce||(Ge(null!=le,"missing value"),Ge("boolean"==typeof Me,"missing or invalid endian"),Ge(null!=_e,"missing offset"),Ge(_e+3<J.length,"Trying to write beyond buffer length"),Ze(le,34028234663852886e22,-34028234663852886e22)),J.length<=_e||B.write(J,le,_e,Me,23,4)}function Z(J,le,_e,Me,Ce){Ce||(Ge(null!=le,"missing value"),Ge("boolean"==typeof Me,"missing or invalid endian"),Ge(null!=_e,"missing offset"),Ge(_e+7<J.length,"Trying to write beyond buffer length"),Ze(le,17976931348623157e292,-17976931348623157e292)),J.length<=_e||B.write(J,le,_e,Me,52,8)}lt.Buffer=je,lt.SlowBuffer=je,lt.INSPECT_MAX_BYTES=50,je.poolSize=8192,je._useTypedArrays=function(){try{var J=new ArrayBuffer(0),le=new Uint8Array(J);return le.foo=function(){return 42},42===le.foo()&&"function"==typeof le.subarray}catch(_e){return!1}}(),je.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},je.isBuffer=function(J){return!(null==J||!J._isBuffer)},je.byteLength=function(J,le){var _e;switch(J+="",le||"utf8"){case"hex":_e=J.length/2;break;case"utf8":case"utf-8":_e=te(J).length;break;case"ascii":case"binary":case"raw":_e=J.length;break;case"base64":_e=Re(J).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":_e=2*J.length;break;default:throw new Error("Unknown encoding")}return _e},je.concat=function(J,le){if(Ge(ue(J),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===J.length)return new je(0);if(1===J.length)return J[0];if("number"!=typeof le)for(Ce=le=0;Ce<J.length;Ce++)le+=J[Ce].length;for(var _e=new je(le),Me=0,Ce=0;Ce<J.length;Ce++){var $e=J[Ce];$e.copy(_e,Me),Me+=$e.length}return _e},je.prototype.write=function(J,le,_e,Me){isFinite(le)?isFinite(_e)||(Me=_e,_e=void 0):(Ke=Me,Me=le,le=_e,_e=Ke),le=Number(le)||0;var Ce,$e,Se,ze,Ke=this.length-le;switch((!_e||Ke<(_e=Number(_e)))&&(_e=Ke),Me=String(Me||"utf8").toLowerCase()){case"hex":Ce=function(Ve,K,q,ge){q=Number(q)||0;var ce=Ve.length-q;(!ge||ce<(ge=Number(ge)))&&(ge=ce),Ge((ce=K.length)%2==0,"Invalid hex string"),ce/2<ge&&(ge=ce/2);for(var Ye=0;Ye<ge;Ye++){var _t=parseInt(K.substr(2*Ye,2),16);Ge(!isNaN(_t),"Invalid hex string"),Ve[q+Ye]=_t}return je._charsWritten=2*Ye,Ye}(this,J,le,_e);break;case"utf8":case"utf-8":$e=this,Se=le,ze=_e,Ce=je._charsWritten=be(te(J),$e,Se,ze);break;case"ascii":case"binary":Ce=function(J,le,_e,Me){return je._charsWritten=be(function(Ce){for(var $e=[],Se=0;Se<Ce.length;Se++)$e.push(255&Ce.charCodeAt(Se));return $e}(le),J,_e,Me)}(this,J,le,_e);break;case"base64":$e=this,Se=le,ze=_e,Ce=je._charsWritten=be(Re(J),$e,Se,ze);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ce=function(J,le,_e,Me){return je._charsWritten=be(function(Ce){for(var $e,Se,ze=[],Ke=0;Ke<Ce.length;Ke++)$e=(Se=Ce.charCodeAt(Ke))>>8,ze.push(Se%=256),ze.push($e);return ze}(le),J,_e,Me)}(this,J,le,_e);break;default:throw new Error("Unknown encoding")}return Ce},je.prototype.toString=function(J,le,_e){var Me,Ce,$e,Se,ze=this;if(J=String(J||"utf8").toLowerCase(),le=Number(le)||0,(_e=void 0!==_e?Number(_e):ze.length)===le)return"";switch(J){case"hex":Me=function(Ke,Ve,K){var q=Ke.length;(!Ve||Ve<0)&&(Ve=0),(!K||K<0||q<K)&&(K=q);for(var ge="",ce=Ve;ce<K;ce++)ge+=se(Ke[ce]);return ge}(ze,le,_e);break;case"utf8":case"utf-8":Me=function(Ke,Ve,K){var q="",ge="";K=Math.min(Ke.length,K);for(var ce=Ve;ce<K;ce++)Ke[ce]<=127?(q+=re(ge)+String.fromCharCode(Ke[ce]),ge=""):ge+="%"+Ke[ce].toString(16);return q+re(ge)}(ze,le,_e);break;case"ascii":case"binary":Me=function(J,le,_e){var Me="";_e=Math.min(J.length,_e);for(var Ce=le;Ce<_e;Ce++)Me+=String.fromCharCode(J[Ce]);return Me}(ze,le,_e);break;case"base64":Ce=ze,Se=_e,Me=0===($e=le)&&Se===Ce.length?Y.fromByteArray(Ce):Y.fromByteArray(Ce.slice($e,Se));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Me=function(Ke,Ve,K){for(var q=Ke.slice(Ve,K),ge="",ce=0;ce<q.length;ce+=2)ge+=String.fromCharCode(q[ce]+256*q[ce+1]);return ge}(ze,le,_e);break;default:throw new Error("Unknown encoding")}return Me},je.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},je.prototype.copy=function(J,le,_e,Me){if(le=le||0,(Me=Me||0===Me?Me:this.length)!==(_e=_e||0)&&0!==J.length&&0!==this.length){Ge(_e<=Me,"sourceEnd < sourceStart"),Ge(0<=le&&le<J.length,"targetStart out of bounds"),Ge(0<=_e&&_e<this.length,"sourceStart out of bounds"),Ge(0<=Me&&Me<=this.length,"sourceEnd out of bounds"),Me>this.length&&(Me=this.length);var Ce=(Me=J.length-le<Me-_e?J.length-le+_e:Me)-_e;if(Ce<100||!je._useTypedArrays)for(var $e=0;$e<Ce;$e++)J[$e+le]=this[$e+_e];else J._set(this.subarray(_e,_e+Ce),le)}},je.prototype.slice=function(J,le){var _e=this.length;if(J=W(J,_e,0),le=W(le,_e,_e),je._useTypedArrays)return je._augment(this.subarray(J,le));for(var Me=le-J,Ce=new je(Me,void 0,!0),$e=0;$e<Me;$e++)Ce[$e]=this[$e+J];return Ce},je.prototype.get=function(J){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(J)},je.prototype.set=function(J,le){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(J,le)},je.prototype.readUInt8=function(J,le){if(le||(Ge(null!=J,"missing offset"),Ge(J<this.length,"Trying to read beyond buffer length")),!(J>=this.length))return this[J]},je.prototype.readUInt16LE=function(J,le){return M(this,J,!0,le)},je.prototype.readUInt16BE=function(J,le){return M(this,J,!1,le)},je.prototype.readUInt32LE=function(J,le){return y(this,J,!0,le)},je.prototype.readUInt32BE=function(J,le){return y(this,J,!1,le)},je.prototype.readInt8=function(J,le){if(le||(Ge(null!=J,"missing offset"),Ge(J<this.length,"Trying to read beyond buffer length")),!(J>=this.length))return 128&this[J]?-1*(255-this[J]+1):this[J]},je.prototype.readInt16LE=function(J,le){return v(this,J,!0,le)},je.prototype.readInt16BE=function(J,le){return v(this,J,!1,le)},je.prototype.readInt32LE=function(J,le){return b(this,J,!0,le)},je.prototype.readInt32BE=function(J,le){return b(this,J,!1,le)},je.prototype.readFloatLE=function(J,le){return S(this,J,!0,le)},je.prototype.readFloatBE=function(J,le){return S(this,J,!1,le)},je.prototype.readDoubleLE=function(J,le){return T(this,J,!0,le)},je.prototype.readDoubleBE=function(J,le){return T(this,J,!1,le)},je.prototype.writeUInt8=function(J,le,_e){_e||(Ge(null!=J,"missing value"),Ge(null!=le,"missing offset"),Ge(le<this.length,"trying to write beyond buffer length"),ve(J,255)),le>=this.length||(this[le]=J)},je.prototype.writeUInt16LE=function(J,le,_e){E(this,J,le,!0,_e)},je.prototype.writeUInt16BE=function(J,le,_e){E(this,J,le,!1,_e)},je.prototype.writeUInt32LE=function(J,le,_e){O(this,J,le,!0,_e)},je.prototype.writeUInt32BE=function(J,le,_e){O(this,J,le,!1,_e)},je.prototype.writeInt8=function(J,le,_e){_e||(Ge(null!=J,"missing value"),Ge(null!=le,"missing offset"),Ge(le<this.length,"Trying to write beyond buffer length"),Fe(J,127,-128)),le>=this.length||this.writeUInt8(0<=J?J:255+J+1,le,_e)},je.prototype.writeInt16LE=function(J,le,_e){$(this,J,le,!0,_e)},je.prototype.writeInt16BE=function(J,le,_e){$(this,J,le,!1,_e)},je.prototype.writeInt32LE=function(J,le,_e){D(this,J,le,!0,_e)},je.prototype.writeInt32BE=function(J,le,_e){D(this,J,le,!1,_e)},je.prototype.writeFloatLE=function(J,le,_e){P(this,J,le,!0,_e)},je.prototype.writeFloatBE=function(J,le,_e){P(this,J,le,!1,_e)},je.prototype.writeDoubleLE=function(J,le,_e){Z(this,J,le,!0,_e)},je.prototype.writeDoubleBE=function(J,le,_e){Z(this,J,le,!1,_e)},je.prototype.fill=function(J,le,_e){if(le=le||0,_e=_e||this.length,Ge("number"==typeof(J="string"==typeof(J=J||0)?J.charCodeAt(0):J)&&!isNaN(J),"value is not a number"),Ge(le<=_e,"end < start"),_e!==le&&0!==this.length){Ge(0<=le&&le<this.length,"start out of bounds"),Ge(0<=_e&&_e<=this.length,"end out of bounds");for(var Me=le;Me<_e;Me++)this[Me]=J}},je.prototype.inspect=function(){for(var J=[],le=this.length,_e=0;_e<le;_e++)if(J[_e]=se(this[_e]),_e===lt.INSPECT_MAX_BYTES){J[_e+1]="...";break}return"<Buffer "+J.join(" ")+">"},je.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(je._useTypedArrays)return new je(this).buffer;for(var J=new Uint8Array(this.length),le=0,_e=J.length;le<_e;le+=1)J[le]=this[le];return J.buffer};var x=je.prototype;function W(J,le,_e){return"number"!=typeof J?_e:le<=(J=~~J)?le:0<=J||0<=(J+=le)?J:0}function ne(J){return(J=~~Math.ceil(+J))<0?0:J}function ue(J){return(Array.isArray||function(le){return"[object Array]"===Object.prototype.toString.call(le)})(J)}function se(J){return J<16?"0"+J.toString(16):J.toString(16)}function te(J){for(var le=[],_e=0;_e<J.length;_e++){var Me=J.charCodeAt(_e);if(Me<=127)le.push(J.charCodeAt(_e));else for(var Ce=_e,$e=(55296<=Me&&Me<=57343&&_e++,encodeURIComponent(J.slice(Ce,_e+1)).substr(1).split("%")),Se=0;Se<$e.length;Se++)le.push(parseInt($e[Se],16))}return le}function Re(J){return Y.toByteArray(J)}function be(J,le,_e,Me){for(var Ce=0;Ce<Me&&!(Ce+_e>=le.length||Ce>=J.length);Ce++)le[Ce+_e]=J[Ce];return Ce}function re(J){try{return decodeURIComponent(J)}catch(le){return String.fromCharCode(65533)}}function ve(J,le){Ge("number"==typeof J,"cannot write a non-number as a number"),Ge(0<=J,"specified a negative value for writing an unsigned value"),Ge(J<=le,"value is larger than maximum value for type"),Ge(Math.floor(J)===J,"value has a fractional component")}function Fe(J,le,_e){Ge("number"==typeof J,"cannot write a non-number as a number"),Ge(J<=le,"value larger than maximum allowed value"),Ge(_e<=J,"value smaller than minimum allowed value"),Ge(Math.floor(J)===J,"value has a fractional component")}function Ze(J,le,_e){Ge("number"==typeof J,"cannot write a non-number as a number"),Ge(J<=le,"value larger than maximum allowed value"),Ge(_e<=J,"value smaller than minimum allowed value")}function Ge(J,le){if(!J)throw new Error(le||"Failed assertion")}je._augment=function(J){return J._isBuffer=!0,J._get=J.get,J._set=J.set,J.get=x.get,J.set=x.set,J.write=x.write,J.toString=x.toString,J.toLocaleString=x.toString,J.toJSON=x.toJSON,J.copy=x.copy,J.slice=x.slice,J.readUInt8=x.readUInt8,J.readUInt16LE=x.readUInt16LE,J.readUInt16BE=x.readUInt16BE,J.readUInt32LE=x.readUInt32LE,J.readUInt32BE=x.readUInt32BE,J.readInt8=x.readInt8,J.readInt16LE=x.readInt16LE,J.readInt16BE=x.readInt16BE,J.readInt32LE=x.readInt32LE,J.readInt32BE=x.readInt32BE,J.readFloatLE=x.readFloatLE,J.readFloatBE=x.readFloatBE,J.readDoubleLE=x.readDoubleLE,J.readDoubleBE=x.readDoubleBE,J.writeUInt8=x.writeUInt8,J.writeUInt16LE=x.writeUInt16LE,J.writeUInt16BE=x.writeUInt16BE,J.writeUInt32LE=x.writeUInt32LE,J.writeUInt32BE=x.writeUInt32BE,J.writeInt8=x.writeInt8,J.writeInt16LE=x.writeInt16LE,J.writeInt16BE=x.writeInt16BE,J.writeInt32LE=x.writeInt32LE,J.writeInt32BE=x.writeInt32BE,J.writeFloatLE=x.writeFloatLE,J.writeFloatBE=x.writeFloatBE,J.writeDoubleLE=x.writeDoubleLE,J.writeDoubleBE=x.writeDoubleBE,J.fill=x.fill,J.inspect=x.inspect,J.toArrayBuffer=x.toArrayBuffer,J}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){je=Xe("buffer").Buffer;var B=new je(4);B.fill(0),et.exports={hash:function(w,C,R,M){for(var y=C(function(E,O){E.length%4!=0&&(E=je.concat([E,B],E.length+(4-E.length%4)));for(var D=[],P=O?E.readInt32BE:E.readInt32LE,Z=0;Z<E.length;Z+=4)D.push(P.call(E,Z));return D}(w=je.isBuffer(w)?w:new je(w),M),8*w.length),v=(C=M,new je(R)),b=C?v.writeInt32BE:v.writeInt32LE,S=0;S<y.length;S++)b.call(v,y[S],4*S,!0);return v}}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){je=Xe("buffer").Buffer;var Y=Xe("./sha"),B=Xe("./sha256"),w=Xe("./rng"),C={sha1:Y,sha256:B,md5:Xe("./md5")},R=64,M=new je(R);function y(E,O){var $=C[E=E||"sha1"],D=[];return $||v("algorithm:",E,"is not yet supported"),{update:function(P){return je.isBuffer(P)||(P=new je(P)),D.push(P),this},digest:function(P){var Z=je.concat(D);return Z=O?function(x,W,ne){je.isBuffer(W)||(W=new je(W)),je.isBuffer(ne)||(ne=new je(ne)),W.length>R?W=x(W):W.length<R&&(W=je.concat([W,M],R));for(var ue=new je(R),se=new je(R),te=0;te<R;te++)ue[te]=54^W[te],se[te]=92^W[te];return ne=x(je.concat([ue,ne])),x(je.concat([se,ne]))}($,O,Z):$(Z),D=null,P?Z.toString(P):Z}}}function v(){var E=[].slice.call(arguments).join(" ");throw new Error([E,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}M.fill(0),lt.createHash=function(E){return y(E)},lt.createHmac=y,lt.randomBytes=function(E,O){if(!O||!O.call)return new je(w(E));try{O.call(this,void 0,new je(w(E)))}catch($){O($)}};var b,S=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],T=function(E){lt[E]=function(){v("sorry,",E,"is not implemented yet")}};for(b in S)T(S[b])}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){var Y=Xe("./helpers");function B(b,S){b[S>>5]|=128<<S%32,b[14+(S+64>>>9<<4)]=S;for(var T=1732584193,E=-271733879,O=-1732584194,$=271733878,D=0;D<b.length;D+=16){var P=T,Z=E,x=O,W=$;T=C(T,E,O,$,b[D+0],7,-680876936),$=C($,T,E,O,b[D+1],12,-389564586),O=C(O,$,T,E,b[D+2],17,606105819),E=C(E,O,$,T,b[D+3],22,-1044525330),T=C(T,E,O,$,b[D+4],7,-176418897),$=C($,T,E,O,b[D+5],12,1200080426),O=C(O,$,T,E,b[D+6],17,-1473231341),E=C(E,O,$,T,b[D+7],22,-45705983),T=C(T,E,O,$,b[D+8],7,1770035416),$=C($,T,E,O,b[D+9],12,-1958414417),O=C(O,$,T,E,b[D+10],17,-42063),E=C(E,O,$,T,b[D+11],22,-1990404162),T=C(T,E,O,$,b[D+12],7,1804603682),$=C($,T,E,O,b[D+13],12,-40341101),O=C(O,$,T,E,b[D+14],17,-1502002290),T=R(T,E=C(E,O,$,T,b[D+15],22,1236535329),O,$,b[D+1],5,-165796510),$=R($,T,E,O,b[D+6],9,-1069501632),O=R(O,$,T,E,b[D+11],14,643717713),E=R(E,O,$,T,b[D+0],20,-373897302),T=R(T,E,O,$,b[D+5],5,-701558691),$=R($,T,E,O,b[D+10],9,38016083),O=R(O,$,T,E,b[D+15],14,-660478335),E=R(E,O,$,T,b[D+4],20,-405537848),T=R(T,E,O,$,b[D+9],5,568446438),$=R($,T,E,O,b[D+14],9,-1019803690),O=R(O,$,T,E,b[D+3],14,-187363961),E=R(E,O,$,T,b[D+8],20,1163531501),T=R(T,E,O,$,b[D+13],5,-1444681467),$=R($,T,E,O,b[D+2],9,-51403784),O=R(O,$,T,E,b[D+7],14,1735328473),T=M(T,E=R(E,O,$,T,b[D+12],20,-1926607734),O,$,b[D+5],4,-378558),$=M($,T,E,O,b[D+8],11,-2022574463),O=M(O,$,T,E,b[D+11],16,1839030562),E=M(E,O,$,T,b[D+14],23,-35309556),T=M(T,E,O,$,b[D+1],4,-1530992060),$=M($,T,E,O,b[D+4],11,1272893353),O=M(O,$,T,E,b[D+7],16,-155497632),E=M(E,O,$,T,b[D+10],23,-1094730640),T=M(T,E,O,$,b[D+13],4,681279174),$=M($,T,E,O,b[D+0],11,-358537222),O=M(O,$,T,E,b[D+3],16,-722521979),E=M(E,O,$,T,b[D+6],23,76029189),T=M(T,E,O,$,b[D+9],4,-640364487),$=M($,T,E,O,b[D+12],11,-421815835),O=M(O,$,T,E,b[D+15],16,530742520),T=y(T,E=M(E,O,$,T,b[D+2],23,-995338651),O,$,b[D+0],6,-198630844),$=y($,T,E,O,b[D+7],10,1126891415),O=y(O,$,T,E,b[D+14],15,-1416354905),E=y(E,O,$,T,b[D+5],21,-57434055),T=y(T,E,O,$,b[D+12],6,1700485571),$=y($,T,E,O,b[D+3],10,-1894986606),O=y(O,$,T,E,b[D+10],15,-1051523),E=y(E,O,$,T,b[D+1],21,-2054922799),T=y(T,E,O,$,b[D+8],6,1873313359),$=y($,T,E,O,b[D+15],10,-30611744),O=y(O,$,T,E,b[D+6],15,-1560198380),E=y(E,O,$,T,b[D+13],21,1309151649),T=y(T,E,O,$,b[D+4],6,-145523070),$=y($,T,E,O,b[D+11],10,-1120210379),O=y(O,$,T,E,b[D+2],15,718787259),E=y(E,O,$,T,b[D+9],21,-343485551),T=v(T,P),E=v(E,Z),O=v(O,x),$=v($,W)}return Array(T,E,O,$)}function w(b,S,T,E,O,$){return v((S=v(v(S,b),v(E,$)))<<O|S>>>32-O,T)}function C(b,S,T,E,O,$,D){return w(S&T|~S&E,b,S,O,$,D)}function R(b,S,T,E,O,$,D){return w(S&E|T&~E,b,S,O,$,D)}function M(b,S,T,E,O,$,D){return w(S^T^E,b,S,O,$,D)}function y(b,S,T,E,O,$,D){return w(T^(S|~E),b,S,O,$,D)}function v(b,S){var T=(65535&b)+(65535&S);return(b>>16)+(S>>16)+(T>>16)<<16|65535&T}et.exports=function(b){return Y.hash(b,B,16)}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){et.exports=function(B){for(var w,C=new Array(B),R=0;R<B;R++)0==(3&R)&&(w=4294967296*Math.random()),C[R]=w>>>((3&R)<<3)&255;return C}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){var Y=Xe("./helpers");function B(R,M){R[M>>5]|=128<<24-M%32,R[15+(M+64>>9<<4)]=M;for(var y,v,b,S=Array(80),T=1732584193,E=-271733879,O=-1732584194,$=271733878,D=-1009589776,P=0;P<R.length;P+=16){for(var Z=T,x=E,W=O,ne=$,ue=D,se=0;se<80;se++){S[se]=se<16?R[P+se]:C(S[se-3]^S[se-8]^S[se-14]^S[se-16],1);var te=w(w(C(T,5),(te=E,v=O,b=$,(y=se)<20?te&v|~te&b:!(y<40)&&y<60?te&v|te&b|v&b:te^v^b)),w(w(D,S[se]),(y=se)<20?1518500249:y<40?1859775393:y<60?-1894007588:-899497514));D=$,$=O,O=C(E,30),E=T,T=te}T=w(T,Z),E=w(E,x),O=w(O,W),$=w($,ne),D=w(D,ue)}return Array(T,E,O,$,D)}function w(R,M){var y=(65535&R)+(65535&M);return(R>>16)+(M>>16)+(y>>16)<<16|65535&y}function C(R,M){return R<<M|R>>>32-M}et.exports=function(R){return Y.hash(R,B,20,!0)}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){function Y(M,y){var v=(65535&M)+(65535&y);return(M>>16)+(y>>16)+(v>>16)<<16|65535&v}function B(M,y){var v,b=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),S=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),T=new Array(64);M[y>>5]|=128<<24-y%32,M[15+(y+64>>9<<4)]=y;for(var E,O,$=0;$<M.length;$+=16){for(var D=S[0],P=S[1],Z=S[2],x=S[3],W=S[4],ne=S[5],ue=S[6],se=S[7],te=0;te<64;te++)T[te]=te<16?M[te+$]:Y(Y(Y(C(O=T[te-2],17)^C(O,19)^R(O,10),T[te-7]),C(O=T[te-15],7)^C(O,18)^R(O,3)),T[te-16]),v=Y(Y(Y(Y(se,C(O=W,6)^C(O,11)^C(O,25)),W&ne^~W&ue),b[te]),T[te]),E=Y(C(E=D,2)^C(E,13)^C(E,22),D&P^D&Z^P&Z),se=ue,ue=ne,ne=W,W=Y(x,v),x=Z,Z=P,P=D,D=Y(v,E);S[0]=Y(D,S[0]),S[1]=Y(P,S[1]),S[2]=Y(Z,S[2]),S[3]=Y(x,S[3]),S[4]=Y(W,S[4]),S[5]=Y(ne,S[5]),S[6]=Y(ue,S[6]),S[7]=Y(se,S[7])}return S}var w=Xe("./helpers"),C=function(M,y){return M>>>y|M<<32-y},R=function(M,y){return M>>>y};et.exports=function(M){return w.hash(M,B,32,!0)}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){lt.read=function(Y,B,w,C,R){var M,y,v=8*R-C-1,b=(1<<v)-1,S=b>>1,T=-7,E=w?R-1:0,O=w?-1:1;for(R=Y[B+E],E+=O,M=R&(1<<-T)-1,R>>=-T,T+=v;0<T;M=256*M+Y[B+E],E+=O,T-=8);for(y=M&(1<<-T)-1,M>>=-T,T+=C;0<T;y=256*y+Y[B+E],E+=O,T-=8);if(0===M)M=1-S;else{if(M===b)return y?NaN:1/0*(R?-1:1);y+=Math.pow(2,C),M-=S}return(R?-1:1)*y*Math.pow(2,M-C)},lt.write=function(Y,B,w,C,R,M){var y,v,b=8*M-R-1,S=(1<<b)-1,T=S>>1,E=23===R?Math.pow(2,-24)-Math.pow(2,-77):0,O=C?0:M-1,$=C?1:-1;for(M=B<0||0===B&&1/B<0?1:0,B=Math.abs(B),isNaN(B)||B===1/0?(v=isNaN(B)?1:0,y=S):(y=Math.floor(Math.log(B)/Math.LN2),B*(C=Math.pow(2,-y))<1&&(y--,C*=2),2<=(B+=1<=y+T?E/C:E*Math.pow(2,1-T))*C&&(y++,C/=2),S<=y+T?(v=0,y=S):1<=y+T?(v=(B*C-1)*Math.pow(2,R),y+=T):(v=B*Math.pow(2,T-1)*Math.pow(2,R),y=0));8<=R;Y[w+O]=255&v,O+=$,v/=256,R-=8);for(y=y<<R|v,b+=R;0<b;Y[w+O]=255&y,O+=$,y/=256,b-=8);Y[w+O-$]|=128*M}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(Xe,et,lt){(function(ee,Ct,je,Q,Ee,pe,X,U,F){var Y,B,w;function C(){}(ee=et.exports={}).nextTick=(B="undefined"!=typeof window&&window.setImmediate,w="undefined"!=typeof window&&window.postMessage&&window.addEventListener,B?function(R){return window.setImmediate(R)}:w?(Y=[],window.addEventListener("message",function(R){var M=R.source;M!==window&&null!==M||"process-tick"!==R.data||(R.stopPropagation(),0<Y.length&&Y.shift()())},!0),function(R){Y.push(R),window.postMessage("process-tick","*")}):function(R){setTimeout(R,0)}),ee.title="browser",ee.browser=!0,ee.env={},ee.argv=[],ee.on=C,ee.addListener=C,ee.once=C,ee.off=C,ee.removeListener=C,ee.removeAllListeners=C,ee.emit=C,ee.binding=function(R){throw new Error("process.binding is not supported")},ee.cwd=function(){return"/"},ee.chdir=function(R){throw new Error("process.chdir is not supported")}}).call(this,Xe("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Xe("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},7830:Vt=>{var Xe="undefined"!=typeof ArrayBuffer,et="undefined"!=typeof Symbol;function lt(ee,Ct){var je,Q,Ee,pe,X;if(!ee)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof Ct)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(ee)||Xe&&ArrayBuffer.isView(ee)||"string"==typeof ee||"[object Arguments]"===ee.toString())for(Ee=0,pe=ee.length;Ee<pe;Ee++)Ct(ee[Ee],Ee);else if("function"!=typeof ee.forEach)if(et&&Symbol.iterator in ee&&"function"!=typeof ee.next&&(ee=ee[Symbol.iterator]()),"function"!=typeof ee.next)for(Q in ee)ee.hasOwnProperty(Q)&&Ct(ee[Q],Q);else for(je=ee,Ee=0;!0!==(X=je.next()).done;)Ct(X.value,Ee),Ee++;else ee.forEach(Ct)}lt.forEachWithNullKeys=function(ee,Ct){var je,Q,Ee,pe,X;if(!ee)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if("function"!=typeof Ct)throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(ee)||Xe&&ArrayBuffer.isView(ee)||"string"==typeof ee||"[object Arguments]"===ee.toString())for(Ee=0,pe=ee.length;Ee<pe;Ee++)Ct(ee[Ee],null);else if(ee instanceof Set)ee.forEach(function(U){Ct(U,null)});else if("function"!=typeof ee.forEach)if(et&&Symbol.iterator in ee&&"function"!=typeof ee.next&&(ee=ee[Symbol.iterator]()),"function"!=typeof ee.next)for(Q in ee)ee.hasOwnProperty(Q)&&Ct(ee[Q],Q);else for(je=ee,Ee=0;!0!==(X=je.next()).done;)Ct(X.value,null),Ee++;else ee.forEach(Ct)},Vt.exports=lt},6284:Vt=>{function Xe(et){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:et}),this.done=!1}Xe.prototype.next=function(){if(this.done)return{done:!0};var et=this._next();return et.done&&(this.done=!0),et},"undefined"!=typeof Symbol&&(Xe.prototype[Symbol.iterator]=function(){return this}),Xe.of=function(){var et=arguments,lt=et.length,ee=0;return new Xe(function(){return ee>=lt?{done:!0}:{done:!1,value:et[ee++]}})},Xe.empty=function(){var et=new Xe(null);return et.done=!0,et},Xe.is=function(et){return et instanceof Xe||"object"==typeof et&&null!==et&&"function"==typeof et.next},Vt.exports=Xe},7310:(Vt,Xe,et)=>{"use strict";var lt=et(1948);Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.isMobile=function(){return void 0!==ee.window.orientation},Xe.default=function(pe){if(!pe&&!(0,Ct.default)())return"Node";if((0,je.default)(pe))return"Electron";var X="undefined"!=typeof navigator?navigator:{},U=pe||X.userAgent||"";if(U.indexOf("Edge")>-1)return"Edge";var F=-1!==U.indexOf("MSIE "),Y=-1!==U.indexOf("Trident/");return F||Y?"IE":ee.window.chrome?"Chrome":ee.window.safari?"Safari":ee.window.mozInnerScreenX?"Firefox":"Unknown"};var ee=et(1151),Ct=lt(et(1602)),je=lt(et(2344))},1151:(Vt,Xe,et)=>{"use strict";var lt=et(1948);Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.console=Xe.process=Xe.document=Xe.global=Xe.window=Xe.self=void 0;var ee=lt(et(4321)),Ct={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,ee.default)(process))&&process};Xe.self=Ct.self||Ct.window||Ct.global,Xe.window=Ct.window||Ct.self||Ct.global,Xe.global=Ct.global||Ct.self||Ct.window,Xe.document=Ct.document||{},Xe.process=Ct.process||{};var U=console;Xe.console=U},4761:(Vt,Xe,et)=>{"use strict";var ee=et(1948),Ct=et(4321);Object.defineProperty(Xe,"CO",{enumerable:!0,get:function(){return je.global}}),Object.defineProperty(Xe,"qs",{enumerable:!0,get:function(){return Ee.default}});var je=et(1151),Ee=(U(et(1602)),U(et(7310)));ee(et(2344));function X(F){if("function"!=typeof WeakMap)return null;var Y=new WeakMap,B=new WeakMap;return(X=function(C){return C?B:Y})(F)}function U(F,Y){if(!Y&&F&&F.__esModule)return F;if(null===F||"object"!==Ct(F)&&"function"!=typeof F)return{default:F};var B=X(Y);if(B&&B.has(F))return B.get(F);var w={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in F)if("default"!==R&&Object.prototype.hasOwnProperty.call(F,R)){var M=C?Object.getOwnPropertyDescriptor(F,R):null;M&&(M.get||M.set)?Object.defineProperty(w,R,M):w[R]=F[R]}return w.default=F,B&&B.set(F,w),w}},1602:(Vt,Xe,et)=>{"use strict";var lt=et(1948);Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.default=je,Xe.isBrowserMainThread=function(){return je()&&"undefined"!=typeof document};var ee=lt(et(4321)),Ct=lt(et(2344));function je(){return!("object"===("undefined"==typeof process?"undefined":(0,ee.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,Ct.default)()}},2344:(Vt,Xe,et)=>{"use strict";var lt=et(1948);Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.default=function(je){if("undefined"!=typeof window&&"object"===(0,ee.default)(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===(0,ee.default)(process.versions)&&Boolean(process.versions.electron))return!0;var Q="object"===("undefined"==typeof navigator?"undefined":(0,ee.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,Ee=je||Q;return!!(Ee&&Ee.indexOf("Electron")>=0)};var ee=lt(et(4321))},6991:function(Vt,Xe,et){"use strict";var lt=this&&this.__createBinding||(Object.create?function(Ct,je,Q,Ee){void 0===Ee&&(Ee=Q),Object.defineProperty(Ct,Ee,{enumerable:!0,get:function(){return je[Q]}})}:function(Ct,je,Q,Ee){void 0===Ee&&(Ee=Q),Ct[Ee]=je[Q]}),ee=this&&this.__exportStar||function(Ct,je){for(var Q in Ct)"default"!==Q&&!Object.prototype.hasOwnProperty.call(je,Q)&&lt(je,Ct,Q)};Object.defineProperty(Xe,"__esModule",{value:!0}),ee(et(4180),Xe),ee(et(5103),Xe),ee(et(8965),Xe),ee(et(2595),Xe),ee(et(2417),Xe),ee(et(2451),Xe),ee(et(7735),Xe)},4180:(Vt,Xe)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.BlankNode=void 0,Xe.BlankNode=class{constructor(ee){this.termType="BlankNode",this.value=ee}equals(ee){return!!ee&&"BlankNode"===ee.termType&&ee.value===this.value}}},5103:(Vt,Xe,et)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.DataFactory=void 0;const lt=et(4180),ee=et(8965),Ct=et(2595),je=et(2417),Q=et(2451),Ee=et(7735);let pe=0;Xe.DataFactory=class{constructor(F){this.blankNodeCounter=0,this.blankNodePrefix=(F=F||{}).blankNodePrefix||`df_${pe++}_`}namedNode(F){return new je.NamedNode(F)}blankNode(F){return new lt.BlankNode(F||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(F,Y){return new Ct.Literal(F,Y)}variable(F){return new Ee.Variable(F)}defaultGraph(){return ee.DefaultGraph.INSTANCE}quad(F,Y,B,w){return new Q.Quad(F,Y,B,w||this.defaultGraph())}fromTerm(F){switch(F.termType){case"NamedNode":return this.namedNode(F.value);case"BlankNode":return this.blankNode(F.value);case"Literal":return F.language?this.literal(F.value,F.language):F.datatype.equals(Ct.Literal.XSD_STRING)?this.literal(F.value):this.literal(F.value,this.fromTerm(F.datatype));case"Variable":return this.variable(F.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(F.subject),this.fromTerm(F.predicate),this.fromTerm(F.object),this.fromTerm(F.graph))}}fromQuad(F){return this.fromTerm(F)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},8965:(Vt,Xe)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.DefaultGraph=void 0;class et{constructor(){this.termType="DefaultGraph",this.value=""}equals(ee){return!!ee&&"DefaultGraph"===ee.termType}}Xe.DefaultGraph=et,et.INSTANCE=new et},2595:(Vt,Xe,et)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Literal=void 0;const lt=et(2417);class ee{constructor(je,Q){this.termType="Literal",this.value=je,"string"==typeof Q?(this.language=Q,this.datatype=ee.RDF_LANGUAGE_STRING):Q?(this.language="",this.datatype=Q):(this.language="",this.datatype=ee.XSD_STRING)}equals(je){return!!je&&"Literal"===je.termType&&je.value===this.value&&je.language===this.language&&je.datatype.equals(this.datatype)}}Xe.Literal=ee,ee.RDF_LANGUAGE_STRING=new lt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),ee.XSD_STRING=new lt.NamedNode("http://www.w3.org/2001/XMLSchema#string")},2417:(Vt,Xe)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.NamedNode=void 0,Xe.NamedNode=class{constructor(ee){this.termType="NamedNode",this.value=ee}equals(ee){return!!ee&&"NamedNode"===ee.termType&&ee.value===this.value}}},2451:(Vt,Xe)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Quad=void 0,Xe.Quad=class{constructor(ee,Ct,je,Q){this.termType="Quad",this.value="",this.subject=ee,this.predicate=Ct,this.object=je,this.graph=Q}equals(ee){return!!ee&&("Quad"===ee.termType||!ee.termType)&&this.subject.equals(ee.subject)&&this.predicate.equals(ee.predicate)&&this.object.equals(ee.object)&&this.graph.equals(ee.graph)}}},7735:(Vt,Xe)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Variable=void 0,Xe.Variable=class{constructor(ee){this.termType="Variable",this.value=ee}equals(ee){return!!ee&&"Variable"===ee.termType&&ee.value===this.value}}},1609:function(Vt,Xe,et){"use strict";var lt=this&&this.__createBinding||(Object.create?function(w,C,R,M){void 0===M&&(M=R),Object.defineProperty(w,M,{enumerable:!0,get:function(){return C[R]}})}:function(w,C,R,M){void 0===M&&(M=R),w[M]=C[R]}),ee=this&&this.__exportStar||function(w,C){for(var R in w)"default"!==R&&!Object.prototype.hasOwnProperty.call(C,R)&&lt(C,w,R)};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.getSupportedJavaScriptPrimitives=Xe.getSupportedRdfDatatypes=Xe.getTermRaw=Xe.toRdf=Xe.fromRdf=void 0;const Ct=et(6991),je=et(9938),Q=et(6060);ee(et(9938),Xe),ee(et(8871),Xe),ee(et(6060),Xe);const Ee=new Ct.DataFactory,pe=new Q.Translator;function X(w,C){return pe.fromRdf(w,C)}pe.registerHandler(new je.TypeHandlerString,je.TypeHandlerString.TYPES.map(w=>Ee.namedNode(w)),["string"]),pe.registerHandler(new je.TypeHandlerBoolean,[je.TypeHandlerBoolean.TYPE].map(w=>Ee.namedNode(w)),["boolean"]),pe.registerHandler(new je.TypeHandlerNumberDouble,je.TypeHandlerNumberDouble.TYPES.map(w=>Ee.namedNode(w)),["number"]),pe.registerHandler(new je.TypeHandlerNumberInteger,je.TypeHandlerNumberInteger.TYPES.map(w=>Ee.namedNode(w)),["number"]),pe.registerHandler(new je.TypeHandlerDate,je.TypeHandlerDate.TYPES.map(w=>Ee.namedNode(w)),["object"]),Xe.fromRdf=X,Xe.toRdf=function(w,C){return C&&"namedNode"in C&&(C={dataFactory:C}),(C=C||{})&&!C.dataFactory&&(C.dataFactory=Ee),pe.toRdf(w,C)},Xe.getTermRaw=function(w,C){return"Literal"===w.termType?X(w,C):w.value},Xe.getSupportedRdfDatatypes=function(){return pe.getSupportedRdfDatatypes()},Xe.getSupportedJavaScriptPrimitives=function(){return pe.getSupportedJavaScriptPrimitives()}},8871:(Vt,Xe)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0})},6060:(Vt,Xe)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Translator=void 0,Xe.Translator=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(ee){throw new Error(`Invalid RDF ${ee.datatype.value} value: '${ee.value}'`)}registerHandler(ee,Ct,je){for(const Q of Ct)this.supportedRdfDatatypes.push(Q),this.fromRdfHandlers[Q.value]=ee;for(const Q of je){let Ee=this.toRdfHandlers[Q];Ee||(this.toRdfHandlers[Q]=Ee=[]),Ee.push(ee)}}fromRdf(ee,Ct){const je=this.fromRdfHandlers[ee.datatype.value];return je?je.fromRdf(ee,Ct):ee.value}toRdf(ee,Ct){const je=this.toRdfHandlers[typeof ee];if(je)for(const Q of je){const Ee=Q.toRdf(ee,Ct);if(Ee)return Ee}throw new Error(`Invalid JavaScript value: '${ee}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},727:(Vt,Xe,et)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.TypeHandlerBoolean=void 0;const lt=et(6060);class ee{fromRdf(je,Q){switch(je.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return Q&&lt.Translator.incorrectRdfDataType(je),!1}toRdf(je,{datatype:Q,dataFactory:Ee}){return Ee.literal(je?"true":"false",Q||Ee.namedNode(ee.TYPE))}}Xe.TypeHandlerBoolean=ee,ee.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},2525:(Vt,Xe,et)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.TypeHandlerDate=void 0;const lt=et(6060);class ee{fromRdf(je,Q){switch(Q&&!je.value.match(ee.VALIDATORS[je.datatype.value.substr(33,je.datatype.value.length)])&&lt.Translator.incorrectRdfDataType(je),je.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(je.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const Ee=je.value.split("-");return new Date(0,parseInt(Ee[0],10)-1,parseInt(Ee[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(je.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(je.value+"-01");default:return new Date(je.value)}}toRdf(je,{datatype:Q,dataFactory:Ee}){if(Q=Q||Ee.namedNode(ee.TYPES[0]),!(je instanceof Date))return null;const pe=je;let X;switch(Q.value){case"http://www.w3.org/2001/XMLSchema#gDay":X=String(pe.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":X=pe.getUTCMonth()+1+"-"+pe.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":X=String(pe.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":X=pe.getUTCFullYear()+"-"+(pe.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":X=pe.toISOString().replace(/T.*$/,"");break;default:X=pe.toISOString()}return Ee.literal(X,Q)}}Xe.TypeHandlerDate=ee,ee.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],ee.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},8554:(Vt,Xe,et)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.TypeHandlerNumberDouble=void 0;const lt=et(6060);class ee{fromRdf(je,Q){const Ee=parseFloat(je.value);return Q&&isNaN(Ee)&&lt.Translator.incorrectRdfDataType(je),Ee}toRdf(je,{datatype:Q,dataFactory:Ee}){return Q=Q||Ee.namedNode(ee.TYPES[0]),isNaN(je)?Ee.literal("NaN",Q):isFinite(je)?je%1==0?null:Ee.literal(je.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Q):Ee.literal(je>0?"INF":"-INF",Q)}}Xe.TypeHandlerNumberDouble=ee,ee.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},7750:(Vt,Xe,et)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.TypeHandlerNumberInteger=void 0;const lt=et(6060);class ee{fromRdf(je,Q){const Ee=parseInt(je.value,10);return Q&&(isNaN(Ee)||je.value.indexOf(".")>=0)&&lt.Translator.incorrectRdfDataType(je),Ee}toRdf(je,{datatype:Q,dataFactory:Ee}){return Ee.literal(String(je),Q||Ee.namedNode(je<=ee.MAX_INT&&je>=ee.MIN_INT?ee.TYPES[0]:ee.TYPES[1]))}}Xe.TypeHandlerNumberInteger=ee,ee.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],ee.MAX_INT=2147483647,ee.MIN_INT=-2147483648},4608:(Vt,Xe)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.TypeHandlerString=void 0;class et{fromRdf(ee){return ee.value}toRdf(ee,{datatype:Ct,dataFactory:je}){return je.literal(ee,Ct)}}Xe.TypeHandlerString=et,et.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},9938:function(Vt,Xe,et){"use strict";var lt=this&&this.__createBinding||(Object.create?function(Ct,je,Q,Ee){void 0===Ee&&(Ee=Q),Object.defineProperty(Ct,Ee,{enumerable:!0,get:function(){return je[Q]}})}:function(Ct,je,Q,Ee){void 0===Ee&&(Ee=Q),Ct[Ee]=je[Q]}),ee=this&&this.__exportStar||function(Ct,je){for(var Q in Ct)"default"!==Q&&!Object.prototype.hasOwnProperty.call(je,Q)&&lt(je,Ct,Q)};Object.defineProperty(Xe,"__esModule",{value:!0}),ee(et(727),Xe),ee(et(2525),Xe),ee(et(8554),Xe),ee(et(7750),Xe),ee(et(4608),Xe)},2829:(Vt,Xe,et)=>{"use strict";var lt={};et.r(lt),et.d(lt,{decode:()=>Ume,encode:()=>zme});var ee={};et.r(ee),et.d(ee,{decode:()=>qme,encode:()=>Yme});var Ct={};et.r(Ct),et.d(Ct,{decode:()=>Xme,encode:()=>Kme});var je={};function Q(n){return"function"==typeof n}et.r(je),et.d(je,{decode:()=>Qme,encode:()=>Zme});let Ee=!1;const pe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else Ee&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Ee=n},get useDeprecatedSynchronousErrorHandling(){return Ee}};function X(n){setTimeout(()=>{throw n},0)}const U={closed:!0,next(n){},error(n){if(pe.useDeprecatedSynchronousErrorHandling)throw n;X(n)},complete(){}},F=Array.isArray||(n=>n&&"number"==typeof n.length);function Y(n){return null!==n&&"object"==typeof n}const w=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class C{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof C)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(Q(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof w?R(o.errors):[o]}}if(F(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(Y(l))try{l.unsubscribe()}catch(c){e=e||[],c instanceof w?e=e.concat(R(c.errors)):e.push(c)}}}if(e)throw new w(e)}add(e){let t=e;if(!e)return C.EMPTY;switch(typeof e){case"function":t=new C(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof C)){const s=t;t=new C,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof C){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function R(n){return n.reduce((e,t)=>e.concat(t instanceof w?t.errors:t),[])}C.EMPTY=((n=new C).closed=!0,n);const M="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class v extends C{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=U;break;case 1:if(!e){this.destination=U;break}if("object"==typeof e){e instanceof v?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new b(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new b(this,e,t,i)}}[M](){return this}static create(e,t,i){const r=new v(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class b extends v{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;Q(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==U&&(o=Object.create(t),Q(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;pe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=pe;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):X(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;X(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);pe.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),pe.useDeprecatedSynchronousErrorHandling)throw i;X(i)}}__tryOrSetError(e,t,i){if(!pe.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return pe.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(X(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const E="function"==typeof Symbol&&Symbol.observable||"@@observable";function O(n){return n}function $(...n){return D(n)}function D(n){return 0===n.length?O:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let P=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof v)return n;if(n[M])return n[M]()}return n||e||t?new v(n,e,t):new v(U)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||pe.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),pe.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){pe.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof v?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=Z(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[E](){return this}pipe(...t){return 0===t.length?this:D(t)(this)}toPromise(t){return new(t=Z(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Z(n){if(n||(n=pe.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const W=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class ne extends C{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class ue extends v{constructor(e){super(e),this.destination=e}}let se=(()=>{class n extends P{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[M](){return new ue(this)}lift(t){const i=new te(this,this);return i.operator=t,i}next(t){if(this.closed)throw new W;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new W;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new W;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new W;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new W;return this.hasError?(t.error(this.thrownError),C.EMPTY):this.isStopped?(t.complete(),C.EMPTY):(this.observers.push(t),new ne(this,t))}asObservable(){const t=new P;return t.source=this,t}}return n.create=(e,t)=>new te(e,t),n})();class te extends se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):C.EMPTY}}function Re(n){return n&&"function"==typeof n.schedule}function be(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new re(n,e))}}class re{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new ve(e,this.project,this.thisArg))}}class ve extends v{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Fe=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},J="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Ce=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function $e(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Se=n=>{if(n&&"function"==typeof n[E])return(n=>e=>{const t=n[E]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Ce(n))return Fe(n);if($e(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,X),e))(n);if(n&&"function"==typeof n[J])return(n=>e=>{const t=n[J]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${Y(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Ve(n,e){return new P(t=>{const i=new C;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function Ye(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[E]}(n))return function(n,e){return new P(t=>{const i=new C;return i.add(e.schedule(()=>{const r=n[E]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if($e(n))return function(n,e){return new P(t=>{const i=new C;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(Ce(n))return Ve(n,e);if(function(n){return n&&"function"==typeof n[J]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new P(t=>{const i=new C;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[J](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof P?n:new P(Se(n))}class _t extends v{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ae extends v{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function L(n,e){if(e.closed)return;if(n instanceof P)return n.subscribe(e);let t;try{t=Se(n)(e)}catch(i){e.error(i)}return t}function H(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(H((r,s)=>Ye(n(r,s)).pipe(be((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new Le(n,t)))}class Le{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new it(e,this.project,this.concurrent))}}class it extends Ae{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new _t(this),i=this.destination;i.add(t);const r=L(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function kt(n=Number.POSITIVE_INFINITY){return H(O,n)}function In(n,e){return e?Ve(n,e):new P(Fe(n))}function Pn(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return Re(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof P?n[0]:kt(e)(In(n,t))}function Yn(){return function(e){return e.lift(new Mi(e))}}class Mi{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new xi(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class xi extends v{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Xr extends P{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new C,e.add(this.source.subscribe(new fs(this.getSubject(),this))),e.closed&&(this._connection=null,e=C.EMPTY)),e}refCount(){return Yn()(this)}}const Ls=(()=>{const n=Xr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class fs extends ue{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function xa(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new kl(r,e));const s=Object.create(i,Ls);return s.source=i,s.subjectFactory=r,s}}class kl{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function Sa(){return new se}function ws(){return n=>Yn()(xa(Sa)(n))}function en(n){for(let e in n)if(n[e]===en)return e;throw Error("Could not find renamed property on target object.")}function nl(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ot(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ot).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ut(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ft=en({__forward_ref__:en});function ye(n){return n.__forward_ref__=ye,n.toString=function(){return ot(this())},n}function Te(n){return We(n)?n():n}function We(n){return"function"==typeof n&&n.hasOwnProperty(ft)&&n.__forward_ref__===ye}class rt extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function Ot(n){return"string"==typeof n?n:null==n?"":String(n)}function Qt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ot(n)}function bn(n,e){const t=e?` in ${e}`:"";throw new rt("201",`No provider for ${Qt(n)} found${t}`)}function ie(n,e){null==n&&function(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function tt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function vn(n){return Es(n,fo)||Es(n,Vs)}function Es(n,e){return n.hasOwnProperty(e)?n[e]:null}function Fl(n){return n&&(n.hasOwnProperty(Br)||n.hasOwnProperty(Ac))?n[Br]:null}const fo=en({\u0275prov:en}),Br=en({\u0275inj:en}),Vs=en({ngInjectableDef:en}),Ac=en({ngInjectorDef:en});var xn=(()=>((xn=xn||{})[xn.Default=0]="Default",xn[xn.Host=1]="Host",xn[xn.Self=2]="Self",xn[xn.SkipSelf=4]="SkipSelf",xn[xn.Optional=8]="Optional",xn))();let po;function Ta(n){const e=po;return po=n,e}function Ed(n,e,t){const i=vn(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&xn.Optional?null:void 0!==e?e:void bn(ot(n),"Injector")}function Pe(n){return{toString:n}.toString()}var Je=(()=>((Je=Je||{})[Je.OnPush=0]="OnPush",Je[Je.Default=1]="Default",Je))(),Xt=(()=>((Xt=Xt||{})[Xt.Emulated=0]="Emulated",Xt[Xt.None=2]="None",Xt[Xt.ShadowDom=3]="ShadowDom",Xt))();const ui="undefined"!=typeof globalThis&&globalThis,Vr="undefined"!=typeof window&&window,Jr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xs="undefined"!=typeof global&&global,Zn=ui||xs||Vr||Jr,xd={},er=[],fp=en({\u0275cmp:en}),n_=en({\u0275dir:en}),Oh=en({\u0275pipe:en}),iv=en({\u0275mod:en}),AC=en({\u0275loc:en}),Bl=en({\u0275fac:en}),Rh=en({__NG_ELEMENT_ID__:en});let MC=0;function rn(n){return Pe(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Je.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||er,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Xt.Emulated,id:"c",styles:n.styles||er,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=MC++,i.inputs=av(n.inputs,t),i.outputs=av(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(rv):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(sv):null,i})}function rv(n){return Ui(n)||function(n){return n[n_]||null}(n)}function sv(n){return function(n){return n[Oh]||null}(n)}const ov={};function tn(n){return Pe(()=>{const e={type:n.type,bootstrap:n.bootstrap||er,declarations:n.declarations||er,imports:n.imports||er,exports:n.exports||er,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ov[n.id]=n.type),e})}function av(n,e){if(null==n)return xd;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const Pt=rn;function js(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ui(n){return n[fp]||null}function Po(n,e){const t=n[iv]||null;if(!t&&!0===e)throw new Error(`Type ${ot(n)} does not have '\u0275mod' property.`);return t}function Jo(n){return Array.isArray(n)&&"object"==typeof n[1]}function ea(n){return Array.isArray(n)&&!0===n[1]}function s_(n){return 0!=(8&n.flags)}function Ad(n){return 2==(2&n.flags)}function Md(n){return 1==(1&n.flags)}function Da(n){return null!==n.template}function lv(n){return 0!=(512&n[2])}function Ic(n,e){return n.hasOwnProperty(Bl)?n[Bl]:null}class c_{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Fi(){return dv}function dv(n){return n.type.prototype.ngOnChanges&&(n.setInput=FC),kC}function kC(){const n=ct(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===xd)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function FC(n,e,t,i){const r=ct(n)||function(n,e){return n[Bh]=e}(n,{previous:xd,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new c_(l&&l.currentValue,e,o===xd),n[i]=e}Fi.ngInherit=!0;const Bh="__ngSimpleChanges__";function ct(n){return n[Bh]||null}let Yi;function dr(n){return!!n.listen}const Su={createRenderer:(n,e)=>void 0!==Yi?Yi:"undefined"!=typeof document?document:void 0};function Sr(n){for(;Array.isArray(n);)n=n[0];return n}function Vh(n,e){return Sr(e[n])}function eo(n,e){return Sr(e[n.index])}function h_(n,e){return n.data[e]}function Dd(n,e){return n[e]}function zs(n,e){const t=e[n];return Jo(t)?t:t[0]}function Ul(n){return 4==(4&n[2])}function Id(n){return 128==(128&n[2])}function Oa(n,e){return null==e?null:n[e]}function f_(n){n[18]=0}function mp(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Ln={lFrame:Tu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fv(){return Ln.bindingsEnabled}function jt(){return Ln.lFrame.lView}function Si(){return Ln.lFrame.tView}function _r(n){return Ln.lFrame.contextLView=n,n[8]}function as(){let n=p_();for(;null!==n&&64===n.type;)n=n.parent;return n}function p_(){return Ln.lFrame.currentTNode}function sl(n,e){const t=Ln.lFrame;t.currentTNode=n,t.isParent=e}function zr(){return Ln.lFrame.isParent}function ps(){Ln.lFrame.isParent=!1}function zh(){return Ln.isInCheckNoChangesMode}function yp(n){Ln.isInCheckNoChangesMode=n}function Cs(){const n=Ln.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ra(){return Ln.lFrame.bindingIndex++}function Fo(n){const e=Ln.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Od(n,e){const t=Ln.lFrame;t.bindingIndex=t.bindingRootIndex=n,g_(e)}function g_(n){Ln.lFrame.currentDirectiveIndex=n}function m_(n){const e=Ln.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function pv(){return Ln.lFrame.currentQueryIndex}function __(n){Ln.lFrame.currentQueryIndex=n}function vp(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Rd(n,e,t){if(t&xn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&xn.Host||(r=vp(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ln.lFrame=Ie();return i.currentTNode=e,i.lView=n,!0}function $h(n){const e=Ie(),t=n[1];Ln.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ie(){const n=Ln.lFrame,e=null===n?null:n.child;return null===e?Tu(n):e}function Tu(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Wh(){const n=Ln.lFrame;return Ln.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Lo=Wh;function fi(){const n=Wh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function to(){return Ln.lFrame.selectedIndex}function _o(n){Ln.lFrame.selectedIndex=n}function Pr(){const n=Ln.lFrame;return h_(n.tView,n.selectedIndex)}function wp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Ep(n,e,t){ol(n,e,3,t)}function xp(n,e,t,i){(3&n[2])===t&&ol(n,e,t,i)}function y_(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function ol(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(YC(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function YC(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class qh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Sp(n,e,t){const i=dr(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];v_(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function _v(n){return 3===n||4===n||6===n}function v_(n){return 64===n.charCodeAt(0)}function Yh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||w_(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function w_(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function yv(n){return-1!==n}function Nd(n){return 32767&n}function al(n,e){let t=function(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Pd=!0;function Cp(n){const e=Pd;return Pd=n,e}let x_=0;function Hs(n,e){const t=Tp(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,S_(i.data,n),S_(e,null),S_(i.blueprint,null));const r=Xh(n,e),s=n.injectorIndex;if(yv(r)){const o=Nd(r),a=al(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function S_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Tp(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Xh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Rc(n,e,t){!function(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Rh)&&(i=t[Rh]),null==i&&(i=t[Rh]=x_++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function C_(n,e,t){if(t&xn.Optional)return n;bn(e,"NodeInjector")}function vv(n,e,t,i){if(t&xn.Optional&&void 0===i&&(i=null),0==(t&(xn.Self|xn.Host))){const r=n[9],s=Ta(void 0);try{return r?r.get(e,i,t&xn.Optional):Ed(e,i,t&xn.Optional)}finally{Ta(s)}}return C_(i,e,t)}function Kh(n,e,t,i=xn.Default,r){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Rh)?n[Rh]:void 0;return"number"==typeof e?e>=0?255&e:Ev:e}(t);if("function"==typeof s){if(!Rd(e,n,i))return i&xn.Host?C_(r,t,i):vv(e,t,i,r);try{const o=s(i);if(null!=o||i&xn.Optional)return o;bn(t)}finally{Lo()}}else if("number"==typeof s){let o=null,a=Tp(n,e),l=-1,c=i&xn.Host?e[16][6]:null;for((-1===a||i&xn.SkipSelf)&&(l=-1===a?Xh(n,e):e[a+8],-1!==l&&Qh(i,!1)?(o=e[1],a=Nd(l),e=al(l,e)):a=-1);-1!==a;){const u=e[1];if(Ap(s,a,u.data)){const h=Ts(a,e,t,o,i,c);if(h!==wv)return h}l=e[a+8],-1!==l&&Qh(i,e[1].data[a+8]===c)&&Ap(s,a,e)?(o=u,a=Nd(l),e=al(l,e)):a=-1}}}return vv(e,t,i,r)}const wv={};function Ev(){return new na(as(),jt())}function Ts(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=kd(a,o,t,null==i?Ad(a)&&Pd:i!=o&&0!=(3&a.type),r&xn.Host&&s===a);return null!==u?Fd(e,o,u,a):wv}function kd(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,f=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<f;g++){const m=o[g];if(g<l&&t===m||g>=l&&m.type===t)return g}if(r){const g=o[l];if(g&&Da(g)&&g.type===t)return l}return null}function Fd(n,e,t,i){let r=n[t];const s=e.data;if(function(n){return n instanceof qh}(r)){const o=r;o.resolving&&function(n,e){throw new rt("200",`Circular dependency in DI detected for ${n}`)}(Qt(s[t]));const a=Cp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ta(o.injectImpl):null;Rd(n,i,xn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=dv(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Ta(l),Cp(a),o.resolving=!1,Lo()}}return r}function Ap(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Qh(n,e){return!(n&xn.Self||n&xn.Host&&e)}class na{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Kh(this._tNode,this._lView,e,void 0,t)}}function zi(n){return Pe(()=>{const e=n.prototype.constructor,t=e[Bl]||As(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Bl]||As(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function As(n){return We(n)?()=>{const e=As(Te(n));return e&&e()}:Ic(n)}function yo(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(_v(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(as(),n)}const Bd="__parameters__";function ka(n,e,t){return Pe(()=>{const i=function(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(Bd)?l[Bd]:Object.defineProperty(l,Bd,{value:[]})[Bd];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Ht{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=tt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Du=Function;function ia(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),ia(i,e)):e!==n&&e.push(i)}return e}function ra(n,e){n.forEach(t=>Array.isArray(t)?ra(t,e):e(t))}function Jh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pc(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Bo(n,e,t){let i=Ms(n,e);return i>=0?n[1|i]=t:(i=~i,function(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function O_(n,e){const t=Ms(n,e);if(t>=0)return n[1|t]}function Ms(n,e){return function(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Ru={},Rp="__NG_DI_FLAG__",Fc="ngTempTokenPath",Lc=/\n/gm,ul="__source",Np=en({provide:String,useValue:en});let Nu;function Ud(n){const e=Nu;return Nu=n,e}function cT(n,e=xn.Default){if(void 0===Nu)throw new Error("inject() must be called from an injection context");return null===Nu?Ed(n,void 0,e):Nu.get(n,e&xn.Optional?null:void 0,e)}function ke(n,e=xn.Default){return(po||cT)(Te(n),e)}const Bc=ke;function Pu(n){const e=[];for(let t=0;t<n.length;t++){const i=Te(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=xn.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Mv(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(ke(r,s))}else e.push(ke(i))}return e}function zd(n,e){return n[Rp]=e,n.prototype[Rp]=e,n}function Mv(n){return n[Rp]}function no(n,e,t,i){const r=n[Fc];throw e[ul]&&r.unshift(e[ul]),n.message=function(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=ot(e);if(Array.isArray(e))r=e.map(ot).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ot(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Lc,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Fc]=null,n}const Hd=zd(ka("Inject",n=>({token:n})),-1),ts=zd(ka("Optional"),8),dl=zd(ka("SkipSelf"),4);let $d;function Fu(n){var e;return(null===(e=function(){if(void 0===$d&&($d=null,Zn.trustedTypes))try{$d=Zn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return $d}())||void 0===e?void 0:e.createHTML(n))||n}class ql{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class L_ extends ql{getTypeName(){return"HTML"}}class B_ extends ql{getTypeName(){return"Style"}}class jp extends ql{getTypeName(){return"Script"}}class Wd extends ql{getTypeName(){return"URL"}}class kn extends ql{getTypeName(){return"ResourceURL"}}function Gs(n){return n instanceof ql?n.changingThisBreaksApplicationSecurity:n}function sa(n,e){const t=jc(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function jc(n){return n instanceof ql&&n.getTypeName()||null}class jv{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Fu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class pT{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Fu(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Fu(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const gT=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mT=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function jo(n){return(n=String(n)).match(gT)||n.match(mT)?n:"unsafe:"+n}function Ws(n){return(n=String(n)).split(",").map(e=>jo(e.trim())).join(", ")}function oa(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function tf(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const Up=oa("area,br,col,hr,img,wbr"),zv=oa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Hv=oa("rp,rt"),j_=tf(Up,tf(zv,oa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tf(Hv,oa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tf(Hv,zv)),U_=oa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),z_=oa("srcset"),H_=tf(U_,z_,oa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vT=oa("script,style,template");class G_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!j_.hasOwnProperty(t))return this.sanitizedSomething=!0,!vT.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!H_.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;U_[a]&&(l=jo(l)),z_[a]&&(l=Ws(l)),this.buf.push(" ",o,'="',Hp(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();j_.hasOwnProperty(t)&&!Up.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Hp(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Gv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nf=/([^\#-~ |!])/g;function Hp(n){return n.replace(/&/g,"&amp;").replace(Gv,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(nf,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rf;function $_(n,e){let t=null;try{rf=rf||function(n){const e=new pT(n);return function(){try{return!!(new window.DOMParser).parseFromString(Fu(""),"text/html")}catch(n){return!1}}()?new jv(e):e}(n);let i=e?String(e):"";t=rf.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=rf.getInertBodyElement(i)}while(i!==s);return Fu((new G_).sanitizeChildren(qd(t)||t))}finally{if(t){const i=qd(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function qd(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var si=(()=>((si=si||{})[si.NONE=0]="NONE",si[si.HTML=1]="HTML",si[si.STYLE=2]="STYLE",si[si.SCRIPT=3]="SCRIPT",si[si.URL=4]="URL",si[si.RESOURCE_URL=5]="RESOURCE_URL",si))();function sf(n){const e=function(){const n=jt();return n&&n[12]}();return e?e.sanitize(si.URL,n)||"":sa(n,"URL")?Gs(n):jo(Ot(n))}const Y_="__ngContext__";function Ds(n,e){n[Y_]=e}function X_(n){const e=function(n){return n[Y_]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Gp(n){return n.ngOriginalError}function NT(n,...e){n.error(...e)}class la{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=this._findContext(e),r=function(n){return n&&n.ngErrorLogger||NT}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(Gp(e)):null}_findOriginalError(e){let t=e&&Gp(e);for(;t&&Gp(t);)t=Gp(t);return t||null}}const tw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zn))();function fl(n){return n instanceof Function?n():n}var Uo=(()=>((Uo=Uo||{})[Uo.Important=1]="Important",Uo[Uo.DashCase=2]="DashCase",Uo))();function ey(n,e){return undefined(n,e)}function lf(n){const e=n[3];return ea(e)?e[3]:e}function Xd(n){return ow(n[13])}function ny(n){return ow(n[4])}function ow(n){for(;null!==n&&!ea(n);)n=n[4];return n}function Kd(n,e,t,i,r){if(null!=i){let s,o=!1;ea(i)?s=i:Jo(i)&&(o=!0,i=i[0]);const a=Sr(i);0===n&&null!==t?null==r?dw(e,t,a):pl(e,t,a,r||null,!0):1===n&&null!==t?pl(e,t,a,r||null,!0):2===n?function(n,e,t){const i=qp(n,e);i&&function(n,e,t,i){dr(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,i,r){const s=t[7];s!==Sr(t)&&Kd(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];Qd(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function ry(n,e,t){return dr(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function lw(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,mp(r,-1)),t.splice(i,1)}function sy(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&lw(r,i),e>0&&(n[t-1][4]=i[4]);const s=Hl(n,10+e);!function(n,e){Qd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function oy(n,e){if(!(256&e[2])){const t=e[11];dr(t)&&t.destroyNode&&Qd(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return Wp(n[1],n);for(;e;){let t=null;if(Jo(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Jo(e)&&Wp(e[1],e),e=e[3];null===e&&(e=n),Jo(e)&&Wp(e[1],e),t=e&&e[4]}e=t}}(e)}}function Wp(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof qh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Sr(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&dr(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&ea(e[3])){t!==e[3]&&lw(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function cw(n,e,t){return function(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Xt.None||r===Xt.Emulated)return null}return eo(i,t)}(n,e.parent,t)}function pl(n,e,t,i,r){dr(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function dw(n,e,t){dr(n)?n.appendChild(e,t):e.appendChild(t)}function hw(n,e,t,i,r){null!==i?pl(n,e,t,i,r):dw(n,e,t)}function qp(n,e){return dr(n)?n.parentNode(e):e.parentNode}function fw(n,e,t){return gw(n,e,t)}let gw=function(n,e,t){return 40&n.type?eo(n,t):null};function Yp(n,e,t,i){const r=cw(n,i,e),s=e[11],a=fw(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)hw(s,r,t[l],a,!1);else hw(s,r,t,a,!1)}function Bu(n,e){if(null!==e){const t=e.type;if(3&t)return eo(e,n);if(4&t)return Xp(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Bu(n,i);{const r=n[e.index];return ea(r)?Xp(-1,r):Sr(r)}}if(32&t)return ey(e,n)()||Sr(n[e.index]);{const i=_w(n,e);return null!==i?Array.isArray(i)?i[0]:Bu(lf(n[16]),i):Bu(n,e.next)}}return null}function _w(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Xp(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Bu(i,r)}return e[7]}function cf(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Ds(Sr(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)cf(n,e,t.child,i,r,s,!1),Kd(e,n,r,a,s);else if(32&l){const c=ey(t,i);let u;for(;u=c();)Kd(e,n,r,u,s);Kd(e,n,r,a,s)}else 16&l?cy(n,e,i,t,r,s):Kd(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Qd(n,e,t,i,r,s){cf(t,i,n.firstChild,e,r,s,!1)}function cy(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Kd(e,n,r,l[c],s);else cf(n,e,l,o[3],r,s,!0)}function vw(n,e,t){dr(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function uy(n,e,t){dr(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function uf(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const ww="ng-template";function sA(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==uf(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Kp(n){return 4===n.type&&n.value!==ww}function Ew(n,e,t){return e===(4!==n.type||t?n.value:ww)}function oA(n,e,t){let i=4;const r=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(_v(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Ew(n,l,t)||""===l&&1===e.length){if(La(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!sA(n.attrs,c,t)){if(La(i))return!1;o=!0}continue}const h=aA(8&i?"class":l,r,Kp(n),t);if(-1===h){if(La(i))return!1;o=!0;continue}if(""!==c){let f;f=h>s?"":r[h+1].toLowerCase();const g=8&i?f:null;if(g&&-1!==uf(g,c,0)||2&i&&c!==f){if(La(i))return!1;o=!0}}}}else{if(!o&&!La(i)&&!La(l))return!1;if(o&&La(l))continue;o=!1,i=l|1&i}}return La(i)||o}function La(n){return 0==(1&n)}function aA(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function xw(n,e,t=!1){for(let i=0;i<e.length;i++)if(oA(n,e[i],t))return!0;return!1}function dA(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Sw(n,e){return n?":not("+e.trim()+")":e}function hA(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!La(o)&&(e+=Sw(s,r),r=""),i=o,s=s||!La(i);t++}return""!==r&&(e+=Sw(s,r)),e}const Dn={};function zt(n){Cw(Si(),jt(),to()+n,zh())}function Cw(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Ep(e,s,t)}else{const s=n.preOrderHooks;null!==s&&xp(e,s,0,t)}_o(t)}function gl(n,e){return n<<17|e<<2}function On(n){return n>>17&32767}function Cr(n){return 2|n}function Yl(n){return(131068&n)>>2}function ml(n,e){return-131069&n|e<<2}function hy(n){return 1|n}function Pw(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];__(r),o.contentQueries(2,e[s],s)}}}function hf(n,e,t,i,r,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,f_(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Jd(n,e,t,i,r){let s=n.data[e];if(null===s)s=function(n,e,t,i,r){const s=p_(),o=zr(),l=n.data[e]=function(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),Ln.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function(){const n=Ln.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return sl(s,!0),s}function eh(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function ff(n,e,t){$h(e);try{const i=n.viewQuery;null!==i&&My(1,i,t);const r=n.template;null!==r&&kw(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Pw(n,e),n.staticViewQueries&&My(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)zA(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,fi()}}function th(n,e,t,i){const r=e[2];if(256==(256&r))return;$h(e);const s=zh();try{f_(e),function(n){Ln.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&kw(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&Ep(e,c,null)}else{const c=n.preOrderHooks;null!==c&&xp(e,c,0,null),y_(e,0)}if(function(n){for(let e=Xd(n);null!==e;e=ny(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&mp(s,1),r[2]|=1024}}}(e),function(n){for(let e=Xd(n);null!==e;e=ny(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Id(i)&&th(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&Pw(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&Ep(e,c)}else{const c=n.contentHooks;null!==c&&xp(e,c,1),y_(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)_o(~r);else{const s=r,o=t[++i],a=t[++i];Od(o,s),a(2,e[s])}}}finally{_o(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)UA(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&My(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&Ep(e,c)}else{const c=n.viewHooks;null!==c&&xp(e,c,2),y_(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,mp(e[3],-1))}finally{fi()}}function CA(n,e,t,i){const r=e[10],s=!zh(),o=Ul(e);try{s&&!o&&r.begin&&r.begin(),o&&ff(n,e,i),th(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function kw(n,e,t,i,r){const s=to(),o=2&i;try{_o(-1),o&&e.length>20&&Cw(n,e,20,zh()),t(i,r)}finally{_o(s)}}function pf(n,e,t){!fv()||(function(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Hs(t,e),Ds(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Da(l);c&&FA(e,t,l);const u=Fd(e,n,a,t);Ds(u,e),null!==o&&LA(0,a-r,u,l,0,o),c&&(zs(t.index,e)[8]=u)}}(n,e,t,eo(t,e)),128==(128&t.flags)&&function(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=Ln.lFrame.currentDirectiveIndex;try{_o(o);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];g_(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&$w(c,u)}}finally{_o(-1),g_(a)}}(n,e,t))}function by(n,e,t=eo){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function eg(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=tg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function tg(n,e,t,i,r,s,o,a,l,c){const u=20+i,h=u+r,f=function(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Dn);return t}(u,h),g="function"==typeof c?c():c;return f[1]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1}}function Bw(n,e,t,i){const r=Xw(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&ig(n).push(i,r.length-1))}function Vw(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function zo(n,e,t,i,r,s,o,a){const l=eo(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(Kw(n,t,u,i,r),Ad(e)&&function(n,e){const t=zs(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,dr(s)?s.setProperty(l,i,r):v_(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function vy(n,e,t,i){let r=!1;if(fv()){const s=function(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];xw(t,o.selectors,!1)&&(r||(r=[]),Rc(Hs(t,e),n,o.type),Da(o)?(Ww(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,wy(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const h=s[u];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,c=eh(n,e,s.length,null);for(let u=0;u<s.length;u++){const h=s[u];t.mergedAttrs=Yh(t.mergedAttrs,h.hostAttrs),Ey(n,t,e,c,h),kA(c,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const f=h.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],h=u.inputs,f=null===s||Kp(e)?null:BA(h,s);o.push(f),a=Vw(h,c,a),l=Vw(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new rt("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Yh(t.mergedAttrs,t.attrs),r}function Gw(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function $w(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ww(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function kA(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Da(e)&&(t[""]=n)}}function wy(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Ey(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Ic(r.type)),o=new qh(s,Da(r),null);n.blueprint[i]=o,t[i]=o,Gw(n,e,0,i,eh(n,t,r.hostVars,Dn),r)}function FA(n,e,t){const i=eo(e,n),r=eg(t),s=n[10],o=ng(n,hf(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function yl(n,e,t,i,r,s){const o=eo(n,e);!function(n,e,t,i,r,s,o){if(null==s)dr(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?Ot(s):o(s,i||"",r);dr(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function LA(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],h=o[l++];null!==a?i.setInput(t,h,c,u):t[u]=h}}}function BA(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function qw(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function UA(n,e){const t=zs(e,n);if(Id(t)){const i=t[1];80&t[2]?th(i,t,i.template,t[8]):t[5]>0&&Sy(t)}}function Sy(n){for(let i=Xd(n);null!==i;i=ny(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];th(o,s,o.template,s[8])}else s[5]>0&&Sy(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=zs(t[i],n);Id(r)&&r[5]>0&&Sy(r)}}function zA(n,e){const t=zs(e,n),i=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),ff(i,t,t[8])}function ng(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Cy(n){for(;n;){n[2]|=64;const e=lf(n);if(lv(n)&&!e)return n;n=e}return null}function Ay(n,e,t){const i=e[10];i.begin&&i.begin();try{th(n,e,n.template,t)}catch(r){throw Iy(e,r),r}finally{i.end&&i.end()}}function Yw(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=X_(t),r=i[1];CA(r,i,r.template,t)}}(n[8])}function My(n,e,t){__(0),e(n,t)}const qA=(()=>Promise.resolve(null))();function Xw(n){return n[7]||(n[7]=[])}function ig(n){return n.cleanup||(n.cleanup=[])}function Dy(n,e,t){return(null===n||Da(n))&&(t=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function Iy(n,e){const t=n[9],i=t?t.get(la,null):null;i&&i.handleError(e)}function Kw(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Xl(n,e,t){const i=Vh(e,n);!function(n,e,t){dr(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function rg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=ut(r,a):2==s&&(i=ut(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const Vu=new Ht("INJECTOR",-1);class so{get(e,t=Ru){if(t===Ru){const i=new Error(`NullInjectorError: No provider for ${ot(e)}!`);throw i.name="NullInjectorError",i}return t}}const ju=new Ht("Set Injector scope."),gf={},XA={};let Ry;function Qw(){return void 0===Ry&&(Ry=new so),Ry}function Zw(n,e=null,t=null,i){return new Py(n,t,e||Qw(),i)}class Py{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&ra(t,a=>this.processProvider(a,e,t)),ra([e],a=>this.processInjectorType(a,[],s)),this.records.set(Vu,Uu(void 0,this));const o=this.records.get(ju);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:ot(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Ru,i=xn.Default){this.assertNotDestroyed();const r=Ud(this),s=Ta(void 0);try{if(!(i&xn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ht}(e)&&vn(e);a=l&&this.injectableDefInScope(l)?Uu(ky(e),gf):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&xn.Self?Qw():this.parent).get(e,t=i&xn.Optional&&t===Ru?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Fc]=o[Fc]||[]).unshift(ot(e)),r)throw o;return no(o,e,"R3InjectorError",this.source)}throw o}finally{Ta(s),Ud(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(ot(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=Te(e)))return!1;let r=Fl(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=Fl(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{ra(r.imports,h=>{this.processInjectorType(h,t,i)&&(void 0===u&&(u=[]),u.push(h))})}finally{}if(void 0!==u)for(let h=0;h<u.length;h++){const{ngModule:f,providers:g}=u[h];ra(g,m=>this.processProvider(m,f,g||er))}}this.injectorDefTypes.add(o);const l=Ic(o)||(()=>new o);this.records.set(o,Uu(l,gf));const c=r.providers;if(null!=c&&!a){const u=e;ra(c,h=>this.processProvider(h,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=Hc(e=Te(e))?e:Te(e&&e.provide);const s=function(n,e,t){return eE(n)?Uu(void 0,n.useValue):Uu(Jw(n),gf)}(e);if(Hc(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Uu(void 0,gf,!0),o.factory=()=>Pu(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===gf&&(t.value=XA,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Te(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function ky(n){const e=vn(n),t=null!==e?e.factory:Ic(n);if(null!==t)return t;if(n instanceof Ht)throw new Error(`Token ${ot(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const i=Pc(e,"?");throw new Error(`Can't resolve all parameters for ${ot(n)}: (${i.join(", ")}).`)}const t=function(n){const e=n&&(n[fo]||n[Vs]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function Jw(n,e,t){let i;if(Hc(n)){const r=Te(n);return Ic(r)||ky(r)}if(eE(n))i=()=>Te(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Pu(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>ke(Te(n.useExisting));else{const r=Te(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return Ic(r)||ky(r);i=()=>new r(...Pu(n.deps))}return i}function Uu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function eE(n){return null!==n&&"object"==typeof n&&Np in n}function Hc(n){return"function"==typeof n}const tE=function(n,e,t){return function(n,e=null,t=null,i){const r=Zw(n,e,t,i);return r._resolveInjectorDefTypes(),r}({name:t},e,n,t)};class Hn{static create(e,t){return Array.isArray(e)?tE(e,t,""):tE(e.providers,e.parent,e.name||"")}}function Fq(n,e){wp(X_(n)[1],as())}function En(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Da(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=cM(n.inputs),o.declaredInputs=cM(n.declaredInputs),o.outputs=cM(n.outputs);const a=r.hostBindings;a&&jq(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&Bq(n,l),c&&Vq(n,c),nl(n.inputs,r.inputs),nl(n.declaredInputs,r.declaredInputs),nl(n.outputs,r.outputs),Da(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===En&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Yh(r.hostAttrs,t=Yh(t,r.hostAttrs))}}(i)}function cM(n){return n===xd?{}:n===er?[]:n}function Bq(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function Vq(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function jq(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}Hn.THROW_IF_NOT_FOUND=Ru,Hn.NULL=new so,Hn.\u0275prov=tt({token:Hn,providedIn:"any",factory:()=>ke(Vu)}),Hn.__NG_ELEMENT_ID__=-1;let oE=null;function sg(){if(!oE){const n=Zn.Symbol;if(n&&n.iterator)oE=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(oE=i)}}}return oE}class Ql{constructor(e){this.wrapped=e}static wrap(e){return new Ql(e)}static unwrap(e){return Ql.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ql}}function jy(n){return!!uM(n)&&(Array.isArray(n)||!(n instanceof Map)&&sg()in n)}function uM(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function $c(n,e,t){return n[e]=t}function Eo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ii(n,e,t,i){const r=jt();return Eo(r,Ra(),e)&&(Si(),yl(Pr(),r,n,e,t,i)),Ii}function ag(n,e,t,i){return Eo(n,Ra(),t)?e+Ot(t)+i:Dn}function wi(n,e,t,i,r,s,o,a){const l=jt(),c=Si(),u=n+20,h=c.firstCreatePass?function(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Jd(e,n,4,o||null,Oa(c,a));vy(e,t,u,Oa(c,l)),wp(e,u);const h=u.tViews=tg(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];sl(h,!1);const f=l[11].createComment("");Yp(c,l,f,h),Ds(f,l),ng(l,l[u]=qw(f,l,f,h)),Md(h)&&pf(c,l,h),null!=o&&by(l,h,a)}function ih(n){return Dd(Ln.lFrame.contextLView,20+n)}function Oe(n,e=xn.Default){const t=jt();return null===t?ke(n,e):Kh(as(),t,Te(n),e)}function Jt(n,e,t){const i=jt();return Eo(i,Ra(),e)&&zo(Si(),Pr(),i,n,e,i[11],t,!1),Jt}function gM(n,e,t,i,r){const o=r?"class":"style";Kw(n,t,e.inputs[o],o,i)}function wt(n,e,t,i){const r=jt(),s=Si(),o=20+n,a=r[11],l=r[o]=ry(a,e,Ln.lFrame.currentNamespace),c=s.firstCreatePass?function(n,e,t,i,r,s,o){const a=e.consts,c=Jd(e,n,2,r,Oa(a,s));return vy(e,t,c,Oa(a,o)),null!==c.attrs&&rg(c,c.attrs,!1),null!==c.mergedAttrs&&rg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];sl(c,!0);const u=c.mergedAttrs;null!==u&&Sp(a,l,u);const h=c.classes;null!==h&&uy(a,l,h);const f=c.styles;null!==f&&vw(a,l,f),64!=(64&c.flags)&&Yp(s,r,l,c),0===Ln.lFrame.elementDepthCount&&Ds(l,r),Ln.lFrame.elementDepthCount++,Md(c)&&(pf(s,r,c),function(n,e,t){if(s_(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,r)),null!==i&&by(r,c)}function Et(){let n=as();zr()?ps():(n=n.parent,sl(n,!1));const e=n;Ln.lFrame.elementDepthCount--;const t=Si();t.firstCreatePass&&(wp(t,n),s_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&gM(t,e,jt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&gM(t,e,jt(),e.stylesWithoutHost,!1)}function ni(n,e,t,i){wt(n,e,t,i),Et()}function wl(){return jt()}function yg(n){return!!n&&"function"==typeof n.then}function SF(n){return!!n&&"function"==typeof n.subscribe}const cE=SF;function Tn(n,e,t,i){const r=jt(),s=Si(),o=as();return CF(s,r,r[11],o,n,e,!!t,i),Tn}function uE(n,e){const t=as(),i=jt(),r=Si();return CF(r,i,Dy(m_(r.data),t,i),t,n,e,!1),uE}function CF(n,e,t,i,r,s,o,a){const l=Md(i),u=n.firstCreatePass&&ig(n),h=e[8],f=Xw(e);let g=!0;if(3&i.type||a){const I=eo(i,e),G=a?a(I):I,k=f.length,oe=a?we=>a(Sr(we[i.index])):i.index;if(dr(t)){let we=null;if(!a&&l&&(we=function(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==we)(we.__ngLastListenerFn__||we).__ngNextListenerFn__=s,we.__ngLastListenerFn__=s,g=!1;else{s=mM(i,e,h,s,!1);const Be=t.listen(G,r,s);f.push(s,Be),u&&u.push(r,oe,k,k+1)}}else s=mM(i,e,h,s,!0),G.addEventListener(r,s,o),f.push(s),u&&u.push(r,oe,k,o)}else s=mM(i,e,h,s,!1);const m=i.outputs;let A;if(g&&null!==m&&(A=m[r])){const I=A.length;if(I)for(let G=0;G<I;G+=2){const Ue=e[A[G]][A[G+1]].subscribe(s),qe=f.length;f.push(s,Ue),u&&u.push(r,i.index,qe,-(qe+1))}}}function TF(n,e,t,i){try{return!1!==t(i)}catch(r){return Iy(n,r),!1}}function mM(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?zs(n.index,e):e;0==(32&e[2])&&Cy(a);let l=TF(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=TF(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function _i(n=1){return function(n){return(Ln.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,Ln.lFrame.contextLView))[8]}(n)}function vY(n,e){let t=null;const i=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?xw(n,s,!0):dA(i,s))return r}else t=r}return t}function Hr(n){const e=jt()[16][6];if(!e.projection){const i=e.projection=Pc(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?vY(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function oi(n,e=0,t){const i=jt(),r=Si(),s=Jd(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),ps(),64!=(64&s.flags)&&function(n,e,t){cy(e[11],0,e,t,cw(n,t,e),fw(t.parent||e[6],t,e))}(r,i,s)}function dE(n,e,t){return _M(n,"",e,"",t),dE}function _M(n,e,t,i,r){const s=jt(),o=ag(s,e,t,i);return o!==Dn&&zo(Si(),Pr(),s,n,o,s[11],r,!1),_M}function kF(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?On(s):Yl(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];xY(n[a],e)&&(l=!0,n[a+1]=i?hy(u):Cr(u)),a=i?On(u):Yl(u)}l&&(n[t+1]=i?Cr(s):hy(s))}function xY(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ms(n,e)>=0}const Os={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FF(n){return n.substring(Os.key,Os.keyEnd)}function LF(n,e){const t=Os.textEnd;return t===e?-1:(e=Os.keyEnd=function(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Os.key=e,t),bg(n,e,t))}function bg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function zy(n,e,t){return Jl(n,e,t,!1),zy}function ai(n,e){return Jl(n,e,null,!0),ai}function Va(n){!function(n,e,t,i){const r=Si(),s=Fo(2);r.firstUpdatePass&&HF(r,null,s,i);const o=jt();if(t!==Dn&&Eo(o,s,t)){const a=r.data[to()];if(qF(a,i)&&!zF(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=ut(l,t||"")),gM(r,a,o,t,i)}else!function(n,e,t,i,r,s,o,a){r===Dn&&(r=er);let l=0,c=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const f=l<r.length?r[l+1]:void 0,g=c<s.length?s[c+1]:void 0;let A,m=null;u===h?(l+=2,c+=2,f!==g&&(m=h,A=g)):null===h||null!==u&&u<h?(l+=2,m=u):(c+=2,m=h,A=g),null!==m&&$F(n,e,t,i,m,A,o,a),u=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(n,e,t){if(null==t||""===t)return er;const i=[],r=Gs(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(Bo,Wc,n,!0)}function Wc(n,e){for(let t=function(n){return function(n){Os.key=0,Os.keyEnd=0,Os.value=0,Os.valueEnd=0,Os.textEnd=n.length}(n),LF(n,bg(n,0,Os.textEnd))}(e);t>=0;t=LF(e,t))Bo(n,FF(e),!0)}function Jl(n,e,t,i){const r=jt(),s=Si(),o=Fo(2);s.firstUpdatePass&&HF(s,n,o,i),e!==Dn&&Eo(r,o,e)&&$F(s,s.data[to()],r,r[11],n,r[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ot(Gs(n)))),n}(e,t),i,o)}function zF(n,e){return e>=n.expandoStartIndex}function HF(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[to()],o=zF(n,t);qF(s,i)&&null===e&&!o&&(e=!1),e=function(n,e,t,i){const r=m_(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Hy(t=yM(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=yM(r,n,e,t,i),null===s){let l=function(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Yl(i))return n[On(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=yM(null,n,e,l[1],i),l=Hy(l,e.attrs,i),function(n,e,t,i){n[On(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Hy(i,n[s].hostAttrs,t);return Hy(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=On(o),l=Yl(o);n[i]=t;let u,c=!1;if(Array.isArray(t)){const h=t;u=h[1],(null===u||Ms(h,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const f=On(n[a+1]);n[i+1]=gl(f,a),0!==f&&(n[f+1]=ml(n[f+1],i)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=gl(a,0),0!==a&&(n[a+1]=ml(n[a+1],i)),a=i;else n[i+1]=gl(l,0),0===a?a=i:n[l+1]=ml(n[l+1],i),l=i;c&&(n[i+1]=Cr(n[i+1])),kF(n,u,i,!0),kF(n,u,i,!1),function(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ms(s,e)>=0&&(t[i+1]=hy(t[i+1]))}(e,u,n,i,s),o=gl(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function yM(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Hy(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Hy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Bo(n,o,!!t||e[++s]))}return void 0===n?null:n}function $F(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];hE(function(n){return 1==(1&n)}(c)?WF(l,e,t,r,Yl(c),o):void 0)||(hE(s)||function(n){return 2==(2&n)}(c)&&(s=WF(l,null,t,r,a,o)),function(n,e,t,i,r){const s=dr(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Uo.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Uo.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Vh(to(),t),r,s))}function WF(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let f=t[r+1];f===Dn&&(f=h?er:void 0);let g=h?O_(f,i):u===i?f:void 0;if(c&&!hE(g)&&(g=O_(l,i)),hE(g)&&(a=g,o))return a;const m=n[r+1];r=o?On(m):Yl(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=O_(l,i))}return a}function hE(n){return void 0!==n}function qF(n,e){return 0!=(n.flags&(e?16:32))}function Jn(n,e=""){const t=jt(),i=Si(),r=n+20,s=i.firstCreatePass?Jd(i,r,1,e,null):i.data[r],o=t[r]=function(n,e){return dr(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Yp(i,t,o,s),sl(s,!1)}function gs(n){return xo("",n,""),gs}function xo(n,e,t){const i=jt(),r=ag(i,n,e,t);return r!==Dn&&Xl(i,to(),r),xo}function qc(n,e,t){const i=jt();return Eo(i,Ra(),e)&&zo(Si(),Pr(),i,n,e,i[11],t,!0),qc}function fE(n,e,t){const i=jt();if(Eo(i,Ra(),e)){const s=Si(),o=Pr();zo(s,o,i,n,e,Dy(m_(s.data),o,i),t,!0)}return fE}const _f=void 0;var iX=["en",[["a","p"],["AM","PM"],_f],[["AM","PM"],_f,_f],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_f,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_f,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_f,"{1} 'at' {0}",_f],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let vg={};function dL(n){return n in vg||(vg[n]=Zn.ng&&Zn.ng.common&&Zn.ng.common.locales&&Zn.ng.common.locales[n]),vg[n]}var un=(()=>((un=un||{})[un.LocaleId=0]="LocaleId",un[un.DayPeriodsFormat=1]="DayPeriodsFormat",un[un.DayPeriodsStandalone=2]="DayPeriodsStandalone",un[un.DaysFormat=3]="DaysFormat",un[un.DaysStandalone=4]="DaysStandalone",un[un.MonthsFormat=5]="MonthsFormat",un[un.MonthsStandalone=6]="MonthsStandalone",un[un.Eras=7]="Eras",un[un.FirstDayOfWeek=8]="FirstDayOfWeek",un[un.WeekendRange=9]="WeekendRange",un[un.DateFormat=10]="DateFormat",un[un.TimeFormat=11]="TimeFormat",un[un.DateTimeFormat=12]="DateTimeFormat",un[un.NumberSymbols=13]="NumberSymbols",un[un.NumberFormats=14]="NumberFormats",un[un.CurrencyCode=15]="CurrencyCode",un[un.CurrencySymbol=16]="CurrencySymbol",un[un.CurrencyName=17]="CurrencyName",un[un.Currencies=18]="Currencies",un[un.Directionality=19]="Directionality",un[un.PluralCase=20]="PluralCase",un[un.ExtraData=21]="ExtraData",un))();const pE="en-US";let hL=pE;function vM(n){ie(n,"Expected localeId to be defined"),"string"==typeof n&&(hL=n.toLowerCase().replace(/_/g,"-"))}function xM(n,e,t,i,r){if(n=Te(n),Array.isArray(n))for(let s=0;s<n.length;s++)xM(n[s],e,t,i,r);else{const s=Si(),o=jt();let a=Hc(n)?n:Te(n.provide),l=Jw(n);const c=as(),u=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Hc(n)||!n.multi){const g=new qh(l,r,Oe),m=CM(a,e,r?u:u+f,h);-1===m?(Rc(Hs(c,o),s,a),SM(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(g),o.push(g)):(t[m]=g,o[m]=g)}else{const g=CM(a,e,u+f,h),m=CM(a,e,u,u+f),A=g>=0&&t[g],I=m>=0&&t[m];if(r&&!I||!r&&!A){Rc(Hs(c,o),s,a);const G=function(n,e,t,i,r){const s=new qh(n,t,Oe);return s.multi=[],s.index=e,s.componentProviders=0,FL(s,r,i&&!t),s}(r?eK:JX,t.length,r,i,l);!r&&I&&(t[m].providerFactory=G),SM(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(G),o.push(G)}else SM(s,n,g>-1?g:m,FL(t[r?m:g],l,!r&&i));!r&&i&&I&&t[m].componentProviders++}}}function SM(n,e,t,i){const r=Hc(e);if(r||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const l=a.indexOf(t);-1===l?a.push(t,[i,o]):a[l+1].push(i,o)}else a.push(t,o)}}}function FL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function CM(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function JX(n,e,t,i){return TM(this.multi,[])}function eK(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Fd(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),TM(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],TM(r,s);return s}function TM(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Vn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function(n,e,t){const i=Si();if(i.firstCreatePass){const r=Da(n);xM(t,i.data,i.blueprint,r,!0),xM(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class LL{}const VL="ngComponent";class iK{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${ot(n)}. Did you add it to @NgModule.entryComponents?`);return e[VL]=n,e}(e)}}class El{}function bE(...n){}function Eg(n,e){return new gn(eo(n,e))}El.NULL=new iK;const oK=function(){return Eg(as(),jt())};let gn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=oK,n})();function jL(n){return n instanceof gn?n.nativeElement:n}class yf{}let MM=(()=>{class n{}return n.\u0275prov=tt({token:n,providedIn:"root",factory:()=>null}),n})();class Hu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const UL=new Hu("12.2.5");class zL{constructor(){}supports(e){return jy(e)}create(e){return new hK(e)}}const dK=(n,e)=>e;class hK{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||dK}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<GL(i,r,s)?t:i,a=GL(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let f=0;f<c;f++){const g=f<s.length?s[f]:s[f]=0,m=g+f;u<=m&&m<c&&(s[f]=g+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!jy(e))throw new Error(`Error trying to diff '${ot(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[sg()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new fK(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new HL),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new HL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class fK{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pK{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class HL{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new pK,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GL(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class $L{constructor(){}supports(e){return e instanceof Map||uM(e)}create(){return new gK}}class gK{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||uM(e)))throw new Error(`Error trying to diff '${ot(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new mK(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class mK{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WL(){return new xg([new zL])}let xg=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||WL()),deps:[[n,new dl,new ts]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=tt({token:n,providedIn:"root",factory:WL}),n})();function qL(){return new Sg([new $L])}let Sg=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||qL()),deps:[[n,new dl,new ts]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=tt({token:n,providedIn:"root",factory:qL}),n})();function vE(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(Sr(s)),ea(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&vE(l[1],l,c,i)}const o=t.type;if(8&o)vE(n,e,t.child,i);else if(32&o){const a=ey(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=_w(e,t);if(Array.isArray(a))i.push(...a);else{const l=lf(e[16]);vE(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Yy{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return vE(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ea(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(sy(e,i),Hl(t,i))}this._attachedToViewContainer=!1}oy(this._lView[1],this._lView)}onDestroy(e){Bw(this._lView[1],this._lView,null,e)}markForCheck(){Cy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ay(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){yp(!0);try{Ay(n,e,t)}finally{yp(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){Qd(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class yK extends Yy{constructor(e){super(e),this._view=e}detectChanges(){Yw(this._view)}checkNoChanges(){!function(n){yp(!0);try{Yw(n)}finally{yp(!1)}}(this._view)}get context(){return null}}const vK=function(n){return function(n,e,t){if(Ad(n)&&!t){const i=zs(n.index,e);return new Yy(i,i)}return 47&n.type?new Yy(e[16],e):null}(as(),jt(),16==(16&n))};let Mr=(()=>{class n{}return n.__NG_ELEMENT_ID__=vK,n})();const xK=[new $L],CK=new xg([new zL]),TK=new Sg(xK),MK=function(){return wE(as(),jt())};let Go=(()=>{class n{}return n.__NG_ELEMENT_ID__=MK,n})();const DK=Go,IK=class extends DK{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=hf(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),ff(t,i,e),new Yy(i)}};function wE(n,e){return 4&n.type?new IK(e,n,Eg(n,e)):null}class Yc{}const NK=function(){return QL(as(),jt())};let Rs=(()=>{class n{}return n.__NG_ELEMENT_ID__=NK,n})();const kK=Rs,XL=class extends kK{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Eg(this._hostTNode,this._hostLView)}get injector(){return new na(this._hostTNode,this._hostLView)}get parentInjector(){const e=Xh(this._hostTNode,this._hostLView);if(yv(e)){const t=al(e,this._hostLView),i=Nd(e);return new na(t[1].data[i+8],t)}return new na(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=KL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=i||this.parentInjector;if(!s&&null==e.ngModule&&o){const l=o.get(Yc,null);l&&(s=l)}const a=e.create(o,r,void 0,s);return this.insert(a.hostView,t),a}insert(e,t){const i=e._lView,r=i[1];if(function(n){return ea(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const h=i[3],f=new XL(h,h[6],h[3]);f.detach(f.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Jh(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=Xp(s,o),l=i[11],c=qp(l,o[7]);return null!==c&&function(n,e,t,i,r,s){i[0]=r,i[6]=e,Qd(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),Jh(DM(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=KL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=sy(this._lContainer,t);i&&(Hl(DM(this._lContainer),t),oy(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=sy(this._lContainer,t);return i&&null!=Hl(DM(this._lContainer),t)?new Yy(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function KL(n){return n[8]}function DM(n){return n[8]||(n[8]=[])}function QL(n,e){let t;const i=e[n.index];if(ea(i))t=i;else{let r;if(8&n.type)r=Sr(i);else{const s=e[11];r=s.createComment("");const o=eo(n,e);pl(s,qp(s,o),r,function(n,e){return dr(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=qw(i,e,r,n),ng(e,t)}return new XL(t,n,e)}const Mg={};class y3 extends El{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ui(e);return new v3(t,this.ngModule)}}function b3(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const OQ=new Ht("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>tw});class v3 extends LL{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(hA).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return b3(this.componentDef.inputs)}get outputs(){return b3(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function(n,e){return{get:(t,i,r)=>{const s=n.get(t,Mg,r);return s!==Mg||i===Mg?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(yf,Su),a=s.get(MM,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function(n,e,t){if(dr(n))return n.selectRootElement(e,t===Xt.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):ry(o.createRenderer(null,this.componentDef),c,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),h=this.componentDef.onPush?576:528,f=function(n,e){return{components:[],scheduler:n||tw,clean:qA,playerHandler:e||null,flags:0}}(),g=tg(0,null,null,1,0,null,null,null,null,null),m=hf(null,g,f,h,null,null,o,l,a,s);let A,I;$h(m);try{const G=function(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=Jd(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(rg(l,c,!0),null!==n&&(Sp(r,n,c),null!==l.classes&&uy(r,n,l.classes),null!==l.styles&&vw(r,n,l.styles)));const u=i.createRenderer(n,e),h=hf(t,eg(e),null,e.onPush?64:16,t[20],l,i,u,s||null,null);return o.firstCreatePass&&(Rc(Hs(l,t),o,e.type),Ww(o,l),wy(l,t.length,1)),ng(t,h),t[20]=h}(u,this.componentDef,m,o,l);if(u)if(i)Sp(l,u,["ng-version",UL.full]);else{const{attrs:k,classes:oe}=function(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!La(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);k&&Sp(l,u,k),oe&&oe.length>0&&uy(l,u,oe.join(" "))}if(I=h_(g,20),void 0!==t){const k=I.projection=[];for(let oe=0;oe<this.ngContentSelectors.length;oe++){const we=t[oe];k.push(null!=we?Array.from(we):null)}}A=function(n,e,t,i,r){const s=t[1],o=function(n,e,t){const i=as();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Ey(n,i,e,eh(n,e,1,null),t));const r=Fd(e,n,i.directiveStart,i);Ds(r,e);const s=eo(i,e);return s&&Ds(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=as();e.contentQueries(1,o,l.directiveStart)}const a=as();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_o(a.index),Gw(t[1],a,0,a.directiveStart,a.directiveEnd,e),$w(e,o)),o}(G,this.componentDef,m,f,[Fq]),ff(g,m,null)}finally{fi()}return new PQ(this.componentType,A,Eg(I,m),m,I)}}class PQ extends class{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new yK(r),this.componentType=e}get injector(){return new na(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Dg=new Map;class LQ extends Yc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new y3(this);const i=Po(e),r=function(n){return n[AC]||null}(e);r&&vM(r),this._bootstrapComponents=fl(i.bootstrap),this._r3Injector=Zw(e,t,[{provide:Yc,useValue:this},{provide:El,useValue:this.componentFactoryResolver}],ot(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Hn.THROW_IF_NOT_FOUND,i=xn.Default){return e===Hn||e===Yc||e===Vu?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zM extends class{}{constructor(e){super(),this.moduleType=e,null!==Po(e)&&function(n){const e=new Set;!function t(i){const r=Po(i,!0),s=r.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${ot(e)} vs ${ot(e.name)}`)}(s,Dg.get(s),i),Dg.set(s,i));const o=fl(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new LQ(this.moduleType,e)}}function TE(n,e,t){const i=Cs()+n,r=jt();return r[i]===Dn?$c(r,i,t?e.call(t):e()):function(n,e){return n[e]}(r,i)}function x3(n,e,t,i,r,s){const o=e+t;return Eo(n,o,r)?$c(n,o+1,s?i.call(s,r):i(r)):function(n,e){const t=n[e];return t===Dn?void 0:t}(n,o+1)}function Ns(n,e){const t=Si();let i;const r=n+20;t.firstCreatePass?(i=function(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}throw new rt("302",`The pipe '${n}' could not be found!`)}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Ic(i.type)),o=Ta(Oe);try{const a=Cp(!1),l=s();return Cp(a),function(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,jt(),r,l),l}finally{Ta(o)}}function To(n,e,t){const i=n+20,r=jt(),s=Dd(r,i);return function(n,e){Ql.isWrapped(e)&&(e=Ql.unwrap(e),n[Ln.lFrame.bindingIndex]=Dn);return e}(r,function(n,e){return n[1].data[e].pure}(r,i)?x3(r,Cs(),e,s.transform,t,s):s.transform(t))}function GM(n){return e=>{setTimeout(n,void 0,e)}}const ln=class extends se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const h=e;a=null===(r=h.next)||void 0===r?void 0:r.bind(h),l=null===(s=h.error)||void 0===s?void 0:s.bind(h),c=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}this.__isAsync&&(l=GM(l),a&&(a=GM(a)),c&&(c=GM(c)));const u=super.subscribe({next:a,error:l,complete:c});return e instanceof C&&e.add(u),u}};function QQ(){return this._results[sg()]()}class wf{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=sg(),i=wf.prototype;i[t]||(i[t]=QQ)}get changes(){return this._changes||(this._changes=new ln)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=ia(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class $M{constructor(e){this.queryList=e,this.matches=null}clone(){return new $M(this.queryList)}setDirty(){this.queryList.setDirty()}}class WM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new WM(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==R3(e,t).matches&&this.queries[t].setDirty()}}class M3{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class qM{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new qM(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class YM{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new YM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,eZ(t,s)),this.matchTNodeWithReadOption(e,t,kd(t,e,s,!1,!1))}else i===Go?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,kd(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===gn||r===Rs||r===Go&&4&t.type)this.addMatch(t.index,-2);else{const s=kd(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function eZ(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function nZ(n,e,t,i){return-1===t?function(n,e){return 11&n.type?Eg(n,e):4&n.type?wE(n,e):null}(e,n):-2===t?function(n,e,t){return t===gn?Eg(e,n):t===Go?wE(e,n):t===Rs?QL(e,n):void 0}(n,e,i):Fd(n,n[1],t,e)}function D3(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:nZ(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function XM(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=D3(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let h=10;h<u.length;h++){const f=u[h];f[17]===f[3]&&XM(f[1],f,c,i)}if(null!==u[9]){const h=u[9];for(let f=0;f<h.length;f++){const g=h[f];XM(g[1],g,c,i)}}}}}return i}function Gn(n){const e=jt(),t=Si(),i=pv();__(i+1);const r=R3(t,i);if(n.dirty&&Ul(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?XM(t,e,i,[]):D3(t,e,r,i);n.reset(s,jL),n.notifyOnChanges()}return!0}return!1}function hr(n,e,t){const i=Si();i.firstCreatePass&&(O3(i,new M3(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),I3(i,jt(),e)}function $n(){return function(n,e){return n[19].queries[e].queryList}(jt(),pv())}function I3(n,e,t){const i=new wf(4==(4&t));Bw(n,e,i,i.destroy),null===e[19]&&(e[19]=new WM),e[19].queries.push(new $M(i))}function O3(n,e,t){null===n.queries&&(n.queries=new qM),n.queries.track(new YM(e,t))}function R3(n,e){return n.queries.getByIndex(e)}const Ef=new Ht("Application Initializer");let Og=(()=>{class n{constructor(t){this.appInits=t,this.resolve=bE,this.reject=bE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(yg(s))t.push(s);else if(cE(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ke(Ef,8))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const a0=new Ht("AppId"),NZ={provide:a0,useFactory:function(){return`${tD()}${tD()}${tD()}`},deps:[]};function tD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const K3=new Ht("Platform Initializer"),Xc=new Ht("Platform ID"),IE=new Ht("appBootstrapListener");let OE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const Gu=new Ht("LocaleId"),Q3=new Ht("DefaultCurrencyCode");class kZ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const nD=function(n){return new zM(n)},FZ=nD,LZ=function(n){return Promise.resolve(nD(n))},Z3=function(n){const e=nD(n),i=fl(Po(n).declarations).reduce((r,s)=>{const o=Ui(s);return o&&r.push(new v3(o)),r},[]);return new kZ(e,i)},BZ=Z3,VZ=function(n){return Promise.resolve(Z3(n))};let xf=(()=>{class n{constructor(){this.compileModuleSync=FZ,this.compileModuleAsync=LZ,this.compileModuleAndAllComponentsSync=BZ,this.compileModuleAndAllComponentsAsync=VZ}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const J3=new Ht("compilerOptions"),UZ=(()=>Promise.resolve(0))();function iD(n){"undefined"==typeof Zone?UZ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ln(!1),this.onMicrotaskEmpty=new ln(!1),this.onStable=new ln(!1),this.onError=new ln(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let n=Zn.requestAnimationFrame,e=Zn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Zn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,sD(n),n.isCheckStableRunning=!0,rD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),sD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return eB(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),tB(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return eB(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),tB(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,sD(n),rD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,HZ,bE,bE);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const HZ={};function rD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function eB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tB(n){n._nesting--,rD(n)}class WZ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ln,this.onMicrotaskEmpty=new ln,this.onStable=new ln,this.onError=new ln}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let oD=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pn.assertNotInAngularZone(),iD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())iD(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(ke(pn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),nB=(()=>{class n{constructor(){this._applications=new Map,aD.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return aD.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class qZ{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let aD=new qZ,iB=!0,rB=!1;function fa(){return rB=!0,iB}let ic;const sB=new Ht("AllowMultipleToken");function oB(n,e,t=[]){const i=`Platform: ${e}`,r=new Ht(i);return(s=[])=>{let o=cD();if(!o||o.injector.get(sB,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:ju,useValue:"platform"});!function(n){if(ic&&!ic.destroyed&&!ic.injector.get(sB,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ic=n.get(aB);const e=n.get(K3,null);e&&e.forEach(t=>t())}(Hn.create({providers:a,name:i}))}return function(n){const e=cD();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function cD(){return ic&&!ic.destroyed?ic:null}let aB=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function(n,e){let t;return t="noop"===n?new WZ:("zone.js"===n?void 0:n)||new pn({enableLongStackTrace:fa(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:pn,useValue:a}];return a.run(()=>{const c=Hn.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),h=u.injector.get(la,null);if(!h)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const f=a.onError.subscribe({next:g=>{h.handleError(g)}});u.onDestroy(()=>{uD(this._modules,u),f.unsubscribe()})}),function(n,e,t){try{const i=t();return yg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(h,a,()=>{const f=u.injector.get(Og);return f.runInitializers(),f.donePromise.then(()=>(vM(u.injector.get(Gu,pE)||pE),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=lB({},i);return function(n,e,t){const i=new zM(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(sh);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${ot(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ke(Hn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();function lB(n,e){return Array.isArray(e)?e.reduce(lB,n):Object.assign(Object.assign({},n),e)}let sh=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new P(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new P(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{pn.assertNotInAngularZone(),iD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{pn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),h.unsubscribe()}});this.isStable=Pn(a,l.pipe(ws()))}bootstrap(t,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=t instanceof LL?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Yc),a=r.create(Hn.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(oD,null),u=c&&a.injector.get(nB);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),uD(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;uD(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(IE,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(ke(pn),ke(Hn),ke(la),ke(El),ke(Og))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();function uD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const vJ=oB(null,"core",[{provide:Xc,useValue:"unknown"},{provide:aB,deps:[Hn]},{provide:nB,deps:[]},{provide:OE,deps:[]}]),CJ=[{provide:sh,useClass:sh,deps:[pn,Hn,la,El,Og]},{provide:OQ,deps:[pn],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Og,useClass:Og,deps:[[new ts,Ef]]},{provide:xf,useClass:xf,deps:[]},NZ,{provide:xg,useFactory:function(){return CK},deps:[]},{provide:Sg,useFactory:function(){return TK},deps:[]},{provide:Gu,useFactory:function(n){return vM(n=n||"undefined"!=typeof $localize&&$localize.locale||pE),n},deps:[[new Hd(Gu),new ts,new dl]]},{provide:Q3,useValue:"USD"}];let AJ=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ke(sh))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:CJ}),n})(),zE=null;function Kc(){return zE}const fn=new Ht("DocumentToken");let Tf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({factory:Tee,token:n,providedIn:"platform"}),n})();function Tee(){return ke(FB)}let FB=(()=>{class n extends Tf{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kc().getBaseHref(this._doc)}onPopState(t){const i=Kc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Kc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){LB()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){LB()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ke(fn))},n.\u0275prov=tt({factory:Mee,token:n,providedIn:"platform"}),n})();function LB(){return!!window.history.pushState}function Mee(){return new FB(ke(fn))}function CD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function BB(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Wu(n){return n&&"?"!==n[0]?"?"+n:n}let Pg=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({factory:Dee,token:n,providedIn:"root"}),n})();function Dee(n){const e=ke(fn).location;return new VB(ke(Tf),e&&e.origin||"")}const TD=new Ht("appBaseHref");let VB=(()=>{class n extends Pg{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return CD(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Wu(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Wu(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Wu(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(ke(Tf),ke(TD,8))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),kg=(()=>{class n{constructor(t,i){this._subject=new ln,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=BB(jB(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Wu(i))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,jB(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wu(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wu(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.\u0275fac=function(t){return new(t||n)(ke(Pg),ke(Tf))},n.normalizeQueryParams=Wu,n.joinWithSlash=CD,n.stripTrailingSlash=BB,n.\u0275prov=tt({factory:Oee,token:n,providedIn:"root"}),n})();function Oee(){return new kg(ke(Pg),ke(Tf))}function jB(n){return n.replace(/\/index.html$/,"")}var ms=(()=>((ms=ms||{})[ms.Zero=0]="Zero",ms[ms.One=1]="One",ms[ms.Two=2]="Two",ms[ms.Few=3]="Few",ms[ms.Many=4]="Many",ms[ms.Other=5]="Other",ms))();const Vee=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=dL(e);if(t)return t;const i=e.split("-")[0];if(t=dL(i),t)return t;if("en"===i)return iX;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[un.PluralCase]};class ZE{}let pte=(()=>{class n extends ZE{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(Vee(i||this.locale)(t)){case ms.Zero:return"zero";case ms.One:return"one";case ms.Two:return"two";case ms.Few:return"few";case ms.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(ke(Gu))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();function XB(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class mte{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yu=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,s,o)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new mte(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new KB(r,a);i.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new KB(r,a);i.push(l)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,s=this._viewContainer.length;r<s;r++){const o=this._viewContainer.get(r);o.context.index=r,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Oe(Rs),Oe(Go),Oe(xg))},n.\u0275dir=Pt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class KB{constructor(e,t){this.record=e,this.view=t}}let ac=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new yte,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){QB("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){QB("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(Oe(Rs),Oe(Go))},n.\u0275dir=Pt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class yte{constructor(){this.$implicit=null,this.ngIf=null}}function QB(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ot(e)}'.`)}class Ete{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class xte{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}onDestroy(e){}}const Ste=new xte,Cte=new Ete;let g0=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(yg(t))return Ste;if(SF(t))return Cte;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${ot(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(Oe(Mr,16))},n.\u0275pipe=js({name:"async",type:n,pure:!1}),n})(),fr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:[{provide:ZE,useClass:pte}]}),n})();const rV="browser";function Af(n){return n===rV}class aV{}class VD extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){zE||(zE=n)}(new VD)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(m0=m0||document.querySelector("base"),m0?m0.getAttribute("href"):null);return null==t?null:function(n){ex=ex||document.createElement("a"),ex.setAttribute("href",n);const e=ex.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){m0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return XB(document.cookie,e)}}let ex,m0=null;const lV=new Ht("TRANSITION_ID"),Xte=[{provide:Ef,useFactory:function(n,e,t){return()=>{t.get(Og).donePromise.then(()=>{const i=Kc(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[lV,fn,Hn],multi:!0}];class jD{static init(){!function(n){aD=n}(new jD)}addToWindow(e){Zn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Zn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Zn.getAllAngularRootElements=()=>e.getAllRootElements(),Zn.frameworkStabilizers||(Zn.frameworkStabilizers=[]),Zn.frameworkStabilizers.push(i=>{const r=Zn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?Kc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Kte=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const _0=new Ht("EventManagerPlugins");let nx=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ke(_0),ke(pn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class UD{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Kc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let uV=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),y0=(()=>{class n extends uV{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(dV),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(dV))}}return n.\u0275fac=function(t){return new(t||n)(ke(fn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();function dV(n){Kc().remove(n)}const zD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},HD=/%COMP%/g;function ix(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?ix(n,r,t):(r=r.replace(HD,n),t.push(r))}return t}function pV(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let rx=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new GD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Xt.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new dne(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Xt.ShadowDom:return new hne(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=ix(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ke(nx),ke(y0),ke(a0))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class GD{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(zD[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=zD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=zD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Uo.DashCase|Uo.Important)?e.style.setProperty(t,i,r&Uo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Uo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,pV(i)):this.eventManager.addEventListener(e,t,pV(i))}}class dne extends GD{constructor(e,t,i,r){super(e),this.component=i;const s=ix(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(HD,n)}(r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(HD,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class hne extends GD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ix(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let fne=(()=>{class n extends UD{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(ke(fn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const _V=["alt","control","meta","shift"],vne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yV={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},wne={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ene=(()=>{class n extends UD{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(_V.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&yV.hasOwnProperty(e)&&(e=yV[e]))}return vne[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),_V.forEach(s=>{s!=r&&wne[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(ke(fn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),Mf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({factory:function(){return ke(WD)},token:n,providedIn:"root"}),n})(),WD=(()=>{class n extends Mf{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case si.NONE:return i;case si.HTML:return sa(i,"HTML")?Gs(i):$_(this._doc,String(i)).toString();case si.STYLE:return sa(i,"Style")?Gs(i):i;case si.SCRIPT:if(sa(i,"Script"))return Gs(i);throw new Error("unsafe value used in a script context");case si.URL:return jc(i),sa(i,"URL")?Gs(i):jo(String(i));case si.RESOURCE_URL:if(sa(i,"ResourceURL"))return Gs(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function(n){return new L_(n)}(t)}bypassSecurityTrustStyle(t){return function(n){return new B_(n)}(t)}bypassSecurityTrustScript(t){return function(n){return new jp(n)}(t)}bypassSecurityTrustUrl(t){return function(n){return new Wd(n)}(t)}bypassSecurityTrustResourceUrl(t){return function(n){return new kn(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(fn))},n.\u0275prov=tt({factory:function(){return function(n){return new WD(n.get(fn))}(ke(Vu))},token:n,providedIn:"root"}),n})();const Ine=oB(vJ,"browser",[{provide:Xc,useValue:rV},{provide:K3,useValue:function(){VD.makeCurrent(),jD.init()},multi:!0},{provide:fn,useFactory:function(){return function(n){Yi=n}(document),document},deps:[]}]),One=[[],{provide:ju,useValue:"root"},{provide:la,useFactory:function(){return new la},deps:[]},{provide:_0,useClass:fne,multi:!0,deps:[fn,pn,Xc]},{provide:_0,useClass:Ene,multi:!0,deps:[fn]},[],{provide:rx,useClass:rx,deps:[nx,y0,a0]},{provide:yf,useExisting:rx},{provide:uV,useExisting:y0},{provide:y0,useClass:y0,deps:[fn]},{provide:oD,useClass:oD,deps:[pn]},{provide:nx,useClass:nx,deps:[_0,pn]},{provide:aV,useClass:Kte,deps:[]},[]];let qD=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:a0,useValue:t.appId},{provide:lV,useExisting:a0},Xte]}}}return n.\u0275fac=function(t){return new(t||n)(ke(n,12))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:One,imports:[fr,AJ]}),n})();"undefined"!=typeof window&&window;class Vne extends C{constructor(e,t){super()}schedule(e,t=0){return this}}class sx extends Vne{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let vV=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class cc extends vV{constructor(e,t=vV.now){super(e,()=>cc.delegate&&cc.delegate!==this?cc.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return cc.delegate&&cc.delegate!==this?cc.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const zne=new class extends cc{}(class extends sx{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}),Qc=new P(n=>n.complete());function b0(n){return n?function(n){return new P(e=>n.schedule(()=>e.complete()))}(n):Qc}function sn(...n){let e=n[n.length-1];return Re(e)?(n.pop(),Ve(n,e)):In(n)}function Fg(n,e){return new P(e?t=>e.schedule(Gne,0,{error:n,subscriber:t}):t=>t.error(n))}function Gne({error:n,subscriber:e}){e.error(n)}class ga{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return sn(this.value);case"E":return Fg(this.error);case"C":return b0()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new ga("N",e):ga.undefinedValueNotification}static createError(e){return new ga("E",void 0,e)}static createComplete(){return ga.completeNotification}}ga.completeNotification=new ga("C"),ga.undefinedValueNotification=new ga("N",void 0);class ox extends v{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(ox.dispatch,this.delay,new Wne(e,this.destination)))}_next(e){this.scheduleMessage(ga.createNext(e))}_error(e){this.scheduleMessage(ga.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(ga.createComplete()),this.unsubscribe()}}class Wne{constructor(e,t){this.notification=e,this.destination=t}}class Df extends se{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new qne(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new W;if(this.isStopped||this.hasError?o=C.EMPTY:(this.observers.push(e),o=new ne(this,e)),r&&e.add(e=new ox(e,r)),t)for(let a=0;a<s&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||zne).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class qne{constructor(e,t){this.time=e,this.value=t}}function is(n,e){return"function"==typeof e?t=>t.pipe(is((i,r)=>Ye(n(i,r)).pipe(be((s,o)=>e(i,s,r,o))))):t=>t.lift(new Yne(n))}class Yne{constructor(e){this.project=e}call(e,t){return t.subscribe(new Xne(e,this.project))}}class Xne extends Ae{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new _t(this),r=this.destination;r.add(i),this.innerSubscription=L(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const ax={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if("undefined"==typeof window)return ax.schedule(n,0);if(void 0===window.requestAnimationFrame)return ax.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let XD;function sie(n,e,t){let i=t;return function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function(n,e){if(!XD){const t=Element.prototype;XD=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&XD.call(n,e)}(n,r)||(i=s,0))),i}class aie{constructor(e,t){this.componentFactory=t.get(El).resolveComponentFactory(e)}create(e){return new lie(this.componentFactory,e)}}class lie{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Df(1),this.events=this.eventEmitters.pipe(is(i=>Pn(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(pn),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=ax.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{null!==this.componentRef?function(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=Hn.create({providers:[],parent:this.injector}),i=function(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],l=sie(a,e,r);-1!==l&&i[l].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Mr),this.implementsOnChanges=function(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(sh).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(be(o=>({name:r,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=ax.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new c_(s,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class cie extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const die={initialConfig:{},parse:{},rename:{}};class hie{constructor(e,t){this.configState=e,this.storedChanges={},this.options=Object.assign(Object.assign({},die),t)}addChanges(e){this.storedChanges=Object.assign(Object.assign({},this.storedChanges),e)}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s=i.snapshot,o=Object.assign(Object.assign(Object.assign({},r),s),t);for(const[a,l]of Object.entries(e))this.processChange(a,l,o);i.setConfig(o)}processChange(e,t,i){var r,s;const{options:{parse:o,rename:a}}=this,l=null!==(r=a[e])&&void 0!==r?r:e,c=t.currentValue,u=null!==(s=o[e])&&void 0!==s?s:o[l];if(null==c)delete i[l];else if(u)try{i[l]=u(c)}catch(h){console.warn(`Failed to parse ${e} = ${c}`,h.message)}else i[l]=c}}let fie=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new hie(this.configState,this.options)}ngOnInit(){var t;this._init=setTimeout(()=>this.initialize(),null!==(t=this.options.initialDelay)&&void 0!==t?t:0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return n.\u0275fac=function(t){!function(){throw new Error("invalid")}()},n.\u0275dir=Pt({type:n,features:[Fi]}),n})();const KD={boolean:n=>"false"!=`${n}`,json:n=>"string"==typeof n?JSON.parse(n):n,function:n=>{if("function"!=typeof n)throw new Error("Expected a javascript function");return n}};var QD;const If={production:!0,disableDbWorker:!0,acceptableViewerDomains:["https://portal.hubmapconsortium.org","https://portal.test.hubmapconsortium.org"],dbOptions:{ccfOwlUrl:"https://r5i95k35v5.us-east-2.awsapprunner.com/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:null!==(QD=localStorage.getItem("HUBMAP_TOKEN"))&&void 0!==QD?QD:"",useRemoteApi:!1,remoteApiEndpoint:"https://r5i95k35v5.us-east-2.awsapprunner.com/v1"},googleAnalyticsToken:"G-ERNVZ1Q4KE"};function Ei(n,e,t,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function EV(n,e){return function(t,i){e(t,i,n)}}function uc(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function Bi(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function CV(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function JD(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||CV()}const TV="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",cx=JD();class _ie{constructor(e,t,i="sessionStorage"){this.storage=function(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(e){return null}}(i),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function eI(n,e,t,i=600){const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}const AV={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function MV(n){return"string"==typeof n?AV[n.toUpperCase()]||AV.WHITE:n}function ux(n,e){if(!n)throw new Error(e||"Assertion failed")}const dc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},v0=dc.window||dc.self||dc.global,DV=dc.process||{};function Lg(){let n;if(cx&&v0.performance)n=v0.performance.now();else if(DV.hrtime){const e=DV.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}console;const Bg={debug:cx&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Sie={enabled:!0,level:0};function Al(){}const IV={},OV={once:!0};function Cie(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}let tI=(()=>{class n{constructor({id:t}={id:""}){this.id=t,this.VERSION=TV,this._startTs=Lg(),this._deltaTs=Lg(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new _ie("__probe-".concat(this.id,"__"),Sie),this.userData={},this.timeStamp("".concat(this.id," started")),function(n,e=["constructor"]){const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(s=>r===s)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Lg()-this._startTs).toPrecision(10))}getDelta(){return Number((Lg()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}assert(t,i){ux(t,i)}warn(t){return this._getLogFunction(0,t,Bg.warn,arguments,OV)}error(t){return this._getLogFunction(0,t,Bg.error,arguments)}deprecated(t,i){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(t,i){return this.error("`".concat(t,"` has been removed. Use `").concat(i,"` instead"))}probe(t,i){return this._getLogFunction(t,i,Bg.log,arguments,{time:!0,once:!0})}log(t,i){return this._getLogFunction(t,i,Bg.debug,arguments)}info(t,i){return this._getLogFunction(t,i,console.info,arguments)}once(t,i){return this._getLogFunction(t,i,Bg.debug||Bg.info,arguments,OV)}table(t,i,r){return i?this._getLogFunction(t,i,console.table||Al,r&&[r],{tag:Cie(i)}):Al}image({logLevel:t,priority:i,image:r,message:s="",scale:o=1}){return this._shouldLog(t||i)?cx?function({image:n,message:e="",scale:t=1}){if("string"==typeof n){const r=new Image;return r.onload=()=>{const s=eI(r,e,t);console.log(...s)},r.src=n,Al}const i=n.nodeName||"";if("img"===i.toLowerCase())return console.log(...eI(n,e,t)),Al;if("canvas"===i.toLowerCase()){const r=new Image;return r.onload=()=>console.log(...eI(r,e,t)),r.src=n.toDataURL(),Al}return Al}({image:r,message:s,scale:o}):function({image:n,message:e="",scale:t=1}){let i=null;try{i=et(5307)}catch(r){}return i?()=>i(n,{fit:"box",width:"".concat(Math.round(80*t),"%")}).then(r=>console.log(r)):Al}({image:r,message:s,scale:o}):Al}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(t){return this._storage.config[t]}set(t,i){this._storage.updateConfiguration({[t]:i})}time(t,i){return this._getLogFunction(t,i,console.time?console.time:console.info)}timeEnd(t,i){return this._getLogFunction(t,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,i){return this._getLogFunction(t,i,console.timeStamp||Al)}group(t,i,r={collapsed:!1}){r=NV({logLevel:t,message:i,opts:r});const{collapsed:s}=r;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,i,r={}){return this.group(t,i,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Al)}withGroup(t,i,r){this.group(t,i)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=RV(t)}_getLogFunction(t,i,r,s=[],o){if(this._shouldLog(t)){o=NV({logLevel:t,message:i,args:s,opts:o}),ux(r=r||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Lg();const a=o.tag||o.message;if(o.once){if(IV[a])return Al;IV[a]=Lg()}return i=function(n,e,t){if("string"==typeof e){const i=t.time?function(n,e=8){const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function(n,e,t){return!cx&&"string"==typeof n&&(e&&(e=MV(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=MV(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),r.bind(console,i,...o.args)}return Al}}return n.VERSION=TV,n})();function RV(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return ux(Number.isFinite(e)&&e>=0),e}function NV(n){const{logLevel:e,message:t}=n;n.logLevel=RV(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(n.args=i,typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return ux("string"===r||"object"===r),Object.assign(n,n.opts)}const Ri=new tI({id:"deck"}),Vi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Vi,"IDENTITY",{get:()=>Ri.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const Zc={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},PV={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},mn=new tI({id:"luma.gl"});function qo(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function dx(n){return"undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&Number.isFinite(n._version))}function Ci(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}function hx(n){return qo(dx(n),"Invalid WebGLRenderingContext"),n}function Ao(n){return qo(Ci(n),"Requires WebGL2"),n}const w0={};const E0=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(E0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Of=function(e){const t=this;this.gl=e,function(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(w0[i]=!0)}while(0!==i);for(i in w0)if(w0[i])return delete w0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=t.currentArrayBuffer,f.size=o,f.type=a,f.normalized=l,f.stride=c,f.offset=u,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{globalThis.console&&globalThis.console.log&&globalThis.console.log("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};Of.prototype.VERTEX_ARRAY_BINDING_OES=34229,Of.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new E0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Of.prototype.createVertexArrayOES=function(){const e=new E0(this);return this.vertexArrayObjects.push(e),e},Of.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Of.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof E0&&e.hasBeenBound&&e.ext===this)},Of.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function(n,e){w0[n]=!0,void 0!==e&&function(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=r?r.attribs[l]:null;if((!r||c.enabled!==u.enabled)&&(c.enabled?i.enableVertexAttribArray.call(t,l):i.disableVertexAttribArray.call(t,l)),c.enabled){let h=!1;(!r||c.buffer!==u.buffer)&&(o!==c.buffer&&(i.bindBuffer.call(t,34962,c.buffer),o=c.buffer),h=!0),(h||c.cached!==u.cached)&&i.vertexAttribPointer.call(t,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const kV="OES_element_index",FV="WEBGL_draw_buffers",LV="WEBGL_debug_renderer_info",br=n=>Ci(n)?void 0:0,Wie={3074:n=>Ci(n)?void 0:36064,35723:n=>Ci(n)?void 0:4352,35977:br,32937:br,36795:(n,e)=>{const t=Ci(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(LV);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(LV);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:br,35071:br,37447:br,36063:(n,e)=>{if(!Ci(n)){const t=n.getExtension(FV);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:br,35374:br,35377:br,34852:n=>{if(!Ci(n)){const e=n.getExtension(FV);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(kV)?2147483647:65535,33001:n=>n.getExtension(kV)?16777216:65535,33e3:n=>16777216,37157:br,35373:br,35657:br,36183:br,37137:br,34045:br,35978:br,35979:br,35968:br,35376:br,35375:br,35659:br,37154:br,35371:br,35658:br,35076:br,35077:br,35380:br},BV="ANGLE_instanced_arrays",VV={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{qo(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[BV]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){qo(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{qo(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{qo(!1)},deleteQuery:()=>{qo(!1)},beginQuery:()=>{qo(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},nI={readBuffer:(n,e,t)=>{Ci(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:s}=function(n,e){return{webgl2:Ci(n),ext:n.getExtension("ANGLE_instanced_arrays")}}(n);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!Ci(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>{if(!Ci(n))switch(r){case 32937:return new Int32Array([0])}return n.getInternalformatParameter(t,i,r)},getTexParameter(n,e,t,i){switch(i){case 34046:const{extensions:r}=n.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function(n,e,t){const i=Wie[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function rre(n,{extension:e,target:t,target2:i}){const r=VV[e];qo(r);const{meta:s={}}=r,{suffix:o=""}=s,a=n.getExtension(e);for(const l of Object.keys(r)){const c=`${l}${o}`;let u=null;"meta"===l||"function"==typeof n[l]||(a&&"function"==typeof a[c]?u=(...h)=>a[c](...h):"function"==typeof r[l]&&(u=r[l].bind(t))),u&&(t[l]=u,i[l]=u)}}globalThis.polyfillContext=function(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Of(this)),this.__OESVertexArrayObject))}}(n),function(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&rre(n,{extension:t,target:n.luma,target2:n})}(n,VV),function(n,{target:e,target2:t}){Object.keys(nI).forEach(i=>{if("function"==typeof nI[i]){const r=n[i]?n[i].bind(n):()=>{},s=nI[i].bind(null,n,r);e[i]=s,t[i]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const iI={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},lh=(n,e,t)=>e?n.enable(t):n.disable(t),jV=(n,e,t)=>n.hint(t,e),ja=(n,e,t)=>n.pixelStorei(t,e);function x0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const are={3042:lh,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:lh,2885:(n,e)=>n.cullFace(e),2929:lh,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:lh,35723:jV,36006:(n,e)=>{const t=Ci(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:jV,2849:(n,e)=>n.lineWidth(e),32823:lh,32824:"polygonOffset",10752:"polygonOffset",35977:lh,32938:"sampleCoverage",32939:"sampleCoverage",3089:lh,3088:(n,e)=>n.scissor(...e),2960:lh,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:ja,3317:ja,37440:ja,37441:ja,37443:ja,3330:ja,3332:ja,3331:ja,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:ja,32878:ja,3316:ja,3315:ja,32877:ja,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=x0(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=x0(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=x0(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=x0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=x0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function rs(n,e,t){return void 0!==e[n]?e[n]:t[n]}const lre={blendEquation:(n,e,t)=>n.blendEquationSeparate(rs(32777,e,t),rs(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(rs(32969,e,t),rs(32968,e,t),rs(32971,e,t),rs(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(rs(32824,e,t),rs(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(rs(32938,e,t),rs(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,rs(2962,e,t),rs(2967,e,t),rs(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,rs(34816,e,t),rs(36003,e,t),rs(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,rs(2964,e,t),rs(2965,e,t),rs(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,rs(34817,e,t),rs(34818,e,t),rs(34819,e,t))},UV={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},Jc=(n,e)=>n.isEnabled(e),zV={3042:Jc,2884:Jc,2929:Jc,3024:Jc,32823:Jc,32926:Jc,32928:Jc,3089:Jc,2960:Jc,35977:Jc};function HV(n){for(const e in n)return!1;return!0}function cre(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function GV(n,e){const t=n[e].bind(n);n[e]=function(...r){const s=r[0];return s in n.state.cache&&n.state.enable?n.state.cache[s]:t(...r)},Object.defineProperty(n[e],"name",{value:`${e}-from-cache`,configurable:!1})}function ure(n,e,t){const i=n[e].bind(n);n[e]=function(...s){const{valueChanged:o,oldValue:a}=t(n.state._updateCache,...s);return o&&i(...s),a},Object.defineProperty(n[e],"name",{value:`${e}-to-cache`,configurable:!1})}class hre{constructor(e,{copyState:t=!1,log:i=(()=>{})}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function(n,e){if("number"==typeof(e=e||iI)){const r=e,s=zV[r];return s?s(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const s=zV[r];i[r]=s?s(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},iI),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){qo(this.stateStack.length>0),Xu(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){qo(void 0!==s);const o=e[s],a=this.cache[s];cre(o,a)||(t=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:i}}}function $V(n,e={}){const{enable:t=!0,copyState:i}=e;if(qo(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new hre(n,{copyState:i}),function(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const s in UV)ure(n,s,UV[s]);GV(n,"getParameter"),GV(n,"isEnabled")}return n.state.enable=t,n}function WV(n){qo(n.state),n.state.pop()}function Xu(n,e){if(qo(dx(n),"setParameters requires a WebGL context"),HV(e))return;const t={};for(const r in e){const s=Number(r),o=are[r];o&&("string"==typeof o?t[o]=!0:o(n,e[r],s))}const i=n.state&&n.state.cache;if(i)for(const r in t)lre[r](n,e,i)}function hc(n,e,t){if(HV(e))return t(n);const{nocatch:i=!0}=e;let r;if(function(n){n.state||$V(n,{copyState:!1}),n.state.push()}(n),Xu(n,e),i)r=t(n),WV(n);else try{r=t(n)}finally{WV(n)}return r}function fx(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent;return!!(e&&e.indexOf("Electron")>=0)}()}function Vg(n){const{luma:e}=n;if(n.canvas&&e){const{clientWidth:t}=e.canvasSizeInfo;return t?n.drawingBufferWidth/t:1}return 1}function rI(n,e,t=!0){return function(n,e,t,i,r){const s=qV(n[0],e,t);let o=YV(n[1],e,i,r),a=qV(n[0]+1,e,t);const l=a===t-1?a:a-1;let c;return a=YV(n[1]+1,e,i,r),r?(a=0===a?a:a+1,c=o,o=a):c=a===i-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}(e,Vg(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function qV(n,e,t){return Math.min(Math.round(n*e),t-1)}function YV(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const sI=fx(),bre=sI&&"undefined"!=typeof document,XV={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function KV(n={}){qo(sI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},XV,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:s}=n,o=function({canvas:n,width:e=800,height:t=600,onError:i}){let r;return"string"==typeof n?(bre&&"complete"===document.readyState||i(`createGLContext called on canvas '${n}' before page was loaded`),r=document.getElementById(n)):n?r=n:(r=document.createElement("canvas"),r.id="lumagl-canvas",r.style.width=Number.isFinite(e)?`${e}px`:"100%",r.style.height=Number.isFinite(t)?`${t}px`:"100%",document.body.insertBefore(r,document.body.firstChild)),r}({canvas:s,width:e,height:t,onError:i});return r=function(n,e){const{onError:t}=e;let i=null;const r=l=>i=l.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${i||"Unknown error"}`)}(o,n),r?(r=oI(r,n),function(n){const e=Ci(n)?"WebGL2":"WebGL1",t=function(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n);mn.info(1,`${e}${n.debug?" debug":""} context ${t?`(${t.vendor},${t.renderer})`:""}`)()}(r),r):null}function oI(n,e={}){if(!n||n._instrumented)return n;n._version=n._version||function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},XV,e);const{manageState:t,debug:i}=e;return t&&$V(n,{copyState:!1,log:(...r)=>mn.log(1,...r)()}),sI&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),mn.level=Math.max(mn.level,1)):mn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function QV(){let n;if("undefined"!=typeof window&&window.performance)n=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class ZV{constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=QV(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(QV()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class aI{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof ZV?e:new ZV(t,i)),this.stats[t]}}const S0="8.5.12",Rf=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new aI({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==S0)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${S0}`);function on(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function lI(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return on(void 0!==i,`Accessing undefined constant GL.${e}`),i}function ch(n,e){e=Number(e);for(const t in n)if(n[t]===e)return`GL.${t}`;return String(e)}globalThis.luma||(fx()&&mn.log(1,`luma.gl ${S0} - set luma.log.level=1 (or higher) to trace rendering`)(),globalThis.luma=globalThis.luma||{VERSION:S0,version:S0,log:mn,stats:Rf,globals:{modules:{},nodeIO:{}}}),globalThis;const cI={};function ma(n="id"){return cI[n]=cI[n]||1,`${n}-${cI[n]++}`}function JV(n){return on("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function jg(n){let e=!0;for(const t in n){e=!1;break}return e}function ej(n,e,t,i){const r=`See luma.gl ${t} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(n);i.forEach(o=>{s.methodName||(s[o]=()=>{throw mn.removed(`Calling removed method ${e}.${o}: `,r)(),new Error(o)})})}const Ug="Resource subclass must define virtual methods";class Ku{get[Symbol.toStringTag](){return"Resource"}constructor(e,t={}){hx(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||ma(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(e=this.handle){if("function"!=typeof e)return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e,t={}){on(e=lI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Ci(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension)){const a=r.webgl1,l="webgl2"in r?r.webgl2:r.webgl1;return s?l:a}}return this._getParameter(e,t)}getParameters(e={}){const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},s=Ci(this.gl),o={},a=t||Object.keys(r);for(const l of a){const c=r[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const h=i?ch(this.gl,l):l;o[h]=this.getParameter(l,e),i&&"GLenum"===c.type&&(o[h]=ch(this.gl,o[h]))}}return o}setParameter(e,t){on(e=lI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Ci(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=lI(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return ej(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(Ug)}_deleteHandle(){throw new Error(Ug)}_bindHandle(e){throw new Error(Ug)}_getOptsFromHandle(){throw new Error(Ug)}_getParameter(e,t){throw new Error(Ug)}_setParameter(e,t){throw new Error(Ug)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=Rf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get(`${e}s Created`).incrementCount(),t.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Rf.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,t=this[Symbol.toStringTag]){const i=Rf.get("Memory Usage");i.get("GPU Memory").addCount(e),i.get(`${t} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this[Symbol.toStringTag]){const t=Rf.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}function uI(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function C0(n,{clamped:e=!0}={}){switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ore({data:n,width:e,height:t}){const i=Math.round(e/2),r=Math.round(t/2),s=new Uint8Array(i*r*4);for(let o=0;o<r;o++)for(let a=0;a<i;a++)for(let l=0;l<4;l++)s[4*(o*i+a)+l]=n[4*(2*o*e+2*a)+l];return{data:s,width:i,height:r}}function dI(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=t;for(const a in i)a in e&&mn.removed(`${n}.${a}`,i[a]?`${n}.${i[a]}`:"N/A")();for(const a in r)a in e&&mn.deprecated(`${n}.${a}`,`${n}.${r[a]}`)();let o=null;for(const a in s)if(a in e){const l=s[a];mn.deprecated(`${n}.${a}`,`${n}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const Rre={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Nre={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class _a{static getBytesPerElement(e){return C0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return on(e.size),C0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new _a(...[Rre,...e])}constructor(...e){e.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return _a.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return _a.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=dI("Accessor",e,Nre)).type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const nj={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Pre={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:nj},kre={removedProps:nj};class lr extends Ku{get[Symbol.toStringTag](){return"Buffer"}constructor(e,t={}){super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/_a.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/_a.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=dI("Buffer",e,Pre),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=dI("Buffer",e,kre))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new _a(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;on(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(Ao(this.gl),this.gl.bufferSubData(this.target,i,t,r,s)):this.gl.bufferSubData(o,i,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData({sourceBuffer:e,readOffset:t=0,writeOffset:i=0,size:r}){const{gl:s}=this;return Ao(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,t,i,r),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}={}){Ao(this.gl);const s=C0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=i;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,r||o),c=a+l);const u=Math.min(o,l);return on((r=r||u)<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}={}){return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(on(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:t=this.accessor&&this.accessor.index}={}){return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,t=0,i=e.byteLength+t){on(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=uI(e);return on(s),this.setAccessor(new _a(this.accessor,{type:s})),this}_setByteLength(e,t=this.usage){on(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/C0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new _a(this.accessor,{type:uI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return mn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return mn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return mn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return mn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new _a(this.accessor,e),this}}const hI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},ij={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},rj={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Bre=[9729,9728],sj=globalThis.WebGLBuffer||function(){};class Nf extends Ku{get[Symbol.toStringTag](){return"Texture"}static isSupported(e,t={}){const{format:i,linearFiltering:r}=t;let s=!0;return i&&(s=s&&function(n,e){const t=hI[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=Ci(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),s=s&&(!r||function(n,e){const t=hI[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,t){const{id:i=ma("texture"),handle:r,target:s}=t;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let t=e.data;if(t instanceof Promise)return t.then(k=>this.initialize(Object.assign({},e,{pixels:k,data:k}))),this;const i="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u}=e;t||(t=r);let{width:h,height:f,dataFormat:g,type:m,compressed:A=!1,mipmaps:I=!0}=e;const{depth:G=0}=e;return({width:h,height:f,compressed:A,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:A,data:t,width:h,height:f})),this.width=h,this.height=f,this.depth=G,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),I&&this._isNPOT()&&(mn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),I=!1,this._updateForNPOT(l)),this.mipmaps=I,this.setImageData({data:t,width:h,height:f,depth:G,format:s,type:m,dataFormat:g,border:o,mipmaps:I,parameters:c,compressed:A}),I&&this.generateMipmap(),this.setParameters(l),a&&(this.data=t),i&&(this._video={video:t,parameters:l,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:t,mipmaps:i=!1}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(e={}){return this._isNPOT()?(mn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),hc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;c||(c=i),({type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:c,width:h,height:f}));const{gl:A}=this;A.bindTexture(this.target,this.handle);let I=null;({data:c,dataType:I}=this._getDataType({data:c,compressed:m}));let G,k=0;return hc(this.gl,l,()=>{switch(I){case"null":A.texImage2D(t,r,s,h,f,o,g,u,c);break;case"typed-array":A.texImage2D(t,r,s,h,f,o,g,u,c,a);break;case"buffer":G=Ao(A),G.bindBuffer(35052,c.handle||c),G.texImage2D(t,r,s,h,f,o,g,u,a),G.bindBuffer(35052,null);break;case"browser-object":Ci(A)?A.texImage2D(t,r,s,h,f,o,g,u,c):A.texImage2D(t,r,s,g,u,c);break;case"compressed":for(const[oe,we]of c.entries())A.compressedTexImage2D(t,oe,we.format,we.width,we.height,o,we.data),k+=we.levelSize;break;default:on(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===I?k:c&&c.byteLength?c.byteLength:this.width*this.height*(ij[this.dataFormat]||4)*(rj[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:t=null,data:i=null,x:r=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:f=!1,offset:g=0,border:m=this.border,parameters:A={}}){if(({type:u,dataFormat:h,compressed:f,width:o,height:a}=this._deduceParameters({format:c,type:u,dataFormat:h,compressed:f,data:i,width:o,height:a})),on(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=t),i&&i.data){const I=i;i=I.data,o=I.shape[0],a=I.shape[1]}i instanceof lr&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),hc(this.gl,A,()=>{if(f)this.gl.compressedTexSubImage2D(e,l,r,s,o,a,c,i);else if(null===i)this.gl.texSubImage2D(e,l,r,s,o,a,h,u,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,l,r,s,o,a,h,u,i,g);else if(i instanceof sj){const I=Ao(this.gl);I.bindBuffer(35052,i),I.texSubImage2D(e,l,r,s,o,a,h,u,g),I.bindBuffer(35052,null)}else Ci(this.gl)?Ao(this.gl).texSubImage2D(e,l,r,s,o,a,h,u,i):this.gl.texSubImage2D(e,l,r,s,h,u,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return mn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType({data:e,compressed:t=!1}){return t?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof lr?{data:e.handle,dataType:"buffer"}:e instanceof sj?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:l}=e;const c=hI[t];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:l,width:r,height:s,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},on(r,"Could not deduced texture size"),on(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),on(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:on(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(Ci(this.gl)||!this.width||!this.height||JV(this.width)&&JV(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Bre.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Vre(n,e){return on("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error(`Could not load image ${n}.`)),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class ya extends Nf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Nf.isSupported(e,t)}constructor(e,t={}){hx(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Vre(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Pf="EXT_color_buffer_float",oj={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Pf,bpp:2},33327:{gl2:Pf,bpp:4},34842:{gl2:Pf,bpp:8},33326:{gl2:Pf,bpp:4},33328:{gl2:Pf,bpp:8},34836:{gl2:Pf,bpp:16},35898:{gl2:Pf,bpp:4}};class zg extends Ku{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e,{format:t}={format:null}){return!t||function(n,e,t){const i=t[e];if(!i)return!1;const r=Ci(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,oj)}static getSamplesForFormat(e,{format:t}){return e.getInternalformatParameter(36161,t,32937)}constructor(e,t={}){super(e,t),this.initialize(t),Object.seal(this)}initialize({format:e,width:t=1,height:i=1,samples:r=0}){return on(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&Ci(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,e,t,i):this.gl.renderbufferStorage(36161,e,t,i),this.format=e,this.width=t,this.height=i,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*oj[this.format].bpp),this}resize({width:e,height:t}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const dj="clear: bad arguments";function pI(n,{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}={}){const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),on(0!==o,dj),hc(n,s,()=>{n.clear(o)})}function hj(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function li(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){hj(s,i,r,o,a,"next",l)}function a(l){hj(s,i,r,o,a,"throw",l)}o(void 0)})}}const gI=[34069,34070,34071,34072,34073,34074];let Wre=(()=>{class n extends Nf{get[Symbol.toStringTag](){return"TextureCube"}constructor(t,i={}){hx(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(t={}){const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage({face:t,data:i,x:r=0,y:s=0,mipmapLevel:o=0}){return this._subImage({target:t,data:i,x:r,y:s,mipmapLevel:o})}setCubeMapImageData({width:t,height:i,pixels:r,data:s,border:o=0,format:a=6408,type:l=5121}){var c=this;return li(function*(){const{gl:u}=c,h=r||s,f=yield Promise.all(gI.map(g=>{const m=h[g];return Promise.all(Array.isArray(m)?m:[m])}));c.bind(),gI.forEach((g,m)=>{f[m].length>1&&!1!==c.opts.mipmaps&&mn.warn(`${c.id} has mipmap and multiple LODs.`)(),f[m].forEach((A,I)=>{t&&i?u.texImage2D(g,I,a,t,i,o,a,l,A):u.texImage2D(g,I,a,a,l,A)})}),c.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:s,pixels:o,data:a,border:l=0,format:c=6408,type:u=5121}=t,{gl:h}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(g=>this.setImageDataForFace(Object.assign({},t,{face:i,data:g,pixels:g}))):this.width||this.height?h.texImage2D(i,0,c,r,s,l,c,u,f):h.texImage2D(i,0,c,c,u,f),this}}return n.FACES=gI,n})();class qre extends Nf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Ci(e)}constructor(e,t={}){Ao(e),super(e,t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1})),this.initialize(t),Object.seal(this)}setImageData({level:e=0,dataFormat:t=6408,width:i,height:r,depth:s=1,border:o=0,format:a,type:l=5121,offset:c=0,data:u,parameters:h={}}){return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),hc(this.gl,h,()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,t,i,r,s,o,a,l,u),u instanceof lr&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,t,i,r,s,o,a,l,c))}),this._trackAllocatedMemory(u&&u.byteLength?u.byteLength:this.width*this.height*this.depth*(ij[this.dataFormat]||4)*(rj[this.type]||1),"Texture"),this.loaded=!0,this}}function fj(n,e){on(n instanceof ya||n instanceof Wre||n instanceof qre);const t=n.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=n;return new t(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e))}function Yre(n,e){const{gl:t,width:i,height:r,id:s}=n;return new ks(t,Object.assign({},e,{id:`framebuffer-for-${s}`,width:i,height:r,attachments:{36064:n}}))}function px(n,e={}){const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:h}=T0(n);on(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,l=l||u.height,36064===s&&null===g&&(s=1028),on(m[s]),c=c||m[s].type,o=function(n,e,t,i,r){if(n)return n;return new(C0(e=e||5121,{clamped:!1}))(i*r*function(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return on(!1),0}}(t))}(o,c,r,a,l),c=c||uI(o);const A=f.bindFramebuffer(36160,g);return f.readPixels(t,i,a,l,r,c,o),f.bindFramebuffer(36160,A||null),h&&u.delete(),o}function mI(n,{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}={}){let i=px(n,{sourceAttachment:e}),{width:r,height:s}=n;for(;s>t;)({data:i,width:r,height:s}=Ore({data:i,width:r,height:s}));!function({data:n,width:e,height:t,bytesPerPixel:i=4,temp:r}){const s=e*i;r=r||new Uint8Array(s);for(let o=0;o<t/2;++o){const a=o*s,l=(t-o-1)*s;r.set(n.subarray(a,a+s)),n.copyWithin(a,l,l+s),n.set(r,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),l=a.createImageData(r,s);return l.data.set(i),a.putImageData(l,0,0),o.toDataURL()}function T0(n){return n instanceof ks?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:Yre(n),deleteFramebuffer:!0}}const pj="Multiple render targets not supported";class ks extends Ku{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e,t={}){const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let s=!0;return i&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new ks(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Ao(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Ao(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,t={}){super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:t=1,attachments:i=null,color:r=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l,drawBuffers:c}){if(on(e>=0&&t>=0,"Width and height need to be integers"),this.width=e,this.height=t,i)for(const u in i){const h=i[u];(Array.isArray(h)?h[0]:h).resize({width:e,height:t})}else i=this._createDefaultAttachments(r,s,o,e,t);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:t,drawBuffers:i,clearAttachments:r=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:r,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return t&&this._setReadBuffer(t),i&&this._setDrawBuffers(i),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:t,height:i}=e;if(null===this.handle)return on(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&mn.log(2,`Resizing framebuffer ${this.id} to ${t}x${i}`)();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e,{clearAttachments:t=!1,resizeAttachments:i=!0}={}){const r={};t&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){on(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),l=r[a];let c=l;if(c)if(c instanceof zg)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,h=0,f=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});else this._unattach(a);i&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function(n){return(ks.STATUS||{})[n]||`Framebuffer error ${n}`}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(e={}){const{color:t,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&pI(this.gl,{color:t,depth:i,stencil:r}),s.forEach((a,l)=>{!function(n,{framebuffer:e=null,buffer:t=6144,drawBuffer:i=0,value:r=[0,0,0,0]}={}){Ao(n),hc(n,{framebuffer:e},()=>{switch(t){case 6144:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;n.clearBufferfi(34041,0,s,o);break;default:on(!1,dj)}})}(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return mn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return mn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return mn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return mn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return mn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return mn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:t=0,y:i=0,width:r,height:s}){const o=Ao(this.gl),a=o.bindFramebuffer(36008,this.handle);return 0===t&&0===i&&void 0===r&&void 0===s?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,t,i,r,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=ch(this.gl,r)),r}getAttachmentParameters(e=36064,t,i=this.constructor.ATTACHMENT_PARAMETERS||[]){const r={};for(const s of i)r[t?ch(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return r}getParameters(e=!0){const t=Object.keys(this.attachments),i={};for(const r of t){const s=Number(r);i[e?ch(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return"undefined"!=typeof window&&window.open(mI(this),"luma-debug-texture"),this}log(e=0,t=""){if(e>mn.level||"undefined"==typeof window)return this;t=t||`Framebuffer ${this.id}`;const i=mI(this,{targetMaxHeight:100});return mn.image({logLevel:e,message:t,image:i},t)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new ya(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&i?(o=o||{},o[33306]=new zg(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new zg(this.gl,{id:`${this.id}-depth`,format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&on(!1),o}_unattach(e){const t=this.attachments[e];!t||(t instanceof zg?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:t}){const{gl:i}=this;i.framebufferRenderbuffer(36160,e,36161,t.handle),this.attachments[e]=t}_attachTexture({attachment:e=36064,texture:t,layer:i,level:r}){const{gl:s}=this;switch(s.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:Ao(s).framebufferTextureLayer(36160,e,t.target,r,i);break;case 34067:const a=function(n){return n<34069?n+34069:n}(i);s.framebufferTexture2D(36160,e,a,t.handle,r);break;case 3553:s.framebufferTexture2D(36160,e,3553,t.handle,r);break;default:on(!1,"Illegal texture type")}s.bindTexture(t.target,null),this.attachments[e]=t}_setReadBuffer(e){const t=function(n){return Ci(n)?n:null}(this.gl);t?t.readBuffer(e):on(36064===e||1029===e,pj),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=Ao(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):on(1===e.length&&(36064===e[0]||1029===e[0]),pj)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in gj)void 0===n.luma.caps[e]&&(n.luma.caps[e]=_j(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}ks.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const gj={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(n){const e=new ya(n,{format:6408,type:5126,dataFormat:6408}),t=new ks(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]};function _I(n,e){return mj(n,e)}function mj(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>_j(n,t))}function _j(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function(n,e){const t=gj[e];let i;on(t,e);const r=Ci(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&Boolean(n.getExtension(s))}else"string"==typeof r?i=Boolean(n.getExtension(r)):"boolean"==typeof r?i=r:on(!1);return i}(n,e)),n.luma.caps[e]||mn.log(2,`Feature: ${e} not supported`)(),n.luma.caps[e]}class yI{constructor(e,t){this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=t.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return at(at({},this.source.getAccessor()),this.opts)}}const A0=new class{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,t,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=r||e&&e.constructor||Float32Array,u=t*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let h;l&&(h=l*i+s);const f=this._allocate(c,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,t,i,r){let s=Math.max(Math.ceil(t*this.props.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return i&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,s=t.findIndex(o=>o.byteLength>=r);s<0?t.push(i):(s>0||t.length<this.props.poolSize)&&t.splice(s,0,i),t.length>this.props.poolSize&&t.shift()}},ose=1/Math.PI*180,ase=1/180*Math.PI,Dr={};function cse(n,{precision:e=Dr.precision||4}={}){return n=function(n){return Math.round(n/Dr.EPSILON)*Dr.EPSILON}(n),`${parseFloat(n.toPrecision(e))}`}function uh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Qu(n,e,t){if(uh(n)){t=t||function(n){return n.clone?n.clone():new Array(n.length)}(n);for(let i=0;i<t.length&&i<n.length;++i)t[i]=e(n[i],i,t);return t}return e(n)}function yj(n){return function(n,e){return Qu(n,t=>t*ase,void 0)}(n)}function dse(n){return function(n,e){return Qu(n,t=>t*ose,void 0)}(n)}function Ua(n,e,t){return Qu(n,i=>Math.max(e,Math.min(t,i)))}function gx(n,e,t){return uh(n)?n.map((i,r)=>gx(i,e[r],t)):t*e+(1-t)*n}function M0(n,e,t){const i=Dr.EPSILON;t&&(Dr.EPSILON=t);try{if(n===e)return!0;if(uh(n)&&uh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!M0(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Dr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Dr.EPSILON=i}}function Zu(n,e){if(!n)throw new Error(`math.gl assertion ${e}`)}Dr.EPSILON=1e-12,Dr.debug=!1,Dr.precision=4,Dr.printTypes=!1,Dr.printDegrees=!1,Dr.printRowMajor=!0;class mx extends(function(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Zu(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:uh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Dr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+cse(this[i],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!M0(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Dr.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function nr(n){if(!Number.isFinite(n))throw new Error(`Invalid number ${n}`);return n}function _x(n,e,t=""){if(Dr.debug&&!function(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error(`math.gl: ${t} some fields set to invalid numbers'`);return n}const bj={};function bI(n,e){bj[n]||(bj[n]=!0,console.warn(`${n} has been removed in version ${e}, see upgrade guide for more information`))}class _se extends mx{get ELEMENTS(){return Zu(!1),0}copy(e){return Zu(!1),this}get x(){return this[0]}set x(e){this[0]=nr(e)}get y(){return this[1]}set y(e){this[1]=nr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return nr(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return nr(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Zu(e>=0&&e<this.ELEMENTS,"index is out of range"),nr(this[e])}setComponent(e,t){return Zu(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var eu=1e-6,ba="undefined"!=typeof Float32Array?Float32Array:Array;function vj(){var n=new ba(3);return ba!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function wj(n,e,t){var i=new ba(3);return i[0]=n,i[1]=e,i[2]=t,i}function Ej(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function D0(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2];return n[0]=r*l-s*a,n[1]=s*o-i*l,n[2]=i*a-r*o,n}function vI(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o,n}function wI(n,e,t){var i=e[0],r=e[1],s=e[2];return n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8],n}function xj(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],l=e[1],c=e[2],u=r*c-s*l,h=s*a-i*c,f=i*l-r*a,g=r*f-s*h,m=s*u-i*f,A=i*h-r*u,I=2*t[3];return h*=I,f*=I,m*=2,A*=2,n[0]=a+(u*=I)+(g*=2),n[1]=l+h+m,n[2]=c+f+A,n}function Sj(n,e,t,i){var r=[],s=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2],n}function Cj(n,e,t,i){var r=[],s=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2],n}function Tj(n,e,t,i){var r=[],s=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2],n}function Aj(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&Ej(n,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function Mj(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;return n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o,n}vj();const EI=[0,0,0],Dj={};class Mo extends _se{static get ZERO(){return Dj.ZERO=Dj.ZERO||Object.freeze(new Mo(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&uh(e)?this.copy(e):(Dr.debug&&(nr(e),nr(t),nr(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Dr.debug&&(nr(e.x),nr(e.y),nr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=nr(e)}angle(e){return Aj(this,e)}cross(e){return D0(this,this,e),this.check()}rotateX({radians:e,origin:t=EI}){return Sj(this,this,t,e),this.check()}rotateY({radians:e,origin:t=EI}){return Cj(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=EI}){return Tj(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return vI(this,this,e),this.check()}transformAsVector(e){return Mj(this,this,e),this.check()}transformByMatrix3(e){return wI(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return xj(this,this,e),this.check()}}const Ij=new Mo;function Hg(n,e,t,i){Ij.set(n,e,t);const r=Ij.len();return{distance:i/r,normal:new Mo(-n/r,-e/r,-t/r)}}function Ise(n){return n-Math.fround(n)}let O0;function xI(n,{size:e=1,startIndex:t=0,endIndex:i}){Number.isFinite(i)||(i=n.length);const r=(i-t)/e;O0=A0.allocate(O0,r,{type:Float32Array,size:2*e});let s=t,o=0;for(;s<i;){for(let a=0;a<e;a++){const l=n[s++];O0[o+a]=l,O0[o+a+e]=Ise(l)}o+=2*e}return O0.subarray(0,r*e*2)}function yx(n){return n.stride||n.size*n.bytesPerElement}function Oj(n,e){e.offset&&Ri.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=yx(n),s=("vertexOffset"in e?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return Sn(at({},e),{offset:s,stride:t})}function fc(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const Rj=[],Nj=[];function bx(n,e=0,t=1/0){let i=Rj;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(Nj.length=n.length,i=Nj):i=Rj,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function Pj(n){return n&&n[Symbol.asyncIterator]}function SI(n,e=(()=>!0)){return Array.isArray(n)?kj(n,e,[]):e(n)?[n]:[]}function kj(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?kj(r,e,t):e(r)&&t.push(r)}return t}function Pse({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s);return n}const kse=[],vx=[[0,1/0]];function CI({source:n,target:e,start:t=0,end:i,size:r,getData:s}){const o=n.length,a=(i=i||e.length)-t;if(o>a)return void e.set(n.subarray(0,a),t);if(e.set(n,t),!s)return;let l=o;for(;l<a;){const c=s(l,n);for(let u=0;u<r;u++)e[t+l]=c[u]||0,l++}}const Bse={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function Fj(n,e){return n?(Number.isFinite(n)&&(n={duration:n}),n.type=n.type||"interpolation",at(at(at({},Bse[n.type]),e),n)):null}function Lj(n,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function Bj(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function Vj(n){n.push(n.shift())}function TI(n,e){const{doublePrecision:t,settings:i,value:r,size:s}=n,o=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function jj({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*o,l=t.byteOffset,c=t.startIndices,u=r&&c,h=TI(t,e),f=t.state.constant;if(!u&&i>=h)return;const g=f?t.value:t.getBuffer().getData({srcByteOffset:l});if(t.settings.normalized&&!f){const G=s;s=(k,oe)=>t._normalizeConstant(G(k,oe))}const m=f?(G,k)=>s(g,k):(G,k)=>s(g.subarray(G,G+a),k),A=n.getData({length:i}),I=new Float32Array(h);(function({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return CI({source:n,target:e,size:t,getData:i}),e;let o=0,a=0;const l=i&&((u,h)=>i(u+a,h)),c=Math.min(r.length,s.length);for(let u=1;u<c;u++){const h=r[u]*t,f=s[u]*t;CI({source:n.subarray(o,h),target:e,start:a,end:f,size:t,getData:l}),o=h,a=f}a<e.length&&CI({source:[],target:e,start:a,size:t,getData:l})})({source:A,target:I,sourceStartIndices:r,targetStartIndices:c,size:a,getData:m}),n.byteLength<I.byteLength+l&&n.reallocate(I.byteLength+l),n.subData({data:I,offset:l})}class AI extends class{constructor(e,t){this.gl=e,this.id=t.id,this.size=t.size;const i=t.logicalType||t.type,r=5130===i;let{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),t.defaultValue=s;let o=i;r?o=5126:!o&&t.isIndexed?o=e&&_I(e,"ELEMENT_INDEX_UINT32")?5125:5123:o||(o=5126),t.logicalType=i,t.type=o;let a=function(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||o||5126);this.shaderAttributes={},this.doublePrecision=r,r&&!1===t.fp64&&(a=Float32Array),t.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=t,this.state={externalBuffer:null,bufferAccessor:t,allocatedValue:null,constant:!1},this._buffer=null,this.setData(t)}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new lr(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*yx(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),A0.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function(n,e){const t=Oj(n,e);return{high:t,low:Sn(at({},t),{offset:t.offset+4*n.size})}}(this.getAccessor(),t||{});return i[e]=new yI(this,s.high),i["".concat(e,"64Low")]=r?new yI(this,s.low):new Float32Array(this.size),i}if(t){const i=Oj(this.getAccessor(),t);return{[e]:new yI(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(e){const{state:t}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof lr&&(e={buffer:e});const i=at(at({},this.settings),e);if(t.bufferAccessor=i,e.constant){let r=e.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),t.constant&&this._areValuesEqual(r,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=r}else if(e.buffer){const r=e.buffer;t.externalBuffer=r,t.constant=!1,this.value=e.value;const s=e.value instanceof Float64Array;i.type=e.type||r.accessor.type,i.bytesPerElement=r.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=yx(i)}else if(e.value){this._checkExternalBuffer(e);let r=e.value;t.externalBuffer=null,t.constant=!1,this.value=r,i.bytesPerElement=r.BYTES_PER_ELEMENT,i.stride=yx(i);const{buffer:s,byteOffset:o}=this;this.doublePrecision&&r instanceof Float64Array&&(r=xI(r,i));const a=r.byteLength+o+2*i.stride;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:r,offset:o}),i.type=e.type||s.accessor.type}return!0}updateSubBuffer(e={}){const{value:t}=this,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?xI(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:t=!1}){const{state:i}=this,r=i.allocatedValue,s=A0.allocate(r,e+1,{size:this.size,type:this.defaultType,copy:t});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),t&&r&&o.subData({data:r instanceof Float64Array?xI(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!e.constant&&t){const i=this.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Ri.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(s){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)t[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}{constructor(e,t={}){super(e,t);const{transition:i=!1,noAlloc:r=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:l=null}=t;Object.assign(this.settings,{transition:i,noAlloc:r,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:vx,startIndices:l}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return Fj(Array.isArray(t)?e[t.find(s=>e[s])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function(n,e){if(n===vx||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let s=0;s<i;s++){const o=n[s];o[1]<e[0]?(t.push(o),r=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=vx}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=kse}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate({numInstances:e,copy:t.updateRanges!==vx}),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(r,this,{data:t,startRow:c,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else for(const[c,u]of s){const h=Number.isFinite(c)?this.getVertexOffset(c):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;return e?!r.noAlloc&&(i.binaryValue===e?(this.clearNeedsUpdate(),!0):(i.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),r.transform||t!==this.startIndices?(fc(ArrayBuffer.isView(e.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function(n,{size:e,stride:t,offset:i,startIndices:r,nested:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:e,l=i?i/o:0,c=Math.floor((n.length-l)/a);return(u,{index:h,target:f})=>{if(!r){const I=h*a+l;for(let G=0;G<e;G++)f[G]=n[I+G];return f}const g=r[h],m=r[h+1]||c;let A;if(s){A=new Array(m-g);for(let I=g;I<m;I++){const G=I*a+l;f=new Array(e);for(let k=0;k<e;k++)f[k]=n[G+k];A[I-g]=f}}else if(a===e)A=n.subarray(g*e+l,m*e+l);else{A=new n.constructor((m-g)*e);let I=0;for(let G=g;G<m;G++){const k=G*a+l;for(let oe=0;oe<e;oe++)A[I++]=n[k+oe]}}return A}}(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:e.size&&e.size!==this.size}),!1):(this.clearNeedsUpdate(),this.setData(e),!0))):(i.binaryValue=null,i.binaryAccessor=null,!1)}getVertexOffset(e){const{startIndices:t}=this;return(t?t[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=l.binaryAccessor||("function"==typeof f?f:s[f]);fc("function"==typeof m,'accessor "'.concat(f,'" is not a function'));let A=e.getVertexOffset(i);const{iterable:I,objectInfo:G}=bx(t,i,r);for(const k of I){G.index++;let oe=m(k,G);if(g&&(oe=g.call(this,oe)),h){const we=(G.index<h.length-1?h[G.index+1]:o)-h[G.index];if(oe&&Array.isArray(oe[0])){let Be=A;for(const Ue of oe)e._normalizeValue(Ue,c,Be),Be+=u}else oe&&oe.length>u?c.set(oe,A):(e._normalizeValue(oe,G.target,0),Pse({target:c,source:G.target,start:A,count:we}));A+=we*u}else e._normalizeValue(oe,c,A),A+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let MI={};function Do(n){Ri.level>0&&MI[n]&&MI[n].call(...arguments)}function za(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const Uj="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Use=`#version 300 es\n${Uj}`;function zj(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,s]=t;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function Hj(n={}){const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?Use:e>300?`#version ${e}\n${Uj}`:"void main() {gl_FragColor = vec4(0);}";const s=function(n,e){switch(e){case"float":return`vec4(${n}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${n}, 0.0, 1.0)`;case"vec3":return`vec4(${n}, 1.0)`;case"vec4":return n;default:return za(!1),null}}(t,i);return e>=300?`#version ${e} ${300===e?"es":""}\nin ${i} ${t};\nout vec4 ${r};\nvoid main() {\n  ${r} = ${s};\n}`:`varying ${i} ${t};\nvoid main() {\n  gl_FragColor = ${s};\n}`}class Gj extends Ku{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Ci(e)}constructor(e,t={}){Ao(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,jg(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(t);return i<0?(this.unused[e]=r,mn.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof lr?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t,i=0,r){const s=t&&t.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,i,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class $se{constructor(e,t={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(e={}){const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(e={}){const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof lr?i:i.buffer:null}getData(e={}){const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&on(Ci(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const s=this.feedbackMap[r];r in t&&(i[s]=r)}Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=t[s],{byteLength:a,usage:l,accessor:c}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:l,accessor:c})}}return i}_setupBuffers(e={}){const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,{model:t}){const{program:i}=t;e.transformFeedback=new Gj(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];t[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],on(i[s]instanceof lr)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new lr(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function $j(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const R0="vs",Yse={[R0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},wx="__LUMA_INJECT_DECLARATIONS__",Wj=/void\s+main\s*\([^)]*\)\s*\{\n?/,qj=/}\n?[^{}]*$/,II=[];function Yj(n,e,t,i=!1){const r=e===R0;for(const s in t){const o=t[s];o.sort((l,c)=>l.order-c.order),II.length=o.length;for(let l=0,c=o.length;l<c;++l)II[l]=o[l].injection;const a=`${II.join("\n")}\n`;switch(s){case"vs:#decl":r&&(n=n.replace(wx,a));break;case"vs:#main-start":r&&(n=n.replace(Wj,l=>l+a));break;case"vs:#main-end":r&&(n=n.replace(qj,l=>a+l));break;case"fs:#decl":r||(n=n.replace(wx,a));break;case"fs:#main-start":r||(n=n.replace(Wj,l=>l+a));break;case"fs:#main-end":r||(n=n.replace(qj,l=>a+l));break;default:n=n.replace(s,l=>l+a)}}return n=n.replace(wx,""),i&&(n=n.replace(/\}\s*$/,s=>s+Yse[e])),n}function OI(n){const e={};return za(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?`${e[i]}\n${t[i]}`:t[i]}),e}const Xse={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},Ex="transform_uSize_",Xj="transform_position";const ioe={10241:9728,10240:9728,10242:33071,10243:33071};class soe{constructor(e,t={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(e={}){const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(e={}){const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function({sourceTextureMap:n,targetTextureVarying:e,targetTexture:t}){const i={};let r,s;e&&(({width:r,height:s}=t),i[`${Ex}${e}`]=[r,s]);for(const o in n)({width:r,height:s}=n[o]),i[`${Ex}${o}`]=[r,s];return i}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:c,parameters:l}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:t}=this.bindings[this.currentIndex],i=px(t);if(!e)return i;const r=i.constructor,s=function(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return za(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let l=0;l<i.length;l+=4)for(let c=0;c<s;c++)o[a++]=i[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof ya)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(e={}){const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new lr(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new ks(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(ioe)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=fj(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=function({vs:n,sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}){let s=Object.keys(e).length,o=null;const a={};let l=n,c={};if(s>0||t){const u=l.split("\n"),h=u.slice();if(u.forEach((f,g,m)=>{if(s>0){const A=function(n,e){const t={},i=function(n){return zj(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o=`// ${n} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:c}=function(n){const e=`transform_uSampler_${n}`,t=`${Ex}${n}`;return{samplerName:e,sizeName:t,uniformDeclerations:`  uniform sampler2D ${e};\n  uniform vec2 ${t};`}}(s),h=`  ${r} ${s} = transform_getInput(${a}, ${l}).${function(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return za(!1),null}}(r)};\n`;return t[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:t}}return null}(f,e);if(A){const{updatedLine:I,inject:G}=A;h[g]=I,c=OI([c,G]),Object.assign(a,A.samplerTextureMap),s--}}t&&!o&&(o=function(n,e){const t=zj(n,["varying","out"]);return t&&t.name===e?t.type:null}(f,t))}),t){on(i);const f=`${Ex}${t}`;c=OI([c,{"vs:#decl":`uniform vec2 ${f};\n`,"vs:#main-start":`     vec2 ${Xj} = transform_getPos(${f});\n     gl_Position = vec4(${Xj}, 0, 1.);\n`}])}l=h.join("\n")}return{vs:l,targetTextureType:o,inject:c,samplerTextureMap:a}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),c=OI([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=l,{vs:r,fs:e._fs||Hj({version:$j(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Xse].concat(e.modules||[]):e.modules,uniforms:s,inject:c}}}const RI={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function aoe(n){let e=Kj(n);return"object"===e?n?"type"in n?Object.assign({},n,RI[n.type]):"value"in n?(e=Kj(n.value),Object.assign({type:e},n,RI[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},RI[e])}function Kj(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class NI{constructor({name:e,vs:t,fs:i,dependencies:r=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:h}){za("string"==typeof e),this.name=e,this.vs=t||u,this.fs=i||h,this.getModuleUniforms=o,this.dependencies=r,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];const r=t.slice(0,2);"string"==typeof i&&(i={order:0,injection:i}),e[r][t]=i}return e}(c),s&&(this.uniforms=function(n){const e={};for(const t in n){const r=aoe(n[t]);e[t]=r}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:za(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${t}// END MODULE_${this.name}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp(`\\b${t.old}\\(`);break;default:t.regex=new RegExp(`${t.type} ${t.old};`)}}),e}_defaultGetUniforms(e={}){const t={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&za(s.validate(e[r],s),`${this.name}: invalid ${r}`),t[r]=e[r]):t[r]=s.value}return t}}function doe(n){return function(n){const e={},t={};return PI({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(Zj(n))}function PI({modules:n,level:e,moduleMap:t,moduleDepth:i}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(const r of n)t[r.name]=r,(void 0===i[r.name]||i[r.name]<e)&&(i[r.name]=e);for(const r of n)r.dependencies&&PI({modules:r.dependencies,level:e+1,moduleMap:t,moduleDepth:i})}function Zj(n,e){return n.map(t=>(t instanceof NI||(za("string"!=typeof t,`Shader module use by name is deprecated. Import shader module '${t}' and use it directly.`),za(t.name,"shader module has no name"),(t=new NI(t)).dependencies=Zj(t.dependencies)),t))}const kI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},kf={};function boe(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(kI).forEach(n=>{kf[n]=n});const FI={};function Jj(n,e,t={}){const i=kI[e];if(za(i,e),!function(n={}){const e="undefined"!=typeof window&&window.navigator||{},t=n.userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in FI)return FI[e];const o=`#extension GL_${i[0]} : ${t.behavior||"enable"}\nvoid main(void) {}`,a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const l=n.getShaderParameter(a,35713);return n.deleteShader(a),FI[e]=l,l}function xx(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function(n,e){const t=kI[e];za(t,e);const i=function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}(n)&&t[1]||t[0],r="string"==typeof i?Boolean(n.getExtension(i)):i;return za(!1===r||!0===r),r}(n,t))}function Gg(n){return new RegExp(`\\b${n}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const eU=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],xoe=[...eU,[Gg("attribute"),"in $1"],[Gg("varying"),"out $1"]],Soe=[...eU,[Gg("varying"),"in $1"]],tU=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Coe=[...tU,[Gg("in"),"attribute $1"],[Gg("out"),"varying $1"]],Toe=[...tU,[Gg("in"),"varying $1"]],LI="gl_FragColor",BI=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Aoe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Sx(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const Ooe=`\n\n${wx}\n\n`,nU={[R0]:"vertex",fs:"fragment"};function iU(n,{id:e,source:t,type:i,modules:r,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:c=!0,log:u}){za("string"==typeof t,"shader source must be a string");const h=i===R0,f=t.split("\n");let g=100,m="",A=t;0===f[0].indexOf("#version ")?(g=300,m=f[0],A=f.slice(1).join("\n")):m=`#version ${g}`;const I={};r.forEach(Ue=>{Object.assign(I,Ue.getDefines())}),Object.assign(I,s);let G=c?`${m}\n${function({id:n,source:e,type:t}){return n&&"string"==typeof n&&-1===e.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${n}_${nU[t]}\n\n`:""}({id:e,source:t,type:i})}\n${function({type:n}){return`\n#define SHADER_TYPE_${nU[n].toUpperCase()}\n`}({type:i})}\n${function(n){switch(function(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:boe(t,i),vendor:t,renderer:i,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n)}\n${function(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return xx(n,kf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),xx(n,kf.GLSL_DERIVATIVES)&&Jj(n,kf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),xx(n,kf.GLSL_FRAG_DATA)&&Jj(n,kf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),xx(n,kf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n)}\n${function(n={}){let e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+=`#define ${i.toUpperCase()} ${n[i]}\n`)}return 0===e&&(t+="\n"),t}(I)}\n${h?"":"precision highp float;\n\n"}\n`:`${m}\n`;const k=function(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,s]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(o),oe={},we={},Be={};for(const Ue in a){const qe="string"==typeof a[Ue]?{injection:a[Ue],order:0}:a[Ue],bt=Ue.match(/^(v|f)s:(#)?([\w-]+)$/);if(bt){const Mt=bt[3];bt[2]?"decl"===Mt?we[Ue]=[qe]:Be[Ue]=[qe]:oe[Ue]=[qe]}else Be[Ue]=[qe]}for(const Ue of r){u&&Ue.checkDeprecations(A,u),G+=Ue.getModuleSource(i,g);const bt=Ue.injections[i];for(const xt in bt){const Mt=xt.match(/^(v|f)s:#([\w-]+)$/);if(Mt){const Wt="decl"===Mt[2]?we:Be;Wt[xt]=Wt[xt]||[],Wt[xt].push(bt[xt])}else oe[xt]=oe[xt]||[],oe[xt].push(bt[xt])}}return G+=Ooe,G=Yj(G,i,we),G+=function(n,e){let t="";for(const i in n){const r=n[i];if(t+=`void ${r.signature} {\n`,r.header&&(t+=`  ${r.header}`),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)t+=`  ${o.injection}\n`}r.footer&&(t+=`  ${r.footer}`),t+="}\n"}return t}(k[i],oe),G+=A,G=Yj(G,i,Be),G=function(n,e,t){switch(e){case 300:return t?Sx(n,xoe):function(n){const e=(n=Sx(n,Soe)).match(BI);if(e){const t=e[1];n=n.replace(new RegExp(`\\b${LI}\\b`,"g"),t)}else{const t="fragmentColor";n=n.replace(Aoe,i=>`out vec4 ${t};\n${i}`).replace(new RegExp(`\\b${LI}\\b`,"g"),t)}return n}(n);case 100:return t?Sx(n,Coe):function(n){const e=(n=Sx(n,Toe)).match(BI);if(e){const t=e[1];n=n.replace(BI,"").replace(new RegExp(`\\b${t}\\b`,"g"),LI)}return n}(n);default:throw new Error(`unknown GLSL version ${e}`)}}(G,l?100:g,h),G}function Poe(n){return function(t){const i={};for(const r of n){const s=r.getUniforms(t,i);Object.assign(i,s)}return i}}const joe={5126:Ir.bind(null,"uniform1fv",Ha,1,Io),35664:Ir.bind(null,"uniform2fv",Ha,2,Io),35665:Ir.bind(null,"uniform3fv",Ha,3,Io),35666:Ir.bind(null,"uniform4fv",Ha,4,Io),5124:Ir.bind(null,"uniform1iv",dh,1,Io),35667:Ir.bind(null,"uniform2iv",dh,2,Io),35668:Ir.bind(null,"uniform3iv",dh,3,Io),35669:Ir.bind(null,"uniform4iv",dh,4,Io),35670:Ir.bind(null,"uniform1iv",dh,1,Io),35671:Ir.bind(null,"uniform2iv",dh,2,Io),35672:Ir.bind(null,"uniform3iv",dh,3,Io),35673:Ir.bind(null,"uniform4iv",dh,4,Io),35674:Ir.bind(null,"uniformMatrix2fv",Ha,4,Ju),35675:Ir.bind(null,"uniformMatrix3fv",Ha,9,Ju),35676:Ir.bind(null,"uniformMatrix4fv",Ha,16,Ju),35678:oo,35680:oo,5125:Ir.bind(null,"uniform1uiv",Cx,1,Io),36294:Ir.bind(null,"uniform2uiv",Cx,2,Io),36295:Ir.bind(null,"uniform3uiv",Cx,3,Io),36296:Ir.bind(null,"uniform4uiv",Cx,4,Io),35685:Ir.bind(null,"uniformMatrix2x3fv",Ha,6,Ju),35686:Ir.bind(null,"uniformMatrix2x4fv",Ha,8,Ju),35687:Ir.bind(null,"uniformMatrix3x2fv",Ha,6,Ju),35688:Ir.bind(null,"uniformMatrix3x4fv",Ha,12,Ju),35689:Ir.bind(null,"uniformMatrix4x2fv",Ha,8,Ju),35690:Ir.bind(null,"uniformMatrix4x3fv",Ha,12,Ju),35678:oo,35680:oo,35679:oo,35682:oo,36289:oo,36292:oo,36293:oo,36298:oo,36299:oo,36300:oo,36303:oo,36306:oo,36307:oo,36308:oo,36311:oo},Uoe={},zoe={},Hoe={},rU=[0];function VI(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(rU[0]=n,n=rU);const r=n.length;if(r%e&&mn.warn(`Uniform size should be multiples of ${e}`,n)(),n instanceof t)return n;let s=i[r];s||(s=new t(r),i[r]=s);for(let o=0;o<r;o++)s[o]=n[o];return s}function Ha(n,e){return VI(n,e,Float32Array,Uoe)}function dh(n,e){return VI(n,e,Int32Array,zoe)}function Cx(n,e){return VI(n,e,Uint32Array,Hoe)}function sU(n,e,t){const i=joe[t.type];if(!i)throw new Error(`Unknown GLSL uniform type ${t.type}`);return i().bind(null,n,e)}function Goe(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${n}`);return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function Woe(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Nf||n instanceof zg)||n instanceof ks&&Boolean(n.texture)}function qoe(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,s=t.length;r<s;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function oo(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function Ir(n,e,t,i){let r=null,s=null;return(o,a,l)=>{const c=e(l,t),u=c.length;let h=!1;if(null===r)r=new Float32Array(u),s=u,h=!0;else{on(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(c[f]!==r[f]){h=!0;break}}return h&&(i(o,n,a,c),r.set(c)),h}}function Io(n,e,t,i){n[e](t,i)}function Ju(n,e,t,i){n[e](t,!1,i)}function Tx(n,e="unnamed"){const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function aU(n,e){let t="";for(let i=0;i<e.length;i++){const r=e[i];if((n[i+3]||n[i+2]||n[i+1])&&(t+=`${r}\n`,n[i+1])){const s=n[i+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0;t+=lU(`^^^ ${a}: ${s.substring(o.join(":").length+1).trim()}\n\n`,l)}}return t}function lU(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return`${t}${n}`}class N0 extends Ku{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return on(!1),"unknown"}}constructor(e,t){hx(e),on("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:Tx(t.source,null)||t.id||ma(`unnamed ${N0.getTypeName(t.shaderType)}`)}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize({source:e}){const t=Tx(e,null);t&&(this.id=ma(t)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${N0.getTypeName(this.shaderType)}:${this.id}`}getName(){return Tx(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100\n${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function(n,e,t,i){const r=n.split(/\r?\n/),s={},o={},a=i||Tx(e)||"(unnamed)",l=`${function(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)} shader ${a}`;for(let u=0;u<r.length;u++){const h=r[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error(`GLSL compilation error in ${l}: ${n}`);"WARNING"!==g?s[m]=h:o[m]=h}const c=function(n,e=1,t=": "){const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return lU(a,r-a.length)+t+s})}(e);return{shaderName:l,errors:aU(s,c),warnings:aU(o,c)}}(i,this.source,this.shaderType,this.id);throw mn.error(`GLSL compilation errors in ${r}\n${s}`)(),mn.warn(`GLSL compilation warnings in ${r}\n${o}`)(),new Error(`GLSL compilation errors in ${r}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class jI extends N0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class UI extends N0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Fs=5126,P0=5124,k0=5125,zI={[Fs]:[Fs,1,"float"],35664:[Fs,2,"vec2"],35665:[Fs,3,"vec3"],35666:[Fs,4,"vec4"],[P0]:[P0,1,"int"],35667:[P0,2,"ivec2"],35668:[P0,3,"ivec3"],35669:[P0,4,"ivec4"],[k0]:[k0,1,"uint"],36294:[k0,2,"uvec2"],36295:[k0,3,"uvec3"],36296:[k0,4,"uvec4"],35670:[Fs,1,"bool"],35671:[Fs,2,"bvec2"],35672:[Fs,3,"bvec3"],35673:[Fs,4,"bvec4"],35674:[Fs,8,"mat2"],35685:[Fs,8,"mat2x3"],35686:[Fs,8,"mat2x4"],35675:[Fs,12,"mat3"],35687:[Fs,12,"mat3x2"],35688:[Fs,12,"mat3x4"],35676:[Fs,16,"mat4"],35689:[Fs,16,"mat4x2"],35690:[Fs,16,"mat4x3"]};function pU(n){const e=zI[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function gU(n,e){switch(n){case 5120:case 5121:case 5122:case 5123:n=Fs}for(const t in zI){const[i,r,s]=zI[t];if(i===n&&r===e)return{glType:t,name:s}}return null}class Aae{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,r),l=t.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!Ci(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,t,i,r){const{type:s,components:o}=pU(i),a={type:s,size:r*o};this._inferProperties(e,t,a);const l={location:e,name:t,accessor:new _a(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:s,components:o}=pU(i),l={location:e,name:t,accessor:new _a({type:s,size:r*o})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Mae=35981,Dae=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class _U extends Ku{get[Symbol.toStringTag](){return"Program"}constructor(e,t={}){super(e,t),this.stubRemovedMethods("Program","v6.0",Dae),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(e={}){const{hash:t,vs:i,fs:r,varyings:s,bufferMode:o=Mae}=e;return this.hash=t||"",this.vs="string"==typeof i?new jI(this.gl,{id:`${e.id}-vs`,source:i}):i,this.fs="string"==typeof r?new UI(this.gl,{id:`${e.id}-fs`,source:r}):r,on(this.vs instanceof jI),on(this.fs instanceof UI),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Ao(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Aae(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:t=4,vertexCount:i,offset:r=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:h=null,transformFeedback:f,framebuffer:g,parameters:m={},uniforms:A,samplers:I}){if((A||I)&&(mn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(A||{})),mn.priority>=e){const G=g?g.id:"default",k=`mode=${ch(this.gl,t)} verts=${i} instances=${c} indexType=${ch(this.gl,l)} isInstanced=${u} isIndexed=${a} Framebuffer=${G}`;mn.log(e,k)()}return on(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||u&&0===c||(h.bindForDraw(i,c,()=>{if(void 0!==g&&(m=Object.assign({},m,{framebuffer:g})),f){const G=function(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return on(!1),0}}(t);f.begin(G)}this._bindTextures(),hc(this.gl,m,()=>{a&&u?this.gl2.drawElementsInstanced(t,i,l,r,c):a&&Ci(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(t,s,o,i,l,r):a?this.gl.drawElements(t,i,l,r):u?this.gl2.drawArraysInstanced(t,r,i,c):this.gl.drawArrays(t,r,i)}),f&&f.end()}),0))}setUniforms(e={}){mn.priority>=2&&function(n,e,t){for(const i in n){const r=n[i];if((!t||Boolean(t[i]))&&!Woe(r))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${i}`,r),new Error(`${e} Bad uniform ${i}`)}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let s=i,o=!1;if(s instanceof ks&&(s=s.texture),s instanceof Nf)if(o=this.uniforms[t]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=r;a.bind(l),s=l,this._textureUniforms[t]=a}else s=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(s)||o)&&qoe(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new jI({handle:r});break;case 35632:i.fs=new UI({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=ma(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),mn.time(4,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),mn.timeEnd(4,`linkProgram for ${this._getName()}`)(),e.debug||mn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=Goe(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=sU(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,`${r}[${o}]`),this._uniformSetters[`${r}[${o}]`]=sU(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class F0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new F0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:t="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(t),h=this._getHash(i),f=c.map(oe=>this._getHash(oe.name)).sort(),g=o.map(oe=>this._getHash(oe)),m=Object.keys(r).sort(),A=Object.keys(s).sort(),I=[],G=[];for(const oe of m)I.push(this._getHash(oe)),I.push(this._getHash(r[oe]));for(const oe of A)G.push(this._getHash(oe)),G.push(this._getHash(s[oe]));const k=`${u}/${h}D${I.join("/")}M${f.join("/")}I${G.join("/")}V${g.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[k]){const oe=function(n,e){const{vs:t,fs:i}=e,r=doe(e.modules||[]);return{gl:n,vs:iU(n,Object.assign({},e,{source:t,type:R0,modules:r})),fs:iU(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Poe(r)}}(this.gl,{vs:t,fs:i,modules:c,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[k]=new _U(this.gl,{hash:k,vs:oe.vs,fs:oe.fs,varyings:o,bufferMode:a}),this._getUniforms[k]=oe.getUniforms||(we=>{}),this._useCounts[k]=0}return this._useCounts[k]++,this._programCache[k]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;t[r++]=a,i[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;i[l]||(t[r++]=a,i[l]=!0)}return t.length=r,t}}let Mx=null;class Ga extends Ku{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e,t={}){return!t.constantAttributeZero||Ci(e)||"Chrome"===function(n){if(!JD())return"Node";if(CV(n))return"Electron";const t=("undefined"!=typeof navigator?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":v0.chrome?"Chrome":v0.safari?"Safari":v0.mozInnerScreenX?"Firefox":"Unknown"}()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ga(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ga.MAX_ATTRIBUTES=Ga.MAX_ATTRIBUTES||e.getParameter(34921),Ga.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Ga._setConstantFloatArray(e,t,i);break;case Int32Array:Ga._setConstantIntArray(e,t,i);break;case Uint32Array:Ga._setConstantUintArray(e,t,i);break;default:on(!1)}}constructor(e,t={}){super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ga.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,t={}){return on(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),c?(on(Ci(h)),f.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,l,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e,t=!0){return!t&&0===e&&!Ga.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new lr(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function(n,e){return new n(function(n){return(!Mx||Mx.byteLength<n)&&(Mx=new ArrayBuffer(n)),Mx}(n.BYTES_PER_ELEMENT*e),0,e)}(t.constructor,s);(function({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:on(!1)}}static _setConstantIntArray(e,t,i){switch(on(Ci(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:on(!1)}}static _setConstantUintArray(e,t,i){switch(on(Ci(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:on(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:t}){return on(Number.isFinite(t)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(t,e);default:return this.gl.getVertexAttrib(t,e)}})}}const Fae=/^(.+)__LOCATION_([0-9]+)$/,Lae=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Bae{constructor(e,t={}){this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ga(e),ej(this,"VertexArray","v6.0",Lae),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,t={}){return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t,i={}){if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,s)),this}setConstant(e,t,i={}){const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new lr(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof lr&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof lr&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,mn.once(3,()=>`unused value ${e} in ${this.id}`)(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const u=_a.resolve(l.accessor,this.accessors[o]||{},i,r),{size:h,type:f}=u;return on(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=Fae.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof lr)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof lr)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof lr))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,t){if(Ga.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Ga.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof lr){const a=i;if(o){const l=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,t={}){return mn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function L0(n,e={}){const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(r+=","+(o%i==0?" ":"")),r+=L0(n[o],e);return`${r}${n.length>t?"...":"]"}`}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function yU(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let c,u,h,s="NOT PROVIDED",o=1,a=0,l=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),c=-1!==s.indexOf("nt")),e instanceof lr){const f=e,{data:g,changed:m}=f.getDebugData();let A;return u=m?"*":"",h=g,l=f.byteLength,a=l/g.BYTES_PER_ELEMENT/o,t?A=`${t.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${ch(r,s)})`:(c=!0,A=`${l} bytes`),{[i]:`${u}${L0(h,{size:o,isInteger:c})}`,"Format ":A}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=-1!==s.indexOf("nt"),{[i]:`${L0(h,{size:o,isInteger:c})} (constant)`,"Format ":`${o}x${s} (constant)`}}function Uae(n,e){const{type:t,size:i}=e,r=gU(t,i);return r?`${n} (${r.name})`:n}function bU({header:n="Uniforms",program:e,uniforms:t,undefinedOnly:i=!1}){on(e);const s=".*Matrix",a={},l=Object.keys(e._uniformSetters).sort();let c=0;for(const f of l)!f.match(".*_.*")&&!f.match(s)&&HI({table:a,header:n,uniforms:t,uniformName:f,undefinedOnly:i})&&c++;for(const f of l)f.match(s)&&HI({table:a,header:n,uniforms:t,uniformName:f,undefinedOnly:i})&&c++;for(const f of l)a[f]||HI({table:a,header:n,uniforms:t,uniformName:f,undefinedOnly:i})&&c++;let u=0;const h={};if(!i)for(const f in t){const g=t[f];a[f]||(u++,h[f]={Type:`NOT USED: ${g}`,[n]:L0(g)})}return{table:a,count:c,unusedTable:h,unusedCount:u}}function HI({table:n,header:e,uniforms:t,uniformName:i,undefinedOnly:r}){const s=t[i],o=function(n){return null!=n}(s);return!(r&&o||(n[i]={[e]:o?L0(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},0))}function vU(n){const{type:e,size:t}=n.accessor,i=gU(e,t);return i?`${i.name} ${n.name}`:n.name}const Gae={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Wae(n,e){const{attributeMap:t=Gae}=e||{};return t&&t[n]||n}function qae(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}on(Number.isFinite(e.size),`attribute ${n} needs size`)}const wU=()=>{},Kae={};class Yg{constructor(e,t={}){const{id:i=ma("model")}=t;on(dx(e)),this.id=i,this.gl=e,this.id=t.id||ma("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||F0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},on(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return on(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return on(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(n,e,t){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Wae(s,undefined);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const l=o.value,c=at({},o);delete c.value,i[a]=[new lr(n,l),c],qae(s,c)}}if(r){const s=r.value||r;on(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new lr(n,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(jg(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return pI(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;let c;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(r),mn.priority>=2&&(c=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&mn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:A,instanceCount:I}=this,{onBeforeRender:G=wU,onAfterRender:k=wU}=this.props;G(),this.program.setUniforms(this.uniforms);const oe=this.program.draw(Object.assign(Kae,e,{logPriority:c,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:A,instanceCount:I,offset:h?g:0}));return k(),mn.priority>=2&&this._logDrawCallEnd(c,l,i),oe}transform(e={}){const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),t&&(s=Object.assign({},s,{35977:t})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return mn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}on(t instanceof _U,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Bae(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof lr&&t.delete()}}_setAnimationProps(e){this.animated&&on(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(jg(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new Gj(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),mn.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:mn.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const s=function({vertexArray:n,header:e="Attributes"}){if(!n.configuration)return{};const t={};n.elements&&(t.ELEMENT_ARRAY_BUFFER=yU(n,n.elements,null,e));const i=n.values;for(const r in i){const s=n._getAttributeInfo(r);if(s){let o=`${r}: ${s.name}`;const a=n.accessors[s.location];a&&(o=`${r}: ${Uae(s.name,a)}`),t[o]=yU(n,i[r],a,e)}}return t}({vertexArray:t,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=bU({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:c,count:u}=bU({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&mn.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&mn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function(n){const e={},t=`Accessors for ${n.id}`;for(const i of n.attributeInfos)i&&(e[`in ${vU(i)}`]={[t]:JSON.stringify(i.accessor)});for(const i of n.varyingInfos)i&&(e[`out ${vU(i)}`]={[t]:JSON.stringify(i.accessor)});return e}(this.vertexArray.configuration);mn.table(e,s)(),mn.table(e,o)(),mn.table(e+1,h)(),r&&r.log({logLevel:2,message:`Rendered to ${r.id}`}),mn.groupEnd(2,`>>> DRAWING MODEL ${this.id}`)()}}class GI{static isSupported(e){return Ci(e)}constructor(e,t={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(e={}){const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();on(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(e={}){const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new Yg(t,Object.assign({},e,{fs:e.fs||Hj({version:$j(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(n){return!(jg(n.feedbackBuffers)&&jg(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new $se(e,t)),function(n){return!(jg(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new soe(e,t)),on(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}function Dx(){}const Jae={onStart:Dx,onUpdate:Dx,onInterrupt:Dx,onEnd:Dx};class B0{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=at(at({},Jae),e),this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const ale={interpolation:class{constructor({gl:e,attribute:t,timeline:i}){this.gl=e,this.type="interpolation",this.transition=new B0(i),this.attribute=t,this.attributeInTransition=new AI(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function(n,e){const t=Bj(e.size);return new GI(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new lr(e,r),new lr(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();const{buffers:r,attribute:s}=this;Vj(r);const o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)jj(at({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=TI(s,t),this.attributeInTransition.update({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:Lj(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{time:t,settings:{duration:i,easing:r}}=this.transition,s=r(t/i);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},spring:class{constructor({gl:e,attribute:t,timeline:i}){this.gl=e,this.type="spring",this.transition=new B0(i),this.attribute=t,this.attributeInTransition=new AI(e,Sn(at({},t.settings),{normalized:!1})),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function(n){return new ya(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(n,e){return new ks(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(n,e,t){const i=Bj(e.size);return new GI(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new lr(e,r),new lr(e,r),new lr(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:s}=this,o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)jj(at({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=TI(s,t),this.attributeInTransition.update({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:Lj(0,s)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;return!!r.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Vj(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),px(i)[0]>0||r.end(),!0)}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}};class lle{constructor(e,{id:t,timeline:i}){this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=GI.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(t);!o||this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void Ri.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=ale[i.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(Ri.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const EU="attributeManager.invalidate";class ple{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new lle(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,t){this._add(e,t)}addInstanced(e,t){this._add(e,t,{instanced:1})}remove(e){for(let t=0;t<e.length;t++){const i=e[t];void 0!==this.attributes[i]&&(this.attributes[i].delete(),delete this.attributes[i])}}invalidate(e,t){const i=this._invalidateTrigger(e,t);Do(EU,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Do(EU,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}={}){let l=!1;Do("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],h=u.settings.accessor;u.startIndices=i,s[c]&&Ri.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(o[h],e.startIndices)||!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:t,data:e,props:s,context:a})),this.needsRedraw|=u.needsRedraw()}l&&Do("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r=at({},i.getAttributes());for(const s in t){const o=t[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}getAccessors(){return this.updateTriggers}_add(e,t,i={}){t&&Ri.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const r in e)this.attributes[r]=this._createAttribute(r,e[r],i);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r=Sn(at({},t),{id:e,isIndexed:t.isIndexed||t.elements||!1,constant:t.constant||!1,size:(t.elements?1:t.size)||1,value:t.value||null,divisor:t.instanced||i.instanced?1:t.divisor||0});return new AI(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,t)}),s}_updateAttribute(e){const{attribute:t,numInstances:i}=e;Do("attribute.updateStart",t),t.allocate(i)&&Do("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,Do("attribute.updateEnd",t,i))}}function SU(n,e,t,i,r){const s=e-n;return(t-e)*r+-s*i+s+e}function CU(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const yle={interpolation:class extends B0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=gx(t,i,o)}},spring:class extends B0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function(n,e,t,i,r){if(Array.isArray(t)){const s=[];for(let o=0;o<t.length;o++)s[o]=SU(n[o],e[o],t[o],i,r);return s}return SU(n,e,t,i,r)}(s,o,t,i,r);const l=CU(a,t),c=CU(a,o);l<1e-5&&c<1e-5&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class ble{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;t=c,this.remove(e)}if(!(r=Fj(r)))return;const o=yle[r.type];if(!o)return void Ri.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start(Sn(at({},r),{fromValue:t,toValue:i})),s.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const Ix={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},{COMPONENT:vle}=Ix;function xle(n,e){if(!n.transitions)return null;const t={},i=WI(n);for(const r in n.transitions){const s=i[r],o=s&&s.type;("number"===o||"color"===o||"array"===o)&&$I(n[r],e[r],s)&&(t[r]=!0)}return t}function TU({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}={}){if(e===n)return null;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(n))if(!(s in t)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=$I(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in t)){if(!(s in n))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(n,s)){const o=$I(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return null}function $I(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function Tle(n,e){if(null===e)return"oldProps is null, initial diff";const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function AU(n,e,t){let i=n.updateTriggers[t];i=null==i?{}:i;let r=e.updateTriggers[t];return r=null==r?{}:r,TU({oldProps:r,newProps:i,triggerName:t})}function WI(n){const e=n[vle],t=e&&e.constructor;return t?t._propTypes:{}}function Rle(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function Ox(n){let t,e={};return i=>{for(const r in i)if(!Rle(i[r],e[r])){t=n(i),e=i;break}return t}}function Nle(n,e){if(!e)return n;const t=at(at({},n),e);if("defines"in e&&(t.defines=at(at({},n.defines),e.defines)),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i=at({},n.inject);for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function qI(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],A=e[13],I=e[14],G=e[15],k=t*a-i*o,oe=t*l-r*o,we=t*c-s*o,Be=i*l-r*a,Ue=i*c-s*a,qe=r*c-s*l,bt=u*A-h*m,xt=u*I-f*m,Mt=u*G-g*m,Bt=h*I-f*A,Wt=h*G-g*A,mt=f*G-g*I,yt=k*mt-oe*Wt+we*Bt+Be*Mt-Ue*xt+qe*bt;return yt?(n[0]=(a*mt-l*Wt+c*Bt)*(yt=1/yt),n[1]=(r*Wt-i*mt-s*Bt)*yt,n[2]=(A*qe-I*Ue+G*Be)*yt,n[3]=(f*Ue-h*qe-g*Be)*yt,n[4]=(l*Mt-o*mt-c*xt)*yt,n[5]=(t*mt-r*Mt+s*xt)*yt,n[6]=(I*we-m*qe-G*oe)*yt,n[7]=(u*qe-f*we+g*oe)*yt,n[8]=(o*Wt-a*Mt+c*bt)*yt,n[9]=(i*Mt-t*Wt-s*bt)*yt,n[10]=(m*Ue-A*we+G*k)*yt,n[11]=(h*we-u*Ue-g*k)*yt,n[12]=(a*xt-o*Bt-l*bt)*yt,n[13]=(t*Bt-i*xt+r*bt)*yt,n[14]=(A*oe-m*Be-I*k)*yt,n[15]=(u*Be-h*oe+f*k)*yt,n):null}function Ff(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],A=e[12],I=e[13],G=e[14],k=e[15],oe=t[0],we=t[1],Be=t[2],Ue=t[3];return n[0]=oe*i+we*a+Be*h+Ue*A,n[1]=oe*r+we*l+Be*f+Ue*I,n[2]=oe*s+we*c+Be*g+Ue*G,n[3]=oe*o+we*u+Be*m+Ue*k,n[4]=(oe=t[4])*i+(we=t[5])*a+(Be=t[6])*h+(Ue=t[7])*A,n[5]=oe*r+we*l+Be*f+Ue*I,n[6]=oe*s+we*c+Be*g+Ue*G,n[7]=oe*o+we*u+Be*m+Ue*k,n[8]=(oe=t[8])*i+(we=t[9])*a+(Be=t[10])*h+(Ue=t[11])*A,n[9]=oe*r+we*l+Be*f+Ue*I,n[10]=oe*s+we*c+Be*g+Ue*G,n[11]=oe*o+we*u+Be*m+Ue*k,n[12]=(oe=t[12])*i+(we=t[13])*a+(Be=t[14])*h+(Ue=t[15])*A,n[13]=oe*r+we*l+Be*f+Ue*I,n[14]=oe*s+we*c+Be*g+Ue*G,n[15]=oe*o+we*u+Be*m+Ue*k,n}function Rx(n,e,t){var o,a,l,c,u,h,f,g,m,A,I,G,i=t[0],r=t[1],s=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],A=e[9],I=e[10],G=e[11],n[0]=o=e[0],n[1]=a,n[2]=l,n[3]=c,n[4]=u,n[5]=h,n[6]=f,n[7]=g,n[8]=m,n[9]=A,n[10]=I,n[11]=G,n[12]=o*i+u*r+m*s+e[12],n[13]=a*i+h*r+A*s+e[13],n[14]=l*i+f*r+I*s+e[14],n[15]=c*i+g*r+G*s+e[15]),n}function Nx(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function MU(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*r+c*i,n[5]=o*r+u*i,n[6]=a*r+h*i,n[7]=l*r+f*i,n[8]=c*r-s*i,n[9]=u*r-o*i,n[10]=h*r-a*i,n[11]=f*r-l*i,n}function DU(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r+c*i,n[1]=o*r+u*i,n[2]=a*r+h*i,n[3]=l*r+f*i,n[4]=c*r-s*i,n[5]=u*r-o*i,n[6]=h*r-a*i,n[7]=f*r-l*i,n}function OU(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function Px(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*s+t[12]*o,n[1]=t[1]*i+t[5]*r+t[9]*s+t[13]*o,n[2]=t[2]*i+t[6]*r+t[10]*s+t[14]*o,n[3]=t[3]*i+t[7]*r+t[11]*s+t[15]*o,n}function RU(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2],c=t[3],u=c*i+a*s-l*r,h=c*r+l*i-o*s,f=c*s+o*r-a*i,g=-o*i-a*r-l*s;return n[0]=u*c+g*-o+h*-l-f*-a,n[1]=h*c+g*-a+f*-o-u*-l,n[2]=f*c+g*-l+u*-a-h*-o,n[3]=e[3],n}!function(){var n=new ba(4);ba!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const NU=[0,0,0,0],rce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],sce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],oce=[0,0,0],ace=[0,0,0],lce=Ox(function({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=function(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:s,viewProjectionMatrix:o}=n,a=NU,l=NU,c=n.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=PU(n,e,t);return f&&(l=n.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Px([],l,o),s=i||s,o=Ff([],r,s),o=Ff([],o,rce)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}(n,t,i),u=n.getDistanceScales(),h=[n.width*e,n.height*e],f=n.projectionMatrix.transform([0,0,-n.focalDistance,1])[3]||1,g={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:oce,project_uScale:n.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:a};if(c){const m=n.getDistanceScales(c);switch(t){case Vi.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case Vi.LNGLAT:case Vi.LNGLAT_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case Vi.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function PU(n,e,t=ace){let r,i=t,s=!0;switch(r=e===Vi.LNGLAT_OFFSETS||e===Vi.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Zc.WEB_MERCATOR:(e===Vi.LNGLAT||e===Vi.CARTESIAN)&&(s=!1);break;case Zc.WEB_MERCATOR_AUTO_OFFSET:e===Vi.LNGLAT?i=r:e===Vi.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case Zc.IDENTITY:i=n.position.map(Math.fround);break;case Zc.GLOBE:s=!1,r=null;break;default:s=!1}return i[2]=i[2]||0,{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}class hce extends mx{get ELEMENTS(){return Zu(!1),0}get RANK(){return Zu(!1),0}toString(){let e="[";if(Dr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=` ${this[i*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=nr(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function kx(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function kU(n,e){return n[0]=-e[0],n[1]=-e[1],n}function FU(n,e,t,i){var r=e[0],s=e[1];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n}!function(){var n=new ba(2);ba!=Float32Array&&(n[0]=0,n[1]=0)}();const LU=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),mce=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_ce=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Kg={};class qn extends hce{static get IDENTITY(){return Kg.IDENTITY=Kg.IDENTITY||Object.freeze(new qn(LU)),Kg.IDENTITY}static get ZERO(){return Kg.ZERO=Kg.ZERO||Object.freeze(new qn(mce)),Kg.ZERO}get INDICES(){return _ce}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,s,o,a,l,c,u,h,f,g,m,A,I){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=A,this[15]=I,this.check()}setRowMajor(e,t,i,r,s,o,a,l,c,u,h,f,g,m,A,I){return this[0]=e,this[1]=s,this[2]=c,this[3]=g,this[4]=t,this[5]=o,this[6]=u,this[7]=m,this[8]=i,this[9]=a,this[10]=h,this[11]=A,this[12]=r,this[13]=l,this[14]=f,this[15]=I,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(LU)}fromQuaternion(e){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,l=r+r,c=t*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*l,A=s*o,I=s*a,G=s*l;n[0]=1-h-m,n[1]=u+G,n[2]=f-I,n[3]=0,n[4]=u-G,n[5]=1-c-m,n[6]=g+A,n[7]=0,n[8]=f+I,n[9]=g-A,n[10]=1-c-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum({left:e,right:t,bottom:i,top:r,near:s,far:o}){return o===1/0?qn._computeInfinitePerspectiveOffCenter(this,e,t,i,r,s):function(n,e,t,i,r,s,o){var a=1/(t-e),l=1/(r-i),c=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*l,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*l,n[10]=(o+s)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*c,n[15]=0}(this,e,t,i,r,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,i,r,s,o){const l=2*o/(s-r),c=(i+t)/(i-t),u=(s+r)/(s-r),g=-2*o;return e[0]=2*o/(i-t),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=c,e[9]=u,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}lookAt(e,t,i){return 1===arguments.length&&({eye:e,center:t,up:i}=e),function(n,e,t,i){var r,s,o,a,l,c,u,h,f,g,m=e[0],A=e[1],I=e[2],G=i[0],k=i[1],oe=i[2],we=t[0],Be=t[1],Ue=t[2];Math.abs(m-we)<eu&&Math.abs(A-Be)<eu&&Math.abs(I-Ue)<eu?function(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(u=m-we,h=A-Be,f=I-Ue,r=k*(f*=g=1/Math.hypot(u,h,f))-oe*(h*=g),s=oe*(u*=g)-G*f,o=G*h-k*u,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=h*o-f*s,l=f*r-u*o,c=u*s-h*r,(g=Math.hypot(a,l,c))?(a*=g=1/g,l*=g,c*=g):(a=0,l=0,c=0),n[0]=r,n[1]=a,n[2]=u,n[3]=0,n[4]=s,n[5]=l,n[6]=h,n[7]=0,n[8]=o,n[9]=c,n[10]=f,n[11]=0,n[12]=-(r*m+s*A+o*I),n[13]=-(a*m+l*A+c*I),n[14]=-(u*m+h*A+f*I),n[15]=1)}(this,e,t=t||[0,0,0],i=i||[0,1,0]),this.check()}ortho({left:e,right:t,bottom:i,top:r,near:s=.1,far:o=500}){return function(n,e,t,i,r,s,o){var a=1/(e-t),l=1/(i-r),c=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*l,n[14]=(o+s)*c,n[15]=1}(this,e,t,i,r,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:i=1,near:r=.1,far:s=500}){if(e>2*Math.PI)throw Error("radians");const a=i*Math.tan(e/2),l=a*t;return(new qn).ortho({left:-l,right:l,bottom:-a,top:a,near:r,far:s})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return function(n,e,t,i,r){var o,s=1/Math.tan(e/2);n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i)}(this,e,i,r,s),this.check()}determinant(){return function(n){var e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],l=n[7],c=n[8],u=n[9],h=n[10],f=n[11],g=n[12],m=n[13],A=n[14],I=n[15];return(e*o-t*s)*(h*I-f*A)-(e*a-i*s)*(u*I-f*m)+(e*l-r*s)*(u*A-h*m)+(t*a-i*o)*(c*I-f*g)-(t*l-r*o)*(c*A-h*g)+(i*l-r*a)*(c*m-u*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const i=this.getScale(t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const i=this.getScale(t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=s,n[11]=e[14],n[12]=r,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return qI(this,this),this.check()}multiplyLeft(e){return Ff(this,e,this),this.check()}multiplyRight(e){return Ff(this,this,e),this.check()}rotateX(e){return MU(this,this,e),this.check()}rotateY(e){return function(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r-c*i,n[1]=o*r-u*i,n[2]=a*r-h*i,n[3]=l*r-f*i,n[8]=s*i+c*r,n[9]=o*i+u*r,n[10]=a*i+h*r,n[11]=l*i+f*r}(this,this,e),this.check()}rotateZ(e){return DU(this,this,e),this.check()}rotateXYZ([e,t,i]){return this.rotateX(e).rotateY(t).rotateZ(i)}rotateAxis(e,t){return function(n,e,t,i){var l,c,u,h,f,g,m,A,I,G,k,oe,we,Be,Ue,qe,bt,xt,Mt,Bt,Wt,mt,yt,Ut,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<eu||(r*=a=1/a,s*=a,o*=a,l=Math.sin(t),c=Math.cos(t),f=e[1],g=e[2],m=e[3],I=e[5],G=e[6],k=e[7],we=e[9],Be=e[10],Ue=e[11],Mt=r*s*(u=1-c)-o*l,Bt=s*s*u+c,Wt=o*s*u+r*l,mt=r*o*u+s*l,yt=s*o*u-r*l,Ut=o*o*u+c,n[0]=(h=e[0])*(qe=r*r*u+c)+(A=e[4])*(bt=s*r*u+o*l)+(oe=e[8])*(xt=o*r*u-s*l),n[1]=f*qe+I*bt+we*xt,n[2]=g*qe+G*bt+Be*xt,n[3]=m*qe+k*bt+Ue*xt,n[4]=h*Mt+A*Bt+oe*Wt,n[5]=f*Mt+I*Bt+we*Wt,n[6]=g*Mt+G*Bt+Be*Wt,n[7]=m*Mt+k*Bt+Ue*Wt,n[8]=h*mt+A*yt+oe*Ut,n[9]=f*mt+I*yt+we*Ut,n[10]=g*mt+G*yt+Be*Ut,n[11]=m*mt+k*yt+Ue*Ut,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?Nx(this,this,e):Nx(this,this,[e,e,e]),this.check()}translate(e){return Rx(this,this,e),this.check()}transform(e,t){return 4===e.length?(_x(t=Px(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;switch(i){case 2:t=function(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:t=vI(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _x(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=function(n,e,t){const i=e[0],r=e[1],s=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/s,n[1]=(t[1]*i+t[5]*r)/s,n}(t||[-0,-0],e,this);break;case 3:t=Mj(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _x(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}transformPoint(e,t){return bI("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return bI("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return bI("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}function Qg(n,e){const t=Px([],e,n);return OU(t,t,1/t[3]),t}function BU(n,e){const t=n%e;return t<0?e+t:t}function VU(n,e,t){return n<e?e:n>t?t:n}const YI=Math.log2||function(n){return Math.log(n)*Math.LOG2E};function ed(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const pc=Math.PI,jU=pc/4,gc=pc/180,XI=180/pc,KI=4003e4,Fx=85.051129;function Lx([n,e]){return ed(Number.isFinite(n)),ed(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude"),[512*(n*gc+pc)/(2*pc),512*(pc+Math.log(Math.tan(jU+e*gc*.5)))/(2*pc)]}function Zg([n,e]){const t=n/512*(2*pc)-pc,i=2*(Math.atan(Math.exp(e/512*(2*pc)-pc))-jU);return[t*XI,i*XI]}function QI({latitude:n,longitude:e,highPrecision:t=!1}){ed(Number.isFinite(n)&&Number.isFinite(e));const i={},s=Math.cos(n*gc),o=512/360,a=o/s,l=512/KI/s;if(i.unitsPerMeter=[l,l,l],i.metersPerUnit=[1/l,1/l,1/l],i.unitsPerDegree=[o,a,l],i.degreesPerUnit=[1/o,1/a,1/l],t){const c=gc*Math.tan(n*gc)/s,h=512/KI*c,f=h/a*l;i.unitsPerDegree2=[0,o*c/2,h],i.unitsPerMeter2=[f,0,f]}return i}function UU(n,e){const[t,i,r]=n,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=QI({longitude:t,latitude:i,highPrecision:!0}),u=Lx(n);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const h=Zg(u),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function HU(n){return 2*Math.atan(.5/n)*XI}function GU(n,e){const[t,i,r=0]=n;return ed(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),Qg(e,[t,i,r,1])}function j0(n,e,t=0){const[i,r,s]=n;if(ed(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Qg(e,[i,r,s,1]);const o=Qg(e,[i,r,0,1]),a=Qg(e,[i,r,1,1]),l=o[2],c=a[2];return FU([],o,a,l===c?0:((t||0)-l)/(c-l))}const $U=Math.PI/180;function WU(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=Qg(i,[e,0,1,1]),s=Qg(i,[e,n.height,1,1]),c=Zg(FU([],r,s,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return c[2]=t,c}const Dce=Math.PI/180,Ice=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],JI=[0,0,0],Rce={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};let Jg=(()=>{class n{constructor(t={}){const{id:i=null,x:r=0,y:s=0,width:o=1,height:a=1}=t;this.id=i||this.constructor.displayName||"viewport",this.x=r,this.y=s,this.width=o||1,this.height=a||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Zc.WEB_MERCATOR:Zc.WEB_MERCATOR_AUTO_OFFSET:Zc.IDENTITY}equals(t){return t instanceof n&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&M0(t.projectionMatrix,this.projectionMatrix)&&M0(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:i=!0}={}){const s=GU(this.projectPosition(t),this.pixelProjectionMatrix),[o,a]=s,l=i?a:this.height-a;return 2===t.length?[o,l]:[o,l,s[2]]}unproject(t,{topLeft:i=!0,targetZ:r}={}){const[s,o,a]=t,u=j0([s,i?o:this.height-o,a],this.pixelUnprojectionMatrix,r&&r*this.distanceScales.unitsPerMeter[2]),[h,f,g]=this.unprojectPosition(u);return Number.isFinite(a)?[h,f,g]:Number.isFinite(r)?[h,f,r]:[h,f]}projectPosition(t){const[i,r]=this.projectFlat(t);return[i,r,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[i,r]=this.unprojectFlat(t);return[i,r,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return this.isGeospatial?Lx(t):t}unprojectFlat(t){return this.isGeospatial?Zg(t):t}getBounds(t={}){const i={targetZ:t.z||0},r=this.unproject([0,0],i),s=this.unproject([this.width,0],i),o=this.unproject([0,this.height],i),a=this.unproject([this.width,this.height],i);return[Math.min(r[0],s[0],o[0],a[0]),Math.min(r[1],s[1],o[1],a[1]),Math.max(r[0],s[0],o[0],a[0]),Math.max(r[1],s[1],o[1],a[1])]}getDistanceScales(t=null){return t?QI({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:i,width:r=1,height:s=1}){return t<this.x+this.width&&this.x<t+r&&i<this.y+this.height&&this.y<i+s}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function(n){const e={};return e.left=Hg(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),e.right=Hg(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),e.bottom=Hg(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),e.top=Hg(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),e.near=Hg(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),e.far=Hg(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14]),e}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,i){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:t,fovyRadians:i,aspect:r,focalDistance:s,near:o,far:a}){return t?(new qn).orthographic({fovy:i,aspect:r,focalDistance:s,near:o,far:a}):(new qn).perspective({fovy:i,aspect:r,near:o,far:a})}_initViewMatrix(t){const{viewMatrix:i=Ice,longitude:r=null,latitude:s=null,zoom:o=null,position:a=null,modelMatrix:l=null,focalDistance:c=1,distanceScales:u=null}=t;this.isGeospatial=Number.isFinite(s)&&Number.isFinite(r),this.zoom=o,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function({latitude:n}){ed(Number.isFinite(n));const e=Math.cos(n*gc);return function(n){return YI(n)}(KI*e)-9}({latitude:s})+Math.log2(c):0);const h=Math.pow(2,this.zoom);this.scale=h,this.distanceScales=this.isGeospatial?QI({latitude:s,longitude:r}):u||Rce,this.focalDistance=c,this.distanceScales.metersPerUnit=new Mo(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new Mo(this.distanceScales.unitsPerMeter),this.position=JI,this.meterOffset=JI,a&&(this.position=a,this.modelMatrix=l,this.meterOffset=l?l.transformVector(a):a),this.isGeospatial?(this.longitude=r,this.latitude=s,this.center=this._getCenterInWorld({longitude:r,latitude:s})):this.center=a?this.projectPosition(a):[0,0,0],this.viewMatrixUncentered=i,this.viewMatrix=(new qn).multiplyRight(this.viewMatrixUncentered).translate(new Mo(this.center||JI).negate())}_getCenterInWorld({longitude:t,latitude:i}){const{meterOffset:r,distanceScales:s}=this,o=new Mo(this.projectPosition([t,i,0]));if(r){const a=new Mo(r).scale(s.unitsPerMeter);o.add(a)}return o}_initProjectionMatrix(t){const{projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,focalDistance:c=1}=t;this.projectionMatrix=i||this._createProjectionMatrix({orthographic:r,fovyRadians:s||o*Dce,aspect:this.width/this.height,focalDistance:c,near:a,far:l})}_initPixelMatrices(){const t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ff(t,t,this.projectionMatrix),Ff(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=qI([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Nx(i,i,[this.width/2,-this.height/2,1]),Rx(i,i,[1,-1,0]),Ff(r,i,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=i,this.pixelUnprojectionMatrix=qI([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ri.warn("Pixel project matrix not invertible")()}}return n.displayName="Viewport",n})(),QU=(()=>{class n extends Jg{constructor(t={}){const{latitude:i=0,longitude:r=0,zoom:s=11,pitch:o=0,bearing:a=0,nearZMultiplier:l=.1,farZMultiplier:c=1.01,orthographic:u=!1,repeat:h=!1,worldOffset:f=0}=t;let{width:g,height:m,altitude:A=1.5}=t;const I=Math.pow(2,s);g=g||1,m=m||1,A=Math.max(.75,A);const{fov:G,aspect:k,focalDistance:oe,near:we,far:Be}=function({width:n,height:e,fovy:t=HU(1.5),altitude:i,pitch:r=0,nearZMultiplier:s=1,farZMultiplier:o=1}){void 0!==i&&(t=HU(i));const a=.5*t*gc,l=function(n){return.5/Math.tan(.5*n*gc)}(t),c=r*gc,u=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01));return{fov:2*a,aspect:n/e,focalDistance:l,near:s,far:(Math.sin(c)*u+l)*o}}({width:g,height:m,pitch:o,altitude:A,nearZMultiplier:l,farZMultiplier:c});let Ue=function({height:n,pitch:e,bearing:t,altitude:i,scale:r,center:s=null}){const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return Rx(o,o,[0,0,-i]),MU(o,o,-e*gc),DU(o,o,t*gc),Nx(o,o,[r/=n,r,r]),s&&Rx(o,o,function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),o}({height:m,pitch:o,bearing:a,scale:I,altitude:A});f&&(Ue=(new qn).translate([512*f,0,0]).multiplyLeft(Ue)),super(Sn(at({},t),{width:g,height:m,viewMatrix:Ue,longitude:r,latitude:i,zoom:s,orthographic:u,fovyRadians:G,aspect:k,focalDistance:oe,near:we,far:Be})),this.latitude=i,this.longitude=r,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=A,this.orthographic=u,this._subViewports=h?[]:null,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),i=Math.floor((t[0]+180)/360),r=Math.ceil((t[2]-180)/360);for(let s=i;s<=r;s++){const o=s?new n(Sn(at({},this),{worldOffset:s})):this;this._subViewports.push(o)}}return this._subViewports}addMetersToLngLat(t,i){return UU(t,i)}panByPosition(t,i){const r=j0(i,this.pixelUnprojectionMatrix),o=kx([],this.projectFlat(t),kU([],r)),a=kx([],this.center,o),[l,c]=this.unprojectFlat(a);return{longitude:l,latitude:c}}getBounds(t={}){const i=function(n,e=0){const{width:t,height:i,unproject:r}=n,s={targetZ:e},o=r([0,i],s),a=r([t,i],s);let l,c;return(n.fovy?.5*n.fovy*$U:Math.atan(.5/n.altitude))>(90-n.pitch)*$U-.01?(l=WU(n,0,e),c=WU(n,t,e)):(l=r([0,0],s),c=r([t,0],s)),[o,a,c,l]}(this,t.z||0);return[Math.min(i[0][0],i[1][0],i[2][0],i[3][0]),Math.min(i[0][1],i[1][1],i[2][1],i[3][1]),Math.max(i[0][0],i[1][0],i[2][0],i[3][0]),Math.max(i[0][1],i[1][1],i[2][1],i[3][1])]}fitBounds(t,i={}){const{width:r,height:s}=this,{longitude:o,latitude:a,zoom:l}=function({width:n,height:e,bounds:t,minExtent:i=0,maxZoom:r=24,padding:s=0,offset:o=[0,0]}){const[[a,l],[c,u]]=t;Number.isFinite(s)?s={top:s,bottom:s,left:s,right:s}:ed(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const h=Lx([a,VU(u,-Fx,Fx)]),f=Lx([c,VU(l,-Fx,Fx)]),g=[Math.max(Math.abs(f[0]-h[0]),i),Math.max(Math.abs(f[1]-h[1]),i)],m=[n-s.left-s.right-2*Math.abs(o[0]),e-s.top-s.bottom-2*Math.abs(o[1])];ed(m[0]>0&&m[1]>0);const A=m[0]/g[0],I=m[1]/g[1],we=Zg([(f[0]+h[0])/2+(s.right-s.left)/2/A,(f[1]+h[1])/2+(s.bottom-s.top)/2/I]),Be=Math.min(r,YI(Math.abs(Math.min(A,I))));return ed(Number.isFinite(Be)),{longitude:we[0],latitude:we[1],zoom:Be}}(at({width:r,height:s,bounds:t},i));return new n({width:r,height:s,longitude:o,latitude:a,zoom:l})}}return n.displayName="WebMercatorViewport",n})();function eO(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof QU){const[r,s,o=0]=n,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function ZU(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,l=0]=n;switch(t&&([o,a,l]=Px([],[o,a,l,1],t)),i){case Vi.LNGLAT:return eO([o,a,l],e,s);case Vi.LNGLAT_OFFSETS:return eO([o+r[0],a+r[1],l+(r[2]||0)],e,s);case Vi.METER_OFFSETS:return eO(UU(r,[o,a,l]),e,s);case Vi.CARTESIAN:default:return e.isGeospatial?[o+r[0],a+r[1],l+r[2]]:e.projectPosition([o,a,l])}}const kce={10241:9987,10240:9729,10242:33071,10243:33071},tO={},Bce={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>Boolean(n)===Boolean(e)},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||z0(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>nO(n,e)},accessor:{validate(n,e){const t=Bx(n);return"function"===t||t===Bx(e.value)},equal:(n,e,t)=>"function"==typeof e||nO(n,e)},array:{validate:(n,e)=>e.optional&&!n||z0(n),equal:(n,e,t)=>t.compare?nO(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t?t.props:{};return i&&n?i(n):n}},image:{transform:(n,e,t)=>function(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof ya)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new ya(t,Sn(at({},e),{parameters:at(at(at({},kce),i),n.props.textureParameters)}));return tO[r.id]=!0,r}(t,n),release:n=>{!function(n){!n||!(n instanceof ya)||tO[n.id]&&(n.delete(),delete tO[n.id])}(n)}}};function nO(n,e){if(n===e)return!0;if(!z0(n)||!z0(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function jce(n,e){switch(Bx(e)){case"object":return U0(n,e);case"array":return U0(n,{type:"array",value:e,compare:!1});case"boolean":return U0(n,{type:"boolean",value:e});case"number":return U0(n,{type:"number",value:e});case"function":return U0(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function U0(n,e){return"type"in e?at(at({name:n},Bce[e.type]),e):"value"in e?at({name:n,type:Bx(e.value)},e):{name:n,type:"object",value:e}}function z0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function Bx(n){return z0(n)?"array":null===n?"null":typeof n}const{COMPONENT:iO,ASYNC_ORIGINAL:Vx,ASYNC_RESOLVED:H0,ASYNC_DEFAULTS:jx}=Ix;function Uce(){const n=this,e=JU(n.constructor),t=Object.create(e);t[iO]=n,t[Vx]={},t[H0]={};for(let i=0;i<arguments.length;++i){const r=arguments[i];for(const s in r)t[s]=r[s]}return Object.freeze(t),t}function JU(n){return Ux(n,"_mergedDefaultProps")||(function(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=JU(t),s=function(n){const e={},t={},i={};for(const[r,s]of Object.entries(n))if(s&&s.deprecatedFor)i[r]=Array.isArray(s.deprecatedFor)?s.deprecatedFor:[s.deprecatedFor];else{const o=jce(r,s);e[r]=o,t[r]=o.value}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(Ux(n,"defaultProps")||{}),o=function(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function(n){const e=Ux(n,"layerName")||Ux(n,"componentName");return e||Ri.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,n),a=at(at({},t._propTypes),s.propTypes);!function(n,e){const t={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(t[o]=a,i[o]=Wce(o))}n[jx]=t,n[Vx]={},Object.defineProperties(n,i)}(o,a);const l=at(at({},t._deprecatedProps),s.deprecatedProps);(function(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const s of e[t])e4(this,s)||(this[s]=i);Ri.deprecated(r,e[t].join("/"))()}})})(o,l),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=l}(n),n._mergedDefaultProps)}function Wce(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||Pj(e)?this[Vx][n]=e:this[H0][n]=e},get(){if(this[H0]){if(n in this[H0])return this[H0][n]||this[jx][n];if(n in this[Vx]){const e=this[iO]&&this[iO].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[jx][n]}}return this[jx][n]}}}function e4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ux(n,e){return e4(n,e)&&n[e]}function rO(n){var e;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(e=n[Symbol.asyncIterator]),null==e&&Symbol.iterator&&(e=n[Symbol.iterator])),null==e&&(e=n["@@asyncIterator"]),null==e&&(e=n["@@iterator"]),null==e)throw new TypeError("Object is not async iterable");return e.call(n)}const{ASYNC_ORIGINAL:Yce,ASYNC_RESOLVED:Xce,ASYNC_DEFAULTS:Kce}=Ix,Qce=Object.freeze({});class t4{constructor(e=null){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=Qce,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[Xce]||{},i=e[Yce]||e,r=e[Kce]||{};for(const s in t){const o=t[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),t[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var i;const r=null===(i=this.layer)||void 0===i?void 0:i.props.fetch;r&&(t=r(t,{propName:e,layer:this.layer}))}if(t instanceof Promise)return void this._watchPromise(e,t);if(Pj(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){const i=this.asyncProps[e];t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(s=>{var o;s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r);const a=null===(o=this.layer)||void 0===o?void 0:o.props.onDataLoad;"data"===e&&a&&a(s,{propName:e,layer:this.layer})}).catch(s=>{var o;null===(o=this.layer)||void 0===o||o.raiseError(s,"loading ".concat(e," of ").concat(this.layer))})}_resolveAsyncIterable(e,t){var i=this;return li(function*(){var r;"data"!==e&&i._setPropValue(e,t);const s=i.asyncProps[e];s.pendingLoadCount++;const o=s.pendingLoadCount;let a=[],l=0;var h,c=!0,u=!1;try{for(var g,m,f=rO(t);c=(g=yield f.next()).done,m=yield g.value,!c;c=!0){const I=m,{dataTransform:G}=i.component?i.component.props:{};a=G?G(I,a):a.concat(I),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:l,endRow:a.length}]}),l=a.length,i._setAsyncPropValue(e,a,o)}}catch(I){u=!0,h=I}finally{try{!c&&null!=f.return&&(yield f.return())}finally{if(u)throw h}}const A=null===(r=i.layer)||void 0===r?void 0:r.props.onDataLoad;A&&A(a,{propName:e,layer:i.layer})})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}const{ASYNC_ORIGINAL:n4,ASYNC_RESOLVED:i4,ASYNC_DEFAULTS:Zce}=Ix,Jce={};let eue=0,tue=(()=>{class n{constructor(){this.props=Uce.apply(this,arguments),this.id=this.props.id,this.count=eue++,this.lifecycle="Awaiting state",this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}clone(t){const{props:i}=this,r={};for(const s in i[Zce])s in i[i4]?r[s]=i[i4][s]:s in i[n4]&&(r[s]=i[n4][s]);return new this.constructor(at(at(at({},i),r),t))}get stats(){return this.internalState.stats}_initState(){this.internalState=new t4({})}}return n.componentName="Component",n.defaultProps=Jce,n})();class nue extends t4{constructor({attributeManager:e,layer:t}){super(t),this.attributeManager=e,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}}const mc=n=>"function"==typeof n,hh=n=>null!==n&&"object"==typeof n,s4=n=>hh(n)&&n.constructor==={}.constructor,iue=n=>n&&"function"==typeof n[Symbol.iterator],rue=n=>n&&"function"==typeof n[Symbol.asyncIterator],G0=n=>"undefined"!=typeof Response&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,em=n=>"undefined"!=typeof Blob&&n instanceof Blob,o4=n=>(n=>"undefined"!=typeof ReadableStream&&n instanceof ReadableStream||hh(n)&&mc(n.tee)&&mc(n.cancel)&&mc(n.getReader))(n)||(n=>hh(n)&&mc(n.read)&&mc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function Lf(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function sO(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function oO(n){var e,t;let i;return Lf(n,"null loader"),Lf(sO(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=Sn(at({},n=n[0]),{options:at(at({},n.options),i)})),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}const tu={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},aO=tu.global||tu.self||tu.window||{},uue="object"!=typeof process||"[object process]"!==String(process)||process.browser,a4="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);a4&&parseFloat(a4[1]);const cO={};function due(n){for(const e in cO)n.startsWith(e)&&(n=n.replace(e,cO[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n=`${n}`),n}const hue=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,fue=/^([-\w.]+\/[-\w.+]+)/;function pue(n){const e=fue.exec(n);return e?e[1]:n}function l4(n){const e=hue.exec(n);return e?e[1]:""}const gue=/\?.*/;function zx(n){if(G0(n)){const e=uO(n.url||"");return{url:e,type:pue(n.headers.get("content-type")||"")||l4(e)}}return em(n)?{url:uO(n.name||""),type:n.type||""}:"string"==typeof n?{url:uO(n),type:l4(n)}:{url:"",type:""}}function mue(n){return G0(n)?n.headers["content-length"]||-1:em(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}function uO(n){return n.replace(gue,"")}function c4(n){return dO.apply(this,arguments)}function dO(){return(dO=li(function*(n){if(G0(n))return n;const e={},t=mue(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=zx(n);r&&(e["content-type"]=r);const s=yield bue(n);s&&(e["x-first-bytes"]=s),"string"==typeof n&&(n=(new TextEncoder).encode(n));const o=new Response(n,{headers:e});return Object.defineProperty(o,"url",{value:i}),o})).apply(this,arguments)}function _ue(n){return hO.apply(this,arguments)}function hO(){return(hO=li(function*(n){if(!n.ok){const e=yield yue(n);throw new Error(e)}})).apply(this,arguments)}function yue(n){return fO.apply(this,arguments)}function fO(){return(fO=li(function*(n){let e=`Failed to fetch resource ${n.url} (${n.status}): `;try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=` ${yield n.text()}`),e+=i,e=e.length>60?`${e.slice(60)}...`:e}catch(t){}return e})).apply(this,arguments)}function bue(n){return pO.apply(this,arguments)}function pO(){return(pO=li(function*(n){if("string"==typeof n)return`data:,${n.slice(0,5)}`;if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(t)})}return n instanceof ArrayBuffer?`data:base64,${vue(n.slice(0,5))}`:null})).apply(this,arguments)}function vue(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function u4(n,e){return gO.apply(this,arguments)}function gO(){return(gO=li(function*(n,e){if("string"==typeof n){n=due(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(t=e.fetch),yield fetch(n,t)}return yield c4(n)})).apply(this,arguments)}function Kn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const d4=new tI({id:"loaders.gl"});class wue{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}const h4={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){Kn(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},xue={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function mO(){aO.loaders=aO.loaders||{};const{loaders:n}=aO;return n._state=n._state||{},n._state}const _O=()=>{const n=mO();return n.globalOptions=n.globalOptions||at({},h4),n.globalOptions};function Sue(n,e,t,i){return t=t||[],function(n,e){p4(n,null,h4,xue,e);for(const t of e)p4(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function(n,e,t){const r=at({},n.options||{});return function(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new wue),m4(r,_O()),m4(r,e),r}(e,n,i)}function f4(n,e){const t=_O(),i=n||t;return"function"==typeof i.fetch?i.fetch:hh(i.fetch)?r=>u4(r,i):null!=e&&e.fetch?null==e?void 0:e.fetch:u4}function p4(n,e,t,i,r){const s=e||"Top level",o=e?`${e}.`:"";for(const a in n){const l=!e&&hh(n[a]),c="baseUri"===a&&!e,u="workerUrl"===a&&e;if(!(a in t)&&!c&&!u)if(a in i)d4.warn(`${s} loader option '${o}${a}' no longer supported, use '${i[a]}'`)();else if(!l){const h=Tue(a,r);d4.warn(`${s} loader option '${o}${a}' not recognized. ${h}`)()}}}function Tue(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(n===s)return`Did you mean '${r.id}.${s}'?`;const o=s.toLowerCase();(t.startsWith(o)||o.startsWith(t))&&(i=i||`Did you mean '${r.id}.${s}'?`)}return i}function m4(n,e){for(const t in e)t in e&&(n[t]=s4(e[t])&&s4(n[t])?at(at({},n[t]),e[t]):e[t])}function nu(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}function Due(n,e="3.0.12"){return nu(n,"no worker provided"),!(!e||!n.version)}const iu={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Iue=iu.global||iu.self||iu.window||{},yO="object"!=typeof process||"[object process]"!==String(process)||process.browser,bO="function"==typeof importScripts,Oue="undefined"!=typeof window&&void 0!==window.orientation,_4="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),vO=(_4&&parseFloat(_4[1]),new Map);function y4(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function b4(n,e=!0,t){const i=t||new Set;if(n)if(v4(n))i.add(n);else if(v4(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)b4(n[r],e,i);return void 0===t?Array.from(i):[]}function v4(n){return!!n&&(n instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&n instanceof MessagePort||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas)}const wO=()=>{};class w4{static isSupported(){return"undefined"!=typeof Worker}constructor(e){Kn(this,"name",void 0),Kn(this,"source",void 0),Kn(this,"url",void 0),Kn(this,"terminated",!1),Kn(this,"worker",void 0),Kn(this,"onMessage",void 0),Kn(this,"onError",void 0),Kn(this,"_loadableURL","");const{name:t,source:i,url:r}=e;nu(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=wO,this.onError=s=>console.log(s),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=wO,this.onError=wO,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||b4(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=function(n){nu(n.source&&!n.url||!n.source&&n.url);let e=vO.get(n.source||n.url);return e||(n.url&&(e=function(n){return n.startsWith("http")?y4(function(n){return`try {\n  importScripts('${n}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`}(n)):n}(n.url),vO.set(n.url,e)),n.source&&(e=y4(n.source),vO.set(n.source,e))),nu(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}}class kue{constructor(e,t){Kn(this,"name",void 0),Kn(this,"workerThread",void 0),Kn(this,"isRunning",void 0),Kn(this,"result",void 0),Kn(this,"_resolve",void 0),Kn(this,"_reject",void 0),this.name=e,this.workerThread=t,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){nu(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){nu(this.isRunning),this.isRunning=!1,this._reject(e)}}class Fue{constructor(e){Kn(this,"name","unnamed"),Kn(this,"source",void 0),Kn(this,"url",void 0),Kn(this,"maxConcurrency",1),Kn(this,"maxMobileConcurrency",1),Kn(this,"onDebug",()=>{}),Kn(this,"reuseWorkers",!0),Kn(this,"props",{}),Kn(this,"jobQueue",[]),Kn(this,"idleQueue",[]),Kn(this,"count",0),Kn(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props=at(at({},this.props),e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return li(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return li(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new kue(i.name,t);t.onMessage=s=>i.onMessage(r,s.type,s.payload),t.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new w4({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Oue?this.maxMobileConcurrency:this.maxConcurrency}}const Lue={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class td{static isSupported(){return w4.isSupported()}static getWorkerFarm(e={}){return td._workerFarm=td._workerFarm||new td({}),td._workerFarm.setProps(e),td._workerFarm}constructor(e){Kn(this,"props",void 0),Kn(this,"workerPools",new Map),this.props=at({},Lue),this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props=at(at({},this.props),e);for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let s=this.workerPools.get(t);return s||(s=new Fue({name:t,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}function Vue(n,e={}){const i=`${n.id}-worker.js`;let r=(e[n.id]||{}).workerUrl;if("test"===e._workerType&&(r=`modules/${n.module}/dist/${i}`),!r){let s=n.version;"latest"===s&&(s="latest"),r=`https://unpkg.com/@loaders.gl/${n.module}${s?`@${s}`:""}/dist/${i}`}return nu(r),r}function jue(n,e){return!!td.isSupported()&&n.worker&&(null==e?void 0:e.worker)}function Uue(n,e,t,i,r){return EO.apply(this,arguments)}function EO(){return(EO=li(function*(n,e,t,i,r){const s=n.id,o=Vue(n,t),l=td.getWorkerFarm(t).getWorkerPool({name:s,url:o});t=JSON.parse(JSON.stringify(t));const c=yield l.startJob("process-on-worker",zue.bind(null,r));return c.postMessage("process",{input:e,options:t}),yield(yield c.result).result})).apply(this,arguments)}function zue(n,e,t,i){return xO.apply(this,arguments)}function xO(){return(xO=li(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(i.error);break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield n(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:l})}break;default:console.warn(`parse-with-worker unknown message ${t}`)}})).apply(this,arguments)}Kn(td,"_workerFarm",void 0);var x4=et(9521);function S4(n){if(function(n){return n&&"object"==typeof n&&n.isBuffer}(n)&&(n=function(n){return x4.toArrayBuffer?x4.toArrayBuffer(n):n}(n)),n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function Wue(...n){const e=n.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),t=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(t);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}function C4(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function que(n){return CO.apply(this,arguments)}function CO(){return(CO=li(function*(n){const e=[];var r,t=!0,i=!1;try{for(var o,a,s=rO(n);t=(o=yield s.next()).done,a=yield o.value,!t;t=!0)e.push(a)}catch(l){i=!0,r=l}finally{try{!t&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return Wue(...e)})).apply(this,arguments)}const Kue=262144;function T4(n){this.wrapped=n}function $0(n){return new T4(n)}function W0(n){var e,t;function r(o,a){try{var l=n[o](a),c=l.value,u=c instanceof T4;Promise.resolve(u?c.wrapped:c).then(function(h){u?r("return"===o?"return":"next",h):s(l.done?"return":"normal",h)},function(h){r("throw",h)})}catch(h){s("throw",h)}}function s(o,a){switch(o){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?r(e.key,e.arg):t=null}this._invoke=function(o,a){return new Promise(function(l,c){var u={key:o,arg:a,resolve:l,reject:c,next:null};t?t=t.next=u:(e=t=u,r(o,a))})},"function"!=typeof n.return&&(this.return=void 0)}function AO(n){return function(){return new W0(n.apply(this,arguments))}}function MO(){return(MO=AO(function*(n,e){const t=(null==e?void 0:e.chunkSize)||1048576;let i=0;for(;i<n.size;){const r=i+t,s=yield $0(n.slice(i,r).arrayBuffer());i=r,yield s}})).apply(this,arguments)}function A4(n,e){return uue?function(n,e){return DO.apply(this,arguments)}(n,e):function(n,e){return IO.apply(this,arguments)}(n,e)}function DO(){return(DO=AO(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:s,value:o}=yield $0(r);if(s)return;yield S4(o)}}catch(r){t.releaseLock()}})).apply(this,arguments)}function IO(){return(IO=AO(function*(n,e){var r,t=!0,i=!1;try{for(var o,a,s=rO(n);t=(o=yield $0(s.next())).done,a=yield $0(o.value),!t;t=!0)yield S4(a)}catch(l){i=!0,r=l}finally{try{!t&&null!=s.return&&(yield $0(s.return()))}finally{if(i)throw r}}})).apply(this,arguments)}function nde(n,e){if("string"==typeof n)return function*(n,e){const t=(null==e?void 0:e.chunkSize)||262144;let i=0;const r=new TextEncoder;for(;i<n.length;){const s=Math.min(n.length-i,t),o=n.slice(i,i+s);i+=s,yield r.encode(o)}}(n,e);if(n instanceof ArrayBuffer)return function*(n,e={}){const{chunkSize:t=Kue}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),s=new ArrayBuffer(r),o=new Uint8Array(n,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(n,e);if(em(n))return function(n,e){return MO.apply(this,arguments)}(n,e);if(o4(n))return A4(n,e);if(G0(n))return A4(n.body,e);throw new Error("makeIterator")}W0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},W0.prototype.next=function(n){return this._invoke("next",n)},W0.prototype.throw=function(n){return this._invoke("throw",n)},W0.prototype.return=function(n){return this._invoke("return",n)};const OO="Cannot convert supplied data type";function ide(n,e,t){if(e.text&&"string"==typeof n)return n;if((n=>n&&"object"==typeof n&&n.isBuffer)(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(OO)}function rde(n,e,t){return RO.apply(this,arguments)}function RO(){return(RO=li(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return ide(n,e);if(em(n)&&(n=yield c4(n)),G0(n)){const r=n;return yield _ue(r),e.binary?yield r.arrayBuffer():yield r.text()}if(o4(n)&&(n=nde(n,t)),iue(n)||rue(n))return que(n);throw new Error(OO)})).apply(this,arguments)}function ode(n,e,t=null){if(t)return t;const i=at({fetch:f4(e,n)},n);return Array.isArray(i.loaders)||(i.loaders=null),i}function ade(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}const M4=()=>{const n=mO();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function D4(n){const e=M4();n=Array.isArray(n)?n:[n];for(const t of n){const i=oO(t);e.find(r=>i===r)||e.unshift(i)}}const cde=/\.([^.]+)$/;function ude(n){return kO.apply(this,arguments)}function kO(){return(kO=li(function*(n,e=[],t,i){if(!O4(n))return null;let r=I4(n,e,Sn(at({},t),{nothrow:!0}),i);if(r)return r;if(em(n)&&(r=I4(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(R4(n));return r})).apply(this,arguments)}function I4(n,e=[],t,i){if(!O4(n))return null;if(e&&!Array.isArray(e))return oO(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...M4()),function(n){for(const e of n)oO(e)}(r);const s=function(n,e,t,i){const{url:r,type:s}=zx(n),o=r||(null==i?void 0:i.url);let a=null;return null!=t&&t.mimeType&&(a=FO(e,null==t?void 0:t.mimeType)),a=a||function(n,e){const t=e&&cde.exec(e),i=t&&t[1];return i?function(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,o),a=a||FO(e,s),a=a||function(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(mde(e,t))return t}else if(ArrayBuffer.isView(e)){if(N4(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&N4(e,0,t))return t;return null}(e,n),a=a||FO(e,null==t?void 0:t.fallbackMimeType),a}(n,r,t,i);if(!(s||null!=t&&t.nothrow))throw new Error(R4(n));return s}function O4(n){return!(n instanceof Response&&204===n.status)}function R4(n){const{url:e,type:t}=zx(n);let i="No valid loader found";return n&&(i+=` data: "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?LO(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?LO(n,0,e):""}(n)}", contentType: "${t}"`),e&&(i+=` url: ${e}`),i}function FO(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e===`application/x.${t.id}`)return t;return null}function mde(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function N4(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function(n,e,t,i){if(i instanceof ArrayBuffer)return function(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===LO(n,e,i.length);default:return!1}}(n,e,t,r))}function LO(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function Hx(n,e,t,i){return BO.apply(this,arguments)}function BO(){return(BO=li(function*(n,e,t,i){nu(!i||"object"==typeof i),e&&!Array.isArray(e)&&!sO(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=zx(n),o=ade(e,i),a=yield ude(n,o,t);return a?(i=ode({url:r,parse:Hx,loaders:o},t=Sue(t,a,o,r),i),yield bde(a,n,t,i)):null})).apply(this,arguments)}function bde(n,e,t,i){return VO.apply(this,arguments)}function VO(){return(VO=li(function*(n,e,t,i){if(Due(n),e=yield rde(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(jue(n,t))return yield Uue(n,e,t,i,Hx);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw nu(!n.parseSync),new Error(`${n.id} loader - no parser found and worker is disabled`)})).apply(this,arguments)}function q0(n,e,t,i){return jO.apply(this,arguments)}function jO(){return(jO=li(function*(n,e,t,i){!Array.isArray(e)&&!sO(e)&&(t=e,e=void 0);const r=f4(t);let s=n;return"string"==typeof n&&(s=yield r(n)),em(n)&&(s=yield r(n)),yield Hx(s,e,t)})).apply(this,arguments)}const P4=Er(2,24)-1,Cde=Object.freeze([]),Tde=Ox(({oldViewport:n,viewport:e})=>n.equals(e));let ru=new Uint8ClampedArray(0);const Ade={data:{type:"data",value:Cde,async:!0},dataComparator:null,_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,s&&(r=Sn(at({},r),{fetch:Sn(at({},null===(a=r)||void 0===a?void 0:a.fetch),{signal:s})}));let l=o.contains(n);return!l&&!r&&(o.add({resourceId:n,data:q0(n,i),persistent:!1}),l=!0),l?o.subscribe({resourceId:n,onChange:c=>t.internalState.reloadAsyncProp(e,c),consumerId:t.id,requestId:e}):q0(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Vi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};let Y0=(()=>{class n extends tue{toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}raiseError(t,i){var r,s,o,a;i&&(t.message="".concat(i,": ").concat(t.message)),(null===(r=(s=this.props).onError)||void 0===r?void 0:r.call(s,t))||null===(o=this.context)||void 0===o||null===(a=o.onError)||void 0===a||a.call(o,t,this)}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(t=!0){this.internalState&&(this.internalState.needsRedraw=t)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(t){const{viewport:i}=this.context,r=ZU(t,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,o,a]=GU(r,i.pixelProjectionMatrix);return 2===t.length?[s,o]:[s,o,a]}unproject(t){const{viewport:i}=this.context;return i.unproject(t)}projectPosition(t){return function(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function(n){const e=at({},n);let{coordinateSystem:t}=n;const{viewport:i,coordinateOrigin:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=n;return t===Vi.DEFAULT&&(t=i.isGeospatial?Vi.LNGLAT:Vi.CARTESIAN),void 0===s&&(e.fromCoordinateSystem=t),void 0===o&&(e.fromCoordinateOrigin=r),e.coordinateSystem=t,e}(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:u}=PU(t,i,r),h=ZU(n,{viewport:t,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(l||c));return h}(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===Vi.DEFAULT||t===Vi.LNGLAT||t===Vi.CARTESIAN}onHover(t,i){return!!this.props.onHover&&this.props.onHover(t,i)}onClick(t,i){return!!this.props.onClick&&this.props.onClick(t,i)}nullPickingColor(){return[0,0,0]}encodePickingColor(t,i=[]){return i[0]=t+1&255,i[1]=t+1>>8&255,i[2]=t+1>>8>>8&255,i}decodePickingColor(t){fc(t instanceof Uint8Array);const[i,r,s]=t;return i+256*r+65536*s-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(t){for(const i of this.props.extensions)t=Nle(t,i.getShaders.call(this,i));return t}shouldUpdateState({changeFlags:s}){return s.propsOrDataChanged}updateState({oldProps:t,props:i,changeFlags:s}){const o=this.getAttributeManager();if(s.dataChanged&&o){const{dataChanged:c}=s;if(Array.isArray(c))for(const u of c)o.invalidateAll(u);else o.invalidateAll()}const l=i.highlightedObjectIndex>=0||i.pickable;if((t.highlightedObjectIndex>=0||t.pickable)!==l&&o){const{pickingColors:c,instancePickingColors:u}=o.attributes,h=c||u;h&&(l&&h.constant&&(h.constant=!1,o.invalidate(h.id)),!h.value&&!l&&(h.constant=!0,h.value=[0,0,0]))}}finalizeState(){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(t){for(const i of this.getModels())i.draw(t)}getPickingInfo({info:t}){const{index:r}=t;return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}activateViewport(t){const i=this.internalState.viewport;this.internalState.viewport=t,(!i||!Tde({oldViewport:i,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all",i=""){const r=this.getAttributeManager();!r||("all"===t?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const i of this.getModels())this._setModelAttributes(i,t)}_updateAttributes(t){const i=this.getAttributeManager();if(!i)return;const r=this.getNumInstances(t),s=this.getStartIndices(t);i.update({data:t.data,numInstances:r,startIndices:s,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});const o=i.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const i=t.update(),r=Object.create(this.props);for(const s in i)Object.defineProperty(r,s,{value:i[s]});return r}return this.props}calculateInstancePickingColors(t,{numInstances:i}){if(t.constant)return;const r=Math.floor(ru.length/3);if(this.internalState.usesPickingColorCache=!0,r<i){i>P4&&Ri.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),ru=A0.allocate(ru,i,{size:3,copy:!0,maxCount:Math.max(i,P4)});const s=Math.floor(ru.length/3),o=[];for(let a=r;a<s;a++)this.encodePickingColor(a,o),ru[3*a+0]=o[0],ru[3*a+1]=o[1],ru[3*a+2]=o[2]}t.value=ru.subarray(0,3*i)}_setModelAttributes(t,i){const o=this.getAttributeManager().getShaderAttributes(i,t.userData.excludeAttributes||{});t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,s=i||r,o=s.getVertexOffset(t),a=s.getVertexOffset(t+1);s.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;this.internalState.usesPickingColorCache&&r.value.buffer!==ru.buffer&&(r.value=ru.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0})}getNumInstances(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(n){if(!function(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(t.data)}getStartIndices(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){Do("layer.initialize",this),this._initState(),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const t=this.needsUpdate();Do("layer.update",this,t),t&&this._updateState()}_updateState(){const t=this.props,i=this.context.viewport,r=this._updateUniformTransition();this.internalState.propsInTransition=r,this.context.viewport=this.internalState.viewport||i,this.props=r;try{const s=this._getUpdateParams(),o=this.getModels();if(this.context.gl)this.updateState(s);else try{this.updateState(s)}catch(l){}for(const l of this.props.extensions)l.updateState.call(this,s,l);const a=this.getModels()[0]!==o[0];this._updateModules(s,a),this.isComposite?this._renderLayers(s):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=i,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){Do("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}drawLayer({moduleParameters:t=null,uniforms:i={},parameters:r={}}){this._updateAttributeTransition();const s=this.props;this.props=this.internalState.propsInTransition||s;const{opacity:o}=this.props;i.opacity=Math.pow(o,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:a}=this.props,l=a&&a(i)||[0,0];Xu(this.context.gl,{polygonOffset:l}),hc(this.context.gl,r,()=>{const c={moduleParameters:t,uniforms:i,parameters:r,context:this.context};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=s}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(t){const{changeFlags:i}=this.internalState;for(const s in t)if(t[s]){let o=!1;switch(s){case"dataChanged":Array.isArray(i[s])&&(i[s]=Array.isArray(t[s])?i[s].concat(t[s]):t[s],o=!0);default:i[s]||(i[s]=t[s],o=!0)}o&&Do("layer.changeFlag",this,s,t)}const r=i.dataChanged||i.updateTriggersChanged||i.propsChanged||i.extensionsChanged;i.propsOrDataChanged=r,i.somethingChanged=r||t.viewportChanged||t.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(t,i){const r=function(n,e){const t=TU({newProps:n,oldProps:e,propTypes:WI(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(n,e){if(null===e)return"oldProps is null, initial diff";let t=null;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function(n,e){if(null===e)return"oldProps is null, initial diff";if("all"in n.updateTriggers&&AU(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&AU(n,e,r)&&(t[r]=!0,i=t);return i}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:Tle(n,e),transitionsChanged:xle(n,e)}}(t,i);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged)this.internalState.uniformTransitions.add(s,i[s],t[s],t.transitions[s]);return this.setChangeFlags(r)}validateProps(){!function(n){const e=WI(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}setModuleParameters(t){for(const i of this.getModels())i.updateModuleSettings(t)}updateAutoHighlight(t){this.props.autoHighlight&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const i={pickingSelectedColor:t.picked?t.color:null},{highlightColor:r}=this.props;t.picked&&"function"==typeof r&&(i.pickingHighlightColor=r(t)),this.setModuleParameters(i),this.setNeedsRedraw()}_updateModules({props:t,oldProps:i},r){const{autoHighlight:s,highlightedObjectIndex:o,highlightColor:a}=t;if(r||i.autoHighlight!==s||i.highlightedObjectIndex!==o||i.highlightColor!==a){const l={};s||(l.pickingSelectedColor=null),Array.isArray(a)&&(l.pickingHighlightColor=a),Number.isInteger(o)&&(l.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let i=!1;i=i||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const r=this.getAttributeManager(),s=r&&r.getNeedsRedraw(t);return i=i||s,i}_getAttributeManager(){return new ple(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){fc(!this.internalState&&!this.state),fc(isFinite(this.props.coordinateSystem));const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new nue({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Ri.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new ble(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(t){Do("layer.matched",this,this===t);const{state:i,internalState:r}=t;this!==t&&(this.internalState=r,this.internalState.layer=this,this.state=i,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}return n.layerName="Layer",n.defaultProps=Ade,n})(),k4=(()=>{class n extends Y0{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:i}=t;return i&&i.__source&&i.__source.parent&&i.__source.parent.id===this.id&&(t.object=i.__source.object,t.index=i.__source.index),t}renderLayers(){return null}filterSubLayer(t){return!0}shouldRenderSubLayer(t,i){return i&&i.length}getSubLayerClass(t,i){const{_subLayerProps:r}=this.props;return r&&r[t]&&r[t].type||i}getSubLayerRow(t,i,r){return t.__source={parent:this,object:i,index:r},t}getSubLayerAccessor(t){if("function"==typeof t){const i={data:this.props.data,target:[]};return(r,s)=>r&&r.__source?(i.index=r.__source.index,t(r.__source.object,i)):t(r,s)}return t}getSubLayerProps(t={}){const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:A,extensions:I,fetch:G,_subLayerProps:k}=this.props,oe={opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:A,extensions:I,fetch:G},we=k&&k[t.id],Be=we&&we.updateTriggers,Ue=t.id||"sublayer";if(we){const qe=this.constructor._propTypes,bt=t.type?t.type._propTypes:{};for(const xt in we){const Mt=bt[xt]||qe[xt];Mt&&"accessor"===Mt.type&&(we[xt]=this.getSubLayerAccessor(we[xt]))}}Object.assign(oe,t,we),oe.id="".concat(this.props.id,"-").concat(Ue),oe.updateTriggers=at(at({all:this.props.updateTriggers.all},t.updateTriggers),Be);for(const qe of I){const bt=qe.getSubLayerProps.call(this,qe);bt&&Object.assign(oe,bt,{updateTriggers:Object.assign(oe.updateTriggers,bt.updateTriggers)})}return oe}_updateAutoHighlight(t){for(const i of this.getSubLayers())i.updateAutoHighlight(t)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:t}=this.internalState;const i=!t||this.needsUpdate();i&&(t=this.renderLayers(),t=SI(t,Boolean),this.internalState.subLayers=t),Do("compositeLayer.renderLayers",this,i,t);for(const r of t)r.parent=this}}return n.layerName="CompositeLayer",n})();const Dde=/([0-9]+\.?[0-9]*)(%|px)/;function Gx(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=n.match(Dde);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function $x(n,e){return n.relative?Math.round(n.position*e):n.position}function X0(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&X0(i,r)))return!1}return!0}class UO{constructor(e={}){const{id:t=null,x:i=0,y:r=0,width:s="100%",height:o="100%",projectionMatrix:a=null,fovy:l=50,near:c=.1,far:u=1e3,modelMatrix:h=null,viewportInstance:f=null,type:g=Jg}=e;fc(!f||f instanceof Jg),this.viewportInstance=f,this.id=t||this.constructor.displayName||"view",this.type=g,this.props=Sn(at({},e),{id:this.id,projectionMatrix:a,fovy:l,near:c,far:u,modelMatrix:h}),this._parseDimensions({x:i,y:r,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):X0(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return this._getViewport(i,r)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t=at({},e);for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){return{x:$x(this._x,e),y:$x(this._y,t),width:$x(this._width,e),height:$x(this._height,t)}}_getControllerProps(e){let t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),at(at({},e),t)):null}_getViewport(e,t){const{type:i}=this;return new i(at(at(at({},e),this.props),t))}_parseDimensions({x:e,y:t,width:i,height:r}){this._x=Gx(e),this._y=Gx(t),this._width=Gx(i),this._height=Gx(r)}}const K0=()=>{},F4={transitionEasing:n=>n,transitionInterruption:1,onTransitionStart:K0,onTransitionInterrupt:K0,onTransitionEnd:K0};class Ide{constructor(e,t={}){this.ControllerState=e,this.props=at(at({},F4),t),this.propsInTransition=null,this.transition=new B0(t.timeline),this.onViewStateChange=t.onViewStateChange||K0,this.onStateChange=t.onStateChange||K0,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(e=at(at({},F4),e),this.props=e,this._shouldIgnoreViewportChange(i,e))return t;if(this._isTransitionEnabled(e)){const{interruption:r,endProps:s}=this.transition.settings,o=at(at({},i),2===r?s:this.propsInTransition||i);this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&Boolean(i)}_isUpdateDueToCurrentTransition(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(i),{transitionInterpolator:s}=t,o=s.getDuration?s.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(t)}}_onTransitionUpdate(e){const{time:t,settings:{interpolator:i,startProps:r,endProps:s,duration:o,easing:a}}=e,l=a(t/o),c=i.interpolateProps(r,s,l);this.propsInTransition=new this.ControllerState(at(at({},this.props),c)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}const L4=["longitude","latitude","zoom","bearing","pitch"],Rde=["longitude","latitude","zoom"];class B4 extends class{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare||Object.keys(t))if(!(i in e)||!(i in t)||!M0(e[i],t[i]))return!1;return!0}initializeProps(e,t){let i;if(this._propsToExtract){const r={},s={};for(const o of this._propsToExtract)r[o]=e[o],s[o]=t[o];i={start:r,end:s}}else i={start:e,end:t};return this._checkRequiredProps(i.start),this._checkRequiredProps(i.end),i}interpolateProps(e,t,i){return t}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(t=>{const i=e[t];fc(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}{constructor(e={}){super((Array.isArray(e)?e:e.transitionProps)||{compare:L4,extract:L4,required:Rde}),this.opts=e}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(t),l=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(l),aroundPosition:l,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const s of this._propsToExtract)r[s]=gx(e[s]||0,t[s]||0,i);if(t.aroundPosition){const s=this.opts.makeViewport(at(at({},t),r));Object.assign(r,s.panByPosition(t.aroundPosition,gx(e.around,t.around,i)))}return r}}const fh={transitionDuration:0},Nde={transitionDuration:300,transitionEasing:n=>n,transitionInterruption:1},qx=n=>1-(1-n)*(1-n),tm_WHEEL=["wheel"],tm_PAN=["panstart","panmove","panend"],tm_PINCH=["pinchstart","pinchmove","pinchend"],tm_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],tm_DOUBLE_TAP=["doubletap"],tm_KEYBOARD=["keydown"];class zO{constructor(e,t={}){this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new Ide(e,Sn(at({},t),{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}));const i=this.linearTransitionProps;this._transition=i&&Sn(at({},Nde),{transitionInterpolator:new B4({transitionProps:i})}),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){const{ControllerState:t}=this;this.controllerState=new t(at(at({makeViewport:this.makeViewport},this.controllerStateProps),this._state));const i=this._eventStartBlocked;switch(e.type){case"panstart":return!i&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!i&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!i&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){const{x:t,y:i}=this.controllerStateProps,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.controllerStateProps;if(t&&t.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&t&&t.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:t}=e;!0===t&&(t=300),this.inertia=t;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=Boolean(this.onViewStateChange);this.toggleEvents(tm_WHEEL,u&&i),this.toggleEvents(tm_PAN,u&&(r||s)),this.toggleEvents(tm_PINCH,u&&(a||l)),this.toggleEvents(tm_TRIPLE_PAN,u&&l),this.toggleEvents(tm_DOUBLE_TAP,u&&o),this.toggleEvents(tm_KEYBOARD,u&&c),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t={},i={}){const r=at(at({},e.getViewportProps()),t),s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,fh,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,fh,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(s,Sn(at({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:qx}),{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,fh,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(s,Sn(at({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:qx}),{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,Sn(at({},this._getTransitionProps({around:t})),{transitionDuration:r?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,fh,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,fh,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,Sn(at({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:qx}),{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(i,fh,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(t,fh,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t,_lastPinchEvent:i}=this;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),l=Math.pow(2,o+a*t/2);s=s.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(s,Sn(at({},this._getTransitionProps({around:r})),{transitionDuration:t,transitionEasing:qx}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),c.isZooming=!0;break;case"Equal":l=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":t?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(r),c.isPanning=!0);break;case"ArrowRight":t?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(r),c.isPanning=!0);break;case"ArrowUp":t?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(r),c.isPanning=!0);break;case"ArrowDown":t?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(r),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{_transition:t}=this;return t?e?Sn(at({},t),{transitionInterpolator:new B4(Sn(at({},e),{transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport}))}):t:fh}}class V4{constructor(e){this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}}const ph_target=[0,0,0];class Yx extends V4{constructor({makeViewport:e,width:t,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=ph_target,zoom:a=0,minRotationX:l=-90,maxRotationX:c=90,minZoom:u=-(1/0),maxZoom:h=Infinity,startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:A,startZoomPosition:I,startZoom:G}){super({width:t,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:u,maxZoom:h}),this._state={startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:A,startZoomPosition:I,startZoom:G},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this._state.startPanPosition||t;if(!i)return this;const s=this.makeViewport(this._viewportProps).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this._state,{width:a,height:l}=this._viewportProps;if(!r||!Number.isFinite(s)||!Number.isFinite(o))return this;let c;if(e){let u=(e[0]-r[0])/a;(s<-90||s>90)&&(u*=-1),c={rotationX:s+(e[1]-r[1])/l*180,rotationOrbit:o+180*u}}else c={rotationX:s+i,rotationOrbit:o+t};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i=at({},this._viewportProps),{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:i}){const{zoom:r}=this._viewportProps;let{startZoom:s,startZoomPosition:o}=this._state;Number.isFinite(s)||(s=r,o=this._unproject(t)||this._unproject(e));const a=this._calculateNewZoom({scale:i,startZoom:s}),l=this.makeViewport(Sn(at({},this._viewportProps),{zoom:a}));return this._getUpdatedState(at({zoom:a},l.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this._viewportProps;return Number.isFinite(t)||(t=this._viewportProps.zoom),Ua(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this._viewportProps;return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new Yx(at(at(at({},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Ua(r,i,t),e.rotationX=Ua(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function(n,e){const t=n%360;return t<0?360+t:t}(a+180)-180),e}}class kde extends zO{constructor(e){super(Yx,e)}get linearTransitionProps(){return["target","zoom","rotationX","rotationOrbit"]}}class Fde extends zO{constructor(e){e.dragMode=e.dragMode||"pan",super(Yx,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}}const Lde=(new qn).lookAt({eye:[0,0,1]});function Bde({width:n,height:e,near:t,far:i}){return n=n||1,e=e||1,(new qn).ortho({left:-n/2,right:n/2,bottom:-e/2,top:e/2,near:t,far:i})}class Vde extends Jg{constructor(e){const{width:t,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],flipY:l=!0}=e,c=Math.pow(2,o);super(Sn(at({},e),{longitude:null,position:a,viewMatrix:Lde.clone().scale([c,c*(l?-1:1),c]),projectionMatrix:Bde({width:t,height:i,near:r,far:s}),zoom:o}))}panByPosition(e,t){const r=kx([],e,kU([],j0(t,this.pixelUnprojectionMatrix)));return{target:kx([],this.center,r)}}}let jde=(()=>{class n extends UO{constructor(t){super(Sn(at({},t),{type:Vde}))}get controller(){return this._getControllerProps({type:Fde})}}return n.displayName="OrthographicView",n})();const Xx=Math.PI/180;function Ude({height:n,fovy:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:s}){const o=.5/Math.tan(e*Xx/2),a="Z"===t?[0,0,1]:[0,1,0],l="Z"===t?[0,-o,0]:[0,0,o],c=(new qn).lookAt({eye:l,up:a});c.rotateX(i*Xx),"Z"===t?c.rotateZ(r*Xx):c.rotateY(r*Xx);const u=Math.pow(2,s)/(n||1);return c.scale(u),c}class zde extends Jg{constructor(e){const{height:t,fovy:i,orbitAxis:r,target:s=[0,0,0],rotationX:o=0,rotationOrbit:a=0,zoom:l=0}=e;super(Sn(at({},e),{longitude:null,viewMatrix:Ude({height:t,fovy:i,orbitAxis:r,rotationX:o,rotationOrbit:a,zoom:l}),fovy:i,position:s,zoom:l})),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=t?r:this.height-r,[a,l,c]=j0([i,o,s],this.pixelUnprojectionMatrix);return[a,l,c]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}let Hde=(()=>{class n extends UO{constructor(t={}){const{orbitAxis:i="Z"}=t;super(Sn(at({},t),{orbitAxis:i,type:zde}))}get controller(){return this._getControllerProps({type:kde})}}return n.displayName="OrbitView",n})();const Gde=[255,255,255],$de=1;let Wde=0;class j4{constructor(e={}){const{color:t=Gde}=e,{intensity:i=$de}=e;this.id=e.id||"ambient-".concat(Wde++),this.color=t,this.intensity=i,this.type="ambient"}}const qde=[255,255,255],Yde=1,Xde=[0,0,-1];let Kde=0;class U4{constructor(e={}){const{color:t=qde}=e,{intensity:i=Yde}=e,{direction:r=Xde}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(Kde++),this.color=t,this.intensity=i,this.type="directional",this.direction=new Mo(r).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}}class z4{constructor(e={}){const{id:t="effect"}=e;this.id=t,this.props=at({},e)}preRender(){}getModuleParameters(){}cleanup(){}}class HO extends class{constructor(e,t={}){const{id:i="pass"}=t;this.id=i,this.gl=e,this.props=at({},t)}setProps(e){Object.assign(this.props,e)}render(){}cleanup(){}}{render(e){return Xu(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{viewports:t,views:i,onViewportActive:r,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";const o=this.gl;s&&function(n){Xu(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(o);const a=[];for(const l of t){const c=l.viewport||l,u=i&&i[c.id];r(c);const h=this._getDrawLayerParams(c,e);e.view=u;const f=c.subViewports||[c];for(const g of f){e.viewport=g;const m=this._drawLayersInViewport(o,e,h);a.push(m)}}return a}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,effects:s,moduleParameters:o}){const a=[],l=H4(),c={viewport:e,isPicking:i.startsWith("picking"),renderPass:i};for(let u=0;u<t.length;u++){const h=t[u],f=this._shouldDrawLayer(h,c,r),m={shouldDrawLayer:f,layerRenderIndex:l(h,f)};f&&(m.moduleParameters=this._getModuleParameters(h,s,i,o),m.layerParameters=this.getLayerParameters(h,u)),a[u]=m}return a}_drawLayersInViewport(e,{layers:t,pass:i,viewport:r,view:s},o){const a=function(n,{viewport:e}){const t=n.canvas?n.canvas.clientHeight||n.canvas.height:100,i=e,r=Vg(n);return[i.x*r,(t-i.y-i.height)*r,i.width*r,i.height*r]}(e,{viewport:r});if(s&&s.props.clear){const c=!0===s.props.clear?{color:!0,depth:!0}:s.props.clear;hc(e,{scissorTest:!0,scissor:a},()=>pI(e,c))}const l={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Xu(e,{viewport:a});for(let c=0;c<t.length;c++){const u=t[c],{shouldDrawLayer:h,layerRenderIndex:f,moduleParameters:g,layerParameters:m}=o[c];if(h&&u.props.pickable&&l.pickableCount++,u.isComposite)l.compositeCount++;else if(h){l.visibleCount++,g.viewport=r;try{u.drawLayer({moduleParameters:g,uniforms:{layerIndex:f},parameters:m})}catch(A){u.raiseError(A,"drawing ".concat(u," to ").concat(i))}}}return l}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t){return e.props.parameters}_shouldDrawLayer(e,t,i){if(!this.shouldDrawLayer(e)||!e.props.visible||(t.layer=e,i&&!i(t)))return!1;let s=e.parent;for(;s;){if(!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){const s=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Vg(this.gl)});if(t)for(const o of t)Object.assign(s,o.getModuleParameters(e));return Object.assign(s,this.getModuleParameters(e,t),r)}}function H4(n=0,e={}){const t={},i=(r,s)=>{const o=r.props._offset,a=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in e)&&i(r.parent,!1),l in t){const u=t[l]=t[l]||H4(e[l],e);c=u(r,s),t[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),t[a]=null):c=n;return s&&c>=n&&(n=c+1),e[a]=c,c};return i}class ehe extends HO{constructor(e,t){super(e,t),this.shadowMap=new ya(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new zg(e,{format:33189,width:1,height:1}),this.fbo=new ks(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;hc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=Vg(this.gl),s=i.width*r,o=i.height*r;(s!==t.width||o!==t.height)&&t.resize({width:s,height:o}),super.render(Sn(at({},e),{target:t,pass:"shadow"}))})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const nhe=Object.keys(Vi).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Vi[n],";")).join(""),ihe=Object.keys(Zc).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(Zc[n],";")).join(""),rhe="".concat(nhe,"\n").concat(ihe,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n"),she={},GO={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}],vs:rhe,getUniforms:function(n=she){return n.viewport?function({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=Vi.DEFAULT,coordinateOrigin:r,autoWrapLongitude:s=!1}={}){i===Vi.DEFAULT&&(i=n.isGeospatial?Vi.LNGLAT:Vi.CARTESIAN);const o=lce({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=t||sce,o}(n):{}}},che=Ox(function({viewport:n,center:e}){return new qn(n.viewProjectionMatrix).invert().transform(e)}),uhe=Ox(function({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,s=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(o=>function(n,e){const[t,i,r]=n,s=j0([t,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new Mo(n.center).negate()),l=s.map(u=>a.transform(u)),c=(new qn).ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});t.push(c.multiplyRight(o))}return t}),dhe=[0,0,0,1],hhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],$O={name:"shadow",dependencies:[GO],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>{if(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0){const{shadowEnabled:t=!0}=n;return t&&n.shadowMatrices&&n.shadowMatrices.length>0?function(n={},e={}){const t={shadow_uDrawShadowMap:Boolean(n.drawToShadowMap),shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||dhe,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},i=che({viewport:n.viewport,center:e.project_uCenter}),r=[],s=uhe({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let o=0;o<n.shadowMatrices.length;o++){const a=s[o],l=a.clone().translate(new Mo(n.viewport.center).negate());e.project_uCoordinateSystem===Vi.LNGLAT&&e.project_uProjectionMode===Zc.WEB_MERCATOR?(s[o]=l,r[o]=i):(s[o]=a.clone().multiplyRight(hhe),r[o]=l.transform(i))}for(let o=0;o<s.length;o++)t["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],t["shadow_uProjectCenters[".concat(o,"]")]=r[o],t["shadow_uShadowMap".concat(o)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[o]:n.dummyShadowMap;return t}(n,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},_he={color:[255,255,255],intensity:1},G4=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],yhe=[0,0,0,200/255];class WO extends z4{constructor(e){super(e),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=yhe,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=F0.getDefaultProgramManager(e),$O&&this.programManager.addDefaultModule($O)),this.dummyShadowMap||(this.dummyShadowMap=new ya(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule($O),this.programManager=null)}_createLightMatrix(){const e=[];for(const t of this.directionalLights){const i=(new qn).lookAt({eye:new Mo(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new ehe(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new j4(_he),this.directionalLights.push(new U4(G4[0]),new U4(G4[1])))}}let bhe=1,vhe=1;class $4{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=bhe++,a={time:0,delay:t,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=vhe++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class whe{constructor(e,t,i){this.id=e,this.context=i,this._loadCount=0,this._subscribers=new Set,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=q0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Ehe{constructor({gl:e,protocol:t}){this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(t,i):(s=new whe(e,t,this._context),this._resources[e]=s),s.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i];r.resource&&r.resource.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[t]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),i&&(o[t]=a,a.onChange=r,a.resource=i,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const xhe=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},GO],She=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Che(n){const e=F0.getDefaultProgramManager(n);for(const t of xhe)e.addDefaultModule(t);for(const t of She)e.addShaderHook(t);return e}const Mhe=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class Dhe{constructor(e,{deck:t,stats:i,viewport:r,timeline:s}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new Ehe({gl:e,protocol:"deck://"}),this.context=Sn(at({},Mhe),{layerManager:this,gl:e,deck:t,programManager:e&&Che(e),stats:i||new aI({id:"deck.gl"}),viewport:r||new Jg({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new $4,resourceManager:this.resourceManager}),this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){Do("layerManager.setLayers",this,t,e),this.lastRenderedLayers=e,e=SI(e,Boolean);for(const i of e)i.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return Do("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const o of e)i[o.id]?Ri.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const s=t[r.id];null===s&&Ri.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite&&r.getSubLayers()}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class Ihe{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return"string"==typeof e?this.views.find(t=>t.id===e):e}getViewState(e){const t=this.getView(e),i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=SI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!X0(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Ri.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(t)}_createController(e,t){return new(0,t.type)(at({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height})},t))}_updateController(e,t,i,r){let s=e.controller;return s?(s=Sn(at(at(at({},t),e.props),s),{id:e.id,x:i.x,y:i.y,width:i.width,height:i.height}),r?r.setProps(s):r=this._createController(e,s),r):null}_rebuildViewports(){const{width:e,height:t,views:i}=this,r=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=i.length;o--;){const a=i[o],l=this.getViewState(a),c=a.makeViewport({width:e,height:t,viewState:l});let u=r[a.id];a.controller&&!u&&(s=!0),(s||!a.controller)&&u&&(u.finalize(),u=null),this.controllers[a.id]=this._updateController(a,l,c,u),this._viewports.unshift(c)}for(const o in r)r[o]&&!this.controllers[o]&&r[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}class Rhe extends V4{constructor({makeViewport:e,width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,maxZoom:u=20,minZoom:h=0,maxPitch:f=60,minPitch:g=0,startPanLngLat:m,startZoomLngLat:A,startRotatePos:I,startBearing:G,startPitch:k,startZoom:oe,normalize:we}={}){fc(Number.isFinite(s)),fc(Number.isFinite(r)),fc(Number.isFinite(o)),super({width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:u,minZoom:h,maxPitch:f,minPitch:g,normalize:we}),this._state={startPanLngLat:m,startZoomLngLat:A,startRotatePos:I,startBearing:G,startPitch:k,startZoom:oe},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this._state.startPanLngLat||this._unproject(t);if(!i)return this;const s=this.makeViewport(this._viewportProps).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this._state;if(!r||!Number.isFinite(s)||!Number.isFinite(o))return this;let a;return a=e?this._calculateNewPitchAndBearing(Sn(at({},this._getRotationParams(e,r)),{startBearing:s,startPitch:o})):{bearing:s+t,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:s}=this._state;Number.isFinite(r)||(r=this._viewportProps.zoom,s=this._unproject(t)||this._unproject(e));const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport(Sn(at({},this._viewportProps),{zoom:o}));return this._getUpdatedState(at({zoom:o},a.panByPosition(s,e)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i=at({},this._viewportProps),{bearing:r,longitude:s}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-t.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}_zoomFromCenter(e){const{width:t,height:i}=this._viewportProps;return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this._viewportProps;return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor(at(at(at({makeViewport:this.makeViewport},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=Ua(r,i,t);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Ua(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,function({width:n,height:e,longitude:t,latitude:i,zoom:r,pitch:s=0,bearing:o=0}){(t<-180||t>180)&&(t=BU(t+180,360)-180),(o<-180||o>180)&&(o=BU(o+180,360)-180);const a=YI(e/512);if(r<=a)r=a,i=0;else{const l=e/2/Math.pow(2,r),c=Zg([0,l])[1];if(i<c)i=c;else{const u=Zg([0,512-l])[1];i>u&&(i=u)}}return{width:n,height:e,longitude:t,latitude:i,zoom:r,pitch:s,bearing:o}}(e)),e}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this._viewportProps;return Ua(t+Math.log2(e),r,i)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:t,startBearing:i,startPitch:r}){t=Ua(t,-1,1);const{minPitch:s,maxPitch:o}=this._viewportProps;let l=r;return t>0?l=r+t*(o-r):t<0&&(l=r-t*(s-r)),{pitch:l,bearing:i+180*e}}_getRotationParams(e,t){const i=e[0]-t[0],r=e[1]-t[1],s=e[1],o=t[1],{width:a,height:l}=this._viewportProps,c=i/a;let u=0;return r>0?Math.abs(l-o)>5&&(u=r/(o-l)*1.2):r<0&&o>5&&(u=1-s/o),u=Math.min(1,Math.max(-1,u)),{deltaScaleX:c,deltaScaleY:u}}}class Nhe extends zO{constructor(e){e.dragMode=e.dragMode||"pan",super(Rhe,e)}setProps(e){const t=this.controllerStateProps;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState(at(at({makeViewport:this.makeViewport},this.controllerStateProps),this._state)))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}}let Phe=(()=>{class n extends UO{constructor(t){super(Sn(at({},t),{type:QU}))}get controller(){return this._getControllerProps({type:Nhe})}}return n.displayName="MapView",n})();const khe=new WO;class Fhe{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!X0(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some(e=>e instanceof WO)||this._internalEffects.push(khe)}}class Lhe extends HO{}const q4={blendFunc:[1,0,32771,0],blendEquation:32774};class Y4 extends HO{render(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,super.render(e))}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},pass:h="picking",redrawReason:f,pickZ:g}){const m=this.gl;return this.pickZ=g,hc(m,Sn(at({scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},q4),{blend:!g}),()=>{super.render({target:o,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pass:h,redrawReason:f})})}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t){const i=this.pickZ?{blend:!1}:Sn(at({},q4),{blend:!0,blendColor:[0,0,0,this.useAlpha?(t+1)/255:1]});return at(at({},e.props.parameters),i)}}class Vhe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Lhe(e),this.pickLayersPass=new Y4(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.effects=e.effects||[],e.target=e.target||ks.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render(Sn(at({},e),{target:i}));this._postRender(e.effects,e),this.renderCount++,Do("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new ks(this.gl),new ks(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=t.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const jhe={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Uhe({pickedColors:n,layers:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:s}){if(n){const{x:o,y:a,width:l,height:c}=s;let u=r*r,h=-1,f=0;for(let g=0;g<c;g++){const m=g+a-i,A=m*m;if(A>u)f+=4*l;else for(let I=0;I<l;I++){if(n[f+3]-1>=0){const k=I+o-t,oe=k*k+A;oe<=u&&(u=oe,h=f)}f+=4}}if(h>=0){const g=n[h+3]-1,m=n.slice(h,h+4),A=e[g];if(A){const I=A.decodePickingColor(m),G=Math.floor(h/4/l);return{pickedColor:m,pickedLayer:A,pickedObjectIndex:I,pickedX:o+(h/4-G*l),pickedY:a+G}}Ri.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return jhe}function X4({pickInfo:n,mode:e,viewports:t,layerFilter:i,pixelRatio:r,x:s,y:o,z:a}){const l=n&&n.pickedLayer,u=function(n,e,t){for(let i=n.length-1;i>=0;i--){const r=n[i];if(r.containsPixel(e)&&(!t||t(r)))return r}return n[0]}(t,{x:s,y:o},i&&l&&(f=>i({layer:l,viewport:f,isPicking:!0,renderPass:"picking:".concat(e)}))),h=u&&u.unproject([s-u.x,o-u.y],{targetZ:a});return{color:null,layer:null,viewport:u,index:-1,picked:!1,x:s,y:o,pixel:[s,o],coordinate:h,devicePixel:n&&[n.pickedX,n.pickedY],pixelRatio:r}}function Hhe(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if("hover"===i){const h=t.index,f=t.layerId,g=o&&o.props.id;if(g!==f||a!==h){if(g!==f){const m=r.find(A=>A.props.id===f);m&&l.unshift(m)}t.layerId=g,t.index=a,t.info=null}}const c=X4(n),u=new Map;return u.set(null,c),l.forEach(h=>{let f=at({},c);h===o&&(f.color=s,f.index=a,f.picked=!0),f=K4({layer:h,info:f,mode:i}),h===o&&"hover"===i&&(t.info=f),u.set(f.layer.id,f),"hover"===i&&f.layer.updateAutoHighlight(f)}),u}function K4({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class $he{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new Y4(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?i.find(f=>f.id===o):null,c=a&&r.find(f=>f.id===a)||r[0],u=c&&c.unproject([e-c.x,t-c.y]),h={x:e,y:t,viewport:c,coordinate:u,layer:l};return l?at(at({},s),h):Object.assign(h,{color:null,object:null,index:-1})}_resizeBuffer(){const{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new ks(e),ks.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new ks(e),this.depthFBO.attach({36064:new ya(e,{format:Ci(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length>255?(Ri.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u}){if(!(e=this._getPickable(e)))return{result:[],emptyInfo:X4({viewports:i,x:r,y:s})};this._resizeBuffer();const h=Vg(this.gl),f=rI(this.gl,[r,s],!0),g=[f.x+Math.floor(f.width/2),f.y+Math.floor(f.height/2)],m=Math.round(o*h),{width:A,height:I}=this.pickingFBO,G=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:A,deviceHeight:I});let k;const oe=[],we={};for(let Be=0;Be<a;Be++){const qe=Uhe({pickedColors:G&&this._drawAndSample({layers:e,views:t,viewports:i,onViewportActive:u,deviceRect:G,pass:"picking:".concat(l),redrawReason:l}),layers:e,deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:G});let bt;if(qe.pickedLayer&&c&&this.depthFBO&&(bt=this._drawAndSample({layers:[qe.pickedLayer],views:t,viewports:i,onViewportActive:u,deviceRect:{x:qe.pickedX,y:qe.pickedY,width:1,height:1},pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0})[0]*i[0].distanceScales.metersPerUnit[2]+i[0].position[2]),qe.pickedColor&&Be+1<a){const xt=qe.pickedColor[3]-1;we[xt]=!0,e[xt].disablePickingIndex(qe.pickedObjectIndex)}k=Hhe({pickInfo:qe,lastPickedInfo:this.lastPickedInfo,mode:l,layers:e,layerFilter:this.layerFilter,viewports:i,x:r,y:s,z:bt,pixelRatio:h});for(const xt of k.values())xt.layer&&oe.push(xt);if(!qe.pickedColor)break}for(const Be in we)e[Be].restorePickingColors();return{result:oe,emptyInfo:k&&k.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u}){if(!(e=this._getPickable(e)))return[];this._resizeBuffer();const h=Vg(this.gl),f=rI(this.gl,[r,s],!0),g=f.x,m=f.y+f.height,A=rI(this.gl,[r+o,s+a],!0),G=A.y,we=function({pickedColors:n,layers:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4){const r=n[i+3]-1;if(r>=0){const s=n.slice(i,i+4),o=s.join(",");if(!t.has(o)){const a=e[r];a?t.set(o,{pickedColor:s,pickedLayer:a,pickedObjectIndex:a.decodePickingColor(s)}):Ri.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(t.values())}({pickedColors:this._drawAndSample({layers:e,views:t,viewports:i,onViewportActive:u,deviceRect:{x:g,y:G,width:A.x+A.width-g,height:m-G},pass:"picking:".concat(l),redrawReason:l}),layers:e}),Be=new Map,Ue=Number.isFinite(c);for(let qe=0;qe<we.length&&!(Ue&&Be.size>=c);qe++){const bt=we[qe];let xt={color:bt.pickedColor,layer:null,index:bt.pickedObjectIndex,picked:!0,x:r,y:s,width:o,height:a,pixelRatio:h};xt=K4({layer:bt.pickedLayer,info:xt,mode:l}),Be.has(xt.object)||Be.set(xt.object,xt)}return Array.from(Be.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:s,pass:o,redrawReason:a,pickZ:l}){if(e.length<1)return null;const c=l?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:c,deviceRect:s,pass:o,redrawReason:a,pickZ:l});const{x:u,y:h,width:f,height:g}=s,m=new(l?Float32Array:Uint8Array)(f*g*4);return px(c,{sourceX:u,sourceY:h,sourceWidth:f,sourceHeight:g,target:m}),m}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,t-i),l=Math.min(r,e+i+1)-o,c=Math.min(s,t+i+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const Whe={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class qhe{constructor(e){const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Whe),t.appendChild(this.el)),this.isVisible=!1}setTooltip(e,t,i){const r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}remove(){this.el&&this.el.remove()}}function Q4(n,e){if(!n)throw new Error(e)}const su={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Z4=su.global||su.self||su.window,Xhe="object"!=typeof process||"[object process]"!==String(process)||process.browser,J4="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Khe}=(J4&&parseFloat(J4[1]),Z4),qO="undefined"!=typeof Image,YO="undefined"!=typeof ImageBitmap,Qhe=Boolean(Khe),XO=!!Xhe||Qhe;function ez(n){const e=function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}function tz(n){switch(ez(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}const efe=/^data:image\/svg\+xml/,tfe=/\.svg((\?|#).*)?$/;function KO(n){return n&&(efe.test(n)||tfe.test(n))}function nfe(n,e){if(KO(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(i)}`}return iz(n,e)}function iz(n,e){if(KO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function rz(n,e,t){return QO.apply(this,arguments)}function QO(){return(QO=li(function*(n,e,t){const i=nfe(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield ife(s||i,e)}finally{s&&r.revokeObjectURL(s)}})).apply(this,arguments)}function ife(n,e){return ZO.apply(this,arguments)}function ZO(){return(ZO=li(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error(`Could not load image ${n}: ${s}`))}catch(s){r(s)}})})).apply(this,arguments)}const rfe={};let sz=!0;function sfe(n,e,t){return JO.apply(this,arguments)}function JO(){return(JO=li(function*(n,e,t){let i;i=KO(t)?yield rz(n,e,t):iz(n,t);const r=e&&e.imagebitmap;return yield ofe(i,r)})).apply(this,arguments)}function ofe(n){return eR.apply(this,arguments)}function eR(){return(eR=li(function*(n,e=null){if((afe(e)||!sz)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),sz=!1}return yield createImageBitmap(n)})).apply(this,arguments)}function afe(n){for(const e in n||rfe)return!1;return!0}const ou=!1,Q0=!0;function tR(n){const e=Z0(n);return function(n){const e=Z0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,ou)?{mimeType:"image/png",width:e.getUint32(16,ou),height:e.getUint32(20,ou)}:null}(e)||function(n){const e=Z0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,ou)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,ou);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,ou),width:e.getUint16(s+7,ou)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,ou)}return null}(e)||function(n){const e=Z0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,ou)?{mimeType:"image/gif",width:e.getUint16(6,Q0),height:e.getUint16(8,Q0)}:null}(e)||function(n){const e=Z0(n);return e.byteLength>=14&&16973===e.getUint16(0,ou)&&e.getUint32(2,Q0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Q0),height:e.getUint32(22,Q0)}:null}(e)}function Z0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function ffe(n,e){const{mimeType:t}=tR(n)||{},{_parseImageNode:i}=Z4;return Q4(i),i(n,t,e)}function nR(){return(nR=li(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{};let a;switch(gfe(r)){case"imagebitmap":a=yield sfe(n,e,s);break;case"image":a=yield rz(n,e,s);break;case"data":a=yield ffe(n,e);break;default:Q4(!1)}return"data"===r&&(a=tz(a)),a})).apply(this,arguments)}function gfe(n){switch(n){case"auto":case"data":return function(){if(YO)return"imagebitmap";if(qO)return"image";if(XO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(n){switch(n){case"auto":return YO||qO||XO;case"imagebitmap":return YO;case"image":return qO;case"data":return XO;default:throw new Error(`@loaders.gl/images: image ${n} not supported in this environment`)}}(n),n}}const iR={id:"image",module:"images",name:"Images",version:"3.0.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(n,e,t){return nR.apply(this,arguments)},tests:[n=>Boolean(tR(new DataView(n)))],options:{image:{type:"auto",decode:!0}}};var nm=et(4761);const _fe={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},J0="8.5.8",Kx=nm.CO.deck&&nm.CO.deck.VERSION;if(Kx&&Kx!==J0)throw new Error("deck.gl - multiple versions detected: ".concat(Kx," vs ").concat(J0));Kx||(Ri.log(1,"deck.gl ".concat(J0))(),nm.CO.deck=Object.assign(nm.CO.deck||{},{VERSION:J0,version:J0,log:Ri,_registerLoggers:function(n){MI=n}}),D4([_fe,[iR,{imagebitmap:{premultiplyAlpha:"none"}}]]));const yfe=nm.CO.deck;class Qx extends Ku{get[Symbol.toStringTag](){return"Query"}static isSupported(e,t=[]){const i=Ci(e),r=mj(e,"TIMER_QUERY");let s=i||r;for(const o of t)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:on(!1)}return s}constructor(e,t={}){super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return Qx.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const oz=fx()&&"undefined"!=typeof document;let Mfe=0;class Dfe{constructor(e={}){const{onCreateContext:t=(I=>KV(I)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=Rf.get("animation-loop-"+Mfe++)}=e;let{useDevicePixels:A=!0}=e;"useDevicePixelRatio"in e&&(mn.deprecated("useDevicePixelRatio","useDevicePixels")(),A=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:A}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return on("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Qx.isSupported(this.gl,["timers"])?new Qx(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return li(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,t=1){const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return mn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=oz?new Promise((e,t)=>{oz&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(...e){this.display?this.display._renderFrame(...e):this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?oI(this.props.gl,e):this.onCreateContext(e),!dx(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function(n){Xu(n,iI)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(n,e={}){if(n.canvas)return void function(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(mn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),l=Math.floor(r*o);n.canvas.width=a,n.canvas.height=l,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==l)&&(mn.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*o),n.canvas.height=Math.floor(r*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,function(n){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels),e);const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ks(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var Ife=et(1524),Zx=et.n(Ife);const Ofe={mousedown:1,mousemove:2,mouseup:4};(function(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function(n,e){for(let t=0;t<n.length;t++)if(n[t].pointerId===i.pointerId)return!0;return!1}(r)||r.push(i)),e.call(this,i)}})(Zx().PointerEventInput),function(n){n.prototype.handler=function(t){let i=Ofe[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(Zx().MouseInput);const kfe=Zx().Manager,au=Zx(),Ffe=au?[[au.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[au.Rotate,{enable:!1}],[au.Pinch,{enable:!1}],[au.Swipe,{enable:!1}],[au.Pan,{threshold:0,enable:!1}],[au.Press,{enable:!1}],[au.Tap,{event:"doubletap",taps:2,enable:!1}],[au.Tap,{event:"anytap",enable:!1}],[au.Tap,{enable:!1}]]:null,cz={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Lfe={doubletap:["tap"]},Bfe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},sR={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Vfe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},uz={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},jfe="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",im="undefined"!=typeof window?window:global;"undefined"!=typeof global?global:window,"undefined"!=typeof document&&document;let dz=!1;try{const n={get passive(){return dz=!0,!0}};im.addEventListener("test",n,n),im.removeEventListener("test",n,n)}catch(n){}const Ufe=-1!==jfe.indexOf("firefox"),{WHEEL_EVENTS:zfe}=sR,fz=4.000244140625;class $fe{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.events=zfe.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!dz&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}handleEvent(e){if(!this.options.enable)return;let t=e.deltaY;im.WheelEvent&&(Ufe&&e.deltaMode===im.WheelEvent.DOM_DELTA_PIXEL&&(t/=im.devicePixelRatio),e.deltaMode===im.WheelEvent.DOM_DELTA_LINE&&(t*=40));const i={x:e.clientX,y:e.clientY};0!==t&&t%fz==0&&(t=Math.floor(t/fz)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,i)}_onWheel(e,t,i){this.callback({type:"wheel",center:i,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:Wfe}=sR,pz="pointermove",gz="pointerover",mz="pointerout",_z="pointerleave";class qfe{constructor(e,t,i={}){this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=Wfe.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===pz&&(this.enableMoveEvent=t),e===gz&&(this.enableOverEvent=t),e===mz&&(this.enableOutEvent=t),e===_z&&(this.enableLeaveEvent=t)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:gz,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:mz,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:_z,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:pz,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:Yfe}=sR,yz="keydown";class Xfe{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=Yfe.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=i.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===yz&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}handleEvent(e){const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:yz,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}const vz="contextmenu";class Kfe{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===vz&&(this.options.enable=t)}handleEvent(e){!this.options.enable||this.callback({type:vz,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const Qfe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},wz={srcElement:"root",priority:0};class cpe{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;i&&("object"!=typeof i||i.addEventListener)&&(i={srcElement:i}),i=i?Object.assign({},wz,i):wz;let l=a.get(i.srcElement);l||(l=[],a.set(i.srcElement,l));const c={type:e,handler:t,srcElement:i.srcElement,priority:i.priority};r&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===t){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;const t=this._normalizeEvent(e);let i=e.srcEvent.target;for(;i&&i!==t.rootElement;){if(this._emit(t,i),t.handled)return;i=i.parentNode}this._emit(t,"root")}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let l=0;l<i.length;l++){const{type:c,handler:u,once:h}=i[l];if(u(Object.assign({},e,{type:c,stopPropagation:s,stopImmediatePropagation:o})),h&&a.push(i[l]),r)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const t=this.eventManager.element;return Object.assign({},e,function(n){const e=Qfe[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(s=1===r,o=2===r,a=3===r):2===e?(s=Boolean(1&t),o=Boolean(4&t),a=Boolean(2&t)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}(e),function(n,e){const{srcEvent:t}=n;if(!n.center&&!Number.isFinite(t.clientX))return null;const i=n.center||{x:t.clientX,y:t.clientY},r=e.getBoundingClientRect();return{center:i,offsetCenter:{x:(i.x-r.left-e.clientLeft)/(r.width/e.offsetWidth||1),y:(i.y-r.top-e.clientTop)/(r.height/e.offsetHeight||1)}}}(e,t),{handled:!1,rootElement:t})}}const upe={events:null,recognizers:null,recognizerOptions:{},Manager:kfe,touchAction:"none",tabIndex:0};class dpe{constructor(e=null,t={}){this.options=Object.assign({},upe,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:i}=t;i&&this.on(i)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||Ffe}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(cz).forEach(r=>{const s=this.manager.get(r);s&&cz[r].forEach(o=>{s.recognizeWith(o)})});for(const r in t.recognizerOptions){const s=this.manager.get(r);if(s){const o=t.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new $fe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new qfe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Xfe(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new Kfe(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const s=Lfe[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);t?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,s){if("string"!=typeof e){i=t;for(const u in e)this._addEventHandler(u,e[u],i,r,s);return}const{manager:o,events:a}=this,l=uz[e]||e;let c=a.get(l);c||(c=new cpe(this),a.set(l,c),c.recognizerName=Vfe[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,t,i,r,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(uz[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of i.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){const{srcEvent:t}=e,i=Bfe[t.type];i&&this.manager.emit(i,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function Vf(){}const Ez={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:Vf,onResize:Vf,onViewStateChange:Vf,onInteractionStateChange:Vf,onBeforeRender:Vf,onAfterRender:Vf,onLoad:Vf,onError:(n,e)=>Ri.error(n)(),_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",debug:!1,drawPickingColors:!1};class eS{constructor(e){e=at(at({},Ez),e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&Ri.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,nm.qs)()&&Ri.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new aI({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&A0.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Ri.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Ri.removed("onLayerClick","onClick")(),e.initialViewState&&!X0(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||i||r||s||o,t}redraw(e){if(!this.layerManager)return;const t=e||this.needsRedraw({clearRedrawFlags:!0});!t||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const s=this.deckPicker[e](at({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport},i));return r.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),fc(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;let{width:t,height:i}=e;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.position="absolute",this.canvas.style.height=i)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:t}=this;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;return(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,!0)}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u,autoResizeDrawingBuffer:h}=e;return new Dfe({width:t,height:i,useDevicePixels:u,autoResizeDrawingBuffer:h,autoResizeViewport:!1,gl:r,onCreateContext:f=>KV(Sn(at(at({},s),f),{canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()})),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Phe({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const i=e.offsetCenter;if(!i)return;t.x=i.x,t.y=i.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=t.length>0;let r=i,s=!1;for(const o of t)r=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(r,e.event),this.props.getTooltip){const o=this.props.getTooltip(r);this.tooltip.setTooltip(o,r.x,r.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,oI(e,{enable:!0,copyState:!0})),this.tooltip=new qhe(this.canvas),Xu(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new $4;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new dpe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in PV)this.eventManager.on(r,this._onEvent);this.viewManager=new Ihe({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Dhe(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new Fhe,this.deckRenderer=new Vhe(e),this.deckPicker=new $he(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Xu(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers(at({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Ri.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=Sn(at({},this.viewState),{[e.viewId]:t}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const t=PV[e.type],i=e.offsetCenter;if(!t||!i)return;const r=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:r,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[t.handler]||o.props[t.handler]),l=this.props[t.handler];let c=!1;a&&(c=a.call(o,s,e)),!c&&l&&l(s,e)}_onPointerDown(e){const t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=Rf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}eS.getPropTypes=function(n){return{id:n.string,width:n.oneOfType([n.number,n.string]),height:n.oneOfType([n.number,n.string]),layers:n.oneOfType([n.object,n.array]),layerFilter:n.func,views:n.oneOfType([n.object,n.array]),viewState:n.object,effects:n.arrayOf(n.instanceOf(z4)),controller:n.oneOfType([n.func,n.bool,n.object]),gl:n.object,glOptions:n.object,parameters:n.object,pickingRadius:n.number,useDevicePixels:n.oneOfType([n.bool,n.number]),touchAction:n.string,eventRecognizerOptions:n.object,onWebGLInitialized:n.func,onResize:n.func,onViewStateChange:n.func,onInteractionStateChange:n.func,onBeforeRender:n.func,onAfterRender:n.func,onLoad:n.func,onError:n.func,debug:n.bool,drawPickingColors:n.bool,_framebuffer:n.object,_animate:n.bool,_pickable:n.bool,_typedArrayManagerProps:n.object}},eS.defaultProps=Ez,eS.VERSION=yfe.VERSION;const tS={name:"project32",dependencies:[GO],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},gpe={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},nS=at({inject:{"vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  // for picking depth values\n  picking_setPickingAttribute(geometry.position.z);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}},{name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(n=gpe){const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=Boolean(n.pickingActive),e.picking_uAttribute=Boolean(n.pickingAttribute)),e}}),xz={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class gh{static get DRAW_MODE(){return xz}constructor(e={}){const{id:t=ma("geometry"),drawMode:i=xz.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?at({indices:this.indices},this.attributes):this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,on(ArrayBuffer.isView(r.value),`${this._print(i)}: must be typed array or object with value as typed array`),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(on(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(i=Math.min(i,o.length/a))}return on(Number.isFinite(i)),i}}const Sz=()=>{},wpe={10241:9987,10240:9729,10242:33071,10243:33071};function Epe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function xpe(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function eb(n){return n&&(n.id||n.url)}function Cz(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];n[eb(r)]=Sn(at({},r),{x:s,y:t})}}class Ape{constructor(e,{onUpdate:t=Sz,onError:i=Sz}){this.gl=e,this.onUpdate=t,this.onError=i,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?eb(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,data:s,getIcon:o}){e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),o&&(this._getIcon=o),r&&(this._mapping=r),i&&this._updateIconAtlas(i),this._autoPacking&&(s||o)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(s))}get isLoaded(){return 0===this._pendingCount}_updateIconAtlas(e){var t;null===(t=this._texture)||void 0===t||t.delete(),this._texture=null,this._externalTexture=e,this.onUpdate()}_updateAutoPacking(e){const t=Object.values(function(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:s}=bx(n);for(const o of r){s.index++;const a=e(o,s),l=eb(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[l]&&(!t[l]||a.url!==t[l].url)&&(i[l]=Sn(at({},a),{source:o,sourceIndex:s.index}))}return i}(e,this._getIcon,this._mapping)||{});if(t.length>0){const{mapping:i,xOffset:r,yOffset:s,rowHeight:o,canvasHeight:a}=function({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<n.length;l++){const c=n[l];if(!t[eb(c)]){const{height:h,width:f}=c;i+f+e>o&&(Cz(t,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:c,xOffset:i}),i=i+f+e,s=Math.max(s,h)}}return a.length>0&&Cz(t,a,r),{mapping:t,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Epe(s+r+e)}}({icons:t,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=o,this._mapping=i,this._xOffset=r,this._yOffset=s,this._canvasHeight=a,this._texture||(this._texture=new ya(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:wpe})),this._texture.height!==this._canvasHeight&&(this._texture=function(n,e,t,i){const r=e.width,s=e.height,o=fj(e,{width:t,height:i});return function(n,e,t={}){const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=t;let{targetX:a,targetY:l,targetZ:c,width:u,height:h}=t;const{framebuffer:f,deleteFramebuffer:g}=T0(n);on(f);const{gl:m,handle:A}=f,I=void 0!==a||void 0!==l||void 0!==c;a=a||0,l=l||0,c=c||0;const G=m.bindFramebuffer(36160,A);on(e);let k=null;if(e instanceof Nf&&(k=e,u=Number.isFinite(u)?u:k.width,h=Number.isFinite(h)?h:k.height,k.bind(0),e=k.target),I)switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,s,a,l,i,r,u,h);break;case 35866:case 32879:Ao(m).copyTexSubImage3D(e,s,a,l,c,i,r,u,h)}else m.copyTexImage2D(e,s,o,i,r,u,h,0);k&&k.unbind(),m.bindFramebuffer(36160,G||null),g&&f.delete()}(e,o,{targetY:0,width:r,height:s}),e.delete(),o}(0,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(t)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,q0(i.url,iR,this._loadOptions).then(r=>{const s=eb(i),{x:o,y:a,width:l,height:c}=this._mapping[s],u=xpe(t,r,l,c);this._texture.setSubImageData({data:u,x:o,y:a,width:l,height:c}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const Tz=[0,0,0,255],Mpe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:Tz},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};let Dpe=(()=>{class n extends Y0{getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[tS,nS]})}initializeState(){this.state={iconManager:new Ape(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Tz},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState({oldProps:t,props:i,changeFlags:r}){super.updateState({props:i,oldProps:t,changeFlags:r});const s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:c}=i,{iconManager:u}=this.state;u.setProps({loadOptions:i.loadOptions});let h=!1;if(o||this.internalState.isAsyncPropLoading("iconAtlas")?(t.iconAtlas!==i.iconAtlas&&u.setProps({iconAtlas:o,autoPacking:!1}),t.iconMapping!==i.iconMapping&&(u.setProps({iconMapping:a}),h=!0)):u.setProps({autoPacking:!0}),(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.setProps({data:l,getIcon:c}),h&&(s.invalidate("instanceOffsets"),s.invalidate("instanceIconFrames"),s.invalidate("instanceColorModes")),r.extensionsChanged){var g;const{gl:m}=this.context;null===(g=this.state.model)||void 0===g||g.delete(),this.state.model=this._getModel(m),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(){super.finalizeState(),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:i,sizeMinPixels:r,sizeMaxPixels:s,sizeUnits:o,billboard:a,alphaCutoff:l}=this.props,{iconManager:c}=this.state,{viewport:u}=this.context,h=c.getTexture();h&&this.state.model.setUniforms(t).setUniforms({iconsTexture:h,iconsTextureDim:[h.width,h.height],sizeScale:i*("pixels"===o?u.metersPerPixel:1),sizeMinPixels:r,sizeMaxPixels:s,billboard:a,alphaCutoff:l}).draw()}_getModel(t){return new Yg(t,Sn(at({},this.getShaders()),{id:this.props.id,geometry:new gh({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}_onUpdate(){this.setNeedsRedraw()}_onError(t){const{onIconError:i}=this.getCurrentLayer().props;i?i(t):Ri.error(t.error)()}getInstanceOffset(t){const i=this.state.iconManager.getIconMapping(t);return[i.width/2-i.anchorX||0,i.height/2-i.anchorY||0]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const i=this.state.iconManager.getIconMapping(t);return[i.x||0,i.y||0,i.width||0,i.height||0]}}return n.layerName="IconLayer",n.defaultProps=Mpe,n})();const Mz=[],Ope={getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};let Rpe=(()=>{class n extends Dpe{getShaders(){return Sn(at({},super.getShaders()),{fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(i,{index:r,target:s})=>this.encodePickingColor(r,s)}})}updateState(t){super.updateState(t);const{props:i,oldProps:r}=t;let{outlineColor:s}=i;s!==r.outlineColor&&(s=s.map(o=>o/255),s[3]=Number.isFinite(s[3])?s[3]:1,this.setState({outlineColor:s})),!i.sdf&&i.outlineWidth&&Ri.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:i,smoothing:r,outlineWidth:s}=this.props,{outlineColor:o}=this.state;t.uniforms=Sn(at({},t.uniforms),{buffer:.75,outlineBuffer:s?Math.max(r,.75*(1-s)):-1,gamma:r,sdf:Boolean(i),outlineColor:o}),super.draw(t)}getInstanceOffset(t){return t?Array.from(t).map(i=>super.getInstanceOffset(i)):Mz}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).map(i=>super.getInstanceIconFrame(i)):Mz}}return n.layerName="MultiIconLayer",n.defaultProps=Ope,n})();var Npe=et(1002),Ppe=et.n(Npe);const Fpe=[];function Lpe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Dz(n,e,t,i){let r=0;for(let s=e;s<t;s++){const o=n[s];let a=null;const l=i&&i[o];l&&(a=l.width),r+=a}return r}function Iz(n,e,t,i,r,s){let o=e,a=0;for(let l=e;l<t;l++){const c=Dz(n,l,l+1,r);a+c>i&&(o<l&&s.push(l),o=l,a=0),a+=c}return a}function jpe(n,e,t,i,r=0,s){void 0===s&&(s=n.length);const o=[];return"break-all"===e?Iz(n,r,s,t,i,o):function(n,e,t,i,r,s){let o=e,a=e,l=e,c=0;for(let u=e;u<t;u++)if((" "===n[u]||" "===n[u+1]||u+1===t)&&(l=u+1),l>a){let h=Dz(n,a,l,r);c+h>i&&(o<a&&(s.push(a),o=a,c=0),h>i&&(h=Iz(n,a,l,i,r,s),o=s[s.length-1])),a=l,c+=h}}(n,r,s,t,i,o),o}function Upe(n,e,t,i,r,s){let o=0,a=0;for(let l=e;l<t;l++){const c=n[l],u=i[c];u?(a||(a=u.height),r[l]=o+u.width/2,o+=u.width):(Ri.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),r[l]=o,o+=32)}s[0]=o,s[1]=a}function Oz(n,e,t,i,r){const s=(n=Array.from(n)).length,o=new Array(s),a=new Array(s),l=new Array(s),c=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,u=[0,0],h=[];let f=0,g=0,m=0;for(let A=0;A<=s;A++){const I=n[A];if(("\n"===I||A===s)&&(m=A),m>g){const G=c?jpe(n,t,i,r,g,m):Fpe;for(let k=0;k<=G.length;k++){const oe=0===k?g:G[k-1],we=k<G.length?G[k]:m;Upe(n,oe,we,r,o,h);for(let Be=oe;Be<we;Be++)a[Be]=f+h[1]/2,l[Be]=h[0];f+=h[1]*e,u[0]=Math.max(u[0],h[0])}g=m}"\n"===I&&(o[g]=0,a[g]=0,l[g]=0,g++)}return u[1]=f,{x:o,y:a,rowWidth:l,size:u}}const Rz=function(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),Nz="Monaco, monospace",lR=new class{constructor(e=5){this.limit=e,this.clear()}clear(){this._cache={},this._order=[]}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(this._deleteCache(e),this._deleteOrder(e))}_deleteCache(e){delete this._cache[e]}_deleteOrder(e){const t=this._order.findIndex(i=>i===e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}(3),qpe=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function Xpe(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function Uz(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="baseline",n.textAlign="left"}class Kpe{constructor(){this.props={fontFamily:Nz,fontWeight:"normal",characterSet:Rz,fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12},this._key=null,this._atlas=null}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){qpe.forEach(o=>{o in e&&(this.props[o]=e[o])});const t=this._key;this._key=this._getKey();const i=function(n,e){const t=lR.get(n);if(!t)return e;const i=[];let s=Object.keys(t.mapping);s=new Set(s);let o=e;return o instanceof Array&&(o=new Set(o)),o.forEach(a=>{s.has(a)||i.push(a)}),i}(this._key,this.props.characterSet),r=lR.get(this._key);if(r&&0===i.length)return void(this._key!==t&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,lR.set(this._key,s)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:l,radius:c,cutoff:u}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");Uz(f,r,o,s);const{mapping:g,canvasHeight:m,xOffset:A,yOffset:I}=function({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,c=o,u=0;for(const f of n)if(!s[f]){const g=e(f,u++);c+g+2*i>r&&(c=0,l++),s[f]={x:c+i,y:a+l*(t+2*i)+i,width:g,height:t},c+=g+2*i}const h=t+2*i;return{mapping:s,xOffset:c,yOffset:a+l*h,canvasHeight:Lpe(a+(l+1)*h)}}(at({getFontWidth:G=>f.measureText(G).width,fontHeight:1.2*o,buffer:a,characterSet:t,maxCanvasWidth:1024},i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}));if(h.height!==m){const G=f.getImageData(0,0,h.width,h.height);h.height=m,f.putImageData(G,0,0)}if(Uz(f,r,o,s),l){const G=new(Ppe())(o,a,c,u,r,s),k=f.getImageData(0,0,G.size,G.size);for(const oe of t)Xpe(G.draw(oe),k),f.putImageData(k,g[oe].x-a,g[oe].y+a)}else for(const G of t)f.fillText(G,g[G].x,g[G].y+.9*o);return{xOffset:A,yOffset:I,mapping:g,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const Jpe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};let ege=(()=>{class n extends Y0{getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[tS,nS]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState({props:t,oldProps:i,changeFlags:r}){if(super.updateState({props:t,oldProps:i,changeFlags:r}),r.extensionsChanged){var s;const{gl:o}=this.context;null===(s=this.state.model)||void 0===s||s.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{viewport:i}=this.context,{billboard:r,sizeScale:s,sizeUnits:o,sizeMinPixels:a,sizeMaxPixels:l,getLineWidth:c}=this.props;let{padding:u}=this.props;const h="pixels"===o?i.metersPerPixel:1;u.length<4&&(u=[u[0],u[1],u[0],u[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(c),padding:u,sizeScale:s*h,sizeMinPixels:a,sizeMaxPixels:l}).draw()}_getModel(t){return new Yg(t,Sn(at({},this.getShaders()),{id:this.props.id,geometry:new gh({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0}))}}return n.layerName="TextBackgroundLayer",n.defaultProps=Jpe,n})();const zz={fontSize:64,buffer:4,sdf:!1,radius:12,cutoff:.25,smoothing:.1},Hz={start:1,middle:0,end:-1},Gz={top:1,center:0,bottom:-1},cR=[0,0,0,255],nge=["fontSize","buffer","sdf","radius","cutoff"],ige={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:cR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Rz},fontFamily:Nz,fontWeight:"normal",lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:cR},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:cR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};let rge=(()=>{class n extends k4{initializeState(){this.state={styleVersion:0,fontAtlasManager:new Kpe}}updateState({props:t,oldProps:i,changeFlags:r}){const o=this.state.characterSet;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText();const a=o!==this.state.characterSet||this._fontChanged(i,t);a&&this._updateFontAtlas(i,t),(a||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(t,i){const{fontSettings:r,fontFamily:s,fontWeight:o}=i,{fontAtlasManager:a,characterSet:l}=this.state;a.setProps(Sn(at(at({},zz),r),{characterSet:l,fontFamily:s,fontWeight:o}))}_fontChanged(t,i){if(t.fontFamily!==i.fontFamily||t.fontWeight!==i.fontWeight)return!0;if(t.fontSettings===i.fontSettings)return!1;const r=t.fontSettings||{},s=i.fontSettings||{};return nge.some(o=>r[o]!==s[o])}_updateText(){const{data:t,characterSet:i}=this.props,r=t.attributes&&t.attributes.getText;let a,{getText:s}=this.props,{startIndices:o}=t;const l="auto"===i&&new Set;if(r&&o){const{texts:c,characterCount:u}=function({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:1,l=i?i/o:0,c=r[e]||Math.ceil((n.length-l)/a),u=s&&new Set,h=new Array(e);let f=n;if(a>1||l>0){f=new n.constructor(c);for(let g=0;g<c;g++)f[g]=n[g*a+l]}for(let g=0;g<e;g++){const I=f.subarray(r[g],r[g+1]||c);h[g]=String.fromCodePoint.apply(null,I),u&&I.forEach(u.add,u)}if(u)for(const g of u)s.add(String.fromCodePoint(g));return{texts:h,characterCount:c}}(Sn(at({},ArrayBuffer.isView(r)?{value:r}:r),{length:t.length,startIndices:o,characterSet:l}));a=u,s=(h,{index:f})=>c[f]}else{const{iterable:c,objectInfo:u}=bx(t);o=[0],a=0;for(const h of c){u.index++;const f=Array.from(s(h,u)||"");l&&f.forEach(l.add,l),a+=f.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:l||i})}getBoundingRect(t,i){const r=this.state.fontAtlasManager.mapping,{getText:s}=this.state,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:c,getAlignmentBaseline:u}=this.props,h=s(t,i)||"",{size:[f,g]}=Oz(h,l,o,a,r);return[(Hz["function"==typeof c?c(t,i):c]-1)*f/2,(Gz["function"==typeof u?u(t,i):u]-1)*g/2,f,g]}getIconOffsets(t,i){const r=this.state.fontAtlasManager.mapping,{getText:s}=this.state,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:c,getAlignmentBaseline:u}=this.props,h=s(t,i)||"",{x:f,y:g,rowWidth:m,size:[A,I]}=Oz(h,l,o,a,r),G=Hz["function"==typeof c?c(t,i):c],k=Gz["function"==typeof u?u(t,i):u],oe=f.length,we=new Array(2*oe);let Be=0;for(let Ue=0;Ue<oe;Ue++)we[Be++]=(G-1)*A/2+(1-G)*(A-m[Ue])/2+f[Ue],we[Be++]=(k-1)*I/2+g[Ue];return we}renderLayers(){const{startIndices:t,numInstances:i,getText:r,fontAtlasManager:{scale:s,texture:o,mapping:a},styleVersion:l}=this.state,{data:c,_dataDiff:u,getPosition:h,getColor:f,getSize:g,getAngle:m,getPixelOffset:A,getBackgroundColor:I,getBorderColor:G,getBorderWidth:k,backgroundPadding:oe,background:we,billboard:Be,fontSettings:Ue,outlineWidth:qe,outlineColor:bt,sizeScale:xt,sizeUnits:Mt,sizeMinPixels:Bt,sizeMaxPixels:Wt,transitions:mt,updateTriggers:yt}=this.props,Ut=this.getSubLayerClass("characters",Rpe),pt=this.getSubLayerClass("background",ege);return[we&&new pt({getFillColor:I,getLineColor:G,getLineWidth:k,padding:oe,getPosition:h,getSize:g,getAngle:m,getPixelOffset:A,billboard:Be,sizeScale:xt/this.state.fontAtlasManager.props.fontSize,sizeUnits:Mt,sizeMinPixels:Bt,sizeMaxPixels:Wt,transitions:mt&&{getPosition:mt.getPosition,getAngle:mt.getAngle,getSize:mt.getSize,getFillColor:mt.getBackgroundColor,getLineColor:mt.getBorderColor,getLineWidth:mt.getBorderWidth,getPixelOffset:mt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:yt.getPosition,getAngle:yt.getAngle,getSize:yt.getSize,getFillColor:yt.getBackgroundColor,getLineColor:yt.getBorderColor,getLineWidth:yt.getBorderWidth,getPixelOffset:yt.getPixelOffset,getBoundingRect:{getText:yt.getText,getTextAnchor:yt.getTextAnchor,getAlignmentBaseline:yt.getAlignmentBaseline,styleVersion:l}}}),{data:c.attributes?{length:c.length,attributes:c.attributes.background||{}}:c,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect.bind(this)}),new Ut({sdf:Ue.sdf,smoothing:Number.isFinite(Ue.smoothing)?Ue.smoothing:zz.smoothing,outlineWidth:qe,outlineColor:bt,iconAtlas:o,iconMapping:a,getPosition:h,getColor:f,getSize:g,getAngle:m,getPixelOffset:A,billboard:Be,sizeScale:xt*s,sizeUnits:Mt,sizeMinPixels:Bt*s,sizeMaxPixels:Wt*s,transitions:mt&&{getPosition:mt.getPosition,getAngle:mt.getAngle,getColor:mt.getColor,getSize:mt.getSize,getPixelOffset:mt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:yt.getText,getPosition:yt.getPosition,getAngle:yt.getAngle,getColor:yt.getColor,getSize:yt.getSize,getPixelOffset:yt.getPixelOffset,getIconOffsets:{getText:yt.getText,getTextAnchor:yt.getTextAnchor,getAlignmentBaseline:yt.getAlignmentBaseline,styleVersion:l}}}),{data:c,_dataDiff:u,startIndices:t,numInstances:i,getIconOffsets:this.getIconOffsets.bind(this),getIcon:r})]}}return n.layerName="TextLayer",n.defaultProps=ige,n})();const $z="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",sge={lightSources:{}};function uR({color:n=[0,0,0],intensity:e=1}={}){return n.map(t=>t*e/255)}const dR={name:"lights",vs:$z,fs:$z,getUniforms:function Wz(n=sge){if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function({ambientLight:n,pointLights:e=[],directionalLights:t=[]}){const i={};return i["lighting_uAmbientLight.color"]=n?uR(n):[0,0,0],e.forEach((r,s)=>{i[`lighting_uPointLight[${s}].color`]=uR(r),i[`lighting_uPointLight[${s}].position`]=r.position,i[`lighting_uPointLight[${s}].attenuation`]=r.attenuation||[1,0,0]}),i.lighting_uPointLightCount=e.length,t.forEach((r,s)=>{i[`lighting_uDirectionalLight[${s}].color`]=uR(r),i[`lighting_uDirectionalLight[${s}].direction`]=r.direction}),i.lighting_uDirectionalLightCount=t.length,i}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return Wz({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},age={};const cge={name:"phong-lighting",dependencies:[dR],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function(n=age){if(!("material"in n))return{};const{material:e}=n;return e?function(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},hR=Math.PI/180,iS=new Float32Array(16),Xz=new Float32Array(12);function Kz(n,e,t){const i=e[0]*hR,r=e[1]*hR,s=e[2]*hR,o=Math.sin(s),a=Math.sin(i),l=Math.sin(r),c=Math.cos(s),u=Math.cos(i),h=Math.cos(r),f=t[0],g=t[1],m=t[2];n[0]=f*h*u,n[1]=f*l*u,n[2]=f*-a,n[3]=g*(-l*c+h*a*o),n[4]=g*(h*c+l*a*o),n[5]=g*u*o,n[6]=m*(l*o+h*a*c),n[7]=m*(-h*o+l*a*c),n[8]=m*u*c}function Qz(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const Zz={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,l=Array.isArray(a),c=l&&16===a.length,u=Array.isArray(s),h=Array.isArray(r),f=Array.isArray(o),g=c||!l&&Boolean(a(i[0]));n.constant=g?c:h&&u&&f;const m=n.value;if(n.constant){let A;g?(iS.set(a),A=Qz(iS)):(A=Xz,Kz(A,r,s),A.set(o,9)),n.value=new Float32Array(A)}else{let A=e*n.size;const{iterable:I,objectInfo:G}=bx(i,e,t);for(const k of I){let oe;G.index++,g?(iS.set(c?a:a(k,G)),oe=Qz(iS)):(oe=Xz,Kz(oe,h?r:r(k,G),u?s:s(k,G)),oe.set(f?o:o(k,G),9)),m[A++]=oe[0],m[A++]=oe[1],m[A++]=oe[2],m[A++]=oe[3],m[A++]=oe[4],m[A++]=oe[5],m[A++]=oe[6],m[A++]=oe[7],m[A++]=oe[8],m[A++]=oe[9],m[A++]=oe[10],m[A++]=oe[11]}}}};function Jz(n,e){return e===Vi.CARTESIAN||e===Vi.METER_OFFSETS||e===Vi.DEFAULT&&!n.isGeospatial}function e5(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),Ri.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function hge(n,e){if(n.attributes)return e5(n.attributes,e),n instanceof gh?n:new gh(n);if(n.positions||n.POSITION)return e5(n,e),new gh({attributes:n});throw Error("Invalid mesh")}const fge={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};let pge=(()=>{class n extends Y0{getShaders(){const t=!Ci(this.context.gl),i={};return _I(this.context.gl,"GLSL_DERIVATIVES")&&(i.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[tS,cge,nS],transpileToGLSL100:t,defines:i})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Zz}),this.setState({emptyTexture:new ya(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState({props:t,oldProps:i,changeFlags:r}){if(super.updateState({props:t,oldProps:i,changeFlags:r}),t.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const o=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(){super.finalizeState(),this.state.emptyTexture.delete()}draw({uniforms:t}){if(!this.state.model)return;const{viewport:i}=this.context,{sizeScale:r,coordinateSystem:s,_instanced:o}=this.props;this.state.model.setUniforms(t).setUniforms({sizeScale:r,composeModelMatrix:!o||Jz(i,s),flatShading:!this.state.hasNormals}).draw()}getModel(t){const i=new Yg(this.context.gl,Sn(at({},this.getShaders()),{id:this.props.id,geometry:hge(t,this.props._useMeshColors),isInstanced:!0})),{texture:r}=this.props,{emptyTexture:s}=this.state;return i.setUniforms({sampler:r||s,hasTexture:Boolean(r)}),i}setTexture(t){const{emptyTexture:i,model:r}=this.state;null==r||r.setUniforms({sampler:t||i,hasTexture:Boolean(t)})}}return n.layerName="SimpleMeshLayer",n.defaultProps=fge,n})();const t5={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[dR]};class rm{constructor(e={}){const{id:t}=e;this.id=t||ma(this.constructor.name),this.display=!0,this.position=new Mo,this.rotation=new Mo,this.scale=new Mo(1,1,1),this.matrix=new qn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(e){return on(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return on(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return on(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e,t=!0){t?this.matrix.copy(e):this.matrix=e}setMatrixComponents({position:e,rotation:t,scale:i,update:r=!0}){return e&&this.setPosition(e),t&&this.setRotation(t),i&&this.setScale(i),r&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(e={}){const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){on(e),t=t||this.matrix;const i=new qn(e).multiplyRight(t),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class tb extends rm{constructor(e={}){e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;mn.assert(t.every(i=>i instanceof rm),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(...e){for(const t of e)Array.isArray(t)?this.add(...t):this.children.push(t);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}traverse(e,{worldMatrix:t=new qn}={}){const i=new qn(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof tb?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}function n5(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=t[0],g=t[1],m=t[2],A=t[3],I=t[4],G=t[5],k=t[6],oe=t[7],we=t[8];return n[0]=f*i+g*o+m*c,n[1]=f*r+g*a+m*u,n[2]=f*s+g*l+m*h,n[3]=A*i+I*o+G*c,n[4]=A*r+I*a+G*u,n[5]=A*s+I*l+G*h,n[6]=k*i+oe*o+we*c,n[7]=k*r+oe*a+we*u,n[8]=k*s+oe*l+we*h,n}function i5(n,e,t){var i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function r5(){var n=new ba(4);return ba!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function s5(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function fR(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function rS(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],l=t[1],c=t[2],u=t[3];return n[0]=i*u+o*a+r*c-s*l,n[1]=r*u+o*l+s*a-i*c,n[2]=s*u+o*c+i*l-r*a,n[3]=o*u-i*a-r*l-s*c,n}function o5(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l+o*a,n[1]=r*l+s*a,n[2]=s*l-r*a,n[3]=o*l-i*a,n}function a5(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l-s*a,n[1]=r*l+o*a,n[2]=s*l+i*a,n[3]=o*l-r*a,n}function l5(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);return n[0]=i*l+r*a,n[1]=r*l-i*a,n[2]=s*l+o*a,n[3]=o*l-s*a,n}function c5(n,e){var t=e[0],i=e[1],r=e[2];return n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r)),n}function nb(n,e,t,i){var f,g,m,A,I,r=e[0],s=e[1],o=e[2],a=e[3],l=t[0],c=t[1],u=t[2],h=t[3];return(g=r*l+s*c+o*u+a*h)<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>eu?(f=Math.acos(g),m=Math.sin(f),A=Math.sin((1-i)*f)/m,I=Math.sin(i*f)/m):(A=1-i,I=i),n[0]=A*r+I*l,n[1]=A*s+I*c,n[2]=A*o+I*u,n[3]=A*a+I*h,n}function u5(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;return n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a,n}function d5(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n}function pR(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}return n}var h5=function(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},gR=OU,mR=function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]},f5=function(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a),n},p5=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},g5=function(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r},_5=function(){var n=vj(),e=wj(1,0,0),t=wj(0,1,0);return function(i,r,s){var o=Ej(r,s);return o<-.999999?(D0(n,e,r),function(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&D0(n,t,r),function(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),fR(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(D0(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();r5(),r5(),function(){var n=new ba(9);ba!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const Sge=[0,0,0,1];class _R extends mx{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return pR(this,e),this.check()}identity(){return s5(this),this.check()}fromAxisRotation(e,t){return fR(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=nr(e)}get y(){return this[1]}set y(e){this[1]=nr(e)}get z(){return this[2]}set z(e){this[2]=nr(e)}get w(){return this[3]}set w(e){this[3]=nr(e)}len(){return p5(this)}lengthSquared(){return g5(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return mR(this,e)}rotationTo(e,t){return _5(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return h5(this,this,e),this.check()}calculateW(){return c5(this,this),this.check()}conjugate(){return d5(this,this),this.check()}invert(){return u5(this,this),this.check()}lerp(e,t,i){return f5(this,e,t,i),this.check()}multiplyRight(e,t){return Zu(!t),rS(this,this,e),this.check()}multiplyLeft(e,t){return Zu(!t),rS(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return o5(this,this,e),this.check()}rotateY(e){return a5(this,this,e),this.check()}rotateZ(e){return l5(this,this,e),this.check()}scale(e){return gR(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=Sge,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return nb(this,e,t,i),this.check()}transformVector4(e,t=e){return RU(t,e,this),_x(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const Cge={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Tge={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function y5(n){if(!n._animation){const e=Tge[n.componentType],t=Cge[n.type],i=t*n.count,{buffer:r,byteOffset:s}=n.bufferView.data,o=new e(r,s+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(o);else{const a=[];for(let l=0;l<o.length;l+=t)a.push(Array.from(o.slice(l,l+t)));n._animation=a}}return n._animation}const Age=new qn,yR=new _R;class Nge{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:r,target:s,path:o})=>{(function(n,{input:e,interpolation:t,output:i},r,s){const a=n%e[e.length-1],l=e.findIndex(f=>f>=a),c=Math.max(0,l-1);if(!Array.isArray(r[s]))switch(s){case"translation":r[s]=[0,0,0];break;case"rotation":r[s]=[0,0,0,1];break;case"scale":r[s]=[1,1,1];break;default:mn.warn(`Bad animation path ${s}`)()}on(r[s].length===i[c].length);const u=e[c],h=e[l];switch(t){case"STEP":!function(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(r,s,i[c]);break;case"LINEAR":h>u&&function(n,e,t,i,r){if("rotation"===e){yR.slerp({start:t,target:i,ratio:r});for(let s=0;s<yR.length;s++)n[e][s]=yR[s]}else for(let s=0;s<t.length;s++)n[e][s]=r*i[s]+(1-r)*t[s]}(r,s,i[c],i[l],(a-u)/(h-u));break;case"CUBICSPLINE":h>u&&function(n,e,{p0:t,outTangent0:i,inTangent1:r,p1:s,tDiff:o,ratio:a}){for(let l=0;l<n[e].length;l++){const c=i[l]*o,u=r[l]*o;n[e][l]=(2*Math.pow(a,3)-3*Math.pow(a,2)+1)*t[l]+(Math.pow(a,3)-2*Math.pow(a,2)+a)*c+(-2*Math.pow(a,3)+3*Math.pow(a,2))*s[l]+(Math.pow(a,3)-Math.pow(a,2))*u}}(r,s,{p0:i[3*c+1],outTangent0:i[3*c+2],inTangent1:i[3*l+0],p1:i[3*l+1],tDiff:h-u,ratio:(a-u)/(h-u)});break;default:mn.warn(`Interpolation ${t} not supported`)()}})(i,r,s,o),function(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=Age.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class Pge{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||`Animation-${i}`,s=t.samplers.map(({input:a,interpolation:l="LINEAR",output:c})=>({input:y5(e.accessors[a]),interpolation:l,output:y5(e.accessors[c])})),o=t.channels.map(({sampler:a,target:l})=>({sampler:s[a],target:e.nodes[l.node],path:l.path}));return new Nge({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class kge extends rm{constructor(e,t={}){super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof Yg?(this.model=e,this._setModelNodeProps(t)):this.model=new Yg(e,t),this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(...e){return this.model.draw(...e)}setUniforms(...e){return this.model.setUniforms(...e),this}setAttributes(...e){return this.model.setAttributes(...e),this}updateModuleSettings(...e){return this.model.updateModuleSettings(...e),this}_setModelNodeProps(e){this.model.setProps(e)}}class Fge{constructor(e,{attributes:t,material:i,pbrDebug:r,imageBasedLightingEnvironment:s,lights:o,useTangents:a}){this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},_I(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),r&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(t.NORMAL,"HAS_NORMALS"),this.defineIfPresent(t.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(t.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(r,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t,i=null){const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const l=new ya(this.gl,at({id:e.name||e.id,parameters:at(at({},e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{}),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},o));this.uniforms[t]=l,this.defineIfPresent(i,i),this.generatedTextures.push(l)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(mn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}function b5(n,e){return Ci(n)?`#version 300 es\n${e}`:e}const jge={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Uge={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class zge{constructor(e,t={}){this.gl=e,this.options=Object.assign({},Uge,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new Pge(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new tb({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new tb({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new qn).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new tb({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){mn.warn("getVertexCount() not found")()}createPrimitive(e,t,i){return function(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new Fge(n,e);mn.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(s).map(u=>u.buffer));const c=new kge(n,Object.assign({id:t,drawMode:i,vertexCount:r,modules:[t5],defines:a.defines,parameters:a.parameters,vs:b5(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:b5(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l},o));return c.setProps({attributes:s}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:e.name||`${i.name||i.id}-primitive-${t}`,drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),mn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new lr(this.gl,{id:`from-${i.id}`,data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new _a({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:jge[e.type]})}createSampler(e){return e}needsPOT(){return!1}}function v5(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function $a(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function w5(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error(`'baseUri' must be provided to resolve relative url ${n}`);return i.substr(0,i.lastIndexOf("/")+1)+n}function E5(n,e,t){const i=n.bufferViews[t];$a(i);const s=e[i.buffer];return $a(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}const x5={name:"Draco",id:"draco",module:"draco",version:"3.0.12",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class sm{constructor(e,t){Kn(this,"fields",void 0),Kn(this,"metadata",void 0),function(n,e){if(!n)throw new Error("loader assertion failed.")}(Array.isArray(e)),function(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new sm(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new sm(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof sm){const o=e;t=o.fields,i=S5(S5(new Map,this.metadata),o.metadata)}else t=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of t)r[o.name]=o;const s=Object.values(r);return new sm(s,i)}}function S5(n,e){return new Map([...n||new Map,...e||new Map])}let kr,C5,T5,A5,M5,D5,I5,O5;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(kr||(kr={}));class bR{static isNull(e){return e&&e.typeId===kr.Null}static isInt(e){return e&&e.typeId===kr.Int}static isFloat(e){return e&&e.typeId===kr.Float}static isBinary(e){return e&&e.typeId===kr.Binary}static isUtf8(e){return e&&e.typeId===kr.Utf8}static isBool(e){return e&&e.typeId===kr.Bool}static isDecimal(e){return e&&e.typeId===kr.Decimal}static isDate(e){return e&&e.typeId===kr.Date}static isTime(e){return e&&e.typeId===kr.Time}static isTimestamp(e){return e&&e.typeId===kr.Timestamp}static isInterval(e){return e&&e.typeId===kr.Interval}static isList(e){return e&&e.typeId===kr.List}static isStruct(e){return e&&e.typeId===kr.Struct}static isUnion(e){return e&&e.typeId===kr.Union}static isFixedSizeBinary(e){return e&&e.typeId===kr.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===kr.FixedSizeList}static isMap(e){return e&&e.typeId===kr.Map}static isDictionary(e){return e&&e.typeId===kr.Dictionary}get typeId(){return kr.NONE}compareTo(e){return this===e}}Symbol,Symbol,C5=Symbol.toStringTag;class om extends bR{constructor(e,t){super(),Kn(this,"isSigned",void 0),Kn(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return kr.Int}get[C5](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}class Zge extends om{constructor(){super(!0,8)}}class Jge extends om{constructor(){super(!0,16)}}class eme extends om{constructor(){super(!0,32)}}class tme extends om{constructor(){super(!1,8)}}class nme extends om{constructor(){super(!1,16)}}class ime extends om{constructor(){super(!1,32)}}T5=Symbol.toStringTag;class R5 extends bR{constructor(e){super(),Kn(this,"precision",void 0),this.precision=e}get typeId(){return kr.Float}get[T5](){return"Float"}toString(){return`Float${this.precision}`}}class rme extends R5{constructor(){super(32)}}class sme extends R5{constructor(){super(64)}}Symbol,Symbol,A5=Symbol.toStringTag,M5=Symbol.toStringTag,D5=Symbol.toStringTag,I5=Symbol.toStringTag,O5=Symbol.toStringTag;class ome extends bR{constructor(e,t){super(),Kn(this,"listSize",void 0),Kn(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return kr.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[O5](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}class sS{constructor(e,t,i=!1,r=new Map){Kn(this,"name",void 0),Kn(this,"type",void 0),Kn(this,"nullable",void 0),Kn(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new sS(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return`${this.type}${this.nullable?", nullable":""}${this.metadata?`, metadata: ${this.metadata}`:""}`}}function N5(n,e,t){const i=t?P5(t.metadata):void 0,r=function(n){switch(n.constructor){case Int8Array:return new Zge;case Uint8Array:return new tme;case Int16Array:return new Jge;case Uint16Array:return new nme;case Int32Array:return new eme;case Uint32Array:return new ime;case Float32Array:return new rme;case Float64Array:return new sme;default:throw new Error("array type not supported")}}(e.value);return new sS(n,new ome(e.size,new sS("value",r)),!1,i)}function P5(n){const e=new Map;for(const t in n)e.set(`${t}.string`,JSON.stringify(n[t]));return e}const k5={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},ume={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class hme{constructor(e){Kn(this,"draco",void 0),Kn(this,"decoder",void 0),Kn(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const f=`DRACO decompression failed: ${o.error_msg()}`;throw new Error(f)}const a=this._getDracoLoaderData(s,r,t),l=this._getMeshData(s,a,t),c=function(n){let e=1/0,t=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=n.POSITION?n.POSITION.value:[],l=a&&a.length;for(let c=0;c<l;c+=3){const u=a[c],h=a[c+1],f=a[c+2];e=u<e?u:e,t=h<t?h:t,i=f<i?f:i,r=u>r?u:r,s=h>s?h:s,o=f>o?f:o}return[[e,t,i],[r,s,o]]}(l.attributes),u=function(n,e,t){const i=P5(e.metadata),r=[],s=function(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in n){const l=N5(o,n[o],s[o]);r.push(l)}if(t){const o=N5("indices",t);r.push(o)}return new sm(r,i)}(l.attributes,a,l.indices);return Sn(at({loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:c}},l),{schema:u})}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,t);a&&(i[s.unique_id()].quantization_transform=a);const l=this._getOctahedronTransform(s,t);l&&(i[s.unique_id()].octahedron_transform=l)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(i.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:l}=this._getAttributeValues(t,s);r[o]={value:a,size:l,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=ume[t.data_type],r=t.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,l=function(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let c;const u=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,l,a,u),c=new i(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:c,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[o,a]of Object.entries(t.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in k5)if(this.draco[o]===r)return k5[o];const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:`CUSTOM_ATTRIBUTE_${i}`}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}var oS=et(9125);const xR={};function SR(n){return CR.apply(this,arguments)}function CR(){return(CR=li(function*(n,e=null,t={}){return e&&(n=_me(n,e,t)),xR[n]=xR[n]||yme(n),yield xR[n]})).apply(this,arguments)}function _me(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:yO?t.CDN?(nu(t.CDN.startsWith("http")),`${t.CDN}/${e}@3.0.12/dist/libs/${n}`):bO?`../src/libs/${n}`:`modules/${e}/src/libs/${n}`:`modules/${e}/dist/libs/${n}`}function yme(n){return TR.apply(this,arguments)}function TR(){return(TR=li(function*(n){return n.endsWith("wasm")?yield(yield fetch(n)).arrayBuffer():yO?bO?importScripts(n):bme(yield(yield fetch(n)).text(),n):oS.requireFromFile&&(yield oS.requireFromFile(n))})).apply(this,arguments)}function bme(n,e){if(!yO)return oS.requireFromString&&oS.requireFromString(n,e);if(bO)return eval.call(Iue,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch(i){t.text=n}return document.body.appendChild(t),null}const vme="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.js",wme="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_wasm_wrapper.js",Eme="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.wasm";let ib;function Sme(n){return AR.apply(this,arguments)}function AR(){return(AR=li(function*(n){const e=n.modules||{};return ib=e.draco3d?ib||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):ib||Cme(n),yield ib})).apply(this,arguments)}function Cme(n){return DR.apply(this,arguments)}function DR(){return(DR=li(function*(n){let e,t;switch(n.draco&&n.draco.decoderType){case"js":e=yield SR(vme,"draco",n);break;case"wasm":default:[e,t]=yield Promise.all([yield SR(wme,"draco",n),yield SR(Eme,"draco",n)])}return e=e||globalThis.DracoDecoderModule,yield Tme(e,t)})).apply(this,arguments)}function Tme(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(Sn(at({},t),{onModuleLoaded:r=>i({draco:r})}))})}const OR=Sn(at({},x5),{parse:function(n,e){return RR.apply(this,arguments)}});function RR(){return(RR=li(function*(n,e){const{draco:t}=yield Sme(e),i=new hme(t);try{return i.parseSync(n,null==e?void 0:e.draco)}finally{i.destroy()}})).apply(this,arguments)}function sb(n,e){return Lf(n>=0),Lf(e>0),n+(e-1)&~(e-1)}function Dme(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+sb(i.byteLength,4)}const F5=["SCALAR","VEC2","VEC3","VEC4"],Ime=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Ome=new Map(Ime),Rme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Nme={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Pme={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function L5(n){return F5[n-1]||F5[0]}function B5(n){const e=Ome.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function V5(n,e){const t=Pme[n.componentType],i=Rme[n.type],s=n.count*i,o=n.count*i*Nme[n.componentType];return $a(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}const kme={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class _h{constructor(e){Kn(this,"gltf",void 0),Kn(this,"sourceBuffers",void 0),Kn(this,"byteLength",void 0),this.gltf=e||{json:at({},kme),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error(`glTF file error: Could not find ${e}[${t}]`);return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return $a(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:s,length:o}=V5(e,t);return new s(r,t.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return $a(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return $a(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(i){const l=this._addIndices(i);a.primitives[0].indices=l}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=tR(e),r=t||(null==i?void 0:i.mimeType),o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const t=e.byteLength;$a(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=sb(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:L5(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:B5(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=Dme(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);t[s]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const s of r)i.min.push(s),i.max.push(s);for(let s=t;s<e.length;s+=t)for(let o=0;o<t;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const j5="KHR_binary_glTF",ob="KHR_draco_mesh_compression",am="KHR_lights_punctual",lS="KHR_materials_unlit",cS="KHR_techniques_webgl";function Bme(n){const e={};for(const t in n){const i=n[t];if("indices"!==t){const r=U5(i);e[t]=r}}return e}function U5(n){const{buffer:e,size:t,count:i}=function(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:L5(t),componentType:B5(e)}}function Ume(n,e,t){return NR.apply(this,arguments)}function NR(){return(NR=li(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new _h(n),s=[];for(const o of Wme(r))r.getObjectExtension(o,ob)&&s.push(Hme(r,o,e,t));yield Promise.all(s),r.removeExtension(ob)})).apply(this,arguments)}function zme(n,e={}){const t=new _h(n);for(const i of t.json.meshes||[])Gme(i),t.addRequiredExtension(ob)}function Hme(n,e,t,i){return PR.apply(this,arguments)}function PR(){return(PR=li(function*(n,e,t,i){const r=n.getObjectExtension(e,ob);if(!r)return;const s=n.getTypedArrayForBufferView(r.bufferView),o=C4(s.buffer,s.byteOffset),{parse:a}=i,l=at({},t);delete l["3d-tiles"];const c=yield a(o,OR,l,i),u=Bme(c.attributes);for(const[h,f]of Object.entries(u))if(h in e.attributes){const m=n.getAccessor(e.attributes[h]);null!=m&&m.min&&null!=m&&m.max&&(f.min=m.min,f.max=m.max)}e.attributes=u,c.indices&&(e.indices=U5(c.indices)),$me(e)})).apply(this,arguments)}function Gme(n,e,t=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:n}),l=i._addFauxAttributes(a.attributes),c=i.addBufferView(o);return{primitives:[{attributes:l,mode:t,extensions:{[ob]:{bufferView:c,attributes:l}}}]}}function $me(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*Wme(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}function qme(n){return kR.apply(this,arguments)}function kR(){return(kR=li(function*(n){const e=new _h(n),{json:t}=e;e.removeExtension(lS);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,lS)})).apply(this,arguments)}function Yme(n){const e=new _h(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,lS,{}),e.addExtension(lS))}function Xme(n){return FR.apply(this,arguments)}function FR(){return(FR=li(function*(n){const e=new _h(n),{json:t}=e,i=e.getExtension(am);i&&(e.json.lights=i.lights,e.removeExtension(am));for(const r of t.nodes||[]){const s=e.getObjectExtension(r,am);s&&(r.light=s.light),e.removeObjectExtension(r,am)}})).apply(this,arguments)}function Kme(n){return LR.apply(this,arguments)}function LR(){return(LR=li(function*(n){const e=new _h(n),{json:t}=e;if(t.lights){const i=e.addExtension(am);$a(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,am,i);delete e.json.lights}})).apply(this,arguments)}function Qme(n){return BR.apply(this,arguments)}function BR(){return(BR=li(function*(n){const e=new _h(n),{json:t}=e,i=e.getExtension(cS);if(i){const r=Jme(i,e);for(const s of t.materials||[]){const o=e.getObjectExtension(s,cS);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=e_e(s.technique,e)),e.removeObjectExtension(s,cS)}e.removeExtension(cS)}})).apply(this,arguments)}function Zme(n,e){return VR.apply(this,arguments)}function VR(){return(VR=li(function*(n,e){})).apply(this,arguments)}function Jme(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),t.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=t[o.program]}),r}function e_e(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const z5={KHR_draco_mesh_compression:lt,KHR_materials_unlit:ee,KHR_lights_punctual:Ct,KHR_techniques_webgl:je};function t_e(n){return jR.apply(this,arguments)}function jR(){return(jR=li(function*(n,e={},t){for(const r in z5){var i;const s=(null==e||null===(i=e.gltf)||void 0===i?void 0:i.excludeExtensions)||{};r in s&&!s[r]||(yield z5[r].decode(n,e,t))}})).apply(this,arguments)}const H5={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},i_e={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class r_e{constructor(e){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn(`glTF: Unknown version ${i.asset.version}`)}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function(n){const e=new _h(n),{json:t}=e;for(const i of t.images||[]){const r=e.removeObjectExtension(i,j5);r&&Object.assign(i,r)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(j5)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in H5)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[t].length;e[t].push(s),this.idToIndexMap[t][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in H5)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:s}=t;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn(`gltf v1: json doesn't contain attribute ${t}`),e[t]=[]);for(const i of e[t])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,t){const i=i_e[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error(`gltf v1: failed to resolve ${t} with id ${e}`);return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const t of e.materials){t.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const i=t.values&&t.values.tex,r=e.textures.findIndex(s=>s.id===i);-1!==r&&(t.pbrMetallicRoughness.baseColorTexture={index:r})}}}function s_e(n,e={}){return(new r_e).normalize(n,e)}const o_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},a_e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ml={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},l_e={magFilter:Ml.TEXTURE_MAG_FILTER,minFilter:Ml.TEXTURE_MIN_FILTER,wrapS:Ml.TEXTURE_WRAP_S,wrapT:Ml.TEXTURE_WRAP_T},c_e={[Ml.TEXTURE_MAG_FILTER]:Ml.LINEAR,[Ml.TEXTURE_MIN_FILTER]:Ml.NEAREST_MIPMAP_LINEAR,[Ml.TEXTURE_WRAP_S]:Ml.REPEAT,[Ml.TEXTURE_WRAP_]:Ml.REPEAT};class h_e{postProcess(e,t={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return $a(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn(`glTF file error: Could not find ${e}[${t}]`),i}_resolveScene(e,t){return e.id=e.id||`scene-${t}`,e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||`node-${t}`,e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||`skin-${t}`,e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||`mesh-${t}`,e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i=at({},i)).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||`material-${t}`,e.normalTexture&&(e.normalTexture=at({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=at({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=at({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=at({},e.pbrMetallicRoughness);const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture=at({},i.baseColorTexture),i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture=at({},i.metallicRoughnessTexture),i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||`accessor-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function(n){return a_e[n]}(e.componentType),e.components=function(n){return o_e[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=V5(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset,a=i.arrayBuffer.slice(o,o+s);e.value=new r(a)}return e}_resolveTexture(e,t){return e.id=e.id||`texture-${t}`,e.sampler="sampler"in e?this.getSampler(e.sampler):c_e,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||`sampler-${t}`,e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return l_e[e]}_resolveImage(e,t){e.id=e.id||`image-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){e.id=e.id||`bufferView-${t}`;const i=e.buffer;e.buffer=this.buffers[i];let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),e.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),e}_resolveCamera(e,t){return e.id=e.id||`camera-${t}`,e}}function f_e(n,e){return(new h_e).postProcess(n,e)}const G5=1735152710,lm=!0;function zR(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),o=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(o),sb(i,4)}function HR(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),sb(i,4)}function C_e(n,e){return GR.apply(this,arguments)}function GR(){return(GR=li(function*(n,e,t=0,i,r){var s,o,a,l;T_e(n,e,t,i),s_e(n,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize});const c=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&n.json.buffers&&(yield A_e(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=M_e(n,i,r);c.push(h)}const u=t_e(n,i,r);return c.push(u),yield Promise.all(c),null!=i&&null!==(l=i.gltf)&&void 0!==l&&l.postProcess?f_e(n,i):n})).apply(this,arguments)}function T_e(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function(n,e=0,t={}){const i=new DataView(n),{magic:r=G5}=t,s=i.getUint32(e,!1);return s===r||s===G5}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function(n){try{return JSON.parse(n)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?v5(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?v5(n,0,e):""}(n)}"`)}}(e);else if(e instanceof ArrayBuffer){const o={};t=function(n,e,t=0,i={}){const r=new DataView(e),s=function(n,e=0){return`${String.fromCharCode(n.getUint8(e+0))}${String.fromCharCode(n.getUint8(e+1))}${String.fromCharCode(n.getUint8(e+2))}${String.fromCharCode(n.getUint8(e+3))}`}(r,t+0),o=r.getUint32(t+4,lm),a=r.getUint32(t+8,lm);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),t+=12,n.version){case 1:return function(n,e,t){Lf(n.header.byteLength>20);const i=e.getUint32(t+0,lm),r=e.getUint32(t+4,lm);return t+=8,Lf(0===r),zR(n,e,t,i),(t+=i)+HR(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function(n,e,t,i){return Lf(n.header.byteLength>20),function(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,lm),s=e.getUint32(t+4,lm);switch(t+=8,s){case 1313821514:zR(n,e,t,r);break;case 5130562:HR(n,e,t,r);break;case 0:i.strict||zR(n,e,t,r);break;case 1:i.strict||HR(n,e,t,r)}t+=sb(r,4)}}(n,e,t,{}),t+n.header.byteLength}(n,r,t);default:throw new Error(`Invalid GLB version ${n.version}. Only supports v1 and v2.`)}}(o,e,t,i.glb),$a("glTF"===o.type,`Invalid GLB magic string ${o.type}`),n._glb=o,n.json=o.json}else $a(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:o}=n._glb;n.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})}function A_e(n,e,t){return $R.apply(this,arguments)}function $R(){return($R=li(function*(n,e,t){for(let s=0;s<n.json.buffers.length;++s){const o=n.json.buffers[s];if(o.uri){var i,r;const{fetch:a}=t;$a(a);const l=w5(o.uri,e),c=yield null==t||null===(i=t.fetch)||void 0===i?void 0:i.call(t,l),u=yield null==c||null===(r=c.arrayBuffer)||void 0===r?void 0:r.call(c);n.buffers[s]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete o.uri}}})).apply(this,arguments)}function M_e(n,e,t){return WR.apply(this,arguments)}function WR(){return(WR=li(function*(n,e,t){const i=n.json.images||[],r=[];for(let s=0;s<i.length;++s)r.push(D_e(n,i[s],s,e,t));return yield Promise.all(r)})).apply(this,arguments)}function D_e(n,e,t,i,r){return qR.apply(this,arguments)}function qR(){return(qR=li(function*(n,e,t,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri){const c=w5(e.uri,i);a=yield(yield s(c)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const c=E5(n.json,n.buffers,e.bufferView);a=C4(c.buffer,c.byteOffset,c.byteLength)}$a(a,"glTF image has no data");const l=yield o(a,iR,{},r);n.images[t]=l})).apply(this,arguments)}const cm={name:"glTF",id:"gltf",module:"gltf",version:"3.0.12",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(n){return YR.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function YR(){return(YR=li(function*(n,e={},t){(e=at(at({},cm.options),e)).gltf=at(at({},cm.options.gltf),e.gltf);const{byteOffset:i=0}=e;return yield C_e({},n,i,e,t)})).apply(this,arguments)}function XR(){return(XR=li(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield R_e(()=>e.some(t=>!t.loaded))})).apply(this,arguments)}function R_e(n){return KR.apply(this,arguments)}function KR(){return(KR=li(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))})).apply(this,arguments)}const $5=[255,255,255,255],k_e={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:$5},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[cm]};let F_e=(()=>{class n extends Y0{getShaders(){const t=[tS,nS];return"pbr"===this.props._lighting&&t.push(t5),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:$5,transition:!0},instanceModelMatrix:Zz})}updateState(t){super.updateState(t);const{props:i,oldProps:r}=t;i.scenegraph!==r.scenegraph?this._updateScenegraph(i):i._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,i._animations)}finalizeState(){super.finalizeState(),this._deleteScenegraph()}_updateScenegraph(t){const{gl:i}=this.context;let r=null;if(t.scenegraph instanceof rm)r={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){const l=t.scenegraph,c=function(n,e,t){const i=new zge(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(i,l,this._getModelOptions());r=at({gltf:l},c),function(n){return XR.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else t.scenegraph&&(Ri.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=t.scenegraph);const s={layer:this,gl:i},o=t.getScene(r,s),a=t.getAnimator(r,s);o instanceof rm?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,a,t._animations),this.setState({scenegraph:o,animator:a})):null!==o&&Ri.warn("invalid scenegraph:",o)()}_applyAllAttributes(t){if(this.state.attributesAvailable){const i=this.getAttributeManager().getAttributes();t.traverse(r=>{this._setModelAttributes(r.model,i)})}}_applyAnimationsProp(t,i,r){if(!t||!i||!r)return;const s=i.getAnimations();Object.keys(r).sort().forEach(o=>{const a=r[o];if("*"===o)s.forEach(l=>{Object.assign(l,a)});else if(Number.isFinite(Number(o))){const l=Number(o);l>=0&&l<s.length?Object.assign(s[l],a):Ri.warn("animation ".concat(o," not found"))()}else{const l=s.find(({name:c})=>c===o);l?Object.assign(l,a):Ri.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:t}=this.state;t instanceof rm&&t.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:t}=this.props;let i=null;return t&&(i="function"==typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:i,modelOptions:at({isInstanced:!0,transpileToGLSL100:!Ci(this.context.gl)},this.getShaders()),useTangents:!1}}updateAttributes(t){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(i=>{this._setModelAttributes(i.model,t)})}draw({moduleParameters:t=null,parameters:i={},context:r}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());const{viewport:s}=this.context,{sizeScale:o,sizeMinPixels:a,sizeMaxPixels:l,opacity:c,coordinateSystem:u}=this.props,h=this.getNumInstances();this.state.scenegraph.traverse((f,{worldMatrix:g})=>{f.model.setInstanceCount(h),f.updateModuleSettings(t),f.draw({parameters:i,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:a,sizeMaxPixels:l,composeModelMatrix:Jz(s,u),sceneModelMatrix:g,u_Camera:f.model.getUniforms().project_uCameraPosition}})})}}return n.layerName="ScenegraphLayer",n.defaultProps=k_e,n})();class L_e extends gh{constructor(e={}){const{id:t=ma("sphere-geometry")}=e,{indices:i,attributes:r}=function(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const o=Math.PI-0,c=2*Math.PI-0,u=(e+1)*(t+1);if("number"==typeof i){const G=i;i=(k,oe,we,Be,Ue)=>G}const h=new Float32Array(3*u),f=new Float32Array(3*u),g=new Float32Array(2*u),A=new(u>65535?Uint32Array:Uint16Array)(e*t*6);for(let G=0;G<=e;G++)for(let k=0;k<=t;k++){const oe=k/t,we=G/e,Be=k+G*(t+1),Ue=2*Be,qe=3*Be,bt=c*oe,xt=o*we,Mt=Math.sin(bt),Bt=Math.cos(bt),Wt=Math.sin(xt),yt=Bt*Wt,Ut=Math.cos(xt),pt=Mt*Wt,Yt=i(yt,Ut,pt,oe,we);h[qe+0]=Yt*yt,h[qe+1]=Yt*Ut,h[qe+2]=Yt*pt,f[qe+0]=yt,f[qe+1]=Ut,f[qe+2]=pt,g[Ue+0]=oe,g[Ue+1]=1-we}const I=t+1;for(let G=0;G<t;G++)for(let k=0;k<e;k++){const oe=6*(G*e+k);A[oe+0]=k*I+G,A[oe+1]=k*I+G+1,A[oe+2]=(k+1)*I+G,A[oe+3]=(k+1)*I+G,A[oe+4]=k*I+G+1,A[oe+5]=(k+1)*I+G+1}return{indices:{size:1,value:A},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:g}}}}(e);super(Sn(at({},e),{id:t,indices:i,attributes:at(at({},r),e.attributes)}))}}const V_e={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class W5 extends gh{constructor(e={}){const{id:t=ma("truncated-code-geometry")}=e,{indices:i,attributes:r}=function(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:l=!1}=n,c=(a?2:0)+(l?2:0),u=(r+1)*(s+1+c),h=Math.atan2(e-t,i),f=Math.sin,g=Math.cos,m=Math.PI,A=g(h),I=f(h),G=a?-2:0,k=s+(l?2:0),oe=r+1,we=new Uint16Array(r*(s+c)*6),Be=V_e[o],Ue=new Float32Array(3*u),qe=new Float32Array(3*u),bt=new Float32Array(2*u);let xt=0,Mt=0;for(let Bt=G;Bt<=k;Bt++){let yt,Wt=Bt/s,mt=i*Wt;Bt<0?(mt=0,Wt=1,yt=e):Bt>s?(mt=i,Wt=1,yt=t):yt=e+Bt/s*(t-e),(-2===Bt||Bt===s+2)&&(yt=0,Wt=0),mt-=i/2;for(let Ut=0;Ut<oe;Ut++){const pt=f(Ut*m*2/r),Yt=g(Ut*m*2/r);Ue[xt+Be[0]]=pt*yt,Ue[xt+Be[1]]=mt,Ue[xt+Be[2]]=Yt*yt,qe[xt+Be[0]]=Bt<0||Bt>s?0:pt*A,qe[xt+Be[1]]=Bt<0?-1:Bt>s?1:I,qe[xt+Be[2]]=Bt<0||Bt>s?0:Yt*A,bt[Mt+0]=Ut/r,bt[Mt+1]=Wt,Mt+=2,xt+=3}}for(let Bt=0;Bt<s+c;Bt++)for(let Wt=0;Wt<r;Wt++){const mt=6*(Bt*r+Wt);we[mt+0]=oe*(Bt+0)+0+Wt,we[mt+1]=oe*(Bt+0)+1+Wt,we[mt+2]=oe*(Bt+1)+1+Wt,we[mt+3]=oe*(Bt+0)+0+Wt,we[mt+4]=oe*(Bt+1)+1+Wt,we[mt+5]=oe*(Bt+1)+0+Wt}return{indices:we,attributes:{POSITION:{size:3,value:Ue},NORMAL:{size:3,value:qe},TEXCOORD_0:{size:2,value:bt}}}}(e);super(Sn(at({},e),{id:t,indices:i,attributes:at(at({},r),e.attributes)}))}}class U_e extends W5{constructor(e={}){const{id:t=ma("cone-geometry"),radius:i=1,cap:r=!0}=e;super(Sn(at({},e),{id:t,topRadius:0,topCap:Boolean(r),bottomCap:Boolean(r),bottomRadius:i}))}}class z_e extends W5{constructor(e={}){const{id:t=ma("cylinder-geometry"),radius:i=1}=e;super(Sn(at({},e),{id:t,bottomRadius:i,topRadius:i}))}}const H_e=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),G_e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),$_e=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),W_e=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),q_e={POSITION:{size:3,value:new Float32Array(G_e)},NORMAL:{size:3,value:new Float32Array($_e)},TEXCOORD_0:{size:2,value:new Float32Array(W_e)}};class Y_e extends gh{constructor(e={}){const{id:t=ma("cube-geometry")}=e;super(Sn(at({},e),{id:t,indices:{size:1,value:new Uint16Array(H_e)},attributes:at(at({},q_e),e.attributes)}))}}class lu{constructor(e=[0,0,0,0,0,0,0,0,0]){this.elements=void 0,this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e=new fe){const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t=new fe){const i=this.elements,r=e.x,s=e.y,o=e.z;return t.x=i[0]*r+i[1]*s+i[2]*o,t.y=i[3]*r+i[4]*s+i[5]*o,t.z=i[6]*r+i[7]*s+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t=new lu){const i=this.elements,r=e.elements,s=t.elements,o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],h=i[5],f=i[6],g=i[7],m=i[8],A=r[0],I=r[1],G=r[2],k=r[3],oe=r[4],we=r[5],Be=r[6],Ue=r[7],qe=r[8];return s[0]=o*A+a*k+l*Be,s[1]=o*I+a*oe+l*Ue,s[2]=o*G+a*we+l*qe,s[3]=c*A+u*k+h*Be,s[4]=c*I+u*oe+h*Ue,s[5]=c*G+u*we+h*qe,s[6]=f*A+g*k+m*Be,s[7]=f*I+g*oe+m*Ue,s[8]=f*G+g*we+m*qe,t}scale(e,t=new lu){const i=this.elements,r=t.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return t}solve(e,t=new fe){const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let l=3;const c=l;let u,f;do{if(o=c-l,0===s[o+4*o])for(a=o+1;a<c;a++)if(0!==s[o+4*a]){u=4;do{f=4-u,s[f+4*o]+=s[f+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<c;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{f=4-u,s[f+4*a]=f<=o?0:s[f+4*a]-s[f+4*o]*g}while(--u)}}while(--l);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=["+t.toString()+"], b=["+e.toString()+"], A=["+this.toString()+"]";return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e=new lu){const r=X_e;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const l=a;let c,h;do{if(s=l-a,0===r[s+6*s])for(o=s+1;o<l;o++)if(0!==r[s+6*o]){c=6;do{h=6-c,r[h+6*s]+=r[h+6*o]}while(--c);break}if(0!==r[s+6*s])for(o=s+1;o<l;o++){const f=r[s+6*o]/r[s+6*s];c=6;do{h=6-c,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*f}while(--c)}}while(--a);s=2;do{o=s-1;do{const f=r[s+6*o]/r[s+6*s];c=6;do{h=6-c,r[h+6*o]=r[h+6*o]-r[h+6*s]*f}while(--c)}while(o--)}while(--s);s=2;do{const f=1/r[s+6*s];c=6;do{h=6-c,r[h+6*s]=r[h+6*s]*f}while(--c)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw"Could not reverse! A=["+this.toString()+"]";e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,s=e.w,o=t+t,a=i+i,l=r+r,c=t*o,u=t*a,h=t*l,f=i*a,g=i*l,m=r*l,A=s*o,I=s*a,G=s*l,k=this.elements;return k[0]=1-(f+m),k[1]=u-G,k[2]=h+I,k[3]=u+G,k[4]=1-(c+m),k[5]=g-A,k[6]=h-I,k[7]=g+A,k[8]=1-(c+f),this}transpose(e=new lu){const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const X_e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class fe{constructor(e=0,t=0,i=0){this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=t,this.z=i}cross(e,t=new fe){const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z;return t.x=a*s-l*r,t.y=l*i-o*s,t.z=o*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new fe(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new fe(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new lu([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e=new fe){const t=this.x,i=this.y,r=this.z;let s=Math.sqrt(t*t+i*i+r*r);return s>0?(s=1/s,e.x=t*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,t=new fe){const r=this.y,s=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*s,t}vmul(e,t=new fe){return t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i=new fe){return i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e=new fe){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=K_e,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=Q_e;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return this.x+","+this.y+","+this.z}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*t,i.y=s+(e.y-s)*t,i.z=o+(e.z-o)*t}almostEquals(e,t=1e-6){return!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e=1e-6){return!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(q5),q5.almostEquals(e,t)}clone(){return new fe(this.x,this.y,this.z)}}fe.ZERO=void 0,fe.UNIT_X=void 0,fe.UNIT_Y=void 0,fe.UNIT_Z=void 0,fe.ZERO=new fe(0,0,0),fe.UNIT_X=new fe(1,0,0),fe.UNIT_Y=new fe(0,1,0),fe.UNIT_Z=new fe(0,0,1);const K_e=new fe,Q_e=new fe,q5=new fe;class pr{constructor(e={}){this.lowerBound=void 0,this.upperBound=void 0,this.lowerBound=new fe,this.upperBound=new fe,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let l=1;l<e.length;l++){let c=e[l];a&&(a.vmult(c,Y5),c=Y5),c.x>o.x&&(o.x=c.x),c.x<s.x&&(s.x=c.x),c.y>o.y&&(o.y=c.y),c.y<s.y&&(s.y=c.y),c.z>o.z&&(o.z=c.z),c.z<s.z&&(s.z=c.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new pr).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||t.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||t.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||t.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return t.x<=r.x&&i.x>=s.x&&t.y<=r.y&&i.y>=s.y&&t.z<=r.z&&i.z>=s.z}getCorners(e,t,i,r,s,o,a,l){const c=this.lowerBound,u=this.upperBound;e.copy(c),t.set(u.x,c.y,c.z),i.set(u.x,u.y,c.z),r.set(c.x,u.y,u.z),s.set(u.x,c.y,u.z),o.set(c.x,u.y,c.z),a.set(c.x,c.y,u.z),l.copy(u)}toLocalFrame(e,t){const i=X5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToLocal(g,g)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=X5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToWorld(g,g)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*r,l=(this.upperBound.x-i.x)*r,c=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,f=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,l),Math.min(c,u)),Math.min(h,f)),m=Math.min(Math.min(Math.max(a,l),Math.max(c,u)),Math.max(h,f));return!(m<0||g>m)}}const Y5=new fe,X5=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe];class us{constructor(e=0,t=0,i=0,r=1){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return this.x+","+this.y+","+this.z+","+this.w}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e=new fe){this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=J_e;e.tangents(i,eye),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(Er(e.length(),2)*Er(t.length(),2))+e.dot(t),this.normalize()}return this}mult(e,t=new us){const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,l=e.y,c=e.z,u=e.w;return t.x=i*u+o*a+r*c-s*l,t.y=r*u+o*l+s*a-i*c,t.z=s*u+o*c+i*l-r*a,t.w=o*u-i*a-r*l-s*c,t}inverse(e=new us){const t=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e=new us){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t=new fe){const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z,c=this.w,u=c*i+a*s-l*r,h=c*r+l*i-o*s,f=c*s+o*r-a*i,g=-o*i-a*r-l*s;return t.x=u*c+g*-o+h*-l-f*-a,t.y=h*c+g*-a+f*-o-u*-l,t.z=f*c+g*-l+u*-a-h*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t="YZX"){let i,r,s;const o=this.x,a=this.y,l=this.z,c=this.w;switch(t){case"YZX":const u=o*a+l*c;if(u>.499&&(i=2*Math.atan2(o,c),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,c),r=-Math.PI/2,s=0),void 0===i){const h=o*o,g=l*l;i=Math.atan2(2*a*c-2*o*l,1-a*a*2-2*g),r=Math.asin(2*u),s=Math.atan2(2*o*c-2*a*l,1-2*h-2*g)}break;default:throw new Error("Euler order "+t+" not supported yet.")}e.y=i,e.z=r,e.x=s}setFromEuler(e,t,i,r="XYZ"){const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),l=Math.sin(e/2),c=Math.sin(t/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a-l*c*u):"YXZ"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a+l*c*u):"ZXY"===r?(this.x=l*o*a-s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a-l*c*u):"ZYX"===r?(this.x=l*o*a-s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a+l*c*u):"YZX"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a-l*c*u):"XZY"===r&&(this.x=l*o*a-s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a+l*c*u),this}clone(){return new us(this.x,this.y,this.z,this.w)}slerp(e,t,i=new us){const r=this.x,s=this.y,o=this.z,a=this.w;let f,g,m,A,I,l=e.x,c=e.y,u=e.z,h=e.w;return g=r*l+s*c+o*u+a*h,g<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),A=Math.sin((1-t)*f)/m,I=Math.sin(t*f)/m):(A=1-t,I=t),i.x=A*r+I*l,i.y=A*s+I*c,i.z=A*o+I*u,i.w=A*a+I*h,i}integrate(e,t,i,r=new us){const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,l=this.x,c=this.y,u=this.z,h=this.w,f=.5*t;return r.x+=f*(s*h+o*u-a*c),r.y+=f*(o*h+a*l-s*u),r.z+=f*(a*h+s*c-o*l),r.w+=f*(-s*l-o*c-a*u),r}}const J_e=new fe,eye=new fe,tye={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let _n=(()=>{class n{constructor(t={}){this.id=void 0,this.type=void 0,this.boundingSphereRadius=void 0,this.collisionResponse=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.material=void 0,this.body=void 0,this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type}volume(){throw"volume() not implemented for shape type "+this.type}calculateLocalInertia(t,i){throw"calculateLocalInertia() not implemented for shape type "+this.type}calculateWorldAABB(t,i,r,s){throw"calculateWorldAABB() not implemented for shape type "+this.type}}return n.idCounter=0,n.types=tye,n})();class $i{constructor(e={}){this.position=void 0,this.quaternion=void 0,this.position=new fe,this.quaternion=new us,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return $i.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return $i.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t=new fe){return this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r=new fe){return i.vsub(e,r),t.conjugate(Q5),Q5.vmult(r,r),r}static pointToWorldFrame(e,t,i,r=new fe){return t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i=new fe){return e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r=new fe){return t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const Q5=new us;class jf extends _n{constructor(e={}){const{vertices:t=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:_n.types.CONVEXPOLYHEDRON}),this.vertices=void 0,this.faces=void 0,this.faceNormals=void 0,this.worldVertices=void 0,this.worldVerticesNeedsUpdate=void 0,this.worldFaceNormals=void 0,this.worldFaceNormalsNeedsUpdate=void 0,this.uniqueAxes=void 0,this.uniqueEdges=void 0,this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new fe;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let l=0;l!==a;l++){t[o[l]].vsub(t[o[(l+1)%a]],r),r.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error("Vertex "+this.faces[e][r]+" not found!");const t=this.faceNormals[e]||new fe;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(".faceNormals["+e+"] = Vec3("+t.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(let r=0;r<this.faces[e].length;r++)console.warn(".vertices["+this.faces[e][r]+"] = Vec3("+this.vertices[this.faces[e][r]].toString()+")")}}}getFaceNormal(e,t){const i=this.faces[e];jf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const s=new fe,o=new fe;t.vsub(e,o),i.vsub(t,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,s,o,a,l,c){const u=new fe;let h=-1,f=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),s.vmult(u,u);const A=u.dot(o);A>f&&(f=A,h=m)}const g=[];for(let m=0;m<i.faces[h].length;m++){const A=i.vertices[i.faces[h][m]],I=new fe;I.copy(A),s.vmult(I,I),r.vadd(I,I),g.push(I)}h>=0&&this.clipFaceAgainstHull(o,e,t,g,a,l,c)}findSeparatingAxis(e,t,i,r,s,o,a,l){const c=new fe,u=new fe,h=new fe,f=new fe,g=new fe,m=new fe;let A=Number.MAX_VALUE;const I=this;if(I.uniqueAxes)for(let G=0;G!==I.uniqueAxes.length;G++){i.vmult(I.uniqueAxes[G],c);const k=I.testSepAxis(c,e,t,i,r,s);if(!1===k)return!1;k<A&&(A=k,o.copy(c))}else{const G=a?a.length:I.faces.length;for(let k=0;k<G;k++){c.copy(I.faceNormals[a?a[k]:k]),i.vmult(c,c);const we=I.testSepAxis(c,e,t,i,r,s);if(!1===we)return!1;we<A&&(A=we,o.copy(c))}}if(e.uniqueAxes)for(let G=0;G!==e.uniqueAxes.length;G++){s.vmult(e.uniqueAxes[G],u);const k=I.testSepAxis(u,e,t,i,r,s);if(!1===k)return!1;k<A&&(A=k,o.copy(u))}else{const G=l?l.length:e.faces.length;for(let k=0;k<G;k++){u.copy(e.faceNormals[l?l[k]:k]),s.vmult(u,u);const we=I.testSepAxis(u,e,t,i,r,s);if(!1===we)return!1;we<A&&(A=we,o.copy(u))}}for(let G=0;G!==I.uniqueEdges.length;G++){i.vmult(I.uniqueEdges[G],f);for(let k=0;k!==e.uniqueEdges.length;k++)if(s.vmult(e.uniqueEdges[k],g),f.cross(g,m),!m.almostZero()){m.normalize();const oe=I.testSepAxis(m,e,t,i,r,s);if(!1===oe)return!1;oe<A&&(A=oe,o.copy(m))}}return r.vsub(t,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,r,s,o){jf.project(this,e,i,r,QR),jf.project(t,e,s,o,ZR);const l=QR[0],c=QR[1],u=ZR[0],h=ZR[1];if(l<h||u<c)return!1;const f=l-h,g=u-c;return f<g?f:g}calculateLocalInertia(e,t){const i=new fe,r=new fe;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,s,o,a){const l=new fe,c=new fe,u=new fe,h=new fe,f=new fe,g=new fe,m=new fe,A=new fe,I=this,k=r,oe=[];let we=-1,Be=Number.MAX_VALUE;for(let Mt=0;Mt<I.faces.length;Mt++){l.copy(I.faceNormals[Mt]),i.vmult(l,l);const Bt=l.dot(e);Bt<Be&&(Be=Bt,we=Mt)}if(we<0)return;const Ue=I.faces[we];Ue.connectedFaces=[];for(let Mt=0;Mt<I.faces.length;Mt++)for(let Bt=0;Bt<I.faces[Mt].length;Bt++)-1!==Ue.indexOf(I.faces[Mt][Bt])&&Mt!==we&&-1===Ue.connectedFaces.indexOf(Mt)&&Ue.connectedFaces.push(Mt);const qe=Ue.length;for(let Mt=0;Mt<qe;Mt++){const Bt=I.vertices[Ue[Mt]];Bt.vsub(I.vertices[Ue[(Mt+1)%qe]],c),u.copy(c),i.vmult(u,u),t.vadd(u,u),h.copy(this.faceNormals[we]),i.vmult(h,h),t.vadd(h,h),u.cross(h,f),f.negate(f),g.copy(Bt),i.vmult(g,g),t.vadd(g,g);const mt=Ue.connectedFaces[Mt];m.copy(this.faceNormals[mt]);const yt=this.getPlaneConstantOfFace(mt);A.copy(m),i.vmult(A,A);const Ut=yt-A.dot(t);for(this.clipFaceAgainstPlane(k,oe,A,Ut);k.length;)k.shift();for(;oe.length;)k.push(oe.shift())}m.copy(this.faceNormals[we]);const bt=this.getPlaneConstantOfFace(we);A.copy(m),i.vmult(A,A);const xt=bt-A.dot(t);for(let Mt=0;Mt<k.length;Mt++){let Bt=A.dot(k[Mt])+xt;if(Bt<=s&&(console.log("clamped: depth="+Bt+" to minDist="+s),Bt=s),Bt<=o){const Wt=k[Mt];Bt<=1e-6&&a.push({point:Wt,normal:A,depth:Bt})}}}clipFaceAgainstPlane(e,t,i,r){let s,o;const a=e.length;if(a<2)return t;let l=e[e.length-1],c=e[0];s=i.dot(l)+r;for(let u=0;u<a;u++){if(c=e[u],o=i.dot(c)+r,s<0)if(o<0){const h=new fe;h.copy(c),t.push(h)}else{const h=new fe;l.lerp(c,s/(s-o),h),t.push(h)}else if(o<0){const h=new fe;l.lerp(c,s/(s-o),h),t.push(h),t.push(c)}l=c,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new fe);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new fe);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const s=this.vertices;let o,a,l,c,u,h,f=new fe;for(let g=0;g<s.length;g++){f.copy(s[g]),t.vmult(f,f),e.vadd(f,f);const m=f;(void 0===o||m.x<o)&&(o=m.x),(void 0===c||m.x>c)&&(c=m.x),(void 0===a||m.y<a)&&(a=m.y),(void 0===u||m.y>u)&&(u=m.y),(void 0===l||m.z<l)&&(l=m.z),(void 0===h||m.z>h)&&(h=m.z)}i.set(o,a,l),r.set(c,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e=new fe){const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let s=0;s<i;s++){const o=r[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,s=new fe;this.getAveragePointLocal(s);for(let o=0;o<this.faces.length;o++){let a=r[o];const l=t[i[o][0]],c=new fe;e.vsub(l,c);const u=a.dot(c),h=new fe;s.vsub(l,h);const f=a.dot(h);if(u<0&&f>0||u>0&&f<0)return!1}return-1}static project(e,t,i,r,s){const o=e.vertices.length,a=nye;let l=0,c=0;const u=iye,h=e.vertices;u.setZero(),$i.vectorToLocalFrame(i,r,t,a),$i.pointToLocalFrame(i,r,u,u);const f=u.dot(a);c=l=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>l&&(l=m),m<c&&(c=m)}if(c-=f,l-=f,c>l){const g=c;c=l,l=g}s[0]=l,s[1]=c}}const QR=[],ZR=[],nye=new fe,iye=new fe;class dS extends _n{constructor(e){super({type:_n.types.BOX}),this.halfExtents=void 0,this.convexPolyhedronRepresentation=void 0,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=fe,s=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],l=new jf({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,t=new fe){return dS.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let s=0;s!==i.length;s++)t.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)yh.set(s[o][0],s[o][1],s[o][2]),t.vmult(yh,yh),e.vadd(yh,yh),i(yh.x,yh.y,yh.z)}calculateWorldAABB(e,t,i,r){const s=this.halfExtents;cu[0].set(s.x,s.y,s.z),cu[1].set(-s.x,s.y,s.z),cu[2].set(-s.x,-s.y,s.z),cu[3].set(-s.x,-s.y,-s.z),cu[4].set(s.x,-s.y,-s.z),cu[5].set(s.x,s.y,-s.z),cu[6].set(-s.x,s.y,-s.z),cu[7].set(s.x,-s.y,s.z);const o=cu[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=cu[a];t.vmult(l,l),e.vadd(l,l);const c=l.x,u=l.y,h=l.z;c>r.x&&(r.x=c),u>r.y&&(r.y=u),h>r.z&&(r.z=h),c<i.x&&(i.x=c),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const yh=new fe,cu=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe];class yn extends class{constructor(){this._listeners=void 0}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}{constructor(e={}){super(),this.id=void 0,this.index=void 0,this.world=void 0,this.preStep=void 0,this.postStep=void 0,this.vlambda=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.collisionResponse=void 0,this.position=void 0,this.previousPosition=void 0,this.interpolatedPosition=void 0,this.initPosition=void 0,this.velocity=void 0,this.initVelocity=void 0,this.force=void 0,this.mass=void 0,this.invMass=void 0,this.material=void 0,this.linearDamping=void 0,this.type=void 0,this.allowSleep=void 0,this.sleepState=void 0,this.sleepSpeedLimit=void 0,this.sleepTimeLimit=void 0,this.timeLastSleepy=void 0,this.wakeUpAfterNarrowphase=void 0,this.torque=void 0,this.quaternion=void 0,this.initQuaternion=void 0,this.previousQuaternion=void 0,this.interpolatedQuaternion=void 0,this.angularVelocity=void 0,this.initAngularVelocity=void 0,this.shapes=void 0,this.shapeOffsets=void 0,this.shapeOrientations=void 0,this.inertia=void 0,this.invInertia=void 0,this.invInertiaWorld=void 0,this.invMassSolve=void 0,this.invInertiaSolve=void 0,this.invInertiaWorldSolve=void 0,this.fixedRotation=void 0,this.angularDamping=void 0,this.linearFactor=void 0,this.angularFactor=void 0,this.aabb=void 0,this.aabbNeedsUpdate=void 0,this.boundingRadius=void 0,this.wlambda=void 0,this.isTrigger=void 0,this.id=yn.idCounter++,this.index=-1,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new fe,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new fe,this.previousPosition=new fe,this.interpolatedPosition=new fe,this.initPosition=new fe,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new fe,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new fe,this.force=new fe;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?yn.STATIC:yn.DYNAMIC,typeof e.type==typeof yn.STATIC&&(this.type=e.type),this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.sleepState=yn.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new fe,this.quaternion=new us,this.initQuaternion=new us,this.previousQuaternion=new us,this.interpolatedQuaternion=new us,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new fe,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new fe,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new fe,this.invInertia=new fe,this.invInertiaWorld=new lu,this.invMassSolve=0,this.invInertiaSolve=new fe,this.invInertiaWorldSolve=new lu,this.fixedRotation=void 0!==e.fixedRotation&&e.fixedRotation,this.angularDamping=void 0!==e.angularDamping?e.angularDamping:.01,this.linearFactor=new fe(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new fe(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new pr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new fe,this.isTrigger=Boolean(e.isTrigger),e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=yn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===yn.SLEEPING&&this.dispatchEvent(yn.wakeupEvent)}sleep(){this.sleepState=yn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=Er(this.sleepSpeedLimit,2);t===yn.AWAKE&&i<r?(this.sleepState=yn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(yn.sleepyEvent)):t===yn.SLEEPY&&i>r?this.wakeUp():t===yn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(yn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===yn.SLEEPING||this.type===yn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t=new fe){return e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t=new fe){return this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t=new fe){return this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t=new fe){return this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new fe,s=new us;return t&&r.copy(t),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),l=o.boundingSphereRadius;a+l>r&&(r=a+l)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=rye,o=sye,a=this.quaternion,l=this.aabb,c=oye;for(let u=0;u!==r;u++){const h=e[u];a.vmult(t[u],s),s.vadd(this.position,s),a.mult(i[u],o),h.calculateWorldAABB(s,o,c.lowerBound,c.upperBound),0===u?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=aye,r=lye;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t=new fe){if(this.type!==yn.DYNAMIC)return;this.sleepState===yn.SLEEPING&&this.wakeUp();const i=cye;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t=new fe){if(this.type!==yn.DYNAMIC)return;const i=uye,r=dye;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===yn.DYNAMIC&&(this.sleepState===yn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t=new fe){if(this.type!==yn.DYNAMIC)return;this.sleepState===yn.SLEEPING&&this.wakeUp();const i=t,r=hye;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=fye;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t=new fe){if(this.type!==yn.DYNAMIC)return;const i=pye,r=gye;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=mye;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),dS.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new fe;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==yn.DYNAMIC&&this.type!==yn.KINEMATIC||this.sleepState===yn.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*f.x,r.y+=a.y*g*f.y,r.z+=a.z*g*f.z;const m=h.elements,A=this.angularFactor,I=l.x*A.x,G=l.y*A.y,k=l.z*A.z;s.x+=e*(m[0]*I+m[1]*G+m[2]*k),s.y+=e*(m[3]*I+m[4]*G+m[5]*k),s.z+=e*(m[6]*I+m[7]*G+m[8]*k),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}yn.idCounter=0,yn.COLLIDE_EVENT_NAME="collide",yn.DYNAMIC=1,yn.STATIC=2,yn.KINEMATIC=4,yn.AWAKE=0,yn.SLEEPY=1,yn.SLEEPING=2,yn.wakeupEvent={type:"wakeup"},yn.sleepyEvent={type:"sleepy"},yn.sleepEvent={type:"sleep"};const rye=new fe,sye=new us,oye=new pr,aye=new lu,lye=new lu,cye=new fe,uye=new fe,dye=new fe,hye=new fe,fye=new fe,pye=new fe,gye=new fe,mye=new fe;new fe,new fe;class hS{constructor(){this.rayFromWorld=void 0,this.rayToWorld=void 0,this.hitNormalWorld=void 0,this.hitPointWorld=void 0,this.hasHit=void 0,this.shape=void 0,this.body=void 0,this.hitFaceIndex=void 0,this.distance=void 0,this.shouldStop=void 0,this.rayFromWorld=new fe,this.rayToWorld=new fe,this.hitNormalWorld=new fe,this.hitPointWorld=new fe,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let Z5,J5,e8,t8,n8,i8,r8;Z5=_n.types.SPHERE,J5=_n.types.PLANE,e8=_n.types.BOX,t8=_n.types.CYLINDER,n8=_n.types.CONVEXPOLYHEDRON,i8=_n.types.HEIGHTFIELD,r8=_n.types.TRIMESH;class ys{get[Z5](){return this._intersectSphere}get[J5](){return this._intersectPlane}get[e8](){return this._intersectBox}get[t8](){return this._intersectConvex}get[n8](){return this._intersectConvex}get[i8](){return this._intersectHeightfield}get[r8](){return this._intersectTrimesh}constructor(e=new fe,t=new fe){this.from=void 0,this.to=void 0,this.direction=void 0,this.precision=void 0,this.checkCollisionResponse=void 0,this.skipBackfaces=void 0,this.collisionFilterMask=void 0,this.collisionFilterGroup=void 0,this.mode=void 0,this.result=void 0,this.hasHit=void 0,this.callback=void 0,this.from=e.clone(),this.to=t.clone(),this.direction=new fe,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ys.ANY,this.result=new hS,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||ys.ANY,this.result=t.result||new hS,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(s8),nN.length=0,e.broadphase.aabbQuery(e,s8,nN),this.intersectBodies(nN),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||0==(this.collisionFilterGroup&e.collisionFilterMask)||0==(e.collisionFilterGroup&this.collisionFilterMask))return;const r=xye,s=Sye;for(let o=0,a=e.shapes.length;o<a;o++){const l=e.shapes[o];if((!i||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(l,s,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function(n,e,t){t.vsub(n,Uf);const i=Uf.dot(e);return e.scale(i,pS),pS.vadd(n,pS),t.distanceTo(pS)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,s)}_intersectPlane(e,t,i,r,s){const o=this.from,a=this.to,l=this.direction,c=new fe(0,0,1);t.vmult(c,c);const u=new fe;o.vsub(i,u);const h=u.dot(c);if(a.vsub(i,u),h*u.dot(c)>0||o.distanceTo(a)<h)return;const g=c.dot(l);if(Math.abs(g)<this.precision)return;const m=new fe,A=new fe,I=new fe;o.vsub(i,m);const G=-c.dot(m)/g;l.scale(G,A),o.vadd(A,I),this.reportIntersection(c,I,s,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,s=this.from;t.x=Math.min(r.x,s.x),t.y=Math.min(r.y,s.y),t.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,t,i,r,s){const o=Cye;o.from.copy(this.from),o.to.copy(this.to),$i.pointToLocalFrame(i,t,o.from,o.from),$i.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=Tye;let l,c,u,h;l=c=0,u=h=e.data.length-1;const f=new pr;o.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=l;g<u;g++)for(let m=c;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,f),f.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),$i.pointToWorldFrame(i,t,e.pillarOffset,fS),this._intersectConvex(e.pillarConvex,t,fS,r,s,o8),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),$i.pointToWorldFrame(i,t,e.pillarOffset,fS),this._intersectConvex(e.pillarConvex,t,fS,r,s,o8)}}}_intersectSphere(e,t,i,r,s){const o=this.from,a=this.to,l=e.radius,c=Er(a.x-o.x,2)+Er(a.y-o.y,2)+Er(a.z-o.z,2),u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),h=Er(o.x-i.x,2)+Er(o.y-i.y,2)+Er(o.z-i.z,2)-Er(l,2),f=Er(u,2)-4*c*h,g=Aye,m=Mye;if(!(f<0))if(0===f)o.lerp(a,f,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1);else{const A=(-u-Math.sqrt(f))/(2*c),I=(-u+Math.sqrt(f))/(2*c);if(A>=0&&A<=1&&(o.lerp(a,A,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1)),this.result.shouldStop)return;I>=0&&I<=1&&(o.lerp(a,I,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1))}}_intersectConvex(e,t,i,r,s,o){const a=Dye,l=a8,c=o&&o.faceList||null,u=e.faces,h=e.vertices,f=e.faceNormals,g=this.direction,m=this.from,I=m.distanceTo(this.to),G=c?c.length:u.length,k=this.result;for(let oe=0;!k.shouldStop&&oe<G;oe++){const we=c?c[oe]:oe,Be=u[we],Ue=f[we],qe=t,bt=i;l.copy(h[Be[0]]),qe.vmult(l,l),l.vadd(bt,l),l.vsub(m,l),qe.vmult(Ue,a);const xt=g.dot(a);if(Math.abs(xt)<this.precision)continue;const Mt=a.dot(l)/xt;if(!(Mt<0)){g.scale(Mt,va),va.vadd(m,va),_c.copy(h[Be[0]]),qe.vmult(_c,_c),bt.vadd(_c,_c);for(let Bt=1;!k.shouldStop&&Bt<Be.length-1;Bt++){uu.copy(h[Be[Bt]]),du.copy(h[Be[Bt+1]]),qe.vmult(uu,uu),qe.vmult(du,du),bt.vadd(uu,uu),bt.vadd(du,du);const Wt=va.distanceTo(m);!ys.pointInTriangle(va,_c,uu,du)&&!ys.pointInTriangle(va,uu,_c,du)||Wt>I||this.reportIntersection(a,va,s,r,we)}}}}_intersectTrimesh(e,t,i,r,s,o){const a=Iye,l=Fye,c=Lye,u=a8,h=Oye,f=Rye,g=Nye,m=kye,A=Pye,I=e.indices,G=this.from,k=this.to,oe=this.direction;c.position.copy(i),c.quaternion.copy(t),$i.vectorToLocalFrame(i,t,oe,h),$i.pointToLocalFrame(i,t,G,f),$i.pointToLocalFrame(i,t,k,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,g.vsub(f,h),h.normalize();const we=f.distanceSquared(g);e.tree.rayQuery(this,c,l);for(let Be=0,Ue=l.length;!this.result.shouldStop&&Be!==Ue;Be++){const qe=l[Be];e.getNormal(qe,a),e.getVertex(I[3*qe],_c),_c.vsub(f,u);const bt=h.dot(a),xt=a.dot(u)/bt;if(xt<0)continue;h.scale(xt,va),va.vadd(f,va),e.getVertex(I[3*qe+1],uu),e.getVertex(I[3*qe+2],du);const Mt=va.distanceSquared(f);!ys.pointInTriangle(va,uu,_c,du)&&!ys.pointInTriangle(va,_c,uu,du)||Mt>we||($i.vectorToWorldFrame(t,a,A),$i.pointToWorldFrame(i,t,va,m),this.reportIntersection(A,m,s,r,qe))}l.length=0}reportIntersection(e,t,i,r,s){const o=this.from,a=this.to,l=o.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=void 0!==s?s:-1,this.mode){case ys.ALL:this.hasHit=!0,c.set(o,a,e,t,i,r,l),c.hasHit=!0,this.callback(c);break;case ys.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,r,l));break;case ys.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,r,l),c.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,Uf),i.vsub(t,ab),e.vsub(t,iN);const s=Uf.dot(Uf),o=Uf.dot(ab),a=Uf.dot(iN),l=ab.dot(ab),c=ab.dot(iN);let u,h;return(u=l*a-o*c)>=0&&(h=s*c-o*a)>=0&&u+h<s*l-o*o}}ys.CLOSEST=1,ys.ANY=2,ys.ALL=4;const s8=new pr,nN=[],ab=new fe,iN=new fe,xye=new fe,Sye=new us,va=new fe,_c=new fe,uu=new fe,du=new fe,o8={faceList:[0]},fS=new fe,Cye=new ys,Tye=[],Aye=new fe,Mye=new fe,Dye=new fe,a8=new fe,Iye=new fe,Oye=new fe,Rye=new fe,Nye=new fe,Pye=new fe,kye=new fe;new pr;const Fye=[],Lye=new $i,Uf=new fe,pS=new fe;let E8,x8,S8,C8,T8,A8,M8,D8,I8,O8,R8,N8,P8,k8,F8,L8,B8,V8,j8,U8,z8,H8,G8,$8,W8;new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new ys,new fe,new fe,new fe(1,0,0),new fe(0,1,0),new fe(0,0,1),new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new pr,new fe,new pr,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new pr,new fe,new $i,new pr;const Or={sphereSphere:_n.types.SPHERE,spherePlane:_n.types.SPHERE|_n.types.PLANE,boxBox:_n.types.BOX|_n.types.BOX,sphereBox:_n.types.SPHERE|_n.types.BOX,planeBox:_n.types.PLANE|_n.types.BOX,convexConvex:_n.types.CONVEXPOLYHEDRON,sphereConvex:_n.types.SPHERE|_n.types.CONVEXPOLYHEDRON,planeConvex:_n.types.PLANE|_n.types.CONVEXPOLYHEDRON,boxConvex:_n.types.BOX|_n.types.CONVEXPOLYHEDRON,sphereHeightfield:_n.types.SPHERE|_n.types.HEIGHTFIELD,boxHeightfield:_n.types.BOX|_n.types.HEIGHTFIELD,convexHeightfield:_n.types.CONVEXPOLYHEDRON|_n.types.HEIGHTFIELD,sphereParticle:_n.types.PARTICLE|_n.types.SPHERE,planeParticle:_n.types.PLANE|_n.types.PARTICLE,boxParticle:_n.types.BOX|_n.types.PARTICLE,convexParticle:_n.types.PARTICLE|_n.types.CONVEXPOLYHEDRON,cylinderCylinder:_n.types.CYLINDER,sphereCylinder:_n.types.SPHERE|_n.types.CYLINDER,planeCylinder:_n.types.PLANE|_n.types.CYLINDER,boxCylinder:_n.types.BOX|_n.types.CYLINDER,convexCylinder:_n.types.CONVEXPOLYHEDRON|_n.types.CYLINDER,heightfieldCylinder:_n.types.HEIGHTFIELD|_n.types.CYLINDER,particleCylinder:_n.types.PARTICLE|_n.types.CYLINDER,sphereTrimesh:_n.types.SPHERE|_n.types.TRIMESH,planeTrimesh:_n.types.PLANE|_n.types.TRIMESH};E8=Or.sphereSphere,x8=Or.spherePlane,S8=Or.boxBox,C8=Or.sphereBox,T8=Or.planeBox,A8=Or.convexConvex,M8=Or.sphereConvex,D8=Or.planeConvex,I8=Or.boxConvex,O8=Or.sphereHeightfield,R8=Or.boxHeightfield,N8=Or.convexHeightfield,P8=Or.sphereParticle,k8=Or.planeParticle,F8=Or.boxParticle,L8=Or.convexParticle,B8=Or.cylinderCylinder,V8=Or.sphereCylinder,j8=Or.planeCylinder,U8=Or.boxCylinder,z8=Or.convexCylinder,H8=Or.heightfieldCylinder,G8=Or.particleCylinder,$8=Or.sphereTrimesh,W8=Or.planeTrimesh,new fe,new fe,new fe,new fe,new fe,new us,new us,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new pr,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new us,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new pr,new ys;const Ks=globalThis.performance||{};if(!Ks.now){let n=Date.now();Ks.timing&&Ks.timing.navigationStart&&(n=Ks.timing.navigationStart),Ks.now=()=>Date.now()-n}var $f=et(4517);class Fr extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new W;return this._value}next(e){super.next(this._value=e)}}function fm(n,e,t){e||(e=new qn(qn.IDENTITY));const i=new qn(qn.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const s=new qn(qn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(s)}n.scale&&i.scale(n.scale)}const r=new qn(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const s of n.nodes||n.children||[])if(!1===fm(s,r,t))return!1;return!0}function Z8(){D4([x5,cm])}function J8(n,e){var t;const i=null===(t=e.nodes)||void 0===t?void 0:t.find(r=>r.name===n);if(i){let r=!1;for(const s of e.scenes)r||fm(s,new qn(qn.IDENTITY),(o,a)=>o!==i||(o.matrix=a,o.translation=void 0,o.rotation=void 0,o.scale=void 0,r=!0,!1));return e.scene={id:n,name:n,nodes:[i]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function oN(n,e){return Bi(this,void 0,void 0,function*(){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const r=yield Hx(i,cm,{DracoLoader:OR,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),J8(n.scenegraphNode,r)})}function Bve(n,e){return Bi(this,void 0,void 0,function*(){return J8(n,yield e)})}function aN(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new L_e;break;case"cone":i=new U_e;break;case"cylinder":i=new z_e;break;case"cube":default:i=new Y_e}return new pge(Object.assign({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Vi.CARTESIAN,data:e,mesh:i,wireframe:!1,getTransformMatrix:r=>r.transformMatrix,getColor:r=>r.color||[255,255,255,229.5]},t))}}function e6(n,e,t){if(e&&0!==e.length)return new rge(Object.assign({id:n,pickable:!0,data:e.map(i=>Object.assign(Object.assign({},i),{position:new qn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color},t))}let jve=(()=>{class n extends k4{initializeState(){const{data:t}=this.props;this.setState({data:null!=t?t:[],zoomOpacity:.8,doCollisions:!1}),Z8()}renderLayers(){var t,i;const r=this.state,s={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const l of r.data){const c=null!==(t=l.geometry)&&void 0!==t?t:"cube";l.scenegraph?s.scenegraph.push(l):void 0!==s[c]&&s[c].push(l)}const o={};for(const l of s.scenegraph)l.scenegraph&&l.scenegraphNode&&!Object.prototype.hasOwnProperty.call(o,l.scenegraph)&&(o[l.scenegraph]=oN({scenegraph:l.scenegraph},n.gltfCache));const a=[];for(const[l,c]of Object.entries(s))if("scenegraph"===l)for(const u of c)a.push(new F_e({id:"models-"+u["@id"],opacity:u.zoomBasedOpacity?r.zoomOpacity:void 0!==u.opacity?u.opacity:1,pickable:!u.unpickable,coordinateSystem:Vi.CARTESIAN,data:[u],scenegraph:u.scenegraphNode?Bve(u.scenegraphNode,o[u.scenegraph]):u.scenegraph,_lighting:u._lighting,getTransformMatrix:u.transformMatrix,getColor:null!==(i=u.color)&&void 0!==i?i:[0,255,0,127.5],parameters:{depthMask:!u.zoomBasedOpacity&&(void 0===u.opacity||1===u.opacity)}}));else"text"===l?(a.push(e6("text",c.filter(u=>u.unpickable),{pickable:!1})),a.push(e6("textPickable",c.filter(u=>!u.unpickable),{pickable:!0}))):"wireframe"===l?a.push(aN(l,c,{wireframe:!0,pickable:!1,geometry:l})):(a.push(aN(l,c.filter(u=>u.unpickable),{wireframe:!1,pickable:!1,geometry:l})),a.push(aN(`${l}Pickable`,c.filter(u=>!u.unpickable),{wireframe:!1,pickable:!0,geometry:l})));return r.doCollisions&&function(n){Bi(this,void 0,void 0,function*(){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new qn(o.transformMatrix),l=a.transformAsPoint([-1,-1,-1],[]),c=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new pr({lowerBound:new fe(...l.map((u,h)=>Math.min(u,c[h]))),upperBound:new fe(...c.map((u,h)=>Math.max(u,l[h])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield q0(o.scenegraph,cm,{DracoLoader:OR,decompress:!0,postProcess:!0});for(const l of a.scenes)fm(l,new qn(o.transformMatrix),(c,u)=>{if(c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:c.name,entityId:o.entityId,bbox:new pr({lowerBound:new fe(...f.map((m,A)=>Math.min(m,g[A]))),upperBound:new fe(...g.map((m,A)=>Math.max(m,f[A])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const l of t)o.bbox.overlaps(l.bbox)&&a.push({"@id":l["@id"],name:l.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i})}(r.data),a.filter(l=>!!l)}getPickingInfo(t){return t.info}}return n.layerName="BodyUILayer",n.gltfCache={},n})();function t6(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),t6(t,e);return e}let zve=(()=>{class n{constructor(t){var i,r,s,o,a;this.deckProps=t,this.bodyUILayer=new jve({}),this.nodeClickSubject=new se,this.nodeHoverStartSubject=new se,this.nodeHoverStopSubject=new se,this.sceneRotationSubject=new Fr([0,0]),this.nodeDragStartSubject=new se,this.nodeDragSubject=new se,this.nodeDragEndSubject=new se,this.nodeClick$=this.nodeClickSubject.pipe(ws()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(ws()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(ws()),this.sceneRotation$=this.sceneRotationSubject.pipe(ws()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(ws()),this.nodeDrag$=this.nodeDragSubject.pipe(ws()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(ws());const l=Object.assign(Object.assign({},t),{views:["orthographic"===t.camera?new jde({flipY:!1,near:-1e3}):new Hde({orbitAxis:"Y"})],controller:void 0===t.interactive||t.interactive,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:c=>{var u;return null!==(u=this.cursor)&&void 0!==u?u:c.isDragging?"grabbing":"grab"}});t.legacyLighting&&(l.effects=[new WO({ambientLight:new j4({color:[255,255,255],intensity:10})})]),this.deck=new eS(l),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:null!==(i=t.minRotationX)&&void 0!==i?i:-15,maxRotationX:null!==(r=t.maxRotationX)&&void 0!==r?r:15,target:null!==(s=t.target)&&void 0!==s?s:[.5,.5,0],rotationX:0,rotationOrbit:null!==(o=t.rotation)&&void 0!==o?o:0,zoom:null!==(a=t.zoom)&&void 0!==a?a:9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){return Bi(this,void 0,void 0,function*(){for(;!this.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})}finalize(){this.deck.finalize()}setScene(t){if((null==t?void 0:t.length)>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const s of t)s.zoomToOnLoad&&(this.zoomTo(s),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,i):this.bodyUILayer.setState({data:t,zoomOpacity:i})}}debugSceneNodeProcessing(t,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new qn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function(n,e,t,i){return Bi(this,void 0,void 0,function*(){Z8();const r=yield oN({scenegraph:n,scenegraphNode:"VHF_Kidney_L_Low1"},undefined),s={},o=[];for(const a of r.scenes)fm(a,e=new qn(e||qn.IDENTITY),(l,c)=>{const u={"@id":l.name||l.id,"@type":"ProcessedNode",transformMatrix:new qn(c),geometry:"wireframe",node:l};if(o.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:u["@id"],transformMatrix:new qn(e||qn.IDENTITY),tooltip:l.name||l.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:l}),l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=c.transformAsPoint(h.attributes.POSITION.min,[]),g=c.transformAsPoint(h.attributes.POSITION.max,[]);u.bbox=new pr({lowerBound:new fe(...f.map((m,A)=>Math.min(m,g[A]))),upperBound:new fe(...g.map((m,A)=>Math.max(m,f[A])))})}return s[u["@id"]]=u,!0});for(const a of Object.values(s).filter(l=>!l.bbox)){for(const l of t6(a.node).map(c=>s[c]).filter(c=>c.bbox))a.bbox?a.bbox.extend(l.bbox):a.bbox=l.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const l=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(l)).clone().vmul(new fe(.5,.5,.5)),f=a.center=l.clone().vadd(h);a.transformMatrix=new qn(qn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s})})(r,s).then(o=>{console.log("results",o),console.log("data",t),(t=t.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:i})})}zoomTo(t){const i=new qn(t.transformMatrix);this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationOrbit:t})})}setRotationX(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationX:t})})}setZoom(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{zoom:t})})}setTarget(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:t})})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:i}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object&&t.object["@id"]?i!==t.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(t,i){var r,s;t.picked&&t.object&&t.object["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:null!==(s=null===(r=null==i?void 0:i.srcEvent)||void 0===r?void 0:r.ctrlKey)&&void 0!==s?s:void 0})}_onViewStateChange(t){var i;if(null===(i=t.interactionState)||void 0===i?void 0:i.isZooming){const r=this.bodyUILayer.state,s=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);r.zoomOpacity!==s&&this.bodyUILayer.setState({data:r.data,zoomOpacity:s})}this.deck.setProps({viewState:Object.assign({},t.viewState)}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,i){this._dragEvent(t,i,this.nodeDragStartSubject)}_onDrag(t,i){this._dragEvent(t,i,this.nodeDragSubject)}_onDragEnd(t,i){this._dragEvent(t,i,this.nodeDragEndSubject)}_dragEvent(t,i,r){var s;(null===(s=null==t?void 0:t.object)||void 0===s?void 0:s["@id"])&&r.next({node:t.object,info:t,e:i})}}return Ei([$f.ZP],n.prototype,"_onHover",null),Ei([$f.ZP],n.prototype,"_onClick",null),Ei([$f.ZP],n.prototype,"_onViewStateChange",null),Ei([$f.ZP],n.prototype,"_onDragStart",null),Ei([$f.ZP],n.prototype,"_onDrag",null),Ei([$f.ZP],n.prototype,"_onDragEnd",null),n})();class n6 extends v{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Hve extends v{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function i6(n,e,t,i,r=new Hve(n,t,i)){if(!r.closed)return e instanceof P?e.subscribe(r):Se(e)(r)}const r6={};function yc(...n){let e,t;return Re(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&F(n[0])&&(n=n[0]),In(n,t).lift(new s6(e))}class s6{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Gve(e,this.resultSelector))}}class Gve extends n6{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(r6),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(i6(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===r6?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function Wve(n,e){return n===e}function qve(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function wS(n,e=Wve){let t=null,i=null;function r(){return qve(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}const Xve=wS(function(){const n=cD();if(!n)return!1;const e=n.injector.get(J3,null);return!!e&&e.some(i=>(i&&i.providers||[]).some(s=>s&&s.provide&&"MockNgModuleResolver"===s.provide.name||!1))});let lN=(()=>{class n{constructor(){this.bootstrap$=new Df(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const cN=new Ht("INITIAL_STATE_TOKEN");let Kve=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const o6=new Ht("Internals.StateContextFactory"),a6=new Ht("Internals.StateFactory");function fb(...n){if(1===n.length){const e=n[0];if(F(e))return ES(e,null);if(Y(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ES(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return ES(n=1===n.length&&F(n[0])?n[0]:n,null).pipe(be(t=>e(...t)))}return ES(n,null)}function ES(n,e){return new P(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=Ye(n[a]);let c=!1;t.add(l.subscribe({next:u=>{c||(c=!0,o++),r[a]=u},error:u=>t.error(u),complete:()=>{s++,(s===i||!c)&&(o===i&&t.next(e?e.reduce((u,h,f)=>(u[h]=r[f],u),{}):r),t.complete())}}))}})}function Ki(n,e){return function(i){return i.lift(new Qve(n,e))}}class Qve{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Zve(e,this.predicate,this.thisArg))}}class Zve extends v{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function Wa(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(u){let h;s++,!r||a?(a=!1,r=new Df(n,e,i),h=r.subscribe(this),o=u.subscribe({next(f){r.next(f)},error(f){a=!0,r.error(f)},complete(){l=!0,o=void 0,r.complete()}}),l&&(o=void 0)):h=r.subscribe(this),this.add(()=>{s--,h.unsubscribe(),h=void 0,o&&!l&&t&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}const l6=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function qr(n){return e=>0===n?b0():e.lift(new ewe(n))}class ewe{constructor(e){if(this.total=e,this.total<0)throw new l6}call(e,t){return t.subscribe(new twe(e,this.total))}}class twe extends v{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function c6(n,e){return e?t=>t.pipe(c6((i,r)=>Ye(n(i,r)).pipe(be((s,o)=>e(i,s,r,o))))):t=>t.lift(new nwe(n))}class nwe{constructor(e){this.project=e}call(e,t){return t.subscribe(new iwe(e,this.project))}}class iwe extends Ae{constructor(e,t){super(e),this.project=t,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(e){this.hasSubscription||this.tryNext(e)}tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t)}_innerSub(e){const t=new _t(this),i=this.destination;i.add(t);const r=L(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function xS(n=null){return e=>e.lift(new rwe(n))}class rwe{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new swe(e,this.defaultValue))}}class swe extends v{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function bc(n){return function(t){const i=new owe(n),r=t.lift(i);return i.caught=r}}class owe{constructor(e){this.selector=e}call(e,t){return t.subscribe(new awe(e,this.selector,this.caught))}}class awe extends Ae{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new _t(this);this.add(i);const r=L(t,i);r!==i&&this.add(r)}}}function gr(n){return e=>e.lift(new lwe(n))}class lwe{constructor(e){this.notifier=e}call(e,t){const i=new cwe(e),r=L(this.notifier,new _t(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class cwe extends Ae{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function bh(){}function cr(n,e,t){return function(r){return r.lift(new uwe(n,e,t))}}class uwe{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new dwe(e,this.nextOrObserver,this.error,this.complete))}}class dwe extends v{constructor(e,t,i,r){super(e),this._tapNext=bh,this._tapError=bh,this._tapComplete=bh,this._tapError=i||bh,this._tapComplete=r||bh,Q(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||bh,this._tapError=t.error||bh,this._tapComplete=t.complete||bh)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function ld(n,e){return t=>t.lift(new hwe(n,e))}class hwe{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new fwe(e,this.compare,this.keySelector))}}class fwe extends v{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}const qa={STATE_NAME:n=>`${n} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(n,e,t)=>`State name '${n}' from ${e} already exists in ${t}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:n=>`'${n}' class should be decorated with @Injectable() right after the @State() decorator`};let u6=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i,this.verifyZoneIsNotNooped(this._ngZone)}enter(t){return function(n){return"server"===n}(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return pn.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return pn.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}verifyZoneIsNotNooped(t){t instanceof pn||console.warn(qa.ZONE_WARNING())}}return n.\u0275fac=function(t){return new(t||n)(ke(pn),ke(Xc))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const d6=new Ht("ROOT_STATE_TOKEN"),h6=new Ht("FEATURE_STATE_TOKEN"),f6=new Ht("NGXS_PLUGINS"),p6=new Ht("NG_TEST_MODE"),g6=new Ht("NG_DEV_MODE"),cd="NGXS_META",m6="NGXS_OPTIONS_META",uN="NGXS_SELECTOR_META";let Wf=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=u6}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class pwe{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}const _6=new Ht("NGXS_EXECUTION_STRATEGY");function qf(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const y6=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?t:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},SS=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),dN=n=>n&&"object"==typeof n&&!Array.isArray(n),hN=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(dN(n)&&dN(t))for(const i in t)dN(t[i])?(n[i]||Object.assign(n,{[i]:{}}),hN(n[i],t[i])):Object.assign(n,{[i]:t[i]});return hN(n,...e)};function fN(n){if(!n.hasOwnProperty(cd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,cd,{value:e})}return pb(n)}function pb(n){return n[cd]}function gN(n){return n[uN]}function b6(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let s=t;for(;++i<r;)s=s+" && "+(t=t+"."+e[i]);return new Function("store","return "+s+";")}(n)}function v6(n,e){const t=SS(e.currentAppState,n.path),i=SS(e.newAppState,n.path);return new pwe(t,i,!n.isInitialised)}function Ewe(...n){return function(n,e,t=Cwe){const i=function(n){return n.reduce((e,t)=>(e[qf(t)]=!0,e),{})}(n),r=e&&function(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function(n,e){return Ki(t=>{const i=qf(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function Cwe(){return be(n=>n.action)}function CS(n){return e=>new P(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let TS=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(_6))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class Mwe extends se{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let AS=(()=>{class n extends Mwe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zi(n)))(i||n)}}(),n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),Dwe=(()=>{class n extends P{constructor(t,i){super(r=>{const s=t.pipe(CS(i)).subscribe({next:o=>r.next(o),error:o=>r.error(o),complete:()=>r.complete()});r.add(s)})}}return n.\u0275fac=function(t){return new(t||n)(ke(AS),ke(TS))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const w6=n=>(...e)=>n.shift()(...e,(...i)=>w6(n)(...i));let MS=(()=>{class n extends Fr{constructor(){super({})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),mN=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(ke(n,12),ke(f6,8))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),_N=(()=>{class n extends se{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zi(n)))(i||n)}}(),n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),E6=(()=>{class n{constructor(t,i,r,s,o,a){this._injector=t,this._actions=i,this._actionResults=r,this._pluginManager=s,this._stateStream=o,this._ngxsExecutionStrategy=a}dispatch(t){const i=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return i.subscribe({error:r=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(la),this._errorHandler.handleError(r)}catch(s){}})}),i.pipe(CS(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?sn(this._stateStream.getValue()):fb(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){if(!qf(t))return Fg(new Error(`This action doesn't have a type property: ${t.constructor.name}`));const r=this._stateStream.getValue();return w6([...this._pluginManager.plugins,(o,a)=>{o!==r&&this._stateStream.next(o);const l=this.getActionResultStream(a);return l.subscribe(c=>this._actions.next(c)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(l)}])(r,t).pipe(Wa())}getActionResultStream(t){return this._actionResults.pipe(Ki(i=>i.action===t&&"DISPATCHED"!==i.status),qr(1),Wa())}createDispatchObservable(t){return t.pipe(c6(i=>{switch(i.status){case"SUCCESSFUL":return sn(this._stateStream.getValue());case"ERRORED":return Fg(i.error);default:return Qc}})).pipe(Wa())}}return n.\u0275fac=function(t){return new(t||n)(ke(Hn),ke(AS),ke(_N),ke(mN),ke(MS),ke(TS))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const x6=n=>{Object.freeze(n);const e="function"==typeof n,t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(i){t.call(n,i)&&(!e||"caller"!==i&&"callee"!==i&&"arguments"!==i)&&null!==n[i]&&("object"==typeof n[i]||"function"==typeof n[i])&&!Object.isFrozen(n[i])&&x6(n[i])}),n};let S6=(()=>{class n{constructor(t,i){this.isDevMode=t,this.isTestMode=i}}return n.\u0275fac=function(t){return new(t||n)(ke(g6),ke(p6))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),C6=(()=>{class n{constructor(t,i){this._host=t,this._config=i}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(qa.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(qa.INCORRECT_DEVELOPMENT()))}}return n.\u0275fac=function(t){return new(t||n)(ke(S6),ke(Wf))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),gm=(()=>{class n{constructor(t,i,r,s){this._stateStream=t,this._dispatcher=i,this._config=r,s.verifyDevMode()}getRootStateOperations(){const t={getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(t):t}ensureStateAndActionsAreImmutable(t){return{getState:()=>t.getState(),setState:i=>{const r=x6(i);return t.setState(r)},dispatch:i=>t.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign({},r,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(ke(MS),ke(E6),ke(Wf),ke(C6))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),DS=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();function r(l){return SS(l,t.path)}function s(l,c){const u=y6(l,t.path,c),h=t.instance;if(h.ngxsOnChanges){const f=v6(t,{currentAppState:l,newAppState:u});h.ngxsOnChanges(f)}return i.setState(u),u}function o(l,c){return s(l,c(r(l)))}return{getState:()=>r(i.getState()),patchState:l=>o(i.getState(),function(n){return e=>{if(Array.isArray(n))throw new Error(qa.PATCHING_ARRAY());if("object"!=typeof n)throw new Error(qa.PATCHING_PRIMITIVE());const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(l)),setState(l){const c=i.getState();return function(l){return"function"==typeof l}(l)?o(c,l):s(c,l)},dispatch:l=>i.dispatch(l)}}}return n.\u0275fac=function(t){return new(t||n)(ke(gm))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class IS{static stateNameErrorMessage(e){return qa.STATE_NAME(e)}static checkCorrectStateName(e){if(!e)throw new Error(qa.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(e))throw new Error(this.stateNameErrorMessage(e))}static checkStateNameIsUnique(e,t){const r=this.getValidStateMeta(e).name,s=t[r];if(s&&s!==e)throw new Error(qa.STATE_UNIQUE(r,e.name,s.name));return r}static getValidStateMeta(e){const t=pb(e);if(!t)throw new Error(qa.STATE_DECORATOR());return t}}IS.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let mm=(()=>{class n{constructor(t,i,r,s,o,a,l){this._injector=t,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=l,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=wS(()=>{const c=this;function u(f){const g=c.statePaths[f];return g?b6(g.split("."),c._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let g=u(f);return g||((...m)=>(g||(g=u(f)),g?g(...m):void 0))},getSelectorOptions:f=>Object.assign({},c._config.selectorOptions,f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let i={};return i=Array.isArray(t)?t.slice():function(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,i}static checkStatesAreValid(t){t.forEach(IS.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){n.checkStatesAreValid(t);const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function(n){const e=t=>{const i=n.find(r=>r===t);if(!i)throw new Error(`Child state not found: ${t}. \r\nYou may have forgotten to add states to module`);return i[cd].name};return n.reduce((t,i)=>{const{name:r,children:s}=i[cd];return t[r]=(s||[]).map(e),t},{})}(i),s=function(n){const e=[],t={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),t[r]=!0,n[r].forEach(o=>{if(s.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${r}': ${s.join(" -> ")}`);t[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),o=function(n,e={}){const t=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=t(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function(n){return n.reduce((e,t)=>(e[t[cd].name]=t,e),{})}(i),l=[];for(const c of s){const u=a[c],h=o[c],f=u[cd];this.addRuntimeInfoToMeta(f,h);const g={name:c,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(u),defaults:n.cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(c,h)||l.push(g),this.states.push(g)}return l}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((o,a)=>y6(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe(Ki(t=>"DISPATCHED"===t.status),H(({action:t})=>this.invokeActions(this._actions,t).pipe(be(()=>({action:t,status:"SUCCESSFUL"})),xS({action:t,status:"CANCELED"}),bc(i=>sn({action:t,status:"ERRORED",error:i}))))).subscribe(t=>this._actionResults.next(t)))}invokeActions(t,i){const r=qf(i),s=[];for(const o of this.states){const a=o.actions[r];if(a)for(const l of a){const c=this._stateContextFactory.createStateContext(o);try{let u=o.instance[l.fn](c,i);u instanceof Promise&&(u=Ye(u)),u instanceof P?(u=u.pipe(xS({})),l.options.cancelUncompleted&&(u=u.pipe(gr(t.pipe(Ewe(i)))))):u=sn({}).pipe(Wa()),s.push(u)}catch(u){s.push(Fg(u))}}}return s.length||s.push(sn({})),fb(s)}addToStatesMap(t){const i=[],r=this.statesByName;for(const s of t){const o=IS.checkStateNameIsUnique(s,r);!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==SS(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(ke(Hn),ke(Wf),ke(n,12),ke(AS),ke(_N),ke(DS),ke(cN,8))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),yN=(()=>{class n{constructor(t,i,r){this.internalStateOperations=t,this.stateContextFactory=i,this.bootstrapper=r}ngxsBootstrap(t,i){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(Ki(()=>!!i),cr(()=>this.invokeInit(i.states)),H(()=>this.bootstrapper.appBootstrapped$),Ki(r=>!!r)).subscribe(()=>this.invokeBootstrap(i.states))}invokeInit(t){for(const i of t){const r=i.instance;if(r.ngxsOnChanges){const a=v6(i,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});r.ngxsOnChanges(a)}r.ngxsOnInit&&r.ngxsOnInit(this.getStateContext(i)),i.isInitialised=!0}}invokeBootstrap(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this.getStateContext(i))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(gm),ke(DS),ke(lN))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const OS_getOptions=n=>n&&n.NGXS_SELECTOR_OPTIONS_META||{};function Owe(n,e,t){const i=t&&t.containerClass,s=wS(function(...c){const u=e.apply(i,c);return u instanceof Function?wS.apply(null,[u]):u});Object.setPrototypeOf(s,e);const o=function(n,e){const t=function(n){return n.hasOwnProperty(uN)||Object.defineProperty(n,uN,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),gN(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName,i=e.getSelectorOptions||i);const r=Object.assign({},t);return t.getSelectorOptions=()=>function(n,e){return Object.assign({},OS_getOptions(n.containerClass)||{},OS_getOptions(n.originalFn)||{},n.getSelectorOptions()||{},e)}(r,i()),t}(e,t);return o.makeRootSelector=l=>{const{argumentSelectorFunctions:c,selectorOptions:u}=function(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i);return{selectorOptions:r,argumentSelectorFunctions:function(n=[],e,t){const i=[];return t&&(0===n.length||e.injectContainerState)&&pb(t)&&i.push(t),n&&i.push(...n),i}(t,r,e.containerClass).map(a=>A6(a)(n))}}(l,o,n);return function(f){const g=c.map(m=>m(f));try{return s(...g)}catch(m){if(m instanceof TypeError&&u.suppressErrors)return;throw m}}},s}function A6(n){const e=gN(n)||pb(n);return e&&e.makeRootSelector||(()=>n)}let hu=(()=>{class n{constructor(t,i,r,s,o,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._stateStream.pipe(be(i),bc(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?sn(void 0):Fg(r)}),ld(),CS(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(qr(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._stateStream.pipe(CS(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return A6(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(o)}}}return n.\u0275fac=function(t){return new(t||n)(ke(MS),ke(gm),ke(Wf),ke(TS),ke(mm),ke(cN,8))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),gb=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(ke(hu),ke(Wf))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class Fwe{static get type(){return"@@INIT"}}class Lwe{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}const RS=new Df(1);let Vwe=(()=>{class n{constructor(t,i,r,s,o=[],a){!function(){try{const n=window.ng,t=!(n.probe&&n.coreTokens)&&fa();RS.next(t)}catch(n){RS.next(!1)}finally{RS.complete()}}();const l=t.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(l),t.connectActionHandlers(),a.ngxsBootstrap(new Fwe,l)}}return n.\u0275fac=function(t){return new(t||n)(ke(mm),ke(gm),ke(hu),ke(gb),ke(d6,8),ke(yN))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({}),n})(),jwe=(()=>{class n{constructor(t,i,r,s=[],o){const a=n.flattenStates(s),l=r.addAndReturnDefaults(a);l.states.length&&(i.setStateToTheCurrentWithNew(l),o.ngxsBootstrap(new Lwe(l.defaults),l))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(ke(hu),ke(gm),ke(mm),ke(h6,8),ke(yN))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({}),n})();class Yo{static forRoot(e=[],t={}){return{ngModule:Vwe,providers:[mm,DS,Dwe,AS,lN,C6,S6,yN,E6,_N,gm,TS,hu,MS,gb,mN,...e,...Yo.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:jwe,providers:[mm,mN,...e,{provide:h6,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:p6,useValue:Xve},{provide:g6,useValue:fa},{provide:_6,useClass:t.executionStrategy||u6},{provide:d6,useValue:e},{provide:Yo.ROOT_OPTIONS,useValue:t},{provide:Wf,useFactory:Yo.ngxsConfigFactory,deps:[Yo.ROOT_OPTIONS]},{provide:IE,useFactory:Yo.appBootstrapListenerFactory,multi:!0,deps:[lN]},{provide:cN,useFactory:Yo.getInitialState},{provide:o6,useExisting:DS},{provide:a6,useExisting:mm}]}static ngxsConfigFactory(e){return hN(new Wf,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return Kve.pop()}}function bN(n,e){return(t,i)=>{if(t.hasOwnProperty("prototype"))throw new Error(qa.ACTION_DECORATOR());const s=fN(t.constructor);Array.isArray(n)||(n=[n]);for(const o of n){const a=o.type;s.actions[a]||(s.actions[a]=[]),s.actions[a].push({fn:i,options:e||{},type:a})}}}function M6(n){return i=>{!function(n){RS.subscribe(e=>{e&&(n.\u0275prov||console.warn(qa.UNDECORATED_STATE_IN_IVY(n.name)))})}(i);const r=i,s=fN(r),o=Object.getPrototypeOf(r),a=function(i){return Object.assign({},i[m6]||{},n)}(o);(function(i){const{meta:r,inheritedStateClass:s,optionsWithInheritance:o}=i,{children:a,defaults:l,name:c}=o,u="string"==typeof c?c:c&&c.getName()||null;IS.checkCorrectStateName(u),s.hasOwnProperty(cd)&&(r.actions=Object.assign({},r.actions,(s[cd]||{}).actions)),r.children=a,r.defaults=l,r.name=u})({meta:s,inheritedStateClass:o,optionsWithInheritance:a}),r[m6]=a}}function NS(n,...e){return function(t,i){const r=i.toString(),s=`__${r}__selector`,o=function(n,e,t=[]){return"string"==typeof(e=e||function(n){const e=n.length-1;return 36===n.charCodeAt(e)?n.slice(0,e):n}(n))?b6(t.length?[e,...t]:e.split("."),gb.config):e}(r,n,e);Object.defineProperties(t,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function(n){if(!gb.store)throw new Error(qa.SELECT_FACTORY_NOT_CONNECTED());return gb.store.select(n)}(o))}}})}}function _m(n){return(e,t,i)=>{if(!i||null===i.value)throw new Error(qa.SELECTOR_DECORATOR());const s=i.value,o=Owe(n,s,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),a={configurable:!0,get:()=>o};return a.originalFn=s,a}}Yo.\u0275fac=function(e){return new(e||Yo)},Yo.\u0275mod=tn({type:Yo}),Yo.\u0275inj=St({}),Yo.ROOT_OPTIONS=new Ht("ROOT_OPTIONS");const Xo=new Ht("NgValueAccessor");function Dl(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}const qS=new cc(sx);class YEe{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new XEe(e,this.dueTime,this.scheduler))}}class XEe extends v{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(KEe,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function KEe(n){n.debouncedNext()}class QEe{constructor(e){this.total=e}call(e,t){return t.subscribe(new ZEe(e,this.total))}}class ZEe extends v{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function bi(n){return null!=n&&"false"!=`${n}`}function Ya(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function YS(n){return Array.isArray(n)?n:[n]}function bs(n){return null==n?"":"string"==typeof n?n:`${n}px`}function dd(n){return n instanceof gn?n.nativeElement:n}let HN;try{HN="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){HN=!1}let Cb,Xf,GN,Qi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Af(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!HN)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(ke(Xc))},n.\u0275prov=tt({factory:function(){return new n(ke(Xc))},token:n,providedIn:"root"}),n})(),Sb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({}),n})();function vm(n){return function(){if(null==Cb&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Cb=!0}))}finally{Cb=Cb||!1}return Cb}()?n:!!n.capture}function LH(){if(null==Xf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Xf=!1,Xf;if("scrollBehavior"in document.documentElement.style)Xf=!0;else{const n=Element.prototype.scrollTo;Xf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Xf}function KS(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Kf(n){return n.composedPath?n.composedPath()[0]:n.target}let $N=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({factory:function(){return new n},token:n,providedIn:"root"}),n})(),BH=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=dd(t);return new P(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new se,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(ke($N))},n.\u0275prov=tt({factory:function(){return new n(ke($N))},token:n,providedIn:"root"}),n})(),WN=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new ln,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=bi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Ya(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(n,e=qS){return t=>t.lift(new YEe(n,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(Oe(BH),Oe(gn),Oe(pn))},n.\u0275dir=Pt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),QS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:[$N]}),n})(),WH=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===YH(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=YH(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||qH(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(ke(Qi))},n.\u0275prov=tt({factory:function(){return new n(ke(Qi))},token:n,providedIn:"root"}),n})();function qH(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function YH(n){if(!qH(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class yxe{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let i=0;i<t.length;i++)t[i].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]):t[i].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(qr(1)).subscribe(e)}}let XH=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new yxe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(ke(WH),ke(pn),ke(fn))},n.\u0275prov=tt({factory:function(){return new n(ke(WH),ke(pn),ke(fn))},token:n,providedIn:"root"}),n})();function KH(n){return 0===n.offsetX&&0===n.offsetY}function QH(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const ZH=new Ht("cdk-input-modality-detector-options"),xxe={ignoreKeys:[18,17,224,91,16]},wm=vm({passive:!0,capture:!0});let eG=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Fr(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Kf(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(KH(o)?"keyboard":"mouse"),this._mostRecentTarget=Kf(o))},this._onTouchstart=o=>{QH(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Kf(o))},this._options=Object.assign(Object.assign({},xxe),s),this.modalityDetected=this._modality.pipe(function(n){return e=>e.lift(new QEe(n))}(1)),this.modalityChanged=this.modalityDetected.pipe(ld()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,wm),r.addEventListener("mousedown",this._onMousedown,wm),r.addEventListener("touchstart",this._onTouchstart,wm)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,wm),document.removeEventListener("mousedown",this._onMousedown,wm),document.removeEventListener("touchstart",this._onTouchstart,wm))}}return n.\u0275fac=function(t){return new(t||n)(ke(Qi),ke(pn),ke(fn),ke(ZH,8))},n.\u0275prov=tt({factory:function(){return new n(ke(Qi),ke(pn),ke(fn),ke(ZH,8))},token:n,providedIn:"root"}),n})();const iG=new Ht("cdk-focus-monitor-default-options"),e1=vm({passive:!0,capture:!0});let vc=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new se,this._rootNodeFocusAndBlurListener=a=>{const l=Kf(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=dd(t);if(!this._platform.isBrowser||1!==r.nodeType)return sn(null);const s=function(n){if(function(){if(null==GN){const n="undefined"!=typeof document?document.head:null;GN=!(!n||!n.createShadowRoot&&!n.attachShadow)}return GN}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new se,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=dd(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=dd(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,i,r){r?t.classList.add(i):t.classList.remove(i)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){this._toggleClass(t,"cdk-focused",!!i),this._toggleClass(t,"cdk-touch-focused","touch"===i),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(t,"cdk-mouse-focused","mouse"===i),this._toggleClass(t,"cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Kf(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,e1),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,e1)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,e1),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,e1),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(ke(pn),ke(Qi),ke(eG),ke(fn,8),ke(iG,8))},n.\u0275prov=tt({factory:function(){return new n(ke(pn),ke(Qi),ke(eG),ke(fn,8),ke(iG,8))},token:n,providedIn:"root"}),n})();const rG="cdk-high-contrast-black-on-white",sG="cdk-high-contrast-white-on-black",YN="cdk-high-contrast-active";let oG=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(YN),t.remove(rG),t.remove(sG),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(YN),t.add(rG)):2===i&&(t.add(YN),t.add(sG))}}}return n.\u0275fac=function(t){return new(t||n)(ke(Qi),ke(fn))},n.\u0275prov=tt({factory:function(){return new n(ke(Qi),ke(fn))},token:n,providedIn:"root"}),n})();const aG=new Ht("cdk-dir-doc",{providedIn:"root",factory:function(){return Bc(fn)}});let Il=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ln,t){const r=t.documentElement?t.documentElement.dir:null,s=(t.body?t.body.dir:null)||r;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(ke(aG,8))},n.\u0275prov=tt({factory:function(){return new n(ke(aG,8))},token:n,providedIn:"root"}),n})(),Ab=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({}),n})();const lG=new Hu("12.2.5");function t1(...n){return kt(1)(sn(...n))}function Oo(...n){const e=n[n.length-1];return Re(e)?(n.pop(),t=>t1(n,t,e)):t=>t1(n,t)}function Em(n,e){return{type:7,name:n,definitions:e,options:{}}}function fd(n,e=null){return{type:4,styles:e,timings:n}}function ds(n){return{type:6,styles:n,offset:null}}function wc(n,e,t){return{type:0,name:n,styles:e,options:t}}function pd(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function dG(n){Promise.resolve(null).then(n)}class xm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function fG(){return"undefined"!=typeof window&&void 0!==window.document}function KN(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let eP=(n,e)=>!1,tP=(n,e)=>!1,mG=(n,e,t)=>[];const _G=KN();(_G||"undefined"!=typeof Element)&&(eP=fG()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),tP=(()=>{if(_G||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):tP}})(),mG=(n,e,t)=>{let i=[];if(t){const r=n.querySelectorAll(e);for(let s=0;s<r.length;s++)i.push(r[s])}else{const r=n.querySelector(e);r&&i.push(r)}return i});let Qf=null,yG=!1;function nP(n){Qf||(Qf=("undefined"!=typeof document?document.body:null)||{},yG=!!Qf.style&&"WebkitAppearance"in Qf.style);let e=!0;return Qf.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Qf.style,!e&&yG&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Qf.style)),e}const iP=tP,rP=eP,sP=mG;let vG=(()=>{class n{validateStyleProperty(t){return nP(t)}matchesElement(t,i){return iP(t,i)}containsElement(t,i){return rP(t,i)}query(t,i,r){return sP(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new xm(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class n1{}n1.NOOP=new vG;function SG(n,e,t){return t?e+":"+t+";":""}function CG(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=SG(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=SG(0,Bxe(t),n.style[t]));n.setAttribute("style",e)}function pu(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=uP(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),KN()&&CG(n))}function Jf(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=uP(t);n.style[i]=""}),KN()&&CG(n))}const Lxe=/-+([a-z0-9])/g;function uP(n){return n.replace(Lxe,(...e)=>e[1].toUpperCase())}function Bxe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class Tm{constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=Tm.initialStylesByElement.get(e);r||Tm.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&pu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pu(this._element,this._initialStyles),this._endStyles&&(pu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Tm.initialStylesByElement.delete(this._element),this._startStyles&&(Jf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jf(this._element,this._endStyles),this._endStyles=null),pu(this._element,this._initialStyles),this._state=3)}}Tm.initialStylesByElement=new WeakMap;const Qa=new Ht("AnimationModuleType"),c$=new Hu("12.2.5"),s1e=new Ht("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let tp,ji=(()=>{class n{constructor(t,i,r){this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checkIsEnabled(t){return!(!fa()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const i=getComputedStyle(t);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&c$.full!==lG.full&&console.warn("The Angular Material version ("+c$.full+") does not match the Angular CDK version ("+lG.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(ke(oG),ke(s1e,8),ke(fn))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[Ab],Ab]}),n})();function Am(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=bi(e)}}}function Mm(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Ch(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=bi(e)}}}function E1(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ya(t):this.defaultTabIndex}}}try{tp="undefined"!=typeof Intl}catch(n){tp=!1}class y1e{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const g$={enterDuration:225,exitDuration:150},CP=vm({passive:!0}),m$=["mousedown","touchstart"],_$=["mouseup","mouseleave","touchend","touchcancel"];class v1e{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=dd(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},g$),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const h=new y1e(this,u,i);return h.state=0,this._activeRipples.add(h),i.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const f=h===this._mostRecentTransientRipple;h.state=1,!i.persistent&&(!f||!this._isPointerDown)&&h.fadeOut()},c),h}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},g$),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.parentNode.removeChild(i)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=dd(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(m$))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(_$),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=KH(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!QH(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,CP)})})}_removeTriggerEvents(){this._triggerElement&&(m$.forEach(e=>{this._triggerElement.removeEventListener(e,this,CP)}),this._pointerUpEventsRegistered&&_$.forEach(e=>{this._triggerElement.removeEventListener(e,this,CP)}))}}const x1e=new Ht("mat-ripple-global-options");let gu=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new v1e(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(Oe(gn),Oe(pn),Oe(Qi),Oe(x1e,8),Oe(Qa,8))},n.\u0275dir=Pt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&ai("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),Dm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[ji,Sb],ji]}),n})();function gd(n,e,t,i){return Q(t)&&(i=t,t=void 0),i?gd(n,e,t).pipe(be(r=>F(r)?i(...r):i(r))):new P(r=>{x$(n,e,function(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function x$(n,e,t,i,r){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)x$(n[o],e,t,i,r)}i.add(s)}new class extends cc{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends sx{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let F1e=1;const L1e=Promise.resolve(),C1={};function S$(n){return n in C1&&(delete C1[n],!0)}const C$={setImmediate(n){const e=F1e++;return C1[e]=!0,L1e.then(()=>S$(e)&&n()),e},clearImmediate(n){S$(n)}};new class extends cc{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends sx{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=C$.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(C$.clearImmediate(t),e.scheduled=void 0)}});function Im(n){return!!n&&(n instanceof P||"function"==typeof n.lift&&"function"==typeof n.subscribe)}class z1e{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new H1e(e,this.durationSelector))}}class H1e extends Ae{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=L(t,new _t(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function T$(n){return!F(n)&&n-parseFloat(n)+1>=0}function $1e(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}function T1(n,e=qS){return function(n){return function(t){return t.lift(new z1e(n))}}(()=>function(n=0,e,t){let i=-1;return T$(e)?i=Number(e)<1?1:Number(e):Re(e)&&(t=e),Re(t)||(t=qS),new P(r=>{const s=T$(n)?n:+n-t.now();return t.schedule($1e,s,{index:0,period:i,subscriber:r})})}(n,e))}let M$=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Om=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new se,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new P(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(T1(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):sn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ki(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=dd(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>gd(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(ke(pn),ke(Qi),ke(fn,8))},n.\u0275prov=tt({factory:function(){return new n(ke(pn),ke(Qi),ke(fn,8))},token:n,providedIn:"root"}),n})(),Rm=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new se,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(T1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(ke(Qi),ke(pn),ke(fn,8))},n.\u0275prov=tt({factory:function(){return new n(ke(Qi),ke(pn),ke(fn,8))},token:n,providedIn:"root"}),n})();class DP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class M1 extends DP{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Nm extends DP{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class lCe extends DP{constructor(e){super(),this.element=e instanceof gn?e.nativeElement:e}}class D1{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof M1?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Nm?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof lCe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class cCe extends D1{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let np=(()=>{class n extends D1{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new ln,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(Oe(El),Oe(Rs),Oe(fn))},n.\u0275dir=Pt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[En]}),n})();const k$=LH();class fCe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=bs(-this._previousScrollPosition.left),e.style.top=bs(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),k$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),k$&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class pCe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class F${enable(){}disable(){}attach(){}}function IP(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function L$(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class gCe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();IP(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let mCe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new F$,this.close=o=>new pCe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new fCe(this._viewportRuler,this._document),this.reposition=o=>new gCe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(ke(Om),ke(Rm),ke(pn),ke(fn))},n.\u0275prov=tt({factory:function(){return new n(ke(Om),ke(Rm),ke(pn),ke(fn))},token:n,providedIn:"root"}),n})();class O1{constructor(e){if(this.scrollStrategy=new F$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class _Ce{constructor(e,t,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class yCe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let B$=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(ke(fn))},n.\u0275prov=tt({factory:function(){return new n(ke(fn))},token:n,providedIn:"root"}),n})(),bCe=(()=>{class n extends B${constructor(t){super(t),this._keydownListener=i=>{const r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){r[s]._keydownEvents.next(i);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(ke(fn))},n.\u0275prov=tt({factory:function(){return new n(ke(fn))},token:n,providedIn:"root"}),n})(),vCe=(()=>{class n extends B${constructor(t,i){super(t),this._platform=i,this._cursorStyleIsSet=!1,this._clickListener=r=>{const s=Kf(r),o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){const l=o[a];if(!(l._outsidePointerEvents.observers.length<1)&&l.hasAttached()){if(l.overlayElement.contains(s))break;l._outsidePointerEvents.next(r)}}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(ke(fn),ke(Qi))},n.\u0275prov=tt({factory:function(){return new n(ke(fn),ke(Qi))},token:n,providedIn:"root"}),n})();const Th="undefined"!=typeof window?window:{},V$=void 0!==Th.__karma__&&!!Th.__karma__||void 0!==Th.jasmine&&!!Th.jasmine||void 0!==Th.jest&&!!Th.jest||void 0!==Th.Mocha&&!!Th.Mocha;let Ob=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||V$){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].parentNode.removeChild(r[s])}const i=this._document.createElement("div");i.classList.add(t),V$?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(ke(fn),ke(Qi))},n.\u0275prov=tt({factory:function(){return new n(ke(fn),ke(Qi))},token:n,providedIn:"root"}),n})();class wCe{constructor(e,t,i,r,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new se,this._attachments=new se,this._detachments=new se,this._locationChanges=C.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._keydownEvents=new se,this._outsidePointerEvents=new se,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(qr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=bs(this._config.width),e.height=bs(this._config.height),e.minWidth=bs(this._config.minWidth),e.minHeight=bs(this._config.minHeight),e.maxWidth=bs(this._config.maxWidth),e.maxHeight=bs(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(!e)return;let t,i=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",i),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",i)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(e,t,i){const r=e.classList;YS(t).forEach(s=>{s&&(i?r.add(s):r.remove(s))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(gr(Pn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const j$="cdk-overlay-connected-position-bounding-box",ECe=/([A-Za-z%]+)$/;class U${constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new se,this._resizeSubscription=C.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(j$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=[];let s;for(let o of this._preferredPositions){let a=this._getOriginPoint(e,o),l=this._getOverlayPoint(a,t,o),c=this._getOverlayFit(l,t,i,o);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,a);this._canFitWithFlexibleDimensions(c,l,i)?r.push({position:o,origin:a,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(a,o)}):(!s||s.overlayFit.visibleArea<c.visibleArea)&&(s={overlayFit:c,overlayPoint:l,originPoint:a,position:o,overlayRect:t})}if(r.length){let o=null,a=-1;for(const l of r){const c=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);c>a&&(a=c,o=l)}return this._isPushed=!1,void this._applyPosition(o.position,o.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ip(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(j$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let i,r;if("center"==t.originX)i=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,o=this._isRtl()?e.left:e.right;i="start"==t.originX?s:o}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:i,y:r}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=H$(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let f=0-a,g=a+s.height-i.height,m=this._subtractOverflows(s.width,0-o,o+s.width-i.width),A=this._subtractOverflows(s.height,f,g),I=m*A;return{visibleArea:I,isCompletelyWithinViewport:s.width*s.height===I,fitsInViewportVertically:A===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=z$(this._overlayRef.getConfig().minHeight),a=z$(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=H$(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,h=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new yCe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,f;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)f=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;u=2*g,h=e.x-g,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-m/2)}return{top:o,left:h,bottom:a,right:f,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=bs(i.height),r.top=bs(i.top),r.bottom=bs(i.bottom),r.width=bs(i.width),r.left=bs(i.left),r.right=bs(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=bs(s)),o&&(r.maxWidth=bs(o))}this._lastBoundingBoxSize=i,ip(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ip(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ip(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();ip(i,this._getExactOverlayY(t,e,u)),ip(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=bs(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=bs(o.maxWidth):s&&(i.maxWidth="")),ip(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=o,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=bs(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=bs(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:L$(e,i),isOriginOutsideView:IP(e,i),isOverlayClipped:L$(t,i),isOverlayOutsideView:IP(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&YS(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof gn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function ip(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function z$(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(ECe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function H$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class xCe{constructor(e,t,i,r,s,o,a){this._preferredPositions=[],this._positionStrategy=new U$(i,r,s,o,a).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,i,r){const s=new _Ce(e,t,i,r);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const G$="cdk-global-overlay-wrapper";class SCe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(G$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(G$),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let CCe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new SCe}connectedTo(t,i,r){return new xCe(i,r,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new U$(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(ke(Rm),ke(fn),ke(Qi),ke(Ob))},n.\u0275prov=tt({factory:function(){return new n(ke(Rm),ke(fn),ke(Qi),ke(Ob))},token:n,providedIn:"root"}),n})(),TCe=0,Ec=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=f}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new O1(t);return o.direction=o.direction||this._directionality.value,new wCe(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+TCe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(sh)),new cCe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(ke(mCe),ke(Ob),ke(El),ke(CCe),ke(bCe),ke(Hn),ke(pn),ke(fn),ke(Il),ke(kg),ke(vCe))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class rTe{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new PP(e,this.delay,this.scheduler))}}class PP extends v{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,r=e.scheduler,s=e.destination;for(;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const o=Math.max(0,i[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(PP.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new sTe(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(ga.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(ga.createComplete()),this.unsubscribe()}}class sTe{constructor(e,t){this.time=e,this.notification=t}}function a7(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return t=>be(function(n,e){return i=>{let r=i;for(let s=0;s<e;s++){const o=null!=r?r[n[s]]:void 0;if(void 0===o)return;r=o}return r}}(n,e))(t)}function kP(n){return e=>e.lift(new WTe(n))}et(7266);class WTe{constructor(e){this.callback=e}call(e,t){return t.subscribe(new qTe(e,this.callback))}}class qTe extends v{constructor(e,t){super(e),this.add(new C(t))}}class p7{}class g7{}class mu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof mu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new mu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof mu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class YTe{encodeKey(e){return m7(e)}encodeValue(e){return m7(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const KTe=/%(\d[a-f0-9])/gi,QTe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function m7(n){return encodeURIComponent(n).replace(KTe,(e,t)=>{var i;return null!==(i=QTe[t])&&void 0!==i?i:e})}function _7(n){return`${n}`}class Lr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new YTe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Lr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(_7(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(_7(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Zs{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function y7(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function b7(n){return"undefined"!=typeof Blob&&n instanceof Blob}function v7(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Rb{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new mu),this.context||(this.context=new Zs),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Lr,this.urlWithParams=t}serializeBody(){return null===this.body?null:y7(this.body)||b7(this.body)||v7(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Lr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||v7(this.body)?null:b7(this.body)?this.body.type||null:y7(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Lr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const h=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((f,g)=>f.set(g,e.setHeaders[g]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,g)=>f.set(g,e.setParams[g]),u)),new Rb(i,r,o,{params:u,headers:c,context:h,reportProgress:l,responseType:s,withCredentials:a})}}var vs=(()=>((vs=vs||{})[vs.Sent=0]="Sent",vs[vs.UploadProgress=1]="UploadProgress",vs[vs.ResponseHeader=2]="ResponseHeader",vs[vs.DownloadProgress=3]="DownloadProgress",vs[vs.Response=4]="Response",vs[vs.User=5]="User",vs))();class FP{constructor(e,t=200,i="OK"){this.headers=e.headers||new mu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class LP extends FP{constructor(e={}){super(e),this.type=vs.ResponseHeader}clone(e={}){return new LP({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class N1 extends FP{constructor(e={}){super(e),this.type=vs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new N1({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class w7 extends FP{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function BP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let _u=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Rb)s=t;else{let l,c;l=r.headers instanceof mu?r.headers:new mu(r.headers),r.params&&(c=r.params instanceof Lr?r.params:new Lr({fromObject:r.params})),s=new Rb(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=sn(s).pipe(function(n,e){return H(n,e,1)}(l=>this.handler.handle(l)));if(t instanceof Rb||"events"===r.observe)return o;const a=o.pipe(Ki(l=>l instanceof N1));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(be(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(be(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Lr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,BP(r,i))}post(t,i,r={}){return this.request("POST",t,BP(r,i))}put(t,i,r={}){return this.request("PUT",t,BP(r,i))}}return n.\u0275fac=function(t){return new(t||n)(ke(p7))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class E7{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const x7=new Ht("HTTP_INTERCEPTORS");let eAe=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const tAe=/^\)\]\}',?\n/;let S7=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new P(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((g,m)=>r.setRequestHeader(g,m.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=1223===r.status?204:r.status,m=r.statusText||"OK",A=new mu(r.getAllResponseHeaders()),I=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new LP({headers:A,status:g,statusText:m,url:I}),o},l=()=>{let{headers:g,status:m,statusText:A,url:I}=a(),G=null;204!==m&&(G=void 0===r.response?r.responseText:r.response),0===m&&(m=G?200:0);let k=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof G){const oe=G;G=G.replace(tAe,"");try{G=""!==G?JSON.parse(G):null}catch(we){G=oe,k&&(k=!1,G={error:we,text:G})}}k?(i.next(new N1({body:G,headers:g,status:m,statusText:A,url:I||void 0})),i.complete()):i.error(new w7({error:G,headers:g,status:m,statusText:A,url:I||void 0}))},c=g=>{const{url:m}=a(),A=new w7({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:m||void 0});i.error(A)};let u=!1;const h=g=>{u||(i.next(a()),u=!0);let m={type:vs.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),"text"===t.responseType&&!!r.responseText&&(m.partialText=r.responseText),i.next(m)},f=g=>{let m={type:vs.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),i.next(m)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",h),null!==s&&r.upload&&r.upload.addEventListener("progress",f)),r.send(s),i.next({type:vs.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",h),null!==s&&r.upload&&r.upload.removeEventListener("progress",f)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(ke(aV))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const VP=new Ht("XSRF_COOKIE_NAME"),jP=new Ht("XSRF_HEADER_NAME");class C7{}let iAe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=XB(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(ke(fn),ke(Xc),ke(VP))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),UP=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(C7),ke(jP))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),rAe=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(x7,[]);this.chain=i.reduceRight((r,s)=>new E7(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(g7),ke(Hn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),sAe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:UP,useClass:eAe}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:VP,useValue:t.cookieName}:[],t.headerName?{provide:jP,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:[UP,{provide:x7,useExisting:UP,multi:!0},{provide:C7,useClass:iAe},{provide:VP,useValue:"XSRF-TOKEN"},{provide:jP,useValue:"X-XSRF-TOKEN"}]}),n})(),T7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:[_u,{provide:p7,useClass:rAe},S7,{provide:g7,useExisting:S7}],imports:[[sAe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const oAe=["*"];function A7(n){return Error(`Unable to find icon with the name "${n}"`)}function M7(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function D7(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class rp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let P1=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new rp(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(si.HTML,r);if(!o)throw D7(r);return this._addSvgIconConfig(t,i,new rp("",o,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new rp(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(si.HTML,i);if(!s)throw D7(i);return this._addSvgIconSetConfig(t,new rp("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(si.RESOURCE_URL,t);if(!i)throw M7(t);const r=this._cachedIconsByUrl.get(i);return r?sn(k1(r)):this._loadSvgIconFromConfig(new rp(t,null)).pipe(cr(s=>this._cachedIconsByUrl.set(i,s)),be(s=>k1(s)))}getNamedSvgIcon(t,i=""){const r=I7(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):Fg(A7(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?sn(k1(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(be(i=>k1(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?sn(r):fb(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(bc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(si.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),sn(null)})))).pipe(be(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw A7(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(cr(i=>t.svgText=i),be(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?sn(null):this._fetchIcon(t).pipe(cr(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString("<svg></svg>");return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString("<svg></svg>"),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,o=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(si.RESOURCE_URL,r);if(!a)throw M7(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(kP(()=>this._inProgressUrlFetches.delete(a)),ws());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(I7(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return cAe(s)?new rp(s.url,null,s.options):new rp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(ke(_u,8),ke(Mf),ke(fn,8),ke(la))},n.\u0275prov=tt({factory:function(){return new n(ke(_u,8),ke(Mf),ke(fn,8),ke(la))},token:n,providedIn:"root"}),n})();function k1(n){return n.cloneNode(!0)}function I7(n,e){return n+":"+e}function cAe(n){return!(!n.url||!n.options)}const uAe=Mm(class{constructor(n){this._elementRef=n}}),dAe=new Ht("mat-icon-location",{providedIn:"root",factory:function(){const n=Bc(fn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),O7=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],pAe=O7.map(n=>`[${n}]`).join(", "),gAe=/^url\(['"]?#(.*?)['"]?\)$/;let Fm=(()=>{class n extends uAe{constructor(t,i,r,s,o){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=C.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=bi(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=t.querySelectorAll("style");for(let s=0;s<i.length;s++)i[s].textContent+=" ";const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&t.removeChild(r)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(pAe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)O7.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(gAe):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(qr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(Oe(gn),Oe(P1),yo("aria-hidden"),Oe(dAe),Oe(la))},n.\u0275cmp=rn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(Ii("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),ai("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[En],ngContentSelectors:oAe,decls:1,vars:0,template:function(t,i){1&t&&(Hr(),oi(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})();function TAe(n,e){}class HP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const AAe={dialogContainer:Em("dialogContainer",[wc("void, exit",ds({opacity:0,transform:"scale(0.7)"})),wc("enter",ds({transform:"none"})),pd("* => enter",fd("150ms cubic-bezier(0, 0, 0.2, 1)",ds({transform:"none",opacity:1}))),pd("* => void, * => exit",fd("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",ds({opacity:0})))])};let MAe=(()=>{class n extends D1{constructor(t,i,r,s,o,a){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._focusMonitor=a,this._animationStateChanged=new ln,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=l=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(l)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=KS(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=KS())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=KS();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(Oe(gn),Oe(XH),Oe(Mr),Oe(fn,8),Oe(HP),Oe(vc))},n.\u0275dir=Pt({type:n,viewQuery:function(t,i){if(1&t&&hr(np,7),2&t){let r;Gn(r=$n())&&(i._portalOutlet=r.first)}},features:[En]}),n})(),DAe=(()=>{class n extends MAe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zi(n)))(i||n)}}(),n.\u0275cmp=rn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&uE("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(qc("id",i._id),Ii("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),fE("@dialogContainer",i._state))},features:[En],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&wi(0,TAe,0,0,"ng-template",0)},directives:[np],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[AAe.dialogContainer]}}),n})(),IAe=0;class F1{constructor(e,t,i="mat-dialog-"+IAe++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new se,this._afterClosed=new se,this._beforeClosed=new se,this._state=0,t._id=i,t._animationStateChanged.pipe(Ki(r=>"opened"===r.state),qr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Ki(r=>"closed"===r.state),qr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Ki(r=>27===r.keyCode&&!this.disableClose&&!Dl(r))).subscribe(r=>{r.preventDefault(),GP(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():GP(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ki(t=>"closing"===t.state),qr(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function GP(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const P7=new Ht("MatDialogData"),OAe=new Ht("mat-dialog-default-options"),k7=new Ht("mat-dialog-scroll-strategy");let PAe=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new se,this._afterOpenedAtThisLevel=new se,this._ariaHiddenElements=new Map,this.afterAllClosed=function(n){return new P(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?Ye(t):b0()).subscribe(e)})}(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Oo(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){(i=function(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new HP)).id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new O1({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=Hn.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:HP,useValue:i}]}),o=new M1(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof Go)i.attachTemplatePortal(new Nm(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),l=i.attachComponentPortal(new M1(t,s.viewContainerRef,a));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(Il,null,xn.Optional))&&o.push({provide:Il,useValue:{value:t.direction,change:sn()}}),Hn.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){return new(t||n)(Oe(Ec),Oe(Hn),Oe(void 0),Oe(void 0),Oe(Ob),Oe(void 0),Oe(Du),Oe(Du),Oe(Ht))},n.\u0275dir=Pt({type:n}),n})(),Pb=(()=>{class n extends PAe{constructor(t,i,r,s,o,a,l){super(t,i,s,a,l,o,F1,DAe,P7)}}return n.\u0275fac=function(t){return new(t||n)(ke(Ec),ke(Hn),ke(kg,8),ke(OAe,8),ke(k7),ke(n,12),ke(Ob))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),FAe=0,F7=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+FAe++}ngOnInit(){this._dialogRef||(this._dialogRef=function(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(Oe(F1,8),Oe(gn),Oe(Pb))},n.\u0275dir=Pt({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&qc("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),L7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pt({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})();const WP=new Ht("CdkAccordion");let VAe=0,UAe=(()=>{class n{constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=C.EMPTY,this.closed=new ln,this.opened=new ln,this.destroyed=new ln,this.expandedChange=new ln,this.id="cdk-accordion-child-"+VAe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=bi(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=bi(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(Oe(WP,12),Oe(Mr),Oe(M$))},n.\u0275dir=Pt({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Vn([{provide:WP,useValue:void 0}])]}),n})();const HAe=["body"];function GAe(n,e){}const $Ae=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],WAe=["mat-expansion-panel-header","*","mat-action-row"];function qAe(n,e){1&n&&ni(0,"span",2),2&n&&Jt("@indicatorRotate",_i()._getExpandedState())}const YAe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],XAe=["mat-panel-title","mat-panel-description","*"],qP=new Ht("MAT_ACCORDION"),V7="225ms cubic-bezier(0.4,0.0,0.2,1)",j7={indicatorRotate:Em("indicatorRotate",[wc("collapsed, void",ds({transform:"rotate(0deg)"})),wc("expanded",ds({transform:"rotate(180deg)"})),pd("expanded <=> collapsed, void => collapsed",fd(V7))]),bodyExpansion:Em("bodyExpansion",[wc("collapsed, void",ds({height:"0px",visibility:"hidden"})),wc("expanded",ds({height:"*",visibility:"visible"})),pd("expanded <=> collapsed, void => collapsed",fd(V7))])};let KAe=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(Oe(Go))},n.\u0275dir=Pt({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),QAe=0;const U7=new Ht("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let z7=(()=>{class n extends UAe{constructor(t,i,r,s,o,a,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new ln,this.afterCollapse=new ln,this._inputChanges=new se,this._headerId="mat-expansion-panel-header-"+QAe++,this._bodyAnimationDone=new se,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(ld((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=bi(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Oo(null),Ki(()=>this.expanded&&!this._portal),qr(1)).subscribe(()=>{this._portal=new Nm(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(Oe(qP,12),Oe(Mr),Oe(M$),Oe(Rs),Oe(fn),Oe(Qa,8),Oe(U7,8))},n.\u0275cmp=rn({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&function(n,e,t,i){const r=Si();if(r.firstCreatePass){const s=as();O3(r,new M3(e,t,i),s.index),function(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}I3(r,jt(),t)}(r,KAe,5),2&t){let s;Gn(s=$n())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&hr(HAe,5),2&t){let r;Gn(r=$n())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&ai("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Vn([{provide:qP,useValue:void 0}]),En,Fi],ngContentSelectors:WAe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(Hr($Ae),oi(0),wt(1,"div",0,1),Tn("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),wt(3,"div",2),oi(4,1),wi(5,GAe,0,0,"ng-template",3),Et(),oi(6,2),Et()),2&t&&(zt(1),Jt("@bodyExpansion",i._getExpandedState())("id",i.id),Ii("aria-labelledby",i._headerId),zt(4),Jt("cdkPortalOutlet",i._portal))},directives:[np],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[j7.bodyExpansion]},changeDetection:0}),n})();class JAe{}const eMe=E1(JAe);let H7=(()=>{class n extends eMe{constructor(t,i,r,s,o,a,l){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=C.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(Ki(u=>!(!u.hideToggle&&!u.togglePosition))):Qc;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Pn(t.opened,t.closed,c,t._inputChanges.pipe(Ki(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Ki(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Dl(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(Oe(z7,1),Oe(gn),Oe(vc),Oe(Mr),Oe(U7,8),Oe(Qa,8),yo("tabindex"))},n.\u0275cmp=rn({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&Tn("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(Ii("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),zy("height",i._getHeaderHeight()),ai("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[En],ngContentSelectors:XAe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(Hr(YAe),wt(0,"span",0),oi(1),oi(2,1),oi(3,2),Et(),wi(4,qAe,1,1,"span",1)),2&t&&(zt(4),Jt("ngIf",i._showToggle()))},directives:[ac],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}\n'],encapsulation:2,data:{animation:[j7.indicatorRotate]},changeDetection:0}),n})();var G7=et(5478);Object.create(Error.prototype);const sMe=["*"];var B1=(()=>(function(n){n.LineHighlight="line-highlight",n.LineNumbers="line-numbers"}(B1||(B1={})),B1))();class aMe{}const W7=new Ht("SECURITY_CONTEXT");let YP=(()=>{class n{constructor(t,i,r,s,o){this.platform=t,this.securityContext=i,this.http=r,this.sanitizer=o,this.initialMarkedOptions={renderer:new G7.Renderer},this.options=s}get options(){return this._options}set options(t){this._options=Object.assign(Object.assign({},this.initialMarkedOptions),t)}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}compile(t,i=!1,r=!1,s=this.options){const o=this.trimIndentation(t),a=i?this.decodeHtml(o):o,l=r?this.renderEmoji(a):a,c=G7.parse(l,s);return this.sanitizer.sanitize(this.securityContext,c)||""}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(be(i=>this.handleExtension(t,i)))}highlight(t){if(Af(this.platform)&&"undefined"!=typeof Prism){t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}}renderKatex(t,i){if(!Af(this.platform))return t;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return t.replace(/\$([^\s][^$]*?[^\s])\$/gm,(r,s)=>katex.renderToString(s,i))}decodeHtml(t){if(!Af(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}handleExtension(t,i){const r=t?t.split("?")[0].split(".").splice(-1).join():"";return"md"!==r?"```"+r+"\n"+i+"\n```":i}renderEmoji(t){if(!Af(this.platform))return t;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}}return n.\u0275fac=function(t){return new(t||n)(ke(Xc),ke(W7),ke(_u,8),ke(aMe,8),ke(Mf))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),q7=(()=>{class n{constructor(t,i){this.element=t,this.markdownService=i,this.error=new ln,this.load=new ln,this.ready=new ln,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(t,i=!1){let r=this.markdownService.compile(t,i,this.emoji);r=this.katex?this.markdownService.renderKatex(r,this.katexOptions):r,this.element.nativeElement.innerHTML=r,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(t=>{this.render(t),this.load.emit(t)},t=>this.error.emit(t))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,B1.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const l=this.toLispCase(o);r.item(s).setAttribute(l,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}}return n.\u0275fac=function(t){return new(t||n)(Oe(gn),Oe(YP))},n.\u0275cmp=rn({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start"},outputs:{error:"error",load:"load",ready:"ready"},features:[Fi],ngContentSelectors:sMe,decls:1,vars:0,template:function(t,i){1&t&&(Hr(),oi(0))},encapsulation:2}),n})();function Y7(n,e,t){return t?Y7(n,e).pipe(be(i=>F(i)?t(...i):t(i))):new P(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o);let s;try{s=n(r)}catch(o){return void i.error(o)}if(Q(e))return()=>e(r,s)})}function XP(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new pMe(n,t))}}class pMe{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new gMe(e,this.observables,this.project))}}class gMe extends n6{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++)this.add(i6(this,t[s],void 0,s))}notifyNext(e,t,i){this.values[i]=t;const r=this.toRespond;if(r.length>0){const s=r.indexOf(i);-1!==s&&r.splice(s,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class mMe{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new _Me(e,this.accumulator,this.seed,this.hasSeed))}}class _Me extends v{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}class vMe{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new wMe(e,this.predicate))}}class wMe extends v{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const EMe=["youtubeContainer"];let Q7=(()=>{class n{constructor(t,i){this._ngZone=t,this._youtubeContainer=new se,this._destroyed=new se,this._playerChanges=new Fr(void 0),this._videoId=new Fr(void 0),this._height=new Fr(390),this._width=new Fr(640),this._startSeconds=new Fr(void 0),this._endSeconds=new Fr(void 0),this._suggestedQuality=new Fr(void 0),this._playerVars=new Fr(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=Af(i)}get videoId(){return this._videoId.value}set videoId(t){this._videoId.next(t)}get height(){return this._height.value}set height(t){this._height.next(t||390)}get width(){return this._width.value}set width(t){this._width.next(t||640)}set startSeconds(t){this._startSeconds.next(t)}set endSeconds(t){this._endSeconds.next(t)}set suggestedQuality(t){this._suggestedQuality.next(t)}get playerVars(){return this._playerVars.value}set playerVars(t){this._playerVars.next(t)}ngOnInit(){if(!this._isBrowser)return;let t=sn(!0);if(!window.YT||!window.YT.Player){const r=new se;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>r.next(!0))},t=r.pipe(qr(1),Oo(!1))}const i=function(n,e,t,i,r,s,o){const a=yc([e,s]).pipe(XP(yc([i,r])),be(([l,c])=>{const[u,h]=l,[f,g]=c;return u?{videoId:u,playerVars:h,width:f,height:g}:void 0}));return yc([n,a,sn(o)]).pipe(function(n){return $(function(...n){let e=null;return"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&F(n[0])&&(n=n[0].slice()),t=>t.lift.call(Ye([t,...n]),new s6(e))}(n),function(n){return e=>e.lift(new vMe(n))}(([e,t])=>!t),be(([e])=>e))}(t),function(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new mMe(n,e,t))}}(MMe,void 0),ld())}(this._youtubeContainer,this._videoId,t,this._width,this._height,this._playerVars,this._ngZone).pipe(cr(r=>{this._playerChanges.next(r)}),H(e=>e?Z7(e)?sn(e):new P(t=>{let i=!1,r=!1;const s=o=>{r=!0,i||(o.target.removeEventListener("onReady",s),t.next(o.target))};return e.addEventListener("onReady",s),()=>{i=!0,r||(r=>{Z7(r)||r.destroy()})(e)}}).pipe(qr(1),Oo(void 0)):sn(void 0)),gr(this._destroyed),xa(new se));i.subscribe(r=>{this._player=r,r&&this._pendingPlayerState&&this._initializePlayer(r,this._pendingPlayerState),this._pendingPlayerState=void 0}),function(n,e,t){yc([n,e,t]).subscribe(([i,r,s])=>i&&i.setSize(r,s))}(i,this._width,this._height),function(n,e){yc([n,e]).subscribe(([t,i])=>t&&i&&t.setPlaybackQuality(i))}(i,this._suggestedQuality),function(n,e,t,i,r,s){const o=yc([t,i]).pipe(be(([u,h])=>({startSeconds:u,endSeconds:h}))),a=o.pipe(QP(n,u=>!!u&&!function(n){const e=n.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(u))),l=e.pipe(QP(n,(u,h)=>!!u&&u.videoId!==h));Pn(n.pipe(QP(yc([e,o]),([u,h],f)=>!(!f||u==f.videoId&&!h.startSeconds&&!h.endSeconds))),l,a).pipe(XP(yc([n,e,o,r])),be(([u,h])=>h),gr(s)).subscribe(([u,h,f,g])=>{!h||!u||(u.videoId=h,u.cueVideoById(Object.assign({videoId:h,suggestedQuality:g},f)))})}(i,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),i.connect()}createEventsBoundInZone(){return{}}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(t,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:l}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=s&&t.setPlaybackRate(s),null!=o&&t.setVolume(o),null!=a&&(a?t.mute():t.unMute()),null!=l&&t.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(t){return this._playerChanges.pipe(is(i=>i?Y7(r=>{i.addEventListener(t,r)},r=>{try{i.removeEventListener&&i.removeEventListener(t,r)}catch(s){}}):sn()),i=>new P(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),gr(this._destroyed))}}return n.\u0275fac=function(t){return new(t||n)(Oe(pn),Oe(Xc))},n.\u0275cmp=rn({type:n,selectors:[["youtube-player"]],viewQuery:function(t,i){if(1&t&&hr(EMe,5),2&t){let r;Gn(r=$n())&&(i.youtubeContainer=r.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(t,i){1&t&&ni(0,"div",null,0)},encapsulation:2,changeDetection:0}),n})();function MMe(n,[e,t,i]){if(n&&t&&n.playerVars!==t.playerVars)n.destroy();else{if(!t)return void(n&&n.destroy());if(n)return n}const r=i.runOutsideAngular(()=>new YT.Player(e,t));return r.videoId=t.videoId,r.playerVars=t.playerVars,r}function Z7(n){return"getPlayerStatus"in n}function QP(n,e){return $(XP(n),Ki(([t,i])=>e(i,t)),be(([t])=>t))}let BMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pt({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-card-sm-image"]}),n})();function Fb(n){return!0===n}function Za(n){return null==n}function Ja(n){return!Za(n)}function ZP(n){return Boolean(n)}function n9(n){return Za(n)?n:JSON.parse(JSON.stringify(n))}const j1=n=>{const t=n instanceof Date;if("object"!=typeof n||null===n||t)return n;Object.freeze(n);const r="function"==typeof n,s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(o=>{s.call(n,o)&&(!r||"caller"!==o&&"callee"!==o&&"arguments"!==o)&&null!==n[o]&&("object"==typeof n[o]||"function"==typeof n[o])&&!Object.isFrozen(n[o])&&j1(n[o])}),n};function i9(n){return Ja(n)&&"object"==typeof n&&function(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const o9="NGXS_DATA_META",e2="NGXS_META",a9="NGXS_ARGUMENT_REGISTRY_META";let l9=(()=>{class n{constructor(t){this.sequence$=new Fr(0),this.subscription=null,t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var t;this.sequence$.next(0),null===(t=this.subscription)||void 0===t||t.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(ke(hu,8))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();function Lb(n){return n[o9]}let el=(()=>{class n{constructor(t,i,r){n.store=t.get(hu),n.ngZone=t.get(pn),n.factory=i,n.context=r,n.computed=t.get(l9)}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.\u0275fac=function(t){return new(t||n)(ke(Hn),ke(a6),ke(o6))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();class hs{constructor(){hs.statesCachedMeta.clear()}static createStateContext(e){return el.context.createStateContext(e)}static ensureMappedState(e){if(Za(el.factory)||Za(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Ja(e.name)?hs.statesCachedMeta.get(e.name):null)||hs.ensureMeta(e)}static getRepositoryByInstance(e){var t;const r=null!==(t=Lb(hs.getStateClassByInstance(e)))&&void 0!==t?t:null;if(Za(r))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return r}static getStateClassByInstance(e){return(null!=e?e:{}).constructor}static clearMetaByInstance(e){const t=hs.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(let s=0;s<r.length;s++){const o=null==t?void 0:t.getPayloadTypeByIndex(s);Ja(o)&&(i[o]=r[s])}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=hs.createPayload(t,i);return new(function(n){return class{constructor(t){t&&Object.keys(t).forEach(i=>{this[i]=t[i]})}static get type(){return n}}}(e.type))(r)}static ensureMeta(e){var t;const i=Ja(e.name)?null===(t=el.factory.states)||void 0===t?void 0:t.find(r=>r.name===e.name):null;return Ja(i)&&Ja(e.name)&&hs.statesCachedMeta.set(e.name,i),i}}hs.statesCachedMeta=new Map,hs.\u0275fac=function(e){return new(e||hs)},hs.\u0275prov=tt({token:hs,factory:hs.\u0275fac}),new Df(1);class sDe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Ja(null==e?void 0:e.constructor)?e.constructor.name:e} to PlainObject`)}}function c9(n){var e;return null!==(e=n.NGXS_OPTIONS_META)&&void 0!==e?e:{name:""}}function u9(n){var e;const t=c9(n),i=null!==(e=t.children)&&void 0!==e?e:[],s=n9(void 0===t.defaults?{}:t.defaults);if(i.length){if(i9(s))return function(n,e){return e.reduce((t,i)=>{const r=c9(i);if(function(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=u9(i),t},null!=n?n:{})}(s,i);throw new sDe(s)}return s}function h9(n){var e;return null!==(e=n.__NGXS_COMPUTED_OPTION__)&&void 0!==e?e:null}function f9(){var n,e;return null!==(e=null===(n=null==el?void 0:el.computed)||void 0===n?void 0:n.sequenceValue)&&void 0!==e?e:0}function cDe(n){let e=!1;return Im(n)&&(e=!0),e}function t2(n){return n[a9]}class uDe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class dDe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){var t;return null!==(t=this.payloadMap.get(e))&&void 0!==t?t:null}getArgumentNameByIndex(e){var t;return null!==(t=this.argumentMap.get(e))&&void 0!==t?t:null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(ZP(this.argumentMap.has(e))||ZP(this.payloadMap.has(e)))throw new uDe(e,t)}}function _De(n){return{enumerable:!0,configurable:!0,get(){const e=Lb(n),t=hs.ensureMappedState(e.stateMeta);return hs.createStateContext(t)}}}function p9(){return(n,e,t)=>{!function(n,e){if(!function(n,e){var t;let i=n,r=!1;if(i9(i))for(;null!==i;){if(Fb(null==i?void 0:i.hasOwnProperty(e))){r=!!(null===(t=Object.getOwnPropertyDescriptor(i,e))||void 0===t?void 0:t.get);break}i=Object.getPrototypeOf(i)}return r}(n,null==e?void 0:e.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const s=function(n){return Za(h9(n))&&Object.defineProperties(n,{__NGXS_COMPUTED_OPTION__:{enumerable:!0,configurable:!0,value:new WeakMap}}),h9(n)}(this),o=null==s?void 0:s.get(i);if(Fb(null==o?void 0:o.isObservable))return null==o?void 0:o.value;if(Za(o)||o.sequenceId!==f9()){s.delete(i);const l=i.apply(this,r);return s.set(i,{value:l,sequenceId:f9(),isObservable:cDe(l)}),l}return o.value},t}}const xDe={cancelUncompleted:!0,insideZone:!1};function n2(n=xDe){return(e,t,i)=>{!function(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(e,i);const r=i.value,s=t.toString();return i.value=function(...o){const a=this;let l=null;const c=hs.getRepositoryByInstance(a),u=c.operations;let h=u[s];const f=c.stateMeta,g=t2(r);if(Za(h)){const k=function(n){var e,t,i;return null!==(i=null===(t=null===(e=(n+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1))||void 0===e?void 0:e[0])||void 0===t?void 0:t.replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean))&&void 0!==i?i:[]}(r),oe=function(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let s="";for(let o=0;o<t.length;o++)Ja(null==r?void 0:r.getArgumentNameByIndex(o))?s+=null==r?void 0:r.getArgumentNameByIndex(o):Ja(null==r?void 0:r.getPayloadTypeByIndex(o))?s+=null==r?void 0:r.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==t.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:f.path,methodName:s,argumentsNames:k,argumentRegistry:g});h=u[s]={type:oe,options:{cancelUncompleted:n.cancelUncompleted}},f.actions[h.type]=[{type:h.type,options:h.options,fn:h.type}]}hs.ensureMappedState(f).instance[h.type]=()=>{var k;return Fb(n.insideZone)?null===(k=el.ngZone)||void 0===k||k.run(()=>{l=r.apply(a,o)}):l=r.apply(a,o),Im(l)?sn(null).pipe(be(()=>l)):l};const I=hs.createAction(h,o,g),G=el.store.dispatch(I);return Im(l)?function(n,e){return fb([n,e]).pipe(be(t=>t.pop()))}(G,l):l},i}}function g9(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function(n,e){const t=n[e];return Za(t2(t))&&Object.defineProperties(t,{[a9]:{enumerable:!0,configurable:!0,value:new dDe}}),t2(t)})(e,t).createPayloadType(r,t,i)}}function CDe(){return n=>{const e=function(n){if(function(n){return!ZP(n)}(n.hasOwnProperty(e2))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,e2,{value:e})}return function(n){var e;return null===(e=n)||void 0===e?void 0:e[e2]}(n)}(n);if(Za(e.name))throw new Error("@StateRepository should be add before decorator @State");!function(n,e){(function(n){var e;const t=null!==(e=Lb(n))&&void 0!==e?e:null;return(Za(t)||(null==t?void 0:t.stateClass)!==n)&&function(n){Object.defineProperty(n,o9,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),Lb(n)}(n)).stateMeta=e}(n,e),function(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>n9(t)},context:_De(n)})}(n,e,u9(n)),function(n){var e,t;const i=Lb(n),r=null!==(t=null===(e=null==i?void 0:i.stateMeta)||void 0===e?void 0:e.name)&&void 0!==t?t:null;if(Ja(r)){const s=`__${r}__selector`;Object.defineProperties(n.prototype,{[s]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Ja(this[s]))return this[s];if(Za(el.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[s]=el.store.select(n).pipe(be(o=>fa()?j1(o):o),Wa({refCount:!0,bufferSize:1})),this[s]}}})}}(n)}}let ADe=(()=>{class n{constructor(){this.browserStorageEvents$=new se,this.isInitialised=!1,this.isBootstrapped=!1,this._dirty=!0}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){var r;this.dirty&&this.isBootstrapped&&(this.dirty=!1,null===(r=this.ngxsDataDoCheck)||void 0===r||r.call(this))}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){var i;this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,null===(i=this.ngxsDataDoCheck)||void 0===i||i.call(this))}markAsDirtyAfterReset(){var i;this.dirty=!0,null===(i=this.ngxsDataAfterReset)||void 0===i||i.call(this)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),MDe=(()=>{class n extends ADe{get snapshot(){return function(n){return fa()?j1(n):n}(this.getState())}get ctx(){return function(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},n),{getState:()=>fa()?j1(n.getState()):n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}})}(this.context)}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zi(n)))(i||n)}}(),n.\u0275prov=tt({token:n,factory:n.\u0275fac}),Ei([p9(),uc("design:type",Object),uc("design:paramtypes",[])],n.prototype,"snapshot",null),Ei([n2(),EV(0,g9("patchValue")),uc("design:type",Function),uc("design:paramtypes",[Object]),uc("design:returntype",void 0)],n.prototype,"patchState",null),Ei([n2(),EV(0,g9("stateValue")),uc("design:type",Function),uc("design:paramtypes",[Object]),uc("design:returntype",void 0)],n.prototype,"setState",null),Ei([n2(),uc("design:type",Function),uc("design:paramtypes",[]),uc("design:returntype",void 0)],n.prototype,"reset",null),n})(),mW=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Pt({type:n,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),n})();const zm=new Ht("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),T2=new Ht("ngx-window",{providedIn:"root",factory:()=>function(n){return Af(n)?window:null}(Bc(Xc))}),jOe=new Ht("ngx-data-layer",{providedIn:"root",factory:()=>function(n){return n?n.dataLayer=n.dataLayer||[]:null}(Bc(T2))}),A2=new Ht("ngx-gtag-fn",{providedIn:"root",factory:()=>function(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Bc(T2),Bc(jOe))});let qb=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){(this.settings.enableTracing||fa())&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,s,o){try{const a=new Map;i&&a.set("event_category",i),r&&a.set("event_label",r),s&&a.set("value",s),void 0!==o&&a.set("interaction",o);const l=this.toKeyValue(a);l?this.gtag("event",t,l):this.gtag("event",t)}catch(a){this.throw(a)}}pageView(t,i,r,s){try{const o=new Map([["page_path",t]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,i,r,s,o){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(ke(zm),ke(fn),ke(A2))},n.\u0275prov=tt({factory:function(){return new n(ke(zm),ke(fn),ke(A2))},token:n,providedIn:"root"}),n})(),_W=(()=>{class n{constructor(t,i,r,s){this.gaCategoryDirective=t,this.gaService=i,this.settings=r,this.el=s,this.gaBind="click"}set gaBind(t){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=t,this.bindSubscription=gd(this.el.nativeElement,t).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(t){this.throw(t)}}throw(t){(fa()||this.settings.enableTracing)&&console&&console.warn&&console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(mW,8),Oe(qb),Oe(zm),Oe(gn))},n.\u0275dir=Pt({type:n,selectors:[["","gaEvent",""]],inputs:{gaBind:"gaBind",gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent"},exportAs:["gaEvent"]}),n})();const zOe={provide:Ef,multi:!0,useFactory:function(n,e,t){return()=>Bi(this,void 0,void 0,function*(){var i;if(!n.trackingCode)return void(fa()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(fa()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||fa()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=null!==(i=null==n?void 0:n.initCommands)&&void 0!==i?i:[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)e(o.command,...o.values);const r=t.createElement("script");r.async=!0,r.src=n.uri,n.nonce&&r.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(r)})},deps:[zm,A2,fn]};new Ht("ngx-google-analytics-routing-settings",{factory:()=>({})});let rC=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:zm,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},zOe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[]]}),n})(),oC=(()=>{class n{constructor(){this.consent="not-set",this.consentChange=new Df(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(t){this.consent!==t&&(this.consent=t,this.consentChange.next(t))}unsetConsent(){this.setConsent("not-set")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),tRe=(()=>{class n{constructor(t,i,{trackingCode:r}){this.window=i,this.subscriptions=new C,this.token=r,this.subscriptions.add(t.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(t){this.window&&(this.window[`ga-disable-${this.token}`]=t)}}return n.\u0275fac=function(t){return new(t||n)(ke(oC),ke(T2),ke(zm))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const nRe=new Ht("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),CW=[oC,tRe,(()=>{class n{constructor(t,i){this.key=i,this.subscriptions=new C;try{this.storage=localStorage}catch(r){}t.setConsent(this.loadConsent()),this.subscriptions.add(t.consentChange.subscribe(r=>this.saveConsent(r)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){var t,i;const r=null===(i=null===(t=this.storage)||void 0===t?void 0:t.getItem)||void 0===i?void 0:i.call(t,this.key);if(null==r)return"not-set";const s=r.trim().toLowerCase();switch(s){case"given":case"rescinded":return s;default:return"not-set"}}saveConsent(t){var i,r;null===(r=null===(i=this.storage)||void 0===i?void 0:i.setItem)||void 0===r||r.call(i,this.key,t)}}return n.\u0275fac=function(t){return new(t||n)(ke(oC),ke(nRe))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})()];function rRe(n){return Object.entries(n).reduce((e,[t,i])=>(null!=i&&(e[t]=`${i}`),e),{})}let oRe=(()=>{class n{static forRoot(t){const{providers:i=[]}=rC.forRoot(t.gaToken,function(n){const{appName:e,projectName:t,developmentMode:i}=n;return[{command:"set",values:[rRe({appName:e,projectName:t,developmentMode:i})]}]}(t));return{ngModule:n,providers:i}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:[...CW,{provide:Ef,multi:!0,useFactory:()=>()=>{},deps:CW}],imports:[[rC]]}),n})();const uRe=(n,e)=>JSON.stringify(n)===JSON.stringify(e),dRe=n=>n.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),xc={storageStrategy:class extends class{}{constructor(){super(...arguments),this.cachePairs=[]}add(e,t,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,t){Object.assign(this.cachePairs[e],t)}update(e,t){Object.assign(this.cachePairs[e],t)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},hRe=new se;function Sc(n={}){return function(e,t,i){const r=n.cacheKey||e.constructor.name+"#"+t,s=i.value;if(i&&i.value){let o=n.storageStrategy?new n.storageStrategy:new xc.storageStrategy;const a=[];n.cacheModifier&&n.cacheModifier.subscribe(u=>o.addMany(u(o.getAll(r,this)),r,this)),Pn(hRe.asObservable(),n.cacheBusterObserver?n.cacheBusterObserver:b0()).subscribe(u=>{o.removeAll(r,this),a.length=0}),n.cacheResolver=n.cacheResolver||xc.cacheResolver||uRe,n.cacheHasher=n.cacheHasher||xc.cacheHasher||dRe,i.value=function(...u){const h=o.getAll(r,this);let f=n.cacheHasher(u),g=h.find(A=>n.cacheResolver(A.parameters,f));const m=a.find(A=>n.cacheResolver(A.parameters,f));if((n.maxAge||xc.maxAge)&&g&&g.created&&((new Date).getTime()-new Date(g.created).getTime()>(n.maxAge||xc.maxAge)?(o.remove?o.remove(h.indexOf(g),g,r,this):o.removeAtIndex(h.indexOf(g),r,this),g=null):(n.slidingExpiration||xc.slidingExpiration)&&(g.created=new Date,o.update?o.update(h.indexOf(g),g,r,this):o.updateAtIndex(h.indexOf(g),g,r,this))),g){const A=sn(g.response);return n.async?A.pipe(function(n,e=qS){const i=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-e.now():Math.abs(n);return r=>r.lift(new rTe(i,e))}(0)):A}if(m)return m.response;{const A=s.call(this,...u).pipe(kP(()=>{const I=a.find(G=>n.cacheResolver(G.parameters,f));a.splice(a.indexOf(I),1)}),cr(I=>{(!n.shouldCacheDecider||n.shouldCacheDecider(I))&&((!(n.maxCacheCount||xc.maxCacheCount)||1===(n.maxCacheCount||xc.maxCacheCount)||(n.maxCacheCount||xc.maxCacheCount)&&(n.maxCacheCount||xc.maxCacheCount)<h.length+1)&&(o.remove?o.remove(0,h[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:f,response:I,created:n.maxAge||xc.maxAge?new Date:null},r,this))}),function(n,e,t,i){const s=new Df(1,void 0,i);return o=>xa(()=>s,undefined)(o)}(),Yn());return a.push({parameters:f,response:A,created:new Date}),A}}}return i}}class fRe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const TW=new Ht("basePath");class Yb{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}}let AW=(()=>{class n{constructor(t,i,r){this.httpClient=t,this.basePath="/v1",this.defaultHeaders=new mu,this.configuration=new Yb,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new fRe}addToHttpParams(t,i,r){return this.addToHttpParamsRecursive(t,i,r)}addToHttpParamsRecursive(t,i,r){if(null==i)return t;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>t=this.addToHttpParamsRecursive(t,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");t=t.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>t=this.addToHttpParamsRecursive(t,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");t=t.append(r,i)}return t}aggregateResults(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.providers,m=t.sex,A=t.spatial,I=t.technologies,G=t.token;let k=new Lr({encoder:this.encoder});null!=o&&(k=this.addToHttpParams(k,o,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=l&&(k=this.addToHttpParams(k,l,"bmi")),null!=c&&(k=this.addToHttpParams(k,c,"bmi-range")),null!=u&&(k=this.addToHttpParams(k,u,"cache")),h&&h.forEach(qe=>{k=this.addToHttpParams(k,qe,"ontology-terms")}),f&&f.forEach(qe=>{k=this.addToHttpParams(k,qe,"cell-type-terms")}),g&&g.forEach(qe=>{k=this.addToHttpParams(k,qe,"providers")}),null!=m&&(k=this.addToHttpParams(k,m,"sex")),A&&A.forEach(qe=>{k=this.addToHttpParams(k,qe,"spatial")}),I&&I.forEach(qe=>{k=this.addToHttpParams(k,qe,"technologies")}),null!=G&&(k=this.addToHttpParams(k,G,"token"));let oe=this.defaultHeaders,we=s&&s.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(oe=oe.set("Accept",we));let Be=s&&s.context;void 0===Be&&(Be=new Zs);let Ue="json";return we&&(Ue=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:Be,params:k,responseType:Ue,withCredentials:this.configuration.withCredentials,headers:oe,observe:i,reportProgress:r})}cellTypeTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.providers,m=t.sex,A=t.spatial,I=t.technologies,G=t.token;let k=new Lr({encoder:this.encoder});null!=o&&(k=this.addToHttpParams(k,o,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=l&&(k=this.addToHttpParams(k,l,"bmi")),null!=c&&(k=this.addToHttpParams(k,c,"bmi-range")),null!=u&&(k=this.addToHttpParams(k,u,"cache")),h&&h.forEach(qe=>{k=this.addToHttpParams(k,qe,"ontology-terms")}),f&&f.forEach(qe=>{k=this.addToHttpParams(k,qe,"cell-type-terms")}),g&&g.forEach(qe=>{k=this.addToHttpParams(k,qe,"providers")}),null!=m&&(k=this.addToHttpParams(k,m,"sex")),A&&A.forEach(qe=>{k=this.addToHttpParams(k,qe,"spatial")}),I&&I.forEach(qe=>{k=this.addToHttpParams(k,qe,"technologies")}),null!=G&&(k=this.addToHttpParams(k,G,"token"));let oe=this.defaultHeaders,we=s&&s.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(oe=oe.set("Accept",we));let Be=s&&s.context;void 0===Be&&(Be=new Zs);let Ue="json";return we&&(Ue=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:Be,params:k,responseType:Ue,withCredentials:this.configuration.withCredentials,headers:oe,observe:i,reportProgress:r})}cellTypeTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Lr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Zs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}dbStatus(t,i="body",r=!1,s){const o=t.token;let a=new Lr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"token"));let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(l=l.set("Accept",c));let u=s&&s.context;void 0===u&&(u=new Zs);let h="json";return c&&(h=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}getSpatialPlacement(t,i="body",r=!1,s){const o=t.getSpatialPlacementRequest;if(null==o)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(a=a.set("Accept",l));let c=s&&s.context;void 0===c&&(c=new Zs);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return l&&(f=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,o,{context:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(t,i="body",r=!1,s){const o=t.cache;let a=new Lr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(l=l.set("Accept",c));let u=s&&s.context;void 0===u&&(u=new Zs);let h="json";return c&&(h=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}hubmapRuiLocations(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Lr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Zs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}ontologyTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.providers,m=t.sex,A=t.spatial,I=t.technologies,G=t.token;let k=new Lr({encoder:this.encoder});null!=o&&(k=this.addToHttpParams(k,o,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=l&&(k=this.addToHttpParams(k,l,"bmi")),null!=c&&(k=this.addToHttpParams(k,c,"bmi-range")),null!=u&&(k=this.addToHttpParams(k,u,"cache")),h&&h.forEach(qe=>{k=this.addToHttpParams(k,qe,"ontology-terms")}),f&&f.forEach(qe=>{k=this.addToHttpParams(k,qe,"cell-type-terms")}),g&&g.forEach(qe=>{k=this.addToHttpParams(k,qe,"providers")}),null!=m&&(k=this.addToHttpParams(k,m,"sex")),A&&A.forEach(qe=>{k=this.addToHttpParams(k,qe,"spatial")}),I&&I.forEach(qe=>{k=this.addToHttpParams(k,qe,"technologies")}),null!=G&&(k=this.addToHttpParams(k,G,"token"));let oe=this.defaultHeaders,we=s&&s.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(oe=oe.set("Accept",we));let Be=s&&s.context;void 0===Be&&(Be=new Zs);let Ue="json";return we&&(Ue=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:Be,params:k,responseType:Ue,withCredentials:this.configuration.withCredentials,headers:oe,observe:i,reportProgress:r})}ontologyTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Lr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Zs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}providerNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Lr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Zs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}referenceOrganScene(t,i="body",r=!1,s){const o=t.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=t.age,l=t.ageRange,c=t.bmi,u=t.bmiRange,h=t.cache,f=t.ontologyTerms,g=t.cellTypeTerms,m=t.providers,A=t.sex,I=t.spatial,G=t.technologies,k=t.token;let oe=new Lr({encoder:this.encoder});null!=a&&(oe=this.addToHttpParams(oe,a,"age")),null!=l&&(oe=this.addToHttpParams(oe,l,"age-range")),null!=c&&(oe=this.addToHttpParams(oe,c,"bmi")),null!=u&&(oe=this.addToHttpParams(oe,u,"bmi-range")),null!=h&&(oe=this.addToHttpParams(oe,h,"cache")),f&&f.forEach(bt=>{oe=this.addToHttpParams(oe,bt,"ontology-terms")}),g&&g.forEach(bt=>{oe=this.addToHttpParams(oe,bt,"cell-type-terms")}),null!=o&&(oe=this.addToHttpParams(oe,o,"organ-iri")),m&&m.forEach(bt=>{oe=this.addToHttpParams(oe,bt,"providers")}),null!=A&&(oe=this.addToHttpParams(oe,A,"sex")),I&&I.forEach(bt=>{oe=this.addToHttpParams(oe,bt,"spatial")}),G&&G.forEach(bt=>{oe=this.addToHttpParams(oe,bt,"technologies")}),null!=k&&(oe=this.addToHttpParams(oe,k,"token"));let we=this.defaultHeaders,Be=s&&s.httpHeaderAccept;void 0===Be&&(Be=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Be&&(we=we.set("Accept",Be));let Ue=s&&s.context;void 0===Ue&&(Ue=new Zs);let qe="json";return Be&&(qe=Be.startsWith("text")?"text":this.configuration.isJsonMime(Be)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:Ue,params:oe,responseType:qe,withCredentials:this.configuration.withCredentials,headers:we,observe:i,reportProgress:r})}referenceOrgans(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Lr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Zs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}scene(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.providers,m=t.sex,A=t.spatial,I=t.technologies,G=t.token;let k=new Lr({encoder:this.encoder});null!=o&&(k=this.addToHttpParams(k,o,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=l&&(k=this.addToHttpParams(k,l,"bmi")),null!=c&&(k=this.addToHttpParams(k,c,"bmi-range")),null!=u&&(k=this.addToHttpParams(k,u,"cache")),h&&h.forEach(qe=>{k=this.addToHttpParams(k,qe,"ontology-terms")}),f&&f.forEach(qe=>{k=this.addToHttpParams(k,qe,"cell-type-terms")}),g&&g.forEach(qe=>{k=this.addToHttpParams(k,qe,"providers")}),null!=m&&(k=this.addToHttpParams(k,m,"sex")),A&&A.forEach(qe=>{k=this.addToHttpParams(k,qe,"spatial")}),I&&I.forEach(qe=>{k=this.addToHttpParams(k,qe,"technologies")}),null!=G&&(k=this.addToHttpParams(k,G,"token"));let oe=this.defaultHeaders,we=s&&s.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(oe=oe.set("Accept",we));let Be=s&&s.context;void 0===Be&&(Be=new Zs);let Ue="json";return we&&(Ue=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:Be,params:k,responseType:Ue,withCredentials:this.configuration.withCredentials,headers:oe,observe:i,reportProgress:r})}sparql(t,i="body",r=!1,s){const o=t.query;if(null==o)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=t.token,l=t.format;let c=new Lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"query")),null!=a&&(c=this.addToHttpParams(c,a,"token")),null!=l&&(c=this.addToHttpParams(c,l,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new Zs);let g="json";return h&&(g=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:c,responseType:g,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}sparqlPost(t,i="body",r=!1,s){const o=t.sparqlQueryRequest;if(null==o)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=t.token,l=t.format;let c=new Lr({encoder:this.encoder});null!=a&&(c=this.addToHttpParams(c,a,"token")),null!=l&&(c=this.addToHttpParams(c,l,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new Zs);const m=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==m&&(u=u.set("Content-Type",m));let A="json";return h&&(A=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,o,{context:f,params:c,responseType:A,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}technologyNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Lr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(c=c.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new Zs);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}tissueBlocks(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,g=t.providers,m=t.sex,A=t.spatial,I=t.technologies,G=t.token;let k=new Lr({encoder:this.encoder});null!=o&&(k=this.addToHttpParams(k,o,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=l&&(k=this.addToHttpParams(k,l,"bmi")),null!=c&&(k=this.addToHttpParams(k,c,"bmi-range")),null!=u&&(k=this.addToHttpParams(k,u,"cache")),h&&h.forEach(qe=>{k=this.addToHttpParams(k,qe,"ontology-terms")}),f&&f.forEach(qe=>{k=this.addToHttpParams(k,qe,"cell-type-terms")}),g&&g.forEach(qe=>{k=this.addToHttpParams(k,qe,"providers")}),null!=m&&(k=this.addToHttpParams(k,m,"sex")),A&&A.forEach(qe=>{k=this.addToHttpParams(k,qe,"spatial")}),I&&I.forEach(qe=>{k=this.addToHttpParams(k,qe,"technologies")}),null!=G&&(k=this.addToHttpParams(k,G,"token"));let oe=this.defaultHeaders,we=s&&s.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(oe=oe.set("Accept",we));let Be=s&&s.context;void 0===Be&&(Be=new Zs);let Ue="json";return we&&(Ue=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:Be,params:k,responseType:Ue,withCredentials:this.configuration.withCredentials,headers:oe,observe:i,reportProgress:r})}}return n.\u0275fac=function(t){return new(t||n)(ke(_u),ke(TW,8),ke(Yb,8))},n.\u0275prov=tt({factory:function(){return new n(ke(_u),ke(TW,8),ke(Yb,8))},token:n,providedIn:"root"}),n})(),pRe=(()=>{class n{constructor(t,i){if(t)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}static forRoot(t){return{ngModule:n,providers:[{provide:Yb,useFactory:t}]}}}return n.\u0275fac=function(t){return new(t||n)(ke(n,12),ke(_u,8))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:[],imports:[[]]}),n})();function vu(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let D2;function Cc(){return D2||(D2=function(n,e){const t=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise(t=>{const i=()=>indexedDB.databases().finally(t);e=setInterval(i,100),i()}).finally(()=>clearInterval(e))}().then(()=>{const i=indexedDB.open("keyval-store");return i.onupgradeneeded=()=>i.result.createObjectStore(e),vu(i)});return(i,r)=>t.then(s=>r(s.transaction(e,i).objectStore(e)))}(0,"keyval")),D2}function MW(n,e=Cc()){return e("readonly",t=>vu(t.get(n)))}var vRe=et(8104),wRe=et.n(vRe),Un=et(1440);const aC="Unknown Euler angle order",Hm=.99999;class Zi extends mx{static get ZYX(){return 0}static get YXZ(){return 1}static get XZY(){return 2}static get ZXY(){return 3}static get YZX(){return 4}static get XYZ(){return 5}static get RollPitchYaw(){return 0}static get DefaultOrder(){return Zi.ZYX}static get RotationOrders(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}static rotationOrder(e){return Zi.RotationOrders[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,i=0,r=Zi.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,i,r)}fromQuaternion(e){const[t,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,l=2*(t*i+s*r);let c=-2*(t*r-s*i);c=c>1?1:c,c=c<-1?-1:c;const f=Math.atan2(2*(i*r+s*t),-2*(t*t+o)+1),g=Math.asin(c),m=Math.atan2(l,a);return new Zi(f,g,m,Zi.RollPitchYaw)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,i=0,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function(n){return n>=0&&n<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=nr(e)}get y(){return this[1]}set y(e){this[1]=nr(e)}get z(){return this[2]}set z(e){this[2]=nr(e)}get alpha(){return this[0]}set alpha(e){this[0]=nr(e)}get beta(){return this[1]}set beta(e){this[1]=nr(e)}get gamma(){return this[2]}set gamma(e){this[2]=nr(e)}get phi(){return this[0]}set phi(e){this[0]=nr(e)}get theta(){return this[1]}set theta(e){this[1]=nr(e)}get psi(){return this[2]}set psi(e){this[2]=nr(e)}get roll(){return this[0]}set roll(e){this[0]=nr(e)}get pitch(){return this[1]}set pitch(e){this[1]=nr(e)}get yaw(){return this[2]}set yaw(e){this[2]=nr(e)}get order(){return this[3]}set order(e){this[3]=function(n){if(n<0&&n>=6)throw new Error(aC);return n}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,i){return this.set(e,t,i,Zi.ZYX)}fromRotationMatrix(e,t=Zi.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new _R;switch(this[4]){case Zi.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Zi.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Zi.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Zi.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Zi.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Zi.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(aC)}}_fromRotationMatrix(e,t=Zi.DefaultOrder){const i=e.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],u=i[2],h=i[6],f=i[10];switch(t=t||this[3]){case Zi.XYZ:this[1]=Math.asin(Ua(o,-1,1)),Math.abs(o)<Hm?(this[0]=Math.atan2(-c,f),this[2]=Math.atan2(-s,r)):(this[0]=Math.atan2(h,l),this[2]=0);break;case Zi.YXZ:this[0]=Math.asin(-Ua(c,-1,1)),Math.abs(c)<Hm?(this[1]=Math.atan2(o,f),this[2]=Math.atan2(a,l)):(this[1]=Math.atan2(-u,r),this[2]=0);break;case Zi.ZXY:this[0]=Math.asin(Ua(h,-1,1)),Math.abs(h)<Hm?(this[1]=Math.atan2(-u,f),this[2]=Math.atan2(-s,l)):(this[1]=0,this[2]=Math.atan2(a,r));break;case Zi.ZYX:this[1]=Math.asin(-Ua(u,-1,1)),Math.abs(u)<Hm?(this[0]=Math.atan2(h,f),this[2]=Math.atan2(a,r)):(this[0]=0,this[2]=Math.atan2(-s,l));break;case Zi.YZX:this[2]=Math.asin(Ua(a,-1,1)),Math.abs(a)<Hm?(this[0]=Math.atan2(-c,l),this[1]=Math.atan2(-u,r)):(this[0]=0,this[1]=Math.atan2(o,f));break;case Zi.XZY:this[2]=Math.asin(-Ua(s,-1,1)),Math.abs(s)<Hm?(this[0]=Math.atan2(h,l),this[1]=Math.atan2(o,r)):(this[0]=Math.atan2(-c,f),this[1]=0);break;default:throw new Error(aC)}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),l=Math.cos(s),c=Math.sin(i),u=Math.sin(r),h=Math.sin(s);switch(this[3]){case Zi.XYZ:{const f=o*l,g=o*h,m=c*l,A=c*h;t[0]=a*l,t[4]=-a*h,t[8]=u,t[1]=g+m*u,t[5]=f-A*u,t[9]=-c*a,t[2]=A-f*u,t[6]=m+g*u,t[10]=o*a;break}case Zi.YXZ:{const f=a*l,g=a*h,m=u*l,A=u*h;t[0]=f+A*c,t[4]=m*c-g,t[8]=o*u,t[1]=o*h,t[5]=o*l,t[9]=-c,t[2]=g*c-m,t[6]=A+f*c,t[10]=o*a;break}case Zi.ZXY:{const f=a*l,g=a*h,m=u*l,A=u*h;t[0]=f-A*c,t[4]=-o*h,t[8]=m+g*c,t[1]=g+m*c,t[5]=o*l,t[9]=A-f*c,t[2]=-o*u,t[6]=c,t[10]=o*a;break}case Zi.ZYX:{const f=o*l,g=o*h,m=c*l,A=c*h;t[0]=a*l,t[4]=m*u-g,t[8]=f*u+A,t[1]=a*h,t[5]=A*u+f,t[9]=g*u-m,t[2]=-u,t[6]=c*a,t[10]=o*a;break}case Zi.YZX:{const f=o*a,g=o*u,m=c*a,A=c*u;t[0]=a*l,t[4]=A-f*h,t[8]=m*h+g,t[1]=h,t[5]=o*l,t[9]=-c*l,t[2]=-u*l,t[6]=g*h+m,t[10]=f-A*h;break}case Zi.XZY:{const f=o*a,g=o*u,m=c*a,A=c*u;t[0]=a*l,t[4]=-h,t[8]=u*l,t[1]=f*h+A,t[5]=o*l,t[9]=g*h-m,t[2]=m*h-g,t[6]=c*l,t[10]=A*h+f;break}default:throw new Error(aC)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new _R(e*r*s-t*i*o,e*i*o+t*r*s,t*i*s-e*r*o,e*i*s+t*r*o)}}var lC,SRe=et(698),CRe=et(7445),TRe=et.n(CRe),mr=et(3815),ARe=new Uint8Array(16);function MRe(){if(!lC&&!(lC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lC(ARe)}const DRe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ORe=function(n){return"string"==typeof n&&DRe.test(n)};for(var co=[],O2=0;O2<256;++O2)co.push((O2+256).toString(16).substr(1));const kRe=function(n,e,t){var i=(n=n||{}).random||(n.rng||MRe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(var r=0;r<16;++r)e[t+r]=i[r];return e}return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(co[n[e+0]]+co[n[e+1]]+co[n[e+2]]+co[n[e+3]]+"-"+co[n[e+4]]+co[n[e+5]]+"-"+co[n[e+6]]+co[n[e+7]]+"-"+co[n[e+8]]+co[n[e+9]]+"-"+co[n[e+10]]+co[n[e+11]]+co[n[e+12]]+co[n[e+13]]+co[n[e+14]]+co[n[e+15]]).toLowerCase();if(!ORe(t))throw TypeError("Stringified UUID is invalid");return t}(i)};var cC=et(1609);const Gm=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Rr=(Math,Math,{});function VRe(n,{precision:e=Rr.precision||4}={}){return n=function(n){return Math.round(n/Rr.EPSILON)*Rr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Mh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Xb(n,e,t){const i=Rr.EPSILON;t&&(Rr.EPSILON=t);try{if(n===e)return!0;if(Mh(n)&&Mh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Xb(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Rr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Rr.EPSILON=i}}function Tc(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}Rr.EPSILON=1e-12,Rr.debug=!1,Rr.precision=4,Rr.printTypes=!1,Rr.printDegrees=!1,Rr.printRowMajor=!0;class R2 extends(function(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Tc(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:Mh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Rr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+VRe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Xb(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Rr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function uo(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function DW(n,e,t=""){if(Rr.debug&&!function(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}const IW={};function N2(n,e){IW[n]||(IW[n]=!0,console.warn("".concat(n," has been removed in version ").concat(e,", see upgrade guide for more information")))}class qRe extends R2{get ELEMENTS(){return Tc(!1),0}copy(e){return Tc(!1),this}get x(){return this[0]}set x(e){this[0]=uo(e)}get y(){return this[1]}set y(e){this[1]=uo(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return uo(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return uo(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Tc(e>=0&&e<this.ELEMENTS,"index is out of range"),uo(this[e])}setComponent(e,t){return Tc(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}const P2=[0,0,0],OW={};class Nn extends qRe{static get ZERO(){return OW.ZERO=OW.ZERO||Object.freeze(new Nn(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Mh(e)?this.copy(e):(Rr.debug&&(uo(e),uo(t),uo(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Rr.debug&&(uo(e.x),uo(e.y),uo(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=uo(e)}angle(e){return Aj(this,e)}cross(e){return D0(this,this,e),this.check()}rotateX({radians:e,origin:t=P2}){return Sj(this,this,t,e),this.check()}rotateY({radians:e,origin:t=P2}){return Cj(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=P2}){return Tj(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return vI(this,this,e),this.check()}transformAsVector(e){return function(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o}(this,this,e),this.check()}transformByMatrix3(e){return wI(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return xj(this,this,e),this.check()}}new Nn,new Nn;const Kb=new Nn,PW=new Nn;class k2{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new Nn,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=Kb.from(t),this.center=(new Nn).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new k2(this.center,this.radius)}union(e){const t=this.center,i=this.radius,s=e.radius,o=Kb.copy(e.center).subtract(t),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const l=.5*(i+a+s);return PW.copy(o).scale((-i+l)/a).add(t),this.center.copy(PW),this.radius=l,this}expand(e){const t=(e=Kb.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function(n,e){var s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(s,o,a),n[2]=Math.hypot(l,c,u),n}(Kb,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=Kb.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?Gm.OUTSIDE:s<i?Gm.INTERSECTING:Gm.INSIDE}}class ZRe extends R2{get ELEMENTS(){return Tc(!1),0}get RANK(){return Tc(!1),0}toString(){let e="[";if(Rr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=uo(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}const kW=Object.freeze([1,0,0,0,1,0,0,0,1]),JRe=Object.freeze([0,0,0,0,0,0,0,0,0]),eNe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),$m={};class Zo extends ZRe{static get IDENTITY(){return $m.IDENTITY=$m.IDENTITY||Object.freeze(new Zo(kW)),$m.IDENTITY}static get ZERO(){return $m.ZERO=$m.ZERO||Object.freeze(new Zo(JRe)),$m.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return eNe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,i,r,s,o,a,l,c){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this.check()}setRowMajor(e,t,i,r,s,o,a,l,c){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=s,this[5]=l,this[6]=i,this[7]=o,this[8]=c,this.check()}determinant(){return function(n){var r=n[3],s=n[4],o=n[5],a=n[6],l=n[7],c=n[8];return n[0]*(c*s-o*l)+n[1]*(-c*r+o*a)+n[2]*(l*r-s*a)}(this)}identity(){return this.copy(kW)}fromQuaternion(e){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,l=r+r,c=t*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*l,A=s*o,I=s*a,G=s*l;n[0]=1-h-m,n[3]=u-G,n[6]=f+I,n[1]=u+G,n[4]=1-c-m,n[7]=g-A,n[2]=f-I,n[5]=g+A,n[8]=1-c-h}(this,e),this.check()}transpose(){return function(n,e){if(n===e){var t=e[1],i=e[2],r=e[5];n[1]=e[3],n[2]=e[6],n[3]=t,n[5]=e[7],n[6]=i,n[7]=r}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8]}(this,this),this.check()}invert(){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l,m=t*h+i*f+r*g;m&&(n[0]=h*(m=1/m),n[1]=(-u*i+r*c)*m,n[2]=(a*i-r*o)*m,n[3]=f*m,n[4]=(u*t-r*l)*m,n[5]=(-a*t+r*s)*m,n[6]=g*m,n[7]=(-c*t+i*l)*m,n[8]=(o*t-i*s)*m)}(this,this),this.check()}multiplyLeft(e){return n5(this,e,this),this.check()}multiplyRight(e){return n5(this,this,e),this.check()}rotate(e){return function(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=Math.sin(t),g=Math.cos(t);n[0]=g*i+f*o,n[1]=g*r+f*a,n[2]=g*s+f*l,n[3]=g*o-f*i,n[4]=g*a-f*r,n[5]=g*l-f*s,n[6]=c,n[7]=u,n[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?i5(this,this,e):i5(this,this,[e,e,e]),this.check()}translate(e){return function(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=t[0],g=t[1];n[0]=i,n[1]=r,n[2]=s,n[3]=o,n[4]=a,n[5]=l,n[6]=f*i+g*o+c,n[7]=f*r+g*a+u,n[8]=f*s+g*l+h}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}(t||[-0,-0],e,this);break;case 3:t=wI(t||[-0,-0,-0],e,this);break;case 4:t=function(n,e,t){const i=e[0],r=e[1],s=e[2];return n[0]=t[0]*i+t[3]*r+t[6]*s,n[1]=t[1]*i+t[4]*r+t[7]*s,n[2]=t[2]*i+t[5]*r+t[8]*s,n[3]=e[3],n}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return DW(t,e.length),t}transformVector(e,t){return N2("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return N2("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return N2("Matrix3.transformVector"),this.transform(e,t)}}const tNe=[0,0,0,1];class FW extends R2{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return pR(this,e),this.check()}identity(){return s5(this),this.check()}fromAxisRotation(e,t){return fR(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=uo(e)}get y(){return this[1]}set y(e){this[1]=uo(e)}get z(){return this[2]}set z(e){this[2]=uo(e)}get w(){return this[3]}set w(e){this[3]=uo(e)}len(){return p5(this)}lengthSquared(){return g5(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return mR(this,e)}rotationTo(e,t){return _5(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return h5(this,this,e),this.check()}calculateW(){return c5(this,this),this.check()}conjugate(){return d5(this,this),this.check()}invert(){return u5(this,this),this.check()}lerp(e,t,i){return f5(this,e,t,i),this.check()}multiplyRight(e,t){return Tc(!t),rS(this,this,e),this.check()}multiplyLeft(e,t){return Tc(!t),rS(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return o5(this,this,e),this.check()}rotateY(e){return a5(this,this,e),this.check()}rotateZ(e){return l5(this,this,e),this.check()}scale(e){return gR(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=tNe,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return nb(this,e,t,i),this.check()}transformVector4(e,t=e){return RU(t,e,this),DW(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const nNe=new Nn,iNe=new Nn,uC=new Nn,dC=new Nn,hC=new Nn,rNe=new Nn,sNe=new Nn;class F2{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new Nn).from(e),this.halfAxes=new Zo(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new Nn(e).len(),new Nn(t).len(),new Nn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new Nn(e).normalize(),s=new Nn(t).normalize(),o=new Nn(i).normalize();return(new FW).fromMatrix3(new Zo([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,t,i){const r=new FW(i),s=(new Zo).fromQuaternion(r);return s[0]=s[0]*t[0],s[1]=s[1]*t[0],s[2]=s[2]*t[0],s[3]=s[3]*t[1],s[4]=s[4]*t[1],s[5]=s[5]*t[1],s[6]=s[6]*t[2],s[7]=s[7]*t[2],s[8]=s[8]*t[2],this.center=(new Nn).from(e),this.halfAxes=s,this}clone(){return new F2(this.center,this.halfAxes)}equals(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new k2){const t=this.halfAxes,i=t.getColumn(0,uC),r=t.getColumn(1,dC),s=t.getColumn(2,hC),o=nNe.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const t=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,l=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),c=i.dot(t)+e.distance;return c<=-l?Gm.OUTSIDE:c>=l?Gm.INSIDE:Gm.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=iNe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,uC),s=i.getColumn(1,dC),o=i.getColumn(2,hC),a=r.magnitude(),l=s.magnitude(),c=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,u=0;return h=Math.abs(t.dot(r))-a,h>0&&(u+=h*h),h=Math.abs(t.dot(s))-l,h>0&&(u+=h*h),h=Math.abs(t.dot(o))-c,h>0&&(u+=h*h),u}computePlaneDistances(e,t,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,l=a.getColumn(0,uC),c=a.getColumn(1,dC),u=a.getColumn(2,hC),h=rNe.copy(l).add(c).add(u).add(o),f=sNe.copy(h).subtract(e);let g=t.dot(f);return r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).add(c).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).subtract(c).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(l).subtract(c).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).add(c).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).add(c).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).subtract(c).add(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(l).subtract(c).subtract(u),f.copy(h).subtract(e),g=t.dot(f),r=Math.min(g,r),s=Math.max(g,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,uC);t.transformAsPoint(e);const i=this.halfAxes.getColumn(1,dC);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,hC);return r.transformAsPoint(e),this.halfAxes=new Zo([...t,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const LW=new Nn,BW=new Nn;class L2{constructor(e=[0,0,1],t=0){this.normal=new Nn,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Tc(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=LW.from(e),this.normal.from(t).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,t,i,r){return this.normal.set(e,t,i),Tc(Xb(this.normal.len(),1)),this.distance=r,this}clone(e){return new L2(this.normal,this.distance)}equals(e){return Xb(this.distance,e.distance)&&Xb(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=BW.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,t)}projectPointOntoPlane(e,t=[0,0,0]){e=LW.from(e);const i=this.getPointDistance(e),r=BW.copy(this.normal).scale(i);return e.subtract(r).to(t)}}function*H2(n,e,t){for(const[i,r]of Object.entries(t))for(const s of(0,Un.readQuads)(n,e,i,null,null)){const o="Literal"===s.object.termType?(0,cC.fromRdf)(s.object):s.object.id;yield[r,o]}}function dp(n,e,t,i){const r={"@id":e,"@type":t};for(const[s,o]of Object.entries(i))for(const a of(0,Un.readQuads)(n,r["@id"],s,null,null)){const l="Literal"===a.object.termType?(0,cC.fromRdf)(a.object):a.object.id;r[o]=l}return r}new Nn([1,0,0]),new Nn([0,1,0]),new Nn([0,0,1]),new Nn,new Nn,new L2(new Nn(1,0,0),0),new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,new Nn,Math,new Zo,new Zo,new Zo,new Zo,new Zo,new Nn,new Nn,new Nn,new Nn,new Nn,new Zo,new Zo,new Zo;const ir=Un.Util.prefixes({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Un.DataFactory),zW={x:ir("rdf"),type:ir("rdf")("type")},dn=(ir("rdfs"),ir("rdfs")("label"),ir("rdfs")("comment"),ir("rdfs")("isDefinedBy"),ir("rdfs")("seeAlso"),ir("ccf")),vi={id:ir("ccf")("has_registration_location"),label:ir("rdfs")("label"),description:ir("rdfs")("comment"),link:dn("url"),sex:dn("sex"),age:dn("age"),bmi:dn("bmi"),Male:Un.DataFactory.literal("Male"),Female:Un.DataFactory.literal("Female"),consortiumName:dn("consortium_name"),providerName:dn("tissue_provider_name"),providerUUID:dn("tissue_provider_uuid"),donor:dn("comes_from"),sections:dn("subdivided_into_sections"),datasets:dn("generates_dataset"),sampleType:dn("sample_type"),TissueBlock:Un.DataFactory.literal("Tissue Block"),TissueSection:Un.DataFactory.literal("Tissue Section"),NonStandard:Un.DataFactory.literal("Non-standard"),sectionCount:dn("section_count"),sectionSize:dn("section_size"),sectionUnits:dn("section_size_unit"),sectionNumber:dn("section_number"),spatialEntity:dn("has_registration_location"),ontologyTerms:dn("has_ontology_term"),cellTypeTerms:dn("has_cell_type_term"),technology:dn("technology"),thumbnail:dn("thumbnail")},ki={x:dn,base:ir("base"),ontologyNode:{label:dn("ccf_pref_label"),parent:dn("ccf_part_of"),children:dn("ccf_part_of"),rui_rank:dn("rui_rank"),synonymLabels:Un.DataFactory.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:dn("ccf_part_of"),ct_is_a:dn("ccf_ct_isa"),located_in:dn("ccf_located_in"),characterizes:dn("ccf_characterizes")},spatial:{Female:ir("base")("VHFemale"),Male:ir("base")("VHMale"),BothSexes:ir("base")("VHBothSexes"),FemaleOrgans:ir("base")("VHFemaleOrgans"),MaleOrgans:ir("base")("VHMaleOrgans")},SpatialObjectReference:dn("spatial_object_reference"),SpatialEntity:dn("spatial_entity"),SpatialPlacement:dn("spatial_placement"),spatialObjectReference:{file:dn("file_url"),file_format:dn("file_format"),file_subpath:dn("file_subpath")},extractionSet:{label:ir("rdfs")("label"),rui_rank:dn("rui_rank")},spatialEntity:{label:ir("rdfs")("label"),description:ir("rdfs")("comment"),creator:ir("dcterms")("creator"),creator_first_name:dn("creator_first_name"),creator_last_name:dn("creator_last_name"),creator_orcid:dn("creator_orcid"),creation_date:ir("dcterms")("created"),updated_date:dn("updated_date"),ccf_annotations:dn("collides_with"),representation_of:dn("representation_of"),reference_organ:dn("has_reference_organ"),extraction_set_for:dn("extraction_set_for"),extraction_set:dn("has_extraction_set"),sex:dn("organ_owner_sex"),side:dn("organ_side"),rui_rank:dn("rui_rank"),slice_thickness:dn("slice_thickness"),slice_count:dn("slice_count"),x_dimension:dn("x_dimension"),y_dimension:dn("y_dimension"),z_dimension:dn("z_dimension"),dimension_units:dn("dimension_unit"),object:dn("has_object_reference")},spatialPlacement:{source:dn("placement_for"),target:dn("placement_relative_to"),placement_date:ir("dcterms")("created"),x_scaling:dn("x_scaling"),y_scaling:dn("y_scaling"),z_scaling:dn("z_scaling"),scaling_units:dn("scaling_unit"),x_rotation:dn("x_rotation"),y_rotation:dn("y_rotation"),z_rotation:dn("z_rotation"),w_rotation:dn("theta_rotation"),rotation_order:dn("rotation_order"),rotation_units:dn("rotation_unit"),x_translation:dn("x_translation"),y_translation:dn("y_translation"),z_translation:dn("z_translation"),translation_units:dn("translation_unit")}},di={x:ir("uberon"),body:ir("uberon")("0013702")},FNe={x:ir("cl"),cell:ir("cl")("0000000")},Zb={x:ir("fma")},vd=(ir("lmha"),{body:di.body,cell:FNe.cell,respiratory_system:di.x("0001004"),colon:di.x("0001155"),left_lung:di.x("0002168"),right_lung:di.x("0002167"),left_bronchus:di.x("0002178"),right_bronchus:di.x("0002177"),kidney:di.x("0002113"),ureter:di.x("0000056"),eye:di.x("0000970"),fallopian_tube:di.x("0003889"),knee:di.x("0001465"),ovary:di.x("0000992"),trachea:di.x("0003126"),aorta:di.x("0000947"),blood:di.x("0000178"),bone_marrow:di.x("0002371"),male_reproductive_system:di.x("0000079"),lymph_node:di.x("0000029"),blood_vasculature:di.x("0004537"),brain:di.x("0000955"),eye_left:di.x("0004548"),eye_right:Zb.x("54449"),fallopian_tube_left:di.x("0001303"),fallopian_tube_right:di.x("0001302"),heart:di.x("0000948"),kidney_left:di.x("0004538"),kidney_right:di.x("0004539"),knee_left:Zb.x("24978"),knee_right:Zb.x("24977"),large_intestine:di.x("0000059"),liver:di.x("0002107"),lungs:di.x("0002048"),mesenteric_lymph_node:di.x("0002509"),ovary_left:Zb.x("7214"),ovary_right:Zb.x("7213"),pancreas:di.x("0001264"),pelvis:di.x("0001270"),prostate_gland:di.x("0002367"),skin:di.x("0002097"),small_intestine:di.x("0002108"),spleen:di.x("0002106"),thymus:di.x("0002370"),ureter_left:di.x("0001223"),ureter_right:di.x("0001222"),urinary_bladder:di.x("0001255"),uterus:di.x("0000995")});function G2(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const pC={spatialObjectReference:G2(ki.spatialObjectReference),spatialEntity:G2(ki.spatialEntity),spatialPlacement:G2(ki.spatialPlacement)};function HW(n,e){const t=dp(n,e,"ExtractionSet",pC.spatialEntity);return t.extractionSites=(0,mr.sortBy)(n.getSubjects(ki.spatialEntity.extraction_set,e,null).map(i=>hp(n,i.id)),["rui_rank"]),t}function hp(n,e){const t=dp(n,e,"SpatialEntity",pC.spatialEntity);return t.object&&(t.object=function(n,e){return dp(n,e,"SpatialObjectReference",pC.spatialObjectReference)}(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,ki.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,vi.spatialEntity,e,null),t}function UNe(n,e){const t=dp(n,e,"SpatialPlacement",pC.spatialPlacement);return t.source&&(t.source=hp(n,t.source)),t.target&&(t.target=hp(n,t.target)),t}function GW(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;case"meter":default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),s=[t.x_rotation,t.y_rotation,t.z_rotation].map(yj),o=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(s).scale(o)}class $W{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new SRe.DirectedGraph;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},zW.type,ki.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},zW.type,ki.SpatialEntity,null);const t={};for(const i of(0,Un.readQuads)(e,null,ki.spatialPlacement.source,null,null))t[i.subject.id]=i.object.id;for(const i of(0,Un.readQuads)(e,null,ki.spatialPlacement.target,null,null)){const r=t[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new qn(qn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new qn(qn.IDENTITY),s=TRe()(this.graph,e,t);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&GW(r,UNe(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,t){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,mr.get)(e,"placement[0]",(0,mr.get)(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,t),s&&(s=GW(s,r))):i&&(s=this.getTransformationMatrix(i,t)),s){const o=(new Zi).fromRotationMatrix(s,Zi.XYZ),a=s.getTranslation().map(u=>1e3*u),l=o.toVector3().map(dse),c=s.getScale().map(u=>u<1&&u>.999999?1:u);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${kRe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:t,placement_date:(new Date).toISOString().split("T")[0],x_scaling:c[0],y_scaling:c[1],z_scaling:c[2],scaling_units:"ratio",x_rotation:l[0],y_rotation:l[1],z_rotation:l[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class WW{constructor(e){this.db=e}getSpatialEntity(e){return hp(this.db.store,e)}getExtractionSets(e){return function(n,e){return(0,mr.sortBy)(n.getSubjects(ki.spatialEntity.extraction_set_for,e,null).map(t=>HW(n,t.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return HW(this.db.store,e)}getAnatomicalStructures(e){return function(n,e){return(0,mr.sortBy)(n.getSubjects(ki.spatialEntity.reference_organ,e,null).map(t=>hp(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(hp(n,t.subject.id))},null,ki.spatialEntity.reference_organ,null,null),(0,mr.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let t;switch(null==e?void 0:e.sex){case"Male":t=ki.spatial.Male.id;break;case"Female":t=ki.spatial.Female.id;break;case"Both":default:t=ki.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(null==e?void 0:e.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return(null==e?void 0:e.debug)&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,t,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),(null==e?void 0:e.debug)&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(ki.base("VHRightKidney").id),t,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ki.base("VHLeftKidney").id),t,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ki.base("VHSpleenCC1").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ki.base("VHSpleenCC2").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ki.base("VHSpleenCC3").id),t,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,t){var i,r;const s=void 0!==(null==t?void 0:t.sex)&&"both"!==(null===(i=null==t?void 0:t.sex)||void 0===i?void 0:i.toLowerCase()),o=this.getReferenceOrgans().filter(a=>a.representation_of===e&&(!s||a.sex===(null==t?void 0:t.sex)));if(o.length>0){const a=o[0],c=this.getSceneNode(a,a,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===a.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),u=(null!==(r=this.db.getSpatialEntities(t))&&void 0!==r?r:[]).map(h=>this.getSceneNode(h,a,{color:[255,255,255,229.5]}));return[c].concat(u).filter(h=>void 0!==h)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){var r,s,o,a;const l=null===(s=null===(r=null==e?void 0:e.object)||void 0===r?void 0:r.file_format)||void 0===s?void 0:s.startsWith("model/gltf");let u=this.db.graph.getTransformationMatrix(l&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(u){if(l)u=new qn(qn.IDENTITY).rotateX(yj(90)).multiplyLeft(u);else{let h;switch(e.dimension_units){case"centimeter":h=.01;break;case"millimeter":h=.001;break;case"meter":default:h=1}const f=[e.x_dimension,e.y_dimension,e.z_dimension].map(g=>g*h/2);u.scale(f)}return Object.assign({"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:l?null===(o=e.object)||void 0===o?void 0:o.file:void 0,scenegraphNode:l?null===(a=e.object)||void 0===a?void 0:a.file_subpath:void 0,transformMatrix:u,tooltip:e.label},i)}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const HNe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function gC(n,e=HNe){return JSON.parse(n,(t,i)=>"ccf_annotations"===t&&Array.isArray(i)?i.map(r=>(null==r?void 0:r.startsWith("http://purl.obolibrary.org/obo/FMA_"))?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==t||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const mC="https://entity.api.hubmapconsortium.org/entities/",qW=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),GNe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},qm={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},$2="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class qNe{constructor(e,t="",i="",r){var s,o;if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const c=this.data.descendants||[],u=(this.data.ancestors||[]).find(Ue=>"Donor"===Ue.entity_type);this.donor=this.getDonor(u,i);const h=this.getRuiLocation(e,this.donor);h?this.rui_location=h:this.bad=!0,qm[e.group_uuid]||(qm[e.group_uuid]=e.group_name);const f=new Date(e.last_modified_timestamp).toLocaleDateString(),g=qm[e.group_uuid]||e.group_name,m=e.created_by_user_displayname;this["@id"]=mC+e.uuid,this.label=`Registered ${f}, ${m}, ${g}`,this.link=`${i}browse/sample/${e.uuid}`;const A={},I=[];this.sections=I;const G=[];this.datasets=G;for(const Ue of c.filter(qe=>"Sample"===qe.entity_type)){const qe=this.getSection(Ue,e,i);A[Ue.submission_id]=qe,I.push(qe),qe.section_number=null!==(s=qe.section_number)&&void 0!==s?s:I.length}for(const Ue of c)if("Dataset"===Ue.entity_type){const qe=this.getDataset(Ue,t,i,r),bt=(0,mr.get)(Ue,["ingest_metadata","metadata","tissue_id"]);A[bt]?null===(o=A[bt].datasets)||void 0===o||o.push(qe):G.push(qe)}const k=null!=h?h:{},oe=`${k.x_dimension} x ${k.y_dimension} x ${k.z_dimension} ${k.dimension_units}`;this.section_count=k.slice_count||I.length;const we=parseFloat((k.slice_thickness||(k.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=we;const Be=k.dimension_units||"millimeter";this.section_units=Be,this.description=`${oe}, ${we} ${Be}, ${this.section_count} Sections`,I.forEach((Ue,qe)=>{Ue.description=`${k.x_dimension} x ${k.y_dimension} x ${we} ${Be}, ${we} ${Be}, ${Ue.description}`,Ue.section_number=qe+1})}getSection(e,t,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":mC+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${qm[e.group_uuid]||e.group_name}`,description:`${t.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t="",i="",r){var s;const o=new Date(e.last_modified_timestamp).toLocaleDateString(),a=qm[e.group_uuid]||e.group_name,l=e.created_by_user_displayname,c=[...e.data_types,(0,mr.get)(e,["ingest_metadata","metadata","assay_type"],"")],u=c.join("|").toLowerCase();let h,f="assets/icons/ico-unknown.svg";return-1!==u.indexOf("10x")?(h="10x",f="assets/icons/ico-bulk-10x.svg"):-1!==u.indexOf("af")?(h="AF",f="assets/icons/ico-spatial-af.svg"):-1!==u.indexOf("codex")?(h="CODEX",f="assets/icons/ico-spatial-codex.svg"):-1!==u.indexOf("imc")?(h="IMC",f="assets/icons/ico-spatial-imc.svg"):-1!==u.indexOf("lc")&&-1===u.indexOf("af")?(h="LC",f="assets/icons/ico-bulk-lc.svg"):h=-1!==u.indexOf("maldi")?"MALDI":-1!==u.indexOf("pas")?"PAS":"OTHER",f=null!==(s=this.getDatasetThumbnail(e,t,r))&&void 0!==s?s:f,{"@id":mC+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${l}, ${a}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:h,thumbnail:f}}getDatasetThumbnail(e,t,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${t}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=(0,mr.get)(e,"metadata.files",[]).filter(s=>/\.(ome\.tif|ome\.tiff)$/.test(s.rel_path)).filter(s=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(s.rel_path)).filter(s=>qW.has(s.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(s=>`${t}/${e.uuid}/${s.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const s=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(qW.has(s))return`assets/thumbnails/TMC-Vanderbilt/DR1/${s}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=GNe[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,t){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const s=i.match(/age ([0-9]+)/);let o,a;s&&(o=(0,mr.toNumber)(s[1]));for(const f of(0,mr.get)(e,"metadata.organ_donor_data",(0,mr.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===f.preferred_term||"Female"===f.preferred_term?r="Female":"Masculine gender"===f.preferred_term||"Male"===f.preferred_term?r="Male":"Current chronological age"===f.preferred_term||"Age"===f.preferred_term?o=(0,mr.toNumber)(f.data_value):"Body mass index"===f.preferred_term&&(a=(0,mr.toNumber)(f.data_value));let l="";r&&o&&(l+=`${r}, Age ${o}`,a&&(l+=`, BMI ${a.toFixed(1)}`));const c=new Date(e.last_modified_timestamp).toLocaleDateString(),u=qm[e.group_uuid]||e.group_name;return{"@id":mC+e.uuid,"@type":"Donor",label:l,description:`Entered ${c}, ${e.created_by_user_displayname}, ${u}`,link:`${t}browse/donor/${e.uuid}`,age:o,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:u,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){var i;let r,s=e.rui_location;if(s&&("string"==typeof s&&(s=JSON.parse(s)),s.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):s["@id"]&&(r=s),s["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),r){const o=null!==(i=(0,mr.get)(r,["placement","target"]))&&void 0!==i?i:"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,mr.set)(r,["placement","target"],o.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&(0,mr.set)(r,["placement","target"],"Male"===t.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return r}getTissueBlock(){return(0,mr.omit)(Object.assign({},this),["data","bad","donor"])}toJsonLd(){return Object.assign(Object.assign({},this.donor),{samples:[this.getTissueBlock()]})}}const XNe=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],KNe={exists:{field:"rui_location"}};function YW(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:null!=t?t:KNe,_source:{includes:XNe}})}function W2(n,e){return Bi(this,void 0,void 0,function*(){try{const t=yield fetch(n,e),i=yield t.text();return t.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch(t){return}})}function XW(n,e,t,i,r="",s=""){return Bi(this,void 0,void 0,function*(){let o;if("static"===e?o=yield W2(n):"search-api"===e&&(o=yield function(n,e,t){return Bi(this,void 0,void 0,function*(){const i=1e4,r=function(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),s=YW(0,i,t),o=yield W2(n,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const l=[];for(let h=i;h<a;h+=i)l.push(W2(n,{method:"POST",headers:r,body:YW(h,i,t)}));const c=yield Promise.all(l);if(c.some(h=>!h))return;const u=c.map(h=>h.hits.hits);return Object.assign(Object.assign({},o),{hits:Object.assign(Object.assign({},o.hits),{hits:o.hits.hits.concat(...u)})})})}(n,i,t)),o)return function(n,e="",t="",i,r=!1){const o={},a=(0,mr.get)(n,"hits.hits",[]).map(c=>(0,mr.get)(c,"_source",{})).sort((c,u)=>c.uuid.localeCompare(u.uuid)).map(c=>new qNe(c,e,t,i).toJsonLd());for(const c of a){const u=c["@id"];o[u]?o[u].samples.push(c.samples[0]):o[u]=c}const l=Object.values(o);return r&&(function(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(c=>c["@id"]===o)&&(r[s].deleteMe=!0,t++)}i.samples=r.filter(s=>!0!==s.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(l),console.log(l.map(c=>Object.assign({"@context":$2},c)))),gC(JSON.stringify({"@context":$2,"@graph":l}),$2)}(o,r,s,i);console.warn(`Unable to load ${n} as HuBMAP Data`)})}function Jb(n,e,t){const i=new Set;for(const r of e)for(const s of(0,Un.readQuads)(n,r,t,null,null))i.add(s.object.id);return i}const nPe={[ki.spatialEntity.x_dimension.id]:"x",[ki.spatialEntity.y_dimension.id]:"y",[ki.spatialEntity.z_dimension.id]:"z"};function rPe(n,e,t,i){const r=e.getTransformationMatrix(t,i);let s;if(r){const o=r.getTranslation(),a=function(n,e){const t=dp(n,e,"Dimensions",nPe);return[t.x,t.y,t.z]}(n,t).map(c=>c/1e3/2),l=(new Zi).fromRotationMatrix(r,Zi.XYZ).toQuaternion().normalize().calculateW();s=(new F2).fromCenterHalfSizeQuaternion(o,a,l)}return s}function sPe(n,e,t,i){const{x:r,y:s,z:o,radius:a,target:l}=i,c=new Set,u=a/1e3*(a/1e3);for(const h of t){const f=rPe(n,e,h,l);f&&f.distanceSquaredTo([r,s,o].map(m=>m/1e3))<=u&&c.add(h)}return c}function _C(n,e,t){var i,r;const s=new Map,o=new Set;for(const c of e)for(const u of(0,Un.readQuads)(n,c,vi.donor,null,null))o.add(u.object.id),s.has(u.object.id)?null===(i=s.get(u.object.id))||void 0===i||i.push(c):s.set(u.object.id,[c]);const a=t(o),l=new Set;for(const c of a)for(const u of null!==(r=s.get(c))&&void 0!==r?r:[])l.add(u);return l}function q2(n,e,t){var i,r;const s=new Map,o=new Set;for(const c of e)for(const u of(0,Un.readQuads)(n,c,vi.spatialEntity,null,null))o.add(u.object.id),s.has(u.object.id)?null===(i=s.get(u.object.id))||void 0===i||i.push(c):s.set(u.object.id,[c]);const a=t(o),l=new Set;for(const c of a)for(const u of null!==(r=s.get(c))&&void 0!==r?r:[])l.add(u);return l}function ev(n,e){return function(t){n.has(t.id)&&e.add(t.id)}}function KW(n,e,t){const i=new Set;for(const r of t){const s=Un.DataFactory.namedNode(r);n.forSubjects(ev(e,i),ki.spatialEntity.ccf_annotations,s,null)}return i}function QW(n,e){const t=function(n,e){const t=new Map;for(const i of n)for(const r of(0,Un.readQuads)(e,i,vi.spatialEntity,null,null))t.has(r.object.id)?t.get(r.object.id).add(i):t.set(r.object.id,new Set([i]));return t}(n,e),i=new Map;for(const r of t.keys()){const s=t.get(r);for(const o of(0,Un.readQuads)(e,r,ki.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s.forEach(l=>a.add(l))}else i.set(o.object.id,new Set(s))}return i}function vPe(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[ki.ontologyNode.label.id]:"label",[t]:"parent",[ki.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of H2(n,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=n.getSubjects(t,e,null).map(s=>s.id),i}function ZW(n,e,t,i){const r={root:e,nodes:{}},s=new Set;for(const a of(0,Un.readQuads)(n,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=vPe(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const o=n.getSubjects(i,e,null).map(a=>a.id).sort((a,l)=>r.nodes[a].label.localeCompare(r.nodes[l].label));return r.nodes[e].children=o,JW(r),r}function JW(n,e,t=new Set){const i=n.nodes[null!=e?e:n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)JW(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}const eq=(0,mr.memoize)(function(n){const e=ZW(n,vd.body.id,"body",ki.asctb.part_of.id);return e.nodes[vd.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>""),yC={[vi.label.id]:"label",[vi.description.id]:"description",[vi.link.id]:"link"},xPe=Object.assign(Object.assign({},yC),{[vi.providerName.id]:"providerName"}),SPe=Object.assign(Object.assign({},yC),{[vi.technology.id]:"technology",[vi.thumbnail.id]:"thumbnail"}),CPe=Object.assign(Object.assign({},yC),{[vi.sampleType.id]:"sampleType",[vi.sectionNumber.id]:"sectionNumber",[vi.datasets.id]:"datasets"}),TPe=Object.assign(Object.assign({},yC),{[vi.sampleType.id]:"sampleType",[vi.sectionCount.id]:"sectionCount",[vi.sectionSize.id]:"sectionSize",[vi.sectionUnits.id]:"sectionUnits",[vi.donor.id]:"donor",[vi.spatialEntity.id]:"spatialEntityId",[vi.sections.id]:"sections",[vi.datasets.id]:"datasets"});function APe(n,e){return dp(n,e,"Donor",xPe)}function tq(n,e){return dp(n,e,"Dataset",SPe)}function MPe(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of H2(n,e,CPe))if("datasets"===i){const s=tq(n,r);t[i].push(s)}else t[i]=r;return t}class IPe{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){this.status="Loading",this.message="Loading database";const e=Date.now();return this.database.connect().then(t=>Bi(this,void 0,void 0,function*(){t?(this.message="Building scene",this.timestamp=(new Date).toISOString(),yield this.database.getScene(),this.message="Building tissue block results",this.timestamp=(new Date).toISOString(),yield this.database.getTissueBlockResults(),this.message="Aggregating results",this.timestamp=(new Date).toISOString(),yield this.database.getAggregateResults(),this.status="Ready",this.message="Database successfully loaded",this.timestamp=(new Date).toISOString()):(this.status="Error",this.message="Unknown error while loading database",this.timestamp=(new Date).toISOString())})).catch(t=>{var i;this.status="Error",this.message=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-e})}}const RPe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class NPe{constructor(e=RPe){this.options=e,this.store=new Un.Store(void 0,{factory:Un.DataFactory}),this.graph=new $W(this),this.scene=new WW(this)}connect(e,t=!1){return Bi(this,void 0,void 0,function*(){return e&&(this.options=e),this.initializing||(this.initializing=t?this.cachedConnect():this.doConnect()),yield this.initializing,this.store.size>0})}cachedConnect(){return Bi(this,void 0,void 0,function*(){const e=(new Date).getTime(),t=wRe()(this.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),i=`ccf-database.last_modified.${t}`,r=`ccf-database.${t}`,s=yield MW(i).catch(()=>{});let o;s&&e-new Date(+s).getTime()>36e5?yield function(n,e=Cc()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),vu(t.transaction)))}([r,i]).catch(()=>{}):o=yield MW(r).catch(()=>{}),o?yield this.deserialize(o):(yield this.doConnect(),function(n,e=Cc()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),vu(t.transaction)))}([[r,this.serialize()],[i,""+e]]).catch(()=>{}))})}doConnect(){var e,t;return Bi(this,void 0,void 0,function*(){const i=[],r=null!==(t=null===(e=this.options.dataSources)||void 0===e?void 0:e.concat())&&void 0!==t?t:[],s=this.options.ccfOwlUrl;if(s.startsWith("{"))this.store=(0,Un.deserializeN3Store)(s,Un.DataFactory);else if(s.endsWith(".n3store.json")){const o=yield fetch(s).then(a=>a.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(this.store=(0,Un.deserializeN3Store)(o,Un.DataFactory))}else(null==s?void 0:s.length)>0&&r.push(s);this.options.hubmapDataUrl&&(this.options.hubmapDataUrl.endsWith("jsonld")?r.push(this.options.hubmapDataUrl):i.push(XW(this.options.hubmapDataUrl,this.options.hubmapDataService,this.options.hubmapQuery,this.options.hubmapToken,this.options.hubmapAssetsUrl,this.options.hubmapPortalUrl).then(o=>{if(o)return this.addDataSources([o])}))),i.push(this.addDataSources(r)),yield Promise.all(i),yield this.synchronize()})}addDataSources(e,t){return Bi(this,void 0,void 0,function*(){const i=null!=t?t:this.store;return yield Promise.all(e.map(r=>Bi(this,void 0,void 0,function*(){"string"==typeof r?(r.startsWith("http")||r.startsWith("assets/"))&&r.includes("jsonld")?(r=gC(r=yield fetch(r).then(s=>s.text())),yield(0,Un.addJsonLdToStore)(r,i)):r.endsWith("n3")?yield(0,Un.addN3ToStore)(r,i):r.endsWith("rdf")||r.endsWith("owl")||r.endsWith("xml")?yield(0,Un.addRdfXmlToStore)(r,i):(r=gC(r),yield(0,Un.addJsonLdToStore)(r,i)):(r=gC(JSON.stringify(r)),yield(0,Un.addJsonLdToStore)(r,i))}))),this})}synchronize(){return Bi(this,void 0,void 0,function*(){return yield new Promise(e=>{setTimeout(e,500)}),this.graph.createGraph(),function(n){var e,t,i;const r=eq(n),s=new Map;for(const{subject:o,object:a}of(0,Un.readQuads)(n,null,ki.spatialEntity.representation_of,null,null)){const l=new Set([a.id]);let c=null===(e=r.nodes[a.id])||void 0===e?void 0:e.parent;for(;c&&!l.has(c);)l.add(c),c=null===(t=r.nodes[c])||void 0===t?void 0:t.parent;s.set(o.id,[...l].map(u=>Un.DataFactory.namedNode(u)))}for(const{object:o}of(0,Un.readQuads)(n,null,vi.spatialEntity,null,null))for(const{subject:a}of(0,Un.readQuads)(n,null,ki.spatialPlacement.source,o,null))for(const{object:l}of(0,Un.readQuads)(n,a,ki.spatialPlacement.target,null,null))for(const c of null!==(i=s.get(l.id))&&void 0!==i?i:[])n.addQuad(Un.DataFactory.namedNode(o.id),ki.spatialEntity.ccf_annotations,c)}(this.store),this})}serialize(){return(0,Un.serializeN3Store)(this.store)}deserialize(e){return Bi(this,void 0,void 0,function*(){this.store=(0,Un.deserializeN3Store)(e,Un.DataFactory),this.graph=new $W(this),this.scene=new WW(this),yield new Promise(t=>{setTimeout(t,10)})})}getIds(e={}){return function(n,e,t){var i,r,s,o,a,l,c;let u=function(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),vi.spatialEntity,null,null),e}(n);if(u.size>0&&(u=function(n,e,t=!0){const i=new Set;if(n.forSubjects(ev(e,i),vi.spatialEntity,null,null),!t){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(n,u)),u.size>0&&("Male"===t.sex||"Female"===t.sex)){const h=t.sex;u=_C(n,u,f=>function(n,e,t){const i=new Set;return n.forSubjects(ev(e,i),vi.sex,vi[t],null),i}(n,f,h))}if(u.size>0&&(null===(i=t.tmc)||void 0===i?void 0:i.length)>0&&(u=_C(n,u,h=>function(n,e,t){const i=new Set;for(const r of t){const s=Un.DataFactory.literal(r);n.forSubjects(ev(e,i),vi.providerName,s,null)}return i}(n,h,t.tmc))),u.size>0&&(null===(r=t.technologies)||void 0===r?void 0:r.length)>0&&(u=function(n,e,t){var i,r;const s=new Map,o=new Set,a=new Set(e);for(const u of e)for(const h of(0,Un.readQuads)(n,u,vi.sections,null,null))a.add(h.object.id);for(const u of a)for(const h of(0,Un.readQuads)(n,u,vi.datasets,null,null))o.add(h.object.id),s.has(h.object.id)?null===(i=s.get(h.object.id))||void 0===i||i.push(u):s.set(h.object.id,[u]);const l=t(o),c=new Set;for(const u of l)for(const h of null!==(r=s.get(u))&&void 0!==r?r:[])c.add(h);return c}(n,u,h=>function(n,e,t){const i=new Set;for(const r of t){const s=Un.DataFactory.literal(r);n.forSubjects(ev(e,i),vi.technology,s,null)}return i}(n,h,t.technologies))),u.size>0&&(null===(s=t.spatialSearches)||void 0===s?void 0:s.length)>0&&(u=q2(n,u,h=>function(n,e,t,i){const r=new Set;for(const s of i)sPe(n,e,t,s).forEach(a=>r.add(a));return r}(n,e,h,t.spatialSearches))),u.size>0&&(null===(o=t.ontologyTerms)||void 0===o?void 0:o.length)>0){const h=t.ontologyTerms;-1===h.indexOf(vd.body.id)&&(u=q2(n,u,f=>KW(n,f,h)))}if(u.size>0&&(null===(a=t.cellTypeTerms)||void 0===a?void 0:a.length)>0){const h=t.cellTypeTerms;-1===h.indexOf(vd.cell.id)&&(u=q2(n,u,f=>function(n,e,t){const i=new Set;for(const r of t)n.forObjects(s=>{i.add(s.id)},r,ki.asctb.located_in,null),r===vd.cell.id&&i.add(vd.body.id);return KW(n,e,[...i])}(n,f,h)))}if(u.size>0&&2===(null===(l=t.ageRange)||void 0===l?void 0:l.length)&&(0,mr.isFinite)(t.ageRange[0])&&(0,mr.isFinite)(t.ageRange[1])){const h=Math.max(...t.ageRange),f=Math.min(...t.ageRange);1===f&&110===h||(u=_C(n,u,g=>function(n,e,t,i){const r=new Set;for(const s of e)for(const o of(0,Un.readQuads)(n,s,vi.age,null,null)){const a=(0,cC.fromRdf)(o.object);a>=t&&a<=i&&r.add(s)}return r}(n,g,f,h)))}if(u.size>0&&2===(null===(c=t.bmiRange)||void 0===c?void 0:c.length)&&(0,mr.isFinite)(t.bmiRange[0])&&(0,mr.isFinite)(t.bmiRange[1])){const h=Math.max(...t.bmiRange),f=Math.min(...t.bmiRange);13===f&&83===h||(u=_C(n,u,g=>function(n,e,t,i){const r=new Set;for(const s of e)for(const o of(0,Un.readQuads)(n,s,vi.bmi,null,null)){const a=(0,cC.fromRdf)(o.object);a>=t&&a<=i&&r.add(s)}return r}(n,g,f,h)))}return u}(this.store,this.graph,e)}get(e){return this.store.getQuads(Un.DataFactory.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>function(n,e){const t=n.getObjects(Un.DataFactory.namedNode(e),vi.spatialEntity,null);if(t.length>0)return hp(n,t[0].id)}(this.store,t))}getDatabaseStatus(){return Bi(this,void 0,void 0,function*(){return this.status||(this.status=new IPe(this)),this.status.toJson()})}getDatasetTechnologyNames(){return Bi(this,void 0,void 0,function*(){return function(n){const e=new Set;for(const t of(0,Un.readQuads)(n,null,vi.technology,null,null))e.add(t.object.value);return Array.from(e).sort()}(this.store)})}getProviderNames(){return Bi(this,void 0,void 0,function*(){return function(n){const e=new Set;for(const t of(0,Un.readQuads)(n,null,vi.providerName,null,null))e.add(t.object.value);return Array.from(e).sort()}(this.store)})}getTissueBlockResults(e){return Bi(this,void 0,void 0,function*(){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>function(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of H2(n,e,TPe))if("sections"===i){const s=MPe(n,r);t[i].push(s)}else if("datasets"===i){const s=tq(n,r);t[i].push(s)}else t[i]="donor"===i?APe(n,r):r;return t}(this.store,t))})}getAggregateResults(e){return Bi(this,void 0,void 0,function*(){return function(n,e){const t=Jb(e,n,vi.donor.id),i=Jb(e,t,vi.providerUUID.id),r=new Set;for(const l of n)for(const c of(0,Un.readQuads)(e,l,vi.spatialEntity,null,null))r.add(c.subject.id);const s=Jb(e,r,vi.sections.id),o=new Set([...Jb(e,r,vi.datasets.id),...Jb(e,s,vi.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([l,c])=>({label:l,count:c}))}(this.getIds(e),this.store)})}getOntologyTermOccurences(e){return Bi(this,void 0,void 0,function*(){return function(n,e){const t={};return QW(n,e).forEach((r,s)=>{t[s]=r.size}),t}(this.getIds(e),this.store)})}getCellTypeTermOccurences(e){return Bi(this,void 0,void 0,function*(){return function(n,e){var t,i;const r=QW(n,e),s=new Map;for(const a of r.keys()){const l=r.get(a);for(const c of(0,Un.readQuads)(e,null,ki.asctb.located_in,a,null)){const u=c.subject.id;if(s.has(u)){const h=s.get(u);l.forEach(f=>h.add(f))}else s.set(u,new Set(l))}}const o={};return s.forEach((a,l)=>{o[l]=a.size}),o[vd.cell.id]=null!==(i=null===(t=r.get(vd.body.id))||void 0===t?void 0:t.size)&&void 0!==i?i:0,o}(this.getIds(e),this.store)})}getOntologyTreeModel(){return Bi(this,void 0,void 0,function*(){return eq(this.store)})}getCellTypeTreeModel(){return Bi(this,void 0,void 0,function*(){return function(n){return ZW(n,vd.cell.id,"cell",ki.asctb.ct_is_a.id)}(this.store)})}getReferenceOrgans(){return Bi(this,void 0,void 0,function*(){return this.scene.getReferenceOrgans()})}getScene(e){return Bi(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getScene(e)})}getReferenceOrganScene(e,t){return Bi(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getReferenceOrganScene(e,t)})}getSpatialPlacement(e,t){return Bi(this,void 0,void 0,function*(){return this.graph.getSpatialPlacement(e,t)})}}class nq extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}function FPe(){throw new nq}function LPe(){throw new nq}function Y2(n,e,t){e.run(()=>n.dispatch(t))}function jPe(n,e,t,i){return yg(t)?function(n,e,t){return t.then(i=>(Y2(n,e,i),i))}(n,e,t):Im(t)?function(n,e,t,i){return null!==i&&(t=t.pipe(gr(i.cancelUncompleted$))),t.subscribe({next:r=>Y2(n,e,r)}),t}(n,e,t,i):(Y2(n,e,t),t)}class UPe{constructor(){this.cancelUncompleted$=new se}cancelPreviousAction(){this.cancelUncompleted$.next()}}const X2="\u0275fac",iq=Symbol("InjectorInstance"),rq=Symbol("FactoryHasBeenDecorated");function sq(n,e){const t=n[iq];return t?t.get(e):null}const GPe={cancelUncompleted:!1};function oq(n=GPe){return(e,t,i)=>{let r;const s=function(n){return n?new UPe:null}(n.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=sq(this,hu)||FPe(),l=sq(this,pn)||LPe(),c=r.apply(this,arguments);return l.runOutsideAngular(()=>jPe(a,l,c,s))}"function"==typeof(null==i?void 0:i.value)?(r=i.value,i.value=o):Object.defineProperty(e,t,{set:a=>r=a,get:()=>o}),function(n){if(rq in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[X2]&&function(n){const e=n[X2];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[iq]=Oe(Vu),r};t&&(t.factory=i),Object.defineProperty(n,X2,{get:()=>i})}(e),n.constructor.prototype[rq]=!0}(e)}}const y2e=["bodyCanvas"];let b2e=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new ln,this.nodeDrag=new ln,this.nodeClick=new ln,this.nodeHoverStart=new ln,this.nodeHoverStop=new ln,this.initialized=new ln,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){var i;this._scene=t,null===(i=this.bodyUI)||void 0===i||i.setScene(t)}get rotation(){return this._rotation}set rotation(t){var i;this._rotation=t,null===(i=this.bodyUI)||void 0===i||i.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){var i;this._rotationX=t,null===(i=this.bodyUI)||void 0===i||i.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){var i;this._zoom=t,null===(i=this.bodyUI)||void 0===i||i.setZoom(t)}get target(){return this._target}set target(t){var i;this._target=t,null===(i=this.bodyUI)||void 0===i||i.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/t.x),Math.log2((s-i.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t;return Bi(this,void 0,void 0,function*(){const i=this.bodyCanvas.nativeElement,r=new zve({id:"body-ui",canvas:i,zoom:this.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:this.interactive,camera:this.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),this.bodyUI=r,window.bodyUI=r,(null===(t=this.scene)||void 0===t?void 0:t.length)>0&&this.bodyUI.setScene(this.scene),this.bounds&&this.zoomToBounds(this.bounds),this.target&&this.bodyUI.setTarget(this.target),this.subscriptions=[this.bodyUI.sceneRotation$.subscribe(s=>this.rotationChange.next(s)),this.bodyUI.nodeDrag$.subscribe(s=>this.nodeDrag.emit(s)),this.bodyUI.nodeClick$.subscribe(s=>this.nodeClick.emit(s)),this.bodyUI.nodeHoverStart$.subscribe(s=>this.nodeHoverStart.emit(s)),this.bodyUI.nodeHoverStop$.subscribe(s=>this.nodeHoverStop.emit(s))],this.initialized.emit()})}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rn({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(t,i){if(1&t&&hr(y2e,5,gn),2&t){let r;Gn(r=$n())&&(i.bodyCanvas=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&Va(i.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(t,i){1&t&&ni(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"]}),n})(),v2e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[fr]]}),n})();new Ht("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const yq=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name));function V2e(n,e){if(1&n&&(wt(0,"div",16),ni(1,"youtube-player",17),Et()),2&n){const t=_i(3);zt(1),dE("videoId",t.videoID)}}function j2e(n,e){if(1&n&&(wt(0,"mat-expansion-panel",11),wt(1,"mat-expansion-panel-header"),wt(2,"h2",12),Jn(3),Et(),Et(),wt(4,"div",13),ni(5,"markdown",14),wi(6,V2e,2,1,"div",15),Et(),Et()),2&n){const t=_i(),i=t.index,r=t.$implicit;Jt("expanded",0===i),zt(3),gs(r.title),zt(2),ai("first",0===i),Jt("data",r.content),zt(1),Jt("ngIf",0===i)}}function U2e(n,e){if(1&n&&(wt(0,"div",9),wi(1,j2e,7,6,"mat-expansion-panel",10),Et()),2&n){const t=e.$implicit;zt(1),Jt("ngIf",t)}}yq.filter(n=>!0!==n.disabled);let bq=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){var t;null===(t=document.getElementsByClassName("modal-animated")[0])||void 0===t||t.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return n.\u0275fac=function(t){return new(t||n)(Oe(F1),Oe(P7))},n.\u0275cmp=rn({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(t,i){1&t&&(wt(0,"div",0),wt(1,"div",1),wt(2,"div",2),wt(3,"div",3),wt(4,"h2",4),Jn(5),Et(),wt(6,"div",5),wt(7,"mat-icon",6),Tn("click",function(){return i.close()}),Jn(8,"clear"),Et(),Et(),Et(),wt(9,"mat-dialog-content",7),wi(10,U2e,2,1,"div",8),Et(),Et(),Et(),Et()),2&t&&(zt(5),gs(i.infoTitle),zt(5),Jt("ngForOf",i.documentationContents))},directives:[F7,Fm,L7,Yu,ac,z7,H7,q7,Q7],styles:[".mat-dialog-container{padding:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:3rem;text-align:left}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"]}),n})(),vq=(()=>{class n{constructor(t){this.http=t,this.panelContent=new Fr({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(s=>{const o={content:this.parseMarkdown(s),infoTitle:r,videoID:i};this.panelContent.next(o)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const s of r)if(s.length){const o=s.includes("\n\n")?"\n\n":"\r\n\r\n",a=s.split(o);i.push({title:a[0],content:a.splice(1).join(o)})}return i}}return n.\u0275fac=function(t){return new(t||n)(ke(_u))},n.\u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H2e=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new ln,this.closeClicked=new ln}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rn({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(t,i){2&t&&Va(i.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(t,i){1&t&&(wt(0,"div",0),wt(1,"div",1),wt(2,"div",2),wt(3,"div",3),wt(4,"p",4),Jn(5),Et(),wt(6,"mat-icon",5),Tn("click",function(){return i.close()}),Jn(7,"clear"),Et(),Et(),ni(8,"img",6),wt(9,"mat-dialog-content",7),wt(10,"div",8),Jn(11),Et(),wt(12,"a",9),Tn("click",function(){return i.onDialogButtonClick()}),Et(),Et(),Et(),Et(),Et()),2&t&&(zt(5),gs(i.infoTitle),zt(3),Jt("src",i.imageUrl,sf),zt(3),xo(" ",i.message,""),zt(1),Jt("text",i.callToAction))},directives:[F7,Fm,BMe,L7],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;-o-object-fit:cover;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),n})(),Qm=(()=>{let n=class extends MDe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(Ki(n=>null!=n),Wa(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(a7(...t),ld(),Wa(1))}getOption(...t){const i=this.getPathKey(t);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(a7(...t),ld(),Wa(1));return this.optionCache.set(i,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}};return n.\u0275fac=function(){let e;return function(i){return(e||(e=zi(n)))(i||n)}}(),n.\u0275prov=tt({token:n,factory:n.\u0275fac}),Ei([p9()],n.prototype,"config$",null),n=Ei([CDe(),M6({name:"globalConfig",defaults:null})],n),n})();!function(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}();class wq extends class{getDatabaseStatus(){return this.forwardCall("getDatabaseStatus")}getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getCellTypeTreeModel(){return this.forwardCall("getCellTypeTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getCellTypeTermOccurences(e){return this.forwardCall("getCellTypeTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,t){return this.forwardCall("getReferenceOrganScene",e,t)}}{forwardCall(e,...t){return this.impl$.pipe(is(i=>i[e](...t)))}}let Eq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const J2=new se,nv={cacheBusterObserver:J2},Zm={cacheBusterObserver:J2,maxCacheCount:4};function xq(n,e,t){return n?{min:n[0]>e?n[0]:void 0,max:n[1]<t?n[1]:void 0}:void 0}function Sq(n){return n.map(e=>{var t;return Object.assign(Object.assign({},e),{transformMatrix:new qn(null!==(t=e.transformMatrix)&&void 0!==t?t:[])})})}let Q2e=(()=>{class n{constructor(t,i){this.api=t,this.globalConfig=i,i.getOption("hubmapToken").subscribe(J2)}getDatabaseStatus(){return this.doRequest(t=>this.api.dbStatus(t))}getProviderNames(){return this.doRequest(t=>this.api.providerNames(t))}getDatasetTechnologyNames(){return this.doRequest(t=>this.api.technologyNames(t))}getOntologyTreeModel(){return this.doRequest(t=>this.api.ontologyTreeModel(t),void 0,{},n=>n)}getCellTypeTreeModel(){return this.doRequest(t=>this.api.cellTypeTreeModel(t),void 0,{},n=>n)}getReferenceOrgans(){return this.doRequest(t=>this.api.referenceOrgans(t),void 0,{},n=>n)}getTissueBlockResults(t){return this.doRequest(i=>this.api.tissueBlocks(i),t,{},n=>n)}getAggregateResults(t){return this.doRequest(i=>this.api.aggregateResults(i),t)}getOntologyTermOccurences(t){return this.doRequest(i=>this.api.ontologyTermOccurences(i),t)}getCellTypeTermOccurences(t){return this.doRequest(i=>this.api.cellTypeTermOccurences(i),t)}getScene(t){return this.doRequest(i=>this.api.scene(i),t,{},Sq)}getReferenceOrganScene(t,i){return this.doRequest(r=>this.api.referenceOrganScene(r),i,{organIri:t},Sq)}doRequest(t,i,r,s){const{api:o,globalConfig:a}=this,l=Object.assign(Object.assign({},function(n){var e,t;return{age:xq(null==n?void 0:n.ageRange,1,110),bmi:xq(null==n?void 0:n.bmiRange,13,83),sex:null===(t=null===(e=null==n?void 0:n.sex)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e),ontologyTerms:null==n?void 0:n.ontologyTerms,cellTypeTerms:null==n?void 0:n.cellTypeTerms,providers:null==n?void 0:n.tmc,technologies:null==n?void 0:n.technologies,spatial:null==n?void 0:n.spatialSearches}}(i)),r);return yc([a.getOption("remoteApiEndpoint"),a.getOption("hubmapToken")]).pipe(qr(1),cr(([c,u])=>{o.configuration.basePath=c,u&&(l.token=u)}),is(()=>t(l)),be(c=>s?s(c):c))}}return n.\u0275fac=function(t){return new(t||n)(ke(AW),ke(Qm))},n.\u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"}),Ei([Sc(nv)],n.prototype,"getProviderNames",null),Ei([Sc(nv)],n.prototype,"getDatasetTechnologyNames",null),Ei([Sc(nv)],n.prototype,"getOntologyTreeModel",null),Ei([Sc(nv)],n.prototype,"getCellTypeTreeModel",null),Ei([Sc(nv)],n.prototype,"getReferenceOrgans",null),Ei([Sc(Zm)],n.prototype,"getTissueBlockResults",null),Ei([Sc(Zm)],n.prototype,"getAggregateResults",null),Ei([Sc(Zm)],n.prototype,"getOntologyTermOccurences",null),Ei([Sc(Zm)],n.prototype,"getCellTypeTermOccurences",null),Ei([Sc(Zm)],n.prototype,"getScene",null),Ei([Sc(Zm)],n.prototype,"getReferenceOrganScene",null),n})(),Z2e=(()=>{class n extends wq{constructor(t){super(),this.impl$=this.database$=t.config$.pipe(i=>i,Ki(i=>Object.keys(i).length>0),is(i=>function(n,e){return new P(t=>{let i,r;try{i=n()}catch(a){return void t.error(a)}try{r=e(i)}catch(a){return void t.error(a)}const o=(r?Ye(r):Qc).subscribe(t);return()=>{o.unsubscribe(),i&&i.unsubscribe()}})}(()=>this.createDatabase(i),r=>this.connectDatabase(r,i))),be(i=>i.database),Wa(1))}connectDatabase(t,i){return Bi(this,void 0,void 0,function*(){const r=!fa();return yield t.database.connect(i,r),t})}}return n.\u0275fac=function(t){return new(t||n)(ke(Qm))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),J2e=(()=>{class n extends Z2e{createDatabase(t){return{database:new NPe(t),unsubscribe:()=>{}}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zi(n)))(i||n)}}(),n.\u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eke=(()=>{class n extends wq{constructor(t,i){super(),this.impl$=t.config$.pipe(r=>r,be(r=>this.selectToken(r)),ld(),be(r=>i.get(r)),Wa(1))}}return n.\u0275fac=function(t){return new(t||n)(ke(Qm),ke(Hn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})(),ek=(()=>{class n{}return n.type="[CallToAction] Learn More",n})(),tk=(()=>{class n{}return n.type="[CallToAction] Open Dialog",n})(),nk=(()=>{class n{}return n.type="[CallToAction] Close Dialog",n})();var ik;class wa{get length(){var e,t;return null!==(t=null===(e=wa.storage)||void 0===e?void 0:e.length)&&void 0!==t?t:0}key(e){var t,i;return null!==(i=null===(t=wa.storage)||void 0===t?void 0:t.key(e))&&void 0!==i?i:null}getItem(e,t){var i,r,s;return null!==(s=null!==(r=null===(i=wa.storage)||void 0===i?void 0:i.getItem(e))&&void 0!==r?r:t)&&void 0!==s?s:null}setItem(e,t){var i;try{return null===(i=wa.storage)||void 0===i||i.setItem(e,t),!0}catch(r){return!1}}removeItem(e){var t;null===(t=wa.storage)||void 0===t||t.removeItem(e)}clear(){var e;null===(e=wa.storage)||void 0===e||e.clear()}}wa.storage=(()=>{let n;try{n=window.localStorage;const e="__storage_test__";return n.setItem(e,e),n.removeItem(e),n}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&n&&0!==n.length?n:void 0}})(),wa.\u0275fac=function(e){return new(e||wa)},wa.\u0275prov=tt({token:wa,factory:wa.\u0275fac,providedIn:"root"});const Cq="callToActionPopupShown";let Ro=ik=class{constructor(e,t,i,r,s){this.dialog=e,this.ga=t,this.storage=i,this.infoService=r,this.http=s}static ctaDatePassed(e,t=Date.now){return+t()>+new Date(e)}ngxsOnInit(e){const{expirationDate:t,popupShown:i}=e.getState(),r=this.storage.getItem(Cq,`${i}`),s=ik.ctaDatePassed(t);"true"!==r&&!s&&e.dispatch(new tk)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(be(e=>this.infoService.parseMarkdown(e)))}launchLearnMore(e){this.dialog.open(bq,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:e,videoID:"UfxMpzatowE"}})}learnMore(e){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(cr(t=>this.launchLearnMore(t)))}open(e){this.dialog.open(nke,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(Cq,"true"),e.patchState({popupShown:!0})}close(e){this.dialog.closeAll(),this.ga.event("close","call_to_action")}};Ro.\u0275fac=function(e){return new(e||Ro)(ke(Pb),ke(qb),ke(wa),ke(vq),ke(_u))},Ro.\u0275prov=tt({token:Ro,factory:Ro.\u0275fac}),Ei([bN(ek)],Ro.prototype,"learnMore",null),Ei([bN(tk)],Ro.prototype,"open",null),Ei([bN(nk)],Ro.prototype,"close",null),Ro=ik=Ei([M6({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Ro);let xC=(()=>{class n{static title(t){return t.title}static message(t){return t.message}static callToAction(t){return t.callToAction}static imageUrl(t){return t.imageUrl}static expirationDate(t){return t.expirationDate}static popupShown(t){return t.popupShown}}return Ei([_m([Ro])],n,"title",null),Ei([_m([Ro])],n,"message",null),Ei([_m([Ro])],n,"callToAction",null),Ei([_m([Ro])],n,"imageUrl",null),Ei([_m([Ro])],n,"expirationDate",null),Ei([_m([Ro])],n,"popupShown",null),n})(),nke=(()=>{class n{constructor(){this.close=()=>new nk,this.learnMore=()=>new ek}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rn({type:n,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(t,i){1&t&&(wt(0,"ccf-call-to-action",0),Tn("callToActionClicked",function(){return i.learnMore()})("closeClicked",function(){return i.close()}),Ns(1,"async"),Ns(2,"async"),Ns(3,"async"),Ns(4,"async"),Et()),2&t&&Jt("infoTitle",To(1,4,i.title$))("message",To(2,6,i.message$))("callToAction",To(3,8,i.callToAction$))("imageUrl",To(4,10,i.imageUrl$))},directives:[H2e],pipes:[g0],styles:[""],changeDetection:0}),Ei([NS(xC.title)],n.prototype,"title$",void 0),Ei([NS(xC.message)],n.prototype,"message$",void 0),Ei([NS(xC.callToAction)],n.prototype,"callToAction$",void 0),Ei([NS(xC.imageUrl)],n.prototype,"imageUrl$",void 0),Ei([oq()],n.prototype,"close",void 0),Ei([oq()],n.prototype,"learnMore",void 0),n})(),ske=(()=>{class n{constructor(t){this.source=t,this.organs=yq}getOrganInfo(t,i,r="Female"){let s=this.organs.find(a=>a.id===t);if(!s)return sn(void 0);const o=s.organ;return s.disabled&&(s=this.organs.find(a=>!a.disabled&&a.organ===o)),(null==s?void 0:s.side)&&i&&s.side!==i&&(s=this.organs.find(a=>!a.disabled&&a.organ===o&&a.side===i)),sn(s)}getOrgan(t,i="Both"){return this.source.getReferenceOrgans().pipe(be(r=>r.find(s=>s.representation_of===t.id&&("Both"===i||s.sex===i))))}getOrganScene(t,i="Female"){return t.id?this.source.getReferenceOrganScene(t.id,{ontologyTerms:[t.id],sex:i}):sn([])}getOrganStats(t,i="Female"){return t.id?this.source.getAggregateResults({ontologyTerms:[t.id],sex:i}):sn([])}getBlocks(t,i="Female"){return t.id?this.source.getTissueBlockResults({ontologyTerms:[t.id],sex:i}):sn([])}}return n.\u0275fac=function(t){return new(t||n)(ke(Eq))},n.\u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oke=["thumbContainer"],ake=["toggleBar"],lke=["input"],cke=function(n){return{enterDuration:n}},uke=["*"],dke=new Ht("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let hke=0;const fke={provide:Xo,useExisting:ye(()=>Tq),multi:!0};class pke{constructor(e,t){this.source=e,this.checked=t}}const gke=E1(Mm(Ch(Am(class{constructor(n){this._elementRef=n}}))));let Tq=(()=>{class n extends gke{constructor(t,i,r,s,o,a){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++hke,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new ln,this.toggleChange=new ln,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(t){this._required=bi(t)}get checked(){return this._checked}set checked(t){this._checked=bi(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._inputElement.nativeElement.focus():t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new pke(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(Oe(gn),Oe(vc),Oe(Mr),yo("tabindex"),Oe(dke),Oe(Qa,8))},n.\u0275cmp=rn({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&(hr(oke,5),hr(ake,5),hr(lke,5)),2&t){let r;Gn(r=$n())&&(i._thumbEl=r.first),Gn(r=$n())&&(i._thumbBarEl=r.first),Gn(r=$n())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,i){2&t&&(qc("id",i.id),Ii("tabindex",i.disabled?null:-1)("aria-label",null)("aria-labelledby",null),ai("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Vn([fke]),En],ngContentSelectors:uke,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(Hr(),wt(0,"label",0,1),wt(2,"div",2,3),wt(4,"input",4,5),Tn("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),Et(),wt(6,"div",6,7),ni(8,"div",8),wt(9,"div",9),ni(10,"div",10),Et(),Et(),Et(),wt(11,"span",11,12),Tn("cdkObserveContent",function(){return i._onLabelTextChange()}),wt(13,"span",13),Jn(14,"\xa0"),Et(),oi(15),Et(),Et()),2&t){const r=ih(1),s=ih(12);Ii("for",i.inputId),zt(2),ai("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),zt(2),Jt("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),Ii("name",i.name)("aria-checked",i.checked.toString())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),zt(5),Jt("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",function(n,e,t,i){return x3(jt(),Cs(),n,e,t,i)}(18,cke,i._noopAnimations?0:150))}},directives:[gu,WN],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),Aq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({}),n})(),yke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[Aq,Dm,ji,QS],Aq,ji]}),n})(),bke=(()=>{class n{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new ln}get left(){const{value:t,labels:i}=this;return t!==i[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rn({type:n,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(t,i){2&t&&Va(i.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],[1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(t,i){if(1&t){const r=wl();wt(0,"span",0),Tn("click",function(){_r(r);const o=ih(3);return i.left||o.toggle(),i.updateToggle(!0)}),Jn(1),Et(),wt(2,"mat-slide-toggle",1,2),Tn("change",function(o){return i.updateToggle(!o.checked)}),Et(),wt(4,"span",0),Tn("click",function(){_r(r);const o=ih(3);return i.left&&o.toggle(),i.updateToggle(!1)}),Jn(5),Et()}2&t&&(ai("disabled",i.disabled)("highlighted",i.left),zt(1),gs(i.labels[0].charAt(0).toUpperCase()+i.labels[0].slice(1)),zt(1),Jt("disabled",i.disabled)("checked",!i.left),zt(2),ai("disabled",i.disabled)("highlighted",!i.left),zt(1),gs(i.labels[1].charAt(0).toUpperCase()+i.labels[1].slice(1)))},directives:[Tq],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mat-slide-toggle-bar{background-color:#43476580}[_nghost-%COMP%]     .slider .mat-slide-toggle-thumb{background-color:#434765}"],changeDetection:0}),n})();const vke=["bodyUI"],wke=function(){return["Male","Female"]},Eke=function(){return["Left","Right"]};let xke=(()=>{class n{constructor(t){this.ga=t,this.sexChange=new ln,this.sideChange=new ln}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){var t,i,r,s;const o=new Set(null!==(i=null===(t=this.filter)||void 0===t?void 0:t.tmc)&&void 0!==i?i:[]);this.filteredBlocks=null!==(s=null===(r=this.blocks)||void 0===r?void 0:r.filter(a=>o.has(a.donor.providerName)).map(a=>a["@id"]))&&void 0!==s?s:[],this.bodyUI.scene=this.bodyUI.scene.map(a=>{var l;return Object.assign(Object.assign({},a),{color:a.entityId&&this.highlightedNodeId===a["@id"]?[30,136,229,255]:this.filteredBlocks.includes(null!==(l=a.entityId)&&void 0!==l?l:"")?[173,255,47,229.5]:[255,255,255,229.5]})})}ngOnChanges(t){this.bodyUI&&"organ"in t&&this.zoomToFitOrgan()}updateSex(t){this.sex=t,this.sexChange.emit(this.sex)}updateSide(t){this.side=t,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:t,organ:i}=this;if(i){const{x_dimension:r,y_dimension:s,z_dimension:o}=i;t.rotation=t.rotationX=0,t.bounds={x:1.25*r/1e3,y:1.25*s/1e3,z:1.25*o/1e3},t.target=[r/1e3/2,s/1e3/2,o/1e3/2]}}nodeClicked(t){this.ga.event("node_click","organ",t.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===t.node["@id"]?"":t.node["@id"]}}return n.\u0275fac=function(t){return new(t||n)(Oe(qb))},n.\u0275cmp=rn({type:n,selectors:[["ccf-organ"]],viewQuery:function(t,i){if(1&t&&hr(vke,7),2&t){let r;Gn(r=$n())&&(i.bodyUI=r.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange"},features:[Fi],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(t,i){1&t&&(wt(0,"ccf-body-ui",0,1),Tn("nodeClick",function(s){return i.nodeClicked(s)})("initialized",function(){return i.zoomToFitOrgan()}),Et(),wt(2,"div",2),wt(3,"ccf-slide-toggle",3),Tn("valueChange",function(s){return i.updateSex(s)}),Et(),wt(4,"ccf-slide-toggle",3),Tn("valueChange",function(s){return i.updateSide(s)}),Et(),Et()),2&t&&(Jt("scene",i.scene)("interactive",!0),zt(3),Jt("labels",TE(8,wke))("value",i.sex)("hidden",!i.sex),zt(1),Jt("labels",TE(9,Eke))("value",i.side)("hidden",!i.side))},directives:[b2e,bke],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0}),n})();function Ske(n,e){if(1&n&&(wt(0,"div",3),wt(1,"div",4),Jn(2),Et(),wt(3,"div",5),Jn(4),Et(),Et()),2&n){const t=e.$implicit;zt(2),gs(t.count),zt(2),gs(t.label)}}let Cke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rn({type:n,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(t,i){1&t&&(wt(0,"div",0),wt(1,"div",1),Jn(2),Et(),wi(3,Ske,5,2,"div",2),Et()),2&t&&(zt(2),xo(" ",i.statsLabel," "),zt(1),Jt("ngForOf",i.stats))},directives:[Yu],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0}),n})();function Tke(n,e){if(1&n){const t=wl();wt(0,"div",6),wt(1,"div",7),wt(2,"div",8),Jn(3),Et(),wt(4,"div",9),Tn("click",function(){const s=_r(t).$implicit;return _i().goToURL(s.buttonUrl)}),Jn(5),Et(),Et(),Et()}if(2&n){const t=e.$implicit;zt(3),gs(t.body),zt(1),Jt("gaLabel",t.buttonUrl),zt(1),xo(" ",t.buttonTitle,"")}}function Ake(n,e){if(1&n){const t=wl();wt(0,"div",10),Tn("click",function(){const s=_r(t).$implicit;return _i().goToURL(s.buttonUrl)}),Jn(1),Et()}if(2&n){const t=e.$implicit;Jt("gaLabel",t.buttonUrl),zt(1),gs(t.buttonTitle)}}let Mke=(()=>{class n{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}goToURL(t){window.open(t,"_blank")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rn({type:n,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(t,i){1&t&&(wt(0,"div",0),wi(1,Tke,6,3,"div",1),Et(),wt(2,"div",2),wt(3,"div",3),Jn(4,"Human Reference Atlas (HRA) Deep Dive"),Et(),wt(5,"div",4),wi(6,Ake,2,2,"div",5),Et(),Et()),2&t&&(zt(1),Jt("ngForOf",i.linkCards),zt(5),Jt("ngForOf",i.deepDives))},directives:[mW,Yu,_W],styles:[".link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:Inter Variable,Helvetica,Arial,sans-serif}"],changeDetection:0}),n})();const Dke=["left"],Ike=["right"],Oke=function(){return[]},Rke=[{color:[0,0,0,0],opacity:.001}];let Nke=(()=>{class n{constructor(t,i,r){this.ga=i,this.configState=r,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(be(s=>({tmc:s}))),this.latestConfig={},this.organInfo$=r.config$.pipe(cr(s=>this.latestConfig=s),is(s=>{var o,a,l;return t.getOrganInfo(null!==(o=s.organIri)&&void 0!==o?o:"",null===(l=null===(a=s.side)||void 0===a?void 0:a.toLowerCase)||void 0===l?void 0:l.call(a),s.sex)}),cr(s=>this.logOrganLookup(s)),cr(s=>this.latestOrganInfo=s),Wa(1)),this.organ$=this.organInfo$.pipe(is(s=>s?t.getOrgan(s,s.hasSex?this.latestConfig.sex:void 0):sn(void 0)),cr(s=>{var o;if(s&&this.latestOrganInfo){const a=(null===(o=this.latestOrganInfo)||void 0===o?void 0:o.hasSex)?s.sex:void 0;a!==this.latestConfig.sex&&this.updateInput("sex",a),s.side!==this.latestConfig.side&&this.updateInput("side",s.side)}}),Wa(1)),this.scene$=this.organ$.pipe(is(s=>s&&this.latestOrganInfo?t.getOrganScene(this.latestOrganInfo,s.sex):sn(Rke))),this.stats$=this.organ$.pipe(is(s=>s&&this.latestOrganInfo?t.getOrganStats(this.latestOrganInfo,s.sex):sn([]))),this.statsLabel$=this.organ$.pipe(be(s=>this.makeStatsLabel(this.latestOrganInfo,null==s?void 0:s.sex)),Oo("Loading...")),this.blocks$=this.organ$.pipe(is(s=>s&&this.latestOrganInfo?t.getBlocks(this.latestOrganInfo,s.sex):sn([])))}ngAfterViewInit(){const{left:t,right:i}=this;t.nativeElement.style.height=`${i.nativeElement.offsetHeight}px`}updateInput(t,i){this.configState.patchConfig({[t]:i})}makeStatsLabel(t,i){let r=[`Unknown IRI: ${this.latestConfig.organIri}`];if(t){const s=t.side?t.side.charAt(0).toUpperCase()+t.side.slice(1):void 0;r=[i,t.organ,s]}return r.filter(s=>!!s).join(", ")}logOrganLookup(t){this.ga.event(t?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}}return n.\u0275fac=function(t){return new(t||n)(Oe(ske),Oe(qb),Oe(Qm))},n.\u0275cmp=rn({type:n,selectors:[["ccf-root"]],viewQuery:function(t,i){if(1&t&&(hr(Dke,7,gn),hr(Ike,7,gn)),2&t){let r;Gn(r=$n())&&(i.left=r.first),Gn(r=$n())&&(i.right=r.first)}},decls:16,vars:25,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(t,i){if(1&t&&(wt(0,"div",0),wt(1,"div",1,2),wt(3,"ccf-organ",3),Tn("sexChange",function(s){return i.updateInput("sex",s)})("sideChange",function(s){return i.updateInput("side",s)}),Ns(4,"async"),Ns(5,"async"),Ns(6,"async"),Ns(7,"async"),Ns(8,"async"),Ns(9,"async"),Et(),Et(),wt(10,"div",4,5),ni(12,"ccf-stats-list",6),Ns(13,"async"),Ns(14,"async"),ni(15,"ccf-link-cards"),Et(),Et()),2&t){let r;zt(3),Jt("blocks",To(4,8,i.blocks$))("filter",To(5,10,i.filter$))("sex",To(6,12,i.sex$))("side",To(7,14,i.side$))("organ",To(8,16,i.organ$))("scene",null!==(r=To(9,18,i.scene$))&&void 0!==r?r:TE(24,Oke)),zt(9),Jt("statsLabel",To(13,20,i.statsLabel$))("stats",To(14,22,i.stats$))}},directives:[xke,Cke,Mke],pipes:[g0],styles:[".container[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:Inter;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:29rem}"],changeDetection:0}),n})();function Pke(n,e){1&n&&ni(0,"ccf-root")}function kke(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){const i=KD.json(n);if(t(i))return i}else if(t(n))return n;throw new Error("Invalid data sources")}function Fke(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){if(!(null==n?void 0:n.startsWith("[")))return[n];{const i=KD.json(n);if(t(i))return i}}else if(t(n))return n;throw new Error("Invalid data sources")}let Lke=(()=>{class n extends fie{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:Object.assign(Object.assign({},If.dbOptions),globalThis.dbOptions),parse:{dataSources:kke,highlightProviders:Fke,useRemoteApi:KD.boolean}}),this.sex="Female",this.side="Left"}}return n.\u0275fac=function(t){return new(t||n)(Oe(Qm),Oe(Mr))},n.\u0275cmp=rn({type:n,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint"},features:[En],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,i){1&t&&wi(0,Pke,1,0,"ccf-root",0),2&t&&Jt("ngIf",i.initialized)},directives:[ac,Nke],encapsulation:2,changeDetection:0}),n})(),Bke=(()=>{class n extends eke{selectToken(t){return t.useRemoteApi&&t.remoteApiEndpoint?Q2e:J2e}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zi(n)))(i||n)}}(),n.\u0275prov=tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vke=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[hs,el,l9,...t]}}}return n.\u0275fac=function(t){return new(t||n)(ke(hs,2),ke(el,2))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({}),n})();const SC=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class zke{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=qf(this.action),i=function(n){return SC(n.getHours(),2)+":"+SC(n.getMinutes(),2)+":"+SC(n.getSeconds(),2)+"."+SC(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class Hke{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch(i){console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch(e){this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const Mq=new Ht("NGXS_LOGGER_PLUGIN_OPTIONS");let Gke=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new Hke(this._options),this._store=this._store||this._injector.get(hu);const s=new zke(i,this._store,this._logWriter);return s.dispatched(t),r(t,i).pipe(cr(o=>{s.completed(o)}),bc(o=>{throw s.errored(o),o}))}}return n.\u0275fac=function(t){return new(t||n)(ke(Mq),ke(Hn))},n.\u0275prov=tt({token:n,factory:n.\u0275fac}),n})();const Dq=new Ht("LOGGER_USER_OPTIONS");function $ke(n){return Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0},n)}let Wke=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:f6,useClass:Gke,multi:!0},{provide:Dq,useValue:t},{provide:Mq,useFactory:$ke,deps:[Dq]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({}),n})();const qke=[Qm];let Yke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[Vke.forRoot(),Yo.forRoot(qke,{developmentMode:!If.production}),Wke.forRoot({disabled:If.production})]]}),n})(),Xke=(()=>{class n{constructor(t){if(t)throw new Error("The core module should only be imported once in the root module")}}return n.\u0275fac=function(t){return new(t||n)(ke(n,12))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:[{provide:Eq,useExisting:Bke}],imports:[[T7,oRe.forRoot({gaToken:If.googleAnalyticsToken,appName:"organ-info",projectName:"ccf",developmentMode:!If.production}),pRe.forRoot(()=>new Yb({basePath:If.dbOptions.remoteApiEndpoint})),Yke]]}),n})(),Kke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[fr,yke]]}),n})(),Qke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[fr,v2e,Kke]]}),n})(),Zke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[fr,rC]]}),n})(),Jke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=tn({type:n}),n.\u0275inj=St({imports:[[fr]]}),n})(),eFe=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function(n,e){const t=function(n,e){return e.get(El).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new aie(n,e.injector),r=function(n){const e={};return n.forEach(({propName:t,templateName:i})=>{e[function(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=t}),e}(t);class s extends cie{constructor(a){super(),this.injector=a}get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:l})=>{if(!this.hasOwnProperty(l))return;const c=this[l];delete this[l],a.setInputValue(l,c)})}return this._ngElementStrategy}attributeChangedCallback(a,l,c,u){this.ngElementStrategy.setInputValue(r[a],c)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=function(n,e,t){if("function"!=typeof CustomEvent){const s=n.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,t),s}return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:t})}(this.ownerDocument,a.name,a.value);this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(r),t.forEach(({propName:o})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(a){this.ngElementStrategy.setInputValue(o,a)},configurable:!0,enumerable:!0})}),s}(Lke,{injector:this.injector});customElements.define("ccf-organ-info",t)}}return n.\u0275fac=function(t){return new(t||n)(ke(Hn))},n.\u0275mod=tn({type:n}),n.\u0275inj=St({providers:[],imports:[[qD,Xke,Zke,Jke,Qke]]}),n})();If.production&&function(){if(rB)throw new Error("Cannot enable prod mode after platform setup.");iB=!1}(),Ine().bootstrapModule(eFe).catch(n=>console.error(n))},1052:Vt=>{function Xe(lt,ee,Ct,je,Q,Ee,pe){try{var X=lt[Ee](pe),U=X.value}catch(F){return void Ct(F)}X.done?ee(U):Promise.resolve(U).then(je,Q)}Vt.exports=function(lt){return function(){var ee=this,Ct=arguments;return new Promise(function(je,Q){var Ee=lt.apply(ee,Ct);function pe(U){Xe(Ee,je,Q,pe,X,"next",U)}function X(U){Xe(Ee,je,Q,pe,X,"throw",U)}pe(void 0)})}},Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0},1948:Vt=>{Vt.exports=function(et){return et&&et.__esModule?et:{default:et}},Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0},4321:Vt=>{function Xe(et){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(Vt.exports=Xe=function(ee){return typeof ee},Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0):(Vt.exports=Xe=function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0),Xe(et)}Vt.exports=Xe,Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0},9082:Vt=>{function Xe(et){return Promise.resolve().then(()=>{var lt=new Error("Cannot find module '"+et+"'");throw lt.code="MODULE_NOT_FOUND",lt})}Xe.keys=()=>[],Xe.resolve=Xe,Xe.id=9082,Vt.exports=Xe},9521:()=>{},9125:()=>{},5307:()=>{}},Vt=>{Vt(Vt.s=2829)}]);