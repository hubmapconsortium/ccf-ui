(()=>{"use strict";var e,p={},b={};function t(e){var f=b[e];if(void 0!==f)return f.exports;var r=b[e]={id:e,loaded:!1,exports:{}};return p[e].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}t.m=p,e=[],t.O=(f,r,a,o)=>{if(!r){var c=1/0;for(n=0;n<e.length;n++){for(var[r,a,o]=e[n],l=!0,i=0;i<r.length;i++)(!1&o||c>=o)&&Object.keys(t.O).every(h=>t.O[h](r[i]))?r.splice(i--,1):(l=!1,o<c&&(c=o));if(l){e.splice(n--,1);var s=a();void 0!==s&&(f=s)}}return f}o=o||0;for(var n=e.length;n>0&&e[n-1][2]>o;n--)e[n]=e[n-1];e[n]=[r,a,o]},t.n=e=>{var f=e&&e.__esModule?()=>e.default:()=>e;return t.d(f,{a:f}),f},(()=>{var f,e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__;t.t=function(r,a){if(1&a&&(r=this(r)),8&a||"object"==typeof r&&r&&(4&a&&r.__esModule||16&a&&"function"==typeof r.then))return r;var o=Object.create(null);t.r(o);var n={};f=f||[null,e({}),e([]),e(e)];for(var c=2&a&&r;"object"==typeof c&&!~f.indexOf(c);c=e(c))Object.getOwnPropertyNames(c).forEach(l=>n[l]=()=>r[l]);return n.default=()=>r,t.d(o,n),o}})(),t.d=(e,f)=>{for(var r in f)t.o(f,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:f[r]})},t.o=(e,f)=>Object.prototype.hasOwnProperty.call(e,f),t.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};t.O.j=a=>0===e[a];var f=(a,o)=>{var i,s,[n,c,l]=o,_=0;if(n.some(u=>0!==e[u])){for(i in c)t.o(c,i)&&(t.m[i]=c[i]);if(l)var d=l(t)}for(a&&a(o);_<n.length;_++)t.o(e,s=n[_])&&e[s]&&e[s][0](),e[s]=0;return t.O(d)},r=self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[];r.forEach(f.bind(null,0)),r.push=f.bind(null,r.push.bind(r))})()})();
(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[429],{2978:(W,ye,Me)=>{"use strict";Me(8332),Me(894),Me(9187)},9187:()=>{!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const W=HTMLElement;window.HTMLElement=function(){return Reflect.construct(W,[],this.constructor)},HTMLElement.prototype=W.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,W)}()}()},894:()=>{!function(W,ye){"use strict";function Me(){var n=Je.splice(0,Je.length);for(N=0;n.length;)n.shift().call(null,n.shift())}function xe(n,o){for(var l=0,f=n.length;l<f;l++)Ze(n[l],o)}function Ue(n){return function(o){Pe(o)&&(Ze(o,n),r.length&&xe(o.querySelectorAll(r),n))}}function Ge(n){var o=t.call(n,"is"),l=n.nodeName.toUpperCase(),f=s.call(Be,o?Ie+o.toUpperCase():Ve+l);return o&&-1<f&&!We(l,o)?-1:f}function We(n,o){return-1<r.indexOf(n+'[is="'+o+'"]')}function Xe(n){var o=n.currentTarget,l=n.attrChange,f=n.attrName,T=n.target,w=n[tt]||2,H=n[at]||3;!J||T&&T!==o||!o[He]||"style"===f||n.prevValue===n.newValue&&(""!==n.newValue||l!==w&&l!==H)||o[He](f,l===w?null:n.prevValue,l===H?null:n.newValue)}function Oe(n){var o=Ue(n);return function(l){Je.push(o,l.target),N&&clearTimeout(N),N=setTimeout(Me,1)}}function Le(n){Q&&(Q=!1,n.currentTarget.removeEventListener(_t,Le)),r.length&&xe((n.target||U).querySelectorAll(r),n.detail===Ce?Ce:Se),oe&&function K(){for(var n,o=0,l=Te.length;o<l;o++)i.contains(n=Te[o])||(l--,Te.splice(o--,1),Ze(n,Ce))}()}function ze(n,o){var l=this;G.call(l,n,o),it.call(l,{target:l})}function nt(n,o,l){var f=o.apply(n,l),T=Ge(f);return-1<T&&be(f,e[T]),l.pop()&&r.length&&function ft(n){for(var o,l=0,f=n.length;l<f;l++)be(o=n[l],e[Ge(o)])}(f.querySelectorAll(r)),f}function Ye(n,o){B(n,o),je?je.observe(n,E):(A&&(n.setAttribute=ze,n[Re]=ke(n),n[ve](yt,it)),n[ve](Ae,Xe)),n[et]&&J&&(n.created=!0,n[et](),n.created=!1)}function Ke(n){throw new Error("A "+n+" type is already registered")}function Ze(n,o){var l,f,T=Ge(n);-1<T&&!y.call(n,"TEMPLATE")&&(ct(n,e[T]),T=0,o!==Se||n[Se]?o!==Ce||n[Ce]||(n[Se]=!1,n[Ce]=!0,f="disconnected",T=1):(n[Ce]=!1,n[Se]=!0,f="connected",T=1,oe&&s.call(Te,n)<0&&Te.push(n)),T&&(l=n[o+me]||n[f+me])&&l.call(n))}function fe(){}function ht(n,o,l){var f=l&&l[qe]||"",T=o.prototype,w=_(T),H=o.observedAttributes||D,ee={prototype:w};se(w,et,{value:function(){if(Y)Y=!1;else if(!this[X]){this[X]=!0,new o(this),T[et]&&T[et].call(this);var x=ae[v.get(o)];(!re||x.create.length>1)&&lt(this)}}}),se(w,He,{value:function(x){-1<s.call(H,x)&&T[He]&&T[He].apply(this,arguments)}}),T[Tt]&&se(w,Et,{value:T[Tt]}),T[ut]&&se(w,pt,{value:T[ut]}),f&&(ee[qe]=f),n=n.toUpperCase(),ae[n]={constructor:o,create:f?[f,$(n)]:[n]},v.set(o,n),U[Fe](n.toLowerCase(),ee),ot(n),V[n].r()}function rt(n){var o=ae[n.toUpperCase()];return o&&o.constructor}function dt(n){return"string"==typeof n?n:n&&n.is||""}function lt(n){for(var o,l=n[He],f=l?n.attributes:D,T=f.length;T--;)l.call(n,(o=f[T]).name||o.nodeName,null,o.value||o.nodeValue)}function ot(n){return(n=n.toUpperCase())in V||(V[n]={},V[n].p=new Ee(function(o){V[n].r=o})),V[n].p}function $e(){ce&&delete W.customElements,p(W,"customElements",{configurable:!0,value:new fe}),p(W,"CustomElementRegistry",{configurable:!0,value:fe});for(var n=st.get(/^HTML[A-Z]*[a-z]/),o=n.length;o--;function(l){var f=W[l];if(f){W[l]=function(T){var w,H;return T||(T=this),T[X]||(Y=!0,w=ae[v.get(T.constructor)],(T=(H=re&&1===w.create.length)?Reflect.construct(f,D,w.constructor):U.createElement.apply(U,w.create))[X]=!0,Y=!1,H||lt(T)),T},W[l].prototype=f.prototype;try{f.prototype.constructor=W[l]}catch{p(f,X,{value:W[l]})}}}(n[o]));U.createElement=function(l,f){var T=dt(f);return T?c.call(this,l,$(T)):c.call(this,l)},L||(Z=!0,U[Fe](""))}var U=W.document,ge=W.Object,st=function(n){var o,l,f,T,w=/^[A-Z]+[a-z]/,ee=function(he,ue){(ue=ue.toLowerCase())in x||(x[he]=(x[he]||[]).concat(ue),x[ue]=x[ue.toUpperCase()]=he)},x=(ge.create||ge)(null),ne={};for(l in n)for(T in n[l])for(x[T]=f=n[l][T],o=0;o<f.length;o++)x[f[o].toLowerCase()]=x[f[o].toUpperCase()]=T;return ne.get=function(he){return"string"==typeof he?x[he]||(w.test(he)?[]:""):function(he){var ue,de=[];for(ue in x)he.test(ue)&&de.push(ue);return de}(he)},ne.set=function(he,ue){return w.test(he)?ee(he,ue):ee(ue,he),ne},ne}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof ye&&(ye={type:ye||"auto"});var Je,it,Qe,ke,je,we,ct,be,Ne,n,o,l,f,T,Fe="registerElement",mt=1e5*W.Math.random()>>0,Re="__"+Fe+mt,ve="addEventListener",Se="attached",me="Callback",Ce="detached",qe="extends",He="attributeChanged"+me,Et=Se+me,Tt="connected"+me,ut="disconnected"+me,et="created"+me,pt=Ce+me,tt="ADDITION",at="REMOVAL",Ae="DOMAttrModified",_t="DOMContentLoaded",yt="DOMSubtreeModified",Ve="<",Ie="=",gt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,vt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Be=[],e=[],r="",i=U.documentElement,s=Be.indexOf||function(n){for(var o=this.length;o--&&this[o]!==n;);return o},a=ge.prototype,d=a.hasOwnProperty,k=a.isPrototypeOf,p=ge.defineProperty,D=[],P=ge.getOwnPropertyDescriptor,M=ge.getOwnPropertyNames,q=ge.getPrototypeOf,j=ge.setPrototypeOf,F=!!ge.__proto__,X="__dreCEv1",ce=W.customElements,re=!/^force/.test(ye.type)&&!!(ce&&ce.define&&ce.get&&ce.whenDefined),S=ge.create||ge,b=W.Map||function(){var n,o=[],l=[];return{get:function(f){return l[s.call(o,f)]},set:function(f,T){(n=s.call(o,f))<0?l[o.push(f)-1]=T:l[n]=T}}},Ee=W.Promise||function(n){function o(w){for(f=!0;l.length;)l.shift()(w)}var l=[],f=!1,T={catch:function(){return T},then:function(w){return l.push(w),f&&setTimeout(o,1),T}};return n(o),T},Y=!1,ae=S(null),V=S(null),v=new b,$=function(n){return n.toLowerCase()},_=ge.create||function n(o){return o?(n.prototype=o,new n):this},B=j||(F?function(n,o){return n.__proto__=o,n}:M&&P?function(){function n(o,l){for(var f,T=M(l),w=0,H=T.length;w<H;w++)d.call(o,f=T[w])||p(o,f,P(l,f))}return function(o,l){do{n(o,l)}while((l=q(l))&&!k.call(l,o));return o}}():function(n,o){for(var l in o)n[l]=o[l];return n}),O=W.MutationObserver||W.WebKitMutationObserver,pe=W.HTMLAnchorElement,te=(W.HTMLElement||W.Element||W.Node).prototype,oe=!k.call(te,i),se=oe?function(n,o,l){return n[o]=l.value,n}:p,Pe=oe?function(n){return 1===n.nodeType}:function(n){return k.call(te,n)},Te=oe&&[],le=te.attachShadow,z=te.cloneNode,y=te.closest||function(n){for(var o=this;o&&o.nodeName!==n;)o=o.parentNode;return o},u=te.dispatchEvent,t=te.getAttribute,g=te.hasAttribute,R=te.removeAttribute,G=te.setAttribute,h=U.createElement,m=U.importNode,c=h,E=O&&{attributes:!0,characterData:!0,attributeOldValue:!0},C=O||function(n){A=!1,i.removeEventListener(Ae,C)},N=0,L=Fe in U&&!/^force-all/.test(ye.type),I=!0,Z=!1,A=!0,Q=!0,J=!0;if(O&&((Ne=U.createElement("div")).innerHTML="<div><div></div></div>",new O(function(n,o){if(n[0]&&"childList"==n[0].type&&!n[0].removedNodes[0].childNodes.length){var l=(Ne=P(te,"innerHTML"))&&Ne.set;l&&p(te,"innerHTML",{set:function(f){for(;this.lastChild;)this.removeChild(this.lastChild);l.call(this,f)}})}o.disconnect(),Ne=null}).observe(Ne,{childList:!0,subtree:!0}),Ne.innerHTML=""),L||(j||F?(ct=function(n,o){k.call(o,n)||Ye(n,o)},be=Ye):(ct=function(n,o){n[Re]||(n[Re]=ge(!0),Ye(n,o))},be=ct),oe?(A=!1,n=P(te,ve),o=n.value,l=function(w){var H=new CustomEvent(Ae,{bubbles:!0});H.attrName=w,H.prevValue=t.call(this,w),H.newValue=null,H[at]=H.attrChange=2,R.call(this,w),u.call(this,H)},f=function(w,H){var ee=g.call(this,w),x=ee&&t.call(this,w),ne=new CustomEvent(Ae,{bubbles:!0});G.call(this,w,H),ne.attrName=w,ne.prevValue=ee?x:null,ne.newValue=H,ee?ne.MODIFICATION=ne.attrChange=1:ne[tt]=ne.attrChange=0,u.call(this,ne)},T=function(w){var H,ee=w.currentTarget,x=ee[Re],ne=w.propertyName;x.hasOwnProperty(ne)&&(x=x[ne],(H=new CustomEvent(Ae,{bubbles:!0})).attrName=x.name,H.prevValue=x.value||null,H.newValue=x.value=ee[ne]||null,null==H.prevValue?H[tt]=H.attrChange=0:H.MODIFICATION=H.attrChange=1,u.call(ee,H))},n.value=function(w,H,ee){w===Ae&&this[He]&&this.setAttribute!==f&&(this[Re]={className:{name:"class",value:this.className}},this.setAttribute=f,this.removeAttribute=l,o.call(this,"propertychange",T)),o.call(this,w,H,ee)},p(te,ve,n)):O||(i[ve](Ae,C),i.setAttribute(Re,1),i.removeAttribute(Re),A&&(it=function(n){var o,l,f,T=this;if(T===n.target){for(f in o=T[Re],T[Re]=l=ke(T),l){if(!(f in o))return Qe(0,T,f,o[f],l[f],tt);if(l[f]!==o[f])return Qe(1,T,f,o[f],l[f],"MODIFICATION")}for(f in o)if(!(f in l))return Qe(2,T,f,o[f],l[f],at)}},Qe=function(n,o,l,f,T,w){var H={attrChange:n,currentTarget:o,attrName:l,prevValue:f,newValue:T};H[w]=n,Xe(H)},ke=function(n){for(var o,l,f={},T=n.attributes,w=0,H=T.length;w<H;w++)"setAttribute"!==(l=(o=T[w]).name)&&(f[l]=o.value);return f})),U[Fe]=function(n,o){if(l=n.toUpperCase(),I&&(I=!1,O?(je=function(x,ne){function he(ue,de){for(var _e=0,De=ue.length;_e<De;de(ue[_e++]));}return new O(function(ue){for(var de,_e,De,kt=0,bt=ue.length;kt<bt;kt++)"childList"===(de=ue[kt]).type?(he(de.addedNodes,x),he(de.removedNodes,ne)):(_e=de.target,J&&_e[He]&&"style"!==de.attributeName&&(De=t.call(_e,de.attributeName))!==de.oldValue&&_e[He](de.attributeName,de.oldValue,De))})}(Ue(Se),Ue(Ce)),(we=function(x){return je.observe(x,{childList:!0,subtree:!0}),x})(U),le&&(te.attachShadow=function(){return we(le.apply(this,arguments))})):(Je=[],U[ve]("DOMNodeInserted",Oe(Se)),U[ve]("DOMNodeRemoved",Oe(Ce))),U[ve](_t,Le),U[ve]("readystatechange",Le),U.importNode=function(x,ne){switch(x.nodeType){case 1:return nt(U,m,[x,!!ne]);case 11:for(var he=U.createDocumentFragment(),ue=x.childNodes,de=ue.length,_e=0;_e<de;_e++)he.appendChild(U.importNode(ue[_e],!!ne));return he;default:return z.call(x,!!ne)}},te.cloneNode=function(x){return nt(this,z,[!!x])}),Z)return Z=!1;if(-2<s.call(Be,Ie+l)+s.call(Be,Ve+l)&&Ke(n),!gt.test(l)||-1<s.call(vt,l))throw new Error("The type "+n+" is invalid");var l,f,T=function(){return H?U.createElement(ee,l):U.createElement(ee)},w=o||a,H=d.call(w,qe),ee=H?o[qe].toUpperCase():l;return H&&-1<s.call(Be,Ve+ee)&&Ke(ee),f=Be.push((H?Ie:Ve)+l)-1,r=r.concat(r.length?",":"",H?ee+'[is="'+n.toLowerCase()+'"]':ee),T.prototype=e[f]=d.call(w,"prototype")?w.prototype:_(te),r.length&&xe(U.querySelectorAll(r),Se),T},U.createElement=c=function(n,o){var l=dt(o),f=l?h.call(U,n,$(l)):h.call(U,n),T=""+n,w=s.call(Be,(l?Ie:Ve)+(l||T).toUpperCase()),H=-1<w;return l&&(f.setAttribute("is",l=l.toLowerCase()),H&&(H=We(T.toUpperCase(),l))),J=!U.createElement.innerHTMLHelper,H&&be(f,e[w]),f}),addEventListener("beforeunload",function(){delete U.createElement,delete U.importNode,delete U[Fe]},!1),fe.prototype={constructor:fe,define:re?function(n,o,l){if(l)ht(n,o,l);else{var f=n.toUpperCase();ae[f]={constructor:o,create:[f]},v.set(o,f),ce.define(n,o)}}:ht,get:re?function(n){return ce.get(n)||rt(n)}:rt,whenDefined:re?function(n){return Ee.race([ce.whenDefined(n),ot(n)])}:ot},!ce||/^force/.test(ye.type))$e();else if(!ye.noBuiltIn)try{!function(n,o,l){var f=new RegExp("^<a\\s+is=('|\")"+l+"\\1></a>$");if(o[qe]="a",(n.prototype=_(pe.prototype)).constructor=n,W.customElements.define(l,n,o),!f.test(U.createElement("a",{is:l}).outerHTML)||!f.test((new n).outerHTML))throw o}(function n(){return Reflect.construct(pe,[],n)},{},"document-register-element-a"+mt)}catch{$e()}if(!ye.noBuiltIn)try{if(h.call(U,"a","a").outerHTML.indexOf("is")<0)throw{}}catch{$=function(o){return{is:o.toLowerCase()}}}}(window)},8332:()=>{"use strict";!function(e){const r=e.performance;function i(z){r&&r.mark&&r.mark(z)}function s(z,y){r&&r.measure&&r.measure(z,y)}i("Zone");const a=e.__Zone_symbol_prefix||"__zone_symbol__";function d(z){return a+z}const k=!0===e[d("forceDuplicateZoneCheck")];if(e.Zone){if(k||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let p=(()=>{class y{static assertZonePatched(){if(e.Promise!==te.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=y.current;for(;t.parent;)t=t.parent;return t}static get current(){return se.zone}static get currentTask(){return Pe}static __load_patch(t,g,R=!1){if(te.hasOwnProperty(t)){if(!R&&k)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const G="Zone:"+t;i(G),te[t]=g(e,y,oe),s(G,G)}}get parent(){return this._parent}get name(){return this._name}constructor(t,g){this._parent=t,this._name=g?g.name||"unnamed":"<root>",this._properties=g&&g.properties||{},this._zoneDelegate=new P(this,this._parent&&this._parent._zoneDelegate,g)}get(t){const g=this.getZoneWith(t);if(g)return g._properties[t]}getZoneWith(t){let g=this;for(;g;){if(g._properties.hasOwnProperty(t))return g;g=g._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,g){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const R=this._zoneDelegate.intercept(this,t,g),G=this;return function(){return G.runGuarded(R,this,arguments,g)}}run(t,g,R,G){se={parent:se,zone:this};try{return this._zoneDelegate.invoke(this,t,g,R,G)}finally{se=se.parent}}runGuarded(t,g=null,R,G){se={parent:se,zone:this};try{try{return this._zoneDelegate.invoke(this,t,g,R,G)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{se=se.parent}}runTask(t,g,R){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||Ee).name+"; Execution: "+this.name+")");if(t.state===Y&&(t.type===pe||t.type===O))return;const G=t.state!=v;G&&t._transitionTo(v,V),t.runCount++;const h=Pe;Pe=t,se={parent:se,zone:this};try{t.type==O&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,g,R)}catch(m){if(this._zoneDelegate.handleError(this,m))throw m}}finally{t.state!==Y&&t.state!==_&&(t.type==pe||t.data&&t.data.isPeriodic?G&&t._transitionTo(V,v):(t.runCount=0,this._updateTaskCount(t,-1),G&&t._transitionTo(Y,v,Y))),se=se.parent,Pe=h}}scheduleTask(t){if(t.zone&&t.zone!==this){let R=this;for(;R;){if(R===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);R=R.parent}}t._transitionTo(ae,Y);const g=[];t._zoneDelegates=g,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(R){throw t._transitionTo(_,ae,Y),this._zoneDelegate.handleError(this,R),R}return t._zoneDelegates===g&&this._updateTaskCount(t,1),t.state==ae&&t._transitionTo(V,ae),t}scheduleMicroTask(t,g,R,G){return this.scheduleTask(new M(B,t,g,R,G,void 0))}scheduleMacroTask(t,g,R,G,h){return this.scheduleTask(new M(O,t,g,R,G,h))}scheduleEventTask(t,g,R,G,h){return this.scheduleTask(new M(pe,t,g,R,G,h))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||Ee).name+"; Execution: "+this.name+")");if(t.state===V||t.state===v){t._transitionTo($,V,v);try{this._zoneDelegate.cancelTask(this,t)}catch(g){throw t._transitionTo(_,$),this._zoneDelegate.handleError(this,g),g}return this._updateTaskCount(t,-1),t._transitionTo(Y,$),t.runCount=0,t}}_updateTaskCount(t,g){const R=t._zoneDelegates;-1==g&&(t._zoneDelegates=null);for(let G=0;G<R.length;G++)R[G]._updateTaskCount(t.type,g)}}return y.__symbol__=d,y})();const D={name:"",onHasTask:(z,y,u,t)=>z.hasTask(u,t),onScheduleTask:(z,y,u,t)=>z.scheduleTask(u,t),onInvokeTask:(z,y,u,t,g,R)=>z.invokeTask(u,t,g,R),onCancelTask:(z,y,u,t)=>z.cancelTask(u,t)};class P{constructor(y,u,t){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=y,this._parentDelegate=u,this._forkZS=t&&(t&&t.onFork?t:u._forkZS),this._forkDlgt=t&&(t.onFork?u:u._forkDlgt),this._forkCurrZone=t&&(t.onFork?this.zone:u._forkCurrZone),this._interceptZS=t&&(t.onIntercept?t:u._interceptZS),this._interceptDlgt=t&&(t.onIntercept?u:u._interceptDlgt),this._interceptCurrZone=t&&(t.onIntercept?this.zone:u._interceptCurrZone),this._invokeZS=t&&(t.onInvoke?t:u._invokeZS),this._invokeDlgt=t&&(t.onInvoke?u:u._invokeDlgt),this._invokeCurrZone=t&&(t.onInvoke?this.zone:u._invokeCurrZone),this._handleErrorZS=t&&(t.onHandleError?t:u._handleErrorZS),this._handleErrorDlgt=t&&(t.onHandleError?u:u._handleErrorDlgt),this._handleErrorCurrZone=t&&(t.onHandleError?this.zone:u._handleErrorCurrZone),this._scheduleTaskZS=t&&(t.onScheduleTask?t:u._scheduleTaskZS),this._scheduleTaskDlgt=t&&(t.onScheduleTask?u:u._scheduleTaskDlgt),this._scheduleTaskCurrZone=t&&(t.onScheduleTask?this.zone:u._scheduleTaskCurrZone),this._invokeTaskZS=t&&(t.onInvokeTask?t:u._invokeTaskZS),this._invokeTaskDlgt=t&&(t.onInvokeTask?u:u._invokeTaskDlgt),this._invokeTaskCurrZone=t&&(t.onInvokeTask?this.zone:u._invokeTaskCurrZone),this._cancelTaskZS=t&&(t.onCancelTask?t:u._cancelTaskZS),this._cancelTaskDlgt=t&&(t.onCancelTask?u:u._cancelTaskDlgt),this._cancelTaskCurrZone=t&&(t.onCancelTask?this.zone:u._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const g=t&&t.onHasTask;(g||u&&u._hasTaskZS)&&(this._hasTaskZS=g?t:D,this._hasTaskDlgt=u,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=y,t.onScheduleTask||(this._scheduleTaskZS=D,this._scheduleTaskDlgt=u,this._scheduleTaskCurrZone=this.zone),t.onInvokeTask||(this._invokeTaskZS=D,this._invokeTaskDlgt=u,this._invokeTaskCurrZone=this.zone),t.onCancelTask||(this._cancelTaskZS=D,this._cancelTaskDlgt=u,this._cancelTaskCurrZone=this.zone))}fork(y,u){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,y,u):new p(y,u)}intercept(y,u,t){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,y,u,t):u}invoke(y,u,t,g,R){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,y,u,t,g,R):u.apply(t,g)}handleError(y,u){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,y,u)}scheduleTask(y,u){let t=u;if(this._scheduleTaskZS)this._hasTaskZS&&t._zoneDelegates.push(this._hasTaskDlgtOwner),t=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,y,u),t||(t=u);else if(u.scheduleFn)u.scheduleFn(u);else{if(u.type!=B)throw new Error("Task is missing scheduleFn.");S(u)}return t}invokeTask(y,u,t,g){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,y,u,t,g):u.callback.apply(t,g)}cancelTask(y,u){let t;if(this._cancelTaskZS)t=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,y,u);else{if(!u.cancelFn)throw Error("Task is not cancelable");t=u.cancelFn(u)}return t}hasTask(y,u){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,y,u)}catch(t){this.handleError(y,t)}}_updateTaskCount(y,u){const t=this._taskCounts,g=t[y],R=t[y]=g+u;if(R<0)throw new Error("More tasks executed then were scheduled.");0!=g&&0!=R||this.hasTask(this.zone,{microTask:t.microTask>0,macroTask:t.macroTask>0,eventTask:t.eventTask>0,change:y})}}class M{constructor(y,u,t,g,R,G){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=y,this.source=u,this.data=g,this.scheduleFn=R,this.cancelFn=G,!t)throw new Error("callback is not defined");this.callback=t;const h=this;this.invoke=y===pe&&g&&g.useG?M.invokeTask:function(){return M.invokeTask.call(e,h,this,arguments)}}static invokeTask(y,u,t){y||(y=this),Te++;try{return y.runCount++,y.zone.runTask(y,u,t)}finally{1==Te&&b(),Te--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(Y,ae)}_transitionTo(y,u,t){if(this._state!==u&&this._state!==t)throw new Error(`${this.type} '${this.source}': can not transition to '${y}', expecting state '${u}'${t?" or '"+t+"'":""}, was '${this._state}'.`);this._state=y,y==Y&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const q=d("setTimeout"),j=d("Promise"),F=d("then");let ce,ie=[],X=!1;function re(z){if(ce||e[j]&&(ce=e[j].resolve(0)),ce){let y=ce[F];y||(y=ce.then),y.call(ce,z)}else e[q](z,0)}function S(z){0===Te&&0===ie.length&&re(b),z&&ie.push(z)}function b(){if(!X){for(X=!0;ie.length;){const z=ie;ie=[];for(let y=0;y<z.length;y++){const u=z[y];try{u.zone.runTask(u,null,null)}catch(t){oe.onUnhandledError(t)}}}oe.microtaskDrainDone(),X=!1}}const Ee={name:"NO ZONE"},Y="notScheduled",ae="scheduling",V="scheduled",v="running",$="canceling",_="unknown",B="microTask",O="macroTask",pe="eventTask",te={},oe={symbol:d,currentZoneFrame:()=>se,onUnhandledError:le,microtaskDrainDone:le,scheduleMicroTask:S,showUncaughtError:()=>!p[d("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:le,patchMethod:()=>le,bindArguments:()=>[],patchThen:()=>le,patchMacroTask:()=>le,patchEventPrototype:()=>le,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>le,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>le,wrapWithCurrentZone:()=>le,filterProperties:()=>[],attachOriginToPatched:()=>le,_redefineProperty:()=>le,patchCallbacks:()=>le,nativeScheduleMicroTask:re};let se={parent:null,zone:new p(null,null)},Pe=null,Te=0;function le(){}s("Zone","Zone"),e.Zone=p}(typeof window<"u"&&window||typeof self<"u"&&self||global);const W=Object.getOwnPropertyDescriptor,ye=Object.defineProperty,Me=Object.getPrototypeOf,xe=Object.create,ft=Array.prototype.slice,Ue="addEventListener",Ge="removeEventListener",We=Zone.__symbol__(Ue),Xe=Zone.__symbol__(Ge),Oe="true",Le="false",ze=Zone.__symbol__("");function nt(e,r){return Zone.current.wrap(e,r)}function Ye(e,r,i,s,a){return Zone.current.scheduleMacroTask(e,r,i,s,a)}const K=Zone.__symbol__,Ke=typeof window<"u",Ze=Ke?window:void 0,fe=Ke&&Ze||"object"==typeof self&&self||global,ht="removeAttribute";function rt(e,r){for(let i=e.length-1;i>=0;i--)"function"==typeof e[i]&&(e[i]=nt(e[i],r+"_"+i));return e}function lt(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const ot=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,$e=!("nw"in fe)&&typeof fe.process<"u"&&"[object process]"==={}.toString.call(fe.process),U=!$e&&!ot&&!(!Ke||!Ze.HTMLElement),ge=typeof fe.process<"u"&&"[object process]"==={}.toString.call(fe.process)&&!ot&&!(!Ke||!Ze.HTMLElement),st={},Je=function(e){if(!(e=e||fe.event))return;let r=st[e.type];r||(r=st[e.type]=K("ON_PROPERTY"+e.type));const i=this||e.target||fe,s=i[r];let a;return U&&i===Ze&&"error"===e.type?(a=s&&s.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===a&&e.preventDefault()):(a=s&&s.apply(this,arguments),null!=a&&!a&&e.preventDefault()),a};function it(e,r,i){let s=W(e,r);if(!s&&i&&W(i,r)&&(s={enumerable:!0,configurable:!0}),!s||!s.configurable)return;const a=K("on"+r+"patched");if(e.hasOwnProperty(a)&&e[a])return;delete s.writable,delete s.value;const d=s.get,k=s.set,p=r.slice(2);let D=st[p];D||(D=st[p]=K("ON_PROPERTY"+p)),s.set=function(P){let M=this;!M&&e===fe&&(M=fe),M&&("function"==typeof M[D]&&M.removeEventListener(p,Je),k&&k.call(M,null),M[D]=P,"function"==typeof P&&M.addEventListener(p,Je,!1))},s.get=function(){let P=this;if(!P&&e===fe&&(P=fe),!P)return null;const M=P[D];if(M)return M;if(d){let q=d.call(this);if(q)return s.set.call(this,q),"function"==typeof P[ht]&&P.removeAttribute(r),q}return null},ye(e,r,s),e[a]=!0}function Qe(e,r,i){if(r)for(let s=0;s<r.length;s++)it(e,"on"+r[s],i);else{const s=[];for(const a in e)"on"==a.slice(0,2)&&s.push(a);for(let a=0;a<s.length;a++)it(e,s[a],i)}}const ke=K("originalInstance");function je(e){const r=fe[e];if(!r)return;fe[K(e)]=r,fe[e]=function(){const a=rt(arguments,e);switch(a.length){case 0:this[ke]=new r;break;case 1:this[ke]=new r(a[0]);break;case 2:this[ke]=new r(a[0],a[1]);break;case 3:this[ke]=new r(a[0],a[1],a[2]);break;case 4:this[ke]=new r(a[0],a[1],a[2],a[3]);break;default:throw new Error("Arg list too long.")}},be(fe[e],r);const i=new r(function(){});let s;for(s in i)"XMLHttpRequest"===e&&"responseBlob"===s||function(a){"function"==typeof i[a]?fe[e].prototype[a]=function(){return this[ke][a].apply(this[ke],arguments)}:ye(fe[e].prototype,a,{set:function(d){"function"==typeof d?(this[ke][a]=nt(d,e+"."+a),be(this[ke][a],d)):this[ke][a]=d},get:function(){return this[ke][a]}})}(s);for(s in r)"prototype"!==s&&r.hasOwnProperty(s)&&(fe[e][s]=r[s])}function we(e,r,i){let s=e;for(;s&&!s.hasOwnProperty(r);)s=Me(s);!s&&e[r]&&(s=e);const a=K(r);let d=null;if(s&&(!(d=s[a])||!s.hasOwnProperty(a))&&(d=s[a]=s[r],lt(s&&W(s,r)))){const p=i(d,a,r);s[r]=function(){return p(this,arguments)},be(s[r],d)}return d}function ct(e,r,i){let s=null;function a(d){const k=d.data;return k.args[k.cbIdx]=function(){d.invoke.apply(this,arguments)},s.apply(k.target,k.args),d}s=we(e,r,d=>function(k,p){const D=i(k,p);return D.cbIdx>=0&&"function"==typeof p[D.cbIdx]?Ye(D.name,p[D.cbIdx],D,a):d.apply(k,p)})}function be(e,r){e[K("OriginalDelegate")]=r}let Ne=!1,Fe=!1;function Re(){if(Ne)return Fe;Ne=!0;try{const e=Ze.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(Fe=!0)}catch{}return Fe}Zone.__load_patch("ZoneAwarePromise",(e,r,i)=>{const s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,k=i.symbol,p=[],D=!0===e[k("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],P=k("Promise"),M=k("then"),q="__creationTrace__";i.onUnhandledError=h=>{if(i.showUncaughtError()){const m=h&&h.rejection;m?console.error("Unhandled Promise rejection:",m instanceof Error?m.message:m,"; Zone:",h.zone.name,"; Task:",h.task&&h.task.source,"; Value:",m,m instanceof Error?m.stack:void 0):console.error(h)}},i.microtaskDrainDone=()=>{for(;p.length;){const h=p.shift();try{h.zone.runGuarded(()=>{throw h.throwOriginal?h.rejection:h})}catch(m){F(m)}}};const j=k("unhandledPromiseRejectionHandler");function F(h){i.onUnhandledError(h);try{const m=r[j];"function"==typeof m&&m.call(this,h)}catch{}}function ie(h){return h&&h.then}function X(h){return h}function ce(h){return u.reject(h)}const re=k("state"),S=k("value"),b=k("finally"),Ee=k("parentPromiseValue"),Y=k("parentPromiseState"),ae="Promise.then",V=null,v=!0,$=!1,_=0;function B(h,m){return c=>{try{oe(h,m,c)}catch(E){oe(h,!1,E)}}}const O=function(){let h=!1;return function(c){return function(){h||(h=!0,c.apply(null,arguments))}}},pe="Promise resolved with itself",te=k("currentTaskTrace");function oe(h,m,c){const E=O();if(h===c)throw new TypeError(pe);if(h[re]===V){let C=null;try{("object"==typeof c||"function"==typeof c)&&(C=c&&c.then)}catch(N){return E(()=>{oe(h,!1,N)})(),h}if(m!==$&&c instanceof u&&c.hasOwnProperty(re)&&c.hasOwnProperty(S)&&c[re]!==V)Pe(c),oe(h,c[re],c[S]);else if(m!==$&&"function"==typeof C)try{C.call(c,E(B(h,m)),E(B(h,!1)))}catch(N){E(()=>{oe(h,!1,N)})()}else{h[re]=m;const N=h[S];if(h[S]=c,h[b]===b&&m===v&&(h[re]=h[Y],h[S]=h[Ee]),m===$&&c instanceof Error){const L=r.currentTask&&r.currentTask.data&&r.currentTask.data[q];L&&a(c,te,{configurable:!0,enumerable:!1,writable:!0,value:L})}for(let L=0;L<N.length;)Te(h,N[L++],N[L++],N[L++],N[L++]);if(0==N.length&&m==$){h[re]=_;let L=c;try{throw new Error("Uncaught (in promise): "+function d(h){return h&&h.toString===Object.prototype.toString?(h.constructor&&h.constructor.name||"")+": "+JSON.stringify(h):h?h.toString():Object.prototype.toString.call(h)}(c)+(c&&c.stack?"\n"+c.stack:""))}catch(I){L=I}D&&(L.throwOriginal=!0),L.rejection=c,L.promise=h,L.zone=r.current,L.task=r.currentTask,p.push(L),i.scheduleMicroTask()}}}return h}const se=k("rejectionHandledHandler");function Pe(h){if(h[re]===_){try{const m=r[se];m&&"function"==typeof m&&m.call(this,{rejection:h[S],promise:h})}catch{}h[re]=$;for(let m=0;m<p.length;m++)h===p[m].promise&&p.splice(m,1)}}function Te(h,m,c,E,C){Pe(h);const N=h[re],L=N?"function"==typeof E?E:X:"function"==typeof C?C:ce;m.scheduleMicroTask(ae,()=>{try{const I=h[S],Z=!!c&&b===c[b];Z&&(c[Ee]=I,c[Y]=N);const A=m.run(L,void 0,Z&&L!==ce&&L!==X?[]:[I]);oe(c,!0,A)}catch(I){oe(c,!1,I)}},c)}const z=function(){},y=e.AggregateError;class u{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(m){return oe(new this(null),v,m)}static reject(m){return oe(new this(null),$,m)}static any(m){if(!m||"function"!=typeof m[Symbol.iterator])return Promise.reject(new y([],"All promises were rejected"));const c=[];let E=0;try{for(let L of m)E++,c.push(u.resolve(L))}catch{return Promise.reject(new y([],"All promises were rejected"))}if(0===E)return Promise.reject(new y([],"All promises were rejected"));let C=!1;const N=[];return new u((L,I)=>{for(let Z=0;Z<c.length;Z++)c[Z].then(A=>{C||(C=!0,L(A))},A=>{N.push(A),E--,0===E&&(C=!0,I(new y(N,"All promises were rejected")))})})}static race(m){let c,E,C=new this((I,Z)=>{c=I,E=Z});function N(I){c(I)}function L(I){E(I)}for(let I of m)ie(I)||(I=this.resolve(I)),I.then(N,L);return C}static all(m){return u.allWithCallback(m)}static allSettled(m){return(this&&this.prototype instanceof u?this:u).allWithCallback(m,{thenCallback:E=>({status:"fulfilled",value:E}),errorCallback:E=>({status:"rejected",reason:E})})}static allWithCallback(m,c){let E,C,N=new this((A,Q)=>{E=A,C=Q}),L=2,I=0;const Z=[];for(let A of m){ie(A)||(A=this.resolve(A));const Q=I;try{A.then(J=>{Z[Q]=c?c.thenCallback(J):J,L--,0===L&&E(Z)},J=>{c?(Z[Q]=c.errorCallback(J),L--,0===L&&E(Z)):C(J)})}catch(J){C(J)}L++,I++}return L-=2,0===L&&E(Z),N}constructor(m){const c=this;if(!(c instanceof u))throw new Error("Must be an instanceof Promise.");c[re]=V,c[S]=[];try{const E=O();m&&m(E(B(c,v)),E(B(c,$)))}catch(E){oe(c,!1,E)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return u}then(m,c){let E=this.constructor?.[Symbol.species];(!E||"function"!=typeof E)&&(E=this.constructor||u);const C=new E(z),N=r.current;return this[re]==V?this[S].push(N,C,m,c):Te(this,N,C,m,c),C}catch(m){return this.then(null,m)}finally(m){let c=this.constructor?.[Symbol.species];(!c||"function"!=typeof c)&&(c=u);const E=new c(z);E[b]=b;const C=r.current;return this[re]==V?this[S].push(C,E,m,m):Te(this,C,E,m,m),E}}u.resolve=u.resolve,u.reject=u.reject,u.race=u.race,u.all=u.all;const t=e[P]=e.Promise;e.Promise=u;const g=k("thenPatched");function R(h){const m=h.prototype,c=s(m,"then");if(c&&(!1===c.writable||!c.configurable))return;const E=m.then;m[M]=E,h.prototype.then=function(C,N){return new u((I,Z)=>{E.call(this,I,Z)}).then(C,N)},h[g]=!0}return i.patchThen=R,t&&(R(t),we(e,"fetch",h=>function G(h){return function(m,c){let E=h.apply(m,c);if(E instanceof u)return E;let C=E.constructor;return C[g]||R(C),E}}(h))),Promise[r.__symbol__("uncaughtPromiseErrors")]=p,u}),Zone.__load_patch("toString",e=>{const r=Function.prototype.toString,i=K("OriginalDelegate"),s=K("Promise"),a=K("Error"),d=function(){if("function"==typeof this){const P=this[i];if(P)return"function"==typeof P?r.call(P):Object.prototype.toString.call(P);if(this===Promise){const M=e[s];if(M)return r.call(M)}if(this===Error){const M=e[a];if(M)return r.call(M)}}return r.call(this)};d[i]=r,Function.prototype.toString=d;const k=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":k.call(this)}});let ve=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){ve=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{ve=!1}const Se={useG:!0},me={},Ce={},qe=new RegExp("^"+ze+"(\\w+)(true|false)$"),He=K("propagationStopped");function Et(e,r){const i=(r?r(e):e)+Le,s=(r?r(e):e)+Oe,a=ze+i,d=ze+s;me[e]={},me[e][Le]=a,me[e][Oe]=d}function Tt(e,r,i,s){const a=s&&s.add||Ue,d=s&&s.rm||Ge,k=s&&s.listeners||"eventListeners",p=s&&s.rmAll||"removeAllListeners",D=K(a),P="."+a+":",M="prependListener",q="."+M+":",j=function(S,b,Ee){if(S.isRemoved)return;const Y=S.callback;let ae;"object"==typeof Y&&Y.handleEvent&&(S.callback=v=>Y.handleEvent(v),S.originalDelegate=Y);try{S.invoke(S,b,[Ee])}catch(v){ae=v}const V=S.options;return V&&"object"==typeof V&&V.once&&b[d].call(b,Ee.type,S.originalDelegate?S.originalDelegate:S.callback,V),ae};function F(S,b,Ee){if(!(b=b||e.event))return;const Y=S||b.target||e,ae=Y[me[b.type][Ee?Oe:Le]];if(ae){const V=[];if(1===ae.length){const v=j(ae[0],Y,b);v&&V.push(v)}else{const v=ae.slice();for(let $=0;$<v.length&&(!b||!0!==b[He]);$++){const _=j(v[$],Y,b);_&&V.push(_)}}if(1===V.length)throw V[0];for(let v=0;v<V.length;v++){const $=V[v];r.nativeScheduleMicroTask(()=>{throw $})}}}const ie=function(S){return F(this,S,!1)},X=function(S){return F(this,S,!0)};function ce(S,b){if(!S)return!1;let Ee=!0;b&&void 0!==b.useG&&(Ee=b.useG);const Y=b&&b.vh;let ae=!0;b&&void 0!==b.chkDup&&(ae=b.chkDup);let V=!1;b&&void 0!==b.rt&&(V=b.rt);let v=S;for(;v&&!v.hasOwnProperty(a);)v=Me(v);if(!v&&S[a]&&(v=S),!v||v[D])return!1;const $=b&&b.eventNameToString,_={},B=v[D]=v[a],O=v[K(d)]=v[d],pe=v[K(k)]=v[k],te=v[K(p)]=v[p];let oe;b&&b.prepend&&(oe=v[K(b.prepend)]=v[b.prepend]);const u=Ee?function(c){if(!_.isExisting)return B.call(_.target,_.eventName,_.capture?X:ie,_.options)}:function(c){return B.call(_.target,_.eventName,c.invoke,_.options)},t=Ee?function(c){if(!c.isRemoved){const E=me[c.eventName];let C;E&&(C=E[c.capture?Oe:Le]);const N=C&&c.target[C];if(N)for(let L=0;L<N.length;L++)if(N[L]===c){N.splice(L,1),c.isRemoved=!0,0===N.length&&(c.allRemoved=!0,c.target[C]=null);break}}if(c.allRemoved)return O.call(c.target,c.eventName,c.capture?X:ie,c.options)}:function(c){return O.call(c.target,c.eventName,c.invoke,c.options)},R=b&&b.diff?b.diff:function(c,E){const C=typeof E;return"function"===C&&c.callback===E||"object"===C&&c.originalDelegate===E},G=Zone[K("UNPATCHED_EVENTS")],h=e[K("PASSIVE_EVENTS")],m=function(c,E,C,N,L=!1,I=!1){return function(){const Z=this||e;let A=arguments[0];b&&b.transferEventName&&(A=b.transferEventName(A));let Q=arguments[1];if(!Q)return c.apply(this,arguments);if($e&&"uncaughtException"===A)return c.apply(this,arguments);let J=!1;if("function"!=typeof Q){if(!Q.handleEvent)return c.apply(this,arguments);J=!0}if(Y&&!Y(c,Q,Z,arguments))return;const n=ve&&!!h&&-1!==h.indexOf(A),o=function se(c,E){return!ve&&"object"==typeof c&&c?!!c.capture:ve&&E?"boolean"==typeof c?{capture:c,passive:!0}:c?"object"==typeof c&&!1!==c.passive?{...c,passive:!0}:c:{passive:!0}:c}(arguments[2],n);if(G)for(let De=0;De<G.length;De++)if(A===G[De])return n?c.call(Z,A,Q,o):c.apply(this,arguments);const l=!!o&&("boolean"==typeof o||o.capture),f=!(!o||"object"!=typeof o)&&o.once,T=Zone.current;let w=me[A];w||(Et(A,$),w=me[A]);const H=w[l?Oe:Le];let ne,ee=Z[H],x=!1;if(ee){if(x=!0,ae)for(let De=0;De<ee.length;De++)if(R(ee[De],Q))return}else ee=Z[H]=[];const he=Z.constructor.name,ue=Ce[he];ue&&(ne=ue[A]),ne||(ne=he+E+($?$(A):A)),_.options=o,f&&(_.options.once=!1),_.target=Z,_.capture=l,_.eventName=A,_.isExisting=x;const de=Ee?Se:void 0;de&&(de.taskData=_);const _e=T.scheduleEventTask(ne,Q,de,C,N);return _.target=null,de&&(de.taskData=null),f&&(o.once=!0),!ve&&"boolean"==typeof _e.options||(_e.options=o),_e.target=Z,_e.capture=l,_e.eventName=A,J&&(_e.originalDelegate=Q),I?ee.unshift(_e):ee.push(_e),L?Z:void 0}};return v[a]=m(B,P,u,t,V),oe&&(v[M]=m(oe,q,function(c){return oe.call(_.target,_.eventName,c.invoke,_.options)},t,V,!0)),v[d]=function(){const c=this||e;let E=arguments[0];b&&b.transferEventName&&(E=b.transferEventName(E));const C=arguments[2],N=!!C&&("boolean"==typeof C||C.capture),L=arguments[1];if(!L)return O.apply(this,arguments);if(Y&&!Y(O,L,c,arguments))return;const I=me[E];let Z;I&&(Z=I[N?Oe:Le]);const A=Z&&c[Z];if(A)for(let Q=0;Q<A.length;Q++){const J=A[Q];if(R(J,L))return A.splice(Q,1),J.isRemoved=!0,0===A.length&&(J.allRemoved=!0,c[Z]=null,"string"==typeof E)&&(c[ze+"ON_PROPERTY"+E]=null),J.zone.cancelTask(J),V?c:void 0}return O.apply(this,arguments)},v[k]=function(){const c=this||e;let E=arguments[0];b&&b.transferEventName&&(E=b.transferEventName(E));const C=[],N=ut(c,$?$(E):E);for(let L=0;L<N.length;L++){const I=N[L];C.push(I.originalDelegate?I.originalDelegate:I.callback)}return C},v[p]=function(){const c=this||e;let E=arguments[0];if(E){b&&b.transferEventName&&(E=b.transferEventName(E));const C=me[E];if(C){const I=c[C[Le]],Z=c[C[Oe]];if(I){const A=I.slice();for(let Q=0;Q<A.length;Q++){const J=A[Q];this[d].call(this,E,J.originalDelegate?J.originalDelegate:J.callback,J.options)}}if(Z){const A=Z.slice();for(let Q=0;Q<A.length;Q++){const J=A[Q];this[d].call(this,E,J.originalDelegate?J.originalDelegate:J.callback,J.options)}}}}else{const C=Object.keys(c);for(let N=0;N<C.length;N++){const I=qe.exec(C[N]);let Z=I&&I[1];Z&&"removeListener"!==Z&&this[p].call(this,Z)}this[p].call(this,"removeListener")}if(V)return this},be(v[a],B),be(v[d],O),te&&be(v[p],te),pe&&be(v[k],pe),!0}let re=[];for(let S=0;S<i.length;S++)re[S]=ce(i[S],s);return re}function ut(e,r){if(!r){const d=[];for(let k in e){const p=qe.exec(k);let D=p&&p[1];if(D&&(!r||D===r)){const P=e[k];if(P)for(let M=0;M<P.length;M++)d.push(P[M])}}return d}let i=me[r];i||(Et(r),i=me[r]);const s=e[i[Le]],a=e[i[Oe]];return s?a?s.concat(a):s.slice():a?a.slice():[]}function et(e,r){const i=e.Event;i&&i.prototype&&r.patchMethod(i.prototype,"stopImmediatePropagation",s=>function(a,d){a[He]=!0,s&&s.apply(a,d)})}function pt(e,r,i,s,a){const d=Zone.__symbol__(s);if(r[d])return;const k=r[d]=r[s];r[s]=function(p,D,P){return D&&D.prototype&&a.forEach(function(M){const q=`${i}.${s}::`+M,j=D.prototype;try{if(j.hasOwnProperty(M)){const F=e.ObjectGetOwnPropertyDescriptor(j,M);F&&F.value?(F.value=e.wrapWithCurrentZone(F.value,q),e._redefineProperty(D.prototype,M,F)):j[M]&&(j[M]=e.wrapWithCurrentZone(j[M],q))}else j[M]&&(j[M]=e.wrapWithCurrentZone(j[M],q))}catch{}}),k.call(r,p,D,P)},e.attachOriginToPatched(r[s],k)}function tt(e,r,i){if(!i||0===i.length)return r;const s=i.filter(d=>d.target===e);if(!s||0===s.length)return r;const a=s[0].ignoreProperties;return r.filter(d=>-1===a.indexOf(d))}function at(e,r,i,s){e&&Qe(e,tt(e,r,i),s)}function Ae(e){return Object.getOwnPropertyNames(e).filter(r=>r.startsWith("on")&&r.length>2).map(r=>r.substring(2))}Zone.__load_patch("util",(e,r,i)=>{const s=Ae(e);i.patchOnProperties=Qe,i.patchMethod=we,i.bindArguments=rt,i.patchMacroTask=ct;const a=r.__symbol__("BLACK_LISTED_EVENTS"),d=r.__symbol__("UNPATCHED_EVENTS");e[d]&&(e[a]=e[d]),e[a]&&(r[a]=r[d]=e[a]),i.patchEventPrototype=et,i.patchEventTarget=Tt,i.isIEOrEdge=Re,i.ObjectDefineProperty=ye,i.ObjectGetOwnPropertyDescriptor=W,i.ObjectCreate=xe,i.ArraySlice=ft,i.patchClass=je,i.wrapWithCurrentZone=nt,i.filterProperties=tt,i.attachOriginToPatched=be,i._redefineProperty=Object.defineProperty,i.patchCallbacks=pt,i.getGlobalObjects=()=>({globalSources:Ce,zoneSymbolEventNames:me,eventNames:s,isBrowser:U,isMix:ge,isNode:$e,TRUE_STR:Oe,FALSE_STR:Le,ZONE_SYMBOL_PREFIX:ze,ADD_EVENT_LISTENER_STR:Ue,REMOVE_EVENT_LISTENER_STR:Ge})});const Ve=K("zoneTask");function Ie(e,r,i,s){let a=null,d=null;i+=s;const k={};function p(P){const M=P.data;return M.args[0]=function(){return P.invoke.apply(this,arguments)},M.handleId=a.apply(e,M.args),P}function D(P){return d.call(e,P.data.handleId)}a=we(e,r+=s,P=>function(M,q){if("function"==typeof q[0]){const j={isPeriodic:"Interval"===s,delay:"Timeout"===s||"Interval"===s?q[1]||0:void 0,args:q},F=q[0];q[0]=function(){try{return F.apply(this,arguments)}finally{j.isPeriodic||("number"==typeof j.handleId?delete k[j.handleId]:j.handleId&&(j.handleId[Ve]=null))}};const ie=Ye(r,q[0],j,p,D);if(!ie)return ie;const X=ie.data.handleId;return"number"==typeof X?k[X]=ie:X&&(X[Ve]=ie),X&&X.ref&&X.unref&&"function"==typeof X.ref&&"function"==typeof X.unref&&(ie.ref=X.ref.bind(X),ie.unref=X.unref.bind(X)),"number"==typeof X||X?X:ie}return P.apply(e,q)}),d=we(e,i,P=>function(M,q){const j=q[0];let F;"number"==typeof j?F=k[j]:(F=j&&j[Ve],F||(F=j)),F&&"string"==typeof F.type?"notScheduled"!==F.state&&(F.cancelFn&&F.data.isPeriodic||0===F.runCount)&&("number"==typeof j?delete k[j]:j&&(j[Ve]=null),F.zone.cancelTask(F)):P.apply(e,q)})}Zone.__load_patch("legacy",e=>{const r=e[Zone.__symbol__("legacyPatch")];r&&r()}),Zone.__load_patch("timers",e=>{const r="set",i="clear";Ie(e,r,i,"Timeout"),Ie(e,r,i,"Interval"),Ie(e,r,i,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{Ie(e,"request","cancel","AnimationFrame"),Ie(e,"mozRequest","mozCancel","AnimationFrame"),Ie(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,r)=>{const i=["alert","prompt","confirm"];for(let s=0;s<i.length;s++)we(e,i[s],(d,k,p)=>function(D,P){return r.current.run(d,e,P,p)})}),Zone.__load_patch("EventTarget",(e,r,i)=>{(function Be(e,r){r.patchEventPrototype(e,r)})(e,i),function vt(e,r){if(Zone[r.symbol("patchEventTarget")])return;const{eventNames:i,zoneSymbolEventNames:s,TRUE_STR:a,FALSE_STR:d,ZONE_SYMBOL_PREFIX:k}=r.getGlobalObjects();for(let D=0;D<i.length;D++){const P=i[D],j=k+(P+d),F=k+(P+a);s[P]={},s[P][d]=j,s[P][a]=F}const p=e.EventTarget;p&&p.prototype&&r.patchEventTarget(e,r,[p&&p.prototype])}(e,i);const s=e.XMLHttpRequestEventTarget;s&&s.prototype&&i.patchEventTarget(e,i,[s.prototype])}),Zone.__load_patch("MutationObserver",(e,r,i)=>{je("MutationObserver"),je("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,r,i)=>{je("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,r,i)=>{je("FileReader")}),Zone.__load_patch("on_property",(e,r,i)=>{!function _t(e,r){if($e&&!ge||Zone[e.symbol("patchEvents")])return;const i=r.__Zone_ignore_on_properties;let s=[];if(U){const a=window;s=s.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const d=function mt(){try{const e=Ze.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:a,ignoreProperties:["error"]}]:[];at(a,Ae(a),i&&i.concat(d),Me(a))}s=s.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let a=0;a<s.length;a++){const d=r[s[a]];d&&d.prototype&&at(d.prototype,Ae(d.prototype),i)}}(i,e)}),Zone.__load_patch("customElements",(e,r,i)=>{!function gt(e,r){const{isBrowser:i,isMix:s}=r.getGlobalObjects();(i||s)&&e.customElements&&"customElements"in e&&r.patchCallbacks(r,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,i)}),Zone.__load_patch("XHR",(e,r)=>{!function D(P){const M=P.XMLHttpRequest;if(!M)return;const q=M.prototype;let F=q[We],ie=q[Xe];if(!F){const _=P.XMLHttpRequestEventTarget;if(_){const B=_.prototype;F=B[We],ie=B[Xe]}}const X="readystatechange",ce="scheduled";function re(_){const B=_.data,O=B.target;O[d]=!1,O[p]=!1;const pe=O[a];F||(F=O[We],ie=O[Xe]),pe&&ie.call(O,X,pe);const te=O[a]=()=>{if(O.readyState===O.DONE)if(!B.aborted&&O[d]&&_.state===ce){const se=O[r.__symbol__("loadfalse")];if(0!==O.status&&se&&se.length>0){const Pe=_.invoke;_.invoke=function(){const Te=O[r.__symbol__("loadfalse")];for(let le=0;le<Te.length;le++)Te[le]===_&&Te.splice(le,1);!B.aborted&&_.state===ce&&Pe.call(_)},se.push(_)}else _.invoke()}else!B.aborted&&!1===O[d]&&(O[p]=!0)};return F.call(O,X,te),O[i]||(O[i]=_),v.apply(O,B.args),O[d]=!0,_}function S(){}function b(_){const B=_.data;return B.aborted=!0,$.apply(B.target,B.args)}const Ee=we(q,"open",()=>function(_,B){return _[s]=0==B[2],_[k]=B[1],Ee.apply(_,B)}),ae=K("fetchTaskAborting"),V=K("fetchTaskScheduling"),v=we(q,"send",()=>function(_,B){if(!0===r.current[V]||_[s])return v.apply(_,B);{const O={target:_,url:_[k],isPeriodic:!1,args:B,aborted:!1},pe=Ye("XMLHttpRequest.send",S,O,re,b);_&&!0===_[p]&&!O.aborted&&pe.state===ce&&pe.invoke()}}),$=we(q,"abort",()=>function(_,B){const O=function j(_){return _[i]}(_);if(O&&"string"==typeof O.type){if(null==O.cancelFn||O.data&&O.data.aborted)return;O.zone.cancelTask(O)}else if(!0===r.current[ae])return $.apply(_,B)})}(e);const i=K("xhrTask"),s=K("xhrSync"),a=K("xhrListener"),d=K("xhrScheduled"),k=K("xhrURL"),p=K("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function dt(e,r){const i=e.constructor.name;for(let s=0;s<r.length;s++){const a=r[s],d=e[a];if(d){if(!lt(W(e,a)))continue;e[a]=(p=>{const D=function(){return p.apply(this,rt(arguments,i+"."+a))};return be(D,p),D})(d)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,r)=>{function i(s){return function(a){ut(e,s).forEach(k=>{const p=e.PromiseRejectionEvent;if(p){const D=new p(s,{promise:a.promise,reason:a.rejection});k.invoke(D)}})}}e.PromiseRejectionEvent&&(r[K("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),r[K("rejectionHandledHandler")]=i("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(e,r,i)=>{!function yt(e,r){r.patchMethod(e,"queueMicrotask",i=>function(s,a){Zone.current.scheduleMicroTask("queueMicrotask",a[0])})}(e,i)})}},W=>{W(W.s=2978)}]);
!function(m,w){"use strict";function rt(){var e=K.splice(0,K.length);for(ie=0;e.length;)e.shift().call(null,e.shift())}function me(e,t){for(var n=0,r=e.length;n<r;n++)Te(e[n],t)}function fe(e){return function(t){Lt(t)&&(Te(t,e),L.length&&me(t.querySelectorAll(L),e))}}function de(e){var t=le.call(e,"is"),n=e.nodeName.toUpperCase(),r=v.call(D,t?Y+t.toUpperCase():x+n);return t&&-1<r&&!De(n,t)?-1:r}function De(e,t){return-1<L.indexOf(e+'[is="'+t+'"]')}function Ie(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[W]||2,a=e[He]||3;!ce||o&&o!==t||!t[y]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[y](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function Fe(e){var t=fe(e);return function(n){K.push(t,n.target),ie&&clearTimeout(ie),ie=setTimeout(rt,1)}}function pe(e){nt&&(nt=!1,e.currentTarget.removeEventListener(Ze,pe)),L.length&&me((e.target||u).querySelectorAll(L),e.detail===E?E:b),R&&function at(){for(var e,t=0,n=G.length;t<n;t++)V.contains(e=G[t])||(n--,G.splice(t--,1),Te(e,E))}()}function lt(e,t){var n=this;Ye.call(n,e,t),Me.call(n,{target:n})}function Se(e,t,n){var r=t.apply(e,n),o=de(r);return-1<o&&U(r,q[o]),n.pop()&&L.length&&function ot(e){for(var t,n=0,r=e.length;n<r;n++)U(t=e[n],q[de(t)])}(r.querySelectorAll(L)),r}function he(e,t){Tt(e,t),$?$.observe(e,gt):(ue&&(e.setAttribute=lt,e[H]=Ee(e),e[g](st,Me)),e[g](N,Ie)),e[k]&&ce&&(e.created=!0,e[k](),e.created=!1)}function Ve(e){throw new Error("A "+e+" type is already registered")}function Te(e,t){var n,r,o=de(e);-1<o&&!Mt.call(e,"TEMPLATE")&&(Q(e,q[o]),o=0,t!==b||e[b]?t!==E||e[E]||(e[b]=!1,e[E]=!0,r="disconnected",o=1):(e[E]=!1,e[b]=!0,r="connected",o=1,R&&v.call(G,e)<0&&G.push(e)),o&&(n=e[t+O]||e[r+O])&&n.call(e))}function z(){}function Pe(e,t,n){var r=n&&n[_]||"",o=t.prototype,l=Ce(o),a=t.observedAttributes||ye,s={prototype:l};oe(l,k,{value:function(){if(te)te=!1;else if(!this[B]){this[B]=!0,new t(this),o[k]&&o[k].call(this);var i=j[ne.get(t)];(!Z||i.create.length>1)&&_e(this)}}}),oe(l,y,{value:function(i){-1<v.call(a,i)&&o[y]&&o[y].apply(this,arguments)}}),o[qe]&&oe(l,ut,{value:o[qe]}),o[Be]&&oe(l,ct,{value:o[Be]}),r&&(s[_]=r),e=e.toUpperCase(),j[e]={constructor:t,create:r?[r,re(e)]:[e]},ne.set(t,e),u[S](e.toLowerCase(),s),Le(e),P[e].r()}function Re(e){var t=j[e.toUpperCase()];return t&&t.constructor}function Ue(e){return"string"==typeof e?e:e&&e.is||""}function _e(e){for(var t,n=e[y],r=n?e.attributes:ye,o=r.length;o--;)n.call(e,(t=r[o]).name||t.nodeName,null,t.value||t.nodeValue)}function Le(e){return(e=e.toUpperCase())in P||(P[e]={},P[e].p=new Xe(function(t){P[e].r=t})),P[e].p}function ke(){C&&delete m.customElements,I(m,"customElements",{configurable:!0,value:new z}),I(m,"CustomElementRegistry",{configurable:!0,value:z});for(var e=it.get(/^HTML[A-Z]*[a-z]/),t=e.length;t--;function(n){var r=m[n];if(r){m[n]=function(o){var l,a;return o||(o=this),o[B]||(te=!0,l=j[ne.get(o.constructor)],(o=(a=Z&&1===l.create.length)?Reflect.construct(r,ye,l.constructor):u.createElement.apply(u,l.create))[B]=!0,te=!1,a||_e(o)),o},m[n].prototype=r.prototype;try{r.prototype.constructor=m[n]}catch{I(r,B,{value:m[n]})}}}(e[t]));u.createElement=function(n,r){var o=Ue(r);return o?Ae.call(this,n,re(o)):Ae.call(this,n)},et||(Oe=!0,u[S](""))}var u=m.document,T=m.Object,it=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,s=function(d,f){(f=f.toLowerCase())in i||(i[d]=(i[d]||[]).concat(f),i[f]=i[f.toUpperCase()]=d)},i=(T.create||T)(null),c={};for(n in e)for(o in e[n])for(i[o]=r=e[n][o],t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return c.get=function(d){return"string"==typeof d?i[d]||(l.test(d)?[]:""):function(d){var f,h=[];for(f in i)d.test(f)&&h.push(f);return h}(d)},c.set=function(d,f){return l.test(d)?s(d,f):s(f,d),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof w&&(w={type:w||"auto"});var K,Me,X,Ee,$,ve,Q,U,A,e,t,n,r,o,S="registerElement",xe=1e5*m.Math.random()>>0,H="__"+S+xe,g="addEventListener",b="attached",O="Callback",E="detached",_="extends",y="attributeChanged"+O,ut=b+O,qe="connected"+O,Be="disconnected"+O,k="created"+O,ct=E+O,W="ADDITION",He="REMOVAL",N="DOMAttrModified",Ze="DOMContentLoaded",st="DOMSubtreeModified",x="<",Y="=",mt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ft=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],D=[],q=[],L="",V=u.documentElement,v=D.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ge=T.prototype,be=ge.hasOwnProperty,J=ge.isPrototypeOf,I=T.defineProperty,ye=[],ee=T.getOwnPropertyDescriptor,je=T.getOwnPropertyNames,dt=T.getPrototypeOf,Ge=T.setPrototypeOf,ze=!!T.__proto__,B="__dreCEv1",C=m.customElements,Z=!/^force/.test(w.type)&&!!(C&&C.define&&C.get&&C.whenDefined),Ke=T.create||T,ht=m.Map||function(){var e,t=[],n=[];return{get:function(r){return n[v.call(t,r)]},set:function(r,o){(e=v.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},Xe=m.Promise||function(e){function t(l){for(r=!0;n.length;)n.shift()(l)}var n=[],r=!1,o={catch:function(){return o},then:function(l){return n.push(l),r&&setTimeout(t,1),o}};return e(t),o},te=!1,j=Ke(null),P=Ke(null),ne=new ht,re=function(e){return e.toLowerCase()},Ce=T.create||function e(t){return t?(e.prototype=t,new e):this},Tt=Ge||(ze?function(e,t){return e.__proto__=t,e}:je&&ee?function(){function e(t,n){for(var r,o=je(n),l=0,a=o.length;l<a;l++)be.call(t,r=o[l])||I(t,r,ee(n,r))}return function(t,n){do{e(t,n)}while((n=dt(n))&&!J.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),F=m.MutationObserver||m.WebKitMutationObserver,$e=m.HTMLAnchorElement,p=(m.HTMLElement||m.Element||m.Node).prototype,R=!J.call(p,V),oe=R?function(e,t,n){return e[t]=n.value,e}:I,Lt=R?function(e){return 1===e.nodeType}:function(e){return J.call(p,e)},G=R&&[],Qe=p.attachShadow,We=p.cloneNode,Mt=p.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},we=p.dispatchEvent,le=p.getAttribute,Et=p.hasAttribute,vt=p.removeAttribute,Ye=p.setAttribute,ae=u.createElement,Ht=u.importNode,Ae=ae,gt=F&&{attributes:!0,characterData:!0,attributeOldValue:!0},Je=F||function(e){ue=!1,V.removeEventListener(N,Je)},ie=0,et=S in u&&!/^force-all/.test(w.type),tt=!0,Oe=!1,ue=!0,nt=!0,ce=!0;if(F&&((A=u.createElement("div")).innerHTML="<div><div></div></div>",new F(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(A=ee(p,"innerHTML"))&&A.set;n&&I(p,"innerHTML",{set:function(r){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,r)}})}t.disconnect(),A=null}).observe(A,{childList:!0,subtree:!0}),A.innerHTML=""),et||(Ge||ze?(Q=function(e,t){J.call(t,e)||he(e,t)},U=he):(Q=function(e,t){e[H]||(e[H]=T(!0),he(e,t))},U=Q),R?(ue=!1,e=ee(p,g),t=e.value,n=function(l){var a=new CustomEvent(N,{bubbles:!0});a.attrName=l,a.prevValue=le.call(this,l),a.newValue=null,a[He]=a.attrChange=2,vt.call(this,l),we.call(this,a)},r=function(l,a){var s=Et.call(this,l),i=s&&le.call(this,l),c=new CustomEvent(N,{bubbles:!0});Ye.call(this,l,a),c.attrName=l,c.prevValue=s?i:null,c.newValue=a,s?c.MODIFICATION=c.attrChange=1:c[W]=c.attrChange=0,we.call(this,c)},o=function(l){var a,s=l.currentTarget,i=s[H],c=l.propertyName;i.hasOwnProperty(c)&&(i=i[c],(a=new CustomEvent(N,{bubbles:!0})).attrName=i.name,a.prevValue=i.value||null,a.newValue=i.value=s[c]||null,null==a.prevValue?a[W]=a.attrChange=0:a.MODIFICATION=a.attrChange=1,we.call(s,a))},e.value=function(l,a,s){l===N&&this[y]&&this.setAttribute!==r&&(this[H]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,l,a,s)},I(p,g,e)):F||(V[g](N,Je),V.setAttribute(H,1),V.removeAttribute(H),ue&&(Me=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[H],o[H]=n=Ee(o),n){if(!(r in t))return X(0,o,r,t[r],n[r],W);if(n[r]!==t[r])return X(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return X(2,o,r,t[r],n[r],He)}},X=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,Ie(a)},Ee=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),u[S]=function(e,t){if(n=e.toUpperCase(),tt&&(tt=!1,F?($=function(i,c){function d(f,h){for(var M=0,se=f.length;M<se;h(f[M++]));}return new F(function(f){for(var h,M,se,Ne=0,bt=f.length;Ne<bt;Ne++)"childList"===(h=f[Ne]).type?(d(h.addedNodes,i),d(h.removedNodes,c)):(M=h.target,ce&&M[y]&&"style"!==h.attributeName&&(se=le.call(M,h.attributeName))!==h.oldValue&&M[y](h.attributeName,h.oldValue,se))})}(fe(b),fe(E)),(ve=function(i){return $.observe(i,{childList:!0,subtree:!0}),i})(u),Qe&&(p.attachShadow=function(){return ve(Qe.apply(this,arguments))})):(K=[],u[g]("DOMNodeInserted",Fe(b)),u[g]("DOMNodeRemoved",Fe(E))),u[g](Ze,pe),u[g]("readystatechange",pe),u.importNode=function(i,c){switch(i.nodeType){case 1:return Se(u,Ht,[i,!!c]);case 11:for(var d=u.createDocumentFragment(),f=i.childNodes,h=f.length,M=0;M<h;M++)d.appendChild(u.importNode(f[M],!!c));return d;default:return We.call(i,!!c)}},p.cloneNode=function(i){return Se(this,We,[!!i])}),Oe)return Oe=!1;if(-2<v.call(D,Y+n)+v.call(D,x+n)&&Ve(e),!mt.test(n)||-1<v.call(ft,n))throw new Error("The type "+e+" is invalid");var n,r,o=function(){return a?u.createElement(s,n):u.createElement(s)},l=t||ge,a=be.call(l,_),s=a?t[_].toUpperCase():n;return a&&-1<v.call(D,x+s)&&Ve(s),r=D.push((a?Y:x)+n)-1,L=L.concat(L.length?",":"",a?s+'[is="'+e.toLowerCase()+'"]':s),o.prototype=q[r]=be.call(l,"prototype")?l.prototype:Ce(p),L.length&&me(u.querySelectorAll(L),b),o},u.createElement=Ae=function(e,t){var n=Ue(t),r=n?ae.call(u,e,re(n)):ae.call(u,e),o=""+e,l=v.call(D,(n?Y:x)+(n||o).toUpperCase()),a=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=De(o.toUpperCase(),n))),ce=!u.createElement.innerHTMLHelper,a&&U(r,q[l]),r}),addEventListener("beforeunload",function(){delete u.createElement,delete u.importNode,delete u[S]},!1),z.prototype={constructor:z,define:Z?function(e,t,n){if(n)Pe(e,t,n);else{var r=e.toUpperCase();j[r]={constructor:t,create:[r]},ne.set(t,r),C.define(e,t)}}:Pe,get:Z?function(e){return C.get(e)||Re(e)}:Re,whenDefined:Z?function(e){return Xe.race([C.whenDefined(e),Le(e)])}:Le},!C||/^force/.test(w.type))ke();else if(!w.noBuiltIn)try{!function(e,t,n){var r=new RegExp("^<a\\s+is=('|\")"+n+"\\1></a>$");if(t[_]="a",(e.prototype=Ce($e.prototype)).constructor=e,m.customElements.define(n,e,t),!r.test(u.createElement("a",{is:n}).outerHTML)||!r.test((new e).outerHTML))throw t}(function e(){return Reflect.construct($e,[],e)},{},"document-register-element-a"+xe)}catch{ke()}if(!w.noBuiltIn)try{if(ae.call(u,"a","a").outerHTML.indexOf("is")<0)throw{}}catch{re=function(t){return{is:t.toLowerCase()}}}}(window);
(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[179],{822:ne=>{"use strict";ne.exports=g,ne.exports.default=g;var Z=1e20;function g(P,_,y,M,F,L){this.fontSize=P||24,this.buffer=void 0===_?3:_,this.cutoff=M||.25,this.fontFamily=F||"sans-serif",this.fontWeight=L||"normal",this.radius=y||8;var j=this.size=this.fontSize+2*this.buffer,oe=j+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=j,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Uint16Array(oe),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(j/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function k(P,_,y,M,F,L){for(var j=0;j<_;j++)A(P,j,_,y,M,F,L);for(var oe=0;oe<y;oe++)A(P,oe*_,1,_,M,F,L)}function A(P,_,y,M,F,L,j){var oe,C,Y,le;for(L[0]=0,j[0]=-Z,j[1]=Z,oe=0;oe<M;oe++)F[oe]=P[_+oe*y];for(oe=1,C=0,Y=0;oe<M;oe++){do{Y=(F[oe]-F[le=L[C]]+oe*oe-le*le)/(oe-le)/2}while(Y<=j[C]&&--C>-1);L[++C]=oe,j[C]=Y,j[C+1]=Z}for(oe=0,C=0;oe<M;oe++){for(;j[C+1]<oe;)C++;P[_+oe*y]=F[le=L[C]]+(oe-le)*(oe-le)}}g.prototype._draw=function(P,_){var L,j,oe,C,Y,le,K,re,te,y=this.ctx.measureText(P),M=y.width,F=2*this.buffer;_&&this.useMetrics?(Y=Math.floor(y.actualBoundingBoxAscent),re=this.buffer+Math.ceil(y.actualBoundingBoxAscent),le=this.buffer,K=this.buffer,L=(j=Math.min(this.size,Math.ceil(y.actualBoundingBoxRight-y.actualBoundingBoxLeft)))+F,oe=(C=Math.min(this.size-le,Math.ceil(y.actualBoundingBoxAscent+y.actualBoundingBoxDescent)))+F,this.ctx.textBaseline="alphabetic"):(L=j=this.size,oe=C=this.size,Y=19*this.fontSize/24,le=K=0,re=this.middle,this.ctx.textBaseline="middle"),j&&C&&(this.ctx.clearRect(K,le,j,C),this.ctx.fillText(P,this.buffer,re),te=this.ctx.getImageData(K,le,j,C));var q=new Uint8ClampedArray(L*oe);return function E(P,_,y,M,F,L,j){L.fill(Z,0,_*y),j.fill(0,0,_*y);for(var oe=(_-M)/2,C=0;C<F;C++)for(var Y=0;Y<M;Y++){var le=(C+oe)*_+Y+oe,K=P.data[4*(C*M+Y)+3]/255;if(1===K)L[le]=0,j[le]=Z;else if(0===K)L[le]=Z,j[le]=0;else{var re=Math.max(0,.5-K),te=Math.max(0,K-.5);L[le]=re*re,j[le]=te*te}}}(te,L,oe,j,C,this.gridOuter,this.gridInner),k(this.gridOuter,L,oe,this.f,this.v,this.z),k(this.gridInner,L,oe,this.f,this.v,this.z),function b(P,_,y,M,F,L,j){for(var oe=0;oe<_*y;oe++){var C=Math.sqrt(M[oe])-Math.sqrt(F[oe]);P[oe]=Math.round(255-255*(C/L+j))}}(q,L,oe,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:q,metrics:{width:j,height:C,sdfWidth:L,sdfHeight:oe,top:Y,left:0,advance:M}}},g.prototype.draw=function(P){return this._draw(P,!1).data},g.prototype.drawWithMetrics=function(P){return this._draw(P,!0)}},5486:(ne,Z,g)=>{"use strict";var E={};g.r(E),g.d(E,{decode:()=>Pxe,name:()=>kxe});var b={};g.r(b),g.d(b,{name:()=>jxe,preprocess:()=>Vxe});var k={};g.r(k),g.d(k,{name:()=>Hxe,preprocess:()=>zxe});var A={};g.r(A),g.d(A,{decode:()=>kwe,encode:()=>Pwe,name:()=>Rwe,preprocess:()=>Owe});var P={};g.r(P),g.d(P,{decode:()=>Uwe,encode:()=>jwe,name:()=>Bwe});var _={};g.r(_),g.d(_,{decode:()=>Hwe,encode:()=>zwe,name:()=>Vwe});var y={};g.r(y),g.d(y,{decode:()=>Wwe,encode:()=>$we,name:()=>Gwe});var M={};function F(t){return"function"==typeof t}function L(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}g.r(M),g.d(M,{delMany:()=>ZFe,get:()=>qFe,setMany:()=>JFe});const j=L(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function oe(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class C{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(F(i))try{i()}catch(s){e=s instanceof j?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{K(s)}catch(o){e=e??[],o instanceof j?e=[...e,...o.errors]:e.push(o)}}if(e)throw new j(e)}}add(e){var n;if(e&&e!==this)if(this.closed)K(e);else{if(e instanceof C){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&oe(n,e)}remove(e){const{_finalizers:n}=this;n&&oe(n,e),e instanceof C&&e._removeParent(this)}}C.EMPTY=(()=>{const t=new C;return t.closed=!0,t})();const Y=C.EMPTY;function le(t){return t instanceof C||t&&"closed"in t&&F(t.remove)&&F(t.add)&&F(t.unsubscribe)}function K(t){F(t)?t():t.unsubscribe()}const re={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},te={setTimeout(t,e,...n){const{delegate:i}=te;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=te;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function q(t){te.setTimeout(()=>{const{onUnhandledError:e}=re;if(!e)throw t;e(t)})}function V(){}const x=he("C",void 0,void 0);function he(t,e,n){return{kind:t,value:e,error:n}}let W=null;function Te(t){if(re.useDeprecatedSynchronousErrorHandling){const e=!W;if(e&&(W={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=W;if(W=null,n)throw i}}else t()}class we extends C{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,le(e)&&e.add(this)):this.destination=He}static create(e,n,i){return new Ye(e,n,i)}next(e){this.isStopped?ke(function D(t){return he("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ke(function B(t){return he("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ke(x,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ie=Function.prototype.bind;function De(t,e){return Ie.call(t,e)}class et{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Ce(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Ce(i)}else Ce(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ce(n)}}}class Ye extends we{constructor(e,n,i){let r;if(super(),F(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&re.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&De(e.next,s),error:e.error&&De(e.error,s),complete:e.complete&&De(e.complete,s)}):r=e}this.destination=new et(r)}}function Ce(t){re.useDeprecatedSynchronousErrorHandling?function de(t){re.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=t)}(t):q(t)}function ke(t,e){const{onStoppedNotification:n}=re;n&&te.setTimeout(()=>n(t,e))}const He={closed:!0,next:V,error:function Ne(t){throw t},complete:V},me="function"==typeof Symbol&&Symbol.observable||"@@observable";function Se(t){return t}function qe(...t){return lt(t)}function lt(t){return 0===t.length?Se:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let We=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function O(t){return t&&t instanceof we||function z(t){return t&&F(t.next)&&F(t.error)&&F(t.complete)}(t)&&le(t)}(n)?n:new Ye(n,i,r);return Te(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=_e(i))((r,s)=>{const o=new Ye({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[me](){return this}pipe(...n){return lt(n)(this)}toPromise(n){return new(n=_e(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function _e(t){var e;return null!==(e=t??re.Promise)&&void 0!==e?e:Promise}const ae=L(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new Fe(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new ae}next(n){Te(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){Te(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Te(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Y:(this.currentObservers=null,s.push(n),new C(()=>{this.currentObservers=null,oe(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new We;return n.source=this,n}}return t.create=(e,n)=>new Fe(e,n),t})();class Fe extends H{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:Y}}class Ke extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function fe(t){return F(t?.lift)}function ee(t){return e=>{if(fe(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function G(t,e,n,i,r){return new R(t,e,n,i,r)}class R extends we{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function I(t,e){return ee((n,i)=>{let r=0;n.subscribe(G(i,s=>{i.next(t.call(e,s,r++))}))})}function ot(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function kt(t,e){return function(n,i){e(n,i,t)}}function J(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function bn(t){return this instanceof bn?(this.v=t,this):new bn(t)}function Ns(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function ct(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Ua=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function td(t){return F(t?.then)}function nd(t){return F(t[me])}function tl(t){return Symbol.asyncIterator&&F(t?.[Symbol.asyncIterator])}function _u(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const bu=function id(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function nl(t){return F(t?.[bu])}function rd(t){return function As(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(f){i[f]&&(r[f]=function(m){return new Promise(function(v,T){s.push([f,m,v,T])>1||a(f,m)})})}function a(f,m){try{!function c(f){f.value instanceof bn?Promise.resolve(f.value.v).then(l,d):h(s[0][2],f)}(i[f](m))}catch(v){h(s[0][3],v)}}function l(f){a("next",f)}function d(f){a("throw",f)}function h(f,m){f(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield bn(n.read());if(r)return yield bn(void 0);yield yield bn(i)}}finally{n.releaseLock()}})}function il(t){return F(t?.getReader)}function Cn(t){if(t instanceof We)return t;if(null!=t){if(nd(t))return function rl(t){return new We(e=>{const n=t[me]();if(F(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Ua(t))return function qo(t){return new We(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(td(t))return function ja(t){return new We(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,q)})}(t);if(tl(t))return Ha(t);if(nl(t))return function Va(t){return new We(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(il(t))return function Bs(t){return Ha(rd(t))}(t)}throw _u(t)}function Ha(t){return new We(e=>{(function be(t,e){var n,i,r,s;return function S(t,e,n,i){return new(n||(n=Promise))(function(s,o){function a(d){try{l(i.next(d))}catch(h){o(h)}}function c(d){try{l(i.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):function r(s){return s instanceof n?s:new n(function(o){o(s)})}(d.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Ns(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Me(t,e,n,i=0,r=!1){const s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function U(t,e,n=1/0){return F(e)?U((i,r)=>I((s,o)=>e(i,s,r,o))(Cn(t(i,r))),n):("number"==typeof e&&(n=e),ee((i,r)=>function Ee(t,e,n,i,r,s,o,a){const c=[];let l=0,d=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},m=T=>l<i?v(T):c.push(T),v=T=>{s&&e.next(T),l++;let N=!1;Cn(n(T,d++)).subscribe(G(e,$=>{r?.($),s?m($):e.next($)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<i;){const $=c.shift();o?Me(e,o,()=>v($)):v($)}f()}catch($){e.error($)}}))};return t.subscribe(G(e,m,()=>{h=!0,f()})),()=>{a?.()}}(i,r,t,n)))}function se(t=1/0){return U(Se,t)}const pe=new We(t=>t.complete());function at(t){return t&&F(t.schedule)}function xt(t){return t[t.length-1]}function It(t){return F(xt(t))?t.pop():void 0}function Vt(t){return at(xt(t))?t.pop():void 0}function vn(t,e=0){return ee((n,i)=>{n.subscribe(G(i,r=>Me(i,t,()=>i.next(r),e),()=>Me(i,t,()=>i.complete(),e),r=>Me(i,t,()=>i.error(r),e)))})}function fs(t,e=0){return ee((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function Pr(t,e){if(!t)throw new Error("Iterable cannot be null");return new We(n=>{Me(n,e,()=>{const i=t[Symbol.asyncIterator]();Me(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Vi(t,e){return e?function ol(t,e){if(null!=t){if(nd(t))return function kr(t,e){return Cn(t).pipe(fs(e),vn(e))}(t,e);if(Ua(t))return function sl(t,e){return new We(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(td(t))return function Us(t,e){return Cn(t).pipe(fs(e),vn(e))}(t,e);if(tl(t))return Pr(t,e);if(nl(t))return function pa(t,e){return new We(n=>{let i;return Me(n,e,()=>{i=t[bu](),Me(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void n.error(o)}s?n.complete():n.next(r)},0,!0)}),()=>F(i?.return)&&i.return()})}(t,e);if(il(t))return function js(t,e){return Pr(rd(t),e)}(t,e)}throw _u(t)}(t,e):Cn(t)}function Xi(...t){const e=Vt(t),n=function sn(t,e){return"number"==typeof xt(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?Cn(i[0]):se(n)(Vi(i,e)):pe}function $t(...t){return Vi(t,Vt(t))}function io(t={}){const{connector:e=(()=>new H),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,c,l=0,d=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},m=()=>{f(),o=c=void 0,d=h=!1},v=()=>{const T=o;m(),T?.unsubscribe()};return ee((T,N)=>{l++,!h&&!d&&f();const $=c=c??e();N.add(()=>{l--,0===l&&!h&&!d&&(a=sd(v,r))}),$.subscribe(N),!o&&l>0&&(o=new Ye({next:X=>$.next(X),error:X=>{h=!0,f(),a=sd(m,n,X),$.error(X)},complete:()=>{d=!0,f(),a=sd(m,i),$.complete()}}),Cn(T).subscribe(o))})(s)}}function sd(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Ye({next:()=>{i.unsubscribe(),t()}});return Cn(e(...n)).subscribe(i)}function Oe(t,e){return ee((n,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();n.subscribe(G(i,c=>{r?.unsubscribe();let l=0;const d=s++;Cn(t(c,d)).subscribe(r=G(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Ue(t,e=Se){return t=t??it,ee((n,i)=>{let r,s=!0;n.subscribe(G(i,o=>{const a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function it(t,e){return t===e}function ut(t){for(let e in t)if(t[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function Nt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Gt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Gt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Kn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Ar=ut({__forward_ref__:ut});function Sn(t){return t.__forward_ref__=Sn,t.toString=function(){return Gt(this())},t}function ln(t){return ro(t)?t():t}function ro(t){return"function"==typeof t&&t.hasOwnProperty(Ar)&&t.__forward_ref__===Sn}function P_(t){return t&&!!t.\u0275providers}const Jv="https://g.co/ng/security#xss";class Pt extends Error{constructor(e,n){super(function Op(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Hn(t){return"string"==typeof t?t:null==t?"":String(t)}function L_(t,e){throw new Pt(-201,!1)}function Cs(t,e){null==t&&function Dn(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function Et(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function qt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Bh(t){return so(t,kp)||so(t,gc)}function so(t,e){return t.hasOwnProperty(e)?t[e]:null}function Vs(t){return t&&(t.hasOwnProperty(Pp)||t.hasOwnProperty(Lp))?t[Pp]:null}const kp=ut({\u0275prov:ut}),Pp=ut({\u0275inj:ut}),gc=ut({ngInjectableDef:ut}),Lp=ut({ngInjectorDef:ut});var ei=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ei||{});let zi;function Ts(t){const e=zi;return zi=t,e}function tx(t,e,n){const i=Bh(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&ei.Optional?null:void 0!==e?e:void L_(Gt(t))}const Ai=globalThis,cd={},F_="__NG_DI_FLAG__",Uh="ngTempTokenPath",B_=/\n/gm,U_="__source";let ld;function al(t){const e=ld;return ld=t,e}function CC(t,e=ei.Default){if(void 0===ld)throw new Pt(-203,!1);return null===ld?tx(t,void 0,e):ld.get(t,e&ei.Optional?null:void 0,e)}function rt(t,e=ei.Default){return(function _c(){return zi}()||CC)(ln(t),e)}function zt(t,e=ei.Default){return rt(t,Bp(e))}function Bp(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function j_(t){const e=[];for(let n=0;n<t.length;n++){const i=ln(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Pt(900,!1);let r,s=ei.Default;for(let o=0;o<i.length;o++){const a=i[o],c=cx(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(rt(r,s))}else e.push(rt(i))}return e}function dd(t,e){return t[F_]=e,t.prototype[F_]=e,t}function cx(t){return t[F_]}function bc(t){return{toString:t}.toString()}var jp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(jp||{}),ga=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ga||{});const Hs={},qn=[],Vh=ut({\u0275cmp:ut}),V_=ut({\u0275dir:ut}),H_=ut({\u0275pipe:ut}),lx=ut({\u0275mod:ut}),yc=ut({\u0275fac:ut}),Hh=ut({__NG_ELEMENT_ID__:ut}),zh=ut({__NG_ENV_ID__:ut});function dt(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function wt(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{const s=r,o=n[++i];en(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function gt(t){return 3===t||4===t||6===t}function en(t){return 64===t.charCodeAt(0)}function On(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||xi(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function xi(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}const Lr="ng-template";function Fi(t,e,n){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if("string"==typeof s&&r){const o=t[i++];if(n&&"class"===s&&-1!==dt(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<t.length&&"string"==typeof(s=t[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Vp(t){return 4===t.type&&t.value!==Lr}function TC(t,e,n){return e===(4!==t.type||n?t.value:Lr)}function Jo(t,e,n){let i=4;const r=t.attrs||[],s=function zp(t){for(let e=0;e<t.length;e++)if(gt(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!TC(t,c,n)||""===c&&1===e.length){if(oo(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==t.attrs){if(!Fi(t.attrs,l,n)){if(oo(i))return!1;o=!0}continue}const h=MC(8&i?"class":c,r,Vp(t),n);if(-1===h){if(oo(i))return!1;o=!0;continue}if(""!==l){let f;f=h>s?"":r[h+1].toLowerCase();const m=8&i?f:null;if(m&&-1!==dt(m,l,0)||2&i&&l!==f){if(oo(i))return!1;o=!0}}}}else{if(!o&&!oo(i)&&!oo(c))return!1;if(o&&oo(c))continue;o=!1,i=c|1&i}}return oo(i)||o}function oo(t){return 0==(1&t)}function MC(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const o=e[r];if(o===t)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Mi(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function ud(t,e,n=!1){for(let i=0;i<e.length;i++)if(Jo(t,e[i],n))return!0;return!1}function IC(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function z_(t,e){return t?":not("+e.trim()+")":e}function Gp(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!oo(o)&&(e+=z_(s,r),r=""),i=o,s=s||!oo(i);n++}return""!==r&&(e+=z_(s,r)),e}function kn(t){return bc(()=>{const e=dx(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===jp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ga.Emulated,styles:t.styles||qn,_:null,schemas:t.schemas||null,tView:null,id:""};ux(n);const i=t.dependencies;return n.directiveDefs=hd(i,!1),n.pipeDefs=hd(i,!0),n.id=function W_(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function ll(t){return mi(t)||Sr(t)}function $p(t){return null!==t}function Jt(t){return bc(()=>({type:t.type,bootstrap:t.bootstrap||qn,declarations:t.declarations||qn,imports:t.imports||qn,exports:t.exports||qn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function G_(t,e){if(null==t)return Hs;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}function Ht(t){return bc(()=>{const e=dx(t);return ux(e),e})}function zr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function mi(t){return t[Vh]||null}function Sr(t){return t[V_]||null}function Cr(t){return t[H_]||null}function dx(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Hs,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||qn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:G_(t.inputs,e),outputs:G_(t.outputs)}}function ux(t){t.features?.forEach(e=>e(t))}function hd(t,e){if(!t)return null;const n=e?Cr:ll;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter($p)}const Tr=0,Kt=1,Gn=2,ir=3,Ii=4,Nr=5,Ms=6,vu=7,br=8,dl=9,ul=10,Rn=11,fd=12,pd=13,za=14,Yi=15,hl=16,_a=17,Ga=18,Gh=19,hx=20,fl=21,xc=22,md=23,pl=24,ai=25,ml=1,Wh=2,Mr=7,xu=9,ms=11;function ao(t){return Array.isArray(t)&&"object"==typeof t[ml]}function co(t){return Array.isArray(t)&&!0===t[ml]}function $_(t){return 0!=(4&t.flags)}function gd(t){return t.componentOffset>-1}function Kp(t){return 1==(1&t.flags)}function Gr(t){return!!t.template}function X_(t){return 0!=(512&t[Gn])}function _d(t,e){return t.hasOwnProperty(yc)?t[yc]:null}let FC=Ai.WeakRef??class gx{constructor(e){this.ref=e}deref(){return this.ref}},bd=0,Ir=null,Zp=!1;function Wr(t){const e=Ir;return Ir=t,e}class Y_{constructor(){this.id=bd++,this.ref=function Ec(t){return new FC(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const i=n.producerNode.deref();if(null!=i&&n.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Zp;Zp=!0;try{for(const[n,i]of this.consumers){const r=i.consumerNode.deref();null!=r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),r?.producers.delete(this.id))}}finally{Zp=e}}producerAccessed(){if(Zp)throw new Error("");if(null===Ir)return;let e=Ir.producers.get(this.id);void 0===e?(e={consumerNode:Ir.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Ir.trackingVersion},Ir.producers.set(this.id,e),this.consumers.set(Ir.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Ir.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Ir?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let K_=null;function gl(t){const e=Wr(null);try{return t()}finally{Wr(e)}}const Z_=()=>{};class zs extends Y_{constructor(e,n,i){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=Z_,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=Wr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Z_,this.watch(this.registerOnCleanup)}finally{Wr(e)}}cleanup(){this.cleanupFn()}}class im{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Dr(){return yx}function yx(t){return t.type.prototype.ngOnChanges&&(t.setInput=Q_),BC}function BC(){const t=Su(this),e=t?.current;if(e){const n=t.previous;if(n===Hs)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function Q_(t,e,n,i){const r=this.declaredInputs[n],s=Su(t)||function xx(t,e){return t[vx]=e}(t,{previous:Hs,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new im(c&&c.currentValue,e,a===Hs),t[i]=e}Dr.ngInherit=!0;const vx="__ngSimpleChanges__";function Su(t){return t[vx]||null}const lo=function(t,e,n){},wx="svg";function ki(t){for(;Array.isArray(t);)t=t[Tr];return t}function rm(t,e){return ki(e[t])}function uo(t,e){return ki(e[t.index])}function tb(t,e){return t.data[e]}function _l(t,e){return t[e]}function Io(t,e){const n=e[t];return ao(n)?n:n[Tr]}function Ac(t,e){return null==e?null:t[e]}function Yh(t){t[_a]=0}function VC(t){1024&t[Gn]||(t[Gn]|=1024,rb(t,1))}function ib(t){1024&t[Gn]&&(t[Gn]&=-1025,rb(t,-1))}function rb(t,e){let n=t[ir];if(null===n)return;n[Nr]+=e;let i=n;for(n=n[ir];null!==n&&(1===e&&1===i[Nr]||-1===e&&0===i[Nr]);)n[Nr]+=e,i=n,n=n[ir]}const Pn={lFrame:Gs(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ti(){return Pn.bindingsEnabled}function Cu(){return null!==Pn.skipHydrationRootTNode}function St(){return Pn.lFrame.lView}function bi(){return Pn.lFrame.tView}function rr(t){return Pn.lFrame.contextLView=t,t[br]}function dr(t){return Pn.lFrame.contextLView=null,t}function ns(){let t=ab();for(;null!==t&&64===t.type;)t=t.parent;return t}function ab(){return Pn.lFrame.currentTNode}function _s(t,e){const n=Pn.lFrame;n.currentTNode=t,n.isParent=e}function qh(){return Pn.lFrame.isParent}function om(){Pn.lFrame.isParent=!1}function Is(){const t=Pn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Do(){return Pn.lFrame.bindingIndex++}function Sc(t){const e=Pn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Dx(t,e){const n=Pn.lFrame;n.bindingIndex=n.bindingRootIndex=t,db(e)}function db(t){Pn.lFrame.currentDirectiveIndex=t}function Rx(){return Pn.lFrame.currentQueryIndex}function dm(t){Pn.lFrame.currentQueryIndex=t}function Ox(t){const e=t[Kt];return 2===e.type?e.declTNode:1===e.type?t[Ms]:null}function kx(t,e,n){if(n&ei.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&ei.Host||(r=Ox(s),null===r||(s=s[za],10&r.type))););if(null===r)return!1;e=r,t=s}const i=Pn.lFrame=hb();return i.currentTNode=e,i.lView=t,!0}function um(t){const e=hb(),n=t[Kt];Pn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function hb(){const t=Pn.lFrame,e=null===t?null:t.child;return null===e?Gs(t):e}function Gs(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ya(){const t=Pn.lFrame;return Pn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Px=ya;function fb(){const t=ya();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ds(){return Pn.lFrame.selectedIndex}function yl(t){Pn.lFrame.selectedIndex=t}function ur(){const t=Pn.lFrame;return tb(t.tView,t.selectedIndex)}let mb=!0;function vd(){return mb}function Cc(t){mb=t}function Iu(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function xd(t,e,n){Zh(t,e,3,n)}function pm(t,e,n,i){(3&t[Gn])===n&&Zh(t,e,n,i)}function mm(t,e){let n=t[Gn];(3&n)===e&&(n&=8191,n+=1,t[Gn]=n)}function Zh(t,e,n,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&t[_a]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(t[_a]+=65536),(a<s||-1==s)&&(_b(t,n,e,c),t[_a]=(4294901760&t[_a])+c+2),c++}function gb(t,e){lo(4,t,e);const n=Wr(null);try{e.call(t)}finally{Wr(n),lo(5,t,e)}}function _b(t,e,n,i){const r=n[i]<0,s=n[i+1],a=t[r?-n[i]:n[i]];r?t[Gn]>>13<t[_a]>>16&&(3&t[Gn])===e&&(t[Gn]+=8192,gb(a,s)):gb(a,s)}const Du=-1;class Ru{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Qh(t){return t!==Du}function wd(t){return 32767&t}function xl(t,e){let n=function bb(t){return t>>16}(t),i=e;for(;n>0;)i=i[za],n--;return i}let wl=!0;function xn(t){const e=wl;return wl=t,e}const _m=255,El=5;let JC=0;const Zo={};function Xr(t,e){const n=Fx(t,e);if(-1!==n)return n;const i=e[Kt];i.firstCreatePass&&(t.injectorIndex=e.length,vb(i.data,t),vb(e,null),vb(i.blueprint,null));const r=ef(t,e),s=t.injectorIndex;if(Qh(r)){const o=wd(r),a=xl(r,e),c=a[Kt].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function vb(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fx(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ef(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=Ab(r),null===i)return Du;if(n++,r=r[za],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return Du}function xb(t,e,n){!function Nx(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Hh)&&(i=n[Hh]),null==i&&(i=n[Hh]=JC++);const r=i&_m;e.data[t+(r>>El)]|=1<<r}(t,e,n)}function Ux(t,e,n){if(n&ei.Optional||void 0!==t)return t;L_()}function jx(t,e,n,i){if(n&ei.Optional&&void 0===i&&(i=null),!(n&(ei.Self|ei.Host))){const r=t[dl],s=Ts(void 0);try{return r?r.get(e,i,n&ei.Optional):tx(e,i,n&ei.Optional)}finally{Ts(s)}}return Ux(i,0,n)}function Vx(t,e,n,i=ei.Default,r){if(null!==t){if(2048&e[Gn]&&!(i&ei.Self)){const o=function QC(t,e,n,i,r){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Gn]&&!(512&o[Gn]);){const a=Ya(s,o,n,i|ei.Self,Zo);if(a!==Zo)return a;let c=s.parent;if(!c){const l=o[hx];if(l){const d=l.get(n,Zo,i);if(d!==Zo)return d}c=Ab(o),o=o[za]}s=c}return r}(t,e,n,i,Zo);if(o!==Zo)return o}const s=Ya(t,e,n,i,Zo);if(s!==Zo)return s}return jx(e,n,i,r)}function Ya(t,e,n,i,r){const s=function wb(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Hh)?t[Hh]:void 0;return"number"==typeof e?e>=0?e&_m:ZC:e}(n);if("function"==typeof s){if(!kx(e,t,i))return i&ei.Host?Ux(r,0,i):jx(e,n,i,r);try{let o;if(o=s(i),null!=o||i&ei.Optional)return o;L_()}finally{Px()}}else if("number"==typeof s){let o=null,a=Fx(t,e),c=Du,l=i&ei.Host?e[Yi][Ms]:null;for((-1===a||i&ei.SkipSelf)&&(c=-1===a?ef(t,e):e[a+8],c!==Du&&zx(i,!1)?(o=e[Kt],a=wd(c),e=xl(c,e)):a=-1);-1!==a;){const d=e[Kt];if(Hx(s,a,d.data)){const h=Ws(a,e,n,o,i,l);if(h!==Zo)return h}c=e[a+8],c!==Du&&zx(i,e[Kt].data[a+8]===l)&&Hx(s,a,e)?(o=d,a=wd(c),e=xl(c,e)):a=-1}}return r}function Ws(t,e,n,i,r,s){const o=e[Kt],a=o.data[t+8],d=Ou(a,o,n,null==i?gd(a)&&wl:i!=o&&0!=(3&a.type),r&ei.Host&&s===a);return null!==d?Ed(e,o,d,a):Zo}function Ou(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,d=s>>20,f=r?a+d:t.directiveEnd;for(let m=i?a:a+d;m<f;m++){const v=o[m];if(m<c&&n===v||m>=c&&v.type===n)return m}if(r){const m=o[c];if(m&&Gr(m)&&m.type===n)return c}return null}function Ed(t,e,n,i){let r=t[n];const s=e.data;if(function Tc(t){return t instanceof Ru}(r)){const o=r;o.resolving&&function bC(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Pt(-200,`Circular dependency in DI detected for ${t}${n}`)}(function vi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Hn(t)}(s[n]));const a=xn(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ts(o.injectImpl):null;kx(t,i,ei.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function fm(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=yx(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&Ts(l),xn(a),o.resolving=!1,Px()}}return r}function Hx(t,e,n){return!!(n[e+(t>>El)]&1<<t)}function zx(t,e){return!(t&ei.Self||t&ei.Host&&e)}class Rs{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return Vx(this._tNode,this._lView,e,Bp(i),n)}}function ZC(){return new Rs(ns(),St())}function Ci(t){return bc(()=>{const e=t.prototype.constructor,n=e[yc]||Eb(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[yc]||Eb(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Eb(t){return ro(t)?()=>{const e=Eb(ln(t));return e&&e()}:_d(t)}function Ab(t){const e=t[Kt],n=e.type;return 2===n?e.declTNode:1===n?t[Ms]:null}function Ka(t){return function Bx(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const s=n[r];if(gt(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(ns(),t)}const Al="__parameters__";function Sd(t,e,n){return bc(()=>{const i=function tf(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,d){const h=c.hasOwnProperty(Al)?c[Al]:Object.defineProperty(c,Al,{value:[]})[Al];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function Fu(t,e){t.forEach(n=>Array.isArray(n)?Fu(n,e):e(n))}function Wx(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Bu(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function ho(t,e,n){let i=Uu(t,e);return i>=0?t[1|i]=n:(i=~i,function aT(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function Sb(t,e){const n=Uu(t,e);if(n>=0)return t[1|n]}function Uu(t,e){return function Xx(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}(t,e,1)}const ju=dd(Sd("Optional"),8),Vu=dd(Sd("SkipSelf"),4);function Cm(t){return 128==(128&t.flags)}var Sl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Sl||{});const Rb=new Map;let RT=0;const kb="__ngContext__";function Os(t,e){ao(e)?(t[kb]=e[Gh],function kT(t){Rb.set(t[Gh],t)}(e)):t[kb]=e}let Im;function Dm(t,e){return Im(t,e)}function df(t){const e=t[ir];return co(e)?e[ir]:e}function uf(t){return hw(t[fd])}function uw(t){return hw(t[Ii])}function hw(t){for(;null!==t&&!co(t);)t=t[Ii];return t}function Cl(t,e,n,i,r){if(null!=i){let s,o=!1;co(i)?s=i:ao(i)&&(o=!0,i=i[Tr]);const a=ki(i);0===t&&null!==n?null==r?$s(e,n,a):Cd(e,n,a,r||null,!0):1===t&&null!==n?Cd(e,n,a,r||null,!0):2===t?function qi(t,e,n){const i=Pm(t,e);i&&function KT(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function ZT(t,e,n,i,r){const s=n[Mr];s!==ki(n)&&Cl(e,t,i,s,r);for(let a=ms;a<n.length;a++){const c=n[a];mf(c[Kt],c,t,e,i,s)}}(e,t,s,n,r)}}function Om(t,e,n){return t.createElement(e,n)}function pw(t,e){const n=t[xu],i=n.indexOf(e);ib(e),n.splice(i,1)}function km(t,e){if(t.length<=ms)return;const n=ms+e,i=t[n];if(i){const r=i[hl];null!==r&&r!==t&&pw(r,i),e>0&&(t[n-1][Ii]=i[Ii]);const s=rf(t,ms+e);!function jT(t,e){mf(t,e,e[Rn],2,null,null),e[Tr]=null,e[Ms]=null}(i[Kt],i);const o=s[Ga];null!==o&&o.detachView(s[Kt]),i[ir]=null,i[Ii]=null,i[Gn]&=-129}return i}function Nb(t,e){if(!(256&e[Gn])){const n=e[Rn];e[md]?.destroy(),e[pl]?.destroy(),n.destroyNode&&mf(t,e,n,3,null,null),function zT(t){let e=t[fd];if(!e)return Ro(t[Kt],t);for(;e;){let n=null;if(ao(e))n=e[fd];else{const i=e[ms];i&&(n=i)}if(!n){for(;e&&!e[Ii]&&e!==t;)ao(e)&&Ro(e[Kt],e),e=e[ir];null===e&&(e=t),ao(e)&&Ro(e[Kt],e),n=e&&e[Ii]}e=n}}(e)}}function Ro(t,e){if(!(256&e[Gn])){e[Gn]&=-129,e[Gn]|=256,function XT(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof Ru)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];lo(4,a,c);try{c.call(a)}finally{lo(5,a,c)}}else{lo(4,r,s);try{s.call(r)}finally{lo(5,r,s)}}}}}(t,e),function $T(t,e){const n=t.cleanup,i=e[vu];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else n[s].call(i[n[s+1]]);null!==i&&(e[vu]=null);const r=e[fl];if(null!==r){e[fl]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(t,e),1===e[Kt].type&&e[Rn].destroy();const n=e[hl];if(null!==n&&co(e[ir])){n!==e[ir]&&pw(n,e);const i=e[Ga];null!==i&&i.detachView(t)}!function PT(t){Rb.delete(t[Gh])}(e)}}function Dc(t,e,n){return function Wn(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[Tr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===ga.None||s===ga.Emulated)return null}return uo(i,n)}}(t,e.parent,n)}function Cd(t,e,n,i,r){t.insertBefore(e,n,i,r)}function $s(t,e,n){t.appendChild(e,n)}function yr(t,e,n,i,r){null!==i?Cd(t,e,n,i,r):$s(t,e,n)}function Pm(t,e){return t.parentNode(e)}function mw(t,e,n){return _w(t,e,n)}let ff,Nm,Ub,_w=function gw(t,e,n){return 40&t.type?uo(t,n):null};function ta(t,e,n,i){const r=Dc(t,i,e),s=e[Rn],a=mw(i.parent||e[Ms],i,e);if(null!=r)if(Array.isArray(n))for(let c=0;c<n.length;c++)yr(s,r,n[c],a,!1);else yr(s,r,n,a,!1);void 0!==ff&&ff(s,i,e,n,r)}function Gu(t,e){if(null!==e){const n=e.type;if(3&n)return uo(e,t);if(4&n)return Ki(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return Gu(t,i);{const r=t[e.index];return co(r)?Ki(-1,r):ki(r)}}if(32&n)return Dm(e,t)()||ki(t[e.index]);{const i=pf(t,e);return null!==i?Array.isArray(i)?i[0]:Gu(df(t[Yi]),i):Gu(t,e.next)}}return null}function pf(t,e){return null!==e?t[Yi][Ms].projection[e.projection]:null}function Ki(t,e){const n=ms+t+1;if(n<e.length){const i=e[n],r=i[Kt].firstChild;if(null!==r)return Gu(i,r)}return e[Mr]}function Bb(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],c=n.type;if(o&&0===e&&(a&&Os(ki(a),i),n.flags|=2),32!=(32&n.flags))if(8&c)Bb(t,e,n.child,i,r,s,!1),Cl(e,t,r,a,s);else if(32&c){const l=Dm(n,i);let d;for(;d=l();)Cl(e,t,r,d,s);Cl(e,t,r,a,s)}else 16&c?yw(t,e,i,n,r,s):Cl(e,t,r,a,s);n=o?n.projectionNext:n.next}}function mf(t,e,n,i,r,s){Bb(n,i,t.firstChild,e,r,s,!1)}function yw(t,e,n,i,r,s){const o=n[Yi],c=o[Ms].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Cl(e,t,r,c[l],s);else{let l=c;const d=o[ir];Cm(i)&&(l.flags|=128),Bb(t,e,l,d,r,s,!0)}}function Wu(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Lm(t,e,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&wt(t,e,i),null!==r&&Wu(t,e,r),null!==s&&function vw(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function Rc(t){return function Fm(){if(void 0===Nm&&(Nm=null,Ai.trustedTypes))try{Nm=Ai.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Nm}()?.createHTML(t)||t}class Tl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Jv})`}}class nM extends Tl{getTypeName(){return"HTML"}}class Ti extends Tl{getTypeName(){return"Style"}}class iM extends Tl{getTypeName(){return"Script"}}class xw extends Tl{getTypeName(){return"URL"}}class Bm extends Tl{getTypeName(){return"ResourceURL"}}function Po(t){return t instanceof Tl?t.changingThisBreaksApplicationSecurity:t}function qa(t,e){const n=function rM(t){return t instanceof Tl&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Jv})`)}return n===e}class dM{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Rc(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class uM{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Rc(e),n}}const fM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Yu(t){return(t=String(t)).match(fM)?t:"unsafe:"+t}function Oc(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Md(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const Ew=Oc("area,br,col,hr,img,wbr"),Aw=Oc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Sw=Oc("rp,rt"),Vb=Md(Ew,Md(Aw,Oc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Md(Sw,Oc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Md(Sw,Aw)),Hb=Oc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cw=Md(Hb,Oc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Oc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mM=Oc("script,style,template");class Tw{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!Vb.hasOwnProperty(n))return this.sanitizedSomething=!0,!mM.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!Cw.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Hb[a]&&(c=Yu(c)),this.buf.push(" ",o,'="',Mw(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();Vb.hasOwnProperty(n)&&!Ew.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(Mw(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const gM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_M=/([^\#-~ |!])/g;function Mw(t){return t.replace(/&/g,"&amp;").replace(gM,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(_M,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _f;function zb(t,e){let n=null;try{_f=_f||function ww(t){const e=new uM(t);return function hM(){try{return!!(new window.DOMParser).parseFromString(Rc(""),"text/html")}catch{return!1}}()?new dM(e):e}(t);let i=e?String(e):"";n=_f.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=_f.getInertBodyElement(i)}while(i!==s);return Rc((new Tw).sanitizeChildren(Gb(n)||n))}finally{if(n){const i=Gb(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Gb(t){return"content"in t&&function bM(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var is=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(is||{});function Wb(t){const e=function bf(){const t=St();return t&&t[ul].sanitizer}();return e?e.sanitize(is.URL,t)||"":qa(t,"URL")?Po(t):Yu(Hn(t))}class bt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Et({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const yf=new bt("ENVIRONMENT_INITIALIZER"),Um=new bt("INJECTOR",-1),Rw=new bt("INJECTOR_DEF_TYPES");class Xb{get(e,n=cd){if(n===cd){const i=new Error(`NullInjectorError: No provider for ${Gt(e)}!`);throw i.name="NullInjectorError",i}return n}}function EM(...t){return{\u0275providers:Ow(0,t),\u0275fromNgModule:!0}}function Ow(t,...e){const n=[],i=new Set;let r;const s=o=>{n.push(o)};return Fu(e,o=>{const a=o;jm(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&kw(r,s),n}function kw(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];Kb(r,s=>{e(s,i)})}}function jm(t,e,n,i){if(!(t=ln(t)))return!1;let r=null,s=Vs(t);const o=!s&&mi(t);if(s||o){if(o&&!o.standalone)return!1;r=t}else{const c=t.ngModule;if(s=Vs(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)jm(l,e,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{Fu(s.imports,d=>{jm(d,e,n,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&kw(l,e)}if(!a){const l=_d(r)||(()=>new r);e({provide:r,useFactory:l,deps:qn},r),e({provide:Rw,useValue:r,multi:!0},r),e({provide:yf,useValue:()=>rt(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=t;Kb(c,d=>{e(d,l)})}}}return r!==t&&void 0!==t.providers}function Kb(t,e){for(let n of t)P_(n)&&(n=n.\u0275providers),Array.isArray(n)?Kb(n,e):e(n)}const AM=ut({provide:String,useValue:ut});function qb(t){return null!==t&&"object"==typeof t&&AM in t}function Id(t){return"function"==typeof t}const Jb=new bt("Set Injector scope."),Vm={},CM={};let Zb;function qu(){return void 0===Zb&&(Zb=new Xb),Zb}class No{}class vf extends No{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xf(e,o=>this.processProvider(o)),this.records.set(Um,Ju(void 0,this)),r.has("environment")&&this.records.set(No,Ju(void 0,this));const s=this.records.get(Jb);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Rw.multi,qn,ei.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=al(this),i=Ts(void 0);try{return e()}finally{al(n),Ts(i)}}get(e,n=cd,i=ei.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zh))return e[zh](this);i=Bp(i);const s=al(this),o=Ts(void 0);try{if(!(i&ei.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function po(t){return"function"==typeof t||"object"==typeof t&&t instanceof bt}(e)&&Bh(e);c=l&&this.injectableDefInScope(l)?Ju(Qb(e),Vm):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&ei.Self?qu():this.parent).get(e,n=i&ei.Optional&&n===cd?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Uh]=a[Uh]||[]).unshift(Gt(e)),s)throw a;return function cl(t,e,n,i){const r=t[Uh];throw e[U_]&&r.unshift(e[U_]),t.message=function Up(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=Gt(e);if(Array.isArray(e))r=e.map(Gt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Gt(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(B_,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[Uh]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Ts(o),al(s)}}resolveInjectorInitializers(){const e=al(this),n=Ts(void 0);try{const r=this.get(yf.multi,qn,ei.Self);for(const s of r)s()}finally{al(e),Ts(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(Gt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pt(205,!1)}processProvider(e){let n=Id(e=ln(e))?e:ln(e&&e.provide);const i=function MM(t){return qb(t)?Ju(void 0,t.useValue):Ju(Hm(t),Vm)}(e);if(Id(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=Ju(void 0,Vm,!0),r.factory=()=>j_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===Vm&&(n.value=CM,n.value=n.factory()),"object"==typeof n.value&&n.value&&function DM(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ln(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Qb(t){const e=Bh(t),n=null!==e?e.factory:_d(t);if(null!==n)return n;if(t instanceof bt)throw new Pt(204,!1);if(t instanceof Function)return function TM(t){const e=t.length;if(e>0)throw Bu(e,"?"),new Pt(204,!1);const n=function EC(t){return t&&(t[kp]||t[gc])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Pt(204,!1)}function Hm(t,e,n){let i;if(Id(t)){const r=ln(t);return _d(r)||Qb(r)}if(qb(t))i=()=>ln(t.useValue);else if(function Lw(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...j_(t.deps||[]));else if(function Pw(t){return!(!t||!t.useExisting)}(t))i=()=>rt(ln(t.useExisting));else{const r=ln(t&&(t.useClass||t.provide));if(!function IM(t){return!!t.deps}(t))return _d(r)||Qb(r);i=()=>new r(...j_(t.deps))}return i}function Ju(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function xf(t,e){for(const n of t)Array.isArray(n)?xf(n,e):n&&P_(n)?xf(n.\u0275providers,e):e(n)}const wf=new bt("AppId",{providedIn:"root",factory:()=>RM}),RM="ng",Nw=new bt("Platform Initializer"),xa=new bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Kr=new bt("AnimationModuleType"),Ef=new bt("CSP nonce",{providedIn:"root",factory:()=>function Xu(){if(void 0!==Ub)return Ub;if(typeof document<"u")return document;throw new Pt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let jw=(t,e,n)=>null;function ry(t,e,n=!1){return jw(t,e,n)}class Ae{}class je{}class Tt{resolveComponentFactory(e){throw function Qe(t){const e=Error(`No component factory found for ${Gt(t)}.`);return e.ngComponent=t,e}(e)}}let At=(()=>{class e{}return e.NULL=new Tt,e})();function Ft(){return Yt(ns(),St())}function Yt(t,e){return new Mt(uo(t,e))}let Mt=(()=>{class e{constructor(i){this.nativeElement=i}}return e.__NG_ELEMENT_ID__=Ft,e})();function Tn(t){return t instanceof Mt?t.nativeElement:t}class Qn{}let gi=(()=>{var t;class e{}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>null}),e})();class Fr{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Xs=new Fr("16.2.1"),Ys={};function UF(t,e=null,n=null,i){const r=jF(t,e,n,i);return r.resolveInjectorInitializers(),r}function jF(t,e=null,n=null,i,r=new Set){const s=[n||qn,EM(t)];return i=i||("object"==typeof t?void 0:Gt(t)),new vf(s,e||qu(),i||null,r)}let hr=(()=>{var t;class e{static create(i,r){if(Array.isArray(i))return UF({name:""},r,i,"");{const s=i.name??"";return UF({name:s},i.parent,i.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=cd,t.NULL=new Xb,t.\u0275prov=Et({token:t,providedIn:"any",factory:()=>rt(Um)}),t.__NG_ELEMENT_ID__=-1,e})();let jM=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new Pt(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const i of this.callbacks)i.invoke()}finally{this.runningCallbacks=!1;for(const i of this.deferredCallbacks)this.callbacks.add(i);this.deferredCallbacks.clear()}}register(i){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(i)}unregister(i){this.callbacks.delete(i),this.deferredCallbacks.delete(i)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>new t}),e})();function oy(t){for(;t;){t[Gn]|=64;const e=df(t);if(X_(t)&&!e)return t;t=e}return null}function VM(t){return t.ngOriginalError}class kc{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&VM(e);for(;n&&VM(n);)n=VM(n);return n||null}}const WF=new bt("",{providedIn:"root",factory:()=>!1});class KF extends Y_{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){oy(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,i){const r=Wr(this);this.trackingVersion++;try{e(n,i)}finally{Wr(r)}}destroy(){this.trackingVersion++}}let Gw=null;function qF(){return Gw??=new KF,Gw}function JF(t,e){return t[e]??qF()}function ZF(t,e){const n=qF();n.hasReadASignal&&(t[e]=Gw,n.lView=t,Gw=new KF)}const Zn={};function Rt(t){QF(bi(),St(),Ds()+t,!1)}function QF(t,e,n,i){if(!i)if(3==(3&e[Gn])){const s=t.preOrderCheckHooks;null!==s&&xd(e,s,n)}else{const s=t.preOrderHooks;null!==s&&pm(e,s,0,n)}yl(n)}function Ve(t,e=ei.Default){const n=St();return null===n?rt(t,e):Vx(ns(),n,ln(t),e)}function Qu(){throw new Error("invalid")}function Ww(t,e,n,i,r,s,o,a,c,l,d){const h=e.blueprint.slice();return h[Tr]=r,h[Gn]=140|i,(null!==l||t&&2048&t[Gn])&&(h[Gn]|=2048),Yh(h),h[ir]=h[za]=t,h[br]=n,h[ul]=o||t&&t[ul],h[Rn]=a||t&&t[Rn],h[dl]=c||t&&t[dl]||null,h[Ms]=s,h[Gh]=function OT(){return RT++}(),h[xc]=d,h[hx]=l,h[Yi]=2==e.type?t[Yi]:h,h}function Km(t,e,n,i,r){let s=t.data[e];if(null===s)s=function HM(t,e,n,i,r){const s=ab(),o=qh(),c=t.data[e]=function qq(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Cu()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(t,e,n,i,r),function bl(){return Pn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function gs(){const t=Pn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _s(s,!0),s}function ay(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function eB(t,e,n,i,r){const s=JF(e,md),o=Ds(),a=2&i;try{if(yl(-1),a&&e.length>ai&&QF(t,e,ai,!1),lo(a?2:0,r),a)s.runInContext(n,i,r);else{const l=Wr(null);try{n(i,r)}finally{Wr(l)}}}finally{a&&null===e[md]&&ZF(e,md),yl(o),lo(a?3:1,r)}}function zM(t,e,n){if($_(e)){const i=Wr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Wr(i)}}}function GM(t,e,n){ti()&&(function iJ(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;gd(n)&&function dJ(t,e,n){const i=uo(e,t),r=tB(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=$w(t,Ww(t,r,null,o,i,e,null,t[ul].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Xr(n,e),Os(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const c=t.data[a],l=Ed(e,t,a,n);Os(l,e),null!==o&&uJ(0,a-r,l,c,0,o),Gr(c)&&(Io(n.index,e)[br]=Ed(e,t,a,n))}}(t,e,n,uo(n,e)),64==(64&n.flags)&&oB(t,e,n))}function WM(t,e,n=uo){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function tB(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=$M(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function $M(t,e,n,i,r,s,o,a,c,l,d){const h=ai+i,f=h+r,m=function Gq(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Zn);return n}(h,f),v="function"==typeof l?l():l;return m[Kt]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:d}}let nB=t=>null;function iB(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const s=t[r];null===i?rB(n,e,r,s):i.hasOwnProperty(r)&&rB(n,e,i[r],s)}return n}function rB(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function wa(t,e,n,i,r,s,o,a){const c=uo(e,n);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(JM(t,n,d,i,r),gd(e)&&function Qq(t,e){const n=Io(e,t);16&n[Gn]||(n[Gn]|=64)}(n,e.index)):3&e.type&&(i=function Zq(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function XM(t,e,n,i){if(ti()){const r=null===i?null:{"":-1},s=function sJ(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(ud(e,o.selectors,!1))if(i||(i=[]),Gr(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),YM(t,e,a.length)}else i.unshift(o),YM(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&sB(t,e,n,o,r,a),r&&function oJ(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new Pt(-301,!1);i.push(e[r],s)}}}(n,i,r)}n.mergedAttrs=On(n.mergedAttrs,n.attrs)}function sB(t,e,n,i,r,s){for(let l=0;l<i.length;l++)xb(Xr(n,e),t,i[l].type);!function cJ(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=ay(t,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];n.mergedAttrs=On(n.mergedAttrs,d.hostAttrs),lJ(t,n,e,c,d),aJ(c,d,r),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function Jq(t,e,n){const r=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=s[d],f=n?n.get(h):null,v=f?f.outputs:null;c=iB(h.inputs,d,c,f?f.inputs:null),l=iB(h.outputs,d,l,v);const T=null===c||null===o||Vp(e)?null:hJ(c,d,o);a.push(T)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,s)}function oB(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function lb(){return Pn.lFrame.currentDirectiveIndex}();try{yl(s);for(let a=i;a<r;a++){const c=t.data[a],l=e[a];db(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&rJ(c,l)}}finally{yl(-1),db(o)}}function rJ(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function YM(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function aJ(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Gr(e)&&(n[""]=t)}}function lJ(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=_d(r.type)),o=new Ru(s,Gr(r),Ve);t.blueprint[i]=o,n[i]=o,function tJ(t,e,n,i,r){const s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function nJ(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(t,e,i,ay(t,n,r.hostVars,Zn),r)}function Ml(t,e,n,i,r,s){const o=uo(t,e);!function KM(t,e,n,i,r,s,o){if(null==s)t.removeAttribute(e,r,n);else{const a=null==o?Hn(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}(e[Rn],o,s,t.value,n,i,r)}function uJ(t,e,n,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)aB(i,n,o[a++],o[a++],o[a++])}function aB(t,e,n,i,r){const s=Wr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==t.setInput?t.setInput(e,r,n,i):e[i]=r}finally{Wr(s)}}function hJ(t,e,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function cB(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null,null]}function lB(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const o=t.data[s];dm(n[i]),o.contentQueries(2,e[s],s)}}}function $w(t,e){return t[fd]?t[pd][Ii]=e:t[fd]=e,t[pd]=e,e}function qM(t,e,n){dm(0);const i=Wr(null);try{e(t,n)}finally{Wr(i)}}function dB(t){return t[vu]||(t[vu]=[])}function uB(t){return t.cleanup||(t.cleanup=[])}function fB(t,e){const n=t[dl],i=n?n.get(kc,null):null;i&&i.handleError(e)}function JM(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];aB(t.data[o],e[o],i,a,r)}}function fJ(t,e){const n=Io(e,t),i=n[Kt];!function pJ(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[Tr];null!==r&&null===n[xc]&&(n[xc]=ry(r,n[dl])),ZM(i,n,n[br])}function ZM(t,e,n){um(e);try{const i=t.viewQuery;null!==i&&qM(1,i,n);const r=t.template;null!==r&&eB(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&lB(t,e),t.staticViewQueries&&qM(2,t.viewQuery,n);const s=t.components;null!==s&&function mJ(t,e){for(let n=0;n<e.length;n++)fJ(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[Gn]&=-5,fb()}}let pB=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(i,r,s){const o=typeof Zone>"u"?null:Zone.current,a=new zs(i,d=>{this.all.has(d)&&this.queue.set(d,o)},s);let c;this.all.add(a),a.notify();const l=()=>{a.cleanup(),c?.(),this.all.delete(a),this.queue.delete(a)};return c=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[i,r]of this.queue)this.queue.delete(i),r?r.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:()=>new t}),e})();function Xw(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Kn(r,a):2==s&&(i=Kn(i,a+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function cy(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(ki(s)),co(s)){for(let a=ms;a<s.length;a++){const c=s[a],l=c[Kt].firstChild;null!==l&&cy(c[Kt],c,l,i)}s[Mr]!==s[Tr]&&i.push(s[Mr])}const o=n.type;if(8&o)cy(t,e,n.child,i);else if(32&o){const a=Dm(n,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=pf(e,n);if(Array.isArray(a))i.push(...a);else{const c=df(e[Yi]);cy(c[Kt],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Yw(t,e,n,i=!0){const r=e[ul],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{mB(t,e,t.template,n)}catch(c){throw i&&fB(e,c),c}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function mB(t,e,n,i){const r=e[Gn];if(256!=(256&r)){e[ul].effectManager?.flush(),um(e);try{Yh(e),function lm(t){return Pn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&eB(t,e,n,2,i);const o=3==(3&r);if(o){const l=t.preOrderCheckHooks;null!==l&&xd(e,l,null)}else{const l=t.preOrderHooks;null!==l&&pm(e,l,0,null),mm(e,0)}if(function bJ(t){for(let e=uf(t);null!==e;e=uw(e)){if(!e[Wh])continue;const n=e[xu];for(let i=0;i<n.length;i++){VC(n[i])}}}(e),gB(e,2),null!==t.contentQueries&&lB(t,e),o){const l=t.contentCheckHooks;null!==l&&xd(e,l)}else{const l=t.contentHooks;null!==l&&pm(e,l,1),mm(e,1)}!function zq(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const i=JF(e,pl);try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)yl(~s);else{const o=s,a=n[++r],c=n[++r];Dx(a,o),i.runInContext(c,2,e[o])}}}finally{null===e[pl]&&ZF(e,pl),yl(-1)}}(t,e);const a=t.components;null!==a&&bB(e,a,0);const c=t.viewQuery;if(null!==c&&qM(2,c,i),o){const l=t.viewCheckHooks;null!==l&&xd(e,l)}else{const l=t.viewHooks;null!==l&&pm(e,l,2),mm(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Gn]&=-73,ib(e)}finally{fb()}}}function gB(t,e){for(let n=uf(t);null!==n;n=uw(n))for(let i=ms;i<n.length;i++)_B(n[i],e)}function yJ(t,e,n){_B(Io(e,t),n)}function _B(t,e){if(!function Sx(t){return 128==(128&t[Gn])}(t))return;const n=t[Kt];if(80&t[Gn]&&0===e||1024&t[Gn]||2===e)mB(n,t,n.template,t[br]);else if(t[Nr]>0){gB(t,1);const r=t[Kt].components;null!==r&&bB(t,r,1)}}function bB(t,e,n){for(let i=0;i<e.length;i++)yJ(t,e[i],n)}class ly{get rootNodes(){const e=this._lView,n=e[Kt];return cy(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[br]}set context(e){this._lView[br]=e}get destroyed(){return 256==(256&this._lView[Gn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ir];if(co(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(km(e,i),rf(n,i))}this._attachedToViewContainer=!1}Nb(this._lView[Kt],this._lView)}onDestroy(e){!function Tx(t,e){if(256==(256&t[Gn]))throw new Pt(911,!1);null===t[fl]&&(t[fl]=[]),t[fl].push(e)}(this._lView,e)}markForCheck(){oy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Gn]&=-129}reattach(){this._lView[Gn]|=128}detectChanges(){Yw(this._lView[Kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function HT(t,e){mf(t,e,e[Rn],2,null,null)}(this._lView[Kt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Pt(902,!1);this._appRef=e}}class vJ extends ly{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Yw(e[Kt],e,e[br],!1)}checkNoChanges(){}get context(){return null}}class yB extends At{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=mi(e);return new dy(n,this.ngModule)}}function vB(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class wJ{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Bp(i);const r=this.injector.get(e,Ys,i);return r!==Ys||n===Ys?r:this.parentInjector.get(e,n,i)}}class dy extends je{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=vB(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return vB(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function DC(t){return t.map(Gp).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let s=(r=r||this.ngModule)instanceof No?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new wJ(e,s):e,a=o.get(Qn,null);if(null===a)throw new Pt(407,!1);const h={rendererFactory:a,sanitizer:o.get(gi,null),effectManager:o.get(pB,null),afterRenderEventManager:o.get(jM,null)},f=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=i?function Wq(t,e,n,i){const s=i.get(WF,!1)||n===ga.ShadowDom,o=t.selectRootElement(e,s);return function $q(t){nB(t)}(o),o}(f,i,this.componentDef.encapsulation,o):Om(f,m,function xJ(t){const e=t.toLowerCase();return"svg"===e?wx:"math"===e?"math":null}(m)),$=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let X=null;null!==v&&(X=ry(v,o,!0));const Q=$M(0,null,null,1,0,null,null,null,null,null,null),ve=Ww(null,Q,null,$,null,null,h,f,o,null,X);let Pe,$e;um(ve);try{const nt=this.componentDef;let tt,ft=null;nt.findHostDirectiveDefs?(tt=[],ft=new Map,nt.findHostDirectiveDefs(nt,tt,ft),tt.push(nt)):tt=[nt];const pt=function AJ(t,e){const n=t[Kt],i=ai;return t[i]=e,Km(n,i,2,"#host",null)}(ve,v),yt=function SJ(t,e,n,i,r,s,o){const a=r[Kt];!function CJ(t,e,n,i){for(const r of t)e.mergedAttrs=On(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Xw(e,e.mergedAttrs,!0),null!==n&&Lm(i,n,e))}(i,t,e,o);let c=null;null!==e&&(c=ry(e,r[dl]));const l=s.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const h=Ww(r,tB(n),null,d,r[t.index],t,s,l,null,null,c);return a.firstCreatePass&&YM(a,t,i.length-1),$w(r,h),r[t.index]=h}(pt,v,nt,tt,ve,h,f);$e=tb(Q,ai),v&&function MJ(t,e,n,i){if(i)wt(t,n,["ng-version",Xs.full]);else{const{attrs:r,classes:s}=function RC(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!oo(r))break;r=s}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&wt(t,n,r),s&&s.length>0&&Wu(t,n,s.join(" "))}}(f,nt,v,i),void 0!==n&&function IJ(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}($e,this.ngContentSelectors,n),Pe=function TJ(t,e,n,i,r,s){const o=ns(),a=r[Kt],c=uo(o,r);sB(a,r,o,n,null,i);for(let d=0;d<n.length;d++)Os(Ed(r,a,o.directiveStart+d,o),r);oB(a,r,o),c&&Os(c,r);const l=Ed(r,a,o.directiveStart+o.componentOffset,o);if(t[br]=r[br]=l,null!==s)for(const d of s)d(l,e);return zM(a,o,t),l}(yt,nt,tt,ft,ve,[DJ]),ZM(Q,ve,null)}finally{fb()}return new EJ(this.componentType,Pe,Yt($e,ve),ve,$e)}}class EJ extends Ae{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new vJ(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;JM(s[Kt],s,r,e,n),this.previousInputValues.set(e,n),oy(Io(this._tNode.index,s))}}get injector(){return new Rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function DJ(){const t=ns();Iu(St()[Kt],t)}function mn(t){let e=function xB(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(Gr(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Pt(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const o=t;o.inputs=Kw(t.inputs),o.inputTransforms=Kw(t.inputTransforms),o.declaredInputs=Kw(t.declaredInputs),o.outputs=Kw(t.outputs);const a=r.hostBindings;a&&PJ(t,a);const c=r.viewQuery,l=r.contentQueries;if(c&&OJ(t,c),l&&kJ(t,l),Nt(t.inputs,r.inputs),Nt(t.declaredInputs,r.declaredInputs),Nt(t.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Nt(o.inputTransforms,r.inputTransforms)),Gr(r)&&r.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===mn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function RJ(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=On(r.hostAttrs,n=On(n,r.hostAttrs))}}(i)}function Kw(t){return t===Hs?{}:t===qn?[]:t}function OJ(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function kJ(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,s)=>{e(i,r,s),n(i,r,s)}:e}function PJ(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function qw(t){return!!function QM(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Il(t,e,n){return t[e]=n}function mo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function wi(t,e,n,i){const r=St();return mo(r,Do(),e)&&(bi(),Ml(ur(),r,t,e,n,i)),wi}function Jm(t,e,n,i){return mo(t,Do(),n)?e+Hn(n)+i:Zn}function fn(t,e,n,i,r,s,o,a){const c=St(),l=bi(),d=t+ai,h=l.firstCreatePass?function sZ(t,e,n,i,r,s,o,a,c){const l=e.consts,d=Km(e,t,4,o||null,Ac(l,a));XM(e,n,d,Ac(l,c)),Iu(e,d);const h=d.tView=$M(2,d,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,n,i,r,s,o):l.data[d];_s(h,!1);const f=BB(l,c,h,t);vd()&&ta(l,c,f,h),Os(f,c),$w(c,c[d]=cB(f,c,f,h)),Kp(h)&&GM(l,c,h),null!=o&&WM(c,h,a)}let BB=function UB(t,e,n,i){return Cc(!0),e[Rn].createComment("")};function na(t){return _l(function am(){return Pn.lFrame.contextLView}(),ai+t)}function Ut(t,e,n){const i=St();return mo(i,Do(),e)&&wa(bi(),ur(),i,t,e,i[Rn],n,!1),Ut}function sI(t,e,n,i,r){const o=r?"class":"style";JM(t,n,e.inputs[o],o,i)}function Ct(t,e,n,i){const r=St(),s=bi(),o=ai+t,a=r[Rn],c=s.firstCreatePass?function lZ(t,e,n,i,r,s){const o=e.consts,c=Km(e,t,2,i,Ac(o,r));return XM(e,n,c,Ac(o,s)),null!==c.attrs&&Xw(c,c.attrs,!1),null!==c.mergedAttrs&&Xw(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,n,i):s.data[o],l=jB(s,r,c,a,e,t);r[o]=l;const d=Kp(c);return _s(c,!0),Lm(a,l,c),32!=(32&c.flags)&&vd()&&ta(s,r,l,c),0===function sb(){return Pn.lFrame.elementDepthCount}()&&Os(l,r),function zC(){Pn.lFrame.elementDepthCount++}(),d&&(GM(s,r,c),zM(s,c,r)),null!==i&&WM(r,c),Ct}function Dt(){let t=ns();qh()?om():(t=t.parent,_s(t,!1));const e=t;(function GC(t){return Pn.skipHydrationRootTNode===t})(e)&&function $C(){Pn.skipHydrationRootTNode=null}(),function ob(){Pn.lFrame.elementDepthCount--}();const n=bi();return n.firstCreatePass&&(Iu(n,t),$_(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Lx(t){return 0!=(8&t.flags)}(e)&&sI(n,e,St(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function qC(t){return 0!=(16&t.flags)}(e)&&sI(n,e,St(),e.stylesWithoutHost,!1),Dt}function jn(t,e,n,i){return Ct(t,e,n,i),Dt(),jn}let jB=(t,e,n,i,r,s)=>(Cc(!0),Om(i,r,function pb(){return Pn.lFrame.currentNamespace}()));function Pc(){return St()}function sg(t){return!!t&&"function"==typeof t.then}function zB(t){return!!t&&"function"==typeof t.subscribe}function gn(t,e,n,i){const r=St(),s=bi(),o=ns();return function WB(t,e,n,i,r,s,o){const a=Kp(i),l=t.firstCreatePass&&uB(t),d=e[br],h=dB(e);let f=!0;if(3&i.type||o){const T=uo(i,e),N=o?o(T):T,$=h.length,X=o?ve=>o(ki(ve[i.index])):i.index;let Q=null;if(!o&&a&&(Q=function mZ(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=e[vu],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,r,i.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,f=!1;else{s=XB(i,e,d,s,!1);const ve=n.listen(N,r,s);h.push(s,ve),l&&l.push(r,X,$,$+1)}}else s=XB(i,e,d,s,!1);const m=i.outputs;let v;if(f&&null!==m&&(v=m[r])){const T=v.length;if(T)for(let N=0;N<T;N+=2){const Pe=e[v[N]][v[N+1]].subscribe(s),$e=h.length;h.push(s,Pe),l&&l.push(r,i.index,$e,-($e+1))}}}(s,r,r[Rn],o,t,e,i),gn}function $B(t,e,n,i){try{return lo(6,e,n),!1!==n(i)}catch(r){return fB(t,r),!1}finally{lo(7,e,n)}}function XB(t,e,n,i,r){return function s(o){if(o===Function)return i;oy(t.componentOffset>-1?Io(t.index,e):e);let c=$B(e,n,i,o),l=s.__ngNextListenerFn__;for(;l;)c=$B(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&o.preventDefault(),c}}function Fn(t=1){return function hm(t){return(Pn.lFrame.contextLView=function Tu(t,e){for(;t>0;)e=e[za],t--;return e}(t,Pn.lFrame.contextLView))[br]}(t)}function gZ(t,e){let n=null;const i=function Hp(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?ud(t,s,!0):IC(i,s))return r}else n=r}return n}function qr(t){const e=St()[Yi][Ms];if(!e.projection){const i=e.projection=Bu(t?t.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=t?gZ(s,t):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Ln(t,e=0,n){const i=St(),r=bi(),s=Km(r,ai+t,16,null,n||null);null===s.projection&&(s.projection=e),om(),(!i[xc]||Cu())&&32!=(32&s.flags)&&function JT(t,e,n){yw(e[Rn],0,e,n,Dc(t,n,e),mw(n.parent||e[Ms],n,e))}(r,i,s)}function tE(t,e,n){return oI(t,"",e,"",n),tE}function oI(t,e,n,i,r){const s=St(),o=Jm(s,e,n,i);return o!==Zn&&wa(bi(),ur(),s,t,o,s[Rn],r,!1),oI}function nE(t,e){return t<<17|e<<2}function eh(t){return t>>17&32767}function aI(t){return 2|t}function Df(t){return(131068&t)>>2}function cI(t,e){return-131069&t|e<<2}function lI(t){return 1|t}function n3(t,e,n,i,r){const s=t[n+1],o=null===e;let a=i?eh(s):Df(s),c=!1;for(;0!==a&&(!1===c||o);){const d=t[a+1];wZ(t[a],e)&&(c=!0,t[a+1]=i?lI(d):aI(d)),a=i?eh(d):Df(d)}c&&(t[n+1]=i?aI(s):lI(s))}function wZ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Uu(t,e)>=0}const ys={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function r3(t){return t.substring(ys.key,ys.keyEnd)}function s3(t,e){const n=ys.textEnd;return n===e?-1:(e=ys.keyEnd=function CZ(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ys.key=e,n),og(t,e,n))}function og(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function iE(t,e,n){return Nc(t,e,n,!1),iE}function Nn(t,e){return Nc(t,e,null,!0),Nn}function Ea(t){!function Fc(t,e,n,i){const r=bi(),s=Sc(2);r.firstUpdatePass&&u3(r,null,s,i);const o=St();if(n!==Zn&&mo(o,s,n)){const a=r.data[Ds()];if(m3(a,i)&&!d3(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=Kn(c,n||"")),sI(r,a,o,n,i)}else!function NZ(t,e,n,i,r,s,o,a){r===Zn&&(r=qn);let c=0,l=0,d=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==d||null!==h;){const f=c<r.length?r[c+1]:void 0,m=l<s.length?s[l+1]:void 0;let T,v=null;d===h?(c+=2,l+=2,f!==m&&(v=h,T=m)):null===h||null!==d&&d<h?(c+=2,v=d):(l+=2,v=h,T=m),null!==v&&f3(t,e,n,i,v,T,o,a),d=c<r.length?r[c]:null,h=l<s.length?s[l]:null}}(r,a,o,o[Rn],o[s+1],o[s+1]=function PZ(t,e,n){if(null==n||""===n)return qn;const i=[],r=Po(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}(LZ,Dl,t,!0)}function Dl(t,e){for(let n=function AZ(t){return function a3(t){ys.key=0,ys.keyEnd=0,ys.value=0,ys.valueEnd=0,ys.textEnd=t.length}(t),s3(t,og(t,0,ys.textEnd))}(e);n>=0;n=s3(e,n))ho(t,r3(e),!0)}function Nc(t,e,n,i){const r=St(),s=bi(),o=Sc(2);s.firstUpdatePass&&u3(s,t,o,i),e!==Zn&&mo(r,o,e)&&f3(s,s.data[Ds()],r,r[Rn],t,r[o+1]=function FZ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Gt(Po(t)))),t}(e,n),i,o)}function d3(t,e){return e>=t.expandoStartIndex}function u3(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[Ds()],o=d3(t,n);m3(s,i)&&null===e&&!o&&(e=!1),e=function DZ(t,e,n,i){const r=function ub(t){const e=Pn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=_y(n=dI(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=dI(r,t,e,n,i),null===s){let c=function RZ(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Df(i))return t[eh(i)]}(t,e,i);void 0!==c&&Array.isArray(c)&&(c=dI(null,t,e,c[1],i),c=_y(c,e.attrs,i),function OZ(t,e,n,i){t[eh(n?e.classBindings:e.styleBindings)]=i}(t,e,i,c))}else s=function kZ(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=_y(i,t[s].hostAttrs,n);return _y(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function vZ(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=eh(o),c=Df(o);t[i]=n;let d,l=!1;if(Array.isArray(n)?(d=n[1],(null===d||Uu(n,d)>0)&&(l=!0)):d=n,r)if(0!==c){const f=eh(t[a+1]);t[i+1]=nE(f,a),0!==f&&(t[f+1]=cI(t[f+1],i)),t[a+1]=function bZ(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=nE(a,0),0!==a&&(t[a+1]=cI(t[a+1],i)),a=i;else t[i+1]=nE(c,0),0===a?a=i:t[c+1]=cI(t[c+1],i),c=i;l&&(t[i+1]=aI(t[i+1])),n3(t,d,i,!0),n3(t,d,i,!1),function xZ(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Uu(s,e)>=0&&(n[i+1]=lI(n[i+1]))}(e,d,t,i,s),o=nE(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function dI(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=_y(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function _y(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ho(t,o,!!n||e[++s]))}return void 0===t?null:t}function LZ(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&ho(t,i,n)}function f3(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],d=function yZ(t){return 1==(1&t)}(l)?p3(c,e,n,r,Df(l),o):void 0;rE(d)||(rE(s)||function _Z(t){return 2==(2&t)}(l)&&(s=p3(c,null,n,r,a,o)),function QT(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=-1===i.indexOf("-")?void 0:Sl.DashCase;null==r?t.removeStyle(n,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Sl.Important),t.setStyle(n,i,r,s))}}(i,o,rm(Ds(),n),r,s))}function p3(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const c=t[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let f=n[r+1];f===Zn&&(f=h?qn:void 0);let m=h?Sb(f,i):d===i?f:void 0;if(l&&!rE(m)&&(m=Sb(c,i)),rE(m)&&(a=m,o))return a;const v=t[r+1];r=o?eh(v):Df(v)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Sb(c,i))}return a}function rE(t){return void 0!==t}function m3(t,e){return 0!=(t.flags&(e?8:16))}function ci(t,e=""){const n=St(),i=bi(),r=t+ai,s=i.firstCreatePass?Km(i,r,1,e,null):i.data[r],o=g3(i,n,s,e,t);n[r]=o,vd()&&ta(i,n,o,s),_s(s,!1)}let g3=(t,e,n,i,r)=>(Cc(!0),function hf(t,e){return t.createText(e)}(e[Rn],i));function ks(t){return Bo("",t,""),ks}function Bo(t,e,n){const i=St(),r=Jm(i,t,e,n);return r!==Zn&&function Rd(t,e,n){const i=rm(e,t);!function fw(t,e,n){t.setValue(e,n)}(t[Rn],i,n)}(i,Ds(),r),Bo}function Rl(t,e,n){const i=St();return mo(i,Do(),e)&&wa(bi(),ur(),i,t,e,i[Rn],n,!0),Rl}const cg="en-US";let N3=cg;function pI(t,e,n,i,r){if(t=ln(t),Array.isArray(t))for(let s=0;s<t.length;s++)pI(t[s],e,n,i,r);else{const s=bi(),o=St(),a=ns();let c=Id(t)?t:ln(t.provide);const l=Hm(t),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(Id(t)||!t.multi){const m=new Ru(l,r,Ve),v=gI(c,e,r?d:d+f,h);-1===v?(xb(Xr(a,o),s,c),mI(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(m),o.push(m)):(n[v]=m,o[v]=m)}else{const m=gI(c,e,d+f,h),v=gI(c,e,d,d+f),N=v>=0&&n[v];if(r&&!N||!r&&!(m>=0&&n[m])){xb(Xr(a,o),s,c);const $=function ree(t,e,n,i,r){const s=new Ru(t,n,Ve);return s.multi=[],s.index=e,s.componentProviders=0,a4(s,r,i&&!n),s}(r?iee:nee,n.length,r,i,l);!r&&N&&(n[v].providerFactory=$),mI(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push($),o.push($)}else mI(s,t,m>-1?m:v,a4(n[r?v:m],l,!r&&i));!r&&i&&N&&n[v].componentProviders++}}}function mI(t,e,n,i){const r=Id(e),s=function SM(t){return!!t.useClass}(e);if(r||s){const c=(s?ln(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(n);-1===d?l.push(n,[i,c]):l[d+1].push(i,c)}else l.push(n,c)}}}function a4(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function gI(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function nee(t,e,n,i){return _I(this.multi,[])}function iee(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ed(n,n[Kt],this.providerFactory.index,i);s=a.slice(0,o),_I(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],_I(r,s);return s}function _I(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function li(t,e=[]){return n=>{n.providersResolver=(i,r)=>function tee(t,e,n){const i=bi();if(i.firstCreatePass){const r=Gr(t);pI(n,i.data,i.blueprint,r,!0),pI(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}class Of{}class c4{}class bI extends Of{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yB(this);const r=function Mo(t,e){const n=t[lx]||null;if(!n&&!0===e)throw new Error(`Type ${Gt(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Dd(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=jF(e,n,[{provide:Of,useValue:this},{provide:At,useValue:this.componentFactoryResolver},...i],Gt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class yI extends c4{constructor(e){super(),this.moduleType=e}create(e){return new bI(this.moduleType,e,[])}}function lE(t,e,n){const i=Is()+t,r=St();return r[i]===Zn?Il(r,i,n?e.call(n):e()):function uy(t,e){return t[e]}(r,i)}function b4(t,e,n,i,r,s){const o=e+n;return mo(t,o,r)?Il(t,o+1,s?i.call(s,r):i(r)):function Ey(t,e){const n=t[e];return n===Zn?void 0:n}(t,o+1)}function rs(t,e){const n=bi();let i;const r=t+ai;n.firstCreatePass?(i=function See(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=_d(i.type)),a=Ts(Ve);try{const c=xn(!1),l=s();return xn(c),function cZ(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,St(),r,l),l}finally{Ts(a)}}function Ks(t,e,n){const i=t+ai,r=St(),s=_l(r,i);return function Ay(t,e){return t[Kt].data[e].pure}(r,i)?b4(r,Is(),e,s.transform,n,s):s.transform(n)}function xI(t){return e=>{setTimeout(t,void 0,e)}}const tn=class Iee extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=xI(s),r&&(r=xI(r)),o&&(o=xI(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof C&&e.add(a),a}};function Dee(){return this._results[Symbol.iterator]()}class Sy{get changes(){return this._changes||(this._changes=new tn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Sy.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Dee)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function Qo(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function oT(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Oee(t,e,n,i=!0){const r=e[Kt];if(function GT(t,e,n,i){const r=ms+i,s=n.length;i>0&&(n[r-1][Ii]=e),i<s-ms?(e[Ii]=n[r],Wx(n,ms+i,e)):(n.push(e),e[Ii]=null),e[ir]=n;const o=e[hl];null!==o&&n!==o&&function WT(t,e){const n=t[xu];e[Yi]!==e[ir][ir][Yi]&&(t[Wh]=!0),null===n?t[xu]=[e]:n.push(e)}(o,e);const a=e[Ga];null!==a&&a.insertView(t),e[Gn]|=128}(r,e,t,n),i){const s=Ki(n,t),o=e[Rn],a=Pm(o,t[Mr]);null!==a&&function VT(t,e,n,i,r,s){i[Tr]=r,i[Ms]=e,mf(t,i,n,1,r,s)}(r,t[Ms],o,e,a,s)}}let Qa=(()=>{class e{}return e.__NG_ELEMENT_ID__=Lee,e})();const kee=Qa,Pee=class extends kee{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=function Ree(t,e,n,i){const r=e.tView,a=Ww(t,r,n,4096&t[Gn]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[hl]=t[e.index];const l=t[Ga];return null!==l&&(a[Ga]=l.createEmbeddedView(r)),ZM(r,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:i});return new ly(r)}};function Lee(){return uE(ns(),St())}function uE(t,e){return 4&t.type?new Pee(e,t,Yt(t,e)):null}let qs=(()=>{class e{}return e.__NG_ELEMENT_ID__=Vee,e})();function Vee(){return I4(ns(),St())}const Hee=qs,T4=class extends Hee{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Yt(this._hostTNode,this._hostLView)}get injector(){return new Rs(this._hostTNode,this._hostLView)}get parentInjector(){const e=ef(this._hostTNode,this._hostLView);if(Qh(e)){const n=xl(e,this._hostLView),i=wd(e);return new Rs(n[Kt].data[i+8],n)}return new Rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=M4(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-ms}createEmbeddedView(e,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,n,i,r,s){const o=e&&!function nf(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const T=n||{};a=T.index,i=T.injector,r=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const c=o?e:new dy(mi(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const N=(o?l:this.parentInjector).get(No,null);N&&(s=N)}mi(c.componentType??{});const m=c.create(l,r,null,s);return this.insertImpl(m.hostView,a,false),m}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,i){const r=e._lView;if(function Cx(t){return co(t[ir])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[ir],d=new T4(l,l[Ms],l[ir]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return Oee(a,r,o,!i),e.attachToViewContainerRef(),Wx(wI(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=M4(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=km(this._lContainer,n);i&&(rf(wI(this._lContainer),n),Nb(i[Kt],i))}detach(e){const n=this._adjustIndex(e,-1),i=km(this._lContainer,n);return i&&null!=rf(wI(this._lContainer),n)?new ly(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function M4(t){return t[8]}function wI(t){return t[8]||(t[8]=[])}function I4(t,e){let n;const i=e[t.index];return co(i)?n=i:(n=cB(i,e,null,t),e[t.index]=n,$w(e,n)),D4(n,e,t,i),new T4(n,t,e)}let D4=function R4(t,e,n,i){if(t[Mr])return;let r;r=8&n.type?ki(i):function zee(t,e){const n=t[Rn],i=n.createComment(""),r=uo(e,t);return Cd(n,Pm(n,r),i,function qT(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Mr]=r};class EI{constructor(e){this.queryList=e,this.matches=null}clone(){return new EI(this.queryList)}setDirty(){this.queryList.setDirty()}}class AI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new AI(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==N4(e,n).matches&&this.queries[n].setDirty()}}class O4{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class SI{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new SI(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class CI{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new CI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,$ee(n,s)),this.matchTNodeWithReadOption(e,n,Ou(n,e,s,!1,!1))}else i===Qa?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ou(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Mt||r===qs||r===Qa&&4&n.type)this.addMatch(n.index,-2);else{const s=Ou(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function $ee(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function Yee(t,e,n,i){return-1===n?function Xee(t,e){return 11&t.type?Yt(t,e):4&t.type?uE(t,e):null}(e,t):-2===n?function Kee(t,e,n){return n===Mt?Yt(e,t):n===Qa?uE(e,t):n===qs?I4(e,t):void 0}(t,e,i):Ed(t,t[Kt],n,e)}function k4(t,e,n,i){const r=e[Ga].queries[i];if(null===r.matches){const s=t.data,o=n.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:Yee(e,s[l],o[c+1],n.metadata.read))}r.matches=a}return r.matches}function TI(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=k4(t,e,r,n);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],d=e[-c];for(let h=ms;h<d.length;h++){const f=d[h];f[hl]===f[ir]&&TI(f[Kt],f,l,i)}if(null!==d[xu]){const h=d[xu];for(let f=0;f<h.length;f++){const m=h[f];TI(m[Kt],m,l,i)}}}}}return i}function Bn(t){const e=St(),n=bi(),i=Rx();dm(i+1);const r=N4(n,i);if(t.dirty&&function nb(t){return 4==(4&t[Gn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?TI(n,e,i,[]):k4(n,e,r,i);t.reset(s,Tn),t.notifyOnChanges()}return!0}return!1}function Pi(t,e,n){const i=bi();i.firstCreatePass&&(L4(i,new O4(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),P4(i,St(),e)}function Un(){return function qee(t,e){return t[Ga].queries[e].queryList}(St(),Rx())}function P4(t,e,n){const i=new Sy(4==(4&n));(function Kq(t,e,n,i){const r=dB(e);r.push(n),t.firstCreatePass&&uB(t).push(i,r.length-1)})(t,e,i,i.destroy),null===e[Ga]&&(e[Ga]=new AI),e[Ga].queries.push(new EI(i))}function L4(t,e,n){null===t.queries&&(t.queries=new SI),t.queries.track(new CI(e,n))}function N4(t,e){return t.queries.getByIndex(e)}const kI=new bt("Application Initializer");let PI=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=zt(kI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const s of this.appInits){const o=s();if(sg(o))i.push(o);else if(zB(o)){const a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});i.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),0===i.length&&r(),this.initialized=!0}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Ol=new bt("LocaleId",{providedIn:"root",factory:()=>zt(Ol,ei.Optional|ei.SkipSelf)||function bte(){return typeof $localize<"u"&&$localize.locale||cg}()});let pE=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function iU(...t){}class on{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tn(!1),this.onMicrotaskEmpty=new tn(!1),this.onStable=new tn(!1),this.onError=new tn(!1),typeof Zone>"u")throw new Pt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Hte(){const t="function"==typeof Ai.requestAnimationFrame;let e=Ai[t?"requestAnimationFrame":"setTimeout"],n=Ai[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Wte(t){const e=()=>{!function Gte(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ai,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,BI(t),t.isCheckStableRunning=!0,FI(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),BI(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return rU(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),sU(t)}},onInvoke:(n,i,r,s,o,a,c)=>{try{return rU(t),n.invoke(r,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),sU(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,BI(t),FI(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!on.isInAngularZone())throw new Pt(909,!1)}static assertNotInAngularZone(){if(on.isInAngularZone())throw new Pt(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,zte,iU,iU);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const zte={};function FI(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function BI(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function rU(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sU(t){t._nesting--,FI(t)}class $te{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tn,this.onMicrotaskEmpty=new tn,this.onStable=new tn,this.onError=new tn}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const oU=new bt("",{providedIn:"root",factory:aU});function aU(){const t=zt(on);let e=!0;return Xi(new We(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),new We(r=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{on.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=t.onUnstable.subscribe(()=>{on.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(io()))}const cU=new bt(""),gE=new bt("");let VI,UI=(()=>{var t;class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,VI||(function Xte(t){VI=t}(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{on.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:o,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(on),rt(jI),rt(gE))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),jI=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return VI?.findTestabilityInTree(this,i,r)??null}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),th=null;const lU=new bt("AllowMultipleToken"),HI=new bt("PlatformDestroyListeners"),_E=new bt("appBootstrapListener");function hU(t,e,n=[]){const i=`Platform: ${e}`,r=new bt(i);return(s=[])=>{let o=zI();if(!o||o.injector.get(lU,!1)){const a=[...n,...s,{provide:r,useValue:!0}];t?t(a):function qte(t){if(th&&!th.get(lU,!1))throw new Pt(400,!1);(function dU(){!function q_(t){K_=t}(()=>{throw new Pt(600,!1)})})(),th=t;const e=t.get(pU);(function uU(t){t.get(Nw,null)?.forEach(n=>n())})(t)}(function fU(t=[],e){return hr.create({name:e,providers:[{provide:Jb,useValue:"platform"},{provide:HI,useValue:new Set([()=>th=null])},...t]})}(a,i))}return function Zte(t){const e=zI();if(!e)throw new Pt(401,!1);return e}()}}function zI(){return th?.get(pU)??null}let pU=(()=>{var t;class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const s=function Qte(t="zone.js",e){return"noop"===t?new $te:"zone.js"===t?new on(e):t}(r?.ngZone,function mU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return s.run(()=>{const o=function oee(t,e,n){return new bI(t,e,n)}(i.moduleType,this.injector,function vU(t){return[{provide:on,useFactory:t},{provide:yf,multi:!0,useFactory:()=>{const e=zt(tne,{optional:!0});return()=>e.initialize()}},{provide:yU,useFactory:ene},{provide:oU,useFactory:aU}]}(()=>s)),a=o.injector.get(kc,null);return s.runOutsideAngular(()=>{const c=s.onError.subscribe({next:l=>{a.handleError(l)}});o.onDestroy(()=>{bE(this._modules,o),c.unsubscribe()})}),function gU(t,e,n){try{const i=n();return sg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(a,s,()=>{const c=o.injector.get(PI);return c.runInitializers(),c.donePromise.then(()=>(function F3(t){Cs(t,"Expected localeId to be defined"),"string"==typeof t&&(N3=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Ol,cg)||cg),this._moduleDoBootstrap(o),o))})})}bootstrapModule(i,r=[]){const s=_U({},r);return function Yte(t,e,n){const i=new yI(n);return Promise.resolve(i)}(0,0,i).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(i){const r=i.injector.get(kf);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!i.instance.ngDoBootstrap)throw new Pt(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get(HI,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(hr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function _U(t,e){return Array.isArray(e)?e.reduce(_U,t):{...t,...e}}let kf=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=zt(yU),this.zoneIsStable=zt(oU),this.componentTypes=[],this.components=[],this.isStable=zt(pE).hasPendingTasks.pipe(Oe(i=>i?$t(!1):this.zoneIsStable),Ue(),io()),this._injector=zt(No)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const s=i instanceof je;if(!this._injector.get(PI).done)throw!s&&function vc(t){const e=mi(t)||Sr(t)||Cr(t);return null!==e&&e.standalone}(i),new Pt(405,!1);let a;a=s?i:this._injector.get(At).resolveComponentFactory(i),this.componentTypes.push(a.componentType);const c=function Kte(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Of),d=a.create(hr.NULL,[],r||a.selector,c),h=d.location.nativeElement,f=d.injector.get(cU,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),bE(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Pt(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;bE(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(_E,[]);r.push(...this._bootstrapListeners),r.forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>bE(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Pt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function bE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const yU=new bt("",{providedIn:"root",factory:()=>zt(kc).handleError.bind(void 0)});function ene(){const t=zt(on),e=zt(kc);return n=>t.runOutsideAngular(()=>e.handleError(n))}let tne=(()=>{var t;class e{constructor(){this.zone=zt(on),this.applicationRef=zt(kf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let os=(()=>{class e{}return e.__NG_ELEMENT_ID__=ine,e})();function ine(t){return function rne(t,e,n){if(gd(t)&&!n){const i=Io(t.index,e);return new ly(i,i)}return 47&t.type?new ly(e[Yi],e):null}(ns(),St(),16==(16&t))}class AU{constructor(){}supports(e){return qw(e)}create(e){return new dne(e)}}const lne=(t,e)=>e;class dne{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||lne}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<CU(i,r,s)?n:i,a=CU(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,d=c-r;if(l!=d){for(let f=0;f<l;f++){const m=f<s.length?s[f]:s[f]=0,v=m+f;d<=v&&v<l&&(s[f]=m+1)}s[o.previousIndex]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!qw(e))throw new Pt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function VJ(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new une(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new SU),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new SU),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class une{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hne{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class SU{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new hne,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function CU(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function MU(){return new xE([new AU])}let xE=(()=>{var t;class e{constructor(i){this.factories=i}static create(i,r){if(null!=r){const s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||MU()),deps:[[e,new Vu,new ju]]}}find(i){const r=this.factories.find(s=>s.supports(i));if(null!=r)return r;throw new Pt(901,!1)}}return(t=e).\u0275prov=Et({token:t,providedIn:"root",factory:MU}),e})();const _ne=hU(null,"core",[]);let bne=(()=>{var t;class e{constructor(i){}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(kf))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),e})(),KI=null;function nh(){return KI}class Rne{}const $n=new bt("DocumentToken");let FU=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return zt(One)},providedIn:"platform"}),e})(),One=(()=>{var t;class e extends FU{constructor(){super(),this._doc=zt($n),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return nh().getBaseHref(this._doc)}onPopState(i){const r=nh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=nh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function BU(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function UU(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Lf(t){return t&&"?"!==t[0]?"?"+t:t}let EE=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(){return zt(Pne)},providedIn:"root"}),e})();const kne=new bt("appBaseHref");let Pne=(()=>{var t;class e extends EE{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??zt($n).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return BU(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+Lf(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){const a=this.prepareExternalUrl(s+Lf(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){const a=this.prepareExternalUrl(s+Lf(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(FU),rt(kne,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Dy=(()=>{var t;class e{constructor(i){this._subject=new tn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function Fne(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(UU(jU(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Lf(r))}normalize(i){return e.stripTrailingSlash(function Nne(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,jU(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Lf(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Lf(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}}return(t=e).normalizeQueryParams=Lf,t.joinWithSlash=BU,t.stripTrailingSlash=UU,t.\u0275fac=function(i){return new(i||t)(rt(EE))},t.\u0275prov=Et({token:t,factory:function(){return function Lne(){return new Dy(rt(EE))}()},providedIn:"root"}),e})();function jU(t){return t.replace(/\/index.html$/,"")}function KU(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class wie{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ld=(()=>{var t;class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new wie(s.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===o?void 0:o);else if(null!==o){const c=r.get(o);r.move(c,a),ZU(c,s)}});for(let s=0,o=r.length;s<o;s++){const c=r.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{ZU(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(qs),Ve(Qa),Ve(xE))},t.\u0275dir=Ht({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function ZU(t,e){t.context.$implicit=e.item}let Uc=(()=>{var t;class e{constructor(i,r){this._viewContainer=i,this._context=new Eie,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){QU("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){QU("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(qs),Ve(Qa))},t.\u0275dir=Ht({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Eie{constructor(){this.$implicit=null,this.ngIf=null}}function QU(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Gt(e)}'.`)}class Cie{createSubscription(e,n){return gl(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){gl(()=>e.unsubscribe())}}class Tie{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const Mie=new Tie,Iie=new Cie;let ky=(()=>{var t;class e{constructor(i){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){return this._obj?i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue:(i&&this._subscribe(i),this._latestValue)}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(sg(i))return Mie;if(zB(i))return Iie;throw function jc(t,e){return new Pt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(os,16))},t.\u0275pipe=zr({name:"async",type:t,pure:!1,standalone:!0}),e})(),Gi=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),e})();const oj="browser";function ih(t){return t===oj}function uD(t){return"server"===t}class aj{}class _re extends Rne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pD extends _re{static makeCurrent(){!function Dne(t){KI||(KI=t)}(new pD)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function bre(){return Ly=Ly||document.querySelector("base"),Ly?Ly.getAttribute("href"):null}();return null==n?null:function yre(t){FE=FE||document.createElement("a"),FE.setAttribute("href",t);const e=FE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ly=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return KU(document.cookie,e)}}let FE,Ly=null,xre=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const mD=new bt("EventManagerPlugins");let hj=(()=>{var t;class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Pt(5101,!1);return this._eventNameToPlugin.set(i,r),r}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(mD),rt(on))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();class fj{constructor(e){this._doc=e}}const gD="ng-app-id";let pj=(()=>{var t;class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=uD(o),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(i){for(const r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){const r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${gD}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){const s=this.styleRef;if(s.has(i)){const o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){const s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(gD),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(gD,this.appId),a}}addStyleToHost(i,r){const s=this.getStyleElement(i,r);i.appendChild(s);const o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n),rt(wf),rt(Ef,8),rt(xa))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const _D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bD=/%COMP%/g,Sre=new bt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function gj(t,e){return e.map(n=>n.replace(bD,t))}let _j=(()=>{var t;class e{constructor(i,r,s,o,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=uD(c),this.defaultRenderer=new yD(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ga.ShadowDom&&(r={...r,encapsulation:ga.Emulated});const s=this.getOrCreateRenderer(i,r);return s instanceof yj?s.applyToHost(i):s instanceof vD&&s.applyStyles(),s}getOrCreateRenderer(i,r){const s=this.rendererByCompId;let o=s.get(r.id);if(!o){const a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case ga.Emulated:o=new yj(l,d,r,this.appId,h,a,c,f);break;case ga.ShadowDom:return new Ire(l,d,i,r,a,c,this.nonce,f);default:o=new vD(l,d,r,h,a,c,f)}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(hj),rt(pj),rt(wf),rt(Sre),rt($n),rt(xa),rt(on),rt(Ef))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();class yD{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(_D[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(bj(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(bj(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Pt(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=_D[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=_D[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Sl.DashCase|Sl.Important)?e.style.setProperty(n,i,r&Sl.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Sl.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=nh().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function bj(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Ire extends yD{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=gj(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class vD extends yD{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?gj(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class yj extends vD{constructor(e,n,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=function Cre(t){return"_ngcontent-%COMP%".replace(bD,t)}(l),this.hostAttr=function Tre(t){return"_nghost-%COMP%".replace(bD,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let Dre=(()=>{var t;class e extends fj{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const vj=["alt","control","meta","shift"],Rre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ore={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let kre=(()=>{var t;class e extends fj{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,s){const o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>nh().onAndCancel(i,o.domEventName,a))}static parseEventName(i){const r=i.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const o=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),vj.forEach(d=>{const h=r.indexOf(d);h>-1&&(r.splice(h,1),a+=d+".")}),a+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=Rre[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),vj.forEach(a=>{a!==s&&(0,Ore[a])(i)&&(o+=a+".")}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const wj=[{provide:xa,useValue:oj},{provide:Nw,useValue:function Pre(){pD.makeCurrent()},multi:!0},{provide:$n,useFactory:function Nre(){return function tM(t){Ub=t}(document),document},deps:[]}],Fre=hU(_ne,"browser",wj),Bre=new bt(""),Ej=[{provide:gE,useClass:class vre{addToWindow(e){Ai.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Pt(5103,!1);return s},Ai.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ai.getAllAngularRootElements=()=>e.getAllRootElements(),Ai.frameworkStabilizers||(Ai.frameworkStabilizers=[]),Ai.frameworkStabilizers.push(i=>{const r=Ai.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?nh().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:cU,useClass:UI,deps:[on,jI,gE]},{provide:UI,useClass:UI,deps:[on,jI,gE]}],Aj=[{provide:Jb,useValue:"root"},{provide:kc,useFactory:function Lre(){return new kc},deps:[]},{provide:mD,useClass:Dre,multi:!0,deps:[$n,on,xa]},{provide:mD,useClass:kre,multi:!0,deps:[$n]},_j,pj,hj,{provide:Qn,useExisting:_j},{provide:aj,useClass:xre,deps:[]},[]];let Ure=(()=>{var t;class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:wf,useValue:i.appId}]}}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Bre,12))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({providers:[...Aj,...Ej],imports:[Gi,bne]}),e})();typeof window<"u"&&window;let Ny=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:function(i){let r=null;return r=i?new(i||t):rt(Mj),r},providedIn:"root"}),e})(),Mj=(()=>{var t;class e extends Ny{constructor(i){super(),this._doc=i}sanitize(i,r){if(null==r)return null;switch(i){case is.NONE:return r;case is.HTML:return qa(r,"HTML")?Po(r):zb(this._doc,String(r)).toString();case is.STYLE:return qa(r,"Style")?Po(r):r;case is.SCRIPT:if(qa(r,"Script"))return Po(r);throw new Pt(5200,!1);case is.URL:return qa(r,"URL")?Po(r):Yu(String(r));case is.RESOURCE_URL:if(qa(r,"ResourceURL"))return Po(r);throw new Pt(5201,!1);default:throw new Pt(5202,!1)}}bypassSecurityTrustHtml(i){return function sM(t){return new nM(t)}(i)}bypassSecurityTrustStyle(i){return function oM(t){return new Ti(t)}(i)}bypassSecurityTrustScript(i){return function aM(t){return new iM(t)}(i)}bypassSecurityTrustUrl(i){return function cM(t){return new xw(t)}(i)}bypassSecurityTrustResourceUrl(i){return function lM(t){return new Bm(t)}(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n))},t.\u0275prov=Et({token:t,factory:function(i){let r=null;return r=i?new i:function Wre(t){return new Mj(t.get($n))}(rt(hr)),r},providedIn:"root"}),e})();const wD={now:()=>(wD.delegate||Date).now(),delegate:void 0};class Nf extends H{constructor(e=1/0,n=1/0,i=wD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=n.now();let a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}}const BE={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return BE.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return BE.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let ED;function ese(t,e,n){let i=n;return function Xre(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,s)=>!("*"===r||!function Kre(t,e){if(!ED){const n=Element.prototype;ED=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&ED.call(t,e)}(t,r)||(i=s,0))),i}class nse{constructor(e,n){this.componentFactory=n.get(At).resolveComponentFactory(e)}create(e){return new ise(this.componentFactory,e)}}class ise{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new Nf(1),this.events=this.eventEmitters.pipe(Oe(i=>Xi(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(on),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=BE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function qre(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=hr.create({providers:[],parent:this.injector}),i=function Qre(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=n.length;s<o;++s){const a=n[s],c=ese(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(os),this.implementsOnChanges=function Yre(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(kf).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(I(o=>({name:r,value:o}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=BE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new im(s,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class rse extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const ose={initialConfig:{},parse:{},rename:{}};class ase{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...ose,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,o={...r,...i.snapshot,...n};for(const[a,c]of Object.entries(e))this.processChange(a,c,o);i.setConfig(o)}processChange(e,n,i){const{options:{parse:r,rename:s}}=this,o=s[e]??e,a=n.currentValue,c=r[e]??r[o];if(null==a)delete i[o];else if(c)try{i[o]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a}`,l.message)}else i[o]=a}}let cse=(()=>{var t;class e{constructor(i,r,s={}){this.configState=i,this.cdr=r,this.options=s,this.initialized=!1,this.configManager=new ase(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(i){this.configManager.addChanges(i),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return(t=e).\u0275fac=function(i){Qu()},t.\u0275dir=Ht({type:t,features:[Dr]}),e})();const AD={boolean:t=>"false"!=`${t}`,json:t=>"string"==typeof t?JSON.parse(t):t,stringArray:t=>"string"==typeof t?Array.from(t).filter(e=>!"[], ".includes(e)):t,function:t=>{if("function"!=typeof t)throw new Error("Expected a javascript function");return t}},Ff_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api--staging/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??"",useRemoteApi:!1,remoteApiEndpoint:"https://apps.humanatlas.io/hra-api--staging/v1"};function Dj(t,e,n,i,r,s,o){try{var a=t[s](o),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function jt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(c){Dj(s,i,r,o,a,"next",c)}function a(c){Dj(s,i,r,o,a,"throw",c)}o(void 0)})}}function Fy(t){return(Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function xe(t,e,n){return(e=function dse(t){var e=function lse(t,e){if("object"!==Fy(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Fy(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Fy(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rj(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function nc(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||Rj()}const Oj=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";nc();class hse{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";xe(this,"storage",void 0),xe(this,"id",void 0),xe(this,"config",void 0),this.storage=function use(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function SD(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let UE;var t;function kj(t){return"string"==typeof t?UE[t.toUpperCase()]||UE.WHITE:t}function jE(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=UE||(UE={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const sh={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},VE=sh.window||sh.self||sh.global,By=sh.process||{};function fg(){let t;var e,n;if(nc&&"performance"in VE)t=null==VE||null===(e=VE.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in By){var i;const r=null==By||null===(i=By.hrtime)||void 0===i?void 0:i.call(By);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const pg={debug:nc&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},yse={enabled:!0,level:0};function ic(){}const Pj={},Lj={once:!0};class mg{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};xe(this,"id",void 0),xe(this,"VERSION",Oj),xe(this,"_startTs",fg()),xe(this,"_deltaTs",fg()),xe(this,"_storage",void 0),xe(this,"userData",{}),xe(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new hse("__probe-".concat(this.id,"__"),yse),this.timeStamp("".concat(this.id," started")),function bse(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(s=>r===s)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((fg()-this._startTs).toPrecision(10))}getDelta(){return Number((fg()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){jE(e,n)}warn(e){return this._getLogFunction(0,e,pg.warn,arguments,Lj)}error(e){return this._getLogFunction(0,e,pg.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,pg.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,pg.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return this._getLogFunction(e,n,pg.debug||pg.info,arguments,Lj)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||ic,i&&[i],{tag:Ese(n)}):ic}image(e){let{logLevel:n,priority:i,image:r,message:s="",scale:o=1}=e;return this._shouldLog(n||i)?nc?function wse(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const s=new Image;return s.onload=()=>{const o=SD(s,n,i);console.log(...o)},s.src=e,ic}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...SD(e,n,i)),ic;if("canvas"===r.toLowerCase()){const s=new Image;return s.onload=()=>console.log(...SD(s,n,i)),s.src=e.toDataURL(),ic}return ic}({image:r,message:s,scale:o}):function xse(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),ic}({image:r,message:s,scale:o}):ic}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||ic)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Fj({logLevel:e,message:n,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||ic)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Nj(e)}_getLogFunction(e,n,i,r,s){if(this._shouldLog(e)){s=Fj({logLevel:e,message:n,args:r,opts:s}),jE(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=fg();const o=s.tag||s.message;if(s.once){if(Pj[o])return ic;Pj[o]=fg()}return n=function vse(t,e,n){if("string"==typeof e){const i=n.time?function pse(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function fse(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function _se(t,e,n){return!nc&&"string"==typeof t&&(e&&(e=kj(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=kj(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),i.bind(console,n,...s.args)}return ic}}function Nj(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return jE(Number.isFinite(e)&&e>=0),e}function Fj(t){const{logLevel:e,message:n}=t;t.logLevel=Nj(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return jE("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Ese(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}xe(mg,"VERSION",Oj);const _i=new mg({id:"deck"}),Ei={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ei,"IDENTITY",{get:()=>(_i.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const kl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},HE={common:0,meters:1,pixels:2},Bj={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},yn=new mg({id:"luma.gl"});function Ho(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Sse="Requires WebGL2";function zE(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function pi(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function GE(t){return Ho(zE(t),"Invalid WebGLRenderingContext"),t}function go(t){return Ho(pi(t),Sse),t}const jy={};const Vy=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(Vy.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Bf=function(e){const n=this;this.gl=e,function Dse(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(jy[i]=!0)}while(0!==i);for(i in jy)if(jy[i])return delete jy[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,d){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=n.currentArrayBuffer,f.size=o,f.type=a,f.normalized=c,f.stride=l,f.offset=d,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Mse(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Bf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Bf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new Vy(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Bf.prototype.createVertexArrayOES=function(){const e=new Vy(this);return this.vertexArrayObjects.push(e),e},Bf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Bf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Vy&&e.hasBeenBound&&e.ext===this)},Bf.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function Ise(t,e){jy[t]=!0,void 0!==e&&function Tse(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const Uj="OES_element_index",jj="WEBGL_draw_buffers",Vj="WEBGL_debug_renderer_info",ar=t=>pi(t)?void 0:0,Vse={3074:t=>pi(t)?void 0:36064,35723:t=>pi(t)?void 0:4352,35977:ar,32937:ar,36795:(t,e)=>{const n=pi(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(Vj);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(Vj);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:ar,35071:ar,37447:ar,36063:(t,e)=>{if(!pi(t)){const n=t.getExtension(jj);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:ar,35374:ar,35377:ar,34852:t=>{if(!pi(t)){const e=t.getExtension(jj);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Uj)?2147483647:65535,33001:t=>t.getExtension(Uj)?16777216:65535,33e3:t=>16777216,37157:ar,35373:ar,35657:ar,36183:ar,37137:ar,34045:ar,35978:ar,35979:ar,35968:ar,35376:ar,35375:ar,35659:ar,37154:ar,35371:ar,35658:ar,35076:ar,35077:ar,35380:ar},Hj="ANGLE_instanced_arrays",zj={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Ho(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Hj]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Ho(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ho(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Ho(!1)},deleteQuery:()=>{Ho(!1)},beginQuery:()=>{Ho(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},CD={readBuffer:(t,e,n)=>{pi(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:s}=function Yse(t,e){return{webgl2:pi(t),ext:t.getExtension(e)}}(t,Hj);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!pi(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>pi(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function Hse(t,e,n){const i=Vse[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function Qse(t,e){let{extension:n,target:i,target2:r}=e;const s=zj[n];Ho(s);const{meta:o={}}=s,{suffix:a=""}=o,c=t.getExtension(n);for(const l of Object.keys(s)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof s[l]&&(h=s[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function Kse(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function Rse(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Bf(this)),this.__OESVertexArrayObject))}}(t),function qse(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function Zse(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&Qse(t,{extension:n,target:t.luma,target2:t})}(t,zj),function Jse(t,e){let{target:n,target2:i}=e;Object.keys(CD).forEach(r=>{if("function"==typeof CD[r]){const s=t[r]?t[r].bind(t):()=>{},o=CD[r].bind(null,t,s);n[r]=o,i[r]=o}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const TD={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},oh=(t,e,n)=>e?t.enable(n):t.disable(n),Gj=(t,e,n)=>t.hint(n,e),Sa=(t,e,n)=>t.pixelStorei(n,e);function Hy(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const noe={3042:oh,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:oh,2885:(t,e)=>t.cullFace(e),2929:oh,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:oh,35723:Gj,36006:(t,e)=>{const n=pi(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:Gj,2849:(t,e)=>t.lineWidth(e),32823:oh,32824:"polygonOffset",10752:"polygonOffset",35977:oh,32938:"sampleCoverage",32939:"sampleCoverage",3089:oh,3088:(t,e)=>t.scissor(...e),2960:oh,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Sa,3317:Sa,37440:Sa,37441:Sa,37443:Sa,3330:Sa,3332:Sa,3331:Sa,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:Sa,32878:Sa,3316:Sa,3315:Sa,32877:Sa,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Hy(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Hy(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Hy(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=Hy(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=Hy(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function jr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const ioe={blendEquation:(t,e,n)=>t.blendEquationSeparate(jr(32777,e,n),jr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(jr(32969,e,n),jr(32968,e,n),jr(32971,e,n),jr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(jr(32824,e,n),jr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(jr(32938,e,n),jr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,jr(2962,e,n),jr(2967,e,n),jr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,jr(34816,e,n),jr(36003,e,n),jr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,jr(2964,e,n),jr(2965,e,n),jr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,jr(34817,e,n),jr(34818,e,n),jr(34819,e,n))},Wj={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},Pl=(t,e)=>t.isEnabled(e),$j={3042:Pl,2884:Pl,2929:Pl,3024:Pl,32823:Pl,32926:Pl,32928:Pl,3089:Pl,2960:Pl,35977:Pl};function Xj(t){for(const e in t)return!1;return!0}function roe(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function Yj(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function soe(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class aoe{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function loe(t,e){if("number"==typeof(e=e||TD)){const r=e,s=$j[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=$j[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},TD),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Ho(this.stateStack.length>0),Nd(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Ho(void 0!==s);const o=e[s],a=this.cache[s];roe(o,a)||(n=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:i}}}function Kj(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Ho(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new aoe(t,{copyState:i}),function ooe(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const s in Wj)soe(t,s,Wj[s]);Yj(t,"getParameter"),Yj(t,"isEnabled")}return t.state.enable=n,t}function qj(t){Ho(t.state),t.state.pop()}function Nd(t,e){if(Ho(zE(t),"setParameters requires a WebGL context"),Xj(e))return;const n={};for(const r in e){const s=Number(r),o=noe[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,ioe[r])(t,e,i)}function rc(t,e,n){if(Xj(e))return n(t);const{nocatch:i=!0}=e;let r;if(function coe(t){t.state||Kj(t,{copyState:!1}),t.state.push()}(t),Nd(t,e),i)r=n(t),qj(t);else try{r=n(t)}finally{qj(t)}return r}function gg(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function MD(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function hoe(t,e,n,i,r){const s=Jj(t[0],e,n);let o=Zj(t[1],e,i,r),a=Jj(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;return a=Zj(t[1]+1,e,i,r),r?(a=0===a?a:a+1,l=o,o=a):l=a===i-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(l-o+1,1)}}(e,gg(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function Jj(t,e,n){return Math.min(Math.round(t*e),n-1)}function Zj(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const ID=nc(),foe=ID&&typeof document<"u",Qj={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function e6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ho(ID,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},Qj,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:s}=t,o=function _oe(t){let s,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(foe&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}({canvas:s,width:e,height:n,onError:i});return r=function goe(t,e){const{onError:n}=e;let i=null;const r=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(o,t),r?(r=DD(r,t),function boe(t){const e=pi(t)?"WebGL2":"WebGL1",n=function poe(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";yn.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function DD(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function yoe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},Qj,e);const{manageState:n,debug:i}=e;return n&&Kj(t,{copyState:!1,log:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return yn.log(1,...s)()}}),ID&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),yn.level=Math.max(yn.level,1)):yn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function t6(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class n6{constructor(e,n){xe(this,"name",void 0),xe(this,"type",void 0),xe(this,"sampleSize",1),xe(this,"time",void 0),xe(this,"count",void 0),xe(this,"samples",void 0),xe(this,"lastTiming",void 0),xe(this,"lastSampleTime",void 0),xe(this,"lastSampleCount",void 0),xe(this,"_count",0),xe(this,"_time",0),xe(this,"_samples",0),xe(this,"_startTime",0),xe(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=t6(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(t6()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class WE{constructor(e){xe(this,"id",void 0),xe(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof n6?e:new n6(n,i)),this.stats[n]}}const zy="8.5.16";class i6{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new WE({id:e})),this.stats.get(e)}}const Uf=new i6;if(globalThis.luma&&globalThis.luma.VERSION!==zy)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(zy));function Zt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function RD(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Zt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function ah(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(nc()&&yn.log(1,"luma.gl ".concat(zy," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:zy,version:zy,log:yn,stats:Uf,globals:{modules:{},nodeIO:{}}}),globalThis;const OD={};function Ca(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";OD[t]=OD[t]||1;const e=OD[t]++;return"".concat(t,"-").concat(e)}function r6(t){return Zt("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function _g(t){let e=!0;for(const n in t){e=!1;break}return e}function s6(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(o=>{s.methodName||(s[o]=()=>{throw yn.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const bg="Resource subclass must define virtual methods";class Fd{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};GE(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||Ca(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zt(e=RD(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=pi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},s=pi(this.gl),o={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?ah(this.gl,c):c;o[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[h]=ah(this.gl,o[h]))}}return o}setParameter(e,n){Zt(e=RD(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=pi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=RD(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return s6(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(bg)}_deleteHandle(){throw new Error(bg)}_bindHandle(e){throw new Error(bg)}_getOptsFromHandle(){throw new Error(bg)}_getParameter(e,n){throw new Error(bg)}_setParameter(e,n){throw new Error(bg)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new i6}_addStats(){const e=this[Symbol.toStringTag],n=Uf.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Uf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(e,n),this._doTrackAllocatedMemory(e,n,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uf.get("Memory Usage");i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e),this.byteLength=e}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(e),this._doTrackDeallocatedMemory(e,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uf.get("Memory Usage");n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const woe="Failed to deduce GL constant from typed array";function kD(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(woe)}}function Gy(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Aoe(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:o,width:r,height:s}}function PD(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";yn.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];yn.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];yn.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const Soe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Coe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Ta{static getBytesPerElement(e){return Gy(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Zt(e.size),Gy(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new Ta(Soe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Ta.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Ta.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=PD("Accessor",e,Coe),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const a6={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Toe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:a6},Moe={removedProps:a6};class Zi extends Fd{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/Ta.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/Ta.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=PD("Buffer",e,Toe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=PD("Buffer",e,Moe))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Ta(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;Zt(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(go(this.gl),this.gl.bufferSubData(this.target,i,n,r,s)):this.gl.bufferSubData(o,i,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return go(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};go(this.gl);const s=Gy(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const d=Math.min(o,c);return r=r||d,Zt(r<=d),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(Zt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;Zt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=kD(e);return Zt(s),this.setAccessor(new Ta(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Zt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/Gy(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new Ta(this.accessor,{type:kD(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return yn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return yn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return yn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return yn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ta(this.accessor,e),this}}const LD={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},c6={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},l6={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Roe=[9729,9728],d6=globalThis.WebGLBuffer||function(){};class jf extends Fd{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let s=!0;return i&&(s=s&&function Ioe(t,e){const n=LD[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=pi(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),s=s&&(!r||function Doe(t,e){const n=LD[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,n){const{id:i=Ca("texture"),handle:r,target:s}=n;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(X=>this.initialize(Object.assign({},e,{pixels:X,data:X}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;n||(n=r);let{width:h,height:f,dataFormat:m,type:v,compressed:T=!1,mipmaps:N=!0}=e;const{depth:$=0}=e;return({width:h,height:f,compressed:T,dataFormat:m,type:v}=this._deduceParameters({format:s,type:v,dataFormat:m,compressed:T,data:n,width:h,height:f})),this.width=h,this.height=f,this.depth=$,this.format=s,this.type=v,this.dataFormat=m,this.border=o,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),N&&this._isNPOT()&&(yn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),N=!1,this._updateForNPOT(c)),this.mipmaps=N,this.setImageData({data:n,width:h,height:f,depth:$,format:s,type:v,dataFormat:m,border:o,mipmaps:N,parameters:l,compressed:T}),N&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(yn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),rc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:f=this.height,dataFormat:m=this.dataFormat,compressed:v=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:v,width:h,height:f}=this._deduceParameters({format:s,type:d,dataFormat:m,compressed:v,data:l,width:h,height:f}));const{gl:T}=this;T.bindTexture(this.target,this.handle);let N=null;({data:l,dataType:N}=this._getDataType({data:l,compressed:v}));let $,X=0;return rc(this.gl,c,()=>{switch(N){case"null":T.texImage2D(n,r,s,h,f,o,m,d,l);break;case"typed-array":T.texImage2D(n,r,s,h,f,o,m,d,l,a);break;case"buffer":$=go(T),$.bindBuffer(35052,l.handle||l),$.texImage2D(n,r,s,h,f,o,m,d,a),$.bindBuffer(35052,null);break;case"browser-object":pi(T)?T.texImage2D(n,r,s,h,f,o,m,d,l):T.texImage2D(n,r,s,m,d,l);break;case"compressed":for(const[Q,ve]of l.entries())T.compressedTexImage2D(n,Q,ve.format,ve.width,ve.height,o,ve.data),X+=ve.levelSize;break;default:Zt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===N?X:l&&l.byteLength?l.byteLength:this.width*this.height*(c6[this.dataFormat]||4)*(l6[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:m=!1,offset:v=0,border:T=this.border,parameters:N={}}=e;if(({type:h,dataFormat:f,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:f,compressed:m,data:r,width:a,height:c})),Zt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const $=r;r=$.data,a=$.shape[0],c=$.shape[1]}r instanceof Zi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),rc(this.gl,N,()=>{if(m)this.gl.compressedTexSubImage2D(n,l,s,o,a,c,d,r);else if(null===r)this.gl.texSubImage2D(n,l,s,o,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,s,o,a,c,f,h,r,v);else if(r instanceof d6){const $=go(this.gl);$.bindBuffer(35052,r),$.texSubImage2D(n,l,s,o,a,c,f,h,v),$.bindBuffer(35052,null)}else pi(this.gl)?go(this.gl).texSubImage2D(n,l,s,o,a,c,f,h,r):this.gl.texSubImage2D(n,l,s,o,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return yn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Zi?{data:n.handle,dataType:"buffer"}:n instanceof d6?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=LD[n];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},Zt(r,"Could not deduced texture size"),Zt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),Zt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Zt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(pi(this.gl)||!this.width||!this.height||r6(this.width)&&r6(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===Roe.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function Ooe(t,e){return Zt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class _o extends jf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return jf.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};GE(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:Ooe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Vf="EXT_color_buffer_float",u6={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Vf,bpp:2},33327:{gl2:Vf,bpp:4},34842:{gl2:Vf,bpp:8},33326:{gl2:Vf,bpp:4},33328:{gl2:Vf,bpp:8},34836:{gl2:Vf,bpp:16},35898:{gl2:Vf,bpp:4}};class yg extends Fd{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function koe(t,e,n){const i=n[e];if(!i)return!1;const r=pi(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,u6)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:s=0}=e;return Zt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&pi(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*u6[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const h6=6144,g6="clear: bad arguments";function FD(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=16384,!0!==n&&(s.clearColor=n)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),Zt(0!==o,g6),rc(t,s,()=>{t.clear(o)})}const BD=[34069,34070,34071,34072,34073,34074];let Uoe=(()=>{class t extends jf{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};GE(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:s=0,y:o=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:s,y:o,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return jt(function*(){let{width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:d=5121}=n;const{gl:h}=i,f=o||a,m=yield Promise.all(BD.map(v=>{const T=f[v];return Promise.all(Array.isArray(T)?T:[T])}));i.bind(),BD.forEach((v,T)=>{m[T].length>1&&!1!==i.opts.mipmaps&&yn.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[T].forEach((N,$)=>{r&&s?h.texImage2D(v,$,l,r,s,c,l,d,N):h.texImage2D(v,$,l,l,d,N)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:d=5121}=n,{gl:h}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(m=>this.setImageDataForFace(Object.assign({},n,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,s,c,l,d,f):h.texImage2D(i,0,l,l,d,f),this}}return t.FACES=BD,t})();class joe extends jf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return pi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};go(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:s,depth:o=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),rc(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,s,o,a,c,l,h),h instanceof Zi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,s,o,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(c6[this.dataFormat]||4)*(l6[this.type]||1),"Texture"),this.loaded=!0,this}}function Hoe(t,e){const{gl:n,width:i,height:r,id:s}=t;return new cs(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:t}}))}function $E(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=Wy(t);Zt(d);const{gl:f,handle:m,attachments:v}=d;a=a||d.width,c=c||d.height,36064===s&&null===m&&(s=1028),Zt(v[s]),l=l||v[s].type,o=function Goe(t,e,n,i,r){if(t)return t;const s=Gy(e=e||5121,{clamped:!1}),o=function Boe(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Zt(!1),0}}(n);return new s(i*r*o)}(o,l,r,a,c),l=l||kD(o);const T=f.bindFramebuffer(36160,m);return f.readPixels(n,i,a,c,r,l,o),f.bindFramebuffer(36160,T||null),h&&d.delete(),o}function UD(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=$E(t,{sourceAttachment:e}),{width:r,height:s}=t;for(;s>n;)({data:i,width:r,height:s}=Aoe({data:i,width:r,height:s}));!function Eoe(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:s}=t;const o=n*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}function Wy(t){return t instanceof cs?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Hoe(t),deleteFramebuffer:!0}}const _6="Multiple render targets not supported";class cs extends Fd{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new cs(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=go(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=go(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Zt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:n,height:i})}else r=this._createDefaultAttachments(s,o,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return Zt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&yn.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){Zt(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof yg)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,f=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function $oe(t){return(cs.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&FD(this.gl,{color:n,depth:i,stencil:r}),s.forEach((a,c)=>{!function Foe(t){let{framebuffer:e=null,buffer:n=h6,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};go(t),rc(t,{framebuffer:e},()=>{switch(n){case h6:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;t.clearBufferfi(34041,0,s,o);break;default:Zt(!1,g6)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return yn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return yn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return yn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return yn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return yn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return yn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:s,height:o}=e;const a=go(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=ah(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[n?ah(this.gl,s):s]=this.getAttachmentParameter(e,s,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const s=Number(r);i[e?ah(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(UD(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>yn.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=UD(this,{targetMaxHeight:100});return yn.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new _o(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&i?(o=o||{},o[33306]=new yg(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new yg(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&Zt(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof yg?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:go(o).framebufferTextureLayer(36160,n,i.target,s,r);break;case 34067:const c=function Woe(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,n,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,i.handle,s);break;default:Zt(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function Cse(t){return pi(t)?t:null}(this.gl);n?n.readBuffer(e):Zt(36064===e||1029===e,_6),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=go(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Zt(1===e.length&&(36064===e[0]||1029===e[0]),_6)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function Joe(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in b6)void 0===t.luma.caps[e]&&(t.luma.caps[e]=v6(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}cs.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const b6={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Yoe(t){const e=new _o(t,{format:6408,type:5126,dataFormat:6408}),n=new cs(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Koe=2;function y6(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>v6(t,n))}function v6(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function Zoe(t,e){const n=b6[e];let i;Zt(n,e);const r=pi(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!t.getExtension(s)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:Zt(!1);return i}(t,e)),t.luma.caps[e]||yn.log(Koe,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}class jD{constructor(e,n){xe(this,"opts",void 0),xe(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=n.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const $y=new class eae{constructor(e={}){xe(this,"_pool",[]),xe(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=n*i+s;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+s);const f=this._allocate(l,d,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,n,i,r){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,c=o.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(o.splice(c,1)[0],0,s);return i&&l.fill(0),l}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,s=n.findIndex(o=>o.byteLength>=r);s<0?n.push(i):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,i),n.length>this.opts.poolSize&&n.shift()}},tae=1/Math.PI*180,nae=1/180*Math.PI,Zr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function iae(t,{precision:e=Zr.precision}={}){return t=function cae(t){return Math.round(t/Zr.EPSILON)*Zr.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Bd(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function x6(t){return function sae(t,e){return jd(t,n=>n*nae,e)}(t)}function rae(t){return function oae(t,e){return jd(t,n=>n*tae,e)}(t)}function Rr(t,e,n){return jd(t,i=>Math.max(e,Math.min(n,i)))}function XE(t,e,n){return Bd(t)?t.map((i,r)=>XE(i,e[r],n)):n*e+(1-n)*t}function Ud(t,e,n){const i=Zr.EPSILON;n&&(Zr.EPSILON=n);try{if(t===e)return!0;if(Bd(t)&&Bd(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Ud(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=Zr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Zr.EPSILON=i}}function jd(t,e,n){if(Bd(t)){const i=t;n=n||function lae(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class YE extends(function dae(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Bd(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Zr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+iae(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Ud(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(n[r]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Zr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function hi(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Xy(t,e,n=""){if(Zr.debug&&!function uae(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function Yy(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class E6 extends YE{get x(){return this[0]}set x(e){this[0]=hi(e)}get y(){return this[1]}set y(e){this[1]=hi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return hi(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return hi(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Yy(e>=0&&e<this.ELEMENTS,"index is out of range"),hi(this[e])}setComponent(e,n){return Yy(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Ll=1e-6,sa=typeof Float32Array<"u"?Float32Array:Array;function A6(){var t=new sa(3);return sa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function S6(t,e,n){var i=new sa(3);return i[0]=t,i[1]=e,i[2]=n,i}function C6(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function KE(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2];return t[0]=r*c-s*a,t[1]=s*o-i*c,t[2]=i*a-r*o,t}function VD(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function T6(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function M6(t,e,n){var i=n[0],r=n[1],s=n[2],a=e[0],c=e[1],l=e[2],d=r*l-s*c,h=s*a-i*l,f=i*c-r*a,m=r*f-s*h,v=s*d-i*f,T=i*h-r*d,N=2*n[3];return h*=N,f*=N,v*=2,T*=2,t[0]=a+(d*=N)+(m*=2),t[1]=c+h+v,t[2]=l+f+T,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function I6(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s||1;return t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o,t}function D6(t,e,n){const i=e[0],r=e[1],s=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3],t}A6();const HD=[0,0,0];let qE;class nn extends E6{static get ZERO(){return qE||(qE=new nn(0,0,0),Object.freeze(qE)),qE}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&Bd(e)?this.copy(e):(Zr.debug&&(hi(e),hi(n),hi(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Zr.debug&&(hi(e.x),hi(e.y),hi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=hi(e)}angle(e){return function vae(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],d=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=d&&C6(t,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return KE(this,this,e),this.check()}rotateX({radians:e,origin:n=HD}){return function _ae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=HD}){return function bae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=HD}){return function yae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return VD(this,this,e),this.check()}transformAsVector(e){return I6(this,this,e),this.check()}transformByMatrix3(e){return T6(this,this,e),this.check()}transformByMatrix2(e){return function Aae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return M6(this,this,e),this.check()}}const R6=new nn;function vg(t,e,n,i){R6.set(t,e,n);const r=R6.len();return{distance:i/r,normal:new nn(-t/r,-e/r,-n/r)}}function Iae(t){return t-Math.fround(t)}let qy;function zD(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,s=(r-i)/n;qy=$y.allocate(qy,s,{type:Float32Array,size:2*n});let o=i,a=0;for(;o<r;){for(let c=0;c<n;c++){const l=t[o++];qy[a+c]=l,qy[a+c+n]=Iae(l)}a+=2*n}return qy.subarray(0,s*n*2)}function JE(t){return t.stride||t.size*t.bytesPerElement}function O6(t,e){e.offset&&_i.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=JE(t),s=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}class Rae{constructor(e,n,i){xe(this,"gl",void 0),xe(this,"id",void 0),xe(this,"size",void 0),xe(this,"settings",void 0),xe(this,"value",void 0),xe(this,"doublePrecision",void 0),xe(this,"_buffer",void 0),xe(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,s=5130===r;let a,{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),a=s?5126:!r&&n.isIndexed?e&&function qoe(t,e){return y6(t,e)}(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function Qoe(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=s,s&&!1===n.fp64&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:o,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Zi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*JE(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),$y.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function Dae(t,e){const n=O6(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new jD(this,s.high),i["".concat(e,"64Low")]=r?new jD(this,s.low):new Float32Array(this.size),i}if(n){const i=O6(this.getAccessor(),n);return{[e]:new jD(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,s=i*r;if(n&&s&&n.length>=s){const o=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<s;)for(let l=0;l<r;l++){const d=n[c++];d<o[l]&&(o[l]=d),d>a[l]&&(a[l]=d)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Zi?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),n.constant&&this._areValuesEqual(s,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(i.buffer){const s=i.buffer;n.externalBuffer=s,n.constant=!1,this.value=i.value||null;const o=i.value instanceof Float64Array;r.type=i.type||s.accessor.type,r.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),r.stride=JE(r)}else if(i.value){this._checkExternalBuffer(i);let s=i.value;n.externalBuffer=null,n.constant=!1,this.value=s,r.bytesPerElement=s.BYTES_PER_ELEMENT,r.stride=JE(r);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=zD(s,r));const c=s.byteLength+a+2*r.stride;o.byteLength<c&&o.reallocate(c),o.setAccessor(null),o.subData({data:s,offset:a}),r.type=i.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?zD(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,s=$y.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&r&&o.subData({data:r instanceof Float64Array?zD(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&_i.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e)return n[i]=r[0],n;switch(s){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)n[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}function Js(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}const k6=[],P6=[];function ZE(t,e=0,n=1/0){let i=k6;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(P6.length=t.length,i=P6):i=k6,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function L6(t){return t&&t[Symbol.asyncIterator]}function GD(t,e=(()=>!0)){return Array.isArray(t)?N6(t,e,[]):e(t)?[t]:[]}function N6(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?N6(r,e,n):e(r)&&n.push(r)}return n}function kae({target:t,source:e,start:n=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=n;o<r;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}const Pae=[],QE=[[0,1/0]];function WD(t){const{source:e,target:n,start:i=0,size:r,getData:s}=t,a=e.length,c=(t.end||n.length)-i;if(a>c)return void n.set(e.subarray(0,c),i);if(n.set(e,i),!s)return;let l=a;for(;l<c;){const d=s(l,e);for(let h=0;h<r;h++)n[i+l]=d[h]||0,l++}}const Fae={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function F6(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Fae[n],...e,...t,type:n}}function B6(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function U6(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function j6(t){t.push(t.shift())}function $D(t,e){const{doublePrecision:n,settings:i,value:r,size:s}=t,o=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function V6({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,c=n.byteOffset,l=n.startIndices,d=r&&l,h=$D(n,e),f=n.isConstant;if(!d&&i>=h)return;const m=f?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!f){const $=s;s=(X,Q)=>n.normalizeConstant($(X,Q))}const v=f?($,X)=>s(m,X):($,X)=>s(m.subarray($,$+a),X),T=t.getData({length:i}),N=new Float32Array(h);(function Nae({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return WD({source:t,target:e,size:n,getData:i}),e;let o=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,s.length);for(let d=1;d<l;d++){const h=r[d]*n,f=s[d]*n;WD({source:t.subarray(o,h),target:e,start:a,end:f,size:n,getData:c}),o=h,a=f}a<e.length&&WD({source:[],target:e,start:a,size:n,getData:c})})({source:T,target:N,sourceStartIndices:r,targetStartIndices:l,size:a,getData:v}),t.byteLength<N.byteLength+c&&t.reallocate(N.byteLength+c),t.subData({data:N,offset:c})}class XD extends Rae{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:QE}),xe(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return F6(Array.isArray(n)?e[n.find(s=>e[s])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function Lae(t,e){if(t===QE||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let s=0;s<i;s++){const o=t[s];o[1]<e[0]?(n.push(o),r=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=QE}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Pae}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==QE),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let c=!0;if(o){for(const[l,d]of s)o.call(r,this,{data:n,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of s){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;return Js(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function Oae(t,e){const{size:n,stride:i,offset:r,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,c=i?i/a:n,l=r?r/a:0,d=Math.floor((t.length-l)/c);return(h,{index:f,target:m})=>{if(!s){const $=f*c+l;for(let X=0;X<n;X++)m[X]=t[$+X];return m}const v=s[f],T=s[f+1]||d;let N;if(o){N=new Array(T-v);for(let $=v;$<T;$++){const X=$*c+l;m=new Array(n);for(let Q=0;Q<n;Q++)m[Q]=t[X+Q];N[$-v]=m}}else if(c===n)N=t.subarray(v*n+l,T*n+l);else{N=new t.constructor((T-v)*n);let $=0;for(let X=v;X<T;X++){const Q=X*c+l;for(let ve=0;ve<n;ve++)N[$++]=t[Q+ve]}}return N}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:!!o.size&&o.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?n[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:f,transform:m}=a,v=c.binaryAccessor||("function"==typeof f?f:s[f]);Js("function"==typeof v,'accessor "'.concat(f,'" is not a function'));let T=e.getVertexOffset(i);const{iterable:N,objectInfo:$}=ZE(n,i,r);for(const X of N){$.index++;let Q=v(X,$);if(m&&(Q=m.call(this,Q)),h){const ve=($.index<h.length-1?h[$.index+1]:o)-h[$.index];if(Q&&Array.isArray(Q[0])){let Pe=T;for(const $e of Q)e._normalizeValue($e,l,Pe),Pe+=d}else Q&&Q.length>d?l.set(Q,T):(e._normalizeValue(Q,$.target,0),kae({target:l,source:$.target,start:T,count:ve}));T+=ve*d}else e._normalizeValue(Q,l,T),T+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let YD={};function bo(t,e,n,i){_i.level>0&&YD[t]&&YD[t].call(null,e,n,i)}function Ma(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const H6="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",jae="#version 300 es\n".concat(H6);function z6(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,s]=n;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function G6(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?jae:e>300?"#version ".concat(e,"\n").concat(H6):"void main() {gl_FragColor = vec4(0);}";const s=function zae(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ma(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(s,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}class W6 extends Fd{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return pi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};go(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,_g(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(n);return i<0?(this.unused[e]=r,yn.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof Zi?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Gae{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof Zi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Zt(pi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=n[s],{byteLength:a,usage:c,accessor:l}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new W6(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];n[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],Zt(i[s]instanceof Zi)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new Zi(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function $6(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const Jy="vs",Xae={[Jy]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},e1="__LUMA_INJECT_DECLARATIONS__",X6=/void\s+main\s*\([^)]*\)\s*\{\n?/,Y6=/}\n?[^{}]*$/,qD=[];function K6(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===Jy;for(const s in n){const o=n[s];o.sort((c,l)=>c.order-l.order),qD.length=o.length;for(let c=0,l=o.length;c<l;++c)qD[c]=o[c].injection;const a="".concat(qD.join("\n"),"\n");switch(s){case"vs:#decl":r&&(t=t.replace(e1,a));break;case"vs:#main-start":r&&(t=t.replace(X6,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(Y6,c=>a+c));break;case"fs:#decl":r||(t=t.replace(e1,a));break;case"fs:#main-start":r||(t=t.replace(X6,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(Y6,c=>a+c));break;default:t=t.replace(s,c=>c+a)}}return t=t.replace(e1,""),i&&(t=t.replace(/\}\s*$/,s=>s+Xae[e])),t}function JD(t){const e={};return Ma(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}const Yae={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},t1="transform_uSize_",q6="transform_position";const nce={10241:9728,10240:9728,10242:33071,10243:33071};class rce{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function Jae(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let s,o;n&&(({width:s,height:o}=i),r["".concat(t1).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),r["".concat(t1).concat(a)]=[s,o];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=$E(n);if(!e)return i;const r=i.constructor,s=function Hae(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ma(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<s;l++)o[a++]=i[c+l];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof _o)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Zi(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:c}=e;c?(c.update({attachments:{36064:s},resizeAttachments:!1}),c.resize({width:o,height:a})):e.framebuffer=new cs(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(nce)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function Voe(t,e){Zt(t instanceof _o||t instanceof Uoe||t instanceof joe);const n=t.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:d}=t;return new n(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:c}=function qae(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,o=Object.keys(n).length,a=null;const c={};let l=e,d={};if(o>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((m,v,T)=>{if(o>0){const N=function tce(t,e){const n={},i=function Zae(t){return z6(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function Qae(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(t1).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(s),d=function Vae(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ma(!1),null}}(r),h="  ".concat(r," ").concat(s," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return n[a]=s,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:n}}return null}(m,n);if(N){const{updatedLine:$,inject:X}=N;f[v]=$,d=JD([d,X]),Object.assign(c,N.samplerTextureMap),o--}}i&&!a&&(a=function ece(t,e){const n=z6(t,["varying","out"]);return n&&n.name===e?n.type:null}(m,i))}),i){Zt(r);const m="".concat(t1).concat(i),v="uniform vec2 ".concat(m,";\n"),T="     vec2 ".concat(q6," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat(q6,", 0, 1.);\n");d=JD([d,{"vs:#decl":v,"vs:#main-start":T}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=JD([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:r,fs:e._fs||G6({version:$6(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Yae].concat(e.modules||[]):e.modules,uniforms:s,inject:l}}}const ZD={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function oce(t){let e=J6(t);return"object"===e?t?"type"in t?Object.assign({},t,ZD[t.type]):"value"in t?(e=J6(t.value),Object.assign({type:e},t,ZD[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},ZD[e])}function J6(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class QD{constructor(e){let{name:n,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:f}=e;Ma("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function lce(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(d),o&&(this.uniforms=function sce(t){const e={};for(const n in t){const r=oce(t[n]);e[n]=r}return e}(o))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:Ma(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ma(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=s.value}return n}}function dce(t){return function Z6(t){const e={},n={};return eR({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(Q6(t))}function eR(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&eR({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function Q6(t,e){return t.map(n=>(n instanceof QD||(Ma("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ma(n.name,"shader module has no name"),(n=new QD(n)).dependencies=Q6(n.dependencies)),n))}const hce=7936,fce=7937,pce=7938,mce=35724,tR={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Hf={};function bce(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(tR).forEach(t=>{Hf[t]=t});const nR={};function e8(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=tR[e];if(Ma(i,e),!function uce(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in nR)return nR[e];const s=n.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),nR[e]=c,c}function n1(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function yce(t,e){const n=tR[e];Ma(n,e);const i=function gce(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return Ma(!1===r||!0===r),r}(t,n))}function xg(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const t8=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],wce=[...t8,[xg("attribute"),"in $1"],[xg("varying"),"out $1"]],Ece=[...t8,[xg("varying"),"in $1"]],n8=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Ace=[...n8,[xg("in"),"attribute $1"],[xg("out"),"varying $1"]],Sce=[...n8,[xg("in"),"varying $1"]],iR="gl_FragColor",rR=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Cce=/void\s+main\s*\([^)]*\)\s*\{\n?/;function r1(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const Dce="\n\n".concat(e1,"\n\n"),i8={[Jy]:"vertex",fs:"fragment"};function r8(t,e){let{id:n,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;Ma("string"==typeof i,"shader source must be a string");const f=r===Jy,m=i.split("\n");let v=100,T="",N=i;0===m[0].indexOf("#version ")?(v=300,T=m[0],N=m.slice(1).join("\n")):T="#version ".concat(v);const $={};s.forEach(nt=>{Object.assign($,nt.getDefines())}),Object.assign($,o);let X=d?"".concat(T,"\n").concat(function Lce(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(i8[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function Pce(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(i8[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function vce(t){switch(function _ce(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||hce),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||fce);return{gpuVendor:bce(n,i),vendor:n,renderer:i,version:t.getParameter(pce),shadingLanguageVersion:t.getParameter(mce)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function xce(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return n1(t,Hf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),n1(t,Hf.GLSL_DERIVATIVES)&&e8(t,Hf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),n1(t,Hf.GLSL_FRAG_DATA)&&e8(t,Hf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),n1(t,Hf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function Nce(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}($),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(T,"\n");const Q=function Bce(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,s]=n.split(":"),o=n.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),ve={},Pe={},$e={};for(const nt in c){const tt="string"==typeof c[nt]?{injection:c[nt],order:0}:c[nt],ft=nt.match(/^(v|f)s:(#)?([\w-]+)$/);ft?ft[2]?"decl"===ft[3]?Pe[nt]=[tt]:$e[nt]=[tt]:ve[nt]=[tt]:$e[nt]=[tt]}for(const nt of s){h&&nt.checkDeprecations(N,h),X+=nt.getModuleSource(r,v);const ft=nt.injections[r];for(const pt in ft){const yt=pt.match(/^(v|f)s:#([\w-]+)$/);if(yt){const mt="decl"===yt[2]?Pe:$e;mt[pt]=mt[pt]||[],mt[pt].push(ft[pt])}else ve[pt]=ve[pt]||[],ve[pt].push(ft[pt])}}return X+=Dce,X=K6(X,r,Pe),X+=function Fce(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(Q[r],ve),X+=N,X=K6(X,r,$e),X=function Tce(t,e,n){switch(e){case 300:return n?r1(t,wce):function Mce(t){const e=(t=r1(t,Ece)).match(rR);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(iR,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(Cce,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(iR,"\\b"),"g"),n)}return t}(t);case 100:return n?r1(t,Ace):function Ice(t){const e=(t=r1(t,Sce)).match(rR);if(e){const n=e[1];t=t.replace(rR,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),iR)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(X,l?100:v,f),X}function kce(t){return function(n){const i={};for(const r of t){const s=r.getUniforms(n,i);Object.assign(i,s)}return i}}const Uce={5126:fr.bind(null,"uniform1fv",Ia,1,yo),35664:fr.bind(null,"uniform2fv",Ia,2,yo),35665:fr.bind(null,"uniform3fv",Ia,3,yo),35666:fr.bind(null,"uniform4fv",Ia,4,yo),5124:fr.bind(null,"uniform1iv",ch,1,yo),35667:fr.bind(null,"uniform2iv",ch,2,yo),35668:fr.bind(null,"uniform3iv",ch,3,yo),35669:fr.bind(null,"uniform4iv",ch,4,yo),35670:fr.bind(null,"uniform1iv",ch,1,yo),35671:fr.bind(null,"uniform2iv",ch,2,yo),35672:fr.bind(null,"uniform3iv",ch,3,yo),35673:fr.bind(null,"uniform4iv",ch,4,yo),35674:fr.bind(null,"uniformMatrix2fv",Ia,4,Vd),35675:fr.bind(null,"uniformMatrix3fv",Ia,9,Vd),35676:fr.bind(null,"uniformMatrix4fv",Ia,16,Vd),35678:Zs,35680:Zs,5125:fr.bind(null,"uniform1uiv",s1,1,yo),36294:fr.bind(null,"uniform2uiv",s1,2,yo),36295:fr.bind(null,"uniform3uiv",s1,3,yo),36296:fr.bind(null,"uniform4uiv",s1,4,yo),35685:fr.bind(null,"uniformMatrix2x3fv",Ia,6,Vd),35686:fr.bind(null,"uniformMatrix2x4fv",Ia,8,Vd),35687:fr.bind(null,"uniformMatrix3x2fv",Ia,6,Vd),35688:fr.bind(null,"uniformMatrix3x4fv",Ia,12,Vd),35689:fr.bind(null,"uniformMatrix4x2fv",Ia,8,Vd),35690:fr.bind(null,"uniformMatrix4x3fv",Ia,12,Vd),35678:Zs,35680:Zs,35679:Zs,35682:Zs,36289:Zs,36292:Zs,36293:Zs,36298:Zs,36299:Zs,36300:Zs,36303:Zs,36306:Zs,36307:Zs,36308:Zs,36311:Zs},jce={},Vce={},Hce={},s8=[0];function sR(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(s8[0]=t,t=s8);const r=t.length;if(r%e&&yn.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=i[r];s||(s=new n(r),i[r]=s);for(let o=0;o<r;o++)s[o]=t[o];return s}function Ia(t,e){return sR(t,e,Float32Array,jce)}function ch(t,e){return sR(t,e,Int32Array,Vce)}function s1(t,e){return sR(t,e,Uint32Array,Hce)}function o8(t,e,n){const i=Uce[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function zce(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function Wce(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function Xce(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof jf||t instanceof yg)||t instanceof cs&&!!t.texture}function $ce(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,s=n.length;r<s;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function Zs(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function fr(t,e,n,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,n),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),s=d,h=!0;else{Zt(s===d,"Uniform length cannot change.");for(let f=0;f<d;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(o,t,a,l),r.set(l)),h}}function yo(t,e,n,i){t[e](n,i)}function Vd(t,e,n,i){t[e](n,!1,i)}function o1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function c8(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const s=t[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();n+=l8("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function l8(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class Zy extends Fd{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Zt(!1),"unknown"}}constructor(e,n){GE(e),Zt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:o1(n.source,null)||n.id||Ca("unnamed ".concat(Zy.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=o1(n,null);i&&(this.id=Ca(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Zy.getTypeName(this.shaderType),":").concat(this.id)}getName(){return o1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function a8(t,e,n,i){const r=t.split(/\r?\n/),s={},o={},a=i||o1(e)||"(unnamed)",c="".concat(function qce(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const f=h.split(":"),m=f[0],v=parseInt(f[2],10);if(isNaN(v))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==m?s[v]=h:o[v]=h}const l=function Jce(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return l8(a,r-a.length)+n+s})}(e);return{shaderName:c,errors:c8(s,l),warnings:c8(o,l)}}(i,this.source,this.shaderType,this.id);throw yn.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),yn.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class oR extends Zy{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class aR extends Zy{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Qce=5120,ele=5121,tle=5122,nle=5123,vs=5126,Qy=5124,e0=5125,cR={[vs]:[vs,1,"float"],35664:[vs,2,"vec2"],35665:[vs,3,"vec3"],35666:[vs,4,"vec4"],[Qy]:[Qy,1,"int"],35667:[Qy,2,"ivec2"],35668:[Qy,3,"ivec3"],35669:[Qy,4,"ivec4"],[e0]:[e0,1,"uint"],36294:[e0,2,"uvec2"],36295:[e0,3,"uvec3"],36296:[e0,4,"uvec4"],35670:[vs,1,"bool"],35671:[vs,2,"bvec2"],35672:[vs,3,"bvec3"],35673:[vs,4,"bvec4"],35674:[vs,8,"mat2"],35685:[vs,8,"mat2x3"],35686:[vs,8,"mat2x4"],35675:[vs,12,"mat3"],35687:[vs,12,"mat3x2"],35688:[vs,12,"mat3x4"],35676:[vs,16,"mat4"],35689:[vs,16,"mat4x2"],35690:[vs,16,"mat4x3"]};function m8(t){const e=cR[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function g8(t,e){switch(t){case Qce:case ele:case tle:case nle:t=vs}for(const n in cR){const[i,r,s]=cR[n];if(i===t&&r===e)return{glType:n,name:s}}return null}class Cle{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!pi(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,n,i,r){const{type:s,components:o}=m8(i),a={type:s,size:r*o};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new Ta(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:s,components:o}=m8(i),c={location:e,name:n,accessor:new Ta({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Tle=35981,Mle=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class b8 extends Fd{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",Mle),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:s,bufferMode:o=Tle}=e;return this.hash=n||"",this.vs="string"==typeof i?new oR(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new aR(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Zt(this.vs instanceof oR),Zt(this.fs instanceof aR),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(go(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Cle(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:f=null,transformFeedback:m,framebuffer:v,parameters:T={},uniforms:N,samplers:$}=e;if((N||$)&&(yn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(N||{})),yn.priority>=n){const X=v?v.id:"default",Q="mode=".concat(ah(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(ah(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(X);yn.log(n,Q)()}return Zt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(f.bindForDraw(r,d,()=>{if(void 0!==v&&(T=Object.assign({},T,{framebuffer:v})),m){const X=function p8(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Zt(!1),0}}(i);m.begin(X)}this._bindTextures(),rc(this.gl,T,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,s,d):c&&pi(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):h?this.gl2.drawArraysInstanced(i,s,r,d):this.gl.drawArrays(i,s,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};yn.priority>=2&&function Gce(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!Wce(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let s=i,o=!1;if(s instanceof cs&&(s=s.texture),s instanceof jf)if(o=this.uniforms[n]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[n]=a}else s=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(s)||o)&&$ce(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new oR({handle:r});break;case 35632:i.fs=new aR({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Ca(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),yn.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),yn.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||yn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=zce(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=o8(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=o8(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class t0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(n),h=this._getHash(i),f=l.map(Q=>this._getHash(Q.name)).sort(),m=o.map(Q=>this._getHash(Q)),v=Object.keys(r).sort(),T=Object.keys(s).sort(),N=[],$=[];for(const Q of v)N.push(this._getHash(Q)),N.push(this._getHash(r[Q]));for(const Q of T)$.push(this._getHash(Q)),$.push(this._getHash(s[Q]));const X="".concat(d,"/").concat(h,"D").concat(N.join("/"),"M").concat(f.join("/"),"I").concat($.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[X]){const Q=function Oce(t,e){const{vs:n,fs:i}=e,r=dce(e.modules||[]);return{gl:t,vs:r8(t,Object.assign({},e,{source:n,type:Jy,modules:r})),fs:r8(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:kce(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[X]=new b8(this.gl,{hash:X,vs:Q.vs,fs:Q.fs,varyings:o,bufferMode:a}),this._getUniforms[X]=Q.getUniforms||(ve=>{}),this._useCounts[X]=0}return this._useCounts[X]++,this._programCache[X]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;n[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}let c1=null;const l1=globalThis;function lR(t){if(!t&&!nc())return"Node";if(Rj(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":l1.chrome?"Chrome":l1.safari?"Safari":l1.mozInnerScreenX?"Firefox":"Unknown"}class Da extends Fd{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||pi(e)||"Chrome"===lR()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Da(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Da.MAX_ATTRIBUTES=Da.MAX_ATTRIBUTES||e.getParameter(34921),Da.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Da._setConstantFloatArray(e,n,i);break;case Int32Array:Da._setConstantIntArray(e,n,i);break;case Uint32Array:Da._setConstantUintArray(e,n,i);break;default:Zt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Da.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Zt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(Zt(pi(h)),f.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,c,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!Da.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Zi(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function Dle(t,e){const n=function Ile(t){return(!c1||c1.byteLength<t)&&(c1=new ArrayBuffer(t)),c1}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,s);(function Rle(t){let{target:e,source:n,start:i=0,count:r=1}=t;const s=n.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Zt(!1)}}static _setConstantIntArray(e,n,i){switch(Zt(pi(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Zt(!1)}}static _setConstantUintArray(e,n,i){switch(Zt(pi(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Zt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Zt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const Ple=/^(.+)__LOCATION_([0-9]+)$/,Lle=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Nle{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Da(e),s6(this,"VertexArray","v6.0",Lle),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,s)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Zi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Zi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Zi&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,yn.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const d=Ta.resolve(c.accessor,this.accessors[o]||{},i,r),{size:h,type:f}=d;return Zt(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=Ple.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof Zi)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Zi)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof Zi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,n){if(Da.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Da.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof Zi){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return yn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function n0(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function Fle(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=n0(t[o],e);const s=t.length>n?"...":"]";return"".concat(r).concat(s)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function y8(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,s="NOT PROVIDED",o=1,a=0,c=0;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof Zi){const f=e,{data:m,changed:v}=f.getDebugData();let T;return d=v?"*":"",h=m,c=f.byteLength,a=c/m.BYTES_PER_ELEMENT/o,n?T="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(ah(r,s),")"):(l=!0,T="".concat(c," bytes")),{[i]:"".concat(d).concat(n0(h,{size:o,isInteger:l})),"Format ":T}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(n0(h,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function Ule(t,e){const{type:n,size:i}=e,r=g8(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function v8(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Zt(n);const o=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(o)&&dR({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(o)&&dR({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||dR({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const f={};if(!r)for(const m in i){const v=i[m];c[m]||(h++,f[m]={Type:"NOT USED: ".concat(v),[e]:n0(v)})}return{table:c,count:d,unusedTable:f,unusedCount:h}}function dR(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:s}=t;const o=i[r],a=function jle(t){return null!=t}(o);return!(s&&a||(e[r]={[n]:a?n0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function x8(t){const{type:e,size:n}=t.accessor,i=g8(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const Hle={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Gle(t,e){const{attributeMap:n=Hle}=e||{};return n&&n[t]||t}function Wle(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Zt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const w8=()=>{},Yle={};class d1{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=Ca("model")}=n;Zt(zE(e)),this.id=i,this.gl=e,this.id=n.id||Ca("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||t0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Zt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Zt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Zt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function zle(t,e,n){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Gle(s,n);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new Zi(t,c),l],Wle(s,l)}}if(r){const s=r.value||r;Zt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Zi(t,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_g(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return FD(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(r),yn.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:f=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:v=d.isInstanced}=this.props;v&&!this.isInstanced&&yn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:T,instanceCount:N}=this,{onBeforeRender:$=w8,onAfterRender:X=w8}=this.props;$(),this.program.setUniforms(this.uniforms);const Q=this.program.draw(Object.assign(Yle,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:T,instanceCount:N,offset:h?m:0}));return X(),yn.priority>=2&&this._logDrawCallEnd(l,c,i),Q}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,{35977:n})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Zt(n instanceof b8,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Nle(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Zi&&n.delete()}}_setAnimationProps(e){this.animated&&Zt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_g(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new W6(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),yn.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:yn.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const s=function Ble(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=y8(e,e.elements,null,n));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(Ule(o.name,c))),i[a]=y8(e,r[s],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=v8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=v8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&yn.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&yn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function Vle(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=x8(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=x8(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);yn.table(e,s)(),yn.table(e,o)(),yn.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),yn.groupEnd(2)()}}class uR{static isSupported(e){return pi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();Zt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new d1(n,Object.assign({},e,{fs:e.fs||G6({version:$6(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function Kle(t){return!(_g(t.feedbackBuffers)&&_g(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new Gae(e,n)),function qle(t){return!(_g(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new rce(e,n)),Zt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}class r0{constructor(e){xe(this,"_inProgress",void 0),xe(this,"_handle",void 0),xe(this,"_timeline",void 0),xe(this,"time",void 0),xe(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const rde={interpolation:class Jle{constructor({gl:e,attribute:n,timeline:i}){xe(this,"gl",void 0),xe(this,"type","interpolation"),xe(this,"attributeInTransition",void 0),xe(this,"settings",void 0),xe(this,"attribute",void 0),xe(this,"transition",void 0),xe(this,"currentStartIndices",void 0),xe(this,"currentLength",void 0),xe(this,"transform",void 0),xe(this,"buffers",void 0),this.gl=e,this.transition=new r0(i),this.attribute=n,this.attributeInTransition=new XD(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function Qle(t,e){const n=U6(e.size);return new uR(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new Zi(e,r),new Zi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:s}=this;j6(r);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)V6({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=$D(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:B6(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let s=r/n;i&&(s=i(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class ede{constructor({gl:e,attribute:n,timeline:i}){xe(this,"gl",void 0),xe(this,"type","spring"),xe(this,"attributeInTransition",void 0),xe(this,"settings",void 0),xe(this,"attribute",void 0),xe(this,"transition",void 0),xe(this,"currentStartIndices",void 0),xe(this,"currentLength",void 0),xe(this,"texture",void 0),xe(this,"framebuffer",void 0),xe(this,"transform",void 0),xe(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new r0(i),this.attribute=n,this.attributeInTransition=new XD(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function nde(t){return new _o(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function ide(t,e){return new cs(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function tde(t,e,n){const i=U6(e.size);return new uR(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Zi(e,r),new Zi(e,r),new Zi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)V6({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=$D(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:B6(0,s)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),j6(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),$E(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class sde{constructor(e,{id:n,timeline:i}){xe(this,"id",void 0),xe(this,"isSupported",void 0),xe(this,"gl",void 0),xe(this,"timeline",void 0),xe(this,"transitions",void 0),xe(this,"needsRedraw",void 0),xe(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=uR.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(n);o&&this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void _i.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=rde[i.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(_i.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const E8="attributeManager.invalidate";class ude{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){xe(this,"id",void 0),xe(this,"gl",void 0),xe(this,"attributes",void 0),xe(this,"updateTriggers",void 0),xe(this,"needsRedraw",void 0),xe(this,"userData",void 0),xe(this,"stats",void 0),xe(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new sde(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);bo(E8,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);bo(E8,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}){let c=!1;bo("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=n,s[l]&&_i.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(o[l])||d.setBinaryValue("string"==typeof h?o[h]:void 0,e.startIndices)||"string"==typeof h&&!o[h]&&d.setConstantValue(s[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&bo("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new XD(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:i}=e;bo("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&bo("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,bo("attribute.updateEnd",n,i)))}}function S8(t,e,n,i,r){const s=e-t;return(n-e)*r+-s*i+s+e}function C8(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const mde={interpolation:class hde extends r0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=XE(n,i,o)}},spring:class pde extends r0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function fde(t,e,n,i,r){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=S8(t[o],e[o],n[o],i,r);return s}return S8(t,e,n,i,r)}(s,o,n,i,r);const c=C8(a,n),l=C8(a,o);c<1e-5&&l<1e-5&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}};class gde{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:s}=this;if(s.has(e)){const c=s.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(!(r=F6(r)))return;const o=mde[r.type];if(!o)return void _i.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:n,toValue:i}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const u1=Symbol.for("component"),Cg=Symbol.for("asyncPropDefaults"),zf=Symbol.for("asyncPropOriginal"),lh=Symbol.for("asyncPropResolved");function yde(t,e){if(!t.transitions)return!1;const n={},i=fR(t);let r=!1;for(const s in t.transitions){const o=i[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&hR(t[s],e[s],o)&&(n[s]=!0,r=!0)}return!!r&&n}function T8({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=hR(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=hR(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return!1}function hR(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function wde(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function M8(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},T8({oldProps:r,newProps:i,triggerName:n})}function fR(t){const e=t[u1],n=e&&e.constructor;return n?n._propTypes:{}}function Mde(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function h1(t){let n,e={};return i=>{for(const r in i)if(!Mde(i[r],e[r])){n=t(i),e=i;break}return n}}function Ide(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function pR(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],f=e[10],m=e[11],v=e[12],T=e[13],N=e[14],$=e[15],X=n*a-i*o,Q=n*c-r*o,ve=n*l-s*o,Pe=i*c-r*a,$e=i*l-s*a,nt=r*l-s*c,tt=d*T-h*v,ft=d*N-f*v,pt=d*$-m*v,yt=h*N-f*T,Ot=h*$-m*T,mt=f*$-m*N,vt=X*mt-Q*Ot+ve*yt+Pe*pt-$e*ft+nt*tt;return vt?(t[0]=(a*mt-c*Ot+l*yt)*(vt=1/vt),t[1]=(r*Ot-i*mt-s*yt)*vt,t[2]=(T*nt-N*$e+$*Pe)*vt,t[3]=(f*$e-h*nt-m*Pe)*vt,t[4]=(c*pt-o*mt-l*ft)*vt,t[5]=(n*mt-r*pt+s*ft)*vt,t[6]=(N*ve-v*nt-$*Q)*vt,t[7]=(d*nt-f*ve+m*Q)*vt,t[8]=(o*Ot-a*pt+l*tt)*vt,t[9]=(i*pt-n*Ot-s*tt)*vt,t[10]=(v*$e-T*ve+$*X)*vt,t[11]=(h*ve-d*$e-m*X)*vt,t[12]=(a*ft-o*yt-c*tt)*vt,t[13]=(n*yt-i*ft+r*tt)*vt,t[14]=(T*Q-v*Pe-N*X)*vt,t[15]=(d*Pe-h*Q+f*X)*vt,t):null}function Gf(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=e[9],m=e[10],v=e[11],T=e[12],N=e[13],$=e[14],X=e[15],Q=n[0],ve=n[1],Pe=n[2],$e=n[3];return t[0]=Q*i+ve*a+Pe*h+$e*T,t[1]=Q*r+ve*c+Pe*f+$e*N,t[2]=Q*s+ve*l+Pe*m+$e*$,t[3]=Q*o+ve*d+Pe*v+$e*X,t[4]=(Q=n[4])*i+(ve=n[5])*a+(Pe=n[6])*h+($e=n[7])*T,t[5]=Q*r+ve*c+Pe*f+$e*N,t[6]=Q*s+ve*l+Pe*m+$e*$,t[7]=Q*o+ve*d+Pe*v+$e*X,t[8]=(Q=n[8])*i+(ve=n[9])*a+(Pe=n[10])*h+($e=n[11])*T,t[9]=Q*r+ve*c+Pe*f+$e*N,t[10]=Q*s+ve*l+Pe*m+$e*$,t[11]=Q*o+ve*d+Pe*v+$e*X,t[12]=(Q=n[12])*i+(ve=n[13])*a+(Pe=n[14])*h+($e=n[15])*T,t[13]=Q*r+ve*c+Pe*f+$e*N,t[14]=Q*s+ve*l+Pe*m+$e*$,t[15]=Q*o+ve*d+Pe*v+$e*X,t}function f1(t,e,n){var o,a,c,l,d,h,f,m,v,T,N,$,i=n[0],r=n[1],s=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],f=e[6],m=e[7],v=e[8],T=e[9],N=e[10],$=e[11],t[0]=o=e[0],t[1]=a,t[2]=c,t[3]=l,t[4]=d,t[5]=h,t[6]=f,t[7]=m,t[8]=v,t[9]=T,t[10]=N,t[11]=$,t[12]=o*i+d*r+v*s+e[12],t[13]=a*i+h*r+T*s+e[13],t[14]=c*i+f*r+N*s+e[14],t[15]=l*i+m*r+$*s+e[15]),t}function mR(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function I8(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+l*i,t[5]=o*r+d*i,t[6]=a*r+h*i,t[7]=c*r+f*i,t[8]=l*r-s*i,t[9]=d*r-o*i,t[10]=h*r-a*i,t[11]=f*r-c*i,t}function D8(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+l*i,t[1]=o*r+d*i,t[2]=a*r+h*i,t[3]=c*r+f*i,t[4]=l*r-s*i,t[5]=d*r-o*i,t[6]=h*r-a*i,t[7]=f*r-c*i,t}function O8(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function s0(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}!function zde(){var t=new sa(4);sa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const k8=[0,0,0,0],iue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],P8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],rue=[0,0,0],L8=[0,0,0],sue=h1(function cue({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function oue(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=k8,c=k8,l=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:f}=N8(t,e,n);return f&&(c=t.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=s0([],c,o),s=i||s,o=Gf([],r,s),o=Gf([],o,iue)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(t,n,i),d=t.getDistanceScales(),h=[t.width*e,t.height*e],f=s0([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,m={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:rue,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:P8,project_uCameraPosition:a};if(l){const v=t.getDistanceScales(l);switch(n){case Ei.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=v.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=v.unitsPerMeter2;break;case Ei.LNGLAT:case Ei.LNGLAT_OFFSETS:t._pseudoMeters||(m.project_uCommonUnitsPerMeter=v.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=v.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=v.unitsPerDegree2;break;case Ei.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,v.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,v.unitsPerMeter2[2]]}}return m});function N8(t,e,n=L8){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,s=!0;switch(r=e===Ei.LNGLAT_OFFSETS||e===Ei.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case kl.WEB_MERCATOR:(e===Ei.LNGLAT||e===Ei.CARTESIAN)&&(r=[0,0,0],s=!1);break;case kl.WEB_MERCATOR_AUTO_OFFSET:e===Ei.LNGLAT?i=r:e===Ei.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case kl.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case kl.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}class F8 extends YE{toString(){let e="[";if(Zr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=hi(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function p1(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function B8(t,e){return t[0]=-e[0],t[1]=-e[1],t}function U8(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}!function lue(){var t=new sa(2);sa!=Float32Array&&(t[0]=0,t[1]=0)}();var j8=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(j8||{});const hue=45*Math.PI/180,fue=1,gR=.1,_R=500,pue=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class zn extends F8{static get IDENTITY(){return function gue(){return g1||(g1=new zn,Object.freeze(g1)),g1}()}static get ZERO(){return function mue(){return m1||(m1=new zn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(m1)),m1}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return j8}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,s,o,a,c,l,d,h,f,m,v,T,N){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=f,this[12]=m,this[13]=v,this[14]=T,this[15]=N,this.check()}setRowMajor(e,n,i,r,s,o,a,c,l,d,h,f,m,v,T,N){return this[0]=e,this[1]=s,this[2]=l,this[3]=m,this[4]=n,this[5]=o,this[6]=d,this[7]=v,this[8]=i,this[9]=a,this[10]=h,this[11]=T,this[12]=r,this[13]=c,this[14]=f,this[15]=N,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(pue)}fromObject(e){return this.check()}fromQuaternion(e){return function Nde(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,l=n*o,d=i*o,h=i*a,f=r*o,m=r*a,v=r*c,T=s*o,N=s*a,$=s*c;t[0]=1-h-v,t[1]=d+$,t[2]=f-N,t[3]=0,t[4]=d-$,t[5]=1-l-v,t[6]=m+T,t[7]=0,t[8]=f+N,t[9]=m-T,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:s,near:o=gR,far:a=_R}=e;return a===1/0?function _ue(t,e,n,i,r,s){const a=2*s/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),f=-2*s;t[0]=2*s/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,n,i,r,s,o):function Fde(t,e,n,i,r,s,o){var a=1/(n-e),c=1/(r-i),l=1/(s-o);t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(o+s)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*l,t[15]=0}(this,n,i,r,s,o,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function Hde(t,e,n,i){var r,s,o,a,c,l,d,h,f,m,v=e[0],T=e[1],N=e[2],$=i[0],X=i[1],Q=i[2],ve=n[0],Pe=n[1],$e=n[2];Math.abs(v-ve)<Ll&&Math.abs(T-Pe)<Ll&&Math.abs(N-$e)<Ll?function Dde(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(d=v-ve,h=T-Pe,f=N-$e,r=X*(f*=m=1/Math.hypot(d,h,f))-Q*(h*=m),s=Q*(d*=m)-$*f,o=$*h-X*d,(m=Math.hypot(r,s,o))?(r*=m=1/m,s*=m,o*=m):(r=0,s=0,o=0),a=h*o-f*s,c=f*r-d*o,l=d*s-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),t[0]=r,t[1]=a,t[2]=d,t[3]=0,t[4]=s,t[5]=c,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=f,t[11]=0,t[12]=-(r*v+s*T+o*N),t[13]=-(a*v+c*T+l*N),t[14]=-(d*v+h*T+f*N),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:s,near:o=gR,far:a=_R}=e;return function jde(t,e,n,i,r,s,o){var a=1/(e-n),c=1/(i-r),l=1/(s-o);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(o+s)*l,t[15]=1}(this,n,i,r,s,o,a),this.check()}orthographic(e){const{fovy:n=hue,aspect:i=fue,focalDistance:r=1,near:s=gR,far:o=_R}=e;V8(n);const c=r*Math.tan(n/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return V8(n),function Bde(t,e,n,i,r){var o,s=1/Math.tan(e/2);t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,s),this.check()}determinant(){return function Ode(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],m=t[12],v=t[13],T=t[14],N=t[15];return(e*o-n*s)*(h*N-f*T)-(e*a-i*s)*(d*N-f*v)+(e*c-r*s)*(d*T-h*v)+(n*a-i*o)*(l*N-f*m)-(n*c-r*o)*(l*T-h*m)+(i*c-r*a)*(l*v-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function Rde(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return pR(this,this),this.check()}multiplyLeft(e){return Gf(this,e,this),this.check()}multiplyRight(e){return Gf(this,this,e),this.check()}rotateX(e){return I8(this,this,e),this.check()}rotateY(e){return function Pde(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-l*i,t[1]=o*r-d*i,t[2]=a*r-h*i,t[3]=c*r-f*i,t[8]=s*i+l*r,t[9]=o*i+d*r,t[10]=a*i+h*r,t[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return D8(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function kde(t,e,n,i){var c,l,d,h,f,m,v,T,N,$,X,Q,ve,Pe,$e,nt,tt,ft,pt,yt,Ot,mt,vt,Bt,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<Ll||(r*=a=1/a,s*=a,o*=a,c=Math.sin(n),l=Math.cos(n),f=e[1],m=e[2],v=e[3],N=e[5],$=e[6],X=e[7],ve=e[9],Pe=e[10],$e=e[11],pt=r*s*(d=1-l)-o*c,yt=s*s*d+l,Ot=o*s*d+r*c,mt=r*o*d+s*c,vt=s*o*d-r*c,Bt=o*o*d+l,t[0]=(h=e[0])*(nt=r*r*d+l)+(T=e[4])*(tt=s*r*d+o*c)+(Q=e[8])*(ft=o*r*d-s*c),t[1]=f*nt+N*tt+ve*ft,t[2]=m*nt+$*tt+Pe*ft,t[3]=v*nt+X*tt+$e*ft,t[4]=h*pt+T*yt+Q*Ot,t[5]=f*pt+N*yt+ve*Ot,t[6]=m*pt+$*yt+Pe*Ot,t[7]=v*pt+X*yt+$e*Ot,t[8]=h*mt+T*vt+Q*Bt,t[9]=f*mt+N*vt+ve*Bt,t[10]=m*mt+$*vt+Pe*Bt,t[11]=v*mt+X*vt+$e*Bt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return mR(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return f1(this,this,e),this.check()}transform(e,n){return 4===e.length?(Xy(n=s0(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function uue(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=VD(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Xy(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function Eae(t,e,n){const i=e[0],r=e[1],s=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/s,t[1]=(n[1]*i+n[5]*r)/s,t}(n||[-0,-0],e,this);break;case 3:i=I6(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Xy(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let m1,g1;function V8(t){if(t>2*Math.PI)throw Error("expected radians")}function Tg(t,e){const n=s0([],e,t);return O8(n,n,1/n[3]),n}function H8(t,e){const n=t%e;return n<0?e+n:n}function bR(t,e,n){return t<e?e:t>n?n:t}const yR=Math.log2||function yue(t){return Math.log(t)*Math.LOG2E};function Hd(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Vc=Math.PI,z8=Vc/4,sc=Vc/180,vR=180/Vc,Mg=512,_1=4003e4,b1=85.051129,vue=1.5;function y1(t){const[e,n]=t;return Hd(Number.isFinite(e)),Hd(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[Mg*(e*sc+Vc)/(2*Vc),Mg*(Vc+Math.log(Math.tan(z8+n*sc*.5)))/(2*Vc)]}function Ig(t){const[e,n]=t,i=e/Mg*(2*Vc)-Vc,r=2*(Math.atan(Math.exp(n/Mg*(2*Vc)-Vc))-z8);return[i*vR,r*vR]}function xR(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;Hd(Number.isFinite(e)&&Number.isFinite(n));const r=Mg,s=Math.cos(e*sc),o=r/360,a=o/s,c=r/_1/s,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[o,a,c],degreesPerUnit:[1/o,1/a,1/c]};if(i){const d=sc*Math.tan(e*sc)/s,f=r/_1*d,m=f/a*c;l.unitsPerDegree2=[0,o*d/2,f],l.unitsPerMeter2=[m,0,m]}return l}function G8(t,e){const[n,i,r]=t,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=xR({longitude:n,latitude:i,highPrecision:!0}),d=y1(t);d[0]+=s*(c[0]+l[0]*o),d[1]+=o*(c[1]+l[1]*o);const h=Ig(d),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function v1(t){return 2*Math.atan(.5/t)*vR}function wR(t){return.5/Math.tan(.5*t*sc)}function $8(t,e){const[n,i,r=0]=t;return Hd(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Tg(e,[n,i,r,1])}function o0(t,e,n=0){const[i,r,s]=t;if(Hd(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Tg(e,[i,r,s,1]);const o=Tg(e,[i,r,0,1]),a=Tg(e,[i,r,1,1]),c=o[2],l=a[2];return U8([],o,a,c===l?0:((n||0)-c)/(l-c))}function X8(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,c],[l,d]]=i,h=function Aue(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(Hd(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),f=y1([a,bR(d,-b1,b1)]),m=y1([l,bR(c,-b1,b1)]),v=[Math.max(Math.abs(m[0]-f[0]),r),Math.max(Math.abs(m[1]-f[1]),r)],T=[e-h.left-h.right-2*Math.abs(o[0]),n-h.top-h.bottom-2*Math.abs(o[1])];Hd(T[0]>0&&T[1]>0);const N=T[0]/v[0],$=T[1]/v[1],Pe=Ig([(m[0]+f[0])/2+(h.right-h.left)/2/N,(m[1]+f[1])/2+(h.top-h.bottom)/2/$]),$e=Math.min(s,yR(Math.abs(Math.min(N,$))));return Hd(Number.isFinite($e)),{longitude:Pe[0],latitude:Pe[1],zoom:$e}}const Y8=Math.PI/180;function K8(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=Tg(i,[e,0,1,1]),s=Tg(i,[e,t.height,1,1]),l=Ig(U8([],r,s,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return l.push(n),l}const Mue=Math.PI/180,Iue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],eV=[0,0,0],Due={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class dh{constructor(e={}){xe(this,"id",void 0),xe(this,"x",void 0),xe(this,"y",void 0),xe(this,"width",void 0),xe(this,"height",void 0),xe(this,"padding",void 0),xe(this,"isGeospatial",void 0),xe(this,"zoom",void 0),xe(this,"focalDistance",void 0),xe(this,"position",void 0),xe(this,"modelMatrix",void 0),xe(this,"distanceScales",void 0),xe(this,"scale",void 0),xe(this,"center",void 0),xe(this,"cameraPosition",void 0),xe(this,"projectionMatrix",void 0),xe(this,"viewMatrix",void 0),xe(this,"viewMatrixUncentered",void 0),xe(this,"viewMatrixInverse",void 0),xe(this,"viewProjectionMatrix",void 0),xe(this,"pixelProjectionMatrix",void 0),xe(this,"pixelUnprojectionMatrix",void 0),xe(this,"resolution",void 0),xe(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Due,this.focalDistance=e.focalDistance||1,this.position=e.position||eV,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?kl.WEB_MERCATOR:kl.WEB_MERCATOR_AUTO_OFFSET:kl.IDENTITY}equals(e){return e instanceof dh&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Ud(e.projectionMatrix,this.projectionMatrix)&&Ud(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=$8(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=n?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,s,o]=e,l=o0([r,n?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,f]=this.unprojectPosition(l);return Number.isFinite(o)?[d,h,f]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=y1(e);return n[1]=Rr(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Ig(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}getDistanceScales(e){return e?xR({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Mae(t){return{left:vg(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:vg(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:vg(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:vg(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:vg(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:vg(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function wue(t){const{latitude:e}=t;Hd(Number.isFinite(e));const n=Math.cos(e*sc);return function xue(t){return yR(t)}(_1*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||xR({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:o}=e;let a=eV;if(s&&(a=o?new zn(o).transformAsVector(s,[]):s),this.isGeospatial){const c=this.projectPosition([n,i,0]);this.center=new nn(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=Iue,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new zn).multiplyRight(n).translate(new nn(this.center).negate()),this.projectionMatrix=i||function Rue({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:s,near:o,far:a}){const c=t/e,l=n?(new zn).orthographic({fovy:i,aspect:c,focalDistance:r,near:o,far:a}):(new zn).perspective({fovy:i,aspect:c,near:o,far:a});if(s){const{left:d=0,right:h=0,top:f=0,bottom:m=0}=s,v=Rr((d+t-h)/2,0,t)-t/2,T=Rr((f+e-m)/2,0,e)-e/2;l[8]-=2*v/t,l[9]+=2*T/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:s||o*Mue,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Gf(h,h,this.projectionMatrix),Gf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=pR([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Tae(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mR(f,f,[this.width/2,-this.height/2,1]),f1(f,f,[1,-1,0]),Gf(m,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=pR([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||_i.warn("Pixel project matrix not invertible")()}}xe(dh,"displayName","Viewport");const Pue=Math.PI/180;function tV(t){return 512/4003e4/Math.cos(t*Pue)}class uh extends dh{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:m=!1}=e;let{width:v,height:T,altitude:N=1.5}=e;const $=Math.pow(2,r);v=v||1,T=T||1;let X,Q=null;d?(N=d[5]/2,X=v1(N)):(e.fovy?(X=e.fovy,N=wR(X)):X=v1(N),Q=function W8(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:s,center:o,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:d=v1(vue)}=t;void 0!==i&&(d=v1(i));const h=d*sc,f=r*sc,m=wR(d);let v=m;o&&(v+=o[2]*a/Math.cos(f)/n);const T=h*(.5+(s?s[1]:0)/n),N=Math.sin(T)*v/Math.sin(bR(Math.PI/2-f-T,.01,Math.PI-.01)),$=Math.sin(f)*N+v;return{fov:h,aspect:e/n,focalDistance:m,near:c,far:Math.min($*l,10*v)}}({width:v,height:T,pitch:s,fovy:X,nearZMultiplier:a,farZMultiplier:c}));let ve=function Eue(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:s,center:o}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];f1(a,a,[0,0,-r]),I8(a,a,-n*sc),D8(a,a,i*sc);const c=s/e;return mR(a,a,[c,c,c]),o&&f1(a,a,function mae(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],o)),a}({height:T,pitch:s,bearing:o,scale:$,altitude:N});f&&(ve=(new zn).translate([512*f,0,0]).multiplyLeft(ve)),super({...e,width:v,height:T,viewMatrix:ve,longitude:i,latitude:n,zoom:r,...Q,fovy:X,focalDistance:N}),xe(this,"longitude",void 0),xe(this,"latitude",void 0),xe(this,"pitch",void 0),xe(this,"bearing",void 0),xe(this,"altitude",void 0),xe(this,"fovy",void 0),xe(this,"orthographic",void 0),xe(this,"_subViewports",void 0),xe(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=o,this.altitude=N,this.fovy=X,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const s=r?new uh({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*tV(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/tV(i)]}addMetersToLngLat(e,n){return G8(e,n)}panByPosition(e,n){const i=o0(n,this.pixelUnprojectionMatrix),s=p1([],this.projectFlat(e),B8([],i)),o=p1([],this.center,s),[a,c]=this.unprojectFlat(o);return{longitude:a,latitude:c}}getBounds(e={}){const n=function Sue(t,e=0){const{width:n,height:i,unproject:r}=t,s={targetZ:e},o=r([0,i],s),a=r([n,i],s);let c,l;return(t.fovy?.5*t.fovy*Y8:Math.atan(.5/t.altitude))>(90-t.pitch)*Y8-.01?(c=K8(t,0,e),l=K8(t,n,e)):(c=r([0,0],s),l=r([n,0],s)),[o,a,l,c]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=X8({width:i,height:r,bounds:e,...n});return new uh({width:i,height:r,longitude:s,latitude:o,zoom:a})}}function AR(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof uh){const[r,s,o=0]=t,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function nV(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,c=0]=t;switch(n&&([o,a,c]=s0([],[o,a,c,1],n)),i){case Ei.LNGLAT:return AR([o,a,c],e,s);case Ei.LNGLAT_OFFSETS:return AR([o+r[0],a+r[1],c+(r[2]||0)],e,s);case Ei.METER_OFFSETS:return AR(G8(r,[o,a,c]),e,s);default:return e.isGeospatial?[o+r[0],a+r[1],c+r[2]]:e.projectPosition([o,a,c])}}xe(uh,"displayName","WebMercatorViewport");const Fue={10241:9987,10240:9729,10242:33071,10243:33071},SR={};function Dg(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const i=t[n],r=e[n];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&Dg(i,r)))return!1}return!0}const jue={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||c0(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>CR(t,e)},accessor:{validate(t,e){const n=x1(t);return"function"===n||n===x1(e.value)},equal:(t,e,n)=>"function"==typeof e||CR(t,e)},array:{validate:(t,e)=>e.optional&&!t||c0(t),equal:(t,e,n)=>n.compare?CR(t,e):t===e},object:{equal:(t,e,n)=>n.compare?Dg(t,e):t===e},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>function Bue(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof _o)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new _o(n,{...e,parameters:{...Fue,...i,...t.props.textureParameters}});return SR[r.id]=!0,r}(n,t),release:t=>{!function Uue(t){!t||!(t instanceof _o)||SR[t.id]&&(t.delete(),delete SR[t.id])}(t)}}};function CR(t,e){if(t===e)return!0;if(!c0(t)||!c0(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function Hue(t,e){switch(x1(e)){case"object":return a0(t,e);case"array":return a0(t,{type:"array",value:e,compare:!1});case"boolean":return a0(t,{type:"boolean",value:e});case"number":return a0(t,{type:"number",value:e});case"function":return a0(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function a0(t,e){return"type"in e?{name:t,...jue[e.type],...e}:"value"in e?{name:t,type:x1(e.value),...e}:{name:t,type:"object",value:e}}function c0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function x1(t){return c0(t)?"array":null===t?"null":typeof t}function iV(t){return w1(t,"_mergedDefaultProps")||(function Gue(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),i=iV(n),s=function Vue(t){const e={},n={},i={};for(const[r,s]of Object.entries(t)){const o=s?.deprecatedFor;if(o)i[r]=Array.isArray(o)?o:[o];else{const a=Hue(r,s);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(w1(t,"defaultProps")||{}),o=function Wue(t,e,n){const i=Object.create(null);Object.assign(i,e,t);const r=function Kue(t){const e=w1(t,"layerName")||w1(t,"componentName");return e||_i.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}(n);return delete t.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,t),a={...n._propTypes,...s.propTypes};!function Xue(t,e){const n={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(n[o]=a,i[o]=Yue(o))}t[Cg]=n,t[zf]={},Object.defineProperties(t,i)}(o,a);const c={...n._deprecatedProps,...s.deprecatedProps};(function $ue(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const s of e[n])rV(this,s)||(this[s]=i);_i.deprecated(r,e[n].join("/"))()}})})(o,c),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=c}(t),t._mergedDefaultProps)}function Yue(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||L6(e)?this[zf][t]=e:this[lh][t]=e},get(){if(this[lh]){if(t in this[lh])return this[lh][t]||this[Cg][t];if(t in this[zf]){const e=this[u1]&&this[u1].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Cg][t]}}return this[Cg][t]}}}function rV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w1(t,e){return rV(t,e)&&t[e]}let que=0;class TR{constructor(...e){xe(this,"id",void 0),xe(this,"props",void 0),xe(this,"count",void 0),this.props=function zue(t,e){const n=iV(t.constructor),i=Object.create(n);i[u1]=t,i[zf]={},i[lh]={};for(let r=0;r<e.length;++r){const s=e[r];for(const o in s)i[o]=s[o]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=que++}clone(e){const{props:n}=this,i={};for(const r in n[Cg])r in n[lh]?i[r]=n[lh][r]:r in n[zf]&&(i[r]=n[zf][r]);return new this.constructor({...n,...i,...e})}}function MR(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new E1(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function E1(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(E1=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new E1(t)}xe(TR,"componentName","Component"),xe(TR,"defaultProps",{});const Jue=Object.freeze({});class Zue{constructor(e){xe(this,"component",void 0),xe(this,"onAsyncPropUpdated",void 0),xe(this,"asyncProps",void 0),xe(this,"oldProps",void 0),xe(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||Jue}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[lh]||{},i=e[zf]||e,r=e[Cg]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(L6(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(s=>{s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}_resolveAsyncIterable(e,n){var i=this;return jt(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let o=[],a=0;var d,c=!1,l=!1;try{for(var f,h=MR(n);c=!(f=yield h.next()).done;c=!1){const m=f.value;{const{dataTransform:v}=i.component.props;o=v?v(m,o):o.concat(m),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,i._setAsyncPropValue(e,o,s)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,o)})()}_postProcessValue(e,n){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class Que extends Zue{constructor({attributeManager:e,layer:n}){super(n),xe(this,"attributeManager",void 0),xe(this,"needsRedraw",void 0),xe(this,"needsUpdate",void 0),xe(this,"subLayers",void 0),xe(this,"usesPickingColorCache",void 0),xe(this,"changeFlags",void 0),xe(this,"viewport",void 0),xe(this,"uniformTransitions",void 0),xe(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const i=this.component.props.fetch;return i?i(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const i=this.component.props.onDataLoad;"data"===e&&i&&i(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const Hc=t=>"function"==typeof t,hh=t=>null!==t&&"object"==typeof t,oV=t=>hh(t)&&t.constructor==={}.constructor,ehe=t=>t&&"function"==typeof t[Symbol.iterator],the=t=>t&&"function"==typeof t[Symbol.asyncIterator],Rg=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Og=t=>typeof Blob<"u"&&t instanceof Blob,nhe=t=>t&&"object"==typeof t&&t.isBuffer,aV=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||hh(t)&&Hc(t.tee)&&Hc(t.cancel)&&Hc(t.getReader))(t)||(t=>hh(t)&&Hc(t.read)&&Hc(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function cV(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function IR(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function DR(t){var e,n;let i;return cV(t,"null loader"),cV(IR(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let RR="";const OR={},che=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,lhe=/^([-\w.]+\/[-\w.+]+)/;function dhe(t){const e=lhe.exec(t);return e?e[1]:t}function lV(t){const e=che.exec(t);return e?e[1]:""}const uhe=/\?.*/;function A1(t){if(Rg(t)){const e=kR(t.url||"");return{url:e,type:dhe(t.headers.get("content-type")||"")||lV(e)}}return Og(t)?{url:kR(t.name||""),type:t.type||""}:"string"==typeof t?{url:kR(t),type:lV(t)}:{url:"",type:""}}function kR(t){return t.replace(uhe,"")}function dV(t){return PR.apply(this,arguments)}function PR(){return PR=jt(function*(t){if(Rg(t))return t;const e={},n=function hhe(t){return Rg(t)?t.headers["content-length"]||-1:Og(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const{url:i,type:r}=A1(t);r&&(e["content-type"]=r);const s=yield function mhe(t){return FR.apply(this,arguments)}(t);s&&(e["x-first-bytes"]=s),"string"==typeof t&&(t=(new TextEncoder).encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:i}),o}),PR.apply(this,arguments)}function LR(){return LR=jt(function*(t){if(!t.ok){const e=yield function phe(t){return NR.apply(this,arguments)}(t);throw new Error(e)}}),LR.apply(this,arguments)}function NR(){return NR=jt(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),NR.apply(this,arguments)}function FR(){return FR=jt(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function ghe(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),FR.apply(this,arguments)}function uV(t,e){return BR.apply(this,arguments)}function BR(){return BR=jt(function*(t,e){if("string"==typeof t){t=function ahe(t){for(const e in OR)t.startsWith(e)&&(t=t.replace(e,OR[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(RR).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield dV(t)}),BR.apply(this,arguments)}const hV=new mg({id:"loaders.gl"});class _he{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const fV=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),pV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),mV=(pV&&parseFloat(pV[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class bhe{constructor(){xe(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:fV,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),yhe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function UR(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const jR=()=>{const t=UR();return t.globalOptions=t.globalOptions||{...mV},t.globalOptions};function vhe(t,e,n,i){return n=n||[],function xhe(t,e){_V(t,null,mV,yhe,e);for(const n of e)_V(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function bV(t,e,n){const r={...t.options||{}};return function Ehe(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new _he),yV(r,jR()),yV(r,e),r}(e,t,i)}function gV(t,e){const n=jR(),i=t||n;return"function"==typeof i.fetch?i.fetch:hh(i.fetch)?r=>uV(r,i):null!=e&&e.fetch?e?.fetch:uV}function _V(t,e,n,i,r){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const c=!e&&hh(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)hV.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=whe(a,r);hV.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}function whe(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(t===s)return"Did you mean '".concat(r.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(s,"'?"))}return i}function yV(t,e){for(const n in e)n in e&&(t[n]=oV(e[n])&&oV(t[n])?{...t[n],...e[n]}:e[n])}function zd(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Ahe="3.2.10";typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const S1="object"!=typeof process||"[object process]"!==String(process)||process.browser,Che=typeof window<"u"&&typeof window.orientation<"u",vV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);vV&&parseFloat(vV[1]);class VR{}const HR=new Map;function xV(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function wV(t,e=!0,n){const i=n||new Set;if(t)if(EV(t))i.add(t);else if(EV(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)wV(t[r],e,i);return void 0===n?Array.from(i):[]}function EV(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const zR=()=>{};class GR{static isSupported(){return typeof Worker<"u"&&S1||typeof VR<"u"&&!S1}constructor(e){xe(this,"name",void 0),xe(this,"source",void 0),xe(this,"url",void 0),xe(this,"terminated",!1),xe(this,"worker",void 0),xe(this,"onMessage",void 0),xe(this,"onError",void 0),xe(this,"_loadableURL","");const{name:n,source:i,url:r}=e;zd(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=zR,this.onError=s=>console.log(s),this.worker=S1?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=zR,this.onError=zR,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||wV(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function The(t){zd(t.source&&!t.url||!t.source&&t.url);let e=HR.get(t.source||t.url);return e||(t.url&&(e=function Mhe(t){if(!t.startsWith("http"))return t;const e=function Ihe(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return xV(e)}(t.url),HR.set(t.url,e)),t.source&&(e=xV(t.source),HR.set(t.source,e))),zd(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new VR(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new VR(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Rhe{constructor(e,n){xe(this,"name",void 0),xe(this,"workerThread",void 0),xe(this,"isRunning",!0),xe(this,"result",void 0),xe(this,"_resolve",()=>{}),xe(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){zd(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){zd(this.isRunning),this.isRunning=!1,this._reject(e)}}class Ohe{static isSupported(){return GR.isSupported()}constructor(e){xe(this,"name","unnamed"),xe(this,"source",void 0),xe(this,"url",void 0),xe(this,"maxConcurrency",1),xe(this,"maxMobileConcurrency",1),xe(this,"onDebug",()=>{}),xe(this,"reuseWorkers",!0),xe(this,"props",{}),xe(this,"jobQueue",[]),xe(this,"idleQueue",[]),xe(this,"count",0),xe(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,n=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return jt(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:n,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return jt(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new Rhe(i.name,n);n.onMessage=s=>i.onMessage(r,s.type,s.payload),n.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new GR({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Che?this.maxMobileConcurrency:this.maxConcurrency}}const khe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Gd{static isSupported(){return GR.isSupported()}static getWorkerFarm(e={}){return Gd._workerFarm=Gd._workerFarm||new Gd({}),Gd._workerFarm.setProps(e),Gd._workerFarm}constructor(e){xe(this,"props",void 0),xe(this,"workerPools",new Map),this.props={...khe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let s=this.workerPools.get(n);return s||(s=new Ohe({name:n,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}xe(Gd,"_workerFarm",void 0);const Phe="latest";function WR(){return WR=jt(function*(t,e,n,i,r){const s=t.id,o=function Lhe(t,e={}){const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let s=t.version;"latest"===s&&(s=Phe);const o=s?"@".concat(s):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(i)}return zd(r),r}(t,n),c=Gd.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",Bhe.bind(null,r));return l.postMessage("process",{input:e,options:n,context:i}),yield(yield l.result).result}),WR.apply(this,arguments)}function Bhe(t,e,n,i){return $R.apply(this,arguments)}function $R(){return $R=jt(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield t(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),$R.apply(this,arguments)}function SV(t){return t&&"object"==typeof t&&t.isBuffer}function CV(t){if(SV(t))return function Uhe(t){return SV(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function YR(){return YR=jt(function*(t){const e=[];var r,n=!1,i=!1;try{for(var o,s=MR(t);n=!(o=yield s.next()).done;n=!1)e.push(o.value)}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return function Vhe(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(n);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}(...e)}),YR.apply(this,arguments)}g(643);const zhe=262144,Whe=262144;function TV(t,e){this.v=t,this.k=e}function C1(t){return new TV(t,0)}function l0(t){var e,n;function i(s,o){try{var a=t[s](o),c=a.value,l=c instanceof TV;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===s?"return":"next";if(!c.k||d.done)return i(h,d);d=t[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(s,o){return new Promise(function(a,c){var l={key:s,arg:o,resolve:a,reject:c,next:null};n?n=n.next=l:(e=n=l,i(s,o))})},"function"!=typeof t.return&&(this.return=void 0)}function qR(t){return function(){return new l0(t.apply(this,arguments))}}l0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},l0.prototype.next=function(t){return this._invoke("next",t)},l0.prototype.throw=function(t){return this._invoke("throw",t)},l0.prototype.return=function(t){return this._invoke("return",t)};const Xhe=1048576;function JR(){return JR=qR(function*(t,e){const n=e?.chunkSize||Xhe;let i=0;for(;i<t.size;){const r=i+n,s=yield C1(t.slice(i,r).arrayBuffer());i=r,yield s}}),JR.apply(this,arguments)}function MV(t,e){return fV?function Khe(t,e){return ZR.apply(this,arguments)}(t,e):function qhe(t,e){return QR.apply(this,arguments)}(t,e)}function ZR(){return ZR=qR(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:s,value:o}=yield C1(r);if(s)return;yield CV(o)}}catch{n.releaseLock()}}),ZR.apply(this,arguments)}function QR(){return QR=qR(function*(t,e){var r,n=!1,i=!1;try{for(var o,s=MR(t);n=!(o=yield C1(s.next())).done;n=!1){const a=o.value;yield CV(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield C1(s.return()))}finally{if(i)throw r}}}),QR.apply(this,arguments)}const e2="Cannot convert supplied data type";function t2(){return t2=jt(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function Zhe(t,e,n){if(e.text&&"string"==typeof t)return t;if(nhe(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(e2)}(t,e);if(Og(t)&&(t=yield dV(t)),Rg(t)){const r=t;return yield function fhe(t){return LR.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(aV(t)&&(t=function Jhe(t,e){if("string"==typeof t)return function*Ghe(t,e){const n=e?.chunkSize||zhe;let i=0;const r=new TextEncoder;for(;i<t.length;){const s=Math.min(t.length-i,n),o=t.slice(i,i+s);i+=s,yield r.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function*$he(t,e={}){const{chunkSize:n=Whe}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),s=new ArrayBuffer(r),o=new Uint8Array(t,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(t,e);if(Og(t))return function Yhe(t,e){return JR.apply(this,arguments)}(t,e);if(aV(t))return MV(t,e);if(Rg(t))return MV(t.body,e);throw new Error("makeIterator")}(t,n)),ehe(t)||the(t))return function Hhe(t){return YR.apply(this,arguments)}(t);throw new Error(e2)}),t2.apply(this,arguments)}const rfe=new mg({id:"loaders.gl"}),IV=()=>{const t=UR();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function DV(t){const e=IV();t=Array.isArray(t)?t:[t];for(const n of t){const i=DR(n);e.find(r=>i===r)||e.unshift(i)}}const ofe=/\.([^.]+)$/;function s2(){return s2=jt(function*(t,e=[],n,i){if(!OV(t))return null;let r=RV(t,e,{...n,nothrow:!0},i);if(r)return r;if(Og(t)&&(r=RV(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(kV(t));return r}),s2.apply(this,arguments)}function RV(t,e=[],n,i){if(!OV(t))return null;if(e&&!Array.isArray(e))return DR(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function sfe(){return IV()}()),function lfe(t){for(const e of t)DR(e)}(r);const s=function cfe(t,e,n,i){const{url:r,type:s}=A1(t),o=r||i?.url;let a=null,c="";var l;return null!=n&&n.mimeType&&(a=o2(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function dfe(t,e){const n=e&&ofe.exec(e),i=n&&n[1];return i?function ufe(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,o),c=c||(a?"matched url ".concat(o):""),a=a||o2(e,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function hfe(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(ffe(e,n))return n}else if(ArrayBuffer.isView(e)){if(PV(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&PV(e,0,n))return n;return null}(e,t),c=c||(a?"matched initial data ".concat(LV(t)):""),a=a||o2(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""),c&&rfe.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(t,r,n,i);if(!(s||null!=n&&n.nothrow))throw new Error(kV(t));return s}function OV(t){return!(t instanceof Response&&204===t.status)}function kV(t){const{url:e,type:n}=A1(t);let i="No valid loader found (";i+=e?"".concat(function ife(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?LV(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function o2(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function ffe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function PV(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function pfe(t,e,n,i){if(i instanceof ArrayBuffer)return function jhe(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===a2(t,e,i.length);default:return!1}}(t,e,n,r))}function LV(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?a2(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?a2(t,0,e):""}function a2(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function T1(t,e,n,i){return c2.apply(this,arguments)}function c2(){return c2=jt(function*(t,e,n,i){zd(!i||"object"==typeof i),e&&!Array.isArray(e)&&!IR(e)&&(i=void 0,n=e,e=void 0),t=yield t,n=n||{};const{url:r}=A1(t),o=function nfe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function afe(t){return s2.apply(this,arguments)}(t,o,n);return a?(i=function tfe(t,e,n=null){if(n)return n;const i={fetch:gV(e,t),...t};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:T1,loaders:o},n=vhe(n,a,o,r),i),yield function mfe(t,e,n,i){return l2.apply(this,arguments)}(a,t,n,i)):null}),c2.apply(this,arguments)}function l2(){return l2=jt(function*(t,e,n,i){if(function She(t,e=Ahe){zd(t,"no worker provided")}(t),Rg(e)){const r=e,{ok:s,redirected:o,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:s,redirected:o,status:a,statusText:c,type:l,url:d}}if(e=yield function Qhe(t,e,n){return t2.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function Nhe(t,e){return!(!Gd.isSupported()||!(S1||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function Fhe(t,e,n,i,r){return WR.apply(this,arguments)}(t,e,n,i,T1);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw zd(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),l2.apply(this,arguments)}function d0(t,e,n,i){return d2.apply(this,arguments)}function d2(){return d2=jt(function*(t,e,n,i){!Array.isArray(e)&&!IR(e)&&(n=e,e=void 0);const r=gV(n);let s=t;return"string"==typeof t&&(s=yield r(t)),Og(t)&&(s=yield r(t)),yield T1(s,e,n)}),d2.apply(this,arguments)}const xfe=Object.freeze([]),wfe=h1(({oldViewport:t,viewport:e})=>t.equals(e));let Bl=new Uint8ClampedArray(0);const Efe={data:{type:"data",value:xfe,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,s&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:s}});let c=o.contains(t);return!c&&!r&&(o.add({resourceId:t,data:d0(t,i),persistent:!1}),c=!0),c?o.subscribe({resourceId:t,onChange:l=>{var d;return null===(d=n.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):d0(t,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Ei.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Wf extends TR{constructor(...e){super(...e),xe(this,"internalState",null),xe(this,"lifecycle","Awaiting state"),xe(this,"context",void 0),xe(this,"state",void 0),xe(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){Js(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=nV(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,o]=$8(i,n.pixelProjectionMatrix);return 2===e.length?[r,s]:[r,s,o]}unproject(e){return Js(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return Js(this.internalState),function Nue(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function Lue(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return r===Ei.DEFAULT&&(r=e.isGeospatial?Ei.LNGLAT:Ei.CARTESIAN),void 0===s&&(s=r),void 0===o&&(o=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:d}=N8(n,i,r),h=nV(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:d});d&&function pae(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(h,h,n.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ei.DEFAULT||e===Ei.LNGLAT||e===Ei.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Js(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function Sde(t){if(!function Tde(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function Cde(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:i,instancePositions:r}=n.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=Ide(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const c of i)n.invalidateAll(c);else n.invalidateAll();const{props:r,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&n){const{pickingColors:c,instancePickingColors:l}=n.attributes,d=c||l;d&&(a&&d.constant&&(d.constant=!1,n.invalidate(d.id)),!d.value&&!a&&(d.constant=!0,d.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,s,o;n&&(e.message="".concat(n,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(s=this.context)||void 0===s||null===(o=s.onError)||void 0===o||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!wfe({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(Bl.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&_i.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Bl=$y.allocate(Bl,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(Bl.length/3),s=[];for(let o=i;o<r;o++)this.encodePickingColor(o,s),Bl[3*o+0]=s[0],Bl[3*o+1]=s[1],Bl[3*o+2]=s[2]}e.value=Bl.subarray(0,3*n)}_setModelAttributes(e,n){const s=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const s=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Bl.buffer&&(i.value=Bl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Js(!this.internalState),Js(Number.isFinite(this.props.coordinateSystem)),bo("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Que({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(_i.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new gde(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){bo("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(bo("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,s=i.viewport,o=this._updateUniformTransition();r.propsInTransition=o,i.viewport=r.viewport||s,this.props=o;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=s,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){bo("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,s=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];Nd(s.gl,{polygonOffset:c}),rc(s.gl,i,()=>{const l={moduleParameters:e,uniforms:n,parameters:i,context:s};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let s=!1;if("dataChanged"===r){const o=e[r],a=n[r];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0)}n[r]||(n[r]=e[r],s=!0),s&&bo("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function bde(t,e){const n=T8({newProps:t,oldProps:e,propTypes:fR(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function vde(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function xde(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&M8(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&M8(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:wde(t,e),transitionsChanged:yde(t,e)}}(e,n);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(s,n[s],e[s],null===(r=e.transitions)||void 0===r?void 0:r[s])}return this.setChangeFlags(i)}validateProps(){!function _de(t){const e=fR(t);for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new ude(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:c}=i;if(n||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};o||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),Number.isInteger(a)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return n=n||r,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}xe(Wf,"defaultProps",Efe),xe(Wf,"layerName","Layer");class u2 extends Wf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:v,modelMatrix:T,extensions:N,fetch:$,operation:X,_subLayerProps:Q}=this.props,ve={id:"",updateTriggers:{},opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:v,modelMatrix:T,extensions:N,fetch:$,operation:X},Pe=Q&&e.id&&Q[e.id],$e=Pe&&Pe.updateTriggers,nt=e.id||"sublayer";if(Pe){const tt=this.constructor._propTypes,ft=e.type?e.type._propTypes:{};for(const pt in Pe){const yt=ft[pt]||tt[pt];yt&&"accessor"===yt.type&&(Pe[pt]=this.getSubLayerAccessor(Pe[pt]))}}Object.assign(ve,e,Pe),ve.id="".concat(this.props.id,"-").concat(nt),ve.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...$e};for(const tt of N){const ft=tt.getSubLayerProps.call(this,tt);ft&&Object.assign(ve,ft,{updateTriggers:Object.assign(ve.updateTriggers,ft.updateTriggers)})}return ve}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=GD(this.renderLayers(),Boolean),this.internalState.subLayers=i),bo("compositeLayer.renderLayers",this,r,i);for(const s of i)s.parent=this}}xe(u2,"layerName","CompositeLayer");const Sfe=/([0-9]+\.?[0-9]*)(%|px)/;function fh(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=Sfe.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function ph(t,e){return t.relative?Math.round(t.position*e):t.position}class h2{constructor(e){xe(this,"id",void 0),xe(this,"viewportInstance",void 0),xe(this,"_x",void 0),xe(this,"_y",void 0),xe(this,"_width",void 0),xe(this,"_height",void 0),xe(this,"_padding",void 0),xe(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:c}=e||{};Js(!c||c instanceof dh),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=fh(i),this._y=fh(r),this._width=fh(s),this._height=fh(o),this._padding=a&&{left:fh(a.left||0),right:fh(a.right||0),top:fh(a.top||0),bottom:fh(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&Dg(this.props,e.props))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:ph(this._x,e),y:ph(this._y,n),width:ph(this._width,e),height:ph(this._height,n)};return this._padding&&(i.padding={left:ph(this._padding.left,e),top:ph(this._padding.top,n),right:ph(this._padding.right,e),bottom:ph(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Cfe=(new zn).lookAt({eye:[0,0,1]});function Tfe({width:t,height:e,near:n,far:i,padding:r}){let s=-t/2,o=t/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:f=0}=r,m=Rr((l+t-d)/2,0,t)-t/2,v=Rr((h+e-f)/2,0,e)-e/2;s-=m,o-=m,a+=v,c+=v}return(new zn).ortho({left:s,right:o,bottom:a,top:c,near:n,far:i})}class Mfe extends dh{constructor(e){const{width:n,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(o)?o[0]:o,h=Array.isArray(o)?o[1]:o,f=Math.min(d,h),m=Math.pow(2,f);let v;if(d!==h){const T=Math.pow(2,d),N=Math.pow(2,h);v={unitsPerMeter:[T/m,N/m,1],metersPerUnit:[m/T,m/N,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Cfe.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:Tfe({width:n||1,height:i||1,padding:c,near:r,far:s}),zoom:f,distanceScales:v})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=o0(n,this.pixelUnprojectionMatrix),s=p1([],this.projectFlat(e),B8([],i)),o=p1([],this.center,s);return{target:this.unprojectFlat(o)}}}const FV=()=>{},Ife=t=>t;class Rfe{constructor(e){xe(this,"getControllerState",void 0),xe(this,"props",void 0),xe(this,"propsInTransition",void 0),xe(this,"transition",void 0),xe(this,"onViewStateChange",void 0),xe(this,"onStateChange",void 0),xe(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:o,duration:a,easing:c}}=n,l=c(i/a),d=r.interpolateProps(s,o,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new r0(e.timeline),this.onViewStateChange=e.onViewStateChange||FV,this.onStateChange=e.onStateChange||FV}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;r={...i,...2===s?o:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(0===o)return;const a=s.initializeProps(e,r);this.propsInTransition={};const c={duration:o,easing:n.transitionEasing||Ife,interpolator:s,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class Ofe{constructor(e){xe(this,"_propsToCompare",void 0),xe(this,"_propsToExtract",void 0),xe(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!Ud(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const s of this._propsToExtract)(s in e||s in n)&&(i[s]=e[s],r[s]=n[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];Js(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const kfe=["longitude","latitude","zoom","bearing","pitch"],Pfe=["longitude","latitude","zoom"];class M1 extends Ofe{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:kfe,required:Pfe},super(i.transitionProps),xe(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(n),c=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const s of this._propsToExtract)r[s]=XE(e[s]||0,n[s]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...r});Object.assign(r,s.panByPosition(n.aroundPosition,XE(e.around,n.around,i)))}return r}}const mh={transitionDuration:0},I1=t=>1-(1-t)*(1-t),kg_WHEEL=["wheel"],kg_PAN=["panstart","panmove","panend"],kg_PINCH=["pinchstart","pinchmove","pinchend"],kg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],kg_DOUBLE_TAP=["doubletap"],kg_KEYBOARD=["keydown"],$f={};class p2{constructor(e){xe(this,"props",void 0),xe(this,"state",{}),xe(this,"transitionManager",void 0),xe(this,"eventManager",void 0),xe(this,"onViewStateChange",void 0),xe(this,"onStateChange",void 0),xe(this,"makeViewport",void 0),xe(this,"_controllerState",void 0),xe(this,"_events",{}),xe(this,"_interactionState",{isDragging:!1}),xe(this,"_customEvents",[]),xe(this,"_eventStartBlocked",null),xe(this,"_panMove",!1),xe(this,"invertPan",!1),xe(this,"dragMode","rotate"),xe(this,"inertia",0),xe(this,"scrollZoom",!0),xe(this,"dragPan",!0),xe(this,"dragRotate",!0),xe(this,"doubleClickZoom",!0),xe(this,"touchZoom",!0),xe(this,"touchRotate",!1),xe(this,"keyboard",!0),this.transitionManager=new Rfe({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(kg_WHEEL,d&&i),this.toggleEvents(kg_PAN,d&&(r||s)),this.toggleEvents(kg_PINCH,d&&(a||c)),this.toggleEvents(kg_TRIPLE_PAN,d&&c),this.toggleEvents(kg_DOUBLE_TAP,d&&o),this.toggleEvents(kg_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,mh,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,mh,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:I1},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,mh,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:I1},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,mh,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,mh,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:I1},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return $f._startPinchRotation=e.rotation,$f._lastPinchEvent=e,this.updateViewport(i,mh,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:$f._startPinchRotation-i})}return this.updateViewport(n,mh,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),$f._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=$f;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,o+a*n/2);s=s.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:I1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return $f._startPinchRotation=null,$f._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(s),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(s),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(o),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(o),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new M1({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:mh}}class BV{constructor(e,n){xe(this,"_viewportProps",void 0),xe(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class UV extends BV{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:m,startRotationX:v,startRotationOrbit:T,startZoomPosition:N,startZoom:$}=e;super({width:n,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:f,startRotatePos:m,startRotationX:v,startRotationOrbit:T,startZoomPosition:N,startZoom:$}),xe(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===s||void 0===o)return this;let l;if(e){let d=(e[0]-r[0])/a;(s<-90||s>90)&&(d*=-1),l={rotationX:s+(e[1]-r[1])/c*180,rotationOrbit:o+180*d}}else l={rotationX:s+i,rotationOrbit:o+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),Rr(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Rr(r[0],i,n),Rr(r[1],i,n)]:Rr(r,i,n),e.rotationX=Rr(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function Cae(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class Nfe extends p2{constructor(...e){super(...e),xe(this,"ControllerState",UV),xe(this,"transition",{transitionDuration:300,transitionInterpolator:new M1({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class Ffe extends UV{constructor(e){super(e),xe(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=Rr(o+s,r,i);break;case"Y":a=Rr(a+s,r,i);break;default:let c=Math.min(o+s,a+s);c<r&&(s+=r-c),c=Math.max(o+s,a+s),c>i&&(s+=i-c),o+=s,a+=s}return[o,a]}return Rr(n+s,r,i)}}class Bfe extends p2{constructor(...e){super(...e),xe(this,"ControllerState",Ffe),xe(this,"transition",{transitionDuration:300,transitionInterpolator:new M1(["target","zoom"])}),xe(this,"dragMode","pan")}_onPanRotate(){return!1}}class m2 extends h2{get ViewportType(){return Mfe}get ControllerType(){return Bfe}}xe(m2,"displayName","OrthographicView");const g2=Math.PI/180;function Ufe({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:s}){const o="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],c=(new zn).lookAt({eye:a,up:o});c.rotateX(i*g2),"Z"===n?c.rotateZ(r*g2):c.rotateY(r*g2);const l=Math.pow(2,s)/t;return c.scale(l),c}class jfe extends dh{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:wR(r);super({...e,longitude:void 0,viewMatrix:Ufe({height:n||1,focalDistance:d,orbitAxis:s,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:o,zoom:l}),xe(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=n?r:this.height-r,[a,c,l]=o0([i,o,s],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class jV extends h2{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return jfe}get ControllerType(){return Nfe}}xe(jV,"displayName","OrbitView");const Vfe=[255,255,255],Hfe=1;let zfe=0;class VV{constructor(e={}){xe(this,"id",void 0),xe(this,"color",void 0),xe(this,"intensity",void 0),xe(this,"type","ambient");const{color:n=Vfe}=e,{intensity:i=Hfe}=e;this.id=e.id||"ambient-".concat(zfe++),this.color=n,this.intensity=i}}const Gfe=[255,255,255],Wfe=1,$fe=[0,0,-1];let Xfe=0;class HV{constructor(e={}){xe(this,"id",void 0),xe(this,"color",void 0),xe(this,"intensity",void 0),xe(this,"type","directional"),xe(this,"direction",void 0),xe(this,"shadow",void 0);const{color:n=Gfe}=e,{intensity:i=Wfe}=e,{direction:r=$fe}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(Xfe++),this.color=n,this.intensity=i,this.type="directional",this.direction=new nn(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class Yfe{constructor(e,n={id:"pass"}){xe(this,"id",void 0),xe(this,"gl",void 0),xe(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class D1 extends Yfe{constructor(...e){super(...e),xe(this,"_lastRenderIndex",-1)}render(e){return Nd(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function qfe(t){Nd(t,{viewport:[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}),t.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const f=s&&s[h.id];o(h);const m=this._getDrawLayerParams(h,e),v=h.subViewports||[h];for(const T of v){const N=this._drawLayersInViewport(l,{target:n,moduleParameters:i,viewport:T,view:f,pass:e.pass,layers:e.layers},m);d.push(N)}}return d}_getDrawLayerParams(e,{layers:n,pass:i,layerFilter:r,cullRect:s,effects:o,moduleParameters:a}){const c=[],l=zV(this._lastRenderIndex+1),d={layer:n[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:s},h={};for(let f=0;f<n.length;f++){const m=n[f],v=this._shouldDrawLayer(m,d,r,h),T={shouldDrawLayer:v};v&&(T.layerRenderIndex=l(m,v),T.moduleParameters=this._getModuleParameters(m,o,i,a),T.layerParameters=this.getLayerParameters(m,f,e)),c[f]=T}return c}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:s,viewport:o,view:a},c){const l=function Kfe(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,s=e&&e.devicePixelRatio||gg(t);return[i.x*s,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*s,i.width*s,i.height*s]}(e,{moduleParameters:i,target:s,viewport:o});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;rc(e,{scissorTest:!0,scissor:l},()=>FD(e,h))}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Nd(e,{viewport:l});for(let h=0;h<n.length;h++){const f=n[h],{shouldDrawLayer:m,layerRenderIndex:v,moduleParameters:T,layerParameters:N}=c[h];if(m&&f.props.pickable&&d.pickableCount++,f.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,v),T.viewport=o;try{f._drawLayer({moduleParameters:T,uniforms:{layerIndex:v},parameters:N})}catch($){f.raiseError($,"drawing ".concat(f," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var s;const o=Object.assign(Object.create((null===(s=e.internalState)||void 0===s?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:gg(this.gl)});if(n)for(const c of n){var a;Object.assign(o,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(o,this.getModuleParameters(e,n),r)}}function zV(t=0,e={}){const n={},i=(r,s)=>{const o=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in n){const d=n[c]=n[c]||zV(e[c],e);l=d(r,s),n[a]=d}else Number.isFinite(o)?(l=o+(e[c]||0),n[a]=null):l=t;return s&&l>=t&&(t=l+1),e[a]=l,l};return i}class Jfe extends D1{constructor(e,n){super(e,n),xe(this,"shadowMap",void 0),xe(this,"depthBuffer",void 0),xe(this,"fbo",void 0),this.shadowMap=new _o(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new yg(e,{format:33189,width:1,height:1}),this.fbo=new cs(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;rc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=gg(this.gl),s=i.width*r,o=i.height*r;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const GV="#define SMOOTH_EDGE_RADIUS 0.5",tpe={name:"geometry",vs:"\n".concat(GV,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(GV,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},npe=Object.keys(Ei).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Ei[t],";")).join(""),ipe=Object.keys(kl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(kl[t],";")).join(""),rpe=Object.keys(HE).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(HE[t],";")).join(""),spe="".concat(npe,"\n").concat(ipe,"\n").concat(rpe,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n'),ope={},_2={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},tpe],vs:spe,getUniforms:function ape(t=ope){return"viewport"in t?function aue({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=Ei.DEFAULT,coordinateOrigin:r=L8,autoWrapLongitude:s=!1}){i===Ei.DEFAULT&&(i=t.isGeospatial?Ei.LNGLAT:Ei.CARTESIAN);const o=sue({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||P8,o}(t):{}}},dpe=h1(function mpe({viewport:t,center:e}){return new zn(t.viewProjectionMatrix).invert().transform(e)}),upe=h1(function gpe({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,s=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>function ppe(t,e){const[n,i,r]=t,s=o0([n,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new nn(t.center).negate()),c=s.map(d=>a.transform(d)),l=(new zn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});n.push(l.multiplyRight(o))}return n}),hpe=[0,0,0,1],fpe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],b2={name:"shadow",dependencies:[_2],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function _pe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||hpe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=dpe({viewport:t.viewport,center:e.project_uCenter}),s=[],o=upe({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const c=o[a],l=c.clone().translate(new nn(t.viewport.center).negate());e.project_uCoordinateSystem===Ei.LNGLAT&&e.project_uProjectionMode===kl.WEB_MERCATOR?(o[a]=l,s[a]=r):(o[a]=c.clone().multiplyRight(fpe),s[a]=l.transform(r))}for(let a=0;a<o.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],i["shadow_uProjectCenters[".concat(a,"]")]=s[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},bpe={color:[255,255,255],intensity:1},WV=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],ype=[0,0,0,200/255];class y2{constructor(e={}){xe(this,"id","lighting-effect"),xe(this,"props",null),xe(this,"shadowColor",ype),xe(this,"shadow",void 0),xe(this,"ambientLight",null),xe(this,"directionalLights",[]),xe(this,"pointLights",[]),xe(this,"shadowPasses",[]),xe(this,"shadowMaps",[]),xe(this,"dummyShadowMap",null),xe(this,"programManager",void 0),xe(this,"shadowMatrices",void 0);for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=t0.getDefaultProgramManager(e),b2&&this.programManager.addDefaultModule(b2)),this.dummyShadowMap||(this.dummyShadowMap=new _o(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(b2),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new zn).lookAt({eye:new nn(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new Jfe(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new VV(bpe),this.directionalLights.push(new HV(WV[0]),new HV(WV[1])))}}let vpe=1,xpe=1;class $V{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=vpe++,a={time:0,delay:n,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=xpe++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class wpe{constructor(e,n,i){xe(this,"id",void 0),xe(this,"context",void 0),xe(this,"isLoaded",void 0),xe(this,"persistent",void 0),xe(this,"_loadCount",0),xe(this,"_subscribers",new Set),xe(this,"_data",void 0),xe(this,"_loader",void 0),xe(this,"_error",void 0),xe(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=d0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Epe{constructor({gl:e,protocol:n}){xe(this,"protocol",void 0),xe(this,"_context",void 0),xe(this,"_resources",void 0),xe(this,"_consumers",void 0),xe(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(n,i):(s=new wpe(e,n,this._context),this._resources[e]=s),s.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(o[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const Ape=[_2],Spe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Cpe(t){const e=t0.getDefaultProgramManager(t);for(const n of Ape)e.addDefaultModule(n);for(const n of Spe)e.addShaderHook(n);return e}class Ipe{constructor(e,{deck:n,stats:i,viewport:r,timeline:s}={}){xe(this,"layers",void 0),xe(this,"context",void 0),xe(this,"resourceManager",void 0),xe(this,"_lastRenderedLayers",[]),xe(this,"_needsRedraw",!1),xe(this,"_needsUpdate",!1),xe(this,"_nextLayers",null),xe(this,"_debug",!1),xe(this,"activateViewport",o=>{bo("layerManager.activateViewport",this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new Epe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&Cpe(e),stats:i||new WE({id:"deck.gl"}),viewport:r||new dh({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new $V,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){bo("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=GD(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const o of e)i[o.id]?_i.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const s=n[r.id];null===s&&_i.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class Dpe{constructor(e){xe(this,"width",void 0),xe(this,"height",void 0),xe(this,"views",void 0),xe(this,"viewState",void 0),xe(this,"controllers",void 0),xe(this,"timeline",void 0),xe(this,"_viewports",void 0),xe(this,"_viewportMap",void 0),xe(this,"_isUpdating",void 0),xe(this,"_needsRedraw",void 0),xe(this,"_needsUpdate",void 0),xe(this,"_eventManager",void 0),xe(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=GD(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Dg(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):_i.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return null===(o=this.getView(e.id))||void 0===o?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const s=e.controller;if(s){const o={...n,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let c=n[s.id];const l=!!s.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[s.id]=this._updateController(s,o,a,c),this._viewports.unshift(a)}for(const r in n){const s=n[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}class Ope extends BV{constructor(e){const{width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:m=60,minPitch:v=0,startPanLngLat:T,startZoomLngLat:N,startRotatePos:$,startBearing:X,startPitch:Q,startZoom:ve,normalize:Pe=!0}=e;Js(Number.isFinite(s)),Js(Number.isFinite(r)),Js(Number.isFinite(o)),super({width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:m,minPitch:v,normalize:Pe,position:d},{startPanLngLat:T,startZoomLngLat:N,startRotatePos:$,startBearing:X,startPitch:Q,startZoom:ve}),xe(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+n,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Rr(c,a,o);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-n.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=Rr(r,i,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Rr(a,o,s);const{normalize:c=!0}=e;return c&&Object.assign(e,function Cue(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:s,zoom:o,bearing:a=0}=t;(r<-180||r>180)&&(r=H8(r+180,360)-180),(a<-180||a>180)&&(a=H8(a+180,360)-180);const c=yR(n/512);if(o<=c)o=c,s=0;else{const l=n/2/Math.pow(2,o),d=Ig([0,l])[1];if(s<d)s=d;else{const h=Ig([0,512-l])[1];s>h&&(s=h)}}return{width:e,height:n,longitude:r,latitude:s,zoom:o,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],c=n[1],{width:l,height:d}=this.getViewportProps(),h=s/l;let f=0;o>0?Math.abs(d-c)>5&&(f=o/(c-d)*1.2):o<0&&c>5&&(f=1-a/c),f=Rr(f,-1,1);const{minPitch:m,maxPitch:v}=this.getViewportProps();let N=i;return f>0?N=i+f*(v-i):f<0&&(N=i-f*(m-i)),{pitch:N,bearing:r+180*h}}}class kpe extends p2{constructor(...e){super(...e),xe(this,"ControllerState",Ope),xe(this,"transition",{transitionDuration:300,transitionInterpolator:new M1({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),xe(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class YV extends h2{get ViewportType(){return uh}get ControllerType(){return kpe}}xe(YV,"displayName","MapView");class Ppe extends D1{constructor(e,n){super(e,n),xe(this,"maskMap",void 0),xe(this,"fbo",void 0);const{mapSize:i=2048}=n;this.maskMap=new _o(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new cs(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const n=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,rc(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class Bpe{constructor(){xe(this,"id","mask-effect"),xe(this,"props",null),xe(this,"useInPicking",!0),xe(this,"dummyMaskMap",void 0),xe(this,"channels",[]),xe(this,"masks",null),xe(this,"maskPass",void 0),xe(this,"maskMap",void 0),xe(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new _o(e,{width:1,height:1}));const a=n.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new Ppe(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],d=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:s,views:o,viewport:l,viewportChanged:d})}_renderChannel(e,{layerFilter:n,onViewportActive:i,views:r,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,d)=>l!==a.layerBounds[d]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||o)&&(this.lastViewport=s,e.bounds=function Lpe({layers:t,viewport:e}){let n=null;for(const s of t){const o=s.getBounds();o&&(n?(n[0]=Math.min(n[0],o[0][0]),n[1]=Math.min(n[1],o[0][1]),n[2]=Math.max(n[2],o[1][0]),n[3]=Math.max(n[3],o[1][1])):n=[o[0][0],o[0][1],o[1][0],o[1][1]])}const i=e.getBounds();if(!n)return i;const r=function Fpe(t){const e_x=t[2]-t[0],e_y=t[3]-t[1],n_x=t[0]+.5*e_x,n_y=t[1]+.5*e_y;return[n_x-e_x,n_y-e_y,n_x+e_x,n_y+e_y]}(i);return n[2]-n[0]<r[2]-r[0]||n[3]-n[1]<r[3]-r[1]||(n[0]=Math.max(n[0],r[0]),n[1]=Math.max(n[1],r[1]),n[2]=Math.min(n[2],r[2]),n[3]=Math.min(n[3],r[3])),n}({layers:e.layers,viewport:s}),c||!Ud(e.bounds,a.bounds))){const{maskPass:l,maskMap:d}=this,h=function Npe({bounds:t,viewport:e,width:n,height:i}){if(t[2]<=t[0]||t[3]<=t[1])return null;if(n-=2,i-=2,e instanceof uh){const{longitude:a,latitude:c,zoom:l}=X8({width:n,height:i,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new uh({longitude:a,latitude:c,zoom:l,x:1,y:1,width:n,height:i})}const s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,n/(t[2]-t[0]),i/(t[3]-t[1]));return new m2({x:1,y:1}).makeViewport({width:n,height:i,viewState:{target:s,zoom:Math.log2(o)}})}({bounds:e.bounds,viewport:s,width:d.width,height:d.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let i=0;for(const r of e){const{id:s}=r.root;let o=n[s];if(!o){if(++i>4){_i.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>a?.id===s),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},n[s]=o}o.layers.push(r),o.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const s=this.channels[r];(!s||!(s.id in n))&&(this.channels[r]=null)}for(const r in n){const s=n[r];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const Upe=new y2;class jpe{constructor(){xe(this,"effects",void 0),xe(this,"_internalEffects",void 0),xe(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Dg(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new Bpe),e.some(n=>n instanceof y2)||this._internalEffects.push(Upe)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class Vpe extends D1{shouldDrawLayer(e){return"draw"===e.props.operation}}const KV={blendFunc:[1,0,32771,0],blendEquation:32774};class qV extends D1{constructor(...e){super(...e),xe(this,"pickZ",void 0),xe(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:f,pass:m="picking",pickZ:v}){const T=this.gl;this.pickZ=v;const N=v?null:{byLayer:new Map,byAlpha:[]};this._colors=N;const $=rc(T,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...KV,blend:!v},()=>super.render({target:o,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,cullRect:h,effects:f?.filter(Q=>Q.useInPicking),pass:m}));return this._colors=null,{decodePickingColor:N&&zpe.bind(null,N),stats:$}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,KV),r.blend=!0,r.blendColor=function Hpe(t,e,n){const{byLayer:i,byAlpha:r}=t;let s,o=i.get(e);return o?(o.viewports.push(n),s=o.a):(s=i.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},i.set(e,o),r[s]=o):(_i.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,e,i)):r.blend=!1,r}}function zpe(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class Wpe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Vpe(e),this.pickLayersPass=new qV(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||cs.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=n.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,bo("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let i=null;for(const r of e)r.preRender(this.gl,n),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new cs(this.gl),new cs(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=n.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const $pe={pickedColor:null,pickedObjectIndex:-1};function Xpe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:o,y:a,width:c,height:l}=s;let d=r*r,h=-1,f=0;for(let m=0;m<l;m++){const v=m+a-i,T=v*v;if(T>d)f+=4*c;else for(let N=0;N<c;N++){if(t[f+3]-1>=0){const X=N+o-n,Q=X*X+T;Q<=d&&(d=Q,h=f)}f+=4}}if(h>=0){const m=t.slice(h,h+4),v=e(m);if(v){const T=Math.floor(h/4/c),N=h/4-T*c;return{...v,pickedColor:m,pickedX:o+N,pickedY:a+T}}_i.error("Picked non-existent layer. Is picking buffer corrupt?")()}return $pe}function JV({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:s}){let a,o=e[0];if(e.length>1&&(o=function qpe(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),o){const c=[i-o.x,r-o.y];void 0!==s&&(c[2]=s),a=o.unproject(c)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function Kpe(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,c=o?[o]:[];if("hover"===i){const f=n.layerId,m=o?o.props.id:null;if(m!==f||a!==n.index){if(m!==f){const v=r.find(T=>T.props.id===f);v&&c.unshift(v)}n.layerId=m,n.index=a,n.info=null}}const l=JV(t),d=new Map;return d.set(null,l),c.forEach(h=>{let f={...l};h===o&&(f.color=s,f.index=a,f.picked=!0),f=ZV({layer:h,info:f,mode:i});const m=f.layer;h===o&&"hover"===i&&(n.info=f),d.set(m.id,f),"hover"===i&&m.updateAutoHighlight(f)}),d}function ZV({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class Jpe{constructor(e){xe(this,"gl",void 0),xe(this,"pickingFBO",void 0),xe(this,"depthFBO",void 0),xe(this,"pickLayersPass",void 0),xe(this,"layerFilter",void 0),xe(this,"lastPickedInfo",void 0),xe(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new qV(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,c=o?i.find(f=>f.id===o):null,l=a&&r.find(f=>f.id===a)||r[0],d=l&&l.unproject([e-l.x,n-l.y]);return{...s,x:e,y:n,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new cs(i),cs.isSupported(i,{colorBufferFloat:!0}))){const r=new cs(i);r.attach({36064:new _o(i,{format:pi(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>i.isPickable()&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const f=this._getPickable(e),m=gg(this.gl);if(!f)return{result:[],emptyInfo:JV({viewports:i,x:r,y:s,pixelRatio:m})};this._resizeBuffer();const v=MD(this.gl,[r,s],!0),T=[v.x+Math.floor(v.width/2),v.y+Math.floor(v.height/2)],N=Math.round(o*m),{width:$,height:X}=this.pickingFBO,Q=this._getPickingRect({deviceX:T[0],deviceY:T[1],deviceRadius:N,deviceWidth:$,deviceHeight:X}),ve={x:r-o,y:s-o,width:2*o+1,height:2*o+1};let Pe;const $e=[],nt=new Set;for(let tt=0;tt<a;tt++){let ft,pt;ft=Q?Xpe({...this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:d,deviceRect:Q,cullRect:ve,effects:h,pass:"picking:".concat(c)}),deviceX:T[0],deviceY:T[1],deviceRadius:N,deviceRect:Q}):{pickedColor:null,pickedObjectIndex:-1},ft.pickedLayer&&l&&this.depthFBO&&(pt=this._drawAndSample({layers:[ft.pickedLayer],views:n,viewports:i,onViewportActive:d,deviceRect:{x:ft.pickedX,y:ft.pickedY,width:1,height:1},cullRect:ve,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),ft.pickedLayer&&tt+1<a&&(nt.add(ft.pickedLayer),ft.pickedLayer.disablePickingIndex(ft.pickedObjectIndex)),Pe=Kpe({pickInfo:ft,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:s,z:pt,pixelRatio:m});for(const yt of Pe.values())yt.layer&&$e.push(yt);if(!ft.pickedColor)break}for(const tt of nt)tt.restorePickingColors();return{result:$e,emptyInfo:Pe.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const m=gg(this.gl),v=MD(this.gl,[r,s],!0),T=v.x,N=v.y+v.height,$=MD(this.gl,[r+o,s+a],!0),Q=$.y,$e=function Ype({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const s=t.slice(i,i+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):_i.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:d,deviceRect:{x:T,y:Q,width:$.x+$.width-T,height:N-Q},cullRect:{x:r,y:s,width:o,height:a},effects:h,pass:"picking:".concat(c)})),nt=new Map,tt=Number.isFinite(l);for(let ft=0;ft<$e.length&&!(tt&&l&&nt.size>=l);ft++){const pt=$e[ft];let yt={color:pt.pickedColor,layer:null,index:pt.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:m};yt=ZV({layer:pt.pickedLayer,info:yt,mode:c}),nt.has(yt.object)||nt.set(yt.object,yt)}return Array.from(nt.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:s,cullRect:o,effects:a,pass:c,pickZ:l}),{x:f,y:m,width:v,height:T}=s,N=new(l?Float32Array:Uint8Array)(v*T*4);return $E(d,{sourceX:f,sourceY:m,sourceWidth:v,sourceHeight:T,target:N}),{pickedColors:N,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,n-i),c=Math.min(r,e+i+1)-o,l=Math.min(s,n+i+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const Zpe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Qpe{constructor(e){xe(this,"el",null),xe(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Zpe),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function QV(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const tme=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),e5=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:nme}=(e5&&parseFloat(e5[1]),globalThis),v2=typeof Image<"u",x2=typeof ImageBitmap<"u",w2=!!tme||!!nme;function t5(t){const e=function r5(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const sme=/^data:image\/svg\+xml/,ome=/\.svg((\?|#).*)?$/;function E2(t){return t&&(sme.test(t)||ome.test(t))}function s5(t,e){if(E2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function o5(t,e,n){return A2.apply(this,arguments)}function A2(){return A2=jt(function*(t,e,n){const i=function ame(t,e){if(E2(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return s5(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function cme(t,e){return S2.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),A2.apply(this,arguments)}function S2(){return S2=jt(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),S2.apply(this,arguments)}const lme={};let a5=!0;function C2(){return C2=jt(function*(t,e,n){let i;i=E2(n)?yield o5(t,e,n):s5(t,n);const r=e&&e.imagebitmap;return yield function ume(t){return T2.apply(this,arguments)}(i,r)}),C2.apply(this,arguments)}function T2(){return T2=jt(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function hme(t){for(const e in t||lme)return!1;return!0}(e)||!a5)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),a5=!1}return yield createImageBitmap(t)}),T2.apply(this,arguments)}const jl=!1,u0=!0;function c5(t){const e=h0(t);return function yme(t){const e=h0(t);return e.byteLength>=24&&2303741511===e.getUint32(0,jl)?{mimeType:"image/png",width:e.getUint32(16,jl),height:e.getUint32(20,jl)}:null}(e)||function wme(t){const e=h0(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,jl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Eme(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,jl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,jl),width:e.getUint16(s+7,jl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,jl)}return null}(e)||function vme(t){const e=h0(t);return e.byteLength>=10&&1195984440===e.getUint32(0,jl)?{mimeType:"image/gif",width:e.getUint16(6,u0),height:e.getUint16(8,u0)}:null}(e)||function xme(t){const e=h0(t);return e.byteLength>=14&&16973===e.getUint16(0,jl)&&e.getUint32(2,u0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,u0),height:e.getUint32(22,u0)}:null}(e)||function bme(t){const n=function fme(t){return function _me(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function gme(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function pme(t){switch(function mme(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function h0(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function M2(){return M2=jt(function*(t,e){const{mimeType:n}=c5(t)||{},i=globalThis._parseImageNode;return QV(i),yield i(t,n)}),M2.apply(this,arguments)}function I2(){return I2=jt(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function Cme(t){switch(t){case"auto":case"data":return function rme(){if(x2)return"imagebitmap";if(v2)return"image";if(w2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function ime(t){switch(t){case"auto":return x2||v2||w2;case"imagebitmap":return x2;case"image":return v2;case"data":return w2;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function dme(t,e,n){return C2.apply(this,arguments)}(t,e,s);break;case"image":a=yield o5(t,e,s);break;case"data":a=yield function Ame(t,e){return M2.apply(this,arguments)}(t,e);break;default:QV(!1)}return"data"===r&&(a=function n5(t){switch(t5(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),I2.apply(this,arguments)}const l5={id:"image",module:"images",name:"Images",version:"3.4.11",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function Sme(t,e,n){return I2.apply(this,arguments)},tests:[t=>!!c5(new DataView(t))],options:{image:{type:"auto",decode:!0}}},Mme={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function Tme(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},f0="8.8.20",R1=globalThis.deck&&globalThis.deck.VERSION;if(R1&&R1!==f0)throw new Error("deck.gl - multiple versions detected: ".concat(R1," vs ").concat(f0));R1||(_i.log(1,"deck.gl ".concat(f0))(),globalThis.deck={...globalThis.deck,VERSION:f0,version:f0,log:_i,_registerLoggers:function Bae(t){YD=t}},DV([Mme,[l5,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Ime=globalThis.deck;class O1 extends Fd{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=pi(e),r=y6(e,"TIMER_QUERY");let s=i||r;for(const o of n)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:Zt(!1)}return s}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return O1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const d5=nc()&&typeof document<"u";let Ume=0;class jme{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(N=>e6(N)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:m=!0,stats:v=Uf.get("animation-loop-".concat(Ume++))}=e;let{useDevicePixels:T=!0}=e;"useDevicePixelRatio"in e&&(yn.deprecated("useDevicePixelRatio","useDevicePixels")(),T=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=v,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:m,useDevicePixels:T}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Zt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=O1.isSupported(this.gl,["timers"])?new O1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return jt(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return yn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=d5?new Promise((e,n)=>{d5&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function Bme(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function Fme(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?DD(this.props.gl,e):this.onCreateContext(e),!zE(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function doe(t){Nd(t,TD)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function moe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function uoe(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function voe(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(yn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),c=Math.floor(r*o);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&(yn.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*o),t.canvas.height=Math.floor(r*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new cs(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var k1=g(7271);const Vme={mousedown:1,mousemove:2,mouseup:4};(function zme(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function Hme(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,s=>s.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(k1.PointerEventInput),function Gme(t){t.prototype.handler=function(n){let i=Vme[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(k1.MouseInput);const Wme=k1.Manager,Vl=k1;class P1{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const $me=Vl?[[Vl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Vl.Rotate,{enable:!1}],[Vl.Pinch,{enable:!1}],[Vl.Swipe,{enable:!1}],[Vl.Pan,{threshold:0,enable:!1}],[Vl.Press,{enable:!1}],[Vl.Tap,{event:"doubletap",taps:2,enable:!1}],[Vl.Tap,{event:"anytap",enable:!1}],[Vl.Tap,{enable:!1}]]:null,f5={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Xme={doubletap:["tap"]},Yme={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},R2={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Kme={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},p5={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},qme=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Pg=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let O2=!1;try{Pg.addEventListener("test",null,{get passive(){return O2=!0,!0}}),Pg.removeEventListener("test",null)}catch{O2=!1}const Jme=-1!==qme.indexOf("firefox"),{WHEEL_EVENTS:Zme}=R2,g5=4.000244140625;class tge extends P1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;Pg.WheelEvent&&(Jme&&r.deltaMode===Pg.WheelEvent.DOM_DELTA_PIXEL&&(s/=Pg.devicePixelRatio),r.deltaMode===Pg.WheelEvent.DOM_DELTA_LINE&&(s*=40)),0!==s&&s%g5==0&&(s=Math.floor(s/g5)),r.shiftKey&&s&&(s*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(Zme),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!O2&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:nge}=R2,_5="pointermove",b5="pointerover",y5="pointerout",v5="pointerenter",x5="pointerleave";class ige extends P1{constructor(e,n,i){super(e,n,i),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(nge),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===_5&&(this.enableMoveEvent=n),e===b5&&(this.enableOverEvent=n),e===y5&&(this.enableOutEvent=n),e===v5&&(this.enableEnterEvent=n),e===x5&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(b5,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(y5,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(v5,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(x5,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(_5,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:rge}=R2,w5="keydown";class sge extends P1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const s=r.target||r.srcElement;"INPUT"===s.tagName&&"text"===s.type||"TEXTAREA"===s.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:w5,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(rge),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===w5&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const A5="contextmenu";class oge extends P1{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:A5,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===A5&&(this.options.enable=n)}}const age={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function _ge(t){const e=age[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(s=1===r,o=2===r,a=3===r):2===e?(s=!!(1&n),o=!!(4&n),a=!!(2&n)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}function bge(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const L2={srcElement:"root",priority:0};class yge{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let c=L2;"string"==typeof i||i&&i.addEventListener?c={...L2,srcElement:i}:i&&(c={...L2,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),s&&(d.passive=!0),o.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===n){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,..._ge(e),...bge(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const vge={events:null,recognizers:null,recognizerOptions:{},Manager:Wme,touchAction:"none",tabIndex:0};class xge{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:s}=r,o=Yme[s.type];o&&this.manager.emit(o,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...vge,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||$me}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(f5).forEach(r=>{const s=this.manager.get(r);s&&f5[r].forEach(o=>{s.recognizeWith(o)})});for(const r in n.recognizerOptions){const s=this.manager.get(r);if(s){const o=n.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new tge(e,this._onOtherEvent,{enable:!1}),this.moveInput=new ige(e,this._onOtherEvent,{enable:!1}),this.keyInput=new sge(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new oge(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const s=Xme[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);n?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,s){if("string"!=typeof e){i=n;for(const d in e)this._addEventHandler(d,e[d],i,r,s);return}const{manager:o,events:a}=this,c=p5[e]||e;let l=a.get(c);l||(l=new yge(this),a.set(c,l),l.recognizerName=Kme[c]||c,o&&o.on(c,l.handleEvent)),l.add(e,n,i,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(p5[e]||e);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const c of i.values())if(c.recognizerName===o&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Xf(){}const S5={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Xf,onResize:Xf,onViewStateChange:Xf,onInteractionStateChange:Xf,onBeforeRender:Xf,onAfterRender:Xf,onLoad:Xf,onError:t=>_i.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class N2{constructor(e){xe(this,"props",void 0),xe(this,"width",0),xe(this,"height",0),xe(this,"userData",{}),xe(this,"canvas",null),xe(this,"viewManager",null),xe(this,"layerManager",null),xe(this,"effectManager",null),xe(this,"deckRenderer",null),xe(this,"deckPicker",null),xe(this,"eventManager",null),xe(this,"tooltip",null),xe(this,"metrics",void 0),xe(this,"animationLoop",void 0),xe(this,"stats",void 0),xe(this,"viewState",void 0),xe(this,"cursorState",void 0),xe(this,"_needsRedraw",void 0),xe(this,"_pickRequest",void 0),xe(this,"_lastPointerDownInfo",null),xe(this,"_metricsCounter",void 0),xe(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),xe(this,"_onEvent",n=>{const i=Bj[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=o,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,o,n)),!d&&l&&l(o,n)}),xe(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...S5,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&_i.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===lR()&&_i.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new WE({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&$y.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,s,o,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&_i.removed("onLayerHover","onHover")(),"onLayerClick"in e&&_i.removed("onLayerClick","onClick")(),e.initialViewState&&!Dg(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||i||r||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return Js(this.viewManager),this.viewManager.views}getViewports(e){return Js(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,i){Js(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),Js(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(i||0===i){var r;const s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;n===this.width&&i===this.height||(this.width=n,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:n,height:i}),this.props.onResize({width:n,height:i}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new jme({width:n,height:i,useDevicePixels:d,autoResizeViewport:!1,gl:r,onCreateContext:h=>e6({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new YV({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let s=r,o=!1;for(const a of i){var n;s=a,o=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,DD(e,{enable:!0,copyState:!0})),this.tooltip=new Qpe(this.canvas),Nd(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new $V;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new xge(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in Bj)this.eventManager.on(r,this._onEvent);this.viewManager=new Dpe({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Ipe(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new jpe,this.deckRenderer=new Wpe(e),this.deckPicker=new Jpe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;Nd(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),_i.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=Uf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}xe(N2,"defaultProps",S5),xe(N2,"VERSION",Ime.VERSION);const N1={name:"project32",dependencies:[_2],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},wge={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},F1={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function Ege(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wge;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},C5={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class gh{static get DRAW_MODE(){return C5}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ca("geometry"),drawMode:i=C5.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Zt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Zt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:c}=s;!c&&o&&a>=1&&(i=Math.min(i,o.length/a))}return Zt(Number.isFinite(i)),i}}const T5=()=>{},M5={10241:9987,10240:9729,10242:33071,10243:33071};function Mge(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Ige(t,e,n,i){return n===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,i),t.canvas)}function p0(t){return t&&(t.id||t.url)}function I5(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];t[p0(r)]={...r,x:s,y:n}}}class kge{constructor(e,{onUpdate:n=T5,onError:i=T5}){xe(this,"gl",void 0),xe(this,"onUpdate",void 0),xe(this,"onError",void 0),xe(this,"_loadOptions",null),xe(this,"_texture",null),xe(this,"_externalTexture",null),xe(this,"_mapping",{}),xe(this,"_textureParameters",null),xe(this,"_pendingCount",0),xe(this,"_autoPacking",!1),xe(this,"_xOffset",0),xe(this,"_yOffset",0),xe(this,"_rowHeight",0),xe(this,"_buffer",4),xe(this,"_canvasWidth",1024),xe(this,"_canvasHeight",0),xe(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?p0(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:s}){var o;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),s&&(this._textureParameters=s)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function Oge(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:s}=ZE(t);for(const o of r){s.index++;const a=e(o,s),c=p0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||a.url!==n[c].url)&&(i[c]={...a,source:o,sourceIndex:s.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:c}=function Rge({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[p0(l)]){const{height:h,width:f}=l;i+f+e>o&&(I5(n,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,s=Math.max(s,h)}}return a.length>0&&I5(n,a,r),{mapping:n,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Mge(s+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=s,this._yOffset=o,this._canvasHeight=c,this._texture||(this._texture=new _o(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||M5})),this._texture.height!==this._canvasHeight&&(this._texture=function Dge(t,e,n,i){const r=t.width,s=t.height,o=new _o(t.gl,{width:e,height:n,parameters:i});return function zoe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=n;const{framebuffer:f,deleteFramebuffer:m}=Wy(t);Zt(f);const{gl:v,handle:T}=f,N=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const $=v.bindFramebuffer(36160,T);Zt(e);let X=null;if(e instanceof jf&&(X=e,d=Number.isFinite(d)?d:X.width,h=Number.isFinite(h)?h:X.height,X.bind(0),e=X.target),N)switch(e){case 3553:case 34067:v.copyTexSubImage2D(e,s,a,c,i,r,d,h);break;case 35866:case 32879:go(v).copyTexSubImage3D(e,s,a,c,l,i,r,d,h)}else v.copyTexImage2D(e,s,o,i,r,d,h,0);X&&X.unbind(),v.bindFramebuffer(36160,$||null),m&&f.delete()}(t,o,{targetY:0,width:r,height:s}),t.delete(),o}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||M5)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,d0(i.url,l5,this._loadOptions).then(r=>{const s=p0(i),{x:o,y:a,width:c,height:l}=this._mapping[s],d=Ige(n,r,c,l);this._texture.setSubImageData({data:d,x:o,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const D5=[0,0,0,255],Pge={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:D5},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class F2 extends Wf{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[N1,F1]})}initializeState(){this.state={iconManager:new kge(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:D5},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:c,getIcon:l,textureParameters:d}=n,{iconManager:h}=this.state,f=o||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!f,iconAtlas:o,iconMapping:f?a:null,textureParameters:d}),f?i.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:v}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(v),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:HE[s],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new d1(e,{...this.getShaders(),id:this.props.id,geometry:new gh({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):_i.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[n,i,r,s]}}xe(F2,"defaultProps",Pge),xe(F2,"layerName","IconLayer");const O5=[];class B2 extends F2{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&_i.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!n,outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):O5}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):O5}}xe(B2,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),xe(B2,"layerName","MultiIconLayer");var Fge=g(822),Bge=g.n(Fge);const Uge=32,jge=[];function Vge(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function k5(t,e,n,i){let r=0;for(let o=e;o<n;o++){var s;r+=(null===(s=i[t[o]])||void 0===s?void 0:s.width)||0}return r}function P5(t,e,n,i,r,s){let o=e,a=0;for(let c=e;c<n;c++){const l=k5(t,c,c+1,r);a+l>i&&(o<c&&s.push(c),o=c,a=0),a+=l}return a}function Gge(t,e,n,i,r=0,s){void 0===s&&(s=t.length);const o=[];return"break-all"===e?P5(t,r,s,n,i,o):function zge(t,e,n,i,r,s){let o=e,a=e,c=e,l=0;for(let d=e;d<n;d++)if((" "===t[d]||" "===t[d+1]||d+1===n)&&(c=d+1),c>a){let h=k5(t,a,c,r);l+h>i&&(o<a&&(s.push(a),o=a,l=0),h>i&&(h=P5(t,a,c,i,r,s),o=s[s.length-1])),a=c,l+=h}}(t,r,s,n,i,o),o}function Wge(t,e,n,i,r,s){let o=0,a=0;for(let c=e;c<n;c++){const l=t[c],d=i[l];d?(a||(a=d.height),r[c]=o+d.width/2,o+=d.width):(_i.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=o,o+=Uge)}s[0]=o,s[1]=a}function L5(t,e,n,i,r){const s=Array.from(t),o=s.length,a=new Array(o),c=new Array(o),l=new Array(o),d=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let m=0,v=0,T=0;for(let N=0;N<=o;N++){const $=s[N];if(("\n"===$||N===o)&&(T=N),T>v){const X=d?Gge(s,n,i,r,v,T):jge;for(let Q=0;Q<=X.length;Q++){const ve=0===Q?v:X[Q-1],Pe=Q<X.length?X[Q]:T;Wge(s,ve,Pe,r,a,f);for(let $e=ve;$e<Pe;$e++)c[$e]=m+f[1]/2,l[$e]=f[0];m+=f[1]*e,h[0]=Math.max(h[0],f[0])}v=T}"\n"===$&&(a[v]=0,c[v]=0,l[v]=0,v++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}class N5{constructor(e=5){xe(this,"limit",void 0),xe(this,"_cache",{}),xe(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const m0={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Xge(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let B1=new N5(3);function qge(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function j5(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class Zge{constructor(){xe(this,"props",{...m0}),xe(this,"_key",void 0),xe(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const n=this._key;this._key=this._getKey();const i=function Kge(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=B1.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),r=B1.get(this._key);if(r&&0===i.size)return void(this._key!==n&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,B1.set(this._key,s)}_generateFontAtlas(e,n,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:c,radius:l,cutoff:d}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");j5(f,r,o,s);const{mapping:m,canvasHeight:v,xOffset:T,yOffset:N}=function Hge({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let c=0,l=o;for(const h of t)if(!s[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),s[h]={x:l+i,y:a+c*(n+2*i)+i,width:f,height:n},l+=f+2*i}const d=n+2*i;return{mapping:s,xOffset:l,yOffset:a+c*d,canvasHeight:Vge(a+(c+1)*d)}}({getFontWidth:$=>f.measureText($).width,fontHeight:1.2*o,buffer:a,characterSet:n,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==v){const $=f.getImageData(0,0,h.width,h.height);h.height=v,f.putImageData($,0,0)}if(j5(f,r,o,s),c){const $=new(Bge())(o,a,l,d,r,s),X=f.getImageData(0,0,$.size,$.size);for(const Q of n)qge($.draw(Q),X),f.putImageData(X,m[Q].x-a,m[Q].y+a)}else for(const $ of n)f.fillText($,m[$].x,m[$].y+.9*o);return{xOffset:T,yOffset:N,mapping:m,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const t_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class U2 extends Wf{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[N1,F1]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:HE[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){return new d1(e,{...this.getShaders(),id:this.props.id,geometry:new gh({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}xe(U2,"defaultProps",t_e),xe(U2,"layerName","TextBackgroundLayer");const V5={start:1,middle:0,end:-1},H5={top:1,center:0,bottom:-1},j2=[0,0,0,255],i_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:j2},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:m0.characterSet},fontFamily:m0.fontFamily,fontWeight:m0.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:j2},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:j2},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class V2 extends u2{constructor(...e){super(...e),xe(this,"state",void 0),xe(this,"getBoundingRect",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=s(n,i)||"",{size:[f,m]}=L5(h,c,o,a,r);return[(V5["function"==typeof l?l(n,i):l]-1)*f/2,(H5["function"==typeof d?d(n,i):d]-1)*m/2,f,m]}),xe(this,"getIconOffsets",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=s(n,i)||"",{x:f,y:m,rowWidth:v,size:[T,N]}=L5(h,c,o,a,r),$=V5["function"==typeof l?l(n,i):l],X=H5["function"==typeof d?d(n,i):d],Q=f.length,ve=new Array(2*Q);let Pe=0;for(let $e=0;$e<Q;$e++)ve[Pe++]=($-1)*T/2+(1-$)*(T-v[$e])/2+f[$e],ve[Pe++]=(X-1)*N/2+m[$e];return ve})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Zge}}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:s}=this.props,o=n.startIndices;const c="auto"===i&&new Set;if(r&&o){const{texts:l,characterCount:d}=function $ge({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,c=i?i/o:0,l=r[e]||Math.ceil((t.length-c)/a),d=s&&new Set,h=new Array(e);let f=t;if(a>1||c>0){f=new(0,t.constructor)(l);for(let v=0;v<l;v++)f[v]=t[v*a+c]}for(let m=0;m<e;m++){const N=f.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,N),d&&N.forEach(d.add,d)}if(d)for(const m of d)s.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:o,characterSet:c});a=d,s=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:d}=ZE(n);o=[0],a=0;for(const h of l){d.index++;const f=Array.from(s(h,d)||"");c&&f.forEach(c.add,c),a+=f.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:s,mapping:o},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:v,getBackgroundColor:T,getBorderColor:N,getBorderWidth:$,backgroundPadding:X,background:Q,billboard:ve,fontSettings:Pe,outlineWidth:$e,outlineColor:nt,sizeScale:tt,sizeUnits:ft,sizeMinPixels:pt,sizeMaxPixels:yt,transitions:Ot,updateTriggers:mt}=this.props,vt=this.getSubLayerClass("characters",B2),Bt=this.getSubLayerClass("background",U2);return[Q&&new Bt({getFillColor:T,getLineColor:N,getLineWidth:$,padding:X,getPosition:d,getSize:f,getAngle:m,getPixelOffset:v,billboard:ve,sizeScale:tt/this.state.fontAtlasManager.props.fontSize,sizeUnits:ft,sizeMinPixels:pt,sizeMaxPixels:yt,transitions:Ot&&{getPosition:Ot.getPosition,getAngle:Ot.getAngle,getSize:Ot.getSize,getFillColor:Ot.getBackgroundColor,getLineColor:Ot.getBorderColor,getLineWidth:Ot.getBorderWidth,getPixelOffset:Ot.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:mt.getPosition,getAngle:mt.getAngle,getSize:mt.getSize,getFillColor:mt.getBackgroundColor,getLineColor:mt.getBorderColor,getLineWidth:mt.getBorderWidth,getPixelOffset:mt.getPixelOffset,getBoundingRect:{getText:mt.getText,getTextAnchor:mt.getTextAnchor,getAlignmentBaseline:mt.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new vt({sdf:Pe.sdf,smoothing:Number.isFinite(Pe.smoothing)?Pe.smoothing:m0.smoothing,outlineWidth:$e,outlineColor:nt,iconAtlas:s,iconMapping:o,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:v,billboard:ve,sizeScale:tt*r,sizeUnits:ft,sizeMinPixels:pt*r,sizeMaxPixels:yt*r,transitions:Ot&&{getPosition:Ot.getPosition,getAngle:Ot.getAngle,getColor:Ot.getColor,getSize:Ot.getSize,getPixelOffset:Ot.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:mt.getText,getPosition:mt.getPosition,getAngle:mt.getAngle,getColor:mt.getColor,getSize:mt.getSize,getPixelOffset:mt.getPixelOffset,getIconOffsets:{getText:mt.getText,getTextAnchor:mt.getTextAnchor,getAlignmentBaseline:mt.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function Jge(t){_i.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),B1=new N5(t)}(e)}}xe(V2,"defaultProps",i_e),xe(V2,"layerName","TextLayer");const z5="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",r_e={lightSources:{}};function H2(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const W5={name:"lights",vs:z5,fs:z5,getUniforms:function G5(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r_e;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function s_e(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?H2(e):[0,0,0],n.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=H2(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=H2(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return G5({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},o_e={};const c_e={name:"phong-lighting",dependencies:[W5],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function X5(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o_e;if(!("material"in t))return{};const{material:e}=t;return e?function a_e(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},En=new mg({id:"luma.gl"});function oa(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function z2(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function Oi(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function G2(t){return oa(z2(t),"Invalid WebGLRenderingContext"),t}function aa(t){return oa(Oi(t),"Requires WebGL2"),t}const g0={};const _0=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(_0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Yf=function(e){const n=this;this.gl=e,function m_e(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(g0[i]=!0)}while(0!==i);for(i in g0)if(g0[i])return delete g0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,d){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=n.currentArrayBuffer,f.size=o,f.type=a,f.normalized=c,f.stride=l,f.offset=d,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function f_e(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Yf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Yf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new _0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Yf.prototype.createVertexArrayOES=function(){const e=new _0(this);return this.vertexArrayObjects.push(e),e},Yf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Yf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof _0&&e.hasBeenBound&&e.ext===this)},Yf.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function p_e(t,e){g0[t]=!0,void 0!==e&&function h_e(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const Y5="OES_element_index",K5="WEBGL_draw_buffers",q5="WEBGL_debug_renderer_info",cr=t=>Oi(t)?void 0:0,C_e={3074:t=>Oi(t)?void 0:36064,35723:t=>Oi(t)?void 0:4352,35977:cr,32937:cr,36795:(t,e)=>{const n=Oi(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(q5);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(q5);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:cr,35071:cr,37447:cr,36063:(t,e)=>{if(!Oi(t)){const n=t.getExtension(K5);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:cr,35374:cr,35377:cr,34852:t=>{if(!Oi(t)){const e=t.getExtension(K5);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Y5)?2147483647:65535,33001:t=>t.getExtension(Y5)?16777216:65535,33e3:t=>16777216,37157:cr,35373:cr,35657:cr,36183:cr,37137:cr,34045:cr,35978:cr,35979:cr,35968:cr,35376:cr,35375:cr,35659:cr,37154:cr,35371:cr,35658:cr,35076:cr,35077:cr,35380:cr},J5="ANGLE_instanced_arrays",Z5={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{oa(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[J5]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){oa(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{oa(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{oa(!1)},deleteQuery:()=>{oa(!1)},beginQuery:()=>{oa(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},W2={readBuffer:(t,e,n)=>{Oi(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:s}=function k_e(t,e){return{webgl2:Oi(t),ext:t.getExtension(e)}}(t,J5);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!Oi(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>Oi(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function T_e(t,e,n){const i=C_e[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function B_e(t,e){let{extension:n,target:i,target2:r}=e;const s=Z5[n];oa(s);const{meta:o={}}=s,{suffix:a=""}=o,c=t.getExtension(n);for(const l of Object.keys(s)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof s[l]&&(h=s[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function P_e(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function g_e(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Yf(this)),this.__OESVertexArrayObject))}}(t),function L_e(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function F_e(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&B_e(t,{extension:n,target:t.luma,target2:t})}(t,Z5),function N_e(t,e){let{target:n,target2:i}=e;Object.keys(W2).forEach(r=>{if("function"==typeof W2[r]){const s=t[r]?t[r].bind(t):()=>{},o=W2[r].bind(null,t,s);n[r]=o,i[r]=o}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const Q5={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},_h=(t,e,n)=>e?t.enable(n):t.disable(n),eH=(t,e,n)=>t.hint(n,e),Ra=(t,e,n)=>t.pixelStorei(n,e);function b0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const V_e={3042:_h,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:_h,2885:(t,e)=>t.cullFace(e),2929:_h,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:_h,35723:eH,36006:(t,e)=>{const n=Oi(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:eH,2849:(t,e)=>t.lineWidth(e),32823:_h,32824:"polygonOffset",10752:"polygonOffset",35977:_h,32938:"sampleCoverage",32939:"sampleCoverage",3089:_h,3088:(t,e)=>t.scissor(...e),2960:_h,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Ra,3317:Ra,37440:Ra,37441:Ra,37443:Ra,3330:Ra,3332:Ra,3331:Ra,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:Ra,32878:Ra,3316:Ra,3315:Ra,32877:Ra,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=b0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=b0(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=b0(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=b0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=b0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Vr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const H_e={blendEquation:(t,e,n)=>t.blendEquationSeparate(Vr(32777,e,n),Vr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Vr(32969,e,n),Vr(32968,e,n),Vr(32971,e,n),Vr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Vr(32824,e,n),Vr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Vr(32938,e,n),Vr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Vr(2962,e,n),Vr(2967,e,n),Vr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Vr(34816,e,n),Vr(36003,e,n),Vr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Vr(2964,e,n),Vr(2965,e,n),Vr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Vr(34817,e,n),Vr(34818,e,n),Vr(34819,e,n))},tH={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},Hl=(t,e)=>t.isEnabled(e),nH={3042:Hl,2884:Hl,2929:Hl,3024:Hl,32823:Hl,32926:Hl,32928:Hl,3089:Hl,2960:Hl,35977:Hl};function iH(t){for(const e in t)return!1;return!0}function z_e(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function rH(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function G_e(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class $_e{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function K_e(t,e){if("number"==typeof(e=e||Q5)){const r=e,s=nH[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=nH[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},Q5),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){oa(this.stateStack.length>0),$2(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){oa(void 0!==s);const o=e[s],a=this.cache[s];z_e(o,a)||(n=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:i}}}function sH(t){oa(t.state),t.state.pop()}function $2(t,e){if(oa(z2(t),"setParameters requires a WebGL context"),iH(e))return;const n={};for(const r in e){const s=Number(r),o=V_e[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,H_e[r])(t,e,i)}function Lg(t,e,n){if(iH(e))return n(t);const{nocatch:i=!0}=e;let r;if(function Y_e(t){t.state||function X_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(oa(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new $_e(t,{copyState:i}),function W_e(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const s in tH)G_e(t,s,tH[s]);rH(t,"getParameter"),rH(t,"isEnabled")}t.state.enable=n}(t,{copyState:!1}),t.state.push()}(t),$2(t,e),i)r=n(t),sH(t);else try{r=n(t)}finally{sH(t)}return r}nc();const y0="8.5.21",v0=new class sbe{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new WE({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==y0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(y0));function hn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Y2(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return hn(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function bh(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(nc()&&En.log(1,"luma.gl ".concat(y0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:y0,version:y0,log:En,stats:v0,globals:{modules:{},nodeIO:{}}}),globalThis;const K2={};function yh(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";K2[t]=K2[t]||1;const e=K2[t]++;return"".concat(t,"-").concat(e)}function aH(t){return hn("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function q2(t){let e=!0;for(const n in t){e=!1;break}return e}function cH(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(o=>{s.methodName||(s[o]=()=>{throw En.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const Ng="Resource subclass must define virtual methods";class vh{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};G2(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||yh(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hn(e=Y2(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Oi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},s=Oi(this.gl),o={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?bh(this.gl,c):c;o[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[h]=bh(this.gl,o[h]))}}return o}setParameter(e,n){hn(e=Y2(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=Oi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=Y2(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return cH(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(Ng)}_deleteHandle(){throw new Error(Ng)}_bindHandle(e){throw new Error(Ng)}_getOptsFromHandle(){throw new Error(Ng)}_getParameter(e,n){throw new Error(Ng)}_setParameter(e,n){throw new Error(Ng)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=v0.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];v0.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=v0.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=v0.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const obe="Failed to deduce GL constant from typed array";function J2(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(obe)}}function x0(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function cbe(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:o,width:r,height:s}}function Z2(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";En.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];En.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];En.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const lbe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},dbe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ca{static getBytesPerElement(e){return x0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return hn(e.size),x0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new ca(lbe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ca.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ca.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Z2("Accessor",e,dbe),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const dH={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},ube={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:dH},hbe={removedProps:dH};class vo extends vh{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/ca.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/ca.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Z2("Buffer",e,ube),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=Z2("Buffer",e,hbe))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new ca(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;hn(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(aa(this.gl),this.gl.bufferSubData(this.target,i,n,r,s)):this.gl.bufferSubData(o,i,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return aa(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};aa(this.gl);const s=x0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const d=Math.min(o,c);return r=r||d,hn(r<=d),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(hn(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;hn(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=J2(e);return hn(s),this.setAccessor(new ca(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;hn(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/x0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new ca(this.accessor,{type:J2(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return En.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return En.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return En.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return En.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ca(this.accessor,e),this}}const Q2={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},fbe={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},pbe={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},_be=[9729,9728],uH=globalThis.WebGLBuffer||function(){};class U1 extends vh{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let s=!0;return i&&(s=s&&function mbe(t,e){const n=Q2[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=Oi(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),s=s&&(!r||function gbe(t,e){const n=Q2[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,n){const{id:i=yh("texture"),handle:r,target:s}=n;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(X=>this.initialize(Object.assign({},e,{pixels:X,data:X}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;n||(n=r);let{width:h,height:f,dataFormat:m,type:v,compressed:T=!1,mipmaps:N=!0}=e;const{depth:$=0}=e;return({width:h,height:f,compressed:T,dataFormat:m,type:v}=this._deduceParameters({format:s,type:v,dataFormat:m,compressed:T,data:n,width:h,height:f})),this.width=h,this.height=f,this.depth=$,this.format=s,this.type=v,this.dataFormat=m,this.border=o,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),N&&this._isNPOT()&&(En.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),N=!1,this._updateForNPOT(c)),this.mipmaps=N,this.setImageData({data:n,width:h,height:f,depth:$,format:s,type:v,dataFormat:m,border:o,mipmaps:N,parameters:l,compressed:T}),N&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(En.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Lg(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:f=this.height,dataFormat:m=this.dataFormat,compressed:v=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:v,width:h,height:f}=this._deduceParameters({format:s,type:d,dataFormat:m,compressed:v,data:l,width:h,height:f}));const{gl:T}=this;T.bindTexture(this.target,this.handle);let N=null;({data:l,dataType:N}=this._getDataType({data:l,compressed:v}));let $,X=0;return Lg(this.gl,c,()=>{switch(N){case"null":T.texImage2D(n,r,s,h,f,o,m,d,l);break;case"typed-array":T.texImage2D(n,r,s,h,f,o,m,d,l,a);break;case"buffer":$=aa(T),$.bindBuffer(35052,l.handle||l),$.texImage2D(n,r,s,h,f,o,m,d,a),$.bindBuffer(35052,null);break;case"browser-object":Oi(T)?T.texImage2D(n,r,s,h,f,o,m,d,l):T.texImage2D(n,r,s,m,d,l);break;case"compressed":for(const[Q,ve]of l.entries())T.compressedTexImage2D(n,Q,ve.format,ve.width,ve.height,o,ve.data),X+=ve.levelSize;break;default:hn(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===N?X:l&&l.byteLength?l.byteLength:this.width*this.height*(fbe[this.dataFormat]||4)*(pbe[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:m=!1,offset:v=0,border:T=this.border,parameters:N={}}=e;if(({type:h,dataFormat:f,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:f,compressed:m,data:r,width:a,height:c})),hn(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const $=r;r=$.data,a=$.shape[0],c=$.shape[1]}r instanceof vo&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Lg(this.gl,N,()=>{if(m)this.gl.compressedTexSubImage2D(n,l,s,o,a,c,d,r);else if(null===r)this.gl.texSubImage2D(n,l,s,o,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,s,o,a,c,f,h,r,v);else if(r instanceof uH){const $=aa(this.gl);$.bindBuffer(35052,r),$.texSubImage2D(n,l,s,o,a,c,f,h,v),$.bindBuffer(35052,null)}else Oi(this.gl)?aa(this.gl).texSubImage2D(n,l,s,o,a,c,f,h,r):this.gl.texSubImage2D(n,l,s,o,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return En.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof vo?{data:n.handle,dataType:"buffer"}:n instanceof uH?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=Q2[n];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},hn(r,"Could not deduced texture size"),hn(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),hn(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:hn(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(Oi(this.gl)||!this.width||!this.height||aH(this.width)&&aH(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===_be.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function bbe(t,e){return hn("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class tO extends U1{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return U1.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};G2(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:bbe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Kf="EXT_color_buffer_float",hH={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Kf,bpp:2},33327:{gl2:Kf,bpp:4},34842:{gl2:Kf,bpp:8},33326:{gl2:Kf,bpp:4},33328:{gl2:Kf,bpp:8},34836:{gl2:Kf,bpp:16},35898:{gl2:Kf,bpp:4}};class w0 extends vh{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function ybe(t,e,n){const i=n[e];if(!i)return!1;const r=Oi(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,hH)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:s=0}=e;return hn(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Oi(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*hH[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const fH=6144,_H="clear: bad arguments";function bH(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=16384,!0!==n&&(s.clearColor=n)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),hn(0!==o,_H),Lg(t,s,()=>{t.clear(o)})}function Sbe(t,e){const{gl:n,width:i,height:r,id:s}=t;return new Wd(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:t}}))}function Cbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=function E0(t){return t instanceof Wd?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Sbe(t),deleteFramebuffer:!0}}(t);hn(d);const{gl:f,handle:m,attachments:v}=d;a=a||d.width,c=c||d.height,36064===s&&null===m&&(s=1028),hn(v[s]),l=l||v[s].type,o=function Tbe(t,e,n,i,r){if(t)return t;const s=x0(e=e||5121,{clamped:!1}),o=function Abe(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return hn(!1),0}}(n);return new s(i*r*o)}(o,l,r,a,c),l=l||J2(o);const T=f.bindFramebuffer(36160,m);return f.readPixels(n,i,a,c,r,l,o),f.bindFramebuffer(36160,T||null),h&&d.delete(),o}function nO(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Cbe(t,{sourceAttachment:e}),{width:r,height:s}=t;for(;s>n;)({data:i,width:r,height:s}=cbe({data:i,width:r,height:s}));!function abe(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:s}=t;const o=n*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}const yH="Multiple render targets not supported";class Wd extends vh{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Wd(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=aa(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=aa(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(hn(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:n,height:i})}else r=this._createDefaultAttachments(s,o,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return hn(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&En.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){hn(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof w0)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,f=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function Ibe(t){return(Wd.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&bH(this.gl,{color:n,depth:i,stencil:r}),s.forEach((a,c)=>{!function Ebe(t){let{framebuffer:e=null,buffer:n=fH,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};aa(t),Lg(t,{framebuffer:e},()=>{switch(n){case fH:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;t.clearBufferfi(34041,0,s,o);break;default:hn(!1,_H)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return En.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return En.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return En.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return En.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return En.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return En.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:s,height:o}=e;const a=aa(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=bh(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[n?bh(this.gl,s):s]=this.getAttachmentParameter(e,s,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const s=Number(r);i[e?bh(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(nO(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>En.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=nO(this,{targetMaxHeight:100});return En.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new tO(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&i?(o=o||{},o[33306]=new w0(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new w0(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&hn(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof w0?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:aa(o).framebufferTextureLayer(36160,n,i.target,s,r);break;case 34067:const c=function Mbe(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,n,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,i.handle,s);break;default:hn(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function u_e(t){return Oi(t)?t:null}(this.gl);n?n.readBuffer(e):hn(36064===e||1029===e,yH),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=aa(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):hn(1===e.length&&(36064===e[0]||1029===e[0]),yH)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function Pbe(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in vH)void 0===t.luma.caps[e]&&(t.luma.caps[e]=wH(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}Wd.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const vH={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Rbe(t){const e=new tO(t,{format:6408,type:5126,dataFormat:6408}),n=new Wd(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Obe=2;function xH(t,e){return function kbe(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>wH(t,n))}(t,e)}function wH(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function Lbe(t,e){const n=vH[e];let i;hn(n,e);const r=Oi(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!t.getExtension(s)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:hn(!1);return i}(t,e)),t.luma.caps[e]||En.log(Obe,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const iO=Math.PI/180,j1=new Float32Array(16),EH=new Float32Array(12);function AH(t,e,n){const i=e[0]*iO,r=e[1]*iO,s=e[2]*iO,o=Math.sin(s),a=Math.sin(i),c=Math.sin(r),l=Math.cos(s),d=Math.cos(i),h=Math.cos(r),f=n[0],m=n[1],v=n[2];t[0]=f*h*d,t[1]=f*c*d,t[2]=f*-a,t[3]=m*(-c*l+h*a*o),t[4]=m*(h*l+c*a*o),t[5]=m*d*o,t[6]=v*(c*o+h*a*l),t[7]=v*(-h*o+c*a*l),t[8]=v*d*l}function SH(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const CH={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(s),h=Array.isArray(r),f=Array.isArray(o),m=l||!c&&!!a(i[0]);t.constant=m?l:h&&d&&f;const v=t.value;if(t.constant){let T;m?(j1.set(a),T=SH(j1)):(T=EH,AH(T,r,s),T.set(o,9)),t.value=new Float32Array(T)}else{let T=e*t.size;const{iterable:N,objectInfo:$}=ZE(i,e,n);for(const X of N){let Q;$.index++,m?(j1.set(l?a:a(X,$)),Q=SH(j1)):(Q=EH,AH(Q,h?r:r(X,$),d?s:s(X,$)),Q.set(f?o:o(X,$),9)),v[T++]=Q[0],v[T++]=Q[1],v[T++]=Q[2],v[T++]=Q[3],v[T++]=Q[4],v[T++]=Q[5],v[T++]=Q[6],v[T++]=Q[7],v[T++]=Q[8],v[T++]=Q[9],v[T++]=Q[10],v[T++]=Q[11]}}}};function TH(t,e){return e===Ei.CARTESIAN||e===Ei.METER_OFFSETS||e===Ei.DEFAULT&&!t.isGeospatial}function MH(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),_i.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function Bbe(t,e){if(t.attributes)return MH(t.attributes,e),t instanceof gh?t:new gh(t);if(t.positions||t.POSITION)return MH(t,e),new gh({attributes:t});throw Error("Invalid mesh")}class rO extends Wf{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){const e=!pi(this.context.gl),n={};return xH(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[N1,c_e,F1],transpileToGLSL100:e,defines:n})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:CH}),this.setState({emptyTexture:new _o(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const o=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!o.NORMAL&&!o.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!s||TH(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new d1(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:Bbe(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}xe(rO,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),xe(rO,"layerName","SimpleMeshLayer");const IH="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",jbe={lightSources:{}};function sO(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const RH={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[{name:"lights",vs:IH,fs:IH,getUniforms:function DH(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jbe;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function Vbe(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?sO(e):[0,0,0],n.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=sO(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=sO(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return DH({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}}]};class Fg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||yh(this.constructor.name),this.display=!0,this.position=new nn,this.rotation=new nn,this.scale=new nn(1,1,1),this.matrix=new zn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return hn(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return hn(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return hn(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:s=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){hn(e),n=n||this.matrix;const i=new zn(e).multiplyRight(n),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class A0 extends Fg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;En.assert(n.every(i=>i instanceof Fg),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const s=n.getBounds();if(!s)return;const[o,a]=s,c=new nn(o).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new nn(a).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new nn(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new zn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new zn(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof A0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let V1;class oO extends E6{static get ZERO(){return V1||(V1=new oO(0,0,0,0),Object.freeze(V1)),V1}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),Bd(e)&&1===arguments.length?this.copy(e):(Zr.debug&&(hi(e),hi(n),hi(i),hi(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Zr.debug&&(hi(e.x),hi(e.y),hi(e.z),hi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=hi(e)}get w(){return this[3]}set w(e){this[3]=hi(e)}transform(e){return VD(this,this,e),this.check()}transformByMatrix3(e){return D6(this,this,e),this.check()}transformByMatrix2(e){return function Sae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return M6(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function OH(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=n[0],m=n[1],v=n[2],T=n[3],N=n[4],$=n[5],X=n[6],Q=n[7],ve=n[8];return t[0]=f*i+m*o+v*l,t[1]=f*r+m*a+v*d,t[2]=f*s+m*c+v*h,t[3]=T*i+N*o+$*l,t[4]=T*r+N*a+$*d,t[5]=T*s+N*c+$*h,t[6]=X*i+Q*o+ve*l,t[7]=X*r+Q*a+ve*d,t[8]=X*s+Q*c+ve*h,t}function kH(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function PH(){var t=new sa(4);return sa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function LH(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function NH(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],c=n[1],l=n[2],d=n[3];return t[0]=i*d+o*a+r*l-s*c,t[1]=r*d+o*c+s*a-i*l,t[2]=s*d+o*l+i*c-r*a,t[3]=o*d-i*a-r*c-s*l,t}var BH=O8,cye=function(){var t=A6(),e=S6(1,0,0),n=S6(0,1,0);return function(i,r,s){var o=C6(r,s);return o<-.999999?(KE(t,e,r),function fae(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&KE(t,n,r),function gae(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(t,t),LH(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(KE(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,function Jde(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(i,i))}}();PH(),PH(),function Hbe(){var t=new sa(9);sa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const lye=[0,0,0,1];class S0 extends YE{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function FH(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,t[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return LH(this,e,n),this.check()}identity(){return function Kbe(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=hi(e)}get y(){return this[1]}set y(e){this[1]=hi(e)}get z(){return this[2]}set z(e){this[2]=hi(e)}get w(){return this[3]}set w(e){this[3]=hi(e)}len(){return function Kde(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function qde(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function Zde(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return cye(this,e,n),this.check()}add(e){return function Yde(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function Qbe(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function iye(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function nye(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function Qde(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return NH(this,this,e),this.check()}multiplyLeft(e){return NH(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function qbe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+o*a,t[1]=r*c+s*a,t[2]=s*c-r*a,t[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function Jbe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-s*a,t[1]=r*c+o*a,t[2]=s*c+i*a,t[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function Zbe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=s*c+o*a,t[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return BH(this,this,e),this.check()}slerp(e,n,i){let r,s,o;switch(arguments.length){case 1:({start:r=lye,target:s,ratio:o}=e);break;case 2:r=this,s=e,o=n;break;default:r=e,s=n,o=i}return function H1(t,e,n,i){var f,m,v,T,N,r=e[0],s=e[1],o=e[2],a=e[3],c=n[0],l=n[1],d=n[2],h=n[3];return(m=r*c+s*l+o*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>Ll?(f=Math.acos(m),v=Math.sin(f),T=Math.sin((1-i)*f)/v,N=Math.sin(i*f)/v):(T=1-i,N=i),t[0]=T*r+N*c,t[1]=T*s+N*l,t[2]=T*o+N*d,t[3]=T*a+N*h,t}(this,r,s,o),this.check()}transformVector4(e,n=new oO){return function eue(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2],l=n[3],d=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,m=-o*i-a*r-c*s;t[0]=d*l+m*-o+h*-c-f*-a,t[1]=h*l+m*-a+f*-o-d*-c,t[2]=f*l+m*-c+d*-a-h*-o,t[3]=e[3]}(n,e,this),Xy(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const dye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},uye={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function VH(t){if(!t._animation){const e=uye[t.componentType],n=dye[t.type],i=n*t.count,{buffer:r,byteOffset:s}=t.bufferView.data,o=new e(r,s+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(o);else{const a=[];for(let c=0;c<o.length;c+=n)a.push(Array.from(o.slice(c,c+n)));t._animation=a}}return t._animation}const hye=new zn,aO=new S0;class bye{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:s,target:o,path:a}=r;(function _ye(t,e,n,i){let{input:r,interpolation:s,output:o}=e;const c=t%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:En.warn("Bad animation path ".concat(i))()}hn(n[i].length===o[d].length);const h=r[d],f=r[l];switch(s){case"STEP":!function gye(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,o[d]);break;case"LINEAR":f>h&&function pye(t,e,n,i,r){if("rotation"===e){aO.slerp({start:n,target:i,ratio:r});for(let s=0;s<aO.length;s++)t[e][s]=aO[s]}else for(let s=0;s<n.length;s++)t[e][s]=r*i[s]+(1-r)*n[s]}(n,i,o[d],o[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function mye(t,e,n){let{p0:i,outTangent0:r,inTangent1:s,p1:o,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){const d=r[l]*a,h=s[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(n,i,{p0:o[3*d+1],outTangent0:o[3*d+2],inTangent1:o[3*l+0],p1:o[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:En.warn("Interpolation ".concat(s," not supported"))()}})(i,s,o,a),function fye(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=hye.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(o,o._node)})}}class yye{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),s=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:VH(e.accessors[c]),interpolation:l,output:VH(e.accessors[d])}}),o=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:s[c],target:e.nodes[l.node],path:l.path}});return new bye({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}const C0="vs";function $d(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const lO={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function xye(t){let e=HH(t);return"object"===e?t?"type"in t?Object.assign({},t,lO[t.type]):"value"in t?(e=HH(t.value),Object.assign({type:e},t,lO[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},lO[e])}function HH(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class dO{constructor(e){let{name:n,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:f}=e;$d("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Aye(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(d),o&&(this.uniforms=function vye(t){const e={};for(const n in t){const r=xye(t[n]);e[n]=r}return e}(o))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:$d(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&$d(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=s.value}return n}}function Sye(t){return function zH(t){const e={},n={};return uO({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(GH(t))}function uO(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&uO({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function GH(t,e){return t.map(n=>(n instanceof dO||($d("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),$d(n.name,"shader module has no name"),(n=new dO(n)).dependencies=GH(n.dependencies)),n))}const Tye=7936,Mye=7937,Iye=7938,Dye=35724,hO={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},qf={};function kye(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(hO).forEach(t=>{qf[t]=t});const fO={};function WH(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=hO[e];if($d(i,e),!function Cye(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in fO)return fO[e];const s=n.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),fO[e]=c,c}function z1(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function Pye(t,e){const n=hO[e];$d(n,e);const i=function Rye(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return $d(!1===r||!0===r),r}(t,n))}const Uye={[C0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},G1="__LUMA_INJECT_DECLARATIONS__",$H=/void\s+main\s*\([^)]*\)\s*\{\n?/,XH=/}\n?[^{}]*$/,pO=[];function YH(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===C0;for(const s in n){const o=n[s];o.sort((c,l)=>c.order-l.order),pO.length=o.length;for(let c=0,l=o.length;c<l;++c)pO[c]=o[c].injection;const a="".concat(pO.join("\n"),"\n");switch(s){case"vs:#decl":r&&(t=t.replace(G1,a));break;case"vs:#main-start":r&&(t=t.replace($H,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(XH,c=>a+c));break;case"fs:#decl":r||(t=t.replace(G1,a));break;case"fs:#main-start":r||(t=t.replace($H,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(XH,c=>a+c));break;default:t=t.replace(s,c=>c+a)}}return t=t.replace(G1,""),i&&(t=t.replace(/\}\s*$/,s=>s+Uye[e])),t}function Bg(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const KH=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],jye=[...KH,[Bg("attribute"),"in $1"],[Bg("varying"),"out $1"]],Vye=[...KH,[Bg("varying"),"in $1"]],qH=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Hye=[...qH,[Bg("in"),"attribute $1"],[Bg("out"),"varying $1"]],zye=[...qH,[Bg("in"),"varying $1"]],mO="gl_FragColor",gO=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Gye=/void\s+main\s*\([^)]*\)\s*\{\n?/;function W1(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const Yye="\n\n".concat(G1,"\n\n"),JH={[C0]:"vertex",fs:"fragment"};function ZH(t,e){let{id:n,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;$d("string"==typeof i,"shader source must be a string");const f=r===C0,m=i.split("\n");let v=100,T="",N=i;0===m[0].indexOf("#version ")?(v=300,T=m[0],N=m.slice(1).join("\n")):T="#version ".concat(v);const $={};s.forEach(nt=>{Object.assign($,nt.getDefines())}),Object.assign($,o);let X=d?"".concat(T,"\n").concat(function Qye(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(JH[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function Zye(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(JH[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Lye(t){switch(function Oye(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Tye),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Mye);return{gpuVendor:kye(n,i),vendor:n,renderer:i,version:t.getParameter(Iye),shadingLanguageVersion:t.getParameter(Dye)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function Nye(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return z1(t,qf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),z1(t,qf.GLSL_DERIVATIVES)&&WH(t,qf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),z1(t,qf.GLSL_FRAG_DATA)&&WH(t,qf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),z1(t,qf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function e0e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}($),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(T,"\n");const Q=function n0e(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,s]=n.split(":"),o=n.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),ve={},Pe={},$e={};for(const nt in c){const tt="string"==typeof c[nt]?{injection:c[nt],order:0}:c[nt],ft=nt.match(/^(v|f)s:(#)?([\w-]+)$/);ft?ft[2]?"decl"===ft[3]?Pe[nt]=[tt]:$e[nt]=[tt]:ve[nt]=[tt]:$e[nt]=[tt]}for(const nt of s){h&&nt.checkDeprecations(N,h),X+=nt.getModuleSource(r,v);const ft=nt.injections[r];for(const pt in ft){const yt=pt.match(/^(v|f)s:#([\w-]+)$/);if(yt){const mt="decl"===yt[2]?Pe:$e;mt[pt]=mt[pt]||[],mt[pt].push(ft[pt])}else ve[pt]=ve[pt]||[],ve[pt].push(ft[pt])}}return X+=Yye,X=YH(X,r,Pe),X+=function t0e(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(Q[r],ve),X+=N,X=YH(X,r,$e),X=function Wye(t,e,n){switch(e){case 300:return n?W1(t,jye):function $ye(t){const e=(t=W1(t,Vye)).match(gO);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(mO,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(Gye,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(mO,"\\b"),"g"),n)}return t}(t);case 100:return n?W1(t,Hye):function Xye(t){const e=(t=W1(t,zye)).match(gO);if(e){const n=e[1];t=t.replace(gO,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),mO)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(X,l?100:v,f),X}function Jye(t){return function(n){const i={};for(const r of t){const s=r.getUniforms(n,i);Object.assign(i,s)}return i}}const i0e={5126:pr.bind(null,"uniform1fv",Oa,1,xo),35664:pr.bind(null,"uniform2fv",Oa,2,xo),35665:pr.bind(null,"uniform3fv",Oa,3,xo),35666:pr.bind(null,"uniform4fv",Oa,4,xo),5124:pr.bind(null,"uniform1iv",xh,1,xo),35667:pr.bind(null,"uniform2iv",xh,2,xo),35668:pr.bind(null,"uniform3iv",xh,3,xo),35669:pr.bind(null,"uniform4iv",xh,4,xo),35670:pr.bind(null,"uniform1iv",xh,1,xo),35671:pr.bind(null,"uniform2iv",xh,2,xo),35672:pr.bind(null,"uniform3iv",xh,3,xo),35673:pr.bind(null,"uniform4iv",xh,4,xo),35674:pr.bind(null,"uniformMatrix2fv",Oa,4,Xd),35675:pr.bind(null,"uniformMatrix3fv",Oa,9,Xd),35676:pr.bind(null,"uniformMatrix4fv",Oa,16,Xd),35678:Qs,35680:Qs,5125:pr.bind(null,"uniform1uiv",$1,1,xo),36294:pr.bind(null,"uniform2uiv",$1,2,xo),36295:pr.bind(null,"uniform3uiv",$1,3,xo),36296:pr.bind(null,"uniform4uiv",$1,4,xo),35685:pr.bind(null,"uniformMatrix2x3fv",Oa,6,Xd),35686:pr.bind(null,"uniformMatrix2x4fv",Oa,8,Xd),35687:pr.bind(null,"uniformMatrix3x2fv",Oa,6,Xd),35688:pr.bind(null,"uniformMatrix3x4fv",Oa,12,Xd),35689:pr.bind(null,"uniformMatrix4x2fv",Oa,8,Xd),35690:pr.bind(null,"uniformMatrix4x3fv",Oa,12,Xd),35678:Qs,35680:Qs,35679:Qs,35682:Qs,36289:Qs,36292:Qs,36293:Qs,36298:Qs,36299:Qs,36300:Qs,36303:Qs,36306:Qs,36307:Qs,36308:Qs,36311:Qs},r0e={},s0e={},o0e={},QH=[0];function _O(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(QH[0]=t,t=QH);const r=t.length;if(r%e&&En.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=i[r];s||(s=new n(r),i[r]=s);for(let o=0;o<r;o++)s[o]=t[o];return s}function Oa(t,e){return _O(t,e,Float32Array,r0e)}function xh(t,e){return _O(t,e,Int32Array,s0e)}function $1(t,e){return _O(t,e,Uint32Array,o0e)}function ez(t,e,n){const i=i0e[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function a0e(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function l0e(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function u0e(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof U1||t instanceof w0)||t instanceof Wd&&!!t.texture}function d0e(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,s=n.length;r<s;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function Qs(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function pr(t,e,n,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,n),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),s=d,h=!0;else{hn(s===d,"Uniform length cannot change.");for(let f=0;f<d;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(o,t,a,l),r.set(l)),h}}function xo(t,e,n,i){t[e](n,i)}function Xd(t,e,n,i){t[e](n,!1,i)}function X1(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function nz(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const s=t[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();n+=iz("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function iz(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class T0 extends vh{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return hn(!1),"unknown"}}constructor(e,n){G2(e),hn("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:X1(n.source,null)||n.id||yh("unnamed ".concat(T0.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=X1(n,null);i&&(this.id=yh(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(T0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return X1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function tz(t,e,n,i){const r=t.split(/\r?\n/),s={},o={},a=i||X1(e)||"(unnamed)",c="".concat(function p0e(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const f=h.split(":"),m=f[0],v=parseInt(f[2],10);if(isNaN(v))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==m?s[v]=h:o[v]=h}const l=function m0e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return iz(a,r-a.length)+n+s})}(e);return{shaderName:c,errors:nz(s,l),warnings:nz(o,l)}}(i,this.source,this.shaderType,this.id);throw En.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),En.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class bO extends T0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class yO extends T0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const _0e=5120,b0e=5121,y0e=5122,v0e=5123,xs=5126,M0=5124,I0=5125,vO={[xs]:[xs,1,"float"],35664:[xs,2,"vec2"],35665:[xs,3,"vec3"],35666:[xs,4,"vec4"],[M0]:[M0,1,"int"],35667:[M0,2,"ivec2"],35668:[M0,3,"ivec3"],35669:[M0,4,"ivec4"],[I0]:[I0,1,"uint"],36294:[I0,2,"uvec2"],36295:[I0,3,"uvec3"],36296:[I0,4,"uvec4"],35670:[xs,1,"bool"],35671:[xs,2,"bvec2"],35672:[xs,3,"bvec3"],35673:[xs,4,"bvec4"],35674:[xs,8,"mat2"],35685:[xs,8,"mat2x3"],35686:[xs,8,"mat2x4"],35675:[xs,12,"mat3"],35687:[xs,12,"mat3x2"],35688:[xs,12,"mat3x4"],35676:[xs,16,"mat4"],35689:[xs,16,"mat4x2"],35690:[xs,16,"mat4x3"]};function lz(t){const e=vO[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function dz(t,e){switch(t){case _0e:case b0e:case y0e:case v0e:t=xs}for(const n in vO){const[i,r,s]=vO[n];if(i===t&&r===e)return{glType:n,name:s}}return null}class G0e{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!Oi(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,n,i,r){const{type:s,components:o}=lz(i),a={type:s,size:r*o};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new ca(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:s,components:o}=lz(i),c={location:e,name:n,accessor:new ca({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const W0e=35981,$0e=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class hz extends vh{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",$0e),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:s,bufferMode:o=W0e}=e;return this.hash=n||"",this.vs="string"==typeof i?new bO(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new yO(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,hn(this.vs instanceof bO),hn(this.fs instanceof yO),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(aa(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new G0e(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:f=null,transformFeedback:m,framebuffer:v,parameters:T={},uniforms:N,samplers:$}=e;if((N||$)&&(En.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(N||{})),En.priority>=n){const X=v?v.id:"default",Q="mode=".concat(bh(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(bh(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(X);En.log(n,Q)()}return hn(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(f.bindForDraw(r,d,()=>{if(void 0!==v&&(T=Object.assign({},T,{framebuffer:v})),m){const X=function cz(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return hn(!1),0}}(i);m.begin(X)}this._bindTextures(),Lg(this.gl,T,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,s,d):c&&Oi(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):h?this.gl2.drawArraysInstanced(i,s,r,d):this.gl.drawArrays(i,s,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};En.priority>=2&&function c0e(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!l0e(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let s=i,o=!1;if(s instanceof Wd&&(s=s.texture),s instanceof U1)if(o=this.uniforms[n]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[n]=a}else s=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(s)||o)&&d0e(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new bO({handle:r});break;case 35632:i.fs=new yO({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=yh(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),En.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),En.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||En.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=a0e(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=ez(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=ez(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class xO{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new xO(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(n),h=this._getHash(i),f=l.map(Q=>this._getHash(Q.name)).sort(),m=o.map(Q=>this._getHash(Q)),v=Object.keys(r).sort(),T=Object.keys(s).sort(),N=[],$=[];for(const Q of v)N.push(this._getHash(Q)),N.push(this._getHash(r[Q]));for(const Q of T)$.push(this._getHash(Q)),$.push(this._getHash(s[Q]));const X="".concat(d,"/").concat(h,"D").concat(N.join("/"),"M").concat(f.join("/"),"I").concat($.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[X]){const Q=function qye(t,e){const{vs:n,fs:i}=e,r=Sye(e.modules||[]);return{gl:t,vs:ZH(t,Object.assign({},e,{source:n,type:C0,modules:r})),fs:ZH(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Jye(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[X]=new hz(this.gl,{hash:X,vs:Q.vs,fs:Q.fs,varyings:o,bufferMode:a}),this._getUniforms[X]=Q.getUniforms||(ve=>{}),this._useCounts[X]=0}return this._useCounts[X]++,this._programCache[X]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;n[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}let K1=null;class ka extends vh{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||Oi(e)||"Chrome"===lR()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new ka(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return ka.MAX_ATTRIBUTES=ka.MAX_ATTRIBUTES||e.getParameter(34921),ka.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:ka._setConstantFloatArray(e,n,i);break;case Int32Array:ka._setConstantIntArray(e,n,i);break;case Uint32Array:ka._setConstantUintArray(e,n,i);break;default:hn(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return ka.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return hn(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(hn(Oi(h)),f.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,c,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!ka.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new vo(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function Y0e(t,e){const n=function X0e(t){return(!K1||K1.byteLength<t)&&(K1=new ArrayBuffer(t)),K1}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,s);(function K0e(t){let{target:e,source:n,start:i=0,count:r=1}=t;const s=n.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:hn(!1)}}static _setConstantIntArray(e,n,i){switch(hn(Oi(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:hn(!1)}}static _setConstantUintArray(e,n,i){switch(hn(Oi(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:hn(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return hn(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const Z0e=/^(.+)__LOCATION_([0-9]+)$/,Q0e=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class eve{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new ka(e),cH(this,"VertexArray","v6.0",Q0e),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,s)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new vo(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof vo&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof vo&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,En.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const d=ca.resolve(c.accessor,this.accessors[o]||{},i,r),{size:h,type:f}=d;return hn(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=Z0e.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof vo)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof vo)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof vo))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,n){if(ka.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){ka.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof vo){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return En.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}class tve extends vh{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Oi(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};aa(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,q2(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(n);return i<0?(this.unused[e]=r,En.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof vo?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}function D0(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function nve(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=D0(t[o],e);const s=t.length>n?"...":"]";return"".concat(r).concat(s)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function fz(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,s="NOT PROVIDED",o=1,a=0,c=0;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof vo){const f=e,{data:m,changed:v}=f.getDebugData();let T;return d=v?"*":"",h=m,c=f.byteLength,a=c/m.BYTES_PER_ELEMENT/o,n?T="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(bh(r,s),")"):(l=!0,T="".concat(c," bytes")),{[i]:"".concat(d).concat(D0(h,{size:o,isInteger:l})),"Format ":T}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(D0(h,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function rve(t,e){const{type:n,size:i}=e,r=dz(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function pz(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;hn(n);const o=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(o)&&wO({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(o)&&wO({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||wO({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const f={};if(!r)for(const m in i){const v=i[m];c[m]||(h++,f[m]={Type:"NOT USED: ".concat(v),[e]:D0(v)})}return{table:c,count:d,unusedTable:f,unusedCount:h}}function wO(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:s}=t;const o=i[r],a=function sve(t){return null!=t}(o);return!(s&&a||(e[r]={[n]:a?D0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function mz(t){const{type:e,size:n}=t.accessor,i=dz(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const ave={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function lve(t,e){const{attributeMap:n=ave}=e||{};return n&&n[t]||t}function dve(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}hn(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const gz=()=>{},fve={};class _z{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=yh("model")}=n;hn(z2(e)),this.id=i,this.gl=e,this.id=n.id||yh("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||xO.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},hn(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return hn(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return hn(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function cve(t,e,n){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=lve(s,n);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new vo(t,c),l],dve(s,l)}}if(r){const s=r.value||r;hn(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new vo(t,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(q2(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return bH(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(r),En.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:f=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:v=d.isInstanced}=this.props;v&&!this.isInstanced&&En.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:T,instanceCount:N}=this,{onBeforeRender:$=gz,onAfterRender:X=gz}=this.props;$(),this.program.setUniforms(this.uniforms);const Q=this.program.draw(Object.assign(fve,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:T,instanceCount:N,offset:h?m:0}));return X(),En.priority>=2&&this._logDrawCallEnd(l,c,i),Q}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,{35977:n})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}hn(n instanceof hz,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new eve(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof vo&&n.delete()}}_setAnimationProps(e){this.animated&&hn(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(q2(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new tve(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),En.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:En.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const s=function ive(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=fz(e,e.elements,null,n));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(rve(o.name,c))),i[a]=fz(e,r[s],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=pz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=pz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&En.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&En.log("UNUSED UNIFORMS",Object.keys(a))();const h=function ove(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=mz(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=mz(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);En.table(e,s)(),En.table(e,o)(),En.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),En.groupEnd(2)()}}class pve extends Fg{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof _z?(this.model=e,this._setModelNodeProps(n)):this.model=new _z(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class mve{constructor(e,n){let{attributes:i,material:r,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},xH(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const c=new tO(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(En.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function bz(t,e){return Oi(t)?"#version 300 es\n".concat(e):e}const yve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vve={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class xve{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},vve,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new yye(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new A0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new A0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new zn).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new A0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){En.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function bve(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new mve(t,e);En.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(s).map(d=>d.buffer));const l=new pve(t,Object.assign({id:n,drawMode:i,vertexCount:r,modules:[RH],defines:a.defines,parameters:a.parameters,vs:bz(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:bz(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c},o));return l.setProps({attributes:s}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),En.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new vo(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new ca({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:yve[e.type]})}createSampler(e){return e}needsPOT(){return!1}}const zl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Sve=zl.global||zl.self||zl.window||{},EO="object"!=typeof process||"[object process]"!==String(process)||process.browser,AO="function"==typeof importScripts,yz=(typeof window<"u"&&window,typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version));yz&&parseFloat(yz[1]);var R0=g(3012);const Tve="3.2.10",SO={};function q1(t){return CO.apply(this,arguments)}function CO(){return CO=jt(function*(t,e=null,n={}){return e&&(t=function Mve(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:EO?n.CDN?(function Cve(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Tve,"/dist/libs/").concat(t)):AO?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,n)),SO[t]=SO[t]||function Ive(t){return TO.apply(this,arguments)}(t),yield SO[t]}),CO.apply(this,arguments)}function TO(){return TO=jt(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!EO)try{return R0&&R0.requireFromFile&&(yield R0.requireFromFile(t))}catch{return null}return AO?importScripts(t):function Dve(t,e){if(!EO)return R0.requireFromString&&R0.requireFromString(t,e);if(AO)return eval.call(Sve,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),TO.apply(this,arguments)}const Rve="https://unpkg.com/@loaders.gl/textures@".concat("3.2.10","/dist/libs/basis_encoder.wasm"),Ove="https://unpkg.com/@loaders.gl/textures@".concat("3.2.10","/dist/libs/basis_encoder.js");let MO,RO;function xz(t){return IO.apply(this,arguments)}function IO(){return IO=jt(function*(t){const e=t.modules||{};return e.basis?e.basis:(MO=MO||function kve(t){return DO.apply(this,arguments)}(t),yield MO)}),IO.apply(this,arguments)}function DO(){return DO=jt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield q1("basis_transcoder.js","textures",t),yield q1("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function Pve(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,initializeBasis:o}=r;o(),i({BasisFile:s})})})}(e,n)}),DO.apply(this,arguments)}function wz(t){return OO.apply(this,arguments)}function OO(){return OO=jt(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(RO=RO||function Lve(t){return kO.apply(this,arguments)}(t),yield RO)}),OO.apply(this,arguments)}function kO(){return kO=jt(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield q1(Ove,"textures",t),yield q1(Rve,"textures",t)]),e=e||globalThis.BASIS,yield function Nve(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:s,KTX2File:o,BasisEncoder:c})})})}(e,n)}),kO.apply(this,arguments)}const Fve=["","WEBKIT_","MOZ_"],Ez={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let J1=null;var PO,Z1,LO,Q1,Sz,NO,Cz,Tz;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(PO||(PO={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(Z1||(Z1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(LO||(LO={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(Q1||(Q1={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(Sz||(Sz={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(NO||(NO={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(Cz||(Cz={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(Tz||(Tz={}));const Pa=[171,75,84,88,32,50,48,187,13,10,26,10],zve={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function BO(){return BO=jt(function*(t,e){if("auto"===e.basis.containerFormat){if(function Hve(t){const e=new Uint8Array(t);return!(e.byteLength<Pa.length||e[0]!==Pa[0]||e[1]!==Pa[1]||e[2]!==Pa[2]||e[3]!==Pa[3]||e[4]!==Pa[4]||e[5]!==Pa[5]||e[6]!==Pa[6]||e[7]!==Pa[7]||e[8]!==Pa[8]||e[9]!==Pa[9]||e[10]!==Pa[10]||e[11]!==Pa[11])}(t))return Dz((yield wz(e)).KTX2File,t,e);const{BasisFile:n}=yield xz(e);return UO(n,t,e)}if("encoder"===e.basis.module){const n=yield wz(e);return"ktx2"===e.basis.containerFormat?Dz(n.KTX2File,t,e):UO(n.BasisFile,t,e)}{const{BasisFile:i}=yield xz(e);return UO(i,t,e)}}),BO.apply(this,arguments)}function UO(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),s=[];for(let o=0;o<r;o++){const a=i.getNumLevels(o),c=[];for(let l=0;l<a;l++)c.push(Wve(i,o,l,n));s.push(c)}return s}finally{i.close(),i.delete()}}function Wve(t,e,n,i){const r=t.getImageWidth(e,n),s=t.getImageHeight(e,n),o=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=Rz(i,o),d=t.getImageTranscodedSizeInBytes(e,n,l),h=new Uint8Array(d);if(!t.transcodeImage(h,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:s,data:h,compressed:a,format:c,hasAlpha:o}}function Dz(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),s=[];for(let o=0;o<r;o++){s.push($ve(i,o,n));break}return[s]}finally{i.close(),i.delete()}}function $ve(t,e,n){const{alphaFlag:i,height:r,width:s}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=Rz(n,i),l=t.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!t.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:r,data:d,compressed:o,hasAlpha:i,format:a}}function Rz(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=Oz()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),zve[n]}function Oz(){const t=function Bve(t){if(!J1){t=t||function Uve(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,J1=new Set;for(const e of Fve)for(const n in Ez)t&&t.getExtension("".concat(e).concat(n))&&J1.add(Ez[n])}return J1}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const Xve={name:"Basis",id:"basis",module:"textures",version:"3.2.10",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function Gve(t,e){return BO.apply(this,arguments)}};function Jf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const tA=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),kz=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Kve}=(kz&&parseFloat(kz[1]),globalThis),jO=typeof Image<"u",VO=typeof ImageBitmap<"u",HO=!!tA||!!Kve;function Pz(t){const e=function Nz(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const Zve=/^data:image\/svg\+xml/,Qve=/\.svg((\?|#).*)?$/;function zO(t){return t&&(Zve.test(t)||Qve.test(t))}function Fz(t,e){if(zO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function Bz(t,e,n){return GO.apply(this,arguments)}function GO(){return GO=jt(function*(t,e,n){const i=function exe(t,e){if(zO(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return Fz(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function txe(t,e){return WO.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),GO.apply(this,arguments)}function WO(){return WO=jt(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),WO.apply(this,arguments)}const nxe={};let Uz=!0;function $O(){return $O=jt(function*(t,e,n){let i;i=zO(n)?yield Bz(t,e,n):Fz(t,n);const r=e&&e.imagebitmap;return yield function rxe(t){return XO.apply(this,arguments)}(i,r)}),$O.apply(this,arguments)}function XO(){return XO=jt(function*(t,e=null){if((function sxe(t){for(const e in t||nxe)return!1;return!0}(e)||!Uz)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),Uz=!1}return yield createImageBitmap(t)}),XO.apply(this,arguments)}const Wl=!1,k0=!0;function YO(t){const e=P0(t);return function oxe(t){const e=P0(t);return e.byteLength>=24&&2303741511===e.getUint32(0,Wl)?{mimeType:"image/png",width:e.getUint32(16,Wl),height:e.getUint32(20,Wl)}:null}(e)||function lxe(t){const e=P0(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,Wl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function dxe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Wl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Wl),width:e.getUint16(s+7,Wl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Wl)}return null}(e)||function axe(t){const e=P0(t);return e.byteLength>=10&&1195984440===e.getUint32(0,Wl)?{mimeType:"image/gif",width:e.getUint16(6,k0),height:e.getUint16(8,k0)}:null}(e)||function cxe(t){const e=P0(t);return e.byteLength>=14&&16973===e.getUint16(0,Wl)&&e.getUint32(2,k0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,k0),height:e.getUint32(22,k0)}:null}(e)}function P0(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function KO(){return KO=jt(function*(t,e){const{mimeType:n}=YO(t)||{},i=globalThis._parseImageNode;return Jf(i),yield i(t,n)}),KO.apply(this,arguments)}function qO(){return qO=jt(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function fxe(t){switch(t){case"auto":case"data":return function Jve(){if(VO)return"imagebitmap";if(jO)return"image";if(HO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function qve(t){switch(t){case"auto":return VO||jO||HO;case"imagebitmap":return VO;case"image":return jO;case"data":return HO;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function ixe(t,e,n){return $O.apply(this,arguments)}(t,e,s);break;case"image":a=yield Bz(t,e,s);break;case"data":a=yield function uxe(t,e){return KO.apply(this,arguments)}(t,e);break;default:Jf(!1)}return"data"===r&&(a=function Lz(t){switch(Pz(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),qO.apply(this,arguments)}const pxe={id:"image",module:"images",name:"Images",version:"3.2.10",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function hxe(t,e,n){return qO.apply(this,arguments)},tests:[t=>!!YO(new DataView(t))],options:{image:{type:"auto",decode:!0}}};function jz(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function Vz(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function La(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function Hz(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function L0(t,e){return Jf(t>=0),Jf(e>0),t+(e-1)&~(e-1)}function _xe(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+L0(i.byteLength,4)}const Gz=["SCALAR","VEC2","VEC3","VEC4"],bxe=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],yxe=new Map(bxe),vxe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xxe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},wxe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Wz(t){return Gz[t-1]||Gz[0]}function $z(t){const e=yxe.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function Xz(t,e){const n=wxe[t.componentType],i=vxe[t.type],s=t.count*i,o=t.count*i*xxe[t.componentType];return La(o>=0&&o<=e.byteLength),{ArrayType:n,length:s,byteLength:o}}const Exe={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class oc{constructor(e){xe(this,"gltf",void 0),xe(this,"sourceBuffers",void 0),xe(this,"byteLength",void 0),this.gltf=e||{json:{...Exe},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return La(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:s,length:o}=Xz(e,n);return new s(r,n.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e,n={}){return La(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return La(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:s}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=YO(e),r=n||i?.mimeType,o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const n=e.byteLength;La(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=L0(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:Wz(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const s={size:n.size,componentType:$z(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=_xe(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const n={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);n[s]=o}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const s of r)i.min.push(s),i.max.push(s);for(let s=n;s<e.length;s+=n)for(let o=0;o<n;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const Sxe="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Cxe="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Txe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Mxe=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),Yz={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Ixe={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function ek(){return ek=jt(function*(t,e,n,i,r,s="NONE"){const o=yield function nA(){return nk.apply(this,arguments)}();!function iA(t,e,n,i,r,s,o){const a=t.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(s.length),h=new Uint8Array(t.exports.memory.buffer);h.set(s,d);const f=e(l,i,r,d,s.length);if(0===f&&o&&o(l,c,r),n.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(o,o.exports[Ixe[r]],t,e,n,i,o.exports[Yz[s||"NONE"]])}),ek.apply(this,arguments)}let tk;function nk(){return nk=jt(function*(){return tk||(tk=function Rxe(){return ik.apply(this,arguments)}()),tk}),nk.apply(this,arguments)}function ik(){return ik=jt(function*(){let t=Sxe;WebAssembly.validate(Txe)&&(t=Cxe,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function Oxe(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?Mxe[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),ik.apply(this,arguments)}const rk="EXT_meshopt_compression",kxe=rk;function Pxe(t,e){return sk.apply(this,arguments)}function sk(){return sk=jt(function*(t,e){var n;const i=new oc(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const s of t.json.bufferViews||[])r.push(Lxe(i,s));yield Promise.all(r),i.removeExtension(rk)}),sk.apply(this,arguments)}function Lxe(t,e){return ok.apply(this,arguments)}function ok(){return ok=jt(function*(t,e){const n=t.getObjectExtension(e,rk);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:s,count:o,mode:a,filter:c="NONE",buffer:l}=n,d=t.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),f=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function Dxe(t,e,n,i,r){return ek.apply(this,arguments)}(f,o,s,h,a,c),f}return null}),ok.apply(this,arguments)}const Nxe=["image/png","image/jpeg","image/gif"],ak={};const zg="EXT_texture_webp",jxe=zg;function Vxe(t,e){const n=new oc(t);if(!function Fxe(t){return void 0===ak[t]&&(ak[t]=function Bxe(t){switch(t){case"image/webp":return function Uxe(){if(!tA)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return tA;default:if(!tA){const{_parseImageNode:e}=globalThis;return!!e&&Nxe.includes(t)}return!0}}(t)),ak[t]}("image/webp")){if(n.getRequiredExtensions().includes(zg))throw new Error("gltf: Required extension ".concat(zg," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,zg);s&&(r.source=s.source),n.removeObjectExtension(r,zg)}n.removeExtension(zg)}const rA="KHR_texture_basisu",Hxe=rA;function zxe(t,e){const n=new oc(t),{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,rA);s&&(r.source=s.source),n.removeObjectExtension(r,rA)}n.removeExtension(rA)}const qz={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.10",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class sA{constructor(e,n,i=!1,r=new Map){xe(this,"name",void 0),xe(this,"type",void 0),xe(this,"nullable",void 0),xe(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new sA(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Wi,Jz,Zz,Qz,eG,tG,nG,iG,rG;!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(Wi||(Wi={}));class Zf{static isNull(e){return e&&e.typeId===Wi.Null}static isInt(e){return e&&e.typeId===Wi.Int}static isFloat(e){return e&&e.typeId===Wi.Float}static isBinary(e){return e&&e.typeId===Wi.Binary}static isUtf8(e){return e&&e.typeId===Wi.Utf8}static isBool(e){return e&&e.typeId===Wi.Bool}static isDecimal(e){return e&&e.typeId===Wi.Decimal}static isDate(e){return e&&e.typeId===Wi.Date}static isTime(e){return e&&e.typeId===Wi.Time}static isTimestamp(e){return e&&e.typeId===Wi.Timestamp}static isInterval(e){return e&&e.typeId===Wi.Interval}static isList(e){return e&&e.typeId===Wi.List}static isStruct(e){return e&&e.typeId===Wi.Struct}static isUnion(e){return e&&e.typeId===Wi.Union}static isFixedSizeBinary(e){return e&&e.typeId===Wi.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Wi.FixedSizeList}static isMap(e){return e&&e.typeId===Wi.Map}static isDictionary(e){return e&&e.typeId===Wi.Dictionary}get typeId(){return Wi.NONE}compareTo(e){return this===e}}Symbol,Symbol,Jz=Symbol.toStringTag;class Gg extends Zf{constructor(e,n){super(),xe(this,"isSigned",void 0),xe(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return Wi.Int}get[Jz](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class Wxe extends Gg{constructor(){super(!0,8)}}class $xe extends Gg{constructor(){super(!0,16)}}class Xxe extends Gg{constructor(){super(!0,32)}}class Yxe extends Gg{constructor(){super(!1,8)}}class Kxe extends Gg{constructor(){super(!1,16)}}class qxe extends Gg{constructor(){super(!1,32)}}Zz=Symbol.toStringTag;class sG extends Zf{constructor(e){super(),xe(this,"precision",void 0),this.precision=e}get typeId(){return Wi.Float}get[Zz](){return"Float"}toString(){return"Float".concat(this.precision)}}class Jxe extends sG{constructor(){super(32)}}class Zxe extends sG{constructor(){super(64)}}Symbol,Symbol,Qz=Symbol.toStringTag,eG=Symbol.toStringTag,tG=Symbol.toStringTag,nG=Symbol.toStringTag,iG=Symbol.toStringTag;class Qxe extends Zf{constructor(e,n){super(),xe(this,"listSize",void 0),xe(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return Wi.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[iG](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}rG=Symbol.toStringTag;class Wg{constructor(e,n){xe(this,"fields",void 0),xe(this,"metadata",void 0),function iwe(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function rwe(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(...e){const n=Object.create(null);for(const r of e)n[r]=!0;const i=this.fields.filter(r=>n[r.name]);return new Wg(i,this.metadata)}selectAt(...e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new Wg(n,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof Wg){const o=e;n=o.fields,i=aG(aG(new Map,this.metadata),o.metadata)}else n=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of n)r[o.name]=o;const s=Object.values(r);return new Wg(s,i)}}function aG(t,e){return new Map([...t||new Map,...e||new Map])}function cG(t,e,n){return function oG(t,e,n){const i=function ewe(t){switch(t.constructor){case Int8Array:return new Wxe;case Uint8Array:return new Yxe;case Int16Array:return new $xe;case Uint16Array:return new Kxe;case Int32Array:return new Xxe;case Uint32Array:return new qxe;case Float32Array:return new Jxe;case Float64Array:return new Zxe;default:throw new Error("array type not supported")}}(e.value),r=n||function nwe(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new sA(t,new Qxe(e.size,new sA("value",i)),!1,r)}(t,e,n?lG(n.metadata):void 0)}function lG(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const dG={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},awe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class lwe{constructor(e){xe(this,"draco",void 0),xe(this,"decoder",void 0),xe(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const f="DRACO decompression failed: ".concat(o.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(s,r,n),c=this._getMeshData(s,a,n),l=function Gxe(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],f=a[l+2];e=d<e?d:e,n=h<n?h:n,i=f<i?f:i,r=d>r?d:r,s=h>s?h:s,o=f>o?f:o}return[[e,n,i],[r,s,o]]}(c.attributes),d=function swe(t,e,n){const i=lG(e.metadata),r=[],s=function owe(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in t){const c=cG(o,t[o],s[o]);r.push(c)}if(n){const o=cG("indices",n);r.push(o)}return new Wg(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,n);a&&(i[s.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(s,n);c&&(i[s.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:c}=this._getAttributeValues(n,s);r[o]={value:a,size:c,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function hwe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=awe[n.data_type],r=n.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,c=function dwe(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,o).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[o,a]of Object.entries(n.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in dG)if(this.draco[o]===r)return dG[o];const s=n.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);n[s]=this._getDracoMetadataField(e,s)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function uwe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}const $l={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},fwe=$l.global||$l.self||$l.window||{},oA="object"!=typeof process||"[object process]"!==String(process)||process.browser,uk="function"==typeof importScripts,uG=(typeof window<"u"&&window,typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version));uG&&parseFloat(uG[1]);var N0=g(9081);const mwe="3.2.10",hk={};function fk(t){return pk.apply(this,arguments)}function pk(){return pk=jt(function*(t,e=null,n={}){return e&&(t=function gwe(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:oA?n.CDN?(function pwe(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(mwe,"/dist/libs/").concat(t)):uk?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,n)),hk[t]=hk[t]||function _we(t){return mk.apply(this,arguments)}(t),yield hk[t]}),pk.apply(this,arguments)}function mk(){return mk=jt(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!oA)try{return N0&&N0.requireFromFile&&(yield N0.requireFromFile(t))}catch{return null}return uk?importScripts(t):function bwe(t,e){if(!oA)return N0.requireFromString&&N0.requireFromString(t,e);if(uk)return eval.call(fwe,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),mk.apply(this,arguments)}const aA="1.4.1",ywe="https://www.gstatic.com/draco/versioned/decoders/".concat(aA,"/draco_decoder.js"),vwe="https://www.gstatic.com/draco/versioned/decoders/".concat(aA,"/draco_wasm_wrapper.js"),xwe="https://www.gstatic.com/draco/versioned/decoders/".concat(aA,"/draco_decoder.wasm");let F0;function gk(){return gk=jt(function*(t){const e=t.modules||{};return F0=e.draco3d?F0||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):F0||function Awe(t){return bk.apply(this,arguments)}(t),yield F0}),gk.apply(this,arguments)}function bk(){return bk=jt(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield fk(ywe,"draco",t):[e,n]=yield Promise.all([yield fk(vwe,"draco",t),yield fk(xwe,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function Swe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),bk.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(aA,"/javascript/draco_encoder.js");const vk={...qz,parse:function Twe(t,e){return xk.apply(this,arguments)}};function xk(){return xk=jt(function*(t,e){const{draco:n}=yield function Ewe(t){return gk.apply(this,arguments)}(e),i=new lwe(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),xk.apply(this,arguments)}function hG(t){const{buffer:e,size:n,count:i}=function Iwe(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function Dwe(t,e,n=!1){return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:Wz(n),componentType:$z(e)}}const Qf="KHR_draco_mesh_compression",Rwe=Qf;function Owe(t,e,n){const i=new oc(t);for(const r of fG(i))i.getObjectExtension(r,Qf)}function kwe(t,e,n){return wk.apply(this,arguments)}function wk(){return wk=jt(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new oc(t),s=[];for(const o of fG(r))r.getObjectExtension(o,Qf)&&s.push(Lwe(r,o,e,n));yield Promise.all(s),r.removeExtension(Qf)}),wk.apply(this,arguments)}function Pwe(t,e={}){const n=new oc(t);for(const i of n.json.meshes||[])Nwe(i),n.addRequiredExtension(Qf)}function Lwe(t,e,n,i){return Ek.apply(this,arguments)}function Ek(){return Ek=jt(function*(t,e,n,i){const r=t.getObjectExtension(e,Qf);if(!r)return;const s=t.getTypedArrayForBufferView(r.bufferView),o=Vz(s.buffer,s.byteOffset),{parse:a}=i,c={...n};delete c["3d-tiles"];const l=yield a(o,vk,c,i),d=function Mwe(t){const e={};for(const n in t)if("indices"!==n){const r=hG(t[n]);e[n]=r}return e}(l.attributes);for(const[h,f]of Object.entries(d))if(h in e.attributes){const v=t.getAccessor(e.attributes[h]);null!=v&&v.min&&null!=v&&v.max&&(f.min=v.min,f.max=v.max)}e.attributes=d,l.indices&&(e.indices=hG(l.indices)),function Fwe(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),Ek.apply(this,arguments)}function Nwe(t,e,n=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:t}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:t}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(o);return{primitives:[{attributes:c,mode:n,extensions:{[Qf]:{bufferView:l,attributes:c}}}]}}function*fG(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}const ep="KHR_lights_punctual",Bwe=ep;function Uwe(t){return Ak.apply(this,arguments)}function Ak(){return Ak=jt(function*(t){const e=new oc(t),{json:n}=e,i=e.getExtension(ep);i&&(e.json.lights=i.lights,e.removeExtension(ep));for(const r of n.nodes||[]){const s=e.getObjectExtension(r,ep);s&&(r.light=s.light),e.removeObjectExtension(r,ep)}}),Ak.apply(this,arguments)}function jwe(t){return Sk.apply(this,arguments)}function Sk(){return Sk=jt(function*(t){const e=new oc(t),{json:n}=e;if(n.lights){const i=e.addExtension(ep);La(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,ep,i);delete e.json.lights}}),Sk.apply(this,arguments)}const U0="KHR_materials_unlit",Vwe=U0;function Hwe(t){return Ck.apply(this,arguments)}function Ck(){return Ck=jt(function*(t){const e=new oc(t),{json:n}=e;e.removeExtension(U0);for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,U0)}),Ck.apply(this,arguments)}function zwe(t){const e=new oc(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,U0,{}),e.addExtension(U0))}const j0="KHR_techniques_webgl",Gwe=j0;function Wwe(t){return Tk.apply(this,arguments)}function Tk(){return Tk=jt(function*(t){const e=new oc(t),{json:n}=e,i=e.getExtension(j0);if(i){const r=function Xwe(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),n.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=n[o.program]}),r}(i,e);for(const s of n.materials||[]){const o=e.getObjectExtension(s,j0);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=Ywe(s.technique,e)),e.removeObjectExtension(s,j0)}e.removeExtension(j0)}}),Tk.apply(this,arguments)}function $we(t,e){return Mk.apply(this,arguments)}function Mk(){return(Mk=jt(function*(t,e){})).apply(this,arguments)}function Ywe(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const pG=[E,b,k,A,P,_,y];function Ik(){return Ik=jt(function*(t,e={},n){const i=pG.filter(s=>mG(s.name,e));for(const s of i){var r;yield null===(r=s.decode)||void 0===r?void 0:r.call(s,t,e,n)}}),Ik.apply(this,arguments)}function mG(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const Dk="KHR_binary_glTF",gG={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Zwe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class Qwe{constructor(){xe(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),xe(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function Jwe(t){const e=new oc(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,Dk);r&&Object.assign(i,r),e.removeObjectExtension(i,Dk)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(Dk)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in gG)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[n].length;e[n].push(s),this.idToIndexMap[n][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const n in gG)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:s}=n;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),s&&(n.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,n){const i=Zwe[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const s of e.materials){var n,i,r;s.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(n=s.values)||void 0===n?void 0:n.tex)||(null===(i=s.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=s.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===o);-1!==a&&(s.pbrMetallicRoughness.baseColorTexture={index:a})}}}const tEe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nEe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},iEe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},rEe={10240:9729,10241:9986,10242:10497,10243:10497};class aEe{constructor(){xe(this,"baseUri",""),xe(this,"json",{}),xe(this,"buffers",[]),xe(this,"images",[])}postProcess(e,n={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return La(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,n),this.json}_resolveTree(e,n={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function sEe(t){return nEe[t]}(e.componentType),e.components=function oEe(t){return tEe[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=Xz(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,s){const o=new Uint8Array(s*r);for(let a=0;a<s;a++){const c=n+a*i;o.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return o.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):rEe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return iEe[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let o=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,o,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const _G=1735152710,Rk=12,cA=8,lEe=1313821514,dEe=5130562,uEe=0,hEe=1,fEe=0,$g=!0;function Ok(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),o=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(o),L0(i,4)}function kk(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),L0(i,4)}function Pk(){return Pk=jt(function*(t,e,n=0,i,r){var s,o,a,c;(function xEe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function mEe(t,e=0,n={}){const i=new DataView(t),{magic:r=_G}=n,s=i.getUint32(e,!1);return s===r||s===_G}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function gxe(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function mxe(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?jz(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?jz(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const o={};n=function gEe(t,e,n=0,i={}){const r=new DataView(e),s=function pEe(t,e=0){return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),o=r.getUint32(n+4,$g),a=r.getUint32(n+8,$g);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),n+=Rk,t.version){case 1:return function _Ee(t,e,n){Jf(t.header.byteLength>Rk+cA);const i=e.getUint32(n+0,$g),r=e.getUint32(n+4,$g);return n+=cA,Jf(r===fEe),Ok(t,e,n,i),(n+=i)+kk(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function bEe(t,e,n,i){return Jf(t.header.byteLength>Rk+cA),function yEe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,$g),s=e.getUint32(n+4,$g);switch(n+=cA,s){case lEe:Ok(t,e,n,r);break;case dEe:kk(t,e,n,r);break;case uEe:i.strict||Ok(t,e,n,r);break;case hEe:i.strict||kk(t,e,n,r)}n+=L0(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(o,e,n,i.glb),La("glTF"===o.type,"Invalid GLB magic string ".concat(o.type)),t._glb=o,t.json=o.json}else La(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:o}=t._glb;t.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,n,i),function eEe(t,e={}){(new Qwe).normalize(t,e)}(t,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize}),function Kwe(t,e={},n){const i=pG.filter(s=>mG(s.name,e));for(const s of i){var r;null===(r=s.preprocess)||void 0===r||r.call(s,t,e,n)}}(t,i,r);const l=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&t.json.buffers&&(yield function wEe(t,e,n){return Lk.apply(this,arguments)}(t,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function EEe(t,e,n){return Nk.apply(this,arguments)}(t,i,r);l.push(h)}const d=function qwe(t){return Ik.apply(this,arguments)}(t,i,r);return l.push(d),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function cEe(t,e){return(new aEe).postProcess(t,e)}(t,i):t}),Pk.apply(this,arguments)}function Lk(){return Lk=jt(function*(t,e,n){const i=t.json.buffers||[];for(let o=0;o<i.length;++o){const a=i[o];if(a.uri){var r,s;const{fetch:c}=n;La(c);const l=Hz(a.uri,e),d=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,l),h=yield null==d||null===(s=d.arrayBuffer)||void 0===s?void 0:s.call(d);t.buffers[o]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[o]&&(t.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),Lk.apply(this,arguments)}function Nk(){return Nk=jt(function*(t,e,n){const i=function AEe(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],s=[];for(const o of i)s.push(SEe(t,r[o],o,e,n));return yield Promise.all(s)}),Nk.apply(this,arguments)}function SEe(t,e,n,i,r){return Fk.apply(this,arguments)}function Fk(){return Fk=jt(function*(t,e,n,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=Hz(e.uri,i);a=yield(yield s(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function zz(t,e,n){const i=t.bufferViews[n];La(i);const s=e[i.buffer];return La(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=Vz(l.buffer,l.byteOffset,l.byteLength)}La(a,"glTF image has no data");let c=yield o(a,[pxe,Xve],{mimeType:e.mimeType,basis:i.basis||{format:Oz()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}),Fk.apply(this,arguments)}const Xg={name:"glTF",id:"gltf",module:"gltf",version:"3.2.10",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function CEe(t){return Bk.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function Bk(){return Bk=jt(function*(t,e={},n){(e={...Xg.options,...e}).gltf={...Xg.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function vEe(t,e){return Pk.apply(this,arguments)}({},t,i,e,n)}),Bk.apply(this,arguments)}function Uk(){return Uk=jt(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function MEe(t){return jk.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),Uk.apply(this,arguments)}function jk(){return jk=jt(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),jk.apply(this,arguments)}const bG=[255,255,255,255],REe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:bG},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Xg]};class Vk extends Wf{constructor(...e){super(...e),xe(this,"state",void 0)}getShaders(){const e=[N1,F1];return"pbr"===this.props._lighting&&e.push(RH),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:bG,transition:!0},instanceModelMatrix:CH})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof Fg)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function wve(t,e,n){const i=new xve(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...c},function TEe(t){return Uk.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(_i.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},s=e.getScene(i,r),o=e.getAnimator(i,r);s instanceof Fg?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):null!==s&&_i.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(s=>{const o=i[s];if("*"===s)r.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<r.length?Object.assign(r[a],o):_i.warn("animation ".concat(s," not found"))()}else{const a=r.find(({name:c})=>c===s);a?Object.assign(a,o):_i.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Fg&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!pi(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:s,opacity:c,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:TH(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}xe(Vk,"defaultProps",REe),xe(Vk,"layerName","ScenegraphLayer");class OEe extends gh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ca("sphere-geometry")}=e,{indices:i,attributes:r}=function kEe(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const o=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(n+1);if("number"==typeof i){const $=i;i=(X,Q,ve,Pe,$e)=>$}const h=new Float32Array(3*d),f=new Float32Array(3*d),m=new Float32Array(2*d),T=new(d>65535?Uint32Array:Uint16Array)(e*n*6);for(let $=0;$<=e;$++)for(let X=0;X<=n;X++){const Q=X/n,ve=$/e,Pe=X+$*(n+1),$e=2*Pe,nt=3*Pe,tt=l*Q,ft=o*ve,pt=Math.sin(tt),yt=Math.cos(tt),Ot=Math.sin(ft),vt=yt*Ot,Bt=Math.cos(ft),Lt=pt*Ot,An=i(vt,Bt,Lt,Q,ve);h[nt+0]=An*vt,h[nt+1]=An*Bt,h[nt+2]=An*Lt,f[nt+0]=vt,f[nt+1]=Bt,f[nt+2]=Lt,m[$e+0]=Q,m[$e+1]=1-ve}const N=n+1;for(let $=0;$<n;$++)for(let X=0;X<e;X++){const Q=6*($*e+X);T[Q+0]=X*N+$,T[Q+1]=X*N+$+1,T[Q+2]=(X+1)*N+$,T[Q+3]=(X+1)*N+$,T[Q+4]=X*N+$+1,T[Q+5]=(X+1)*N+$+1}return{indices:{size:1,value:T},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const PEe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class yG extends gh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ca("truncated-code-geometry")}=e,{indices:i,attributes:r}=function LEe(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),d=(r+1)*(s+1+l),h=Math.atan2(e-n,i),f=Math.sin,m=Math.cos,v=Math.PI,T=m(h),N=f(h),$=a?-2:0,X=s+(c?2:0),Q=r+1,ve=new Uint16Array(r*(s+l)*6),Pe=PEe[o],$e=new Float32Array(3*d),nt=new Float32Array(3*d),tt=new Float32Array(2*d);let ft=0,pt=0;for(let yt=$;yt<=X;yt++){let vt,Ot=yt/s,mt=i*Ot;yt<0?(mt=0,Ot=1,vt=e):yt>s?(mt=i,Ot=1,vt=n):vt=e+yt/s*(n-e),(-2===yt||yt===s+2)&&(vt=0,Ot=0),mt-=i/2;for(let Bt=0;Bt<Q;Bt++){const Lt=f(Bt*v*2/r),An=m(Bt*v*2/r);$e[ft+Pe[0]]=Lt*vt,$e[ft+Pe[1]]=mt,$e[ft+Pe[2]]=An*vt,nt[ft+Pe[0]]=yt<0||yt>s?0:Lt*T,nt[ft+Pe[1]]=yt<0?-1:yt>s?1:N,nt[ft+Pe[2]]=yt<0||yt>s?0:An*T,tt[pt+0]=Bt/r,tt[pt+1]=Ot,pt+=2,ft+=3}}for(let yt=0;yt<s+l;yt++)for(let Ot=0;Ot<r;Ot++){const mt=6*(yt*r+Ot);ve[mt+0]=Q*(yt+0)+0+Ot,ve[mt+1]=Q*(yt+0)+1+Ot,ve[mt+2]=Q*(yt+1)+1+Ot,ve[mt+3]=Q*(yt+0)+0+Ot,ve[mt+4]=Q*(yt+1)+1+Ot,ve[mt+5]=Q*(yt+1)+0+Ot}return{indices:ve,attributes:{POSITION:{size:3,value:$e},NORMAL:{size:3,value:nt},TEXCOORD_0:{size:2,value:tt}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class NEe extends yG{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ca("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class FEe extends yG{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ca("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const BEe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),UEe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),jEe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),VEe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),HEe={POSITION:{size:3,value:new Float32Array(UEe)},NORMAL:{size:3,value:new Float32Array(jEe)},TEXCOORD_0:{size:2,value:new Float32Array(VEe)}};class zEe extends gh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ca("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(BEe)},attributes:{...HEe,...e.attributes}})}}class zc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new ye);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new ye);const i=this.elements,r=e.x,s=e.y,o=e.z;return n.x=i[0]*r+i[1]*s+i[2]*o,n.y=i[3]*r+i[4]*s+i[5]*o,n.z=i[6]*r+i[7]*s+i[8]*o,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new zc);const i=this.elements,r=e.elements,s=n.elements,o=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],f=i[6],m=i[7],v=i[8],T=r[0],N=r[1],$=r[2],X=r[3],Q=r[4],ve=r[5],Pe=r[6],$e=r[7],nt=r[8];return s[0]=o*T+a*X+c*Pe,s[1]=o*N+a*Q+c*$e,s[2]=o*$+a*ve+c*nt,s[3]=l*T+d*X+h*Pe,s[4]=l*N+d*Q+h*$e,s[5]=l*$+d*ve+h*nt,s[6]=f*T+m*X+v*Pe,s[7]=f*N+m*Q+v*$e,s[8]=f*$+m*ve+v*nt,n}scale(e,n){void 0===n&&(n=new zc);const i=this.elements,r=n.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return n}solve(e,n){void 0===n&&(n=new ye);const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let c=3;const l=c;let d,f;do{if(o=l-c,0===s[o+4*o])for(a=o+1;a<l;a++)if(0!==s[o+4*a]){d=4;do{f=4-d,s[f+4*o]+=s[f+4*a]}while(--d);break}if(0!==s[o+4*o])for(a=o+1;a<l;a++){const m=s[o+4*a]/s[o+4*o];d=4;do{f=4-d,s[f+4*a]=f<=o?0:s[f+4*a]-s[f+4*o]*m}while(--d)}}while(--c);if(n.z=s[11]/s[10],n.y=(s[7]-s[6]*n.z)/s[5],n.x=(s[3]-s[2]*n.z-s[1]*n.y)/s[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new zc);const r=GEe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(s=c-a,0===r[s+6*s])for(o=s+1;o<c;o++)if(0!==r[s+6*o]){l=6;do{h=6-l,r[h+6*s]+=r[h+6*o]}while(--l);break}if(0!==r[s+6*s])for(o=s+1;o<c;o++){const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*f}while(--l)}}while(--a);s=2;do{o=s-1;do{const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]-r[h+6*s]*f}while(--l)}while(o--)}while(--s);s=2;do{const f=1/r[s+6*s];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]*f}while(--l)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,s=e.w,o=n+n,a=i+i,c=r+r,l=n*o,d=n*a,h=n*c,f=i*a,m=i*c,v=r*c,T=s*o,N=s*a,$=s*c,X=this.elements;return X[0]=1-(f+v),X[1]=d-$,X[2]=h+N,X[3]=d+$,X[4]=1-(l+v),X[5]=m-T,X[6]=h-N,X[7]=m+T,X[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new zc);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const GEe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class ye{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z;return n.x=a*s-c*r,n.y=c*i-o*s,n.z=o*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new ye(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new ye(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new zc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new ye);const n=this.x,i=this.y,r=this.z;let s=Math.sqrt(n*n+i*i+r*r);return s>0?(s=1/s,e.x=n*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new ye);const r=this.y,s=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*s,n}vmul(e,n){return void 0===n&&(n=new ye),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new ye),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new ye),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=WEe,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=$Ee;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*n,i.y=s+(e.y-s)*n,i.z=o+(e.z-o)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(vG),vG.almostEquals(e,n)}clone(){return new ye(this.x,this.y,this.z)}}ye.ZERO=new ye(0,0,0),ye.UNIT_X=new ye(1,0,0),ye.UNIT_Y=new ye(0,1,0),ye.UNIT_Z=new ye(0,0,1);const WEe=new ye,$Ee=new ye,vG=new ye;class Qi{constructor(e){void 0===e&&(e={}),this.lowerBound=new ye,this.upperBound=new ye,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,xG),l=xG),l.x>o.x&&(o.x=l.x),l.x<s.x&&(s.x=l.x),l.y>o.y&&(o.y=l.y),l.y<s.y&&(s.y=l.y),l.z>o.z&&(o.z=l.z),l.z<s.z&&(s.z=l.z)}return n&&(n.vadd(s,s),n.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new Qi).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||n.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||n.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||n.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return n.x<=r.x&&i.x>=s.x&&n.y<=r.y&&i.y>=s.y&&n.z<=r.z&&i.z>=s.z}getCorners(e,n,i,r,s,o,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),n.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),s.set(d.x,l.y,d.z),o.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,n){const i=wG;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToLocal(m,m)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=wG;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToWorld(m,m)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,s=1/n.y,o=1/n.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*s,d=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,f=(this.upperBound.z-i.z)*o,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,f)),v=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,f));return!(v<0||m>v)}}const xG=new ye,wG=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class XEe{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}class Hr{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new ye),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=YEe;e.tangents(i,KEe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Hr);const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return n.x=i*d+o*a+r*l-s*c,n.y=r*d+o*c+s*a-i*l,n.z=s*d+o*l+i*c-r*a,n.w=o*d-i*a-r*c-s*l,n}inverse(e){void 0===e&&(e=new Hr);const n=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(n*n+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return void 0===e&&(e=new Hr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new ye);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,m=-o*i-a*r-c*s;return n.x=d*l+m*-o+h*-c-f*-a,n.y=h*l+m*-a+f*-o-d*-c,n.z=f*l+m*-c+d*-a-h*-o,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,s;void 0===n&&(n="YZX");const o=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const d=o*a+c*l;if(d>.499&&(i=2*Math.atan2(o,l),r=Math.PI/2,s=0),d<-.499&&(i=-2*Math.atan2(o,l),r=-Math.PI/2,s=0),void 0===i){const h=o*o,m=c*c;i=Math.atan2(2*a*l-2*o*c,1-a*a*2-2*m),r=Math.asin(2*d),s=Math.atan2(2*o*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=s}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const s=Math.cos(e/2),o=Math.cos(n/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(n/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*o*a+s*l*d,this.y=s*l*a-c*o*d,this.z=s*o*d+c*l*a,this.w=s*o*a-c*l*d):"YXZ"===r?(this.x=c*o*a+s*l*d,this.y=s*l*a-c*o*d,this.z=s*o*d-c*l*a,this.w=s*o*a+c*l*d):"ZXY"===r?(this.x=c*o*a-s*l*d,this.y=s*l*a+c*o*d,this.z=s*o*d+c*l*a,this.w=s*o*a-c*l*d):"ZYX"===r?(this.x=c*o*a-s*l*d,this.y=s*l*a+c*o*d,this.z=s*o*d-c*l*a,this.w=s*o*a+c*l*d):"YZX"===r?(this.x=c*o*a+s*l*d,this.y=s*l*a+c*o*d,this.z=s*o*d-c*l*a,this.w=s*o*a-c*l*d):"XZY"===r&&(this.x=c*o*a-s*l*d,this.y=s*l*a-c*o*d,this.z=s*o*d+c*l*a,this.w=s*o*a+c*l*d),this}clone(){return new Hr(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Hr);const r=this.x,s=this.y,o=this.z,a=this.w;let f,m,v,T,N,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+s*l+o*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),v=Math.sin(f),T=Math.sin((1-n)*f)/v,N=Math.sin(n*f)/v):(T=1-n,N=n),i.x=T*r+N*c,i.y=T*s+N*l,i.z=T*o+N*d,i.w=T*a+N*h,i}integrate(e,n,i,r){void 0===r&&(r=new Hr);const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,f=.5*n;return r.x+=f*(s*h+o*d-a*l),r.y+=f*(o*h+a*c-s*d),r.z+=f*(a*h+s*l-o*c),r.w+=f*(-s*c-o*l-a*d),r}}const YEe=new ye,KEe=new ye,qEe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let dn=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=qEe,t})();class Si{constructor(e){void 0===e&&(e={}),this.position=new ye,this.quaternion=new Hr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Si.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Si.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),i.vsub(e,r),n.conjugate(AG),AG.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new ye),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new ye),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new ye),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const AG=new Hr;class tp extends dn{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:dn.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new ye;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let c=0;c!==a;c++){n[o[c]].vsub(n[o[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new ye;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];tp.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const s=new ye,o=new ye;n.vsub(e,o),i.vsub(n,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,s,o,a,c,l){const d=new ye;let h=-1,f=-Number.MAX_VALUE;for(let v=0;v<i.faces.length;v++){d.copy(i.faceNormals[v]),s.vmult(d,d);const T=d.dot(o);T>f&&(f=T,h=v)}const m=[];for(let v=0;v<i.faces[h].length;v++){const T=i.vertices[i.faces[h][v]],N=new ye;N.copy(T),s.vmult(N,N),r.vadd(N,N),m.push(N)}h>=0&&this.clipFaceAgainstHull(o,e,n,m,a,c,l)}findSeparatingAxis(e,n,i,r,s,o,a,c){const l=new ye,d=new ye,h=new ye,f=new ye,m=new ye,v=new ye;let T=Number.MAX_VALUE;const N=this;if(N.uniqueAxes)for(let $=0;$!==N.uniqueAxes.length;$++){i.vmult(N.uniqueAxes[$],l);const X=N.testSepAxis(l,e,n,i,r,s);if(!1===X)return!1;X<T&&(T=X,o.copy(l))}else{const $=a?a.length:N.faces.length;for(let X=0;X<$;X++){l.copy(N.faceNormals[a?a[X]:X]),i.vmult(l,l);const ve=N.testSepAxis(l,e,n,i,r,s);if(!1===ve)return!1;ve<T&&(T=ve,o.copy(l))}}if(e.uniqueAxes)for(let $=0;$!==e.uniqueAxes.length;$++){s.vmult(e.uniqueAxes[$],d);const X=N.testSepAxis(d,e,n,i,r,s);if(!1===X)return!1;X<T&&(T=X,o.copy(d))}else{const $=c?c.length:e.faces.length;for(let X=0;X<$;X++){d.copy(e.faceNormals[c?c[X]:X]),s.vmult(d,d);const ve=N.testSepAxis(d,e,n,i,r,s);if(!1===ve)return!1;ve<T&&(T=ve,o.copy(d))}}for(let $=0;$!==N.uniqueEdges.length;$++){i.vmult(N.uniqueEdges[$],f);for(let X=0;X!==e.uniqueEdges.length;X++)if(s.vmult(e.uniqueEdges[X],m),f.cross(m,v),!v.almostZero()){v.normalize();const Q=N.testSepAxis(v,e,n,i,r,s);if(!1===Q)return!1;Q<T&&(T=Q,o.copy(v))}}return r.vsub(n,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,n,i,r,s,o){tp.project(this,e,i,r,Hk),tp.project(n,e,s,o,zk);const c=Hk[0],l=Hk[1],d=zk[0],h=zk[1];if(c<h||d<l)return!1;const f=c-h,m=d-l;return f<m?f:m}calculateLocalInertia(e,n){const i=new ye,r=new ye;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*o*2*o+2*a*2*a),n.y=1/12*e*(2*s*2*s+2*a*2*a),n.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,s,o,a){const c=new ye,l=new ye,d=new ye,h=new ye,f=new ye,m=new ye,v=new ye,T=new ye,N=this,X=r,Q=[];let ve=-1,Pe=Number.MAX_VALUE;for(let pt=0;pt<N.faces.length;pt++){c.copy(N.faceNormals[pt]),i.vmult(c,c);const yt=c.dot(e);yt<Pe&&(Pe=yt,ve=pt)}if(ve<0)return;const $e=N.faces[ve];$e.connectedFaces=[];for(let pt=0;pt<N.faces.length;pt++)for(let yt=0;yt<N.faces[pt].length;yt++)-1!==$e.indexOf(N.faces[pt][yt])&&pt!==ve&&-1===$e.connectedFaces.indexOf(pt)&&$e.connectedFaces.push(pt);const nt=$e.length;for(let pt=0;pt<nt;pt++){const yt=N.vertices[$e[pt]];yt.vsub(N.vertices[$e[(pt+1)%nt]],l),d.copy(l),i.vmult(d,d),n.vadd(d,d),h.copy(this.faceNormals[ve]),i.vmult(h,h),n.vadd(h,h),d.cross(h,f),f.negate(f),m.copy(yt),i.vmult(m,m),n.vadd(m,m);const mt=$e.connectedFaces[pt];v.copy(this.faceNormals[mt]);const vt=this.getPlaneConstantOfFace(mt);T.copy(v),i.vmult(T,T);const Bt=vt-T.dot(n);for(this.clipFaceAgainstPlane(X,Q,T,Bt);X.length;)X.shift();for(;Q.length;)X.push(Q.shift())}v.copy(this.faceNormals[ve]);const tt=this.getPlaneConstantOfFace(ve);T.copy(v),i.vmult(T,T);const ft=tt-T.dot(n);for(let pt=0;pt<X.length;pt++){let yt=T.dot(X[pt])+ft;yt<=s&&(console.log(`clamped: depth=${yt} to minDist=${s}`),yt=s),yt<=o&&yt<=1e-6&&a.push({point:X[pt],normal:T,depth:yt})}}clipFaceAgainstPlane(e,n,i,r){let s,o;const a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];s=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],o=i.dot(l)+r,s<0)if(o<0){const h=new ye;h.copy(l),n.push(h)}else{const h=new ye;c.lerp(l,s/(s-o),h),n.push(h)}else if(o<0){const h=new ye;c.lerp(l,s/(s-o),h),n.push(h),n.push(l)}c=l,s=o}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new ye);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)n.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>n.x&&(n.x=s.x),s.y<e.y?e.y=s.y:s.y>n.y&&(n.y=s.y),s.z<e.z?e.z=s.z:s.z>n.z&&(n.z=s.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new ye);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==n;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const s=this.vertices;let o,a,c,l,d,h,f=new ye;for(let m=0;m<s.length;m++)f.copy(s[m]),n.vmult(f,f),e.vadd(f,f),(void 0===o||f.x<o)&&(o=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===d||f.y>d)&&(d=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(o,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new ye);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let s=0;s<i;s++){const o=r[s];n.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];n.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,o=new ye;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=n[i[a][0]],d=new ye;e.vsub(l,d);const h=c.dot(d),f=new ye;o.vsub(l,f);const m=c.dot(f);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,n,i,r,s){const o=e.vertices.length,a=ZEe;let c=0,l=0;const d=QEe,h=e.vertices;d.setZero(),Si.vectorToLocalFrame(i,r,n,a),Si.pointToLocalFrame(i,r,d,d);const f=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<o;m++){const v=h[m].dot(a);v>c&&(c=v),v<l&&(l=v)}if(l-=f,c-=f,l>c){const m=l;l=c,c=m}s[0]=c,s[1]=l}}const Hk=[],zk=[],ZEe=(new ye,new ye),QEe=new ye;class lA extends dn{constructor(e){super({type:dn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=ye,s=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new tp({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new ye),lA.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let s=0;s!==i.length;s++)n.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)Eh.set(s[o][0],s[o][1],s[o][2]),n.vmult(Eh,Eh),e.vadd(Eh,Eh),i(Eh.x,Eh.y,Eh.z)}calculateWorldAABB(e,n,i,r){const s=this.halfExtents;Xl[0].set(s.x,s.y,s.z),Xl[1].set(-s.x,s.y,s.z),Xl[2].set(-s.x,-s.y,s.z),Xl[3].set(-s.x,-s.y,-s.z),Xl[4].set(s.x,-s.y,-s.z),Xl[5].set(s.x,s.y,-s.z),Xl[6].set(-s.x,s.y,-s.z),Xl[7].set(s.x,-s.y,s.z);const o=Xl[0];n.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const c=Xl[a];n.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const Eh=new ye,Xl=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye];class un extends XEe{constructor(e){void 0===e&&(e={}),super(),this.id=un.idCounter++,this.index=-1,this.world=null,this.vlambda=new ye,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new ye,this.previousPosition=new ye,this.interpolatedPosition=new ye,this.initPosition=new ye,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new ye,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new ye,this.force=new ye;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?un.STATIC:un.DYNAMIC,typeof e.type==typeof un.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=un.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new ye,this.quaternion=new Hr,this.initQuaternion=new Hr,this.previousQuaternion=new Hr,this.interpolatedQuaternion=new Hr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new ye,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new ye,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new ye,this.invInertia=new ye,this.invInertiaWorld=new zc,this.invMassSolve=0,this.invInertiaSolve=new ye,this.invInertiaWorldSolve=new zc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new ye(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new ye(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new Qi,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new ye,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=un.AWAKE,this.wakeUpAfterNarrowphase=!1,e===un.SLEEPING&&this.dispatchEvent(un.wakeupEvent)}sleep(){this.sleepState=un.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===un.AWAKE&&i<r?(this.sleepState=un.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(un.sleepyEvent)):n===un.SLEEPY&&i>r?this.wakeUp():n===un.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(un.sleepEvent))}}updateSolveMassProperties(){this.sleepState===un.SLEEPING||this.type===un.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new ye),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new ye),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new ye,s=new Hr;return n&&r.copy(n),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=n[s].length(),c=o.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=e1e,o=t1e,a=this.quaternion,c=this.aabb,l=n1e;for(let d=0;d!==r;d++){const h=e[d];a.vmult(n[d],s),s.vadd(this.position,s),a.mult(i[d],o),h.calculateWorldAABB(s,o,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=i1e,r=r1e;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new ye),this.type!==un.DYNAMIC)return;this.sleepState===un.SLEEPING&&this.wakeUp();const i=o1e;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new ye),this.type!==un.DYNAMIC)return;const i=a1e,r=c1e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===un.DYNAMIC&&(this.sleepState===un.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==un.DYNAMIC)return;this.sleepState===un.SLEEPING&&this.wakeUp();const i=n,r=l1e;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=d1e;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new ye),this.type!==un.DYNAMIC)return;const i=u1e,r=h1e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=f1e;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),lA.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new ye;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==un.DYNAMIC&&this.type!==un.KINEMATIC||this.sleepState===un.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*f.x,r.y+=a.y*m*f.y,r.z+=a.z*m*f.z;const v=h.elements,T=this.angularFactor,N=c.x*T.x,$=c.y*T.y,X=c.z*T.z;s.x+=e*(v[0]*N+v[1]*$+v[2]*X),s.y+=e*(v[3]*N+v[4]*$+v[5]*X),s.z+=e*(v[6]*N+v[7]*$+v[8]*X),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}un.idCounter=0,un.COLLIDE_EVENT_NAME="collide",un.DYNAMIC=1,un.STATIC=2,un.KINEMATIC=4,un.AWAKE=0,un.SLEEPY=1,un.SLEEPING=2,un.wakeupEvent={type:"wakeup"},un.sleepyEvent={type:"sleepy"},un.sleepEvent={type:"sleep"};const e1e=new ye,t1e=new Hr,n1e=new Qi,i1e=new zc,r1e=new zc,o1e=(new zc,new ye),a1e=new ye,c1e=new ye,l1e=new ye,d1e=new ye,u1e=new ye,h1e=new ye,f1e=new ye;new ye,new ye,new Hr,new ye,new ye,new ye,new ye;class V0{constructor(){this.rayFromWorld=new ye,this.rayToWorld=new ye,this.hitNormalWorld=new ye,this.hitPointWorld=new ye,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let SG,CG,TG,MG,IG,DG,RG;SG=dn.types.SPHERE,CG=dn.types.PLANE,TG=dn.types.BOX,MG=dn.types.CYLINDER,IG=dn.types.CONVEXPOLYHEDRON,DG=dn.types.HEIGHTFIELD,RG=dn.types.TRIMESH;class ls{get[SG](){return this._intersectSphere}get[CG](){return this._intersectPlane}get[TG](){return this._intersectBox}get[MG](){return this._intersectConvex}get[IG](){return this._intersectConvex}get[DG](){return this._intersectHeightfield}get[RG](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new ye),void 0===n&&(n=new ye),this.from=e.clone(),this.to=n.clone(),this.direction=new ye,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ls.ANY,this.result=new V0,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||ls.ANY,this.result=n.result||new V0,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(OG),Xk.length=0,e.broadphase.aabbQuery(e,OG,Xk),this.intersectBodies(Xk),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=v1e,s=x1e;for(let o=0,a=e.shapes.length;o<a;o++){const c=e.shapes[o];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(c,s,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function F1e(t,e,n){n.vsub(t,np);const i=np.dot(e);return e.scale(i,uA),uA.vadd(t,uA),n.distanceTo(uA)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,s)}_intersectPlane(e,n,i,r,s){const o=this.from,a=this.to,c=this.direction,l=new ye(0,0,1);n.vmult(l,l);const d=new ye;o.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||o.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const v=new ye,T=new ye,N=new ye;o.vsub(i,v);const $=-l.dot(v)/m;c.scale($,T),o.vadd(T,N),this.reportIntersection(l,N,s,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,s=this.from;n.x=Math.min(r.x,s.x),n.y=Math.min(r.y,s.y),n.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,n,i,r,s){const o=w1e;o.from.copy(this.from),o.to.copy(this.to),Si.pointToLocalFrame(i,n,o.from,o.from),Si.pointToLocalFrame(i,n,o.to,o.to),o.updateDirection();const a=E1e;let c,l,d,h;c=l=0,d=h=e.data.length-1;const f=new Qi;o.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let v=l;v<h;v++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,v,f),f.overlapsRay(o)){if(e.getConvexTrianglePillar(m,v,!1),Si.pointToWorldFrame(i,n,e.pillarOffset,dA),this._intersectConvex(e.pillarConvex,n,dA,r,s,kG),this.result.shouldStop)return;e.getConvexTrianglePillar(m,v,!0),Si.pointToWorldFrame(i,n,e.pillarOffset,dA),this._intersectConvex(e.pillarConvex,n,dA,r,s,kG)}}}_intersectSphere(e,n,i,r,s){const o=this.from,a=this.to,l=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,d=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),f=d**2-4*l*((o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-e.radius**2),m=A1e,v=S1e;if(!(f<0))if(0===f)o.lerp(a,f,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,s,r,-1);else{const T=(-d-Math.sqrt(f))/(2*l),N=(-d+Math.sqrt(f))/(2*l);if(T>=0&&T<=1&&(o.lerp(a,T,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,s,r,-1)),this.result.shouldStop)return;N>=0&&N<=1&&(o.lerp(a,N,m),m.vsub(i,v),v.normalize(),this.reportIntersection(v,m,s,r,-1))}}_intersectConvex(e,n,i,r,s,o){const a=C1e,c=PG,l=o&&o.faceList||null,d=e.faces,h=e.vertices,f=e.faceNormals,m=this.direction,v=this.from,N=v.distanceTo(this.to),$=l?l.length:d.length,X=this.result;for(let Q=0;!X.shouldStop&&Q<$;Q++){const ve=l?l[Q]:Q,Pe=d[ve],$e=f[ve],nt=n,tt=i;c.copy(h[Pe[0]]),nt.vmult(c,c),c.vadd(tt,c),c.vsub(v,c),nt.vmult($e,a);const ft=m.dot(a);if(Math.abs(ft)<this.precision)continue;const pt=a.dot(c)/ft;if(!(pt<0)){m.scale(pt,la),la.vadd(v,la),Gc.copy(h[Pe[0]]),nt.vmult(Gc,Gc),tt.vadd(Gc,Gc);for(let yt=1;!X.shouldStop&&yt<Pe.length-1;yt++){Yl.copy(h[Pe[yt]]),Kl.copy(h[Pe[yt+1]]),nt.vmult(Yl,Yl),nt.vmult(Kl,Kl),tt.vadd(Yl,Yl),tt.vadd(Kl,Kl);const Ot=la.distanceTo(v);!ls.pointInTriangle(la,Gc,Yl,Kl)&&!ls.pointInTriangle(la,Yl,Gc,Kl)||Ot>N||this.reportIntersection(a,la,s,r,ve)}}}}_intersectTrimesh(e,n,i,r,s,o){const a=I1e,c=L1e,l=N1e,d=PG,h=D1e,f=R1e,m=O1e,v=P1e,T=k1e,N=e.indices,$=this.from,X=this.to,Q=this.direction;l.position.copy(i),l.quaternion.copy(n),Si.vectorToLocalFrame(i,n,Q,h),Si.pointToLocalFrame(i,n,$,f),Si.pointToLocalFrame(i,n,X,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,m.vsub(f,h),h.normalize();const ve=f.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let Pe=0,$e=c.length;!this.result.shouldStop&&Pe!==$e;Pe++){const nt=c[Pe];e.getNormal(nt,a),e.getVertex(N[3*nt],Gc),Gc.vsub(f,d);const tt=h.dot(a),ft=a.dot(d)/tt;if(ft<0)continue;h.scale(ft,la),la.vadd(f,la),e.getVertex(N[3*nt+1],Yl),e.getVertex(N[3*nt+2],Kl);const pt=la.distanceSquared(f);!ls.pointInTriangle(la,Yl,Gc,Kl)&&!ls.pointInTriangle(la,Gc,Yl,Kl)||pt>ve||(Si.vectorToWorldFrame(n,a,T),Si.pointToWorldFrame(i,n,la,v),this.reportIntersection(T,v,s,r,nt))}c.length=0}reportIntersection(e,n,i,r,s){const o=this.from,a=this.to,c=o.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case ls.ALL:this.hasHit=!0,l.set(o,a,e,n,i,r,c),l.hasHit=!0,this.callback(l);break;case ls.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,n,i,r,c));break;case ls.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,n,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,np),i.vsub(n,H0),e.vsub(n,Yk);const s=np.dot(np),o=np.dot(H0),a=np.dot(Yk),c=H0.dot(H0),l=H0.dot(Yk);let d,h;return(d=c*a-o*l)>=0&&(h=s*l-o*a)>=0&&d+h<s*c-o*o}}ls.CLOSEST=1,ls.ANY=2,ls.ALL=4;const OG=new Qi,Xk=[],H0=new ye,Yk=new ye,v1e=new ye,x1e=new Hr,la=new ye,Gc=new ye,Yl=new ye,Kl=new ye;new ye,new V0;const kG={faceList:[0]},dA=new ye,w1e=new ls,E1e=[],A1e=new ye,S1e=new ye,C1e=new ye,PG=(new ye,new ye,new ye),I1e=new ye,D1e=new ye,R1e=new ye,O1e=new ye,k1e=new ye,P1e=new ye;new Qi;const L1e=[],N1e=new Si,np=new ye,uA=new ye;new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ls,new ye,new ye,new ye,new ye(1,0,0),new ye(0,1,0),new ye(0,0,1),new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Qi,new ye,new Qi,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Qi,new ye,new Si,new Qi,new ye,new ye,new ye,new ye,new ye,new Hr,new Hr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Qi,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Hr,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye,new Qi,new ls;const ws=globalThis.performance||{};if(!ws.now){let t=Date.now();ws.timing&&ws.timing.navigationStart&&(t=ws.timing.navigationStart),ws.now=()=>Date.now()-t}new ye;var op=g(1979);function Jg(t,e,n){e||(e=new zn(zn.IDENTITY));const i=new zn(zn.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const s=new zn(zn.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(s)}t.scale&&i.scale(t.scale)}const r=new zn(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const s of t.nodes||t.children||[])if(!1===Jg(s,r,n))return!1;return!0}function o9(){DV([qz,Xg])}function a9(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||Jg(r,new zn(zn.IDENTITY),(s,o)=>s!==n||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function Zk(t,e){return Qk.apply(this,arguments)}function Qk(){return Qk=jt(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(s=>s.blob())):fetch(n);const r=yield T1(i,Xg,{DracoLoader:vk,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),a9(t.scenegraphNode,r)}),Qk.apply(this,arguments)}function VCe(t,e){return eP.apply(this,arguments)}function eP(){return eP=jt(function*(t,e){return a9(t,yield e)}),eP.apply(this,arguments)}function tP(){return tP=jt(function*(t){console.log("Starting Collisioning");const e=t.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new zn(o.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new Qi({lowerBound:new ye(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new ye(...l.map((d,h)=>Math.max(d,c[h])))})}}),n=[];for(const o of t.filter(a=>!!a.scenegraph)){const a=yield d0(o.scenegraph,Xg,{DracoLoader:vk,decompress:!0,postProcess:!0});for(const c of a.scenes)Jg(c,new zn(o.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":o["@id"],name:l.name,entityId:o.entityId,bbox:new Qi({lowerBound:new ye(...f.map((v,T)=>Math.min(v,m[T]))),upperBound:new ye(...m.map((v,T)=>Math.max(v,f[T])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const c of n)o.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i}),tP.apply(this,arguments)}function nP(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new OEe;break;case"cone":i=new NEe;break;case"cylinder":i=new FEe;break;default:i=new zEe}return new rO({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Ei.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function c9(t,e,n){if(e&&0!==e.length)return new V2({id:t,pickable:!0,data:e.map(i=>({...i,position:new zn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}let zCe=(()=>{var t;class e extends u2{initializeState(){const{data:i}=this.props;this.setState({data:i??[],zoomOpacity:.8,doCollisions:!1}),o9()}renderLayers(){const i=this.state,r={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const a of i.data){const c=a.geometry??"cube";a.scenegraph?r.scenegraph.push(a):void 0!==r[c]&&r[c].push(a)}const s={};for(const a of r.scenegraph)a.scenegraph&&a.scenegraphNode&&!Object.prototype.hasOwnProperty.call(s,a.scenegraph)&&(s[a.scenegraph]=Zk({scenegraph:a.scenegraph},e.gltfCache));const o=[];for(const[a,c]of Object.entries(r))if("scenegraph"===a)for(const l of c)o.push(new Vk({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?i.zoomOpacity:l.opacity??1,pickable:!l.unpickable,coordinateSystem:Ei.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?VCe(l.scenegraphNode,s[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:l.color??[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}}));else"text"===a?(o.push(c9("text",c.filter(l=>l.unpickable),{pickable:!1})),o.push(c9("textPickable",c.filter(l=>!l.unpickable),{pickable:!0}))):"wireframe"===a?o.push(nP(a,c,{wireframe:!0,pickable:!1,geometry:a})):(o.push(nP(a,c.filter(l=>l.unpickable),{wireframe:!1,pickable:!1,geometry:a})),o.push(nP(`${a}Pickable`,c.filter(l=>!l.unpickable),{wireframe:!1,pickable:!0,geometry:a})));return i.doCollisions&&function HCe(t){tP.apply(this,arguments)}(i.data),o.filter(a=>!!a)}getPickingInfo(i){return i.info}}return(t=e).layerName="BodyUILayer",t.gltfCache={},e})();function l9(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),l9(n,e);return e}function iP(){return iP=jt(function*(t,e,n,i){o9();const r=yield Zk({scenegraph:t,scenegraphNode:n},i),s={},o=[];for(const a of r.scenes)Jg(a,e=new zn(e||zn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new zn(l),geometry:"wireframe",node:c};if(o.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:d["@id"],transformMatrix:new zn(e||zn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new Qi({lowerBound:new ye(...f.map((v,T)=>Math.min(v,m[T]))),upperBound:new ye(...m.map((v,T)=>Math.max(v,f[T])))})}return s[d["@id"]]=d,!0});for(const a of Object.values(s).filter(c=>!c.bbox)){for(const c of l9(a.node).map(l=>s[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new ye(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new zn(zn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s}),iP.apply(this,arguments)}let WCe=(()=>{class t{constructor(n){this.deckProps=n,this.bodyUILayer=new zCe({}),this.nodeClickSubject=new H,this.nodeHoverStartSubject=new H,this.nodeHoverStopSubject=new H,this.sceneRotationSubject=new Ke([0,0]),this.nodeDragStartSubject=new H,this.nodeDragSubject=new H,this.nodeDragEndSubject=new H,this.nodeClick$=this.nodeClickSubject.pipe(io()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(io()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(io()),this.sceneRotation$=this.sceneRotationSubject.pipe(io()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(io()),this.nodeDrag$=this.nodeDragSubject.pipe(io()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(io());const i={...n,views:["orthographic"===n.camera?new m2({flipY:!1,near:-1e3}):new jV({orbitAxis:"Y"})],controller:n.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};n.legacyLighting&&(i.effects=[new y2({ambientLight:new VV({color:[255,255,255],intensity:10})})]),this.deck=new N2(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:n.minRotationX??-15,maxRotationX:n.maxRotationX??15,target:n.target??[.5,.5,0],rotationX:0,rotationOrbit:n.rotation??0,zoom:n.zoom??9.5,camera:n.camera}}),n.rotation&&this.sceneRotationSubject.next([n.rotation,0])}initialize(){var n=this;return jt(function*(){for(;!n.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(n){if(n?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const s of n)s.zoomToOnLoad&&(this.zoomTo(s),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(n,i):this.bodyUILayer.setState({data:n,zoomOpacity:i})}}debugSceneNodeProcessing(n,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new zn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function GCe(t,e,n,i){return iP.apply(this,arguments)})(r,s,"VHF_Kidney_L_Low1").then(o=>{console.log("results",o),console.log("data",n),(n=n.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:n,zoomOpacity:i})})}zoomTo(n){const i=new zn(n.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:n}})}setRotationX(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:n}})}setZoom(n){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:n}})}setTarget(n){this.deck.setProps({viewState:{...this.deck.props.viewState,target:n}})}setInteractive(n){this.deck.setProps({controller:n})}_onHover(n){const{lastHovered:i}=this;this.cursor=n.picked?"pointer":void 0,n.picked&&n.object?.["@id"]?i!==n.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=n.object,this.nodeHoverStartSubject.next(n.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(n,i){n.picked&&n.object?.["@id"]&&this.nodeClickSubject.next({node:n.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(n){if(n.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(n.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...n.viewState}}),this.sceneRotationSubject.next([n.viewState.rotationOrbit,n.viewState.rotationX])}_onDragStart(n,i){this._dragEvent(n,i,this.nodeDragStartSubject)}_onDrag(n,i){this._dragEvent(n,i,this.nodeDragSubject)}_onDragEnd(n,i){this._dragEvent(n,i,this.nodeDragEndSubject)}_dragEvent(n,i,r){n?.object?.["@id"]&&r.next({node:n.object,info:n,e:i})}}return ot([op.ak],t.prototype,"_onHover",null),ot([op.ak],t.prototype,"_onClick",null),ot([op.ak],t.prototype,"_onViewStateChange",null),ot([op.ak],t.prototype,"_onDragStart",null),ot([op.ak],t.prototype,"_onDrag",null),ot([op.ak],t.prototype,"_onDragEnd",null),t})();const Y0=L(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:XCe}=Array,{getPrototypeOf:YCe,prototype:KCe,keys:qCe}=Object;function d9(t){if(1===t.length){const e=t[0];if(XCe(e))return{args:e,keys:null};if(function JCe(t){return t&&"object"==typeof t&&YCe(t)===KCe}(e)){const n=qCe(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:ZCe}=Array;function K0(t){return I(e=>function QCe(t,e){return ZCe(e)?t(...e):t(e)}(t,e))}function u9(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function cc(...t){const e=Vt(t),n=It(t),{args:i,keys:r}=d9(t);if(0===i.length)return Vi([],e);const s=new We(h9(i,e,r?o=>u9(r,o):Se));return n?s.pipe(K0(n)):s}function h9(t,e,n=Se){return i=>{f9(e,()=>{const{length:r}=t,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)f9(e,()=>{const l=Vi(t[c],e);let d=!1;l.subscribe(G(i,h=>{s[c]=h,d||(d=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function f9(t,e,n){t?Me(n,t,e):e()}let p9=(()=>{class t{constructor(){this.bootstrap$=new Nf(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function tTe(t,e){return t===e}function sP(t,e=tTe){let n=null,i=null;function r(){return function nTe(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let iTe=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const m9=new bt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>iTe.pop()}),g9=new bt("\u0275NGXS_STATE_FACTORY"),_9=new bt("\u0275NGXS_STATE_CONTEXT_FACTORY");function q0(...t){const e=It(t),{args:n,keys:i}=d9(t),r=new We(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let d=0;d<o;d++){let h=!1;Cn(n[d]).subscribe(G(s,f=>{h||(h=!0,l--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(i?u9(i,a):a),s.complete())}))}});return e?r.pipe(K0(e)):r}function eu(t,e){const n=F(t)?t:()=>t,i=r=>r.error(n());return new We(e?r=>e.schedule(i,0,r):i)}function ap(t){return!!t&&(t instanceof We||F(t.lift)&&F(t.subscribe))}function yi(t,e){return ee((n,i)=>{let r=0;n.subscribe(G(i,s=>t.call(e,s,r++)&&i.next(s)))})}function zo(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,io({connector:()=>new Nf(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function er(t){return t<=0?()=>pe:ee((e,n)=>{let i=0;e.subscribe(G(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function b9(t,e){return e?n=>n.pipe(b9((i,r)=>Cn(t(i,r)).pipe(I((s,o)=>e(i,s,r,o))))):ee((n,i)=>{let r=0,s=null,o=!1;n.subscribe(G(i,a=>{s||(s=G(i,void 0,()=>{s=null,o&&i.complete()}),Cn(t(a,r++)).subscribe(s))},()=>{o=!0,!s&&i.complete()}))})}function Zg(t){return ee((e,n)=>{let i=!1;e.subscribe(G(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function lc(t){return ee((e,n)=>{let s,i=null,r=!1;i=e.subscribe(G(n,void 0,void 0,o=>{s=Cn(t(o,lc(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function gr(t){return ee((e,n)=>{Cn(t).subscribe(G(n,()=>n.complete(),V)),!n.closed&&e.subscribe(n)})}function Li(t,e,n){const i=F(t)||e||n?{next:t,error:e,complete:n}:t;return i?ee((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(G(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Se}function J0(...t){return function rTe(){return se(1)}()(Vi(t,Vt(t)))}function dc(...t){const e=Vt(t);return ee((n,i)=>{(e?J0(t,n,e):J0(t,n)).subscribe(i)})}function cp(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const y9=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?n:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),t),t},oP=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),aP=t=>t&&"object"==typeof t&&!Array.isArray(t),cP=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(aP(t)&&aP(n))for(const i in n)aP(n[i])?(t[i]||Object.assign(t,{[i]:{}}),cP(t[i],n[i])):Object.assign(t,{[i]:n[i]});return cP(t,...e)};let v9=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return uD(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return on.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return on.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(rt(on),rt(xa))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const x9=new bt("ROOT_OPTIONS"),w9=new bt("ROOT_STATE_TOKEN"),E9=new bt("FEATURE_STATE_TOKEN"),A9=new bt("NGXS_PLUGINS"),tu="NGXS_META",S9="NGXS_OPTIONS_META",lP="NGXS_SELECTOR_META";let yA=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=v9}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:function(n){let i=null;return n?i=new n:(r=rt(x9),i=cP(new t,r)),i;var r},providedIn:"root"}),t})();class fTe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let pTe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const C9=new bt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),mTe=new bt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=zt(Um),e=t.get(C9);return t.get(e||(typeof Ai.Zone<"u"?v9:pTe))}});function dP(t){if(!t.hasOwnProperty(tu)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,tu,{value:e})}return lp(t)}function lp(t){return t[tu]}function vA(t){return t[lP]}function T9(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function gTe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function _Te(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let s=n;for(;++i<r;)s=s+" && "+(n=n+"."+e[i]);return new Function("store","return "+s+";")}(t)}function ETe(...t){return function Qg(t,e,n=CTe){const i=function TTe(t){return t.reduce((e,n)=>(e[cp(n)]=!0,e),{})}(t),r=e&&function MTe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(s){return s.pipe(function ATe(t,e){return yi(n=>{const i=cp(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function CTe(){return I(t=>t.action)}function xA(t){return e=>new We(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let M9=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(rt(mTe))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function I9(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const s=e.pop();s&&t(...s)}n=!1}}}class ITe extends H{constructor(){super(...arguments),this._orderedNext=I9(e=>super.next(e))}next(e){this._orderedNext(e)}}class DTe extends Ke{constructor(e){super(e),this._orderedNext=I9(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let D9=(()=>{class t extends ITe{ngOnDestroy(){this.complete()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ci(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const R9=t=>(...e)=>t.shift()(...e,(...i)=>R9(t)(...i));let O9=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(kc));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(rt(hr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hP=(()=>{class t extends DTe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fP=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(rt(t,12),rt(A9,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})(),k9=(()=>{class t extends H{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ci(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),OTe=(()=>{class t{constructor(n,i,r,s,o,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=s,this._ngxsExecutionStrategy=o,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function RTe(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new We(r=>(i=!0,n.pipe(xA(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?$t(this._stateStream.getValue()):q0(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return R9([...this._pluginManager.plugins,(s,o)=>{s!==i&&this._stateStream.next(s);const a=this.getActionResultStream(o);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(zo())}getActionResultStream(n){return this._actionResults.pipe(yi(i=>i.action===n&&"DISPATCHED"!==i.status),er(1),zo())}createDispatchObservable(n){return n.pipe(b9(i=>{switch(i.status){case"SUCCESSFUL":return $t(this._stateStream.getValue());case"ERRORED":return eu(i.error);default:return pe}})).pipe(zo())}}return t.\u0275fac=function(n){return new(n||t)(rt(D9),rt(k9),rt(fP),rt(hP),rt(M9),rt(O9))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Z0=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(rt(hP),rt(OTe),rt(yA))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pP=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();function r(c){return oP(c,n.path)}function s(c,l){const d=y9(c,n.path,l);return i.setState(d),d}function o(c,l){return s(c,l(r(c)))}return{getState:()=>r(i.getState()),patchState(c){const l=i.getState(),d=function kTe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(c);return o(l,d)},setState(c){const l=i.getState();return function a(c){return"function"==typeof c}(c)?o(l,c):s(l,c)},dispatch:c=>i.dispatch(c)}}}return t.\u0275fac=function(n){return new(n||t)(rt(Z0))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new RegExp("^[a-zA-Z0-9_]+$");class L9{static get type(){return"@@INIT"}}class N9{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}new bt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let e_=(()=>{class t{constructor(n,i,r,s,o,a,c){this._injector=n,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=sP(()=>{const l=this;function d(f){const m=l.statePaths[f];return m?T9(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let m=d(f);return m||((...v)=>(m||(m=d(f)),m?m(...v):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(n){let i={};return i=Array.isArray(n)?n.slice():function wTe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?Object.assign({},n):void 0===n?{}:n,i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function bTe(t){const e=n=>t.find(r=>r===n)[tu].name;return t.reduce((n,i)=>{const{name:r,children:s}=i[tu];return n[r]=(s||[]).map(e),n},{})}(i),s=function xTe(t){const e=[],n={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),n[r]=!0,t[r].forEach(o=>{n[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),o=function vTe(t,e={}){const n=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=n(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function yTe(t){return t.reduce((e,n)=>(e[n[tu].name]=n,e),{})}(i),c=[];for(const l of s){const d=a[l],h=o[l],f=d[tu];this.addRuntimeInfoToMeta(f,h);const m={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(d),defaults:t.cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((o,a)=>y9(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new H;this._actionsSubscription=this._actions.pipe(yi(i=>"DISPATCHED"===i.status),U(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(I(()=>({action:r,status:"SUCCESSFUL"})),Zg({action:r,status:"CANCELED"}),lc(s=>$t({action:r,status:"ERRORED",error:s})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=cp(i),s=[];let o=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=Vi(h)),ap(h)?(h=h.pipe(U(f=>f instanceof Promise?Vi(f):ap(f)?f:$t(f)),Zg({})),l.options.cancelUncompleted&&(h=h.pipe(gr(n.pipe(ETe(i)))))):h=$t({}).pipe(zo()),s.push(h)}catch(h){s.push(eu(h))}o=!0}}return s.length||s.push($t({})),q0(s)}addToStatesMap(n){const i=[],r=this.statesByName;for(const s of n){const o=lp(s).name;!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==oP(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(rt(hr),rt(yA),rt(t,12),rt(D9),rt(k9),rt(pP),rt(m9,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();function F9(t){const e=vA(t)||lp(t);return e&&e.makeRootSelector||(()=>t)}let ql=(()=>{class t{constructor(n,i,r,s,o,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(xA(this._internalExecutionStrategy),zo({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(I(i),lc(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?$t(void 0):eu(r)}),Ue(),xA(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(er(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(xA(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return F9(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(o)}}}return t.\u0275fac=function(n){return new(n||t)(rt(hP),rt(Z0),rt(yA),rt(M9),rt(e_),rt(m9,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wA=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(rt(ql),rt(yA))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),B9=(()=>{class t{constructor(n,i,r,s,o){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=s,this._bootstrapper=o,this._destroy$=new H}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(yi(()=>!!i),Li(()=>this._invokeInitOnStates(i.states)),U(()=>this._bootstrapper.appBootstrapped$),yi(r=>!!r),lc(r=>(this._internalErrorReporter.reportErrorSafely(r),pe)),gr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(s=>oP(s,i.path)).pipe(dc(void 0),ee((t,e)=>{let n,i=!1;t.subscribe(G(e,r=>{const s=n;n=r,i&&e.next([s,r]),i=!0}))}),gr(this._destroy$)).subscribe(([s,o])=>{const a=new fTe(s,o,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(rt(ql),rt(O9),rt(Z0),rt(pP),rt(p9))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),HTe=(()=>{class t{constructor(n,i,r,s,o=[],a){const c=n.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(c),n.connectActionHandlers(),a.ngxsBootstrap(new L9,c)}}return t.\u0275fac=function(n){return new(n||t)(rt(e_),rt(Z0),rt(ql),rt(wA),rt(w9,8),rt(B9))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),t})(),zTe=(()=>{class t{constructor(n,i,r,s=[],o){const a=t.flattenStates(s),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),o.ngxsBootstrap(new N9(c.defaults),c))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(rt(ql),rt(Z0),rt(e_),rt(E9,8),rt(B9))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),t})(),U9=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:HTe,providers:[e_,fP,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:zTe,providers:[e_,fP,...n,{provide:E9,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:C9,useValue:i.executionStrategy},{provide:w9,useValue:n},{provide:x9,useValue:i},{provide:_E,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[p9]},{provide:_9,useExisting:pP},{provide:g9,useExisting:e_}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),t})();function _P(t,e){return(n,i)=>{const r=dP(n.constructor);Array.isArray(t)||(t=[t]);for(const s of t){const o=s.type;r.actions[o]||(r.actions[o]=[]),r.actions[o].push({fn:i,options:e||{},type:o})}}}function j9(t){return i=>{const r=i,s=dP(r),o=Object.getPrototypeOf(r),a=function e(i){return Object.assign(Object.assign({},i[S9]||{}),t)}(o);(function n(i){const{meta:r,inheritedStateClass:s,optionsWithInheritance:o}=i,{children:a,defaults:c,name:l}=o,d="string"==typeof l?l:l&&l.getName()||null;if(s.hasOwnProperty(tu)){const h=s[tu]||{};r.actions=Object.assign(Object.assign({},r.actions),h.actions)}r.children=a,r.defaults=c,r.name=d})({meta:s,inheritedStateClass:o,optionsWithInheritance:a}),r[S9]=a}}const GTe=36;function EA(t,...e){return function(n,i){const r=i.toString(),s=`__${r}__selector`,o=function $Te(t,e,n=[]){return e=e||function XTe(t){const e=t.length-1;return t.charCodeAt(e)===GTe?t.slice(0,e):t}(t),"string"==typeof e?T9(n.length?[e,...n]:e.split("."),wA.config):e}(r,t,e);Object.defineProperties(n,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function WTe(t){return wA.store||function hTe(){throw new Error("You have forgotten to import the NGXS module!")}(),wA.store.select(t)}(o))}}})}}const V9="NGXS_SELECTOR_OPTIONS_META",AA={getOptions:t=>t&&t[V9]||{},defineOptions:(t,e)=>{t&&(t[V9]=e)}};function YTe(t,e){const n=function uP(t){return t.hasOwnProperty(lP)||Object.defineProperty(t,lP,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),vA(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function KTe(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},AA.getOptions(t.containerClass)||{}),AA.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function Q0(t,e,n){const i=function UTe(t,e){const n=e&&e.containerClass,r=sP(function(...o){const a=t.apply(n,o);return a instanceof Function?sP.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=YTe(e,n);return r.makeRootSelector=function BTe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:s}=function jTe(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),o=function VTe(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&lp(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>F9(a)(t));return{selectorOptions:r,argumentSelectorFunctions:o}}(i,t,e);return function(a){const c=r.map(l=>l(a));try{return n(...c)}catch(l){if(l instanceof TypeError&&s.suppressErrors)return;throw l}}}}(r,t,i),i}function t_(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,s=Q0(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),o={configurable:!0,get:()=>s};return o.originalFn=r,o}}const Go=new bt("NgValueAccessor");let UP;try{UP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{UP=!1}let ov,pp,jP,Or=(()=>{var t;class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?ih(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!UP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(xa))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function fp(t){return function KMe(){if(null==ov&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ov=!0}))}finally{ov=ov||!1}return ov}()?t:!!t.capture}function qMe(){if(null==pp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return pp=!1,pp;if("scrollBehavior"in document.documentElement.style)pp=!0;else{const t=Element.prototype.scrollTo;pp=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return pp}function UA(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function iu(t){return t.composedPath?t.composedPath()[0]:t.target}function VP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Wc(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class aIe extends C{constructor(e,n){super()}schedule(e,n=0){return this}}const HA={setInterval(t,e,...n){const{delegate:i}=HA;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=HA;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class GP extends aIe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return HA.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&HA.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,oe(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class cv{constructor(e,n=cv.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}cv.now=wD.now;class WP extends cv{constructor(e,n=cv.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const zA=new WP(GP),cIe=zA;function XP(t){return yi((e,n)=>t<=n)}function di(t){return null!=t&&"false"!=`${t}`}function uc(t,e=0){return function lIe(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function GA(t){return Array.isArray(t)?t:[t]}function ds(t){return null==t?"":"string"==typeof t?t:`${t}px`}function ru(t){return t instanceof Mt?t.nativeElement:t}const rW=new Set;let mp,hIe=(()=>{var t;class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):pIe}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&function fIe(t,e){if(!rW.has(t))try{mp||(mp=document.createElement("style"),e&&(mp.nonce=e),mp.setAttribute("type","text/css"),document.head.appendChild(mp)),mp.sheet&&(mp.sheet.insertRule(`@media ${t} {body{ }}`,0),rW.add(t))}catch(n){console.error(n)}}(i,this._nonce),this._matchMedia(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Or),rt(Ef,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function pIe(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let mIe=(()=>{var t;class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new H}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return sW(GA(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let o=cc(sW(GA(i)).map(a=>this._registerQuery(a).observable));return o=J0(o.pipe(er(1)),o.pipe(XP(1),function $P(t,e=zA){return ee((n,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+t,d=e.now();if(d<l)return r=this.schedule(void 0,l-d),void i.add(r);a()}n.subscribe(G(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(0))),o.pipe(I(a=>{const c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);const r=this._mediaMatcher.matchMedia(i),o={observable:new We(a=>{const c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(dc(r),I(({matches:a})=>({query:i,matches:a})),gr(this._destroySubject)),mql:r};return this._queries.set(i,o),o}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(hIe),rt(on))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function sW(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}let XA=(()=>{var t;class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return function vIe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(i)&&"visible"===getComputedStyle(i).visibility}isTabbable(i){if(!this._platform.isBrowser)return!1;const r=function yIe(t){try{return t.frameElement}catch{return null}}(function MIe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(i));if(r&&(-1===hW(r)||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=hW(i);return i.hasAttribute("contenteditable")?-1!==o:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function CIe(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(i))&&("audio"===s?!!i.hasAttribute("controls")&&-1!==o:"video"===s?-1!==o&&(null!==o||this._platform.FIREFOX||i.hasAttribute("controls")):i.tabIndex>=0)}isFocusable(i,r){return function TIe(t){return!function wIe(t){return function AIe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function xIe(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function EIe(t){return function SIe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||uW(t))}(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Or))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function uW(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function hW(t){if(!uW(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class IIe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(er(1)).subscribe(e)}}let ZP=(()=>{var t;class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new IIe(i,this._checker,this._ngZone,this._document,r)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(XA),rt(on),rt($n))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function fW(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function pW(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const DIe=new bt("cdk-input-modality-detector-options"),RIe={ignoreKeys:[18,17,224,91,16]},r_=fp({passive:!0,capture:!0});let OIe=(()=>{var t;class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new Ke(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=iu(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(fW(a)?"keyboard":"mouse"),this._mostRecentTarget=iu(a))},this._onTouchstart=a=>{pW(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=iu(a))},this._options={...RIe,...o},this.modalityDetected=this._modality.pipe(XP(1)),this.modalityChanged=this.modalityDetected.pipe(Ue()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,r_),s.addEventListener("mousedown",this._onMousedown,r_),s.addEventListener("touchstart",this._onTouchstart,r_)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,r_),document.removeEventListener("mousedown",this._onMousedown,r_),document.removeEventListener("touchstart",this._onTouchstart,r_))}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Or),rt(on),rt($n),rt(DIe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const PIe=new bt("cdk-focus-monitor-default-options"),YA=fp({passive:!0,capture:!0});let Ch=(()=>{var t;class e{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new H,this._rootNodeFocusAndBlurListener=c=>{for(let d=iu(c);d;d=d.parentElement)"focus"===c.type?this._onFocus(c,d):this._onBlur(c,d)},this._document=o,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){const s=ru(i);if(!this._platform.isBrowser||1!==s.nodeType)return $t();const o=function ZMe(t){if(function JMe(){if(null==jP){const t=typeof document<"u"?document.head:null;jP=!(!t||!t.createShadowRoot&&!t.attachShadow)}return jP}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new H,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){const r=ru(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){const o=ru(i);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return 1===this._detectionMode||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused","touch"===r),i.classList.toggle("cdk-keyboard-focused","keyboard"===r),i.classList.toggle("cdk-mouse-focused","mouse"===r),i.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=i,this._originFromTouchInteraction="touch"===i&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(i,r){const s=this._elementInfo.get(r),o=iu(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;const r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,YA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,YA)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){const r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,YA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,YA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){const r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){const{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!r||r===i||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName||i.disabled)return!1;const o=i.labels;if(o)for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0;return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(on),rt(Or),rt(OIe),rt($n,8),rt(PIe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const gW="cdk-high-contrast-black-on-white",_W="cdk-high-contrast-white-on-black",QP="cdk-high-contrast-active";let bW=(()=>{var t;class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=zt(mIe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const i=this._document.body.classList;i.remove(QP,gW,_W),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?i.add(QP,gW):2===r&&i.add(QP,_W)}}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Or),rt($n))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const LIe=new bt("cdk-dir-doc",{providedIn:"root",factory:function NIe(){return zt($n)}}),FIe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let gp=(()=>{var t;class e{constructor(i){this.value="ltr",this.change=new tn,i&&(this.value=function BIe(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?FIe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((i.body?i.body.dir:null)||(i.documentElement?i.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(LIe,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),lv=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),e})();const $Ie=new bt("mat-sanity-checks",{providedIn:"root",factory:function WIe(){return!0}});let Ni=(()=>{var t;class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return!VP()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[i])}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(bW),rt($Ie,8),rt($n))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[lv,lv]}),e})();function KA(t){return class extends t{get disabled(){return this._disabled}set disabled(e){this._disabled=di(e)}constructor(...e){super(...e),this._disabled=!1}}}function dv(t,e){return class extends t{get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function qA(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=di(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function JA(t,e=0){return class extends t{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?uc(n):this.defaultTabIndex}constructor(...n){super(...n),this._tabIndex=e,this.defaultTabIndex=e}}}class qIe{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const EW=fp({passive:!0,capture:!0});class JIe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=iu(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){const s=this._events.get(n);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,EW)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const s=r.get(n);s&&(s.delete(i),0===s.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,EW)))}}const AW={enterDuration:225,exitDuration:150},SW=fp({passive:!0,capture:!0}),CW=["mousedown","touchstart"],TW=["mouseup","mouseleave","touchend","touchcancel"];class s_{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ru(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...AW,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const o=i.radius||function QIe(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,c=n-r.top,l=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=c-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,v="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,T=new qIe(this,d,i,v);d.style.transform="scale3d(1, 1, 1)",T.state=0,i.persistent||(this._mostRecentTransientRipple=T);let N=null;return!v&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const $=()=>this._finishRippleTransition(T),X=()=>this._destroyRipple(T);d.addEventListener("transitionend",$),d.addEventListener("transitioncancel",X),N={onTransitionEnd:$,onTransitionCancel:X}}),this._activeRipples.set(T,N),(v||!l)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,i={...AW,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=ru(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,CW.forEach(i=>{s_._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{TW.forEach(n=>{this._triggerElement.addEventListener(n,this,SW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=fW(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!pW(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(CW.forEach(n=>s_._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&TW.forEach(n=>e.removeEventListener(n,this,SW)))}}s_._eventManager=new JIe;const hv=new bt("mat-ripple-global-options");let o_=(()=>{var t;class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new s_(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return"number"==typeof i?this._rippleRenderer.fadeInRipple(i,r,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...i})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Mt),Ve(on),Ve(Or),Ve(hv,8),Ve(Kr,8))},t.\u0275dir=Ht({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Nn("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),e})(),a_=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[Ni,Ni]}),e})();const oDe=["addListener","removeListener"],aDe=["addEventListener","removeEventListener"],cDe=["on","off"];function _p(t,e,n,i){if(F(n)&&(i=n,n=void 0),i)return _p(t,e,n).pipe(K0(i));const[r,s]=function uDe(t){return F(t.addEventListener)&&F(t.removeEventListener)}(t)?aDe.map(o=>a=>t[o](e,a,n)):function lDe(t){return F(t.addListener)&&F(t.removeListener)}(t)?oDe.map(FW(t,e)):function dDe(t){return F(t.on)&&F(t.off)}(t)?cDe.map(FW(t,e)):[];if(!r&&Ua(t))return U(o=>_p(o,e,n))(Cn(t));if(!r)throw new TypeError("Invalid event target");return new We(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function FW(t,e){return n=>i=>t[n](e,i)}const fv={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=fv;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(s=>{n=void 0,t(s)});return new C(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=fv;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=fv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class fDe extends WP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class hDe extends GP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=fv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(fv.cancelAnimationFrame(n),e._scheduled=void 0)}});let nL,mDe=1;const QA={};function BW(t){return t in QA&&(delete QA[t],!0)}const gDe={setImmediate(t){const e=mDe++;return QA[e]=!0,nL||(nL=Promise.resolve()),nL.then(()=>BW(e)&&t()),e},clearImmediate(t){BW(t)}},{setImmediate:_De,clearImmediate:bDe}=gDe,eS={setImmediate(...t){const{delegate:e}=eS;return(e?.setImmediate||_De)(...t)},clearImmediate(t){const{delegate:e}=eS;return(e?.clearImmediate||bDe)(t)},delegate:void 0};new class vDe extends WP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class yDe extends GP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=eS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(eS.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}});function iL(t=0,e,n=cIe){let i=-1;return null!=e&&(at(e)?n=e:i=e),new We(r=>{let s=function EDe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function UW(t,e=zA){return function wDe(t){return ee((e,n)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(G(n,l=>{i=!0,r=l,s||Cn(t(l)).subscribe(s=G(n,a,c))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}(()=>iL(t,e))}let jW=(()=>{var t;class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new H,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new We(r=>{this._globalSubscription||this._addGlobalListener();const s=i>0?this._scrolled.pipe(UW(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):$t()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){const s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(yi(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){const r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=ru(r),o=i.getElementRef().nativeElement;do{if(s==o)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>_p(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(on),rt(Or),rt($n,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),rL=(()=>{var t;class e{constructor(i,r,s){this._platform=i,this._change=new H,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect();return{top:-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,left:-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(UW(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Or),rt(on),rt($n,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class sL{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class nS extends sL{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class iS extends sL{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class CDe extends sL{constructor(e){super(),this.element=e instanceof Mt?e.nativeElement:e}}class oL{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof nS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof iS?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof CDe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class TDe extends oL{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||hr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let rS=(()=>{var t;class e extends oL{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new tn,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);const r=null!=i.viewContainerRef?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(At),Ve(qs),Ve($n))},t.\u0275dir=Ht({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[mn]}),e})();const HW=qMe();class MDe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ds(-this._previousScrollPosition.left),e.style.top=ds(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),HW&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),HW&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class IDe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(yi(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class zW{enable(){}disable(){}attach(){}}function aL(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function GW(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class DDe{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();aL(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let RDe=(()=>{var t;class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new zW,this.close=a=>new IDe(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new MDe(this._viewportRuler,this._document),this.reposition=a=>new DDe(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(jW),rt(rL),rt(on),rt($n))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class cL{constructor(e){if(this.scrollStrategy=new zW,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class ODe{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let WW=(()=>{var t;class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){const r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),kDe=(()=>{var t;class e extends WW{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){const c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n),rt(on,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),PDe=(()=>{var t;class e extends WW{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=iu(o)},this._clickListener=o=>{const a=iu(o),c="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){const h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(c))break;const f=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(o)):f.next(o)}}}add(i){if(super.add(i),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n),rt(Or),rt(on,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),sS=(()=>{var t;class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i="cdk-overlay-container";if(this._platform.isBrowser||VP()){const s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}const r=this._document.createElement("div");r.classList.add(i),VP()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n),rt(Or))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class mv{constructor(e,n,i,r,s,o,a,c,l,d=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new H,this._attachments=new H,this._detachments=new H,this._locationChanges=C.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new H,this._outsidePointerEvents=new H,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(er(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ds(this._config.width),e.height=ds(this._config.height),e.minWidth=ds(this._config.minWidth),e.minHeight=ds(this._config.minHeight),e.maxWidth=ds(this._config.maxWidth),e.maxHeight=ds(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=GA(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(gr(Xi(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const $W="cdk-overlay-connected-position-bounding-box",LDe=/([A-Za-z%]+)$/;class NDe{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new H,this._resizeSubscription=C.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add($W),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),d=this._getOverlayFit(l,n,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(const l of s){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&bp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($W),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return n.left<0&&(r-=n.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r,s;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){const s=YW(n);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let f=0-a,m=a+s.height-i.height,v=this._subtractOverflows(s.width,0-o,o+s.width-i.width),T=this._subtractOverflows(s.height,f,m),N=v*T;return{visibleArea:N,isCompletelyWithinViewport:s.width*s.height===N,fitsInViewportVertically:T===s.height,fitsInViewportHorizontally:v==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,s=i.right-n.x,o=XW(this._overlayRef.getConfig().minHeight),a=XW(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=YW(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new ODe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let s,o,a,d,h,f;if("top"===n.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),v=this._lastBoundingBoxSize.height;s=2*m,o=e.y-m,s>v&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-v/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)f=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),v=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>v&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-v/2)}return{top:o,left:h,bottom:a,right:f,width:d,height:s}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ds(i.height),r.top=ds(i.top),r.bottom=ds(i.bottom),r.width=ds(i.width),r.left=ds(i.left),r.right=ds(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ds(s)),o&&(r.maxWidth=ds(o))}this._lastBoundingBoxSize=i,bp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){bp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){bp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();bp(i,this._getExactOverlayY(n,e,d)),bp(i,this._getExactOverlayX(n,e,d))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=ds(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=ds(o.maxWidth):s&&(i.maxWidth="")),bp(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ds(s.y),r}_getExactOverlayX(e,n,i){let o,r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ds(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:GW(e,i),isOriginOutsideView:aL(e,i),isOverlayClipped:GW(n,i),isOverlayOutsideView:aL(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&GA(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Mt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function bp(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function XW(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(LDe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function YW(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const KW="cdk-global-overlay-wrapper";class FDe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(KW),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let m="",v="",T="";c?T="flex-start":"center"===d?(T="center",f?v=h:m=h):f?"left"===d||"end"===d?(T="flex-end",m=h):("right"===d||"start"===d)&&(T="flex-start",v=h):"left"===d||"start"===d?(T="flex-start",m=h):("right"===d||"end"===d)&&(T="flex-end",v=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":v,n.justifyContent=T,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(KW),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let BDe=(()=>{var t;class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new FDe}flexibleConnectedTo(i){return new NDe(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(rL),rt($n),rt(Or),rt(sS))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),UDe=0,Jl=(()=>{var t;class e{constructor(i,r,s,o,a,c,l,d,h,f,m,v){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=h,this._location=f,this._outsideClickDispatcher=m,this._animationsModuleType=v}create(i){const r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new cL(i);return a.direction=a.direction||this._directionality.value,new mv(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(i){const r=this._document.createElement("div");return r.id="cdk-overlay-"+UDe++,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){const i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(kf)),new TDe(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(RDe),rt(sS),rt(At),rt(BDe),rt(kDe),rt(hr),rt(on),rt($n),rt(gp),rt(Dy),rt(PDe),rt(Kr,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function yp(t,e){return{type:7,name:t,definitions:e,options:{}}}function hc(t,e=null){return{type:4,styles:e,timings:t}}function Es(t){return{type:6,styles:t,offset:null}}function fc(t,e,n){return{type:0,name:t,styles:e,options:n}}function $c(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function gv(t){return new We(e=>{Cn(t()).subscribe(e)})}function hL(t){return I(()=>t)}function u$(t,e){return e?n=>J0(e.pipe(er(1),function CRe(){return ee((t,e)=>{t.subscribe(G(e,V))})}()),n.pipe(u$(t))):U((n,i)=>Cn(t(n,i)).pipe(er(1),hL(n)))}function h$(t,e=zA){const n=iL(t,e);return u$(()=>n)}function _$(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return I(n=>{let i=n;for(let r=0;r<e;r++){const s=i?.[t[r]];if(!(typeof s<"u"))return;i=s}return i})}function vp(t){return ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}g(1563);class cS{}class lS{}class Xc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Xc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Xc;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Xc?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class JRe{encodeKey(e){return b$(e)}encodeValue(e){return b$(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const QRe=/%(\d[a-f0-9])/gi,e2e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function b$(t){return encodeURIComponent(t).replace(QRe,(e,n)=>e2e[n]??e)}function dS(t){return`${t}`}class lr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new JRe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ZRe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(dS):[dS(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new lr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(dS(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(dS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class us{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function y$(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function v$(t){return typeof Blob<"u"&&t instanceof Blob}function x$(t){return typeof FormData<"u"&&t instanceof FormData}class bv{constructor(e,n,i,r){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function t2e(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Xc),this.context||(this.context=new us),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new lr,this.urlWithParams=n}serializeBody(){return null===this.body?null:y$(this.body)||v$(this.body)||x$(this.body)||function n2e(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof lr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||x$(this.body)?null:v$(this.body)?this.body.type||null:y$(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new bv(n,i,s,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var c_=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(c_||{});class fL{constructor(e,n=200,i="OK"){this.headers=e.headers||new Xc,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class pL extends fL{constructor(e={}){super(e),this.type=c_.ResponseHeader}clone(e={}){return new pL({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class l_ extends fL{constructor(e={}){super(e),this.type=c_.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new l_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class w$ extends fL{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function mL(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Th=(()=>{var t;class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof bv)o=i;else{let l,d;l=s.headers instanceof Xc?s.headers:new Xc(s.headers),s.params&&(d=s.params instanceof lr?s.params:new lr({fromObject:s.params})),o=new bv(i,r,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const a=$t(o).pipe(function _v(t,e){return F(e)?U(t,e,1):U(t,1)}(l=>this.handler.handle(l)));if(i instanceof bv||"events"===s.observe)return a;const c=a.pipe(yi(l=>l instanceof l_));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(I(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(I(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(I(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return c.pipe(I(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:(new lr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,mL(s,r))}post(i,r,s={}){return this.request("POST",i,mL(s,r))}put(i,r,s={}){return this.request("PUT",i,mL(s,r))}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(cS))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();function S$(t,e){return e(t)}function r2e(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}const o2e=new bt(""),yv=new bt(""),C$=new bt("");function a2e(){let t=null;return(e,n)=>{null===t&&(t=(zt(o2e,{optional:!0})??[]).reduceRight(r2e,S$));const i=zt(pE),r=i.add();return t(e,n).pipe(vp(()=>i.remove(r)))}}let T$=(()=>{var t;class e extends cS{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=zt(pE)}handle(i){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(yv),...this.injector.get(C$,[])]));this.chain=s.reduceRight((o,a)=>function s2e(t,e,n){return(i,r)=>n.runInContext(()=>e(i,s=>t(s,r)))}(o,a,this.injector),S$)}const r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(vp(()=>this.pendingTasks.remove(r)))}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(lS),rt(No))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const u2e=/^\)\]\}',?\n/;let I$=(()=>{var t;class e{constructor(i){this.xhrFactory=i}handle(i){if("JSONP"===i.method)throw new Pt(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Vi(r.\u0275loadImpl()):$t(null)).pipe(Oe(()=>new We(o=>{const a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((N,$)=>a.setRequestHeader(N,$.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){const N=i.detectContentTypeHeader();null!==N&&a.setRequestHeader("Content-Type",N)}if(i.responseType){const N=i.responseType.toLowerCase();a.responseType="json"!==N?N:"text"}const c=i.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const N=a.statusText||"OK",$=new Xc(a.getAllResponseHeaders()),X=function h2e(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(a)||i.url;return l=new pL({headers:$,status:a.status,statusText:N,url:X}),l},h=()=>{let{headers:N,status:$,statusText:X,url:Q}=d(),ve=null;204!==$&&(ve=typeof a.response>"u"?a.responseText:a.response),0===$&&($=ve?200:0);let Pe=$>=200&&$<300;if("json"===i.responseType&&"string"==typeof ve){const $e=ve;ve=ve.replace(u2e,"");try{ve=""!==ve?JSON.parse(ve):null}catch(nt){ve=$e,Pe&&(Pe=!1,ve={error:nt,text:ve})}}Pe?(o.next(new l_({body:ve,headers:N,status:$,statusText:X,url:Q||void 0})),o.complete()):o.error(new w$({error:ve,headers:N,status:$,statusText:X,url:Q||void 0}))},f=N=>{const{url:$}=d(),X=new w$({error:N,status:a.status||0,statusText:a.statusText||"Unknown Error",url:$||void 0});o.error(X)};let m=!1;const v=N=>{m||(o.next(d()),m=!0);let $={type:c_.DownloadProgress,loaded:N.loaded};N.lengthComputable&&($.total=N.total),"text"===i.responseType&&a.responseText&&($.partialText=a.responseText),o.next($)},T=N=>{let $={type:c_.UploadProgress,loaded:N.loaded};N.lengthComputable&&($.total=N.total),o.next($)};return a.addEventListener("load",h),a.addEventListener("error",f),a.addEventListener("timeout",f),a.addEventListener("abort",f),i.reportProgress&&(a.addEventListener("progress",v),null!==c&&a.upload&&a.upload.addEventListener("progress",T)),a.send(c),o.next({type:c_.Sent}),()=>{a.removeEventListener("error",f),a.removeEventListener("abort",f),a.removeEventListener("load",h),a.removeEventListener("timeout",f),i.reportProgress&&(a.removeEventListener("progress",v),null!==c&&a.upload&&a.upload.removeEventListener("progress",T)),a.readyState!==a.DONE&&a.abort()}})))}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(aj))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const gL=new bt("XSRF_ENABLED"),D$=new bt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),R$=new bt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class O${}let m2e=(()=>{var t;class e{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=KU(i,this.cookieName),this.lastCookieString=i),this.lastToken}}return(t=e).\u0275fac=function(i){return new(i||t)(rt($n),rt(xa),rt(D$))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();function g2e(t,e){const n=t.url.toLowerCase();if(!zt(gL)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const i=zt(O$).getToken(),r=zt(R$);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var Mh=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Mh||{});function xp(t,e){return{\u0275kind:t,\u0275providers:e}}function _2e(...t){const e=[Th,I$,T$,{provide:cS,useExisting:T$},{provide:lS,useExisting:I$},{provide:yv,useValue:g2e,multi:!0},{provide:gL,useValue:!0},{provide:O$,useClass:m2e}];for(const n of t)e.push(...n.\u0275providers);return function Yb(t){return{\u0275providers:t}}(e)}const k$=new bt("LEGACY_INTERCEPTOR_FN");let P$=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({providers:[_2e(xp(Mh.LegacyInterceptors,[{provide:k$,useFactory:a2e},{provide:yv,useExisting:k$,multi:!0}]))]}),e})();const A2e=["*"];let hS;function vv(t){return function S2e(){if(void 0===hS&&(hS=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(hS=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return hS}()?.createHTML(t)||t}function L$(t){return Error(`Unable to find icon with the name "${t}"`)}function N$(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function F$(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class wp{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let fS=(()=>{var t;class e{constructor(i,r,s,o){this._httpClient=i,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(i,r,s){return this.addSvgIconInNamespace("",i,r,s)}addSvgIconLiteral(i,r,s){return this.addSvgIconLiteralInNamespace("",i,r,s)}addSvgIconInNamespace(i,r,s,o){return this._addSvgIconConfig(i,r,new wp(s,null,o))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,s,o){const a=this._sanitizer.sanitize(is.HTML,s);if(!a)throw F$(s);const c=vv(a);return this._addSvgIconConfig(i,r,new wp("",c,o))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,s){return this._addSvgIconSetConfig(i,new wp(r,null,s))}addSvgIconSetLiteralInNamespace(i,r,s){const o=this._sanitizer.sanitize(is.HTML,r);if(!o)throw F$(r);const a=vv(o);return this._addSvgIconSetConfig(i,new wp("",a,s))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){const r=this._sanitizer.sanitize(is.RESOURCE_URL,i);if(!r)throw N$(i);const s=this._cachedIconsByUrl.get(r);return s?$t(pS(s)):this._loadSvgIconFromConfig(new wp(i,null)).pipe(Li(o=>this._cachedIconsByUrl.set(r,o)),I(o=>pS(o)))}getNamedSvgIcon(i,r=""){const s=B$(r,i);let o=this._svgIconConfigs.get(s);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,i),o)return this._svgIconConfigs.set(s,o),this._getSvgFromConfig(o);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):eu(L$(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?$t(pS(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(I(r=>pS(r)))}_getSvgFromIconSetConfigs(i,r){const s=this._extractIconWithNameFromAnySet(i,r);return s?$t(s):q0(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(lc(c=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(is.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),$t(null)})))).pipe(I(()=>{const a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw L$(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.svgText&&o.svgText.toString().indexOf(i)>-1){const a=this._svgElementFromConfig(o),c=this._extractSvgIconFromSet(a,i,o.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(Li(r=>i.svgText=r),I(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?$t(null):this._fetchIcon(i).pipe(Li(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,s){const o=i.querySelector(`[id="${r}"]`);if(!o)return null;const a=o.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,s);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),s);const c=this._svgElementFromString(vv("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,s)}_svgElementFromString(i){const r=this._document.createElement("DIV");r.innerHTML=i;const s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(i){const r=this._svgElementFromString(vv("<svg></svg>")),s=i.attributes;for(let o=0;o<s.length;o++){const{name:a,value:c}=s[o];"id"!==a&&r.setAttribute(a,c)}for(let o=0;o<i.childNodes.length;o++)i.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){const{url:r,options:s}=i,o=s?.withCredentials??!1;if(!this._httpClient)throw function C2e(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(is.RESOURCE_URL,r);if(!a)throw N$(r);const c=this._inProgressUrlFetches.get(a);if(c)return c;const l=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(I(d=>vv(d)),vp(()=>this._inProgressUrlFetches.delete(a)),io());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(i,r,s){return this._svgIconConfigs.set(B$(i,r),s),this}_addSvgIconSetConfig(i,r){const s=this._iconSetConfigs.get(i);return s?s.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){const r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let s=0;s<this._resolvers.length;s++){const o=this._resolvers[s](r,i);if(o)return M2e(o)?new wp(o.url,null,o.options):new wp(o,null)}}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Th,8),rt(Ny),rt($n,8),rt(kc))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function pS(t){return t.cloneNode(!0)}function B$(t,e){return t+":"+e}function M2e(t){return!(!t.url||!t.options)}const I2e=dv(class{constructor(t){this._elementRef=t}}),D2e=new bt("MAT_ICON_DEFAULT_OPTIONS"),R2e=new bt("mat-icon-location",{providedIn:"root",factory:function O2e(){const t=zt($n),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),U$=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],k2e=U$.map(t=>`[${t}]`).join(", "),P2e=/^url\(['"]?#(.*?)['"]?\)$/;let d_=(()=>{var t;class e extends I2e{get inline(){return this._inline}set inline(i){this._inline=di(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){const r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){const r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,s,o,a,c){super(i),this._iconRegistry=r,this._location=o,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=C.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),s||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];const r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const i=this._elementsWithExternalReferences;if(i&&i.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){const i=this._elementRef.nativeElement;let r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const s=i.childNodes[r];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>i.classList.remove(s)),r.forEach(s=>i.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return"string"==typeof i?i.trim().split(" ")[0]:i}_prependPathToReferences(i){const r=this._elementsWithExternalReferences;r&&r.forEach((s,o)=>{s.forEach(a=>{o.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){const r=i.querySelectorAll(k2e),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)U$.forEach(a=>{const c=r[o],l=c.getAttribute(a),d=l?l.match(P2e):null;if(d){let h=s.get(c);h||(h=[],s.set(c,h)),h.push({name:a,value:d[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){const[r,s]=this._splitIconName(i);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(er(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${s}! ${o.message}`))})}}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Mt),Ve(fS),Ka("aria-hidden"),Ve(R2e),Ve(kc),Ve(D2e,8))},t.\u0275cmp=kn({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(wi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Nn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[mn],ngContentSelectors:A2e,decls:1,vars:0,template:function(i,r){1&i&&(qr(),Ln(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})();function aOe(t,e){}class mS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let X$=(()=>{var t;class e extends oL{constructor(i,r,s,o,a,c,l,d){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),f},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){const i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const i=this._config.restoreFocus;let r=null;if("string"==typeof i?r=this._document.querySelector(i):"boolean"==typeof i?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&"function"==typeof r.focus){const s=UA(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const i=this._elementRef.nativeElement,r=UA();return i===r||i.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=UA())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Mt),Ve(ZP),Ve($n,8),Ve(mS),Ve(XA),Ve(on),Ve(mv),Ve(Ch))},t.\u0275cmp=kn({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Pi(rS,7),2&i){let s;Bn(s=Un())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&wi("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[mn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&fn(0,aOe,0,0,"ng-template",0)},dependencies:[rS],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class bL{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new H,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Wc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const Y$=new bt("DialogScrollStrategy"),cOe=new bt("DialogData"),lOe=new bt("DefaultDialogConfig");let hOe=0,K$=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,c){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this._ariaHiddenElements=new Map,this.afterAllClosed=gv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(dc(void 0))),this._scrollStrategy=c}open(i,r){(r={...this._defaultOptions||new mS,...r}).id=r.id||"cdk-dialog-"+hOe++,r.id&&this.getDialogById(r.id);const o=this._getOverlayConfig(r),a=this._overlay.create(o),c=new bL(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){yL(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){yL(this._openDialogsAtThisLevel,i=>{!1===i.config.closeOnDestroy&&this._removeOpenDialog(i,!1)}),yL(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){const r=new cL({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){const o=s.injector||s.viewContainerRef?.injector,a=[{provide:mS,useValue:s},{provide:bL,useValue:r},{provide:mv,useValue:i}];let c;s.container?"function"==typeof s.container?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=X$;const l=new nS(c,s.viewContainerRef,hr.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,s,o){if(i instanceof Qa){const a=this._createInjector(o,r,s,void 0);let c={$implicit:o.data,dialogRef:r};o.templateContext&&(c={...c,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),s.attachTemplatePortal(new iS(i,null,c,a))}else{const a=this._createInjector(o,r,s,this._injector),c=s.attachComponentPortal(new nS(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,s,o){const a=i.injector||i.viewContainerRef?.injector,c=[{provide:cOe,useValue:i.data},{provide:bL,useValue:r}];return i.providers&&("function"==typeof i.providers?c.push(...i.providers(r,i,s)):c.push(...i.providers)),i.direction&&(!a||!a.get(gp,null,{optional:!0}))&&c.push({provide:gp,useValue:{value:i.direction,change:$t()}}),hr.create({parent:a||o,providers:c})}_removeOpenDialog(i,r){const s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const i=this._overlayContainer.getContainerElement();if(i.parentElement){const r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){const o=r[s];o!==i&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Jl),rt(hr),rt(lOe,8),rt(t,12),rt(sS),rt(Y$))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();function yL(t,e){let n=t.length;for(;n--;)e(t[n])}function pOe(t,e){}class gS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const vL="mdc-dialog--open",q$="mdc-dialog--opening",J$="mdc-dialog--closing";let _Oe=(()=>{var t;class e extends X${constructor(i,r,s,o,a,c,l,d){super(i,r,s,o,a,c,l,d),this._animationStateChanged=new tn}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Mt),Ve(ZP),Ve($n,8),Ve(gS),Ve(XA),Ve(on),Ve(mv),Ve(Ch))},t.\u0275cmp=kn({type:t,selectors:[["ng-component"]],features:[mn],decls:0,vars:0,template:function(i,r){},encapsulation:2}),e})();const Z$="--mat-dialog-transition-duration";function Q$(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?uc(t.substring(0,t.length-2)):t.endsWith("s")?1e3*uc(t.substring(0,t.length-1)):"0"===t?0:null}let bOe=(()=>{var t;class e extends _Oe{constructor(i,r,s,o,a,c,l,d,h){super(i,r,s,o,a,c,l,h),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?Q$(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?Q$(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Z$,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(q$,vL)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(vL),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(vL),this._animationsEnabled?(this._hostElement.style.setProperty(Z$,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(J$)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(q$,J$)}_waitForAnimationToComplete(i,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(i):i()})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Mt),Ve(ZP),Ve($n,8),Ve(gS),Ve(XA),Ve(on),Ve(mv),Ve(Kr,8),Ve(Ch))},t.\u0275cmp=kn({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(Rl("id",r._config.id),wi("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Nn("_mat-animation-noopable",!r._animationsEnabled))},features:[mn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Ct(0,"div",0)(1,"div",1),fn(2,pOe,0,0,"ng-template",2),Dt()())},dependencies:[rS],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),e})();class xL{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new H,this._beforeClosed=new H,this._state=0,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(yi(r=>"opened"===r.state),er(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(yi(r=>"closed"===r.state),er(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Xi(this.backdropClick(),this.keydownEvents().pipe(yi(r=>27===r.keyCode&&!this.disableClose&&!Wc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function yOe(t,e,n){t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(yi(n=>"closing"===n.state),er(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const eX=new bt("MatMdcDialogData"),vOe=new bt("mat-mdc-dialog-default-options"),tX=new bt("mat-mdc-dialog-scroll-strategy");let EOe=0,AOe=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,c,l,d,h,f){this._overlay=i,this._defaultOptions=s,this._parentDialog=o,this._dialogRefConstructor=l,this._dialogContainerType=d,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new H,this._afterOpenedAtThisLevel=new H,this._idPrefix="mat-dialog-",this.dialogConfigClass=gS,this.afterAllClosed=gv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(dc(void 0))),this._scrollStrategy=c,this._dialog=r.get(K$)}open(i,r){let s;(r={...this._defaultOptions||new gS,...r}).id=r.id||`${this._idPrefix}${EOe++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(i,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:mS,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,r,l),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}}return(t=e).\u0275fac=function(i){Qu()},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),_S=(()=>{var t;class e extends AOe{constructor(i,r,s,o,a,c,l,d){super(i,r,o,c,l,a,xL,bOe,eX,d),this._idPrefix="mat-mdc-dialog-"}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Jl),rt(hr),rt(Dy,8),rt(vOe,8),rt(tX),rt(t,12),rt(sS),rt(Kr,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),SOe=0,nX=(()=>{var t;class e{constructor(i,r,s){this._dialogRef=i,this._elementRef=r,this._dialog=s,this.id="mat-mdc-dialog-title-"+SOe++}ngOnInit(){this._dialogRef||(this._dialogRef=function COe(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const i=this._dialogRef?._containerInstance?._ariaLabelledByQueue;i&&Promise.resolve().then(()=>{const r=i.indexOf(this.id);r>-1&&i.splice(r,1)})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(xL,8),Ve(Mt),Ve(_S))},t.\u0275dir=Ht({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&Rl("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),e})(),iX=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=Ht({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),e})(),oX=(()=>{var t;class e{constructor(){this._listeners=[]}notify(i,r){for(let s of this._listeners)s(i,r)}listen(i){return this._listeners.push(i),()=>{this._listeners=this._listeners.filter(r=>i!==r)}}ngOnDestroy(){this._listeners=[]}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const aX=new bt("CdkAccordion");let TOe=0,MOe=(()=>{var t;class e{get expanded(){return this._expanded}set expanded(i){i=di(i),this._expanded!==i&&(this._expanded=i,this.expandedChange.emit(i),i?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(i){this._disabled=di(i)}constructor(i,r,s){this.accordion=i,this._changeDetectorRef=r,this._expansionDispatcher=s,this._openCloseAllSubscription=C.EMPTY,this.closed=new tn,this.opened=new tn,this.destroyed=new tn,this.expandedChange=new tn,this.id="cdk-accordion-child-"+TOe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=s.listen((o,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(i=>{this.disabled||(this.expanded=i)})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(aX,12),Ve(os),Ve(oX))},t.\u0275dir=Ht({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[li([{provide:aX,useValue:void 0}])]}),e})();const DOe=["body"];function ROe(t,e){}const OOe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],kOe=["mat-expansion-panel-header","*","mat-action-row"];function POe(t,e){1&t&&jn(0,"span",2),2&t&&Ut("@indicatorRotate",Fn()._getExpandedState())}const LOe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],NOe=["mat-panel-title","mat-panel-description","*"],cX=new bt("MAT_ACCORDION"),lX="225ms cubic-bezier(0.4,0.0,0.2,1)",dX={indicatorRotate:yp("indicatorRotate",[fc("collapsed, void",Es({transform:"rotate(0deg)"})),fc("expanded",Es({transform:"rotate(180deg)"})),$c("expanded <=> collapsed, void => collapsed",hc(lX))]),bodyExpansion:yp("bodyExpansion",[fc("collapsed, void",Es({height:"0px",visibility:"hidden"})),fc("expanded",Es({height:"*",visibility:""})),$c("expanded <=> collapsed, void => collapsed",hc(lX))])},uX=new bt("MAT_EXPANSION_PANEL");let FOe=(()=>{var t;class e{constructor(i,r){this._template=i,this._expansionPanel=r}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Qa),Ve(uX,8))},t.\u0275dir=Ht({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),BOe=0;const hX=new bt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let fX=(()=>{var t;class e extends MOe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(i){this._hideToggle=di(i)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(i){this._togglePosition=i}constructor(i,r,s,o,a,c,l){super(i,r,s),this._viewContainerRef=o,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new tn,this.afterCollapse=new tn,this._inputChanges=new H,this._headerId="mat-expansion-panel-header-"+BOe++,this._bodyAnimationDone=new H,this.accordion=i,this._document=a,this._bodyAnimationDone.pipe(Ue((d,h)=>d.fromState===h.fromState&&d.toState===h.toState)).subscribe(d=>{"void"!==d.fromState&&("expanded"===d.toState?this.afterExpand.emit():"collapsed"===d.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(dc(null),yi(()=>this.expanded&&!this._portal),er(1)).subscribe(()=>{this._portal=new iS(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(i){this._inputChanges.next(i)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const i=this._document.activeElement,r=this._body.nativeElement;return i===r||r.contains(i)}return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(cX,12),Ve(os),Ve(oX),Ve(qs),Ve($n),Ve(Kr,8),Ve(hX,8))},t.\u0275cmp=kn({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(1&i&&function ss(t,e,n,i){const r=bi();if(r.firstCreatePass){const s=ns();L4(r,new O4(e,n,i),s.index),function Jee(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}P4(r,St(),n)}(s,FOe,5),2&i){let o;Bn(o=Un())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(1&i&&Pi(DOe,5),2&i){let s;Bn(s=Un())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Nn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[li([{provide:cX,useValue:void 0},{provide:uX,useExisting:t}]),mn,Dr],ngContentSelectors:kOe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(qr(OOe),Ln(0),Ct(1,"div",0,1),gn("@bodyExpansion.done",function(o){return r._bodyAnimationDone.next(o)}),Ct(3,"div",2),Ln(4,1),fn(5,ROe,0,0,"ng-template",3),Dt(),Ln(6,2),Dt()),2&i&&(Rt(1),Ut("@bodyExpansion",r._getExpandedState())("id",r.id),wi("aria-labelledby",r._headerId),Rt(4),Ut("cdkPortalOutlet",r._portal))},dependencies:[rS],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[dX.bodyExpansion]},changeDetection:0}),e})();class UOe{}const jOe=JA(UOe);let VOe=(()=>{var t;class e extends jOe{constructor(i,r,s,o,a,c,l){super(),this.panel=i,this._element=r,this._focusMonitor=s,this._changeDetectorRef=o,this._animationMode=c,this._parentChangeSubscription=C.EMPTY;const d=i.accordion?i.accordion._stateChanges.pipe(yi(h=>!(!h.hideToggle&&!h.togglePosition))):pe;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Xi(i.opened,i.closed,d,i._inputChanges.pipe(yi(h=>!!(h.hideToggle||h.disabled||h.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),i.closed.pipe(yi(()=>i._containsFocus())).subscribe(()=>s.focusVia(r,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const i=this._isExpanded();return i&&this.expandedHeight?this.expandedHeight:!i&&this.collapsedHeight?this.collapsedHeight:null}_keydown(i){switch(i.keyCode){case 32:case 13:Wc(i)||(i.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(i))}}focus(i,r){i?this._focusMonitor.focusVia(this._element,i,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(i=>{i&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(fX,1),Ve(Mt),Ve(Ch),Ve(os),Ve(hX,8),Ve(Kr,8),Ka("tabindex"))},t.\u0275cmp=kn({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&gn("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&i&&(wi("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),iE("height",r._getHeaderHeight()),Nn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[mn],ngContentSelectors:NOe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(qr(LOe),Ct(0,"span",0),Ln(1),Ln(2,1),Ln(3,2),Dt(),fn(4,POe,1,1,"span",1)),2&i&&(Nn("mat-content-hide-toggle",!r._showToggle()),Rt(4),Ut("ngIf",r._showToggle()))},dependencies:[Uc],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[dX.indicatorRotate]},changeDetection:0}),e})();function pX(t,e,n){return n?pX(t,e).pipe(K0(n)):new We(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o),s=t(r);return F(e)?()=>e(r,s):void 0})}function bS(){return ee((t,e)=>{let n=null;t._refCount++;const i=G(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}class EL extends We{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,fe(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new C;const n=this.getSubject();e.add(this.source.subscribe(G(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=C.EMPTY)}return e}refCount(){return bS()(this)}}const GOe={connector:()=>new H};function mX(t,e=GOe){const{connector:n}=e;return ee((i,r)=>{const s=n();Cn(t(function zOe(t){return new We(e=>t.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}function gX(t,e){const n=F(t)?t:()=>t;return F(e)?mX(e,{connector:n}):i=>new EL(i,n)}function AL(...t){const e=It(t);return ee((n,i)=>{const r=t.length,s=new Array(r);let o=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)Cn(t[c]).subscribe(G(i,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(Se))&&(o=null))},V));n.subscribe(G(i,c=>{if(a){const l=[c,...s];i.next(e?e(...l):l)}}))})}const{isArray:XOe}=Array;function YOe(t){return 1===t.length&&XOe(t[0])?t[0]:t}function bX(...t){const e=It(t);return e?qe(bX(...t),K0(e)):ee((n,i)=>{h9([n,...YOe(t)])(i)})}const qOe=["youtubeContainer"];let xX=(()=>{var t;class e{get videoId(){return this._videoId.value}set videoId(i){this._videoId.next(i)}get height(){return this._height.value}set height(i){this._height.next(i||390)}get width(){return this._width.value}set width(i){this._width.next(i||640)}set startSeconds(i){this._startSeconds.next(i)}set endSeconds(i){this._endSeconds.next(i)}set suggestedQuality(i){this._suggestedQuality.next(i)}get playerVars(){return this._playerVars.value}set playerVars(i){this._playerVars.next(i)}get disableCookies(){return this._disableCookies.value}set disableCookies(i){this._disableCookies.next(!!i)}constructor(i,r){this._ngZone=i,this._youtubeContainer=new H,this._destroyed=new H,this._playerChanges=new Ke(void 0),this._videoId=new Ke(void 0),this._height=new Ke(390),this._width=new Ke(640),this._startSeconds=new Ke(void 0),this._endSeconds=new Ke(void 0),this._suggestedQuality=new Ke(void 0),this._playerVars=new Ke(void 0),this._disableCookies=new Ke(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=ih(r)}ngOnInit(){if(!this._isBrowser)return;let i=$t(!0);if(!window.YT||!window.YT.Player){const o=new H;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>o.next(!0))},i=o.pipe(er(1),dc(!1))}const r=this._disableCookies.pipe(I(o=>o?"https://www.youtube-nocookie.com":void 0)),s=function eke(t,e,n,i,r,s,o,a){const c=cc([e,n,o]).pipe(AL(cc([r,s])),I(([l,d])=>{const[h,f,m]=l,[v,T]=d;if(h||m?.list&&m?.listType)return{videoId:h,playerVars:m,width:v,height:T,host:f}}));return cc([t,c,$t(a)]).pipe(function tke(t){return qe(bX(t),function KOe(t){return ee((e,n)=>{let i=!1,r=0;e.subscribe(G(n,s=>(i||(i=!t(s,r++)))&&n.next(s)))})}(([e,n])=>!n),I(([e])=>e))}(i),function _X(t,e){return ee(function $Oe(t,e,n,i,r){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(G(o,d=>{const h=l++;c=a?t(c,d,h):(a=!0,d),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}(t,e,arguments.length>=2,!0))}(nke,void 0),Ue())}(this._youtubeContainer,this._videoId,r,i,this._width,this._height,this._playerVars,this._ngZone).pipe(Li(o=>{this._playerChanges.next(o)}),function QOe(t){return U(e=>e?wX(e)?$t(e):new We(n=>{let i=!1,r=!1;const s=o=>{r=!0,i||(o.target.removeEventListener("onReady",s),n.next(o.target))};return e.addEventListener("onReady",s),()=>{i=!0,r||t(e)}}).pipe(er(1),dc(void 0)):$t(void 0))}(o=>{wX(o)||o.destroy()}),gr(this._destroyed),function WOe(t){return t?e=>mX(t)(e):e=>gX(new H)(e)}());s.subscribe(o=>{this._player=o,o&&this._pendingPlayerState&&this._initializePlayer(o,this._pendingPlayerState),this._pendingPlayerState=void 0}),function JOe(t,e,n){cc([t,e,n]).subscribe(([i,r,s])=>i&&i.setSize(r,s))}(s,this._width,this._height),function ZOe(t,e){cc([t,e]).subscribe(([n,i])=>n&&i&&n.setPlaybackQuality(i))}(s,this._suggestedQuality),function ike(t,e,n,i,r,s){const o=cc([n,i]).pipe(I(([d,h])=>({startSeconds:d,endSeconds:h}))),a=o.pipe(SL(t,d=>!!d&&!function rke(t){const e=t.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),c=e.pipe(SL(t,(d,h)=>!!d&&d.videoId!==h));Xi(t.pipe(SL(cc([e,o]),([d,h],f)=>!(!f||d==f.videoId&&!h.startSeconds&&!h.endSeconds))),c,a).pipe(AL(cc([t,e,o,r])),I(([d,h])=>h),gr(s)).subscribe(([d,h,f,m])=>{!h||!d||(d.videoId=h,d.cueVideoById({videoId:h,suggestedQuality:m,...f}))})}(s,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),s.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(i,r){this._player?this._player.seekTo(i,r):this._getPendingState().seek={seconds:i,allowSeekAhead:r}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(i){this._player?this._player.setVolume(i):this._getPendingState().volume=i}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(i){if(this._player)return this._player.setPlaybackRate(i);this._getPendingState().playbackRate=i}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(i,r){const{playbackState:s,playbackRate:o,volume:a,muted:c,seek:l}=r;switch(s){case YT.PlayerState.PLAYING:i.playVideo();break;case YT.PlayerState.PAUSED:i.pauseVideo();break;case YT.PlayerState.CUED:i.stopVideo()}null!=o&&i.setPlaybackRate(o),null!=a&&i.setVolume(a),null!=c&&(c?i.mute():i.unMute()),null!=l&&i.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(i){return this._playerChanges.pipe(Oe(r=>r?pX(s=>{r.addEventListener(i,s)},s=>{try{r.removeEventListener&&r.removeEventListener(i,s)}catch{}}):$t()),r=>new We(s=>r.subscribe({next:o=>this._ngZone.run(()=>s.next(o)),error:o=>s.error(o),complete:()=>s.complete()})),gr(this._destroyed))}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(on),Ve(xa))},t.\u0275cmp=kn({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Pi(qOe,5),2&i){let s;Bn(s=Un())&&(r.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&jn(0,"div",null,0)},encapsulation:2,changeDetection:0}),e})();function nke(t,[e,n,i]){if(t&&n&&(t.playerVars!==n.playerVars||t.host!==n.host))t.destroy();else{if(!n)return void(t&&t.destroy());if(t)return t}const r=i.runOutsideAngular(()=>new YT.Player(e,n));return r.videoId=n.videoId,r.playerVars=n.playerVars,r.host=n.host,r}function wX(t){return"getPlayerStatus"in t}function SL(t,e){return qe(AL(t),yi(([n,i])=>e(i,n)),I(([n])=>n))}function EX(t=oke){return ee((e,n)=>{let i=!1;e.subscribe(G(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function oke(){return new Y0}let Ap={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const SX=/[&<>"']/,cke=new RegExp(SX.source,"g"),CX=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,lke=new RegExp(CX.source,"g"),dke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TX=t=>dke[t];function wo(t,e){if(e){if(SX.test(t))return t.replace(cke,TX)}else if(CX.test(t))return t.replace(lke,TX);return t}const uke=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function MX(t){return t.replace(uke,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const hke=/(^|[^\[])\^/g;function tr(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(i,r)=>(r=(r=r.source||r).replace(hke,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}const fke=/[^\w:]/g,pke=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function IX(t,e,n){if(t){let i;try{i=decodeURIComponent(MX(n)).replace(fke,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!pke.test(n)&&(n=function bke(t,e){yS[" "+t]||(yS[" "+t]=mke.test(t)?t+"/":xS(t,"/",!0));const n=-1===(t=yS[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(gke,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(_ke,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const yS={},mke=/^[^:]+:\/*[^/]*$/,gke=/^([^:]+:)[\s\S]*$/,_ke=/^([^:]+:\/*[^/]*)[\s\S]*$/,vS={exec:function(){}};function DX(t,e){const i=t.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function xS(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const s=t.charAt(i-r-1);if(s!==e||n){if(s===e||!n)break;r++}else r++}return t.slice(0,i-r)}function RX(t,e){if(e<1)return"";let n="";for(;e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function OX(t,e,n,i){const r=e.href,s=e.title?wo(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:s,text:wo(o)}}class CL{constructor(e){this.options=e||Ap}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:xS(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function xke(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const s=r.match(/^\s+/);if(null===s)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=xS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:s,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i,r,s,o,a,c,l,d,h,f,m,v,T=n[1].trim();const N=T.length>1,$={type:"list",raw:"",ordered:N,start:N?+T.slice(0,-1):"",loose:!1,items:[]};T=N?`\\d{1,9}\\${T.slice(-1)}`:`\\${T}`,this.options.pedantic&&(T=N?T:"[*+-]");const X=new RegExp(`^( {0,3}${T})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(v=!1,(n=X.exec(e))&&!this.rules.block.hr.test(e));){if(i=n[0],e=e.substring(i.length),d=n[2].split("\n",1)[0].replace(/^\t+/,ve=>" ".repeat(3*ve.length)),h=e.split("\n",1)[0],this.options.pedantic?(o=2,m=d.trimLeft()):(o=n[2].search(/[^ ]/),o=o>4?1:o,m=d.slice(o),o+=n[1].length),c=!1,!d&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),v=!0),!v){const ve=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Pe=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),$e=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),nt=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;e&&(f=e.split("\n",1)[0],h=f,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!($e.test(h)||nt.test(h)||ve.test(h)||Pe.test(e)));){if(h.search(/[^ ]/)>=o||!h.trim())m+="\n"+h.slice(o);else{if(c||d.search(/[^ ]/)>=4||$e.test(d)||nt.test(d)||Pe.test(d))break;m+="\n"+h}!c&&!h.trim()&&(c=!0),i+=f+"\n",e=e.substring(f.length+1),d=h.slice(o)}}$.loose||(l?$.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(m),r&&(s="[ ] "!==r[0],m=m.replace(/^\[[ xX]\] +/,""))),$.items.push({type:"list_item",raw:i,task:!!r,checked:s,loose:!1,text:m}),$.raw+=i}$.items[$.items.length-1].raw=i.trimRight(),$.items[$.items.length-1].text=m.trimRight(),$.raw=$.raw.trimRight();const Q=$.items.length;for(a=0;a<Q;a++)if(this.lexer.state.top=!1,$.items[a].tokens=this.lexer.blockTokens($.items[a].text,[]),!$.loose){const ve=$.items[a].tokens.filter($e=>"space"===$e.type),Pe=ve.length>0&&ve.some($e=>/\n.*\n/.test($e.raw));$.loose=Pe}if($.loose)for(a=0;a<Q;a++)$.items[a].loose=!0;return $}}html(e){const n=this.rules.block.html.exec(e);if(n){const i={type:"html",raw:n[0],pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(n[0]):wo(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(n){const i={type:"table",header:DX(n[1]).map(r=>({text:r})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=n[0];let s,o,a,c,r=i.align.length;for(s=0;s<r;s++)i.align[s]=/^ *-+: *$/.test(i.align[s])?"right":/^ *:-+: *$/.test(i.align[s])?"center":/^ *:-+ *$/.test(i.align[s])?"left":null;for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=DX(i.rows[s],i.header.length).map(l=>({text:l}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(r=i.rows.length,o=0;o<r;o++)for(c=i.rows[o],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:wo(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):wo(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=xS(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function yke(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let i=0,r=0;for(;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return-1}(n[2],"()");if(o>-1){const c=(0===n[0].indexOf("!")?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),OX(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return OX(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const s=r[1]||r[2]||"";if(!s||s&&(""===i||this.rules.inline.punctuation.exec(i))){const o=r[0].length-1;let a,c,l=o,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+o);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=a.length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const f=e.slice(0,o+r.index+(r[0].length-a.length)+c);if(Math.min(o,c)%2){const v=f.slice(1,-1);return{type:"em",raw:f,text:v,tokens:this.lexer.inlineTokens(v)}}const m=f.slice(2,-2);return{type:"strong",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=wo(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const i=this.rules.inline.autolink.exec(e);if(i){let r,s;return"@"===i[2]?(r=wo(this.options.mangle?n(i[1]):i[1]),s="mailto:"+r):(r=wo(i[1]),s=r),{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e,n){let i;if(i=this.rules.inline.url.exec(e)){let r,s;if("@"===i[2])r=wo(this.options.mangle?n(i[0]):i[0]),s="mailto:"+r;else{let o;do{o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(o!==i[0]);r=wo(i[0]),s="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,n){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):wo(i[0]):i[0]:wo(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Mn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:vS,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Mn.def=tr(Mn.def).replace("label",Mn._label).replace("title",Mn._title).getRegex(),Mn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Mn.listItemStart=tr(/^( *)(bull) */).replace("bull",Mn.bullet).getRegex(),Mn.list=tr(Mn.list).replace(/bull/g,Mn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Mn.def.source+")").getRegex(),Mn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Mn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Mn.html=tr(Mn.html,"i").replace("comment",Mn._comment).replace("tag",Mn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Mn.paragraph=tr(Mn._paragraph).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.blockquote=tr(Mn.blockquote).replace("paragraph",Mn.paragraph).getRegex(),Mn.normal={...Mn},Mn.gfm={...Mn.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Mn.gfm.table=tr(Mn.gfm.table).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.gfm.paragraph=tr(Mn._paragraph).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Mn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.pedantic={...Mn.normal,html:tr("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Mn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:vS,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:tr(Mn.normal._paragraph).replace("hr",Mn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Mn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const an={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:vS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:vS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function wke(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function kX(t){let n,i,e="";const r=t.length;for(n=0;n<r;n++)i=t.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}an._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",an.punctuation=tr(an.punctuation).replace(/punctuation/g,an._punctuation).getRegex(),an.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,an.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,an._comment=tr(Mn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),an.emStrong.lDelim=tr(an.emStrong.lDelim).replace(/punct/g,an._punctuation).getRegex(),an.emStrong.rDelimAst=tr(an.emStrong.rDelimAst,"g").replace(/punct/g,an._punctuation).getRegex(),an.emStrong.rDelimUnd=tr(an.emStrong.rDelimUnd,"g").replace(/punct/g,an._punctuation).getRegex(),an._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,an._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,an._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,an.autolink=tr(an.autolink).replace("scheme",an._scheme).replace("email",an._email).getRegex(),an._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,an.tag=tr(an.tag).replace("comment",an._comment).replace("attribute",an._attribute).getRegex(),an._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,an._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,an._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,an.link=tr(an.link).replace("label",an._label).replace("href",an._href).replace("title",an._title).getRegex(),an.reflink=tr(an.reflink).replace("label",an._label).replace("ref",Mn._label).getRegex(),an.nolink=tr(an.nolink).replace("ref",Mn._label).getRegex(),an.reflinkSearch=tr(an.reflinkSearch,"g").replace("reflink",an.reflink).replace("nolink",an.nolink).getRegex(),an.normal={...an},an.pedantic={...an.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:tr(/^!?\[(label)\]\((.*?)\)/).replace("label",an._label).getRegex(),reflink:tr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",an._label).getRegex()},an.gfm={...an.normal,escape:tr(an.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},an.gfm.url=tr(an.gfm.url,"i").replace("email",an.gfm._extended_email).getRegex(),an.breaks={...an.gfm,br:tr(an.br).replace("{2,}","*").getRegex(),text:tr(an.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Ih{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ap,this.options.tokenizer=this.options.tokenizer||new CL,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Mn.normal,inline:an.normal};this.options.pedantic?(n.block=Mn.pedantic,n.inline=an.pedantic):this.options.gfm&&(n.block=Mn.gfm,n.inline=this.options.breaks?an.breaks:an.gfm),this.tokenizer.rules=n}static get rules(){return{block:Mn,inline:an}}static lex(e,n){return new Ih(n).lex(e)}static lexInline(e,n){return new Ih(n).inlineTokens(e)}lex(e){let n;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){let i,r,s,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(d){l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=n[n.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,s,a,c,l,o=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+RX("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+RX("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(o));)o=o.slice(0,a.index+a[0].length-2)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,o,l)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e,kX)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,kX))){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(function(m){f=m.call({lexer:this},h),"number"==typeof f&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(s,wke)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return n}}class wv{constructor(e){this.options=e||Ap}code(e,n,i){const r=(n||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,r);null!=s&&s!==e&&(i=!0,e=s)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+wo(r)+'">'+(i?e:wo(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:wo(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,n,i,r){return this.options.headerIds?`<h${n} id="${this.options.headerPrefix+r.slug(i)}">${e}</h${n}>\n`:`<h${n}>${e}</h${n}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){if(null===(e=IX(this.options.sanitize,this.options.baseUrl,e)))return i;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>",r}image(e,n,i){if(null===(e=IX(this.options.sanitize,this.options.baseUrl,e)))return i;let r=`<img src="${e}" alt="${i}"`;return n&&(r+=` title="${n}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class PX{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class LX{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{r++,i=e+"-"+r}while(this.seen.hasOwnProperty(i))}return n||(this.seen[e]=r,this.seen[i]=0),i}slug(e,n={}){const i=this.serialize(e);return this.getNextSafeSlug(i,n.dryrun)}}class Dh{constructor(e){this.options=e||Ap,this.options.renderer=this.options.renderer||new wv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new PX,this.slugger=new LX}static parse(e,n){return new Dh(n).parse(e)}static parseInline(e,n){return new Dh(n).parseInline(e)}parse(e,n=!0){let r,s,o,a,c,l,d,h,f,m,v,T,N,$,X,Q,ve,Pe,$e,i="";const nt=e.length;for(r=0;r<nt;r++)if(m=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&($e=this.options.extensions.renderers[m.type].call({parser:this},m),!1!==$e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)))i+=$e||"";else switch(m.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(m.tokens),m.depth,MX(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(m.text,m.lang,m.escaped);continue;case"table":for(h="",d="",a=m.header.length,s=0;s<a;s++)d+=this.renderer.tablecell(this.parseInline(m.header[s].tokens),{header:!0,align:m.align[s]});for(h+=this.renderer.tablerow(d),f="",a=m.rows.length,s=0;s<a;s++){for(l=m.rows[s],d="",c=l.length,o=0;o<c;o++)d+=this.renderer.tablecell(this.parseInline(l[o].tokens),{header:!1,align:m.align[o]});f+=this.renderer.tablerow(d)}i+=this.renderer.table(h,f);continue;case"blockquote":f=this.parse(m.tokens),i+=this.renderer.blockquote(f);continue;case"list":for(v=m.ordered,T=m.start,N=m.loose,a=m.items.length,f="",s=0;s<a;s++)X=m.items[s],Q=X.checked,ve=X.task,$="",X.task&&(Pe=this.renderer.checkbox(Q),N?X.tokens.length>0&&"paragraph"===X.tokens[0].type?(X.tokens[0].text=Pe+" "+X.tokens[0].text,X.tokens[0].tokens&&X.tokens[0].tokens.length>0&&"text"===X.tokens[0].tokens[0].type&&(X.tokens[0].tokens[0].text=Pe+" "+X.tokens[0].tokens[0].text)):X.tokens.unshift({type:"text",text:Pe}):$+=Pe),$+=this.parse(X.tokens,N),f+=this.renderer.listitem($,ve,Q);i+=this.renderer.list(f,v,T);continue;case"html":i+=this.renderer.html(m.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(m.tokens));continue;case"text":for(f=m.tokens?this.parseInline(m.tokens):m.text;r+1<nt&&"text"===e[r+1].type;)m=e[++r],f+="\n"+(m.tokens?this.parseInline(m.tokens):m.text);i+=n?this.renderer.paragraph(f):f;continue;default:{const tt='Token with "'+m.type+'" type was not found.';if(this.options.silent)return void console.error(tt);throw new Error(tt)}}return i}parseInline(e,n){n=n||this.renderer;let r,s,o,i="";const a=e.length;for(r=0;r<a;r++)if(s=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)))i+=o||"";else switch(s.type){case"escape":case"text":i+=n.text(s.text);break;case"html":i+=n.html(s.text);break;case"link":i+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break;case"image":i+=n.image(s.href,s.title,s.text);break;case"strong":i+=n.strong(this.parseInline(s.tokens,n));break;case"em":i+=n.em(this.parseInline(s.tokens,n));break;case"codespan":i+=n.codespan(s.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(s.tokens,n));break;default:{const c='Token with "'+s.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return i}}class wS{constructor(e){this.options=e||Ap}preprocess(e){return e}postprocess(e){return e}}function NX(t,e){return(n,i,r)=>{"function"==typeof i&&(r=i,i=null);const s={...i},o=function Eke(t,e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const r="<p>An error occurred:</p><pre>"+wo(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):n?void n(null,r):r}if(e)return Promise.reject(i);if(!n)throw i;n(i)}}((i={...In.defaults,...s}).silent,i.async,r);if(typeof n>"u"||null===n)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function vke(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const a=i.highlight;let c;try{i.hooks&&(n=i.hooks.preprocess(n)),c=t(n,i)}catch(h){return o(h)}const l=function(h){let f;if(!h)try{i.walkTokens&&In.walkTokens(c,i.walkTokens),f=e(c,i),i.hooks&&(f=i.hooks.postprocess(f))}catch(m){h=m}return i.highlight=a,h?o(h):r(null,f)};if(!a||a.length<3||(delete i.highlight,!c.length))return l();let d=0;return In.walkTokens(c,function(h){"code"===h.type&&(d++,setTimeout(()=>{a(h.text,h.lang,function(f,m){if(f)return l(f);null!=m&&m!==h.text&&(h.text=m,h.escaped=!0),d--,0===d&&l()})},0))}),void(0===d&&l())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(a=>t(a,i)).then(a=>i.walkTokens?Promise.all(In.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>e(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(o);try{i.hooks&&(n=i.hooks.preprocess(n));const a=t(n,i);i.walkTokens&&In.walkTokens(a,i.walkTokens);let c=e(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return o(a)}}}function In(t,e,n){return NX(Ih.lex,Dh.parse)(t,e,n)}xe(wS,"passThroughHooks",new Set(["preprocess","postprocess"])),In.options=In.setOptions=function(t){return function ake(t){Ap=t}(In.defaults={...In.defaults,...t}),In},In.getDefaults=function AX(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},In.defaults=Ap,In.use=function(...t){const e=In.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(n=>{const i={...n};if(i.async=In.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const s=e.renderers[r.name];e.renderers[r.name]=s?function(...o){let a=r.renderer.apply(this,o);return!1===a&&(a=s.apply(this,o)),a}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=In.defaults.renderer||new wv;for(const s in n.renderer){const o=r[s];r[s]=(...a)=>{let c=n.renderer[s].apply(r,a);return!1===c&&(c=o.apply(r,a)),c}}i.renderer=r}if(n.tokenizer){const r=In.defaults.tokenizer||new CL;for(const s in n.tokenizer){const o=r[s];r[s]=(...a)=>{let c=n.tokenizer[s].apply(r,a);return!1===c&&(c=o.apply(r,a)),c}}i.tokenizer=r}if(n.hooks){const r=In.defaults.hooks||new wS;for(const s in n.hooks){const o=r[s];r[s]=wS.passThroughHooks.has(s)?a=>{if(In.defaults.async)return Promise.resolve(n.hooks[s].call(r,a)).then(l=>o.call(r,l));const c=n.hooks[s].call(r,a);return o.call(r,c)}:(...a)=>{let c=n.hooks[s].apply(r,a);return!1===c&&(c=o.apply(r,a)),c}}i.hooks=r}if(n.walkTokens){const r=In.defaults.walkTokens;i.walkTokens=function(s){let o=[];return o.push(n.walkTokens.call(this,s)),r&&(o=o.concat(r.call(this,s))),o}}In.setOptions(i)})},In.walkTokens=function(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(In,i)),i.type){case"table":for(const r of i.header)n=n.concat(In.walkTokens(r.tokens,e));for(const r of i.rows)for(const s of r)n=n.concat(In.walkTokens(s.tokens,e));break;case"list":n=n.concat(In.walkTokens(i.items,e));break;default:In.defaults.extensions&&In.defaults.extensions.childTokens&&In.defaults.extensions.childTokens[i.type]?In.defaults.extensions.childTokens[i.type].forEach(function(r){n=n.concat(In.walkTokens(i[r],e))}):i.tokens&&(n=n.concat(In.walkTokens(i.tokens,e)))}return n},In.parseInline=NX(Ih.lexInline,Dh.parseInline),In.Parser=Dh,In.parser=Dh.parse,In.Renderer=wv,In.TextRenderer=PX,In.Lexer=Ih,In.lexer=Ih.lex,In.Tokenizer=CL,In.Slugger=LX,In.Hooks=wS,In.parse=In;const Ake=["*"];let FX=(()=>{var t;class e{constructor(){this._buttonClick$=new H,this.copied$=this._buttonClick$.pipe(Oe(()=>Xi($t(!0),iL(3e3).pipe(hL(!1)))),Ue(),zo(1)),this.copiedText$=this.copied$.pipe(dc(!1),I(i=>i?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=kn({type:t,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Ct(0,"button",0),gn("click",function(){return r.onCopyToClipboardClick()}),rs(1,"async"),ci(2),rs(3,"async"),Dt()),2&i&&(Nn("copied",Ks(1,3,r.copied$)),Rt(2),ks(Ks(3,5,r.copiedText$)))},dependencies:[ky],encapsulation:2,changeDetection:0}),e})();class Tke{}var TL=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(TL||{});class Ike{}const BX=new bt("SECURITY_CONTEXT");let ML=(()=>{var t;class e{get options(){return this._options}set options(i){this._options={...this.DEFAULT_MARKED_OPTIONS,...i}}get renderer(){return this.options.renderer}set renderer(i){this.options.renderer=i}constructor(i,r,s,o,a,c){this.platform=i,this.securityContext=r,this.http=s,this.clipboardOptions=o,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new wv},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new H,this.reload$=this._reload$.asObservable(),this.options=a}parse(i,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:l}=r,d={...this.options,...r.markedOptions};c&&(this.renderer=this.extendRenderer(d.renderer||new wv));const h=this.trimIndentation(i),f=s?this.decodeHtml(h):h,m=a?this.parseEmoji(f):f,v=this.parseMarked(m,d,o);return(l?v:this.sanitizer.sanitize(this.securityContext,v))||""}render(i,r=this.DEFAULT_RENDER_OPTIONS,s){const{clipboard:o,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=r;o&&this.renderClipboard(i,s,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...a}),c&&this.renderKatex(i,{...this.DEFAULT_KATEX_OPTIONS,...l}),d&&this.renderMermaid(i,{...this.DEFAULT_MERMAID_OPTIONS,...h}),this.highlight(i)}reload(){this._reload$.next()}getSource(i){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(i,{responseType:"text"}).pipe(I(r=>this.handleExtension(i,r)))}highlight(i){if(!ih(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;i||(i=document);const r=i.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,s=>s.classList.add("language-none")),Prism.highlightAllUnder(i)}decodeHtml(i){if(!ih(this.platform))return i;const r=document.createElement("textarea");return r.innerHTML=i,r.value}extendRenderer(i){const r=i;if(!0===r.\u0275NgxMarkdownRendererExtended)return i;const s=i.code;return i.code=function(o,a,c){return"mermaid"===a?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},r.\u0275NgxMarkdownRendererExtended=!0,i}handleExtension(i,r){const s=i.lastIndexOf("://"),o=s>-1?i.substring(s+4):i,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&"md"!==d?"```"+d+"\n"+r+"\n```":r}parseMarked(i,r,s=!1){return s?In.parseInline(i,r):In.parse(i,r)}parseEmoji(i){if(!ih(this.platform))return i;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(i)}renderKatex(i,r){if(ih(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(i,r)}}renderClipboard(i,r,s){if(!ih(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:a}=s,c=i.querySelectorAll("pre");for(let l=0;l<c.length;l++){const d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);const f=document.createElement("div");let m,v;f.style.position="absolute",f.style.top=".5em",f.style.right=".5em",f.style.opacity="0",f.style.transition="opacity 250ms ease-out",h.insertAdjacentElement("beforeend",f),d.onmouseover=()=>f.style.opacity="1",d.onmouseout=()=>f.style.opacity="0",m=o?r.createComponent(o).hostView:a?r.createEmbeddedView(a):r.createComponent(FX).hostView,m.rootNodes.forEach(T=>{T.onmouseover=()=>f.style.opacity="1",f.appendChild(T),v=new ClipboardJS(T,{text:()=>d.innerText})}),m.onDestroy(()=>v.destroy())}}renderMermaid(i,r=this.DEFAULT_MERMAID_OPTIONS){if(!ih(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const s=i.querySelectorAll(".mermaid");0!==s.length&&(mermaid.initialize(r),mermaid.init(s))}trimIndentation(i){if(!i)return"";let r;return i.split("\n").map(s=>{let o=r;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(r)&&(r=o),o?s.substring(o):s}).join("\n")}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(xa),rt(BX),rt(Th,8),rt(Tke,8),rt(Ike,8),rt(Ny))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),UX=(()=>{var t;class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(i){this._disableSanitizer=this.coerceBooleanProperty(i)}get inline(){return this._inline}set inline(i){this._inline=this.coerceBooleanProperty(i)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(i){this._srcRelativeLink=this.coerceBooleanProperty(i)}get clipboard(){return this._clipboard}set clipboard(i){this._clipboard=this.coerceBooleanProperty(i)}get emoji(){return this._emoji}set emoji(i){this._emoji=this.coerceBooleanProperty(i)}get katex(){return this._katex}set katex(i){this._katex=this.coerceBooleanProperty(i)}get mermaid(){return this._mermaid}set mermaid(i){this._mermaid=this.coerceBooleanProperty(i)}get lineHighlight(){return this._lineHighlight}set lineHighlight(i){this._lineHighlight=this.coerceBooleanProperty(i)}get lineNumbers(){return this._lineNumbers}set lineNumbers(i){this._lineNumbers=this.coerceBooleanProperty(i)}get commandLine(){return this._commandLine}set commandLine(i){this._commandLine=this.coerceBooleanProperty(i)}constructor(i,r,s){this.element=i,this.markdownService=r,this.viewContainerRef=s,this.error=new tn,this.load=new tn,this.ready=new tn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new H}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(gr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(i,r=!1){let s;this.src&&this.srcRelativeLink&&(s={baseUrl:new URL(this.src,location.origin).pathname});const a={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},c=this.markdownService.parse(i,{decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:s,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=c,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,a,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(i){return null!=i&&"false"!=`${String(i)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:i=>{this.render(i),this.load.emit(i)},error:i=>this.error.emit(i)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,TL.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,TL.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(i,r){const s=i.querySelectorAll("pre");for(let o=0;o<s.length;o++){const a=r instanceof Array?r:[r];s.item(o).classList.add(...a)}}setPluginOptions(i,r){const s=i.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(r).forEach(a=>{const c=r[a];if(c){const l=this.toLispCase(a);s.item(o).setAttribute(l,c.toString())}})}toLispCase(i){const r=i.match(/([A-Z])/g);if(!r)return i;let s=i.toString();for(let o=0,a=r.length;o<a;o++)s=s.replace(new RegExp(r[o]),"-"+r[o].toLowerCase());return"-"===s.slice(0,1)&&(s=s.slice(1)),s}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Mt),Ve(ML),Ve(qs))},t.\u0275cmp=kn({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[Dr],ngContentSelectors:Ake,decls:1,vars:0,template:function(i,r){1&i&&(qr(),Ln(0))},encapsulation:2}),e})();var jX;!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(jX||(jX={}));let VX=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=Ht({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]}),e})();function u_(t){return!0===t}function da(t){return null===t||typeof t>"u"}function Eo(t){return!da(t)}function IL(t){return!!t}function XX(t){return da(t)?t:JSON.parse(JSON.stringify(t))}function YX(t){return Eo(t)&&"object"==typeof t&&function DL(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}const xPe="NGXS_COMPUTED_OPTION",JX="NGXS_DATA_META",RL="NGXS_META",ZX="NGXS_ARGUMENT_REGISTRY_META";let QX=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new Ke(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(rt(ql,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();function Av(t){return t[JX]}let mc=(()=>{class t{constructor(n,i,r){t.store=n.get(ql),t.ngZone=n.get(on),t.factory=i,t.context=r,t.computed=n.get(QX),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(rt(hr),rt(g9),rt(_9))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();class Qr{constructor(){Qr.statesCachedMeta.clear()}static createStateContext(e){return mc.context.createStateContext(e)}static ensureMappedState(e){if(da(mc.factory)||da(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Eo(e.name)?Qr.statesCachedMeta.get(e.name):null)||Qr.ensureMeta(e)}static getRepositoryByInstance(e){const i=Av(Qr.getStateClassByInstance(e))??null;if(da(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=Qr.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[s,o]of r.entries()){const a=n?.getPayloadTypeByIndex(s);Eo(a)&&(i[a]=o)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=Qr.createPayload(n,i),s=function SPe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new s(r)}static ensureMeta(e){const n=Eo(e.name)?mc.factory.states?.find(i=>i.name===e.name):null;return Eo(n)&&Eo(e.name)&&Qr.statesCachedMeta.set(e.name,n),n}}Qr.statesCachedMeta=new Map,Qr.\u0275fac=function(e){return new(e||Qr)},Qr.\u0275prov=Et({token:Qr,factory:Qr.\u0275fac}),new class CPe{constructor(){this.subject=new Nf(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function su(t,e){const n=arguments.length>=2;return i=>i.pipe(t?yi((r,s)=>t(r,s,i)):Se,er(1),n?Zg(e):EX(()=>new Y0))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Nf(1)}};class MPe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Eo(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function eY(t){return t.NGXS_OPTIONS_META??{name:""}}function tY(t){const e=eY(t),n=e.children??[],r=XX(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(YX(r))return function IPe(t,e){return e.reduce((n,i)=>{const r=eY(i);if(function Ev(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=tY(i),n},t??{})}(r,n);throw new MPe(r)}return r}function nY(){return`__${xPe}__`}function iY(t){return t[nY()]??null}function rY(){return mc?.computed?.sequenceValue??0}function OPe(t){let e=!1;return ap(t)&&(e=!0),e}function OL(t){return t[ZX]}class kPe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class PPe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if(IL(this.argumentMap.has(e))||IL(this.payloadMap.has(e)))throw new kPe(e,n)}}function jPe(t){return{enumerable:!0,configurable:!0,get(){const e=Av(t),n=Qr.ensureMappedState(e.stateMeta);return Qr.createStateContext(n)}}}const $Pe={dataActionSubscribeRequired:!0},XPe=new bt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>$Pe});let YPe=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[Qr,mc,QX,...n]}}}return t.\u0275fac=function(n){return new(n||t)(rt(Qr,2),rt(mc,2))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),t})();function sY(){return(t,e,n)=>{!function APe(t,e){if(!function pPe(t,e){let n=t,i=!1;if(YX(n))for(;null!==n;){if(u_(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const s=function RPe(t){return da(iY(t))&&Object.defineProperties(t,{[nY()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),iY(t)}(this),o=s?.get(i);if(u_(o?.isObservable))return o?.value;if(da(o)||o.sequenceId!==rY()){s.delete(i);const c=i.apply(this,r);return s.set(i,{value:c,sequenceId:rY(),isObservable:OPe(c)}),c}return o?.value},n}}const KPe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function kL(t={}){const e=function qPe(t){const e=mc?.injector?.get(XPe,void 0,ei.Optional),n={...KPe};return Eo(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function EPe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const s=r.value,o=i.toString();return r.value=function(...a){const c=this;let l=null;const d=Qr.getRepositoryByInstance(c),h=d.operations;let f=h[o];const m=d.stateMeta,v=OL(s);if(da(f)){const Q=function WPe(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(s),ve=function TPe(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let s="";for(let o=0;o<n.length;o++)Eo(r?.getArgumentNameByIndex(o))?s+=r?.getArgumentNameByIndex(o):Eo(r?.getPayloadTypeByIndex(o))?s+=r?.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==n.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:m.path,methodName:o,argumentsNames:Q,argumentRegistry:v});f=h[o]={type:ve,options:{cancelUncompleted:e.cancelUncompleted??!1}},Eo(f)&&(m.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}Qr.ensureMappedState(m).instance[f.type]=()=>(u_(e.insideZone)?mc.ngZone?.run(()=>{l=s.apply(c,a)}):l=s.apply(c,a),ap(l)&&u_(e.subscribeRequired)?$t(null).pipe(I(()=>l)):l);const $=Qr.createAction(f,a,v),X=mc.store.dispatch($);return ap(l)?function DPe(t,e){return q0([t,e]).pipe(I(n=>n.pop()))}(X,l):l},r}}function oY(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function LPe(t,e){const n=t[e];return da(OL(n))&&Object.defineProperties(n,{[ZX]:{enumerable:!0,configurable:!0,value:new PPe}}),OL(n)})(e,n).createPayloadType(r,n,i)}}function ZPe(){return t=>{const e=function GPe(t){if(function iPe(t){return!IL(t)}(t.hasOwnProperty(RL))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,RL,{value:e})}return function zPe(t){return t?.[RL]}(t)}(t);if(da(e.name))throw new Error("@StateRepository should be add before decorator @State");!function BPe(t,e){(function FPe(t){const e=Av(t)??null;return(da(e)||e?.stateClass!==t)&&function NPe(t){Object.defineProperty(t,JX,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),Av(t)}(t)).stateMeta=e}(t,e),function QPe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>XX(n)},context:jPe(t)})}(t,e,tY(t)),function VPe(t){const n=Av(t)?.stateMeta?.name??null;if(Eo(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Eo(this[i]))return this[i];if(da(mc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=mc.store.select(t).pipe(I(r=>r),zo({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let eLe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new H,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})(),tLe=(()=>{class t extends eLe{get snapshot(){return this.getState()}get ctx(){return function HPe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ci(t)))(i||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac}),ot([sY(),J("design:type",Object),J("design:paramtypes",[])],t.prototype,"snapshot",null),ot([kL(),kt(0,oY("patchValue")),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",void 0)],t.prototype,"patchState",null),ot([kL(),kt(0,oY("stateValue")),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",void 0)],t.prototype,"setState",null),ot([kL(),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",void 0)],t.prototype,"reset",null),t})(),aK=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Ht({type:t,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),t})();const Uv=new bt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),tN=new bt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=zt($n);if(!t)throw new Error("Window is not available");return t}}),uFe=new bt("ngx-data-layer",{providedIn:"root",factory:()=>function dFe(t){return t?t.dataLayer=t.dataLayer||[]:null}(zt(tN))}),cK=new bt("ngx-gtag-fn",{providedIn:"root",factory:()=>function hFe(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(zt(tN),zt(uFe))});let jv=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,s,o,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),s&&c.set("value",s),void 0!==o&&c.set("interaction",o),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",n,l):this.gtag("event",n)}catch(c){this.throw(c)}}pageView(n,i,r,s){try{const o=new Map([["page_path",n]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,c])=>o.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(n,i,r,s,o){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(rt(Uv),rt($n),rt(cK))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fFe=(()=>{class t{constructor(n,i,r,s){this.gaCategoryDirective=n,this.gaService=i,this.settings=r,this.el=s,this.gaBind="click"}set gaBind(n){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=n,this.bindSubscription=_p(this.el.nativeElement,n).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(n){this.throw(n)}}throw(n){this.settings.enableTracing&&console&&console.warn&&console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)(Ve(aK,8),Ve(jv),Ve(Uv),Ve(Mt))},t.\u0275dir=Ht({type:t,selectors:[["","gaEvent",""]],inputs:{gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent",gaBind:"gaBind"},exportAs:["gaEvent"]}),t})();const mFe={provide:kI,multi:!0,useFactory:function gFe(t,e,n){return jt(function*(){if(!t.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");n||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),t.uri=t.uri||`https://www.googletagmanager.com/gtag/js?id=${t.trackingCode}`,t.initCommands=t?.initCommands??[],t.initCommands.find(s=>"config"===s.command)||t.initCommands.unshift({command:"config",values:[t.trackingCode]}),t.initCommands.find(s=>"js"===s.command)||t.initCommands.unshift({command:"js",values:[new Date]});for(const s of t.initCommands)e(s.command,...s.values);const i=n.createElement("script");i.async=!0,i.src=t.uri,t.nonce&&i.setAttribute("nonce",t.nonce),n.getElementsByTagName("head")[0].appendChild(i)})},deps:[Uv,cK,$n]};new bt("ngx-google-analytics-routing-settings",{factory:()=>({})});let nN=(()=>{class t{static forRoot(n,i=[],r,s,o){return{ngModule:t,providers:[{provide:Uv,useValue:{trackingCode:n,initCommands:i,uri:r,enableTracing:s,nonce:o}},mFe]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),t})(),zS=(()=>{var t;class e{constructor(){this.consent="not-set",this.consentChange=new Nf(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(i){this.consent!==i&&(this.consent=i,this.consentChange.next(i))}unsetConsent(){this.setConsent("not-set")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),LFe=(()=>{var t;class e{constructor(i,r,{trackingCode:s}){this.window=r,this.subscriptions=new C,this.token=s,this.subscriptions.add(i.consentChange.subscribe(o=>this.toggleGoogleAnalytics("rescinded"===o)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(i){this.window&&(this.window[`ga-disable-${this.token}`]=i)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(zS),rt(tN),rt(Uv))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const NFe=new bt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),hK=[zS,LFe,(()=>{var t;class e{constructor(i,r){this.key=r,this.subscriptions=new C;try{this.storage=localStorage}catch{}i.setConsent(this.loadConsent()),this.subscriptions.add(i.consentChange.subscribe(s=>this.saveConsent(s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){const i=this.storage?.getItem?.(this.key);if(null==i)return"not-set";const r=i.trim().toLowerCase();switch(r){case"given":case"rescinded":return r;default:return"not-set"}}saveConsent(i){this.storage?.setItem?.(this.key,i)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(zS),rt(NFe))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})()];function FFe(t){return Object.entries(t).reduce((e,[n,i])=>(null!=i&&(e[n]=`${i}`),e),{})}let UFe=(()=>{var t;class e{static forRoot(i){const{providers:r=[]}=nN.forRoot(i.gaToken,function BFe(t){const{appName:e,projectName:n,developmentMode:i}=t;return[{command:"set",values:[FFe({appName:e,projectName:n,developmentMode:i})]}]}(i));return{ngModule:e,providers:r}}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({providers:[...hK,{provide:kI,multi:!0,useFactory:()=>()=>{},deps:hK}],imports:[nN]}),e})();class VFe{}const zFe=(t,e)=>JSON.stringify(t)===JSON.stringify(e),GFe=t=>t.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),qc={storageStrategy:class HFe extends VFe{constructor(){super(...arguments),this.cachePairs=[]}add(e,n,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,n){Object.assign(this.cachePairs[e],n)}update(e,n){Object.assign(this.cachePairs[e],n)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},WFe=new H;function Na(t={}){return function(e,n,i){const r=t.cacheKey||e.constructor.name+"#"+n,s=i.value;if(i&&i.value){let o=t.storageStrategy?new t.storageStrategy:new qc.storageStrategy;const a=[];t.cacheModifier&&t.cacheModifier.subscribe(d=>o.addMany(d(o.getAll(r,this)),r,this)),Xi(WFe.asObservable(),t.cacheBusterObserver?t.cacheBusterObserver:function Be(t){return t?function Xe(t){return new We(e=>t.schedule(()=>e.complete()))}(t):pe}()).subscribe(d=>{o.removeAll(r,this),a.length=0}),t.cacheResolver=t.cacheResolver||qc.cacheResolver||zFe,t.cacheHasher=t.cacheHasher||qc.cacheHasher||GFe,i.value=function(...d){const h=o.getAll(r,this);let f=t.cacheHasher(d),m=h.find(T=>t.cacheResolver(T.parameters,f));const v=a.find(T=>t.cacheResolver(T.parameters,f));if((t.maxAge||qc.maxAge)&&m&&m.created&&((new Date).getTime()-new Date(m.created).getTime()>(t.maxAge||qc.maxAge)?(o.remove?o.remove(h.indexOf(m),m,r,this):o.removeAtIndex(h.indexOf(m),r,this),m=null):(t.slidingExpiration||qc.slidingExpiration)&&(m.created=new Date,o.update?o.update(h.indexOf(m),m,r,this):o.updateAtIndex(h.indexOf(m),m,r,this))),m){const T=$t(m.response);return t.async?T.pipe(h$(0)):T}if(v)return v.response;{const T=s.call(this,...d).pipe(vp(()=>{const N=a.find($=>t.cacheResolver($.parameters,f));a.splice(a.indexOf(N),1)}),Li(N=>{(!t.shouldCacheDecider||t.shouldCacheDecider(N))&&((!(t.maxCacheCount||qc.maxCacheCount)||1===(t.maxCacheCount||qc.maxCacheCount)||(t.maxCacheCount||qc.maxCacheCount)&&(t.maxCacheCount||qc.maxCacheCount)<h.length+1)&&(o.remove?o.remove(0,h[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:f,response:N,created:t.maxAge||qc.maxAge?new Date:null},r,this))}),function jFe(t,e,n,i){n&&!F(n)&&(i=n);const r=F(n)?n:void 0;return s=>gX(new Nf(t,e,i),r)(s)}(1),bS());return a.push({parameters:f,response:T,created:new Date}),T}}}return i}}class $Fe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const XFe=new bt("basePath");class GS{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:n=>this.defaultEncodeParam(n),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}selectHeaderAccept(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(n.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const n=this.credentials[e];return"function"==typeof n?n():n}defaultEncodeParam(e){const n="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(n))}}let iN,fK=(()=>{class t{constructor(n,i,r){this.httpClient=n,this.basePath="https://apps.humanatlas.io/hra-api/v1",this.defaultHeaders=new Xc,this.configuration=new GS,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new $Fe}addToHttpParams(n,i,r){return this.addToHttpParamsRecursive(n,i,r)}addToHttpParamsRecursive(n,i,r){if(null==i)return n;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>n=this.addToHttpParamsRecursive(n,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");n=n.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>n=this.addToHttpParamsRecursive(n,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");n=n.append(r,i)}return n}aggregateResults(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,m=n.consortiums,v=n.providers,T=n.sex,N=n.spatial,$=n.technologies,X=n.token;let Q=new lr({encoder:this.encoder});null!=o&&(Q=this.addToHttpParams(Q,o,"age")),null!=a&&(Q=this.addToHttpParams(Q,a,"age-range")),null!=c&&(Q=this.addToHttpParams(Q,c,"bmi")),null!=l&&(Q=this.addToHttpParams(Q,l,"bmi-range")),null!=d&&(Q=this.addToHttpParams(Q,d,"cache")),h&&h.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"ontology-terms")}),f&&f.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"cell-type-terms")}),m&&m.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"consortiums")}),v&&v.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"providers")}),null!=T&&(Q=this.addToHttpParams(Q,T,"sex")),N&&N.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"spatial")}),$&&$.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"technologies")}),null!=X&&(Q=this.addToHttpParams(Q,X,"token"));let ve=this.defaultHeaders,Pe=s&&s.httpHeaderAccept;void 0===Pe&&(Pe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Pe&&(ve=ve.set("Accept",Pe));let $e=s&&s.context;void 0===$e&&($e=new us);let nt="json";return Pe&&(nt=Pe.startsWith("text")?"text":this.configuration.isJsonMime(Pe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:$e,params:Q,responseType:nt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}biomarkerTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,m=n.consortiums,v=n.providers,T=n.sex,N=n.spatial,$=n.technologies,X=n.token;let Q=new lr({encoder:this.encoder});null!=o&&(Q=this.addToHttpParams(Q,o,"age")),null!=a&&(Q=this.addToHttpParams(Q,a,"age-range")),null!=c&&(Q=this.addToHttpParams(Q,c,"bmi")),null!=l&&(Q=this.addToHttpParams(Q,l,"bmi-range")),null!=d&&(Q=this.addToHttpParams(Q,d,"cache")),h&&h.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"ontology-terms")}),f&&f.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"cell-type-terms")}),m&&m.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"consortiums")}),v&&v.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"providers")}),null!=T&&(Q=this.addToHttpParams(Q,T,"sex")),N&&N.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"spatial")}),$&&$.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"technologies")}),null!=X&&(Q=this.addToHttpParams(Q,X,"token"));let ve=this.defaultHeaders,Pe=s&&s.httpHeaderAccept;void 0===Pe&&(Pe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Pe&&(ve=ve.set("Accept",Pe));let $e=s&&s.context;void 0===$e&&($e=new us);let nt="json";return Pe&&(nt=Pe.startsWith("text")?"text":this.configuration.isJsonMime(Pe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:$e,params:Q,responseType:nt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}biomarkerTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new us);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,m=n.consortiums,v=n.providers,T=n.sex,N=n.spatial,$=n.technologies,X=n.token;let Q=new lr({encoder:this.encoder});null!=o&&(Q=this.addToHttpParams(Q,o,"age")),null!=a&&(Q=this.addToHttpParams(Q,a,"age-range")),null!=c&&(Q=this.addToHttpParams(Q,c,"bmi")),null!=l&&(Q=this.addToHttpParams(Q,l,"bmi-range")),null!=d&&(Q=this.addToHttpParams(Q,d,"cache")),h&&h.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"ontology-terms")}),f&&f.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"cell-type-terms")}),m&&m.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"consortiums")}),v&&v.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"providers")}),null!=T&&(Q=this.addToHttpParams(Q,T,"sex")),N&&N.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"spatial")}),$&&$.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"technologies")}),null!=X&&(Q=this.addToHttpParams(Q,X,"token"));let ve=this.defaultHeaders,Pe=s&&s.httpHeaderAccept;void 0===Pe&&(Pe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Pe&&(ve=ve.set("Accept",Pe));let $e=s&&s.context;void 0===$e&&($e=new us);let nt="json";return Pe&&(nt=Pe.startsWith("text")?"text":this.configuration.isJsonMime(Pe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:$e,params:Q,responseType:nt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}cellTypeTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new us);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(n,i="body",r=!1,s){const o=n.token;let a=new lr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"token"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=s&&s.context;void 0===d&&(d=new us);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(n,i="body",r=!1,s){const o=n.getSpatialPlacementRequest;if(null==o)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new us);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return c&&(f=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,o,{context:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(n,i="body",r=!1,s){const o=n.cache;let a=new lr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=s&&s.context;void 0===d&&(d=new us);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new us);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,m=n.consortiums,v=n.providers,T=n.sex,N=n.spatial,$=n.technologies,X=n.token;let Q=new lr({encoder:this.encoder});null!=o&&(Q=this.addToHttpParams(Q,o,"age")),null!=a&&(Q=this.addToHttpParams(Q,a,"age-range")),null!=c&&(Q=this.addToHttpParams(Q,c,"bmi")),null!=l&&(Q=this.addToHttpParams(Q,l,"bmi-range")),null!=d&&(Q=this.addToHttpParams(Q,d,"cache")),h&&h.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"ontology-terms")}),f&&f.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"cell-type-terms")}),m&&m.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"consortiums")}),v&&v.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"providers")}),null!=T&&(Q=this.addToHttpParams(Q,T,"sex")),N&&N.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"spatial")}),$&&$.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"technologies")}),null!=X&&(Q=this.addToHttpParams(Q,X,"token"));let ve=this.defaultHeaders,Pe=s&&s.httpHeaderAccept;void 0===Pe&&(Pe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Pe&&(ve=ve.set("Accept",Pe));let $e=s&&s.context;void 0===$e&&($e=new us);let nt="json";return Pe&&(nt=Pe.startsWith("text")?"text":this.configuration.isJsonMime(Pe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:$e,params:Q,responseType:nt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}ontologyTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new us);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new us);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(n,i="body",r=!1,s){const o=n.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=n.age,c=n.ageRange,l=n.bmi,d=n.bmiRange,h=n.cache,f=n.ontologyTerms,m=n.cellTypeTerms,v=n.consortiums,T=n.providers,N=n.sex,$=n.spatial,X=n.technologies,Q=n.token;let ve=new lr({encoder:this.encoder});null!=a&&(ve=this.addToHttpParams(ve,a,"age")),null!=c&&(ve=this.addToHttpParams(ve,c,"age-range")),null!=l&&(ve=this.addToHttpParams(ve,l,"bmi")),null!=d&&(ve=this.addToHttpParams(ve,d,"bmi-range")),null!=h&&(ve=this.addToHttpParams(ve,h,"cache")),f&&f.forEach(ft=>{ve=this.addToHttpParams(ve,ft,"ontology-terms")}),m&&m.forEach(ft=>{ve=this.addToHttpParams(ve,ft,"cell-type-terms")}),null!=o&&(ve=this.addToHttpParams(ve,o,"organ-iri")),v&&v.forEach(ft=>{ve=this.addToHttpParams(ve,ft,"consortiums")}),T&&T.forEach(ft=>{ve=this.addToHttpParams(ve,ft,"providers")}),null!=N&&(ve=this.addToHttpParams(ve,N,"sex")),$&&$.forEach(ft=>{ve=this.addToHttpParams(ve,ft,"spatial")}),X&&X.forEach(ft=>{ve=this.addToHttpParams(ve,ft,"technologies")}),null!=Q&&(ve=this.addToHttpParams(ve,Q,"token"));let Pe=this.defaultHeaders,$e=s&&s.httpHeaderAccept;void 0===$e&&($e=this.configuration.selectHeaderAccept(["application/json"])),void 0!==$e&&(Pe=Pe.set("Accept",$e));let nt=s&&s.context;void 0===nt&&(nt=new us);let tt="json";return $e&&(tt=$e.startsWith("text")?"text":this.configuration.isJsonMime($e)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:nt,params:ve,responseType:tt,withCredentials:this.configuration.withCredentials,headers:Pe,observe:i,reportProgress:r})}referenceOrgans(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new us);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,m=n.consortiums,v=n.providers,T=n.sex,N=n.spatial,$=n.technologies,X=n.token;let Q=new lr({encoder:this.encoder});null!=o&&(Q=this.addToHttpParams(Q,o,"age")),null!=a&&(Q=this.addToHttpParams(Q,a,"age-range")),null!=c&&(Q=this.addToHttpParams(Q,c,"bmi")),null!=l&&(Q=this.addToHttpParams(Q,l,"bmi-range")),null!=d&&(Q=this.addToHttpParams(Q,d,"cache")),h&&h.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"ontology-terms")}),f&&f.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"cell-type-terms")}),m&&m.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"consortiums")}),v&&v.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"providers")}),null!=T&&(Q=this.addToHttpParams(Q,T,"sex")),N&&N.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"spatial")}),$&&$.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"technologies")}),null!=X&&(Q=this.addToHttpParams(Q,X,"token"));let ve=this.defaultHeaders,Pe=s&&s.httpHeaderAccept;void 0===Pe&&(Pe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Pe&&(ve=ve.set("Accept",Pe));let $e=s&&s.context;void 0===$e&&($e=new us);let nt="json";return Pe&&(nt=Pe.startsWith("text")?"text":this.configuration.isJsonMime(Pe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:$e,params:Q,responseType:nt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}sparql(n,i="body",r=!1,s){const o=n.query;if(null==o)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=n.token,c=n.format;let l=new lr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new us);let m="json";return h&&(m=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}sparqlPost(n,i="body",r=!1,s){const o=n.sparqlQueryRequest;if(null==o)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=n.token,c=n.format;let l=new lr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new us);const v=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==v&&(d=d.set("Content-Type",v));let T="json";return h&&(T=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,o,{context:f,params:l,responseType:T,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}technologyNames(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new lr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new us);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,m=n.consortiums,v=n.providers,T=n.sex,N=n.spatial,$=n.technologies,X=n.token;let Q=new lr({encoder:this.encoder});null!=o&&(Q=this.addToHttpParams(Q,o,"age")),null!=a&&(Q=this.addToHttpParams(Q,a,"age-range")),null!=c&&(Q=this.addToHttpParams(Q,c,"bmi")),null!=l&&(Q=this.addToHttpParams(Q,l,"bmi-range")),null!=d&&(Q=this.addToHttpParams(Q,d,"cache")),h&&h.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"ontology-terms")}),f&&f.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"cell-type-terms")}),m&&m.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"consortiums")}),v&&v.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"providers")}),null!=T&&(Q=this.addToHttpParams(Q,T,"sex")),N&&N.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"spatial")}),$&&$.forEach(tt=>{Q=this.addToHttpParams(Q,tt,"technologies")}),null!=X&&(Q=this.addToHttpParams(Q,X,"token"));let ve=this.defaultHeaders,Pe=s&&s.httpHeaderAccept;void 0===Pe&&(Pe=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Pe&&(ve=ve.set("Accept",Pe));let $e=s&&s.context;void 0===$e&&($e=new us);let nt="json";return Pe&&(nt=Pe.startsWith("text")?"text":this.configuration.isJsonMime(Pe)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:$e,params:Q,responseType:nt,withCredentials:this.configuration.withCredentials,headers:ve,observe:i,reportProgress:r})}}return t.\u0275fac=function(n){return new(n||t)(rt(Th),rt(XFe,8),rt(GS,8))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),YFe=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:GS,useFactory:n}]}}constructor(n,i){if(n)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return t.\u0275fac=function(n){return new(n||t)(rt(t,12),rt(Th,8))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),t})();function ua(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Jc(){return iN||(iN=function KFe(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=ua(n);return(r,s)=>i.then(o=>s(o.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),iN}function qFe(t,e=Jc()){return e("readonly",n=>ua(n.get(t)))}function JFe(t,e=Jc()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),ua(n.transaction)))}function ZFe(t,e=Jc()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),ua(n.transaction)))}var QFe=g(5020),eBe=g(7661);const Vv="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Hv="http://www.w3.org/2001/XMLSchema#",sN="http://www.w3.org/2000/10/swap/",$o={xsd:{decimal:`${Hv}decimal`,boolean:`${Hv}boolean`,double:`${Hv}double`,integer:`${Hv}integer`,string:`${Hv}string`},rdf:{type:`${Vv}type`,nil:`${Vv}nil`,first:`${Vv}first`,rest:`${Vv}rest`,langString:`${Vv}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${sN}reify#forSome`,forAll:`${sN}reify#forAll`},log:{implies:`${sN}log#implies`}};const{rdf:tBe,xsd:Tp}=$o;let zv,nBe=0;const gK=/^"(.*".*)(?="[^"]*$)/,iBe=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,oN={namedNode:function cBe(t){return new _K(t)},blankNode:function lBe(t){return new rBe(t||"n3-"+nBe++)},variable:function uBe(t){return new sBe(t)},literal:function dBe(t,e){if("string"==typeof e)return new v_(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=Tp.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?Tp.integer:Tp.double:(n=Tp.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new v_(""===n||n===Tp.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function hBe(){return zv},quad:bK,triple:bK},wr=oN;class cu{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof cu?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class _K extends cu{get termType(){return"NamedNode"}}class v_ extends cu{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new _K(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?Tp.string:tBe.langString}equals(e){return e instanceof v_?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class rBe extends cu{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class sBe extends cu{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function lu(t,e){if(e=e||oN,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===oN)return new v_(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),"@"===t[n+1]?t.substr(n+2):e.namedNode(t.substr(n+3)));case"<":const i=iBe.exec(t);return e.quad(lu(WS(i[1]),e),lu(WS(i[2]),e),lu(WS(i[3]),e),i[4]&&lu(WS(i[4]),e));default:return e.namedNode(t)}}function Ui(t){if("string"==typeof t)return t;if(t instanceof cu&&"Quad"!==t.termType)return t.id;if(!t)return zv.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Tp.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${aN(Ui(t.subject))} ${aN(Ui(t.predicate))} ${aN(Ui(t.object))}${function pK(t){return!!t&&"DefaultGraph"===t.termType}(t.graph)?"":` ${Ui(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}zv=new class oBe extends cu{constructor(){return super(""),zv||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class aBe extends cu{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||zv}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function aN(t){return t.replace(gK,(e,n)=>`"${n.replace(/"/g,'""')}`)}function WS(t){return t.replace(gK,(e,n)=>`"${n.replace(/""/g,'"')}`)}function bK(t,e,n,i){return new aBe(t,e,n,i)}var fBe=g(3410),pBe=g.n(fBe);const{xsd:$S}=$o,mBe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,yK={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},gBe=/[\x00-\x20<>\\"\{\}\|\^\`]/,_Be={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},bBe=/$0^/;class yBe{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in _Be)&&this[n]instanceof RegExp&&(this[n]=bBe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&s("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(c=this._comment.exec(i))&&s("comment",c[1],"",this._line,i.length),i=null,s("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",f="",m="",v=null,T=0,N=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(T=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){N=!0;break}case"<":if(v=this._unescapedIri.exec(i))h="IRI",f=v[1];else if(v=this._iri.exec(i)){if(f=this._unescape(v[1]),null===f||gBe.test(f))return o(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",T=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",T=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",T=2);break;case"_":((v=this._blank.exec(i))||n&&(v=this._blank.exec(`${i} `)))&&(h="blank",m="_",f=v[1]);break;case'"':if(v=this._simpleQuotedString.exec(i))f=v[1];else if(({value:f,matchLength:T}=this._parseLiteral(i)),null===f)return o(this);(null!==v||0!==T)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(v=this._simpleApostropheString.exec(i))f=v[1];else if(({value:f,matchLength:T}=this._parseLiteral(i)),null===f)return o(this);(null!==v||0!==T)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(v=this._variable.exec(i))&&(h="var",f=v[0]);break;case"@":"literal"===this._previousMarker&&(v=this._langcode.exec(i))?(h="langcode",f=v[1]):(v=this._keyword.exec(i))&&(h=v[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",T=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(v=this._number.exec(i)||n&&(v=this._number.exec(`${i} `)))&&(h="literal",f=v[0],m="string"==typeof v[1]?$S.double:"string"==typeof v[2]?$S.decimal:$S.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(v=this._sparqlKeyword.exec(i))?h=v[0].toUpperCase():N=!0;break;case"f":case"t":(v=this._boolean.exec(i))?(h="literal",f=v[0],m=$S.boolean):N=!0;break;case"a":(v=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):N=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(T=1,f="="):(T=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(T=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",T=2):(h=d,T=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",T=2);break;default:N=!0}if(N&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(v=this._prefix.exec(i))?((v=this._prefixed.exec(i))||n&&(v=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=v[1]||"",f=this._unescape(v[2])):(h="prefix",f=v[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?o(this):this._input=i;const $=T||v[0].length,X=s(h,f,m,l,$);this.previousToken=X,this._previousMarker=h,i=i.substr($,i.length)}function s(a,c,l,d,h){const f=i?r-i.length:r,v={type:a,value:c,prefix:l,line:d,start:f,end:f+h};return e(null,v),v}function o(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace(mBe,(r,s,o,a)=>{if("string"==typeof s)return String.fromCharCode(Number.parseInt(s,16));if("string"==typeof o){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in yK?yK[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let s=0;for(;"\\"===e[r-s-1];)s++;if(s%2==0){const o=e.substring(i,r),a=o.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((s,o)=>s?r=s:i.push(o),!0),r)throw r;return i}pBe()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}let vK=0;class xK{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&wK(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),s=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=s||o;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||s||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new yBe({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){vK=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:s,graph:n,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(void 0===s)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(s+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===s?null===a.predicate?a.subject=i:a.object=i:this._emit(s,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const o=this._predicate,a=this._object;s?this._emit(a,o,r,i):this._emit(r,o,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=cN}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,s=-1,o=0,a="/";for(;r<n;){switch(a){case":":if(s<0&&"/"===e[++r]&&"/"===e[++r])for(;(s=r+1)<n&&"/"!==e[s];)r=s;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return i+e.substring(o,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(o,r-2),(o=i.lastIndexOf("/"))>=s&&(i=i.substr(0,o)),"/"!==a)return`${i}/${e.substr(r+1)}`;o=r+1}}}a=e[++r]}return i+e.substring(o)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${vK++}_`,this._prefixCallback=i||cN,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let s;if(this._callback=(o,a)=>{o?s=o:a&&r.push(a)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return r}this._callback=n,this._lexer.tokenize(e,(r,s)=>{null!==r?(this._callback(r),this._callback=cN):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function cN(){}function wK(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n($o.rdf.first),t.RDF_REST=n($o.rdf.rest),t.RDF_NIL=n($o.rdf.nil),t.N3_FORALL=n($o.r.forAll),t.N3_FORSOME=n($o.r.forSome),t.ABBREVIATIONS={a:n($o.rdf.type),"=":n($o.owl.sameAs),">":n($o.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}wK(xK.prototype,wr);var lN=g(8905);class dN{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||wr,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const s in n)for(const o in i=n[s].subjects)for(const a in r=i[o])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const s=e[n]||(e[n]={}),o=s[i]||(s[i]={}),a=r in o;return a||(o[r]=null),!a}_removeFromIndex(e,n,i,r){const s=e[n],o=s[i];delete o[r];for(const a in o)return;delete s[i];for(const a in s)return;delete e[n]}*_findInIndex(e,n,i,r,s,o,a,c){let l,d,h;const f=this._entities,m=lu(c,this._factory),v={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const T in e)if(d=e[T]){v[s]=lu(f[T],this._factory),i&&((l=d,d={})[i]=l[i]);for(const N in d)if(h=d[N]){v[o]=lu(f[N],this._factory);const $=r?r in h?[r]:[]:Object.keys(h);for(let X=0;X<$.length;X++)v[a]=lu(f[$[X]],this._factory),yield this._factory.quad(v.subject,v.predicate,v.object,m)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,s;if(r=e[n])for(s in r)i(s)}_loopByKey1(e,n,i){let r,s;for(r in e)s=e[r],s[n]&&i(r)}_loopBy2Keys(e,n,i,r){let s,o,a;if((s=e[n])&&(o=s[i]))for(a in o)r(a)}_countInIndex(e,n,i,r){let o,a,c,s=0;n&&((o=e,e={})[n]=o[n]);for(const l in e)if(a=e[l]){i&&((o=a,a={})[i]=o[i]);for(const d in a)(c=a[d])&&(r?r in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!Fa(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(lu(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Ui(e),n=Ui(n),i=Ui(i),r=Ui(r);let s=this._graphs[r];s||(s=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(s));const o=this._ids,a=this._entities;e=o[e]||(o[a[++this._id]=e]=this._id),n=o[n]||(o[a[++this._id]=n]=this._id),i=o[i]||(o[a[++this._id]=i]=this._id);const c=this._addToIndex(s.subjects,e,n,i);return this._addToIndex(s.predicates,n,i,e),this._addToIndex(s.objects,i,e,n),this._size=null,c}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Ui(e),n=Ui(n),i=Ui(i),r=Ui(r);const s=this._ids,o=this._graphs;let a,c,l;if(!((e=s[e])&&(n=s[n])&&(i=s[i])&&(a=o[r])&&(c=a.subjects[e])&&(l=c[n])&&i in l))return!1;for(e in this._removeFromIndex(a.subjects,e,n,i),this._removeFromIndex(a.predicates,n,i,e),this._removeFromIndex(a.objects,i,e,n),null!==this._size&&this._size--,a.subjects)return!0;return delete o[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const s=new lN.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,n,i,r))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){e=e&&Ui(e),n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._getGraphs(r),o=this._ids;let a,c,l,d;if(!(Fa(e)&&!(c=o[e])||Fa(n)&&!(l=o[n])||Fa(i)&&!(d=o[i])))for(const h in s)(a=s[h])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",h):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",h):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h))}match(e,n,i,r){return new uN(this,e,n,i,r)}countQuads(e,n,i,r){e=e&&Ui(e),n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._getGraphs(r),o=this._ids;let c,l,d,h,a=0;if(Fa(e)&&!(l=o[e])||Fa(n)&&!(d=o[n])||Fa(i)&&!(h=o[i]))return 0;for(const f in s)(c=s[f])&&(a+=e?i?this._countInIndex(c.objects,h,l,d):this._countInIndex(c.subjects,l,d,h):n?this._countInIndex(c.predicates,d,h,l):this._countInIndex(c.objects,h,l,d));return a}forEach(e,n,i,r,s){this.some(o=>(e(o),!1),n,i,r,s)}every(e,n,i,r,s){let o=!1;const a=!this.some(c=>(o=!0,!e(c)),n,i,r,s);return o&&a}some(e,n,i,r,s){for(const o of this.readQuads(n,i,r,s))if(e(o))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(s=>{r.push(s)},e,n,i),r}forSubjects(e,n,i,r){n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._ids,o=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Fa(n)&&!(c=s[n])||Fa(i)&&!(l=s[i])))for(r in o)(a=o[r])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(s=>{r.push(s)},e,n,i),r}forPredicates(e,n,i,r){n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._ids,o=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Fa(n)&&!(c=s[n])||Fa(i)&&!(l=s[i])))for(r in o)(a=o[r])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(s=>{r.push(s)},e,n,i),r}forObjects(e,n,i,r){n=n&&Ui(n),i=i&&Ui(i),r=r&&Ui(r);const s=this._ids,o=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Fa(n)&&!(c=s[n])||Fa(i)&&!(l=s[i])))for(r in o)(a=o[r])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(s=>{r.push(s)},e,n,i),r}forGraphs(e,n,i,r){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),n,i,r,s)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},s=this.getQuads(null,$o.rdf.rest,$o.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{const c=[];let d,h,l=!1;const f=a.graph;let m=a.subject;for(;m&&!l;){const v=this.getQuads(null,null,m,null),T=this.getQuads(m,null,null,null);let N,$=null,X=null,Q=null;for(let ve=0;ve<T.length&&!l;ve++)N=T[ve],N.graph.equals(f)?d?l=r(m,"has non-list arcs out"):N.predicate.value===$o.rdf.first?$?l=r(m,"has multiple rdf:first arcs"):o.push($=N):N.predicate.value===$o.rdf.rest?X?l=r(m,"has multiple rdf:rest arcs"):o.push(X=N):v.length?l=r(m,"can't be subject and object"):(d=N,h="subject"):l=r(m,"not confined to single graph");for(let ve=0;ve<v.length&&!l;++ve)N=v[ve],d?l=r(m,"can't have coreferences"):N.predicate.value===$o.rdf.rest?Q?l=r(m,"has incoming rdf:rest arcs"):Q=N:(d=N,h="object");$?c.unshift($.object):l=r(m,"has no list head"),m=Q&&Q.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(o),i}*[Symbol.iterator](){yield*this.readQuads()}}function Fa(t){return"string"==typeof t||t instanceof String}class uN extends lN.Readable{constructor(e,n,i,r,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:s}=this,o=this._filtered=new dN({factory:e._factory});for(const a of e.readQuads(s,r,i,n))o.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new uN(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var vBe=g(2821);function Er(t,e,n,i,r){return t.readQuads(e,n,i,r)}function EK(t){const e=t.length;let n=0;return new lN.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function hN(t,e){return fN.apply(this,arguments)}function fN(){return fN=jt(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield eBe.toRDF(n);e.import(EK(i))}return e}),fN.apply(this,arguments)}function pN(){return pN=jt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new vBe.RdfXmlParser({dataFactory:wr,strict:!0}),r=new Promise(s=>{i.once("end",()=>s(e))});return e.import(i),i.write(n),i.end(),r}return e}),pN.apply(this,arguments)}function mN(){return mN=jt(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new xK({format:"n3"}).parse(n);e.import(EK(i))}return e}),mN.apply(this,arguments)}function gN(t,e){const n=JSON.parse(t),i=new dN;return Object.assign(i,n,{_factory:e??wr}),i}const XS="Unknown Euler angle order",x_=.99999;var Ls=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(Ls||{});class es extends YE{static get ZYX(){return Ls.ZYX}static get YXZ(){return Ls.YXZ}static get XZY(){return Ls.XZY}static get ZXY(){return Ls.ZXY}static get YZX(){return Ls.YZX}static get XYZ(){return Ls.XYZ}static get RollPitchYaw(){return Ls.ZYX}static get DefaultOrder(){return Ls.ZYX}static get RotationOrders(){return Ls}static rotationOrder(e){return Ls[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=es.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,c=2*(n*i+s*r);let l=-2*(n*r-s*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+s*n),-2*(n*n+o)+1),m=Math.asin(l),v=Math.atan2(c,a);return this.set(f,m,v,es.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function ABe(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=hi(e)}get y(){return this[1]}set y(e){this[1]=hi(e)}get z(){return this[2]}set z(e){this[2]=hi(e)}get alpha(){return this[0]}set alpha(e){this[0]=hi(e)}get beta(){return this[1]}set beta(e){this[1]=hi(e)}get gamma(){return this[2]}set gamma(e){this[2]=hi(e)}get phi(){return this[0]}set phi(e){this[0]=hi(e)}get theta(){return this[1]}set theta(e){this[1]=hi(e)}get psi(){return this[2]}set psi(e){this[2]=hi(e)}get roll(){return this[0]}set roll(e){this[0]=hi(e)}get pitch(){return this[1]}set pitch(e){this[1]=hi(e)}get yaw(){return this[2]}set yaw(e){this[2]=hi(e)}get order(){return this[3]}set order(e){this[3]=function SBe(t){if(t<0&&t>=6)throw new Error(XS);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,Ls.ZYX)}fromRotationMatrix(e,n=es.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new S0;switch(this[4]){case Ls.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Ls.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Ls.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Ls.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Ls.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Ls.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(XS)}}_fromRotationMatrix(e,n=es.DefaultOrder){const i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(n=n||this[3]){case es.XYZ:this[1]=Math.asin(Rr(s,-1,1)),Math.abs(s)<x_?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case es.YXZ:this[0]=Math.asin(-Rr(c,-1,1)),Math.abs(c)<x_?(this[1]=Math.atan2(s,h),this[2]=Math.atan2(o,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case es.ZXY:this[0]=Math.asin(Rr(d,-1,1)),Math.abs(d)<x_?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(o,i));break;case es.ZYX:this[1]=Math.asin(-Rr(l,-1,1)),Math.abs(l)<x_?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(o,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case es.YZX:this[2]=Math.asin(Rr(o,-1,1)),Math.abs(o)<x_?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(s,h));break;case es.XZY:this[2]=Math.asin(-Rr(r,-1,1)),Math.abs(r)<x_?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(s,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(XS)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),c=Math.cos(s),l=Math.sin(i),d=Math.sin(r),h=Math.sin(s);switch(this[3]){case es.XYZ:{const f=o*c,m=o*h,v=l*c,T=l*h;n[0]=a*c,n[4]=-a*h,n[8]=d,n[1]=m+v*d,n[5]=f-T*d,n[9]=-l*a,n[2]=T-f*d,n[6]=v+m*d,n[10]=o*a;break}case es.YXZ:{const f=a*c,m=a*h,v=d*c,T=d*h;n[0]=f+T*l,n[4]=v*l-m,n[8]=o*d,n[1]=o*h,n[5]=o*c,n[9]=-l,n[2]=m*l-v,n[6]=T+f*l,n[10]=o*a;break}case es.ZXY:{const f=a*c,m=a*h,v=d*c,T=d*h;n[0]=f-T*l,n[4]=-o*h,n[8]=v+m*l,n[1]=m+v*l,n[5]=o*c,n[9]=T-f*l,n[2]=-o*d,n[6]=l,n[10]=o*a;break}case es.ZYX:{const f=o*c,m=o*h,v=l*c,T=l*h;n[0]=a*c,n[4]=v*d-m,n[8]=f*d+T,n[1]=a*h,n[5]=T*d+f,n[9]=m*d-v,n[2]=-d,n[6]=l*a,n[10]=o*a;break}case es.YZX:{const f=o*a,m=o*d,v=l*a,T=l*d;n[0]=a*c,n[4]=T-f*h,n[8]=v*h+m,n[1]=h,n[5]=o*c,n[9]=-l*c,n[2]=-d*c,n[6]=m*h+v,n[10]=f-T*h;break}case es.XZY:{const f=o*a,m=o*d,v=l*a,T=l*d;n[0]=a*c,n[4]=-h,n[8]=d*c,n[1]=f*h+T,n[5]=o*c,n[9]=m*h-v,n[2]=v*h-m,n[6]=l*c,n[10]=T*h+f;break}default:throw new Error(XS)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new S0(e*r*s-n*i*o,e*i*o+n*r*s,n*i*s-e*r*o,e*i*s+n*r*o)}}var AK=g(4938),CBe=g.t(AK,2),TBe=g(7991),SK=g(5440);const CK={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let YS;const MBe=new Uint8Array(16);function IBe(){if(!YS&&(YS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!YS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return YS(MBe)}const to=[];for(let t=0;t<256;++t)to.push((t+256).toString(16).slice(1));const RBe=function DBe(t,e,n){if(CK.randomUUID&&!e&&!t)return CK.randomUUID();const i=(t=t||{}).random||(t.rng||IBe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function TK(t,e=0){return(to[t[e+0]]+to[t[e+1]]+to[t[e+2]]+to[t[e+3]]+"-"+to[t[e+4]]+to[t[e+5]]+"-"+to[t[e+6]]+to[t[e+7]]+"-"+to[t[e+8]]+to[t[e+9]]+"-"+to[t[e+10]]+to[t[e+11]]+to[t[e+12]]+to[t[e+13]]+to[t[e+14]]+to[t[e+15]]).toLowerCase()}(i)};var KS=g(7184),qS=g(9689),OBe=g(6990),JS=g(6030);new nn,new nn;const Gv=new nn,DK=new nn;class _N{constructor(e=[0,0,0],n=0){xe(this,"center",void 0),xe(this,"radius",void 0),this.radius=-0,this.center=new nn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=Gv.from(n),this.center=(new nn).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new _N(this.center,this.radius)}union(e){const n=this.center,i=this.radius,s=e.radius,o=Gv.copy(e.center).subtract(n),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const c=.5*(i+a+s);return DK.copy(o).scale((-i+c)/a).add(n),this.center.copy(DK),this.radius=c,this}expand(e){const i=Gv.from(e).subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}transform(e){this.center.transform(e);const n=function R8(t,e){var s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(c,l,d),t}(Gv,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const i=Gv.from(e).subtract(this.center);return Math.max(0,i.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?-1:s<i?0:1}}var RK=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2",t}(RK||{});const PBe=Object.freeze([1,0,0,0,1,0,0,0,1]);class ha extends F8{static get IDENTITY(){return function NBe(){return QS||(QS=new ha,Object.freeze(QS)),QS}()}static get ZERO(){return function LBe(){return ZS||(ZS=new ha([0,0,0,0,0,0,0,0,0]),Object.freeze(ZS)),ZS}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return RK}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(PBe)}fromObject(e){return this.check()}fromQuaternion(e){return function Ybe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,l=n*o,d=i*o,h=i*a,f=r*o,m=r*a,v=r*c,T=s*o,N=s*a,$=s*c;t[0]=1-h-v,t[3]=d-$,t[6]=f+N,t[1]=d+$,t[4]=1-l-v,t[7]=m-T,t[2]=f-N,t[5]=m+T,t[8]=1-l-h}(this,e),this.check()}set(e,n,i,r,s,o,a,c,l){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,n,i,r,s,o,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=s,this[5]=c,this[6]=i,this[7]=o,this[8]=l,this.check()}determinant(){return function Wbe(t){var r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8];return t[0]*(l*s-o*c)+t[1]*(-l*r+o*a)+t[2]*(c*r-s*a)}(this)}transpose(){return function zbe(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function Gbe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*o-a*l,f=-d*s+a*c,m=l*s-o*c,v=n*h+i*f+r*m;v&&(t[0]=h*(v=1/v),t[1]=(-d*i+r*l)*v,t[2]=(a*i-r*o)*v,t[3]=f*v,t[4]=(d*n-r*c)*v,t[5]=(-a*n+r*s)*v,t[6]=m*v,t[7]=(-l*n+i*c)*v,t[8]=(o*n-i*s)*v)}(this,this),this.check()}multiplyLeft(e){return OH(this,e,this),this.check()}multiplyRight(e){return OH(this,this,e),this.check()}rotate(e){return function Xbe(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=Math.sin(n),m=Math.cos(n);t[0]=m*i+f*o,t[1]=m*r+f*a,t[2]=m*s+f*c,t[3]=m*o-f*i,t[4]=m*a-f*r,t[5]=m*c-f*s,t[6]=l,t[7]=d,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?kH(this,this,e):kH(this,this,[e,e]),this.check()}translate(e){return function $be(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=n[0],m=n[1];t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=f*i+m*o+l,t[7]=f*r+m*a+d,t[8]=f*s+m*c+h}(this,this,e),this.check()}transform(e,n){let i;switch(e.length){case 2:i=function due(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:i=T6(n||[-0,-0,-0],e,this);break;case 4:i=D6(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Xy(i,e.length),i}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let ZS,QS;const FBe=new nn,BBe=new nn,eC=new nn,tC=new nn,nC=new nn,UBe=new nn,jBe=new nn;class bN{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){xe(this,"center",void 0),xe(this,"halfAxes",void 0),this.center=(new nn).from(e),this.halfAxes=new ha(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new nn(e).len(),new nn(n).len(),new nn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new nn(e).normalize(),s=new nn(n).normalize(),o=new nn(i).normalize();return(new S0).fromMatrix3(new ha([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new S0(i),s=(new ha).fromQuaternion(r);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=(new nn).from(e),this.halfAxes=s,this}clone(){return new bN(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new _N){const n=this.halfAxes,i=n.getColumn(0,eC),r=n.getColumn(1,tC),s=n.getColumn(2,nC),o=FBe.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,c=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),l=i.dot(n)+e.distance;return l<=-c?-1:l>=c?1:0}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=BBe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,eC),s=i.getColumn(1,tC),o=i.getColumn(2,nC),a=r.magnitude(),c=s.magnitude(),l=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,d=0;return h=Math.abs(n.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(n.dot(s))-c,h>0&&(d+=h*h),h=Math.abs(n.dot(o))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,c=a.getColumn(0,eC),l=a.getColumn(1,tC),d=a.getColumn(2,nC),h=UBe.copy(c).add(l).add(d).add(o),f=jBe.copy(h).subtract(e);let m=n.dot(f);return r=Math.min(m,r),s=Math.max(m,s),h.copy(o).add(c).add(l).subtract(d),f.copy(h).subtract(e),m=n.dot(f),r=Math.min(m,r),s=Math.max(m,s),h.copy(o).add(c).subtract(l).add(d),f.copy(h).subtract(e),m=n.dot(f),r=Math.min(m,r),s=Math.max(m,s),h.copy(o).add(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=n.dot(f),r=Math.min(m,r),s=Math.max(m,s),o.copy(h).subtract(c).add(l).add(d),f.copy(h).subtract(e),m=n.dot(f),r=Math.min(m,r),s=Math.max(m,s),o.copy(h).subtract(c).add(l).subtract(d),f.copy(h).subtract(e),m=n.dot(f),r=Math.min(m,r),s=Math.max(m,s),o.copy(h).subtract(c).subtract(l).add(d),f.copy(h).subtract(e),m=n.dot(f),r=Math.min(m,r),s=Math.max(m,s),o.copy(h).subtract(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=n.dot(f),r=Math.min(m,r),s=Math.max(m,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,eC);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,tC);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,nC);return r.transformAsPoint(e),this.halfAxes=new ha([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const OK=new nn,kK=new nn;class Wv{constructor(e=[0,0,1],n=0){xe(this,"normal",void 0),xe(this,"distance",void 0),this.normal=new nn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return Yy(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=OK.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),Yy(Ud(this.normal.len(),1)),this.distance=r,this}clone(){return new Wv(this.normal,this.distance)}equals(e){return Ud(this.distance,e.distance)&&Ud(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=kK.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=OK.from(e);const i=this.getPointDistance(e),r=kK.copy(this.normal).scale(i);return e.subtract(r).to(n)}}const PK=[new nn([1,0,0]),new nn([0,1,0]),new nn([0,0,1])],LK=new nn,VBe=new nn;new Wv(new nn(1,0,0),0);class Oh{constructor(e=[]){xe(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*PK.length;const n=e.center,i=e.radius;let r=0;for(const s of PK){let o=this.planes[r],a=this.planes[r+1];o||(o=this.planes[r]=new Wv),a||(a=this.planes[r+1]=new Wv);const c=LK.copy(s).scale(-i).add(n);s.dot(c),o.fromPointNormal(c,s);const d=LK.copy(s).scale(i).add(n),h=VBe.copy(s).negate();h.dot(d),a.fromPointNormal(d,h),r+=2}return this}computeVisibility(e){let n=1;for(const i of this.planes)switch(e.intersectPlane(i)){case-1:return-1;case 0:n=0}return n}computeVisibilityWithPlaneMask(e,n){if(Yy(Number.isFinite(n),"parentPlaneMask is required."),n===Oh.MASK_OUTSIDE||n===Oh.MASK_INSIDE)return n;let i=Oh.MASK_INSIDE;const r=this.planes;for(let s=0;s<this.planes.length;++s){const o=s<31?1<<s:0;if(s<31&&!(n&o))continue;const c=e.intersectPlane(r[s]);if(-1===c)return Oh.MASK_OUTSIDE;0===c&&(i|=o)}return i}}xe(Oh,"MASK_OUTSIDE",4294967295),xe(Oh,"MASK_INSIDE",0),xe(Oh,"MASK_INDETERMINATE",2147483647),new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,Math,new ha,new ha,new ha,new ha,new ha,new nn,new nn,new nn,new nn,new nn,new ha,new ha,new ha;var g3e=g(7659);function*rC(t,e,n){for(const[i,r]of Object.entries(n))for(const s of Er(t,e,i,null,null)){const o="Literal"===s.object.termType?(0,qS.fromRdf)(s.object):s.object.id;yield[r,o]}}function Mp(t,e,n,i){const r={"@id":e,"@type":n};for(const[s,o]of Object.entries(i))for(const a of Er(t,r["@id"],s,null,null)){const c="Literal"===a.object.termType?(0,qS.fromRdf)(a.object):a.object.id;r[o]=c}return r}const ji=function mK(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,s){if("string"==typeof s){const o=Object.create(null);n[r]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||wr,i}({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},wr),FK={x:ji("rdf"),type:ji("rdf")("type")},_3e_label=(ji("rdfs"),ji("rdfs")("label")),Qt=(ji("rdfs")("comment"),ji("rdfs")("isDefinedBy"),ji("rdfs")("seeAlso"),ji("ccf")),ii={id:ji("ccf")("has_registration_location"),label:ji("rdfs")("label"),description:ji("rdfs")("comment"),link:Qt("url"),sex:Qt("sex"),age:Qt("age"),bmi:Qt("bmi"),Male:wr.literal("Male"),Female:wr.literal("Female"),consortiumName:Qt("consortium_name"),providerName:Qt("tissue_provider_name"),providerUUID:Qt("tissue_provider_uuid"),donor:Qt("comes_from"),sections:Qt("subdivided_into_sections"),datasets:Qt("generates_dataset"),sampleType:Qt("sample_type"),TissueBlock:wr.literal("Tissue Block"),TissueSection:wr.literal("Tissue Section"),NonStandard:wr.literal("Non-standard"),sectionCount:Qt("section_count"),sectionSize:Qt("section_size"),sectionUnits:Qt("section_size_unit"),sectionNumber:Qt("section_number"),spatialEntity:Qt("has_registration_location"),ontologyTerms:Qt("has_ontology_term"),cellTypeTerms:Qt("has_cell_type_term"),technology:Qt("technology"),thumbnail:Qt("thumbnail")},fi={x:Qt,base:ji("base"),ontologyNode:{label:Qt("ccf_pref_label"),parent:Qt("ccf_part_of"),children:Qt("ccf_part_of"),rui_rank:Qt("rui_rank"),synonymLabels:wr.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Qt("ccf_part_of"),ct_is_a:Qt("ccf_ct_isa"),located_in:Qt("ccf_located_in"),characterizes:Qt("ccf_characterizes"),bm_located_in:Qt("ccf_bm_located_in")},spatial:{Female:ji("base")("VHFemale"),Male:ji("base")("VHMale"),BothSexes:ji("base")("VHBothSexes"),FemaleOrgans:ji("base")("VHFemaleOrgans"),MaleOrgans:ji("base")("VHMaleOrgans")},SpatialObjectReference:Qt("spatial_object_reference"),SpatialEntity:Qt("spatial_entity"),SpatialPlacement:Qt("spatial_placement"),spatialObjectReference:{file:Qt("file_url"),file_format:Qt("file_format"),file_subpath:Qt("file_subpath")},extractionSet:{label:ji("rdfs")("label"),rui_rank:Qt("rui_rank")},spatialEntity:{label:ji("rdfs")("label"),description:ji("rdfs")("comment"),creator:ji("dcterms")("creator"),creator_first_name:Qt("creator_first_name"),creator_last_name:Qt("creator_last_name"),creator_orcid:Qt("creator_orcid"),creation_date:ji("dcterms")("created"),updated_date:Qt("updated_date"),ccf_annotations:Qt("collides_with"),representation_of:Qt("representation_of"),reference_organ:Qt("has_reference_organ"),extraction_set_for:Qt("extraction_set_for"),extraction_set:Qt("has_extraction_set"),sex:Qt("organ_owner_sex"),side:Qt("organ_side"),rui_rank:Qt("rui_rank"),slice_thickness:Qt("slice_thickness"),slice_count:Qt("slice_count"),x_dimension:Qt("x_dimension"),y_dimension:Qt("y_dimension"),z_dimension:Qt("z_dimension"),dimension_units:Qt("dimension_unit"),object:Qt("has_object_reference")},spatialPlacement:{source:Qt("placement_for"),target:Qt("placement_relative_to"),placement_date:ji("dcterms")("created"),x_scaling:Qt("x_scaling"),y_scaling:Qt("y_scaling"),z_scaling:Qt("z_scaling"),scaling_units:Qt("scaling_unit"),x_rotation:Qt("x_rotation"),y_rotation:Qt("y_rotation"),z_rotation:Qt("z_rotation"),w_rotation:Qt("theta_rotation"),rotation_order:Qt("rotation_order"),rotation_units:Qt("rotation_unit"),x_translation:Qt("x_translation"),y_translation:Qt("y_translation"),z_translation:Qt("z_translation"),translation_units:Qt("translation_unit")}},ri={x:ji("uberon"),body:ji("uberon")("0013702")},b3e={x:ji("cl"),cell:ji("cl")("0000000")},$v={x:ji("fma")},Zc=(ji("lmha"),{body:ri.body,cell:b3e.cell,respiratory_system:ri.x("0001004"),colon:ri.x("0001155"),left_lung:ri.x("0002168"),right_lung:ri.x("0002167"),left_bronchus:ri.x("0002178"),right_bronchus:ri.x("0002177"),kidney:ri.x("0002113"),ureter:ri.x("0000056"),eye:ri.x("0000970"),fallopian_tube:ri.x("0003889"),knee:ri.x("0001465"),ovary:ri.x("0000992"),trachea:ri.x("0003126"),aorta:ri.x("0000947"),blood:ri.x("0000178"),bone_marrow:ri.x("0002371"),male_reproductive_system:ri.x("0000079"),lymph_node:ri.x("0000029"),blood_vasculature:ri.x("0004537"),brain:ri.x("0000955"),eye_left:ri.x("0004548"),eye_right:$v.x("54449"),fallopian_tube_left:ri.x("0001303"),fallopian_tube_right:ri.x("0001302"),heart:ri.x("0000948"),kidney_left:ri.x("0004538"),kidney_right:ri.x("0004539"),knee_left:$v.x("24978"),knee_right:$v.x("24977"),large_intestine:ri.x("0000059"),liver:ri.x("0002107"),lungs:ri.x("0002048"),mesenteric_lymph_node:ri.x("0002509"),ovary_left:$v.x("7214"),ovary_right:$v.x("7213"),pancreas:ri.x("0001264"),pelvis:ri.x("0001270"),prostate_gland:ri.x("0002367"),skin:ri.x("0002097"),small_intestine:ri.x("0002108"),spleen:ri.x("0002106"),thymus:ri.x("0002370"),ureter_left:ri.x("0001223"),ureter_right:ri.x("0001222"),urinary_bladder:ri.x("0001255"),uterus:ri.x("0000995")});function EN(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const sC={spatialObjectReference:EN(fi.spatialObjectReference),spatialEntity:EN(fi.spatialEntity),spatialPlacement:EN(fi.spatialPlacement)};function BK(t,e){const n=Mp(t,e,"ExtractionSet",sC.spatialEntity);return n.extractionSites=KS(t.getSubjects(fi.spatialEntity.extraction_set,e,null).map(i=>Ip(t,i.id)),["rui_rank"]),n}function Ip(t,e){const n=Mp(t,e,"SpatialEntity",sC.spatialEntity);return n.object&&(n.object=function y3e(t,e){return Mp(t,e,"SpatialObjectReference",sC.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,fi.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,ii.spatialEntity,e,null),n}function E3e(t,e){const n=Mp(t,e,"SpatialPlacement",sC.spatialPlacement);return n.source&&(n.source=Ip(t,n.source)),n.target&&(n.target=Ip(t,n.target)),n}const S3e=(AK||CBe).DirectedGraph;function UK(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),s=[n.x_rotation,n.y_rotation,n.z_rotation].map(x6),o=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(s).scale(o)}class jK{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new S3e;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},FK.type,fi.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},FK.type,fi.SpatialEntity,null);const n={};for(const i of Er(e,null,fi.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of Er(e,null,fi.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new zn(zn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new zn(zn.IDENTITY),s=TBe(this.graph,e,n);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&UK(r,E3e(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=SK(e,"placement[0]",SK(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,n),s&&(s=UK(s,r))):i&&(s=this.getTransformationMatrix(i,n)),s){const o=(new es).fromRotationMatrix(s,es.XYZ),a=s.getTranslation().map(d=>1e3*d),c=o.toVector3().map(rae),l=s.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${RBe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class VK{constructor(e){this.db=e}getSpatialEntity(e){return Ip(this.db.store,e)}getExtractionSets(e){return function v3e(t,e){return KS(t.getSubjects(fi.spatialEntity.extraction_set_for,e,null).map(n=>BK(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return BK(this.db.store,e)}getAnatomicalStructures(e){return function x3e(t,e){return KS(t.getSubjects(fi.spatialEntity.reference_organ,e,null).map(n=>Ip(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function w3e(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(Ip(t,n.subject.id))},null,fi.spatialEntity.reference_organ,null,null),KS(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=fi.spatial.Male.id;break;case"Female":n=fi.spatial.Female.id;break;default:n=fi.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,n,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(fi.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(fi.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(fi.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(fi.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(fi.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(s=>s.representation_of===e&&(!i||s.sex===n?.sex));if(r.length>0){const s=r[0],a=this.getSceneNode(s,s,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(n)??[]).map(l=>this.getSceneNode(l,s,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let o=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(o){if(r)o=new zn(zn.IDENTITY).rotateX(x6(90)).multiplyLeft(o);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);o.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:o,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const C3e={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function oC(t,e=C3e){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const{get:Ph,omit:T3e,set:aC,toNumber:AN}=OBe,cC="https://entity.api.hubmapconsortium.org/entities/",HK=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),M3e={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},E_={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},SN="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class R3e{constructor(e,n="",i="",r){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const a=this.data.descendants||[],c=(this.data.ancestors||[]).find(ve=>"Donor"===ve.entity_type);this.donor=this.getDonor(c,i);const l=this.getRuiLocation(e,this.donor);l?this.rui_location=l:this.bad=!0,E_[e.group_uuid]||(E_[e.group_uuid]=e.group_name);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=E_[e.group_uuid]||e.group_name,f=e.created_by_user_displayname;this["@id"]=cC+e.uuid,this.label=`Registered ${d}, ${f}, ${h}`,this.link=`${i}browse/sample/${e.uuid}`;const m={},v=[];this.sections=v;const T=[];this.datasets=T;for(const ve of a.filter(Pe=>"Sample"===Pe.entity_type)){const Pe=this.getSection(ve,e,i);m[ve.submission_id]=Pe,v.push(Pe),Pe.section_number=Pe.section_number??v.length}for(const ve of a)if("Dataset"===ve.entity_type){const Pe=this.getDataset(ve,n,i,r),$e=Ph(ve,["ingest_metadata","metadata","tissue_id"]);m[$e]?m[$e].datasets?.push(Pe):T.push(Pe)}const N=l??{},$=`${N.x_dimension} x ${N.y_dimension} x ${N.z_dimension} ${N.dimension_units}`;this.section_count=N.slice_count||v.length;const X=parseFloat((N.slice_thickness||(N.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=X;const Q=N.dimension_units||"millimeter";this.section_units=Q,this.description=`${$}, ${X} ${Q}, ${this.section_count} Sections`,v.forEach((ve,Pe)=>{ve.description=`${N.x_dimension} x ${N.y_dimension} x ${X} ${Q}, ${X} ${Q}, ${ve.description}`,ve.section_number=Pe+1})}getSection(e,n,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":cC+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${E_[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n="",i="",r){const s=new Date(e.last_modified_timestamp).toLocaleDateString(),o=E_[e.group_uuid]||e.group_name,a=e.created_by_user_displayname,c=[...e.data_types,Ph(e,["ingest_metadata","metadata","assay_type"],"")],l=c.join("|").toLowerCase();let d,h="assets/icons/ico-unknown.svg";return-1!==l.indexOf("10x")?(d="10x",h="assets/icons/ico-bulk-10x.svg"):-1!==l.indexOf("af")?(d="AF",h="assets/icons/ico-spatial-af.svg"):-1!==l.indexOf("codex")?(d="CODEX",h="assets/icons/ico-spatial-codex.svg"):-1!==l.indexOf("imc")?(d="IMC",h="assets/icons/ico-spatial-imc.svg"):-1!==l.indexOf("lc")&&-1===l.indexOf("af")?(d="LC",h="assets/icons/ico-bulk-lc.svg"):d=-1!==l.indexOf("maldi")?"MALDI":-1!==l.indexOf("pas")?"PAS":"OTHER",h=this.getDatasetThumbnail(e,n,r)??h,{"@id":cC+e.uuid,"@type":"Dataset",label:`Registered ${s}, ${a}, ${o}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:d,thumbnail:h}}getDatasetThumbnail(e,n,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${n}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=Ph(e,"metadata.files",[]).filter(s=>/\.(ome\.tif|ome\.tiff)$/.test(s.rel_path)).filter(s=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(s.rel_path)).filter(s=>HK.has(s.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(s=>`${n}/${e.uuid}/${s.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const s=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(HK.has(s))return`assets/thumbnails/TMC-Vanderbilt/DR1/${s}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=M3e[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,n){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const s=i.match(/age ([0-9]+)/);let o,a;s&&(o=AN(s[1]));for(const f of Ph(e,"metadata.organ_donor_data",Ph(e,"metadata.living_donor_data",[])))"Feminine gender"===f.preferred_term||"Female"===f.preferred_term?r="Female":"Masculine gender"===f.preferred_term||"Male"===f.preferred_term?r="Male":"Current chronological age"===f.preferred_term||"Age"===f.preferred_term?o=AN(f.data_value):"Body mass index"===f.preferred_term&&(a=AN(f.data_value));let c="";r&&o&&(c+=`${r}, Age ${o}`,a&&(c+=`, BMI ${a.toFixed(1)}`));const l=new Date(e.last_modified_timestamp).toLocaleDateString(),d=E_[e.group_uuid]||e.group_name;return{"@id":cC+e.uuid,"@type":"Donor",label:c,description:`Entered ${l}, ${e.created_by_user_displayname}, ${d}`,link:`${n}browse/donor/${e.uuid}`,age:o,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:d,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const s=Ph(i,["placement","target"])??"";s.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?aC(i,["placement","target"],s.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===s||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===s)&&aC(i,["placement","target"],"Male"===n.sex?s.replace("#VH","#VHM")+"_Patch":s.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return T3e({...this},["data","bad","donor"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const O3e=1e4,k3e=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],P3e={exists:{field:"rui_location"}};function zK(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??P3e,_source:{includes:k3e}})}function CN(t,e){return TN.apply(this,arguments)}function TN(){return TN=jt(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch{return}}),TN.apply(this,arguments)}function MN(){return MN=jt(function*(t,e,n){const i=O3e,r=function L3e(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),s=zK(0,i,n),o=yield CN(t,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const c=[];for(let h=i;h<a;h+=i)c.push(CN(t,{method:"POST",headers:r,body:zK(h,i,n)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...o,hits:{...o.hits,hits:o.hits.hits.concat(...d)}}}),MN.apply(this,arguments)}function IN(){return IN=jt(function*(t,e,n,i,r="",s=""){let o;if("static"===e?o=yield CN(t):"search-api"===e&&(o=yield function N3e(t,e,n){return MN.apply(this,arguments)}(t,i,n)),o)return function I3e(t,e="",n="",i,r=!1){const o={},a=Ph(t,"hits.hits",[]).map(l=>Ph(l,"_source",{})).sort((l,d)=>l.uuid.localeCompare(d.uuid)).map(l=>new R3e(l,e,n,i).toJsonLd());for(const l of a){const d=l["@id"];o[d]?o[d].samples.push(l.samples[0]):o[d]=l}const c=Object.values(o);return r&&(function D3e(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===o)&&(r[s].deleteMe=!0,n++)}i.samples=r.filter(s=>!0!==s.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(c),console.log(c.map(l=>({"@context":SN,...l})))),oC(JSON.stringify({"@context":SN,"@graph":c}),SN)}(o,r,s,i);console.warn(`Unable to load ${t} as HuBMAP Data`)}),IN.apply(this,arguments)}function Xv(t,e,n){const i=new Set;for(const r of e)for(const s of Er(t,r,n,null,null))i.add(s.object.id);return i}const j3e={[fi.spatialEntity.x_dimension.id]:"x",[fi.spatialEntity.y_dimension.id]:"y",[fi.spatialEntity.z_dimension.id]:"z"};function H3e(t,e,n,i){const r=e.getTransformationMatrix(n,i);let s;if(r){const o=r.getTranslation(),a=function V3e(t,e){const n=Mp(t,e,"Dimensions",j3e);return[n.x,n.y,n.z]}(t,n).map(l=>l/1e3/2),c=(new es).fromRotationMatrix(r,es.XYZ).toQuaternion().normalize().calculateW();s=(new bN).fromCenterHalfSizeQuaternion(o,a,c)}return s}function z3e(t,e,n,i){const{x:r,y:s,z:o,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of n){const f=H3e(t,e,h,c);f&&f.distanceSquaredTo([r,s,o].map(v=>v/1e3))<=d&&l.add(h)}return l}function Yv(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Er(t,a,ii.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function lC(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Er(t,a,ii.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function A_(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function RN(t,e,n){const i=new Set;for(const r of n){const s=wr.namedNode(r);t.forSubjects(A_(e,i),fi.spatialEntity.ccf_annotations,s,null)}return i}function ON(t,e){const n=function i4e(t,e){const n=new Map;for(const i of t)for(const r of Er(e,i,ii.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id).add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const s=n.get(r);for(const o of Er(e,r,fi.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s.forEach(c=>a.add(c))}else i.set(o.object.id,new Set(s))}return i}function a4e(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[fi.ontologyNode.label.id]:"label",[n]:"parent",[fi.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of rC(t,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=t.getSubjects(n,e,null).map(s=>s.id),i}function WK(t,e,n,i){const r={root:e,nodes:{}},s=new Set;for(const a of Er(t,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=a4e(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const o=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=o,$K(r),r}function $K(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)$K(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const XK=g3e(function c4e(t){const e=WK(t,Zc.body.id,"body",fi.asctb.part_of.id);return e.nodes[Zc.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");function kN(t,e,n,i){return{"@id":`http://purl.org/ccf/${t}`,id:t,label:e,parent:n??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const dC={[ii.label.id]:"label",[ii.description.id]:"description",[ii.link.id]:"link"},u4e={...dC,[ii.providerName.id]:"providerName"},h4e={...dC,[ii.technology.id]:"technology",[ii.thumbnail.id]:"thumbnail"},f4e={...dC,[ii.sampleType.id]:"sampleType",[ii.sectionNumber.id]:"sectionNumber",[ii.datasets.id]:"datasets"},p4e={...dC,[ii.sampleType.id]:"sampleType",[ii.sectionCount.id]:"sectionCount",[ii.sectionSize.id]:"sectionSize",[ii.sectionUnits.id]:"sectionUnits",[ii.donor.id]:"donor",[ii.spatialEntity.id]:"spatialEntityId",[ii.sections.id]:"sections",[ii.datasets.id]:"datasets"};function m4e(t,e){return Mp(t,e,"Donor",u4e)}function YK(t,e){return Mp(t,e,"Dataset",h4e)}function g4e(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of rC(t,e,f4e))if("datasets"===i){const s=YK(t,r);n[i].push(s)}else n[i]=r;return n}class b4e{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const n=Date.now();return this.database.connect().then(function(){var i=jt(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-n})}}function PN(){return PN=jt(function*(){const t=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(t,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),PN.apply(this,arguments)}const{delMany:E4e,get:KK,setMany:A4e}=M,S4e={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class C4e{constructor(e=S4e){this.options=e,this.store=new dN(void 0,{factory:wr}),this.graph=new jK(this),this.scene=new VK(this)}connect(e,n=!1){var i=this;return jt(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return jt(function*(){const n=(new Date).getTime(),i=QFe(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,s=`ccf-database.${i}`,o=yield KK(r).catch(()=>{});let a;o&&n-new Date(+o).getTime()>36e5?yield E4e([s,r]).catch(()=>{}):a=yield KK(s).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),A4e([[s,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return jt(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=gN(r,wr);else if(r.endsWith(".n3store.json")){const s=yield fetch(r).then(o=>o.text()).catch(()=>console.log("Couldn't locate serialized store."));s&&(e.store=gN(s,wr))}else r?.length>0&&i.push(r);i.push(yield function w4e(){return PN.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function GK(t,e,n,i){return IN.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken,e.options.hubmapAssetsUrl,e.options.hubmapPortalUrl).then(s=>{if(s)return e.addDataSources([s])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return jt(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var s=jt(function*(o){if("string"==typeof o)if((o.startsWith("http")||o.startsWith("assets/"))&&o.includes("jsonld")){const a=o;o=oC(o=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield hN(o,r)}else o.endsWith("n3")?yield function wBe(t,e){return mN.apply(this,arguments)}(o,r):o.endsWith("rdf")||o.endsWith("owl")||o.endsWith("xml")?yield function xBe(t,e){return pN.apply(this,arguments)}(o,r):(o=oC(o),yield hN(o,r));else o=oC(JSON.stringify(o)),yield hN(o,r)});return function(o){return s.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return jt(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function y4e(t){const e=XK(t),n=new Map;for(const{subject:i,object:r}of Er(t,null,fi.spatialEntity.representation_of,null,null)){const s=new Set([r.id]);let o=e.nodes[r.id]?.parent;for(;o&&!s.has(o);)s.add(o),o=e.nodes[o]?.parent;n.set(i.id,[...s].map(a=>wr.namedNode(a)))}for(const{object:i}of Er(t,null,ii.spatialEntity,null,null))for(const{subject:r}of Er(t,null,fi.spatialPlacement.source,i,null))for(const{object:s}of Er(t,r,fi.spatialPlacement.target,null,null))for(const o of n.get(s.id)??[])t.addQuad(wr.namedNode(i.id),fi.spatialEntity.ccf_annotations,o)}(e.store),e})()}serialize(){return function EBe(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return jt(function*(){n.store=gN(e,wr),n.graph=new jK(n),n.scene=new VK(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function W3e(t,e,n){let i=function $3e(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),ii.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function t4e(t,e,n=!0){const i=new Set;if(t.forSubjects(A_(e,i),ii.spatialEntity,null,null),!n){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=Yv(t,i,s=>function X3e(t,e,n){const i=new Set;return t.forSubjects(A_(e,i),ii.sex,ii[n],null),i}(t,s,r))}if(i.size>0&&n.consortiums?.length>0&&(i=Yv(t,i,r=>function Y3e(t,e,n){const i=new Set;for(const r of n){const s=wr.literal(r);t.forSubjects(A_(e,i),ii.consortiumName,s,null)}return i}(t,r,n.consortiums))),i.size>0&&n.tmc?.length>0&&(i=Yv(t,i,r=>function K3e(t,e,n){const i=new Set;for(const r of n){const s=wr.literal(r);t.forSubjects(A_(e,i),ii.providerName,s,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function G3e(t,e,n){const i=new Map,r=new Set,s=new Set(e);for(const c of e)for(const l of Er(t,c,ii.sections,null,null))s.add(l.object.id);for(const c of s)for(const l of Er(t,c,ii.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const o=n(r),a=new Set;for(const c of o)for(const l of i.get(c)??[])a.add(l);return a}(t,i,r=>function q3e(t,e,n){const i=new Set;for(const r of n){const s=wr.literal(r);t.forSubjects(A_(e,i),ii.technology,s,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=lC(t,i,r=>function n4e(t,e,n,i){const r=new Set;for(const s of i)z3e(t,e,n,s).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(Zc.body.id)&&(i=lC(t,i,s=>RN(t,s,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(Zc.cell.id)&&(i=lC(t,i,s=>function J3e(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,fi.asctb.located_in,null),r===Zc.cell.id&&i.add(Zc.body.id);return RN(t,e,[...i])}(t,s,r)))}if(i.size>0&&n.biomarkerTerms?.length>0){const r=n.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=lC(t,i,s=>function Z3e(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,fi.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(Zc.body.id);return RN(t,e,[...i])}(t,s,r)))}if(i.size>0&&2===n.ageRange?.length&&JS(n.ageRange[0])&&JS(n.ageRange[1])){const r=Math.max(...n.ageRange),s=Math.min(...n.ageRange);1===s&&110===r||(i=Yv(t,i,o=>function Q3e(t,e,n,i){const r=new Set;for(const s of e)for(const o of Er(t,s,ii.age,null,null)){const a=(0,qS.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}if(i.size>0&&2===n.bmiRange?.length&&JS(n.bmiRange[0])&&JS(n.bmiRange[1])){const r=Math.max(...n.bmiRange),s=Math.min(...n.bmiRange);13===s&&83===r||(i=Yv(t,i,o=>function e4e(t,e,n,i){const r=new Set;for(const s of e)for(const o of Er(t,s,ii.bmi,null,null)){const a=(0,qS.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(wr.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function A3e(t,e){const n=t.getObjects(wr.namedNode(e),ii.spatialEntity,null);if(n.length>0)return Ip(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return jt(function*(){return e.status||(e.status=new b4e(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return jt(function*(){return function B3e(t){const e=new Set;for(const n of Er(t,null,ii.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return jt(function*(){return function U3e(t){const e=new Set;for(const n of Er(t,null,ii.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return jt(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function _4e(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of rC(t,e,p4e))if("sections"===i){const s=g4e(t,r);n[i].push(s)}else if("datasets"===i){const s=YK(t,r);n[i].push(s)}else n[i]="donor"===i?m4e(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return jt(function*(){return function F3e(t,e){const n=Xv(e,t,ii.donor.id),i=Xv(e,n,ii.providerUUID.id),r=new Set;for(const c of t)for(const l of Er(e,c,ii.spatialEntity,null,null))r.add(l.subject.id);const s=Xv(e,r,ii.sections.id),o=new Set([...Xv(e,r,ii.datasets.id),...Xv(e,s,ii.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([c,l])=>({label:c,count:l}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return jt(function*(){return function r4e(t,e){const n={};return ON(t,e).forEach((r,s)=>{n[s]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return jt(function*(){return function o4e(t,e){const n=ON(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of Er(e,null,fi.asctb.located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o.forEach(d=>l.add(d))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r[Zc.cell.id]=n.get(Zc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getBiomarkerTermOccurences(e){var n=this;return jt(function*(){return function s4e(t,e){const n=ON(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of Er(e,null,fi.asctb.bm_located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o.forEach(d=>l.add(d))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r.biomarkers=n.get(Zc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return jt(function*(){return XK(e.store)})()}getCellTypeTreeModel(){var e=this;return jt(function*(){return function l4e(t){return WK(t,Zc.cell.id,"cell",fi.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return jt(function*(){return function d4e(t){const e=fi.x("ccf_biomarker_type"),n={biomarkers:kN("biomarkers","Biomarkers","",[])};for(const i of Er(t,null,e,null,null)){const r=i.object.value,s=i.subject.id;n[r]||(n[r]=kN(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),n.biomarkers.children.push(r)),n[r].children.push(s);const o=kN(s,"",r,[]),a={[fi.ontologyNode.label.id]:"label",[_3e_label.id]:"synonymLabels"};for(const[c,l]of rC(t,s,a))"synonymLabels"===c?l&&l!==o.label&&o.synonymLabels.push(l):o[c]=l;for(const c of Object.values(n))c.children.length>1&&c.children.sort((l,d)=>n[l]?.label.localeCompare(n[d]?.label));n[s]=o}return{root:"biomarkers",nodes:n}}(e.store)})()}getReferenceOrgans(){var e=this;return jt(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return jt(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return jt(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return jt(function*(){return i.graph.getSpatialPlacement(e,n)})()}}class qK extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class P4e{constructor(){this.cancelUncompleted$=new H}cancelPreviousAction(){this.cancelUncompleted$.next()}}const LN="\u0275fac",JK=Symbol("InjectorInstance"),ZK=Symbol("FactoryHasBeenDecorated");function QK(t,e){const n=t[JK];return n?n.get(e):null}const F4e={cancelUncompleted:!1};function eq(t=F4e){return(e,n,i)=>{let r;const s=function L4e(t){return t?new P4e:null}(t.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=QK(this,ql)||function O4e(){throw new qK}(),c=QK(this,on)||function k4e(){throw new qK}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function R4e(t,e,n){return sg(e)?function D4e(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):ap(e)?function I4e(t,e,n){return null!==n&&(e=e.pipe(gr(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,l,s))}"function"==typeof i?.value?(r=i.value,i.value=o):Object.defineProperty(e,n,{set:a=>r=a,get:()=>o}),function N4e(t){if(ZK in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[LN]&&function NN(t){const e=t[LN];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[JK]=Ve(Um),r};n&&(n.factory=i),Object.defineProperty(t,LN,{get:()=>i})}(e),t.constructor.prototype[ZK]=!0}(e)}}var Dp;const MUe=["bodyCanvas"];let IUe=(()=>{var t;class e{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new tn,this.nodeDrag=new tn,this.nodeClick=new tn,this.nodeHoverStart=new tn,this.nodeHoverStop=new tn,this.initialized=new tn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(i){this._scene=i,this.bodyUI?.setScene(i)}get rotation(){return this._rotation}set rotation(i){this._rotation=i,this.bodyUI?.setRotation(i)}get rotationX(){return this._rotationX}set rotationX(i){this._rotationX=i,this.bodyUI?.setRotationX(i)}get zoom(){return this._zoom}set zoom(i){this._zoom=i,this.bodyUI?.setZoom(i)}get target(){return this._target}set target(i){this._target=i,this.bodyUI?.setTarget(i)}get bounds(){return this._bounds}set bounds(i){this._bounds=i,this.zoomToBounds(i)}get camera(){return this._camera}set camera(i){this._camera=i}get interactive(){return this._interactive}set interactive(i){this._interactive=i,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(i,r={x:48,y:48}){if(this.bodyCanvas){const{width:s,height:o}=this.bodyCanvas.nativeElement,a=window.devicePixelRatio,c=Math.min(Math.log2((s-r.x)/a/i.x),Math.log2((o-r.y)/a/i.y));this.zoom=c}}setupBodyUI(){var i=this;return jt(function*(){const r=i.bodyCanvas.nativeElement,s=new WCe({id:"body-ui",canvas:r,zoom:i.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:i.interactive,camera:i.camera});r.addEventListener("contextmenu",o=>o.preventDefault()),yield s.initialize(),i.bodyUI=s,window.bodyUI=s,i.scene?.length>0&&i.bodyUI.setScene(i.scene),i.bounds&&i.zoomToBounds(i.bounds),i.target&&i.bodyUI.setTarget(i.target),i.subscriptions=[i.bodyUI.sceneRotation$.subscribe(o=>i.rotationChange.next(o)),i.bodyUI.nodeDrag$.subscribe(o=>i.nodeDrag.emit(o)),i.bodyUI.nodeClick$.subscribe(o=>i.nodeClick.emit(o)),i.bodyUI.nodeHoverStart$.subscribe(o=>i.nodeHoverStart.emit(o)),i.bodyUI.nodeHoverStop$.subscribe(o=>i.nodeHoverStop.emit(o))],i.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=kn({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Pi(MUe,5,Mt),2&i){let s;Bn(s=Un())&&(r.bodyCanvas=s.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Ea(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&jn(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0}),e})(),DUe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[Gi]}),e})();new bt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const pq=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name));function KUe(t,e){if(1&t&&(Ct(0,"div",16),jn(1,"youtube-player",17),Dt()),2&t){const n=Fn(3);Rt(1),tE("videoId",n.videoID)}}function qUe(t,e){if(1&t&&(Ct(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),ci(3),Dt()(),Ct(4,"div",13),jn(5,"markdown",14),fn(6,KUe,2,1,"div",15),Dt()()),2&t){const n=Fn(),i=n.index,r=n.$implicit;Ut("expanded",0===i),Rt(3),ks(r.title),Rt(2),Nn("first",0===i),Ut("data",r.content),Rt(1),Ut("ngIf",0===i)}}function JUe(t,e){if(1&t&&(Ct(0,"div",9),fn(1,qUe,7,6,"mat-expansion-panel",10),Dt()),2&t){const n=e.$implicit;Rt(1),Ut("ngIf",n)}}pq.filter(t=>!0!==t.disabled);let mq=(()=>{var t;class e{constructor(i,r){this.dialogRef=i,this.data=r,this.documentationContents=r.content||[],this.infoTitle=r.title||"",this.videoID=r.videoID}ngOnInit(){const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",document.body.appendChild(i)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(xL),Ve(eX))},t.\u0275cmp=kn({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Ct(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),ci(5),Dt(),Ct(6,"div",5)(7,"mat-icon",6),gn("click",function(){return r.close()}),ci(8,"clear"),Dt()()(),Ct(9,"mat-dialog-content",7),fn(10,JUe,2,1,"div",8),Dt()()()()),2&i&&(Rt(5),ks(r.infoTitle),Rt(5),Ut("ngForOf",r.documentationContents))},dependencies:[Ld,Uc,nX,iX,d_,fX,VOe,xX,UX],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e})(),gq=(()=>{var t;class e{constructor(i){this.http=i,this.panelContent=new Ke({content:[],infoTitle:"",videoID:""})}updateData(i,r,s){this.http.get(i,{responseType:"text"}).subscribe(o=>{const a={content:this.parseMarkdown(o),infoTitle:s,videoID:r};this.panelContent.next(a)})}parseMarkdown(i){const r=[],s=i.split("# ");for(const o of s)if(o.length){const a=o.includes("\n\n")?"\n\n":"\r\n\r\n",c=o.split(a);r.push({title:c[0],content:c.splice(1).join(a)})}return r}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(Th))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),QUe=(()=>{var t;class e{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new tn,this.closeClicked=new tn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=kn({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&Ea(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Ct(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),ci(5),Dt(),Ct(6,"mat-icon",5),gn("click",function(){return r.close()}),ci(7,"clear"),Dt()(),jn(8,"img",6),Ct(9,"mat-dialog-content",7)(10,"div",8),ci(11),Dt(),Ct(12,"a",9),gn("click",function(){return r.onDialogButtonClick()}),Dt()()()()()),2&i&&(Rt(5),ks(r.infoTitle),Rt(3),Ut("src",r.imageUrl,Wb),Rt(3),Bo(" ",r.message,""),Rt(1),Ut("text",r.callToAction))},dependencies:[d_,nX,iX,VX],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),e})(),I_=(()=>{var t;let e=((t=class extends tLe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function nLe(){return yi(t=>null!=t)}(),zo(1))}setConfig(i){this.setState(i)}patchConfig(i){this.patchState(i)}getProperty(i){return this.config$.pipe(_$(...i),Ue(),zo(1))}getOption(...i){const r=this.getPathKey(i);if(this.optionCache.has(r))return this.optionCache.get(r);const s=this.config$.pipe(_$(...i),Ue(),zo(1));return this.optionCache.set(r,s),s}getPathKey(i){return`${i.length}:${i.join(".")}`}}).\u0275fac=function(){let n;return function(r){return(n||(n=Ci(t)))(r||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t);return ot([sY()],e.prototype,"config$",null),e=ot([ZPe(),j9({name:"globalConfig",defaults:null})],e),e})();!function nje(){const t=localStorage.getItem("ALLOW_TELEMETRY");null===t||t.toLowerCase()}();class sje{getDatabaseStatus(){return this.forwardCall("getDatabaseStatus")}getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getCellTypeTreeModel(){return this.forwardCall("getCellTypeTreeModel")}getBiomarkerTreeModel(){return this.forwardCall("getBiomarkerTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getCellTypeTermOccurences(e){return this.forwardCall("getCellTypeTermOccurences",e)}getBiomarkerTermOccurences(e){return this.forwardCall("getBiomarkerTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,n){return this.forwardCall("getReferenceOrganScene",e,n)}}class _q extends sje{forwardCall(e,...n){return this.impl$.pipe(Oe(i=>i[e](...n)))}}let bq=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})();const BN=new H,D_={cacheBusterObserver:BN},Rp={cacheBusterObserver:BN,maxCacheCount:4};function yq(t,e,n){return t?{min:t[0]>e?t[0]:void 0,max:t[1]<n?t[1]:void 0}:void 0}function oje(t){return{age:yq(t?.ageRange,1,110),bmi:yq(t?.bmiRange,13,83),sex:t?.sex?.toLowerCase?.(),ontologyTerms:t?.ontologyTerms,cellTypeTerms:t?.cellTypeTerms,consortiums:t?.consortiums,providers:t?.tmc,technologies:t?.technologies,spatial:t?.spatialSearches}}function vq(t){return t.map(e=>({...e,transformMatrix:new zn(e.transformMatrix??[])}))}let aje=(()=>{var t;class e{constructor(i,r){this.api=i,this.globalConfig=r,r.getOption("hubmapToken").subscribe(BN)}getDatabaseStatus(){return this.doRequest(i=>this.api.dbStatus(i))}getProviderNames(){return this.doRequest(i=>this.api.providerNames(i))}getDatasetTechnologyNames(){return this.doRequest(i=>this.api.technologyNames(i))}getOntologyTreeModel(){return this.doRequest(i=>this.api.ontologyTreeModel(i),void 0,{},t=>t)}getCellTypeTreeModel(){return this.doRequest(i=>this.api.cellTypeTreeModel(i),void 0,{},t=>t)}getBiomarkerTreeModel(){return this.doRequest(i=>this.api.biomarkerTreeModel(i),void 0,{},t=>t)}getReferenceOrgans(){return this.doRequest(i=>this.api.referenceOrgans(i),void 0,{},t=>t)}getTissueBlockResults(i){return this.doRequest(r=>this.api.tissueBlocks(r),i,{},t=>t)}getAggregateResults(i){return this.doRequest(r=>this.api.aggregateResults(r),i)}getOntologyTermOccurences(i){return this.doRequest(r=>this.api.ontologyTermOccurences(r),i)}getCellTypeTermOccurences(i){return this.doRequest(r=>this.api.cellTypeTermOccurences(r),i)}getBiomarkerTermOccurences(i){return this.doRequest(r=>this.api.biomarkerTermOccurences(r),i)}getScene(i){return this.doRequest(r=>this.api.scene(r),i,{},vq)}getReferenceOrganScene(i,r){return this.doRequest(s=>this.api.referenceOrganScene(s),r,{organIri:i},vq)}doRequest(i,r,s,o){const{api:a,globalConfig:c}=this,l={...oje(r),...s};return cc([c.getOption("remoteApiEndpoint"),c.getOption("hubmapToken")]).pipe(er(1),Li(([d,h])=>{a.configuration.basePath=d,h&&(l.token=h)}),Oe(()=>i(l)),I(d=>o?o(d):d))}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(fK),rt(I_))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),ot([Na(D_)],e.prototype,"getProviderNames",null),ot([Na(D_)],e.prototype,"getDatasetTechnologyNames",null),ot([Na(D_)],e.prototype,"getOntologyTreeModel",null),ot([Na(D_)],e.prototype,"getCellTypeTreeModel",null),ot([Na(D_)],e.prototype,"getBiomarkerTreeModel",null),ot([Na(D_)],e.prototype,"getReferenceOrgans",null),ot([Na(Rp)],e.prototype,"getTissueBlockResults",null),ot([Na(Rp)],e.prototype,"getAggregateResults",null),ot([Na(Rp)],e.prototype,"getOntologyTermOccurences",null),ot([Na(Rp)],e.prototype,"getCellTypeTermOccurences",null),ot([Na(Rp)],e.prototype,"getBiomarkerTermOccurences",null),ot([Na(Rp)],e.prototype,"getScene",null),ot([Na(Rp)],e.prototype,"getReferenceOrganScene",null),e})(),cje=(()=>{var t;class e extends _q{constructor(i){super(),this.impl$=this.database$=i.config$.pipe(r=>r,yi(r=>Object.keys(r).length>0),Oe(r=>function eTe(t,e){return new We(n=>{const i=t(),r=e(i);return(r?Cn(r):pe).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDatabase(r),s=>this.connectDatabase(s,r))),I(r=>r.database),zo(1))}connectDatabase(i,r){return jt(function*(){return yield i.database.connect(r,!0),i})()}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(I_))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),lje=(()=>{var t;class e extends cje{createDatabase(i){return{database:new C4e(i),unsubscribe:()=>{}}}}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=Ci(t)))(r||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),dje=(()=>{var t;class e extends _q{constructor(i,r){super(),this.impl$=i.config$.pipe(s=>s,I(s=>this.selectToken(s)),Ue(),I(s=>r.get(s)),zo(1))}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(I_),rt(hr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),e})(),UN=(()=>{class e{}return e.type="[CallToAction] Learn More",e})(),jN=(()=>{class e{}return e.type="[CallToAction] Open Dialog",e})(),VN=(()=>{class e{}return e.type="[CallToAction] Close Dialog",e})();var HN;class uu{get length(){return uu.storage?.length??0}key(e){return uu.storage?.key(e)??null}getItem(e,n){return uu.storage?.getItem(e)??n??null}setItem(e,n){try{return uu.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){uu.storage?.removeItem(e)}clear(){uu.storage?.clear()}}(Dp=uu).storage=(()=>{let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length?t:void 0}})(),Dp.\u0275fac=function(e){return new(e||Dp)},Dp.\u0275prov=Et({token:Dp,factory:Dp.\u0275fac,providedIn:"root"});const xq="callToActionPopupShown";let Lh=(()=>{var t;let e=(t=class{static ctaDatePassed(i,r=Date.now){return+r()>+new Date(i)}constructor(i,r,s,o,a){this.dialog=i,this.ga=r,this.storage=s,this.infoService=o,this.http=a}ngxsOnInit(i){const{expirationDate:r,popupShown:s}=i.getState(),o=this.storage.getItem(xq,`${s}`),a=HN.ctaDatePassed(r);"true"!==o&&!a&&i.dispatch(new jN)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(I(i=>this.infoService.parseMarkdown(i)))}launchLearnMore(i){this.dialog.open(mq,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:i,videoID:"UfxMpzatowE"}})}learnMore(i){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Li(r=>this.launchLearnMore(r)))}open(i){this.dialog.open(hje,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(xq,"true"),i.patchState({popupShown:!0})}close(i){this.dialog.closeAll(),this.ga.event("close","call_to_action")}},HN=t,t.\u0275fac=function(i){return new(i||t)(rt(_S),rt(jv),rt(uu),rt(gq),rt(Th))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t);return ot([_P(UN)],e.prototype,"learnMore",null),ot([_P(jN)],e.prototype,"open",null),ot([_P(VN)],e.prototype,"close",null),e})();Lh=HN=ot([j9({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],Lh);let pC=(()=>{class t{static title(n){return n.title}static message(n){return n.message}static callToAction(n){return n.callToAction}static imageUrl(n){return n.imageUrl}static expirationDate(n){return n.expirationDate}static popupShown(n){return n.popupShown}}return ot([t_([Lh])],t,"title",null),ot([t_([Lh])],t,"message",null),ot([t_([Lh])],t,"callToAction",null),ot([t_([Lh])],t,"imageUrl",null),ot([t_([Lh])],t,"expirationDate",null),ot([t_([Lh])],t,"popupShown",null),t})(),hje=(()=>{var t;class e{constructor(){this.close=()=>new VN,this.learnMore=()=>new UN}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=kn({type:t,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(Ct(0,"ccf-call-to-action",0),gn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),rs(1,"async"),rs(2,"async"),rs(3,"async"),rs(4,"async"),Dt()),2&i&&Ut("infoTitle",Ks(1,4,r.title$))("message",Ks(2,6,r.message$))("callToAction",Ks(3,8,r.callToAction$))("imageUrl",Ks(4,10,r.imageUrl$))},dependencies:[QUe,ky],changeDetection:0}),ot([EA(pC.title)],e.prototype,"title$",void 0),ot([EA(pC.message)],e.prototype,"message$",void 0),ot([EA(pC.callToAction)],e.prototype,"callToAction$",void 0),ot([EA(pC.imageUrl)],e.prototype,"imageUrl$",void 0),ot([eq()],e.prototype,"close",void 0),ot([eq()],e.prototype,"learnMore",void 0),e})(),mje=(()=>{var t;class e{constructor(i){this.source=i,this.organs=pq}getOrganInfo(i,r,s="Female"){let o=this.organs.find(c=>c.id===i);if(!o)return $t(void 0);const a=o.organ;return o.disabled&&(o=this.organs.find(c=>!c.disabled&&c.organ===a)),o?.side&&r&&o.side!==r&&(o=this.organs.find(c=>!c.disabled&&c.organ===a&&c.side===r)),$t(o)}getOrgan(i,r="Both"){return this.source.getReferenceOrgans().pipe(I(s=>s.find(o=>o.representation_of===i.id&&("Both"===r||o.sex===r))))}getOrganScene(i,r="Female"){return i.id?this.source.getReferenceOrganScene(i.id,{ontologyTerms:[i.id],sex:r}):$t([])}getOrganStats(i,r="Female"){return i.id?this.source.getAggregateResults({ontologyTerms:[i.id],sex:r}):$t([])}getBlocks(i,r="Female"){return i.id?this.source.getTissueBlockResults({ontologyTerms:[i.id],sex:r}):$t([])}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(bq))},t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function gje(t,e){if(1&t){const n=Pc();Ct(0,"div",6)(1,"div",7)(2,"div",8),ci(3),Dt(),Ct(4,"div",9),gn("click",function(){const s=rr(n).$implicit;return dr(Fn().goToURL(s.buttonUrl))}),ci(5),Dt()()()}if(2&t){const n=e.$implicit;Rt(3),ks(n.body),Rt(1),Ut("gaLabel",n.buttonUrl),Rt(1),Bo(" ",n.buttonTitle,"")}}function _je(t,e){if(1&t){const n=Pc();Ct(0,"div",10),gn("click",function(){const s=rr(n).$implicit;return dr(Fn().goToURL(s.buttonUrl))}),ci(1),Dt()}if(2&t){const n=e.$implicit;Ut("gaLabel",n.buttonUrl),Rt(1),ks(n.buttonTitle)}}let bje=(()=>{var t;class e{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}goToURL(i){window.open(i,"_blank")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=kn({type:t,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(i,r){1&i&&(Ct(0,"div",0),fn(1,gje,6,3,"div",1),Dt(),Ct(2,"div",2)(3,"div",3),ci(4,"Human Reference Atlas (HRA) Deep Dive"),Dt(),Ct(5,"div",4),fn(6,_je,2,2,"div",5),Dt()()),2&i&&(Rt(1),Ut("ngForOf",r.linkCards),Rt(5),Ut("ngForOf",r.deepDives))},dependencies:[Ld,fFe,aK],styles:[".link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0rem 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:Inter Variable,Helvetica,Arial,sans-serif}"],changeDetection:0}),e})();function yje(t,e){if(1&t&&(Ct(0,"div",3)(1,"div",4),ci(2),Dt(),Ct(3,"div",5),ci(4),Dt()()),2&t){const n=e.$implicit;Rt(2),ks(n.count),Rt(2),ks(n.label)}}let vje=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=kn({type:t,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(i,r){1&i&&(Ct(0,"div",0)(1,"div",1),ci(2),Dt(),fn(3,yje,5,2,"div",2),Dt()),2&i&&(Rt(2),Bo(" ",r.statsLabel," "),Rt(1),Ut("ngForOf",r.stats))},dependencies:[Ld],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0}),e})();const xje=["switch"];function wje(t,e){1&t&&(Ct(0,"div",12),function Jh(){Pn.lFrame.currentNamespace=wx}(),Ct(1,"svg",13),jn(2,"path",14),Dt(),Ct(3,"svg",15),jn(4,"path",16),Dt()())}const Eje=["*"],Aje=new bt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),Sje={provide:Go,useExisting:Sn(()=>Eq),multi:!0};class wq{constructor(e,n){this.source=e,this.checked=n}}let Cje=0;const Tje=JA(dv(qA(KA(class{constructor(t){this._elementRef=t}}))));let Mje=(()=>{var t;class e extends Tje{get required(){return this._required}set required(i){this._required=di(i)}get checked(){return this._checked}set checked(i){this._checked=di(i),this._changeDetectorRef.markForCheck()}get hideIcon(){return this._hideIcon}set hideIcon(i){this._hideIcon=di(i)}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(i,r,s,o,a,c,l){super(i),this._focusMonitor=r,this._changeDetectorRef=s,this.defaults=a,this._onChange=d=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this._hideIcon=!1,this.change=new tn,this.toggleChange=new tn,this.tabIndex=parseInt(o)||0,this.color=this.defaultColor=a.color||"accent",this._noopAnimations="NoopAnimations"===c,this.id=this._uniqueId=`${l}${++Cje}`,this._hideIcon=a.hideIcon??!1}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{"keyboard"===i||"program"===i?(this._focused=!0,this._changeDetectorRef.markForCheck()):i||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(i){this.checked=!!i}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return(t=e).\u0275fac=function(i){Qu()},t.\u0275dir=Ht({type:t,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked",hideIcon:"hideIcon"},outputs:{change:"change",toggleChange:"toggleChange"},features:[mn]}),e})(),Eq=(()=>{var t;class e extends Mje{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(i,r,s,o,a,c){super(i,r,s,o,a,c,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new wq(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(i){return new wq(this,i)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Mt),Ve(Ch),Ve(os),Ka("tabindex"),Ve(Aje),Ve(Kr,8))},t.\u0275cmp=kn({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&Pi(xje,5),2&i){let s;Bn(s=Un())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(i,r){2&i&&(Rl("id",r.id),wi("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Nn("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[li([Sje]),mn],ngContentSelectors:Eje,decls:13,vars:25,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons",4,"ngIf"],[1,"mdc-label",3,"for","click"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i&&(qr(),Ct(0,"div",0)(1,"button",1,2),gn("click",function(){return r._handleClick()}),jn(3,"div",3),Ct(4,"div",4)(5,"div",5)(6,"div",6),jn(7,"div",7),Dt(),Ct(8,"div",8),jn(9,"div",9),Dt(),fn(10,wje,5,0,"div",10),Dt()()(),Ct(11,"label",11),gn("click",function(o){return o.stopPropagation()}),Ln(12),Dt()()),2&i){const s=na(2);Nn("mdc-form-field--align-end","before"==r.labelPosition),Rt(1),Nn("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),Ut("tabIndex",r.tabIndex)("disabled",r.disabled),wi("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),Rt(8),Ut("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Rt(1),Ut("ngIf",!r.hideIcon),Rt(1),Ut("for",r.buttonId),wi("id",r._labelId)}},dependencies:[o_,Uc],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width);--mdc-switch-disabled-handle-opacity:0.38;--mdc-switch-disabled-selected-icon-opacity:0.38;--mdc-switch-disabled-track-opacity:0.12;--mdc-switch-disabled-unselected-icon-opacity:0.38;--mdc-switch-handle-height:20px;--mdc-switch-handle-shape:10px;--mdc-switch-handle-width:20px;--mdc-switch-selected-icon-size:18px;--mdc-switch-track-height:14px;--mdc-switch-track-shape:7px;--mdc-switch-track-width:36px;--mdc-switch-unselected-icon-size:18px;--mdc-switch-state-layer-size:40px;--mdc-switch-selected-focus-state-layer-opacity:0.12;--mdc-switch-selected-hover-state-layer-opacity:0.04;--mdc-switch-selected-pressed-state-layer-opacity:0.1;--mdc-switch-unselected-focus-state-layer-opacity:0.12;--mdc-switch-unselected-hover-state-layer-opacity:0.04;--mdc-switch-unselected-pressed-state-layer-opacity:0.1}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0}),e})(),Aq=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),e})(),Rje=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[Aq,Ni,a_,Gi,Aq,Ni]}),e})(),Oje=(()=>{var t;class e{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new tn}get left(){const{value:i,labels:r}=this;return i!==r[1]}updateToggle(i){this.value=i?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=kn({type:t,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(i,r){2&i&&Ea(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],["hideIcon","",1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(i,r){if(1&i){const s=Pc();Ct(0,"span",0),gn("click",function(){rr(s);const a=na(3);return r.left||a.toggle(),dr(r.updateToggle(!0))}),ci(1),Dt(),Ct(2,"mat-slide-toggle",1,2),gn("change",function(a){return r.updateToggle(!a.checked)}),Dt(),Ct(4,"span",0),gn("click",function(){rr(s);const a=na(3);return r.left&&a.toggle(),dr(r.updateToggle(!1))}),ci(5),Dt()}2&i&&(Nn("disabled",r.disabled)("highlighted",r.left),Rt(1),ks(r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1)),Rt(1),Ut("disabled",r.disabled)("checked",!r.left),Rt(2),Nn("disabled",r.disabled)("highlighted",!r.left),Rt(1),ks(r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1)))},dependencies:[Eq],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mdc-switch__track:before, [_nghost-%COMP%]     .slider .mdc-switch__track:after{background-color:#43476580!important}[_nghost-%COMP%]     .slider .mdc-switch__shadow{background-color:#434765}"],changeDetection:0}),e})();const kje=["bodyUI"],Pje=function(){return["Male","Female"]},Lje=function(){return["Left","Right"]};let Nje=(()=>{var t;class e{constructor(i){this.ga=i,this.sexChange=new tn,this.sideChange=new tn}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){const i=new Set(this.filter?.tmc??[]);this.filteredBlocks=this.blocks?.filter(r=>i.has(r.donor.providerName)).map(r=>r["@id"])??[],this.bodyUI.scene=this.bodyUI.scene.map(r=>({...r,color:r.entityId&&this.highlightedNodeId===r["@id"]?[30,136,229,255]:this.filteredBlocks.includes(r.entityId??"")?[173,255,47,229.5]:[255,255,255,229.5]}))}ngOnChanges(i){this.bodyUI&&"organ"in i&&this.zoomToFitOrgan()}updateSex(i){this.sex=i,this.sexChange.emit(this.sex)}updateSide(i){this.side=i,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:i,organ:r}=this;if(r){const{x_dimension:s,y_dimension:o,z_dimension:a}=r;i.rotation=i.rotationX=0,i.bounds={x:1.25*s/1e3,y:1.25*o/1e3,z:1.25*a/1e3},i.target=[s/1e3/2,o/1e3/2,a/1e3/2]}}nodeClicked(i){this.ga.event("node_click","organ",i.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===i.node["@id"]?"":i.node["@id"]}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(jv))},t.\u0275cmp=kn({type:t,selectors:[["ccf-organ"]],viewQuery:function(i,r){if(1&i&&Pi(kje,7),2&i){let s;Bn(s=Un())&&(r.bodyUI=s.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange"},features:[Dr],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(i,r){1&i&&(Ct(0,"ccf-body-ui",0,1),gn("nodeClick",function(o){return r.nodeClicked(o)})("initialized",function(){return r.zoomToFitOrgan()}),Dt(),Ct(2,"div",2)(3,"ccf-slide-toggle",3),gn("valueChange",function(o){return r.updateSex(o)}),Dt(),Ct(4,"ccf-slide-toggle",3),gn("valueChange",function(o){return r.updateSide(o)}),Dt()()),2&i&&(Ut("scene",r.scene)("interactive",!0),Rt(3),Ut("labels",lE(8,Pje))("value",r.sex)("hidden",!r.sex),Rt(1),Ut("labels",lE(9,Lje))("value",r.side)("hidden",!r.side))},dependencies:[IUe,Oje],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0}),e})();const Fje=["left"],Bje=["right"],Uje=function(){return[]},jje=[{color:[0,0,0,0],opacity:.001}];let Vje=(()=>{var t;class e{constructor(i,r,s){this.ga=r,this.configState=s,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(I(o=>({tmc:o}))),this.latestConfig={},this.organInfo$=s.config$.pipe(Li(o=>this.latestConfig=o),Oe(o=>i.getOrganInfo(o.organIri??"",o.side?.toLowerCase?.(),o.sex)),Li(o=>this.logOrganLookup(o)),Li(o=>this.latestOrganInfo=o),zo(1)),this.organ$=this.organInfo$.pipe(Oe(o=>o?i.getOrgan(o,o.hasSex?this.latestConfig.sex:void 0):$t(void 0)),Li(o=>{if(o&&this.latestOrganInfo){const a=this.latestOrganInfo?.hasSex?o.sex:void 0;a!==this.latestConfig.sex&&this.updateInput("sex",a),o.side!==this.latestConfig.side&&this.updateInput("side",o.side)}}),zo(1)),this.scene$=this.organ$.pipe(Oe(o=>o&&this.latestOrganInfo?i.getOrganScene(this.latestOrganInfo,o.sex):$t(jje))),this.stats$=this.organ$.pipe(Oe(o=>o&&this.latestOrganInfo?i.getOrganStats(this.latestOrganInfo,o.sex):$t([]))),this.statsLabel$=this.organ$.pipe(I(o=>this.makeStatsLabel(this.latestOrganInfo,o?.sex)),dc("Loading...")),this.blocks$=this.organ$.pipe(Oe(o=>o&&this.latestOrganInfo?i.getBlocks(this.latestOrganInfo,o.sex):$t([])))}ngAfterViewInit(){const{left:i,right:r}=this;i.nativeElement.style.height=`${r.nativeElement.offsetHeight}px`}updateInput(i,r){this.configState.patchConfig({[i]:r})}makeStatsLabel(i,r){let s=[`Unknown IRI: ${this.latestConfig.organIri}`];if(i){const o=i.side?i.side.charAt(0).toUpperCase()+i.side.slice(1):void 0;s=[r,i.organ,o]}return s.filter(o=>!!o).join(", ")}logOrganLookup(i){this.ga.event(i?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(mje),Ve(jv),Ve(I_))},t.\u0275cmp=kn({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&(Pi(Fje,7,Mt),Pi(Bje,7,Mt)),2&i){let s;Bn(s=Un())&&(r.left=s.first),Bn(s=Un())&&(r.right=s.first)}},decls:16,vars:25,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(i,r){if(1&i&&(Ct(0,"div",0)(1,"div",1,2)(3,"ccf-organ",3),gn("sexChange",function(o){return r.updateInput("sex",o)})("sideChange",function(o){return r.updateInput("side",o)}),rs(4,"async"),rs(5,"async"),rs(6,"async"),rs(7,"async"),rs(8,"async"),rs(9,"async"),Dt()(),Ct(10,"div",4,5),jn(12,"ccf-stats-list",6),rs(13,"async"),rs(14,"async"),jn(15,"ccf-link-cards"),Dt()()),2&i){let s;Rt(3),Ut("blocks",Ks(4,8,r.blocks$))("filter",Ks(5,10,r.filter$))("sex",Ks(6,12,r.sex$))("side",Ks(7,14,r.side$))("organ",Ks(8,16,r.organ$))("scene",null!==(s=Ks(9,18,r.scene$))&&void 0!==s?s:lE(24,Uje)),Rt(9),Ut("statsLabel",Ks(13,20,r.statsLabel$))("stats",Ks(14,22,r.stats$))}},dependencies:[bje,vje,Nje,ky],styles:[".container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:Inter;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-moz-fit-content;height:fit-content;width:29rem}"],changeDetection:0}),e})();function Hje(t,e){1&t&&jn(0,"ccf-root")}function zje(t){const e=i=>"string"==typeof i,n=i=>Array.isArray(i)&&i.every(e);if("string"==typeof t){const i=AD.json(t);if(n(i))return i}else if(n(t))return t;throw new Error("Invalid data sources")}function Gje(t){const e=i=>"string"==typeof i,n=i=>Array.isArray(i)&&i.every(e);if("string"==typeof t){if(!t?.startsWith("["))return[t];{const i=AD.json(t);if(n(i))return i}}else if(n(t))return t;throw new Error("Invalid data sources")}let Wje=(()=>{var t;class e extends cse{constructor(i,r){super(i,r,{initialDelay:10,initialConfig:{...Ff_dbOptions,...globalThis.dbOptions},parse:{dataSources:zje,highlightProviders:Gje,useRemoteApi:AD.boolean}}),this.sex="Female",this.side="Left"}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(I_),Ve(os))},t.\u0275cmp=kn({type:t,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint"},features:[mn],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(i,r){1&i&&fn(0,Hje,1,0,"ccf-root",0),2&i&&Ut("ngIf",r.initialized)},dependencies:[Uc,Vje],encapsulation:2,changeDetection:0}),e})(),$je=(()=>{var t;class e extends dje{selectToken(i){return i.useRemoteApi&&i.remoteApiEndpoint?aje:lje}}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=Ci(t)))(r||t)}}(),t.\u0275prov=Et({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const mC=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class Kje{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=cp(this.action),i=function Yje(t){return mC(t.getHours(),2)+":"+mC(t.getMinutes(),2)+":"+mC(t.getSeconds(),2)+"."+mC(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class qje{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const Sq=new bt("NGXS_LOGGER_PLUGIN_OPTIONS");let Jje=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new qje(this._options),this._store=this._store||this._injector.get(ql);const s=new Kje(i,this._store,this._logWriter);return s.dispatched(n),r(n,i).pipe(Li(o=>{s.completed(o)}),lc(o=>{throw s.errored(o),o}))}}return t.\u0275fac=function(n){return new(n||t)(rt(Sq),rt(hr))},t.\u0275prov=Et({token:t,factory:t.\u0275fac}),t})();const Cq=new bt("LOGGER_USER_OPTIONS");function Zje(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let Qje=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:A9,useClass:Jje,multi:!0},{provide:Cq,useValue:n},{provide:Sq,useFactory:Zje,deps:[Cq]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({}),t})();const e6e=[I_];let t6e=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[YPe.forRoot(),U9.forRoot(e6e,{developmentMode:!1}),Qje.forRoot({disabled:true})]}),e})(),n6e=(()=>{var t;class e{constructor(i){if(i)throw new Error("The core module should only be imported once in the root module")}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(t,12))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({providers:[{provide:bq,useExisting:$je}],imports:[P$,UFe.forRoot({gaToken:"G-ERNVZ1Q4KE",appName:"organ-info",projectName:"ccf",developmentMode:!1}),YFe.forRoot(()=>new GS({basePath:Ff_dbOptions.remoteApiEndpoint})),t6e]}),e})(),i6e=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[Gi,Rje]}),e})(),r6e=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[Gi,DUe,i6e]}),e})(),s6e=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[Gi,nN]}),e})(),o6e=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[Gi]}),e})(),a6e=(()=>{var t;class e{constructor(i){this.injector=i}ngDoBootstrap(){const i=function sse(t,e){const i=function Zre(t,e){return e.get(At).resolveComponentFactory(t).inputs}(t,e.injector),r=e.strategyFactory||new nse(t,e.injector),s=function Jre(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function $re(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(i);class o extends rse{get ngElementStrategy(){if(!this._ngElementStrategy){const c=this._ngElementStrategy=r.create(this.injector||e.injector);i.forEach(({propName:l,transform:d})=>{if(!this.hasOwnProperty(l))return;const h=this[l];delete this[l],c.setInputValue(l,h,d)})}return this._ngElementStrategy}constructor(c){super(),this.injector=c}attributeChangedCallback(c,l,d,h){const[f,m]=s[c];this.ngElementStrategy.setInputValue(f,d,m)}connectedCallback(){let c=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),c=!0),this.ngElementStrategy.connect(this),c||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(c=>{const l=new CustomEvent(c.name,{detail:c.value});this.dispatchEvent(l)})}}return o.observedAttributes=Object.keys(s),i.forEach(({propName:a,transform:c})=>{Object.defineProperty(o.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(l){this.ngElementStrategy.setInputValue(a,l,c)},configurable:!0,enumerable:!0})}),o}(Wje,{injector:this.injector});customElements.define("ccf-organ-info",i)}}return(t=e).\u0275fac=function(i){return new(i||t)(rt(hr))},t.\u0275mod=Jt({type:t}),t.\u0275inj=qt({imports:[Ure,n6e,s6e,o6e,r6e]}),e})();Fre().bootstrapModule(a6e).catch(t=>console.error(t))},2323:ne=>{ne.exports=function(g,E){var b=E.length;if(0!==b){var k=g.length;g.length+=b;for(var A=0;A<b;A++)g[k+A]=E[A]}}},3982:ne=>{"use strict";const{AbortController:Z,AbortSignal:g}=typeof self<"u"?self:typeof window<"u"?window:void 0;ne.exports=Z,ne.exports.AbortSignal=g,ne.exports.default=Z},9919:(ne,Z)=>{"use strict";Z.byteLength=function y(C){var Y=_(C),K=Y[1];return 3*(Y[0]+K)/4-K},Z.toByteArray=function F(C){var Y,x,le=_(C),K=le[0],re=le[1],te=new b(function M(C,Y,le){return 3*(Y+le)/4-le}(0,K,re)),q=0,V=re>0?K-4:K;for(x=0;x<V;x+=4)Y=E[C.charCodeAt(x)]<<18|E[C.charCodeAt(x+1)]<<12|E[C.charCodeAt(x+2)]<<6|E[C.charCodeAt(x+3)],te[q++]=Y>>16&255,te[q++]=Y>>8&255,te[q++]=255&Y;return 2===re&&(Y=E[C.charCodeAt(x)]<<2|E[C.charCodeAt(x+1)]>>4,te[q++]=255&Y),1===re&&(Y=E[C.charCodeAt(x)]<<10|E[C.charCodeAt(x+1)]<<4|E[C.charCodeAt(x+2)]>>2,te[q++]=Y>>8&255,te[q++]=255&Y),te},Z.fromByteArray=function oe(C){for(var Y,le=C.length,K=le%3,re=[],q=0,V=le-K;q<V;q+=16383)re.push(j(C,q,q+16383>V?V:q+16383));return 1===K?re.push(g[(Y=C[le-1])>>2]+g[Y<<4&63]+"=="):2===K&&re.push(g[(Y=(C[le-2]<<8)+C[le-1])>>10]+g[Y>>4&63]+g[Y<<2&63]+"="),re.join("")};for(var g=[],E=[],b=typeof Uint8Array<"u"?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0;A<64;++A)g[A]=k[A],E[k.charCodeAt(A)]=A;function _(C){var Y=C.length;if(Y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var le=C.indexOf("=");return-1===le&&(le=Y),[le,le===Y?0:4-le%4]}function L(C){return g[C>>18&63]+g[C>>12&63]+g[C>>6&63]+g[63&C]}function j(C,Y,le){for(var re=[],te=Y;te<le;te+=3)re.push(L((C[te]<<16&16711680)+(C[te+1]<<8&65280)+(255&C[te+2])));return re.join("")}E["-".charCodeAt(0)]=62,E["_".charCodeAt(0)]=63},1979:(ne,Z)=>{"use strict";var E=function(k){return k.typeOfFunction="function",k.boolTrue=!0,k}(E||{});Z.ak=function b(k,A,P){if(!P||typeof P.value!==E.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+A+"> is not a method!");return{configurable:E.boolTrue,get:function(){var _=P.value.bind(this);return Object.defineProperty(this,A,{value:_,configurable:E.boolTrue,writable:E.boolTrue}),_}}}},9007:(ne,Z,g)=>{"use strict";var E=g(9919),b=g(2601);Z.Buffer=_,Z.SlowBuffer=function K(G){return+G!=G&&(G=0),_.alloc(+G)},Z.INSPECT_MAX_BYTES=50;var k=2147483647;function P(G){if(G>k)throw new RangeError('The value "'+G+'" is invalid for option "size"');var R=new Uint8Array(G);return R.__proto__=_.prototype,R}function _(G,R,I){if("number"==typeof G){if("string"==typeof R)throw new TypeError('The "string" argument must be of type string. Received type number');return L(G)}return y(G,R,I)}function y(G,R,I){if("string"==typeof G)return function j(G,R){if(("string"!=typeof R||""===R)&&(R="utf8"),!_.isEncoding(R))throw new TypeError("Unknown encoding: "+R);var I=0|re(G,R),ue=P(I),ge=ue.write(G,R);return ge!==I&&(ue=ue.slice(0,ge)),ue}(G,R);if(ArrayBuffer.isView(G))return oe(G);if(null==G)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(fe(G,ArrayBuffer)||G&&fe(G.buffer,ArrayBuffer))return function C(G,R,I){if(R<0||G.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<R+(I||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===R&&void 0===I?new Uint8Array(G):void 0===I?new Uint8Array(G,R):new Uint8Array(G,R,I)).__proto__=_.prototype,ue}(G,R,I);if("number"==typeof G)throw new TypeError('The "value" argument must not be of type number. Received type number');var ue=G.valueOf&&G.valueOf();if(null!=ue&&ue!==G)return _.from(ue,R,I);var ge=function Y(G){if(_.isBuffer(G)){var R=0|le(G.length),I=P(R);return 0===I.length||G.copy(I,0,0,R),I}return void 0!==G.length?"number"!=typeof G.length||ee(G.length)?P(0):oe(G):"Buffer"===G.type&&Array.isArray(G.data)?oe(G.data):void 0}(G);if(ge)return ge;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof G[Symbol.toPrimitive])return _.from(G[Symbol.toPrimitive]("string"),R,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}function M(G){if("number"!=typeof G)throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function L(G){return M(G),P(G<0?0:0|le(G))}function oe(G){for(var R=G.length<0?0:0|le(G.length),I=P(R),ue=0;ue<R;ue+=1)I[ue]=255&G[ue];return I}function le(G){if(G>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return 0|G}function re(G,R){if(_.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||fe(G,ArrayBuffer))return G.byteLength;if("string"!=typeof G)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);var I=G.length,ue=arguments.length>2&&!0===arguments[2];if(!ue&&0===I)return 0;for(var ge=!1;;)switch(R){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return O(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*I;case"hex":return I>>>1;case"base64":return Fe(G).length;default:if(ge)return ue?-1:O(G).length;R=(""+R).toLowerCase(),ge=!0}}function te(G,R,I){var ue=!1;if((void 0===R||R<0)&&(R=0),R>this.length||((void 0===I||I>this.length)&&(I=this.length),I<=0)||(I>>>=0)<=(R>>>=0))return"";for(G||(G="utf8");;)switch(G){case"hex":return Ne(this,R,I);case"utf8":case"utf-8":return Ie(this,R,I);case"ascii":return Ye(this,R,I);case"latin1":case"binary":return Ce(this,R,I);case"base64":return we(this,R,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,R,I);default:if(ue)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),ue=!0}}function q(G,R,I){var ue=G[R];G[R]=G[I],G[I]=ue}function V(G,R,I,ue,ge){if(0===G.length)return-1;if("string"==typeof I?(ue=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),ee(I=+I)&&(I=ge?0:G.length-1),I<0&&(I=G.length+I),I>=G.length){if(ge)return-1;I=G.length-1}else if(I<0){if(!ge)return-1;I=0}if("string"==typeof R&&(R=_.from(R,ue)),_.isBuffer(R))return 0===R.length?-1:x(G,R,I,ue,ge);if("number"==typeof R)return R&=255,"function"==typeof Uint8Array.prototype.indexOf?ge?Uint8Array.prototype.indexOf.call(G,R,I):Uint8Array.prototype.lastIndexOf.call(G,R,I):x(G,[R],I,ue,ge);throw new TypeError("val must be string, number or Buffer")}function x(G,R,I,ue,ge){var _t,ze=1,Je=G.length,ot=R.length;if(void 0!==ue&&("ucs2"===(ue=String(ue).toLowerCase())||"ucs-2"===ue||"utf16le"===ue||"utf-16le"===ue)){if(G.length<2||R.length<2)return-1;ze=2,Je/=2,ot/=2,I/=2}function kt(J,S){return 1===ze?J[S]:J.readUInt16BE(S*ze)}if(ge){var Wt=-1;for(_t=I;_t<Je;_t++)if(kt(G,_t)===kt(R,-1===Wt?0:_t-Wt)){if(-1===Wt&&(Wt=_t),_t-Wt+1===ot)return Wt*ze}else-1!==Wt&&(_t-=_t-Wt),Wt=-1}else for(I+ot>Je&&(I=Je-ot),_t=I;_t>=0;_t--){for(var rn=!0,Re=0;Re<ot;Re++)if(kt(G,_t+Re)!==kt(R,Re)){rn=!1;break}if(rn)return _t}return-1}function B(G,R,I,ue){I=Number(I)||0;var ge=G.length-I;ue?(ue=Number(ue))>ge&&(ue=ge):ue=ge;var ze=R.length;ue>ze/2&&(ue=ze/2);for(var Je=0;Je<ue;++Je){var ot=parseInt(R.substr(2*Je,2),16);if(ee(ot))return Je;G[I+Je]=ot}return Je}function D(G,R,I,ue){return Ke(O(R,G.length-I),G,I,ue)}function he(G,R,I,ue){return Ke(function ae(G){for(var R=[],I=0;I<G.length;++I)R.push(255&G.charCodeAt(I));return R}(R),G,I,ue)}function W(G,R,I,ue){return he(G,R,I,ue)}function Te(G,R,I,ue){return Ke(Fe(R),G,I,ue)}function de(G,R,I,ue){return Ke(function H(G,R){for(var I,ue,ze=[],Je=0;Je<G.length&&!((R-=2)<0);++Je)ue=(I=G.charCodeAt(Je))>>8,ze.push(I%256),ze.push(ue);return ze}(R,G.length-I),G,I,ue)}function we(G,R,I){return E.fromByteArray(0===R&&I===G.length?G:G.slice(R,I))}function Ie(G,R,I){I=Math.min(G.length,I);for(var ue=[],ge=R;ge<I;){var kt,_t,Wt,rn,ze=G[ge],Je=null,ot=ze>239?4:ze>223?3:ze>191?2:1;if(ge+ot<=I)switch(ot){case 1:ze<128&&(Je=ze);break;case 2:128==(192&(kt=G[ge+1]))&&(rn=(31&ze)<<6|63&kt)>127&&(Je=rn);break;case 3:_t=G[ge+2],128==(192&(kt=G[ge+1]))&&128==(192&_t)&&(rn=(15&ze)<<12|(63&kt)<<6|63&_t)>2047&&(rn<55296||rn>57343)&&(Je=rn);break;case 4:_t=G[ge+2],Wt=G[ge+3],128==(192&(kt=G[ge+1]))&&128==(192&_t)&&128==(192&Wt)&&(rn=(15&ze)<<18|(63&kt)<<12|(63&_t)<<6|63&Wt)>65535&&rn<1114112&&(Je=rn)}null===Je?(Je=65533,ot=1):Je>65535&&(ue.push((Je-=65536)>>>10&1023|55296),Je=56320|1023&Je),ue.push(Je),ge+=ot}return function et(G){var R=G.length;if(R<=De)return String.fromCharCode.apply(String,G);for(var I="",ue=0;ue<R;)I+=String.fromCharCode.apply(String,G.slice(ue,ue+=De));return I}(ue)}Z.kMaxLength=k,!(_.TYPED_ARRAY_SUPPORT=function A(){try{var G=new Uint8Array(1);return G.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===G.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(G,R,I){return y(G,R,I)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(G,R,I){return function F(G,R,I){return M(G),G<=0?P(G):void 0!==R?"string"==typeof I?P(G).fill(R,I):P(G).fill(R):P(G)}(G,R,I)},_.allocUnsafe=function(G){return L(G)},_.allocUnsafeSlow=function(G){return L(G)},_.isBuffer=function(R){return null!=R&&!0===R._isBuffer&&R!==_.prototype},_.compare=function(R,I){if(fe(R,Uint8Array)&&(R=_.from(R,R.offset,R.byteLength)),fe(I,Uint8Array)&&(I=_.from(I,I.offset,I.byteLength)),!_.isBuffer(R)||!_.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===I)return 0;for(var ue=R.length,ge=I.length,ze=0,Je=Math.min(ue,ge);ze<Je;++ze)if(R[ze]!==I[ze]){ue=R[ze],ge=I[ze];break}return ue<ge?-1:ge<ue?1:0},_.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(R,I){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(0===R.length)return _.alloc(0);var ue;if(void 0===I)for(I=0,ue=0;ue<R.length;++ue)I+=R[ue].length;var ge=_.allocUnsafe(I),ze=0;for(ue=0;ue<R.length;++ue){var Je=R[ue];if(fe(Je,Uint8Array)&&(Je=_.from(Je)),!_.isBuffer(Je))throw new TypeError('"list" argument must be an Array of Buffers');Je.copy(ge,ze),ze+=Je.length}return ge},_.byteLength=re,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var R=this.length;if(R%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<R;I+=2)q(this,I,I+1);return this},_.prototype.swap32=function(){var R=this.length;if(R%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<R;I+=4)q(this,I,I+3),q(this,I+1,I+2);return this},_.prototype.swap64=function(){var R=this.length;if(R%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<R;I+=8)q(this,I,I+7),q(this,I+1,I+6),q(this,I+2,I+5),q(this,I+3,I+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var R=this.length;return 0===R?"":0===arguments.length?Ie(this,0,R):te.apply(this,arguments)},_.prototype.equals=function(R){if(!_.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R||0===_.compare(this,R)},_.prototype.inspect=function(){var R="",I=Z.INSPECT_MAX_BYTES;return R=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(R+=" ... "),"<Buffer "+R+">"},_.prototype.compare=function(R,I,ue,ge,ze){if(fe(R,Uint8Array)&&(R=_.from(R,R.offset,R.byteLength)),!_.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(void 0===I&&(I=0),void 0===ue&&(ue=R?R.length:0),void 0===ge&&(ge=0),void 0===ze&&(ze=this.length),I<0||ue>R.length||ge<0||ze>this.length)throw new RangeError("out of range index");if(ge>=ze&&I>=ue)return 0;if(ge>=ze)return-1;if(I>=ue)return 1;if(this===R)return 0;for(var Je=(ze>>>=0)-(ge>>>=0),ot=(ue>>>=0)-(I>>>=0),kt=Math.min(Je,ot),_t=this.slice(ge,ze),Wt=R.slice(I,ue),rn=0;rn<kt;++rn)if(_t[rn]!==Wt[rn]){Je=_t[rn],ot=Wt[rn];break}return Je<ot?-1:ot<Je?1:0},_.prototype.includes=function(R,I,ue){return-1!==this.indexOf(R,I,ue)},_.prototype.indexOf=function(R,I,ue){return V(this,R,I,ue,!0)},_.prototype.lastIndexOf=function(R,I,ue){return V(this,R,I,ue,!1)},_.prototype.write=function(R,I,ue,ge){if(void 0===I)ge="utf8",ue=this.length,I=0;else if(void 0===ue&&"string"==typeof I)ge=I,ue=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(ue)?(ue>>>=0,void 0===ge&&(ge="utf8")):(ge=ue,ue=void 0)}var ze=this.length-I;if((void 0===ue||ue>ze)&&(ue=ze),R.length>0&&(ue<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");for(var Je=!1;;)switch(ge){case"hex":return B(this,R,I,ue);case"utf8":case"utf-8":return D(this,R,I,ue);case"ascii":return he(this,R,I,ue);case"latin1":case"binary":return W(this,R,I,ue);case"base64":return Te(this,R,I,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,R,I,ue);default:if(Je)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),Je=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var De=4096;function Ye(G,R,I){var ue="";I=Math.min(G.length,I);for(var ge=R;ge<I;++ge)ue+=String.fromCharCode(127&G[ge]);return ue}function Ce(G,R,I){var ue="";I=Math.min(G.length,I);for(var ge=R;ge<I;++ge)ue+=String.fromCharCode(G[ge]);return ue}function Ne(G,R,I){var ue=G.length;(!R||R<0)&&(R=0),(!I||I<0||I>ue)&&(I=ue);for(var ge="",ze=R;ze<I;++ze)ge+=z(G[ze]);return ge}function ke(G,R,I){for(var ue=G.slice(R,I),ge="",ze=0;ze<ue.length;ze+=2)ge+=String.fromCharCode(ue[ze]+256*ue[ze+1]);return ge}function He(G,R,I){if(G%1!=0||G<0)throw new RangeError("offset is not uint");if(G+R>I)throw new RangeError("Trying to access beyond buffer length")}function me(G,R,I,ue,ge,ze){if(!_.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>ge||R<ze)throw new RangeError('"value" argument is out of bounds');if(I+ue>G.length)throw new RangeError("Index out of range")}function Se(G,R,I,ue,ge,ze){if(I+ue>G.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function qe(G,R,I,ue,ge){return R=+R,I>>>=0,ge||Se(G,0,I,4),b.write(G,R,I,ue,23,4),I+4}function lt(G,R,I,ue,ge){return R=+R,I>>>=0,ge||Se(G,0,I,8),b.write(G,R,I,ue,52,8),I+8}_.prototype.slice=function(R,I){var ue=this.length;(R=~~R)<0?(R+=ue)<0&&(R=0):R>ue&&(R=ue),(I=void 0===I?ue:~~I)<0?(I+=ue)<0&&(I=0):I>ue&&(I=ue),I<R&&(I=R);var ge=this.subarray(R,I);return ge.__proto__=_.prototype,ge},_.prototype.readUIntLE=function(R,I,ue){R>>>=0,I>>>=0,ue||He(R,I,this.length);for(var ge=this[R],ze=1,Je=0;++Je<I&&(ze*=256);)ge+=this[R+Je]*ze;return ge},_.prototype.readUIntBE=function(R,I,ue){R>>>=0,I>>>=0,ue||He(R,I,this.length);for(var ge=this[R+--I],ze=1;I>0&&(ze*=256);)ge+=this[R+--I]*ze;return ge},_.prototype.readUInt8=function(R,I){return R>>>=0,I||He(R,1,this.length),this[R]},_.prototype.readUInt16LE=function(R,I){return R>>>=0,I||He(R,2,this.length),this[R]|this[R+1]<<8},_.prototype.readUInt16BE=function(R,I){return R>>>=0,I||He(R,2,this.length),this[R]<<8|this[R+1]},_.prototype.readUInt32LE=function(R,I){return R>>>=0,I||He(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},_.prototype.readUInt32BE=function(R,I){return R>>>=0,I||He(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},_.prototype.readIntLE=function(R,I,ue){R>>>=0,I>>>=0,ue||He(R,I,this.length);for(var ge=this[R],ze=1,Je=0;++Je<I&&(ze*=256);)ge+=this[R+Je]*ze;return ge>=(ze*=128)&&(ge-=Math.pow(2,8*I)),ge},_.prototype.readIntBE=function(R,I,ue){R>>>=0,I>>>=0,ue||He(R,I,this.length);for(var ge=I,ze=1,Je=this[R+--ge];ge>0&&(ze*=256);)Je+=this[R+--ge]*ze;return Je>=(ze*=128)&&(Je-=Math.pow(2,8*I)),Je},_.prototype.readInt8=function(R,I){return R>>>=0,I||He(R,1,this.length),128&this[R]?-1*(255-this[R]+1):this[R]},_.prototype.readInt16LE=function(R,I){R>>>=0,I||He(R,2,this.length);var ue=this[R]|this[R+1]<<8;return 32768&ue?4294901760|ue:ue},_.prototype.readInt16BE=function(R,I){R>>>=0,I||He(R,2,this.length);var ue=this[R+1]|this[R]<<8;return 32768&ue?4294901760|ue:ue},_.prototype.readInt32LE=function(R,I){return R>>>=0,I||He(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},_.prototype.readInt32BE=function(R,I){return R>>>=0,I||He(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},_.prototype.readFloatLE=function(R,I){return R>>>=0,I||He(R,4,this.length),b.read(this,R,!0,23,4)},_.prototype.readFloatBE=function(R,I){return R>>>=0,I||He(R,4,this.length),b.read(this,R,!1,23,4)},_.prototype.readDoubleLE=function(R,I){return R>>>=0,I||He(R,8,this.length),b.read(this,R,!0,52,8)},_.prototype.readDoubleBE=function(R,I){return R>>>=0,I||He(R,8,this.length),b.read(this,R,!1,52,8)},_.prototype.writeUIntLE=function(R,I,ue,ge){R=+R,I>>>=0,ue>>>=0,ge||me(this,R,I,ue,Math.pow(2,8*ue)-1,0);var Je=1,ot=0;for(this[I]=255&R;++ot<ue&&(Je*=256);)this[I+ot]=R/Je&255;return I+ue},_.prototype.writeUIntBE=function(R,I,ue,ge){R=+R,I>>>=0,ue>>>=0,ge||me(this,R,I,ue,Math.pow(2,8*ue)-1,0);var Je=ue-1,ot=1;for(this[I+Je]=255&R;--Je>=0&&(ot*=256);)this[I+Je]=R/ot&255;return I+ue},_.prototype.writeUInt8=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,1,255,0),this[I]=255&R,I+1},_.prototype.writeUInt16LE=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,2,65535,0),this[I]=255&R,this[I+1]=R>>>8,I+2},_.prototype.writeUInt16BE=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,2,65535,0),this[I]=R>>>8,this[I+1]=255&R,I+2},_.prototype.writeUInt32LE=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,4,4294967295,0),this[I+3]=R>>>24,this[I+2]=R>>>16,this[I+1]=R>>>8,this[I]=255&R,I+4},_.prototype.writeUInt32BE=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,4,4294967295,0),this[I]=R>>>24,this[I+1]=R>>>16,this[I+2]=R>>>8,this[I+3]=255&R,I+4},_.prototype.writeIntLE=function(R,I,ue,ge){if(R=+R,I>>>=0,!ge){var ze=Math.pow(2,8*ue-1);me(this,R,I,ue,ze-1,-ze)}var Je=0,ot=1,kt=0;for(this[I]=255&R;++Je<ue&&(ot*=256);)R<0&&0===kt&&0!==this[I+Je-1]&&(kt=1),this[I+Je]=(R/ot>>0)-kt&255;return I+ue},_.prototype.writeIntBE=function(R,I,ue,ge){if(R=+R,I>>>=0,!ge){var ze=Math.pow(2,8*ue-1);me(this,R,I,ue,ze-1,-ze)}var Je=ue-1,ot=1,kt=0;for(this[I+Je]=255&R;--Je>=0&&(ot*=256);)R<0&&0===kt&&0!==this[I+Je+1]&&(kt=1),this[I+Je]=(R/ot>>0)-kt&255;return I+ue},_.prototype.writeInt8=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,1,127,-128),R<0&&(R=255+R+1),this[I]=255&R,I+1},_.prototype.writeInt16LE=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,2,32767,-32768),this[I]=255&R,this[I+1]=R>>>8,I+2},_.prototype.writeInt16BE=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,2,32767,-32768),this[I]=R>>>8,this[I+1]=255&R,I+2},_.prototype.writeInt32LE=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,4,2147483647,-2147483648),this[I]=255&R,this[I+1]=R>>>8,this[I+2]=R>>>16,this[I+3]=R>>>24,I+4},_.prototype.writeInt32BE=function(R,I,ue){return R=+R,I>>>=0,ue||me(this,R,I,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[I]=R>>>24,this[I+1]=R>>>16,this[I+2]=R>>>8,this[I+3]=255&R,I+4},_.prototype.writeFloatLE=function(R,I,ue){return qe(this,R,I,!0,ue)},_.prototype.writeFloatBE=function(R,I,ue){return qe(this,R,I,!1,ue)},_.prototype.writeDoubleLE=function(R,I,ue){return lt(this,R,I,!0,ue)},_.prototype.writeDoubleBE=function(R,I,ue){return lt(this,R,I,!1,ue)},_.prototype.copy=function(R,I,ue,ge){if(!_.isBuffer(R))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!ge&&0!==ge&&(ge=this.length),I>=R.length&&(I=R.length),I||(I=0),ge>0&&ge<ue&&(ge=ue),ge===ue||0===R.length||0===this.length)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),R.length-I<ge-ue&&(ge=R.length-I+ue);var ze=ge-ue;if(this===R&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(I,ue,ge);else if(this===R&&ue<I&&I<ge)for(var Je=ze-1;Je>=0;--Je)R[Je+I]=this[Je+ue];else Uint8Array.prototype.set.call(R,this.subarray(ue,ge),I);return ze},_.prototype.fill=function(R,I,ue,ge){if("string"==typeof R){if("string"==typeof I?(ge=I,I=0,ue=this.length):"string"==typeof ue&&(ge=ue,ue=this.length),void 0!==ge&&"string"!=typeof ge)throw new TypeError("encoding must be a string");if("string"==typeof ge&&!_.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(1===R.length){var ze=R.charCodeAt(0);("utf8"===ge&&ze<128||"latin1"===ge)&&(R=ze)}}else"number"==typeof R&&(R&=255);if(I<0||this.length<I||this.length<ue)throw new RangeError("Out of range index");if(ue<=I)return this;var Je;if(I>>>=0,ue=void 0===ue?this.length:ue>>>0,R||(R=0),"number"==typeof R)for(Je=I;Je<ue;++Je)this[Je]=R;else{var ot=_.isBuffer(R)?R:_.from(R,ge),kt=ot.length;if(0===kt)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(Je=0;Je<ue-I;++Je)this[Je+I]=ot[Je%kt]}return this};var We=/[^+/0-9A-Za-z-_]/g;function z(G){return G<16?"0"+G.toString(16):G.toString(16)}function O(G,R){R=R||1/0;for(var I,ue=G.length,ge=null,ze=[],Je=0;Je<ue;++Je){if((I=G.charCodeAt(Je))>55295&&I<57344){if(!ge){if(I>56319){(R-=3)>-1&&ze.push(239,191,189);continue}if(Je+1===ue){(R-=3)>-1&&ze.push(239,191,189);continue}ge=I;continue}if(I<56320){(R-=3)>-1&&ze.push(239,191,189),ge=I;continue}I=65536+(ge-55296<<10|I-56320)}else ge&&(R-=3)>-1&&ze.push(239,191,189);if(ge=null,I<128){if((R-=1)<0)break;ze.push(I)}else if(I<2048){if((R-=2)<0)break;ze.push(I>>6|192,63&I|128)}else if(I<65536){if((R-=3)<0)break;ze.push(I>>12|224,I>>6&63|128,63&I|128)}else{if(!(I<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;ze.push(I>>18|240,I>>12&63|128,I>>6&63|128,63&I|128)}}return ze}function Fe(G){return E.toByteArray(function _e(G){if((G=(G=G.split("=")[0]).trim().replace(We,"")).length<2)return"";for(;G.length%4!=0;)G+="=";return G}(G))}function Ke(G,R,I,ue){for(var ge=0;ge<ue&&!(ge+I>=R.length||ge>=G.length);++ge)R[ge+I]=G[ge];return ge}function fe(G,R){return G instanceof R||null!=G&&null!=G.constructor&&null!=G.constructor.name&&G.constructor.name===R.name}function ee(G){return G!=G}},1563:(ne,Z,g)=>{ne.exports={ResizeSensor:g(884),ElementQueries:g(8381)}},8381:function(ne,Z,g){"use strict";var E,b,k;typeof window<"u"&&window,b=[g(884)],void 0!==(k="function"==typeof(E=function(A){var P=function(){var y,M={},F=[];function L(W){W||(W=document.documentElement);var Te=window.getComputedStyle(W,null).fontSize;return parseFloat(Te)||16}function oe(W,Te){var de=Te.split(/\d/),we=de[de.length-1];switch(Te=parseFloat(Te),we){case"px":default:return Te;case"em":return Te*L(W);case"rem":return Te*L();case"vw":return Te*document.documentElement.clientWidth/100;case"vh":return Te*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Ie=document.documentElement.clientWidth/100,De=document.documentElement.clientHeight/100;return Te*(0,Math["vmin"===we?"min":"max"])(Ie,De)}}function C(W,Te){this.element=W;var de,we,Ie,De,et,Ye,Ce,Ne,ke=["min-width","min-height","max-width","max-height"];this.call=function(){for(de in Ie=function j(W){if(!W.getBoundingClientRect)return{width:W.offsetWidth,height:W.offsetHeight};var Te=W.getBoundingClientRect();return{width:Math.round(Te.width),height:Math.round(Te.height)}}(this.element),Ye={},M[Te])M[Te].hasOwnProperty(de)&&(De=oe(this.element,(we=M[Te][de]).value),et="width"===we.property?Ie.width:Ie.height,Ce="","min"===we.mode&&et>=De&&(Ce+=we.value),"max"===we.mode&&et<=De&&(Ce+=we.value),Ye[Ne=we.mode+"-"+we.property]||(Ye[Ne]=""),Ce&&-1===(" "+Ye[Ne]+" ").indexOf(" "+Ce+" ")&&(Ye[Ne]+=" "+Ce));for(var He in ke)ke.hasOwnProperty(He)&&(Ye[ke[He]]?this.element.setAttribute(ke[He],Ye[ke[He]].substr(1)):this.element.removeAttribute(ke[He]))}}function Y(W,Te){W.elementQueriesSetupInformation||(W.elementQueriesSetupInformation=new C(W,Te)),W.elementQueriesSensor||(W.elementQueriesSensor=new A(W,function(){W.elementQueriesSetupInformation.call()}))}function le(W,Te,de,we){if(typeof M[W]>"u"){M[W]=[];var Ie=F.length;y.innerHTML+="\n"+W+" {animation: 0.1s element-queries;}",y.innerHTML+="\n"+W+" > .resize-sensor {min-width: "+Ie+"px;}",F.push(W)}M[W].push({mode:Te,property:de,value:we})}function K(W){var Te;if(document.querySelectorAll&&(Te=W?W.querySelectorAll.bind(W):document.querySelectorAll.bind(document)),!Te&&typeof $$<"u"&&(Te=$$),!Te&&typeof jQuery<"u"&&(Te=jQuery),!Te)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Te}function te(W){var Te=[],de=[],we=[],Ie=0,De=-1,et=[];for(var Ye in W.children)if(W.children.hasOwnProperty(Ye)&&W.children[Ye].tagName&&"img"===W.children[Ye].tagName.toLowerCase()){Te.push(W.children[Ye]);var Ce=W.children[Ye].getAttribute("min-width")||W.children[Ye].getAttribute("data-min-width"),Ne=W.children[Ye].getAttribute("data-src")||W.children[Ye].getAttribute("url");we.push(Ne),de.push({minWidth:Ce}),Ce?W.children[Ye].style.display="none":(Ie=Te.length-1,W.children[Ye].style.display="block")}function He(){var Se,me=!1;for(Se in Te)Te.hasOwnProperty(Se)&&de[Se].minWidth&&W.offsetWidth>de[Se].minWidth&&(me=Se);if(me||(me=Ie),De!==me)if(et[me])Te[De].style.display="none",Te[me].style.display="block",De=me;else{var qe=new Image;qe.onload=function(){Te[me].src=we[me],Te[De].style.display="none",Te[me].style.display="block",et[me]=!0,De=me},qe.src=we[me]}else Te[me].src=we[me]}De=Ie,W.resizeSensorInstance=new A(W,He),He()}var V=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,x=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function B(W){var Te,de,we,Ie;for(W=W.replace(/'/g,'"');null!==(Te=V.exec(W));)for(de=Te[1]+Te[3],we=Te[2];null!==(Ie=x.exec(we));)le(de,Ie[1],Ie[2],Ie[3])}function D(W){var Te="";if(W)if("string"==typeof W)(-1!==(W=W.toLowerCase()).indexOf("min-width")||-1!==W.indexOf("max-width"))&&B(W);else for(var de=0,we=W.length;de<we;de++)1===W[de].type?(-1!==(Te=W[de].selectorText||W[de].cssText).indexOf("min-height")||-1!==Te.indexOf("max-height")||-1!==Te.indexOf("min-width")||-1!==Te.indexOf("max-width"))&&B(Te):4===W[de].type?D(W[de].cssRules||W[de].rules):3===W[de].type&&W[de].styleSheet.hasOwnProperty("cssRules")&&D(W[de].styleSheet.cssRules)}var he=!1;this.init=function(){var W="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?W="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?W="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(W="oanimationstart"),document.body.addEventListener(W,function(we){var Ie=we.target,De=Ie&&window.getComputedStyle(Ie,null),et=De&&De.getPropertyValue("animation-name");if(et&&-1!==et.indexOf("element-queries")){Ie.elementQueriesSensor=new A(Ie,function(){Ie.elementQueriesSetupInformation&&Ie.elementQueriesSetupInformation.call()});var Ne=window.getComputedStyle(Ie.resizeSensor,null).getPropertyValue("min-width");Ne=parseInt(Ne.replace("px","")),Y(we.target,F[Ne])}}),he||((y=document.createElement("style")).type="text/css",y.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",y.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(y),he=!0);for(var Te=0,de=document.styleSheets.length;Te<de;Te++)try{document.styleSheets[Te].href&&0===document.styleSheets[Te].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Te].href),D(document.styleSheets[Te].cssRules||document.styleSheets[Te].rules||document.styleSheets[Te].cssText)}catch{}!function q(){for(var Te=K()("[data-responsive-image],[responsive-image]"),de=0,we=Te.length;de<we;de++)te(Te[de])}()},this.findElementQueriesElements=function(W){!function re(W){var Te=K(W);for(var de in M)if(M.hasOwnProperty(de))for(var we=Te(de,W),Ie=0,De=we.length;Ie<De;Ie++)Y(we[Ie],de)}(W)},this.update=function(){this.init()}};P.update=function(){P.instance.update()},P.detach=function(y){y.elementQueriesSetupInformation?(y.elementQueriesSensor.detach(),delete y.elementQueriesSetupInformation,delete y.elementQueriesSensor):y.resizeSensorInstance&&(y.resizeSensorInstance.detach(),delete y.resizeSensorInstance)},P.init=function(){P.instance||(P.instance=new P),P.instance.init()};return P.findElementQueriesElements=function(y){P.instance.findElementQueriesElements(y)},P.listen=function(){!function(y){if(document.addEventListener)document.addEventListener("DOMContentLoaded",y,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var M=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(y(),clearInterval(M))},10);else window.onload=y}(P.init)},P})?E.apply(Z,b):E)&&(ne.exports=k)},884:function(ne,Z,g){"use strict";var E,b;typeof window<"u"&&window,void 0!==(b="function"==typeof(E=function(){if(typeof window>"u")return null;var k=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),A=k.requestAnimationFrame||k.mozRequestAnimationFrame||k.webkitRequestAnimationFrame||function(j){return k.setTimeout(j,20)},P=k.cancelAnimationFrame||k.mozCancelAnimationFrame||k.webkitCancelAnimationFrame||function(j){k.clearTimeout(j)};function _(j,oe){var C=Object.prototype.toString.call(j),Y="[object Array]"===C||"[object NodeList]"===C||"[object HTMLCollection]"===C||"[object Object]"===C||typeof jQuery<"u"&&j instanceof jQuery||typeof Elements<"u"&&j instanceof Elements,le=0,K=j.length;if(Y)for(;le<K;le++)oe(j[le]);else oe(j)}function y(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var oe=j.getBoundingClientRect();return{width:Math.round(oe.width),height:Math.round(oe.height)}}function M(j,oe){Object.keys(oe).forEach(function(C){j.style[C]=oe[C]})}var F=function(j,oe){var C=0;function Y(){var re,te,K=[];this.add=function(q){K.push(q)},this.call=function(q){for(re=0,te=K.length;re<te;re++)K[re].call(this,q)},this.remove=function(q){var V=[];for(re=0,te=K.length;re<te;re++)K[re]!==q&&V.push(K[re]);K=V},this.length=function(){return K.length}}function le(K,re){if(K){if(K.resizedAttached)return void K.resizedAttached.add(re);K.resizedAttached=new Y,K.resizedAttached.add(re),K.resizeSensor=document.createElement("div"),K.resizeSensor.dir="ltr",K.resizeSensor.className="resize-sensor";var te={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},q={position:"absolute",left:"0px",top:"0px",transition:"0s"};M(K.resizeSensor,te);var V=document.createElement("div");V.className="resize-sensor-expand",M(V,te);var x=document.createElement("div");M(x,q),V.appendChild(x);var B=document.createElement("div");B.className="resize-sensor-shrink",M(B,te);var D=document.createElement("div");M(D,q),M(D,{width:"200%",height:"200%"}),B.appendChild(D),K.resizeSensor.appendChild(V),K.resizeSensor.appendChild(B),K.appendChild(K.resizeSensor);var he=window.getComputedStyle(K),W=he?he.getPropertyValue("position"):null;"absolute"!==W&&"relative"!==W&&"fixed"!==W&&"sticky"!==W&&(K.style.position="relative");var Te=!1,de=0,we=y(K),Ie=0,De=0,et=!0;C=0;var Ce=function(){if(et){if(0===K.offsetWidth&&0===K.offsetHeight)return void(C||(C=A(function(){C=0,Ce()})));et=!1}var me,Se;Se=K.offsetHeight,x.style.width=(me=K.offsetWidth)+10+"px",x.style.height=Se+10+"px",V.scrollLeft=me+10,V.scrollTop=Se+10,B.scrollLeft=me+10,B.scrollTop=Se+10};K.resizeSensor.resetSensor=Ce;var Ne=function(){de=0,Te&&(Ie=we.width,De=we.height,K.resizedAttached&&K.resizedAttached.call(we))},ke=function(){we=y(K),(Te=we.width!==Ie||we.height!==De)&&!de&&(de=A(Ne)),Ce()},He=function(me,Se,qe){me.attachEvent?me.attachEvent("on"+Se,qe):me.addEventListener(Se,qe)};He(V,"scroll",ke),He(B,"scroll",ke),C=A(function(){C=0,Ce()})}}_(j,function(K){le(K,oe)}),this.detach=function(K){C||(P(C),C=0),F.detach(j,K)},this.reset=function(){j.resizeSensor.resetSensor()}};if(F.reset=function(j){_(j,function(oe){oe.resizeSensor.resetSensor()})},F.detach=function(j,oe){_(j,function(C){C&&(C.resizedAttached&&"function"==typeof oe&&(C.resizedAttached.remove(oe),C.resizedAttached.length())||C.resizeSensor&&(C.contains(C.resizeSensor)&&C.removeChild(C.resizeSensor),delete C.resizeSensor,delete C.resizedAttached))})},typeof MutationObserver<"u"){var L=new MutationObserver(function(j){for(var oe in j)if(j.hasOwnProperty(oe))for(var C=j[oe].addedNodes,Y=0;Y<C.length;Y++)C[Y].resizeSensor&&F.reset(C[Y])});document.addEventListener("DOMContentLoaded",function(j){L.observe(document.body,{childList:!0,subtree:!0})})}return F})?E.call(Z,g,Z,ne):E)&&(ne.exports=b)},2016:ne=>{"use strict";var E,Z="object"==typeof Reflect?Reflect:null,g=Z&&"function"==typeof Z.apply?Z.apply:function(V,x,B){return Function.prototype.apply.call(V,x,B)};E=Z&&"function"==typeof Z.ownKeys?Z.ownKeys:Object.getOwnPropertySymbols?function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:function(V){return Object.getOwnPropertyNames(V)};var k=Number.isNaN||function(V){return V!=V};function A(){A.init.call(this)}ne.exports=A,ne.exports.once=function K(q,V){return new Promise(function(x,B){function D(W){q.removeListener(V,he),B(W)}function he(){"function"==typeof q.removeListener&&q.removeListener("error",D),x([].slice.call(arguments))}te(q,V,he,{once:!0}),"error"!==V&&function re(q,V,x){"function"==typeof q.on&&te(q,"error",V,x)}(q,D,{once:!0})})},A.EventEmitter=A,A.prototype._events=void 0,A.prototype._eventsCount=0,A.prototype._maxListeners=void 0;var P=10;function _(q){if("function"!=typeof q)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q)}function y(q){return void 0===q._maxListeners?A.defaultMaxListeners:q._maxListeners}function M(q,V,x,B){var D,he,W;if(_(x),void 0===(he=q._events)?(he=q._events=Object.create(null),q._eventsCount=0):(void 0!==he.newListener&&(q.emit("newListener",V,x.listener?x.listener:x),he=q._events),W=he[V]),void 0===W)W=he[V]=x,++q._eventsCount;else if("function"==typeof W?W=he[V]=B?[x,W]:[W,x]:B?W.unshift(x):W.push(x),(D=y(q))>0&&W.length>D&&!W.warned){W.warned=!0;var Te=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");Te.name="MaxListenersExceededWarning",Te.emitter=q,Te.type=V,Te.count=W.length,function b(q){console&&console.warn&&console.warn(q)}(Te)}return q}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function L(q,V,x){var B={fired:!1,wrapFn:void 0,target:q,type:V,listener:x},D=F.bind(B);return D.listener=x,B.wrapFn=D,D}function j(q,V,x){var B=q._events;if(void 0===B)return[];var D=B[V];return void 0===D?[]:"function"==typeof D?x?[D.listener||D]:[D]:x?function le(q){for(var V=new Array(q.length),x=0;x<V.length;++x)V[x]=q[x].listener||q[x];return V}(D):C(D,D.length)}function oe(q){var V=this._events;if(void 0!==V){var x=V[q];if("function"==typeof x)return 1;if(void 0!==x)return x.length}return 0}function C(q,V){for(var x=new Array(V),B=0;B<V;++B)x[B]=q[B];return x}function te(q,V,x,B){if("function"==typeof q.on)B.once?q.once(V,x):q.on(V,x);else{if("function"!=typeof q.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof q);q.addEventListener(V,function D(he){B.once&&q.removeEventListener(V,D),x(he)})}}Object.defineProperty(A,"defaultMaxListeners",{enumerable:!0,get:function(){return P},set:function(q){if("number"!=typeof q||q<0||k(q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+q+".");P=q}}),A.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},A.prototype.setMaxListeners=function(V){if("number"!=typeof V||V<0||k(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this},A.prototype.getMaxListeners=function(){return y(this)},A.prototype.emit=function(V){for(var x=[],B=1;B<arguments.length;B++)x.push(arguments[B]);var D="error"===V,he=this._events;if(void 0!==he)D=D&&void 0===he.error;else if(!D)return!1;if(D){var W;if(x.length>0&&(W=x[0]),W instanceof Error)throw W;var Te=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw Te.context=W,Te}var de=he[V];if(void 0===de)return!1;if("function"==typeof de)g(de,this,x);else{var we=de.length,Ie=C(de,we);for(B=0;B<we;++B)g(Ie[B],this,x)}return!0},A.prototype.on=A.prototype.addListener=function(V,x){return M(this,V,x,!1)},A.prototype.prependListener=function(V,x){return M(this,V,x,!0)},A.prototype.once=function(V,x){return _(x),this.on(V,L(this,V,x)),this},A.prototype.prependOnceListener=function(V,x){return _(x),this.prependListener(V,L(this,V,x)),this},A.prototype.off=A.prototype.removeListener=function(V,x){var B,D,he,W,Te;if(_(x),void 0===(D=this._events))return this;if(void 0===(B=D[V]))return this;if(B===x||B.listener===x)0==--this._eventsCount?this._events=Object.create(null):(delete D[V],D.removeListener&&this.emit("removeListener",V,B.listener||x));else if("function"!=typeof B){for(he=-1,W=B.length-1;W>=0;W--)if(B[W]===x||B[W].listener===x){Te=B[W].listener,he=W;break}if(he<0)return this;0===he?B.shift():function Y(q,V){for(;V+1<q.length;V++)q[V]=q[V+1];q.pop()}(B,he),1===B.length&&(D[V]=B[0]),void 0!==D.removeListener&&this.emit("removeListener",V,Te||x)}return this},A.prototype.removeAllListeners=function(V){var x,B,D;if(void 0===(B=this._events))return this;if(void 0===B.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==B[V]&&(0==--this._eventsCount?this._events=Object.create(null):delete B[V]),this;if(0===arguments.length){var W,he=Object.keys(B);for(D=0;D<he.length;++D)"removeListener"!==(W=he[D])&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(x=B[V]))this.removeListener(V,x);else if(void 0!==x)for(D=x.length-1;D>=0;D--)this.removeListener(V,x[D]);return this},A.prototype.listeners=function(V){return j(this,V,!0)},A.prototype.rawListeners=function(V){return j(this,V,!1)},A.listenerCount=function(q,V){return"function"==typeof q.listenerCount?q.listenerCount(V):oe.call(q,V)},A.prototype.listenerCount=oe,A.prototype.eventNames=function(){return this._eventsCount>0?E(this._events):[]}},7991:(ne,Z,g)=>{var E=g(6943),b=g(9151),k=g(2323);function A(j,oe,C){if(!E(j))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!j.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');if(!j.hasNode(C))throw new Error('graphology-shortest-path: the "'+C+'" target node does not exist in the given graph.');if((oe=""+oe)==(C=""+C))return[oe];var Y=j.inboundNeighbors.bind(j),le=j.outboundNeighbors.bind(j),K={},re={};K[oe]=null,re[C]=null;var V,x,B,D,he,W,Te,de,te=[oe],q=[C],we=!1;e:for(;te.length&&q.length;)if(te.length<=q.length){for(V=te,te=[],he=0,Te=V.length;he<Te;he++)for(W=0,de=(B=le(x=V[he])).length;W<de;W++)if((D=B[W])in K||(te.push(D),K[D]=x),D in re){we=!0;break e}}else for(V=q,q=[],he=0,Te=V.length;he<Te;he++)for(x=V[he],B=Y(x),W=0,de=B.length;W<de;W++)if(D=B[W],D in re||(q.push(D),re[D]=x),D in K){we=!0;break e}if(!we)return null;for(var Ie=[];D;)Ie.unshift(D),D=K[D];for(D=re[Ie[Ie.length-1]];D;)Ie.push(D),D=re[D];return Ie.length?Ie:null}function P(j,oe){if(!E(j))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!j.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');var le,K,re,te,q,V,C={},Y={};for(C[oe=""+oe]=!0,Y[oe]=[oe];Object.keys(C).length;)for(re in le=C,C={},le)for(q=0,V=(K=j.outboundNeighbors(re)).length;q<V;q++)Y[te=K[q]]||(Y[te]=Y[re].concat(te),C[te]=!0);return Y}function _(j,oe,C){if(!E(oe))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!oe.hasNode(C))throw new Error('graphology-shortest-path: the "'+C+'" source node does not exist in the given graph.');C=""+C;var Y=new Set,le={},K=0;le[C]=0;for(var te,q,V,re=[C];0!==re.length;){var x=[];for(te=0,q=re.length;te<q;te++)!Y.has(V=re[te])&&(Y.add(V),k(x,oe[j](V)),le[V]=K);K++,re=x}return le}var y=_.bind(null,"outboundNeighbors"),M=_.bind(null,"neighbors");function F(j,oe,C){return arguments.length<3?P(j,oe):A(j,oe,C)}F.bidirectional=A,F.singleSource=P,F.singleSourceLength=y,F.undirectedSingleSourceLength=M,F.brandes=function L(j,oe){oe=""+oe;var re,te,q,V,x,B,D,he,W,C=[],Y={},le={},K=j.nodes();for(B=0,he=K.length;B<he;B++)Y[V=K[B]]=[],le[V]=0;var Te={};le[oe]=1,Te[oe]=0;for(var de=b.of(oe);de.size;)for(V=de.dequeue(),C.push(V),re=Te[V],te=le[V],D=0,W=(q=j.outboundNeighbors(V)).length;D<W;D++)(x=q[D])in Te||(de.enqueue(x),Te[x]=re+1),Te[x]===re+1&&(le[x]+=te,Y[x].push(V));return[C,Y,le]},ne.exports=F},6943:ne=>{ne.exports=function(g){return null!==g&&"object"==typeof g&&"function"==typeof g.addUndirectedEdgeWithKey&&"function"==typeof g.dropNode&&"boolean"==typeof g.multi}},4938:function(ne){ne.exports=function(){"use strict";function Z(be){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Me){return typeof Me}:function(Me){return Me&&"function"==typeof Symbol&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me})(be)}function g(be,Me){be.prototype=Object.create(Me.prototype),be.prototype.constructor=be,b(be,Me)}function E(be){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(Me){return Me.__proto__||Object.getPrototypeOf(Me)})(be)}function b(be,Me){return(b=Object.setPrototypeOf||function(Ee,U){return Ee.__proto__=U,Ee})(be,Me)}function A(be,Me,Ee){return(A=function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(U,se,pe){var Be=[null];Be.push.apply(Be,se);var Xe=new(Function.bind.apply(U,Be));return pe&&b(Xe,pe.prototype),Xe}).apply(null,arguments)}function P(be){var Me="function"==typeof Map?new Map:void 0;return(P=function(Ee){if(null===Ee||-1===Function.toString.call(Ee).indexOf("[native code]"))return Ee;if("function"!=typeof Ee)throw new TypeError("Super expression must either be null or a function");if(void 0!==Me){if(Me.has(Ee))return Me.get(Ee);Me.set(Ee,se)}function se(){return A(Ee,arguments,E(this).constructor)}return se.prototype=Object.create(Ee.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),b(se,Ee)})(be)}function _(be){if(void 0===be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}var y=function(){for(var be=arguments[0],Me=1,Ee=arguments.length;Me<Ee;Me++)if(arguments[Me])for(var U in arguments[Me])be[U]=arguments[Me][U];return be};function M(be,Me,Ee,U){var se=be._nodes.get(Me),pe=null;return se?pe="mixed"===U?se.out&&se.out[Ee]||se.undirected&&se.undirected[Ee]:"directed"===U?se.out&&se.out[Ee]:se.undirected&&se.undirected[Ee]:pe}function L(be){return"object"===Z(be)&&null!==be&&be.constructor===Object}function j(be){var Me;for(Me in be)return!1;return!0}function oe(be,Me,Ee){Object.defineProperty(be,Me,{enumerable:!1,configurable:!1,writable:!0,value:Ee})}function C(be,Me,Ee){var U={enumerable:!0,configurable:!0};"function"==typeof Ee?U.get=Ee:(U.value=Ee,U.writable=!1),Object.defineProperty(be,Me,U)}function Y(be){return!(!L(be)||be.attributes&&!Array.isArray(be.attributes))}"function"==typeof Object.assign&&(y=Object.assign);var le,K={exports:{}},re="object"==typeof Reflect?Reflect:null,te=re&&"function"==typeof re.apply?re.apply:function(be,Me,Ee){return Function.prototype.apply.call(be,Me,Ee)};le=re&&"function"==typeof re.ownKeys?re.ownKeys:Object.getOwnPropertySymbols?function(be){return Object.getOwnPropertyNames(be).concat(Object.getOwnPropertySymbols(be))}:function(be){return Object.getOwnPropertyNames(be)};var q=Number.isNaN||function(be){return be!=be};function V(){V.init.call(this)}K.exports=V,K.exports.once=function(be,Me){return new Promise(function(Ee,U){function se(Be){be.removeListener(Me,pe),U(Be)}function pe(){"function"==typeof be.removeListener&&be.removeListener("error",se),Ee([].slice.call(arguments))}var Be;De(be,Me,pe,{once:!0}),"error"!==Me&&("function"==typeof(Be=be).on&&De(Be,"error",se,{once:!0}))})},V.EventEmitter=V,V.prototype._events=void 0,V.prototype._eventsCount=0,V.prototype._maxListeners=void 0;var x=10;function B(be){if("function"!=typeof be)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof be)}function D(be){return void 0===be._maxListeners?V.defaultMaxListeners:be._maxListeners}function he(be,Me,Ee,U){var se,pe,Be;if(B(Ee),void 0===(pe=be._events)?(pe=be._events=Object.create(null),be._eventsCount=0):(void 0!==pe.newListener&&(be.emit("newListener",Me,Ee.listener?Ee.listener:Ee),pe=be._events),Be=pe[Me]),void 0===Be)Be=pe[Me]=Ee,++be._eventsCount;else if("function"==typeof Be?Be=pe[Me]=U?[Ee,Be]:[Be,Ee]:U?Be.unshift(Ee):Be.push(Ee),(se=D(be))>0&&Be.length>se&&!Be.warned){Be.warned=!0;var at=new Error("Possible EventEmitter memory leak detected. "+Be.length+" "+String(Me)+" listeners added. Use emitter.setMaxListeners() to increase limit");at.name="MaxListenersExceededWarning",at.emitter=be,at.type=Me,at.count=Be.length,console&&console.warn&&console.warn(at)}return be}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Te(be,Me,Ee){var U={fired:!1,wrapFn:void 0,target:be,type:Me,listener:Ee},se=W.bind(U);return se.listener=Ee,U.wrapFn=se,se}function de(be,Me,Ee){var U=be._events;if(void 0===U)return[];var se=U[Me];return void 0===se?[]:"function"==typeof se?Ee?[se.listener||se]:[se]:Ee?function(pe){for(var Be=new Array(pe.length),Xe=0;Xe<Be.length;++Xe)Be[Xe]=pe[Xe].listener||pe[Xe];return Be}(se):Ie(se,se.length)}function we(be){var Me=this._events;if(void 0!==Me){var Ee=Me[be];if("function"==typeof Ee)return 1;if(void 0!==Ee)return Ee.length}return 0}function Ie(be,Me){for(var Ee=new Array(Me),U=0;U<Me;++U)Ee[U]=be[U];return Ee}function De(be,Me,Ee,U){if("function"==typeof be.on)U.once?be.once(Me,Ee):be.on(Me,Ee);else{if("function"!=typeof be.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof be);be.addEventListener(Me,function se(pe){U.once&&be.removeEventListener(Me,se),Ee(pe)})}}function et(be){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:be}),this.done=!1}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(be){if("number"!=typeof be||be<0||q(be))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+be+".");x=be}}),V.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},V.prototype.setMaxListeners=function(be){if("number"!=typeof be||be<0||q(be))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+be+".");return this._maxListeners=be,this},V.prototype.getMaxListeners=function(){return D(this)},V.prototype.emit=function(be){for(var Me=[],Ee=1;Ee<arguments.length;Ee++)Me.push(arguments[Ee]);var U="error"===be,se=this._events;if(void 0!==se)U=U&&void 0===se.error;else if(!U)return!1;if(U){var pe;if(Me.length>0&&(pe=Me[0]),pe instanceof Error)throw pe;var Be=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw Be.context=pe,Be}var Xe=se[be];if(void 0===Xe)return!1;if("function"==typeof Xe)te(Xe,this,Me);else{var at=Xe.length,xt=Ie(Xe,at);for(Ee=0;Ee<at;++Ee)te(xt[Ee],this,Me)}return!0},V.prototype.addListener=function(be,Me){return he(this,be,Me,!1)},V.prototype.on=V.prototype.addListener,V.prototype.prependListener=function(be,Me){return he(this,be,Me,!0)},V.prototype.once=function(be,Me){return B(Me),this.on(be,Te(this,be,Me)),this},V.prototype.prependOnceListener=function(be,Me){return B(Me),this.prependListener(be,Te(this,be,Me)),this},V.prototype.removeListener=function(be,Me){var Ee,U,se,pe,Be;if(B(Me),void 0===(U=this._events))return this;if(void 0===(Ee=U[be]))return this;if(Ee===Me||Ee.listener===Me)0==--this._eventsCount?this._events=Object.create(null):(delete U[be],U.removeListener&&this.emit("removeListener",be,Ee.listener||Me));else if("function"!=typeof Ee){for(se=-1,pe=Ee.length-1;pe>=0;pe--)if(Ee[pe]===Me||Ee[pe].listener===Me){Be=Ee[pe].listener,se=pe;break}if(se<0)return this;0===se?Ee.shift():function(Xe,at){for(;at+1<Xe.length;at++)Xe[at]=Xe[at+1];Xe.pop()}(Ee,se),1===Ee.length&&(U[be]=Ee[0]),void 0!==U.removeListener&&this.emit("removeListener",be,Be||Me)}return this},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(be){var Me,Ee,U;if(void 0===(Ee=this._events))return this;if(void 0===Ee.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ee[be]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ee[be]),this;if(0===arguments.length){var se,pe=Object.keys(Ee);for(U=0;U<pe.length;++U)"removeListener"!==(se=pe[U])&&this.removeAllListeners(se);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Me=Ee[be]))this.removeListener(be,Me);else if(void 0!==Me)for(U=Me.length-1;U>=0;U--)this.removeListener(be,Me[U]);return this},V.prototype.listeners=function(be){return de(this,be,!0)},V.prototype.rawListeners=function(be){return de(this,be,!1)},V.listenerCount=function(be,Me){return"function"==typeof be.listenerCount?be.listenerCount(Me):we.call(be,Me)},V.prototype.listenerCount=we,V.prototype.eventNames=function(){return this._eventsCount>0?le(this._events):[]},et.prototype.next=function(){if(this.done)return{done:!0};var be=this._next();return be.done&&(this.done=!0),be},typeof Symbol<"u"&&(et.prototype[Symbol.iterator]=function(){return this}),et.of=function(){var be=arguments,Me=be.length,Ee=0;return new et(function(){return Ee>=Me?{done:!0}:{done:!1,value:be[Ee++]}})},et.empty=function(){var be=new et(null);return be.done=!0,be},et.is=function(be){return be instanceof et||"object"==typeof be&&null!==be&&"function"==typeof be.next};var Ye=et,Ce=function(be,Me){for(var Ee,U=arguments.length>1?Me:1/0,se=U!==1/0?new Array(U):[],pe=0;;){if(pe===U)return se;if((Ee=be.next()).done)return pe!==Me?se.slice(0,pe):se;se[pe++]=Ee.value}},Ne=function(be){function Me(Ee,U){var se;return(se=be.call(this)||this).name="GraphError",se.message=Ee||"",se.data=U||{},se}return g(Me,be),Me}(P(Error)),ke=function(be){function Me(Ee,U){var se;return(se=be.call(this,Ee,U)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(se),Me.prototype.constructor),se}return g(Me,be),Me}(Ne),He=function(be){function Me(Ee,U){var se;return(se=be.call(this,Ee,U)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(se),Me.prototype.constructor),se}return g(Me,be),Me}(Ne),me=function(be){function Me(Ee,U){var se;return(se=be.call(this,Ee,U)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(se),Me.prototype.constructor),se}return g(Me,be),Me}(Ne);function Se(be,Me){this.key=be,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function qe(be,Me){this.key=be,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function lt(be,Me){this.key=be,this.attributes=Me,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function We(be,Me,Ee,U,se,pe){this.key=Me,this.attributes=pe,this.undirected=be,this.source=U,this.target=se,this.generatedKey=Ee}function _e(be,Me,Ee,U,se,pe,Be){var Xe,at,xt="out",It="in";if(Me&&(xt=It="undirected"),be.multi){if(void 0===(at=(Xe=pe[xt])[se])&&(Xe[se]=at=new Set),at.add(Ee),U===se&&Me)return;void 0===(Xe=Be[It])[U]&&(Xe[U]=at)}else{if(pe[xt][se]=Ee,U===se&&Me)return;Be[It][U]=Ee}}qe.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},lt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var O=[{name:function(be){return"get".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(U,se){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+U,Xe=""+se;if(se=arguments[2],!(pe=M(this,Be,Xe,Ee)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(pe=this._edges.get(U=""+U)))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" edge in the graph.'));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" ').concat(Ee," edge in the graph."));return pe.attributes[se]}}},{name:function(be){return"get".concat(be,"Attributes")},attacher:function(be,Me,Ee){be.prototype[Me]=function(U){var se;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var pe=""+U,Be=""+arguments[1];if(!(se=M(this,pe,Be,Ee)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(pe,'" - "').concat(Be,'").'))}else if(!(se=this._edges.get(U=""+U)))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" edge in the graph.'));if("mixed"!==Ee&&se.undirected!==("undirected"===Ee))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" ').concat(Ee," edge in the graph."));return se.attributes}}},{name:function(be){return"has".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(U,se){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+U,Xe=""+se;if(se=arguments[2],!(pe=M(this,Be,Xe,Ee)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(pe=this._edges.get(U=""+U)))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" edge in the graph.'));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" ').concat(Ee," edge in the graph."));return pe.attributes.hasOwnProperty(se)}}},{name:function(be){return"set".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(U,se,pe){var Be;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Xe=""+U,at=""+se;if(se=arguments[2],pe=arguments[3],!(Be=M(this,Xe,at,Ee)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Xe,'" - "').concat(at,'").'))}else if(!(Be=this._edges.get(U=""+U)))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" edge in the graph.'));if("mixed"!==Ee&&Be.undirected!==("undirected"===Ee))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" ').concat(Ee," edge in the graph."));return Be.attributes[se]=pe,this.emit("edgeAttributesUpdated",{key:Be.key,type:"set",attributes:Be.attributes,name:se}),this}}},{name:function(be){return"update".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(U,se,pe){var Be;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Xe=""+U,at=""+se;if(se=arguments[2],pe=arguments[3],!(Be=M(this,Xe,at,Ee)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Xe,'" - "').concat(at,'").'))}else if(!(Be=this._edges.get(U=""+U)))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" edge in the graph.'));if("function"!=typeof pe)throw new ke("Graph.".concat(Me,": updater should be a function."));if("mixed"!==Ee&&Be.undirected!==("undirected"===Ee))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" ').concat(Ee," edge in the graph."));return Be.attributes[se]=pe(Be.attributes[se]),this.emit("edgeAttributesUpdated",{key:Be.key,type:"set",attributes:Be.attributes,name:se}),this}}},{name:function(be){return"remove".concat(be,"Attribute")},attacher:function(be,Me,Ee){be.prototype[Me]=function(U,se){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+U,Xe=""+se;if(se=arguments[2],!(pe=M(this,Be,Xe,Ee)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(pe=this._edges.get(U=""+U)))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" edge in the graph.'));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" ').concat(Ee," edge in the graph."));return delete pe.attributes[se],this.emit("edgeAttributesUpdated",{key:pe.key,type:"remove",attributes:pe.attributes,name:se}),this}}},{name:function(be){return"replace".concat(be,"Attributes")},attacher:function(be,Me,Ee){be.prototype[Me]=function(U,se){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+U,Xe=""+se;if(se=arguments[2],!(pe=M(this,Be,Xe,Ee)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(pe=this._edges.get(U=""+U)))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" edge in the graph.'));if(!L(se))throw new ke("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" ').concat(Ee," edge in the graph."));return pe.attributes=se,this.emit("edgeAttributesUpdated",{key:pe.key,type:"replace",attributes:pe.attributes}),this}}},{name:function(be){return"merge".concat(be,"Attributes")},attacher:function(be,Me,Ee){be.prototype[Me]=function(U,se){var pe;if("mixed"!==this.type&&"mixed"!==Ee&&Ee!==this.type)throw new me("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new me("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+U,Xe=""+se;if(se=arguments[2],!(pe=M(this,Be,Xe,Ee)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(pe=this._edges.get(U=""+U)))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" edge in the graph.'));if(!L(se))throw new ke("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==Ee&&pe.undirected!==("undirected"===Ee))throw new He("Graph.".concat(Me,': could not find the "').concat(U,'" ').concat(Ee," edge in the graph."));return y(pe.attributes,se),this.emit("edgeAttributesUpdated",{key:pe.key,type:"merge",attributes:pe.attributes,data:se}),this}}}],ae=Ye,H=function(){var be,Me=arguments,Ee=-1;return new ae(function U(){if(!be){if(++Ee>=Me.length)return{done:!0};be=Me[Ee]}var se=be.next();return se.done?(be=null,U()):se})},Fe=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ke(be,Me){for(var Ee in Me)be.push(Me[Ee].key)}function fe(be,Me){for(var Ee in Me)Me[Ee].forEach(function(U){return be.push(U.key)})}function ee(be,Me,Ee){for(var U in be)if(U!==Ee){var se=be[U];Me(se.key,se.attributes,se.source.key,se.target.key,se.source.attributes,se.target.attributes,se.undirected,se.generatedKey)}}function G(be,Me,Ee){for(var U in be)U!==Ee&&be[U].forEach(function(se){return Me(se.key,se.attributes,se.source.key,se.target.key,se.source.attributes,se.target.attributes,se.undirected,se.generatedKey)})}function R(be,Me,Ee){for(var U in be)if(U!==Ee){var se=be[U];if(Me(se.key,se.attributes,se.source.key,se.target.key,se.source.attributes,se.target.attributes,se.undirected,se.generatedKey))return!0}return!1}function I(be,Me,Ee){var U,se,pe,Be,Xe;for(var at in be)if(at!==Ee)for(U=be[at].values();!0!==(se=U.next()).done;)if(Be=(pe=se.value).source,Me(pe.key,pe.attributes,Be.key,(Xe=pe.target).key,Be.attributes,Xe.attributes,pe.undirected,pe.generatedKey))return!0;return!1}function ue(be,Me){var Ee=Object.keys(be),U=Ee.length,se=null,pe=0;return new Ye(function Be(){var Xe;if(se){var at=se.next();if(at.done)return se=null,pe++,Be();Xe=at.value}else{if(pe>=U)return{done:!0};var xt=Ee[pe];if(xt===Me)return pe++,Be();if((Xe=be[xt])instanceof Set)return se=Xe.values(),Be();pe++}return{done:!1,value:[Xe.key,Xe.attributes,Xe.source.key,Xe.target.key,Xe.source.attributes,Xe.target.attributes]}})}function ge(be,Me,Ee){var U=Me[Ee];U&&be.push(U.key)}function ze(be,Me,Ee){var U=Me[Ee];U&&U.forEach(function(se){return be.push(se.key)})}function Je(be,Me,Ee){var U=be[Me];if(U){var se=U.source,pe=U.target;Ee(U.key,U.attributes,se.key,pe.key,se.attributes,pe.attributes,U.undirected,U.generatedKey)}}function ot(be,Me,Ee){var U=be[Me];U&&U.forEach(function(se){return Ee(se.key,se.attributes,se.source.key,se.target.key,se.source.attributes,se.target.attributes,se.undirected,se.generatedKey)})}function kt(be,Me,Ee){var U=be[Me];if(U){var se=U.source,pe=U.target;return Ee(U.key,U.attributes,se.key,pe.key,se.attributes,pe.attributes,U.undirected,U.generatedKey)}}function _t(be,Me,Ee){var U=be[Me];if(U){for(var se,pe,Be=U.values();!0!==(se=Be.next()).done;)if(Ee((pe=se.value).key,pe.attributes,pe.source.key,pe.target.key,pe.source.attributes,pe.target.attributes,pe.undirected,pe.generatedKey))return!0;return!1}}function Wt(be,Me){var Ee=be[Me];if(Ee instanceof Set){var U=Ee.values();return new Ye(function(){var se=U.next();if(se.done)return se;var pe=se.value;return{done:!1,value:[pe.key,pe.attributes,pe.source.key,pe.target.key,pe.source.attributes,pe.target.attributes]}})}return Ye.of([Ee.key,Ee.attributes,Ee.source.key,Ee.target.key,Ee.source.attributes,Ee.target.attributes])}var bn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function As(be,Me){if(void 0!==Me)for(var Ee in Me)be.add(Ee)}function Ns(be,Me,Ee){for(var U in Me){var se=Me[U];se instanceof Set&&(se=se.values().next().value);var pe=se.source,Xe=pe===be?se.target:pe;Ee(Xe.key,Xe.attributes)}}function $i(be,Me,Ee,U){for(var se in Ee){var pe=Ee[se];pe instanceof Set&&(pe=pe.values().next().value);var Be=pe.source,at=Be===Me?pe.target:Be;be.has(at.key)||(be.add(at.key),U(at.key,at.attributes))}}function ts(be,Me,Ee){for(var U in Me){var se=Me[U];se instanceof Set&&(se=se.values().next().value);var pe=se.source,Xe=pe===be?se.target:pe;if(Ee(Xe.key,Xe.attributes))return!0}return!1}function So(be,Me,Ee,U){for(var se in Ee){var pe=Ee[se];pe instanceof Set&&(pe=pe.values().next().value);var Be=pe.source,at=Be===Me?pe.target:Be;if(!be.has(at.key)&&(be.add(at.key),U(at.key,at.attributes)))return!0}return!1}function Ko(be,Me){var Ee=Object.keys(Me),U=Ee.length,se=0;return new Ye(function(){if(se>=U)return{done:!0};var pe=Me[Ee[se++]];pe instanceof Set&&(pe=pe.values().next().value);var Be=pe.source,at=Be===be?pe.target:Be;return{done:!1,value:[at.key,at.attributes]}})}function Fs(be,Me,Ee){var U=Object.keys(Ee),se=U.length,pe=0;return new Ye(function Be(){if(pe>=se)return{done:!0};var Xe=Ee[U[pe++]];Xe instanceof Set&&(Xe=Xe.values().next().value);var at=Xe.source,It=at===Me?Xe.target:at;return be.has(It.key)?Be():(be.add(It.key),{done:!1,value:[It.key,It.attributes]})})}function Qc(be,Me,Ee){for(var U,se,pe,Be,Xe,at,xt,It=Me._nodes.values(),Vt=Me.type;!0!==(U=It.next()).done;){if(se=U.value,"undirected"!==Vt)for(pe in Be=se.out)if(at=(Xe=Be[pe]).target,xt=Ee(se.key,at.key,se.attributes,at.attributes,Xe.key,Xe.attributes,Xe.undirected,Xe.generatedKey),be&&xt)return;if("directed"!==Vt)for(pe in Be=se.undirected)if((at=(Xe=Be[pe]).target).key!==pe&&(at=Xe.source),xt=Ee(se.key,at.key,se.attributes,at.attributes,Xe.key,Xe.attributes,Xe.undirected,Xe.generatedKey),be&&xt)return}}function el(be,Me,Ee){for(var U,se,pe,Be,Xe,at,xt,It,Vt,sn=Me._nodes.values(),vn=Me.type;!0!==(U=sn.next()).done;){if(se=U.value,"undirected"!==vn)for(pe in at=se.out)for(Be=at[pe].values();!0!==(Xe=Be.next()).done;)if(It=(xt=Xe.value).target,Vt=Ee(se.key,It.key,se.attributes,It.attributes,xt.key,xt.attributes,xt.undirected,xt.generatedKey),be&&Vt)return;if("directed"!==vn)for(pe in at=se.undirected)for(Be=at[pe].values();!0!==(Xe=Be.next()).done;)if((It=(xt=Xe.value).target).key!==pe&&(It=xt.source),Vt=Ee(se.key,It.key,se.attributes,It.attributes,xt.key,xt.attributes,xt.undirected,xt.generatedKey),be&&Vt)return}}function Ua(be,Me){var Ee={key:be};return j(Me.attributes)||(Ee.attributes=y({},Me.attributes)),Ee}function td(be,Me){var Ee={source:Me.source.key,target:Me.target.key};return Me.generatedKey||(Ee.key=be),j(Me.attributes)||(Ee.attributes=y({},Me.attributes)),Me.undirected&&(Ee.undirected=!0),Ee}var _u=new Set(["directed","undirected","mixed"]),id=new Set(["domain","_events","_eventsCount","_maxListeners"]),bu={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function nl(be,Me,Ee){var U=new be.NodeDataClass(Me,Ee);return be._nodes.set(Me,U),be.emit("nodeAdded",{key:Me,attributes:Ee}),U}function rd(be,Me,Ee,U,se,pe,Be,Xe){if(!U&&"undirected"===be.type)throw new me("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(U&&"directed"===be.type)throw new me("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Xe&&!L(Xe))throw new ke("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat(Xe,'"'));if(pe=""+pe,Be=""+Be,Xe=Xe||{},!be.allowSelfLoops&&pe===Be)throw new me("Graph.".concat(Me,': source & target are the same ("').concat(pe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var at=be._nodes.get(pe),xt=be._nodes.get(Be);if(!at)throw new He("Graph.".concat(Me,': source node "').concat(pe,'" not found.'));if(!xt)throw new He("Graph.".concat(Me,': target node "').concat(Be,'" not found.'));var It={key:null,undirected:U,source:pe,target:Be,attributes:Xe};if(Ee&&(se=be._edgeKeyGenerator(It)),be._edges.has(se=""+se))throw new me("Graph.".concat(Me,': the "').concat(se,'" edge already exists in the graph.'));if(!be.multi&&(U?void 0!==at.undirected[Be]:void 0!==at.out[Be]))throw new me("Graph.".concat(Me,': an edge linking "').concat(pe,'" to "').concat(Be,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Vt=new We(U,se,Ee,at,xt,Xe);return be._edges.set(se,Vt),pe===Be?U?(at.undirectedSelfLoops++,be._undirectedSelfLoopCount++):(at.directedSelfLoops++,be._directedSelfLoopCount++):U?(at.undirectedDegree++,xt.undirectedDegree++):(at.outDegree++,xt.inDegree++),_e(be,U,Vt,pe,Be,at,xt),U?be._undirectedSize++:be._directedSize++,It.key=se,be.emit("edgeAdded",It),se}function il(be,Me,Ee,U,se,pe,Be,Xe,at){if(!U&&"undirected"===be.type)throw new me("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(U&&"directed"===be.type)throw new me("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Xe)if(at){if("function"!=typeof Xe)throw new ke("Graph.".concat(Me,': invalid updater function. Expecting a function but got "').concat(Xe,'"'))}else if(!L(Xe))throw new ke("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat(Xe,'"'));var xt;if(pe=""+pe,Be=""+Be,at&&(xt=Xe,Xe=void 0),!be.allowSelfLoops&&pe===Be)throw new me("Graph.".concat(Me,': source & target are the same ("').concat(pe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var It,Vt,sn=be._nodes.get(pe),vn=be._nodes.get(Be);if(!Ee&&(It=be._edges.get(se))){if(It.source.key!==pe||It.target.key!==Be||U&&(It.source.key!==Be||It.target.key!==pe))throw new me("Graph.".concat(Me,': inconsistency detected when attempting to merge the "').concat(se,'" edge with "').concat(pe,'" source & "').concat(Be,'" target vs. ("').concat(It.source.key,'", "').concat(It.target.key,'").'));Vt=It}if(Vt||be.multi||!sn||(Vt=U?sn.undirected[Be]:sn.out[Be]),Vt)return(at?xt:Xe)?(at?(Vt.attributes=xt(Vt.attributes),be.emit("edgeAttributesUpdated",{type:"replace",key:Vt.key,attributes:Vt.attributes})):(y(Vt.attributes,Xe),be.emit("edgeAttributesUpdated",{type:"merge",key:Vt.key,attributes:Vt.attributes,data:Xe})),Vt.key):Vt.key;Xe=Xe||{},at&&xt&&(Xe=xt(Xe));var kr={key:null,undirected:U,source:pe,target:Be,attributes:Xe};if(Ee&&(se=be._edgeKeyGenerator(kr)),be._edges.has(se=""+se))throw new me("Graph.".concat(Me,': the "').concat(se,'" edge already exists in the graph.'));return sn||(sn=nl(be,pe,{}),pe===Be&&(vn=sn)),vn||(vn=nl(be,Be,{})),It=new We(U,se,Ee,sn,vn,Xe),be._edges.set(se,It),pe===Be?U?(sn.undirectedSelfLoops++,be._undirectedSelfLoopCount++):(sn.directedSelfLoops++,be._directedSelfLoopCount++):U?(sn.undirectedDegree++,vn.undirectedDegree++):(sn.outDegree++,vn.inDegree++),_e(be,U,It,pe,Be,sn,vn),U?be._undirectedSize++:be._directedSize++,kr.key=se,be.emit("edgeAdded",kr),se}var be,Cn=function(be){function Me(U){var se;if(se=be.call(this)||this,(U=y({},bu,U)).edgeKeyGenerator&&"function"!=typeof U.edgeKeyGenerator)throw new ke("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(U.edgeKeyGenerator,'".'));if("boolean"!=typeof U.multi)throw new ke("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(U.multi,'".'));if(!_u.has(U.type))throw new ke('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(U.type,'".'));if("boolean"!=typeof U.allowSelfLoops)throw new ke("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(U.allowSelfLoops,'".'));var pe,Be="mixed"===U.type?Se:"directed"===U.type?qe:lt;return oe(_(se),"NodeDataClass",Be),oe(_(se),"_attributes",{}),oe(_(se),"_nodes",new Map),oe(_(se),"_edges",new Map),oe(_(se),"_directedSize",0),oe(_(se),"_undirectedSize",0),oe(_(se),"_directedSelfLoopCount",0),oe(_(se),"_undirectedSelfLoopCount",0),oe(_(se),"_edgeKeyGenerator",U.edgeKeyGenerator||(pe=0,function(){return pe++})),oe(_(se),"_options",U),id.forEach(function(Xe){return oe(_(se),Xe,se[Xe])}),C(_(se),"order",function(){return se._nodes.size}),C(_(se),"size",function(){return se._edges.size}),C(_(se),"directedSize",function(){return se._directedSize}),C(_(se),"undirectedSize",function(){return se._undirectedSize}),C(_(se),"selfLoopCount",function(){return se._directedSelfLoopCount+se._undirectedSelfLoopCount}),C(_(se),"directedSelfLoopCount",function(){return se._directedSelfLoopCount}),C(_(se),"undirectedSelfLoopCount",function(){return se._undirectedSelfLoopCount}),C(_(se),"multi",se._options.multi),C(_(se),"type",se._options.type),C(_(se),"allowSelfLoops",se._options.allowSelfLoops),C(_(se),"implementation",function(){return"graphology"}),se}g(Me,be);var Ee=Me.prototype;return Ee.hasNode=function(U){return this._nodes.has(""+U)},Ee.hasDirectedEdge=function(U,se){if("undirected"===this.type)return!1;if(1===arguments.length){var Be=this._edges.get(""+U);return!!Be&&!Be.undirected}if(2===arguments.length){se=""+se;var Xe=this._nodes.get(U=""+U);if(!Xe)return!1;var at=Xe.out[se];return!(!at||this.multi&&!at.size)}throw new ke("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ee.hasUndirectedEdge=function(U,se){if("directed"===this.type)return!1;if(1===arguments.length){var Be=this._edges.get(""+U);return!!Be&&Be.undirected}if(2===arguments.length){se=""+se;var Xe=this._nodes.get(U=""+U);if(!Xe)return!1;var at=Xe.undirected[se];return!(!at||this.multi&&!at.size)}throw new ke("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ee.hasEdge=function(U,se){if(1===arguments.length)return this._edges.has(""+U);if(2===arguments.length){se=""+se;var Be=this._nodes.get(U=""+U);if(!Be)return!1;var Xe=void 0!==Be.out&&Be.out[se];return Xe||(Xe=void 0!==Be.undirected&&Be.undirected[se]),!(!Xe||this.multi&&!Xe.size)}throw new ke("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ee.directedEdge=function(U,se){if("undirected"!==this.type){if(U=""+U,se=""+se,this.multi)throw new me("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var pe=this._nodes.get(U);if(!pe)throw new He('Graph.directedEdge: could not find the "'.concat(U,'" source node in the graph.'));if(!this._nodes.has(se))throw new He('Graph.directedEdge: could not find the "'.concat(se,'" target node in the graph.'));var Be=pe.out&&pe.out[se]||void 0;return Be?Be.key:void 0}},Ee.undirectedEdge=function(U,se){if("directed"!==this.type){if(U=""+U,se=""+se,this.multi)throw new me("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var pe=this._nodes.get(U);if(!pe)throw new He('Graph.undirectedEdge: could not find the "'.concat(U,'" source node in the graph.'));if(!this._nodes.has(se))throw new He('Graph.undirectedEdge: could not find the "'.concat(se,'" target node in the graph.'));var Be=pe.undirected&&pe.undirected[se]||void 0;return Be?Be.key:void 0}},Ee.edge=function(U,se){if(this.multi)throw new me("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");se=""+se;var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.edge: could not find the "'.concat(U,'" source node in the graph.'));if(!this._nodes.has(se))throw new He('Graph.edge: could not find the "'.concat(se,'" target node in the graph.'));var Be=pe.out&&pe.out[se]||pe.undirected&&pe.undirected[se]||void 0;if(Be)return Be.key},Ee.inDegree=function(U){var se=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof se)throw new ke('Graph.inDegree: Expecting a boolean but got "'.concat(se,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.inDegree: could not find the "'.concat(U,'" node in the graph.'));return"undirected"===this.type?0:pe.inDegree+(se?pe.directedSelfLoops:0)},Ee.outDegree=function(U){var se=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof se)throw new ke('Graph.outDegree: Expecting a boolean but got "'.concat(se,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.outDegree: could not find the "'.concat(U,'" node in the graph.'));return"undirected"===this.type?0:pe.outDegree+(se?pe.directedSelfLoops:0)},Ee.directedDegree=function(U){var se=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof se)throw new ke('Graph.directedDegree: Expecting a boolean but got "'.concat(se,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.directedDegree: could not find the "'.concat(U,'" node in the graph.'));if("undirected"===this.type)return 0;var Be=se?pe.directedSelfLoops:0;return pe.inDegree+Be+(pe.outDegree+Be)},Ee.undirectedDegree=function(U){var se=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof se)throw new ke('Graph.undirectedDegree: Expecting a boolean but got "'.concat(se,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.undirectedDegree: could not find the "'.concat(U,'" node in the graph.'));return"directed"===this.type?0:pe.undirectedDegree+2*(se?pe.undirectedSelfLoops:0)},Ee.degree=function(U){var se=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof se)throw new ke('Graph.degree: Expecting a boolean but got "'.concat(se,'" for the second parameter (allowing self-loops to be counted).'));var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.degree: could not find the "'.concat(U,'" node in the graph.'));var Be=0,Xe=0;return"directed"!==this.type&&(se&&(Xe=pe.undirectedSelfLoops),Be+=pe.undirectedDegree+2*Xe),"undirected"!==this.type&&(se&&(Xe=pe.directedSelfLoops),Be+=pe.inDegree+pe.outDegree+2*Xe),Be},Ee.source=function(U){var se=this._edges.get(U=""+U);if(!se)throw new He('Graph.source: could not find the "'.concat(U,'" edge in the graph.'));return se.source.key},Ee.target=function(U){var se=this._edges.get(U=""+U);if(!se)throw new He('Graph.target: could not find the "'.concat(U,'" edge in the graph.'));return se.target.key},Ee.extremities=function(U){var se=this._edges.get(U=""+U);if(!se)throw new He('Graph.extremities: could not find the "'.concat(U,'" edge in the graph.'));return[se.source.key,se.target.key]},Ee.opposite=function(U,se){U=""+U;var pe=this._edges.get(se=""+se);if(!pe)throw new He('Graph.opposite: could not find the "'.concat(se,'" edge in the graph.'));var Be=pe.source.key,Xe=pe.target.key;if(U!==Be&&U!==Xe)throw new He('Graph.opposite: the "'.concat(U,'" node is not attached to the "').concat(se,'" edge (').concat(Be,", ").concat(Xe,")."));return U===Be?Xe:Be},Ee.hasExtremity=function(U,se){se=""+se;var pe=this._edges.get(U=""+U);if(!pe)throw new He('Graph.hasExtremity: could not find the "'.concat(U,'" edge in the graph.'));return pe.source.key===se||pe.target.key===se},Ee.isUndirected=function(U){var se=this._edges.get(U=""+U);if(!se)throw new He('Graph.isUndirected: could not find the "'.concat(U,'" edge in the graph.'));return se.undirected},Ee.isDirected=function(U){var se=this._edges.get(U=""+U);if(!se)throw new He('Graph.isDirected: could not find the "'.concat(U,'" edge in the graph.'));return!se.undirected},Ee.isSelfLoop=function(U){var se=this._edges.get(U=""+U);if(!se)throw new He('Graph.isSelfLoop: could not find the "'.concat(U,'" edge in the graph.'));return se.source===se.target},Ee.hasGeneratedKey=function(U){var se=this._edges.get(U=""+U);if(!se)throw new He('Graph.hasGeneratedKey: could not find the "'.concat(U,'" edge in the graph.'));return se.generatedKey},Ee.addNode=function(U,se){return function(pe,Be,Xe){if(Xe&&!L(Xe))throw new ke('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Xe,'"'));if(Xe=Xe||{},pe._nodes.has(Be=""+Be))throw new me('Graph.addNode: the "'.concat(Be,'" node already exist in the graph.'));var at=new pe.NodeDataClass(Be,Xe);return pe._nodes.set(Be,at),pe.emit("nodeAdded",{key:Be,attributes:Xe}),at}(this,U,se).key},Ee.mergeNode=function(U,se){if(se&&!L(se))throw new ke('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(se,'"'));se=se||{};var pe=this._nodes.get(U=""+U);return pe?(se&&(y(pe.attributes,se),this.emit("nodeAttributesUpdated",{type:"merge",key:U,attributes:pe.attributes,data:se})),U):(pe=new this.NodeDataClass(U,se),this._nodes.set(U,pe),this.emit("nodeAdded",{key:U,attributes:se}),U)},Ee.updateNode=function(U,se){if(se&&"function"!=typeof se)throw new ke('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(se,'"'));var pe=this._nodes.get(U=""+U);if(pe)return se&&(pe.attributes=se(pe.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:U,attributes:pe.attributes})),U;var Xe=se?se({}):{};return pe=new this.NodeDataClass(U,Xe),this._nodes.set(U,pe),this.emit("nodeAdded",{key:U,attributes:Xe}),U},Ee.dropNode=function(U){var se=this,pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.dropNode: could not find the "'.concat(U,'" node in the graph.'));this.forEachEdge(U,function(Be){se.dropEdge(Be)}),this._nodes.delete(U),this.emit("nodeDropped",{key:U,attributes:pe.attributes})},Ee.dropEdge=function(U){var se;if(arguments.length>1){var pe=""+arguments[0],Be=""+arguments[1];if(!(se=M(this,pe,Be,this.type)))throw new He('Graph.dropEdge: could not find the "'.concat(pe,'" -> "').concat(Be,'" edge in the graph.'))}else if(!(se=this._edges.get(U=""+U)))throw new He('Graph.dropEdge: could not find the "'.concat(U,'" edge in the graph.'));this._edges.delete(se.key);var at=se.source,xt=se.target,It=se.attributes,Vt=se.undirected;return at===xt?Vt?(at.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(at.directedSelfLoops--,this._directedSelfLoopCount--):Vt?(at.undirectedDegree--,xt.undirectedDegree--):(at.outDegree--,xt.inDegree--),function z(be,Me,Ee){var U=be.multi,se=Ee.source,pe=Ee.target,Be=se.key,Xe=pe.key,at=se[Me?"undirected":"out"],xt=Me?"undirected":"in";if(Xe in at)if(U){var It=at[Xe];1===It.size?(delete at[Xe],delete pe[xt][Be]):It.delete(Ee)}else delete at[Xe];U||delete pe[xt][Be]}(this,Vt,se),Vt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:U,attributes:It,source:at.key,target:xt.key,undirected:Vt}),this},Ee.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},Ee.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},Ee.getAttribute=function(U){return this._attributes[U]},Ee.getAttributes=function(){return this._attributes},Ee.hasAttribute=function(U){return this._attributes.hasOwnProperty(U)},Ee.setAttribute=function(U,se){return this._attributes[U]=se,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:U}),this},Ee.updateAttribute=function(U,se){if("function"!=typeof se)throw new ke("Graph.updateAttribute: updater should be a function.");return this._attributes[U]=se(this._attributes[U]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:U}),this},Ee.removeAttribute=function(U){return delete this._attributes[U],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:U}),this},Ee.replaceAttributes=function(U){if(!L(U))throw new ke("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=U,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},Ee.mergeAttributes=function(U){if(!L(U))throw new ke("Graph.mergeAttributes: provided attributes are not a plain object.");return y(this._attributes,U),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:U}),this},Ee.getNodeAttribute=function(U,se){var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.getNodeAttribute: could not find the "'.concat(U,'" node in the graph.'));return pe.attributes[se]},Ee.getNodeAttributes=function(U){var se=this._nodes.get(U=""+U);if(!se)throw new He('Graph.getNodeAttributes: could not find the "'.concat(U,'" node in the graph.'));return se.attributes},Ee.hasNodeAttribute=function(U,se){var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.hasNodeAttribute: could not find the "'.concat(U,'" node in the graph.'));return pe.attributes.hasOwnProperty(se)},Ee.setNodeAttribute=function(U,se,pe){var Be=this._nodes.get(U=""+U);if(!Be)throw new He('Graph.setNodeAttribute: could not find the "'.concat(U,'" node in the graph.'));if(arguments.length<3)throw new ke("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Be.attributes[se]=pe,this.emit("nodeAttributesUpdated",{key:U,type:"set",attributes:Be.attributes,name:se}),this},Ee.updateNodeAttribute=function(U,se,pe){var Be=this._nodes.get(U=""+U);if(!Be)throw new He('Graph.updateNodeAttribute: could not find the "'.concat(U,'" node in the graph.'));if(arguments.length<3)throw new ke("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof pe)throw new ke("Graph.updateAttribute: updater should be a function.");var Xe=Be.attributes,at=pe(Xe[se]);return Xe[se]=at,this.emit("nodeAttributesUpdated",{key:U,type:"set",attributes:Be.attributes,name:se}),this},Ee.removeNodeAttribute=function(U,se){var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.hasNodeAttribute: could not find the "'.concat(U,'" node in the graph.'));return delete pe.attributes[se],this.emit("nodeAttributesUpdated",{key:U,type:"remove",attributes:pe.attributes,name:se}),this},Ee.replaceNodeAttributes=function(U,se){var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.replaceNodeAttributes: could not find the "'.concat(U,'" node in the graph.'));if(!L(se))throw new ke("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return pe.attributes=se,this.emit("nodeAttributesUpdated",{key:U,type:"replace",attributes:pe.attributes}),this},Ee.mergeNodeAttributes=function(U,se){var pe=this._nodes.get(U=""+U);if(!pe)throw new He('Graph.mergeNodeAttributes: could not find the "'.concat(U,'" node in the graph.'));if(!L(se))throw new ke("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return y(pe.attributes,se),this.emit("nodeAttributesUpdated",{key:U,type:"merge",attributes:pe.attributes,data:se}),this},Ee.updateEachNodeAttributes=function(U,se){if("function"!=typeof U)throw new ke("Graph.updateEachNodeAttributes: expecting an updater function.");if(se&&!Y(se))throw new ke("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var pe,Be,Xe=this._nodes.values();!0!==(pe=Xe.next()).done;)(Be=pe.value).attributes=U(Be.key,Be.attributes);this.emit("eachNodeAttributesUpdated",{hints:se||null})},Ee.updateEachEdgeAttributes=function(U,se){if("function"!=typeof U)throw new ke("Graph.updateEachEdgeAttributes: expecting an updater function.");if(se&&!Y(se))throw new ke("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var pe,Be,Xe=this._edges.values();!0!==(pe=Xe.next()).done;)(Be=pe.value).attributes=U(Be.key,Be.attributes);this.emit("eachEdgeAttributesUpdated",{hints:se||null})},Ee.forEach=function(U){if("function"!=typeof U)throw new ke("Graph.forEach: expecting a callback.");this.multi?el(!1,this,U):Qc(!1,this,U)},Ee.forEachUntil=function(U){if("function"!=typeof U)throw new ke("Graph.forEach: expecting a callback.");this.multi?el(!0,this,U):Qc(!0,this,U)},Ee.adjacency=function(){return this.multi?(at=(U=this)._nodes.values(),xt=U.type,It="outer",Vt=null,new Ye(function sn(){var vn;if("outer"===It)return!0===(vn=at.next()).done?vn:(se=vn.value,It="directed",sn());if("directed"===It)return"undirected"===xt?(It="undirected",sn()):(Be=se.out,pe=Object.keys(se.out),Xe=0,It="inner-directed",sn());if("undirected"===It){if("directed"===xt)return It="outer",sn();Be=se.undirected,pe=Object.keys(se.undirected),Xe=0,It="inner-undirected"}if(!Vt&&Xe>=pe.length)return It="inner-undirected"===It?"outer":"undirected",sn();if(!Vt){var fs=pe[Xe++];return Vt=Be[fs].values(),sn()}if((vn=Vt.next()).done)return Vt=null,sn();var kr=vn.value,Us=kr.target;return"inner-undirected"===It&&Us.key===se.key&&(Us=kr.source),{done:!1,value:[se.key,Us.key,se.attributes,Us.attributes,kr.key,kr.attributes]}})):(sl=(sn=this)._nodes.values(),pa=sn.type,Pr="outer",new Ye(function js(){var ol;if("outer"===Pr)return!0===(ol=sl.next()).done?ol:(vn=ol.value,Pr="directed",js());if("directed"===Pr)return"undirected"===pa?(Pr="undirected",js()):(kr=vn.out,fs=Object.keys(vn.out),Us=0,Pr="inner-directed",js());if("undirected"===Pr){if("directed"===pa)return Pr="outer",js();kr=vn.undirected,fs=Object.keys(vn.undirected),Us=0,Pr="inner-undirected"}if(Us>=fs.length)return Pr="inner-undirected"===Pr?"outer":"undirected",js();var Vi=fs[Us++],Xi=kr[Vi],$t=Xi.target;return"inner-undirected"===Pr&&$t.key===vn.key&&($t=Xi.source),{done:!1,value:[vn.key,$t.key,vn.attributes,$t.attributes,Xi.key,Xi.attributes]}}));var sn,vn,fs,kr,Us,sl,pa,Pr,U,se,pe,Be,Xe,at,xt,It,Vt},Ee.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ce(this._nodes.keys(),this._nodes.size)},Ee.forEachNode=function(U){if("function"!=typeof U)throw new ke("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(se,pe){U(pe,se.attributes)})},Ee.forEachNodeUntil=function(U){if("function"!=typeof U)throw new ke("Graph.forEachNode: expecting a callback.");for(var se,pe,Be=this._nodes.values();!0!==(se=Be.next())&&!U((pe=se.value).key,pe.attributes););},Ee.nodeEntries=function(){var U=this._nodes.values();return new Ye(function(){var se=U.next();if(se.done)return se;var pe=se.value;return{value:[pe.key,pe.attributes],done:!1}})},Ee.exportNode=function(U){var se=this._nodes.get(U=""+U);if(!se)throw new He('Graph.exportNode: could not find the "'.concat(U,'" node in the graph.'));return Ua(U,se)},Ee.exportEdge=function(U){var se=this._edges.get(U=""+U);if(!se)throw new He('Graph.exportEdge: could not find the "'.concat(U,'" edge in the graph.'));return td(U,se)},Ee.export=function(){var U=new Array(this._nodes.size),se=0;this._nodes.forEach(function(Be,Xe){U[se++]=Ua(Xe,Be)});var pe=new Array(this._edges.size);return se=0,this._edges.forEach(function(Be,Xe){pe[se++]=td(Xe,Be)}),{attributes:this.getAttributes(),nodes:U,edges:pe,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},Ee.importNode=function(U){var se=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pe=function nd(be){return L(be)?"key"in be?!("attributes"in be)||L(be.attributes)&&null!==be.attributes?null:"invalid-attributes":"no-key":"not-object"}(U);if(pe){if("not-object"===pe)throw new ke('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===pe)throw new ke("Graph.importNode: no key provided.");if("invalid-attributes"===pe)throw new ke("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Be=U.key,Xe=U.attributes,at=void 0===Xe?{}:Xe;return se?this.mergeNode(Be,at):this.addNode(Be,at),this},Ee.importEdge=function(U){var se=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pe=function tl(be){return L(be)?"source"in be?"target"in be?!("attributes"in be)||L(be.attributes)&&null!==be.attributes?"undirected"in be&&"boolean"!=typeof be.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(U);if(pe){if("not-object"===pe)throw new ke('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===pe)throw new ke("Graph.importEdge: missing souce.");if("no-target"===pe)throw new ke("Graph.importEdge: missing target.");if("invalid-attributes"===pe)throw new ke("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===pe)throw new ke("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Be=U.source,Xe=U.target,at=U.attributes,xt=void 0===at?{}:at,It=U.undirected,Vt=void 0!==It&&It;return"key"in U?(se?Vt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Vt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,U.key,Be,Xe,xt):(se?Vt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Vt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Be,Xe,xt),this},Ee.import=function(U){var se,pe,Be,Xe=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function F(be){return null!==be&&"object"===Z(be)&&"function"==typeof be.addUndirectedEdgeWithKey&&"function"==typeof be.dropNode}(U))return this.import(U.export(),Xe),this;if(!L(U))throw new ke("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(U.attributes){if(!L(U.attributes))throw new ke("Graph.import: invalid attributes. Expecting a plain object.");Xe?this.mergeAttributes(U.attributes):this.replaceAttributes(U.attributes)}if(U.nodes){if(Be=U.nodes,!Array.isArray(Be))throw new ke("Graph.import: invalid nodes. Expecting an array.");for(se=0,pe=Be.length;se<pe;se++)this.importNode(Be[se],Xe)}if(U.edges){if(Be=U.edges,!Array.isArray(Be))throw new ke("Graph.import: invalid edges. Expecting an array.");for(se=0,pe=Be.length;se<pe;se++)this.importEdge(Be[se],Xe)}return this},Ee.nullCopy=function(U){return new Me(y({},this._options,U))},Ee.emptyCopy=function(U){var se=this.nullCopy(U);return this._nodes.forEach(function(pe,Be){var Xe=y({},pe.attributes);pe=new se.NodeDataClass(Be,Xe),se._nodes.set(Be,pe)}),se},Ee.copy=function(){var U=new Me(this._options);return U.import(this),U},Ee.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(U){return U.upgradeToMixed()}),this._options.type="mixed",C(this,"type",this._options.type),oe(this,"NodeDataClass",Se)),this},Ee.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,C(this,"multi",!0),(U=this)._nodes.forEach(function(se,pe){if(se.out)for(var Be in se.out){var Xe=new Set;Xe.add(se.out[Be]),se.out[Be]=Xe,U._nodes.get(Be).in[pe]=Xe}if(se.undirected)for(var at in se.undirected)if(!(at>pe)){var xt=new Set;xt.add(se.undirected[at]),se.undirected[at]=xt,U._nodes.get(at).undirected[pe]=xt}})),this;var U},Ee.clearIndex=function(){return this._nodes.forEach(function(U){void 0!==U.in&&(U.in={},U.out={}),void 0!==U.undirected&&(U.undirected={})}),this},Ee.toJSON=function(){return this.export()},Ee.toString=function(){return"[object Graph]"},Ee.inspect=function(){var U=this,se={};this._nodes.forEach(function(xt,It){se[It]=xt.attributes});var pe={},Be={};this._edges.forEach(function(xt,It){var Vt=xt.undirected?"--":"->",sn="",vn="(".concat(xt.source.key,")").concat(Vt,"(").concat(xt.target.key,")");xt.generatedKey?U.multi&&(void 0===Be[vn]?Be[vn]=0:Be[vn]++,sn+="".concat(Be[vn],". ")):sn+="[".concat(It,"]: "),pe[sn+=vn]=xt.attributes});var Xe={};for(var at in this)this.hasOwnProperty(at)&&!id.has(at)&&"function"!=typeof this[at]&&(Xe[at]=this[at]);return Xe.attributes=this._attributes,Xe.nodes=se,Xe.edges=pe,oe(Xe,"constructor",this.constructor),Xe},Me}(K.exports.EventEmitter);typeof Symbol<"u"&&(Cn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Cn.prototype.inspect),[{name:function(be){return"".concat(be,"Edge")},generateKey:!0},{name:function(be){return"".concat(be,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(be){return"".concat(be,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(be){return"".concat(be,"EdgeWithKey")}},{name:function(be){return"".concat(be,"DirectedEdgeWithKey")},type:"directed"},{name:function(be){return"".concat(be,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(be){["add","merge","update"].forEach(function(Me){var Ee=be.name(Me),U="add"===Me?rd:il;Cn.prototype[Ee]=be.generateKey?function(se,pe,Be){return U(this,Ee,!0,"undirected"===(be.type||this.type),null,se,pe,Be,"update"===Me)}:function(se,pe,Be,Xe){return U(this,Ee,!1,"undirected"===(be.type||this.type),se,pe,Be,Xe,"update"===Me)}})}),typeof Symbol<"u"&&(Cn.prototype[Symbol.iterator]=Cn.prototype.adjacency),be=Cn,O.forEach(function(Me){var Ee=Me.name,U=Me.attacher;U(be,Ee("Edge"),"mixed"),U(be,Ee("DirectedEdge"),"directed"),U(be,Ee("UndirectedEdge"),"undirected")}),function(be){Fe.forEach(function(Me){var U,se,pe,Be;pe=(U=Me).type,Be=U.direction,be.prototype[se=U.name]=function(Xe,at){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return[];if(!arguments.length)return function rn(be,Me){if(0===be.size)return[];if("mixed"===Me||Me===be.type)return"function"==typeof Array.from?Array.from(be._edges.keys()):Ce(be._edges.keys(),be._edges.size);for(var Ee,U,pe=new Array("undirected"===Me?be.undirectedSize:be.directedSize),Be="undirected"===Me,Xe=be._edges.values(),at=0;!0!==(Ee=Xe.next()).done;)(U=Ee.value).undirected===Be&&(pe[at++]=U.key);return pe}(this,pe);if(1===arguments.length){var xt=this._nodes.get(Xe=""+Xe);if(void 0===xt)throw new He("Graph.".concat(se,': could not find the "').concat(Xe,'" node in the graph.'));return function ce(be,Me,Ee,U){var se=[],pe=be?fe:Ke;return"undirected"!==Me&&("out"!==Ee&&pe(se,U.in),"in"!==Ee&&pe(se,U.out),!Ee&&U.directedSelfLoops>0&&se.splice(se.lastIndexOf(U.key),1)),"directed"!==Me&&pe(se,U.undirected),se}(this.multi,"mixed"===pe?this.type:pe,Be,xt)}if(2===arguments.length){at=""+at;var It=this._nodes.get(Xe=""+Xe);if(!It)throw new He("Graph.".concat(se,':  could not find the "').concat(Xe,'" source node in the graph.'));if(!this._nodes.has(at))throw new He("Graph.".concat(se,':  could not find the "').concat(at,'" target node in the graph.'));return function Xt(be,Me,Ee,U,se){var pe=Me?ze:ge,Be=[];return"undirected"!==be&&(void 0!==U.in&&"out"!==Ee&&pe(Be,U.in,se),void 0!==U.out&&"in"!==Ee&&pe(Be,U.out,se),!Ee&&U.directedSelfLoops>0&&Be.splice(Be.lastIndexOf(U.key),1)),"directed"!==be&&void 0!==U.undirected&&pe(Be,U.undirected,se),Be}(pe,this.multi,Be,It,at)}throw new ke("Graph.".concat(se,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(Ee,U){var se=U.name,pe=U.type,Be=U.direction,Xe="forEach"+se[0].toUpperCase()+se.slice(1,-1);Ee.prototype[Xe]=function(at,xt,It){if("mixed"===pe||"mixed"===this.type||pe===this.type){if(1===arguments.length)return function Re(be,Me,Ee){if(0!==be.size)for(var U,se,pe="mixed"!==Me&&Me!==be.type,Be="undirected"===Me,Xe=be._edges.values();!0!==(U=Xe.next()).done;)if(se=U.value,!pe||se.undirected===Be){var Vt=se.source,sn=se.target;Ee(se.key,se.attributes,Vt.key,sn.key,Vt.attributes,sn.attributes,se.undirected,se.generatedKey)}}(this,pe,It=at);if(2===arguments.length){It=xt;var Vt=this._nodes.get(at=""+at);if(void 0===Vt)throw new He("Graph.".concat(Xe,': could not find the "').concat(at,'" node in the graph.'));return function Ge(be,Me,Ee,U,se){var pe=be?G:ee;"undirected"!==Me&&("out"!==Ee&&pe(U.in,se),"in"!==Ee&&pe(U.out,se,Ee?null:U.key)),"directed"!==Me&&pe(U.undirected,se)}(this.multi,"mixed"===pe?this.type:pe,Be,Vt,It)}if(3===arguments.length){xt=""+xt;var sn=this._nodes.get(at=""+at);if(!sn)throw new He("Graph.".concat(Xe,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(xt))throw new He("Graph.".concat(Xe,':  could not find the "').concat(xt,'" target node in the graph.'));return function cn(be,Me,Ee,U,se,pe){var Be=Me?ot:Je;"undirected"!==be&&(void 0!==U.in&&"out"!==Ee&&Be(U.in,se,pe),U.key!==se&&void 0!==U.out&&"in"!==Ee&&Be(U.out,se,pe)),"directed"!==be&&void 0!==U.undirected&&Be(U.undirected,se,pe)}(pe,this.multi,Be,sn,xt,It)}throw new ke("Graph.".concat(Xe,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(be,Me),function(Ee,U){var se=U.name,pe=U.type,Be=U.direction,Xe="forEach"+se[0].toUpperCase()+se.slice(1,-1)+"Until";Ee.prototype[Xe]=function(at,xt,It){if("mixed"===pe||"mixed"===this.type||pe===this.type){if(1===arguments.length)return function J(be,Me,Ee){if(0!==be.size)for(var U,se,pe="mixed"!==Me&&Me!==be.type,Be="undirected"===Me,Xe=be._edges.values();!0!==(U=Xe.next()).done;)if(se=U.value,!pe||se.undirected===Be){var Vt=se.source,sn=se.target;if(Ee(se.key,se.attributes,Vt.key,sn.key,Vt.attributes,sn.attributes,se.undirected,se.generatedKey))break}}(this,pe,It=at);if(2===arguments.length){It=xt;var Vt=this._nodes.get(at=""+at);if(void 0===Vt)throw new He("Graph.".concat(Xe,': could not find the "').concat(at,'" node in the graph.'));return function Ze(be,Me,Ee,U,se){var pe=be?I:R;"undirected"!==Me&&("out"!==Ee&&pe(U.in,se)||"in"!==Ee&&pe(U.out,se,Ee?null:U.key))||"directed"===Me||pe(U.undirected,se)}(this.multi,"mixed"===pe?this.type:pe,Be,Vt,It)}if(3===arguments.length){xt=""+xt;var sn=this._nodes.get(at=""+at);if(!sn)throw new He("Graph.".concat(Xe,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(xt))throw new He("Graph.".concat(Xe,':  could not find the "').concat(xt,'" target node in the graph.'));return function Yn(be,Me,Ee,U,se,pe){var Be=Me?_t:kt;"undirected"!==be&&(void 0!==U.in&&"out"!==Ee&&Be(U.in,se,pe)||U.key!==se&&void 0!==U.out&&"in"!==Ee&&Be(U.out,se,pe,Ee?null:U.key))||"directed"===be||void 0===U.undirected||Be(U.undirected,se,pe)}(pe,this.multi,Be,sn,xt,It)}throw new ke("Graph.".concat(Xe,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(be,Me),function(Ee,U){var pe=U.type,Be=U.direction,Xe=U.name.slice(0,-1)+"Entries";Ee.prototype[Xe]=function(at,xt){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return Ye.empty();if(!arguments.length)return function S(be,Me){if(0===be.size)return Ye.empty();var Ee="mixed"!==Me&&Me!==be.type,U="undirected"===Me,se=be._edges.values();return new Ye(function(){for(var pe,Be;;){if((pe=se.next()).done)return pe;if(Be=pe.value,!Ee||Be.undirected===U)break}return{value:[Be.key,Be.attributes,Be.source.key,Be.target.key,Be.source.attributes,Be.target.attributes],done:!1}})}(this,pe);if(1===arguments.length){var It=this._nodes.get(at=""+at);if(!It)throw new He("Graph.".concat(Xe,': could not find the "').concat(at,'" node in the graph.'));return function ct(be,Me,Ee){var U=Ye.empty();return"undirected"!==be&&("out"!==Me&&void 0!==Ee.in&&(U=H(U,ue(Ee.in))),"in"!==Me&&void 0!==Ee.out&&(U=H(U,ue(Ee.out,Me?null:Ee.key)))),"directed"!==be&&void 0!==Ee.undirected&&(U=H(U,ue(Ee.undirected))),U}(pe,Be,It)}if(2===arguments.length){xt=""+xt;var Vt=this._nodes.get(at=""+at);if(!Vt)throw new He("Graph.".concat(Xe,':  could not find the "').concat(at,'" source node in the graph.'));if(!this._nodes.has(xt))throw new He("Graph.".concat(Xe,':  could not find the "').concat(xt,'" target node in the graph.'));return function Xn(be,Me,Ee,U){var se=Ye.empty();return"undirected"!==be&&(void 0!==Ee.in&&"out"!==Me&&U in Ee.in&&(se=H(se,Wt(Ee.in,U))),void 0!==Ee.out&&"in"!==Me&&U in Ee.out&&(se=H(se,Wt(Ee.out,U)))),"directed"!==be&&void 0!==Ee.undirected&&U in Ee.undirected&&(se=H(se,Wt(Ee.undirected,U))),se}(pe,Be,Vt,xt)}throw new ke("Graph.".concat(Xe,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(be,Me)})}(Cn),function(be){bn.forEach(function(Me){var U,se,pe,Be;pe=(U=Me).type,Be=U.direction,be.prototype[se=U.name]=function(Xe){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return[];if(2===arguments.length){var at=""+arguments[0],xt=""+arguments[1];if(!this._nodes.has(at))throw new He("Graph.".concat(se,': could not find the "').concat(at,'" node in the graph.'));if(!this._nodes.has(xt))throw new He("Graph.".concat(se,': could not find the "').concat(xt,'" node in the graph.'));return function Ss(be,Me,Ee,U,se){var pe=be._nodes.get(U);if("undirected"!==Me){if("out"!==Ee&&void 0!==pe.in)for(var Be in pe.in)if(Be===se)return!0;if("in"!==Ee&&void 0!==pe.out)for(var Xe in pe.out)if(Xe===se)return!0}if("directed"!==Me&&void 0!==pe.undirected)for(var at in pe.undirected)if(at===se)return!0;return!1}(this,pe,Be,at,xt)}if(1===arguments.length){var It=this._nodes.get(Xe=""+Xe);if(void 0===It)throw new He("Graph.".concat(se,': could not find the "').concat(Xe,'" node in the graph.'));return function Yo(be,Me,Ee){if("mixed"!==be){if("undirected"===be)return Object.keys(Ee.undirected);if("string"==typeof Me)return Object.keys(Ee[Me])}var U=new Set;return"undirected"!==be&&("out"!==Me&&As(U,Ee.in),"in"!==Me&&As(U,Ee.out)),"directed"!==be&&As(U,Ee.undirected),Ce(U.values(),U.size)}("mixed"===pe?this.type:pe,Be,It)}throw new ke("Graph.".concat(se,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function gu(be,Me){var Ee=Me.name,U=Me.type,se=Me.direction,pe="forEach"+Ee[0].toUpperCase()+Ee.slice(1,-1);be.prototype[pe]=function(Be,Xe){if("mixed"===U||"mixed"===this.type||U===this.type){var at=this._nodes.get(Be=""+Be);if(void 0===at)throw new He("Graph.".concat(pe,': could not find the "').concat(Be,'" node in the graph.'));!function(xt,It,Vt,sn){if("mixed"!==xt){if("undirected"===xt)return Ns(Vt,Vt.undirected,sn);if("string"==typeof It)return Ns(Vt,Vt[It],sn)}var vn=new Set;"undirected"!==xt&&("out"!==It&&$i(vn,Vt,Vt.in,sn),"in"!==It&&$i(vn,Vt,Vt.out,sn)),"directed"!==xt&&$i(vn,Vt,Vt.undirected,sn)}("mixed"===U?this.type:U,se,at,Xe)}}}(be,Me),function Nh(be,Me){var Ee=Me.name,U=Me.type,se=Me.direction,pe="forEach"+Ee[0].toUpperCase()+Ee.slice(1,-1)+"Until";be.prototype[pe]=function(Be,Xe){if("mixed"===U||"mixed"===this.type||U===this.type){var at=this._nodes.get(Be=""+Be);if(void 0===at)throw new He("Graph.".concat(pe,': could not find the "').concat(Be,'" node in the graph.'));!function(xt,It,Vt,sn){if("mixed"!==xt){if("undirected"===xt)return ts(Vt,Vt.undirected,sn);if("string"==typeof It)return ts(Vt,Vt[It],sn)}var vn=new Set;"undirected"!==xt&&("out"!==It&&So(vn,Vt,Vt.in,sn)||"in"!==It&&So(vn,Vt,Vt.out,sn))||"directed"===xt||So(vn,Vt,Vt.undirected,sn)}("mixed"===U?this.type:U,se,at,Xe)}}}(be,Me),function Fh(be,Me){var U=Me.type,se=Me.direction,pe=Me.name.slice(0,-1)+"Entries";be.prototype[pe]=function(Be){if("mixed"!==U&&"mixed"!==this.type&&U!==this.type)return Ye.empty();var Xe=this._nodes.get(Be=""+Be);if(void 0===Xe)throw new He("Graph.".concat(pe,': could not find the "').concat(Be,'" node in the graph.'));return function(at,xt,It){if("mixed"!==at){if("undirected"===at)return Ko(It,It.undirected);if("string"==typeof xt)return Ko(It,It[xt])}var Vt=Ye.empty(),sn=new Set;return"undirected"!==at&&("out"!==xt&&(Vt=H(Vt,Fs(sn,It,It.in))),"in"!==xt&&(Vt=H(Vt,Fs(sn,It,It.out)))),"directed"!==at&&(Vt=H(Vt,Fs(sn,It,It.undirected))),Vt}("mixed"===U?this.type:U,se,Xe)}}(be,Me)})}(Cn);var rl=function(be){function Me(Ee){var U=y({type:"directed"},Ee);if("multi"in U&&!1!==U.multi)throw new ke("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==U.type)throw new ke('DirectedGraph.from: inconsistent "'+U.type+'" type in given options!');return be.call(this,U)||this}return g(Me,be),Me}(Cn),qo=function(be){function Me(Ee){var U=y({type:"undirected"},Ee);if("multi"in U&&!1!==U.multi)throw new ke("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==U.type)throw new ke('UndirectedGraph.from: inconsistent "'+U.type+'" type in given options!');return be.call(this,U)||this}return g(Me,be),Me}(Cn),ja=function(be){function Me(Ee){var U=y({multi:!0},Ee);if("multi"in U&&!0!==U.multi)throw new ke("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return be.call(this,U)||this}return g(Me,be),Me}(Cn),Va=function(be){function Me(Ee){var U=y({type:"directed",multi:!0},Ee);if("multi"in U&&!0!==U.multi)throw new ke("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==U.type)throw new ke('MultiDirectedGraph.from: inconsistent "'+U.type+'" type in given options!');return be.call(this,U)||this}return g(Me,be),Me}(Cn),Ha=function(be){function Me(Ee){var U=y({type:"undirected",multi:!0},Ee);if("multi"in U&&!0!==U.multi)throw new ke("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==U.type)throw new ke('MultiUndirectedGraph.from: inconsistent "'+U.type+'" type in given options!');return be.call(this,U)||this}return g(Me,be),Me}(Cn);function Bs(be){be.from=function(Me,Ee){var U=y({},Me.options,Ee),se=new be(U);return se.import(Me),se}}return Bs(Cn),Bs(rl),Bs(qo),Bs(ja),Bs(Va),Bs(Ha),Cn.Graph=Cn,Cn.DirectedGraph=rl,Cn.UndirectedGraph=qo,Cn.MultiGraph=ja,Cn.MultiDirectedGraph=Va,Cn.MultiUndirectedGraph=Ha,Cn.InvalidArgumentsGraphError=ke,Cn.NotFoundGraphError=He,Cn.UsageGraphError=me,Cn}()},7271:(ne,Z,g)=>{var E;!function(b,k,A,P){"use strict";var K,_=["","webkit","Moz","MS","ms","o"],y=k.createElement("div"),M="function",F=Math.round,L=Math.abs,j=Date.now;function oe(Oe,Ue,it){return setTimeout(V(Oe,it),Ue)}function C(Oe,Ue,it){return!!Array.isArray(Oe)&&(Y(Oe,it[Ue],it),!0)}function Y(Oe,Ue,it){var ut;if(Oe)if(Oe.forEach)Oe.forEach(Ue,it);else if(Oe.length!==P)for(ut=0;ut<Oe.length;)Ue.call(it,Oe[ut],ut,Oe),ut++;else for(ut in Oe)Oe.hasOwnProperty(ut)&&Ue.call(it,Oe[ut],ut,Oe)}function le(Oe,Ue,it){var ut="DEPRECATED METHOD: "+Ue+"\n"+it+" AT \n";return function(){var Nt=new Error("get-stack-trace"),Gt=Nt&&Nt.stack?Nt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Kn=b.console&&(b.console.warn||b.console.log);return Kn&&Kn.call(b.console,ut,Gt),Oe.apply(this,arguments)}}K="function"!=typeof Object.assign?function(Ue){if(Ue===P||null===Ue)throw new TypeError("Cannot convert undefined or null to object");for(var it=Object(Ue),ut=1;ut<arguments.length;ut++){var Nt=arguments[ut];if(Nt!==P&&null!==Nt)for(var Gt in Nt)Nt.hasOwnProperty(Gt)&&(it[Gt]=Nt[Gt])}return it}:Object.assign;var re=le(function(Ue,it,ut){for(var Nt=Object.keys(it),Gt=0;Gt<Nt.length;)(!ut||ut&&Ue[Nt[Gt]]===P)&&(Ue[Nt[Gt]]=it[Nt[Gt]]),Gt++;return Ue},"extend","Use `assign`."),te=le(function(Ue,it){return re(Ue,it,!0)},"merge","Use `assign`.");function q(Oe,Ue,it){var Nt,ut=Ue.prototype;(Nt=Oe.prototype=Object.create(ut)).constructor=Oe,Nt._super=ut,it&&K(Nt,it)}function V(Oe,Ue){return function(){return Oe.apply(Ue,arguments)}}function x(Oe,Ue){return typeof Oe==M?Oe.apply(Ue&&Ue[0]||P,Ue):Oe}function B(Oe,Ue){return Oe===P?Ue:Oe}function D(Oe,Ue,it){Y(de(Ue),function(ut){Oe.addEventListener(ut,it,!1)})}function he(Oe,Ue,it){Y(de(Ue),function(ut){Oe.removeEventListener(ut,it,!1)})}function W(Oe,Ue){for(;Oe;){if(Oe==Ue)return!0;Oe=Oe.parentNode}return!1}function Te(Oe,Ue){return Oe.indexOf(Ue)>-1}function de(Oe){return Oe.trim().split(/\s+/g)}function we(Oe,Ue,it){if(Oe.indexOf&&!it)return Oe.indexOf(Ue);for(var ut=0;ut<Oe.length;){if(it&&Oe[ut][it]==Ue||!it&&Oe[ut]===Ue)return ut;ut++}return-1}function Ie(Oe){return Array.prototype.slice.call(Oe,0)}function De(Oe,Ue,it){for(var ut=[],Nt=[],Gt=0;Gt<Oe.length;){var Kn=Ue?Oe[Gt][Ue]:Oe[Gt];we(Nt,Kn)<0&&ut.push(Oe[Gt]),Nt[Gt]=Kn,Gt++}return it&&(ut=Ue?ut.sort(function(Sn,ln){return Sn[Ue]>ln[Ue]}):ut.sort()),ut}function et(Oe,Ue){for(var it,ut,Nt=Ue[0].toUpperCase()+Ue.slice(1),Gt=0;Gt<_.length;){if((ut=(it=_[Gt])?it+Nt:Ue)in Oe)return ut;Gt++}return P}var Ye=1;function Ne(Oe){var Ue=Oe.ownerDocument||Oe;return Ue.defaultView||Ue.parentWindow||b}var He="ontouchstart"in b,me=et(b,"PointerEvent")!==P,Se=He&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),qe="touch",We="mouse",z=25,O=1,H=4,Fe=8,Ke=1,fe=2,ee=4,G=8,R=16,I=fe|ee,ue=G|R,ge=I|ue,ze=["x","y"],Je=["clientX","clientY"];function ot(Oe,Ue){var it=this;this.manager=Oe,this.callback=Ue,this.element=Oe.element,this.target=Oe.options.inputTarget,this.domHandler=function(ut){x(Oe.options.enable,[Oe])&&it.handler(ut)},this.init()}function _t(Oe,Ue,it){var ut=it.pointers.length,Nt=it.changedPointers.length,Gt=Ue&O&&ut-Nt==0,Kn=Ue&(H|Fe)&&ut-Nt==0;it.isFirst=!!Gt,it.isFinal=!!Kn,Gt&&(Oe.session={}),it.eventType=Ue,function Wt(Oe,Ue){var it=Oe.session,ut=Ue.pointers,Nt=ut.length;it.firstInput||(it.firstInput=J(Ue)),Nt>1&&!it.firstMultiple?it.firstMultiple=J(Ue):1===Nt&&(it.firstMultiple=!1);var Gt=it.firstInput,Kn=it.firstMultiple,Ar=Kn?Kn.center:Gt.center,Sn=Ue.center=S(ut);Ue.timeStamp=j(),Ue.deltaTime=Ue.timeStamp-Gt.timeStamp,Ue.angle=ct(Ar,Sn),Ue.distance=Ze(Ar,Sn),function rn(Oe,Ue){var it=Ue.center,ut=Oe.offsetDelta||{},Nt=Oe.prevDelta||{},Gt=Oe.prevInput||{};(Ue.eventType===O||Gt.eventType===H)&&(Nt=Oe.prevDelta={x:Gt.deltaX||0,y:Gt.deltaY||0},ut=Oe.offsetDelta={x:it.x,y:it.y}),Ue.deltaX=Nt.x+(it.x-ut.x),Ue.deltaY=Nt.y+(it.y-ut.y)}(it,Ue),Ue.offsetDirection=Ge(Ue.deltaX,Ue.deltaY);var ln=ce(Ue.deltaTime,Ue.deltaX,Ue.deltaY);Ue.overallVelocityX=ln.x,Ue.overallVelocityY=ln.y,Ue.overallVelocity=L(ln.x)>L(ln.y)?ln.x:ln.y,Ue.scale=Kn?function cn(Oe,Ue){return Ze(Ue[0],Ue[1],Je)/Ze(Oe[0],Oe[1],Je)}(Kn.pointers,ut):1,Ue.rotation=Kn?function Xt(Oe,Ue){return ct(Ue[1],Ue[0],Je)+ct(Oe[1],Oe[0],Je)}(Kn.pointers,ut):0,Ue.maxPointers=it.prevInput?Ue.pointers.length>it.prevInput.maxPointers?Ue.pointers.length:it.prevInput.maxPointers:Ue.pointers.length,function Re(Oe,Ue){var Nt,Gt,Kn,Ar,it=Oe.lastInterval||Ue,ut=Ue.timeStamp-it.timeStamp;if(Ue.eventType!=Fe&&(ut>z||it.velocity===P)){var Sn=Ue.deltaX-it.deltaX,ln=Ue.deltaY-it.deltaY,ro=ce(ut,Sn,ln);Gt=ro.x,Kn=ro.y,Nt=L(ro.x)>L(ro.y)?ro.x:ro.y,Ar=Ge(Sn,ln),Oe.lastInterval=Ue}else Nt=it.velocity,Gt=it.velocityX,Kn=it.velocityY,Ar=it.direction;Ue.velocity=Nt,Ue.velocityX=Gt,Ue.velocityY=Kn,Ue.direction=Ar}(it,Ue);var ro=Oe.element;W(Ue.srcEvent.target,ro)&&(ro=Ue.srcEvent.target),Ue.target=ro}(Oe,it),Oe.emit("hammer.input",it),Oe.recognize(it),Oe.session.prevInput=it}function J(Oe){for(var Ue=[],it=0;it<Oe.pointers.length;)Ue[it]={clientX:F(Oe.pointers[it].clientX),clientY:F(Oe.pointers[it].clientY)},it++;return{timeStamp:j(),pointers:Ue,center:S(Ue),deltaX:Oe.deltaX,deltaY:Oe.deltaY}}function S(Oe){var Ue=Oe.length;if(1===Ue)return{x:F(Oe[0].clientX),y:F(Oe[0].clientY)};for(var it=0,ut=0,Nt=0;Nt<Ue;)it+=Oe[Nt].clientX,ut+=Oe[Nt].clientY,Nt++;return{x:F(it/Ue),y:F(ut/Ue)}}function ce(Oe,Ue,it){return{x:Ue/Oe||0,y:it/Oe||0}}function Ge(Oe,Ue){return Oe===Ue?Ke:L(Oe)>=L(Ue)?Oe<0?fe:ee:Ue<0?G:R}function Ze(Oe,Ue,it){it||(it=ze);var ut=Ue[it[0]]-Oe[it[0]],Nt=Ue[it[1]]-Oe[it[1]];return Math.sqrt(ut*ut+Nt*Nt)}function ct(Oe,Ue,it){return it||(it=ze),180*Math.atan2(Ue[it[1]]-Oe[it[1]],Ue[it[0]]-Oe[it[0]])/Math.PI}ot.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(Ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&he(this.element,this.evEl,this.domHandler),this.evTarget&&he(this.target,this.evTarget,this.domHandler),this.evWin&&he(Ne(this.element),this.evWin,this.domHandler)}};var Yn={mousedown:O,mousemove:2,mouseup:H},Xn="mousedown",bn="mousemove mouseup";function As(){this.evEl=Xn,this.evWin=bn,this.pressed=!1,ot.apply(this,arguments)}q(As,ot,{handler:function(Ue){var it=Yn[Ue.type];it&O&&0===Ue.button&&(this.pressed=!0),2&it&&1!==Ue.which&&(it=H),this.pressed&&(it&H&&(this.pressed=!1),this.callback(this.manager,it,{pointers:[Ue],changedPointers:[Ue],pointerType:We,srcEvent:Ue}))}});var Yo={pointerdown:O,pointermove:2,pointerup:H,pointercancel:Fe,pointerout:Fe},Ns={2:qe,3:"pen",4:We,5:"kinect"},$i="pointerdown",ts="pointermove pointerup pointercancel";function So(){this.evEl=$i,this.evWin=ts,ot.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b.MSPointerEvent&&!b.PointerEvent&&($i="MSPointerDown",ts="MSPointerMove MSPointerUp MSPointerCancel"),q(So,ot,{handler:function(Ue){var it=this.store,ut=!1,Nt=Ue.type.toLowerCase().replace("ms",""),Gt=Yo[Nt],Kn=Ns[Ue.pointerType]||Ue.pointerType,Ar=Kn==qe,Sn=we(it,Ue.pointerId,"pointerId");Gt&O&&(0===Ue.button||Ar)?Sn<0&&(it.push(Ue),Sn=it.length-1):Gt&(H|Fe)&&(ut=!0),!(Sn<0)&&(it[Sn]=Ue,this.callback(this.manager,Gt,{pointers:it,changedPointers:[Ue],pointerType:Kn,srcEvent:Ue}),ut&&it.splice(Sn,1))}});var Ko={touchstart:O,touchmove:2,touchend:H,touchcancel:Fe};function gu(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,ot.apply(this,arguments)}function Nh(Oe,Ue){var it=Ie(Oe.touches),ut=Ie(Oe.changedTouches);return Ue&(H|Fe)&&(it=De(it.concat(ut),"identifier",!0)),[it,ut]}q(gu,ot,{handler:function(Ue){var it=Ko[Ue.type];if(it===O&&(this.started=!0),this.started){var ut=Nh.call(this,Ue,it);it&(H|Fe)&&ut[0].length-ut[1].length==0&&(this.started=!1),this.callback(this.manager,it,{pointers:ut[0],changedPointers:ut[1],pointerType:qe,srcEvent:Ue})}}});var Fh={touchstart:O,touchmove:2,touchend:H,touchcancel:Fe},Qc="touchstart touchmove touchend touchcancel";function el(){this.evTarget=Qc,this.targetIds={},ot.apply(this,arguments)}function Ua(Oe,Ue){var it=Ie(Oe.touches),ut=this.targetIds;if(Ue&(2|O)&&1===it.length)return ut[it[0].identifier]=!0,[it,it];var Nt,Gt,Kn=Ie(Oe.changedTouches),Ar=[],Sn=this.target;if(Gt=it.filter(function(ln){return W(ln.target,Sn)}),Ue===O)for(Nt=0;Nt<Gt.length;)ut[Gt[Nt].identifier]=!0,Nt++;for(Nt=0;Nt<Kn.length;)ut[Kn[Nt].identifier]&&Ar.push(Kn[Nt]),Ue&(H|Fe)&&delete ut[Kn[Nt].identifier],Nt++;return Ar.length?[De(Gt.concat(Ar),"identifier",!0),Ar]:void 0}q(el,ot,{handler:function(Ue){var it=Fh[Ue.type],ut=Ua.call(this,Ue,it);ut&&this.callback(this.manager,it,{pointers:ut[0],changedPointers:ut[1],pointerType:qe,srcEvent:Ue})}});var td=2500;function tl(){ot.apply(this,arguments);var Oe=V(this.handler,this);this.touch=new el(this.manager,Oe),this.mouse=new As(this.manager,Oe),this.primaryTouch=null,this.lastTouches=[]}function _u(Oe,Ue){Oe&O?(this.primaryTouch=Ue.changedPointers[0].identifier,id.call(this,Ue)):Oe&(H|Fe)&&id.call(this,Ue)}function id(Oe){var Ue=Oe.changedPointers[0];if(Ue.identifier===this.primaryTouch){var it={x:Ue.clientX,y:Ue.clientY};this.lastTouches.push(it);var ut=this.lastTouches;setTimeout(function(){var Gt=ut.indexOf(it);Gt>-1&&ut.splice(Gt,1)},td)}}function bu(Oe){for(var Ue=Oe.srcEvent.clientX,it=Oe.srcEvent.clientY,ut=0;ut<this.lastTouches.length;ut++){var Nt=this.lastTouches[ut],Gt=Math.abs(Ue-Nt.x),Kn=Math.abs(it-Nt.y);if(Gt<=25&&Kn<=25)return!0}return!1}q(tl,ot,{handler:function(Ue,it,ut){var Gt=ut.pointerType==We;if(!(Gt&&ut.sourceCapabilities&&ut.sourceCapabilities.firesTouchEvents)){if(ut.pointerType==qe)_u.call(this,it,ut);else if(Gt&&bu.call(this,ut))return;this.callback(Ue,it,ut)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var nl=et(y.style,"touchAction"),rd=nl!==P,il="compute",rl="manipulation",qo="none",ja="pan-x",Va="pan-y",Ha=function Me(){if(!rd)return!1;var Oe={},Ue=b.CSS&&b.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(it){Oe[it]=!Ue||b.CSS.supports("touch-action",it)}),Oe}();function Bs(Oe,Ue){this.manager=Oe,this.set(Ue)}Bs.prototype={set:function(Oe){Oe==il&&(Oe=this.compute()),rd&&this.manager.element.style&&Ha[Oe]&&(this.manager.element.style[nl]=Oe),this.actions=Oe.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Oe=[];return Y(this.manager.recognizers,function(Ue){x(Ue.options.enable,[Ue])&&(Oe=Oe.concat(Ue.getTouchAction()))}),function be(Oe){if(Te(Oe,qo))return qo;var Ue=Te(Oe,ja),it=Te(Oe,Va);return Ue&&it?qo:Ue||it?Ue?ja:Va:Te(Oe,rl)?rl:"auto"}(Oe.join(" "))},preventDefaults:function(Oe){var Ue=Oe.srcEvent,it=Oe.offsetDirection;if(!this.manager.session.prevented){var ut=this.actions,Nt=Te(ut,qo)&&!Ha[qo],Gt=Te(ut,Va)&&!Ha[Va],Kn=Te(ut,ja)&&!Ha[ja];if(Nt&&1===Oe.pointers.length&&Oe.distance<2&&Oe.deltaTime<250)return;return Kn&&Gt||!(Nt||Gt&&it&I||Kn&&it&ue)?void 0:this.preventSrc(Ue)}Ue.preventDefault()},preventSrc:function(Oe){this.manager.session.prevented=!0,Oe.preventDefault()}};var Ee=1;function xt(Oe){this.options=K({},this.defaults,Oe||{}),this.id=function Ce(){return Ye++}(),this.manager=null,this.options.enable=B(this.options.enable,!0),this.state=Ee,this.simultaneous={},this.requireFail=[]}function It(Oe){return 16&Oe?"cancel":8&Oe?"end":4&Oe?"move":2&Oe?"start":""}function Vt(Oe){return Oe==R?"down":Oe==G?"up":Oe==fe?"left":Oe==ee?"right":""}function sn(Oe,Ue){var it=Ue.manager;return it?it.get(Oe):Oe}function vn(){xt.apply(this,arguments)}function fs(){vn.apply(this,arguments),this.pX=null,this.pY=null}function kr(){vn.apply(this,arguments)}function Us(){xt.apply(this,arguments),this._timer=null,this._input=null}function sl(){vn.apply(this,arguments)}function pa(){vn.apply(this,arguments)}function Pr(){xt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function js(Oe,Ue){return(Ue=Ue||{}).recognizers=B(Ue.recognizers,js.defaults.preset),new Xi(Oe,Ue)}function Xi(Oe,Ue){this.options=K({},js.defaults,Ue||{}),this.options.inputTarget=this.options.inputTarget||Oe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Oe,this.input=function kt(Oe){return new(Oe.options.inputClass||(me?So:Se?el:He?tl:As))(Oe,_t)}(this),this.touchAction=new Bs(this,this.options.touchAction),$t(this,!0),Y(this.options.recognizers,function(it){var ut=this.add(new it[0](it[1]));it[2]&&ut.recognizeWith(it[2]),it[3]&&ut.requireFailure(it[3])},this)}function $t(Oe,Ue){var ut,it=Oe.element;it.style&&(Y(Oe.options.cssProps,function(Nt,Gt){ut=et(it.style,Gt),Ue?(Oe.oldCssProps[ut]=it.style[ut],it.style[ut]=Nt):it.style[ut]=Oe.oldCssProps[ut]||""}),Ue||(Oe.oldCssProps={}))}xt.prototype={defaults:{},set:function(Oe){return K(this.options,Oe),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Oe){if(C(Oe,"recognizeWith",this))return this;var Ue=this.simultaneous;return Ue[(Oe=sn(Oe,this)).id]||(Ue[Oe.id]=Oe,Oe.recognizeWith(this)),this},dropRecognizeWith:function(Oe){return C(Oe,"dropRecognizeWith",this)||(Oe=sn(Oe,this),delete this.simultaneous[Oe.id]),this},requireFailure:function(Oe){if(C(Oe,"requireFailure",this))return this;var Ue=this.requireFail;return-1===we(Ue,Oe=sn(Oe,this))&&(Ue.push(Oe),Oe.requireFailure(this)),this},dropRequireFailure:function(Oe){if(C(Oe,"dropRequireFailure",this))return this;Oe=sn(Oe,this);var Ue=we(this.requireFail,Oe);return Ue>-1&&this.requireFail.splice(Ue,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Oe){return!!this.simultaneous[Oe.id]},emit:function(Oe){var Ue=this,it=this.state;function ut(Nt){Ue.manager.emit(Nt,Oe)}it<8&&ut(Ue.options.event+It(it)),ut(Ue.options.event),Oe.additionalEvent&&ut(Oe.additionalEvent),it>=8&&ut(Ue.options.event+It(it))},tryEmit:function(Oe){if(this.canEmit())return this.emit(Oe);this.state=32},canEmit:function(){for(var Oe=0;Oe<this.requireFail.length;){if(!(this.requireFail[Oe].state&(32|Ee)))return!1;Oe++}return!0},recognize:function(Oe){var Ue=K({},Oe);if(!x(this.options.enable,[this,Ue]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Ee),this.state=this.process(Ue),30&this.state&&this.tryEmit(Ue)},process:function(Oe){},getTouchAction:function(){},reset:function(){}},q(vn,xt,{defaults:{pointers:1},attrTest:function(Oe){var Ue=this.options.pointers;return 0===Ue||Oe.pointers.length===Ue},process:function(Oe){var Ue=this.state,it=Oe.eventType,ut=6&Ue,Nt=this.attrTest(Oe);return ut&&(it&Fe||!Nt)?16|Ue:ut||Nt?it&H?8|Ue:2&Ue?4|Ue:2:32}}),q(fs,vn,{defaults:{event:"pan",threshold:10,pointers:1,direction:ge},getTouchAction:function(){var Oe=this.options.direction,Ue=[];return Oe&I&&Ue.push(Va),Oe&ue&&Ue.push(ja),Ue},directionTest:function(Oe){var Ue=this.options,it=!0,ut=Oe.distance,Nt=Oe.direction,Gt=Oe.deltaX,Kn=Oe.deltaY;return Nt&Ue.direction||(Ue.direction&I?(Nt=0===Gt?Ke:Gt<0?fe:ee,it=Gt!=this.pX,ut=Math.abs(Oe.deltaX)):(Nt=0===Kn?Ke:Kn<0?G:R,it=Kn!=this.pY,ut=Math.abs(Oe.deltaY))),Oe.direction=Nt,it&&ut>Ue.threshold&&Nt&Ue.direction},attrTest:function(Oe){return vn.prototype.attrTest.call(this,Oe)&&(2&this.state||!(2&this.state)&&this.directionTest(Oe))},emit:function(Oe){this.pX=Oe.deltaX,this.pY=Oe.deltaY;var Ue=Vt(Oe.direction);Ue&&(Oe.additionalEvent=this.options.event+Ue),this._super.emit.call(this,Oe)}}),q(kr,vn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[qo]},attrTest:function(Oe){return this._super.attrTest.call(this,Oe)&&(Math.abs(Oe.scale-1)>this.options.threshold||2&this.state)},emit:function(Oe){1!==Oe.scale&&(Oe.additionalEvent=this.options.event+(Oe.scale<1?"in":"out")),this._super.emit.call(this,Oe)}}),q(Us,xt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Oe){var Ue=this.options,it=Oe.pointers.length===Ue.pointers,ut=Oe.distance<Ue.threshold,Nt=Oe.deltaTime>Ue.time;if(this._input=Oe,!ut||!it||Oe.eventType&(H|Fe)&&!Nt)this.reset();else if(Oe.eventType&O)this.reset(),this._timer=oe(function(){this.state=8,this.tryEmit()},Ue.time,this);else if(Oe.eventType&H)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Oe){8===this.state&&(Oe&&Oe.eventType&H?this.manager.emit(this.options.event+"up",Oe):(this._input.timeStamp=j(),this.manager.emit(this.options.event,this._input)))}}),q(sl,vn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[qo]},attrTest:function(Oe){return this._super.attrTest.call(this,Oe)&&(Math.abs(Oe.rotation)>this.options.threshold||2&this.state)}}),q(pa,vn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:I|ue,pointers:1},getTouchAction:function(){return fs.prototype.getTouchAction.call(this)},attrTest:function(Oe){var it,Ue=this.options.direction;return Ue&(I|ue)?it=Oe.overallVelocity:Ue&I?it=Oe.overallVelocityX:Ue&ue&&(it=Oe.overallVelocityY),this._super.attrTest.call(this,Oe)&&Ue&Oe.offsetDirection&&Oe.distance>this.options.threshold&&Oe.maxPointers==this.options.pointers&&L(it)>this.options.velocity&&Oe.eventType&H},emit:function(Oe){var Ue=Vt(Oe.offsetDirection);Ue&&this.manager.emit(this.options.event+Ue,Oe),this.manager.emit(this.options.event,Oe)}}),q(Pr,xt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[rl]},process:function(Oe){var Ue=this.options,it=Oe.pointers.length===Ue.pointers,ut=Oe.distance<Ue.threshold,Nt=Oe.deltaTime<Ue.time;if(this.reset(),Oe.eventType&O&&0===this.count)return this.failTimeout();if(ut&&Nt&&it){if(Oe.eventType!=H)return this.failTimeout();var Gt=!this.pTime||Oe.timeStamp-this.pTime<Ue.interval,Kn=!this.pCenter||Ze(this.pCenter,Oe.center)<Ue.posThreshold;if(this.pTime=Oe.timeStamp,this.pCenter=Oe.center,Kn&&Gt?this.count+=1:this.count=1,this._input=Oe,0==this.count%Ue.taps)return this.hasRequireFailures()?(this._timer=oe(function(){this.state=8,this.tryEmit()},Ue.interval,this),2):8}return 32},failTimeout:function(){return this._timer=oe(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),js.VERSION="2.0.7",js.defaults={domEvents:!1,touchAction:il,enable:!0,inputTarget:null,inputClass:null,preset:[[sl,{enable:!1}],[kr,{enable:!1},["rotate"]],[pa,{direction:I}],[fs,{direction:I},["swipe"]],[Pr],[Pr,{event:"doubletap",taps:2},["tap"]],[Us]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Xi.prototype={set:function(Oe){return K(this.options,Oe),Oe.touchAction&&this.touchAction.update(),Oe.inputTarget&&(this.input.destroy(),this.input.target=Oe.inputTarget,this.input.init()),this},stop:function(Oe){this.session.stopped=Oe?2:1},recognize:function(Oe){var Ue=this.session;if(!Ue.stopped){this.touchAction.preventDefaults(Oe);var it,ut=this.recognizers,Nt=Ue.curRecognizer;(!Nt||Nt&&8&Nt.state)&&(Nt=Ue.curRecognizer=null);for(var Gt=0;Gt<ut.length;)it=ut[Gt],2===Ue.stopped||Nt&&it!=Nt&&!it.canRecognizeWith(Nt)?it.reset():it.recognize(Oe),!Nt&&14&it.state&&(Nt=Ue.curRecognizer=it),Gt++}},get:function(Oe){if(Oe instanceof xt)return Oe;for(var Ue=this.recognizers,it=0;it<Ue.length;it++)if(Ue[it].options.event==Oe)return Ue[it];return null},add:function(Oe){if(C(Oe,"add",this))return this;var Ue=this.get(Oe.options.event);return Ue&&this.remove(Ue),this.recognizers.push(Oe),Oe.manager=this,this.touchAction.update(),Oe},remove:function(Oe){if(C(Oe,"remove",this))return this;if(Oe=this.get(Oe)){var Ue=this.recognizers,it=we(Ue,Oe);-1!==it&&(Ue.splice(it,1),this.touchAction.update())}return this},on:function(Oe,Ue){if(Oe!==P&&Ue!==P){var it=this.handlers;return Y(de(Oe),function(ut){it[ut]=it[ut]||[],it[ut].push(Ue)}),this}},off:function(Oe,Ue){if(Oe!==P){var it=this.handlers;return Y(de(Oe),function(ut){Ue?it[ut]&&it[ut].splice(we(it[ut],Ue),1):delete it[ut]}),this}},emit:function(Oe,Ue){this.options.domEvents&&function io(Oe,Ue){var it=k.createEvent("Event");it.initEvent(Oe,!0,!0),it.gesture=Ue,Ue.target.dispatchEvent(it)}(Oe,Ue);var it=this.handlers[Oe]&&this.handlers[Oe].slice();if(it&&it.length){Ue.type=Oe,Ue.preventDefault=function(){Ue.srcEvent.preventDefault()};for(var ut=0;ut<it.length;)it[ut](Ue),ut++}},destroy:function(){this.element&&$t(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},K(js,{INPUT_START:O,INPUT_MOVE:2,INPUT_END:H,INPUT_CANCEL:Fe,STATE_POSSIBLE:Ee,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Ke,DIRECTION_LEFT:fe,DIRECTION_RIGHT:ee,DIRECTION_UP:G,DIRECTION_DOWN:R,DIRECTION_HORIZONTAL:I,DIRECTION_VERTICAL:ue,DIRECTION_ALL:ge,Manager:Xi,Input:ot,TouchAction:Bs,TouchInput:el,MouseInput:As,PointerEventInput:So,TouchMouseInput:tl,SingleTouchInput:gu,Recognizer:xt,AttrRecognizer:vn,Tap:Pr,Pan:fs,Swipe:pa,Pinch:kr,Rotate:sl,Press:Us,on:D,off:he,each:Y,merge:te,extend:re,assign:K,inherit:q,bindFn:V,prefixed:et}),(typeof b<"u"?b:typeof self<"u"?self:{}).Hammer=js,(E=function(){return js}.call(Z,g,Z,ne))!==P&&(ne.exports=E)}(window,document)},2601:(ne,Z)=>{Z.read=function(g,E,b,k,A){var P,_,y=8*A-k-1,M=(1<<y)-1,F=M>>1,L=-7,j=b?A-1:0,oe=b?-1:1,C=g[E+j];for(j+=oe,P=C&(1<<-L)-1,C>>=-L,L+=y;L>0;P=256*P+g[E+j],j+=oe,L-=8);for(_=P&(1<<-L)-1,P>>=-L,L+=k;L>0;_=256*_+g[E+j],j+=oe,L-=8);if(0===P)P=1-F;else{if(P===M)return _?NaN:1/0*(C?-1:1);_+=Math.pow(2,k),P-=F}return(C?-1:1)*_*Math.pow(2,P-k)},Z.write=function(g,E,b,k,A,P){var _,y,M,F=8*P-A-1,L=(1<<F)-1,j=L>>1,oe=23===A?Math.pow(2,-24)-Math.pow(2,-77):0,C=k?0:P-1,Y=k?1:-1,le=E<0||0===E&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(y=isNaN(E)?1:0,_=L):(_=Math.floor(Math.log(E)/Math.LN2),E*(M=Math.pow(2,-_))<1&&(_--,M*=2),(E+=_+j>=1?oe/M:oe*Math.pow(2,1-j))*M>=2&&(_++,M/=2),_+j>=L?(y=0,_=L):_+j>=1?(y=(E*M-1)*Math.pow(2,A),_+=j):(y=E*Math.pow(2,j-1)*Math.pow(2,A),_=0));A>=8;g[b+C]=255&y,C+=Y,y/=256,A-=8);for(_=_<<A|y,F+=A;F>0;g[b+C]=255&_,C+=Y,_/=256,F-=8);g[b+C-Y]|=128*le}},6698:ne=>{ne.exports="function"==typeof Object.create?function(g,E){E&&(g.super_=E,g.prototype=Object.create(E.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,E){if(E){g.super_=E;var b=function(){};b.prototype=E.prototype,g.prototype=new b,g.prototype.constructor=g}}},4198:(ne,Z,g)=>{"use strict";var E=g(7156).default;const{isArray:b,isObject:k,isString:A}=g(8254),{asArray:P}=g(3521),{prependBase:_}=g(2651),y=g(1874),M=g(1252);function L(oe){throw new y("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:oe})}function j({context:oe,base:C}){if(!oe)return;const Y=oe["@context"];if(A(Y))oe["@context"]=_(C,Y);else if(b(Y))for(let le=0;le<Y.length;++le){const K=Y[le];A(K)?Y[le]=_(C,K):k(K)&&j({context:{"@context":K},base:C})}else if(k(Y))for(const le in Y)j({context:Y[le],base:C})}ne.exports=class{constructor({sharedCache:C}){this.perOpCache=new Map,this.sharedCache=C}resolve({activeCtx:C,context:Y,documentLoader:le,base:K,cycles:re=new Set}){var te=this;return E(function*(){Y&&k(Y)&&Y["@context"]&&(Y=Y["@context"]),Y=P(Y);const q=[];for(const V of Y){if(A(V)){let D=te._get(V);D||(D=yield te._resolveRemoteContext({activeCtx:C,url:V,documentLoader:le,base:K,cycles:re})),b(D)?q.push(...D):q.push(D);continue}if(null===V){q.push(new M({document:null}));continue}k(V)||L(Y);const x=JSON.stringify(V);let B=te._get(x);B||(B=new M({document:V}),te._cacheResolvedContext({key:x,resolved:B,tag:"static"})),q.push(B)}return q})()}_get(C){let Y=this.perOpCache.get(C);if(!Y){const le=this.sharedCache.get(C);le&&(Y=le.get("static"),Y&&this.perOpCache.set(C,Y))}return Y}_cacheResolvedContext({key:C,resolved:Y,tag:le}){if(this.perOpCache.set(C,Y),void 0!==le){let K=this.sharedCache.get(C);K||(K=new Map,this.sharedCache.set(C,K)),K.set(le,Y)}return Y}_resolveRemoteContext({activeCtx:C,url:Y,documentLoader:le,base:K,cycles:re}){var te=this;return E(function*(){Y=_(K,Y);const{context:q,remoteDoc:V}=yield te._fetchContext({activeCtx:C,url:Y,documentLoader:le,cycles:re});j({context:q,base:K=V.documentUrl||Y});const x=yield te.resolve({activeCtx:C,context:q,documentLoader:le,base:K,cycles:re});return te._cacheResolvedContext({key:Y,resolved:x,tag:V.tag}),x})()}_fetchContext({activeCtx:C,url:Y,documentLoader:le,cycles:K}){return E(function*(){if(K.size>10)throw new y("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===C.processingMode?"loading remote context failed":"context overflow",max:10});if(K.has(Y))throw new y("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===C.processingMode?"recursive context inclusion":"context overflow",url:Y});let re,te;K.add(Y);try{te=yield le(Y),re=te.document||null,A(re)&&(re=JSON.parse(re))}catch(q){throw new y("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:Y,cause:q})}if(!k(re))throw new y("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:Y});return re="@context"in re?{"@context":re["@context"]}:{"@context":{}},te.contextUrl&&(b(re["@context"])||(re["@context"]=[re["@context"]]),re["@context"].push(te.contextUrl)),{context:re,remoteDoc:te}})()}}},1874:ne=>{"use strict";ne.exports=class extends Error{constructor(g="An unspecified JSON-LD error occurred.",E="jsonld.Error",b={}){super(g),this.name=E,this.message=g,this.details=b}}},1828:ne=>{"use strict";ne.exports=Z=>{class g{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(g,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(g.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:g}),g.compact=function(E,b){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Z.compact(E,b)},g.expand=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Z.expand(E)},g.flatten=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Z.flatten(E)},g}},7260:(ne,Z,g)=>{"use strict";ne.exports=g(1986).NQuads},4044:(ne,Z,g)=>{"use strict";var E=g(7156).default;ne.exports=class{constructor(){this._requests={}}wrapLoader(k){const A=this;return A._loader=k,function(){return A.add.apply(A,arguments)}}add(k){var A=this;return E(function*(){let P=A._requests[k];if(P)return Promise.resolve(P);P=A._requests[k]=A._loader(k);try{return yield P}finally{delete A._requests[k]}})()}}},1252:(ne,Z,g)=>{"use strict";const E=g(1072);ne.exports=class{constructor({document:A}){this.document=A,this.cache=new E({max:10})}getProcessed(A){return this.cache.get(A)}setProcessed(A,P){this.cache.set(A,P)}}},8809:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),{isArray:k,isObject:A,isString:P,isUndefined:_}=g(8254),{isList:y,isValue:M,isGraph:F,isSimpleGraph:L,isSubjectReference:j}=g(543),{expandIri:oe,getContextValue:C,isKeyword:Y,process:le,processingMode:K}=g(9611),{removeBase:re,prependBase:te}=g(2651),{REGEX_KEYWORD:q,addValue:V,asArray:x,compareShortestLeast:B}=g(3521),D={};function W(Te,de,we){if("@nest"!==oe(Te,de,{vocab:!0},we))throw new b("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ne.exports=D,D.compact=function(){var Te=E(function*({activeCtx:de,activeProperty:we=null,element:Ie,options:De={}}){if(k(Ie)){let Ye=[];for(let Ce=0;Ce<Ie.length;++Ce){const Ne=yield D.compact({activeCtx:de,activeProperty:we,element:Ie[Ce],options:De});null!==Ne&&Ye.push(Ne)}return De.compactArrays&&1===Ye.length&&0===(C(de,we,"@container")||[]).length&&(Ye=Ye[0]),Ye}const et=C(de,we,"@context");if(_(et)||(de=yield le({activeCtx:de,localCtx:et,propagate:!0,overrideProtected:!0,options:De})),A(Ie)){if(De.link&&"@id"in Ie&&De.link.hasOwnProperty(Ie["@id"])){const qe=De.link[Ie["@id"]];for(let lt=0;lt<qe.length;++lt)if(qe[lt].expanded===Ie)return qe[lt].compacted}if(M(Ie)||j(Ie)){const qe=D.compactValue({activeCtx:de,activeProperty:we,value:Ie,options:De});return De.link&&j(Ie)&&(De.link.hasOwnProperty(Ie["@id"])||(De.link[Ie["@id"]]=[]),De.link[Ie["@id"]].push({expanded:Ie,compacted:qe})),qe}if(y(Ie)&&(C(de,we,"@container")||[]).includes("@list"))return D.compact({activeCtx:de,activeProperty:we,element:Ie["@list"],options:De});const Ye="@reverse"===we,Ce={},Ne=de;!M(Ie)&&!j(Ie)&&(de=de.revertToPreviousContext());const ke=C(Ne,we,"@context");_(ke)||(de=yield le({activeCtx:de,localCtx:ke,propagate:!0,overrideProtected:!0,options:De})),De.link&&"@id"in Ie&&(De.link.hasOwnProperty(Ie["@id"])||(De.link[Ie["@id"]]=[]),De.link[Ie["@id"]].push({expanded:Ie,compacted:Ce}));let He=Ie["@type"]||[];He.length>1&&(He=Array.from(He).sort());const me=de;for(const qe of He){const lt=D.compactIri({activeCtx:me,iri:qe,relativeTo:{vocab:!0}}),We=C(Ne,lt,"@context");_(We)||(de=yield le({activeCtx:de,localCtx:We,options:De,propagate:!1}))}const Se=Object.keys(Ie).sort();for(const qe of Se){const lt=Ie[qe];if("@id"!==qe)if("@type"!==qe)if("@reverse"!==qe)if("@preserve"!==qe)if("@index"!==qe)if("@graph"!==qe&&"@list"!==qe&&"@included"!==qe&&Y(qe)){const We=D.compactIri({activeCtx:de,iri:qe,relativeTo:{vocab:!0}});V(Ce,We,lt)}else{if(!k(lt))throw new b("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===lt.length){const We=D.compactIri({activeCtx:de,iri:qe,value:lt,relativeTo:{vocab:!0},reverse:Ye}),_e=de.mappings.has(We)?de.mappings.get(We)["@nest"]:null;let z=Ce;_e&&(W(de,_e,De),A(Ce[_e])||(Ce[_e]={}),z=Ce[_e]),V(z,We,lt,{propertyIsArray:!0})}for(const We of lt){const _e=D.compactIri({activeCtx:de,iri:qe,value:We,relativeTo:{vocab:!0},reverse:Ye}),z=de.mappings.has(_e)?de.mappings.get(_e)["@nest"]:null;let O=Ce;z&&(W(de,z,De),A(Ce[z])||(Ce[z]={}),O=Ce[z]);const ae=C(de,_e,"@container")||[],H=F(We),Fe=y(We);let Ke;Fe?Ke=We["@list"]:H&&(Ke=We["@graph"]);let fe=yield D.compact({activeCtx:de,activeProperty:_e,element:Fe||H?Ke:We,options:De});if(Fe){if(k(fe)||(fe=[fe]),ae.includes("@list")){V(O,_e,fe,{valueIsArray:!0,allowDuplicate:!0});continue}fe={[D.compactIri({activeCtx:de,iri:"@list",relativeTo:{vocab:!0}})]:fe},"@index"in We&&(fe[D.compactIri({activeCtx:de,iri:"@index",relativeTo:{vocab:!0}})]=We["@index"])}if(H)if(ae.includes("@graph")&&(ae.includes("@id")||ae.includes("@index")&&L(We))){let ee;O.hasOwnProperty(_e)?ee=O[_e]:O[_e]=ee={};const G=(ae.includes("@id")?We["@id"]:We["@index"])||D.compactIri({activeCtx:de,iri:"@none",relativeTo:{vocab:!0}});V(ee,G,fe,{propertyIsArray:!De.compactArrays||ae.includes("@set")})}else ae.includes("@graph")&&L(We)?(k(fe)&&fe.length>1&&(fe={"@included":fe}),V(O,_e,fe,{propertyIsArray:!De.compactArrays||ae.includes("@set")})):(k(fe)&&1===fe.length&&De.compactArrays&&(fe=fe[0]),fe={[D.compactIri({activeCtx:de,iri:"@graph",relativeTo:{vocab:!0}})]:fe},"@id"in We&&(fe[D.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}})]=We["@id"]),"@index"in We&&(fe[D.compactIri({activeCtx:de,iri:"@index",relativeTo:{vocab:!0}})]=We["@index"]),V(O,_e,fe,{propertyIsArray:!De.compactArrays||ae.includes("@set")}));else if(ae.includes("@language")||ae.includes("@index")||ae.includes("@id")||ae.includes("@type")){let ee,G;if(O.hasOwnProperty(_e)?ee=O[_e]:O[_e]=ee={},ae.includes("@language"))M(fe)&&(fe=fe["@value"]),G=We["@language"];else if(ae.includes("@index")){const R=C(de,_e,"@index")||"@index",I=D.compactIri({activeCtx:de,iri:R,relativeTo:{vocab:!0}});if("@index"===R)G=We["@index"],delete fe[I];else{let ue;if([G,...ue]=x(fe[R]||[]),P(G))switch(ue.length){case 0:delete fe[R];break;case 1:fe[R]=ue[0];break;default:fe[R]=ue}else G=null}}else if(ae.includes("@id")){const R=D.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}});G=fe[R],delete fe[R]}else if(ae.includes("@type")){const R=D.compactIri({activeCtx:de,iri:"@type",relativeTo:{vocab:!0}});let I;switch([G,...I]=x(fe[R]||[]),I.length){case 0:delete fe[R];break;case 1:fe[R]=I[0];break;default:fe[R]=I}1===Object.keys(fe).length&&"@id"in We&&(fe=yield D.compact({activeCtx:de,activeProperty:_e,element:{"@id":We["@id"]},options:De}))}G||(G=D.compactIri({activeCtx:de,iri:"@none",relativeTo:{vocab:!0}})),V(ee,G,fe,{propertyIsArray:ae.includes("@set")})}else{const ee=!De.compactArrays||ae.includes("@set")||ae.includes("@list")||k(fe)&&0===fe.length||"@list"===qe||"@graph"===qe;V(O,_e,fe,{propertyIsArray:ee})}}}else{if((C(de,we,"@container")||[]).includes("@index"))continue;const _e=D.compactIri({activeCtx:de,iri:qe,relativeTo:{vocab:!0}});V(Ce,_e,lt)}else{const We=yield D.compact({activeCtx:de,activeProperty:we,element:lt,options:De});k(We)&&0===We.length||V(Ce,qe,We)}else{const We=yield D.compact({activeCtx:de,activeProperty:"@reverse",element:lt,options:De});for(const _e in We)if(de.mappings.has(_e)&&de.mappings.get(_e).reverse){const z=We[_e],ae=(C(de,_e,"@container")||[]).includes("@set")||!De.compactArrays;V(Ce,_e,z,{propertyIsArray:ae}),delete We[_e]}if(Object.keys(We).length>0){const _e=D.compactIri({activeCtx:de,iri:qe,relativeTo:{vocab:!0}});V(Ce,_e,We)}}else{let We=x(lt).map(H=>D.compactIri({activeCtx:Ne,iri:H,relativeTo:{vocab:!0}}));1===We.length&&(We=We[0]);const _e=D.compactIri({activeCtx:de,iri:"@type",relativeTo:{vocab:!0}}),ae=(C(de,_e,"@container")||[]).includes("@set")&&K(de,1.1)||k(We)&&0===lt.length;V(Ce,_e,We,{propertyIsArray:ae})}else{let We=x(lt).map(z=>D.compactIri({activeCtx:de,iri:z,relativeTo:{vocab:!1},base:De.base}));1===We.length&&(We=We[0]),Ce[D.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}})]=We}}return Ce}return Ie});return function(de){return Te.apply(this,arguments)}}(),D.compactIri=({activeCtx:Te,iri:de,value:we=null,relativeTo:Ie={vocab:!1},reverse:De=!1,base:et=null})=>{if(null===de)return de;Te.isPropertyTermScoped&&Te.previousContext&&(Te=Te.previousContext);const Ye=Te.getInverse();if(Y(de)&&de in Ye&&"@none"in Ye[de]&&"@type"in Ye[de]["@none"]&&"@none"in Ye[de]["@none"]["@type"])return Ye[de]["@none"]["@type"]["@none"];if(Ie.vocab&&de in Ye){const me=Te["@language"]||"@none",Se=[];A(we)&&"@index"in we&&!("@graph"in we)&&Se.push("@index","@index@set"),A(we)&&"@preserve"in we&&(we=we["@preserve"][0]),F(we)?("@index"in we&&Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in we&&Se.push("@graph@id","@graph@id@set"),Se.push("@graph","@graph@set","@set"),"@index"in we||Se.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in we||Se.push("@graph@id","@graph@id@set")):A(we)&&!M(we)&&Se.push("@id","@id@set","@type","@set@type");let qe="@language",lt="@null";if(De)qe="@type",lt="@reverse",Se.push("@set");else if(y(we)){"@index"in we||Se.push("@list");const _e=we["@list"];if(0===_e.length)qe="@any",lt="@none";else{let z=0===_e.length?me:null,O=null;for(let ae=0;ae<_e.length;++ae){const H=_e[ae];let Fe="@none",Ke="@none";if(M(H)?"@direction"in H?Fe=`${(H["@language"]||"").toLowerCase()}_${H["@direction"]}`:"@language"in H?Fe=H["@language"].toLowerCase():"@type"in H?Ke=H["@type"]:Fe="@null":Ke="@id",null===z?z=Fe:Fe!==z&&M(H)&&(z="@none"),null===O?O=Ke:Ke!==O&&(O="@none"),"@none"===z&&"@none"===O)break}z=z||"@none",O=O||"@none","@none"!==O?(qe="@type",lt=O):lt=z}}else{if(M(we))if("@language"in we&&!("@index"in we)){Se.push("@language","@language@set"),lt=we["@language"];const _e=we["@direction"];_e&&(lt=`${lt}_${_e}`)}else"@direction"in we&&!("@index"in we)?lt=`_${we["@direction"]}`:"@type"in we&&(qe="@type",lt=we["@type"]);else qe="@type",lt="@id";Se.push("@set")}Se.push("@none"),A(we)&&!("@index"in we)&&Se.push("@index","@index@set"),M(we)&&1===Object.keys(we).length&&Se.push("@language","@language@set");const We=function he(Te,de,we,Ie,De,et){null===et&&(et="@null");const Ye=[];if(("@id"===et||"@reverse"===et)&&A(we)&&"@id"in we){"@reverse"===et&&Ye.push("@reverse");const Ne=D.compactIri({activeCtx:Te,iri:we["@id"],relativeTo:{vocab:!0}});Te.mappings.has(Ne)&&Te.mappings.get(Ne)&&Te.mappings.get(Ne)["@id"]===we["@id"]?Ye.push.apply(Ye,["@vocab","@id"]):Ye.push.apply(Ye,["@id","@vocab"])}else{Ye.push(et);const Ne=Ye.find(ke=>ke.includes("_"));Ne&&Ye.push(Ne.replace(/^[^_]+_/,"_"))}Ye.push("@none");const Ce=Te.inverse[de];for(const Ne of Ie){if(!(Ne in Ce))continue;const ke=Ce[Ne][De];for(const He of Ye)if(He in ke)return ke[He]}return null}(Te,de,we,Se,qe,lt);if(null!==We)return We}if(Ie.vocab&&"@vocab"in Te){const me=Te["@vocab"];if(0===de.indexOf(me)&&de!==me){const Se=de.substr(me.length);if(!Te.mappings.has(Se))return Se}}let Ce=null;const Ne=[];let ke=Te.fastCurieMap;const He=de.length-1;for(let me=0;me<He&&de[me]in ke;++me)ke=ke[de[me]],""in ke&&Ne.push(ke[""][0]);for(let me=Ne.length-1;me>=0;--me){const Se=Ne[me],qe=Se.terms;for(const lt of qe){const We=lt+":"+de.substr(Se.iri.length);Te.mappings.get(lt)._prefix&&(!Te.mappings.has(We)||null===we&&Te.mappings.get(We)["@id"]===de)&&(null===Ce||B(We,Ce)<0)&&(Ce=We)}}if(null!==Ce)return Ce;for(const[me,Se]of Te.mappings)if(Se&&Se._prefix&&de.startsWith(me+":"))throw new b(`Absolute IRI "${de}" confused with prefix "${me}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Te});if(!Ie.vocab){if("@base"in Te){if(Te["@base"]){const me=re(te(et,Te["@base"]),de);return q.test(me)?`./${me}`:me}return de}return re(et,de)}return de},D.compactValue=({activeCtx:Te,activeProperty:de,value:we,options:Ie})=>{if(M(we)){const Ce=C(Te,de,"@type"),Ne=C(Te,de,"@language"),ke=C(Te,de,"@direction"),He=C(Te,de,"@container")||[],me="@index"in we&&!He.includes("@index");if(!me&&"@none"!==Ce&&(we["@type"]===Ce||"@language"in we&&we["@language"]===Ne&&"@direction"in we&&we["@direction"]===ke||"@language"in we&&we["@language"]===Ne||"@direction"in we&&we["@direction"]===ke))return we["@value"];const Se=Object.keys(we).length,qe=1===Se||2===Se&&"@index"in we&&!me,lt="@language"in Te,We=P(we["@value"]),_e=Te.mappings.has(de)&&null===Te.mappings.get(de)["@language"];if(qe&&"@none"!==Ce&&(!lt||!We||_e))return we["@value"];const z={};return me&&(z[D.compactIri({activeCtx:Te,iri:"@index",relativeTo:{vocab:!0}})]=we["@index"]),"@type"in we?z[D.compactIri({activeCtx:Te,iri:"@type",relativeTo:{vocab:!0}})]=D.compactIri({activeCtx:Te,iri:we["@type"],relativeTo:{vocab:!0}}):"@language"in we&&(z[D.compactIri({activeCtx:Te,iri:"@language",relativeTo:{vocab:!0}})]=we["@language"]),"@direction"in we&&(z[D.compactIri({activeCtx:Te,iri:"@direction",relativeTo:{vocab:!0}})]=we["@direction"]),z[D.compactIri({activeCtx:Te,iri:"@value",relativeTo:{vocab:!0}})]=we["@value"],z}const De=oe(Te,de,{vocab:!0},Ie),et=C(Te,de,"@type"),Ye=D.compactIri({activeCtx:Te,iri:we["@id"],relativeTo:{vocab:"@vocab"===et},base:Ie.base});return"@id"===et||"@vocab"===et||"@graph"===De?Ye:{[D.compactIri({activeCtx:Te,iri:"@id",relativeTo:{vocab:!0}})]:Ye}}},6982:ne=>{"use strict";const Z="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g="http://www.w3.org/2001/XMLSchema#";ne.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Z,RDF_LIST:Z+"List",RDF_FIRST:Z+"first",RDF_REST:Z+"rest",RDF_NIL:Z+"nil",RDF_TYPE:Z+"type",RDF_PLAIN_LITERAL:Z+"PlainLiteral",RDF_XML_LITERAL:Z+"XMLLiteral",RDF_JSON_LITERAL:Z+"JSON",RDF_OBJECT:Z+"object",RDF_LANGSTRING:Z+"langString",XSD:g,XSD_BOOLEAN:g+"boolean",XSD_DOUBLE:g+"double",XSD_INTEGER:g+"integer",XSD_STRING:g+"string"}},9611:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(3521),k=g(1874),{isArray:A,isObject:P,isString:_,isUndefined:y}=g(8254),{isAbsolute:M,isRelative:F,prependBase:L}=g(2651),{handleEvent:j}=g(3855),{REGEX_BCP47:oe,REGEX_KEYWORD:C,asArray:Y,compareShortestLeast:le}=g(3521),K=new Map,te={};function q(x,B,D,he,W,Te){if(null===B||!_(B)||te.isKeyword(B))return B;if(B.match(C))return null;if(he&&he.hasOwnProperty(B)&&!0!==W.get(B)&&te.createTermDefinition({activeCtx:x,localCtx:he,term:B,defined:W,options:Te}),(D=D||{}).vocab){const we=x.mappings.get(B);if(null===we)return null;if(P(we)&&"@id"in we)return we["@id"]}const de=B.indexOf(":");if(de>0){const we=B.substr(0,de),Ie=B.substr(de+1);if("_"===we||0===Ie.indexOf("//"))return B;he&&he.hasOwnProperty(we)&&te.createTermDefinition({activeCtx:x,localCtx:he,term:we,defined:W,options:Te});const De=x.mappings.get(we);if(De&&De._prefix)return De["@id"]+Ie;if(M(B))return B}if(D.vocab&&"@vocab"in x)B=x["@vocab"]+B;else if(D.base){let we,Ie;"@base"in x?x["@base"]?(Ie=L(Te.base,x["@base"]),we=L(Ie,B)):(Ie=x["@base"],we=B):(Ie=Te.base,we=L(Te.base,B)),B=we}return B}function V(x,B){if(!x||"object"!=typeof x||!B||"object"!=typeof B)return x===B;const D=Array.isArray(x);if(D!==Array.isArray(B))return!1;if(D){if(x.length!==B.length)return!1;for(let Te=0;Te<x.length;++Te)if(!V(x[Te],B[Te]))return!1;return!0}const he=Object.keys(x),W=Object.keys(B);if(he.length!==W.length)return!1;for(const Te in x){let de=x[Te],we=B[Te];if("@container"===Te&&Array.isArray(de)&&Array.isArray(we)&&(de=de.slice().sort(),we=we.slice().sort()),!V(de,we))return!1}return!0}ne.exports=te,te.process=function(){var x=E(function*({activeCtx:B,localCtx:D,options:he,propagate:W=!0,overrideProtected:Te=!1,cycles:de=new Set}){if(P(D)&&"@context"in D&&A(D["@context"])&&(D=D["@context"]),0===Y(D).length)return B;const Ie=[],De=[({event:Ne,next:ke})=>{Ie.push(Ne),ke()}];he.eventHandler&&De.push(he.eventHandler);const et=he;he={...he,eventHandler:De};const Ye=yield he.contextResolver.resolve({activeCtx:B,context:D,documentLoader:he.documentLoader,base:he.base});P(Ye[0].document)&&"boolean"==typeof Ye[0].document["@propagate"]&&(W=Ye[0].document["@propagate"]);let Ce=B;!W&&!Ce.previousContext&&(Ce=Ce.clone(),Ce.previousContext=B);for(const Ne of Ye){let{document:ke}=Ne;if(B=Ce,null===ke){if(!Te&&0!==Object.keys(B.protected).length)throw new k("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ce=B=te.getInitialContext(he).clone();continue}const He=Ne.getProcessed(B);if(He){if(et.eventHandler)for(const Se of He.events)j({event:Se,options:et});Ce=B=He.context;continue}if(P(ke)&&"@context"in ke&&(ke=ke["@context"]),!P(ke))throw new k("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ke});Ce=Ce.clone();const me=new Map;if("@version"in ke){if(1.1!==ke["@version"])throw new k("Unsupported JSON-LD version: "+ke["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:ke});if(B.processingMode&&"json-ld-1.0"===B.processingMode)throw new k("@version: "+ke["@version"]+" not compatible with "+B.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:ke});Ce.processingMode="json-ld-1.1",Ce["@version"]=ke["@version"],me.set("@version",!0)}if(Ce.processingMode=Ce.processingMode||B.processingMode,"@base"in ke){let Se=ke["@base"];if(null!==Se&&!M(Se)){if(!F(Se))throw new k('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:ke});Se=L(Ce["@base"],Se)}Ce["@base"]=Se,me.set("@base",!0)}if("@vocab"in ke){const Se=ke["@vocab"];if(null===Se)delete Ce["@vocab"];else{if(!_(Se))throw new k('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ke});if(!M(Se)&&te.processingMode(Ce,1))throw new k('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ke});{const qe=q(Ce,Se,{vocab:!0,base:!0},void 0,void 0,he);M(qe)||he.eventHandler&&j({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:qe}},options:he}),Ce["@vocab"]=qe}}me.set("@vocab",!0)}if("@language"in ke){const Se=ke["@language"];if(null===Se)delete Ce["@language"];else{if(!_(Se))throw new k('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:ke});Se.match(oe)||he.eventHandler&&j({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Se}},options:he}),Ce["@language"]=Se.toLowerCase()}me.set("@language",!0)}if("@direction"in ke){const Se=ke["@direction"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @direction not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:ke});if(null===Se)delete Ce["@direction"];else{if("ltr"!==Se&&"rtl"!==Se)throw new k('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:ke});Ce["@direction"]=Se}me.set("@direction",!0)}if("@propagate"in ke){const Se=ke["@propagate"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @propagate not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ke});if("boolean"!=typeof Se)throw new k("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:D});me.set("@propagate",!0)}if("@import"in ke){const Se=ke["@import"];if("json-ld-1.0"===B.processingMode)throw new k("Invalid JSON-LD syntax; @import not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ke});if(!_(Se))throw new k("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:D});const qe=yield he.contextResolver.resolve({activeCtx:B,context:Se,documentLoader:he.documentLoader,base:he.base});if(1!==qe.length)throw new k("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:D});const lt=qe[0].getProcessed(B);if(lt)ke=lt;else{const We=qe[0].document;if("@import"in We)throw new k("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:D});for(const _e in We)ke.hasOwnProperty(_e)||(ke[_e]=We[_e]);qe[0].setProcessed(B,ke)}me.set("@import",!0)}me.set("@protected",ke["@protected"]||!1);for(const Se in ke)if(te.createTermDefinition({activeCtx:Ce,localCtx:ke,term:Se,defined:me,options:he,overrideProtected:Te}),P(ke[Se])&&"@context"in ke[Se]){const qe=ke[Se]["@context"];let lt=!0;if(_(qe)){const We=L(he.base,qe);de.has(We)?lt=!1:de.add(We)}if(lt)try{yield te.process({activeCtx:Ce.clone(),localCtx:ke[Se]["@context"],overrideProtected:!0,options:he,cycles:de})}catch{throw new k("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:ke[Se]["@context"],term:Se})}}Ne.setProcessed(B,{context:Ce,events:Ie})}return Ce});return function(B){return x.apply(this,arguments)}}(),te.createTermDefinition=({activeCtx:x,localCtx:B,term:D,defined:he,options:W,overrideProtected:Te=!1})=>{if(he.has(D)){if(he.get(D))return;throw new k("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:B,term:D})}let de;if(he.set(D,!1),B.hasOwnProperty(D)&&(de=B[D]),"@type"===D&&P(de)&&"@set"===(de["@container"]||"@set")&&te.processingMode(x,1.1)){const Ne=["@container","@id","@protected"],ke=Object.keys(de);if(0===ke.length||ke.some(He=>!Ne.includes(He)))throw new k("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:D})}else{if(te.isKeyword(D))throw new k("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:D});if(D.match(C))return void(W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:D}},options:W}));if(""===D)throw new k("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:B})}const we=x.mappings.get(D);x.mappings.has(D)&&x.mappings.delete(D);let Ie=!1;if((_(de)||null===de)&&(Ie=!0,de={"@id":de}),!P(de))throw new k("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:B});const De={};x.mappings.set(D,De),De.reverse=!1;const et=["@container","@id","@language","@reverse","@type"];te.processingMode(x,1.1)&&et.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ne in de)if(!et.includes(Ne))throw new k("Invalid JSON-LD syntax; a term definition must not contain "+Ne,"jsonld.SyntaxError",{code:"invalid term definition",context:B});const Ye=D.indexOf(":");if(De._termHasColon=Ye>0,"@reverse"in de){if("@id"in de)throw new k("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});if("@nest"in de)throw new k("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});const Ne=de["@reverse"];if(!_(Ne))throw new k("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(Ne.match(C))return W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ne}},options:W}),void(we?x.mappings.set(D,we):x.mappings.delete(D));const ke=q(x,Ne,{vocab:!0,base:!1},B,he,W);if(!M(ke))throw new k("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});De["@id"]=ke,De.reverse=!0}else if("@id"in de){let Ne=de["@id"];if(Ne&&!_(Ne))throw new k("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(null===Ne)De["@id"]=null;else{if(!te.isKeyword(Ne)&&Ne.match(C))return W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ne}},options:W}),void(we?x.mappings.set(D,we):x.mappings.delete(D));if(Ne!==D){if(Ne=q(x,Ne,{vocab:!0,base:!1},B,he,W),!M(Ne)&&!te.isKeyword(Ne))throw new k("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(D.match(/(?::[^:])|\//)&&q(x,D,{vocab:!0,base:!1},B,new Map(he).set(D,!0),W)!==Ne)throw new k("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});De["@id"]=Ne,De._prefix=Ie&&!De._termHasColon&&Ne.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in De))if(De._termHasColon){const Ne=D.substr(0,Ye);if(B.hasOwnProperty(Ne)&&te.createTermDefinition({activeCtx:x,localCtx:B,term:Ne,defined:he,options:W}),x.mappings.has(Ne)){const ke=D.substr(Ye+1);De["@id"]=x.mappings.get(Ne)["@id"]+ke}else De["@id"]=D}else if("@type"===D)De["@id"]=D;else{if(!("@vocab"in x))throw new k("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B,term:D});De["@id"]=x["@vocab"]+D}if((!0===de["@protected"]||!0===he.get("@protected")&&!1!==de["@protected"])&&(x.protected[D]=!0,De.protected=!0),he.set(D,!0),"@type"in de){let Ne=de["@type"];if(!_(Ne))throw new k("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if("@json"===Ne||"@none"===Ne){if(te.processingMode(x,1))throw new k(`Invalid JSON-LD syntax; an @context @type value must not be "${Ne}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else if("@id"!==Ne&&"@vocab"!==Ne){if(Ne=q(x,Ne,{vocab:!0,base:!1},B,he,W),!M(Ne))throw new k("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if(0===Ne.indexOf("_:"))throw new k("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}De["@type"]=Ne}if("@container"in de){const Ne=_(de["@container"])?[de["@container"]]:de["@container"]||[],ke=["@list","@set","@index","@language"];let He=!0;const me=Ne.includes("@set");if(te.processingMode(x,1.1)){if(ke.push("@graph","@id","@type"),Ne.includes("@list")){if(1!==Ne.length)throw new k("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else if(Ne.includes("@graph")){if(Ne.some(Se=>"@graph"!==Se&&"@id"!==Se&&"@index"!==Se&&"@set"!==Se))throw new k("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else He&=Ne.length<=(me?2:1);if(Ne.includes("@type")&&(De["@type"]=De["@type"]||"@id",!["@id","@vocab"].includes(De["@type"])))throw new k("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else He&=!A(de["@container"]),He&=Ne.length<=1;if(He&=Ne.every(Se=>ke.includes(Se)),He&=!(me&&Ne.includes("@list")),!He)throw new k("Invalid JSON-LD syntax; @context @container value must be one of the following: "+ke.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:B});if(De.reverse&&!Ne.every(Se=>["@index","@set"].includes(Se)))throw new k("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});De["@container"]=Ne}if("@index"in de){if(!("@container"in de)||!De["@container"].includes("@index"))throw new k(`Invalid JSON-LD syntax; @index without @index in @container: "${de["@index"]}" on term "${D}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});if(!_(de["@index"])||0===de["@index"].indexOf("@"))throw new k(`Invalid JSON-LD syntax; @index must expand to an IRI: "${de["@index"]}" on term "${D}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});De["@index"]=de["@index"]}if("@context"in de&&(De["@context"]=de["@context"]),"@language"in de&&!("@type"in de)){let Ne=de["@language"];if(null!==Ne&&!_(Ne))throw new k("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:B});null!==Ne&&(Ne=Ne.toLowerCase()),De["@language"]=Ne}if("@prefix"in de){if(D.match(/:|\//))throw new k("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:B});if(te.isKeyword(De["@id"]))throw new k("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:B});if("boolean"!=typeof de["@prefix"])throw new k("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:B});De._prefix=!0===de["@prefix"]}if("@direction"in de){const Ne=de["@direction"];if(null!==Ne&&"ltr"!==Ne&&"rtl"!==Ne)throw new k('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:B});De["@direction"]=Ne}if("@nest"in de){const Ne=de["@nest"];if(!_(Ne)||"@nest"!==Ne&&0===Ne.indexOf("@"))throw new k("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:B});De["@nest"]=Ne}const Ce=De["@id"];if("@context"===Ce||"@preserve"===Ce)throw new k("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:B});if(we&&we.protected&&!Te&&(x.protected[D]=!0,De.protected=!0,!V(we,De)))throw new k("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:B,term:D})},te.expandIri=(x,B,D,he)=>q(x,B,D,void 0,void 0,he),te.getInitialContext=x=>{const B=JSON.stringify({processingMode:x.processingMode}),D=K.get(B);if(D)return D;const he={processingMode:x.processingMode,mappings:new Map,inverse:null,getInverse:function W(){const De=this;if(De.inverse)return De.inverse;const et=De.inverse={},Ye=De.fastCurieMap={},Ce={},Ne=(De["@language"]||"@none").toLowerCase(),ke=De["@direction"],He=De.mappings,me=[...He.keys()].sort(le);for(const Se of me){const qe=He.get(Se);if(null===qe)continue;let lt=qe["@container"]||"@none";if(lt=[].concat(lt).sort().join(""),null===qe["@id"])continue;const We=Y(qe["@id"]);for(const _e of We){let z=et[_e];const O=te.isKeyword(_e);if(z)!O&&!qe._termHasColon&&Ce[_e].push(Se);else if(et[_e]=z={},!O&&!qe._termHasColon){Ce[_e]=[Se];const ae={iri:_e,terms:Ce[_e]};_e[0]in Ye?Ye[_e[0]].push(ae):Ye[_e[0]]=[ae]}if(z[lt]||(z[lt]={"@language":{},"@type":{},"@any":{}}),z=z[lt],de(Se,z["@any"],"@none"),qe.reverse)de(Se,z["@type"],"@reverse");else if("@none"===qe["@type"])de(Se,z["@any"],"@none"),de(Se,z["@language"],"@none"),de(Se,z["@type"],"@none");else if("@type"in qe)de(Se,z["@type"],qe["@type"]);else if("@language"in qe&&"@direction"in qe){const ae=qe["@language"],H=qe["@direction"];de(Se,z["@language"],ae&&H?`${ae}_${H}`.toLowerCase():ae?ae.toLowerCase():H?`_${H}`:"@null")}else"@language"in qe?de(Se,z["@language"],(qe["@language"]||"@null").toLowerCase()):"@direction"in qe?de(Se,z["@language"],qe["@direction"]?`_${qe["@direction"]}`:"@none"):ke?(de(Se,z["@language"],`_${ke}`),de(Se,z["@language"],"@none"),de(Se,z["@type"],"@none")):(de(Se,z["@language"],Ne),de(Se,z["@language"],"@none"),de(Se,z["@type"],"@none"))}}for(const Se in Ye)Te(Ye,Se,1);return et},clone:function we(){const De={};return De.mappings=b.clone(this.mappings),De.clone=this.clone,De.inverse=null,De.getInverse=this.getInverse,De.protected=b.clone(this.protected),this.previousContext&&(De.previousContext=this.previousContext.clone()),De.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(De["@base"]=this["@base"]),"@language"in this&&(De["@language"]=this["@language"]),"@vocab"in this&&(De["@vocab"]=this["@vocab"]),De},revertToPreviousContext:function Ie(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===K.size&&K.clear(),K.set(B,he),he;function Te(De,et,Ye){const Ce=De[et],Ne=De[et]={};let ke,He;for(const me of Ce)ke=me.iri,He=Ye>=ke.length?"":ke[Ye],He in Ne?Ne[He].push(me):Ne[He]=[me];for(const me in Ne)""!==me&&Te(Ne,me,Ye+1)}function de(De,et,Ye){et.hasOwnProperty(Ye)||(et[Ye]=De)}},te.getContextValue=(x,B,D)=>{if(null===B)return"@context"===D?void 0:null;if(x.mappings.has(B)){const he=x.mappings.get(B);if(y(D))return he;if(he.hasOwnProperty(D))return he[D]}return"@language"===D&&D in x||"@direction"===D&&D in x?x[D]:"@context"!==D?null:void 0},te.processingMode=(x,B)=>B.toString()>="1.1"?!x.processingMode||x.processingMode>="json-ld-"+B.toString():"json-ld-1.0"===x.processingMode,te.isKeyword=x=>{if(!_(x)||"@"!==x[0])return!1;switch(x){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(ne,Z,g)=>{"use strict";var E=g(7156).default;const{parseLinkHeader:b,buildHeaders:k}=g(3521),{LINK_HEADER_CONTEXT:A}=g(6982),P=g(1874),_=g(4044),{prependBase:y}=g(2651),M=/(^|(\r\n))link:/i;ne.exports=({secure:L,headers:j={},xhr:oe}={headers:{}})=>{return j=k(j),(new _).wrapLoader(Y);function Y(K){return le.apply(this,arguments)}function le(){return le=E(function*(K){if(0!==K.indexOf("http:")&&0!==K.indexOf("https:"))throw new P('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:K});if(L&&0!==K.indexOf("https"))throw new P('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:K});let re;try{re=yield function F(L,j,oe){const C=new(L=L||XMLHttpRequest);return new Promise((Y,le)=>{C.onload=()=>Y(C),C.onerror=K=>le(K),C.open("GET",j,!0);for(const K in oe)C.setRequestHeader(K,oe[K]);C.send()})}(oe,K,j)}catch(B){throw new P("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:K,cause:B})}if(re.status>=400)throw new P("URL could not be dereferenced: "+re.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:K,httpStatusCode:re.status});let te={contextUrl:null,documentUrl:K,document:re.response},q=null;const V=re.getResponseHeader("Content-Type");let x;if(M.test(re.getAllResponseHeaders())&&(x=re.getResponseHeader("Link")),x&&"application/ld+json"!==V){const B=b(x),D=B[A];if(Array.isArray(D))throw new P("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:K});D&&(te.contextUrl=D.target),q=B.alternate,q&&"application/ld+json"==q.type&&!(V||"").match(/^application\/(\w*\+)?json$/)&&(te=yield Y(y(K,q.target)))}return te}),le.apply(this,arguments)}}},3855:(ne,Z,g)=>{"use strict";const E=g(1874),{isArray:b}=g(8254),{asArray:k}=g(3521),A={};function P({event:y,handlers:M}){let F=!0;for(let L=0;F&&L<M.length;++L){F=!1;const j=M[L];if(b(j))F=P({event:y,handlers:j});else if("function"==typeof j)j({event:y,next:()=>{F=!0}});else{if("object"!=typeof j)throw new E("Invalid event handler.","jsonld.InvalidEventHandler",{event:y});y.code in j?j[y.code]({event:y,next:()=>{F=!0}}):F=!0}}return F}ne.exports=A,A.defaultEventHandler=null,A.setupEventHandler=({options:y={}})=>{const M=[].concat(y.safe?A.safeEventHandler:[],y.eventHandler?k(y.eventHandler):[],A.defaultEventHandler?A.defaultEventHandler:[]);return 0===M.length?null:M},A.handleEvent=({event:y,options:M})=>{P({event:y,handlers:M.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);A.safeEventHandler=function({event:M,next:F}){if("warning"===M.level&&_.has(M.code))throw new E("Safe mode validation error.","jsonld.ValidationError",{event:M});F()},A.logEventHandler=function({event:M,next:F}){console.log(`EVENT: ${M.message}`,{event:M}),F()},A.logWarningEventHandler=function({event:M,next:F}){"warning"===M.level&&console.warn(`WARNING: ${M.message}`,{event:M}),F()},A.unhandledEventHandler=function({event:M}){throw new E("No handler for event.","jsonld.UnhandledEvent",{event:M})},A.setDefaultEventHandler=function({eventHandler:y}={}){A.defaultEventHandler=y?k(y):null}},3860:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),{isArray:k,isObject:A,isEmptyObject:P,isString:_,isUndefined:y}=g(8254),{isList:M,isValue:F,isGraph:L,isSubject:j}=g(543),{expandIri:oe,getContextValue:C,isKeyword:Y,process:le,processingMode:K}=g(9611),{isAbsolute:re}=g(2651),{REGEX_BCP47:te,REGEX_KEYWORD:q,addValue:V,asArray:x,getValues:B,validateTypeValue:D}=g(3521),{handleEvent:he}=g(3855),W={};function Te({value:Ce,count:Ne,options:ke}){if(0===Ne||"@value"in Ce||"@list"in Ce||1===Ne&&"@id"in Ce){if(ke.eventHandler){let He,me;0===Ne?(He="empty object",me="Dropping empty object."):"@value"in Ce?(He="object with only @value",me="Dropping object with only @value."):"@list"in Ce?(He="object with only @list",me="Dropping object with only @list."):1===Ne&&"@id"in Ce&&(He="object with only @id",me="Dropping object with only @id."),he({event:{type:["JsonLdEvent"],code:He,level:"warning",message:me,details:{value:Ce}},options:ke})}return null}return Ce}function de(Ce){return we.apply(this,arguments)}function we(){return(we=E(function*({activeCtx:Ce,activeProperty:Ne,expandedActiveProperty:ke,element:He,expandedParent:me,options:Se={},insideList:qe,typeKey:lt,typeScopedContext:We}){const _e=Object.keys(He).sort(),z=[];let O;const ae=He[lt]&&"@json"===oe(Ce,k(He[lt])?He[lt][0]:He[lt],{vocab:!0},{...Se,typeExpansion:!0});for(const H of _e){let Ke,Fe=He[H];if("@context"===H)continue;const fe=oe(Ce,H,{vocab:!0},Se);if(null===fe||!re(fe)&&!Y(fe)){Se.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:H,expandedProperty:fe}},options:Se});continue}if(Y(fe)){if("@reverse"===ke)throw new b("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Fe});if(fe in me&&"@included"!==fe&&"@type"!==fe)throw new b("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:fe})}if("@id"===fe){if(!_(Fe)){if(!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe});if(A(Fe)){if(!P(Fe))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe})}else{if(!k(Fe))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe});if(!Fe.every(I=>_(I)))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe})}}V(me,"@id",x(Fe).map(I=>{if(_(I)){const ue=oe(Ce,I,{base:!0},Se);return Se.eventHandler&&(null===ue?he(null===I?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:I}},options:Se}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:I}},options:Se}):re(ue)||he({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:I,expandedId:ue}},options:Se})),ue}return I}),{propertyIsArray:Se.isFrame});continue}if("@type"===fe){A(Fe)&&(Fe=Object.fromEntries(Object.entries(Fe).map(([I,ue])=>[oe(We,I,{vocab:!0}),x(ue).map(ge=>oe(We,ge,{base:!0,vocab:!0},{...Se,typeExpansion:!0}))]))),D(Fe,Se.isFrame),V(me,"@type",x(Fe).map(I=>{if(_(I)){const ue=oe(We,I,{base:!0,vocab:!0},{...Se,typeExpansion:!0});return"@json"!==ue&&!re(ue)&&Se.eventHandler&&he({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:I}},options:Se}),ue}return I}),{propertyIsArray:!!Se.isFrame});continue}if("@included"===fe&&K(Ce,1.1)){const I=x(yield W.expand({activeCtx:Ce,activeProperty:Ne,element:Fe,options:Se}));if(!I.every(ue=>j(ue)))throw new b("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Fe});V(me,"@included",I,{propertyIsArray:!0});continue}if("@graph"===fe&&!A(Fe)&&!k(Fe))throw new b('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Fe});if("@value"===fe){O=Fe,ae&&K(Ce,1.1)?me["@value"]=Fe:V(me,"@value",Fe,{propertyIsArray:Se.isFrame});continue}if("@language"===fe){if(null===Fe)continue;if(!_(Fe)&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Fe});Fe=x(Fe).map(I=>_(I)?I.toLowerCase():I);for(const I of Fe)_(I)&&!I.match(te)&&Se.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:I}},options:Se});V(me,"@language",Fe,{propertyIsArray:Se.isFrame});continue}if("@direction"===fe){if(!_(Fe)&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Fe});Fe=x(Fe);for(const I of Fe)if(_(I)&&"ltr"!==I&&"rtl"!==I)throw new b('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Fe});V(me,"@direction",Fe,{propertyIsArray:Se.isFrame});continue}if("@index"===fe){if(!_(Fe))throw new b('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Fe});V(me,"@index",Fe);continue}if("@reverse"===fe){if(!A(Fe))throw new b('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Fe});if(Ke=yield W.expand({activeCtx:Ce,activeProperty:"@reverse",element:Fe,options:Se}),"@reverse"in Ke)for(const ue in Ke["@reverse"])V(me,ue,Ke["@reverse"][ue],{propertyIsArray:!0});let I=me["@reverse"]||null;for(const ue in Ke){if("@reverse"===ue)continue;null===I&&(I=me["@reverse"]={}),V(I,ue,[],{propertyIsArray:!0});const ge=Ke[ue];for(let ze=0;ze<ge.length;++ze){const Je=ge[ze];if(F(Je)||M(Je))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ke});V(I,ue,Je,{propertyIsArray:!0})}}continue}if("@nest"===fe){z.push(H);continue}let ee=Ce;const G=C(Ce,H,"@context");y(G)||(ee=yield le({activeCtx:Ce,localCtx:G,propagate:!0,overrideProtected:!0,options:Se}));const R=C(ee,H,"@container")||[];if(R.includes("@language")&&A(Fe))Ke=De(ee,Fe,C(ee,H,"@direction"),Se);else if(R.includes("@index")&&A(Fe)){const I=R.includes("@graph"),ue=C(ee,H,"@index")||"@index",ge="@index"!==ue&&oe(Ce,ue,{vocab:!0},Se);Ke=yield et({activeCtx:ee,options:Se,activeProperty:H,value:Fe,asGraph:I,indexKey:ue,propertyIndex:ge})}else if(R.includes("@id")&&A(Fe)){const I=R.includes("@graph");Ke=yield et({activeCtx:ee,options:Se,activeProperty:H,value:Fe,asGraph:I,indexKey:"@id"})}else if(R.includes("@type")&&A(Fe))Ke=yield et({activeCtx:ee.revertToPreviousContext(),options:Se,activeProperty:H,value:Fe,asGraph:!1,indexKey:"@type"});else{const I="@list"===fe;if(I||"@set"===fe){let ue=Ne;I&&"@graph"===ke&&(ue=null),Ke=yield W.expand({activeCtx:ee,activeProperty:ue,element:Fe,options:Se,insideList:I})}else Ke="@json"===C(Ce,H,"@type")?{"@type":"@json","@value":Fe}:yield W.expand({activeCtx:ee,activeProperty:H,element:Fe,options:Se,insideList:!1})}if(null!==Ke||"@value"===fe){if("@list"!==fe&&!M(Ke)&&R.includes("@list")&&(Ke={"@list":x(Ke)}),R.includes("@graph")&&!R.some(I=>"@id"===I||"@index"===I)){Ke=x(Ke);const I=Object.keys(Ke[0]).length;if(!Se.isFrame&&null===Te({value:Ke[0],count:I,options:Se}))continue;Ke=Ke.map(ue=>({"@graph":x(ue)}))}if(ee.mappings.has(H)&&ee.mappings.get(H).reverse){const I=me["@reverse"]=me["@reverse"]||{};Ke=x(Ke);for(let ue=0;ue<Ke.length;++ue){const ge=Ke[ue];if(F(ge)||M(ge))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ke});V(I,fe,ge,{propertyIsArray:!0})}continue}V(me,fe,Ke,{propertyIsArray:!0})}}if("@value"in me&&("@json"!==me["@type"]||!K(Ce,1.1))&&(A(O)||k(O))&&!Se.isFrame)throw new b('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:O});for(const H of z){const Fe=k(He[H])?He[H]:[He[H]];for(const Ke of Fe){if(!A(Ke)||Object.keys(Ke).some(fe=>"@value"===oe(Ce,fe,{vocab:!0},Se)))throw new b("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Ke});yield de({activeCtx:Ce,activeProperty:Ne,expandedActiveProperty:ke,element:Ke,expandedParent:me,options:Se,insideList:qe,typeScopedContext:We,typeKey:lt})}}})).apply(this,arguments)}function Ie({activeCtx:Ce,activeProperty:Ne,value:ke,options:He}){if(null==ke)return null;const me=oe(Ce,Ne,{vocab:!0},He);if("@id"===me)return oe(Ce,ke,{base:!0},He);if("@type"===me)return oe(Ce,ke,{vocab:!0,base:!0},{...He,typeExpansion:!0});const Se=C(Ce,Ne,"@type");if(("@id"===Se||"@graph"===me)&&_(ke)){const lt=oe(Ce,ke,{base:!0},He);return null===lt&&ke.match(q)&&He.eventHandler&&he({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ne}},options:He}),{"@id":lt}}if("@vocab"===Se&&_(ke))return{"@id":oe(Ce,ke,{vocab:!0,base:!0},He)};if(Y(me))return ke;const qe={};if(Se&&!["@id","@vocab","@none"].includes(Se))qe["@type"]=Se;else if(_(ke)){const lt=C(Ce,Ne,"@language");null!==lt&&(qe["@language"]=lt);const We=C(Ce,Ne,"@direction");null!==We&&(qe["@direction"]=We)}return["boolean","number","string"].includes(typeof ke)||(ke=ke.toString()),qe["@value"]=ke,qe}function De(Ce,Ne,ke,He){const me=[],Se=Object.keys(Ne).sort();for(const qe of Se){const lt=oe(Ce,qe,{vocab:!0},He);let We=Ne[qe];k(We)||(We=[We]);for(const _e of We){if(null===_e)continue;if(!_(_e))throw new b("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ne});const z={"@value":_e};"@none"!==lt&&(qe.match(te)||He.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:qe}},options:He}),z["@language"]=qe.toLowerCase()),ke&&(z["@direction"]=ke),me.push(z)}}return me}function et(Ce){return Ye.apply(this,arguments)}function Ye(){return(Ye=E(function*({activeCtx:Ce,options:Ne,activeProperty:ke,value:He,asGraph:me,indexKey:Se,propertyIndex:qe}){const lt=[],We=Object.keys(He).sort(),_e="@type"===Se;for(let z of We){if(_e){const H=C(Ce,z,"@context");y(H)||(Ce=yield le({activeCtx:Ce,localCtx:H,propagate:!1,options:Ne}))}let ae,O=He[z];k(O)||(O=[O]),O=yield W.expand({activeCtx:Ce,activeProperty:ke,element:O,options:Ne,insideList:!1,insideIndex:!0}),ae=qe?"@none"===z?"@none":Ie({activeCtx:Ce,activeProperty:Se,value:z,options:Ne}):oe(Ce,z,{vocab:!0},Ne),"@id"===Se?z=oe(Ce,z,{base:!0},Ne):_e&&(z=ae);for(let H of O){if(me&&!L(H)&&(H={"@graph":[H]}),"@type"===Se)"@none"===ae||(H["@type"]=H["@type"]?[z].concat(H["@type"]):[z]);else{if(F(H)&&!["@language","@type","@index"].includes(Se))throw new b(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Se}".`,"jsonld.SyntaxError",{code:"invalid value object",value:H});qe?"@none"!==ae&&V(H,qe,ae,{propertyIsArray:!0,prependValue:!0}):"@none"!==ae&&!(Se in H)&&(H[Se]=z)}lt.push(H)}}return lt})).apply(this,arguments)}ne.exports=W,W.expand=function(){var Ce=E(function*({activeCtx:Ne,activeProperty:ke=null,element:He,options:me={},insideList:Se=!1,insideIndex:qe=!1,typeScopedContext:lt=null}){if(null==He)return null;if("@default"===ke&&(me=Object.assign({},me,{isFrame:!1})),!k(He)&&!A(He))return Se||null!==ke&&"@graph"!==oe(Ne,ke,{vocab:!0},me)?Ie({activeCtx:Ne,activeProperty:ke,value:He,options:me}):(me.eventHandler&&he({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:He}},options:me}),null);if(k(He)){let Ke=[];const fe=C(Ne,ke,"@container")||[];Se=Se||fe.includes("@list");for(let ee=0;ee<He.length;++ee){let G=yield W.expand({activeCtx:Ne,activeProperty:ke,element:He[ee],options:me,insideIndex:qe,typeScopedContext:lt});Se&&k(G)&&(G={"@list":G}),null!==G&&(k(G)?Ke=Ke.concat(G):Ke.push(G))}return Ke}const We=oe(Ne,ke,{vocab:!0},me),_e=C(Ne,ke,"@context");lt=lt||(Ne.previousContext?Ne:null);let z=Object.keys(He).sort(),O=!qe;if(O&&lt&&z.length<=2&&!z.includes("@context"))for(const Ke of z){const fe=oe(lt,Ke,{vocab:!0},me);if("@value"===fe){O=!1,Ne=lt;break}if("@id"===fe&&1===z.length){O=!1;break}}O&&(Ne=Ne.revertToPreviousContext()),y(_e)||(Ne=yield le({activeCtx:Ne,localCtx:_e,propagate:!0,overrideProtected:!0,options:me})),"@context"in He&&(Ne=yield le({activeCtx:Ne,localCtx:He["@context"],options:me})),lt=Ne;let ae=null;for(const Ke of z)if("@type"===oe(Ne,Ke,{vocab:!0},me)){ae=ae||Ke;const ee=He[Ke],G=Array.isArray(ee)?ee.length>1?ee.slice().sort():ee:[ee];for(const R of G){const I=C(lt,R,"@context");y(I)||(Ne=yield le({activeCtx:Ne,localCtx:I,options:me,propagate:!1}))}}let H={};yield de({activeCtx:Ne,activeProperty:ke,expandedActiveProperty:We,element:He,expandedParent:H,options:me,insideList:Se,typeKey:ae,typeScopedContext:lt}),z=Object.keys(H);let Fe=z.length;if("@value"in H){if("@type"in H&&("@language"in H||"@direction"in H))throw new b('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:H});let Ke=Fe-1;if("@type"in H&&(Ke-=1),"@index"in H&&(Ke-=1),"@language"in H&&(Ke-=1),"@direction"in H&&(Ke-=1),0!==Ke)throw new b('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:H});const fe=null===H["@value"]?[]:x(H["@value"]),ee=B(H,"@type");if(!K(Ne,1.1)||!ee.includes("@json")||1!==ee.length)if(0===fe.length)me.eventHandler&&he({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:H}},options:me}),H=null;else{if(!fe.every(G=>_(G)||P(G))&&"@language"in H)throw new b("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:H});if(!ee.every(G=>re(G)&&!(_(G)&&0===G.indexOf("_:"))||P(G)))throw new b('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:H})}}else if("@type"in H&&!k(H["@type"]))H["@type"]=[H["@type"]];else if("@set"in H||"@list"in H){if(Fe>1&&(2!==Fe||!("@index"in H)))throw new b('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:H});"@set"in H&&(H=H["@set"],z=Object.keys(H),Fe=z.length)}else 1===Fe&&"@language"in H&&(me.eventHandler&&he({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:H}},options:me}),H=null);return A(H)&&!me.keepFreeFloatingNodes&&!Se&&(null===ke||"@graph"===We||(C(Ne,ke,"@container")||[]).includes("@graph"))&&(H=Te({value:H,count:Fe,options:me})),H});return function(Ne){return Ce.apply(this,arguments)}}()},8295:(ne,Z,g)=>{"use strict";const{isSubjectReference:E}=g(543),{createMergedNodeMap:b}=g(9783),k={};ne.exports=k,k.flatten=A=>{const P=b(A),_=[],y=Object.keys(P).sort();for(let M=0;M<y.length;++M){const F=P[y[M]];E(F)||_.push(F)}return _}},9193:(ne,Z,g)=>{"use strict";const{isKeyword:E}=g(9611),b=g(543),k=g(8254),A=g(3521),P=g(2651),_=g(1874),{createNodeMap:y,mergeNodeMapGraphs:M}=g(9783),F={};function L(x){const B={};for(const D in x)void 0!==x[D]&&(B["@"+D]=[x[D]]);return[B]}function j(x,B,D){for(let he=D.length-1;he>=0;--he){const W=D[he];if(W.graph===B&&W.subject["@id"]===x["@id"])return!0}return!1}function oe(x,B,D){const he="@"+D;let W=he in x?x[he][0]:B[D];if("embed"===D)if(!0===W)W="@once";else if(!1===W)W="@never";else if("@always"!==W&&"@never"!==W&&"@link"!==W&&"@first"!==W&&"@last"!==W&&"@once"!==W)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:x});return W}function C(x){if(!k.isArray(x)||1!==x.length||!k.isObject(x[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:x});if("@id"in x[0])for(const B of A.asArray(x[0]["@id"]))if(!k.isObject(B)&&!P.isAbsolute(B)||k.isString(B)&&0===B.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x});if("@type"in x[0])for(const B of A.asArray(x[0]["@type"]))if(!k.isObject(B)&&!P.isAbsolute(B)&&"@json"!==B||k.isString(B)&&0===B.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x})}function le(x,B,D,he){let W=!0,Te=!1;for(const de in D){let we=!1;const Ie=A.getValues(B,de),De=0===A.getValues(D,de).length;if("@id"===de){if(k.isEmptyObject(D["@id"][0]||{})?we=!0:D["@id"].length>=0&&(we=D["@id"].includes(Ie[0])),!he.requireAll)return we}else if("@type"===de){if(W=!1,De){if(Ie.length>0)return!1;we=!0}else if(1===D["@type"].length&&k.isEmptyObject(D["@type"][0]))we=Ie.length>0;else for(const et of D["@type"])we=!(!k.isObject(et)||!("@default"in et))||we||Ie.some(Ye=>Ye===et);if(!he.requireAll)return we}else{if(E(de))continue;{const et=A.getValues(D,de)[0];let Ye=!1;if(et&&(C([et]),Ye="@default"in et),W=!1,0===Ie.length&&Ye)continue;if(Ie.length>0&&De)return!1;if(void 0===et){if(Ie.length>0)return!1;we=!0}else if(b.isList(et)){const Ce=et["@list"][0];if(b.isList(Ie[0])){const Ne=Ie[0]["@list"];b.isValue(Ce)?we=Ne.some(ke=>V(Ce,ke)):(b.isSubject(Ce)||b.isSubjectReference(Ce))&&(we=Ne.some(ke=>q(x,Ce,ke,he)))}}else we=b.isValue(et)?Ie.some(Ce=>V(et,Ce)):b.isSubjectReference(et)?Ie.some(Ce=>q(x,et,Ce,he)):!!k.isObject(et)&&Ie.length>0}}if(!we&&he.requireAll)return!1;Te=Te||we}return W||Te}function K(x,B){const D=x.uniqueEmbeds[x.graph],he=D[B],W=he.parent,Te=he.property,de={"@id":B};if(k.isArray(W)){for(let Ie=0;Ie<W.length;++Ie)if(A.compareValues(W[Ie],de)){W[Ie]=de;break}}else{const Ie=k.isArray(W[Te]);A.removeValue(W,Te,de,{propertyIsArray:Ie}),A.addValue(W,Te,de,{propertyIsArray:Ie})}const we=Ie=>{const De=Object.keys(D);for(const et of De)et in D&&k.isObject(D[et].parent)&&D[et].parent["@id"]===Ie&&(delete D[et],we(et))};we(B)}function re(x,B){if(k.isArray(x))return x.map(D=>re(D,B));if(k.isObject(x)){if("@preserve"in x)return x["@preserve"][0];if(b.isValue(x))return x;if(b.isList(x))return x["@list"]=re(x["@list"],B),x;if("@id"in x){const D=x["@id"];if(B.link.hasOwnProperty(D)){const he=B.link[D].indexOf(x);if(-1!==he)return B.link[D][he];B.link[D].push(x)}else B.link[D]=[x]}for(const D in x)"@id"===D&&B.bnodesToClear.includes(x[D])?delete x["@id"]:x[D]=re(x[D],B)}return x}function te(x,B,D){k.isObject(x)?A.addValue(x,B,D,{propertyIsArray:!0}):x.push(D)}function q(x,B,D,he){if(!("@id"in D))return!1;const W=x.subjects[D["@id"]];return W&&le(x,W,B,he)}function V(x,B){const D=B["@value"],he=B["@type"],W=B["@language"],Te=x["@value"]?k.isArray(x["@value"])?x["@value"]:[x["@value"]]:[],de=x["@type"]?k.isArray(x["@type"])?x["@type"]:[x["@type"]]:[],we=x["@language"]?k.isArray(x["@language"])?x["@language"]:[x["@language"]]:[];return 0===Te.length&&0===de.length&&0===we.length||!(!Te.includes(D)&&!k.isEmptyObject(Te[0])||!(!he&&0===de.length||de.includes(he)||he&&k.isEmptyObject(de[0]))||!(!W&&0===we.length||we.includes(W)||W&&k.isEmptyObject(we[0])))}ne.exports=F,F.frameMergedOrDefault=(x,B,D)=>{const he={options:D,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},W=new A.IdentifierIssuer("_:b");y(x,he.graphMap,"@default",W),D.merged&&(he.graphMap["@merged"]=M(he.graphMap),he.graph="@merged"),he.subjects=he.graphMap[he.graph];const Te=[];return F.frame(he,Object.keys(he.subjects).sort(),B,Te),D.pruneBlankNodeIdentifiers&&(D.bnodesToClear=Object.keys(he.bnodeMap).filter(de=>1===he.bnodeMap[de].length)),D.link={},re(Te,D)},F.frame=(x,B,D,he,W=null)=>{C(D);const Te=x.options,de={embed:oe(D=D[0],Te,"embed"),explicit:oe(D,Te,"explicit"),requireAll:oe(D,Te,"requireAll")};x.link.hasOwnProperty(x.graph)||(x.link[x.graph]={});const we=x.link[x.graph],Ie=function Y(x,B,D,he){const W={};for(const Te of B){const de=x.graphMap[x.graph][Te];le(x,de,D,he)&&(W[Te]=de)}return W}(x,B,D,de),De=Object.keys(Ie).sort();for(const et of De){const Ye=Ie[et];if(null===W?x.uniqueEmbeds={[x.graph]:{}}:x.uniqueEmbeds[x.graph]=x.uniqueEmbeds[x.graph]||{},"@link"===de.embed&&et in we){te(he,W,we[et]);continue}const Ce={"@id":et};if(0===et.indexOf("_:")&&A.addValue(x.bnodeMap,et,Ce,{propertyIsArray:!0}),we[et]=Ce,("@first"===de.embed||"@last"===de.embed)&&x.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:D});if(x.embedded||!x.uniqueEmbeds[x.graph].hasOwnProperty(et)){if(x.embedded&&("@never"===de.embed||j(Ye,x.graph,x.subjectStack))){te(he,W,Ce);continue}if(x.embedded&&("@first"==de.embed||"@once"==de.embed)&&x.uniqueEmbeds[x.graph].hasOwnProperty(et)){te(he,W,Ce);continue}if("@last"===de.embed&&et in x.uniqueEmbeds[x.graph]&&K(x,et),x.uniqueEmbeds[x.graph][et]={parent:he,property:W},x.subjectStack.push({subject:Ye,graph:x.graph}),et in x.graphMap){let Ne=!1,ke=null;"@graph"in D?(ke=D["@graph"][0],Ne=!("@merged"===et||"@default"===et),k.isObject(ke)||(ke={})):(Ne="@merged"!==x.graph,ke={}),Ne&&F.frame({...x,graph:et,embedded:!1},Object.keys(x.graphMap[et]).sort(),[ke],Ce,"@graph")}"@included"in D&&F.frame({...x,embedded:!1},B,D["@included"],Ce,"@included");for(const Ne of Object.keys(Ye).sort())if(E(Ne)){if(Ce[Ne]=A.clone(Ye[Ne]),"@type"===Ne)for(const ke of Ye["@type"])0===ke.indexOf("_:")&&A.addValue(x.bnodeMap,ke,Ce,{propertyIsArray:!0})}else if(!de.explicit||Ne in D)for(const ke of Ye[Ne]){const He=Ne in D?D[Ne]:L(de);if(b.isList(ke)){const me=D[Ne]&&D[Ne][0]&&D[Ne][0]["@list"]?D[Ne][0]["@list"]:L(de),Se={"@list":[]};te(Ce,Ne,Se);const qe=ke["@list"];for(const lt of qe)b.isSubjectReference(lt)?F.frame({...x,embedded:!0},[lt["@id"]],me,Se,"@list"):te(Se,"@list",A.clone(lt))}else b.isSubjectReference(ke)?F.frame({...x,embedded:!0},[ke["@id"]],He,Ce,Ne):V(He[0],ke)&&te(Ce,Ne,A.clone(ke))}for(const Ne of Object.keys(D).sort()){if("@type"===Ne){if(!k.isObject(D[Ne][0])||!("@default"in D[Ne][0]))continue}else if(E(Ne))continue;const ke=D[Ne][0]||{};if(!oe(ke,Te,"omitDefault")&&!(Ne in Ce)){let me="@null";"@default"in ke&&(me=A.clone(ke["@default"])),k.isArray(me)||(me=[me]),Ce[Ne]=[{"@preserve":me}]}}for(const Ne of Object.keys(D["@reverse"]||{}).sort()){const ke=D["@reverse"][Ne];for(const He of Object.keys(x.subjects))A.getValues(x.subjects[He],Ne).some(Se=>Se["@id"]===et)&&(Ce["@reverse"]=Ce["@reverse"]||{},A.addValue(Ce["@reverse"],Ne,[],{propertyIsArray:!0}),F.frame({...x,embedded:!0},[He],ke,Ce["@reverse"][Ne],W))}te(he,W,Ce),x.subjectStack.pop()}}},F.cleanupNull=(x,B)=>{if(k.isArray(x))return x.map(he=>F.cleanupNull(he,B)).filter(he=>he);if("@null"===x)return null;if(k.isObject(x)){if("@id"in x){const D=x["@id"];if(B.link.hasOwnProperty(D)){const he=B.link[D].indexOf(x);if(-1!==he)return B.link[D][he];B.link[D].push(x)}else B.link[D]=[x]}for(const D in x)x[D]=F.cleanupNull(x[D],B)}return x}},9767:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1874),k=g(543),A=g(8254),{REGEX_BCP47:P,addValue:_}=g(3521),{handleEvent:y}=g(3855),{RDF_LIST:M,RDF_FIRST:F,RDF_REST:L,RDF_NIL:j,RDF_TYPE:oe,RDF_JSON_LITERAL:C,XSD_BOOLEAN:Y,XSD_DOUBLE:le,XSD_INTEGER:K,XSD_STRING:re}=g(6982),te={};function q(V,x,B,D){if(V.termType.endsWith("Node"))return{"@id":V.value};const he={"@value":V.value};if(V.language)V.language.match(P)||D.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:V.language}},options:D}),he["@language"]=V.language;else{let W=V.datatype.value;if(W||(W=re),W===C){W="@json";try{he["@value"]=JSON.parse(he["@value"])}catch(Te){throw new b("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:he["@value"],cause:Te})}}if(x){if(W===Y)"true"===he["@value"]?he["@value"]=!0:"false"===he["@value"]&&(he["@value"]=!1);else if(A.isNumeric(he["@value"]))if(W===K){const Te=parseInt(he["@value"],10);Te.toFixed(0)===he["@value"]&&(he["@value"]=Te)}else W===le&&(he["@value"]=parseFloat(he["@value"]));[Y,K,le,re].includes(W)||(he["@type"]=W)}else if("i18n-datatype"===B&&W.startsWith("https://www.w3.org/ns/i18n#")){const[,Te,de]=W.split(/[#_]/);Te.length>0&&(he["@language"]=Te,Te.match(P)||D.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Te}},options:D})),he["@direction"]=de}else W!==re&&(he["@type"]=W)}return he}ne.exports=te,te.fromRDF=function(){var V=E(function*(x,B){const D={},he={"@default":D},W={},{useRdfType:Te=!1,useNativeTypes:de=!1,rdfDirection:we=null}=B;for(const et of x){const Ye="DefaultGraph"===et.graph.termType?"@default":et.graph.value;Ye in he||(he[Ye]={}),"@default"!==Ye&&!(Ye in D)&&(D[Ye]={"@id":Ye});const Ce=he[Ye],Ne=et.subject.value,ke=et.predicate.value,He=et.object;Ne in Ce||(Ce[Ne]={"@id":Ne});const me=Ce[Ne],Se=He.termType.endsWith("Node");if(Se&&!(He.value in Ce)&&(Ce[He.value]={"@id":He.value}),ke===oe&&!Te&&Se){_(me,"@type",He.value,{propertyIsArray:!0});continue}const qe=q(He,de,we,B);if(_(me,ke,qe,{propertyIsArray:!0}),Se)if(He.value===j){const lt=Ce[He.value];"usages"in lt||(lt.usages=[]),lt.usages.push({node:me,property:ke,value:qe})}else W[He.value]=!(He.value in W)&&{node:me,property:ke,value:qe}}for(const et in he){const Ye=he[et];if(!(j in Ye))continue;const Ce=Ye[j];if(Ce.usages){for(let Ne of Ce.usages){let ke=Ne.node,He=Ne.property,me=Ne.value;const Se=[],qe=[];let lt=Object.keys(ke).length;for(;He===L&&A.isObject(W[ke["@id"]])&&A.isArray(ke[F])&&1===ke[F].length&&A.isArray(ke[L])&&1===ke[L].length&&(3===lt||4===lt&&A.isArray(ke["@type"])&&1===ke["@type"].length&&ke["@type"][0]===M)&&(Se.push(ke[F][0]),qe.push(ke["@id"]),Ne=W[ke["@id"]],ke=Ne.node,He=Ne.property,me=Ne.value,lt=Object.keys(ke).length,k.isBlankNode(ke)););delete me["@id"],me["@list"]=Se.reverse();for(const We of qe)delete Ye[We]}delete Ce.usages}}const Ie=[],De=Object.keys(D).sort();for(const et of De){const Ye=D[et];if(et in he){const Ce=Ye["@graph"]=[],Ne=he[et],ke=Object.keys(Ne).sort();for(const He of ke){const me=Ne[He];k.isSubjectReference(me)||Ce.push(me)}}k.isSubjectReference(Ye)||Ie.push(Ye)}return Ie});return function(x,B){return V.apply(this,arguments)}}()},543:(ne,Z,g)=>{"use strict";const E=g(8254),b={};ne.exports=b,b.isSubject=k=>!(!E.isObject(k)||"@value"in k||"@set"in k||"@list"in k)&&(Object.keys(k).length>1||!("@id"in k)),b.isSubjectReference=k=>E.isObject(k)&&1===Object.keys(k).length&&"@id"in k,b.isValue=k=>E.isObject(k)&&"@value"in k,b.isList=k=>E.isObject(k)&&"@list"in k,b.isGraph=k=>E.isObject(k)&&"@graph"in k&&1===Object.keys(k).filter(A=>"@id"!==A&&"@index"!==A).length,b.isSimpleGraph=k=>b.isGraph(k)&&!("@id"in k),b.isBlankNode=k=>{if(E.isObject(k)){if("@id"in k){const A=k["@id"];return!E.isString(A)||0===A.indexOf("_:")}return 0===Object.keys(k).length||!("@value"in k||"@set"in k||"@list"in k)}return!1}},7661:(ne,Z,g)=>{var E=g(7156).default;const b=g(1986),k=g(8924),A=g(3521),P=g(4198),_=A.IdentifierIssuer,y=g(1874),M=g(1072),F=g(7260),{expand:L}=g(3860),{flatten:j}=g(8295),{fromRDF:oe}=g(9767),{toRDF:C}=g(240),{frameMergedOrDefault:Y,cleanupNull:le}=g(9193),{isArray:K,isObject:re,isString:te}=g(8254),{isSubjectReference:q}=g(543),{expandIri:V,getInitialContext:x,process:B,processingMode:D}=g(9611),{compact:he,compactIri:W}=g(8809),{createNodeMap:Te,createMergedNodeMap:de,mergeNodeMaps:we}=g(9783),{logEventHandler:Ie,logWarningEventHandler:De,safeEventHandler:et,setDefaultEventHandler:Ye,setupEventHandler:Ce,strictEventHandler:Ne,unhandledEventHandler:ke}=g(3855),He=function(Se){const qe={},We=new M({max:100});function _e(z,{documentLoader:O=Se.documentLoader,...ae}){if(z&&"compactionMap"in z)throw new y('"compactionMap" not supported.',"jsonld.OptionsError");if(z&&"expansionMap"in z)throw new y('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:O},ae,z,{eventHandler:Ce({options:z})})}return Se.compact=function(){var z=E(function*(O,ae,H){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ae)throw new y("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===O)return null;let Fe;(H=_e(H,{base:te(O)?O:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new P({sharedCache:We})})).link&&(H.skipExpansion=!0),H.compactToRelative||delete H.base,Fe=H.skipExpansion?O:yield Se.expand(O,H);const Ke=yield Se.processContext(x(H),ae,H);let fe=yield he({activeCtx:Ke,element:Fe,options:H});H.compactArrays&&!H.graph&&K(fe)?1===fe.length?fe=fe[0]:0===fe.length&&(fe={}):H.graph&&re(fe)&&(fe=[fe]),re(ae)&&"@context"in ae&&(ae=ae["@context"]),ae=A.clone(ae),K(ae)||(ae=[ae]);const ee=ae;ae=[];for(let R=0;R<ee.length;++R)(!re(ee[R])||Object.keys(ee[R]).length>0)&&ae.push(ee[R]);const G=ae.length>0;if(1===ae.length&&(ae=ae[0]),K(fe)){const R=W({activeCtx:Ke,iri:"@graph",relativeTo:{vocab:!0}}),I=fe;fe={},G&&(fe["@context"]=ae),fe[R]=I}else if(re(fe)&&G){const R=fe;fe={"@context":ae};for(const I in R)fe[I]=R[I]}return fe});return function(O,ae,H){return z.apply(this,arguments)}}(),Se.expand=function(){var z=E(function*(O,ae){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const H={},Fe=[];if("expandContext"in(ae=_e(ae,{keepFreeFloatingNodes:!1,contextResolver:new P({sharedCache:We})}))){const G=A.clone(ae.expandContext);H.expandContext=re(G)&&"@context"in G?G:{"@context":G},Fe.push(H.expandContext)}let Ke;if(te(O)){const G=yield Se.get(O,ae);Ke=G.documentUrl,H.input=G.document,G.contextUrl&&(H.remoteContext={"@context":G.contextUrl},Fe.push(H.remoteContext))}else H.input=A.clone(O);"base"in ae||(ae.base=Ke||"");let fe=x(ae);for(const G of Fe)fe=yield B({activeCtx:fe,localCtx:G,options:ae});let ee=yield L({activeCtx:fe,element:H.input,options:ae});return re(ee)&&"@graph"in ee&&1===Object.keys(ee).length?ee=ee["@graph"]:null===ee&&(ee=[]),K(ee)||(ee=[ee]),ee});return function(O,ae){return z.apply(this,arguments)}}(),Se.flatten=function(){var z=E(function*(O,ae,H){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ae="function"==typeof ae?null:ae||null,H=_e(H,{base:te(O)?O:"",contextResolver:new P({sharedCache:We})});const Fe=yield Se.expand(O,H),Ke=j(Fe);return null===ae?Ke:(H.graph=!0,H.skipExpansion=!0,yield Se.compact(Ke,ae,H))});return function(O,ae,H){return z.apply(this,arguments)}}(),Se.frame=function(){var z=E(function*(O,ae,H){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(H=_e(H,{base:te(O)?O:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new P({sharedCache:We})}),te(ae)){const ge=yield Se.get(ae,H);if(ae=ge.document,ge.contextUrl){let ze=ae["@context"];ze?K(ze)?ze.push(ge.contextUrl):ze=[ze,ge.contextUrl]:ze=ge.contextUrl,ae["@context"]=ze}}const Fe=ae&&ae["@context"]||{},Ke=yield Se.processContext(x(H),Fe,H);H.hasOwnProperty("omitGraph")||(H.omitGraph=D(Ke,1.1)),H.hasOwnProperty("pruneBlankNodeIdentifiers")||(H.pruneBlankNodeIdentifiers=D(Ke,1.1));const fe=yield Se.expand(O,H),ee={...H};ee.isFrame=!0,ee.keepFreeFloatingNodes=!0;const G=yield Se.expand(ae,ee),R=Object.keys(ae).map(ge=>V(Ke,ge,{vocab:!0}));ee.merged=!R.includes("@graph"),ee.is11=D(Ke,1.1);const I=Y(fe,G,ee);ee.graph=!H.omitGraph,ee.skipExpansion=!0,ee.link={},ee.framing=!0;let ue=yield Se.compact(I,Fe,ee);return ee.link={},ue=le(ue,ee),ue});return function(O,ae,H){return z.apply(this,arguments)}}(),Se.link=function(){var z=E(function*(O,ae,H){const Fe={};return ae&&(Fe["@context"]=ae),Fe["@embed"]="@link",Se.frame(O,Fe,H)});return function(O,ae,H){return z.apply(this,arguments)}}(),Se.normalize=Se.canonize=function(){var z=E(function*(O,ae){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ae=_e(ae,{base:te(O)?O:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new P({sharedCache:We})}))){if("application/n-quads"!==ae.inputFormat&&"application/nquads"!==ae.inputFormat)throw new y("Unknown canonicalization input format.","jsonld.CanonizeError");const Ke=F.parse(O);return b.canonize(Ke,ae)}const H={...ae};delete H.format,H.produceGeneralizedRdf=!1;const Fe=yield Se.toRDF(O,H);return b.canonize(Fe,ae)});return function(O,ae){return z.apply(this,arguments)}}(),Se.fromRDF=function(){var z=E(function*(O,ae){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ae=_e(ae,{format:te(O)?"application/n-quads":void 0});const{format:H}=ae;let{rdfParser:Fe}=ae;if(H){if(Fe=Fe||qe[H],!Fe)throw new y("Unknown input format.","jsonld.UnknownFormat",{format:H})}else Fe=()=>O;const Ke=yield Fe(O);return oe(Ke,ae)});return function(O,ae){return z.apply(this,arguments)}}(),Se.toRDF=function(){var z=E(function*(O,ae){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let H;H=(ae=_e(ae,{base:te(O)?O:"",skipExpansion:!1,contextResolver:new P({sharedCache:We})})).skipExpansion?O:yield Se.expand(O,ae);const Fe=C(H,ae);if(ae.format){if("application/n-quads"===ae.format||"application/nquads"===ae.format)return F.serialize(Fe);throw new y("Unknown output format.","jsonld.UnknownFormat",{format:ae.format})}return Fe});return function(O,ae){return z.apply(this,arguments)}}(),Se.createNodeMap=function(){var z=E(function*(O,ae){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ae=_e(ae,{base:te(O)?O:"",contextResolver:new P({sharedCache:We})});const H=yield Se.expand(O,ae);return de(H,ae)});return function(O,ae){return z.apply(this,arguments)}}(),Se.merge=function(){var z=E(function*(O,ae,H){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!K(O))throw new TypeError('Could not merge, "docs" must be an array.');ae="function"==typeof ae?null:ae||null,H=_e(H,{contextResolver:new P({sharedCache:We})});const Fe=yield Promise.all(O.map(ge=>{const ze={...H};return Se.expand(ge,ze)}));let Ke=!0;"mergeNodes"in H&&(Ke=H.mergeNodes);const fe=H.issuer||new _("_:b"),ee={"@default":{}};for(let ge=0;ge<Fe.length;++ge){const ze=A.relabelBlankNodes(Fe[ge],{issuer:new _("_:b"+ge+"-")}),Je=Ke||0===ge?ee:{"@default":{}};if(Te(ze,Je,"@default",fe),Je!==ee)for(const ot in Je){const kt=Je[ot];if(!(ot in ee)){ee[ot]=kt;continue}const _t=ee[ot];for(const Wt in kt)Wt in _t||(_t[Wt]=kt[Wt])}}const G=we(ee),R=[],I=Object.keys(G).sort();for(let ge=0;ge<I.length;++ge){const ze=G[I[ge]];q(ze)||R.push(ze)}return null===ae?R:(H.graph=!0,H.skipExpansion=!0,yield Se.compact(R,ae,H))});return function(O,ae,H){return z.apply(this,arguments)}}(),Object.defineProperty(Se,"documentLoader",{get:()=>Se._documentLoader,set:z=>Se._documentLoader=z}),Se.documentLoader=function(){var z=E(function*(O){throw new y("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:O})});return function(O){return z.apply(this,arguments)}}(),Se.get=function(){var z=E(function*(O,ae){let H;H="function"==typeof ae.documentLoader?ae.documentLoader:Se.documentLoader;const Fe=yield H(O);try{if(!Fe.document)throw new y("No remote document found at the given URL.","jsonld.NullRemoteDocument");te(Fe.document)&&(Fe.document=JSON.parse(Fe.document))}catch(Ke){throw new y("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ke,remoteDoc:Fe})}return Fe});return function(O,ae){return z.apply(this,arguments)}}(),Se.processContext=function(){var z=E(function*(O,ae,H){return H=_e(H,{base:"",contextResolver:new P({sharedCache:We})}),null===ae?x(H):(ae=A.clone(ae),re(ae)&&"@context"in ae||(ae={"@context":ae}),B({activeCtx:O,localCtx:ae,options:H}))});return function(O,ae,H){return z.apply(this,arguments)}}(),Se.getContextValue=g(9611).getContextValue,Se.documentLoaders={},Se.useDocumentLoader=function(z){if(!(z in Se.documentLoaders))throw new y('Unknown document loader type: "'+z+'"',"jsonld.UnknownDocumentLoader",{type:z});Se.documentLoader=Se.documentLoaders[z].apply(Se,Array.prototype.slice.call(arguments,1))},Se.registerRDFParser=function(z,O){qe[z]=O},Se.unregisterRDFParser=function(z){delete qe[z]},Se.registerRDFParser("application/n-quads",F.parse),Se.registerRDFParser("application/nquads",F.parse),Se.url=g(2651),Se.logEventHandler=Ie,Se.logWarningEventHandler=De,Se.safeEventHandler=et,Se.setDefaultEventHandler=Ye,Se.strictEventHandler=Ne,Se.unhandledEventHandler=ke,Se.util=A,Object.assign(Se,A),Se.promises=Se,Se.RequestQueue=g(4044),Se.JsonLdProcessor=g(1828)(Se),k.setupGlobals(Se),k.setupDocumentLoaders(Se),Se},me=function(){return He(function(){return me()})};He(me),ne.exports=me},9783:(ne,Z,g)=>{"use strict";const{isKeyword:E}=g(9611),b=g(543),k=g(8254),A=g(3521),P=g(1874),_={};ne.exports=_,_.createMergedNodeMap=(y,M)=>{const F=(M=M||{}).issuer||new A.IdentifierIssuer("_:b"),L={"@default":{}};return _.createNodeMap(y,L,"@default",F),_.mergeNodeMaps(L)},_.createNodeMap=(y,M,F,L,j,oe)=>{if(k.isArray(y)){for(const K of y)_.createNodeMap(K,M,F,L,void 0,oe);return}if(!k.isObject(y))return void(oe&&oe.push(y));if(b.isValue(y)){if("@type"in y){let K=y["@type"];0===K.indexOf("_:")&&(y["@type"]=K=L.getId(K))}return void(oe&&oe.push(y))}if(oe&&b.isList(y)){const K=[];return _.createNodeMap(y["@list"],M,F,L,j,K),void oe.push({"@list":K})}if("@type"in y){const K=y["@type"];for(const re of K)0===re.indexOf("_:")&&L.getId(re)}k.isUndefined(j)&&(j=b.isBlankNode(y)?L.getId(y["@id"]):y["@id"]),oe&&oe.push({"@id":j});const C=M[F],Y=C[j]=C[j]||{};Y["@id"]=j;const le=Object.keys(y).sort();for(let K of le){if("@id"===K)continue;if("@reverse"===K){const te={"@id":j},q=y["@reverse"];for(const V in q){const x=q[V];for(const B of x){let D=B["@id"];b.isBlankNode(B)&&(D=L.getId(D)),_.createNodeMap(B,M,F,L,D),A.addValue(C[D],V,te,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===K){j in M||(M[j]={}),_.createNodeMap(y[K],M,j,L);continue}if("@included"===K){_.createNodeMap(y[K],M,F,L);continue}if("@type"!==K&&E(K)){if("@index"===K&&K in Y&&(y[K]!==Y[K]||y[K]["@id"]!==Y[K]["@id"]))throw new P("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:Y});Y[K]=y[K];continue}const re=y[K];if(0===K.indexOf("_:")&&(K=L.getId(K)),0!==re.length)for(let te of re)if("@type"===K&&(te=0===te.indexOf("_:")?L.getId(te):te),b.isSubject(te)||b.isSubjectReference(te)){if("@id"in te&&!te["@id"])continue;const q=b.isBlankNode(te)?L.getId(te["@id"]):te["@id"];A.addValue(Y,K,{"@id":q},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(te,M,F,L,q)}else if(b.isValue(te))A.addValue(Y,K,te,{propertyIsArray:!0,allowDuplicate:!1});else if(b.isList(te)){const q=[];_.createNodeMap(te["@list"],M,F,L,j,q),te={"@list":q},A.addValue(Y,K,te,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(te,M,F,L,j),A.addValue(Y,K,te,{propertyIsArray:!0,allowDuplicate:!1});else A.addValue(Y,K,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=y=>{const M={};for(const F of Object.keys(y).sort())for(const L of Object.keys(y[F]).sort()){const j=y[F][L];L in M||(M[L]={"@id":L});const oe=M[L];for(const C of Object.keys(j).sort())if(E(C)&&"@type"!==C)oe[C]=A.clone(j[C]);else for(const Y of j[C])A.addValue(oe,C,A.clone(Y),{propertyIsArray:!0,allowDuplicate:!1})}return M},_.mergeNodeMaps=y=>{const M=y["@default"],F=Object.keys(y).sort();for(const L of F){if("@default"===L)continue;const j=y[L];let oe=M[L];oe?"@graph"in oe||(oe["@graph"]=[]):M[L]=oe={"@id":L,"@graph":[]};const C=oe["@graph"];for(const Y of Object.keys(j).sort()){const le=j[Y];b.isSubjectReference(le)||C.push(le)}}return M}},8924:(ne,Z,g)=>{"use strict";const E=g(627),b={};ne.exports=b,b.setupDocumentLoaders=function(k){typeof XMLHttpRequest<"u"&&(k.documentLoaders.xhr=E,k.useDocumentLoader("xhr"))},b.setupGlobals=function(k){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:k.JsonLdProcessor})}},240:(ne,Z,g)=>{"use strict";const{createNodeMap:E}=g(9783),{isKeyword:b}=g(9611),k=g(543),A=g(5041),P=g(8254),_=g(3521),{handleEvent:y}=g(3855),{RDF_FIRST:M,RDF_REST:F,RDF_NIL:L,RDF_TYPE:j,RDF_JSON_LITERAL:oe,RDF_LANGSTRING:C,XSD_BOOLEAN:Y,XSD_DOUBLE:le,XSD_INTEGER:K,XSD_STRING:re}=g(6982),{isAbsolute:te}=g(2651),q={};function V(D,he,W,Te,de){const we=Object.keys(he).sort();for(const Ie of we){const De=he[Ie],et=Object.keys(De).sort();for(let Ye of et){const Ce=De[Ye];if("@type"===Ye)Ye=j;else if(b(Ye))continue;for(const Ne of Ce){const ke={termType:Ie.startsWith("_:")?"BlankNode":"NamedNode",value:Ie};if(!te(Ie)){de.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Ie}},options:de});continue}const He={termType:Ye.startsWith("_:")?"BlankNode":"NamedNode",value:Ye};if(!te(Ye)){de.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ye}},options:de});continue}if("BlankNode"===He.termType&&!de.produceGeneralizedRdf){de.eventHandler&&y({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:Te.getOldIds().find(Se=>Te.getId(Se)===Ye)}},options:de});continue}const me=B(Ne,Te,D,W,de.rdfDirection,de);me&&D.push({subject:ke,predicate:He,object:me,graph:W})}}}}function B(D,he,W,Te,de,we){const Ie={};if(k.isValue(D)){Ie.termType="Literal",Ie.value=void 0,Ie.datatype={termType:"NamedNode"};let De=D["@value"];const et=D["@type"]||null;"@json"===et?(Ie.value=A(De),Ie.datatype.value=oe):P.isBoolean(De)?(Ie.value=De.toString(),Ie.datatype.value=et||Y):P.isDouble(De)||et===le?(P.isDouble(De)||(De=parseFloat(De)),Ie.value=De.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ie.datatype.value=et||le):P.isNumber(De)?(Ie.value=De.toFixed(0),Ie.datatype.value=et||K):"i18n-datatype"===de&&"@direction"in D?(Ie.datatype.value="https://www.w3.org/ns/i18n#"+(D["@language"]||"")+`_${D["@direction"]}`,Ie.value=De):"@language"in D?(Ie.value=De,Ie.datatype.value=et||C,Ie.language=D["@language"]):(Ie.value=De,Ie.datatype.value=et||re)}else if(k.isList(D)){const De=function x(D,he,W,Te,de,we){const Ie={termType:"NamedNode",value:M},De={termType:"NamedNode",value:F},et={termType:"NamedNode",value:L},Ye=D.pop(),Ce=Ye?{termType:"BlankNode",value:he.getId()}:et;let Ne=Ce;for(const ke of D){const He=B(ke,he,W,Te,de,we),me={termType:"BlankNode",value:he.getId()};W.push({subject:Ne,predicate:Ie,object:He,graph:Te}),W.push({subject:Ne,predicate:De,object:me,graph:Te}),Ne=me}if(Ye){const ke=B(Ye,he,W,Te,de,we);W.push({subject:Ne,predicate:Ie,object:ke,graph:Te}),W.push({subject:Ne,predicate:De,object:et,graph:Te})}return Ce}(D["@list"],he,W,Te,de,we);Ie.termType=De.termType,Ie.value=De.value}else{const De=P.isObject(D)?D["@id"]:D;Ie.termType=De.startsWith("_:")?"BlankNode":"NamedNode",Ie.value=De}return"NamedNode"!==Ie.termType||te(Ie.value)?Ie:(we.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Ie.value}},options:we}),null)}ne.exports=q,q.toRDF=(D,he)=>{const W=new _.IdentifierIssuer("_:b"),Te={"@default":{}};E(D,Te,"@default",W);const de=[],we=Object.keys(Te).sort();for(const Ie of we){let De;if("@default"===Ie)De={termType:"DefaultGraph",value:""};else{if(!te(Ie)){he.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Ie}},options:he});continue}De=Ie.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},De.value=Ie}V(de,Te[Ie],De,W,he)}return de}},8254:ne=>{"use strict";const Z={};ne.exports=Z,Z.isArray=Array.isArray,Z.isBoolean=g=>"boolean"==typeof g||"[object Boolean]"===Object.prototype.toString.call(g),Z.isDouble=g=>Z.isNumber(g)&&(-1!==String(g).indexOf(".")||Math.abs(g)>=1e21),Z.isEmptyObject=g=>Z.isObject(g)&&0===Object.keys(g).length,Z.isNumber=g=>"number"==typeof g||"[object Number]"===Object.prototype.toString.call(g),Z.isNumeric=g=>!isNaN(parseFloat(g))&&isFinite(g),Z.isObject=g=>"[object Object]"===Object.prototype.toString.call(g),Z.isString=g=>"string"==typeof g||"[object String]"===Object.prototype.toString.call(g),Z.isUndefined=g=>typeof g>"u"},2651:(ne,Z,g)=>{"use strict";const E=g(8254),b={};ne.exports=b,b.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.parse=(A,P)=>{const _={},y=b.parsers[P||"full"],M=y.regex.exec(A);let F=y.keys.length;for(;F--;)_[y.keys[F]]=void 0===M[F]?null:M[F];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=b.removeDotSegments(_.path),_},b.prependBase=(A,P)=>{if(null===A||b.isAbsolute(P))return P;(!A||E.isString(A))&&(A=b.parse(A||""));const _=b.parse(P),y={protocol:A.protocol||""};if(null!==_.authority)y.authority=_.authority,y.path=_.path,y.query=_.query;else if(y.authority=A.authority,""===_.path)y.path=A.path,y.query=null!==_.query?_.query:A.query;else{if(0===_.path.indexOf("/"))y.path=_.path;else{let F=A.path;F=F.substr(0,F.lastIndexOf("/")+1),(F.length>0||A.authority)&&"/"!==F.substr(-1)&&(F+="/"),F+=_.path,y.path=F}y.query=_.query}""!==_.path&&(y.path=b.removeDotSegments(y.path));let M=y.protocol;return null!==y.authority&&(M+="//"+y.authority),M+=y.path,null!==y.query&&(M+="?"+y.query),null!==_.fragment&&(M+="#"+_.fragment),""===M&&(M="./"),M},b.removeBase=(A,P)=>{if(null===A)return P;(!A||E.isString(A))&&(A=b.parse(A||""));let _="";if(""!==A.href?_+=(A.protocol||"")+"//"+(A.authority||""):P.indexOf("//")&&(_+="//"),0!==P.indexOf(_))return P;const y=b.parse(P.substr(_.length)),M=A.normalizedPath.split("/"),F=y.normalizedPath.split("/"),L=y.fragment||y.query?0:1;for(;M.length>0&&F.length>L&&M[0]===F[0];)M.shift(),F.shift();let j="";if(M.length>0){M.pop();for(let oe=0;oe<M.length;++oe)j+="../"}return j+=F.join("/"),null!==y.query&&(j+="?"+y.query),null!==y.fragment&&(j+="#"+y.fragment),""===j&&(j="./"),j},b.removeDotSegments=A=>{if(0===A.length)return"";const P=A.split("/"),_=[];for(;P.length>0;){const y=P.shift(),M=0===P.length;"."!==y?".."!==y?_.push(y):(_.pop(),M&&_.push("")):M&&_.push("")}return"/"===A[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const k=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;b.isAbsolute=A=>E.isString(A)&&k.test(A),b.isRelative=A=>E.isString(A)},3521:(ne,Z,g)=>{"use strict";const E=g(543),b=g(8254),k=g(1986).IdentifierIssuer,A=g(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,y=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,M=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,L_headers_accept="application/ld+json, application/json",j={};function oe(C,Y){if(b.isArray(Y))for(let le=0;le<Y.length;++le)Y[le]=oe(C,Y[le]);else if(E.isList(Y))Y["@list"]=oe(C,Y["@list"]);else if(b.isObject(Y)){E.isBlankNode(Y)&&(Y["@id"]=C.getId(Y["@id"]));const le=Object.keys(Y).sort();for(let K=0;K<le.length;++K){const re=le[K];"@id"!==re&&(Y[re]=oe(C,Y[re]))}}return Y}ne.exports=j,j.IdentifierIssuer=k,j.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,j.REGEX_KEYWORD=/^@[a-zA-Z]+$/,j.clone=function(C){if(C&&"object"==typeof C){let Y;if(b.isArray(C)){Y=[];for(let le=0;le<C.length;++le)Y[le]=j.clone(C[le])}else if(C instanceof Map){Y=new Map;for(const[le,K]of C)Y.set(le,j.clone(K))}else if(C instanceof Set){Y=new Set;for(const le of C)Y.add(j.clone(le))}else if(b.isObject(C)){Y={};for(const le in C)Y[le]=j.clone(C[le])}else Y=C.toString();return Y}return C},j.asArray=function(C){return Array.isArray(C)?C:[C]},j.buildHeaders=(C={})=>{if(Object.keys(C).some(le=>"accept"===le.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+L_headers_accept+'" is supported.');return Object.assign({Accept:L_headers_accept},C)},j.parseLinkHeader=C=>{const Y={},le=C.match(_);for(let K=0;K<le.length;++K){let re=le[K].match(y);if(!re)continue;const te={target:re[1]},q=re[2];for(;re=M.exec(q);)te[re[1]]=void 0===re[2]?re[3]:re[2];const V=te.rel||"";Array.isArray(Y[V])?Y[V].push(te):Y[V]=Y.hasOwnProperty(V)?[Y[V],te]:te}return Y},j.validateTypeValue=(C,Y)=>{if(!(b.isString(C)||b.isArray(C)&&C.every(le=>b.isString(le)))){if(Y&&b.isObject(C))switch(Object.keys(C).length){case 0:return;case 1:if("@default"in C&&j.asArray(C["@default"]).every(le=>b.isString(le)))return}throw new A('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:C})}},j.hasProperty=(C,Y)=>{if(C.hasOwnProperty(Y)){const le=C[Y];return!b.isArray(le)||le.length>0}return!1},j.hasValue=(C,Y,le)=>{if(j.hasProperty(C,Y)){let K=C[Y];const re=E.isList(K);if(b.isArray(K)||re){re&&(K=K["@list"]);for(let te=0;te<K.length;++te)if(j.compareValues(le,K[te]))return!0}else if(!b.isArray(le))return j.compareValues(le,K)}return!1},j.addValue=(C,Y,le,K)=>{if("propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1),"valueIsArray"in K||(K.valueIsArray=!1),"allowDuplicate"in K||(K.allowDuplicate=!0),"prependValue"in K||(K.prependValue=!1),K.valueIsArray)C[Y]=le;else if(b.isArray(le)){0===le.length&&K.propertyIsArray&&!C.hasOwnProperty(Y)&&(C[Y]=[]),K.prependValue&&(le=le.concat(C[Y]),C[Y]=[]);for(let re=0;re<le.length;++re)j.addValue(C,Y,le[re],K)}else if(C.hasOwnProperty(Y)){const re=!K.allowDuplicate&&j.hasValue(C,Y,le);!b.isArray(C[Y])&&(!re||K.propertyIsArray)&&(C[Y]=[C[Y]]),re||(K.prependValue?C[Y].unshift(le):C[Y].push(le))}else C[Y]=K.propertyIsArray?[le]:le},j.getValues=(C,Y)=>[].concat(C[Y]||[]),j.removeProperty=(C,Y)=>{delete C[Y]},j.removeValue=(C,Y,le,K)=>{"propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1);const re=j.getValues(C,Y).filter(te=>!j.compareValues(te,le));0===re.length?j.removeProperty(C,Y):C[Y]=1!==re.length||K.propertyIsArray?re:re[0]},j.relabelBlankNodes=(C,Y)=>oe((Y=Y||{}).issuer||new k("_:b"),C),j.compareValues=(C,Y)=>!!(C===Y||E.isValue(C)&&E.isValue(Y)&&C["@value"]===Y["@value"]&&C["@type"]===Y["@type"]&&C["@language"]===Y["@language"]&&C["@index"]===Y["@index"])||!!(b.isObject(C)&&"@id"in C&&b.isObject(Y)&&"@id"in Y)&&C["@id"]===Y["@id"],j.compareShortestLeast=(C,Y)=>C.length<Y.length?-1:Y.length<C.length?1:C===Y?0:C<Y?-1:1},5041:ne=>{"use strict";ne.exports=function Z(g){return null===g||"object"!=typeof g||null!=g.toJSON?JSON.stringify(g):Array.isArray(g)?"["+g.reduce((E,b,k)=>E+(0===k?"":",")+Z(void 0===b||"symbol"==typeof b?null:b),"")+"]":"{"+Object.keys(g).sort().reduce((E,b,k)=>void 0===g[b]||"symbol"==typeof g[b]?E:E+(0===E.length?"":",")+Z(b)+":"+Z(g[b]),"")+"}"}},1072:(ne,Z,g)=>{"use strict";const E=g(4439),b=Symbol("max"),k=Symbol("length"),A=Symbol("lengthCalculator"),P=Symbol("allowStale"),_=Symbol("maxAge"),y=Symbol("dispose"),M=Symbol("noDisposeOnSet"),F=Symbol("lruList"),L=Symbol("cache"),j=Symbol("updateAgeOnGet"),oe=()=>1,Y=(V,x,B)=>{const D=V[L].get(x);if(D){const he=D.value;if(le(V,he)){if(re(V,D),!V[P])return}else B&&(V[j]&&(D.value.now=Date.now()),V[F].unshiftNode(D));return he.value}},le=(V,x)=>{if(!x||!x.maxAge&&!V[_])return!1;const B=Date.now()-x.now;return x.maxAge?B>x.maxAge:V[_]&&B>V[_]},K=V=>{if(V[k]>V[b])for(let x=V[F].tail;V[k]>V[b]&&null!==x;){const B=x.prev;re(V,x),x=B}},re=(V,x)=>{if(x){const B=x.value;V[y]&&V[y](B.key,B.value),V[k]-=B.length,V[L].delete(B.key),V[F].removeNode(x)}};class te{constructor(x,B,D,he,W){this.key=x,this.value=B,this.length=D,this.now=he,this.maxAge=W||0}}const q=(V,x,B,D)=>{let he=B.value;le(V,he)&&(re(V,B),V[P]||(he=void 0)),he&&x.call(D,he.value,he.key,V)};ne.exports=class C{constructor(x){if("number"==typeof x&&(x={max:x}),x||(x={}),x.max&&("number"!=typeof x.max||x.max<0))throw new TypeError("max must be a non-negative number");this[b]=x.max||1/0;const D=x.length||oe;if(this[A]="function"!=typeof D?oe:D,this[P]=x.stale||!1,x.maxAge&&"number"!=typeof x.maxAge)throw new TypeError("maxAge must be a number");this[_]=x.maxAge||0,this[y]=x.dispose,this[M]=x.noDisposeOnSet||!1,this[j]=x.updateAgeOnGet||!1,this.reset()}set max(x){if("number"!=typeof x||x<0)throw new TypeError("max must be a non-negative number");this[b]=x||1/0,K(this)}get max(){return this[b]}set allowStale(x){this[P]=!!x}get allowStale(){return this[P]}set maxAge(x){if("number"!=typeof x)throw new TypeError("maxAge must be a non-negative number");this[_]=x,K(this)}get maxAge(){return this[_]}set lengthCalculator(x){"function"!=typeof x&&(x=oe),x!==this[A]&&(this[A]=x,this[k]=0,this[F].forEach(B=>{B.length=this[A](B.value,B.key),this[k]+=B.length})),K(this)}get lengthCalculator(){return this[A]}get length(){return this[k]}get itemCount(){return this[F].length}rforEach(x,B){B=B||this;for(let D=this[F].tail;null!==D;){const he=D.prev;q(this,x,D,B),D=he}}forEach(x,B){B=B||this;for(let D=this[F].head;null!==D;){const he=D.next;q(this,x,D,B),D=he}}keys(){return this[F].toArray().map(x=>x.key)}values(){return this[F].toArray().map(x=>x.value)}reset(){this[y]&&this[F]&&this[F].length&&this[F].forEach(x=>this[y](x.key,x.value)),this[L]=new Map,this[F]=new E,this[k]=0}dump(){return this[F].map(x=>!le(this,x)&&{k:x.key,v:x.value,e:x.now+(x.maxAge||0)}).toArray().filter(x=>x)}dumpLru(){return this[F]}set(x,B,D){if((D=D||this[_])&&"number"!=typeof D)throw new TypeError("maxAge must be a number");const he=D?Date.now():0,W=this[A](B,x);if(this[L].has(x)){if(W>this[b])return re(this,this[L].get(x)),!1;const we=this[L].get(x).value;return this[y]&&(this[M]||this[y](x,we.value)),we.now=he,we.maxAge=D,we.value=B,this[k]+=W-we.length,we.length=W,this.get(x),K(this),!0}const Te=new te(x,B,W,he,D);return Te.length>this[b]?(this[y]&&this[y](x,B),!1):(this[k]+=Te.length,this[F].unshift(Te),this[L].set(x,this[F].head),K(this),!0)}has(x){if(!this[L].has(x))return!1;const B=this[L].get(x).value;return!le(this,B)}get(x){return Y(this,x,!0)}peek(x){return Y(this,x,!1)}pop(){const x=this[F].tail;return x?(re(this,x),x.value):null}del(x){re(this,this[L].get(x))}load(x){this.reset();const B=Date.now();for(let D=x.length-1;D>=0;D--){const he=x[D],W=he.e||0;if(0===W)this.set(he.k,he.v);else{const Te=W-B;Te>0&&this.set(he.k,he.v,Te)}}}prune(){this[L].forEach((x,B)=>Y(this,B,!1))}}},6506:(ne,Z,g)=>{var k=g(8745)(g(8492),"DataView");ne.exports=k},9618:(ne,Z,g)=>{var E=g(5602),b=g(1499),k=g(2990),A=g(480),P=g(4469);function _(y){var M=-1,F=null==y?0:y.length;for(this.clear();++M<F;){var L=y[M];this.set(L[0],L[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=A,_.prototype.set=P,ne.exports=_},3597:(ne,Z,g)=>{var E=g(9365),b=g(9343),k=g(4779),A=g(1509),P=g(7137);function _(y){var M=-1,F=null==y?0:y.length;for(this.clear();++M<F;){var L=y[M];this.set(L[0],L[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=A,_.prototype.set=P,ne.exports=_},1136:(ne,Z,g)=>{var k=g(8745)(g(8492),"Map");ne.exports=k},1811:(ne,Z,g)=>{var E=g(3413),b=g(5419),k=g(7253),A=g(1115),P=g(6648);function _(y){var M=-1,F=null==y?0:y.length;for(this.clear();++M<F;){var L=y[M];this.set(L[0],L[1])}}_.prototype.clear=E,_.prototype.delete=b,_.prototype.get=k,_.prototype.has=A,_.prototype.set=P,ne.exports=_},641:(ne,Z,g)=>{var k=g(8745)(g(8492),"Promise");ne.exports=k},1732:(ne,Z,g)=>{var k=g(8745)(g(8492),"Set");ne.exports=k},5960:(ne,Z,g)=>{var E=g(1811),b=g(6151),k=g(2154);function A(P){var _=-1,y=null==P?0:P.length;for(this.__data__=new E;++_<y;)this.add(P[_])}A.prototype.add=A.prototype.push=b,A.prototype.has=k,ne.exports=A},1339:(ne,Z,g)=>{var E=g(3597),b=g(9488),k=g(5943),A=g(5456),P=g(4793),_=g(8689);function y(M){var F=this.__data__=new E(M);this.size=F.size}y.prototype.clear=b,y.prototype.delete=k,y.prototype.get=A,y.prototype.has=P,y.prototype.set=_,ne.exports=y},1763:(ne,Z,g)=>{var E=g(8492);ne.exports=E.Symbol},2760:(ne,Z,g)=>{var E=g(8492);ne.exports=E.Uint8Array},6413:(ne,Z,g)=>{var k=g(8745)(g(8492),"WeakMap");ne.exports=k},7910:ne=>{ne.exports=function Z(g,E,b){switch(b.length){case 0:return g.call(E);case 1:return g.call(E,b[0]);case 2:return g.call(E,b[0],b[1]);case 3:return g.call(E,b[0],b[1],b[2])}return g.apply(E,b)}},2134:ne=>{ne.exports=function Z(g,E){for(var b=-1,k=null==g?0:g.length,A=0,P=[];++b<k;){var _=g[b];E(_,b,g)&&(P[A++]=_)}return P}},1384:(ne,Z,g)=>{var E=g(5025),b=g(1955),k=g(2261),A=g(7525),P=g(5188),_=g(4868),M=Object.prototype.hasOwnProperty;ne.exports=function F(L,j){var oe=k(L),C=!oe&&b(L),Y=!oe&&!C&&A(L),le=!oe&&!C&&!Y&&_(L),K=oe||C||Y||le,re=K?E(L.length,String):[],te=re.length;for(var q in L)(j||M.call(L,q))&&(!K||!("length"==q||Y&&("offset"==q||"parent"==q)||le&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||P(q,te)))&&re.push(q);return re}},3880:ne=>{ne.exports=function Z(g,E){for(var b=-1,k=null==g?0:g.length,A=Array(k);++b<k;)A[b]=E(g[b],b,g);return A}},7853:ne=>{ne.exports=function Z(g,E){for(var b=-1,k=E.length,A=g.length;++b<k;)g[A+b]=E[b];return g}},5916:ne=>{ne.exports=function Z(g,E){for(var b=-1,k=null==g?0:g.length;++b<k;)if(E(g[b],b,g))return!0;return!1}},4056:(ne,Z,g)=>{var E=g(7826);ne.exports=function b(k,A){for(var P=k.length;P--;)if(E(k[P][0],A))return P;return-1}},5103:(ne,Z,g)=>{var E=g(7794),k=g(9386)(E);ne.exports=k},1883:(ne,Z,g)=>{var E=g(7853),b=g(2241);ne.exports=function k(A,P,_,y,M){var F=-1,L=A.length;for(_||(_=b),M||(M=[]);++F<L;){var j=A[F];P>0&&_(j)?P>1?k(j,P-1,_,y,M):E(M,j):y||(M[M.length]=j)}return M}},6483:(ne,Z,g)=>{var b=g(2086)();ne.exports=b},7794:(ne,Z,g)=>{var E=g(6483),b=g(4614);ne.exports=function k(A,P){return A&&E(A,P,b)}},2202:(ne,Z,g)=>{var E=g(4826),b=g(8916);ne.exports=function k(A,P){for(var _=0,y=(P=E(P,A)).length;null!=A&&_<y;)A=A[b(P[_++])];return _&&_==y?A:void 0}},7427:(ne,Z,g)=>{var E=g(7853),b=g(2261);ne.exports=function k(A,P,_){var y=P(A);return b(A)?y:E(y,_(A))}},4590:(ne,Z,g)=>{var E=g(1763),b=g(5933),k=g(9243),_=E?E.toStringTag:void 0;ne.exports=function y(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":_&&_ in Object(M)?b(M):k(M)}},3274:ne=>{ne.exports=function Z(g,E){return null!=g&&E in Object(g)}},3022:(ne,Z,g)=>{var E=g(4590),b=g(3714);ne.exports=function A(P){return b(P)&&"[object Arguments]"==E(P)}},7108:(ne,Z,g)=>{var E=g(7946),b=g(3714);ne.exports=function k(A,P,_,y,M){return A===P||(null==A||null==P||!b(A)&&!b(P)?A!=A&&P!=P:E(A,P,_,y,k,M))}},7946:(ne,Z,g)=>{var E=g(1339),b=g(7469),k=g(1642),A=g(9462),P=g(2472),_=g(2261),y=g(7525),M=g(4868),L="[object Arguments]",j="[object Array]",oe="[object Object]",Y=Object.prototype.hasOwnProperty;ne.exports=function le(K,re,te,q,V,x){var B=_(K),D=_(re),he=B?j:P(K),W=D?j:P(re),Te=(he=he==L?oe:he)==oe,de=(W=W==L?oe:W)==oe,we=he==W;if(we&&y(K)){if(!y(re))return!1;B=!0,Te=!1}if(we&&!Te)return x||(x=new E),B||M(K)?b(K,re,te,q,V,x):k(K,re,he,te,q,V,x);if(!(1&te)){var Ie=Te&&Y.call(K,"__wrapped__"),De=de&&Y.call(re,"__wrapped__");if(Ie||De){var et=Ie?K.value():K,Ye=De?re.value():re;return x||(x=new E),V(et,Ye,te,q,x)}}return!!we&&(x||(x=new E),A(K,re,te,q,V,x))}},2527:(ne,Z,g)=>{var E=g(1339),b=g(7108);ne.exports=function P(_,y,M,F){var L=M.length,j=L,oe=!F;if(null==_)return!j;for(_=Object(_);L--;){var C=M[L];if(oe&&C[2]?C[1]!==_[C[0]]:!(C[0]in _))return!1}for(;++L<j;){var Y=(C=M[L])[0],le=_[Y],K=C[1];if(oe&&C[2]){if(void 0===le&&!(Y in _))return!1}else{var re=new E;if(F)var te=F(le,K,Y,_,y,re);if(!(void 0===te?b(K,le,3,F,re):te))return!1}}return!0}},1082:(ne,Z,g)=>{var E=g(6861),b=g(9950),k=g(9794),A=g(7075),_=/^\[object .+?Constructor\]$/,j=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");ne.exports=function oe(C){return!(!k(C)||b(C))&&(E(C)?j:_).test(A(C))}},8902:(ne,Z,g)=>{var E=g(4590),b=g(7765),k=g(3714),we={};we["[object Float32Array]"]=we["[object Float64Array]"]=we["[object Int8Array]"]=we["[object Int16Array]"]=we["[object Int32Array]"]=we["[object Uint8Array]"]=we["[object Uint8ClampedArray]"]=we["[object Uint16Array]"]=we["[object Uint32Array]"]=!0,we["[object Arguments]"]=we["[object Array]"]=we["[object ArrayBuffer]"]=we["[object Boolean]"]=we["[object DataView]"]=we["[object Date]"]=we["[object Error]"]=we["[object Function]"]=we["[object Map]"]=we["[object Number]"]=we["[object Object]"]=we["[object RegExp]"]=we["[object Set]"]=we["[object String]"]=we["[object WeakMap]"]=!1,ne.exports=function Ie(De){return k(De)&&b(De.length)&&!!we[E(De)]}},1627:(ne,Z,g)=>{var E=g(2924),b=g(8526),k=g(5657),A=g(2261),P=g(2692);ne.exports=function _(y){return"function"==typeof y?y:null==y?k:"object"==typeof y?A(y)?b(y[0],y[1]):E(y):P(y)}},190:(ne,Z,g)=>{var E=g(6587),b=g(366),A=Object.prototype.hasOwnProperty;ne.exports=function P(_){if(!E(_))return b(_);var y=[];for(var M in Object(_))A.call(_,M)&&"constructor"!=M&&y.push(M);return y}},2839:(ne,Z,g)=>{var E=g(5103),b=g(2447);ne.exports=function k(A,P){var _=-1,y=b(A)?Array(A.length):[];return E(A,function(M,F,L){y[++_]=P(M,F,L)}),y}},2924:(ne,Z,g)=>{var E=g(2527),b=g(7895),k=g(2265);ne.exports=function A(P){var _=b(P);return 1==_.length&&_[0][2]?k(_[0][0],_[0][1]):function(y){return y===P||E(y,P,_)}}},8526:(ne,Z,g)=>{var E=g(7108),b=g(5440),k=g(2494),A=g(6300),P=g(3921),_=g(2265),y=g(8916);ne.exports=function L(j,oe){return A(j)&&P(oe)?_(y(j),oe):function(C){var Y=b(C,j);return void 0===Y&&Y===oe?k(C,j):E(oe,Y,3)}}},252:(ne,Z,g)=>{var E=g(3880),b=g(2202),k=g(1627),A=g(2839),P=g(6389),_=g(1156),y=g(9664),M=g(5657),F=g(2261);ne.exports=function L(j,oe,C){oe=oe.length?E(oe,function(K){return F(K)?function(re){return b(re,1===K.length?K[0]:K)}:K}):[M];var Y=-1;oe=E(oe,_(k));var le=A(j,function(K,re,te){return{criteria:E(oe,function(V){return V(K)}),index:++Y,value:K}});return P(le,function(K,re){return y(K,re,C)})}},3400:ne=>{ne.exports=function Z(g){return function(E){return E?.[g]}}},6443:(ne,Z,g)=>{var E=g(2202);ne.exports=function b(k){return function(A){return E(A,k)}}},8951:(ne,Z,g)=>{var E=g(5657),b=g(2394),k=g(6814);ne.exports=function A(P,_){return k(b(P,_,E),P+"")}},8235:(ne,Z,g)=>{var E=g(1075),b=g(9383),k=g(5657);ne.exports=b?function(P,_){return b(P,"toString",{configurable:!0,enumerable:!1,value:E(_),writable:!0})}:k},6389:ne=>{ne.exports=function Z(g,E){var b=g.length;for(g.sort(E);b--;)g[b]=g[b].value;return g}},5025:ne=>{ne.exports=function Z(g,E){for(var b=-1,k=Array(g);++b<g;)k[b]=E(b);return k}},7002:(ne,Z,g)=>{var E=g(1763),b=g(3880),k=g(2261),A=g(3423),_=E?E.prototype:void 0,y=_?_.toString:void 0;ne.exports=function M(F){if("string"==typeof F)return F;if(k(F))return b(F,M)+"";if(A(F))return y?y.call(F):"";var L=F+"";return"0"==L&&1/F==-1/0?"-0":L}},1156:ne=>{ne.exports=function Z(g){return function(E){return g(E)}}},4795:ne=>{ne.exports=function Z(g,E){return g.has(E)}},4826:(ne,Z,g)=>{var E=g(2261),b=g(6300),k=g(163),A=g(2674);ne.exports=function P(_,y){return E(_)?_:b(_,y)?[_]:k(A(_))}},5400:(ne,Z,g)=>{var E=g(3423);ne.exports=function b(k,A){if(k!==A){var P=void 0!==k,_=null===k,y=k==k,M=E(k),F=void 0!==A,L=null===A,j=A==A,oe=E(A);if(!L&&!oe&&!M&&k>A||M&&F&&j&&!L&&!oe||_&&F&&j||!P&&j||!y)return 1;if(!_&&!M&&!oe&&k<A||oe&&P&&y&&!_&&!M||L&&P&&y||!F&&y||!j)return-1}return 0}},9664:(ne,Z,g)=>{var E=g(5400);ne.exports=function b(k,A,P){for(var _=-1,y=k.criteria,M=A.criteria,F=y.length,L=P.length;++_<F;){var j=E(y[_],M[_]);if(j)return _>=L?j:j*("desc"==P[_]?-1:1)}return k.index-A.index}},6189:(ne,Z,g)=>{var E=g(8492);ne.exports=E["__core-js_shared__"]},9386:(ne,Z,g)=>{var E=g(2447);ne.exports=function b(k,A){return function(P,_){if(null==P)return P;if(!E(P))return k(P,_);for(var y=P.length,M=A?y:-1,F=Object(P);(A?M--:++M<y)&&!1!==_(F[M],M,F););return P}}},2086:ne=>{ne.exports=function Z(g){return function(E,b,k){for(var A=-1,P=Object(E),_=k(E),y=_.length;y--;){var M=_[g?y:++A];if(!1===b(P[M],M,P))break}return E}}},9383:(ne,Z,g)=>{var E=g(8745),b=function(){try{var k=E(Object,"defineProperty");return k({},"",{}),k}catch{}}();ne.exports=b},7469:(ne,Z,g)=>{var E=g(5960),b=g(5916),k=g(4795);ne.exports=function _(y,M,F,L,j,oe){var C=1&F,Y=y.length,le=M.length;if(Y!=le&&!(C&&le>Y))return!1;var K=oe.get(y),re=oe.get(M);if(K&&re)return K==M&&re==y;var te=-1,q=!0,V=2&F?new E:void 0;for(oe.set(y,M),oe.set(M,y);++te<Y;){var x=y[te],B=M[te];if(L)var D=C?L(B,x,te,M,y,oe):L(x,B,te,y,M,oe);if(void 0!==D){if(D)continue;q=!1;break}if(V){if(!b(M,function(he,W){if(!k(V,W)&&(x===he||j(x,he,F,L,oe)))return V.push(W)})){q=!1;break}}else if(x!==B&&!j(x,B,F,L,oe)){q=!1;break}}return oe.delete(y),oe.delete(M),q}},1642:(ne,Z,g)=>{var E=g(1763),b=g(2760),k=g(7826),A=g(7469),P=g(1575),_=g(8e3),V=E?E.prototype:void 0,x=V?V.valueOf:void 0;ne.exports=function B(D,he,W,Te,de,we,Ie){switch(W){case"[object DataView]":if(D.byteLength!=he.byteLength||D.byteOffset!=he.byteOffset)return!1;D=D.buffer,he=he.buffer;case"[object ArrayBuffer]":return!(D.byteLength!=he.byteLength||!we(new b(D),new b(he)));case"[object Boolean]":case"[object Date]":case"[object Number]":return k(+D,+he);case"[object Error]":return D.name==he.name&&D.message==he.message;case"[object RegExp]":case"[object String]":return D==he+"";case"[object Map]":var De=P;case"[object Set]":if(De||(De=_),D.size!=he.size&&!(1&Te))return!1;var Ye=Ie.get(D);if(Ye)return Ye==he;Te|=2,Ie.set(D,he);var Ce=A(De(D),De(he),Te,de,we,Ie);return Ie.delete(D),Ce;case"[object Symbol]":if(x)return x.call(D)==x.call(he)}return!1}},9462:(ne,Z,g)=>{var E=g(6131),A=Object.prototype.hasOwnProperty;ne.exports=function P(_,y,M,F,L,j){var oe=1&M,C=E(_),Y=C.length;if(Y!=E(y).length&&!oe)return!1;for(var re=Y;re--;){var te=C[re];if(!(oe?te in y:A.call(y,te)))return!1}var q=j.get(_),V=j.get(y);if(q&&V)return q==y&&V==_;var x=!0;j.set(_,y),j.set(y,_);for(var B=oe;++re<Y;){var D=_[te=C[re]],he=y[te];if(F)var W=oe?F(he,D,te,y,_,j):F(D,he,te,_,y,j);if(!(void 0===W?D===he||L(D,he,M,F,j):W)){x=!1;break}B||(B="constructor"==te)}if(x&&!B){var Te=_.constructor,de=y.constructor;Te!=de&&"constructor"in _&&"constructor"in y&&!("function"==typeof Te&&Te instanceof Te&&"function"==typeof de&&de instanceof de)&&(x=!1)}return j.delete(_),j.delete(y),x}},248:ne=>{var Z="object"==typeof global&&global&&global.Object===Object&&global;ne.exports=Z},6131:(ne,Z,g)=>{var E=g(7427),b=g(771),k=g(4614);ne.exports=function A(P){return E(P,k,b)}},4113:(ne,Z,g)=>{var E=g(29);ne.exports=function b(k,A){var P=k.__data__;return E(A)?P["string"==typeof A?"string":"hash"]:P.map}},7895:(ne,Z,g)=>{var E=g(3921),b=g(4614);ne.exports=function k(A){for(var P=b(A),_=P.length;_--;){var y=P[_],M=A[y];P[_]=[y,M,E(M)]}return P}},8745:(ne,Z,g)=>{var E=g(1082),b=g(1015);ne.exports=function k(A,P){var _=b(A,P);return E(_)?_:void 0}},5933:(ne,Z,g)=>{var E=g(1763),b=Object.prototype,k=b.hasOwnProperty,A=b.toString,P=E?E.toStringTag:void 0;ne.exports=function _(y){var M=k.call(y,P),F=y[P];try{y[P]=void 0;var L=!0}catch{}var j=A.call(y);return L&&(M?y[P]=F:delete y[P]),j}},771:(ne,Z,g)=>{var E=g(2134),b=g(1315),A=Object.prototype.propertyIsEnumerable,P=Object.getOwnPropertySymbols;ne.exports=P?function(y){return null==y?[]:(y=Object(y),E(P(y),function(M){return A.call(y,M)}))}:b},2472:(ne,Z,g)=>{var E=g(6506),b=g(1136),k=g(641),A=g(1732),P=g(6413),_=g(4590),y=g(7075),M="[object Map]",L="[object Promise]",j="[object Set]",oe="[object WeakMap]",C="[object DataView]",Y=y(E),le=y(b),K=y(k),re=y(A),te=y(P),q=_;(E&&q(new E(new ArrayBuffer(1)))!=C||b&&q(new b)!=M||k&&q(k.resolve())!=L||A&&q(new A)!=j||P&&q(new P)!=oe)&&(q=function(V){var x=_(V),B="[object Object]"==x?V.constructor:void 0,D=B?y(B):"";if(D)switch(D){case Y:return C;case le:return M;case K:return L;case re:return j;case te:return oe}return x}),ne.exports=q},1015:ne=>{ne.exports=function Z(g,E){return g?.[E]}},4583:(ne,Z,g)=>{var E=g(4826),b=g(1955),k=g(2261),A=g(5188),P=g(7765),_=g(8916);ne.exports=function y(M,F,L){for(var j=-1,oe=(F=E(F,M)).length,C=!1;++j<oe;){var Y=_(F[j]);if(!(C=null!=M&&L(M,Y)))break;M=M[Y]}return C||++j!=oe?C:!!(oe=null==M?0:M.length)&&P(oe)&&A(Y,oe)&&(k(M)||b(M))}},5602:(ne,Z,g)=>{var E=g(893);ne.exports=function b(){this.__data__=E?E(null):{},this.size=0}},1499:ne=>{ne.exports=function Z(g){var E=this.has(g)&&delete this.__data__[g];return this.size-=E?1:0,E}},2990:(ne,Z,g)=>{var E=g(893),A=Object.prototype.hasOwnProperty;ne.exports=function P(_){var y=this.__data__;if(E){var M=y[_];return"__lodash_hash_undefined__"===M?void 0:M}return A.call(y,_)?y[_]:void 0}},480:(ne,Z,g)=>{var E=g(893),k=Object.prototype.hasOwnProperty;ne.exports=function A(P){var _=this.__data__;return E?void 0!==_[P]:k.call(_,P)}},4469:(ne,Z,g)=>{var E=g(893);ne.exports=function k(A,P){var _=this.__data__;return this.size+=this.has(A)?0:1,_[A]=E&&void 0===P?"__lodash_hash_undefined__":P,this}},2241:(ne,Z,g)=>{var E=g(1763),b=g(1955),k=g(2261),A=E?E.isConcatSpreadable:void 0;ne.exports=function P(_){return k(_)||b(_)||!!(A&&_&&_[A])}},5188:ne=>{var g=/^(?:0|[1-9]\d*)$/;ne.exports=function E(b,k){var A=typeof b;return!!(k=k??9007199254740991)&&("number"==A||"symbol"!=A&&g.test(b))&&b>-1&&b%1==0&&b<k}},3817:(ne,Z,g)=>{var E=g(7826),b=g(2447),k=g(5188),A=g(9794);ne.exports=function P(_,y,M){if(!A(M))return!1;var F=typeof y;return!!("number"==F?b(M)&&k(y,M.length):"string"==F&&y in M)&&E(M[y],_)}},6300:(ne,Z,g)=>{var E=g(2261),b=g(3423),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/;ne.exports=function P(_,y){if(E(_))return!1;var M=typeof _;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=_&&!b(_))||A.test(_)||!k.test(_)||null!=y&&_ in Object(y)}},29:ne=>{ne.exports=function Z(g){var E=typeof g;return"string"==E||"number"==E||"symbol"==E||"boolean"==E?"__proto__"!==g:null===g}},9950:(ne,Z,g)=>{var A,E=g(6189),b=(A=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";ne.exports=function k(A){return!!b&&b in A}},6587:ne=>{var Z=Object.prototype;ne.exports=function g(E){var b=E&&E.constructor;return E===("function"==typeof b&&b.prototype||Z)}},3921:(ne,Z,g)=>{var E=g(9794);ne.exports=function b(k){return k==k&&!E(k)}},9365:ne=>{ne.exports=function Z(){this.__data__=[],this.size=0}},9343:(ne,Z,g)=>{var E=g(4056),k=Array.prototype.splice;ne.exports=function A(P){var _=this.__data__,y=E(_,P);return!(y<0||(y==_.length-1?_.pop():k.call(_,y,1),--this.size,0))}},4779:(ne,Z,g)=>{var E=g(4056);ne.exports=function b(k){var A=this.__data__,P=E(A,k);return P<0?void 0:A[P][1]}},1509:(ne,Z,g)=>{var E=g(4056);ne.exports=function b(k){return E(this.__data__,k)>-1}},7137:(ne,Z,g)=>{var E=g(4056);ne.exports=function b(k,A){var P=this.__data__,_=E(P,k);return _<0?(++this.size,P.push([k,A])):P[_][1]=A,this}},3413:(ne,Z,g)=>{var E=g(9618),b=g(3597),k=g(1136);ne.exports=function A(){this.size=0,this.__data__={hash:new E,map:new(k||b),string:new E}}},5419:(ne,Z,g)=>{var E=g(4113);ne.exports=function b(k){var A=E(this,k).delete(k);return this.size-=A?1:0,A}},7253:(ne,Z,g)=>{var E=g(4113);ne.exports=function b(k){return E(this,k).get(k)}},1115:(ne,Z,g)=>{var E=g(4113);ne.exports=function b(k){return E(this,k).has(k)}},6648:(ne,Z,g)=>{var E=g(4113);ne.exports=function b(k,A){var P=E(this,k),_=P.size;return P.set(k,A),this.size+=P.size==_?0:1,this}},1575:ne=>{ne.exports=function Z(g){var E=-1,b=Array(g.size);return g.forEach(function(k,A){b[++E]=[A,k]}),b}},2265:ne=>{ne.exports=function Z(g,E){return function(b){return null!=b&&b[g]===E&&(void 0!==E||g in Object(b))}}},7371:(ne,Z,g)=>{var E=g(7659);ne.exports=function k(A){var P=E(A,function(y){return 500===_.size&&_.clear(),y}),_=P.cache;return P}},893:(ne,Z,g)=>{var b=g(8745)(Object,"create");ne.exports=b},366:(ne,Z,g)=>{var b=g(3106)(Object.keys,Object);ne.exports=b},8849:(ne,Z,g)=>{ne=g.nmd(ne);var E=g(248),b=Z&&!Z.nodeType&&Z,k=b&&ne&&!ne.nodeType&&ne,P=k&&k.exports===b&&E.process,_=function(){try{return k&&k.require&&k.require("util").types||P&&P.binding&&P.binding("util")}catch{}}();ne.exports=_},9243:ne=>{var g=Object.prototype.toString;ne.exports=function E(b){return g.call(b)}},3106:ne=>{ne.exports=function Z(g,E){return function(b){return g(E(b))}}},2394:(ne,Z,g)=>{var E=g(7910),b=Math.max;ne.exports=function k(A,P,_){return P=b(void 0===P?A.length-1:P,0),function(){for(var y=arguments,M=-1,F=b(y.length-P,0),L=Array(F);++M<F;)L[M]=y[P+M];M=-1;for(var j=Array(P+1);++M<P;)j[M]=y[M];return j[P]=_(L),E(A,this,j)}}},8492:(ne,Z,g)=>{var E=g(248),b="object"==typeof self&&self&&self.Object===Object&&self,k=E||b||Function("return this")();ne.exports=k},6151:ne=>{ne.exports=function g(E){return this.__data__.set(E,"__lodash_hash_undefined__"),this}},2154:ne=>{ne.exports=function Z(g){return this.__data__.has(g)}},8e3:ne=>{ne.exports=function Z(g){var E=-1,b=Array(g.size);return g.forEach(function(k){b[++E]=k}),b}},6814:(ne,Z,g)=>{var E=g(8235),k=g(9531)(E);ne.exports=k},9531:ne=>{var E=Date.now;ne.exports=function b(k){var A=0,P=0;return function(){var _=E(),y=16-(_-P);if(P=_,y>0){if(++A>=800)return arguments[0]}else A=0;return k.apply(void 0,arguments)}}},9488:(ne,Z,g)=>{var E=g(3597);ne.exports=function b(){this.__data__=new E,this.size=0}},5943:ne=>{ne.exports=function Z(g){var E=this.__data__,b=E.delete(g);return this.size=E.size,b}},5456:ne=>{ne.exports=function Z(g){return this.__data__.get(g)}},4793:ne=>{ne.exports=function Z(g){return this.__data__.has(g)}},8689:(ne,Z,g)=>{var E=g(3597),b=g(1136),k=g(1811);ne.exports=function P(_,y){var M=this.__data__;if(M instanceof E){var F=M.__data__;if(!b||F.length<199)return F.push([_,y]),this.size=++M.size,this;M=this.__data__=new k(F)}return M.set(_,y),this.size=M.size,this}},163:(ne,Z,g)=>{var E=g(7371),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,A=E(function(P){var _=[];return 46===P.charCodeAt(0)&&_.push(""),P.replace(b,function(y,M,F,L){_.push(F?L.replace(k,"$1"):M||y)}),_});ne.exports=A},8916:(ne,Z,g)=>{var E=g(3423);ne.exports=function k(A){if("string"==typeof A||E(A))return A;var P=A+"";return"0"==P&&1/A==-1/0?"-0":P}},7075:ne=>{var g=Function.prototype.toString;ne.exports=function E(b){if(null!=b){try{return g.call(b)}catch{}try{return b+""}catch{}}return""}},1075:ne=>{ne.exports=function Z(g){return function(){return g}}},7826:ne=>{ne.exports=function Z(g,E){return g===E||g!=g&&E!=E}},5440:(ne,Z,g)=>{var E=g(2202);ne.exports=function b(k,A,P){var _=null==k?void 0:E(k,A);return void 0===_?P:_}},2494:(ne,Z,g)=>{var E=g(3274),b=g(4583);ne.exports=function k(A,P){return null!=A&&b(A,P,E)}},5657:ne=>{ne.exports=function Z(g){return g}},1955:(ne,Z,g)=>{var E=g(3022),b=g(3714),k=Object.prototype,A=k.hasOwnProperty,P=k.propertyIsEnumerable,_=E(function(){return arguments}())?E:function(y){return b(y)&&A.call(y,"callee")&&!P.call(y,"callee")};ne.exports=_},2261:ne=>{ne.exports=Array.isArray},2447:(ne,Z,g)=>{var E=g(6861),b=g(7765);ne.exports=function k(A){return null!=A&&b(A.length)&&!E(A)}},7525:(ne,Z,g)=>{ne=g.nmd(ne);var E=g(8492),b=g(5706),k=Z&&!Z.nodeType&&Z,A=k&&ne&&!ne.nodeType&&ne,_=A&&A.exports===k?E.Buffer:void 0;ne.exports=(_?_.isBuffer:void 0)||b},6030:(ne,Z,g)=>{var b=g(8492).isFinite;ne.exports=function k(A){return"number"==typeof A&&b(A)}},6861:(ne,Z,g)=>{var E=g(4590),b=g(9794);ne.exports=function y(M){if(!b(M))return!1;var F=E(M);return"[object Function]"==F||"[object GeneratorFunction]"==F||"[object AsyncFunction]"==F||"[object Proxy]"==F}},7765:ne=>{ne.exports=function g(E){return"number"==typeof E&&E>-1&&E%1==0&&E<=9007199254740991}},9794:ne=>{ne.exports=function Z(g){var E=typeof g;return null!=g&&("object"==E||"function"==E)}},3714:ne=>{ne.exports=function Z(g){return null!=g&&"object"==typeof g}},3423:(ne,Z,g)=>{var E=g(4590),b=g(3714);ne.exports=function A(P){return"symbol"==typeof P||b(P)&&"[object Symbol]"==E(P)}},4868:(ne,Z,g)=>{var E=g(8902),b=g(1156),k=g(8849),A=k&&k.isTypedArray,P=A?b(A):E;ne.exports=P},4614:(ne,Z,g)=>{var E=g(1384),b=g(190),k=g(2447);ne.exports=function A(P){return k(P)?E(P):b(P)}},6990:function(ne,Z,g){var E;ne=g.nmd(ne),function(){var b,_="Expected a function",M="__lodash_hash_undefined__",L="__lodash_placeholder__",x=32,D=128,Ce=1/0,Ne=9007199254740991,me=4294967295,lt=[["ary",D],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",x],["partialRight",64],["rearg",256]],We="[object Arguments]",_e="[object Array]",O="[object Boolean]",ae="[object Date]",Fe="[object Error]",Ke="[object Function]",fe="[object GeneratorFunction]",ee="[object Map]",G="[object Number]",I="[object Object]",ue="[object Promise]",ze="[object RegExp]",Je="[object Set]",ot="[object String]",kt="[object Symbol]",Wt="[object WeakMap]",Re="[object ArrayBuffer]",J="[object DataView]",S="[object Float32Array]",ce="[object Float64Array]",Ge="[object Int8Array]",Ze="[object Int16Array]",ct="[object Int32Array]",Xt="[object Uint8Array]",cn="[object Uint8ClampedArray]",Yn="[object Uint16Array]",Xn="[object Uint32Array]",bn=/\b__p \+= '';/g,As=/\b(__p \+=) '' \+/g,Yo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ns=/&(?:amp|lt|gt|quot|#39);/g,$i=/[&<>"']/g,ts=RegExp(Ns.source),So=RegExp($i.source),Ko=/<%-([\s\S]+?)%>/g,Fs=/<%([\s\S]+?)%>/g,Ss=/<%=([\s\S]+?)%>/g,gu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nh=/^\w*$/,Fh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qc=/[\\^$.*+?()[\]{}|]/g,el=RegExp(Qc.source),Ua=/^\s+/,td=/\s/,nd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tl=/\{\n\/\* \[wrapped with (.+)\] \*/,_u=/,? & /,id=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bu=/[()=,{}\[\]\/\s]/,nl=/\\(\\)?/g,rd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,il=/\w*$/,Cn=/^[-+]0x[0-9a-f]+$/i,rl=/^0b[01]+$/i,qo=/^\[object .+?Constructor\]$/,ja=/^0o[0-7]+$/i,Va=/^(?:0|[1-9]\d*)$/,Ha=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bs=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Me="\\ud800-\\udfff",pe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Be="\\u2700-\\u27bf",Xe="a-z\\xdf-\\xf6\\xf8-\\xff",sn="A-Z\\xc0-\\xd6\\xd8-\\xde",vn="\\ufe0e\\ufe0f",fs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Us="["+Me+"]",sl="["+fs+"]",pa="["+pe+"]",Pr="\\d+",js="["+Be+"]",ol="["+Xe+"]",Vi="[^"+Me+fs+Pr+Be+Xe+sn+"]",Xi="\\ud83c[\\udffb-\\udfff]",io="[^"+Me+"]",sd="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+sn+"]",ut="(?:"+ol+"|"+Vi+")",Nt="(?:"+Ue+"|"+Vi+")",Gt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Kn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ar="(?:"+pa+"|"+Xi+")?",Sn="["+vn+"]?",_C=Sn+Ar+"(?:\\u200d(?:"+[io,sd,Oe].join("|")+")"+Sn+Ar+")*",Jv="(?:"+[js,sd,Oe].join("|")+")"+_C,Pt="(?:"+[io+pa+"?",pa,sd,Oe,Us].join("|")+")",Op=RegExp("['\u2019]","g"),Hn=RegExp(pa,"g"),vi=RegExp(Xi+"(?="+Xi+")|"+Pt+_C,"g"),bC=RegExp([Ue+"?"+ol+"+"+Gt+"(?="+[sl,Ue,"$"].join("|")+")",Nt+"+"+Kn+"(?="+[sl,Ue+ut,"$"].join("|")+")",Ue+"?"+ut+"+"+Gt,Ue+"+"+Kn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pr,Jv].join("|"),"g"),zN=RegExp("[\\u200d"+Me+pe+vn+"]"),yC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,L_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Co=-1,nr={};nr[S]=nr[ce]=nr[Ge]=nr[Ze]=nr[ct]=nr[Xt]=nr[cn]=nr[Yn]=nr[Xn]=!0,nr[We]=nr[_e]=nr[Re]=nr[O]=nr[J]=nr[ae]=nr[Fe]=nr[Ke]=nr[ee]=nr[G]=nr[I]=nr[ze]=nr[Je]=nr[ot]=nr[Wt]=!1;var Hi={};Hi[We]=Hi[_e]=Hi[Re]=Hi[J]=Hi[O]=Hi[ae]=Hi[S]=Hi[ce]=Hi[Ge]=Hi[Ze]=Hi[ct]=Hi[ee]=Hi[G]=Hi[I]=Hi[ze]=Hi[Je]=Hi[ot]=Hi[kt]=Hi[Xt]=Hi[cn]=Hi[Yn]=Hi[Xn]=!0,Hi[Fe]=Hi[Ke]=Hi[Wt]=!1;var $N={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},XN=parseFloat,YN=parseInt,Zv="object"==typeof global&&global&&global.Object===Object&&global,KN="object"==typeof self&&self&&self.Object===Object&&self,ps=Zv||KN||Function("return this")(),vC=Z&&!Z.nodeType&&Z,Cs=vC&&ne&&!ne.nodeType&&ne,Dn=Cs&&Cs.exports===vC,Qv=Dn&&Zv.process,ma=function(){try{return Cs&&Cs.require&&Cs.require("util").types||Qv&&Qv.binding&&Qv.binding("util")}catch{}}(),xC=ma&&ma.isArrayBuffer,Et=ma&&ma.isDate,wC=ma&&ma.isMap,qt=ma&&ma.isRegExp,Bh=ma&&ma.isSet,ex=ma&&ma.isTypedArray;function so(dt,wt,gt){switch(gt.length){case 0:return dt.call(wt);case 1:return dt.call(wt,gt[0]);case 2:return dt.call(wt,gt[0],gt[1]);case 3:return dt.call(wt,gt[0],gt[1],gt[2])}return dt.apply(wt,gt)}function EC(dt,wt,gt,en){for(var On=-1,xi=null==dt?0:dt.length;++On<xi;){var Lr=dt[On];wt(en,Lr,gt(Lr),dt)}return en}function Vs(dt,wt){for(var gt=-1,en=null==dt?0:dt.length;++gt<en&&!1!==wt(dt[gt],gt,dt););return dt}function kp(dt,wt){for(var gt=null==dt?0:dt.length;gt--&&!1!==wt(dt[gt],gt,dt););return dt}function Pp(dt,wt){for(var gt=-1,en=null==dt?0:dt.length;++gt<en;)if(!wt(dt[gt],gt,dt))return!1;return!0}function gc(dt,wt){for(var gt=-1,en=null==dt?0:dt.length,On=0,xi=[];++gt<en;){var Lr=dt[gt];wt(Lr,gt,dt)&&(xi[On++]=Lr)}return xi}function Lp(dt,wt){return!(null==dt||!dt.length)&&ad(dt,wt,0)>-1}function ei(dt,wt,gt){for(var en=-1,On=null==dt?0:dt.length;++en<On;)if(gt(wt,dt[en]))return!0;return!1}function zi(dt,wt){for(var gt=-1,en=null==dt?0:dt.length,On=Array(en);++gt<en;)On[gt]=wt(dt[gt],gt,dt);return On}function _c(dt,wt){for(var gt=-1,en=wt.length,On=dt.length;++gt<en;)dt[On+gt]=wt[gt];return dt}function Ts(dt,wt,gt,en){var On=-1,xi=null==dt?0:dt.length;for(en&&xi&&(gt=dt[++On]);++On<xi;)gt=wt(gt,dt[On],On,dt);return gt}function tx(dt,wt,gt,en){var On=null==dt?0:dt.length;for(en&&On&&(gt=dt[--On]);On--;)gt=wt(gt,dt[On],On,dt);return gt}function nx(dt,wt){for(var gt=-1,en=null==dt?0:dt.length;++gt<en;)if(wt(dt[gt],gt,dt))return!0;return!1}var Ai=rx("length");function Np(dt,wt,gt){var en;return gt(dt,function(On,xi,Lr){if(wt(On,xi,Lr))return en=xi,!1}),en}function yu(dt,wt,gt,en){for(var On=dt.length,xi=gt+(en?1:-1);en?xi--:++xi<On;)if(wt(dt[xi],xi,dt))return xi;return-1}function ad(dt,wt,gt){return wt==wt?function jp(dt,wt,gt){for(var en=gt-1,On=dt.length;++en<On;)if(dt[en]===wt)return en;return-1}(dt,wt,gt):yu(dt,ix,gt)}function N_(dt,wt,gt,en){for(var On=gt-1,xi=dt.length;++On<xi;)if(en(dt[On],wt))return On;return-1}function ix(dt){return dt!=dt}function Fp(dt,wt){var gt=null==dt?0:dt.length;return gt?ox(dt,wt)/gt:NaN}function rx(dt){return function(wt){return null==wt?b:wt[dt]}}function sx(dt){return function(wt){return null==dt?b:dt[wt]}}function AC(dt,wt,gt,en,On){return On(dt,function(xi,Lr,Fi){gt=en?(en=!1,xi):wt(gt,xi,Lr,Fi)}),gt}function ox(dt,wt){for(var gt,en=-1,On=dt.length;++en<On;){var xi=wt(dt[en]);xi!==b&&(gt=gt===b?xi:gt+xi)}return gt}function cd(dt,wt){for(var gt=-1,en=Array(dt);++gt<dt;)en[gt]=wt(gt);return en}function Uh(dt){return dt&&dt.slice(0,Vh(dt)+1).replace(Ua,"")}function To(dt){return function(wt){return dt(wt)}}function B_(dt,wt){return zi(wt,function(gt){return dt[gt]})}function jh(dt,wt){return dt.has(wt)}function U_(dt,wt){for(var gt=-1,en=dt.length;++gt<en&&ad(wt,dt[gt],0)>-1;);return gt}function ld(dt,wt){for(var gt=dt.length;gt--&&ad(wt,dt[gt],0)>-1;);return gt}var al=sx({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),CC=sx({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rt(dt){return"\\"+$N[dt]}function zt(dt){return zN.test(dt)}function dd(dt){var wt=-1,gt=Array(dt.size);return dt.forEach(function(en,On){gt[++wt]=[On,en]}),gt}function cx(dt,wt){return function(gt){return dt(wt(gt))}}function cl(dt,wt){for(var gt=-1,en=dt.length,On=0,xi=[];++gt<en;){var Lr=dt[gt];(Lr===wt||Lr===L)&&(dt[gt]=L,xi[On++]=gt)}return xi}function Up(dt){var wt=-1,gt=Array(dt.size);return dt.forEach(function(en){gt[++wt]=en}),gt}function Hs(dt){return zt(dt)?function H_(dt){for(var wt=vi.lastIndex=0;vi.test(dt);)++wt;return wt}(dt):Ai(dt)}function qn(dt){return zt(dt)?function lx(dt){return dt.match(vi)||[]}(dt):function qN(dt){return dt.split("")}(dt)}function Vh(dt){for(var wt=dt.length;wt--&&td.test(dt.charAt(wt)););return wt}var V_=sx({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),zh=function dt(wt){var u,gt=(wt=null==wt?ps:zh.defaults(ps.Object(),wt,zh.pick(ps,L_))).Array,en=wt.Date,On=wt.Error,xi=wt.Function,Lr=wt.Math,Fi=wt.Object,Vp=wt.RegExp,TC=wt.String,Jo=wt.TypeError,oo=gt.prototype,ud=Fi.prototype,Hp=wt["__core-js_shared__"],zp=xi.prototype.toString,Mi=ud.hasOwnProperty,IC=0,z_=(u=/[^.]+$/.exec(Hp&&Hp.keys&&Hp.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Gp=ud.toString,DC=zp.call(Fi),RC=ps._,kn=Vp("^"+zp.call(Mi).replace(Qc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wp=Dn?wt.Buffer:b,ll=wt.Symbol,$p=wt.Uint8Array,Jt=Wp?Wp.allocUnsafe:b,Xp=cx(Fi.getPrototypeOf,Fi),G_=Fi.create,Ht=ud.propertyIsEnumerable,zr=oo.splice,mi=ll?ll.isConcatSpreadable:b,Sr=ll?ll.iterator:b,Cr=ll?ll.toStringTag:b,vc=function(){try{var u=El(Fi,"defineProperty");return u({},"",{}),u}catch{}}(),Mo=wt.clearTimeout!==ps.clearTimeout&&wt.clearTimeout,dx=en&&en.now!==ps.Date.now&&en.now,ux=wt.setTimeout!==ps.setTimeout&&wt.setTimeout,hd=Lr.ceil,Yp=Lr.floor,W_=Fi.getOwnPropertySymbols,Tr=Wp?Wp.isBuffer:b,Kt=wt.isFinite,Gn=oo.join,ir=cx(Fi.keys,Fi),Ii=Lr.max,Nr=Lr.min,Ms=en.now,vu=wt.parseInt,br=Lr.random,dl=oo.reverse,ul=El(wt,"DataView"),Rn=El(wt,"Map"),fd=El(wt,"Promise"),pd=El(wt,"Set"),za=El(wt,"WeakMap"),Yi=El(Fi,"create"),hl=za&&new za,_a={},Ga=Lu(ul),Gh=Lu(Rn),hx=Lu(fd),fl=Lu(pd),xc=Lu(za),md=ll?ll.prototype:b,pl=md?md.valueOf:b,ai=md?md.toString:b;function Le(u){if(qi(u)&&!Wn(u)&&!(u instanceof oi)){if(u instanceof Mr)return u;if(Mi.call(u,"__wrapped__"))return nT(u)}return new Mr(u)}var ml=function(){function u(){}return function(p){if(!Ki(p))return{};if(G_)return G_(p);u.prototype=p;var w=new u;return u.prototype=b,w}}();function Wh(){}function Mr(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=b}function oi(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function wu(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var ie=u[p];this.set(ie[0],ie[1])}}function Gr(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var ie=u[p];this.set(ie[0],ie[1])}}function wc(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var ie=u[p];this.set(ie[0],ie[1])}}function Eu(u){var p=-1,w=null==u?0:u.length;for(this.__data__=new wc;++p<w;)this.add(u[p])}function Wa(u){var p=this.__data__=new Gr(u);this.size=p.size}function LC(u,p){var w=Wn(u),ie=!w&&Dc(u),Ae=!w&&!ie&&Td(u),je=!w&&!ie&&!Ae&&$u(u),Qe=w||ie||Ae||je,st=Qe?cd(u.length,TC):[],ht=st.length;for(var Tt in u)(p||Mi.call(u,Tt))&&(!Qe||!("length"==Tt||Ae&&("offset"==Tt||"parent"==Tt)||je&&("buffer"==Tt||"byteLength"==Tt||"byteOffset"==Tt)||Ya(Tt,ht)))&&st.push(Tt);return st}function NC(u){var p=u.length;return p?u[sb(0,p-1)]:b}function dF(u,p){return bm(Gs(u),bd(p,0,u.length))}function _d(u){return bm(Gs(u))}function qp(u,p,w){(w!==b&&!Ro(u[p],w)||w===b&&!(p in u))&&Ec(u,p,w)}function Jp(u,p,w){var ie=u[p];(!Mi.call(u,p)||!Ro(ie,w)||w===b&&!(p in u))&&Ec(u,p,w)}function Au(u,p){for(var w=u.length;w--;)if(Ro(u[w][0],p))return w;return-1}function mx(u,p,w,ie){return $a(u,function(Ae,je,Qe){p(ie,Ae,w(Ae),Qe)}),ie}function gx(u,p){return u&&ya(p,bs(p),u)}function Ec(u,p,w){"__proto__"==p&&vc?vc(u,p,{configurable:!0,enumerable:!0,value:w,writable:!0}):u[p]=w}function _x(u,p){for(var w=-1,ie=p.length,Ae=gt(ie),je=null==u;++w<ie;)Ae[w]=je?b:Yu(u,p[w]);return Ae}function bd(u,p,w){return u==u&&(w!==b&&(u=u<=w?u:w),p!==b&&(u=u>=p?u:p)),u}function Ir(u,p,w,ie,Ae,je){var Qe,st=1&p,ht=2&p,Tt=4&p;if(w&&(Qe=Ae?w(u,ie,Ae,je):w(u)),Qe!==b)return Qe;if(!Ki(u))return u;var At=Wn(u);if(At){if(Qe=function xb(u){var p=u.length,w=new u.constructor(p);return p&&"string"==typeof u[0]&&Mi.call(u,"index")&&(w.index=u.index,w.input=u.input),w}(u),!st)return Gs(u,Qe)}else{var Ft=Xr(u),Yt=Ft==Ke||Ft==fe;if(Td(u))return Dx(u,st);if(Ft==I||Ft==We||Yt&&!Ae){if(Qe=ht||Yt?{}:Bx(u),!st)return ht?function fb(u,p){return ya(u,Nx(u),p)}(u,function FC(u,p){return u&&ya(p,Lo(p),u)}(Qe,u)):function Px(u,p){return ya(u,Zo(u),p)}(u,gx(Qe,u))}else{if(!Hi[Ft])return Ae?u:{};Qe=function Ux(u,p,w){var ie=u.constructor;switch(p){case Re:return lb(u);case O:case ae:return new ie(+u);case J:return function db(u,p){var w=p?lb(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.byteLength)}(u,w);case S:case ce:case Ge:case Ze:case ct:case Xt:case cn:case Yn:case Xn:return dm(u,w);case ee:return new ie;case G:case ot:return new ie(u);case ze:return function ub(u){var p=new u.constructor(u.source,il.exec(u));return p.lastIndex=u.lastIndex,p}(u);case Je:return new ie;case kt:return function Rx(u){return pl?Fi(pl.call(u)):{}}(u)}}(u,Ft,st)}}je||(je=new Wa);var Mt=je.get(u);if(Mt)return Mt;je.set(u,Qe),Fm(u)?u.forEach(function(pn){Qe.add(Ir(pn,p,w,pn,u,je))}):Fb(u)&&u.forEach(function(pn,ui){Qe.set(ui,Ir(pn,p,w,ui,u,je))});var Qn=At?b:(Tt?ht?wd:Qh:ht?Lo:bs)(u);return Vs(Qn||u,function(pn,ui){Qn&&(pn=u[ui=pn]),Jp(Qe,ui,Ir(pn,p,w,ui,u,je))}),Qe}function Wr(u,p,w){var ie=w.length;if(null==u)return!ie;for(u=Fi(u);ie--;){var Ae=w[ie],Qe=u[Ae];if(Qe===b&&!(Ae in u)||!(0,p[Ae])(Qe))return!1}return!0}function Y_(u,p,w){if("function"!=typeof u)throw new Jo(_);return Pu(function(){u.apply(b,w)},p)}function Qp(u,p,w,ie){var Ae=-1,je=Lp,Qe=!0,st=u.length,ht=[],Tt=p.length;if(!st)return ht;w&&(p=zi(p,To(w))),ie?(je=ei,Qe=!1):p.length>=200&&(je=jh,Qe=!1,p=new Eu(p));e:for(;++Ae<st;){var At=u[Ae],Ft=null==w?At:w(At);if(At=ie||0!==At?At:0,Qe&&Ft==Ft){for(var Yt=Tt;Yt--;)if(p[Yt]===Ft)continue e;ht.push(At)}else je(p,Ft,ie)||ht.push(At)}return ht}Le.templateSettings={escape:Ko,evaluate:Fs,interpolate:Ss,variable:"",imports:{_:Le}},(Le.prototype=Wh.prototype).constructor=Le,(Mr.prototype=ml(Wh.prototype)).constructor=Mr,(oi.prototype=ml(Wh.prototype)).constructor=oi,wu.prototype.clear=function ao(){this.__data__=Yi?Yi(null):{},this.size=0},wu.prototype.delete=function co(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p},wu.prototype.get=function $_(u){var p=this.__data__;if(Yi){var w=p[u];return w===M?b:w}return Mi.call(p,u)?p[u]:b},wu.prototype.has=function gd(u){var p=this.__data__;return Yi?p[u]!==b:Mi.call(p,u)},wu.prototype.set=function Kp(u,p){var w=this.__data__;return this.size+=this.has(u)?0:1,w[u]=Yi&&p===b?M:p,this},Gr.prototype.clear=function X_(){this.__data__=[],this.size=0},Gr.prototype.delete=function OC(u){var p=this.__data__,w=Au(p,u);return!(w<0||(w==p.length-1?p.pop():zr.call(p,w,1),--this.size,0))},Gr.prototype.get=function kC(u){var p=this.__data__,w=Au(p,u);return w<0?b:p[w][1]},Gr.prototype.has=function QN(u){return Au(this.__data__,u)>-1},Gr.prototype.set=function PC(u,p){var w=this.__data__,ie=Au(w,u);return ie<0?(++this.size,w.push([u,p])):w[ie][1]=p,this},wc.prototype.clear=function eF(){this.size=0,this.__data__={hash:new wu,map:new(Rn||Gr),string:new wu}},wc.prototype.delete=function tF(u){var p=yb(this,u).delete(u);return this.size-=p?1:0,p},wc.prototype.get=function nF(u){return yb(this,u).get(u)},wc.prototype.has=function iF(u){return yb(this,u).has(u)},wc.prototype.set=function rF(u,p){var w=yb(this,u),ie=w.size;return w.set(u,p),this.size+=w.size==ie?0:1,this},Eu.prototype.add=Eu.prototype.push=function sF(u){return this.__data__.set(u,M),this},Eu.prototype.has=function oF(u){return this.__data__.has(u)},Wa.prototype.clear=function aF(){this.__data__=new Gr,this.size=0},Wa.prototype.delete=function cF(u){var p=this.__data__,w=p.delete(u);return this.size=p.size,w},Wa.prototype.get=function lF(u){return this.__data__.get(u)},Wa.prototype.has=function fx(u){return this.__data__.has(u)},Wa.prototype.set=function px(u,p){var w=this.__data__;if(w instanceof Gr){var ie=w.__data__;if(!Rn||ie.length<199)return ie.push([u,p]),this.size=++w.size,this;w=this.__data__=new wc(ie)}return w.set(u,p),this.size=w.size,this};var $a=Ds(Xa),em=Ds(bx,!0);function tm(u,p){var w=!0;return $a(u,function(ie,Ae,je){return w=!!p(ie,Ae,je)}),w}function nm(u,p,w){for(var ie=-1,Ae=u.length;++ie<Ae;){var je=u[ie],Qe=p(je);if(null!=Qe&&(st===b?Qe==Qe&&!Oo(Qe):w(Qe,st)))var st=Qe,ht=je}return ht}function K_(u,p){var w=[];return $a(u,function(ie,Ae,je){p(ie,Ae,je)&&w.push(ie)}),w}function $r(u,p,w,ie,Ae){var je=-1,Qe=u.length;for(w||(w=Vx),Ae||(Ae=[]);++je<Qe;){var st=u[je];p>0&&w(st)?p>1?$r(st,p-1,w,ie,Ae):_c(Ae,st):ie||(Ae[Ae.length]=st)}return Ae}var q_=yl(),Xh=yl(!0);function Xa(u,p){return u&&q_(u,p,bs)}function bx(u,p){return u&&Xh(u,p,bs)}function J_(u,p){return gc(p,function(w){return ta(u[w])})}function gl(u,p){for(var w=0,ie=(p=Do(p,u)).length;null!=u&&w<ie;)u=u[Ic(p[w++])];return w&&w==ie?u:b}function Z_(u,p,w){var ie=p(u);return Wn(u)?ie:_c(ie,w(u))}function zs(u){return null==u?u===b?"[object Undefined]":"[object Null]":Cr&&Cr in Fi(u)?function JC(u){var p=Mi.call(u,Cr),w=u[Cr];try{u[Cr]=b;var ie=!0}catch{}var Ae=Gp.call(u);return ie&&(p?u[Cr]=w:delete u[Cr]),Ae}(u):function QC(u){return Gp.call(u)}(u)}function im(u,p){return u>p}function Dr(u,p){return null!=u&&Mi.call(u,p)}function yx(u,p){return null!=u&&p in Fi(u)}function Q_(u,p,w){for(var ie=w?ei:Lp,Ae=u[0].length,je=u.length,Qe=je,st=gt(je),ht=1/0,Tt=[];Qe--;){var At=u[Qe];Qe&&p&&(At=zi(At,To(p))),ht=Nr(At.length,ht),st[Qe]=!w&&(p||Ae>=120&&At.length>=120)?new Eu(Qe&&At):b}At=u[0];var Ft=-1,Yt=st[0];e:for(;++Ft<Ae&&Tt.length<ht;){var Mt=At[Ft],Tn=p?p(Mt):Mt;if(Mt=w||0!==Mt?Mt:0,!(Yt?jh(Yt,Tn):ie(Tt,Tn,w))){for(Qe=je;--Qe;){var Qn=st[Qe];if(!(Qn?jh(Qn,Tn):ie(u[Qe],Tn,w)))continue e}Yt&&Yt.push(Tn),Tt.push(Mt)}}return Tt}function Su(u,p,w){var ie=null==(u=Ka(u,p=Do(p,u)))?u:u[Ic(ea(p))];return null==ie?b:so(ie,u,w)}function xx(u){return qi(u)&&zs(u)==We}function lo(u,p,w,ie,Ae){return u===p||(null==u||null==p||!qi(u)&&!qi(p)?u!=u&&p!=p:function wx(u,p,w,ie,Ae,je){var Qe=Wn(u),st=Wn(p),ht=Qe?_e:Xr(u),Tt=st?_e:Xr(p),At=(ht=ht==We?I:ht)==I,Ft=(Tt=Tt==We?I:Tt)==I,Yt=ht==Tt;if(Yt&&Td(u)){if(!Td(p))return!1;Qe=!0,At=!1}if(Yt&&!At)return je||(je=new Wa),Qe||$u(u)?Lx(u,p,w,ie,Ae,je):function qC(u,p,w,ie,Ae,je,Qe){switch(w){case J:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case Re:return!(u.byteLength!=p.byteLength||!je(new $p(u),new $p(p)));case O:case ae:case G:return Ro(+u,+p);case Fe:return u.name==p.name&&u.message==p.message;case ze:case ot:return u==p+"";case ee:var st=dd;case Je:if(st||(st=Up),u.size!=p.size&&!(1&ie))return!1;var Tt=Qe.get(u);if(Tt)return Tt==p;ie|=2,Qe.set(u,p);var At=Lx(st(u),st(p),ie,Ae,je,Qe);return Qe.delete(u),At;case kt:if(pl)return pl.call(u)==pl.call(p)}return!1}(u,p,ht,w,ie,Ae,je);if(!(1&w)){var Mt=At&&Mi.call(u,"__wrapped__"),Tn=Ft&&Mi.call(p,"__wrapped__");if(Mt||Tn){var Qn=Mt?u.value():u,pn=Tn?p.value():p;return je||(je=new Wa),Ae(Qn,pn,w,ie,je)}}return!!Yt&&(je||(je=new Wa),function fF(u,p,w,ie,Ae,je){var Qe=1&w,st=Qh(u),ht=st.length;if(ht!=Qh(p).length&&!Qe)return!1;for(var Ft=ht;Ft--;){var Yt=st[Ft];if(!(Qe?Yt in p:Mi.call(p,Yt)))return!1}var Mt=je.get(u),Tn=je.get(p);if(Mt&&Tn)return Mt==p&&Tn==u;var Qn=!0;je.set(u,p),je.set(p,u);for(var pn=Qe;++Ft<ht;){var ui=u[Yt=st[Ft]],gi=p[Yt];if(ie)var Fr=Qe?ie(gi,ui,Yt,p,u,je):ie(ui,gi,Yt,u,p,je);if(!(Fr===b?ui===gi||Ae(ui,gi,w,ie,je):Fr)){Qn=!1;break}pn||(pn="constructor"==Yt)}if(Qn&&!pn){var Xs=u.constructor,Ys=p.constructor;Xs!=Ys&&"constructor"in u&&"constructor"in p&&!("function"==typeof Xs&&Xs instanceof Xs&&"function"==typeof Ys&&Ys instanceof Ys)&&(Qn=!1)}return je.delete(u),je.delete(p),Qn}(u,p,w,ie,Ae,je))}(u,p,w,ie,lo,Ae))}function ki(u,p,w,ie){var Ae=w.length,je=Ae,Qe=!ie;if(null==u)return!je;for(u=Fi(u);Ae--;){var st=w[Ae];if(Qe&&st[2]?st[1]!==u[st[0]]:!(st[0]in u))return!1}for(;++Ae<je;){var ht=(st=w[Ae])[0],Tt=u[ht],At=st[1];if(Qe&&st[2]){if(Tt===b&&!(ht in u))return!1}else{var Ft=new Wa;if(ie)var Yt=ie(Tt,At,ht,u,p,Ft);if(!(Yt===b?lo(At,Tt,3,ie,Ft):Yt))return!1}}return!0}function Ax(u){return!(!Ki(u)||function Hx(u){return!!z_&&z_ in u}(u))&&(ta(u)?kn:qo).test(Lu(u))}function tb(u){return"function"==typeof u?u:null==u?po:"object"==typeof u?Wn(u)?Ac(u[0],u[1]):Cx(u):Bw(u)}function _l(u){if(!Mc(u))return ir(u);var p=[];for(var w in Fi(u))Mi.call(u,w)&&"constructor"!=w&&p.push(w);return p}function nb(u,p){return u<p}function Sx(u,p){var w=-1,ie=$s(u)?gt(u.length):[];return $a(u,function(Ae,je,Qe){ie[++w]=p(Ae,je,Qe)}),ie}function Cx(u){var p=_m(u);return 1==p.length&&p[0][2]?Rs(p[0][0],p[0][1]):function(w){return w===u||ki(w,u,p)}}function Ac(u,p){return Ou(u)&&Gx(p)?Rs(Ic(u),p):function(w){var ie=Yu(w,u);return ie===b&&ie===p?Md(w,u):lo(p,ie,3)}}function Yh(u,p,w,ie,Ae){u!==p&&q_(p,function(je,Qe){if(Ae||(Ae=new Wa),Ki(je))!function VC(u,p,w,ie,Ae,je,Qe){var st=Al(u,w),ht=Al(p,w),Tt=Qe.get(ht);if(Tt)qp(u,w,Tt);else{var At=je?je(st,ht,w+"",u,p,Qe):b,Ft=At===b;if(Ft){var Yt=Wn(ht),Mt=!Yt&&Td(ht),Tn=!Yt&&!Mt&&$u(ht);At=ht,Yt||Mt||Tn?Wn(st)?At=st:yr(st)?At=Gs(st):Mt?(Ft=!1,At=Dx(ht,!0)):Tn?(Ft=!1,At=dm(ht,!0)):At=[]:Wu(ht)||Dc(ht)?(At=st,Dc(st)?At=Tl(st):(!Ki(st)||ta(st))&&(At=Bx(ht))):Ft=!1}Ft&&(Qe.set(ht,At),Ae(At,ht,ie,je,Qe),Qe.delete(ht)),qp(u,w,At)}}(u,p,Qe,w,Yh,ie,Ae);else{var st=ie?ie(Al(u,Qe),je,Qe+"",u,p,Ae):b;st===b&&(st=je),qp(u,Qe,st)}},Lo)}function ib(u,p){var w=u.length;if(w)return Ya(p+=p<0?w:0,w)?u[p]:b}function rb(u,p,w){p=p.length?zi(p,function(je){return Wn(je)?function(Qe){return gl(Qe,1===je.length?je[0]:je)}:je}):[po];var ie=-1;return p=zi(p,To(xn())),function ZN(dt,wt){var gt=dt.length;for(dt.sort(wt);gt--;)dt[gt]=dt[gt].value;return dt}(Sx(u,function(je,Qe,st){return{criteria:zi(p,function(Tt){return Tt(je)}),index:++ie,value:je}}),function(je,Qe){return function kx(u,p,w){for(var ie=-1,Ae=u.criteria,je=p.criteria,Qe=Ae.length,st=w.length;++ie<Qe;){var ht=Ox(Ae[ie],je[ie]);if(ht)return ie>=st?ht:ht*("desc"==w[ie]?-1:1)}return u.index-p.index}(je,Qe,w)})}function Mx(u,p,w){for(var ie=-1,Ae=p.length,je={};++ie<Ae;){var Qe=p[ie],st=gl(u,Qe);w(st,Qe)&&Kh(je,Do(Qe,u),st)}return je}function sm(u,p,w,ie){var Ae=ie?N_:ad,je=-1,Qe=p.length,st=u;for(u===p&&(p=Gs(p)),w&&(st=zi(u,To(w)));++je<Qe;)for(var ht=0,Tt=p[je],At=w?w(Tt):Tt;(ht=Ae(st,At,ht,ie))>-1;)st!==u&&zr.call(st,ht,1),zr.call(u,ht,1);return u}function HC(u,p){for(var w=u?p.length:0,ie=w-1;w--;){var Ae=p[w];if(w==ie||Ae!==je){var je=Ae;Ya(Ae)?zr.call(u,Ae,1):qh(u,Ae)}}return u}function sb(u,p){return u+Yp(br()*(p-u+1))}function ob(u,p){var w="";if(!u||p<1||p>Ne)return w;do{p%2&&(w+=u),(p=Yp(p/2))&&(u+=u)}while(p);return w}function ti(u,p){return tf(Ab(u,p,po),u+"")}function Cu(u){return NC(Ku(u))}function GC(u,p){var w=Ku(u);return bm(w,bd(p,0,w.length))}function Kh(u,p,w,ie){if(!Ki(u))return u;for(var Ae=-1,je=(p=Do(p,u)).length,Qe=je-1,st=u;null!=st&&++Ae<je;){var ht=Ic(p[Ae]),Tt=w;if("__proto__"===ht||"constructor"===ht||"prototype"===ht)return u;if(Ae!=Qe){var At=st[ht];(Tt=ie?ie(At,ht,st):b)===b&&(Tt=Ki(At)?At:Ya(p[Ae+1])?[]:{})}Jp(st,ht,Tt),st=st[ht]}return u}var Ix=hl?function(u,p){return hl.set(u,p),u}:po,WC=vc?function(u,p){return vc(u,"toString",{configurable:!0,enumerable:!1,value:Hm(p),writable:!0})}:po;function $C(u){return bm(Ku(u))}function St(u,p,w){var ie=-1,Ae=u.length;p<0&&(p=-p>Ae?0:Ae+p),(w=w>Ae?Ae:w)<0&&(w+=Ae),Ae=p>w?0:w-p>>>0,p>>>=0;for(var je=gt(Ae);++ie<Ae;)je[ie]=u[ie+p];return je}function bi(u,p){var w;return $a(u,function(ie,Ae,je){return!(w=p(ie,Ae,je))}),!!w}function rr(u,p,w){var ie=0,Ae=null==u?ie:u.length;if("number"==typeof p&&p==p&&Ae<=2147483647){for(;ie<Ae;){var je=ie+Ae>>>1,Qe=u[je];null!==Qe&&!Oo(Qe)&&(w?Qe<=p:Qe<p)?ie=je+1:Ae=je}return Ae}return dr(u,p,po,w)}function dr(u,p,w,ie){var Ae=0,je=null==u?0:u.length;if(0===je)return 0;for(var Qe=(p=w(p))!=p,st=null===p,ht=Oo(p),Tt=p===b;Ae<je;){var At=Yp((Ae+je)/2),Ft=w(u[At]),Yt=Ft!==b,Mt=null===Ft,Tn=Ft==Ft,Qn=Oo(Ft);if(Qe)var pn=ie||Tn;else pn=Tt?Tn&&(ie||Yt):st?Tn&&Yt&&(ie||!Mt):ht?Tn&&Yt&&!Mt&&(ie||!Qn):!Mt&&!Qn&&(ie?Ft<=p:Ft<p);pn?Ae=At+1:je=At}return Nr(je,4294967294)}function ns(u,p){for(var w=-1,ie=u.length,Ae=0,je=[];++w<ie;){var Qe=u[w],st=p?p(Qe):Qe;if(!w||!Ro(st,ht)){var ht=st;je[Ae++]=0===Qe?0:Qe}}return je}function ab(u){return"number"==typeof u?u:Oo(u)?NaN:+u}function gs(u){if("string"==typeof u)return u;if(Wn(u))return zi(u,gs)+"";if(Oo(u))return ai?ai.call(u):"";var p=u+"";return"0"==p&&1/u==-Ce?"-0":p}function _s(u,p,w){var ie=-1,Ae=Lp,je=u.length,Qe=!0,st=[],ht=st;if(w)Qe=!1,Ae=ei;else if(je>=200){var Tt=p?null:Du(u);if(Tt)return Up(Tt);Qe=!1,Ae=jh,ht=new Eu}else ht=p?[]:st;e:for(;++ie<je;){var At=u[ie],Ft=p?p(At):At;if(At=w||0!==At?At:0,Qe&&Ft==Ft){for(var Yt=ht.length;Yt--;)if(ht[Yt]===Ft)continue e;p&&ht.push(Ft),st.push(At)}else Ae(ht,Ft,w)||(ht!==st&&ht.push(Ft),st.push(At))}return st}function qh(u,p){return null==(u=Ka(u,p=Do(p,u)))||delete u[Ic(ea(p))]}function om(u,p,w,ie){return Kh(u,p,w(gl(u,p)),ie)}function am(u,p,w,ie){for(var Ae=u.length,je=ie?Ae:-1;(ie?je--:++je<Ae)&&p(u[je],je,u););return w?St(u,ie?0:je,ie?je+1:Ae):St(u,ie?je+1:0,ie?Ae:je)}function XC(u,p){var w=u;return w instanceof oi&&(w=w.value()),Ts(p,function(ie,Ae){return Ae.func.apply(Ae.thisArg,_c([ie],Ae.args))},w)}function cm(u,p,w){var ie=u.length;if(ie<2)return ie?_s(u[0]):[];for(var Ae=-1,je=gt(ie);++Ae<ie;)for(var Qe=u[Ae],st=-1;++st<ie;)st!=Ae&&(je[Ae]=Qp(je[Ae]||Qe,u[st],p,w));return _s($r(je,1),p,w)}function Is(u,p,w){for(var ie=-1,Ae=u.length,je=p.length,Qe={};++ie<Ae;)w(Qe,u[ie],ie<je?p[ie]:b);return Qe}function ba(u){return yr(u)?u:[]}function lm(u){return"function"==typeof u?u:po}function Do(u,p){return Wn(u)?u:Ou(u,p)?[u]:tT(Ti(u))}var Sc=ti;function bl(u,p,w){var ie=u.length;return w=w===b?ie:w,!p&&w>=ie?u:St(u,p,w)}var cb=Mo||function(u){return ps.clearTimeout(u)};function Dx(u,p){if(p)return u.slice();var w=u.length,ie=Jt?Jt(w):new u.constructor(w);return u.copy(ie),ie}function lb(u){var p=new u.constructor(u.byteLength);return new $p(p).set(new $p(u)),p}function dm(u,p){var w=p?lb(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.length)}function Ox(u,p){if(u!==p){var w=u!==b,ie=null===u,Ae=u==u,je=Oo(u),Qe=p!==b,st=null===p,ht=p==p,Tt=Oo(p);if(!st&&!Tt&&!je&&u>p||je&&Qe&&ht&&!st&&!Tt||ie&&Qe&&ht||!w&&ht||!Ae)return 1;if(!ie&&!je&&!Tt&&u<p||Tt&&w&&Ae&&!ie&&!je||st&&w&&Ae||!Qe&&Ae||!ht)return-1}return 0}function um(u,p,w,ie){for(var Ae=-1,je=u.length,Qe=w.length,st=-1,ht=p.length,Tt=Ii(je-Qe,0),At=gt(ht+Tt),Ft=!ie;++st<ht;)At[st]=p[st];for(;++Ae<Qe;)(Ft||Ae<je)&&(At[w[Ae]]=u[Ae]);for(;Tt--;)At[st++]=u[Ae++];return At}function hb(u,p,w,ie){for(var Ae=-1,je=u.length,Qe=-1,st=w.length,ht=-1,Tt=p.length,At=Ii(je-st,0),Ft=gt(At+Tt),Yt=!ie;++Ae<At;)Ft[Ae]=u[Ae];for(var Mt=Ae;++ht<Tt;)Ft[Mt+ht]=p[ht];for(;++Qe<st;)(Yt||Ae<je)&&(Ft[Mt+w[Qe]]=u[Ae++]);return Ft}function Gs(u,p){var w=-1,ie=u.length;for(p||(p=gt(ie));++w<ie;)p[w]=u[w];return p}function ya(u,p,w,ie){var Ae=!w;w||(w={});for(var je=-1,Qe=p.length;++je<Qe;){var st=p[je],ht=ie?ie(w[st],u[st],st,w,u):b;ht===b&&(ht=u[st]),Ae?Ec(w,st,ht):Jp(w,st,ht)}return w}function hm(u,p){return function(w,ie){var Ae=Wn(w)?EC:mx,je=p?p():{};return Ae(w,u,xn(ie,2),je)}}function Tu(u){return ti(function(p,w){var ie=-1,Ae=w.length,je=Ae>1?w[Ae-1]:b,Qe=Ae>2?w[2]:b;for(je=u.length>3&&"function"==typeof je?(Ae--,je):b,Qe&&Ws(w[0],w[1],Qe)&&(je=Ae<3?b:je,Ae=1),p=Fi(p);++ie<Ae;){var st=w[ie];st&&u(p,st,ie,je)}return p})}function Ds(u,p){return function(w,ie){if(null==w)return w;if(!$s(w))return u(w,ie);for(var Ae=w.length,je=p?Ae:-1,Qe=Fi(w);(p?je--:++je<Ae)&&!1!==ie(Qe[je],je,Qe););return w}}function yl(u){return function(p,w,ie){for(var Ae=-1,je=Fi(p),Qe=ie(p),st=Qe.length;st--;){var ht=Qe[u?st:++Ae];if(!1===w(je[ht],ht,je))break}return p}}function Jh(u){return function(p){var w=zt(p=Ti(p))?qn(p):b,ie=w?w[0]:p.charAt(0),Ae=w?bl(w,1).join(""):p.slice(1);return ie[u]()+Ae}}function Mu(u){return function(p){return Ts(No($b(p).replace(Op,"")),u,"")}}function yd(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var w=ml(u.prototype),ie=u.apply(w,p);return Ki(ie)?ie:w}}function pb(u){return function(p,w,ie){var Ae=Fi(p);if(!$s(p)){var je=xn(w,3);p=bs(p),w=function(st){return je(Ae[st],st,Ae)}}var Qe=u(p,w,ie);return Qe>-1?Ae[je?p[Qe]:Qe]:b}}function mb(u){return vl(function(p){var w=p.length,ie=w,Ae=Mr.prototype.thru;for(u&&p.reverse();ie--;){var je=p[ie];if("function"!=typeof je)throw new Jo(_);if(Ae&&!Qe&&"wrapper"==xl(je))var Qe=new Mr([],!0)}for(ie=Qe?ie:w;++ie<w;){var st=xl(je=p[ie]),ht="wrapper"==st?bb(je):b;Qe=ht&&wb(ht[0])&&424==ht[1]&&!ht[4].length&&1==ht[9]?Qe[xl(ht[0])].apply(Qe,ht[3]):1==je.length&&wb(je)?Qe[st]():Qe.thru(je)}return function(){var Tt=arguments,At=Tt[0];if(Qe&&1==Tt.length&&Wn(At))return Qe.plant(At).value();for(var Ft=0,Yt=w?p[Ft].apply(this,Tt):At;++Ft<w;)Yt=p[Ft].call(this,Yt);return Yt}})}function vd(u,p,w,ie,Ae,je,Qe,st,ht,Tt){var At=p&D,Ft=1&p,Yt=2&p,Mt=24&p,Tn=512&p,Qn=Yt?b:yd(u);return function pn(){for(var ui=arguments.length,gi=gt(ui),Fr=ui;Fr--;)gi[Fr]=arguments[Fr];if(Mt)var Xs=wl(pn),Ys=function SC(dt,wt){for(var gt=dt.length,en=0;gt--;)dt[gt]===wt&&++en;return en}(gi,Xs);if(ie&&(gi=um(gi,ie,Ae,Mt)),je&&(gi=hb(gi,je,Qe,Mt)),ui-=Ys,Mt&&ui<Tt){var Br=cl(gi,Xs);return gb(u,p,vd,pn.placeholder,w,gi,Br,st,ht,Tt-ui)}var Fo=Ft?w:this,Ja=Yt?Fo[u]:u;return ui=gi.length,st?gi=function ku(u,p){for(var w=u.length,ie=Nr(p.length,w),Ae=Gs(u);ie--;){var je=p[ie];u[ie]=Ya(je,w)?Ae[je]:b}return u}(gi,st):Tn&&ui>1&&gi.reverse(),At&&ht<ui&&(gi.length=ht),this&&this!==ps&&this instanceof pn&&(Ja=Qn||yd(Ja)),Ja.apply(Fo,gi)}}function Cc(u,p){return function(w,ie){return function vx(u,p,w,ie){return Xa(u,function(Ae,je,Qe){p(ie,w(Ae),je,Qe)}),ie}(w,u,p(ie),{})}}function fm(u,p){return function(w,ie){var Ae;if(w===b&&ie===b)return p;if(w!==b&&(Ae=w),ie!==b){if(Ae===b)return ie;"string"==typeof w||"string"==typeof ie?(w=gs(w),ie=gs(ie)):(w=ab(w),ie=ab(ie)),Ae=u(w,ie)}return Ae}}function Iu(u){return vl(function(p){return p=zi(p,To(xn())),ti(function(w){var ie=this;return u(p,function(Ae){return so(Ae,ie,w)})})})}function xd(u,p){var w=(p=p===b?" ":gs(p)).length;if(w<2)return w?ob(p,u):p;var ie=ob(p,hd(u/Hs(p)));return zt(p)?bl(qn(ie),0,u).join(""):ie.slice(0,u)}function mm(u){return function(p,w,ie){return ie&&"number"!=typeof ie&&Ws(p,w,ie)&&(w=ie=b),p=va(p),w===b?(w=p,p=0):w=va(w),function zC(u,p,w,ie){for(var Ae=-1,je=Ii(hd((p-u)/(w||1)),0),Qe=gt(je);je--;)Qe[ie?je:++Ae]=u,u+=w;return Qe}(p,w,ie=ie===b?p<w?1:-1:va(ie),u)}}function Zh(u){return function(p,w){return"string"==typeof p&&"string"==typeof w||(p=ko(p),w=ko(w)),u(p,w)}}function gb(u,p,w,ie,Ae,je,Qe,st,ht,Tt){var At=8&p;p|=At?x:64,4&(p&=~(At?64:x))||(p&=-4);var Qn=[u,p,Ae,At?je:b,At?Qe:b,At?b:je,At?b:Qe,st,ht,Tt],pn=w.apply(b,Qn);return wb(u)&&Ad(pn,Qn),pn.placeholder=ie,Sd(pn,u,p)}function _b(u){var p=Lr[u];return function(w,ie){if(w=ko(w),(ie=null==ie?0:Nr(Jn(ie),292))&&Kt(w)){var Ae=(Ti(w)+"e").split("e");return+((Ae=(Ti(p(Ae[0]+"e"+(+Ae[1]+ie)))+"e").split("e"))[0]+"e"+(+Ae[1]-ie))}return p(w)}}var Du=pd&&1/Up(new pd([,-0]))[1]==Ce?function(u){return new pd(u)}:Ef;function Ru(u){return function(p){var w=Xr(p);return w==ee?dd(p):w==Je?function bc(dt){var wt=-1,gt=Array(dt.size);return dt.forEach(function(en){gt[++wt]=[en,en]}),gt}(p):function F_(dt,wt){return zi(wt,function(gt){return[gt,dt[gt]]})}(p,u(p))}}function Tc(u,p,w,ie,Ae,je,Qe,st){var ht=2&p;if(!ht&&"function"!=typeof u)throw new Jo(_);var Tt=ie?ie.length:0;if(Tt||(p&=-97,ie=Ae=b),Qe=Qe===b?Qe:Ii(Jn(Qe),0),st=st===b?st:Jn(st),Tt-=Ae?Ae.length:0,64&p){var At=ie,Ft=Ae;ie=Ae=b}var Yt=ht?b:bb(u),Mt=[u,p,w,ie,Ae,At,Ft,je,Qe,st];if(Yt&&function Ci(u,p){var w=u[1],ie=p[1],Ae=w|ie;if(!(Ae<131)&&!(ie==D&&8==w||ie==D&&256==w&&u[7].length<=p[8]||384==ie&&p[7].length<=p[8]&&8==w))return u;1&ie&&(u[2]=p[2],Ae|=1&w?0:4);var st=p[3];if(st){var ht=u[3];u[3]=ht?um(ht,st,p[4]):st,u[4]=ht?cl(u[3],L):p[4]}(st=p[5])&&(u[5]=(ht=u[5])?hb(ht,st,p[6]):st,u[6]=ht?cl(u[5],L):p[6]),(st=p[7])&&(u[7]=st),ie&D&&(u[8]=null==u[8]?p[8]:Nr(u[8],p[8])),null==u[9]&&(u[9]=p[9]),u[0]=p[0],u[1]=Ae}(Mt,Yt),u=Mt[0],p=Mt[1],w=Mt[2],ie=Mt[3],Ae=Mt[4],!(st=Mt[9]=Mt[9]===b?ht?0:u.length:Ii(Mt[9]-Tt,0))&&24&p&&(p&=-25),p&&1!=p)Tn=8==p||16==p?function YC(u,p,w){var ie=yd(u);return function Ae(){for(var je=arguments.length,Qe=gt(je),st=je,ht=wl(Ae);st--;)Qe[st]=arguments[st];var Tt=je<3&&Qe[0]!==ht&&Qe[je-1]!==ht?[]:cl(Qe,ht);return(je-=Tt.length)<w?gb(u,p,vd,Ae.placeholder,b,Qe,Tt,b,b,w-je):so(this&&this!==ps&&this instanceof Ae?ie:u,this,Qe)}}(u,p,st):p!=x&&33!=p||Ae.length?vd.apply(b,Mt):function pm(u,p,w,ie){var Ae=1&p,je=yd(u);return function Qe(){for(var st=-1,ht=arguments.length,Tt=-1,At=ie.length,Ft=gt(At+ht),Yt=this&&this!==ps&&this instanceof Qe?je:u;++Tt<At;)Ft[Tt]=ie[Tt];for(;ht--;)Ft[Tt++]=arguments[++st];return so(Yt,Ae?w:this,Ft)}}(u,p,w,ie);else var Tn=function ur(u,p,w){var ie=1&p,Ae=yd(u);return function je(){return(this&&this!==ps&&this instanceof je?Ae:u).apply(ie?w:this,arguments)}}(u,p,w);return Sd((Yt?Ix:Ad)(Tn,Mt),u,p)}function KC(u,p,w,ie){return u===b||Ro(u,ud[w])&&!Mi.call(ie,w)?p:u}function gm(u,p,w,ie,Ae,je){return Ki(u)&&Ki(p)&&(je.set(p,u),Yh(u,p,b,gm,je),je.delete(p)),u}function hF(u){return Wu(u)?b:u}function Lx(u,p,w,ie,Ae,je){var Qe=1&w,st=u.length,ht=p.length;if(st!=ht&&!(Qe&&ht>st))return!1;var Tt=je.get(u),At=je.get(p);if(Tt&&At)return Tt==p&&At==u;var Ft=-1,Yt=!0,Mt=2&w?new Eu:b;for(je.set(u,p),je.set(p,u);++Ft<st;){var Tn=u[Ft],Qn=p[Ft];if(ie)var pn=Qe?ie(Qn,Tn,Ft,p,u,je):ie(Tn,Qn,Ft,u,p,je);if(pn!==b){if(pn)continue;Yt=!1;break}if(Mt){if(!nx(p,function(ui,gi){if(!jh(Mt,gi)&&(Tn===ui||Ae(Tn,ui,w,ie,je)))return Mt.push(gi)})){Yt=!1;break}}else if(Tn!==Qn&&!Ae(Tn,Qn,w,ie,je)){Yt=!1;break}}return je.delete(u),je.delete(p),Yt}function vl(u){return tf(Ab(u,b,$x),u+"")}function Qh(u){return Z_(u,bs,Zo)}function wd(u){return Z_(u,Lo,Nx)}var bb=hl?function(u){return hl.get(u)}:Ef;function xl(u){for(var p=u.name+"",w=_a[p],ie=Mi.call(_a,p)?w.length:0;ie--;){var Ae=w[ie],je=Ae.func;if(null==je||je==u)return Ae.name}return p}function wl(u){return(Mi.call(Le,"placeholder")?Le:u).placeholder}function xn(){var u=Le.iteratee||xf;return u=u===xf?tb:u,arguments.length?u(arguments[0],arguments[1]):u}function yb(u,p){var w=u.__data__;return function Ed(u){var p=typeof u;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==u:null===u}(p)?w["string"==typeof p?"string":"hash"]:w.map}function _m(u){for(var p=bs(u),w=p.length;w--;){var ie=p[w],Ae=u[ie];p[w]=[ie,Ae,Gx(Ae)]}return p}function El(u,p){var w=function ax(dt,wt){return null==dt?b:dt[wt]}(u,p);return Ax(w)?w:b}var Zo=W_?function(u){return null==u?[]:(u=Fi(u),gc(W_(u),function(p){return Ht.call(u,p)}))}:Af,Nx=W_?function(u){for(var p=[];u;)_c(p,Zo(u)),u=Xp(u);return p}:Af,Xr=zs;function ef(u,p,w){for(var ie=-1,Ae=(p=Do(p,u)).length,je=!1;++ie<Ae;){var Qe=Ic(p[ie]);if(!(je=null!=u&&w(u,Qe)))break;u=u[Qe]}return je||++ie!=Ae?je:!!(Ae=null==u?0:u.length)&&pf(Ae)&&Ya(Qe,Ae)&&(Wn(u)||Dc(u))}function Bx(u){return"function"!=typeof u.constructor||Mc(u)?{}:ml(Xp(u))}function Vx(u){return Wn(u)||Dc(u)||!!(mi&&u&&u[mi])}function Ya(u,p){var w=typeof u;return!!(p=p??Ne)&&("number"==w||"symbol"!=w&&Va.test(u))&&u>-1&&u%1==0&&u<p}function Ws(u,p,w){if(!Ki(w))return!1;var ie=typeof p;return!!("number"==ie?$s(w)&&Ya(p,w.length):"string"==ie&&p in w)&&Ro(w[p],u)}function Ou(u,p){if(Wn(u))return!1;var w=typeof u;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=u&&!Oo(u))||Nh.test(u)||!gu.test(u)||null!=p&&u in Fi(p)}function wb(u){var p=xl(u),w=Le[p];if("function"!=typeof w||!(p in oi.prototype))return!1;if(u===w)return!0;var ie=bb(w);return!!ie&&u===ie[0]}(ul&&Xr(new ul(new ArrayBuffer(1)))!=J||Rn&&Xr(new Rn)!=ee||fd&&Xr(fd.resolve())!=ue||pd&&Xr(new pd)!=Je||za&&Xr(new za)!=Wt)&&(Xr=function(u){var p=zs(u),w=p==I?u.constructor:b,ie=w?Lu(w):"";if(ie)switch(ie){case Ga:return J;case Gh:return ee;case hx:return ue;case fl:return Je;case xc:return Wt}return p});var zx=Hp?ta:Sf;function Mc(u){var p=u&&u.constructor;return u===("function"==typeof p&&p.prototype||ud)}function Gx(u){return u==u&&!Ki(u)}function Rs(u,p){return function(w){return null!=w&&w[u]===p&&(p!==b||u in Fi(w))}}function Ab(u,p,w){return p=Ii(p===b?u.length-1:p,0),function(){for(var ie=arguments,Ae=-1,je=Ii(ie.length-p,0),Qe=gt(je);++Ae<je;)Qe[Ae]=ie[p+Ae];Ae=-1;for(var st=gt(p+1);++Ae<p;)st[Ae]=ie[Ae];return st[p]=w(Qe),so(u,this,st)}}function Ka(u,p){return p.length<2?u:gl(u,St(p,0,-1))}function Al(u,p){if(("constructor"!==p||"function"!=typeof u[p])&&"__proto__"!=p)return u[p]}var Ad=eT(Ix),Pu=ux||function(u,p){return ps.setTimeout(u,p)},tf=eT(WC);function Sd(u,p,w){var ie=p+"";return tf(u,function jx(u,p){var w=p.length;if(!w)return u;var ie=w-1;return p[ie]=(w>1?"& ":"")+p[ie],p=p.join(w>2?", ":" "),u.replace(nd,"{\n/* [wrapped with "+p+"] */\n")}(ie,function pF(u,p){return Vs(lt,function(w){var ie="_."+w[0];p&w[1]&&!Lp(u,ie)&&u.push(ie)}),u.sort()}(function Fx(u){var p=u.match(tl);return p?p[1].split(_u):[]}(ie),w)))}function eT(u){var p=0,w=0;return function(){var ie=Ms(),Ae=16-(ie-w);if(w=ie,Ae>0){if(++p>=800)return arguments[0]}else p=0;return u.apply(b,arguments)}}function bm(u,p){var w=-1,ie=u.length,Ae=ie-1;for(p=p===b?ie:p;++w<p;){var je=sb(w,Ae),Qe=u[je];u[je]=u[w],u[w]=Qe}return u.length=p,u}var tT=function ZC(u){var p=Rm(u,function(ie){return 500===w.size&&w.clear(),ie}),w=p.cache;return p}(function(u){var p=[];return 46===u.charCodeAt(0)&&p.push(""),u.replace(Fh,function(w,ie,Ae,je){p.push(Ae?je.replace(nl,"$1"):ie||w)}),p});function Ic(u){if("string"==typeof u||Oo(u))return u;var p=u+"";return"0"==p&&1/u==-Ce?"-0":p}function Lu(u){if(null!=u){try{return zp.call(u)}catch{}try{return u+""}catch{}}return""}function nT(u){if(u instanceof oi)return u.clone();var p=new Mr(u.__wrapped__,u.__chain__);return p.__actions__=Gs(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}var rT=ti(function(u,p){return yr(u)?Qp(u,$r(p,1,yr,!0)):[]}),Yr=ti(function(u,p){var w=ea(p);return yr(w)&&(w=b),yr(u)?Qp(u,$r(p,1,yr,!0),xn(w,2)):[]}),sT=ti(function(u,p){var w=ea(p);return yr(w)&&(w=b),yr(u)?Qp(u,$r(p,1,yr,!0),b,w):[]});function rf(u,p,w){var ie=null==u?0:u.length;if(!ie)return-1;var Ae=null==w?0:Jn(w);return Ae<0&&(Ae=Ii(ie+Ae,0)),yu(u,xn(p,3),Ae)}function Bu(u,p,w){var ie=null==u?0:u.length;if(!ie)return-1;var Ae=ie-1;return w!==b&&(Ae=Jn(w),Ae=w<0?Ii(ie+Ae,0):Nr(Ae,ie-1)),yu(u,xn(p,3),Ae,!0)}function $x(u){return null!=u&&u.length?$r(u,1):[]}function ho(u){return u&&u.length?u[0]:b}var bF=ti(function(u){var p=zi(u,ba);return p.length&&p[0]===u[0]?Q_(p):[]}),Xx=ti(function(u){var p=ea(u),w=zi(u,ba);return p===ea(w)?p=b:w.pop(),w.length&&w[0]===u[0]?Q_(w,xn(p,2)):[]}),cT=ti(function(u){var p=ea(u),w=zi(u,ba);return(p="function"==typeof p?p:b)&&w.pop(),w.length&&w[0]===u[0]?Q_(w,b,p):[]});function ea(u){var p=null==u?0:u.length;return p?u[p-1]:b}var hT=ti(ym);function ym(u,p){return u&&u.length&&p&&p.length?sm(u,p):u}var ju=vl(function(u,p){var w=null==u?0:u.length,ie=_x(u,p);return HC(u,zi(p,function(Ae){return Ya(Ae,w)?+Ae:Ae}).sort(Ox)),ie});function Vu(u){return null==u?u:dl.call(u)}var vT=ti(function(u){return _s($r(u,1,yr,!0))}),xT=ti(function(u){var p=ea(u);return yr(p)&&(p=b),_s($r(u,1,yr,!0),xn(p,2))}),wT=ti(function(u){var p=ea(u);return p="function"==typeof p?p:b,_s($r(u,1,yr,!0),b,p)});function Em(u){if(!u||!u.length)return[];var p=0;return u=gc(u,function(w){if(yr(w))return p=Ii(w.length,p),!0}),cd(p,function(w){return zi(u,rx(w))})}function AT(u,p){if(!u||!u.length)return[];var w=Em(u);return null==p?w:zi(w,function(ie){return so(p,b,ie)})}var Zx=ti(function(u,p){return yr(u)?Qp(u,p):[]}),xF=ti(function(u){return cm(gc(u,yr))}),ST=ti(function(u){var p=ea(u);return yr(p)&&(p=b),cm(gc(u,yr),xn(p,2))}),CT=ti(function(u){var p=ea(u);return p="function"==typeof p?p:b,cm(gc(u,yr),b,p)}),Tb=ti(Em),Mb=ti(function(u){var p=u.length,w=p>1?u[p-1]:b;return w="function"==typeof w?(u.pop(),w):b,AT(u,w)});function TT(u){var p=Le(u);return p.__chain__=!0,p}function Ib(u,p){return p(u)}var SF=vl(function(u){var p=u.length,w=p?u[0]:0,ie=this.__wrapped__,Ae=function(je){return _x(je,u)};return!(p>1||this.__actions__.length)&&ie instanceof oi&&Ya(w)?((ie=ie.slice(w,+w+(p?1:0))).__actions__.push({func:Ib,args:[Ae],thisArg:b}),new Mr(ie,this.__chain__).thru(function(je){return p&&!je.length&&je.push(b),je})):this.thru(Ae)}),zu=hm(function(u,p,w){Mi.call(u,w)?++u[w]:Ec(u,w,1)}),Cm=pb(rf),Tm=pb(Bu);function rw(u,p){return(Wn(u)?Vs:$a)(u,xn(p,3))}function Db(u,p){return(Wn(u)?kp:em)(u,xn(p,3))}var Rb=hm(function(u,p,w){Mi.call(u,w)?u[w].push(p):Ec(u,w,[p])}),OT=ti(function(u,p,w){var ie=-1,Ae="function"==typeof p,je=$s(u)?gt(u.length):[];return $a(u,function(Qe){je[++ie]=Ae?so(p,Qe,w):Su(Qe,p,w)}),je}),kT=hm(function(u,p,w){Ec(u,w,p)});function af(u,p){return(Wn(u)?zi:Sx)(u,xn(p,3))}var LT=hm(function(u,p,w){u[w?0:1].push(p)},function(){return[[],[]]}),NT=ti(function(u,p){if(null==u)return[];var w=p.length;return w>1&&Ws(u,p[0],p[1])?p=[]:w>2&&Ws(p[0],p[1],p[2])&&(p=[p[0]]),rb(u,$r(p,1),[])}),lf=dx||function(){return ps.Date.now()};function Pb(u,p,w){return p=w?b:p,Tc(u,D,b,b,b,b,p=u&&null==p?u.length:p)}function cw(u,p){var w;if("function"!=typeof p)throw new Jo(_);return u=Jn(u),function(){return--u>0&&(w=p.apply(this,arguments)),u<=1&&(p=b),w}}var Mm=ti(function(u,p,w){var ie=1;if(w.length){var Ae=cl(w,wl(Mm));ie|=x}return Tc(u,ie,p,w,Ae)}),lw=ti(function(u,p,w){var ie=3;if(w.length){var Ae=cl(w,wl(lw));ie|=x}return Tc(p,ie,u,w,Ae)});function Dm(u,p,w){var ie,Ae,je,Qe,st,ht,Tt=0,At=!1,Ft=!1,Yt=!0;if("function"!=typeof u)throw new Jo(_);function Mt(Br){var Fo=ie,Ja=Ae;return ie=Ae=b,Tt=Br,Qe=u.apply(Ja,Fo)}function pn(Br){var Fo=Br-ht;return ht===b||Fo>=p||Fo<0||Ft&&Br-Tt>=je}function ui(){var Br=lf();if(pn(Br))return gi(Br);st=Pu(ui,function Qn(Br){var Hw=p-(Br-ht);return Ft?Nr(Hw,je-(Br-Tt)):Hw}(Br))}function gi(Br){return st=b,Yt&&ie?Mt(Br):(ie=Ae=b,Qe)}function Ys(){var Br=lf(),Fo=pn(Br);if(ie=arguments,Ae=this,ht=Br,Fo){if(st===b)return function Tn(Br){return Tt=Br,st=Pu(ui,p),At?Mt(Br):Qe}(ht);if(Ft)return cb(st),st=Pu(ui,p),Mt(ht)}return st===b&&(st=Pu(ui,p)),Qe}return p=ko(p)||0,Ki(w)&&(At=!!w.leading,je=(Ft="maxWait"in w)?Ii(ko(w.maxWait)||0,p):je,Yt="trailing"in w?!!w.trailing:Yt),Ys.cancel=function Fr(){st!==b&&cb(st),Tt=0,ie=ht=Ae=st=b},Ys.flush=function Xs(){return st===b?Qe:gi(lf())},Ys}var BT=ti(function(u,p){return Y_(u,1,p)}),df=ti(function(u,p,w){return Y_(u,ko(p)||0,w)});function Rm(u,p){if("function"!=typeof u||null!=p&&"function"!=typeof p)throw new Jo(_);var w=function(){var ie=arguments,Ae=p?p.apply(this,ie):ie[0],je=w.cache;if(je.has(Ae))return je.get(Ae);var Qe=u.apply(this,ie);return w.cache=je.set(Ae,Qe)||je,Qe};return w.cache=new(Rm.Cache||wc),w}function uf(u){if("function"!=typeof u)throw new Jo(_);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}Rm.Cache=wc;var hw=Sc(function(u,p){var w=(p=1==p.length&&Wn(p[0])?zi(p[0],To(xn())):zi($r(p,1),To(xn()))).length;return ti(function(ie){for(var Ae=-1,je=Nr(ie.length,w);++Ae<je;)ie[Ae]=p[Ae].call(this,ie[Ae]);return so(u,this,ie)})}),Cl=ti(function(u,p){var w=cl(p,wl(Cl));return Tc(u,x,b,p,w)}),hf=ti(function(u,p){var w=cl(p,wl(hf));return Tc(u,64,b,p,w)}),fw=vl(function(u,p){return Tc(u,256,b,b,b,p)});function Ro(u,p){return u===p||u!=u&&p!=p}var $T=Zh(im),XT=Zh(function(u,p){return u>=p}),Dc=xx(function(){return arguments}())?xx:function(u){return qi(u)&&Mi.call(u,"callee")&&!Ht.call(u,"callee")},Wn=gt.isArray,Cd=xC?To(xC):function eb(u){return qi(u)&&zs(u)==Re};function $s(u){return null!=u&&pf(u.length)&&!ta(u)}function yr(u){return qi(u)&&$s(u)}var Td=Tr||Sf,Pm=Et?To(Et):function UC(u){return qi(u)&&zs(u)==ae};function ff(u){if(!qi(u))return!1;var p=zs(u);return p==Fe||"[object DOMException]"==p||"string"==typeof u.message&&"string"==typeof u.name&&!Wu(u)}function ta(u){if(!Ki(u))return!1;var p=zs(u);return p==Ke||p==fe||"[object AsyncFunction]"==p||"[object Proxy]"==p}function Gu(u){return"number"==typeof u&&u==Jn(u)}function pf(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Ne}function Ki(u){var p=typeof u;return null!=u&&("object"==p||"function"==p)}function qi(u){return null!=u&&"object"==typeof u}var Fb=wC?To(wC):function Ex(u){return qi(u)&&Xr(u)==ee};function vw(u){return"number"==typeof u||qi(u)&&zs(u)==G}function Wu(u){if(!qi(u)||zs(u)!=I)return!1;var p=Xp(u);if(null===p)return!0;var w=Mi.call(p,"constructor")&&p.constructor;return"function"==typeof w&&w instanceof w&&zp.call(w)==DC}var Lm=qt?To(qt):function rm(u){return qi(u)&&zs(u)==ze},Fm=Bh?To(Bh):function uo(u){return qi(u)&&Xr(u)==Je};function Rc(u){return"string"==typeof u||!Wn(u)&&qi(u)&&zs(u)==ot}function Oo(u){return"symbol"==typeof u||qi(u)&&zs(u)==kt}var $u=ex?To(ex):function jC(u){return qi(u)&&pf(u.length)&&!!nr[zs(u)]},tM=Zh(nb),Xu=Zh(function(u,p){return u<=p});function gf(u){if(!u)return[];if($s(u))return Rc(u)?qn(u):Gs(u);if(Sr&&u[Sr])return function j_(dt){for(var wt,gt=[];!(wt=dt.next()).done;)gt.push(wt.value);return gt}(u[Sr]());var p=Xr(u);return(p==ee?dd:p==Je?Up:Ku)(u)}function va(u){return u?(u=ko(u))===Ce||u===-Ce?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Jn(u){var p=va(u),w=p%1;return p==p?w?p-w:p:0}function jb(u){return u?bd(Jn(u),0,me):0}function ko(u){if("number"==typeof u)return u;if(Oo(u))return NaN;if(Ki(u)){var p="function"==typeof u.valueOf?u.valueOf():u;u=Ki(p)?p+"":p}if("string"!=typeof u)return 0===u?u:+u;u=Uh(u);var w=rl.test(u);return w||ja.test(u)?YN(u.slice(2),w?2:8):Cn.test(u)?NaN:+u}function Tl(u){return ya(u,Lo(u))}function Ti(u){return null==u?"":gs(u)}var iM=Tu(function(u,p){if(Mc(p)||$s(p))ya(p,bs(p),u);else for(var w in p)Mi.call(p,w)&&Jp(u,w,p[w])}),xw=Tu(function(u,p){ya(p,Lo(p),u)}),Bm=Tu(function(u,p,w,ie){ya(p,Lo(p),u,ie)}),Po=Tu(function(u,p,w,ie){ya(p,bs(p),u,ie)}),qa=vl(_x),sM=ti(function(u,p){u=Fi(u);var w=-1,ie=p.length,Ae=ie>2?p[2]:b;for(Ae&&Ws(p[0],p[1],Ae)&&(ie=1);++w<ie;)for(var je=p[w],Qe=Lo(je),st=-1,ht=Qe.length;++st<ht;){var Tt=Qe[st],At=u[Tt];(At===b||Ro(At,ud[Tt])&&!Mi.call(u,Tt))&&(u[Tt]=je[Tt])}return u}),oM=ti(function(u){return u.push(b,gm),so(pM,b,u)});function Yu(u,p,w){var ie=null==u?b:gl(u,p);return ie===b?w:ie}function Md(u,p){return null!=u&&ef(u,p,yx)}var Ew=Cc(function(u,p,w){null!=p&&"function"!=typeof p.toString&&(p=Gp.call(p)),u[p]=w},Hm(po)),Aw=Cc(function(u,p,w){null!=p&&"function"!=typeof p.toString&&(p=Gp.call(p)),Mi.call(u,p)?u[p].push(w):u[p]=[w]},xn),Sw=ti(Su);function bs(u){return $s(u)?LC(u):_l(u)}function Lo(u){return $s(u)?LC(u,!0):function Io(u){if(!Ki(u))return function Eb(u){var p=[];if(null!=u)for(var w in Fi(u))p.push(w);return p}(u);var p=Mc(u),w=[];for(var ie in u)"constructor"==ie&&(p||!Mi.call(u,ie))||w.push(ie);return w}(u)}var Hb=Tu(function(u,p,w){Yh(u,p,w)}),pM=Tu(function(u,p,w,ie){Yh(u,p,w,ie)}),IF=vl(function(u,p){var w={};if(null==u)return w;var ie=!1;p=zi(p,function(je){return je=Do(je,u),ie||(ie=je.length>1),je}),ya(u,wd(u),w),ie&&(w=Ir(w,7,hF));for(var Ae=p.length;Ae--;)qh(w,p[Ae]);return w}),mM=vl(function(u,p){return null==u?{}:function Tx(u,p){return Mx(u,p,function(w,ie){return Md(u,ie)})}(u,p)});function Tw(u,p){if(null==u)return{};var w=zi(wd(u),function(ie){return[ie]});return p=xn(p),Mx(u,w,function(ie,Ae){return p(ie,Ae[0])})}var _f=Ru(bs),zb=Ru(Lo);function Ku(u){return null==u?[]:B_(u,bs(u))}var wM=Mu(function(u,p,w){return p=p.toLowerCase(),u+(w?Dw(p):p)});function Dw(u){return qu(Ti(u).toLowerCase())}function $b(u){return(u=Ti(u))&&u.replace(Ha,al).replace(Hn,"")}var bt=Mu(function(u,p,w){return u+(w?"-":"")+p.toLowerCase()}),yf=Mu(function(u,p,w){return u+(w?" ":"")+p.toLowerCase()}),Um=Jh("toLowerCase"),jm=Mu(function(u,p,w){return u+(w?"_":"")+p.toLowerCase()}),Kb=Mu(function(u,p,w){return u+(w?" ":"")+qu(p)}),Zb=Mu(function(u,p,w){return u+(w?" ":"")+p.toUpperCase()}),qu=Jh("toUpperCase");function No(u,p,w){return u=Ti(u),(p=w?b:p)===b?function Bp(dt){return yC.test(dt)}(u)?function yc(dt){return dt.match(bC)||[]}(u):function JN(dt){return dt.match(id)||[]}(u):u.match(p)||[]}var vf=ti(function(u,p){try{return so(u,b,p)}catch(w){return ff(w)?w:new On(w)}}),Qb=vl(function(u,p){return Vs(p,function(w){w=Ic(w),Ec(u,w,Mm(u[w],u))}),u});function Hm(u){return function(){return u}}var IM=mb(),DM=mb(!0);function po(u){return u}function xf(u){return tb("function"==typeof u?u:Ir(u,1))}var Nw=ti(function(u,p){return function(w){return Su(w,u,p)}}),xa=ti(function(u,p){return function(w){return Su(u,w,p)}});function Fw(u,p,w){var ie=bs(p),Ae=J_(p,ie);null==w&&(!Ki(p)||!Ae.length&&ie.length)&&(w=p,p=u,u=this,Ae=J_(p,bs(p)));var je=!(Ki(w)&&"chain"in w&&!w.chain),Qe=ta(u);return Vs(Ae,function(st){var ht=p[st];u[st]=ht,Qe&&(u.prototype[st]=function(){var Tt=this.__chain__;if(je||Tt){var At=u(this.__wrapped__);return(At.__actions__=Gs(this.__actions__)).push({func:ht,args:arguments,thisArg:u}),At.__chain__=Tt,At}return ht.apply(u,_c([this.value()],arguments))})}),u}function Ef(){}var kF=Iu(zi),PF=Iu(Pp),zm=Iu(nx);function Bw(u){return Ou(u)?rx(Ic(u)):function Pn(u){return function(p){return gl(p,u)}}(u)}var ty=mm(),Zu=mm(!0);function Af(){return[]}function Sf(){return!1}var LF=fm(function(u,p){return u+p},0),iy=_b("ceil"),Mf=fm(function(u,p){return u/p},1),kM=_b("floor"),FM=fm(function(u,p){return u*p},1),NF=_b("round"),BM=fm(function(u,p){return u-p},0);return Le.after=function FT(u,p){if("function"!=typeof p)throw new Jo(_);return u=Jn(u),function(){if(--u<1)return p.apply(this,arguments)}},Le.ary=Pb,Le.assign=iM,Le.assignIn=xw,Le.assignInWith=Bm,Le.assignWith=Po,Le.at=qa,Le.before=cw,Le.bind=Mm,Le.bindAll=Qb,Le.bindKey=lw,Le.castArray=function zT(){if(!arguments.length)return[];var u=arguments[0];return Wn(u)?u:[u]},Le.chain=TT,Le.chunk=function mF(u,p,w){p=(w?Ws(u,p,w):p===b)?1:Ii(Jn(p),0);var ie=null==u?0:u.length;if(!ie||p<1)return[];for(var Ae=0,je=0,Qe=gt(hd(ie/p));Ae<ie;)Qe[je++]=St(u,Ae,Ae+=p);return Qe},Le.compact=function Nu(u){for(var p=-1,w=null==u?0:u.length,ie=0,Ae=[];++p<w;){var je=u[p];je&&(Ae[ie++]=je)}return Ae},Le.concat=function iT(){var u=arguments.length;if(!u)return[];for(var p=gt(u-1),w=arguments[0],ie=u;ie--;)p[ie-1]=arguments[ie];return _c(Wn(w)?Gs(w):[w],$r(p,1))},Le.cond=function TM(u){var p=null==u?0:u.length,w=xn();return u=p?zi(u,function(ie){if("function"!=typeof ie[1])throw new Jo(_);return[w(ie[0]),ie[1]]}):[],ti(function(ie){for(var Ae=-1;++Ae<p;){var je=u[Ae];if(so(je[0],this,ie))return so(je[1],this,ie)}})},Le.conforms=function MM(u){return function Zp(u){var p=bs(u);return function(w){return Wr(w,u,p)}}(Ir(u,1))},Le.constant=Hm,Le.countBy=zu,Le.create=function rM(u,p){var w=ml(u);return null==p?w:gx(w,p)},Le.curry=function dw(u,p,w){var ie=Tc(u,8,b,b,b,b,b,p=w?b:p);return ie.placeholder=dw.placeholder,ie},Le.curryRight=function Im(u,p,w){var ie=Tc(u,16,b,b,b,b,b,p=w?b:p);return ie.placeholder=Im.placeholder,ie},Le.debounce=Dm,Le.defaults=sM,Le.defaultsDeep=oM,Le.defer=BT,Le.delay=df,Le.difference=rT,Le.differenceBy=Yr,Le.differenceWith=sT,Le.drop=function nf(u,p,w){var ie=null==u?0:u.length;return ie?St(u,(p=w||p===b?1:Jn(p))<0?0:p,ie):[]},Le.dropRight=function oT(u,p,w){var ie=null==u?0:u.length;return ie?St(u,0,(p=ie-(p=w||p===b?1:Jn(p)))<0?0:p):[]},Le.dropRightWhile=function Qo(u,p){return u&&u.length?am(u,xn(p,3),!0,!0):[]},Le.dropWhile=function Fu(u,p){return u&&u.length?am(u,xn(p,3),!0):[]},Le.fill=function Wx(u,p,w,ie){var Ae=null==u?0:u.length;return Ae?(w&&"number"!=typeof w&&Ws(u,p,w)&&(w=0,ie=Ae),function uF(u,p,w,ie){var Ae=u.length;for((w=Jn(w))<0&&(w=-w>Ae?0:Ae+w),(ie=ie===b||ie>Ae?Ae:Jn(ie))<0&&(ie+=Ae),ie=w>ie?0:jb(ie);w<ie;)u[w++]=p;return u}(u,p,w,ie)):[]},Le.filter=function iw(u,p){return(Wn(u)?gc:K_)(u,xn(p,3))},Le.flatMap=function Sl(u,p){return $r(af(u,p),1)},Le.flatMapDeep=function IT(u,p){return $r(af(u,p),Ce)},Le.flatMapDepth=function DT(u,p,w){return w=w===b?1:Jn(w),$r(af(u,p),w)},Le.flatten=$x,Le.flattenDeep=function gF(u){return null!=u&&u.length?$r(u,Ce):[]},Le.flattenDepth=function aT(u,p){return null!=u&&u.length?$r(u,p=p===b?1:Jn(p)):[]},Le.flip=function UT(u){return Tc(u,512)},Le.flow=IM,Le.flowRight=DM,Le.fromPairs=function _F(u){for(var p=-1,w=null==u?0:u.length,ie={};++p<w;){var Ae=u[p];ie[Ae[0]]=Ae[1]}return ie},Le.functions=function hM(u){return null==u?[]:J_(u,bs(u))},Le.functionsIn=function fM(u){return null==u?[]:J_(u,Lo(u))},Le.groupBy=Rb,Le.initial=function Uu(u){return null!=u&&u.length?St(u,0,-1):[]},Le.intersection=bF,Le.intersectionBy=Xx,Le.intersectionWith=cT,Le.invert=Ew,Le.invertBy=Aw,Le.invokeMap=OT,Le.iteratee=xf,Le.keyBy=kT,Le.keys=bs,Le.keysIn=Lo,Le.map=af,Le.mapKeys=function MF(u,p){var w={};return p=xn(p,3),Xa(u,function(ie,Ae,je){Ec(w,p(ie,Ae,je),ie)}),w},Le.mapValues=function Vb(u,p){var w={};return p=xn(p,3),Xa(u,function(ie,Ae,je){Ec(w,Ae,p(ie,Ae,je))}),w},Le.matches=function wf(u){return Cx(Ir(u,1))},Le.matchesProperty=function RM(u,p){return Ac(u,Ir(p,1))},Le.memoize=Rm,Le.merge=Hb,Le.mergeWith=pM,Le.method=Nw,Le.methodOf=xa,Le.mixin=Fw,Le.negate=uf,Le.nthArg=function OM(u){return u=Jn(u),ti(function(p){return ib(p,u)})},Le.omit=IF,Le.omitBy=function Cw(u,p){return Tw(u,uf(xn(p)))},Le.once=function uw(u){return cw(2,u)},Le.orderBy=function PT(u,p,w,ie){return null==u?[]:(Wn(p)||(p=null==p?[]:[p]),Wn(w=ie?b:w)||(w=null==w?[]:[w]),rb(u,p,w))},Le.over=kF,Le.overArgs=hw,Le.overEvery=PF,Le.overSome=zm,Le.partial=Cl,Le.partialRight=hf,Le.partition=LT,Le.pick=mM,Le.pickBy=Tw,Le.property=Bw,Le.propertyOf=function ey(u){return function(p){return null==u?b:gl(u,p)}},Le.pull=hT,Le.pullAll=ym,Le.pullAllBy=function vm(u,p,w){return u&&u.length&&p&&p.length?sm(u,p,xn(w,2)):u},Le.pullAllWith=function fT(u,p,w){return u&&u.length&&p&&p.length?sm(u,p,b,w):u},Le.pullAt=ju,Le.range=ty,Le.rangeRight=Zu,Le.rearg=fw,Le.reject=function sw(u,p){return(Wn(u)?gc:K_)(u,uf(xn(p,3)))},Le.remove=function pT(u,p){var w=[];if(!u||!u.length)return w;var ie=-1,Ae=[],je=u.length;for(p=xn(p,3);++ie<je;){var Qe=u[ie];p(Qe,ie,u)&&(w.push(Qe),Ae.push(ie))}return HC(u,Ae),w},Le.rest=function Lb(u,p){if("function"!=typeof u)throw new Jo(_);return ti(u,p=p===b?p:Jn(p))},Le.reverse=Vu,Le.sampleSize=function Os(u,p,w){return p=(w?Ws(u,p,w):p===b)?1:Jn(p),(Wn(u)?dF:GC)(u,p)},Le.set=function _M(u,p,w){return null==u?u:Kh(u,p,w)},Le.setWith=function Mw(u,p,w,ie){return ie="function"==typeof ie?ie:b,null==u?u:Kh(u,p,w,ie)},Le.shuffle=function cf(u){return(Wn(u)?_d:$C)(u)},Le.slice=function mT(u,p,w){var ie=null==u?0:u.length;return ie?(w&&"number"!=typeof w&&Ws(u,p,w)?(p=0,w=ie):(p=null==p?0:Jn(p),w=w===b?ie:Jn(w)),St(u,p,w)):[]},Le.sortBy=NT,Le.sortedUniq=function Hu(u){return u&&u.length?ns(u):[]},Le.sortedUniqBy=function sf(u,p){return u&&u.length?ns(u,xn(p,2)):[]},Le.split=function OF(u,p,w){return w&&"number"!=typeof w&&Ws(u,p,w)&&(p=w=b),(w=w===b?me:w>>>0)?(u=Ti(u))&&("string"==typeof p||null!=p&&!Lm(p))&&!(p=gs(p))&&zt(u)?bl(qn(u),0,w):u.split(p,w):[]},Le.spread=function Om(u,p){if("function"!=typeof u)throw new Jo(_);return p=null==p?0:Ii(Jn(p),0),ti(function(w){var ie=w[p],Ae=bl(w,0,p);return ie&&_c(Ae,ie),so(u,this,Ae)})},Le.tail=function bT(u){var p=null==u?0:u.length;return p?St(u,1,p):[]},Le.take=function yF(u,p,w){return u&&u.length?St(u,0,(p=w||p===b?1:Jn(p))<0?0:p):[]},Le.takeRight=function qx(u,p,w){var ie=null==u?0:u.length;return ie?St(u,(p=ie-(p=w||p===b?1:Jn(p)))<0?0:p,ie):[]},Le.takeRightWhile=function yT(u,p){return u&&u.length?am(u,xn(p,3),!1,!0):[]},Le.takeWhile=function vF(u,p){return u&&u.length?am(u,xn(p,3)):[]},Le.tap=function AF(u,p){return p(u),u},Le.throttle=function jT(u,p,w){var ie=!0,Ae=!0;if("function"!=typeof u)throw new Jo(_);return Ki(w)&&(ie="leading"in w?!!w.leading:ie,Ae="trailing"in w?!!w.trailing:Ae),Dm(u,p,{leading:ie,maxWait:p,trailing:Ae})},Le.thru=Ib,Le.toArray=gf,Le.toPairs=_f,Le.toPairsIn=zb,Le.toPath=function ny(u){return Wn(u)?zi(u,Ic):Oo(u)?[u]:Gs(tT(Ti(u)))},Le.toPlainObject=Tl,Le.transform=function Gb(u,p,w){var ie=Wn(u),Ae=ie||Td(u)||$u(u);if(p=xn(p,4),null==w){var je=u&&u.constructor;w=Ae?ie?new je:[]:Ki(u)&&ta(je)?ml(Xp(u)):{}}return(Ae?Vs:Xa)(u,function(Qe,st,ht){return p(w,Qe,st,ht)}),w},Le.unary=function VT(u){return Pb(u,1)},Le.union=vT,Le.unionBy=xT,Le.unionWith=wT,Le.uniq=function wm(u){return u&&u.length?_s(u):[]},Le.uniqBy=function Jx(u,p){return u&&u.length?_s(u,xn(p,2)):[]},Le.uniqWith=function ET(u,p){return p="function"==typeof p?p:b,u&&u.length?_s(u,b,p):[]},Le.unset=function bM(u,p){return null==u||qh(u,p)},Le.unzip=Em,Le.unzipWith=AT,Le.update=function is(u,p,w){return null==u?u:om(u,p,lm(w))},Le.updateWith=function yM(u,p,w,ie){return ie="function"==typeof ie?ie:b,null==u?u:om(u,p,lm(w),ie)},Le.values=Ku,Le.valuesIn=function Wb(u){return null==u?[]:B_(u,Lo(u))},Le.without=Zx,Le.words=No,Le.wrap=function HT(u,p){return Cl(lm(p),u)},Le.xor=xF,Le.xorBy=ST,Le.xorWith=CT,Le.zip=Tb,Le.zipObject=function wF(u,p){return Is(u||[],p||[],Jp)},Le.zipObjectDeep=function EF(u,p){return Is(u||[],p||[],Kh)},Le.zipWith=Mb,Le.entries=_f,Le.entriesIn=zb,Le.extend=xw,Le.extendWith=Bm,Fw(Le,Le),Le.add=LF,Le.attempt=vf,Le.camelCase=wM,Le.capitalize=Dw,Le.ceil=iy,Le.clamp=function Iw(u,p,w){return w===b&&(w=p,p=b),w!==b&&(w=(w=ko(w))==w?w:0),p!==b&&(p=(p=ko(p))==p?p:0),bd(ko(u),p,w)},Le.clone=function GT(u){return Ir(u,4)},Le.cloneDeep=function pw(u){return Ir(u,5)},Le.cloneDeepWith=function km(u,p){return Ir(u,5,p="function"==typeof p?p:b)},Le.cloneWith=function WT(u,p){return Ir(u,4,p="function"==typeof p?p:b)},Le.conformsTo=function Nb(u,p){return null==p||Wr(u,p,bs(p))},Le.deburr=$b,Le.defaultTo=function Ju(u,p){return null==u||u!=u?p:u},Le.divide=Mf,Le.endsWith=function DF(u,p,w){u=Ti(u),p=gs(p);var ie=u.length,Ae=w=w===b?ie:bd(Jn(w),0,ie);return(w-=p.length)>=0&&u.slice(w,Ae)==p},Le.eq=Ro,Le.escape=function RF(u){return(u=Ti(u))&&So.test(u)?u.replace($i,CC):u},Le.escapeRegExp=function bf(u){return(u=Ti(u))&&el.test(u)?u.replace(Qc,"\\$&"):u},Le.every=function nw(u,p,w){var ie=Wn(u)?Pp:tm;return w&&Ws(u,p,w)&&(p=b),ie(u,xn(p,3))},Le.find=Cm,Le.findIndex=rf,Le.findKey=function aM(u,p){return Np(u,xn(p,3),Xa)},Le.findLast=Tm,Le.findLastIndex=Bu,Le.findLastKey=function cM(u,p){return Np(u,xn(p,3),bx)},Le.floor=kM,Le.forEach=rw,Le.forEachRight=Db,Le.forIn=function lM(u,p){return null==u?u:q_(u,xn(p,3),Lo)},Le.forInRight=function ww(u,p){return null==u?u:Xh(u,xn(p,3),Lo)},Le.forOwn=function dM(u,p){return u&&Xa(u,xn(p,3))},Le.forOwnRight=function uM(u,p){return u&&bx(u,xn(p,3))},Le.get=Yu,Le.gt=$T,Le.gte=XT,Le.has=function Oc(u,p){return null!=u&&ef(u,p,Dr)},Le.hasIn=Md,Le.head=ho,Le.identity=po,Le.includes=function RT(u,p,w,ie){u=$s(u)?u:Ku(u),w=w&&!ie?Jn(w):0;var Ae=u.length;return w<0&&(w=Ii(Ae+w,0)),Rc(u)?w<=Ae&&u.indexOf(p,w)>-1:!!Ae&&ad(u,p,w)>-1},Le.indexOf=function Sb(u,p,w){var ie=null==u?0:u.length;if(!ie)return-1;var Ae=null==w?0:Jn(w);return Ae<0&&(Ae=Ii(ie+Ae,0)),ad(u,p,Ae)},Le.inRange=function vM(u,p,w){return p=va(p),w===b?(w=p,p=0):w=va(w),function BC(u,p,w){return u>=Nr(p,w)&&u<Ii(p,w)}(u=ko(u),p,w)},Le.invoke=Sw,Le.isArguments=Dc,Le.isArray=Wn,Le.isArrayBuffer=Cd,Le.isArrayLike=$s,Le.isArrayLikeObject=yr,Le.isBoolean=function KT(u){return!0===u||!1===u||qi(u)&&zs(u)==O},Le.isBuffer=Td,Le.isDate=Pm,Le.isElement=function qT(u){return qi(u)&&1===u.nodeType&&!Wu(u)},Le.isEmpty=function mw(u){if(null==u)return!0;if($s(u)&&(Wn(u)||"string"==typeof u||"function"==typeof u.splice||Td(u)||$u(u)||Dc(u)))return!u.length;var p=Xr(u);if(p==ee||p==Je)return!u.size;if(Mc(u))return!_l(u).length;for(var w in u)if(Mi.call(u,w))return!1;return!0},Le.isEqual=function gw(u,p){return lo(u,p)},Le.isEqualWith=function _w(u,p,w){var ie=(w="function"==typeof w?w:b)?w(u,p):b;return ie===b?lo(u,p,b,w):!!ie},Le.isError=ff,Le.isFinite=function bw(u){return"number"==typeof u&&Kt(u)},Le.isFunction=ta,Le.isInteger=Gu,Le.isLength=pf,Le.isMap=Fb,Le.isMatch=function Bb(u,p){return u===p||ki(u,p,_m(p))},Le.isMatchWith=function mf(u,p,w){return w="function"==typeof w?w:b,ki(u,p,_m(p),w)},Le.isNaN=function JT(u){return vw(u)&&u!=+u},Le.isNative=function yw(u){if(zx(u))throw new On("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ax(u)},Le.isNil=function QT(u){return null==u},Le.isNull=function ZT(u){return null===u},Le.isNumber=vw,Le.isObject=Ki,Le.isObjectLike=qi,Le.isPlainObject=Wu,Le.isRegExp=Lm,Le.isSafeInteger=function Nm(u){return Gu(u)&&u>=-Ne&&u<=Ne},Le.isSet=Fm,Le.isString=Rc,Le.isSymbol=Oo,Le.isTypedArray=$u,Le.isUndefined=function TF(u){return u===b},Le.isWeakMap=function eM(u){return qi(u)&&Xr(u)==Wt},Le.isWeakSet=function Ub(u){return qi(u)&&"[object WeakSet]"==zs(u)},Le.join=function lT(u,p){return null==u?"":Gn.call(u,p)},Le.kebabCase=bt,Le.last=ea,Le.lastIndexOf=function dT(u,p,w){var ie=null==u?0:u.length;if(!ie)return-1;var Ae=ie;return w!==b&&(Ae=(Ae=Jn(w))<0?Ii(ie+Ae,0):Nr(Ae,ie-1)),p==p?function ga(dt,wt,gt){for(var en=gt+1;en--;)if(dt[en]===wt)return en;return en}(u,p,Ae):yu(u,ix,Ae,!0)},Le.lowerCase=yf,Le.lowerFirst=Um,Le.lt=tM,Le.lte=Xu,Le.max=function jw(u){return u&&u.length?nm(u,po,im):b},Le.maxBy=function PM(u,p){return u&&u.length?nm(u,xn(p,2),im):b},Le.mean=function LM(u){return Fp(u,po)},Le.meanBy=function ry(u,p){return Fp(u,xn(p,2))},Le.min=function Vw(u){return u&&u.length?nm(u,po,nb):b},Le.minBy=function NM(u,p){return u&&u.length?nm(u,xn(p,2),nb):b},Le.stubArray=Af,Le.stubFalse=Sf,Le.stubObject=function Cf(){return{}},Le.stubString=function Gm(){return""},Le.stubTrue=function Tf(){return!0},Le.multiply=FM,Le.nth=function uT(u,p){return u&&u.length?ib(u,Jn(p)):b},Le.noConflict=function Kr(){return ps._===this&&(ps._=RC),this},Le.noop=Ef,Le.now=lf,Le.pad=function Rw(u,p,w){u=Ti(u);var ie=(p=Jn(p))?Hs(u):0;if(!p||ie>=p)return u;var Ae=(p-ie)/2;return xd(Yp(Ae),w)+u+xd(hd(Ae),w)},Le.padEnd=function Xb(u,p,w){u=Ti(u);var ie=(p=Jn(p))?Hs(u):0;return p&&ie<p?u+xd(p-ie,w):u},Le.padStart=function Yb(u,p,w){u=Ti(u);var ie=(p=Jn(p))?Hs(u):0;return p&&ie<p?xd(p-ie,w)+u:u},Le.parseInt=function EM(u,p,w){return w||null==p?p=0:p&&(p=+p),vu(Ti(u).replace(Ua,""),p||0)},Le.random=function xM(u,p,w){if(w&&"boolean"!=typeof w&&Ws(u,p,w)&&(p=w=b),w===b&&("boolean"==typeof p?(w=p,p=b):"boolean"==typeof u&&(w=u,u=b)),u===b&&p===b?(u=0,p=1):(u=va(u),p===b?(p=u,u=0):p=va(p)),u>p){var ie=u;u=p,p=ie}if(w||u%1||p%1){var Ae=br();return Nr(u+Ae*(p-u+XN("1e-"+((Ae+"").length-1))),p)}return sb(u,p)},Le.reduce=function fo(u,p,w){var ie=Wn(u)?Ts:AC,Ae=arguments.length<3;return ie(u,xn(p,4),w,Ae,$a)},Le.reduceRight=function Ob(u,p,w){var ie=Wn(u)?tx:AC,Ae=arguments.length<3;return ie(u,xn(p,4),w,Ae,em)},Le.repeat=function Ow(u,p,w){return p=(w?Ws(u,p,w):p===b)?1:Jn(p),ob(Ti(u),p)},Le.replace=function kw(){var u=arguments,p=Ti(u[0]);return u.length<3?p:p.replace(u[1],u[2])},Le.result=function gM(u,p,w){var ie=-1,Ae=(p=Do(p,u)).length;for(Ae||(Ae=1,u=b);++ie<Ae;){var je=null==u?b:u[Ic(p[ie])];je===b&&(ie=Ae,je=w),u=ta(je)?je.call(u):je}return u},Le.round=NF,Le.runInContext=dt,Le.sample=function kb(u){return(Wn(u)?NC:Cu)(u)},Le.size=function ow(u){if(null==u)return 0;if($s(u))return Rc(u)?Hs(u):u.length;var p=Xr(u);return p==ee||p==Je?u.size:_l(u).length},Le.snakeCase=jm,Le.some=function aw(u,p,w){var ie=Wn(u)?nx:bi;return w&&Ws(u,p,w)&&(p=b),ie(u,xn(p,3))},Le.sortedIndex=function Yx(u,p){return rr(u,p)},Le.sortedIndexBy=function Cb(u,p,w){return dr(u,p,xn(w,2))},Le.sortedIndexOf=function xm(u,p){var w=null==u?0:u.length;if(w){var ie=rr(u,p);if(ie<w&&Ro(u[ie],p))return ie}return-1},Le.sortedLastIndex=function Kx(u,p){return rr(u,p,!0)},Le.sortedLastIndexBy=function gT(u,p,w){return dr(u,p,xn(w,2),!0)},Le.sortedLastIndexOf=function _T(u,p){if(null!=u&&u.length){var ie=rr(u,p,!0)-1;if(Ro(u[ie],p))return ie}return-1},Le.startCase=Kb,Le.startsWith=function AM(u,p,w){return u=Ti(u),w=null==w?0:bd(Jn(w),0,u.length),p=gs(p),u.slice(w,w+p.length)==p},Le.subtract=BM,Le.sum=function $m(u){return u&&u.length?ox(u,po):0},Le.sumBy=function sy(u,p){return u&&u.length?ox(u,xn(p,2)):0},Le.template=function qb(u,p,w){var ie=Le.templateSettings;w&&Ws(u,p,w)&&(p=b),u=Ti(u),p=Bm({},p,ie,KC);var st,ht,Ae=Bm({},p.imports,ie.imports,KC),je=bs(Ae),Qe=B_(Ae,je),Tt=0,At=p.interpolate||Bs,Ft="__p += '",Yt=Vp((p.escape||Bs).source+"|"+At.source+"|"+(At===Ss?rd:Bs).source+"|"+(p.evaluate||Bs).source+"|$","g"),Mt="//# sourceURL="+(Mi.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Co+"]")+"\n";u.replace(Yt,function(pn,ui,gi,Fr,Xs,Ys){return gi||(gi=Fr),Ft+=u.slice(Tt,Ys).replace(be,rt),ui&&(st=!0,Ft+="' +\n__e("+ui+") +\n'"),Xs&&(ht=!0,Ft+="';\n"+Xs+";\n__p += '"),gi&&(Ft+="' +\n((__t = ("+gi+")) == null ? '' : __t) +\n'"),Tt=Ys+pn.length,pn}),Ft+="';\n";var Tn=Mi.call(p,"variable")&&p.variable;if(Tn){if(bu.test(Tn))throw new On("Invalid `variable` option passed into `_.template`")}else Ft="with (obj) {\n"+Ft+"\n}\n";Ft=(ht?Ft.replace(bn,""):Ft).replace(As,"$1").replace(Yo,"$1;"),Ft="function("+(Tn||"obj")+") {\n"+(Tn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(st?", __e = _.escape":"")+(ht?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ft+"return __p\n}";var Qn=vf(function(){return xi(je,Mt+"return "+Ft).apply(b,Qe)});if(Qn.source=Ft,ff(Qn))throw Qn;return Qn},Le.times=function Uw(u,p){if((u=Jn(u))<1||u>Ne)return[];var w=me,ie=Nr(u,me);p=xn(p),u-=me;for(var Ae=cd(ie,p);++w<u;)p(w);return Ae},Le.toFinite=va,Le.toInteger=Jn,Le.toLength=jb,Le.toLower=function Pw(u){return Ti(u).toLowerCase()},Le.toNumber=ko,Le.toSafeInteger=function nM(u){return u?bd(Jn(u),-Ne,Ne):0===u?u:0},Le.toString=Ti,Le.toUpper=function Lw(u){return Ti(u).toUpperCase()},Le.trim=function Id(u,p,w){if((u=Ti(u))&&(w||p===b))return Uh(u);if(!u||!(p=gs(p)))return u;var ie=qn(u),Ae=qn(p);return bl(ie,U_(ie,Ae),ld(ie,Ae)+1).join("")},Le.trimEnd=function SM(u,p,w){if((u=Ti(u))&&(w||p===b))return u.slice(0,Vh(u)+1);if(!u||!(p=gs(p)))return u;var ie=qn(u);return bl(ie,0,ld(ie,qn(p))+1).join("")},Le.trimStart=function Jb(u,p,w){if((u=Ti(u))&&(w||p===b))return u.replace(Ua,"");if(!u||!(p=gs(p)))return u;var ie=qn(u);return bl(ie,U_(ie,qn(p))).join("")},Le.truncate=function Vm(u,p){var w=30,ie="...";if(Ki(p)){var Ae="separator"in p?p.separator:Ae;w="length"in p?Jn(p.length):w,ie="omission"in p?gs(p.omission):ie}var je=(u=Ti(u)).length;if(zt(u)){var Qe=qn(u);je=Qe.length}if(w>=je)return u;var st=w-Hs(ie);if(st<1)return ie;var ht=Qe?bl(Qe,0,st).join(""):u.slice(0,st);if(Ae===b)return ht+ie;if(Qe&&(st+=ht.length-st),Lm(Ae)){if(u.slice(st).search(Ae)){var Tt,At=ht;for(Ae.global||(Ae=Vp(Ae.source,Ti(il.exec(Ae))+"g")),Ae.lastIndex=0;Tt=Ae.exec(At);)var Ft=Tt.index;ht=ht.slice(0,Ft===b?st:Ft)}}else if(u.indexOf(gs(Ae),st)!=st){var Yt=ht.lastIndexOf(Ae);Yt>-1&&(ht=ht.slice(0,Yt))}return ht+ie},Le.unescape=function CM(u){return(u=Ti(u))&&ts.test(u)?u.replace(Ns,V_):u},Le.uniqueId=function Wm(u){var p=++IC;return Ti(u)+p},Le.upperCase=Zb,Le.upperFirst=qu,Le.each=rw,Le.eachRight=Db,Le.first=ho,Fw(Le,function(){var u={};return Xa(Le,function(p,w){Mi.call(Le.prototype,w)||(u[w]=p)}),u}(),{chain:!1}),Le.VERSION="4.17.21",Vs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Le[u].placeholder=Le}),Vs(["drop","take"],function(u,p){oi.prototype[u]=function(w){w=w===b?1:Ii(Jn(w),0);var ie=this.__filtered__&&!p?new oi(this):this.clone();return ie.__filtered__?ie.__takeCount__=Nr(w,ie.__takeCount__):ie.__views__.push({size:Nr(w,me),type:u+(ie.__dir__<0?"Right":"")}),ie},oi.prototype[u+"Right"]=function(w){return this.reverse()[u](w).reverse()}}),Vs(["filter","map","takeWhile"],function(u,p){var w=p+1,ie=1==w||3==w;oi.prototype[u]=function(Ae){var je=this.clone();return je.__iteratees__.push({iteratee:xn(Ae,3),type:w}),je.__filtered__=je.__filtered__||ie,je}}),Vs(["head","last"],function(u,p){var w="take"+(p?"Right":"");oi.prototype[u]=function(){return this[w](1).value()[0]}}),Vs(["initial","tail"],function(u,p){var w="drop"+(p?"":"Right");oi.prototype[u]=function(){return this.__filtered__?new oi(this):this[w](1)}}),oi.prototype.compact=function(){return this.filter(po)},oi.prototype.find=function(u){return this.filter(u).head()},oi.prototype.findLast=function(u){return this.reverse().find(u)},oi.prototype.invokeMap=ti(function(u,p){return"function"==typeof u?new oi(this):this.map(function(w){return Su(w,u,p)})}),oi.prototype.reject=function(u){return this.filter(uf(xn(u)))},oi.prototype.slice=function(u,p){u=Jn(u);var w=this;return w.__filtered__&&(u>0||p<0)?new oi(w):(u<0?w=w.takeRight(-u):u&&(w=w.drop(u)),p!==b&&(w=(p=Jn(p))<0?w.dropRight(-p):w.take(p-u)),w)},oi.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},oi.prototype.toArray=function(){return this.take(me)},Xa(oi.prototype,function(u,p){var w=/^(?:filter|find|map|reject)|While$/.test(p),ie=/^(?:head|last)$/.test(p),Ae=Le[ie?"take"+("last"==p?"Right":""):p],je=ie||/^find/.test(p);Ae&&(Le.prototype[p]=function(){var Qe=this.__wrapped__,st=ie?[1]:arguments,ht=Qe instanceof oi,Tt=st[0],At=ht||Wn(Qe),Ft=function(ui){var gi=Ae.apply(Le,_c([ui],st));return ie&&Yt?gi[0]:gi};At&&w&&"function"==typeof Tt&&1!=Tt.length&&(ht=At=!1);var Yt=this.__chain__,Tn=je&&!Yt,Qn=ht&&!this.__actions__.length;if(!je&&At){Qe=Qn?Qe:new oi(this);var pn=u.apply(Qe,st);return pn.__actions__.push({func:Ib,args:[Ft],thisArg:b}),new Mr(pn,Yt)}return Tn&&Qn?u.apply(this,st):(pn=this.thru(Ft),Tn?ie?pn.value()[0]:pn.value():pn)})}),Vs(["pop","push","shift","sort","splice","unshift"],function(u){var p=oo[u],w=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",ie=/^(?:pop|shift)$/.test(u);Le.prototype[u]=function(){var Ae=arguments;if(ie&&!this.__chain__){var je=this.value();return p.apply(Wn(je)?je:[],Ae)}return this[w](function(Qe){return p.apply(Wn(Qe)?Qe:[],Ae)})}}),Xa(oi.prototype,function(u,p){var w=Le[p];if(w){var ie=w.name+"";Mi.call(_a,ie)||(_a[ie]=[]),_a[ie].push({name:p,func:w})}}),_a[vd(b,2).name]=[{name:"wrapper",func:b}],oi.prototype.clone=function xu(){var u=new oi(this.__wrapped__);return u.__actions__=Gs(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Gs(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Gs(this.__views__),u},oi.prototype.reverse=function $h(){if(this.__filtered__){var u=new oi(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},oi.prototype.value=function ms(){var u=this.__wrapped__.value(),p=this.__dir__,w=Wn(u),ie=p<0,Ae=w?u.length:0,je=function vb(u,p,w){for(var ie=-1,Ae=w.length;++ie<Ae;){var je=w[ie],Qe=je.size;switch(je.type){case"drop":u+=Qe;break;case"dropRight":p-=Qe;break;case"take":p=Nr(p,u+Qe);break;case"takeRight":u=Ii(u,p-Qe)}}return{start:u,end:p}}(0,Ae,this.__views__),Qe=je.start,st=je.end,ht=st-Qe,Tt=ie?st:Qe-1,At=this.__iteratees__,Ft=At.length,Yt=0,Mt=Nr(ht,this.__takeCount__);if(!w||!ie&&Ae==ht&&Mt==ht)return XC(u,this.__actions__);var Tn=[];e:for(;ht--&&Yt<Mt;){for(var Qn=-1,pn=u[Tt+=p];++Qn<Ft;){var ui=At[Qn],Fr=ui.type,Xs=(0,ui.iteratee)(pn);if(2==Fr)pn=Xs;else if(!Xs){if(1==Fr)continue e;break e}}Tn[Yt++]=pn}return Tn},Le.prototype.at=SF,Le.prototype.chain=function CF(){return TT(this)},Le.prototype.commit=function MT(){return new Mr(this.value(),this.__chain__)},Le.prototype.next=function Am(){this.__values__===b&&(this.__values__=gf(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?b:this.__values__[this.__index__++]}},Le.prototype.plant=function Qx(u){for(var p,w=this;w instanceof Wh;){var ie=nT(w);ie.__index__=0,ie.__values__=b,p?Ae.__wrapped__=ie:p=ie;var Ae=ie;w=w.__wrapped__}return Ae.__wrapped__=u,p},Le.prototype.reverse=function ew(){var u=this.__wrapped__;if(u instanceof oi){var p=u;return this.__actions__.length&&(p=new oi(this)),(p=p.reverse()).__actions__.push({func:Ib,args:[Vu],thisArg:b}),new Mr(p,this.__chain__)}return this.thru(Vu)},Le.prototype.toJSON=Le.prototype.valueOf=Le.prototype.value=function tw(){return XC(this.__wrapped__,this.__actions__)},Le.prototype.first=Le.prototype.head,Sr&&(Le.prototype[Sr]=function Sm(){return this}),Le}();ps._=zh,(E=function(){return zh}.call(Z,g,Z,ne))!==b&&(ne.exports=E)}.call(this)},7659:(ne,Z,g)=>{var E=g(1811);function k(A,P){if("function"!=typeof A||null!=P&&"function"!=typeof P)throw new TypeError("Expected a function");var _=function(){var y=arguments,M=P?P.apply(this,y):y[0],F=_.cache;if(F.has(M))return F.get(M);var L=A.apply(this,y);return _.cache=F.set(M,L)||F,L};return _.cache=new(k.Cache||E),_}k.Cache=E,ne.exports=k},2692:(ne,Z,g)=>{var E=g(3400),b=g(6443),k=g(6300),A=g(8916);ne.exports=function P(_){return k(_)?E(A(_)):b(_)}},7184:(ne,Z,g)=>{var E=g(1883),b=g(252),k=g(8951),A=g(3817),P=k(function(_,y){if(null==_)return[];var M=y.length;return M>1&&A(_,y[0],y[1])?y=[]:M>2&&A(y[0],y[1],y[2])&&(y=[y[0]]),b(_,E(y,1),[])});ne.exports=P},1315:ne=>{ne.exports=function Z(){return[]}},5706:ne=>{ne.exports=function Z(){return!1}},2674:(ne,Z,g)=>{var E=g(7002);ne.exports=function b(k){return null==k?"":E(k)}},5249:(ne,Z,g)=>{var E=g(549),b=E.ARRAY_BUFFER_SUPPORT,k=E.SYMBOL_SUPPORT;ne.exports=function(P,_){var y,M,F,L,j;if(!P)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(P)||b&&ArrayBuffer.isView(P)||"string"==typeof P||"[object Arguments]"===P.toString())for(F=0,L=P.length;F<L;F++)_(P[F],F);else if("function"!=typeof P.forEach)if(k&&Symbol.iterator in P&&"function"!=typeof P.next&&(P=P[Symbol.iterator]()),"function"!=typeof P.next)for(M in P)P.hasOwnProperty(M)&&_(P[M],M);else for(y=P,F=0;!0!==(j=y.next()).done;)_(j.value,F),F++;else P.forEach(_)}},2508:ne=>{function Z(g){if("function"!=typeof g)throw new Error("obliterator/iterator: expecting a function!");this.next=g}typeof Symbol<"u"&&(Z.prototype[Symbol.iterator]=function(){return this}),Z.of=function(){var g=arguments,E=g.length,b=0;return new Z(function(){return b>=E?{done:!0}:{done:!1,value:g[b++]}})},Z.empty=function(){return new Z(function(){return{done:!0}})},Z.fromSequence=function(g){var E=0,b=g.length;return new Z(function(){return E>=b?{done:!0}:{done:!1,value:g[E++]}})},Z.is=function(g){return g instanceof Z||"object"==typeof g&&null!==g&&"function"==typeof g.next},ne.exports=Z},549:(ne,Z)=>{Z.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Z.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(ne,Z,g)=>{var E=g(2508),b=g(5249);function k(){this.clear()}k.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},k.prototype.enqueue=function(A){return this.items.push(A),++this.size},k.prototype.dequeue=function(){if(this.size){var A=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,A}},k.prototype.peek=function(){if(this.size)return this.items[this.offset]},k.prototype.forEach=function(A,P){P=arguments.length>1?P:this;for(var _=this.offset,y=0,M=this.items.length;_<M;_++,y++)A.call(P,this.items[_],y,this)},k.prototype.toArray=function(){return this.items.slice(this.offset)},k.prototype.values=function(){var A=this.items,P=this.offset;return new E(function(){if(P>=A.length)return{done:!0};var _=A[P];return P++,{value:_,done:!1}})},k.prototype.entries=function(){var A=this.items,P=this.offset,_=0;return new E(function(){if(P>=A.length)return{done:!0};var y=A[P];return P++,{value:[_++,y],done:!1}})},typeof Symbol<"u"&&(k.prototype[Symbol.iterator]=k.prototype.values),k.prototype.toString=function(){return this.toArray().join(",")},k.prototype.toJSON=function(){return this.toArray()},k.prototype.inspect=function(){var A=this.toArray();return Object.defineProperty(A,"constructor",{value:k,enumerable:!1}),A},typeof Symbol<"u"&&(k.prototype[Symbol.for("nodejs.util.inspect.custom")]=k.prototype.inspect),k.from=function(A){var P=new k;return b(A,function(_){P.enqueue(_)}),P},k.of=function(){return k.from(arguments)},ne.exports=k},5020:ne=>{ne.exports=function Z(g,E,b){function k(_,y){if(!E[_]){if(!g[_]){if(A)return A(_,!0);throw new Error("Cannot find module '"+_+"'")}y=E[_]={exports:{}},g[_][0].call(y.exports,function(F){return k(g[_][1][F]||F)},y,y.exports,Z,g,E,b)}return E[_].exports}for(var A=void 0,P=0;P<b.length;P++)k(b[P]);return k}({1:[function(Z,g,E){(function(b,k,A,P,_,y,M,F,L){"use strict";var j=Z("crypto");function oe(q,V){var x;return void 0===(x="passthrough"!==(V=le(q,V)).algorithm?j.createHash(V.algorithm):new te).write&&(x.write=x.update,x.end=x.update),re(V,x).dispatch(q),x.update||x.end(""),x.digest?x.digest("buffer"===V.encoding?void 0:V.encoding):(q=x.read(),"buffer"!==V.encoding?q.toString(V.encoding):q)}(E=g.exports=oe).sha1=function(q){return oe(q)},E.keys=function(q){return oe(q,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},E.MD5=function(q){return oe(q,{algorithm:"md5",encoding:"hex"})},E.keysMD5=function(q){return oe(q,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var C=j.getHashes?j.getHashes().slice():["sha1","md5"],Y=(C.push("passthrough"),["buffer","hex","binary","base64"]);function le(q,V){var x={};if(x.algorithm=(V=V||{}).algorithm||"sha1",x.encoding=V.encoding||"hex",x.excludeValues=!!V.excludeValues,x.algorithm=x.algorithm.toLowerCase(),x.encoding=x.encoding.toLowerCase(),x.ignoreUnknown=!0===V.ignoreUnknown,x.respectType=!1!==V.respectType,x.respectFunctionNames=!1!==V.respectFunctionNames,x.respectFunctionProperties=!1!==V.respectFunctionProperties,x.unorderedArrays=!0===V.unorderedArrays,x.unorderedSets=!1!==V.unorderedSets,x.unorderedObjects=!1!==V.unorderedObjects,x.replacer=V.replacer||void 0,x.excludeKeys=V.excludeKeys||void 0,void 0===q)throw new Error("Object argument required.");for(var B=0;B<C.length;++B)C[B].toLowerCase()===x.algorithm.toLowerCase()&&(x.algorithm=C[B]);if(-1===C.indexOf(x.algorithm))throw new Error('Algorithm "'+x.algorithm+'"  not supported. supported values: '+C.join(", "));if(-1===Y.indexOf(x.encoding)&&"passthrough"!==x.algorithm)throw new Error('Encoding "'+x.encoding+'"  not supported. supported values: '+Y.join(", "));return x}function K(q){if("function"==typeof q)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(q))}function re(q,V,x){function B(D){return V.update?V.update(D,"utf8"):V.write(D,"utf8")}return x=x||[],{dispatch:function(D){return this["_"+(null===(D=q.replacer?q.replacer(D):D)?"null":typeof D)](D)},_object:function(D){var he,W=Object.prototype.toString.call(D),Te=/\[object (.*)\]/i.exec(W);if(Te=(Te=Te?Te[1]:"unknown:["+W+"]").toLowerCase(),0<=(W=x.indexOf(D)))return this.dispatch("[CIRCULAR:"+W+"]");if(x.push(D),void 0!==A&&A.isBuffer&&A.isBuffer(D))return B("buffer:"),B(D);if("object"===Te||"function"===Te||"asyncfunction"===Te)return W=Object.keys(D),q.unorderedObjects&&(W=W.sort()),!1===q.respectType||K(D)||W.splice(0,0,"prototype","__proto__","constructor"),q.excludeKeys&&(W=W.filter(function(de){return!q.excludeKeys(de)})),B("object:"+W.length+":"),he=this,W.forEach(function(de){he.dispatch(de),B(":"),q.excludeValues||he.dispatch(D[de]),B(",")});if(!this["_"+Te]){if(q.ignoreUnknown)return B("["+Te+"]");throw new Error('Unknown object type "'+Te+'"')}this["_"+Te](D)},_array:function(D,de){de=void 0!==de?de:!1!==q.unorderedArrays;var W=this;if(B("array:"+D.length+":"),!de||D.length<=1)return D.forEach(function(we){return W.dispatch(we)});var Te=[];return de=D.map(function(we){var Ie=new te,De=x.slice();return re(q,Ie,De).dispatch(we),Te=Te.concat(De.slice(x.length)),Ie.read().toString()}),x=x.concat(Te),de.sort(),this._array(de,!1)},_date:function(D){return B("date:"+D.toJSON())},_symbol:function(D){return B("symbol:"+D.toString())},_error:function(D){return B("error:"+D.toString())},_boolean:function(D){return B("bool:"+D.toString())},_string:function(D){B("string:"+D.length+":"),B(D.toString())},_function:function(D){B("fn:"),K(D)?this.dispatch("[native]"):this.dispatch(D.toString()),!1!==q.respectFunctionNames&&this.dispatch("function-name:"+String(D.name)),q.respectFunctionProperties&&this._object(D)},_number:function(D){return B("number:"+D.toString())},_xml:function(D){return B("xml:"+D.toString())},_null:function(){return B("Null")},_undefined:function(){return B("Undefined")},_regexp:function(D){return B("regex:"+D.toString())},_uint8array:function(D){return B("uint8array:"),this.dispatch(Array.prototype.slice.call(D))},_uint8clampedarray:function(D){return B("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(D))},_int8array:function(D){return B("int8array:"),this.dispatch(Array.prototype.slice.call(D))},_uint16array:function(D){return B("uint16array:"),this.dispatch(Array.prototype.slice.call(D))},_int16array:function(D){return B("int16array:"),this.dispatch(Array.prototype.slice.call(D))},_uint32array:function(D){return B("uint32array:"),this.dispatch(Array.prototype.slice.call(D))},_int32array:function(D){return B("int32array:"),this.dispatch(Array.prototype.slice.call(D))},_float32array:function(D){return B("float32array:"),this.dispatch(Array.prototype.slice.call(D))},_float64array:function(D){return B("float64array:"),this.dispatch(Array.prototype.slice.call(D))},_arraybuffer:function(D){return B("arraybuffer:"),this.dispatch(new Uint8Array(D))},_url:function(D){return B("url:"+D.toString())},_map:function(D){return B("map:"),D=Array.from(D),this._array(D,!1!==q.unorderedSets)},_set:function(D){return B("set:"),D=Array.from(D),this._array(D,!1!==q.unorderedSets)},_file:function(D){return B("file:"),this.dispatch([D.name,D.size,D.type,D.lastModfied])},_blob:function(){if(q.ignoreUnknown)return B("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return B("domwindow")},_bigint:function(D){return B("bigint:"+D.toString())},_process:function(){return B("process")},_timer:function(){return B("timer")},_pipe:function(){return B("pipe")},_tcp:function(){return B("tcp")},_udp:function(){return B("udp")},_tty:function(){return B("tty")},_statwatcher:function(){return B("statwatcher")},_securecontext:function(){return B("securecontext")},_connection:function(){return B("connection")},_zlib:function(){return B("zlib")},_context:function(){return B("context")},_nodescript:function(){return B("nodescript")},_httpparser:function(){return B("httpparser")},_dataview:function(){return B("dataview")},_signal:function(){return B("signal")},_fsevent:function(){return B("fsevent")},_tlswrap:function(){return B("tlswrap")}}}function te(){return{buf:"",write:function(q){this.buf+=q},end:function(q){this.buf+=q},read:function(){return this.buf}}}E.writeToStream=function(q,V,x){return void 0===x&&(x=V,V={}),re(V=le(q,V),x).dispatch(q)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(Z,g,E){(function(b,k,A,P,_,y,M,F,L){!function(j){"use strict";var oe=typeof Uint8Array<"u"?Uint8Array:Array,C="+".charCodeAt(0),Y="/".charCodeAt(0),le="0".charCodeAt(0),K="a".charCodeAt(0),re="A".charCodeAt(0),te="-".charCodeAt(0),q="_".charCodeAt(0);function V(x){return(x=x.charCodeAt(0))===C||x===te?62:x===Y||x===q?63:x<le?-1:x<le+10?x-le+26+26:x<re+26?x-re:x<K+26?x-K+26:void 0}j.toByteArray=function(x){var B,D;if(0<x.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var he="="===x.charAt((he=x.length)-2)?2:"="===x.charAt(he-1)?1:0,W=new oe(3*x.length/4-he),Te=0<he?x.length-4:x.length,de=0;function we(Ie){W[de++]=Ie}for(B=0;B<Te;B+=4,0)we((16711680&(D=V(x.charAt(B))<<18|V(x.charAt(B+1))<<12|V(x.charAt(B+2))<<6|V(x.charAt(B+3))))>>16),we((65280&D)>>8),we(255&D);return 2==he?we(255&(D=V(x.charAt(B))<<2|V(x.charAt(B+1))>>4)):1==he&&(we((D=V(x.charAt(B))<<10|V(x.charAt(B+1))<<4|V(x.charAt(B+2))>>2)>>8&255),we(255&D)),W},j.fromByteArray=function(x){var B,D,he,W,Te=x.length%3,de="";function we(Ie){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Ie)}for(B=0,he=x.length-Te;B<he;B+=3)de+=we((W=D=(x[B]<<16)+(x[B+1]<<8)+x[B+2])>>18&63)+we(W>>12&63)+we(W>>6&63)+we(63&W);switch(Te){case 1:de=(de+=we((D=x[x.length-1])>>2))+we(D<<4&63)+"==";break;case 2:de=(de=(de+=we((D=(x[x.length-2]<<8)+x[x.length-1])>>10))+we(D>>4&63))+we(D<<2&63)+"="}return de}}(void 0===E?this.base64js={}:E)}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(Z,g,E){(function(b,k,C,P,_,y,M,F,L){var j=Z("base64-js"),oe=Z("ieee754");function C(_e,z,O){if(!(this instanceof C))return new C(_e,z,O);var ae,H,Fe,Ke,fe=typeof _e;if("base64"===z&&"string"==fe)for(_e=(Ke=_e).trim?Ke.trim():Ke.replace(/^\s+|\s+$/g,"");_e.length%4!=0;)_e+="=";if("number"==fe)ae=et(_e);else if("string"==fe)ae=C.byteLength(_e,z);else{if("object"!=fe)throw new Error("First argument needs to be a number, array or string.");ae=et(_e.length)}if(C._useTypedArrays?H=C._augment(new Uint8Array(ae)):((H=this).length=ae,H._isBuffer=!0),C._useTypedArrays&&"number"==typeof _e.byteLength)H._set(_e);else if(Ye(Ke=_e)||C.isBuffer(Ke)||Ke&&"object"==typeof Ke&&"number"==typeof Ke.length)for(Fe=0;Fe<ae;Fe++)H[Fe]=C.isBuffer(_e)?_e.readUInt8(Fe):_e[Fe];else if("string"==fe)H.write(_e,0,z);else if("number"==fe&&!C._useTypedArrays&&!O)for(Fe=0;Fe<ae;Fe++)H[Fe]=0;return H}function re(_e,z,O,Fe){var H;if(Fe||(We("boolean"==typeof O,"missing or invalid endian"),We(null!=z,"missing offset"),We(z+1<_e.length,"Trying to read beyond buffer length")),!((Fe=_e.length)<=z))return O?(H=_e[z],z+1<Fe&&(H|=_e[z+1]<<8)):(H=_e[z]<<8,z+1<Fe&&(H|=_e[z+1])),H}function te(_e,z,O,Fe){var H;if(Fe||(We("boolean"==typeof O,"missing or invalid endian"),We(null!=z,"missing offset"),We(z+3<_e.length,"Trying to read beyond buffer length")),!((Fe=_e.length)<=z))return O?(z+2<Fe&&(H=_e[z+2]<<16),z+1<Fe&&(H|=_e[z+1]<<8),H|=_e[z],z+3<Fe&&(H+=_e[z+3]<<24>>>0)):(z+1<Fe&&(H=_e[z+1]<<16),z+2<Fe&&(H|=_e[z+2]<<8),z+3<Fe&&(H|=_e[z+3]),H+=_e[z]<<24>>>0),H}function q(_e,z,O,ae){if(ae||(We("boolean"==typeof O,"missing or invalid endian"),We(null!=z,"missing offset"),We(z+1<_e.length,"Trying to read beyond buffer length")),!(_e.length<=z))return 32768&(ae=re(_e,z,O,!0))?-1*(65535-ae+1):ae}function V(_e,z,O,ae){if(ae||(We("boolean"==typeof O,"missing or invalid endian"),We(null!=z,"missing offset"),We(z+3<_e.length,"Trying to read beyond buffer length")),!(_e.length<=z))return 2147483648&(ae=te(_e,z,O,!0))?-1*(4294967295-ae+1):ae}function x(_e,z,O,ae){return ae||(We("boolean"==typeof O,"missing or invalid endian"),We(z+3<_e.length,"Trying to read beyond buffer length")),oe.read(_e,z,O,23,4)}function B(_e,z,O,ae){return ae||(We("boolean"==typeof O,"missing or invalid endian"),We(z+7<_e.length,"Trying to read beyond buffer length")),oe.read(_e,z,O,52,8)}function D(_e,z,O,ae,H){if(H||(We(null!=z,"missing value"),We("boolean"==typeof ae,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+1<_e.length,"trying to write beyond buffer length"),Se(z,65535)),!((H=_e.length)<=O))for(var Fe=0,Ke=Math.min(H-O,2);Fe<Ke;Fe++)_e[O+Fe]=(z&255<<8*(ae?Fe:1-Fe))>>>8*(ae?Fe:1-Fe)}function he(_e,z,O,ae,H){if(H||(We(null!=z,"missing value"),We("boolean"==typeof ae,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+3<_e.length,"trying to write beyond buffer length"),Se(z,4294967295)),!((H=_e.length)<=O))for(var Fe=0,Ke=Math.min(H-O,4);Fe<Ke;Fe++)_e[O+Fe]=z>>>8*(ae?Fe:3-Fe)&255}function W(_e,z,O,ae,H){H||(We(null!=z,"missing value"),We("boolean"==typeof ae,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+1<_e.length,"Trying to write beyond buffer length"),qe(z,32767,-32768)),_e.length<=O||D(_e,0<=z?z:65535+z+1,O,ae,H)}function Te(_e,z,O,ae,H){H||(We(null!=z,"missing value"),We("boolean"==typeof ae,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+3<_e.length,"Trying to write beyond buffer length"),qe(z,2147483647,-2147483648)),_e.length<=O||he(_e,0<=z?z:4294967295+z+1,O,ae,H)}function de(_e,z,O,ae,H){H||(We(null!=z,"missing value"),We("boolean"==typeof ae,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+3<_e.length,"Trying to write beyond buffer length"),lt(z,34028234663852886e22,-34028234663852886e22)),_e.length<=O||oe.write(_e,z,O,ae,23,4)}function we(_e,z,O,ae,H){H||(We(null!=z,"missing value"),We("boolean"==typeof ae,"missing or invalid endian"),We(null!=O,"missing offset"),We(O+7<_e.length,"Trying to write beyond buffer length"),lt(z,17976931348623157e292,-17976931348623157e292)),_e.length<=O||oe.write(_e,z,O,ae,52,8)}E.Buffer=C,E.SlowBuffer=C,E.INSPECT_MAX_BYTES=50,C.poolSize=8192,C._useTypedArrays=function(){try{var _e=new ArrayBuffer(0),z=new Uint8Array(_e);return z.foo=function(){return 42},42===z.foo()&&"function"==typeof z.subarray}catch{return!1}}(),C.isEncoding=function(_e){switch(String(_e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.isBuffer=function(_e){return!(null==_e||!_e._isBuffer)},C.byteLength=function(_e,z){var O;switch(_e+="",z||"utf8"){case"hex":O=_e.length/2;break;case"utf8":case"utf-8":O=Ne(_e).length;break;case"ascii":case"binary":case"raw":O=_e.length;break;case"base64":O=ke(_e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":O=2*_e.length;break;default:throw new Error("Unknown encoding")}return O},C.concat=function(_e,z){if(We(Ye(_e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===_e.length)return new C(0);if(1===_e.length)return _e[0];if("number"!=typeof z)for(H=z=0;H<_e.length;H++)z+=_e[H].length;for(var O=new C(z),ae=0,H=0;H<_e.length;H++){var Fe=_e[H];Fe.copy(O,ae),ae+=Fe.length}return O},C.prototype.write=function(_e,z,O,ae){isFinite(z)?isFinite(O)||(ae=O,O=void 0):(ee=ae,ae=z,z=O,O=ee),z=Number(z)||0;var H,Fe,Ke,fe,ee=this.length-z;switch((!O||ee<(O=Number(O)))&&(O=ee),ae=String(ae||"utf8").toLowerCase()){case"hex":H=function(G,R,I,ue){I=Number(I)||0;var ge=G.length-I;(!ue||ge<(ue=Number(ue)))&&(ue=ge),We((ge=R.length)%2==0,"Invalid hex string"),ge/2<ue&&(ue=ge/2);for(var ze=0;ze<ue;ze++){var Je=parseInt(R.substr(2*ze,2),16);We(!isNaN(Je),"Invalid hex string"),G[I+ze]=Je}return C._charsWritten=2*ze,ze}(this,_e,z,O);break;case"utf8":case"utf-8":Fe=this,Ke=z,fe=O,H=C._charsWritten=He(Ne(_e),Fe,Ke,fe);break;case"ascii":case"binary":H=function Y(_e,z,O,ae){return C._charsWritten=He(function(H){for(var Fe=[],Ke=0;Ke<H.length;Ke++)Fe.push(255&H.charCodeAt(Ke));return Fe}(z),_e,O,ae)}(this,_e,z,O);break;case"base64":Fe=this,Ke=z,fe=O,H=C._charsWritten=He(ke(_e),Fe,Ke,fe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":H=function le(_e,z,O,ae){return C._charsWritten=He(function(H){for(var Fe,Ke,fe=[],ee=0;ee<H.length;ee++)Fe=(Ke=H.charCodeAt(ee))>>8,fe.push(Ke%=256),fe.push(Fe);return fe}(z),_e,O,ae)}(this,_e,z,O);break;default:throw new Error("Unknown encoding")}return H},C.prototype.toString=function(_e,z,O){var ae,H,Fe,Ke,fe=this;if(_e=String(_e||"utf8").toLowerCase(),z=Number(z)||0,(O=void 0!==O?Number(O):fe.length)===z)return"";switch(_e){case"hex":ae=function(ee,G,R){var I=ee.length;(!G||G<0)&&(G=0),(!R||R<0||I<R)&&(R=I);for(var ue="",ge=G;ge<R;ge++)ue+=Ce(ee[ge]);return ue}(fe,z,O);break;case"utf8":case"utf-8":ae=function(ee,G,R){var I="",ue="";R=Math.min(ee.length,R);for(var ge=G;ge<R;ge++)ee[ge]<=127?(I+=me(ue)+String.fromCharCode(ee[ge]),ue=""):ue+="%"+ee[ge].toString(16);return I+me(ue)}(fe,z,O);break;case"ascii":case"binary":ae=function K(_e,z,O){var ae="";O=Math.min(_e.length,O);for(var H=z;H<O;H++)ae+=String.fromCharCode(_e[H]);return ae}(fe,z,O);break;case"base64":H=fe,Ke=O,ae=0===(Fe=z)&&Ke===H.length?j.fromByteArray(H):j.fromByteArray(H.slice(Fe,Ke));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ae=function(ee,G,R){for(var I=ee.slice(G,R),ue="",ge=0;ge<I.length;ge+=2)ue+=String.fromCharCode(I[ge]+256*I[ge+1]);return ue}(fe,z,O);break;default:throw new Error("Unknown encoding")}return ae},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},C.prototype.copy=function(_e,z,O,ae){if(z=z||0,(ae=ae||0===ae?ae:this.length)!==(O=O||0)&&0!==_e.length&&0!==this.length){We(O<=ae,"sourceEnd < sourceStart"),We(0<=z&&z<_e.length,"targetStart out of bounds"),We(0<=O&&O<this.length,"sourceStart out of bounds"),We(0<=ae&&ae<=this.length,"sourceEnd out of bounds"),ae>this.length&&(ae=this.length);var H=(ae=_e.length-z<ae-O?_e.length-z+O:ae)-O;if(H<100||!C._useTypedArrays)for(var Fe=0;Fe<H;Fe++)_e[Fe+z]=this[Fe+O];else _e._set(this.subarray(O,O+H),z)}},C.prototype.slice=function(_e,z){var O=this.length;if(_e=De(_e,O,0),z=De(z,O,O),C._useTypedArrays)return C._augment(this.subarray(_e,z));for(var ae=z-_e,H=new C(ae,void 0,!0),Fe=0;Fe<ae;Fe++)H[Fe]=this[Fe+_e];return H},C.prototype.get=function(_e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(_e)},C.prototype.set=function(_e,z){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(_e,z)},C.prototype.readUInt8=function(_e,z){if(z||(We(null!=_e,"missing offset"),We(_e<this.length,"Trying to read beyond buffer length")),!(_e>=this.length))return this[_e]},C.prototype.readUInt16LE=function(_e,z){return re(this,_e,!0,z)},C.prototype.readUInt16BE=function(_e,z){return re(this,_e,!1,z)},C.prototype.readUInt32LE=function(_e,z){return te(this,_e,!0,z)},C.prototype.readUInt32BE=function(_e,z){return te(this,_e,!1,z)},C.prototype.readInt8=function(_e,z){if(z||(We(null!=_e,"missing offset"),We(_e<this.length,"Trying to read beyond buffer length")),!(_e>=this.length))return 128&this[_e]?-1*(255-this[_e]+1):this[_e]},C.prototype.readInt16LE=function(_e,z){return q(this,_e,!0,z)},C.prototype.readInt16BE=function(_e,z){return q(this,_e,!1,z)},C.prototype.readInt32LE=function(_e,z){return V(this,_e,!0,z)},C.prototype.readInt32BE=function(_e,z){return V(this,_e,!1,z)},C.prototype.readFloatLE=function(_e,z){return x(this,_e,!0,z)},C.prototype.readFloatBE=function(_e,z){return x(this,_e,!1,z)},C.prototype.readDoubleLE=function(_e,z){return B(this,_e,!0,z)},C.prototype.readDoubleBE=function(_e,z){return B(this,_e,!1,z)},C.prototype.writeUInt8=function(_e,z,O){O||(We(null!=_e,"missing value"),We(null!=z,"missing offset"),We(z<this.length,"trying to write beyond buffer length"),Se(_e,255)),z>=this.length||(this[z]=_e)},C.prototype.writeUInt16LE=function(_e,z,O){D(this,_e,z,!0,O)},C.prototype.writeUInt16BE=function(_e,z,O){D(this,_e,z,!1,O)},C.prototype.writeUInt32LE=function(_e,z,O){he(this,_e,z,!0,O)},C.prototype.writeUInt32BE=function(_e,z,O){he(this,_e,z,!1,O)},C.prototype.writeInt8=function(_e,z,O){O||(We(null!=_e,"missing value"),We(null!=z,"missing offset"),We(z<this.length,"Trying to write beyond buffer length"),qe(_e,127,-128)),z>=this.length||this.writeUInt8(0<=_e?_e:255+_e+1,z,O)},C.prototype.writeInt16LE=function(_e,z,O){W(this,_e,z,!0,O)},C.prototype.writeInt16BE=function(_e,z,O){W(this,_e,z,!1,O)},C.prototype.writeInt32LE=function(_e,z,O){Te(this,_e,z,!0,O)},C.prototype.writeInt32BE=function(_e,z,O){Te(this,_e,z,!1,O)},C.prototype.writeFloatLE=function(_e,z,O){de(this,_e,z,!0,O)},C.prototype.writeFloatBE=function(_e,z,O){de(this,_e,z,!1,O)},C.prototype.writeDoubleLE=function(_e,z,O){we(this,_e,z,!0,O)},C.prototype.writeDoubleBE=function(_e,z,O){we(this,_e,z,!1,O)},C.prototype.fill=function(_e,z,O){if(z=z||0,O=O||this.length,We("number"==typeof(_e="string"==typeof(_e=_e||0)?_e.charCodeAt(0):_e)&&!isNaN(_e),"value is not a number"),We(z<=O,"end < start"),O!==z&&0!==this.length){We(0<=z&&z<this.length,"start out of bounds"),We(0<=O&&O<=this.length,"end out of bounds");for(var ae=z;ae<O;ae++)this[ae]=_e}},C.prototype.inspect=function(){for(var _e=[],z=this.length,O=0;O<z;O++)if(_e[O]=Ce(this[O]),O===E.INSPECT_MAX_BYTES){_e[O+1]="...";break}return"<Buffer "+_e.join(" ")+">"},C.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(C._useTypedArrays)return new C(this).buffer;for(var _e=new Uint8Array(this.length),z=0,O=_e.length;z<O;z+=1)_e[z]=this[z];return _e.buffer};var Ie=C.prototype;function De(_e,z,O){return"number"!=typeof _e?O:z<=(_e=~~_e)?z:0<=_e||0<=(_e+=z)?_e:0}function et(_e){return(_e=~~Math.ceil(+_e))<0?0:_e}function Ye(_e){return(Array.isArray||function(z){return"[object Array]"===Object.prototype.toString.call(z)})(_e)}function Ce(_e){return _e<16?"0"+_e.toString(16):_e.toString(16)}function Ne(_e){for(var z=[],O=0;O<_e.length;O++){var ae=_e.charCodeAt(O);if(ae<=127)z.push(_e.charCodeAt(O));else for(var H=O,Fe=(55296<=ae&&ae<=57343&&O++,encodeURIComponent(_e.slice(H,O+1)).substr(1).split("%")),Ke=0;Ke<Fe.length;Ke++)z.push(parseInt(Fe[Ke],16))}return z}function ke(_e){return j.toByteArray(_e)}function He(_e,z,O,ae){for(var H=0;H<ae&&!(H+O>=z.length||H>=_e.length);H++)z[H+O]=_e[H];return H}function me(_e){try{return decodeURIComponent(_e)}catch{return String.fromCharCode(65533)}}function Se(_e,z){We("number"==typeof _e,"cannot write a non-number as a number"),We(0<=_e,"specified a negative value for writing an unsigned value"),We(_e<=z,"value is larger than maximum value for type"),We(Math.floor(_e)===_e,"value has a fractional component")}function qe(_e,z,O){We("number"==typeof _e,"cannot write a non-number as a number"),We(_e<=z,"value larger than maximum allowed value"),We(O<=_e,"value smaller than minimum allowed value"),We(Math.floor(_e)===_e,"value has a fractional component")}function lt(_e,z,O){We("number"==typeof _e,"cannot write a non-number as a number"),We(_e<=z,"value larger than maximum allowed value"),We(O<=_e,"value smaller than minimum allowed value")}function We(_e,z){if(!_e)throw new Error(z||"Failed assertion")}C._augment=function(_e){return _e._isBuffer=!0,_e._get=_e.get,_e._set=_e.set,_e.get=Ie.get,_e.set=Ie.set,_e.write=Ie.write,_e.toString=Ie.toString,_e.toLocaleString=Ie.toString,_e.toJSON=Ie.toJSON,_e.copy=Ie.copy,_e.slice=Ie.slice,_e.readUInt8=Ie.readUInt8,_e.readUInt16LE=Ie.readUInt16LE,_e.readUInt16BE=Ie.readUInt16BE,_e.readUInt32LE=Ie.readUInt32LE,_e.readUInt32BE=Ie.readUInt32BE,_e.readInt8=Ie.readInt8,_e.readInt16LE=Ie.readInt16LE,_e.readInt16BE=Ie.readInt16BE,_e.readInt32LE=Ie.readInt32LE,_e.readInt32BE=Ie.readInt32BE,_e.readFloatLE=Ie.readFloatLE,_e.readFloatBE=Ie.readFloatBE,_e.readDoubleLE=Ie.readDoubleLE,_e.readDoubleBE=Ie.readDoubleBE,_e.writeUInt8=Ie.writeUInt8,_e.writeUInt16LE=Ie.writeUInt16LE,_e.writeUInt16BE=Ie.writeUInt16BE,_e.writeUInt32LE=Ie.writeUInt32LE,_e.writeUInt32BE=Ie.writeUInt32BE,_e.writeInt8=Ie.writeInt8,_e.writeInt16LE=Ie.writeInt16LE,_e.writeInt16BE=Ie.writeInt16BE,_e.writeInt32LE=Ie.writeInt32LE,_e.writeInt32BE=Ie.writeInt32BE,_e.writeFloatLE=Ie.writeFloatLE,_e.writeFloatBE=Ie.writeFloatBE,_e.writeDoubleLE=Ie.writeDoubleLE,_e.writeDoubleBE=Ie.writeDoubleBE,_e.fill=Ie.fill,_e.inspect=Ie.inspect,_e.toArrayBuffer=Ie.toArrayBuffer,_e}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(Z,g,E){(function(b,k,j,P,_,y,M,F,L){j=Z("buffer").Buffer;var C=new j(4);C.fill(0),g.exports={hash:function(Y,le,K,re){for(var te=le(function(D,he){D.length%4!=0&&(D=j.concat([D,C],D.length+(4-D.length%4)));for(var Te=[],de=he?D.readInt32BE:D.readInt32LE,we=0;we<D.length;we+=4)Te.push(de.call(D,we));return Te}(Y=j.isBuffer(Y)?Y:new j(Y),re),8*Y.length),q=(le=re,new j(K)),V=le?q.writeInt32BE:q.writeInt32LE,x=0;x<te.length;x++)V.call(q,te[x],4*x,!0);return q}}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(Z,g,E){(function(b,k,j,P,_,y,M,F,L){j=Z("buffer").Buffer;var oe=Z("./sha"),C=Z("./sha256"),Y=Z("./rng"),le={sha1:oe,sha256:C,md5:Z("./md5")},K=64,re=new j(K);function te(D,he){var W=le[D=D||"sha1"],Te=[];return W||q("algorithm:",D,"is not yet supported"),{update:function(de){return j.isBuffer(de)||(de=new j(de)),Te.push(de),this},digest:function(de){var we=j.concat(Te);return we=he?function(Ie,De,et){j.isBuffer(De)||(De=new j(De)),j.isBuffer(et)||(et=new j(et)),De.length>K?De=Ie(De):De.length<K&&(De=j.concat([De,re],K));for(var Ye=new j(K),Ce=new j(K),Ne=0;Ne<K;Ne++)Ye[Ne]=54^De[Ne],Ce[Ne]=92^De[Ne];return et=Ie(j.concat([Ye,et])),Ie(j.concat([Ce,et]))}(W,he,we):W(we),Te=null,de?we.toString(de):we}}}function q(){var D=[].slice.call(arguments).join(" ");throw new Error([D,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}re.fill(0),E.createHash=function(D){return te(D)},E.createHmac=te,E.randomBytes=function(D,he){if(!he||!he.call)return new j(Y(D));try{he.call(this,void 0,new j(Y(D)))}catch(W){he(W)}};var V,x=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],B=function(D){E[D]=function(){q("sorry,",D,"is not implemented yet")}};for(V in x)B(x[V])}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(Z,g,E){(function(b,k,A,P,_,y,M,F,L){var j=Z("./helpers");function oe(q,V){q[V>>5]|=128<<V%32,q[14+(V+64>>>9<<4)]=V;for(var x=1732584193,B=-271733879,D=-1732584194,he=271733878,W=0;W<q.length;W+=16){var Te=x,de=B,we=D,Ie=he;x=Y(x,B,D,he,q[W+0],7,-680876936),he=Y(he,x,B,D,q[W+1],12,-389564586),D=Y(D,he,x,B,q[W+2],17,606105819),B=Y(B,D,he,x,q[W+3],22,-1044525330),x=Y(x,B,D,he,q[W+4],7,-176418897),he=Y(he,x,B,D,q[W+5],12,1200080426),D=Y(D,he,x,B,q[W+6],17,-1473231341),B=Y(B,D,he,x,q[W+7],22,-45705983),x=Y(x,B,D,he,q[W+8],7,1770035416),he=Y(he,x,B,D,q[W+9],12,-1958414417),D=Y(D,he,x,B,q[W+10],17,-42063),B=Y(B,D,he,x,q[W+11],22,-1990404162),x=Y(x,B,D,he,q[W+12],7,1804603682),he=Y(he,x,B,D,q[W+13],12,-40341101),D=Y(D,he,x,B,q[W+14],17,-1502002290),x=le(x,B=Y(B,D,he,x,q[W+15],22,1236535329),D,he,q[W+1],5,-165796510),he=le(he,x,B,D,q[W+6],9,-1069501632),D=le(D,he,x,B,q[W+11],14,643717713),B=le(B,D,he,x,q[W+0],20,-373897302),x=le(x,B,D,he,q[W+5],5,-701558691),he=le(he,x,B,D,q[W+10],9,38016083),D=le(D,he,x,B,q[W+15],14,-660478335),B=le(B,D,he,x,q[W+4],20,-405537848),x=le(x,B,D,he,q[W+9],5,568446438),he=le(he,x,B,D,q[W+14],9,-1019803690),D=le(D,he,x,B,q[W+3],14,-187363961),B=le(B,D,he,x,q[W+8],20,1163531501),x=le(x,B,D,he,q[W+13],5,-1444681467),he=le(he,x,B,D,q[W+2],9,-51403784),D=le(D,he,x,B,q[W+7],14,1735328473),x=K(x,B=le(B,D,he,x,q[W+12],20,-1926607734),D,he,q[W+5],4,-378558),he=K(he,x,B,D,q[W+8],11,-2022574463),D=K(D,he,x,B,q[W+11],16,1839030562),B=K(B,D,he,x,q[W+14],23,-35309556),x=K(x,B,D,he,q[W+1],4,-1530992060),he=K(he,x,B,D,q[W+4],11,1272893353),D=K(D,he,x,B,q[W+7],16,-155497632),B=K(B,D,he,x,q[W+10],23,-1094730640),x=K(x,B,D,he,q[W+13],4,681279174),he=K(he,x,B,D,q[W+0],11,-358537222),D=K(D,he,x,B,q[W+3],16,-722521979),B=K(B,D,he,x,q[W+6],23,76029189),x=K(x,B,D,he,q[W+9],4,-640364487),he=K(he,x,B,D,q[W+12],11,-421815835),D=K(D,he,x,B,q[W+15],16,530742520),x=re(x,B=K(B,D,he,x,q[W+2],23,-995338651),D,he,q[W+0],6,-198630844),he=re(he,x,B,D,q[W+7],10,1126891415),D=re(D,he,x,B,q[W+14],15,-1416354905),B=re(B,D,he,x,q[W+5],21,-57434055),x=re(x,B,D,he,q[W+12],6,1700485571),he=re(he,x,B,D,q[W+3],10,-1894986606),D=re(D,he,x,B,q[W+10],15,-1051523),B=re(B,D,he,x,q[W+1],21,-2054922799),x=re(x,B,D,he,q[W+8],6,1873313359),he=re(he,x,B,D,q[W+15],10,-30611744),D=re(D,he,x,B,q[W+6],15,-1560198380),B=re(B,D,he,x,q[W+13],21,1309151649),x=re(x,B,D,he,q[W+4],6,-145523070),he=re(he,x,B,D,q[W+11],10,-1120210379),D=re(D,he,x,B,q[W+2],15,718787259),B=re(B,D,he,x,q[W+9],21,-343485551),x=te(x,Te),B=te(B,de),D=te(D,we),he=te(he,Ie)}return Array(x,B,D,he)}function C(q,V,x,B,D,he){return te((V=te(te(V,q),te(B,he)))<<D|V>>>32-D,x)}function Y(q,V,x,B,D,he,W){return C(V&x|~V&B,q,V,D,he,W)}function le(q,V,x,B,D,he,W){return C(V&B|x&~B,q,V,D,he,W)}function K(q,V,x,B,D,he,W){return C(V^x^B,q,V,D,he,W)}function re(q,V,x,B,D,he,W){return C(x^(V|~B),q,V,D,he,W)}function te(q,V){var x=(65535&q)+(65535&V);return(q>>16)+(V>>16)+(x>>16)<<16|65535&x}g.exports=function(q){return j.hash(q,oe,16)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(Z,g,E){(function(b,k,A,P,_,y,M,F,L){g.exports=function(oe){for(var C,Y=new Array(oe),le=0;le<oe;le++)!(3&le)&&(C=4294967296*Math.random()),Y[le]=C>>>((3&le)<<3)&255;return Y}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(Z,g,E){(function(b,k,A,P,_,y,M,F,L){var j=Z("./helpers");function oe(le,K){le[K>>5]|=128<<24-K%32,le[15+(K+64>>9<<4)]=K;for(var re,te,q,V=Array(80),x=1732584193,B=-271733879,D=-1732584194,he=271733878,W=-1009589776,Te=0;Te<le.length;Te+=16){for(var de=x,we=B,Ie=D,De=he,et=W,Ye=0;Ye<80;Ye++){V[Ye]=Ye<16?le[Te+Ye]:Y(V[Ye-3]^V[Ye-8]^V[Ye-14]^V[Ye-16],1);var Ce=C(C(Y(x,5),(Ce=B,te=D,q=he,(re=Ye)<20?Ce&te|~Ce&q:!(re<40)&&re<60?Ce&te|Ce&q|te&q:Ce^te^q)),C(C(W,V[Ye]),(re=Ye)<20?1518500249:re<40?1859775393:re<60?-1894007588:-899497514));W=he,he=D,D=Y(B,30),B=x,x=Ce}x=C(x,de),B=C(B,we),D=C(D,Ie),he=C(he,De),W=C(W,et)}return Array(x,B,D,he,W)}function C(le,K){var re=(65535&le)+(65535&K);return(le>>16)+(K>>16)+(re>>16)<<16|65535&re}function Y(le,K){return le<<K|le>>>32-K}g.exports=function(le){return j.hash(le,oe,20,!0)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(Z,g,E){(function(b,k,A,P,_,y,M,F,L){function j(K,re){var te=(65535&K)+(65535&re);return(K>>16)+(re>>16)+(te>>16)<<16|65535&te}function oe(K,re){var te,q=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),V=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);K[re>>5]|=128<<24-re%32,K[15+(re+64>>9<<4)]=re;for(var B,D,he=0;he<K.length;he+=16){for(var W=V[0],Te=V[1],de=V[2],we=V[3],Ie=V[4],De=V[5],et=V[6],Ye=V[7],Ce=0;Ce<64;Ce++)x[Ce]=Ce<16?K[Ce+he]:j(j(j(Y(D=x[Ce-2],17)^Y(D,19)^le(D,10),x[Ce-7]),Y(D=x[Ce-15],7)^Y(D,18)^le(D,3)),x[Ce-16]),te=j(j(j(j(Ye,Y(D=Ie,6)^Y(D,11)^Y(D,25)),Ie&De^~Ie&et),q[Ce]),x[Ce]),B=j(Y(B=W,2)^Y(B,13)^Y(B,22),W&Te^W&de^Te&de),Ye=et,et=De,De=Ie,Ie=j(we,te),we=de,de=Te,Te=W,W=j(te,B);V[0]=j(W,V[0]),V[1]=j(Te,V[1]),V[2]=j(de,V[2]),V[3]=j(we,V[3]),V[4]=j(Ie,V[4]),V[5]=j(De,V[5]),V[6]=j(et,V[6]),V[7]=j(Ye,V[7])}return V}var C=Z("./helpers"),Y=function(K,re){return K>>>re|K<<32-re},le=function(K,re){return K>>>re};g.exports=function(K){return C.hash(K,oe,32,!0)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(Z,g,E){(function(b,k,A,P,_,y,M,F,L){E.read=function(j,oe,C,Y,he){var K,re,te=8*he-Y-1,q=(1<<te)-1,V=q>>1,x=-7,B=C?he-1:0,D=C?-1:1;for(he=j[oe+B],B+=D,K=he&(1<<-x)-1,he>>=-x,x+=te;0<x;K=256*K+j[oe+B],B+=D,x-=8);for(re=K&(1<<-x)-1,K>>=-x,x+=Y;0<x;re=256*re+j[oe+B],B+=D,x-=8);if(0===K)K=1-V;else{if(K===q)return re?NaN:1/0*(he?-1:1);re+=Math.pow(2,Y),K-=V}return(he?-1:1)*re*Math.pow(2,K-Y)},E.write=function(j,oe,C,Y,le,W){var re,te,q=8*W-le-1,V=(1<<q)-1,x=V>>1,B=23===le?Math.pow(2,-24)-Math.pow(2,-77):0,D=Y?0:W-1,he=Y?1:-1;for(W=oe<0||0===oe&&1/oe<0?1:0,oe=Math.abs(oe),isNaN(oe)||oe===1/0?(te=isNaN(oe)?1:0,re=V):(re=Math.floor(Math.log(oe)/Math.LN2),oe*(Y=Math.pow(2,-re))<1&&(re--,Y*=2),2<=(oe+=1<=re+x?B/Y:B*Math.pow(2,1-x))*Y&&(re++,Y/=2),V<=re+x?(te=0,re=V):1<=re+x?(te=(oe*Y-1)*Math.pow(2,le),re+=x):(te=oe*Math.pow(2,x-1)*Math.pow(2,le),re=0));8<=le;j[C+D]=255&te,D+=he,te/=256,le-=8);for(re=re<<le|te,q+=le;0<q;j[C+D]=255&re,D+=he,re/=256,q-=8);j[C+D-he]|=128*W}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(Z,g,E){(function(b,k,A,P,_,y,M,F,L){var j,oe,C;function Y(){}(b=g.exports={}).nextTick=(oe=typeof window<"u"&&window.setImmediate,C=typeof window<"u"&&window.postMessage&&window.addEventListener,oe?function(le){return window.setImmediate(le)}:C?(j=[],window.addEventListener("message",function(le){var K=le.source;K!==window&&null!==K||"process-tick"!==le.data||(le.stopPropagation(),0<j.length&&j.shift()())},!0),function(le){j.push(le),window.postMessage("process-tick","*")}):function(le){setTimeout(le,0)}),b.title="browser",b.browser=!0,b.env={},b.argv=[],b.on=Y,b.addListener=Y,b.once=Y,b.off=Y,b.removeListener=Y,b.removeAllListeners=Y,b.emit=Y,b.binding=function(le){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(le){throw new Error("process.chdir is not supported")}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:ne=>{var g,E,Z=ne.exports={};function b(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}function A(Y){if(g===setTimeout)return setTimeout(Y,0);if((g===b||!g)&&setTimeout)return g=setTimeout,setTimeout(Y,0);try{return g(Y,0)}catch{try{return g.call(null,Y,0)}catch{return g.call(this,Y,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:b}catch{g=b}try{E="function"==typeof clearTimeout?clearTimeout:k}catch{E=k}}();var M,_=[],y=!1,F=-1;function L(){!y||!M||(y=!1,M.length?_=M.concat(_):F=-1,_.length&&j())}function j(){if(!y){var Y=A(L);y=!0;for(var le=_.length;le;){for(M=_,_=[];++F<le;)M&&M[F].run();F=-1,le=_.length}M=null,y=!1,function P(Y){if(E===clearTimeout)return clearTimeout(Y);if((E===k||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(Y);try{return E(Y)}catch{try{return E.call(null,Y)}catch{return E.call(this,Y)}}}(Y)}}function oe(Y,le){this.fun=Y,this.array=le}function C(){}Z.nextTick=function(Y){var le=new Array(arguments.length-1);if(arguments.length>1)for(var K=1;K<arguments.length;K++)le[K-1]=arguments[K];_.push(new oe(Y,le)),1===_.length&&!y&&A(j)},oe.prototype.run=function(){this.fun.apply(null,this.array)},Z.title="browser",Z.browser=!0,Z.env={},Z.argv=[],Z.version="",Z.versions={},Z.on=C,Z.addListener=C,Z.once=C,Z.off=C,Z.removeListener=C,Z.removeAllListeners=C,Z.emit=C,Z.prependListener=C,Z.prependOnceListener=C,Z.listeners=function(Y){return[]},Z.binding=function(Y){throw new Error("process.binding is not supported")},Z.cwd=function(){return"/"},Z.chdir=function(Y){throw new Error("process.chdir is not supported")},Z.umask=function(){return 0}},3410:ne=>{let Z;ne.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):g=>(Z||(Z=Promise.resolve())).then(g).catch(E=>setTimeout(()=>{throw E},0))},1986:(ne,Z,g)=>{ne.exports=g(7842)},5327:ne=>{"use strict";ne.exports=class Mq{constructor(g,E=new Map,b=0){this.prefix=g,this._existing=E,this.counter=b}clone(){const{prefix:g,_existing:E,counter:b}=this;return new Mq(g,new Map(E),b)}getId(g){const E=g&&this._existing.get(g);if(E)return E;const b=this.prefix+this.counter;return this.counter++,g&&this._existing.set(g,b),b}hasId(g){return this._existing.has(g)}getOldIds(){return[...this._existing.keys()]}}},7475:(ne,Z,g)=>{"use strict";var E=g(7156).default;g(8280);const b=self.crypto||self.msCrypto;ne.exports=class{constructor(A){if(!b||!b.subtle)throw new Error("crypto.subtle not found.");if("sha256"===A)this.algorithm={name:"SHA-256"};else{if("sha1"!==A)throw new Error(`Unsupported algorithm "${A}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(A){this._content+=A}digest(){var A=this;return E(function*(){const P=(new TextEncoder).encode(A._content),_=new Uint8Array(yield b.subtle.digest(A.algorithm,P));let y="";for(let M=0;M<_.length;++M)y+=_[M].toString(16).padStart(2,"0");return y})()}}},8003:ne=>{"use strict";const E="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",b="http://www.w3.org/2001/XMLSchema#string",k="NamedNode",A="BlankNode",P="Literal",_="DefaultGraph",y={};function M(C,Y){return C.subject.termType===Y.subject.termType&&C.object.termType===Y.object.termType&&C.subject.value===Y.subject.value&&C.predicate.value===Y.predicate.value&&C.object.value===Y.object.value&&(C.object.termType!==P||C.object.datatype.termType===Y.object.datatype.termType&&C.object.language===Y.object.language&&C.object.datatype.value===Y.object.datatype.value)}(()=>{const C="(?:<([^:]+:[^>]*)>)",le="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",K=le+"0-9-\xb7\u0300-\u036f\u203f-\u2040",te="(_:(?:["+le+"0-9])(?:(?:["+K+".])*(?:["+K+"]))?)",D="[ \\t]+",he="[ \\t]*",W="(?:"+C+"|"+te+")"+D,Te=C+D,de="(?:"+C+"|"+te+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+C+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+he,we="(?:\\.|(?:(?:"+C+"|"+te+")"+he+"\\.))";y.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,y.empty=new RegExp("^[ \\t]*$"),y.quad=new RegExp("^"+he+W+Te+de+we+he+"$")})(),ne.exports=class gC{static parse(Y){const le=[],K={},re=Y.split(y.eoln);let te=0;for(const q of re){if(te++,y.empty.test(q))continue;const V=q.match(y.quad);if(null===V)throw new Error("N-Quads parse error on line "+te+".");const x={subject:null,predicate:null,object:null,graph:null};if(x.subject=void 0!==V[1]?{termType:k,value:V[1]}:{termType:A,value:V[2]},x.predicate={termType:k,value:V[3]},void 0!==V[4]?x.object={termType:k,value:V[4]}:void 0!==V[5]?x.object={termType:A,value:V[5]}:(x.object={termType:P,value:void 0,datatype:{termType:k}},void 0!==V[7]?x.object.datatype.value=V[7]:void 0!==V[8]?(x.object.datatype.value=E,x.object.language=V[8]):x.object.datatype.value=b,x.object.value=V[6].replace(j,function(Y,le,K,re){if(le)switch(le){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(K)return String.fromCharCode(parseInt(K,16));if(re)throw new Error("Unsupported U escape")})),x.graph=void 0!==V[9]?{termType:k,value:V[9]}:void 0!==V[10]?{termType:A,value:V[10]}:{termType:_,value:""},x.graph.value in K){let B=!0;const D=K[x.graph.value];for(const he of D)if(M(he,x)){B=!1;break}B&&(D.push(x),le.push(x))}else K[x.graph.value]=[x],le.push(x)}return le}static serialize(Y){Array.isArray(Y)||(Y=gC.legacyDatasetToQuads(Y));const le=[];for(const K of Y)le.push(gC.serializeQuad(K));return le.sort().join("")}static serializeQuadComponents(Y,le,K,re){let te="";return te+=Y.termType===k?`<${Y.value}>`:`${Y.value}`,te+=` <${le.value}> `,K.termType===k?te+=`<${K.value}>`:K.termType===A?te+=K.value:(te+=`"${function L(C){return C.replace(F,function(Y){switch(Y){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(K.value)}"`,K.datatype.value===E?K.language&&(te+=`@${K.language}`):K.datatype.value!==b&&(te+=`^^<${K.datatype.value}>`)),re.termType===k?te+=` <${re.value}>`:re.termType===A&&(te+=` ${re.value}`),te+=" .\n",te}static serializeQuad(Y){return gC.serializeQuadComponents(Y.subject,Y.predicate,Y.object,Y.graph)}static legacyDatasetToQuads(Y){const le=[],K={"blank node":A,IRI:k,literal:P};for(const re in Y)Y[re].forEach(q=>{const V={};for(const x in q){const B=q[x],D={termType:K[B.type],value:B.value};D.termType===P&&(D.datatype={termType:k},"datatype"in B&&(D.datatype.value=B.datatype),"language"in B?("datatype"in B||(D.datatype.value=E),D.language=B.language):"datatype"in B||(D.datatype.value=b)),V[x]=D}V.graph="@default"===re?{termType:_,value:""}:{termType:re.startsWith("_:")?A:k,value:re},le.push(V)});return le}};const F=/["\\\n\r]/g,j=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:ne=>{"use strict";ne.exports=class{constructor(g){this.current=g.sort(),this.done=!1,this.dir=new Map;for(let E=0;E<g.length;++E)this.dir.set(g[E],!0)}hasNext(){return!this.done}next(){const{current:g,dir:E}=this,b=g.slice();let k=null,A=0;const P=g.length;for(let _=0;_<P;++_){const y=g[_],M=E.get(y);(null===k||y>k)&&(M&&_>0&&y>g[_-1]||!M&&_<P-1&&y>g[_+1])&&(k=y,A=_)}if(null===k)this.done=!0;else{const _=E.get(k)?A-1:A+1;g[A]=g[_],g[_]=k;for(const y of g)y>k&&E.set(y,!E.get(y))}return b}}},7218:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(5327),k=g(7475),A=g(7790),P=g(8003);function _(y,M){return y.hash<M.hash?-1:y.hash>M.hash?1:0}ne.exports=class{constructor({createMessageDigest:M=(()=>new k("sha256")),canonicalIdMap:F=new Map,maxDeepIterations:L=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new b("_:c14n",F),this.createMessageDigest=M,this.maxDeepIterations=L,this.quads=null,this.deepIterations=null}main(M){var F=this;return E(function*(){F.deepIterations=new Map,F.quads=M;for(const K of M)F._addBlankNodeQuadInfo({quad:K,component:K.subject}),F._addBlankNodeQuadInfo({quad:K,component:K.object}),F._addBlankNodeQuadInfo({quad:K,component:K.graph});const L=new Map,j=[...F.blankNodeInfo.keys()];let oe=0;for(const K of j)++oe%100==0&&(yield F._yield()),yield F._hashAndTrackBlankNode({id:K,hashToBlankNodes:L});const C=[...L.keys()].sort(),Y=[];for(const K of C){const re=L.get(K);re.length>1?Y.push(re):F.canonicalIssuer.getId(re[0])}for(const K of Y){const re=[];for(const te of K){if(F.canonicalIssuer.hasId(te))continue;const q=new b("_:b");q.getId(te);const V=yield F.hashNDegreeQuads(te,q);re.push(V)}re.sort(_);for(const te of re){const q=te.issuer.getOldIds();for(const V of q)F.canonicalIssuer.getId(V)}}const le=[];for(const K of F.quads){const re=P.serializeQuadComponents(F._componentWithCanonicalId(K.subject),K.predicate,F._componentWithCanonicalId(K.object),F._componentWithCanonicalId(K.graph));le.push(re)}return le.sort(),le.join("")})()}hashFirstDegreeQuads(M){var F=this;return E(function*(){const L=[],j=F.blankNodeInfo.get(M),oe=j.quads;for(const Y of oe){const le={subject:null,predicate:Y.predicate,object:null,graph:null};le.subject=F.modifyFirstDegreeComponent(M,Y.subject,"subject"),le.object=F.modifyFirstDegreeComponent(M,Y.object,"object"),le.graph=F.modifyFirstDegreeComponent(M,Y.graph,"graph"),L.push(P.serializeQuad(le))}L.sort();const C=F.createMessageDigest();for(const Y of L)C.update(Y);return j.hash=yield C.digest(),j.hash})()}hashRelatedBlankNode(M,F,L,j){var oe=this;return E(function*(){let C;C=oe.canonicalIssuer.hasId(M)?oe.canonicalIssuer.getId(M):L.hasId(M)?L.getId(M):oe.blankNodeInfo.get(M).hash;const Y=oe.createMessageDigest();return Y.update(j),"g"!==j&&Y.update(oe.getRelatedPredicate(F)),Y.update(C),Y.digest()})()}hashNDegreeQuads(M,F){var L=this;return E(function*(){const j=L.deepIterations.get(M)||0;if(j>L.maxDeepIterations)throw new Error(`Maximum deep iterations (${L.maxDeepIterations}) exceeded.`);L.deepIterations.set(M,j+1);const oe=L.createMessageDigest(),C=yield L.createHashToRelated(M,F),Y=[...C.keys()].sort();for(const le of Y){oe.update(le);let re,K="";const te=new A(C.get(le));let q=0;for(;te.hasNext();){const V=te.next();++q%3==0&&(yield L._yield());let x=F.clone(),B="";const D=[];let he=!1;for(const W of V)if(L.canonicalIssuer.hasId(W)?B+=L.canonicalIssuer.getId(W):(x.hasId(W)||D.push(W),B+=x.getId(W)),0!==K.length&&B>K){he=!0;break}if(!he){for(const W of D){const Te=yield L.hashNDegreeQuads(W,x);if(B+=x.getId(W),B+=`<${Te.hash}>`,x=Te.issuer,0!==K.length&&B>K){he=!0;break}}he||(0===K.length||B<K)&&(K=B,re=x)}}oe.update(K),F=re}return{hash:yield oe.digest(),issuer:F}})()}modifyFirstDegreeComponent(M,F){return"BlankNode"!==F.termType?F:{termType:"BlankNode",value:F.value===M?"_:a":"_:z"}}getRelatedPredicate(M){return`<${M.predicate.value}>`}createHashToRelated(M,F){var L=this;return E(function*(){const j=new Map,oe=L.blankNodeInfo.get(M).quads;let C=0;for(const Y of oe)++C%100==0&&(yield L._yield()),yield Promise.all([L._addRelatedBlankNodeHash({quad:Y,component:Y.subject,position:"s",id:M,issuer:F,hashToRelated:j}),L._addRelatedBlankNodeHash({quad:Y,component:Y.object,position:"o",id:M,issuer:F,hashToRelated:j}),L._addRelatedBlankNodeHash({quad:Y,component:Y.graph,position:"g",id:M,issuer:F,hashToRelated:j})]);return j})()}_hashAndTrackBlankNode({id:M,hashToBlankNodes:F}){var L=this;return E(function*(){const j=yield L.hashFirstDegreeQuads(M),oe=F.get(j);oe?oe.push(M):F.set(j,[M])})()}_addBlankNodeQuadInfo({quad:M,component:F}){if("BlankNode"!==F.termType)return;const L=F.value,j=this.blankNodeInfo.get(L);j?j.quads.add(M):this.blankNodeInfo.set(L,{quads:new Set([M]),hash:null})}_addRelatedBlankNodeHash({quad:M,component:F,position:L,id:j,issuer:oe,hashToRelated:C}){var Y=this;return E(function*(){if("BlankNode"!==F.termType||F.value===j)return;const le=F.value,K=yield Y.hashRelatedBlankNode(le,M,oe,L),re=C.get(K);re?re.push(le):C.set(K,[le])})()}_componentWithCanonicalId(M){return"BlankNode"!==M.termType||M.value.startsWith(this.canonicalIssuer.prefix)?M:{termType:"BlankNode",value:this.canonicalIssuer.getId(M.value)}}_yield(){return E(function*(){return new Promise(M=>setImmediate(M))})()}}},9123:(ne,Z,g)=>{"use strict";const E=g(5327),b=g(7475),k=g(7790),A=g(8003);function P(_,y){return _.hash<y.hash?-1:_.hash>y.hash?1:0}ne.exports=class{constructor({createMessageDigest:y=(()=>new b("sha256")),canonicalIdMap:M=new Map,maxDeepIterations:F=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new E("_:c14n",M),this.createMessageDigest=y,this.maxDeepIterations=F,this.quads=null,this.deepIterations=null}main(y){this.deepIterations=new Map,this.quads=y;for(const C of y)this._addBlankNodeQuadInfo({quad:C,component:C.subject}),this._addBlankNodeQuadInfo({quad:C,component:C.object}),this._addBlankNodeQuadInfo({quad:C,component:C.graph});const M=new Map,F=[...this.blankNodeInfo.keys()];for(const C of F)this._hashAndTrackBlankNode({id:C,hashToBlankNodes:M});const L=[...M.keys()].sort(),j=[];for(const C of L){const Y=M.get(C);Y.length>1?j.push(Y):this.canonicalIssuer.getId(Y[0])}for(const C of j){const Y=[];for(const le of C){if(this.canonicalIssuer.hasId(le))continue;const K=new E("_:b");K.getId(le);const re=this.hashNDegreeQuads(le,K);Y.push(re)}Y.sort(P);for(const le of Y){const K=le.issuer.getOldIds();for(const re of K)this.canonicalIssuer.getId(re)}}const oe=[];for(const C of this.quads){const Y=A.serializeQuadComponents(this._componentWithCanonicalId({component:C.subject}),C.predicate,this._componentWithCanonicalId({component:C.object}),this._componentWithCanonicalId({component:C.graph}));oe.push(Y)}return oe.sort(),oe.join("")}hashFirstDegreeQuads(y){const M=[],F=this.blankNodeInfo.get(y),L=F.quads;for(const oe of L){const C={subject:null,predicate:oe.predicate,object:null,graph:null};C.subject=this.modifyFirstDegreeComponent(y,oe.subject,"subject"),C.object=this.modifyFirstDegreeComponent(y,oe.object,"object"),C.graph=this.modifyFirstDegreeComponent(y,oe.graph,"graph"),M.push(A.serializeQuad(C))}M.sort();const j=this.createMessageDigest();for(const oe of M)j.update(oe);return F.hash=j.digest(),F.hash}hashRelatedBlankNode(y,M,F,L){let j;j=this.canonicalIssuer.hasId(y)?this.canonicalIssuer.getId(y):F.hasId(y)?F.getId(y):this.blankNodeInfo.get(y).hash;const oe=this.createMessageDigest();return oe.update(L),"g"!==L&&oe.update(this.getRelatedPredicate(M)),oe.update(j),oe.digest()}hashNDegreeQuads(y,M){const F=this.deepIterations.get(y)||0;if(F>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(y,F+1);const L=this.createMessageDigest(),j=this.createHashToRelated(y,M),oe=[...j.keys()].sort();for(const C of oe){L.update(C);let le,Y="";const K=new k(j.get(C));for(;K.hasNext();){const re=K.next();let te=M.clone(),q="";const V=[];let x=!1;for(const B of re)if(this.canonicalIssuer.hasId(B)?q+=this.canonicalIssuer.getId(B):(te.hasId(B)||V.push(B),q+=te.getId(B)),0!==Y.length&&q>Y){x=!0;break}if(!x){for(const B of V){const D=this.hashNDegreeQuads(B,te);if(q+=te.getId(B),q+=`<${D.hash}>`,te=D.issuer,0!==Y.length&&q>Y){x=!0;break}}x||(0===Y.length||q<Y)&&(Y=q,le=te)}}L.update(Y),M=le}return{hash:L.digest(),issuer:M}}modifyFirstDegreeComponent(y,M){return"BlankNode"!==M.termType?M:{termType:"BlankNode",value:M.value===y?"_:a":"_:z"}}getRelatedPredicate(y){return`<${y.predicate.value}>`}createHashToRelated(y,M){const F=new Map,L=this.blankNodeInfo.get(y).quads;for(const j of L)this._addRelatedBlankNodeHash({quad:j,component:j.subject,position:"s",id:y,issuer:M,hashToRelated:F}),this._addRelatedBlankNodeHash({quad:j,component:j.object,position:"o",id:y,issuer:M,hashToRelated:F}),this._addRelatedBlankNodeHash({quad:j,component:j.graph,position:"g",id:y,issuer:M,hashToRelated:F});return F}_hashAndTrackBlankNode({id:y,hashToBlankNodes:M}){const F=this.hashFirstDegreeQuads(y),L=M.get(F);L?L.push(y):M.set(F,[y])}_addBlankNodeQuadInfo({quad:y,component:M}){if("BlankNode"!==M.termType)return;const F=M.value,L=this.blankNodeInfo.get(F);L?L.quads.add(y):this.blankNodeInfo.set(F,{quads:new Set([y]),hash:null})}_addRelatedBlankNodeHash({quad:y,component:M,position:F,id:L,issuer:j,hashToRelated:oe}){if("BlankNode"!==M.termType||M.value===L)return;const C=M.value,Y=this.hashRelatedBlankNode(C,y,j,F),le=oe.get(Y);le?le.push(C):oe.set(Y,[C])}_componentWithCanonicalId({component:y}){return"BlankNode"!==y.termType||y.value.startsWith(this.canonicalIssuer.prefix)?y:{termType:"BlankNode",value:this.canonicalIssuer.getId(y.value)}}}},1326:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(7475),k=g(7218);ne.exports=class extends k{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new b("sha1")}modifyFirstDegreeComponent(P,_,y){return"BlankNode"!==_.termType?_:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===P?"_:a":"_:z"}}getRelatedPredicate(P){return P.predicate.value}createHashToRelated(P,_){var y=this;return E(function*(){const M=new Map,F=y.blankNodeInfo.get(P).quads;let L=0;for(const j of F){let oe,C;if("BlankNode"===j.subject.termType&&j.subject.value!==P)C=j.subject.value,oe="p";else{if("BlankNode"!==j.object.termType||j.object.value===P)continue;C=j.object.value,oe="r"}++L%100==0&&(yield y._yield());const Y=yield y.hashRelatedBlankNode(C,j,_,oe),le=M.get(Y);le?le.push(C):M.set(Y,[C])}return M})()}}},9869:(ne,Z,g)=>{"use strict";const E=g(7475),b=g(9123);ne.exports=class extends b{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new E("sha1")}modifyFirstDegreeComponent(A,P,_){return"BlankNode"!==P.termType?P:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:P.value===A?"_:a":"_:z"}}getRelatedPredicate(A){return A.predicate.value}createHashToRelated(A,P){const _=new Map,y=this.blankNodeInfo.get(A).quads;for(const M of y){let F,L;if("BlankNode"===M.subject.termType&&M.subject.value!==A)L=M.subject.value,F="p";else{if("BlankNode"!==M.object.termType||M.object.value===A)continue;L=M.object.value,F="r"}const j=this.hashRelatedBlankNode(L,M,P,F),oe=_.get(j);oe?oe.push(L):_.set(j,[L])}return _}}},7842:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(7218),k=g(1326),A=g(9123),P=g(9869);let _;try{_=g(7670)}catch{}function y(M){return Array.isArray(M)?M:Z.NQuads.legacyDatasetToQuads(M)}Z.NQuads=g(8003),Z.IdentifierIssuer=g(5327),Z._rdfCanonizeNative=function(M){return M&&(_=M),_},Z.canonize=function(){var M=E(function*(F,L){const j=y(F);if(L.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(L.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((oe,C)=>_.canonize(j,L,(Y,le)=>Y?C(Y):oe(le)))}if("URDNA2015"===L.algorithm)return new b(L).main(j);if("URGNA2012"===L.algorithm){if(L.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new k(L).main(j)}throw"algorithm"in L?new Error("Invalid RDF Dataset Canonicalization algorithm: "+L.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(F,L){return M.apply(this,arguments)}}(),Z._canonizeSync=function(M,F){const L=y(M);if(F.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(F.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(L,F)}if("URDNA2015"===F.algorithm)return new A(F).main(L);if("URGNA2012"===F.algorithm){if(F.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new P(F).main(L)}throw"algorithm"in F?new Error("Invalid RDF Dataset Canonicalization algorithm: "+F.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,A,P,_){void 0===_&&(_=P),Object.defineProperty(k,_,{enumerable:!0,get:function(){return A[P]}})}:function(k,A,P,_){void 0===_&&(_=P),k[_]=A[P]}),b=this&&this.__exportStar||function(k,A){for(var P in k)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,k,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(4740),Z),b(g(3613),Z),b(g(9379),Z),b(g(5565),Z),b(g(3283),Z),b(g(3905),Z),b(g(2234),Z)},4740:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.BlankNode=void 0,Z.BlankNode=class g{constructor(b){this.termType="BlankNode",this.value=b}equals(b){return!!b&&"BlankNode"===b.termType&&b.value===this.value}}},3613:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.DataFactory=void 0;const E=g(4740),b=g(9379),k=g(5565),A=g(3283),P=g(3905),_=g(2234);let y=0;Z.DataFactory=class M{constructor(L){this.blankNodeCounter=0,this.blankNodePrefix=(L=L||{}).blankNodePrefix||`df_${y++}_`}namedNode(L){return new A.NamedNode(L)}blankNode(L){return new E.BlankNode(L||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(L,j){return new k.Literal(L,j)}variable(L){return new _.Variable(L)}defaultGraph(){return b.DefaultGraph.INSTANCE}quad(L,j,oe,C){return new P.Quad(L,j,oe,C||this.defaultGraph())}fromTerm(L){switch(L.termType){case"NamedNode":return this.namedNode(L.value);case"BlankNode":return this.blankNode(L.value);case"Literal":return L.language?this.literal(L.value,L.language):L.datatype.equals(k.Literal.XSD_STRING)?this.literal(L.value):this.literal(L.value,this.fromTerm(L.datatype));case"Variable":return this.variable(L.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(L.subject),this.fromTerm(L.predicate),this.fromTerm(L.object),this.fromTerm(L.graph))}}fromQuad(L){return this.fromTerm(L)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.DefaultGraph=void 0;class g{constructor(){this.termType="DefaultGraph",this.value=""}equals(b){return!!b&&"DefaultGraph"===b.termType}}Z.DefaultGraph=g,g.INSTANCE=new g},5565:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Literal=void 0;const E=g(3283);class b{constructor(A,P){this.termType="Literal",this.value=A,"string"==typeof P?(this.language=P,this.datatype=b.RDF_LANGUAGE_STRING):P?(this.language="",this.datatype=P):(this.language="",this.datatype=b.XSD_STRING)}equals(A){return!!A&&"Literal"===A.termType&&A.value===this.value&&A.language===this.language&&this.datatype.equals(A.datatype)}}Z.Literal=b,b.RDF_LANGUAGE_STRING=new E.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),b.XSD_STRING=new E.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.NamedNode=void 0,Z.NamedNode=class g{constructor(b){this.termType="NamedNode",this.value=b}equals(b){return!!b&&"NamedNode"===b.termType&&b.value===this.value}}},3905:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Quad=void 0,Z.Quad=class g{constructor(b,k,A,P){this.termType="Quad",this.value="",this.subject=b,this.predicate=k,this.object=A,this.graph=P}equals(b){return!!b&&("Quad"===b.termType||!b.termType)&&this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)&&this.graph.equals(b.graph)}}},2234:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Variable=void 0,Z.Variable=class g{constructor(b){this.termType="Variable",this.value=b}equals(b){return!!b&&"Variable"===b.termType&&b.value===this.value}}},9689:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(C,Y,le,K){void 0===K&&(K=le),Object.defineProperty(C,K,{enumerable:!0,get:function(){return Y[le]}})}:function(C,Y,le,K){void 0===K&&(K=le),C[K]=Y[le]}),b=this&&this.__exportStar||function(C,Y){for(var le in C)"default"!==le&&!Object.prototype.hasOwnProperty.call(Y,le)&&E(Y,C,le)};Object.defineProperty(Z,"__esModule",{value:!0}),Z.getSupportedJavaScriptPrimitives=Z.getSupportedRdfDatatypes=Z.getTermRaw=Z.toRdf=Z.fromRdf=void 0;const k=g(2633),A=g(2538),P=g(6374);b(g(2538),Z),b(g(1815),Z),b(g(6374),Z);const _=new k.DataFactory,y=new P.Translator;function M(C,Y){return y.fromRdf(C,Y)}y.registerHandler(new A.TypeHandlerString,A.TypeHandlerString.TYPES.map(C=>_.namedNode(C)),["string"]),y.registerHandler(new A.TypeHandlerBoolean,[A.TypeHandlerBoolean.TYPE].map(C=>_.namedNode(C)),["boolean"]),y.registerHandler(new A.TypeHandlerNumberDouble,A.TypeHandlerNumberDouble.TYPES.map(C=>_.namedNode(C)),["number"]),y.registerHandler(new A.TypeHandlerNumberInteger,A.TypeHandlerNumberInteger.TYPES.map(C=>_.namedNode(C)),["number"]),y.registerHandler(new A.TypeHandlerDate,A.TypeHandlerDate.TYPES.map(C=>_.namedNode(C)),["object"]),Z.fromRdf=M,Z.toRdf=function F(C,Y){return Y&&"namedNode"in Y&&(Y={dataFactory:Y}),(Y=Y||{})&&!Y.dataFactory&&(Y.dataFactory=_),y.toRdf(C,Y)},Z.getTermRaw=function L(C,Y){return"Literal"===C.termType?M(C,Y):C.value},Z.getSupportedRdfDatatypes=function j(){return y.getSupportedRdfDatatypes()},Z.getSupportedJavaScriptPrimitives=function oe(){return y.getSupportedJavaScriptPrimitives()}},1815:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0})},6374:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Translator=void 0,Z.Translator=class g{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(b){throw new Error(`Invalid RDF ${b.datatype.value} value: '${b.value}'`)}registerHandler(b,k,A){for(const P of k)this.supportedRdfDatatypes.push(P),this.fromRdfHandlers[P.value]=b;for(const P of A){let _=this.toRdfHandlers[P];_||(this.toRdfHandlers[P]=_=[]),_.push(b)}}fromRdf(b,k){const A=this.fromRdfHandlers[b.datatype.value];return A?A.fromRdf(b,k):b.value}toRdf(b,k){const A=this.toRdfHandlers[typeof b];if(A)for(const P of A){const _=P.toRdf(b,k);if(_)return _}throw new Error(`Invalid JavaScript value: '${b}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerBoolean=void 0;const E=g(6374);class b{fromRdf(A,P){switch(A.value){case"true":case"1":return!0;case"false":case"0":return!1}return P&&E.Translator.incorrectRdfDataType(A),!1}toRdf(A,{datatype:P,dataFactory:_}){return _.literal(A?"true":"false",P||_.namedNode(b.TYPE))}}Z.TypeHandlerBoolean=b,b.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerDate=void 0;const E=g(6374);class b{fromRdf(A,P){switch(P&&!A.value.match(b.VALIDATORS[A.datatype.value.substr(33,A.datatype.value.length)])&&E.Translator.incorrectRdfDataType(A),A.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(A.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const _=A.value.split("-");return new Date(0,parseInt(_[0],10)-1,parseInt(_[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(A.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(A.value+"-01");default:return new Date(A.value)}}toRdf(A,{datatype:P,dataFactory:_}){if(P=P||_.namedNode(b.TYPES[0]),!(A instanceof Date))return null;const y=A;let M;switch(P.value){case"http://www.w3.org/2001/XMLSchema#gDay":M=String(y.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":M=y.getUTCMonth()+1+"-"+y.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":M=String(y.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":M=y.getUTCFullYear()+"-"+(y.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":M=y.toISOString().replace(/T.*$/,"");break;default:M=y.toISOString()}return _.literal(M,P)}}Z.TypeHandlerDate=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],b.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerNumberDouble=void 0;const E=g(6374);class b{fromRdf(A,P){const _=parseFloat(A.value);return P&&isNaN(_)&&E.Translator.incorrectRdfDataType(A),_}toRdf(A,{datatype:P,dataFactory:_}){return P=P||_.namedNode(b.TYPES[0]),isNaN(A)?_.literal("NaN",P):isFinite(A)?A%1==0?null:_.literal(A.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),P):_.literal(A>0?"INF":"-INF",P)}}Z.TypeHandlerNumberDouble=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerNumberInteger=void 0;const E=g(6374);class b{fromRdf(A,P){const _=parseInt(A.value,10);return P&&(isNaN(_)||A.value.indexOf(".")>=0)&&E.Translator.incorrectRdfDataType(A),_}toRdf(A,{datatype:P,dataFactory:_}){return _.literal(String(A),P||_.namedNode(A<=b.MAX_INT&&A>=b.MIN_INT?b.TYPES[0]:b.TYPES[1]))}}Z.TypeHandlerNumberInteger=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],b.MAX_INT=2147483647,b.MIN_INT=-2147483648},2210:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerString=void 0;class g{fromRdf(b){return b.value}toRdf(b,{datatype:k,dataFactory:A}){return A.literal(b,k)}}Z.TypeHandlerString=g,g.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,A,P,_){void 0===_&&(_=P),Object.defineProperty(k,_,{enumerable:!0,get:function(){return A[P]}})}:function(k,A,P,_){void 0===_&&(_=P),k[_]=A[P]}),b=this&&this.__exportStar||function(k,A){for(var P in k)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,k,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(88),Z),b(g(1600),Z),b(g(1511),Z),b(g(9199),Z),b(g(2210),Z)},2821:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,A,P,_){void 0===_&&(_=P),Object.defineProperty(k,_,{enumerable:!0,get:function(){return A[P]}})}:function(k,A,P,_){void 0===_&&(_=P),k[_]=A[P]}),b=this&&this.__exportStar||function(k,A){for(var P in k)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,k,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(5664),Z)},758:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.ParseError=void 0;class g extends Error{constructor(b,k){const A=b.saxStream._parser;super(b.trackPosition?`Line ${A.line+1} column ${A.column+1}: ${k}`:k)}}Z.ParseError=g},5664:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.ParseType=Z.RdfXmlParser=void 0;const E=g(7054),b=g(9528),k=g(1793),A=g(758),P=g(2633);class _ extends k.Transform{constructor(F){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},F&&(Object.assign(this,F),this.options=F),this.dataFactory||(this.dataFactory=new P.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=b.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(F,L){const j={};let oe=!1;for(const Y in F.attributes)Y.startsWith("xmlns")&&(5===Y.length?(oe=!0,j[""]=F.attributes[Y]):":"===Y.charAt(5)&&(oe=!0,j[Y.substr(6)]=F.attributes[Y]));const C=L&&L.ns?L.ns:[_.DEFAULT_NS];return oe?C.concat([j]):C}static expandPrefixedTerm(F,L,j){const oe=F.indexOf(":");let C,Y;oe>=0?(C=F.substr(0,oe),Y=F.substr(oe+1)):(C="",Y=F);let le=null,K=null;for(let re=L.length-1;re>=0;re--){const te=L[re][C];if(te){le=te;break}K||(K=L[re][""])}if(!le){if(C&&"xmlns"!==C)throw new A.ParseError(j,`The prefix '${C}' in term '${F}' was not bound.`);le=K||""}return{prefix:C,local:Y,uri:le}}static isValidIri(F){return _.IRI_REGEX.test(F)}import(F){const L=new k.PassThrough({readableObjectMode:!0});F.on("error",oe=>j.emit("error",oe)),F.on("data",oe=>L.push(oe)),F.on("end",()=>L.push(null));const j=L.pipe(new _(this.options));return j}_transform(F,L,j){try{this.saxStream.write(F,L)}catch(oe){return j(oe)}j()}newParseError(F){return new A.ParseError(this,F)}valueToUri(F,L){return this.uriToNamedNode(E.resolve(F,L.baseIRI))}uriToNamedNode(F){if(!_.isValidIri(F))throw this.newParseError(`Invalid URI: ${F}`);return this.dataFactory.namedNode(F)}validateNcname(F){if(!_.NCNAME_MATCHER.test(F))throw this.newParseError(`Not a valid NCName: ${F}`)}attachSaxListeners(){this.saxStream.on("error",F=>this.emit("error",F)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(F){const L=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let j=y.RESOURCE;if(L&&(L.hadChildren=!0,j=L.childrenParseType),L&&L.childrenStringTags){const C=F.name;let Y="";for(const te in F.attributes)Y+=` ${te}="${F.attributes[te]}"`;L.childrenStringTags.push(`<${C}${Y}>`);const re={childrenStringTags:L.childrenStringTags};return re.childrenStringEmitClosingTag=`</${C}>`,void this.activeTagStack.push(re)}const oe={};L?(oe.language=L.language,oe.baseIRI=L.baseIRI):oe.baseIRI=this.baseIRI,this.activeTagStack.push(oe),oe.ns=_.parseNamespace(F,L),j===y.RESOURCE?this.onTagResource(F,oe,L,!L):this.onTagProperty(F,oe,L)}onTagResource(F,L,j,oe){const C=_.expandPrefixedTerm(F.name,L.ns,this);L.childrenParseType=y.PROPERTY;let Y=!0;if(C.uri===_.RDF){if(!oe&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(C.local)>=0)throw this.newParseError(`Illegal node element name: ${C.local}`);switch(C.local){case"RDF":L.childrenParseType=y.RESOURCE;case"Description":Y=!1}}const le=[],K=[];let re=null,te=!1,q=!1,V=null;for(const x in F.attributes){const B=F.attributes[x],D=_.expandPrefixedTerm(x,L.ns,this);if(j&&D.uri===_.RDF)switch(D.local){case"about":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${re} where found.`);re=B;continue;case"ID":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${re} where found.`);this.validateNcname(B),re="#"+B,te=!0;continue;case"nodeID":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${re} where found.`);this.validateNcname(B),re=B,q=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":V=B;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(D.uri===_.XML){if("lang"===D.local){L.language=""===B?null:B.toLowerCase();continue}if("base"===D.local){L.baseIRI=E.resolve(B,L.baseIRI);continue}}"xml"!==D.prefix&&D.uri&&(le.push(this.uriToNamedNode(D.uri+D.local)),K.push(B))}if(null!==re&&(L.subject=q?this.dataFactory.blankNode(re):this.valueToUri(re,L),te&&this.claimNodeId(L.subject)),L.subject||(L.subject=this.dataFactory.blankNode()),Y){const x=this.uriToNamedNode(C.uri+C.local);this.emitTriple(L.subject,this.dataFactory.namedNode(_.RDF+"type"),x,j?j.reifiedStatementId:null)}if(j){if(j.predicate)if(j.childrenCollectionSubject){const x=this.dataFactory.blankNode();this.emitTriple(j.childrenCollectionSubject,j.childrenCollectionPredicate,x,j.reifiedStatementId),this.emitTriple(x,this.dataFactory.namedNode(_.RDF+"first"),L.subject,L.reifiedStatementId),j.childrenCollectionSubject=x,j.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(j.subject,j.predicate,L.subject,j.reifiedStatementId);for(let x=0;x<j.predicateSubPredicates.length;x++)this.emitTriple(L.subject,j.predicateSubPredicates[x],j.predicateSubObjects[x],null);j.predicateSubPredicates=[],j.predicateSubObjects=[],j.predicateEmitted=!0}for(let x=0;x<le.length;x++){const B=this.dataFactory.literal(K[x],L.datatype||L.language);this.emitTriple(L.subject,le[x],B,j.reifiedStatementId)}V&&this.emitTriple(L.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(V),null)}}onTagProperty(F,L,j){const oe=_.expandPrefixedTerm(F.name,L.ns,this);if(L.childrenParseType=y.RESOURCE,L.subject=j.subject,oe.uri===_.RDF&&"li"===oe.local?(j.listItemCounter||(j.listItemCounter=1),L.predicate=this.uriToNamedNode(oe.uri+"_"+j.listItemCounter++)):L.predicate=this.uriToNamedNode(oe.uri+oe.local),oe.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(oe.local)>=0)throw this.newParseError(`Illegal property element name: ${oe.local}`);L.predicateSubPredicates=[],L.predicateSubObjects=[];let C=!1,Y=!1,le=null,K=!0;const re=[],te=[];for(const q in F.attributes){const V=F.attributes[q],x=_.expandPrefixedTerm(q,L.ns,this);if(x.uri===_.RDF)switch(x.local){case"resource":if(le)throw this.newParseError(`Found both rdf:resource (${V}) and rdf:nodeID (${le}).`);if(C)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${V})`);L.hadChildren=!0,le=V,K=!1;continue;case"datatype":if(Y)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${V}).`);if(C)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${V})`);L.datatype=this.valueToUri(V,L);continue;case"nodeID":if(Y)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${V}).`);if(L.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${V}).`);if(C)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${V})`);this.validateNcname(V),L.hadChildren=!0,le=V,K=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(Y)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(L.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${L.datatype.value})`);if(le)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${le})`);if("Resource"===V){C=!0,L.childrenParseType=y.PROPERTY;const B=this.dataFactory.blankNode();this.emitTriple(L.subject,L.predicate,B,L.reifiedStatementId),L.subject=B,L.predicate=null}else"Collection"===V?(C=!0,L.hadChildren=!0,L.childrenCollectionSubject=L.subject,L.childrenCollectionPredicate=L.predicate,K=!1):"Literal"===V&&(C=!0,L.childrenTagsToString=!0,L.childrenStringTags=[]);continue;case"ID":this.validateNcname(V),L.reifiedStatementId=this.valueToUri("#"+V,L),this.claimNodeId(L.reifiedStatementId);continue}else if(x.uri===_.XML&&"lang"===x.local){L.language=""===V?null:V.toLowerCase();continue}if("xml"!==x.prefix&&"xmlns"!==x.prefix&&x.uri){if(C||L.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${V}`);L.hadChildren=!0,Y=!0,re.push(this.uriToNamedNode(x.uri+x.local)),te.push(this.dataFactory.literal(V,L.datatype||L.language))}}if(null!==le){const q=L.subject;L.subject=K?this.dataFactory.blankNode(le):this.valueToUri(le,L),this.emitTriple(q,L.predicate,L.subject,L.reifiedStatementId);for(let V=0;V<re.length;V++)this.emitTriple(L.subject,re[V],te[V],null);L.predicateEmitted=!0}else K&&(L.predicateSubPredicates=re,L.predicateSubObjects=te,L.predicateEmitted=!1)}emitTriple(F,L,j,oe){this.push(this.dataFactory.quad(F,L,j,this.defaultGraph)),oe&&(this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"subject"),F,this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"predicate"),L,this.defaultGraph)),this.push(this.dataFactory.quad(oe,this.dataFactory.namedNode(_.RDF+"object"),j,this.defaultGraph)))}claimNodeId(F){if(!this.allowDuplicateRdfIds){if(this.nodeIds[F.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${F.value}'.`);this.nodeIds[F.value]=!0}}onText(F){const L=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;L&&(L.childrenStringTags?L.childrenStringTags.push(F):L.predicate&&(L.text=F))}onCloseTag(){const F=this.activeTagStack.pop();if(F.childrenStringEmitClosingTag&&F.childrenStringTags.push(F.childrenStringEmitClosingTag),F.childrenTagsToString&&(F.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),F.text=F.childrenStringTags.join(""),F.hadChildren=!1),F.childrenCollectionSubject)this.emitTriple(F.childrenCollectionSubject,F.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),F.reifiedStatementId);else if(F.predicate)if(F.hadChildren||F.childrenParseType===y.PROPERTY){if(!F.predicateEmitted){const L=this.dataFactory.blankNode();this.emitTriple(F.subject,F.predicate,L,F.reifiedStatementId);for(let j=0;j<F.predicateSubPredicates.length;j++)this.emitTriple(L,F.predicateSubPredicates[j],F.predicateSubObjects[j],null)}}else this.emitTriple(F.subject,F.predicate,this.dataFactory.literal(F.text||"",F.datatype||F.language),F.reifiedStatementId)}onDoctype(F){F.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(L,j,oe)=>(this.saxStream._parser.ENTITIES[j]=oe,""))}}var y,M;Z.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(M=y=Z.ParseType||(Z.ParseType={}))[M.RESOURCE=0]="RESOURCE",M[M.PROPERTY=1]="PROPERTY"},9987:(ne,Z,g)=>{"use strict";const{AbortError:E,codes:b}=g(4370),{isNodeStream:k,isWebStream:A,kControllerErrorFunction:P}=g(5428),_=g(4618),{ERR_INVALID_ARG_TYPE:y}=b;ne.exports.addAbortSignal=function(L,j){if(((F,L)=>{if("object"!=typeof F||!("aborted"in F))throw new y("signal","AbortSignal",F)})(L),!k(j)&&!A(j))throw new y("stream",["ReadableStream","WritableStream","Stream"],j);return ne.exports.addAbortSignalNoValidate(L,j)},ne.exports.addAbortSignalNoValidate=function(F,L){if("object"!=typeof F||!("aborted"in F))return L;const j=k(L)?()=>{L.destroy(new E(void 0,{cause:F.reason}))}:()=>{L[P](new E(void 0,{cause:F.reason}))};return F.aborted?j():(F.addEventListener("abort",j),_(L,()=>F.removeEventListener("abort",j))),L}},2960:(ne,Z,g)=>{"use strict";const{StringPrototypeSlice:E,SymbolIterator:b,TypedArrayPrototypeSet:k,Uint8Array:A}=g(6305),{Buffer:P}=g(1657),{inspect:_}=g(2656);ne.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(M){const F={data:M,next:null};this.length>0?this.tail.next=F:this.head=F,this.tail=F,++this.length}unshift(M){const F={data:M,next:this.head};0===this.length&&(this.tail=F),this.head=F,++this.length}shift(){if(0===this.length)return;const M=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,M}clear(){this.head=this.tail=null,this.length=0}join(M){if(0===this.length)return"";let F=this.head,L=""+F.data;for(;null!==(F=F.next);)L+=M+F.data;return L}concat(M){if(0===this.length)return P.alloc(0);const F=P.allocUnsafe(M>>>0);let L=this.head,j=0;for(;L;)k(F,L.data,j),j+=L.data.length,L=L.next;return F}consume(M,F){const L=this.head.data;if(M<L.length){const j=L.slice(0,M);return this.head.data=L.slice(M),j}return M===L.length?this.shift():F?this._getString(M):this._getBuffer(M)}first(){return this.head.data}*[b](){for(let M=this.head;M;M=M.next)yield M.data}_getString(M){let F="",L=this.head,j=0;do{const oe=L.data;if(!(M>oe.length)){M===oe.length?(F+=oe,++j,this.head=L.next?L.next:this.tail=null):(F+=E(oe,0,M),this.head=L,L.data=E(oe,M));break}F+=oe,M-=oe.length,++j}while(null!==(L=L.next));return this.length-=j,F}_getBuffer(M){const F=P.allocUnsafe(M),L=M;let j=this.head,oe=0;do{const C=j.data;if(!(M>C.length)){M===C.length?(k(F,C,L-M),++oe,this.head=j.next?j.next:this.tail=null):(k(F,new A(C.buffer,C.byteOffset,M),L-M),this.head=j,j.data=C.slice(M));break}k(F,C,L-M),M-=C.length,++oe}while(null!==(j=j.next));return this.length-=oe,F}[Symbol.for("nodejs.util.inspect.custom")](M,F){return _(this,{...F,depth:0,customInspect:!1})}}},7721:(ne,Z,g)=>{"use strict";var E=g(7156).default;const{pipeline:b}=g(4514),k=g(5931),{destroyer:A}=g(5601),{isNodeStream:P,isReadable:_,isWritable:y,isWebStream:M,isTransformStream:F,isWritableStream:L,isReadableStream:j}=g(5428),{AbortError:oe,codes:{ERR_INVALID_ARG_VALUE:C,ERR_MISSING_ARGS:Y}}=g(4370),le=g(4618);ne.exports=function(...re){if(0===re.length)throw new Y("streams");if(1===re.length)return k.from(re[0]);const te=[...re];if("function"==typeof re[0]&&(re[0]=k.from(re[0])),"function"==typeof re[re.length-1]){const Ie=re.length-1;re[Ie]=k.from(re[Ie])}for(let Ie=0;Ie<re.length;++Ie)if(P(re[Ie])||M(re[Ie])){if(Ie<re.length-1&&!(_(re[Ie])||j(re[Ie])||F(re[Ie])))throw new C(`streams[${Ie}]`,te[Ie],"must be readable");if(Ie>0&&!(y(re[Ie])||L(re[Ie])||F(re[Ie])))throw new C(`streams[${Ie}]`,te[Ie],"must be writable")}let q,V,x,B,D;const W=re[0],Te=b(re,function he(Ie){const De=B;B=null,De?De(Ie):Ie?D.destroy(Ie):!we&&!de&&D.destroy()}),de=!!(y(W)||L(W)||F(W)),we=!!(_(Te)||j(Te)||F(Te));if(D=new k({writableObjectMode:!(null==W||!W.writableObjectMode),readableObjectMode:!(null==Te||!Te.writableObjectMode),writable:de,readable:we}),de){if(P(W))D._write=function(De,et,Ye){W.write(De,et)?Ye():q=Ye},D._final=function(De){W.end(),V=De},W.on("drain",function(){if(q){const De=q;q=null,De()}});else if(M(W)){const et=(F(W)?W.writable:W).getWriter();D._write=function(){var Ye=E(function*(Ce,Ne,ke){try{yield et.ready,et.write(Ce).catch(()=>{}),ke()}catch(He){ke(He)}});return function(Ce,Ne,ke){return Ye.apply(this,arguments)}}(),D._final=function(){var Ye=E(function*(Ce){try{yield et.ready,et.close().catch(()=>{}),V=Ce}catch(Ne){Ce(Ne)}});return function(Ce){return Ye.apply(this,arguments)}}()}const Ie=F(Te)?Te.readable:Te;le(Ie,()=>{if(V){const De=V;V=null,De()}})}if(we)if(P(Te))Te.on("readable",function(){if(x){const Ie=x;x=null,Ie()}}),Te.on("end",function(){D.push(null)}),D._read=function(){for(;;){const Ie=Te.read();if(null===Ie)return void(x=D._read);if(!D.push(Ie))return}};else if(M(Te)){const De=(F(Te)?Te.readable:Te).getReader();D._read=E(function*(){for(;;)try{const{value:et,done:Ye}=yield De.read();if(!D.push(et))return;if(Ye)return void D.push(null)}catch{return}})}return D._destroy=function(Ie,De){!Ie&&null!==B&&(Ie=new oe),x=null,q=null,V=null,null===B?De(Ie):(B=De,P(Te)&&A(Te,Ie))},D}},5601:(ne,Z,g)=>{"use strict";const E=g(42),{aggregateTwoErrors:b,codes:{ERR_MULTIPLE_CALLBACK:k},AbortError:A}=g(4370),{Symbol:P}=g(6305),{kDestroyed:_,isDestroyed:y,isFinished:M,isServerRequest:F}=g(5428),L=P("kDestroy"),j=P("kConstruct");function oe(de,we,Ie){de&&(we&&!we.errored&&(we.errored=de),Ie&&!Ie.errored&&(Ie.errored=de))}function Y(de,we,Ie){let De=!1;function et(Ye){if(De)return;De=!0;const Ce=de._readableState,Ne=de._writableState;oe(Ye,Ne,Ce),Ne&&(Ne.closed=!0),Ce&&(Ce.closed=!0),"function"==typeof Ie&&Ie(Ye),Ye?E.nextTick(le,de,Ye):E.nextTick(K,de)}try{de._destroy(we||null,et)}catch(Ye){et(Ye)}}function le(de,we){re(de,we),K(de)}function K(de){const we=de._readableState,Ie=de._writableState;Ie&&(Ie.closeEmitted=!0),we&&(we.closeEmitted=!0),(null!=Ie&&Ie.emitClose||null!=we&&we.emitClose)&&de.emit("close")}function re(de,we){const Ie=de._readableState,De=de._writableState;null!=De&&De.errorEmitted||null!=Ie&&Ie.errorEmitted||(De&&(De.errorEmitted=!0),Ie&&(Ie.errorEmitted=!0),de.emit("error",we))}function q(de,we,Ie){const De=de._readableState,et=de._writableState;if(null!=et&&et.destroyed||null!=De&&De.destroyed)return this;null!=De&&De.autoDestroy||null!=et&&et.autoDestroy?de.destroy(we):we&&(et&&!et.errored&&(et.errored=we),De&&!De.errored&&(De.errored=we),Ie?E.nextTick(re,de,we):re(de,we))}function x(de){let we=!1;function Ie(De){if(we)return void q(de,De??new k);we=!0;const et=de._readableState,Ye=de._writableState,Ce=Ye||et;et&&(et.constructed=!0),Ye&&(Ye.constructed=!0),Ce.destroyed?de.emit(L,De):De?q(de,De,!0):E.nextTick(B,de)}try{de._construct(De=>{E.nextTick(Ie,De)})}catch(De){E.nextTick(Ie,De)}}function B(de){de.emit(j)}function D(de){return de?.setHeader&&"function"==typeof de.abort}function he(de){de.emit("close")}function W(de,we){de.emit("error",we),E.nextTick(he,de)}ne.exports={construct:function V(de,we){if("function"!=typeof de._construct)return;const Ie=de._readableState,De=de._writableState;Ie&&(Ie.constructed=!1),De&&(De.constructed=!1),de.once(j,we),!(de.listenerCount(j)>1)&&E.nextTick(x,de)},destroyer:function Te(de,we){!de||y(de)||(!we&&!M(de)&&(we=new A),F(de)?(de.socket=null,de.destroy(we)):D(de)?de.abort():D(de.req)?de.req.abort():"function"==typeof de.destroy?de.destroy(we):"function"==typeof de.close?de.close():we?E.nextTick(W,de,we):E.nextTick(he,de),de.destroyed||(de[_]=!0))},destroy:function C(de,we){const Ie=this._readableState,De=this._writableState,et=De||Ie;return null!=De&&De.destroyed||null!=Ie&&Ie.destroyed?("function"==typeof we&&we(),this):(oe(de,De,Ie),De&&(De.destroyed=!0),Ie&&(Ie.destroyed=!0),et.constructed?Y(this,de,we):this.once(L,function(Ye){Y(this,b(Ye,de),we)}),this)},undestroy:function te(){const de=this._readableState,we=this._writableState;de&&(de.constructed=!0,de.closed=!1,de.closeEmitted=!1,de.destroyed=!1,de.errored=null,de.errorEmitted=!1,de.reading=!1,de.ended=!1===de.readable,de.endEmitted=!1===de.readable),we&&(we.constructed=!0,we.destroyed=!1,we.closed=!1,we.closeEmitted=!1,we.errored=null,we.errorEmitted=!1,we.finalCalled=!1,we.prefinished=!1,we.ended=!1===we.writable,we.ending=!1===we.writable,we.finished=!1===we.writable)},errorOrDestroy:q}},5931:(ne,Z,g)=>{"use strict";const{ObjectDefineProperties:E,ObjectGetOwnPropertyDescriptor:b,ObjectKeys:k,ObjectSetPrototypeOf:A}=g(6305);ne.exports=y;const P=g(8383),_=g(9764);A(y.prototype,P.prototype),A(y,P);{const j=k(_.prototype);for(let oe=0;oe<j.length;oe++){const C=j[oe];y.prototype[C]||(y.prototype[C]=_.prototype[C])}}function y(j){if(!(this instanceof y))return new y(j);P.call(this,j),_.call(this,j),j?(this.allowHalfOpen=!1!==j.allowHalfOpen,!1===j.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===j.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let M,L;function F(){return void 0===M&&(M={}),M}E(y.prototype,{writable:{__proto__:null,...b(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...b(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...b(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...b(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...b(_.prototype,"writableLength")},writableFinished:{__proto__:null,...b(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...b(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...b(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...b(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(j){this._readableState&&this._writableState&&(this._readableState.destroyed=j,this._writableState.destroyed=j)}}}),y.fromWeb=function(j,oe){return F().newStreamDuplexFromReadableWritablePair(j,oe)},y.toWeb=function(j){return F().newReadableWritablePairFromDuplex(j)},y.from=function(j){return L||(L=g(8078)),L(j,"body")}},8078:(ne,Z,g)=>{var E=g(7156).default,b=g(6737).default,k=g(8186).default;const A=g(42),P=g(1657),{isReadable:_,isWritable:y,isIterable:M,isNodeStream:F,isReadableNodeStream:L,isWritableNodeStream:j,isDuplexNodeStream:oe}=g(5428),C=g(4618),{AbortError:Y,codes:{ERR_INVALID_ARG_TYPE:le,ERR_INVALID_RETURN_VALUE:K}}=g(4370),{destroyer:re}=g(5601),te=g(5931),q=g(8383),{createDeferredPromise:V}=g(2656),x=g(55),B=globalThis.Blob||P.Blob,D=typeof B<"u"?function(De){return De instanceof B}:function(De){return!1},he=globalThis.AbortController||g(3982).AbortController,{FunctionPrototypeCall:W}=g(6305);class Te extends te{constructor(De){super(De),!1===De?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===De?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function we(Ie){const De=Ie.readable&&"function"!=typeof Ie.readable.read?q.wrap(Ie.readable):Ie.readable,et=Ie.writable;let Ne,ke,He,me,Se,Ye=!!_(De),Ce=!!y(et);function qe(lt){const We=me;me=null,We?We(lt):lt&&Se.destroy(lt)}return Se=new Te({readableObjectMode:!(null==De||!De.readableObjectMode),writableObjectMode:!(null==et||!et.writableObjectMode),readable:Ye,writable:Ce}),Ce&&(C(et,lt=>{Ce=!1,lt&&re(De,lt),qe(lt)}),Se._write=function(lt,We,_e){et.write(lt,We)?_e():Ne=_e},Se._final=function(lt){et.end(),ke=lt},et.on("drain",function(){if(Ne){const lt=Ne;Ne=null,lt()}}),et.on("finish",function(){if(ke){const lt=ke;ke=null,lt()}})),Ye&&(C(De,lt=>{Ye=!1,lt&&re(De,lt),qe(lt)}),De.on("readable",function(){if(He){const lt=He;He=null,lt()}}),De.on("end",function(){Se.push(null)}),Se._read=function(){for(;;){const lt=De.read();if(null===lt)return void(He=Se._read);if(!Se.push(lt))return}}),Se._destroy=function(lt,We){!lt&&null!==me&&(lt=new Y),He=null,Ne=null,ke=null,null===me?We(lt):(me=We,re(et,lt),re(De,lt))},Se}ne.exports=function Ie(De,et){if(oe(De))return De;if(L(De))return we({readable:De});if(j(De))return we({writable:De});if(F(De))return we({writable:!1,readable:!1});if("function"==typeof De){const{value:Ce,write:Ne,final:ke,destroy:He}=function de(Ie){let{promise:De,resolve:et}=V();const Ye=new he,Ce=Ye.signal;return{value:Ie(k(function*(){for(;;){const ke=De;De=null;const{chunk:He,done:me,cb:Se}=yield b(ke);if(A.nextTick(Se),me)return;if(Ce.aborted)throw new Y(void 0,{cause:Ce.reason});({promise:De,resolve:et}=V()),yield He}})(),{signal:Ce}),write(ke,He,me){const Se=et;et=null,Se({chunk:ke,done:!1,cb:me})},final(ke){const He=et;et=null,He({done:!0,cb:ke})},destroy(ke,He){Ye.abort(),He(ke)}}}(De);if(M(Ce))return x(Te,Ce,{objectMode:!0,write:Ne,final:ke,destroy:He});const me=Ce?.then;if("function"==typeof me){let Se;const qe=W(me,Ce,lt=>{if(null!=lt)throw new K("nully","body",lt)},lt=>{re(Se,lt)});return Se=new Te({objectMode:!0,readable:!1,write:Ne,final(lt){ke(E(function*(){try{yield qe,A.nextTick(lt,null)}catch(We){A.nextTick(lt,We)}}))},destroy:He})}throw new K("Iterable, AsyncIterable or AsyncFunction",et,Ce)}if(D(De))return Ie(De.arrayBuffer());if(M(De))return x(Te,De,{objectMode:!0,writable:!1});if("object"==typeof De?.writable||"object"==typeof De?.readable)return we({readable:null!=De&&De.readable?L(De?.readable)?De?.readable:Ie(De.readable):void 0,writable:null!=De&&De.writable?j(De?.writable)?De?.writable:Ie(De.writable):void 0});const Ye=De?.then;if("function"==typeof Ye){let Ce;return W(Ye,De,Ne=>{null!=Ne&&Ce.push(Ne),Ce.push(null)},Ne=>{re(Ce,Ne)}),Ce=new Te({objectMode:!0,writable:!1,read(){}})}throw new le(et,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],De)}},4618:(ne,Z,g)=>{const E=g(42),{AbortError:b,codes:k}=g(4370),{ERR_INVALID_ARG_TYPE:A,ERR_STREAM_PREMATURE_CLOSE:P}=k,{kEmptyObject:_,once:y}=g(2656),{validateAbortSignal:M,validateFunction:F,validateObject:L,validateBoolean:j}=g(2120),{Promise:oe,PromisePrototypeThen:C}=g(6305),{isClosed:Y,isReadable:le,isReadableNodeStream:K,isReadableStream:re,isReadableFinished:te,isReadableErrored:q,isWritable:V,isWritableNodeStream:x,isWritableStream:B,isWritableFinished:D,isWritableErrored:he,isNodeStream:W,willEmitClose:Te,kIsClosedPromise:de}=g(5428),Ie=()=>{};function De(Ce,Ne,ke){var He,me;if(2===arguments.length?(ke=Ne,Ne=_):null==Ne?Ne=_:L(Ne,"options"),F(ke,"callback"),M(Ne.signal,"options.signal"),ke=y(ke),re(Ce)||B(Ce))return function et(Ce,Ne,ke){let He=!1,me=Ie;if(Ne.signal)if(me=()=>{He=!0,ke.call(Ce,new b(void 0,{cause:Ne.signal.reason}))},Ne.signal.aborted)E.nextTick(me);else{const qe=ke;ke=y((...lt)=>{Ne.signal.removeEventListener("abort",me),qe.apply(Ce,lt)}),Ne.signal.addEventListener("abort",me)}const Se=(...qe)=>{He||E.nextTick(()=>ke.apply(Ce,qe))};return C(Ce[de].promise,Se,Se),Ie}(Ce,Ne,ke);if(!W(Ce))throw new A("stream",["ReadableStream","WritableStream","Stream"],Ce);const Se=null!==(He=Ne.readable)&&void 0!==He?He:K(Ce),qe=null!==(me=Ne.writable)&&void 0!==me?me:x(Ce),lt=Ce._writableState,We=Ce._readableState,_e=()=>{Ce.writable||ae()};let z=Te(Ce)&&K(Ce)===Se&&x(Ce)===qe,O=D(Ce,!1);const ae=()=>{O=!0,Ce.destroyed&&(z=!1),(!z||Ce.readable&&!Se)&&(!Se||H)&&ke.call(Ce)};let H=te(Ce,!1);const Fe=()=>{H=!0,Ce.destroyed&&(z=!1),(!z||Ce.writable&&!qe)&&(!qe||O)&&ke.call(Ce)},Ke=ue=>{ke.call(Ce,ue)};let fe=Y(Ce);const ee=()=>{fe=!0;const ue=he(Ce)||q(Ce);return ue&&"boolean"!=typeof ue?ke.call(Ce,ue):Se&&!H&&K(Ce,!0)&&!te(Ce,!1)?ke.call(Ce,new P):!qe||O||D(Ce,!1)?void ke.call(Ce):ke.call(Ce,new P)},G=()=>{fe=!0;const ue=he(Ce)||q(Ce);if(ue&&"boolean"!=typeof ue)return ke.call(Ce,ue);ke.call(Ce)},R=()=>{Ce.req.on("finish",ae)};!function we(Ce){return Ce.setHeader&&"function"==typeof Ce.abort}(Ce)?qe&&!lt&&(Ce.on("end",_e),Ce.on("close",_e)):(Ce.on("complete",ae),z||Ce.on("abort",ee),Ce.req?R():Ce.on("request",R)),!z&&"boolean"==typeof Ce.aborted&&Ce.on("aborted",ee),Ce.on("end",Fe),Ce.on("finish",ae),!1!==Ne.error&&Ce.on("error",Ke),Ce.on("close",ee),fe?E.nextTick(ee):null!=lt&&lt.errorEmitted||null!=We&&We.errorEmitted?z||E.nextTick(G):(!Se&&(!z||le(Ce))&&(O||!1===V(Ce))||!qe&&(!z||V(Ce))&&(H||!1===le(Ce))||We&&Ce.req&&Ce.aborted)&&E.nextTick(G);const I=()=>{ke=Ie,Ce.removeListener("aborted",ee),Ce.removeListener("complete",ae),Ce.removeListener("abort",ee),Ce.removeListener("request",R),Ce.req&&Ce.req.removeListener("finish",ae),Ce.removeListener("end",_e),Ce.removeListener("close",_e),Ce.removeListener("finish",ae),Ce.removeListener("end",Fe),Ce.removeListener("error",Ke),Ce.removeListener("close",ee)};if(Ne.signal&&!fe){const ue=()=>{const ge=ke;I(),ge.call(Ce,new b(void 0,{cause:Ne.signal.reason}))};if(Ne.signal.aborted)E.nextTick(ue);else{const ge=ke;ke=y((...ze)=>{Ne.signal.removeEventListener("abort",ue),ge.apply(Ce,ze)}),Ne.signal.addEventListener("abort",ue)}}return I}ne.exports=De,ne.exports.finished=function Ye(Ce,Ne){var ke;let He=!1;return null===Ne&&(Ne=_),null!==(ke=Ne)&&void 0!==ke&&ke.cleanup&&(j(Ne.cleanup,"cleanup"),He=Ne.cleanup),new oe((me,Se)=>{const qe=De(Ce,Ne,lt=>{He&&qe(),lt?Se(lt):me()})})}},55:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(42),{PromisePrototypeThen:k,SymbolAsyncIterator:A,SymbolIterator:P}=g(6305),{Buffer:_}=g(1657),{ERR_INVALID_ARG_TYPE:y,ERR_STREAM_NULL_VALUES:M}=g(4370).codes;ne.exports=function F(L,j,oe){let C,Y;if("string"==typeof j||j instanceof _)return new L({objectMode:!0,...oe,read(){this.push(j),this.push(null)}});if(j&&j[A])Y=!0,C=j[A]();else{if(!j||!j[P])throw new y("iterable",["Iterable"],j);Y=!1,C=j[P]()}const le=new L({objectMode:!0,highWaterMark:1,...oe});let K=!1;function te(){return(te=E(function*(x){if(null!=x&&"function"==typeof C.throw){const{value:he,done:W}=yield C.throw(x);if(yield he,W)return}if("function"==typeof C.return){const{value:he}=yield C.return();yield he}})).apply(this,arguments)}function V(){return(V=E(function*(){for(;;){try{const{value:x,done:B}=Y?yield C.next():C.next();if(B)le.push(null);else{const D=x&&"function"==typeof x.then?yield x:x;if(null===D)throw K=!1,new M;if(le.push(D))continue;K=!1}}catch(x){le.destroy(x)}break}})).apply(this,arguments)}return le._read=function(){K||(K=!0,function q(){V.apply(this,arguments)}())},le._destroy=function(x,B){k(function re(x){return te.apply(this,arguments)}(x),()=>b.nextTick(B,x),D=>b.nextTick(B,D||x))},le}},900:(ne,Z,g)=>{"use strict";const{ArrayIsArray:E,ObjectSetPrototypeOf:b}=g(6305),{EventEmitter:k}=g(2016);function A(_){k.call(this,_)}function P(_,y,M){if("function"==typeof _.prependListener)return _.prependListener(y,M);_._events&&_._events[y]?E(_._events[y])?_._events[y].unshift(M):_._events[y]=[M,_._events[y]]:_.on(y,M)}b(A.prototype,k.prototype),b(A,k),A.prototype.pipe=function(_,y){const M=this;function F(K){_.writable&&!1===_.write(K)&&M.pause&&M.pause()}function L(){M.readable&&M.resume&&M.resume()}M.on("data",F),_.on("drain",L),!_._isStdio&&(!y||!1!==y.end)&&(M.on("end",oe),M.on("close",C));let j=!1;function oe(){j||(j=!0,_.end())}function C(){j||(j=!0,"function"==typeof _.destroy&&_.destroy())}function Y(K){le(),0===k.listenerCount(this,"error")&&this.emit("error",K)}function le(){M.removeListener("data",F),_.removeListener("drain",L),M.removeListener("end",oe),M.removeListener("close",C),M.removeListener("error",Y),_.removeListener("error",Y),M.removeListener("end",le),M.removeListener("close",le),_.removeListener("close",le)}return P(M,"error",Y),P(_,"error",Y),M.on("end",le),M.on("close",le),_.on("close",le),_.emit("pipe",M),_},ne.exports={Stream:A,prependListener:P}},7624:(ne,Z,g)=>{"use strict";var E=g(7156).default,b=g(8131).default,k=g(8237).default,A=g(6737).default,P=g(8186).default;const _=globalThis.AbortController||g(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:y,ERR_INVALID_ARG_TYPE:M,ERR_MISSING_ARGS:F,ERR_OUT_OF_RANGE:L},AbortError:j}=g(4370),{validateAbortSignal:oe,validateInteger:C,validateObject:Y}=g(2120),le=g(6305).Symbol("kWeak"),{finished:K}=g(4618),re=g(7721),{addAbortSignalNoValidate:te}=g(9987),{isWritable:q,isNodeStream:V}=g(5428),{ArrayPrototypePush:x,MathFloor:B,Number:D,NumberIsNaN:he,Promise:W,PromiseReject:Te,PromisePrototypeThen:de,Symbol:we}=g(6305),Ie=we("kEmpty"),De=we("kEof");function Ye(R,I){if("function"!=typeof R)throw new M("fn",["Function","AsyncFunction"],R);null!=I&&Y(I,"options"),null!=I?.signal&&oe(I.signal,"options.signal");let ue=1;return null!=I?.concurrency&&(ue=B(I.concurrency)),C(ue,"concurrency",1),function(){var ge=P(function*(){var Je,ot;const kt=new _,_t=this,Wt=[],rn=kt.signal,Re={signal:rn},J=()=>kt.abort();null!=I&&null!==(Je=I.signal)&&void 0!==Je&&Je.aborted&&J(),null==I||null===(ot=I.signal)||void 0===ot||ot.addEventListener("abort",J);let S,ce,Ge=!1;function Ze(){Ge=!0}function Xt(){return(Xt=E(function*(){try{var Xn,cn=!1,Yn=!1;try{for(var As,bn=k(_t);cn=!(As=yield bn.next()).done;cn=!1){let $i=As.value;var Yo;if(Ge)return;if(rn.aborted)throw new j;try{$i=R($i,Re)}catch(ts){$i=Te(ts)}$i!==Ie&&("function"==typeof(null===(Yo=$i)||void 0===Yo?void 0:Yo.catch)&&$i.catch(Ze),Wt.push($i),S&&(S(),S=null),!Ge&&Wt.length&&Wt.length>=ue&&(yield new W(ts=>{ce=ts})))}}catch($i){Yn=!0,Xn=$i}finally{try{cn&&null!=bn.return&&(yield bn.return())}finally{if(Yn)throw Xn}}Wt.push(De)}catch($i){const ts=Te($i);de(ts,void 0,Ze),Wt.push(ts)}finally{var Ns;Ge=!0,S&&(S(),S=null),null==I||null===(Ns=I.signal)||void 0===Ns||Ns.removeEventListener("abort",J)}})).apply(this,arguments)}!function ct(){Xt.apply(this,arguments)}();try{for(;;){for(;Wt.length>0;){const cn=yield A(Wt[0]);if(cn===De)return;if(rn.aborted)throw new j;cn!==Ie&&(yield cn),Wt.shift(),ce&&(ce(),ce=null)}yield A(new W(cn=>{S=cn}))}}finally{kt.abort(),Ge=!0,ce&&(ce(),ce=null)}});return function ze(){return ge.apply(this,arguments)}}().call(this)}function Ne(R){return ke.apply(this,arguments)}function ke(){return(ke=E(function*(R,I=void 0){var ze,ue=!1,ge=!1;try{for(var Je=k(_e.call(this,R,I));ue=!(yield Je.next()).done;ue=!1)return!0}catch(kt){ge=!0,ze=kt}finally{try{ue&&null!=Je.return&&(yield Je.return())}finally{if(ge)throw ze}}return!1})).apply(this,arguments)}function me(){return(me=E(function*(R,I=void 0){if("function"!=typeof R)throw new M("fn",["Function","AsyncFunction"],R);return!(yield Ne.call(this,E(function*(...ue){return!(yield R(...ue))}),I))})).apply(this,arguments)}function qe(){return(qe=E(function*(R,I){var ze,ue=!1,ge=!1;try{for(var ot,Je=k(_e.call(this,R,I));ue=!(ot=yield Je.next()).done;ue=!1)return ot.value}catch(kt){ge=!0,ze=kt}finally{try{ue&&null!=Je.return&&(yield Je.return())}finally{if(ge)throw ze}}})).apply(this,arguments)}function We(){return We=E(function*(R,I){if("function"!=typeof R)throw new M("fn",["Function","AsyncFunction"],R);function ge(){return(ge=E(function*(Wt,rn){return yield R(Wt,rn),Ie})).apply(this,arguments)}var ot,ze=!1,Je=!1;try{for(var kt=k(Ye.call(this,function ue(Wt,rn){return ge.apply(this,arguments)},I));ze=!(yield kt.next()).done;ze=!1);}catch(Wt){Je=!0,ot=Wt}finally{try{ze&&null!=kt.return&&(yield kt.return())}finally{if(Je)throw ot}}}),We.apply(this,arguments)}function _e(R,I){if("function"!=typeof R)throw new M("fn",["Function","AsyncFunction"],R);function ge(){return(ge=E(function*(ze,Je){return(yield R(ze,Je))?ze:Ie})).apply(this,arguments)}return Ye.call(this,function ue(ze,Je){return ge.apply(this,arguments)},I)}class z extends F{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ae(){return ae=E(function*(R,I,ue){var ge;if("function"!=typeof R)throw new M("reducer",["Function","AsyncFunction"],R);null!=ue&&Y(ue,"options"),null!=ue?.signal&&oe(ue.signal,"options.signal");let ze=arguments.length>1;if(null!=ue&&null!==(ge=ue.signal)&&void 0!==ge&&ge.aborted){const ce=new j(void 0,{cause:ue.signal.reason});throw this.once("error",()=>{}),yield K(this.destroy(ce)),ce}const Je=new _,ot=Je.signal;null!=ue&&ue.signal&&ue.signal.addEventListener("abort",()=>Je.abort(),{once:!0,[le]:this});let kt=!1;try{var rn,_t=!1,Wt=!1;try{for(var J,Re=k(this);_t=!(J=yield Re.next()).done;_t=!1){const ce=J.value;var S;if(kt=!0,null!=ue&&null!==(S=ue.signal)&&void 0!==S&&S.aborted)throw new j;ze?I=yield R(I,ce,{signal:ot}):(I=ce,ze=!0)}}catch(ce){Wt=!0,rn=ce}finally{try{_t&&null!=Re.return&&(yield Re.return())}finally{if(Wt)throw rn}}if(!kt&&!ze)throw new z}finally{Je.abort()}return I}),ae.apply(this,arguments)}function Fe(){return(Fe=E(function*(R){null!=R&&Y(R,"options"),null!=R?.signal&&oe(R.signal,"options.signal");const I=[];var ze,ue=!1,ge=!1;try{for(var ot,Je=k(this);ue=!(ot=yield Je.next()).done;ue=!1){const _t=ot.value;var kt;if(null!=R&&null!==(kt=R.signal)&&void 0!==kt&&kt.aborted)throw new j(void 0,{cause:R.signal.reason});x(I,_t)}}catch(_t){ge=!0,ze=_t}finally{try{ue&&null!=Je.return&&(yield Je.return())}finally{if(ge)throw ze}}return I})).apply(this,arguments)}function fe(R){if(R=D(R),he(R))return 0;if(R<0)throw new L("number",">= 0",R);return R}ne.exports.streamReturningOperators={asIndexedPairs:function Ce(R=void 0){return null!=R&&Y(R,"options"),null!=R?.signal&&oe(R.signal,"options.signal"),function(){var I=P(function*(){let ge=0;var ot,ze=!1,Je=!1;try{for(var _t,kt=k(this);ze=!(_t=yield A(kt.next())).done;ze=!1){const rn=_t.value;var Wt;if(null!=R&&null!==(Wt=R.signal)&&void 0!==Wt&&Wt.aborted)throw new j({cause:R.signal.reason});yield[ge++,rn]}}catch(rn){Je=!0,ot=rn}finally{try{ze&&null!=kt.return&&(yield A(kt.return()))}finally{if(Je)throw ot}}});return function ue(){return I.apply(this,arguments)}}().call(this)},drop:function ee(R,I=void 0){return null!=I&&Y(I,"options"),null!=I?.signal&&oe(I.signal,"options.signal"),R=fe(R),function(){var ue=P(function*(){var ze;if(null!=I&&null!==(ze=I.signal)&&void 0!==ze&&ze.aborted)throw new j;var kt,Je=!1,ot=!1;try{for(var Wt,_t=k(this);Je=!(Wt=yield A(_t.next())).done;Je=!1){const Re=Wt.value;var rn;if(null!=I&&null!==(rn=I.signal)&&void 0!==rn&&rn.aborted)throw new j;R--<=0&&(yield Re)}}catch(Re){ot=!0,kt=Re}finally{try{Je&&null!=_t.return&&(yield A(_t.return()))}finally{if(ot)throw kt}}});return function ge(){return ue.apply(this,arguments)}}().call(this)},filter:_e,flatMap:function Ke(R,I){const ue=Ye.call(this,R,I);return function(){var ge=P(function*(){var kt,Je=!1,ot=!1;try{for(var Wt,_t=k(ue);Je=!(Wt=yield A(_t.next())).done;Je=!1){const rn=Wt.value;yield*b(k(rn),A)}}catch(rn){ot=!0,kt=rn}finally{try{Je&&null!=_t.return&&(yield A(_t.return()))}finally{if(ot)throw kt}}});return function ze(){return ge.apply(this,arguments)}}().call(this)},map:Ye,take:function G(R,I=void 0){return null!=I&&Y(I,"options"),null!=I?.signal&&oe(I.signal,"options.signal"),R=fe(R),function(){var ue=P(function*(){var ze;if(null!=I&&null!==(ze=I.signal)&&void 0!==ze&&ze.aborted)throw new j;var kt,Je=!1,ot=!1;try{for(var Wt,_t=k(this);Je=!(Wt=yield A(_t.next())).done;Je=!1){const Re=Wt.value;var rn;if(null!=I&&null!==(rn=I.signal)&&void 0!==rn&&rn.aborted)throw new j;if(!(R-- >0))return;yield Re}}catch(Re){ot=!0,kt=Re}finally{try{Je&&null!=_t.return&&(yield A(_t.return()))}finally{if(ot)throw kt}}});return function ge(){return ue.apply(this,arguments)}}().call(this)},compose:function et(R,I){if(null!=I&&Y(I,"options"),null!=I?.signal&&oe(I.signal,"options.signal"),V(R)&&!q(R))throw new y("stream",R,"must be writable");const ue=re(this,R);return null!=I&&I.signal&&te(I.signal,ue),ue}},ne.exports.promiseReturningOperators={every:function He(R){return me.apply(this,arguments)},forEach:function lt(R,I){return We.apply(this,arguments)},reduce:function O(R,I,ue){return ae.apply(this,arguments)},toArray:function H(R){return Fe.apply(this,arguments)},some:Ne,find:function Se(R,I){return qe.apply(this,arguments)}}},6973:(ne,Z,g)=>{"use strict";const{ObjectSetPrototypeOf:E}=g(6305);ne.exports=k;const b=g(123);function k(A){if(!(this instanceof k))return new k(A);b.call(this,A)}E(k.prototype,b.prototype),E(k,b),k.prototype._transform=function(A,P,_){_(null,A)}},4514:(ne,Z,g)=>{var E=g(7156).default,b=g(8186).default,k=g(6737).default,A=g(8131).default,P=g(8237).default;const _=g(42),{ArrayIsArray:y,Promise:M,SymbolAsyncIterator:F}=g(6305),L=g(4618),{once:j}=g(2656),oe=g(5601),C=g(5931),{aggregateTwoErrors:Y,codes:{ERR_INVALID_ARG_TYPE:le,ERR_INVALID_RETURN_VALUE:K,ERR_MISSING_ARGS:re,ERR_STREAM_DESTROYED:te,ERR_STREAM_PREMATURE_CLOSE:q},AbortError:V}=g(4370),{validateFunction:x,validateAbortSignal:B}=g(2120),{isIterable:D,isReadable:he,isReadableNodeStream:W,isNodeStream:Te,isTransformStream:de,isWebStream:we,isReadableStream:Ie,isReadableEnded:De}=g(5428),et=globalThis.AbortController||g(3982).AbortController;let Ye,Ce;function Ne(H,Fe,Ke){let fe=!1;return H.on("close",()=>{fe=!0}),{destroy:G=>{fe||(fe=!0,oe.destroyer(H,G||new te("pipe")))},cleanup:L(H,{readable:Fe,writable:Ke},G=>{fe=!G})}}function He(H){if(D(H))return H;if(W(H))return function me(H){return Se.apply(this,arguments)}(H);throw new le("val",["Readable","Iterable","AsyncIterable"],H)}function Se(){return(Se=b(function*(H){Ce||(Ce=g(8383)),yield*A(P(Ce.prototype[F].call(H)),k)})).apply(this,arguments)}function qe(H,Fe,Ke,fe){return lt.apply(this,arguments)}function lt(){return(lt=E(function*(H,Fe,Ke,{end:fe}){let ee,G=null;const R=_t=>{if(_t&&(ee=_t),G){const Wt=G;G=null,Wt()}},I=()=>new M((_t,Wt)=>{ee?Wt(ee):G=()=>{ee?Wt(ee):_t()}});Fe.on("drain",R);const ue=L(Fe,{readable:!1},R);try{Fe.writableNeedDrain&&(yield I());var Je,ge=!1,ze=!1;try{for(var kt,ot=P(H);ge=!(kt=yield ot.next()).done;ge=!1)Fe.write(kt.value)||(yield I())}catch(_t){ze=!0,Je=_t}finally{try{ge&&null!=ot.return&&(yield ot.return())}finally{if(ze)throw Je}}fe&&Fe.end(),yield I(),Ke()}catch(_t){Ke(ee!==_t?Y(ee,_t):_t)}finally{ue(),Fe.off("drain",R)}})).apply(this,arguments)}function We(H,Fe,Ke,fe){return _e.apply(this,arguments)}function _e(){return(_e=E(function*(H,Fe,Ke,{end:fe}){de(Fe)&&(Fe=Fe.writable);const ee=Fe.getWriter();try{var I,G=!1,R=!1;try{for(var ge,ue=P(H);G=!(ge=yield ue.next()).done;G=!1){const ze=ge.value;yield ee.ready,ee.write(ze).catch(()=>{})}}catch(ze){R=!0,I=ze}finally{try{G&&null!=ue.return&&(yield ue.return())}finally{if(R)throw I}}yield ee.ready,fe&&(yield ee.close()),Ke()}catch(ze){try{yield ee.abort(ze),Ke(ze)}catch(Je){Ke(Je)}}})).apply(this,arguments)}function O(H,Fe,Ke){if(1===H.length&&y(H[0])&&(H=H[0]),H.length<2)throw new re("streams");const fe=new et,ee=fe.signal,G=Ke?.signal,R=[];function I(){kt(new V)}let ue,ge;B(G,"options.signal"),G?.addEventListener("abort",I);const ze=[];let _t,Je=0;function ot(J){kt(J,0==--Je)}function kt(J,S){if(J&&(!ue||"ERR_STREAM_PREMATURE_CLOSE"===ue.code)&&(ue=J),ue||S){for(;ze.length;)ze.shift()(ue);G?.removeEventListener("abort",I),fe.abort(),S&&(ue||R.forEach(ce=>ce()),_.nextTick(Fe,ue,ge))}}for(let J=0;J<H.length;J++){const S=H[J],ce=J<H.length-1,Ge=J>0,Ze=ce||!1!==Ke?.end,ct=J===H.length-1;if(Te(S)){let Xt=function(cn){cn&&"AbortError"!==cn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==cn.code&&ot(cn)};if(Ze){const{destroy:cn,cleanup:Yn}=Ne(S,ce,Ge);ze.push(cn),he(S)&&ct&&R.push(Yn)}S.on("error",Xt),he(S)&&ct&&R.push(()=>{S.removeListener("error",Xt)})}if(0===J)if("function"==typeof S){if(_t=S({signal:ee}),!D(_t))throw new K("Iterable, AsyncIterable or Stream","source",_t)}else _t=D(S)||W(S)||de(S)?S:C.from(S);else if("function"==typeof S){var Wt;if(_t=de(_t)?He(null===(Wt=_t)||void 0===Wt?void 0:Wt.readable):He(_t),_t=S(_t,{signal:ee}),ce){if(!D(_t,!0))throw new K("AsyncIterable",`transform[${J-1}]`,_t)}else{var rn;Ye||(Ye=g(6973));const Xt=new Ye({objectMode:!0}),cn=null===(rn=_t)||void 0===rn?void 0:rn.then;if("function"==typeof cn)Je++,cn.call(_t,bn=>{ge=bn,null!=bn&&Xt.write(bn),Ze&&Xt.end(),_.nextTick(ot)},bn=>{Xt.destroy(bn),_.nextTick(ot,bn)});else if(D(_t,!0))Je++,qe(_t,Xt,ot,{end:Ze});else{if(!Ie(_t)&&!de(_t))throw new K("AsyncIterable or Promise","destination",_t);Je++,qe(_t.readable||_t,Xt,ot,{end:Ze})}_t=Xt;const{destroy:Yn,cleanup:Xn}=Ne(_t,!1,!0);ze.push(Yn),ct&&R.push(Xn)}}else if(Te(S)){if(W(_t)){Je+=2;const Xt=ae(_t,S,ot,{end:Ze});he(S)&&ct&&R.push(Xt)}else if(de(_t)||Ie(_t))Je++,qe(_t.readable||_t,S,ot,{end:Ze});else{if(!D(_t))throw new le("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_t);Je++,qe(_t,S,ot,{end:Ze})}_t=S}else if(we(S)){if(W(_t))Je++,We(He(_t),S,ot,{end:Ze});else if(Ie(_t)||D(_t))Je++,We(_t,S,ot,{end:Ze});else{if(!de(_t))throw new le("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_t);Je++,We(_t.readable,S,ot,{end:Ze})}_t=S}else _t=C.from(S)}return(null!=ee&&ee.aborted||null!=G&&G.aborted)&&_.nextTick(I),_t}function ae(H,Fe,Ke,{end:fe}){let ee=!1;if(Fe.on("close",()=>{ee||Ke(new q)}),H.pipe(Fe,{end:!1}),fe){let R=function(){ee=!0,Fe.end()};De(H)?_.nextTick(R):H.once("end",R)}else Ke();return L(H,{readable:!0,writable:!1},R=>{const I=H._readableState;R&&"ERR_STREAM_PREMATURE_CLOSE"===R.code&&I&&I.ended&&!I.errored&&!I.errorEmitted?H.once("end",Ke).once("error",Ke):Ke(R)}),L(Fe,{readable:!1,writable:!0},Ke)}ne.exports={pipelineImpl:O,pipeline:function z(...H){return O(H,j(function ke(H){return x(H[H.length-1],"streams[stream.length - 1]"),H.pop()}(H)))}}},8383:(ne,Z,g)=>{var E=g(6737).default,b=g(8186).default;const k=g(42),{ArrayPrototypeIndexOf:A,NumberIsInteger:P,NumberIsNaN:_,NumberParseInt:y,ObjectDefineProperties:M,ObjectKeys:F,ObjectSetPrototypeOf:L,Promise:j,SafeSet:oe,SymbolAsyncIterator:C,Symbol:Y}=g(6305);ne.exports=qe,qe.ReadableState=Se;const{EventEmitter:le}=g(2016),{Stream:K,prependListener:re}=g(900),{Buffer:te}=g(1657),{addAbortSignal:q}=g(9987),V=g(4618);let x=g(2656).debuglog("stream",S=>{x=S});const B=g(2960),D=g(5601),{getHighWaterMark:he,getDefaultHighWaterMark:W}=g(8782),{aggregateTwoErrors:Te,codes:{ERR_INVALID_ARG_TYPE:de,ERR_METHOD_NOT_IMPLEMENTED:we,ERR_OUT_OF_RANGE:Ie,ERR_STREAM_PUSH_AFTER_EOF:De,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:et}}=g(4370),{validateObject:Ye}=g(2120),Ce=Y("kPaused"),{StringDecoder:Ne}=g(2024),ke=g(55);L(qe.prototype,K.prototype),L(qe,K);const He=()=>{},{errorOrDestroy:me}=D;function Se(S,ce,Ge){"boolean"!=typeof Ge&&(Ge=ce instanceof g(5931)),this.objectMode=!(!S||!S.objectMode),Ge&&(this.objectMode=this.objectMode||!(!S||!S.readableObjectMode)),this.highWaterMark=S?he(this,S,"readableHighWaterMark",Ge):W(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Ce]=null,this.errorEmitted=!1,this.emitClose=!S||!1!==S.emitClose,this.autoDestroy=!S||!1!==S.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=S&&S.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,S&&S.encoding&&(this.decoder=new Ne(S.encoding),this.encoding=S.encoding)}function qe(S){if(!(this instanceof qe))return new qe(S);const ce=this instanceof g(5931);this._readableState=new Se(S,this,ce),S&&("function"==typeof S.read&&(this._read=S.read),"function"==typeof S.destroy&&(this._destroy=S.destroy),"function"==typeof S.construct&&(this._construct=S.construct),S.signal&&!ce&&q(S.signal,this)),K.call(this,S),D.construct(this,()=>{this._readableState.needReadable&&Ke(this,this._readableState)})}function lt(S,ce,Ge,Ze){x("readableAddChunk",ce);const ct=S._readableState;let Xt;if(ct.objectMode||("string"==typeof ce?ct.encoding!==(Ge=Ge||ct.defaultEncoding)&&(Ze&&ct.encoding?ce=te.from(ce,Ge).toString(ct.encoding):(ce=te.from(ce,Ge),Ge="")):ce instanceof te?Ge="":K._isUint8Array(ce)?(ce=K._uint8ArrayToBuffer(ce),Ge=""):null!=ce&&(Xt=new de("chunk",["string","Buffer","Uint8Array"],ce))),Xt)me(S,Xt);else if(null===ce)ct.reading=!1,function ae(S,ce){if(x("onEofChunk"),!ce.ended){if(ce.decoder){const Ge=ce.decoder.end();Ge&&Ge.length&&(ce.buffer.push(Ge),ce.length+=ce.objectMode?1:Ge.length)}ce.ended=!0,ce.sync?H(S):(ce.needReadable=!1,ce.emittedReadable=!0,Fe(S))}}(S,ct);else if(ct.objectMode||ce&&ce.length>0)if(Ze)if(ct.endEmitted)me(S,new et);else{if(ct.destroyed||ct.errored)return!1;We(S,ct,ce,!0)}else if(ct.ended)me(S,new De);else{if(ct.destroyed||ct.errored)return!1;ct.reading=!1,ct.decoder&&!Ge?(ce=ct.decoder.write(ce),ct.objectMode||0!==ce.length?We(S,ct,ce,!1):Ke(S,ct)):We(S,ct,ce,!1)}else Ze||(ct.reading=!1,Ke(S,ct));return!ct.ended&&(ct.length<ct.highWaterMark||0===ct.length)}function We(S,ce,Ge,Ze){ce.flowing&&0===ce.length&&!ce.sync&&S.listenerCount("data")>0?(ce.multiAwaitDrain?ce.awaitDrainWriters.clear():ce.awaitDrainWriters=null,ce.dataEmitted=!0,S.emit("data",Ge)):(ce.length+=ce.objectMode?1:Ge.length,Ze?ce.buffer.unshift(Ge):ce.buffer.push(Ge),ce.needReadable&&H(S)),Ke(S,ce)}function O(S,ce){return S<=0||0===ce.length&&ce.ended?0:ce.objectMode?1:_(S)?ce.flowing&&ce.length?ce.buffer.first().length:ce.length:S<=ce.length?S:ce.ended?ce.length:0}function H(S){const ce=S._readableState;x("emitReadable",ce.needReadable,ce.emittedReadable),ce.needReadable=!1,ce.emittedReadable||(x("emitReadable",ce.flowing),ce.emittedReadable=!0,k.nextTick(Fe,S))}function Fe(S){const ce=S._readableState;x("emitReadable_",ce.destroyed,ce.length,ce.ended),!ce.destroyed&&!ce.errored&&(ce.length||ce.ended)&&(S.emit("readable"),ce.emittedReadable=!1),ce.needReadable=!ce.flowing&&!ce.ended&&ce.length<=ce.highWaterMark,ge(S)}function Ke(S,ce){!ce.readingMore&&ce.constructed&&(ce.readingMore=!0,k.nextTick(fe,S,ce))}function fe(S,ce){for(;!ce.reading&&!ce.ended&&(ce.length<ce.highWaterMark||ce.flowing&&0===ce.length);){const Ge=ce.length;if(x("maybeReadMore read 0"),S.read(0),Ge===ce.length)break}ce.readingMore=!1}function G(S){const ce=S._readableState;ce.readableListening=S.listenerCount("readable")>0,ce.resumeScheduled&&!1===ce[Ce]?ce.flowing=!0:S.listenerCount("data")>0?S.resume():ce.readableListening||(ce.flowing=null)}function R(S){x("readable nexttick read 0"),S.read(0)}function ue(S,ce){x("resume",ce.reading),ce.reading||S.read(0),ce.resumeScheduled=!1,S.emit("resume"),ge(S),ce.flowing&&!ce.reading&&S.read(0)}function ge(S){const ce=S._readableState;for(x("flow",ce.flowing);ce.flowing&&null!==S.read(););}function ze(S,ce){"function"!=typeof S.read&&(S=qe.wrap(S,{objectMode:!0}));const Ge=function Je(S,ce){return ot.apply(this,arguments)}(S,ce);return Ge.stream=S,Ge}function ot(){return(ot=b(function*(S,ce){let ct,Ge=He;function Ze(cn){this===S?(Ge(),Ge=He):Ge=cn}S.on("readable",Ze);const Xt=V(S,{writable:!1},cn=>{ct=cn?Te(ct,cn):null,Ge(),Ge=He});try{for(;;){const cn=S.destroyed?null:S.read();if(null!==cn)yield cn;else{if(ct)throw ct;if(null===ct)return;yield E(new j(Ze))}}}catch(cn){throw ct=Te(ct,cn),ct}finally{!ct&&!1===ce?.destroyOnReturn||void 0!==ct&&!S._readableState.autoDestroy?(S.off("readable",Ze),Xt()):D.destroyer(S,null)}})).apply(this,arguments)}function kt(S,ce){if(0===ce.length)return null;let Ge;return ce.objectMode?Ge=ce.buffer.shift():!S||S>=ce.length?(Ge=ce.decoder?ce.buffer.join(""):1===ce.buffer.length?ce.buffer.first():ce.buffer.concat(ce.length),ce.buffer.clear()):Ge=ce.buffer.consume(S,ce.decoder),Ge}function _t(S){const ce=S._readableState;x("endReadable",ce.endEmitted),ce.endEmitted||(ce.ended=!0,k.nextTick(Wt,ce,S))}function Wt(S,ce){if(x("endReadableNT",S.endEmitted,S.length),!S.errored&&!S.closeEmitted&&!S.endEmitted&&0===S.length)if(S.endEmitted=!0,ce.emit("end"),ce.writable&&!1===ce.allowHalfOpen)k.nextTick(rn,ce);else if(S.autoDestroy){const Ge=ce._writableState;(!Ge||Ge.autoDestroy&&(Ge.finished||!1===Ge.writable))&&ce.destroy()}}function rn(S){S.writable&&!S.writableEnded&&!S.destroyed&&S.end()}let Re;function J(){return void 0===Re&&(Re={}),Re}qe.prototype.destroy=D.destroy,qe.prototype._undestroy=D.undestroy,qe.prototype._destroy=function(S,ce){ce(S)},qe.prototype[le.captureRejectionSymbol]=function(S){this.destroy(S)},qe.prototype.push=function(S,ce){return lt(this,S,ce,!1)},qe.prototype.unshift=function(S,ce){return lt(this,S,ce,!0)},qe.prototype.isPaused=function(){const S=this._readableState;return!0===S[Ce]||!1===S.flowing},qe.prototype.setEncoding=function(S){const ce=new Ne(S);this._readableState.decoder=ce,this._readableState.encoding=this._readableState.decoder.encoding;const Ge=this._readableState.buffer;let Ze="";for(const ct of Ge)Ze+=ce.write(ct);return Ge.clear(),""!==Ze&&Ge.push(Ze),this._readableState.length=Ze.length,this},qe.prototype.read=function(S){x("read",S),void 0===S?S=NaN:P(S)||(S=y(S,10));const ce=this._readableState,Ge=S;if(S>ce.highWaterMark&&(ce.highWaterMark=function z(S){if(S>1073741824)throw new Ie("size","<= 1GiB",S);return S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,++S}(S)),0!==S&&(ce.emittedReadable=!1),0===S&&ce.needReadable&&((0!==ce.highWaterMark?ce.length>=ce.highWaterMark:ce.length>0)||ce.ended))return x("read: emitReadable",ce.length,ce.ended),0===ce.length&&ce.ended?_t(this):H(this),null;if(0===(S=O(S,ce))&&ce.ended)return 0===ce.length&&_t(this),null;let ct,Ze=ce.needReadable;if(x("need readable",Ze),(0===ce.length||ce.length-S<ce.highWaterMark)&&(Ze=!0,x("length less than watermark",Ze)),ce.ended||ce.reading||ce.destroyed||ce.errored||!ce.constructed)Ze=!1,x("reading, ended or constructing",Ze);else if(Ze){x("do read"),ce.reading=!0,ce.sync=!0,0===ce.length&&(ce.needReadable=!0);try{this._read(ce.highWaterMark)}catch(Xt){me(this,Xt)}ce.sync=!1,ce.reading||(S=O(Ge,ce))}return ct=S>0?kt(S,ce):null,null===ct?(ce.needReadable=ce.length<=ce.highWaterMark,S=0):(ce.length-=S,ce.multiAwaitDrain?ce.awaitDrainWriters.clear():ce.awaitDrainWriters=null),0===ce.length&&(ce.ended||(ce.needReadable=!0),Ge!==S&&ce.ended&&_t(this)),null!==ct&&!ce.errorEmitted&&!ce.closeEmitted&&(ce.dataEmitted=!0,this.emit("data",ct)),ct},qe.prototype._read=function(S){throw new we("_read()")},qe.prototype.pipe=function(S,ce){const Ge=this,Ze=this._readableState;1===Ze.pipes.length&&(Ze.multiAwaitDrain||(Ze.multiAwaitDrain=!0,Ze.awaitDrainWriters=new oe(Ze.awaitDrainWriters?[Ze.awaitDrainWriters]:[]))),Ze.pipes.push(S),x("pipe count=%d opts=%j",Ze.pipes.length,ce);const Xt=ce&&!1===ce.end||S===k.stdout||S===k.stderr?Ko:Yn;function Yn(){x("onend"),S.end()}Ze.endEmitted?k.nextTick(Xt):Ge.once("end",Xt),S.on("unpipe",function cn(Fs,Ss){x("onunpipe"),Fs===Ge&&Ss&&!1===Ss.hasUnpiped&&(Ss.hasUnpiped=!0,function As(){x("cleanup"),S.removeListener("close",ts),S.removeListener("finish",So),Xn&&S.removeListener("drain",Xn),S.removeListener("error",$i),S.removeListener("unpipe",cn),Ge.removeListener("end",Yn),Ge.removeListener("end",Ko),Ge.removeListener("data",Ns),bn=!0,Xn&&Ze.awaitDrainWriters&&(!S._writableState||S._writableState.needDrain)&&Xn()}())});let Xn,bn=!1;function Yo(){bn||(1===Ze.pipes.length&&Ze.pipes[0]===S?(x("false write response, pause",0),Ze.awaitDrainWriters=S,Ze.multiAwaitDrain=!1):Ze.pipes.length>1&&Ze.pipes.includes(S)&&(x("false write response, pause",Ze.awaitDrainWriters.size),Ze.awaitDrainWriters.add(S)),Ge.pause()),Xn||(Xn=function ee(S,ce){return function(){const Ze=S._readableState;Ze.awaitDrainWriters===ce?(x("pipeOnDrain",1),Ze.awaitDrainWriters=null):Ze.multiAwaitDrain&&(x("pipeOnDrain",Ze.awaitDrainWriters.size),Ze.awaitDrainWriters.delete(ce)),(!Ze.awaitDrainWriters||0===Ze.awaitDrainWriters.size)&&S.listenerCount("data")&&S.resume()}}(Ge,S),S.on("drain",Xn))}function Ns(Fs){x("ondata");const Ss=S.write(Fs);x("dest.write",Ss),!1===Ss&&Yo()}function $i(Fs){if(x("onerror",Fs),Ko(),S.removeListener("error",$i),0===S.listenerCount("error")){const Ss=S._writableState||S._readableState;Ss&&!Ss.errorEmitted?me(S,Fs):S.emit("error",Fs)}}function ts(){S.removeListener("finish",So),Ko()}function So(){x("onfinish"),S.removeListener("close",ts),Ko()}function Ko(){x("unpipe"),Ge.unpipe(S)}return Ge.on("data",Ns),re(S,"error",$i),S.once("close",ts),S.once("finish",So),S.emit("pipe",Ge),!0===S.writableNeedDrain?Ze.flowing&&Yo():Ze.flowing||(x("pipe resume"),Ge.resume()),S},qe.prototype.unpipe=function(S){const ce=this._readableState;if(0===ce.pipes.length)return this;if(!S){const ct=ce.pipes;ce.pipes=[],this.pause();for(let Xt=0;Xt<ct.length;Xt++)ct[Xt].emit("unpipe",this,{hasUnpiped:!1});return this}const Ze=A(ce.pipes,S);return-1===Ze||(ce.pipes.splice(Ze,1),0===ce.pipes.length&&this.pause(),S.emit("unpipe",this,{hasUnpiped:!1})),this},qe.prototype.addListener=qe.prototype.on=function(S,ce){const Ge=K.prototype.on.call(this,S,ce),Ze=this._readableState;return"data"===S?(Ze.readableListening=this.listenerCount("readable")>0,!1!==Ze.flowing&&this.resume()):"readable"===S&&!Ze.endEmitted&&!Ze.readableListening&&(Ze.readableListening=Ze.needReadable=!0,Ze.flowing=!1,Ze.emittedReadable=!1,x("on readable",Ze.length,Ze.reading),Ze.length?H(this):Ze.reading||k.nextTick(R,this)),Ge},qe.prototype.off=qe.prototype.removeListener=function(S,ce){const Ge=K.prototype.removeListener.call(this,S,ce);return"readable"===S&&k.nextTick(G,this),Ge},qe.prototype.removeAllListeners=function(S){const ce=K.prototype.removeAllListeners.apply(this,arguments);return("readable"===S||void 0===S)&&k.nextTick(G,this),ce},qe.prototype.resume=function(){const S=this._readableState;return S.flowing||(x("resume"),S.flowing=!S.readableListening,function I(S,ce){ce.resumeScheduled||(ce.resumeScheduled=!0,k.nextTick(ue,S,ce))}(this,S)),S[Ce]=!1,this},qe.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ce]=!0,this},qe.prototype.wrap=function(S){let ce=!1;S.on("data",Ze=>{!this.push(Ze)&&S.pause&&(ce=!0,S.pause())}),S.on("end",()=>{this.push(null)}),S.on("error",Ze=>{me(this,Ze)}),S.on("close",()=>{this.destroy()}),S.on("destroy",()=>{this.destroy()}),this._read=()=>{ce&&S.resume&&(ce=!1,S.resume())};const Ge=F(S);for(let Ze=1;Ze<Ge.length;Ze++){const ct=Ge[Ze];void 0===this[ct]&&"function"==typeof S[ct]&&(this[ct]=S[ct].bind(S))}return this},qe.prototype[C]=function(){return ze(this)},qe.prototype.iterator=function(S){return void 0!==S&&Ye(S,"options"),ze(this,S)},M(qe.prototype,{readable:{__proto__:null,get(){const S=this._readableState;return!(!S||!1===S.readable||S.destroyed||S.errorEmitted||S.endEmitted)},set(S){this._readableState&&(this._readableState.readable=!!S)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(S){this._readableState&&(this._readableState.flowing=S)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(S){this._readableState&&(this._readableState.destroyed=S)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),M(Se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Ce]},set(S){this[Ce]=!!S}}}),qe._fromList=kt,qe.from=function(S,ce){return ke(qe,S,ce)},qe.fromWeb=function(S,ce){return J().newStreamReadableFromReadableStream(S,ce)},qe.toWeb=function(S,ce){return J().newReadableStreamFromStreamReadable(S,ce)},qe.wrap=function(S,ce){var Ge,Ze;return new qe({objectMode:null===(Ge=null!==(Ze=S.readableObjectMode)&&void 0!==Ze?Ze:S.objectMode)||void 0===Ge||Ge,...ce,destroy(ct,Xt){D.destroyer(S,ct),Xt(ct)}}).wrap(S)}},8782:(ne,Z,g)=>{"use strict";const{MathFloor:E,NumberIsInteger:b}=g(6305),{ERR_INVALID_ARG_VALUE:k}=g(4370).codes;function P(y){return y?16:16384}ne.exports={getHighWaterMark:function _(y,M,F,L){const j=function A(y,M,F){return null!=y.highWaterMark?y.highWaterMark:M?y[F]:null}(M,L,F);if(null!=j){if(!b(j)||j<0)throw new k(L?`options.${F}`:"options.highWaterMark",j);return E(j)}return P(y.objectMode)},getDefaultHighWaterMark:P}},123:(ne,Z,g)=>{"use strict";const{ObjectSetPrototypeOf:E,Symbol:b}=g(6305);ne.exports=y;const{ERR_METHOD_NOT_IMPLEMENTED:k}=g(4370).codes,A=g(5931),{getHighWaterMark:P}=g(8782);E(y.prototype,A.prototype),E(y,A);const _=b("kCallback");function y(L){if(!(this instanceof y))return new y(L);const j=L?P(this,L,"readableHighWaterMark",!0):null;0===j&&(L={...L,highWaterMark:null,readableHighWaterMark:j,writableHighWaterMark:L.writableHighWaterMark||0}),A.call(this,L),this._readableState.sync=!1,this[_]=null,L&&("function"==typeof L.transform&&(this._transform=L.transform),"function"==typeof L.flush&&(this._flush=L.flush)),this.on("prefinish",F)}function M(L){"function"!=typeof this._flush||this.destroyed?(this.push(null),L&&L()):this._flush((j,oe)=>{j?L?L(j):this.destroy(j):(null!=oe&&this.push(oe),this.push(null),L&&L())})}function F(){this._final!==M&&M.call(this)}y.prototype._final=M,y.prototype._transform=function(L,j,oe){throw new k("_transform()")},y.prototype._write=function(L,j,oe){const C=this._readableState,Y=this._writableState,le=C.length;this._transform(L,j,(K,re)=>{K?oe(K):(null!=re&&this.push(re),Y.ended||le===C.length||C.length<C.highWaterMark?oe():this[_]=oe)})},y.prototype._read=function(){if(this[_]){const L=this[_];this[_]=null,L()}}},5428:(ne,Z,g)=>{"use strict";const{Symbol:E,SymbolAsyncIterator:b,SymbolIterator:k,SymbolFor:A}=g(6305),P=E("kDestroyed"),_=E("kIsErrored"),y=E("kIsReadable"),M=E("kIsDisturbed"),F=A("nodejs.webstream.isClosedPromise"),L=A("nodejs.webstream.controllerErrorFunction");function j(me,Se=!1){var qe;return!(!me||"function"!=typeof me.pipe||"function"!=typeof me.on||Se&&("function"!=typeof me.pause||"function"!=typeof me.resume)||me._writableState&&!1===(null===(qe=me._readableState)||void 0===qe?void 0:qe.readable)||me._writableState&&!me._readableState)}function oe(me){var Se;return!(!me||"function"!=typeof me.write||"function"!=typeof me.on||me._readableState&&!1===(null===(Se=me._writableState)||void 0===Se?void 0:Se.writable))}function Y(me){return me&&(me._readableState||me._writableState||"function"==typeof me.write&&"function"==typeof me.on||"function"==typeof me.pipe&&"function"==typeof me.on)}function le(me){return!(!me||Y(me)||"function"!=typeof me.pipeThrough||"function"!=typeof me.getReader||"function"!=typeof me.cancel)}function K(me){return!(!me||Y(me)||"function"!=typeof me.getWriter||"function"!=typeof me.abort)}function re(me){return!(!me||Y(me)||"object"!=typeof me.readable||"object"!=typeof me.writable)}function V(me){if(!Y(me))return null;const lt=me._writableState||me._readableState;return!!(me.destroyed||me[P]||null!=lt&&lt.destroyed)}function x(me){if(!oe(me))return null;if(!0===me.writableEnded)return!0;const Se=me._writableState;return(null==Se||!Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)}function he(me,Se){if(!j(me))return null;const qe=me._readableState;return(null==qe||!qe.errored)&&("boolean"!=typeof qe?.endEmitted?null:!!(qe.endEmitted||!1===Se&&!0===qe.ended&&0===qe.length))}function W(me){return me&&null!=me[y]?me[y]:"boolean"!=typeof me?.readable?null:!V(me)&&j(me)&&me.readable&&!he(me)}function Te(me){return"boolean"!=typeof me?.writable?null:!V(me)&&oe(me)&&me.writable&&!x(me)}function et(me){return"boolean"==typeof me._closed&&"boolean"==typeof me._defaultKeepAlive&&"boolean"==typeof me._removedConnection&&"boolean"==typeof me._removedContLen}function Ye(me){return"boolean"==typeof me._sent100&&et(me)}ne.exports={kDestroyed:P,isDisturbed:function ke(me){var Se;return!(!me||!(null!==(Se=me[M])&&void 0!==Se?Se:me.readableDidRead||me.readableAborted))},kIsDisturbed:M,isErrored:function He(me){var Se,qe,lt,We,_e,z,O,ae,H,Fe;return!(!me||!(null!==(Se=null!==(qe=null!==(lt=null!==(We=null!==(_e=null!==(z=me[_])&&void 0!==z?z:me.readableErrored)&&void 0!==_e?_e:me.writableErrored)&&void 0!==We?We:null===(O=me._readableState)||void 0===O?void 0:O.errorEmitted)&&void 0!==lt?lt:null===(ae=me._writableState)||void 0===ae?void 0:ae.errorEmitted)&&void 0!==qe?qe:null===(H=me._readableState)||void 0===H?void 0:H.errored)&&void 0!==Se?Se:null!==(Fe=me._writableState)&&void 0!==Fe&&Fe.errored))},kIsErrored:_,isReadable:W,kIsReadable:y,kIsClosedPromise:F,kControllerErrorFunction:L,isClosed:function De(me){if(!Y(me))return null;if("boolean"==typeof me.closed)return me.closed;const Se=me._writableState,qe=me._readableState;return"boolean"==typeof Se?.closed||"boolean"==typeof qe?.closed?Se?.closed||qe?.closed:"boolean"==typeof me._closed&&et(me)?me._closed:null},isDestroyed:V,isDuplexNodeStream:function C(me){return!(!me||"function"!=typeof me.pipe||!me._readableState||"function"!=typeof me.on||"function"!=typeof me.write)},isFinished:function de(me,Se){return Y(me)?!!V(me)||!(!1!==Se?.readable&&W(me)||!1!==Se?.writable&&Te(me)):null},isIterable:function q(me,Se){return null!=me&&(!0===Se?"function"==typeof me[b]:!1===Se?"function"==typeof me[k]:"function"==typeof me[b]||"function"==typeof me[k])},isReadableNodeStream:j,isReadableStream:le,isReadableEnded:function D(me){if(!j(me))return null;if(!0===me.readableEnded)return!0;const Se=me._readableState;return!(!Se||Se.errored)&&("boolean"!=typeof Se?.ended?null:Se.ended)},isReadableFinished:he,isReadableErrored:function Ie(me){var Se,qe;return Y(me)?me.readableErrored?me.readableErrored:null!==(Se=null===(qe=me._readableState)||void 0===qe?void 0:qe.errored)&&void 0!==Se?Se:null:null},isNodeStream:Y,isWebStream:function te(me){return le(me)||K(me)||re(me)},isWritable:Te,isWritableNodeStream:oe,isWritableStream:K,isWritableEnded:x,isWritableFinished:function B(me,Se){if(!oe(me))return null;if(!0===me.writableFinished)return!0;const qe=me._writableState;return(null==qe||!qe.errored)&&("boolean"!=typeof qe?.finished?null:!!(qe.finished||!1===Se&&!0===qe.ended&&0===qe.length))},isWritableErrored:function we(me){var Se,qe;return Y(me)?me.writableErrored?me.writableErrored:null!==(Se=null===(qe=me._writableState)||void 0===qe?void 0:qe.errored)&&void 0!==Se?Se:null:null},isServerRequest:function Ce(me){var Se;return"boolean"==typeof me._consuming&&"boolean"==typeof me._dumped&&void 0===(null===(Se=me.req)||void 0===Se?void 0:Se.upgradeOrConnect)},isServerResponse:Ye,willEmitClose:function Ne(me){if(!Y(me))return null;const lt=me._writableState||me._readableState;return!lt&&Ye(me)||!!(lt&&lt.autoDestroy&&lt.emitClose&&!1===lt.closed)},isTransformStream:re}},9764:(ne,Z,g)=>{const E=g(42),{ArrayPrototypeSlice:b,Error:k,FunctionPrototypeSymbolHasInstance:A,ObjectDefineProperty:P,ObjectDefineProperties:_,ObjectSetPrototypeOf:y,StringPrototypeToLowerCase:M,Symbol:F,SymbolHasInstance:L}=g(6305);ne.exports=Ye,Ye.WritableState=De;const{EventEmitter:j}=g(2016),oe=g(900).Stream,{Buffer:C}=g(1657),Y=g(5601),{addAbortSignal:le}=g(9987),{getHighWaterMark:K,getDefaultHighWaterMark:re}=g(8782),{ERR_INVALID_ARG_TYPE:te,ERR_METHOD_NOT_IMPLEMENTED:q,ERR_MULTIPLE_CALLBACK:V,ERR_STREAM_CANNOT_PIPE:x,ERR_STREAM_DESTROYED:B,ERR_STREAM_ALREADY_FINISHED:D,ERR_STREAM_NULL_VALUES:he,ERR_STREAM_WRITE_AFTER_END:W,ERR_UNKNOWN_ENCODING:Te}=g(4370).codes,{errorOrDestroy:de}=Y;function we(){}y(Ye.prototype,oe.prototype),y(Ye,oe);const Ie=F("kOnFinished");function De(ee,G,R){"boolean"!=typeof R&&(R=G instanceof g(5931)),this.objectMode=!(!ee||!ee.objectMode),R&&(this.objectMode=this.objectMode||!(!ee||!ee.writableObjectMode)),this.highWaterMark=ee?K(this,ee,"writableHighWaterMark",R):re(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(ee&&!1===ee.decodeStrings),this.defaultEncoding=ee&&ee.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=me.bind(void 0,G),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,et(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ee||!1!==ee.emitClose,this.autoDestroy=!ee||!1!==ee.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ie]=[]}function et(ee){ee.buffered=[],ee.bufferedIndex=0,ee.allBuffers=!0,ee.allNoop=!0}function Ye(ee){const G=this instanceof g(5931);if(!G&&!A(Ye,this))return new Ye(ee);this._writableState=new De(ee,this,G),ee&&("function"==typeof ee.write&&(this._write=ee.write),"function"==typeof ee.writev&&(this._writev=ee.writev),"function"==typeof ee.destroy&&(this._destroy=ee.destroy),"function"==typeof ee.final&&(this._final=ee.final),"function"==typeof ee.construct&&(this._construct=ee.construct),ee.signal&&le(ee.signal,this)),oe.call(this,ee),Y.construct(this,()=>{const R=this._writableState;R.writing||We(this,R),ae(this,R)})}function Ce(ee,G,R,I){const ue=ee._writableState;if("function"==typeof R)I=R,R=ue.defaultEncoding;else{if(R){if("buffer"!==R&&!C.isEncoding(R))throw new Te(R)}else R=ue.defaultEncoding;"function"!=typeof I&&(I=we)}if(null===G)throw new he;if(!ue.objectMode)if("string"==typeof G)!1!==ue.decodeStrings&&(G=C.from(G,R),R="buffer");else if(G instanceof C)R="buffer";else{if(!oe._isUint8Array(G))throw new te("chunk",["string","Buffer","Uint8Array"],G);G=oe._uint8ArrayToBuffer(G),R="buffer"}let ge;return ue.ending?ge=new W:ue.destroyed&&(ge=new B("write")),ge?(E.nextTick(I,ge),de(ee,ge,!0),ge):(ue.pendingcb++,function Ne(ee,G,R,I,ue){const ge=G.objectMode?1:R.length;G.length+=ge;const ze=G.length<G.highWaterMark;return ze||(G.needDrain=!0),G.writing||G.corked||G.errored||!G.constructed?(G.buffered.push({chunk:R,encoding:I,callback:ue}),G.allBuffers&&"buffer"!==I&&(G.allBuffers=!1),G.allNoop&&ue!==we&&(G.allNoop=!1)):(G.writelen=ge,G.writecb=ue,G.writing=!0,G.sync=!0,ee._write(R,I,G.onwrite),G.sync=!1),ze&&!G.errored&&!G.destroyed}(ee,ue,G,R,I))}function ke(ee,G,R,I,ue,ge,ze){G.writelen=I,G.writecb=ze,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new B("write")):R?ee._writev(ue,G.onwrite):ee._write(ue,ge,G.onwrite),G.sync=!1}function He(ee,G,R,I){--G.pendingcb,I(R),lt(G),de(ee,R)}function me(ee,G){const R=ee._writableState,I=R.sync,ue=R.writecb;"function"==typeof ue?(R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0,G?(R.errored||(R.errored=G),ee._readableState&&!ee._readableState.errored&&(ee._readableState.errored=G),I?E.nextTick(He,ee,R,G,ue):He(ee,R,G,ue)):(R.buffered.length>R.bufferedIndex&&We(ee,R),I?null!==R.afterWriteTickInfo&&R.afterWriteTickInfo.cb===ue?R.afterWriteTickInfo.count++:(R.afterWriteTickInfo={count:1,cb:ue,stream:ee,state:R},E.nextTick(Se,R.afterWriteTickInfo)):qe(ee,R,1,ue))):de(ee,new V)}function Se({stream:ee,state:G,count:R,cb:I}){return G.afterWriteTickInfo=null,qe(ee,G,R,I)}function qe(ee,G,R,I){for(!G.ending&&!ee.destroyed&&0===G.length&&G.needDrain&&(G.needDrain=!1,ee.emit("drain"));R-- >0;)G.pendingcb--,I();G.destroyed&&lt(G),ae(ee,G)}function lt(ee){if(ee.writing)return;for(let ue=ee.bufferedIndex;ue<ee.buffered.length;++ue){var G;const{chunk:ge,callback:ze}=ee.buffered[ue];ee.length-=ee.objectMode?1:ge.length,ze(null!==(G=ee.errored)&&void 0!==G?G:new B("write"))}const R=ee[Ie].splice(0);for(let ue=0;ue<R.length;ue++){var I;R[ue](null!==(I=ee.errored)&&void 0!==I?I:new B("end"))}et(ee)}function We(ee,G){if(G.corked||G.bufferProcessing||G.destroyed||!G.constructed)return;const{buffered:R,bufferedIndex:I,objectMode:ue}=G,ge=R.length-I;if(!ge)return;let ze=I;if(G.bufferProcessing=!0,ge>1&&ee._writev){G.pendingcb-=ge-1;const Je=G.allNoop?we:kt=>{for(let _t=ze;_t<R.length;++_t)R[_t].callback(kt)},ot=G.allNoop&&0===ze?R:b(R,ze);ot.allBuffers=G.allBuffers,ke(ee,G,!0,G.length,ot,"",Je),et(G)}else{do{const{chunk:Je,encoding:ot,callback:kt}=R[ze];R[ze++]=null,ke(ee,G,!1,ue?1:Je.length,Je,ot,kt)}while(ze<R.length&&!G.writing);ze===R.length?et(G):ze>256?(R.splice(0,ze),G.bufferedIndex=0):G.bufferedIndex=ze}G.bufferProcessing=!1}function _e(ee){return ee.ending&&!ee.destroyed&&ee.constructed&&0===ee.length&&!ee.errored&&0===ee.buffered.length&&!ee.finished&&!ee.writing&&!ee.errorEmitted&&!ee.closeEmitted}function ae(ee,G,R){_e(G)&&(function O(ee,G){!G.prefinished&&!G.finalCalled&&("function"!=typeof ee._final||G.destroyed?(G.prefinished=!0,ee.emit("prefinish")):(G.finalCalled=!0,function z(ee,G){let R=!1;function I(ue){if(R)de(ee,ue??V());else if(R=!0,G.pendingcb--,ue){const ge=G[Ie].splice(0);for(let ze=0;ze<ge.length;ze++)ge[ze](ue);de(ee,ue,G.sync)}else _e(G)&&(G.prefinished=!0,ee.emit("prefinish"),G.pendingcb++,E.nextTick(H,ee,G))}G.sync=!0,G.pendingcb++;try{ee._final(I)}catch(ue){I(ue)}G.sync=!1}(ee,G)))}(ee,G),0===G.pendingcb&&(R?(G.pendingcb++,E.nextTick((I,ue)=>{_e(ue)?H(I,ue):ue.pendingcb--},ee,G)):_e(G)&&(G.pendingcb++,H(ee,G))))}function H(ee,G){G.pendingcb--,G.finished=!0;const R=G[Ie].splice(0);for(let I=0;I<R.length;I++)R[I]();if(ee.emit("finish"),G.autoDestroy){const I=ee._readableState;(!I||I.autoDestroy&&(I.endEmitted||!1===I.readable))&&ee.destroy()}}De.prototype.getBuffer=function(){return b(this.buffered,this.bufferedIndex)},P(De.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),P(Ye,L,{__proto__:null,value:function(ee){return!!A(this,ee)||this===Ye&&ee&&ee._writableState instanceof De}}),Ye.prototype.pipe=function(){de(this,new x)},Ye.prototype.write=function(ee,G,R){return!0===Ce(this,ee,G,R)},Ye.prototype.cork=function(){this._writableState.corked++},Ye.prototype.uncork=function(){const ee=this._writableState;ee.corked&&(ee.corked--,ee.writing||We(this,ee))},Ye.prototype.setDefaultEncoding=function(G){if("string"==typeof G&&(G=M(G)),!C.isEncoding(G))throw new Te(G);return this._writableState.defaultEncoding=G,this},Ye.prototype._write=function(ee,G,R){if(!this._writev)throw new q("_write()");this._writev([{chunk:ee,encoding:G}],R)},Ye.prototype._writev=null,Ye.prototype.end=function(ee,G,R){const I=this._writableState;let ue;if("function"==typeof ee?(R=ee,ee=null,G=null):"function"==typeof G&&(R=G,G=null),null!=ee){const ge=Ce(this,ee,G);ge instanceof k&&(ue=ge)}return I.corked&&(I.corked=1,this.uncork()),ue||(I.errored||I.ending?I.finished?ue=new D("end"):I.destroyed&&(ue=new B("end")):(I.ending=!0,ae(this,I,!0),I.ended=!0)),"function"==typeof R&&(ue||I.finished?E.nextTick(R,ue):I[Ie].push(R)),this},_(Ye.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(ee){this._writableState&&(this._writableState.destroyed=ee)}},writable:{__proto__:null,get(){const ee=this._writableState;return!(!ee||!1===ee.writable||ee.destroyed||ee.errored||ee.ending||ee.ended)},set(ee){this._writableState&&(this._writableState.writable=!!ee)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const ee=this._writableState;return!!ee&&!ee.destroyed&&!ee.ending&&ee.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Fe=Y.destroy;let Ke;function fe(){return void 0===Ke&&(Ke={}),Ke}Ye.prototype.destroy=function(ee,G){const R=this._writableState;return!R.destroyed&&(R.bufferedIndex<R.buffered.length||R[Ie].length)&&E.nextTick(lt,R),Fe.call(this,ee,G),this},Ye.prototype._undestroy=Y.undestroy,Ye.prototype._destroy=function(ee,G){G(ee)},Ye.prototype[j.captureRejectionSymbol]=function(ee){this.destroy(ee)},Ye.fromWeb=function(ee,G){return fe().newStreamWritableFromWritableStream(ee,G)},Ye.toWeb=function(ee){return fe().newWritableStreamFromStreamWritable(ee)}},2120:(ne,Z,g)=>{"use strict";const{ArrayIsArray:E,ArrayPrototypeIncludes:b,ArrayPrototypeJoin:k,ArrayPrototypeMap:A,NumberIsInteger:P,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:y,NumberMIN_SAFE_INTEGER:M,NumberParseInt:F,ObjectPrototypeHasOwnProperty:L,RegExpPrototypeExec:j,String:oe,StringPrototypeToUpperCase:C,StringPrototypeTrim:Y}=g(6305),{hideStackFrames:le,codes:{ERR_SOCKET_BAD_PORT:K,ERR_INVALID_ARG_TYPE:re,ERR_INVALID_ARG_VALUE:te,ERR_OUT_OF_RANGE:q,ERR_UNKNOWN_SIGNAL:V}}=g(4370),{normalizeEncoding:x}=g(2656),{isAsyncFunction:B,isArrayBufferView:D}=g(2656).types,he={},de=/^[0-7]+$/,De=le((ge,ze,Je=M,ot=y)=>{if("number"!=typeof ge)throw new re(ze,"number",ge);if(!P(ge))throw new q(ze,"an integer",ge);if(ge<Je||ge>ot)throw new q(ze,`>= ${Je} && <= ${ot}`,ge)}),et=le((ge,ze,Je=-2147483648,ot=2147483647)=>{if("number"!=typeof ge)throw new re(ze,"number",ge);if(!P(ge))throw new q(ze,"an integer",ge);if(ge<Je||ge>ot)throw new q(ze,`>= ${Je} && <= ${ot}`,ge)}),Ye=le((ge,ze,Je=!1)=>{if("number"!=typeof ge)throw new re(ze,"number",ge);if(!P(ge))throw new q(ze,"an integer",ge);const ot=Je?1:0,kt=4294967295;if(ge<ot||ge>kt)throw new q(ze,`>= ${ot} && <= ${kt}`,ge)});function Ce(ge,ze){if("string"!=typeof ge)throw new re(ze,"string",ge)}const ke=le((ge,ze,Je)=>{if(!b(Je,ge)){const kt="must be one of: "+k(A(Je,_t=>"string"==typeof _t?`'${_t}'`:oe(_t)),", ");throw new te(ze,ge,kt)}});function He(ge,ze){if("boolean"!=typeof ge)throw new re(ze,"boolean",ge)}function me(ge,ze,Je){return null!=ge&&L(ge,ze)?ge[ze]:Je}const Se=le((ge,ze,Je=null)=>{const ot=me(Je,"allowArray",!1),kt=me(Je,"allowFunction",!1);if(!me(Je,"nullable",!1)&&null===ge||!ot&&E(ge)||"object"!=typeof ge&&(!kt||"function"!=typeof ge))throw new re(ze,"Object",ge)}),qe=le((ge,ze)=>{if(null!=ge&&"object"!=typeof ge&&"function"!=typeof ge)throw new re(ze,"a dictionary",ge)}),lt=le((ge,ze,Je=0)=>{if(!E(ge))throw new re(ze,"Array",ge);if(ge.length<Je)throw new te(ze,ge,`must be longer than ${Je}`)}),O=le((ge,ze="buffer")=>{if(!D(ge))throw new re(ze,["Buffer","TypedArray","DataView"],ge)}),Fe=le((ge,ze)=>{if(void 0!==ge&&(null===ge||"object"!=typeof ge||!("aborted"in ge)))throw new re(ze,"AbortSignal",ge)}),Ke=le((ge,ze)=>{if("function"!=typeof ge)throw new re(ze,"Function",ge)}),fe=le((ge,ze)=>{if("function"!=typeof ge||B(ge))throw new re(ze,"Function",ge)}),ee=le((ge,ze)=>{if(void 0!==ge)throw new re(ze,"undefined",ge)}),R=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function I(ge,ze){if(typeof ge>"u"||!j(R,ge))throw new te(ze,ge,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}ne.exports={isInt32:function W(ge){return ge===(0|ge)},isUint32:function Te(ge){return ge===ge>>>0},parseFileMode:function Ie(ge,ze,Je){if(typeof ge>"u"&&(ge=Je),"string"==typeof ge){if(null===j(de,ge))throw new te(ze,ge,"must be a 32-bit unsigned integer or an octal string");ge=F(ge,8)}return Ye(ge,ze),ge},validateArray:lt,validateStringArray:function We(ge,ze){lt(ge,ze);for(let Je=0;Je<ge.length;Je++)Ce(ge[Je],`${ze}[${Je}]`)},validateBooleanArray:function _e(ge,ze){lt(ge,ze);for(let Je=0;Je<ge.length;Je++)He(ge[Je],`${ze}[${Je}]`)},validateBoolean:He,validateBuffer:O,validateDictionary:qe,validateEncoding:function ae(ge,ze){const Je=x(ze),ot=ge.length;if("hex"===Je&&ot%2!=0)throw new te("encoding",ze,`is invalid for data of length ${ot}`)},validateFunction:Ke,validateInt32:et,validateInteger:De,validateNumber:function Ne(ge,ze,Je=void 0,ot){if("number"!=typeof ge)throw new re(ze,"number",ge);if(null!=Je&&ge<Je||null!=ot&&ge>ot||(null!=Je||null!=ot)&&_(ge))throw new q(ze,`${null!=Je?`>= ${Je}`:""}${null!=Je&&null!=ot?" && ":""}${null!=ot?`<= ${ot}`:""}`,ge)},validateObject:Se,validateOneOf:ke,validatePlainFunction:fe,validatePort:function H(ge,ze="Port",Je=!0){if("number"!=typeof ge&&"string"!=typeof ge||"string"==typeof ge&&0===Y(ge).length||+ge!=+ge>>>0||ge>65535||0===ge&&!Je)throw new K(ze,ge,Je);return 0|ge},validateSignalName:function z(ge,ze="signal"){if(Ce(ge,ze),void 0===he[ge])throw void 0!==he[C(ge)]?new V(ge+" (signals must use all capital letters)"):new V(ge)},validateString:Ce,validateUint32:Ye,validateUndefined:ee,validateUnion:function G(ge,ze,Je){if(!b(Je,ge))throw new re(ze,`('${k(Je,"|")}')`,ge)},validateAbortSignal:Fe,validateLinkHeaderValue:function ue(ge){if("string"==typeof ge)return I(ge,"hints"),ge;if(E(ge)){const ze=ge.length;let Je="";if(0===ze)return Je;for(let ot=0;ot<ze;ot++){const kt=ge[ot];I(kt,"hints"),Je+=kt,ot!==ze-1&&(Je+=", ")}return Je}throw new te("hints",ge,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(ne,Z,g)=>{"use strict";const E=g(8110),b=g(16),k=E.Readable.destroy;ne.exports=E.Readable,ne.exports._uint8ArrayToBuffer=E._uint8ArrayToBuffer,ne.exports._isUint8Array=E._isUint8Array,ne.exports.isDisturbed=E.isDisturbed,ne.exports.isErrored=E.isErrored,ne.exports.isReadable=E.isReadable,ne.exports.Readable=E.Readable,ne.exports.Writable=E.Writable,ne.exports.Duplex=E.Duplex,ne.exports.Transform=E.Transform,ne.exports.PassThrough=E.PassThrough,ne.exports.addAbortSignal=E.addAbortSignal,ne.exports.finished=E.finished,ne.exports.destroy=E.destroy,ne.exports.destroy=k,ne.exports.pipeline=E.pipeline,ne.exports.compose=E.compose,Object.defineProperty(E,"promises",{configurable:!0,enumerable:!0,get:()=>b}),ne.exports.Stream=E.Stream,ne.exports.default=ne.exports},4370:(ne,Z,g)=>{"use strict";const{format:E,inspect:b,AggregateError:k}=g(2656),A=globalThis.AggregateError||k,P=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],y=/^([A-Z][a-z0-9]*)+$/,F={};function L(re,te){if(!re)throw new F.ERR_INTERNAL_ASSERTION(te)}function j(re){let te="",q=re.length;const V="-"===re[0]?1:0;for(;q>=V+4;q-=3)te=`_${re.slice(q-3,q)}${te}`;return`${re.slice(0,q)}${te}`}function C(re,te,q){q||(q=Error);class V extends q{constructor(...B){super(function oe(re,te,q){if("function"==typeof te)return L(te.length<=q.length,`Code: ${re}; The provided arguments length (${q.length}) does not match the required ones (${te.length}).`),te(...q);const V=(te.match(/%[dfijoOs]/g)||[]).length;return L(V===q.length,`Code: ${re}; The provided arguments length (${q.length}) does not match the required ones (${V}).`),0===q.length?te:E(te,...q)}(re,te,B))}toString(){return`${this.name} [${re}]: ${this.message}`}}Object.defineProperties(V.prototype,{name:{value:q.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${re}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),V.prototype.code=re,V.prototype[P]=!0,F[re]=V}function Y(re){return Object.defineProperty(re,"name",{value:"__node_internal_"+re.name}),re}class K extends Error{constructor(te="The operation was aborted",q=void 0){if(void 0!==q&&"object"!=typeof q)throw new F.ERR_INVALID_ARG_TYPE("options","Object",q);super(te,q),this.code="ABORT_ERR",this.name="AbortError"}}C("ERR_ASSERTION","%s",Error),C("ERR_INVALID_ARG_TYPE",(re,te,q)=>{L("string"==typeof re,"'name' must be a string"),Array.isArray(te)||(te=[te]);let V="The ";re.endsWith(" argument")?V+=`${re} `:V+=`"${re}" ${re.includes(".")?"property":"argument"} `,V+="must be ";const x=[],B=[],D=[];for(const W of te)L("string"==typeof W,"All expected entries have to be of type string"),_.includes(W)?x.push(W.toLowerCase()):y.test(W)?B.push(W):(L("object"!==W,'The value "object" should be written as "Object"'),D.push(W));if(B.length>0){const W=x.indexOf("object");-1!==W&&(x.splice(x,W,1),B.push("Object"))}if(x.length>0){switch(x.length){case 1:V+=`of type ${x[0]}`;break;case 2:V+=`one of type ${x[0]} or ${x[1]}`;break;default:{const W=x.pop();V+=`one of type ${x.join(", ")}, or ${W}`}}(B.length>0||D.length>0)&&(V+=" or ")}if(B.length>0){switch(B.length){case 1:V+=`an instance of ${B[0]}`;break;case 2:V+=`an instance of ${B[0]} or ${B[1]}`;break;default:{const W=B.pop();V+=`an instance of ${B.join(", ")}, or ${W}`}}D.length>0&&(V+=" or ")}switch(D.length){case 0:break;case 1:D[0].toLowerCase()!==D[0]&&(V+="an "),V+=`${D[0]}`;break;case 2:V+=`one of ${D[0]} or ${D[1]}`;break;default:{const W=D.pop();V+=`one of ${D.join(", ")}, or ${W}`}}if(null==q)V+=`. Received ${q}`;else if("function"==typeof q&&q.name)V+=`. Received function ${q.name}`;else if("object"==typeof q){var he;null!==(he=q.constructor)&&void 0!==he&&he.name?V+=`. Received an instance of ${q.constructor.name}`:V+=`. Received ${b(q,{depth:-1})}`}else{let W=b(q,{colors:!1});W.length>25&&(W=`${W.slice(0,25)}...`),V+=`. Received type ${typeof q} (${W})`}return V},TypeError),C("ERR_INVALID_ARG_VALUE",(re,te,q="is invalid")=>{let V=b(te);return V.length>128&&(V=V.slice(0,128)+"..."),`The ${re.includes(".")?"property":"argument"} '${re}' ${q}. Received ${V}`},TypeError),C("ERR_INVALID_RETURN_VALUE",(re,te,q)=>{var V;return`Expected ${re} to be returned from the "${te}" function but got ${null!=q&&null!==(V=q.constructor)&&void 0!==V&&V.name?`instance of ${q.constructor.name}`:"type "+typeof q}.`},TypeError),C("ERR_MISSING_ARGS",(...re)=>{let te;L(re.length>0,"At least one arg needs to be specified");const q=re.length;switch(re=(Array.isArray(re)?re:[re]).map(V=>`"${V}"`).join(" or "),q){case 1:te+=`The ${re[0]} argument`;break;case 2:te+=`The ${re[0]} and ${re[1]} arguments`;break;default:{const V=re.pop();te+=`The ${re.join(", ")}, and ${V} arguments`}}return`${te} must be specified`},TypeError),C("ERR_OUT_OF_RANGE",(re,te,q)=>{let V;return L(te,'Missing "range" argument'),Number.isInteger(q)&&Math.abs(q)>2**32?V=j(String(q)):"bigint"==typeof q?(V=String(q),(q>2n**32n||q<-(2n**32n))&&(V=j(V)),V+="n"):V=b(q),`The value of "${re}" is out of range. It must be ${te}. Received ${V}`},RangeError),C("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),C("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),C("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),C("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),C("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),C("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),C("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),C("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),C("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),C("ERR_STREAM_WRITE_AFTER_END","write after end",Error),C("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),ne.exports={AbortError:K,aggregateTwoErrors:Y(function le(re,te){if(re&&te&&re!==te){if(Array.isArray(te.errors))return te.errors.push(re),te;const q=new A([te,re],te.message);return q.code=te.code,q}return re||te}),hideStackFrames:Y,codes:F}},6305:ne=>{"use strict";ne.exports={ArrayIsArray:Z=>Array.isArray(Z),ArrayPrototypeIncludes:(Z,g)=>Z.includes(g),ArrayPrototypeIndexOf:(Z,g)=>Z.indexOf(g),ArrayPrototypeJoin:(Z,g)=>Z.join(g),ArrayPrototypeMap:(Z,g)=>Z.map(g),ArrayPrototypePop:(Z,g)=>Z.pop(g),ArrayPrototypePush:(Z,g)=>Z.push(g),ArrayPrototypeSlice:(Z,g,E)=>Z.slice(g,E),Error,FunctionPrototypeCall:(Z,g,...E)=>Z.call(g,...E),FunctionPrototypeSymbolHasInstance:(Z,g)=>Function.prototype[Symbol.hasInstance].call(Z,g),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(Z,g)=>Object.defineProperties(Z,g),ObjectDefineProperty:(Z,g,E)=>Object.defineProperty(Z,g,E),ObjectGetOwnPropertyDescriptor:(Z,g)=>Object.getOwnPropertyDescriptor(Z,g),ObjectKeys:Z=>Object.keys(Z),ObjectSetPrototypeOf:(Z,g)=>Object.setPrototypeOf(Z,g),Promise,PromisePrototypeCatch:(Z,g)=>Z.catch(g),PromisePrototypeThen:(Z,g,E)=>Z.then(g,E),PromiseReject:Z=>Promise.reject(Z),ReflectApply:Reflect.apply,RegExpPrototypeTest:(Z,g)=>Z.test(g),SafeSet:Set,String,StringPrototypeSlice:(Z,g,E)=>Z.slice(g,E),StringPrototypeToLowerCase:Z=>Z.toLowerCase(),StringPrototypeToUpperCase:Z=>Z.toUpperCase(),StringPrototypeTrim:Z=>Z.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(Z,g,E)=>Z.set(g,E),Uint8Array}},2656:(ne,Z,g)=>{"use strict";var E=g(7156).default;const b=g(1657),k=Object.getPrototypeOf(E(function*(){})).constructor,A=globalThis.Blob||b.Blob,P=typeof A<"u"?function(M){return M instanceof A}:function(M){return!1};class _ extends Error{constructor(M){if(!Array.isArray(M))throw new TypeError("Expected input to be an Array, got "+typeof M);let F="";for(let L=0;L<M.length;L++)F+=`    ${M[L].stack}\n`;super(F),this.name="AggregateError",this.errors=M}}ne.exports={AggregateError:_,kEmptyObject:Object.freeze({}),once(y){let M=!1;return function(...F){M||(M=!0,y.apply(this,F))}},createDeferredPromise:function(){let y,M;return{promise:new Promise((L,j)=>{y=L,M=j}),resolve:y,reject:M}},promisify:y=>new Promise((M,F)=>{y((L,...j)=>L?F(L):M(...j))}),debuglog:()=>function(){},format:(y,...M)=>y.replace(/%([sdifj])/g,function(...[F,L]){const j=M.shift();return"f"===L?j.toFixed(6):"j"===L?JSON.stringify(j):"s"===L&&"object"==typeof j?`${j.constructor!==Object?j.constructor.name:""} {}`.trim():j.toString()}),inspect(y){switch(typeof y){case"string":if(y.includes("'")){if(!y.includes('"'))return`"${y}"`;if(!y.includes("`")&&!y.includes("${"))return`\`${y}\``}return`'${y}'`;case"number":return isNaN(y)?"NaN":Object.is(y,-0)?String(y):y;case"bigint":return`${String(y)}n`;case"boolean":case"undefined":return String(y);case"object":return"{}"}},types:{isAsyncFunction:y=>y instanceof k,isArrayBufferView:y=>ArrayBuffer.isView(y)},isBlob:P},ne.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(ne,Z,g)=>{const{Buffer:E}=g(1657),{ObjectDefineProperty:b,ObjectKeys:k,ReflectApply:A}=g(6305),{promisify:{custom:P}}=g(2656),{streamReturningOperators:_,promiseReturningOperators:y}=g(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:M}}=g(4370),F=g(7721),{pipeline:L}=g(4514),{destroyer:j}=g(5601),oe=g(4618),Y=g(16),le=g(5428),K=ne.exports=g(900).Stream;K.isDisturbed=le.isDisturbed,K.isErrored=le.isErrored,K.isReadable=le.isReadable,K.Readable=g(8383);for(const q of k(_)){let x=function(...B){if(new.target)throw M();return K.Readable.from(A(V,this,B))};const V=_[q];b(x,"name",{__proto__:null,value:V.name}),b(x,"length",{__proto__:null,value:V.length}),b(K.Readable.prototype,q,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}for(const q of k(y)){let x=function(...D){if(new.target)throw M();return A(V,this,D)};const V=y[q];b(x,"name",{__proto__:null,value:V.name}),b(x,"length",{__proto__:null,value:V.length}),b(K.Readable.prototype,q,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}K.Writable=g(9764),K.Duplex=g(5931),K.Transform=g(123),K.PassThrough=g(6973),K.pipeline=L;const{addAbortSignal:re}=g(9987);K.addAbortSignal=re,K.finished=oe,K.destroy=j,K.compose=F,b(K,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>Y}),b(L,P,{__proto__:null,enumerable:!0,get:()=>Y.pipeline}),b(oe,P,{__proto__:null,enumerable:!0,get:()=>Y.finished}),K.Stream=K,K._isUint8Array=function(V){return V instanceof Uint8Array},K._uint8ArrayToBuffer=function(V){return E.from(V.buffer,V.byteOffset,V.byteLength)}},16:(ne,Z,g)=>{"use strict";const{ArrayPrototypePop:E,Promise:b}=g(6305),{isIterable:k,isNodeStream:A,isWebStream:P}=g(5428),{pipelineImpl:_}=g(4514),{finished:y}=g(4618);g(8110),ne.exports={finished:y,pipeline:function M(...F){return new b((L,j)=>{let oe,C;const Y=F[F.length-1];if(Y&&"object"==typeof Y&&!A(Y)&&!k(Y)&&!P(Y)){const le=E(F);oe=le.signal,C=le.end}_(F,(le,K)=>{le?j(le):L(K)},{signal:oe,end:C})})}}},1657:(ne,Z,g)=>{"use strict";const E=g(9919),b=g(2601),k="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Z.Buffer=y,Z.SlowBuffer=function te(Re){return+Re!=Re&&(Re=0),y.alloc(+Re)},Z.INSPECT_MAX_BYTES=50;const A=2147483647;function _(Re){if(Re>A)throw new RangeError('The value "'+Re+'" is invalid for option "size"');const J=new Uint8Array(Re);return Object.setPrototypeOf(J,y.prototype),J}function y(Re,J,S){if("number"==typeof Re){if("string"==typeof J)throw new TypeError('The "string" argument must be of type string. Received type number');return j(Re)}return M(Re,J,S)}function M(Re,J,S){if("string"==typeof Re)return function oe(Re,J){if(("string"!=typeof J||""===J)&&(J="utf8"),!y.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const S=0|q(Re,J);let ce=_(S);const Ge=ce.write(Re,J);return Ge!==S&&(ce=ce.slice(0,Ge)),ce}(Re,J);if(ArrayBuffer.isView(Re))return function Y(Re){if(ot(Re,Uint8Array)){const J=new Uint8Array(Re);return le(J.buffer,J.byteOffset,J.byteLength)}return C(Re)}(Re);if(null==Re)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Re);if(ot(Re,ArrayBuffer)||Re&&ot(Re.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ot(Re,SharedArrayBuffer)||Re&&ot(Re.buffer,SharedArrayBuffer)))return le(Re,J,S);if("number"==typeof Re)throw new TypeError('The "value" argument must not be of type number. Received type number');const ce=Re.valueOf&&Re.valueOf();if(null!=ce&&ce!==Re)return y.from(ce,J,S);const Ge=function K(Re){if(y.isBuffer(Re)){const J=0|re(Re.length),S=_(J);return 0===S.length||Re.copy(S,0,0,J),S}return void 0!==Re.length?"number"!=typeof Re.length||kt(Re.length)?_(0):C(Re):"Buffer"===Re.type&&Array.isArray(Re.data)?C(Re.data):void 0}(Re);if(Ge)return Ge;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Re[Symbol.toPrimitive])return y.from(Re[Symbol.toPrimitive]("string"),J,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Re)}function F(Re){if("number"!=typeof Re)throw new TypeError('"size" argument must be of type number');if(Re<0)throw new RangeError('The value "'+Re+'" is invalid for option "size"')}function j(Re){return F(Re),_(Re<0?0:0|re(Re))}function C(Re){const J=Re.length<0?0:0|re(Re.length),S=_(J);for(let ce=0;ce<J;ce+=1)S[ce]=255&Re[ce];return S}function le(Re,J,S){if(J<0||Re.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(Re.byteLength<J+(S||0))throw new RangeError('"length" is outside of buffer bounds');let ce;return ce=void 0===J&&void 0===S?new Uint8Array(Re):void 0===S?new Uint8Array(Re,J):new Uint8Array(Re,J,S),Object.setPrototypeOf(ce,y.prototype),ce}function re(Re){if(Re>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return 0|Re}function q(Re,J){if(y.isBuffer(Re))return Re.length;if(ArrayBuffer.isView(Re)||ot(Re,ArrayBuffer))return Re.byteLength;if("string"!=typeof Re)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Re);const S=Re.length,ce=arguments.length>2&&!0===arguments[2];if(!ce&&0===S)return 0;let Ge=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return I(Re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return ze(Re).length;default:if(Ge)return ce?-1:I(Re).length;J=(""+J).toLowerCase(),Ge=!0}}function V(Re,J,S){let ce=!1;if((void 0===J||J<0)&&(J=0),J>this.length||((void 0===S||S>this.length)&&(S=this.length),S<=0)||(S>>>=0)<=(J>>>=0))return"";for(Re||(Re="utf8");;)switch(Re){case"hex":return ke(this,J,S);case"utf8":case"utf-8":return De(this,J,S);case"ascii":return Ce(this,J,S);case"latin1":case"binary":return Ne(this,J,S);case"base64":return Ie(this,J,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,J,S);default:if(ce)throw new TypeError("Unknown encoding: "+Re);Re=(Re+"").toLowerCase(),ce=!0}}function x(Re,J,S){const ce=Re[J];Re[J]=Re[S],Re[S]=ce}function B(Re,J,S,ce,Ge){if(0===Re.length)return-1;if("string"==typeof S?(ce=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),kt(S=+S)&&(S=Ge?0:Re.length-1),S<0&&(S=Re.length+S),S>=Re.length){if(Ge)return-1;S=Re.length-1}else if(S<0){if(!Ge)return-1;S=0}if("string"==typeof J&&(J=y.from(J,ce)),y.isBuffer(J))return 0===J.length?-1:D(Re,J,S,ce,Ge);if("number"==typeof J)return J&=255,"function"==typeof Uint8Array.prototype.indexOf?Ge?Uint8Array.prototype.indexOf.call(Re,J,S):Uint8Array.prototype.lastIndexOf.call(Re,J,S):D(Re,[J],S,ce,Ge);throw new TypeError("val must be string, number or Buffer")}function D(Re,J,S,ce,Ge){let Yn,Ze=1,ct=Re.length,Xt=J.length;if(void 0!==ce&&("ucs2"===(ce=String(ce).toLowerCase())||"ucs-2"===ce||"utf16le"===ce||"utf-16le"===ce)){if(Re.length<2||J.length<2)return-1;Ze=2,ct/=2,Xt/=2,S/=2}function cn(Xn,bn){return 1===Ze?Xn[bn]:Xn.readUInt16BE(bn*Ze)}if(Ge){let Xn=-1;for(Yn=S;Yn<ct;Yn++)if(cn(Re,Yn)===cn(J,-1===Xn?0:Yn-Xn)){if(-1===Xn&&(Xn=Yn),Yn-Xn+1===Xt)return Xn*Ze}else-1!==Xn&&(Yn-=Yn-Xn),Xn=-1}else for(S+Xt>ct&&(S=ct-Xt),Yn=S;Yn>=0;Yn--){let Xn=!0;for(let bn=0;bn<Xt;bn++)if(cn(Re,Yn+bn)!==cn(J,bn)){Xn=!1;break}if(Xn)return Yn}return-1}function he(Re,J,S,ce){S=Number(S)||0;const Ge=Re.length-S;ce?(ce=Number(ce))>Ge&&(ce=Ge):ce=Ge;const Ze=J.length;let ct;for(ce>Ze/2&&(ce=Ze/2),ct=0;ct<ce;++ct){const Xt=parseInt(J.substr(2*ct,2),16);if(kt(Xt))return ct;Re[S+ct]=Xt}return ct}function W(Re,J,S,ce){return Je(I(J,Re.length-S),Re,S,ce)}function Te(Re,J,S,ce){return Je(function ue(Re){const J=[];for(let S=0;S<Re.length;++S)J.push(255&Re.charCodeAt(S));return J}(J),Re,S,ce)}function de(Re,J,S,ce){return Je(ze(J),Re,S,ce)}function we(Re,J,S,ce){return Je(function ge(Re,J){let S,ce,Ge;const Ze=[];for(let ct=0;ct<Re.length&&!((J-=2)<0);++ct)S=Re.charCodeAt(ct),ce=S>>8,Ge=S%256,Ze.push(Ge),Ze.push(ce);return Ze}(J,Re.length-S),Re,S,ce)}function Ie(Re,J,S){return E.fromByteArray(0===J&&S===Re.length?Re:Re.slice(J,S))}function De(Re,J,S){S=Math.min(Re.length,S);const ce=[];let Ge=J;for(;Ge<S;){const Ze=Re[Ge];let ct=null,Xt=Ze>239?4:Ze>223?3:Ze>191?2:1;if(Ge+Xt<=S){let cn,Yn,Xn,bn;switch(Xt){case 1:Ze<128&&(ct=Ze);break;case 2:cn=Re[Ge+1],128==(192&cn)&&(bn=(31&Ze)<<6|63&cn,bn>127&&(ct=bn));break;case 3:cn=Re[Ge+1],Yn=Re[Ge+2],128==(192&cn)&&128==(192&Yn)&&(bn=(15&Ze)<<12|(63&cn)<<6|63&Yn,bn>2047&&(bn<55296||bn>57343)&&(ct=bn));break;case 4:cn=Re[Ge+1],Yn=Re[Ge+2],Xn=Re[Ge+3],128==(192&cn)&&128==(192&Yn)&&128==(192&Xn)&&(bn=(15&Ze)<<18|(63&cn)<<12|(63&Yn)<<6|63&Xn,bn>65535&&bn<1114112&&(ct=bn))}}null===ct?(ct=65533,Xt=1):ct>65535&&(ct-=65536,ce.push(ct>>>10&1023|55296),ct=56320|1023&ct),ce.push(ct),Ge+=Xt}return function Ye(Re){const J=Re.length;if(J<=et)return String.fromCharCode.apply(String,Re);let S="",ce=0;for(;ce<J;)S+=String.fromCharCode.apply(String,Re.slice(ce,ce+=et));return S}(ce)}Z.kMaxLength=A,!(y.TYPED_ARRAY_SUPPORT=function P(){try{const Re=new Uint8Array(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,Uint8Array.prototype),Object.setPrototypeOf(Re,J),42===Re.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),y.poolSize=8192,y.from=function(Re,J,S){return M(Re,J,S)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(Re,J,S){return function L(Re,J,S){return F(Re),Re<=0?_(Re):void 0!==J?"string"==typeof S?_(Re).fill(J,S):_(Re).fill(J):_(Re)}(Re,J,S)},y.allocUnsafe=function(Re){return j(Re)},y.allocUnsafeSlow=function(Re){return j(Re)},y.isBuffer=function(J){return null!=J&&!0===J._isBuffer&&J!==y.prototype},y.compare=function(J,S){if(ot(J,Uint8Array)&&(J=y.from(J,J.offset,J.byteLength)),ot(S,Uint8Array)&&(S=y.from(S,S.offset,S.byteLength)),!y.isBuffer(J)||!y.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===S)return 0;let ce=J.length,Ge=S.length;for(let Ze=0,ct=Math.min(ce,Ge);Ze<ct;++Ze)if(J[Ze]!==S[Ze]){ce=J[Ze],Ge=S[Ze];break}return ce<Ge?-1:Ge<ce?1:0},y.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(J,S){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(0===J.length)return y.alloc(0);let ce;if(void 0===S)for(S=0,ce=0;ce<J.length;++ce)S+=J[ce].length;const Ge=y.allocUnsafe(S);let Ze=0;for(ce=0;ce<J.length;++ce){let ct=J[ce];if(ot(ct,Uint8Array))Ze+ct.length>Ge.length?(y.isBuffer(ct)||(ct=y.from(ct)),ct.copy(Ge,Ze)):Uint8Array.prototype.set.call(Ge,ct,Ze);else{if(!y.isBuffer(ct))throw new TypeError('"list" argument must be an Array of Buffers');ct.copy(Ge,Ze)}Ze+=ct.length}return Ge},y.byteLength=q,y.prototype._isBuffer=!0,y.prototype.swap16=function(){const J=this.length;if(J%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<J;S+=2)x(this,S,S+1);return this},y.prototype.swap32=function(){const J=this.length;if(J%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<J;S+=4)x(this,S,S+3),x(this,S+1,S+2);return this},y.prototype.swap64=function(){const J=this.length;if(J%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<J;S+=8)x(this,S,S+7),x(this,S+1,S+6),x(this,S+2,S+5),x(this,S+3,S+4);return this},y.prototype.toLocaleString=y.prototype.toString=function(){const J=this.length;return 0===J?"":0===arguments.length?De(this,0,J):V.apply(this,arguments)},y.prototype.equals=function(J){if(!y.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J||0===y.compare(this,J)},y.prototype.inspect=function(){let J="";const S=Z.INSPECT_MAX_BYTES;return J=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(J+=" ... "),"<Buffer "+J+">"},k&&(y.prototype[k]=y.prototype.inspect),y.prototype.compare=function(J,S,ce,Ge,Ze){if(ot(J,Uint8Array)&&(J=y.from(J,J.offset,J.byteLength)),!y.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(void 0===S&&(S=0),void 0===ce&&(ce=J?J.length:0),void 0===Ge&&(Ge=0),void 0===Ze&&(Ze=this.length),S<0||ce>J.length||Ge<0||Ze>this.length)throw new RangeError("out of range index");if(Ge>=Ze&&S>=ce)return 0;if(Ge>=Ze)return-1;if(S>=ce)return 1;if(this===J)return 0;let ct=(Ze>>>=0)-(Ge>>>=0),Xt=(ce>>>=0)-(S>>>=0);const cn=Math.min(ct,Xt),Yn=this.slice(Ge,Ze),Xn=J.slice(S,ce);for(let bn=0;bn<cn;++bn)if(Yn[bn]!==Xn[bn]){ct=Yn[bn],Xt=Xn[bn];break}return ct<Xt?-1:Xt<ct?1:0},y.prototype.includes=function(J,S,ce){return-1!==this.indexOf(J,S,ce)},y.prototype.indexOf=function(J,S,ce){return B(this,J,S,ce,!0)},y.prototype.lastIndexOf=function(J,S,ce){return B(this,J,S,ce,!1)},y.prototype.write=function(J,S,ce,Ge){if(void 0===S)Ge="utf8",ce=this.length,S=0;else if(void 0===ce&&"string"==typeof S)Ge=S,ce=this.length,S=0;else{if(!isFinite(S))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");S>>>=0,isFinite(ce)?(ce>>>=0,void 0===Ge&&(Ge="utf8")):(Ge=ce,ce=void 0)}const Ze=this.length-S;if((void 0===ce||ce>Ze)&&(ce=Ze),J.length>0&&(ce<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");let ct=!1;for(;;)switch(Ge){case"hex":return he(this,J,S,ce);case"utf8":case"utf-8":return W(this,J,S,ce);case"ascii":case"latin1":case"binary":return Te(this,J,S,ce);case"base64":return de(this,J,S,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,J,S,ce);default:if(ct)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),ct=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const et=4096;function Ce(Re,J,S){let ce="";S=Math.min(Re.length,S);for(let Ge=J;Ge<S;++Ge)ce+=String.fromCharCode(127&Re[Ge]);return ce}function Ne(Re,J,S){let ce="";S=Math.min(Re.length,S);for(let Ge=J;Ge<S;++Ge)ce+=String.fromCharCode(Re[Ge]);return ce}function ke(Re,J,S){const ce=Re.length;(!J||J<0)&&(J=0),(!S||S<0||S>ce)&&(S=ce);let Ge="";for(let Ze=J;Ze<S;++Ze)Ge+=_t[Re[Ze]];return Ge}function He(Re,J,S){const ce=Re.slice(J,S);let Ge="";for(let Ze=0;Ze<ce.length-1;Ze+=2)Ge+=String.fromCharCode(ce[Ze]+256*ce[Ze+1]);return Ge}function me(Re,J,S){if(Re%1!=0||Re<0)throw new RangeError("offset is not uint");if(Re+J>S)throw new RangeError("Trying to access beyond buffer length")}function Se(Re,J,S,ce,Ge,Ze){if(!y.isBuffer(Re))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>Ge||J<Ze)throw new RangeError('"value" argument is out of bounds');if(S+ce>Re.length)throw new RangeError("Index out of range")}function qe(Re,J,S,ce,Ge){Ke(J,ce,Ge,Re,S,7);let Ze=Number(J&BigInt(4294967295));Re[S++]=Ze,Ze>>=8,Re[S++]=Ze,Ze>>=8,Re[S++]=Ze,Ze>>=8,Re[S++]=Ze;let ct=Number(J>>BigInt(32)&BigInt(4294967295));return Re[S++]=ct,ct>>=8,Re[S++]=ct,ct>>=8,Re[S++]=ct,ct>>=8,Re[S++]=ct,S}function lt(Re,J,S,ce,Ge){Ke(J,ce,Ge,Re,S,7);let Ze=Number(J&BigInt(4294967295));Re[S+7]=Ze,Ze>>=8,Re[S+6]=Ze,Ze>>=8,Re[S+5]=Ze,Ze>>=8,Re[S+4]=Ze;let ct=Number(J>>BigInt(32)&BigInt(4294967295));return Re[S+3]=ct,ct>>=8,Re[S+2]=ct,ct>>=8,Re[S+1]=ct,ct>>=8,Re[S]=ct,S+8}function We(Re,J,S,ce,Ge,Ze){if(S+ce>Re.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function _e(Re,J,S,ce,Ge){return J=+J,S>>>=0,Ge||We(Re,0,S,4),b.write(Re,J,S,ce,23,4),S+4}function z(Re,J,S,ce,Ge){return J=+J,S>>>=0,Ge||We(Re,0,S,8),b.write(Re,J,S,ce,52,8),S+8}y.prototype.slice=function(J,S){const ce=this.length;(J=~~J)<0?(J+=ce)<0&&(J=0):J>ce&&(J=ce),(S=void 0===S?ce:~~S)<0?(S+=ce)<0&&(S=0):S>ce&&(S=ce),S<J&&(S=J);const Ge=this.subarray(J,S);return Object.setPrototypeOf(Ge,y.prototype),Ge},y.prototype.readUintLE=y.prototype.readUIntLE=function(J,S,ce){J>>>=0,S>>>=0,ce||me(J,S,this.length);let Ge=this[J],Ze=1,ct=0;for(;++ct<S&&(Ze*=256);)Ge+=this[J+ct]*Ze;return Ge},y.prototype.readUintBE=y.prototype.readUIntBE=function(J,S,ce){J>>>=0,S>>>=0,ce||me(J,S,this.length);let Ge=this[J+--S],Ze=1;for(;S>0&&(Ze*=256);)Ge+=this[J+--S]*Ze;return Ge},y.prototype.readUint8=y.prototype.readUInt8=function(J,S){return J>>>=0,S||me(J,1,this.length),this[J]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(J,S){return J>>>=0,S||me(J,2,this.length),this[J]|this[J+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(J,S){return J>>>=0,S||me(J,2,this.length),this[J]<<8|this[J+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(J,S){return J>>>=0,S||me(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+16777216*this[J+3]},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(J,S){return J>>>=0,S||me(J,4,this.length),16777216*this[J]+(this[J+1]<<16|this[J+2]<<8|this[J+3])},y.prototype.readBigUInt64LE=Wt(function(J){fe(J>>>=0,"offset");const S=this[J],ce=this[J+7];(void 0===S||void 0===ce)&&ee(J,this.length-8);const Ge=S+256*this[++J]+65536*this[++J]+this[++J]*2**24,Ze=this[++J]+256*this[++J]+65536*this[++J]+ce*2**24;return BigInt(Ge)+(BigInt(Ze)<<BigInt(32))}),y.prototype.readBigUInt64BE=Wt(function(J){fe(J>>>=0,"offset");const S=this[J],ce=this[J+7];(void 0===S||void 0===ce)&&ee(J,this.length-8);const Ge=S*2**24+65536*this[++J]+256*this[++J]+this[++J],Ze=this[++J]*2**24+65536*this[++J]+256*this[++J]+ce;return(BigInt(Ge)<<BigInt(32))+BigInt(Ze)}),y.prototype.readIntLE=function(J,S,ce){J>>>=0,S>>>=0,ce||me(J,S,this.length);let Ge=this[J],Ze=1,ct=0;for(;++ct<S&&(Ze*=256);)Ge+=this[J+ct]*Ze;return Ze*=128,Ge>=Ze&&(Ge-=Math.pow(2,8*S)),Ge},y.prototype.readIntBE=function(J,S,ce){J>>>=0,S>>>=0,ce||me(J,S,this.length);let Ge=S,Ze=1,ct=this[J+--Ge];for(;Ge>0&&(Ze*=256);)ct+=this[J+--Ge]*Ze;return Ze*=128,ct>=Ze&&(ct-=Math.pow(2,8*S)),ct},y.prototype.readInt8=function(J,S){return J>>>=0,S||me(J,1,this.length),128&this[J]?-1*(255-this[J]+1):this[J]},y.prototype.readInt16LE=function(J,S){J>>>=0,S||me(J,2,this.length);const ce=this[J]|this[J+1]<<8;return 32768&ce?4294901760|ce:ce},y.prototype.readInt16BE=function(J,S){J>>>=0,S||me(J,2,this.length);const ce=this[J+1]|this[J]<<8;return 32768&ce?4294901760|ce:ce},y.prototype.readInt32LE=function(J,S){return J>>>=0,S||me(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},y.prototype.readInt32BE=function(J,S){return J>>>=0,S||me(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},y.prototype.readBigInt64LE=Wt(function(J){fe(J>>>=0,"offset");const S=this[J],ce=this[J+7];return(void 0===S||void 0===ce)&&ee(J,this.length-8),(BigInt(this[J+4]+256*this[J+5]+65536*this[J+6]+(ce<<24))<<BigInt(32))+BigInt(S+256*this[++J]+65536*this[++J]+this[++J]*2**24)}),y.prototype.readBigInt64BE=Wt(function(J){fe(J>>>=0,"offset");const S=this[J],ce=this[J+7];(void 0===S||void 0===ce)&&ee(J,this.length-8);const Ge=(S<<24)+65536*this[++J]+256*this[++J]+this[++J];return(BigInt(Ge)<<BigInt(32))+BigInt(this[++J]*2**24+65536*this[++J]+256*this[++J]+ce)}),y.prototype.readFloatLE=function(J,S){return J>>>=0,S||me(J,4,this.length),b.read(this,J,!0,23,4)},y.prototype.readFloatBE=function(J,S){return J>>>=0,S||me(J,4,this.length),b.read(this,J,!1,23,4)},y.prototype.readDoubleLE=function(J,S){return J>>>=0,S||me(J,8,this.length),b.read(this,J,!0,52,8)},y.prototype.readDoubleBE=function(J,S){return J>>>=0,S||me(J,8,this.length),b.read(this,J,!1,52,8)},y.prototype.writeUintLE=y.prototype.writeUIntLE=function(J,S,ce,Ge){J=+J,S>>>=0,ce>>>=0,Ge||Se(this,J,S,ce,Math.pow(2,8*ce)-1,0);let Ze=1,ct=0;for(this[S]=255&J;++ct<ce&&(Ze*=256);)this[S+ct]=J/Ze&255;return S+ce},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(J,S,ce,Ge){J=+J,S>>>=0,ce>>>=0,Ge||Se(this,J,S,ce,Math.pow(2,8*ce)-1,0);let Ze=ce-1,ct=1;for(this[S+Ze]=255&J;--Ze>=0&&(ct*=256);)this[S+Ze]=J/ct&255;return S+ce},y.prototype.writeUint8=y.prototype.writeUInt8=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,1,255,0),this[S]=255&J,S+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,2,65535,0),this[S]=255&J,this[S+1]=J>>>8,S+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,2,65535,0),this[S]=J>>>8,this[S+1]=255&J,S+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,4,4294967295,0),this[S+3]=J>>>24,this[S+2]=J>>>16,this[S+1]=J>>>8,this[S]=255&J,S+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,4,4294967295,0),this[S]=J>>>24,this[S+1]=J>>>16,this[S+2]=J>>>8,this[S+3]=255&J,S+4},y.prototype.writeBigUInt64LE=Wt(function(J,S=0){return qe(this,J,S,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=Wt(function(J,S=0){return lt(this,J,S,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(J,S,ce,Ge){if(J=+J,S>>>=0,!Ge){const cn=Math.pow(2,8*ce-1);Se(this,J,S,ce,cn-1,-cn)}let Ze=0,ct=1,Xt=0;for(this[S]=255&J;++Ze<ce&&(ct*=256);)J<0&&0===Xt&&0!==this[S+Ze-1]&&(Xt=1),this[S+Ze]=(J/ct>>0)-Xt&255;return S+ce},y.prototype.writeIntBE=function(J,S,ce,Ge){if(J=+J,S>>>=0,!Ge){const cn=Math.pow(2,8*ce-1);Se(this,J,S,ce,cn-1,-cn)}let Ze=ce-1,ct=1,Xt=0;for(this[S+Ze]=255&J;--Ze>=0&&(ct*=256);)J<0&&0===Xt&&0!==this[S+Ze+1]&&(Xt=1),this[S+Ze]=(J/ct>>0)-Xt&255;return S+ce},y.prototype.writeInt8=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,1,127,-128),J<0&&(J=255+J+1),this[S]=255&J,S+1},y.prototype.writeInt16LE=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,2,32767,-32768),this[S]=255&J,this[S+1]=J>>>8,S+2},y.prototype.writeInt16BE=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,2,32767,-32768),this[S]=J>>>8,this[S+1]=255&J,S+2},y.prototype.writeInt32LE=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,4,2147483647,-2147483648),this[S]=255&J,this[S+1]=J>>>8,this[S+2]=J>>>16,this[S+3]=J>>>24,S+4},y.prototype.writeInt32BE=function(J,S,ce){return J=+J,S>>>=0,ce||Se(this,J,S,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[S]=J>>>24,this[S+1]=J>>>16,this[S+2]=J>>>8,this[S+3]=255&J,S+4},y.prototype.writeBigInt64LE=Wt(function(J,S=0){return qe(this,J,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=Wt(function(J,S=0){return lt(this,J,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeFloatLE=function(J,S,ce){return _e(this,J,S,!0,ce)},y.prototype.writeFloatBE=function(J,S,ce){return _e(this,J,S,!1,ce)},y.prototype.writeDoubleLE=function(J,S,ce){return z(this,J,S,!0,ce)},y.prototype.writeDoubleBE=function(J,S,ce){return z(this,J,S,!1,ce)},y.prototype.copy=function(J,S,ce,Ge){if(!y.isBuffer(J))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),!Ge&&0!==Ge&&(Ge=this.length),S>=J.length&&(S=J.length),S||(S=0),Ge>0&&Ge<ce&&(Ge=ce),Ge===ce||0===J.length||0===this.length)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),J.length-S<Ge-ce&&(Ge=J.length-S+ce);const Ze=Ge-ce;return this===J&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(S,ce,Ge):Uint8Array.prototype.set.call(J,this.subarray(ce,Ge),S),Ze},y.prototype.fill=function(J,S,ce,Ge){if("string"==typeof J){if("string"==typeof S?(Ge=S,S=0,ce=this.length):"string"==typeof ce&&(Ge=ce,ce=this.length),void 0!==Ge&&"string"!=typeof Ge)throw new TypeError("encoding must be a string");if("string"==typeof Ge&&!y.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(1===J.length){const ct=J.charCodeAt(0);("utf8"===Ge&&ct<128||"latin1"===Ge)&&(J=ct)}}else"number"==typeof J?J&=255:"boolean"==typeof J&&(J=Number(J));if(S<0||this.length<S||this.length<ce)throw new RangeError("Out of range index");if(ce<=S)return this;let Ze;if(S>>>=0,ce=void 0===ce?this.length:ce>>>0,J||(J=0),"number"==typeof J)for(Ze=S;Ze<ce;++Ze)this[Ze]=J;else{const ct=y.isBuffer(J)?J:y.from(J,Ge),Xt=ct.length;if(0===Xt)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(Ze=0;Ze<ce-S;++Ze)this[Ze+S]=ct[Ze%Xt]}return this};const O={};function ae(Re,J,S){O[Re]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Re}]`,delete this.name}get code(){return Re}set code(Ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ge,writable:!0})}toString(){return`${this.name} [${Re}]: ${this.message}`}}}function H(Re){let J="",S=Re.length;const ce="-"===Re[0]?1:0;for(;S>=ce+4;S-=3)J=`_${Re.slice(S-3,S)}${J}`;return`${Re.slice(0,S)}${J}`}function Ke(Re,J,S,ce,Ge,Ze){if(Re>S||Re<J){const ct="bigint"==typeof J?"n":"";let Xt;throw Xt=Ze>3?0===J||J===BigInt(0)?`>= 0${ct} and < 2${ct} ** ${8*(Ze+1)}${ct}`:`>= -(2${ct} ** ${8*(Ze+1)-1}${ct}) and < 2 ** ${8*(Ze+1)-1}${ct}`:`>= ${J}${ct} and <= ${S}${ct}`,new O.ERR_OUT_OF_RANGE("value",Xt,Re)}!function Fe(Re,J,S){fe(J,"offset"),(void 0===Re[J]||void 0===Re[J+S])&&ee(J,Re.length-(S+1))}(ce,Ge,Ze)}function fe(Re,J){if("number"!=typeof Re)throw new O.ERR_INVALID_ARG_TYPE(J,"number",Re)}function ee(Re,J,S){throw Math.floor(Re)!==Re?(fe(Re,S),new O.ERR_OUT_OF_RANGE(S||"offset","an integer",Re)):J<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${J}`,Re)}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(Re){return Re?`${Re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(Re,J){return`The "${Re}" argument must be of type number. Received type ${typeof J}`},TypeError),ae("ERR_OUT_OF_RANGE",function(Re,J,S){let ce=`The value of "${Re}" is out of range.`,Ge=S;return Number.isInteger(S)&&Math.abs(S)>2**32?Ge=H(String(S)):"bigint"==typeof S&&(Ge=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(Ge=H(Ge)),Ge+="n"),ce+=` It must be ${J}. Received ${Ge}`,ce},RangeError);const G=/[^+/0-9A-Za-z-_]/g;function I(Re,J){let S;J=J||1/0;const ce=Re.length;let Ge=null;const Ze=[];for(let ct=0;ct<ce;++ct){if(S=Re.charCodeAt(ct),S>55295&&S<57344){if(!Ge){if(S>56319){(J-=3)>-1&&Ze.push(239,191,189);continue}if(ct+1===ce){(J-=3)>-1&&Ze.push(239,191,189);continue}Ge=S;continue}if(S<56320){(J-=3)>-1&&Ze.push(239,191,189),Ge=S;continue}S=65536+(Ge-55296<<10|S-56320)}else Ge&&(J-=3)>-1&&Ze.push(239,191,189);if(Ge=null,S<128){if((J-=1)<0)break;Ze.push(S)}else if(S<2048){if((J-=2)<0)break;Ze.push(S>>6|192,63&S|128)}else if(S<65536){if((J-=3)<0)break;Ze.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((J-=4)<0)break;Ze.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return Ze}function ze(Re){return E.toByteArray(function R(Re){if((Re=(Re=Re.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;Re.length%4!=0;)Re+="=";return Re}(Re))}function Je(Re,J,S,ce){let Ge;for(Ge=0;Ge<ce&&!(Ge+S>=J.length||Ge>=Re.length);++Ge)J[Ge+S]=Re[Ge];return Ge}function ot(Re,J){return Re instanceof J||null!=Re&&null!=Re.constructor&&null!=Re.constructor.name&&Re.constructor.name===J.name}function kt(Re){return Re!=Re}const _t=function(){const Re="0123456789abcdef",J=new Array(256);for(let S=0;S<16;++S){const ce=16*S;for(let Ge=0;Ge<16;++Ge)J[ce+Ge]=Re[S]+Re[Ge]}return J}();function Wt(Re){return typeof BigInt>"u"?rn:Re}function rn(){throw new Error("BigInt not supported")}},7054:function(ne,Z,g){"use strict";var E=this&&this.__createBinding||(Object.create?function(k,A,P,_){void 0===_&&(_=P),Object.defineProperty(k,_,{enumerable:!0,get:function(){return A[P]}})}:function(k,A,P,_){void 0===_&&(_=P),k[_]=A[P]}),b=this&&this.__exportStar||function(k,A){for(var P in k)"default"!==P&&!Object.prototype.hasOwnProperty.call(A,P)&&E(A,k,P)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(361),Z)},361:(ne,Z)=>{"use strict";function E(A){const P=[];let _=0;for(;_<A.length;)switch(A[_]){case"/":if("."===A[_+1])if("."===A[_+2]){if(!k(A[_+3])){P.push([]),_++;break}P.pop(),A[_+3]||P.push([]),_+=3}else{if(!k(A[_+2])){P.push([]),_++;break}A[_+2]||P.push([]),_+=2}else P.push([]),_++;break;case"#":case"?":P.length||P.push([]),P[P.length-1].push(A.substr(_)),_=A.length;break;default:P.length||P.push([]),P[P.length-1].push(A[_]),_++}return"/"+P.map(y=>y.join("")).join("/")}function b(A,P){let _=P+1;P>=0?"/"===A[P+1]&&"/"===A[P+2]&&(_=P+3):"/"===A[0]&&"/"===A[1]&&(_=2);const y=A.indexOf("/",_);return y<0?A:A.substr(0,y)+E(A.substr(y))}function k(A){return!A||"#"===A||"?"===A||"/"===A}Object.defineProperty(Z,"__esModule",{value:!0}),Z.removeDotSegmentsOfPath=Z.removeDotSegments=Z.resolve=void 0,Z.resolve=function g(A,P){const _=(P=P||"").indexOf("#");if(_>0&&(P=P.substr(0,_)),!A.length){if(P.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${P}' for value '${A}'`);return P}if(A.startsWith("?")){const C=P.indexOf("?");return C>0&&(P=P.substr(0,C)),P+A}if(A.startsWith("#"))return P+A;if(!P.length){const C=A.indexOf(":");if(C<0)throw new Error(`Found invalid relative IRI '${A}' for a missing baseIRI`);return b(A,C)}const y=A.indexOf(":");if(y>=0)return b(A,y);const M=P.indexOf(":");if(M<0)throw new Error(`Found invalid baseIRI '${P}' for value '${A}'`);const F=P.substr(0,M+1);if(0===A.indexOf("//"))return F+b(A,y);let L;if(P.indexOf("//",M)===M+1){if(L=P.indexOf("/",M+3),L<0)return P.length>M+3?P+"/"+b(A,y):F+b(A,y)}else if(L=P.indexOf("/",M+1),L<0)return F+b(A,y);if(0===A.indexOf("/"))return P.substr(0,L)+E(A);let j=P.substr(L);const oe=j.lastIndexOf("/");return oe>=0&&oe<j.length-1&&(j=j.substr(0,oe+1),"."===A[0]&&"."!==A[1]&&"/"!==A[1]&&A[2]&&(A=A.substr(1))),A=E(A=j+A),P.substr(0,L)+A},Z.removeDotSegments=E,Z.removeDotSegmentsOfPath=b},9528:(ne,Z,g)=>{!function(E){E.parser=function(z,O){return new k(z,O)},E.SAXParser=k,E.SAXStream=L,E.createStream=function F(z,O){return new L(z,O)},E.MAX_BUFFER_LENGTH=65536;var y,b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function k(z,O){if(!(this instanceof k))return new k(z,O);var ae=this;(function P(z){for(var O=0,ae=b.length;O<ae;O++)z[b[O]]=""})(ae),ae.q=ae.c="",ae.bufferCheckPosition=E.MAX_BUFFER_LENGTH,ae.opt=O||{},ae.opt.lowercase=ae.opt.lowercase||ae.opt.lowercasetags,ae.looseCase=ae.opt.lowercase?"toLowerCase":"toUpperCase",ae.tags=[],ae.closed=ae.closedRoot=ae.sawRoot=!1,ae.tag=ae.error=null,ae.strict=!!z,ae.noscript=!(!z&&!ae.opt.noscript),ae.state=W.BEGIN,ae.strictEntities=ae.opt.strictEntities,ae.ENTITIES=Object.create(ae.strictEntities?E.XML_ENTITIES:E.ENTITIES),ae.attribList=[],ae.opt.xmlns&&(ae.ns=Object.create(le)),ae.trackPosition=!1!==ae.opt.position,ae.trackPosition&&(ae.position=ae.line=ae.column=0),de(ae,"onready")}E.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(z){function O(){}return O.prototype=z,new O}),Object.keys||(Object.keys=function(z){var O=[];for(var ae in z)z.hasOwnProperty(ae)&&O.push(ae);return O}),k.prototype={end:function(){Ye(this)},write:function _e(z){var O=this;if(this.error)throw this.error;if(O.closed)return et(O,"Cannot write after close. Assign an onready handler.");if(null===z)return Ye(O);"object"==typeof z&&(z=z.toString());for(var ae=0,H="";H=We(z,ae++),O.c=H,H;)switch(O.trackPosition&&(O.position++,"\n"===H?(O.line++,O.column=0):O.column++),O.state){case W.BEGIN:if(O.state=W.BEGIN_WHITESPACE,"\ufeff"===H)continue;lt(O,H);continue;case W.BEGIN_WHITESPACE:lt(O,H);continue;case W.TEXT:if(O.sawRoot&&!O.closedRoot){for(var Fe=ae-1;H&&"<"!==H&&"&"!==H;)(H=We(z,ae++))&&O.trackPosition&&(O.position++,"\n"===H?(O.line++,O.column=0):O.column++);O.textNode+=z.substring(Fe,ae-1)}"<"!==H||O.sawRoot&&O.closedRoot&&!O.strict?(!V(H)&&(!O.sawRoot||O.closedRoot)&&Ce(O,"Text data outside of root node."),"&"===H?O.state=W.TEXT_ENTITY:O.textNode+=H):(O.state=W.OPEN_WAKA,O.startTagPosition=O.position);continue;case W.SCRIPT:"<"===H?O.state=W.SCRIPT_ENDING:O.script+=H;continue;case W.SCRIPT_ENDING:"/"===H?O.state=W.CLOSE_TAG:(O.script+="<"+H,O.state=W.SCRIPT);continue;case W.OPEN_WAKA:"!"===H?(O.state=W.SGML_DECL,O.sgmlDecl=""):V(H)||(D(K,H)?(O.state=W.OPEN_TAG,O.tagName=H):"/"===H?(O.state=W.CLOSE_TAG,O.tagName=""):"?"===H?(O.state=W.PROC_INST,O.procInstName=O.procInstBody=""):(Ce(O,"Unencoded <"),O.startTagPosition+1<O.position&&(H=new Array(O.position-O.startTagPosition).join(" ")+H),O.textNode+="<"+H,O.state=W.TEXT));continue;case W.SGML_DECL:(O.sgmlDecl+H).toUpperCase()===j?(we(O,"onopencdata"),O.state=W.CDATA,O.sgmlDecl="",O.cdata=""):O.sgmlDecl+H==="--"?(O.state=W.COMMENT,O.comment="",O.sgmlDecl=""):(O.sgmlDecl+H).toUpperCase()===oe?(O.state=W.DOCTYPE,(O.doctype||O.sawRoot)&&Ce(O,"Inappropriately located doctype declaration"),O.doctype="",O.sgmlDecl=""):">"===H?(we(O,"onsgmldeclaration",O.sgmlDecl),O.sgmlDecl="",O.state=W.TEXT):(x(H)&&(O.state=W.SGML_DECL_QUOTED),O.sgmlDecl+=H);continue;case W.SGML_DECL_QUOTED:H===O.q&&(O.state=W.SGML_DECL,O.q=""),O.sgmlDecl+=H;continue;case W.DOCTYPE:">"===H?(O.state=W.TEXT,we(O,"ondoctype",O.doctype),O.doctype=!0):(O.doctype+=H,"["===H?O.state=W.DOCTYPE_DTD:x(H)&&(O.state=W.DOCTYPE_QUOTED,O.q=H));continue;case W.DOCTYPE_QUOTED:O.doctype+=H,H===O.q&&(O.q="",O.state=W.DOCTYPE);continue;case W.DOCTYPE_DTD:O.doctype+=H,"]"===H?O.state=W.DOCTYPE:x(H)&&(O.state=W.DOCTYPE_DTD_QUOTED,O.q=H);continue;case W.DOCTYPE_DTD_QUOTED:O.doctype+=H,H===O.q&&(O.state=W.DOCTYPE_DTD,O.q="");continue;case W.COMMENT:"-"===H?O.state=W.COMMENT_ENDING:O.comment+=H;continue;case W.COMMENT_ENDING:"-"===H?(O.state=W.COMMENT_ENDED,O.comment=De(O.opt,O.comment),O.comment&&we(O,"oncomment",O.comment),O.comment=""):(O.comment+="-"+H,O.state=W.COMMENT);continue;case W.COMMENT_ENDED:">"!==H?(Ce(O,"Malformed comment"),O.comment+="--"+H,O.state=W.COMMENT):O.state=W.TEXT;continue;case W.CDATA:"]"===H?O.state=W.CDATA_ENDING:O.cdata+=H;continue;case W.CDATA_ENDING:"]"===H?O.state=W.CDATA_ENDING_2:(O.cdata+="]"+H,O.state=W.CDATA);continue;case W.CDATA_ENDING_2:">"===H?(O.cdata&&we(O,"oncdata",O.cdata),we(O,"onclosecdata"),O.cdata="",O.state=W.TEXT):"]"===H?O.cdata+="]":(O.cdata+="]]"+H,O.state=W.CDATA);continue;case W.PROC_INST:"?"===H?O.state=W.PROC_INST_ENDING:V(H)?O.state=W.PROC_INST_BODY:O.procInstName+=H;continue;case W.PROC_INST_BODY:if(!O.procInstBody&&V(H))continue;"?"===H?O.state=W.PROC_INST_ENDING:O.procInstBody+=H;continue;case W.PROC_INST_ENDING:">"===H?(we(O,"onprocessinginstruction",{name:O.procInstName,body:O.procInstBody}),O.procInstName=O.procInstBody="",O.state=W.TEXT):(O.procInstBody+="?"+H,O.state=W.PROC_INST_BODY);continue;case W.OPEN_TAG:D(re,H)?O.tagName+=H:(Ne(O),">"===H?me(O):"/"===H?O.state=W.OPEN_TAG_SLASH:(V(H)||Ce(O,"Invalid character in tag name"),O.state=W.ATTRIB));continue;case W.OPEN_TAG_SLASH:">"===H?(me(O,!0),Se(O)):(Ce(O,"Forward-slash in opening tag not followed by >"),O.state=W.ATTRIB);continue;case W.ATTRIB:if(V(H))continue;">"===H?me(O):"/"===H?O.state=W.OPEN_TAG_SLASH:D(K,H)?(O.attribName=H,O.attribValue="",O.state=W.ATTRIB_NAME):Ce(O,"Invalid attribute name");continue;case W.ATTRIB_NAME:"="===H?O.state=W.ATTRIB_VALUE:">"===H?(Ce(O,"Attribute without value"),O.attribValue=O.attribName,He(O),me(O)):V(H)?O.state=W.ATTRIB_NAME_SAW_WHITE:D(re,H)?O.attribName+=H:Ce(O,"Invalid attribute name");continue;case W.ATTRIB_NAME_SAW_WHITE:if("="===H)O.state=W.ATTRIB_VALUE;else{if(V(H))continue;Ce(O,"Attribute without value"),O.tag.attributes[O.attribName]="",O.attribValue="",we(O,"onattribute",{name:O.attribName,value:""}),O.attribName="",">"===H?me(O):D(K,H)?(O.attribName=H,O.state=W.ATTRIB_NAME):(Ce(O,"Invalid attribute name"),O.state=W.ATTRIB)}continue;case W.ATTRIB_VALUE:if(V(H))continue;x(H)?(O.q=H,O.state=W.ATTRIB_VALUE_QUOTED):(Ce(O,"Unquoted attribute value"),O.state=W.ATTRIB_VALUE_UNQUOTED,O.attribValue=H);continue;case W.ATTRIB_VALUE_QUOTED:if(H!==O.q){"&"===H?O.state=W.ATTRIB_VALUE_ENTITY_Q:O.attribValue+=H;continue}He(O),O.q="",O.state=W.ATTRIB_VALUE_CLOSED;continue;case W.ATTRIB_VALUE_CLOSED:V(H)?O.state=W.ATTRIB:">"===H?me(O):"/"===H?O.state=W.OPEN_TAG_SLASH:D(K,H)?(Ce(O,"No whitespace between attributes"),O.attribName=H,O.attribValue="",O.state=W.ATTRIB_NAME):Ce(O,"Invalid attribute name");continue;case W.ATTRIB_VALUE_UNQUOTED:if(!B(H)){"&"===H?O.state=W.ATTRIB_VALUE_ENTITY_U:O.attribValue+=H;continue}He(O),">"===H?me(O):O.state=W.ATTRIB;continue;case W.CLOSE_TAG:if(O.tagName)">"===H?Se(O):D(re,H)?O.tagName+=H:O.script?(O.script+="</"+O.tagName,O.tagName="",O.state=W.SCRIPT):(V(H)||Ce(O,"Invalid tagname in closing tag"),O.state=W.CLOSE_TAG_SAW_WHITE);else{if(V(H))continue;he(K,H)?O.script?(O.script+="</"+H,O.state=W.SCRIPT):Ce(O,"Invalid tagname in closing tag."):O.tagName=H}continue;case W.CLOSE_TAG_SAW_WHITE:if(V(H))continue;">"===H?Se(O):Ce(O,"Invalid characters in closing tag");continue;case W.TEXT_ENTITY:case W.ATTRIB_VALUE_ENTITY_Q:case W.ATTRIB_VALUE_ENTITY_U:var fe,ee;switch(O.state){case W.TEXT_ENTITY:fe=W.TEXT,ee="textNode";break;case W.ATTRIB_VALUE_ENTITY_Q:fe=W.ATTRIB_VALUE_QUOTED,ee="attribValue";break;case W.ATTRIB_VALUE_ENTITY_U:fe=W.ATTRIB_VALUE_UNQUOTED,ee="attribValue"}";"===H?(O[ee]+=qe(O),O.entity="",O.state=fe):D(O.entity.length?q:te,H)?O.entity+=H:(Ce(O,"Invalid character in entity name"),O[ee]+="&"+O.entity+H,O.entity="",O.state=fe);continue;default:throw new Error(O,"Unknown state: "+O.state)}return O.position>=O.bufferCheckPosition&&function A(z){for(var O=Math.max(E.MAX_BUFFER_LENGTH,10),ae=0,H=0,Fe=b.length;H<Fe;H++){var Ke=z[b[H]].length;if(Ke>O)switch(b[H]){case"textNode":Ie(z);break;case"cdata":we(z,"oncdata",z.cdata),z.cdata="";break;case"script":we(z,"onscript",z.script),z.script="";break;default:et(z,"Max buffer length exceeded: "+b[H])}ae=Math.max(ae,Ke)}z.bufferCheckPosition=E.MAX_BUFFER_LENGTH-ae+z.position}(O),O},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(z){Ie(z),""!==z.cdata&&(we(z,"oncdata",z.cdata),z.cdata=""),""!==z.script&&(we(z,"onscript",z.script),z.script="")}(this)}};try{y=g(1793).Stream}catch{y=function(){}}var M=E.EVENTS.filter(function(z){return"error"!==z&&"end"!==z});function L(z,O){if(!(this instanceof L))return new L(z,O);y.apply(this),this._parser=new k(z,O),this.writable=!0,this.readable=!0;var ae=this;this._parser.onend=function(){ae.emit("end")},this._parser.onerror=function(H){ae.emit("error",H),ae._parser.error=null},this._decoder=null,M.forEach(function(H){Object.defineProperty(ae,"on"+H,{get:function(){return ae._parser["on"+H]},set:function(Fe){if(!Fe)return ae.removeAllListeners(H),ae._parser["on"+H]=Fe,Fe;ae.on(H,Fe)},enumerable:!0,configurable:!1})})}(L.prototype=Object.create(y.prototype,{constructor:{value:L}})).write=function(z){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(z)){if(!this._decoder){var O=g(2024).StringDecoder;this._decoder=new O("utf8")}z=this._decoder.write(z)}return this._parser.write(z.toString()),this.emit("data",z),!0},L.prototype.end=function(z){return z&&z.length&&this.write(z),this._parser.end(),!0},L.prototype.on=function(z,O){var ae=this;return!ae._parser["on"+z]&&-1!==M.indexOf(z)&&(ae._parser["on"+z]=function(){var H=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);H.splice(0,0,z),ae.emit.apply(ae,H)}),y.prototype.on.call(ae,z,O)};var j="[CDATA[",oe="DOCTYPE",C="http://www.w3.org/XML/1998/namespace",Y="http://www.w3.org/2000/xmlns/",le={xml:C,xmlns:Y},K=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,re=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,te=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function V(z){return" "===z||"\n"===z||"\r"===z||"\t"===z}function x(z){return'"'===z||"'"===z}function B(z){return">"===z||V(z)}function D(z,O){return z.test(O)}function he(z,O){return!D(z,O)}var z,O,ae,W=0;for(var Te in E.STATE={BEGIN:W++,BEGIN_WHITESPACE:W++,TEXT:W++,TEXT_ENTITY:W++,OPEN_WAKA:W++,SGML_DECL:W++,SGML_DECL_QUOTED:W++,DOCTYPE:W++,DOCTYPE_QUOTED:W++,DOCTYPE_DTD:W++,DOCTYPE_DTD_QUOTED:W++,COMMENT_STARTING:W++,COMMENT:W++,COMMENT_ENDING:W++,COMMENT_ENDED:W++,CDATA:W++,CDATA_ENDING:W++,CDATA_ENDING_2:W++,PROC_INST:W++,PROC_INST_BODY:W++,PROC_INST_ENDING:W++,OPEN_TAG:W++,OPEN_TAG_SLASH:W++,ATTRIB:W++,ATTRIB_NAME:W++,ATTRIB_NAME_SAW_WHITE:W++,ATTRIB_VALUE:W++,ATTRIB_VALUE_QUOTED:W++,ATTRIB_VALUE_CLOSED:W++,ATTRIB_VALUE_UNQUOTED:W++,ATTRIB_VALUE_ENTITY_Q:W++,ATTRIB_VALUE_ENTITY_U:W++,CLOSE_TAG:W++,CLOSE_TAG_SAW_WHITE:W++,SCRIPT:W++,SCRIPT_ENDING:W++},E.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},E.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(E.ENTITIES).forEach(function(z){var O=E.ENTITIES[z],ae="number"==typeof O?String.fromCharCode(O):O;E.ENTITIES[z]=ae}),E.STATE)E.STATE[E.STATE[Te]]=Te;function de(z,O,ae){z[O]&&z[O](ae)}function we(z,O,ae){z.textNode&&Ie(z),de(z,O,ae)}function Ie(z){z.textNode=De(z.opt,z.textNode),z.textNode&&de(z,"ontext",z.textNode),z.textNode=""}function De(z,O){return z.trim&&(O=O.trim()),z.normalize&&(O=O.replace(/\s+/g," ")),O}function et(z,O){return Ie(z),z.trackPosition&&(O+="\nLine: "+z.line+"\nColumn: "+z.column+"\nChar: "+z.c),O=new Error(O),z.error=O,de(z,"onerror",O),z}function Ye(z){return z.sawRoot&&!z.closedRoot&&Ce(z,"Unclosed root tag"),z.state!==W.BEGIN&&z.state!==W.BEGIN_WHITESPACE&&z.state!==W.TEXT&&et(z,"Unexpected end"),Ie(z),z.c="",z.closed=!0,de(z,"onend"),k.call(z,z.strict,z.opt),z}function Ce(z,O){if("object"!=typeof z||!(z instanceof k))throw new Error("bad call to strictFail");z.strict&&et(z,O)}function Ne(z){z.strict||(z.tagName=z.tagName[z.looseCase]());var O=z.tags[z.tags.length-1]||z,ae=z.tag={name:z.tagName,attributes:{}};z.opt.xmlns&&(ae.ns=O.ns),z.attribList.length=0,we(z,"onopentagstart",ae)}function ke(z,O){var H=z.indexOf(":")<0?["",z]:z.split(":"),Fe=H[0],Ke=H[1];return O&&"xmlns"===z&&(Fe="xmlns",Ke=""),{prefix:Fe,local:Ke}}function He(z){if(z.strict||(z.attribName=z.attribName[z.looseCase]()),-1!==z.attribList.indexOf(z.attribName)||z.tag.attributes.hasOwnProperty(z.attribName))z.attribName=z.attribValue="";else{if(z.opt.xmlns){var O=ke(z.attribName,!0),H=O.local;if("xmlns"===O.prefix)if("xml"===H&&z.attribValue!==C)Ce(z,"xml: prefix must be bound to "+C+"\nActual: "+z.attribValue);else if("xmlns"===H&&z.attribValue!==Y)Ce(z,"xmlns: prefix must be bound to "+Y+"\nActual: "+z.attribValue);else{var Fe=z.tag,Ke=z.tags[z.tags.length-1]||z;Fe.ns===Ke.ns&&(Fe.ns=Object.create(Ke.ns)),Fe.ns[H]=z.attribValue}z.attribList.push([z.attribName,z.attribValue])}else z.tag.attributes[z.attribName]=z.attribValue,we(z,"onattribute",{name:z.attribName,value:z.attribValue});z.attribName=z.attribValue=""}}function me(z,O){if(z.opt.xmlns){var ae=z.tag,H=ke(z.tagName);ae.prefix=H.prefix,ae.local=H.local,ae.uri=ae.ns[H.prefix]||"",ae.prefix&&!ae.uri&&(Ce(z,"Unbound namespace prefix: "+JSON.stringify(z.tagName)),ae.uri=H.prefix),ae.ns&&(z.tags[z.tags.length-1]||z).ns!==ae.ns&&Object.keys(ae.ns).forEach(function(ot){we(z,"onopennamespace",{prefix:ot,uri:ae.ns[ot]})});for(var Ke=0,fe=z.attribList.length;Ke<fe;Ke++){var ee=z.attribList[Ke],G=ee[0],R=ee[1],I=ke(G,!0),ue=I.prefix,ze=""===ue?"":ae.ns[ue]||"",Je={name:G,value:R,prefix:ue,local:I.local,uri:ze};ue&&"xmlns"!==ue&&!ze&&(Ce(z,"Unbound namespace prefix: "+JSON.stringify(ue)),Je.uri=ue),z.tag.attributes[G]=Je,we(z,"onattribute",Je)}z.attribList.length=0}z.tag.isSelfClosing=!!O,z.sawRoot=!0,z.tags.push(z.tag),we(z,"onopentag",z.tag),O||(z.state=z.noscript||"script"!==z.tagName.toLowerCase()?W.TEXT:W.SCRIPT,z.tag=null,z.tagName=""),z.attribName=z.attribValue="",z.attribList.length=0}function Se(z){if(!z.tagName)return Ce(z,"Weird empty close tag."),z.textNode+="</>",void(z.state=W.TEXT);if(z.script){if("script"!==z.tagName)return z.script+="</"+z.tagName+">",z.tagName="",void(z.state=W.SCRIPT);we(z,"onscript",z.script),z.script=""}var O=z.tags.length,ae=z.tagName;z.strict||(ae=ae[z.looseCase]());for(var H=ae;O--&&z.tags[O].name!==H;)Ce(z,"Unexpected close tag");if(O<0)return Ce(z,"Unmatched closing tag: "+z.tagName),z.textNode+="</"+z.tagName+">",void(z.state=W.TEXT);z.tagName=ae;for(var Ke=z.tags.length;Ke-- >O;){var fe=z.tag=z.tags.pop();z.tagName=z.tag.name,we(z,"onclosetag",z.tagName);var ee={};for(var G in fe.ns)ee[G]=fe.ns[G];z.opt.xmlns&&fe.ns!==(z.tags[z.tags.length-1]||z).ns&&Object.keys(fe.ns).forEach(function(I){we(z,"onclosenamespace",{prefix:I,uri:fe.ns[I]})})}0===O&&(z.closedRoot=!0),z.tagName=z.attribValue=z.attribName="",z.attribList.length=0,z.state=W.TEXT}function qe(z){var H,O=z.entity,ae=O.toLowerCase(),Fe="";return z.ENTITIES[O]?z.ENTITIES[O]:z.ENTITIES[ae]?z.ENTITIES[ae]:("#"===(O=ae).charAt(0)&&("x"===O.charAt(1)?(O=O.slice(2),Fe=(H=parseInt(O,16)).toString(16)):(O=O.slice(1),Fe=(H=parseInt(O,10)).toString(10))),O=O.replace(/^0+/,""),isNaN(H)||Fe.toLowerCase()!==O?(Ce(z,"Invalid character entity"),"&"+z.entity+";"):String.fromCodePoint(H))}function lt(z,O){"<"===O?(z.state=W.OPEN_WAKA,z.startTagPosition=z.position):V(O)||(Ce(z,"Non-whitespace before first tag."),z.textNode=O,z.state=W.TEXT)}function We(z,O){var ae="";return O<z.length&&(ae=z.charAt(O)),ae}W=E.STATE,String.fromCodePoint||(z=String.fromCharCode,O=Math.floor,ae=function(){var Fe=[],ee=-1,G=arguments.length;if(!G)return"";for(var R="";++ee<G;){var I=Number(arguments[ee]);if(!isFinite(I)||I<0||I>1114111||O(I)!==I)throw RangeError("Invalid code point: "+I);I<=65535?Fe.push(I):Fe.push(55296+((I-=65536)>>10),I%1024+56320),(ee+1===G||Fe.length>16384)&&(R+=z.apply(null,Fe),Fe.length=0)}return R},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ae,configurable:!0,writable:!0}):String.fromCodePoint=ae)}(Z)},8280:function(){!function(ne,Z){"use strict";if(!ne.setImmediate){var A,g=1,E={},b=!1,k=ne.document,le=Object.getPrototypeOf&&Object.getPrototypeOf(ne);le=le&&le.setTimeout?le:ne,"[object process]"==={}.toString.call(ne.process)?function F(){A=function(K){process.nextTick(function(){M(K)})}}():function L(){if(ne.postMessage&&!ne.importScripts){var K=!0,re=ne.onmessage;return ne.onmessage=function(){K=!1},ne.postMessage("","*"),ne.onmessage=re,K}}()?function j(){var K="setImmediate$"+Math.random()+"$",re=function(te){te.source===ne&&"string"==typeof te.data&&0===te.data.indexOf(K)&&M(+te.data.slice(K.length))};ne.addEventListener?ne.addEventListener("message",re,!1):ne.attachEvent("onmessage",re),A=function(te){ne.postMessage(K+te,"*")}}():ne.MessageChannel?function oe(){var K=new MessageChannel;K.port1.onmessage=function(re){M(re.data)},A=function(re){K.port2.postMessage(re)}}():k&&"onreadystatechange"in k.createElement("script")?function C(){var K=k.documentElement;A=function(re){var te=k.createElement("script");te.onreadystatechange=function(){M(re),te.onreadystatechange=null,K.removeChild(te),te=null},K.appendChild(te)}}():function Y(){A=function(K){setTimeout(M,0,K)}}(),le.setImmediate=function P(K){"function"!=typeof K&&(K=new Function(""+K));for(var re=new Array(arguments.length-1),te=0;te<re.length;te++)re[te]=arguments[te+1];return E[g]={callback:K,args:re},A(g),g++},le.clearImmediate=_}function _(K){delete E[K]}function M(K){if(b)setTimeout(M,0,K);else{var re=E[K];if(re){b=!0;try{!function y(K){var re=K.callback,te=K.args;switch(te.length){case 0:re();break;case 1:re(te[0]);break;case 2:re(te[0],te[1]);break;case 3:re(te[0],te[1],te[2]);break;default:re.apply(undefined,te)}}(re)}finally{_(K),b=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(ne,Z,g)=>{ne.exports=k;var E=g(2016).EventEmitter;function k(){E.call(this)}g(6698)(k,E),k.Readable=g(842),k.Writable=g(7597),k.Duplex=g(2232),k.Transform=g(555),k.PassThrough=g(8226),k.finished=g(1227),k.pipeline=g(2345),k.Stream=k,k.prototype.pipe=function(A,P){var _=this;function y(Y){A.writable&&!1===A.write(Y)&&_.pause&&_.pause()}function M(){_.readable&&_.resume&&_.resume()}_.on("data",y),A.on("drain",M),!A._isStdio&&(!P||!1!==P.end)&&(_.on("end",L),_.on("close",j));var F=!1;function L(){F||(F=!0,A.end())}function j(){F||(F=!0,"function"==typeof A.destroy&&A.destroy())}function oe(Y){if(C(),0===E.listenerCount(this,"error"))throw Y}function C(){_.removeListener("data",y),A.removeListener("drain",M),_.removeListener("end",L),_.removeListener("close",j),_.removeListener("error",oe),A.removeListener("error",oe),_.removeListener("end",C),_.removeListener("close",C),A.removeListener("close",C)}return _.on("error",oe),A.on("error",oe),_.on("end",C),_.on("close",C),A.on("close",C),A.emit("pipe",_),A}},9555:ne=>{"use strict";var g={};function E(_,y,M){M||(M=Error);var L=function(j){function oe(C,Y,le){return j.call(this,function F(j,oe,C){return"string"==typeof y?y:y(j,oe,C)}(C,Y,le))||this}return function Z(_,y){_.prototype=Object.create(y.prototype),_.prototype.constructor=_,_.__proto__=y}(oe,j),oe}(M);L.prototype.name=M.name,L.prototype.code=_,g[_]=L}function b(_,y){if(Array.isArray(_)){var M=_.length;return _=_.map(function(F){return String(F)}),M>2?"one of ".concat(y," ").concat(_.slice(0,M-1).join(", "),", or ")+_[M-1]:2===M?"one of ".concat(y," ").concat(_[0]," or ").concat(_[1]):"of ".concat(y," ").concat(_[0])}return"of ".concat(y," ").concat(String(_))}E("ERR_INVALID_OPT_VALUE",function(_,y){return'The value "'+y+'" is invalid for option "'+_+'"'},TypeError),E("ERR_INVALID_ARG_TYPE",function(_,y,M){var F,L;if("string"==typeof y&&function k(_,y,M){return _.substr(!M||M<0?0:+M,y.length)===y}(y,"not ")?(F="must not be",y=y.replace(/^not /,"")):F="must be",function A(_,y,M){return(void 0===M||M>_.length)&&(M=_.length),_.substring(M-y.length,M)===y}(_," argument"))L="The ".concat(_," ").concat(F," ").concat(b(y,"type"));else{var j=function P(_,y,M){return"number"!=typeof M&&(M=0),!(M+y.length>_.length)&&-1!==_.indexOf(y,M)}(_,".")?"property":"argument";L='The "'.concat(_,'" ').concat(j," ").concat(F," ").concat(b(y,"type"))}return L+". Received type ".concat(typeof M)},TypeError),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),E("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),E("ERR_STREAM_PREMATURE_CLOSE","Premature close"),E("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),E("ERR_STREAM_WRITE_AFTER_END","write after end"),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ne.exports.q=g},2232:(ne,Z,g)=>{"use strict";var E=Object.keys||function(L){var j=[];for(var oe in L)j.push(oe);return j};ne.exports=y;var b=g(842),k=g(7597);g(6698)(y,b);for(var A=E(k.prototype),P=0;P<A.length;P++){var _=A[P];y.prototype[_]||(y.prototype[_]=k.prototype[_])}function y(L){if(!(this instanceof y))return new y(L);b.call(this,L),k.call(this,L),this.allowHalfOpen=!0,L&&(!1===L.readable&&(this.readable=!1),!1===L.writable&&(this.writable=!1),!1===L.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",M)))}function M(){this._writableState.ended||process.nextTick(F,this)}function F(L){L.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(j){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=j,this._writableState.destroyed=j)}})},8226:(ne,Z,g)=>{"use strict";ne.exports=b;var E=g(555);function b(k){if(!(this instanceof b))return new b(k);E.call(this,k)}g(6698)(b,E),b.prototype._transform=function(k,A,P){P(null,k)}},842:(ne,Z,g)=>{"use strict";var E;ne.exports=de,de.ReadableState=Te,g(2016);var L,k=function(ee,G){return ee.listeners(G).length},A=g(3951),P=g(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},F=g(964);L=F&&F.debuglog?F.debuglog("stream"):function(){};var V,x,B,j=g(2998),oe=g(3992),Y=g(4962).getHighWaterMark,le=g(9555).q,K=le.ERR_INVALID_ARG_TYPE,re=le.ERR_STREAM_PUSH_AFTER_EOF,te=le.ERR_METHOD_NOT_IMPLEMENTED,q=le.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g(6698)(de,A);var D=oe.errorOrDestroy,he=["error","close","destroy","pause","resume"];function Te(fe,ee,G){E=E||g(2232),"boolean"!=typeof G&&(G=ee instanceof E),this.objectMode=!!(fe=fe||{}).objectMode,G&&(this.objectMode=this.objectMode||!!fe.readableObjectMode),this.highWaterMark=Y(this,fe,"readableHighWaterMark",G),this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.destroyed=!1,this.defaultEncoding=fe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,fe.encoding&&(V||(V=g(2024).StringDecoder),this.decoder=new V(fe.encoding),this.encoding=fe.encoding)}function de(fe){if(E=E||g(2232),!(this instanceof de))return new de(fe);this._readableState=new Te(fe,this,this instanceof E),this.readable=!0,fe&&("function"==typeof fe.read&&(this._read=fe.read),"function"==typeof fe.destroy&&(this._destroy=fe.destroy)),A.call(this)}function we(fe,ee,G,R,I){L("readableAddChunk",ee);var ge,ue=fe._readableState;if(null===ee)ue.reading=!1,function Ne(fe,ee){if(L("onEofChunk"),!ee.ended){if(ee.decoder){var G=ee.decoder.end();G&&G.length&&(ee.buffer.push(G),ee.length+=ee.objectMode?1:G.length)}ee.ended=!0,ee.sync?ke(fe):(ee.needReadable=!1,ee.emittedReadable||(ee.emittedReadable=!0,He(fe)))}}(fe,ue);else if(I||(ge=function De(fe,ee){var G;return!function M(fe){return P.isBuffer(fe)||fe instanceof _}(ee)&&"string"!=typeof ee&&void 0!==ee&&!fe.objectMode&&(G=new K("chunk",["string","Buffer","Uint8Array"],ee)),G}(ue,ee)),ge)D(fe,ge);else if(ue.objectMode||ee&&ee.length>0)if("string"!=typeof ee&&!ue.objectMode&&Object.getPrototypeOf(ee)!==P.prototype&&(ee=function y(fe){return P.from(fe)}(ee)),R)ue.endEmitted?D(fe,new q):Ie(fe,ue,ee,!0);else if(ue.ended)D(fe,new re);else{if(ue.destroyed)return!1;ue.reading=!1,ue.decoder&&!G?(ee=ue.decoder.write(ee),ue.objectMode||0!==ee.length?Ie(fe,ue,ee,!1):me(fe,ue)):Ie(fe,ue,ee,!1)}else R||(ue.reading=!1,me(fe,ue));return!ue.ended&&(ue.length<ue.highWaterMark||0===ue.length)}function Ie(fe,ee,G,R){ee.flowing&&0===ee.length&&!ee.sync?(ee.awaitDrain=0,fe.emit("data",G)):(ee.length+=ee.objectMode?1:G.length,R?ee.buffer.unshift(G):ee.buffer.push(G),ee.needReadable&&ke(fe)),me(fe,ee)}Object.defineProperty(de.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),de.prototype.destroy=oe.destroy,de.prototype._undestroy=oe.undestroy,de.prototype._destroy=function(fe,ee){ee(fe)},de.prototype.push=function(fe,ee){var R,G=this._readableState;return G.objectMode?R=!0:"string"==typeof fe&&((ee=ee||G.defaultEncoding)!==G.encoding&&(fe=P.from(fe,ee),ee=""),R=!0),we(this,fe,ee,!1,R)},de.prototype.unshift=function(fe){return we(this,fe,null,!0,!1)},de.prototype.isPaused=function(){return!1===this._readableState.flowing},de.prototype.setEncoding=function(fe){V||(V=g(2024).StringDecoder);var ee=new V(fe);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;for(var G=this._readableState.buffer.head,R="";null!==G;)R+=ee.write(G.data),G=G.next;return this._readableState.buffer.clear(),""!==R&&this._readableState.buffer.push(R),this._readableState.length=R.length,this};var et=1073741824;function Ce(fe,ee){return fe<=0||0===ee.length&&ee.ended?0:ee.objectMode?1:fe!=fe?ee.flowing&&ee.length?ee.buffer.head.data.length:ee.length:(fe>ee.highWaterMark&&(ee.highWaterMark=function Ye(fe){return fe>=et?fe=et:(fe--,fe|=fe>>>1,fe|=fe>>>2,fe|=fe>>>4,fe|=fe>>>8,fe|=fe>>>16,fe++),fe}(fe)),fe<=ee.length?fe:ee.ended?ee.length:(ee.needReadable=!0,0))}function ke(fe){var ee=fe._readableState;L("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(L("emitReadable",ee.flowing),ee.emittedReadable=!0,process.nextTick(He,fe))}function He(fe){var ee=fe._readableState;L("emitReadable_",ee.destroyed,ee.length,ee.ended),!ee.destroyed&&(ee.length||ee.ended)&&(fe.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,O(fe)}function me(fe,ee){ee.readingMore||(ee.readingMore=!0,process.nextTick(Se,fe,ee))}function Se(fe,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&0===ee.length);){var G=ee.length;if(L("maybeReadMore read 0"),fe.read(0),G===ee.length)break}ee.readingMore=!1}function lt(fe){var ee=fe._readableState;ee.readableListening=fe.listenerCount("readable")>0,ee.resumeScheduled&&!ee.paused?ee.flowing=!0:fe.listenerCount("data")>0&&fe.resume()}function We(fe){L("readable nexttick read 0"),fe.read(0)}function z(fe,ee){L("resume",ee.reading),ee.reading||fe.read(0),ee.resumeScheduled=!1,fe.emit("resume"),O(fe),ee.flowing&&!ee.reading&&fe.read(0)}function O(fe){var ee=fe._readableState;for(L("flow",ee.flowing);ee.flowing&&null!==fe.read(););}function ae(fe,ee){return 0===ee.length?null:(ee.objectMode?G=ee.buffer.shift():!fe||fe>=ee.length?(G=ee.decoder?ee.buffer.join(""):1===ee.buffer.length?ee.buffer.first():ee.buffer.concat(ee.length),ee.buffer.clear()):G=ee.buffer.consume(fe,ee.decoder),G);var G}function H(fe){var ee=fe._readableState;L("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,process.nextTick(Fe,ee,fe))}function Fe(fe,ee){if(L("endReadableNT",fe.endEmitted,fe.length),!fe.endEmitted&&0===fe.length&&(fe.endEmitted=!0,ee.readable=!1,ee.emit("end"),fe.autoDestroy)){var G=ee._writableState;(!G||G.autoDestroy&&G.finished)&&ee.destroy()}}function Ke(fe,ee){for(var G=0,R=fe.length;G<R;G++)if(fe[G]===ee)return G;return-1}de.prototype.read=function(fe){L("read",fe),fe=parseInt(fe,10);var ee=this._readableState,G=fe;if(0!==fe&&(ee.emittedReadable=!1),0===fe&&ee.needReadable&&((0!==ee.highWaterMark?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return L("read: emitReadable",ee.length,ee.ended),0===ee.length&&ee.ended?H(this):ke(this),null;if(0===(fe=Ce(fe,ee))&&ee.ended)return 0===ee.length&&H(this),null;var I,R=ee.needReadable;return L("need readable",R),(0===ee.length||ee.length-fe<ee.highWaterMark)&&L("length less than watermark",R=!0),ee.ended||ee.reading?L("reading or ended",R=!1):R&&(L("do read"),ee.reading=!0,ee.sync=!0,0===ee.length&&(ee.needReadable=!0),this._read(ee.highWaterMark),ee.sync=!1,ee.reading||(fe=Ce(G,ee))),null===(I=fe>0?ae(fe,ee):null)?(ee.needReadable=ee.length<=ee.highWaterMark,fe=0):(ee.length-=fe,ee.awaitDrain=0),0===ee.length&&(ee.ended||(ee.needReadable=!0),G!==fe&&ee.ended&&H(this)),null!==I&&this.emit("data",I),I},de.prototype._read=function(fe){D(this,new te("_read()"))},de.prototype.pipe=function(fe,ee){var G=this,R=this._readableState;switch(R.pipesCount){case 0:R.pipes=fe;break;case 1:R.pipes=[R.pipes,fe];break;default:R.pipes.push(fe)}R.pipesCount+=1,L("pipe count=%d opts=%j",R.pipesCount,ee);var ue=ee&&!1===ee.end||fe===process.stdout||fe===process.stderr?J:ze;function ze(){L("onend"),fe.end()}R.endEmitted?process.nextTick(ue):G.once("end",ue),fe.on("unpipe",function ge(S,ce){L("onunpipe"),S===G&&ce&&!1===ce.hasUnpiped&&(ce.hasUnpiped=!0,function kt(){L("cleanup"),fe.removeListener("close",rn),fe.removeListener("finish",Re),fe.removeListener("drain",Je),fe.removeListener("error",Wt),fe.removeListener("unpipe",ge),G.removeListener("end",ze),G.removeListener("end",J),G.removeListener("data",_t),ot=!0,R.awaitDrain&&(!fe._writableState||fe._writableState.needDrain)&&Je()}())});var Je=function qe(fe){return function(){var G=fe._readableState;L("pipeOnDrain",G.awaitDrain),G.awaitDrain&&G.awaitDrain--,0===G.awaitDrain&&k(fe,"data")&&(G.flowing=!0,O(fe))}}(G);fe.on("drain",Je);var ot=!1;function _t(S){L("ondata");var ce=fe.write(S);L("dest.write",ce),!1===ce&&((1===R.pipesCount&&R.pipes===fe||R.pipesCount>1&&-1!==Ke(R.pipes,fe))&&!ot&&(L("false write response, pause",R.awaitDrain),R.awaitDrain++),G.pause())}function Wt(S){L("onerror",S),J(),fe.removeListener("error",Wt),0===k(fe,"error")&&D(fe,S)}function rn(){fe.removeListener("finish",Re),J()}function Re(){L("onfinish"),fe.removeListener("close",rn),J()}function J(){L("unpipe"),G.unpipe(fe)}return G.on("data",_t),function W(fe,ee,G){if("function"==typeof fe.prependListener)return fe.prependListener(ee,G);fe._events&&fe._events[ee]?Array.isArray(fe._events[ee])?fe._events[ee].unshift(G):fe._events[ee]=[G,fe._events[ee]]:fe.on(ee,G)}(fe,"error",Wt),fe.once("close",rn),fe.once("finish",Re),fe.emit("pipe",G),R.flowing||(L("pipe resume"),G.resume()),fe},de.prototype.unpipe=function(fe){var ee=this._readableState,G={hasUnpiped:!1};if(0===ee.pipesCount)return this;if(1===ee.pipesCount)return fe&&fe!==ee.pipes||(fe||(fe=ee.pipes),ee.pipes=null,ee.pipesCount=0,ee.flowing=!1,fe&&fe.emit("unpipe",this,G)),this;if(!fe){var R=ee.pipes,I=ee.pipesCount;ee.pipes=null,ee.pipesCount=0,ee.flowing=!1;for(var ue=0;ue<I;ue++)R[ue].emit("unpipe",this,{hasUnpiped:!1});return this}var ge=Ke(ee.pipes,fe);return-1===ge||(ee.pipes.splice(ge,1),ee.pipesCount-=1,1===ee.pipesCount&&(ee.pipes=ee.pipes[0]),fe.emit("unpipe",this,G)),this},de.prototype.addListener=de.prototype.on=function(fe,ee){var G=A.prototype.on.call(this,fe,ee),R=this._readableState;return"data"===fe?(R.readableListening=this.listenerCount("readable")>0,!1!==R.flowing&&this.resume()):"readable"===fe&&!R.endEmitted&&!R.readableListening&&(R.readableListening=R.needReadable=!0,R.flowing=!1,R.emittedReadable=!1,L("on readable",R.length,R.reading),R.length?ke(this):R.reading||process.nextTick(We,this)),G},de.prototype.removeListener=function(fe,ee){var G=A.prototype.removeListener.call(this,fe,ee);return"readable"===fe&&process.nextTick(lt,this),G},de.prototype.removeAllListeners=function(fe){var ee=A.prototype.removeAllListeners.apply(this,arguments);return("readable"===fe||void 0===fe)&&process.nextTick(lt,this),ee},de.prototype.resume=function(){var fe=this._readableState;return fe.flowing||(L("resume"),fe.flowing=!fe.readableListening,function _e(fe,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,process.nextTick(z,fe,ee))}(this,fe)),fe.paused=!1,this},de.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},de.prototype.wrap=function(fe){var ee=this,G=this._readableState,R=!1;for(var I in fe.on("end",function(){if(L("wrapped end"),G.decoder&&!G.ended){var ge=G.decoder.end();ge&&ge.length&&ee.push(ge)}ee.push(null)}),fe.on("data",function(ge){L("wrapped data"),G.decoder&&(ge=G.decoder.write(ge)),G.objectMode&&null==ge||!(G.objectMode||ge&&ge.length)||ee.push(ge)||(R=!0,fe.pause())}),fe)void 0===this[I]&&"function"==typeof fe[I]&&(this[I]=function(ze){return function(){return fe[ze].apply(fe,arguments)}}(I));for(var ue=0;ue<he.length;ue++)fe.on(he[ue],this.emit.bind(this,he[ue]));return this._read=function(ge){L("wrapped _read",ge),R&&(R=!1,fe.resume())},this},"function"==typeof Symbol&&(de.prototype[Symbol.asyncIterator]=function(){return void 0===x&&(x=g(2590)),x(this)}),Object.defineProperty(de.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(de.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(de.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),de._fromList=ae,Object.defineProperty(de.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(de.from=function(fe,ee){return void 0===B&&(B=g(5374)),B(de,fe,ee)})},555:(ne,Z,g)=>{"use strict";ne.exports=M;var E=g(9555).q,b=E.ERR_METHOD_NOT_IMPLEMENTED,k=E.ERR_MULTIPLE_CALLBACK,A=E.ERR_TRANSFORM_ALREADY_TRANSFORMING,P=E.ERR_TRANSFORM_WITH_LENGTH_0,_=g(2232);function y(j,oe){var C=this._transformState;C.transforming=!1;var Y=C.writecb;if(null===Y)return this.emit("error",new k);C.writechunk=null,C.writecb=null,null!=oe&&this.push(oe),Y(j);var le=this._readableState;le.reading=!1,(le.needReadable||le.length<le.highWaterMark)&&this._read(le.highWaterMark)}function M(j){if(!(this instanceof M))return new M(j);_.call(this,j),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,j&&("function"==typeof j.transform&&(this._transform=j.transform),"function"==typeof j.flush&&(this._flush=j.flush)),this.on("prefinish",F)}function F(){var j=this;"function"!=typeof this._flush||this._readableState.destroyed?L(this,null,null):this._flush(function(oe,C){L(j,oe,C)})}function L(j,oe,C){if(oe)return j.emit("error",oe);if(null!=C&&j.push(C),j._writableState.length)throw new P;if(j._transformState.transforming)throw new A;return j.push(null)}g(6698)(M,_),M.prototype.push=function(j,oe){return this._transformState.needTransform=!1,_.prototype.push.call(this,j,oe)},M.prototype._transform=function(j,oe,C){C(new b("_transform()"))},M.prototype._write=function(j,oe,C){var Y=this._transformState;if(Y.writecb=C,Y.writechunk=j,Y.writeencoding=oe,!Y.transforming){var le=this._readableState;(Y.needTransform||le.needReadable||le.length<le.highWaterMark)&&this._read(le.highWaterMark)}},M.prototype._read=function(j){var oe=this._transformState;null===oe.writechunk||oe.transforming?oe.needTransform=!0:(oe.transforming=!0,this._transform(oe.writechunk,oe.writeencoding,oe.afterTransform))},M.prototype._destroy=function(j,oe){_.prototype._destroy.call(this,j,function(C){oe(C)})}},7597:(ne,Z,g)=>{"use strict";function b(O){var ae=this;this.next=null,this.entry=null,this.finish=function(){!function z(O,ae,H){var Fe=O.entry;for(O.entry=null;Fe;){var Ke=Fe.callback;ae.pendingcb--,Ke(H),Fe=Fe.next}ae.corkedRequestsFree.next=O}(ae,O)}}var k;ne.exports=Te,Te.WritableState=he;var W,A={deprecate:g(496)},P=g(3951),_=g(9007).Buffer,y=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},L=g(3992),oe=g(4962).getHighWaterMark,C=g(9555).q,Y=C.ERR_INVALID_ARG_TYPE,le=C.ERR_METHOD_NOT_IMPLEMENTED,K=C.ERR_MULTIPLE_CALLBACK,re=C.ERR_STREAM_CANNOT_PIPE,te=C.ERR_STREAM_DESTROYED,q=C.ERR_STREAM_NULL_VALUES,V=C.ERR_STREAM_WRITE_AFTER_END,x=C.ERR_UNKNOWN_ENCODING,B=L.errorOrDestroy;function D(){}function he(O,ae,H){k=k||g(2232),"boolean"!=typeof H&&(H=ae instanceof k),this.objectMode=!!(O=O||{}).objectMode,H&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=oe(this,O,"writableHighWaterMark",H),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===O.decodeStrings),this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ke){!function Ne(O,ae){var H=O._writableState,Fe=H.sync,Ke=H.writecb;if("function"!=typeof Ke)throw new K;if(function Ce(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}(H),ae)!function Ye(O,ae,H,Fe,Ke){--ae.pendingcb,H?(process.nextTick(Ke,Fe),process.nextTick(We,O,ae),O._writableState.errorEmitted=!0,B(O,Fe)):(Ke(Fe),O._writableState.errorEmitted=!0,B(O,Fe),We(O,ae))}(O,H,Fe,ae,Ke);else{var fe=Se(H)||O.destroyed;!fe&&!H.corked&&!H.bufferProcessing&&H.bufferedRequest&&me(O,H),Fe?process.nextTick(ke,O,H,fe,Ke):ke(O,H,fe,Ke)}}(ae,Ke)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==O.emitClose,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function Te(O){var ae=this instanceof(k=k||g(2232));if(!ae&&!W.call(Te,this))return new Te(O);this._writableState=new he(O,this,ae),this.writable=!0,O&&("function"==typeof O.write&&(this._write=O.write),"function"==typeof O.writev&&(this._writev=O.writev),"function"==typeof O.destroy&&(this._destroy=O.destroy),"function"==typeof O.final&&(this._final=O.final)),P.call(this)}function et(O,ae,H,Fe,Ke,fe,ee){ae.writelen=Fe,ae.writecb=ee,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new te("write")):H?O._writev(Ke,ae.onwrite):O._write(Ke,fe,ae.onwrite),ae.sync=!1}function ke(O,ae,H,Fe){H||function He(O,ae){0===ae.length&&ae.needDrain&&(ae.needDrain=!1,O.emit("drain"))}(O,ae),ae.pendingcb--,Fe(),We(O,ae)}function me(O,ae){ae.bufferProcessing=!0;var H=ae.bufferedRequest;if(O._writev&&H&&H.next){var Ke=new Array(ae.bufferedRequestCount),fe=ae.corkedRequestsFree;fe.entry=H;for(var ee=0,G=!0;H;)Ke[ee]=H,H.isBuf||(G=!1),H=H.next,ee+=1;Ke.allBuffers=G,et(O,ae,!0,ae.length,Ke,"",fe.finish),ae.pendingcb++,ae.lastBufferedRequest=null,fe.next?(ae.corkedRequestsFree=fe.next,fe.next=null):ae.corkedRequestsFree=new b(ae),ae.bufferedRequestCount=0}else{for(;H;){var R=H.chunk;if(et(O,ae,!1,ae.objectMode?1:R.length,R,H.encoding,H.callback),H=H.next,ae.bufferedRequestCount--,ae.writing)break}null===H&&(ae.lastBufferedRequest=null)}ae.bufferedRequest=H,ae.bufferProcessing=!1}function Se(O){return O.ending&&0===O.length&&null===O.bufferedRequest&&!O.finished&&!O.writing}function qe(O,ae){O._final(function(H){ae.pendingcb--,H&&B(O,H),ae.prefinished=!0,O.emit("prefinish"),We(O,ae)})}function We(O,ae){var H=Se(ae);if(H&&(function lt(O,ae){!ae.prefinished&&!ae.finalCalled&&("function"!=typeof O._final||ae.destroyed?(ae.prefinished=!0,O.emit("prefinish")):(ae.pendingcb++,ae.finalCalled=!0,process.nextTick(qe,O,ae)))}(O,ae),0===ae.pendingcb&&(ae.finished=!0,O.emit("finish"),ae.autoDestroy))){var Fe=O._readableState;(!Fe||Fe.autoDestroy&&Fe.endEmitted)&&O.destroy()}return H}g(6698)(Te,P),he.prototype.getBuffer=function(){for(var ae=this.bufferedRequest,H=[];ae;)H.push(ae),ae=ae.next;return H},function(){try{Object.defineProperty(he.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(Te,Symbol.hasInstance,{value:function(ae){return!!W.call(this,ae)||this===Te&&ae&&ae._writableState instanceof he}})):W=function(ae){return ae instanceof this},Te.prototype.pipe=function(){B(this,new re)},Te.prototype.write=function(O,ae,H){var Fe=this._writableState,Ke=!1,fe=!Fe.objectMode&&function F(O){return _.isBuffer(O)||O instanceof y}(O);return fe&&!_.isBuffer(O)&&(O=function M(O){return _.from(O)}(O)),"function"==typeof ae&&(H=ae,ae=null),fe?ae="buffer":ae||(ae=Fe.defaultEncoding),"function"!=typeof H&&(H=D),Fe.ending?function de(O,ae){var H=new V;B(O,H),process.nextTick(ae,H)}(this,H):(fe||function we(O,ae,H,Fe){var Ke;return null===H?Ke=new q:"string"!=typeof H&&!ae.objectMode&&(Ke=new Y("chunk",["string","Buffer"],H)),!Ke||(B(O,Ke),process.nextTick(Fe,Ke),!1)}(this,Fe,O,H))&&(Fe.pendingcb++,Ke=function De(O,ae,H,Fe,Ke,fe){if(!H){var ee=function Ie(O,ae,H){return!O.objectMode&&!1!==O.decodeStrings&&"string"==typeof ae&&(ae=_.from(ae,H)),ae}(ae,Fe,Ke);Fe!==ee&&(H=!0,Ke="buffer",Fe=ee)}var G=ae.objectMode?1:Fe.length;ae.length+=G;var R=ae.length<ae.highWaterMark;if(R||(ae.needDrain=!0),ae.writing||ae.corked){var I=ae.lastBufferedRequest;ae.lastBufferedRequest={chunk:Fe,encoding:Ke,isBuf:H,callback:fe,next:null},I?I.next=ae.lastBufferedRequest:ae.bufferedRequest=ae.lastBufferedRequest,ae.bufferedRequestCount+=1}else et(O,ae,!1,G,Fe,Ke,fe);return R}(this,Fe,fe,O,ae,H)),Ke},Te.prototype.cork=function(){this._writableState.corked++},Te.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&me(this,O))},Te.prototype.setDefaultEncoding=function(ae){if("string"==typeof ae&&(ae=ae.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ae+"").toLowerCase())>-1))throw new x(ae);return this._writableState.defaultEncoding=ae,this},Object.defineProperty(Te.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Te.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Te.prototype._write=function(O,ae,H){H(new le("_write()"))},Te.prototype._writev=null,Te.prototype.end=function(O,ae,H){var Fe=this._writableState;return"function"==typeof O?(H=O,O=null,ae=null):"function"==typeof ae&&(H=ae,ae=null),null!=O&&this.write(O,ae),Fe.corked&&(Fe.corked=1,this.uncork()),Fe.ending||function _e(O,ae,H){ae.ending=!0,We(O,ae),H&&(ae.finished?process.nextTick(H):O.once("finish",H)),ae.ended=!0,O.writable=!1}(this,Fe,H),this},Object.defineProperty(Te.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Te.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ae){this._writableState&&(this._writableState.destroyed=ae)}}),Te.prototype.destroy=L.destroy,Te.prototype._undestroy=L.undestroy,Te.prototype._destroy=function(O,ae){ae(O)}},2590:(ne,Z,g)=>{"use strict";var E;function b(V,x,B){return x=function k(V){var x=function A(V,x){if("object"!=typeof V||null===V)return V;var B=V[Symbol.toPrimitive];if(void 0!==B){var D=B.call(V,x||"default");if("object"!=typeof D)return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(V)}(V,"string");return"symbol"==typeof x?x:String(x)}(x),x in V?Object.defineProperty(V,x,{value:B,enumerable:!0,configurable:!0,writable:!0}):V[x]=B,V}var P=g(1227),_=Symbol("lastResolve"),y=Symbol("lastReject"),M=Symbol("error"),F=Symbol("ended"),L=Symbol("lastPromise"),j=Symbol("handlePromise"),oe=Symbol("stream");function C(V,x){return{value:V,done:x}}function Y(V){var x=V[_];if(null!==x){var B=V[oe].read();null!==B&&(V[L]=null,V[_]=null,V[y]=null,x(C(B,!1)))}}function le(V){process.nextTick(Y,V)}var re=Object.getPrototypeOf(function(){}),te=Object.setPrototypeOf((b(E={get stream(){return this[oe]},next:function(){var x=this,B=this[M];if(null!==B)return Promise.reject(B);if(this[F])return Promise.resolve(C(void 0,!0));if(this[oe].destroyed)return new Promise(function(Te,de){process.nextTick(function(){x[M]?de(x[M]):Te(C(void 0,!0))})});var he,D=this[L];if(D)he=new Promise(function K(V,x){return function(B,D){V.then(function(){x[F]?B(C(void 0,!0)):x[j](B,D)},D)}}(D,this));else{var W=this[oe].read();if(null!==W)return Promise.resolve(C(W,!1));he=new Promise(this[j])}return this[L]=he,he}},Symbol.asyncIterator,function(){return this}),b(E,"return",function(){var x=this;return new Promise(function(B,D){x[oe].destroy(null,function(he){he?D(he):B(C(void 0,!0))})})}),E),re);ne.exports=function(x){var B,D=Object.create(te,(b(B={},oe,{value:x,writable:!0}),b(B,_,{value:null,writable:!0}),b(B,y,{value:null,writable:!0}),b(B,M,{value:null,writable:!0}),b(B,F,{value:x._readableState.endEmitted,writable:!0}),b(B,j,{value:function(W,Te){var de=D[oe].read();de?(D[L]=null,D[_]=null,D[y]=null,W(C(de,!1))):(D[_]=W,D[y]=Te)},writable:!0}),B));return D[L]=null,P(x,function(he){if(he&&"ERR_STREAM_PREMATURE_CLOSE"!==he.code){var W=D[y];return null!==W&&(D[L]=null,D[_]=null,D[y]=null,W(he)),void(D[M]=he)}var Te=D[_];null!==Te&&(D[L]=null,D[_]=null,D[y]=null,Te(C(void 0,!0))),D[F]=!0}),x.on("readable",le.bind(null,D)),D}},2998:(ne,Z,g)=>{"use strict";function E(le,K){var re=Object.keys(le);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(le);K&&(te=te.filter(function(q){return Object.getOwnPropertyDescriptor(le,q).enumerable})),re.push.apply(re,te)}return re}function b(le){for(var K=1;K<arguments.length;K++){var re=null!=arguments[K]?arguments[K]:{};K%2?E(Object(re),!0).forEach(function(te){k(le,te,re[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(re)):E(Object(re)).forEach(function(te){Object.defineProperty(le,te,Object.getOwnPropertyDescriptor(re,te))})}return le}function k(le,K,re){return(K=y(K))in le?Object.defineProperty(le,K,{value:re,enumerable:!0,configurable:!0,writable:!0}):le[K]=re,le}function P(le,K){for(var re=0;re<K.length;re++){var te=K[re];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(le,y(te.key),te)}}function y(le){var K=function M(le,K){if("object"!=typeof le||null===le)return le;var re=le[Symbol.toPrimitive];if(void 0!==re){var te=re.call(le,K||"default");if("object"!=typeof te)return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===K?String:Number)(le)}(le,"string");return"symbol"==typeof K?K:String(K)}var L=g(9007).Buffer,oe=g(9862).inspect,C=oe&&oe.custom||"inspect";function Y(le,K,re){L.prototype.copy.call(le,K,re)}ne.exports=function(){function le(){(function A(le,K){if(!(le instanceof K))throw new TypeError("Cannot call a class as a function")})(this,le),this.head=null,this.tail=null,this.length=0}return function _(le,K,re){K&&P(le.prototype,K),re&&P(le,re),Object.defineProperty(le,"prototype",{writable:!1})}(le,[{key:"push",value:function(re){var te={data:re,next:null};this.length>0?this.tail.next=te:this.head=te,this.tail=te,++this.length}},{key:"unshift",value:function(re){var te={data:re,next:this.head};0===this.length&&(this.tail=te),this.head=te,++this.length}},{key:"shift",value:function(){if(0!==this.length){var re=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,re}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(re){if(0===this.length)return"";for(var te=this.head,q=""+te.data;te=te.next;)q+=re+te.data;return q}},{key:"concat",value:function(re){if(0===this.length)return L.alloc(0);for(var te=L.allocUnsafe(re>>>0),q=this.head,V=0;q;)Y(q.data,te,V),V+=q.data.length,q=q.next;return te}},{key:"consume",value:function(re,te){var q;return re<this.head.data.length?(q=this.head.data.slice(0,re),this.head.data=this.head.data.slice(re)):q=re===this.head.data.length?this.shift():te?this._getString(re):this._getBuffer(re),q}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(re){var te=this.head,q=1,V=te.data;for(re-=V.length;te=te.next;){var x=te.data,B=re>x.length?x.length:re;if(V+=B===x.length?x:x.slice(0,re),0==(re-=B)){B===x.length?(++q,this.head=te.next?te.next:this.tail=null):(this.head=te,te.data=x.slice(B));break}++q}return this.length-=q,V}},{key:"_getBuffer",value:function(re){var te=L.allocUnsafe(re),q=this.head,V=1;for(q.data.copy(te),re-=q.data.length;q=q.next;){var x=q.data,B=re>x.length?x.length:re;if(x.copy(te,te.length-re,0,B),0==(re-=B)){B===x.length?(++V,this.head=q.next?q.next:this.tail=null):(this.head=q,q.data=x.slice(B));break}++V}return this.length-=V,te}},{key:C,value:function(re,te){return oe(this,b(b({},te),{},{depth:0,customInspect:!1}))}}]),le}()},3992:ne=>{"use strict";function g(P,_){k(P,_),E(P)}function E(P){P._writableState&&!P._writableState.emitClose||P._readableState&&!P._readableState.emitClose||P.emit("close")}function k(P,_){P.emit("error",_)}ne.exports={destroy:function Z(P,_){var y=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(P):P&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(k,this,P)):process.nextTick(k,this,P)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(P||null,function(L){!_&&L?y._writableState?y._writableState.errorEmitted?process.nextTick(E,y):(y._writableState.errorEmitted=!0,process.nextTick(g,y,L)):process.nextTick(g,y,L):_?(process.nextTick(E,y),_(L)):process.nextTick(E,y)}),this)},undestroy:function b(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function A(P,_){var y=P._readableState,M=P._writableState;y&&y.autoDestroy||M&&M.autoDestroy?P.destroy(_):P.emit("error",_)}}},1227:(ne,Z,g)=>{"use strict";var E=g(9555).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}ne.exports=function P(_,y,M){if("function"==typeof y)return P(_,null,y);y||(y={}),M=function b(_){var y=!1;return function(){if(!y){y=!0;for(var M=arguments.length,F=new Array(M),L=0;L<M;L++)F[L]=arguments[L];_.apply(this,F)}}}(M||k);var F=y.readable||!1!==y.readable&&_.readable,L=y.writable||!1!==y.writable&&_.writable,j=function(){_.writable||C()},oe=_._writableState&&_._writableState.finished,C=function(){L=!1,oe=!0,F||M.call(_)},Y=_._readableState&&_._readableState.endEmitted,le=function(){F=!1,Y=!0,L||M.call(_)},K=function(V){M.call(_,V)},re=function(){var V;return F&&!Y?((!_._readableState||!_._readableState.ended)&&(V=new E),M.call(_,V)):L&&!oe?((!_._writableState||!_._writableState.ended)&&(V=new E),M.call(_,V)):void 0},te=function(){_.req.on("finish",C)};return function A(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",C),_.on("abort",re),_.req?te():_.on("request",te)):L&&!_._writableState&&(_.on("end",j),_.on("close",j)),_.on("end",le),_.on("finish",C),!1!==y.error&&_.on("error",K),_.on("close",re),function(){_.removeListener("complete",C),_.removeListener("abort",re),_.removeListener("request",te),_.req&&_.req.removeListener("finish",C),_.removeListener("end",j),_.removeListener("close",j),_.removeListener("finish",C),_.removeListener("end",le),_.removeListener("error",K),_.removeListener("close",re)}}},5374:ne=>{ne.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(ne,Z,g)=>{"use strict";var E,k=g(9555).q,A=k.ERR_MISSING_ARGS,P=k.ERR_STREAM_DESTROYED;function _(C){if(C)throw C}function F(C){C()}function L(C,Y){return C.pipe(Y)}ne.exports=function oe(){for(var C=arguments.length,Y=new Array(C),le=0;le<C;le++)Y[le]=arguments[le];var K=function j(C){return C.length&&"function"==typeof C[C.length-1]?C.pop():_}(Y);if(Array.isArray(Y[0])&&(Y=Y[0]),Y.length<2)throw new A("streams");var re,te=Y.map(function(q,V){var x=V<Y.length-1;return function M(C,Y,le,K){K=function b(C){var Y=!1;return function(){Y||(Y=!0,C.apply(void 0,arguments))}}(K);var re=!1;C.on("close",function(){re=!0}),void 0===E&&(E=g(1227)),E(C,{readable:Y,writable:le},function(q){if(q)return K(q);re=!0,K()});var te=!1;return function(q){if(!re&&!te){if(te=!0,function y(C){return C.setHeader&&"function"==typeof C.abort}(C))return C.abort();if("function"==typeof C.destroy)return C.destroy();K(q||new P("pipe"))}}}(q,x,V>0,function(D){re||(re=D),D&&te.forEach(F),!x&&(te.forEach(F),K(re))})});return Y.reduce(L)}},4962:(ne,Z,g)=>{"use strict";var E=g(9555).q.ERR_INVALID_OPT_VALUE;ne.exports={getHighWaterMark:function k(A,P,_,y){var M=function b(A,P,_){return null!=A.highWaterMark?A.highWaterMark:P?A[_]:null}(P,y,_);if(null!=M){if(!isFinite(M)||Math.floor(M)!==M||M<0)throw new E(y?_:"highWaterMark",M);return Math.floor(M)}return A.objectMode?16:16384}}},3951:(ne,Z,g)=>{ne.exports=g(2016).EventEmitter},2024:(ne,Z,g)=>{"use strict";var E=g(4282).Buffer,b=E.isEncoding||function(te){switch((te=""+te)&&te.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function P(te){var q;switch(this.encoding=function A(te){var q=function k(te){if(!te)return"utf8";for(var q;;)switch(te){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return te;default:if(q)return;te=(""+te).toLowerCase(),q=!0}}(te);if("string"!=typeof q&&(E.isEncoding===b||!b(te)))throw new Error("Unknown encoding: "+te);return q||te}(te),this.encoding){case"utf16le":this.text=oe,this.end=C,q=4;break;case"utf8":this.fillLast=F,q=4;break;case"base64":this.text=Y,this.end=le,q=3;break;default:return this.write=K,void(this.end=re)}this.lastNeed=0,this.lastTotal=0,this.lastChar=E.allocUnsafe(q)}function _(te){return te<=127?0:te>>5==6?2:te>>4==14?3:te>>3==30?4:te>>6==2?-1:-2}function F(te){var q=this.lastTotal-this.lastNeed,V=function M(te,q,V){if(128!=(192&q[0]))return te.lastNeed=0,"\ufffd";if(te.lastNeed>1&&q.length>1){if(128!=(192&q[1]))return te.lastNeed=1,"\ufffd";if(te.lastNeed>2&&q.length>2&&128!=(192&q[2]))return te.lastNeed=2,"\ufffd"}}(this,te);return void 0!==V?V:this.lastNeed<=te.length?(te.copy(this.lastChar,q,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(te.copy(this.lastChar,q,0,te.length),void(this.lastNeed-=te.length))}function oe(te,q){if((te.length-q)%2==0){var V=te.toString("utf16le",q);if(V){var x=V.charCodeAt(V.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=te[te.length-2],this.lastChar[1]=te[te.length-1],V.slice(0,-1)}return V}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=te[te.length-1],te.toString("utf16le",q,te.length-1)}function C(te){var q=te&&te.length?this.write(te):"";return this.lastNeed?q+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):q}function Y(te,q){var V=(te.length-q)%3;return 0===V?te.toString("base64",q):(this.lastNeed=3-V,this.lastTotal=3,1===V?this.lastChar[0]=te[te.length-1]:(this.lastChar[0]=te[te.length-2],this.lastChar[1]=te[te.length-1]),te.toString("base64",q,te.length-V))}function le(te){var q=te&&te.length?this.write(te):"";return this.lastNeed?q+this.lastChar.toString("base64",0,3-this.lastNeed):q}function K(te){return te.toString(this.encoding)}function re(te){return te&&te.length?this.write(te):""}Z.StringDecoder=P,P.prototype.write=function(te){if(0===te.length)return"";var q,V;if(this.lastNeed){if(void 0===(q=this.fillLast(te)))return"";V=this.lastNeed,this.lastNeed=0}else V=0;return V<te.length?q?q+this.text(te,V):this.text(te,V):q||""},P.prototype.end=function j(te){var q=te&&te.length?this.write(te):"";return this.lastNeed?q+"\ufffd":q},P.prototype.text=function L(te,q){var V=function y(te,q,V){var x=q.length-1;if(x<V)return 0;var B=_(q[x]);return B>=0?(B>0&&(te.lastNeed=B-1),B):--x<V||-2===B?0:(B=_(q[x]))>=0?(B>0&&(te.lastNeed=B-2),B):--x<V||-2===B?0:(B=_(q[x]))>=0?(B>0&&(2===B?B=0:te.lastNeed=B-3),B):0}(this,te,q);if(!this.lastNeed)return te.toString("utf8",q);this.lastTotal=V;var x=te.length-(V-this.lastNeed);return te.copy(this.lastChar,0,x),te.toString("utf8",q,x)},P.prototype.fillLast=function(te){if(this.lastNeed<=te.length)return te.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);te.copy(this.lastChar,this.lastTotal-this.lastNeed,0,te.length),this.lastNeed-=te.length}},4282:(ne,Z,g)=>{var E=g(9007),b=E.Buffer;function k(P,_){for(var y in P)_[y]=P[y]}function A(P,_,y){return b(P,_,y)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?ne.exports=E:(k(E,Z),Z.Buffer=A),A.prototype=Object.create(b.prototype),k(b,A),A.from=function(P,_,y){if("number"==typeof P)throw new TypeError("Argument must not be a number");return b(P,_,y)},A.alloc=function(P,_,y){if("number"!=typeof P)throw new TypeError("Argument must be a number");var M=b(P);return void 0!==_?"string"==typeof y?M.fill(_,y):M.fill(_):M.fill(0),M},A.allocUnsafe=function(P){if("number"!=typeof P)throw new TypeError("Argument must be a number");return b(P)},A.allocUnsafeSlow=function(P){if("number"!=typeof P)throw new TypeError("Argument must be a number");return E.SlowBuffer(P)}},496:ne=>{function g(E){try{if(!global.localStorage)return!1}catch{return!1}var b=global.localStorage[E];return null!=b&&"true"===String(b).toLowerCase()}ne.exports=function Z(E,b){if(g("noDeprecation"))return E;var k=!1;return function A(){if(!k){if(g("throwDeprecation"))throw new Error(b);g("traceDeprecation")?console.trace(b):console.warn(b),k=!0}return E.apply(this,arguments)}}},1171:ne=>{"use strict";ne.exports=function(Z){Z.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},4439:(ne,Z,g)=>{"use strict";function E(_){var y=this;if(y instanceof E||(y=new E),y.tail=null,y.head=null,y.length=0,_&&"function"==typeof _.forEach)_.forEach(function(L){y.push(L)});else if(arguments.length>0)for(var M=0,F=arguments.length;M<F;M++)y.push(arguments[M]);return y}function b(_,y,M){var F=y===_.head?new P(M,null,y,_):new P(M,y,y.next,_);return null===F.next&&(_.tail=F),null===F.prev&&(_.head=F),_.length++,F}function k(_,y){_.tail=new P(y,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function A(_,y){_.head=new P(y,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function P(_,y,M,F){if(!(this instanceof P))return new P(_,y,M,F);this.list=F,this.value=_,y?(y.next=this,this.prev=y):this.prev=null,M?(M.prev=this,this.next=M):this.next=null}ne.exports=E,E.Node=P,E.create=E,E.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var y=_.next,M=_.prev;return y&&(y.prev=M),M&&(M.next=y),_===this.head&&(this.head=y),_===this.tail&&(this.tail=M),_.list.length--,_.next=null,_.prev=null,_.list=null,y},E.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var y=this.head;_.list=this,_.next=y,y&&(y.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},E.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var y=this.tail;_.list=this,_.prev=y,y&&(y.next=_),this.tail=_,this.head||(this.head=_),this.length++}},E.prototype.push=function(){for(var _=0,y=arguments.length;_<y;_++)k(this,arguments[_]);return this.length},E.prototype.unshift=function(){for(var _=0,y=arguments.length;_<y;_++)A(this,arguments[_]);return this.length},E.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},E.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},E.prototype.forEach=function(_,y){y=y||this;for(var M=this.head,F=0;null!==M;F++)_.call(y,M.value,F,this),M=M.next},E.prototype.forEachReverse=function(_,y){y=y||this;for(var M=this.tail,F=this.length-1;null!==M;F--)_.call(y,M.value,F,this),M=M.prev},E.prototype.get=function(_){for(var y=0,M=this.head;null!==M&&y<_;y++)M=M.next;if(y===_&&null!==M)return M.value},E.prototype.getReverse=function(_){for(var y=0,M=this.tail;null!==M&&y<_;y++)M=M.prev;if(y===_&&null!==M)return M.value},E.prototype.map=function(_,y){y=y||this;for(var M=new E,F=this.head;null!==F;)M.push(_.call(y,F.value,this)),F=F.next;return M},E.prototype.mapReverse=function(_,y){y=y||this;for(var M=new E,F=this.tail;null!==F;)M.push(_.call(y,F.value,this)),F=F.prev;return M},E.prototype.reduce=function(_,y){var M,F=this.head;if(arguments.length>1)M=y;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");F=this.head.next,M=this.head.value}for(var L=0;null!==F;L++)M=_(M,F.value,L),F=F.next;return M},E.prototype.reduceReverse=function(_,y){var M,F=this.tail;if(arguments.length>1)M=y;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");F=this.tail.prev,M=this.tail.value}for(var L=this.length-1;null!==F;L--)M=_(M,F.value,L),F=F.prev;return M},E.prototype.toArray=function(){for(var _=new Array(this.length),y=0,M=this.head;null!==M;y++)_[y]=M.value,M=M.next;return _},E.prototype.toArrayReverse=function(){for(var _=new Array(this.length),y=0,M=this.tail;null!==M;y++)_[y]=M.value,M=M.prev;return _},E.prototype.slice=function(_,y){(y=y||this.length)<0&&(y+=this.length),(_=_||0)<0&&(_+=this.length);var M=new E;if(y<_||y<0)return M;_<0&&(_=0),y>this.length&&(y=this.length);for(var F=0,L=this.head;null!==L&&F<_;F++)L=L.next;for(;null!==L&&F<y;F++,L=L.next)M.push(L.value);return M},E.prototype.sliceReverse=function(_,y){(y=y||this.length)<0&&(y+=this.length),(_=_||0)<0&&(_+=this.length);var M=new E;if(y<_||y<0)return M;_<0&&(_=0),y>this.length&&(y=this.length);for(var F=this.length,L=this.tail;null!==L&&F>y;F--)L=L.prev;for(;null!==L&&F>_;F--,L=L.prev)M.push(L.value);return M},E.prototype.splice=function(_,y,...M){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var F=0,L=this.head;null!==L&&F<_;F++)L=L.next;var j=[];for(F=0;L&&F<y;F++)j.push(L.value),L=this.removeNode(L);for(null===L&&(L=this.tail),L!==this.head&&L!==this.tail&&(L=L.prev),F=0;F<M.length;F++)L=b(this,L,M[F]);return j},E.prototype.reverse=function(){for(var _=this.head,y=this.tail,M=_;null!==M;M=M.prev){var F=M.prev;M.prev=M.next,M.next=F}return this.head=y,this.tail=_,this};try{g(1171)(E)}catch{}},643:()=>{},9081:()=>{},3012:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(ne,Z,g)=>{var E=g(3801);function b(k){var A,P;function _(M,F){try{var L=k[M](F),j=L.value,oe=j instanceof E;Promise.resolve(oe?j.v:j).then(function(C){if(oe){var Y="return"===M?"return":"next";if(!j.k||C.done)return _(Y,C);C=k[Y](C).value}y(L.done?"return":"normal",C)},function(C){_("throw",C)})}catch(C){y("throw",C)}}function y(M,F){switch(M){case"return":A.resolve({value:F,done:!0});break;case"throw":A.reject(F);break;default:A.resolve({value:F,done:!1})}(A=A.next)?_(A.key,A.arg):P=null}this._invoke=function(M,F){return new Promise(function(L,j){var oe={key:M,arg:F,resolve:L,reject:j,next:null};P?P=P.next=oe:(A=P=oe,_(M,F))})},"function"!=typeof k.return&&(this.return=void 0)}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(k){return this._invoke("next",k)},b.prototype.throw=function(k){return this._invoke("throw",k)},b.prototype.return=function(k){return this._invoke("return",k)},ne.exports=b,ne.exports.__esModule=!0,ne.exports.default=ne.exports},3801:ne=>{ne.exports=function Z(g,E){this.v=g,this.k=E},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8131:(ne,Z,g)=>{var E=g(3801);ne.exports=function b(k){var A={},P=!1;function _(y,M){return P=!0,M=new Promise(function(F){F(k[y](M))}),{done:!1,value:new E(M,1)}}return A[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},A.next=function(y){return P?(P=!1,y):_("next",y)},"function"==typeof k.throw&&(A.throw=function(y){if(P)throw P=!1,y;return _("throw",y)}),"function"==typeof k.return&&(A.return=function(y){return P?(P=!1,y):_("return",y)}),A},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8237:ne=>{function g(E){function b(k){if(Object(k)!==k)return Promise.reject(new TypeError(k+" is not an object."));var A=k.done;return Promise.resolve(k.value).then(function(P){return{value:P,done:A}})}return(g=function(A){this.s=A,this.n=A.next}).prototype={s:null,n:null,next:function(){return b(this.n.apply(this.s,arguments))},return:function(A){var P=this.s.return;return void 0===P?Promise.resolve({value:A,done:!0}):b(P.apply(this.s,arguments))},throw:function(A){var P=this.s.return;return void 0===P?Promise.reject(A):b(P.apply(this.s,arguments))}},new g(E)}ne.exports=function Z(E){var b,k,A,P=2;for(typeof Symbol<"u"&&(k=Symbol.asyncIterator,A=Symbol.iterator);P--;){if(k&&null!=(b=E[k]))return b.call(E);if(A&&null!=(b=E[A]))return new g(b.call(E));k="@@asyncIterator",A="@@iterator"}throw new TypeError("Object is not async iterable")},ne.exports.__esModule=!0,ne.exports.default=ne.exports},7156:ne=>{function Z(E,b,k,A,P,_,y){try{var M=E[_](y),F=M.value}catch(L){return void k(L)}M.done?b(F):Promise.resolve(F).then(A,P)}ne.exports=function g(E){return function(){var b=this,k=arguments;return new Promise(function(A,P){var _=E.apply(b,k);function y(F){Z(_,A,P,y,M,"next",F)}function M(F){Z(_,A,P,y,M,"throw",F)}y(void 0)})}},ne.exports.__esModule=!0,ne.exports.default=ne.exports},6737:(ne,Z,g)=>{var E=g(3801);ne.exports=function b(k){return new E(k,0)},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8186:(ne,Z,g)=>{var E=g(4642);ne.exports=function b(k){return function(){return new E(k.apply(this,arguments))}},ne.exports.__esModule=!0,ne.exports.default=ne.exports}},ne=>{ne(ne.s=5486)}]);