(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[179],{9941:(Ue,_e,T)=>{"use strict";var J={};T.r(J),T.d(J,{decode:()=>ige,name:()=>nge});var S={};T.r(S),T.d(S,{name:()=>hge,preprocess:()=>fge});var te={};T.r(te),T.d(te,{name:()=>pge,preprocess:()=>mge});var U={};T.r(U),T.d(U,{decode:()=>e_e,encode:()=>t_e,name:()=>Zge,preprocess:()=>Qge});var ee={};T.r(ee),T.d(ee,{decode:()=>u_e,name:()=>c_e});var _={};T.r(_),T.d(_,{decode:()=>y_e,encode:()=>v_e,name:()=>b_e});var x={};T.r(x),T.d(x,{decode:()=>x_e,encode:()=>E_e,name:()=>w_e});var F={};T.r(F),T.d(F,{decode:()=>S_e,encode:()=>C_e,name:()=>A_e});var W={};function R(t){return"function"==typeof t}function $(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}T.r(W),T.d(W,{decode:()=>D_e,name:()=>I_e});const de=$(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function I(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class H{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(R(i))try{i()}catch(o){e=o instanceof de?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{oe(o)}catch(s){e=e??[],s instanceof de?e=[...e,...s.errors]:e.push(s)}}if(e)throw new de(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oe(e);else{if(e instanceof H){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&I(n,e)}remove(e){const{_finalizers:n}=this;n&&I(n,e),e instanceof H&&e._removeParent(this)}}H.EMPTY=(()=>{const t=new H;return t.closed=!0,t})();const ae=H.EMPTY;function q(t){return t instanceof H||t&&"closed"in t&&R(t.remove)&&R(t.add)&&R(t.unsubscribe)}function oe(t){R(t)?t():t.unsubscribe()}const ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},X={setTimeout(t,e,...n){const{delegate:i}=X;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=X;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function B(t){X.setTimeout(()=>{const{onUnhandledError:e}=ne;if(!e)throw t;e(t)})}function b(){}const O=V("C",void 0,void 0);function V(t,e,n){return{kind:t,value:e,error:n}}let Te=null;function se(t){if(ne.useDeprecatedSynchronousErrorHandling){const e=!Te;if(e&&(Te={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=Te;if(Te=null,n)throw i}}else t()}class Re extends H{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,q(e)&&e.add(this)):this.destination=pe}static create(e,n,i){return new Ee(e,n,i)}next(e){this.isStopped?He(function he(t){return V("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?He(function C(t){return V("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?He(O,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function et(t,e){return ke.call(t,e)}class qe{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Ne(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Ne(i)}else Ne(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ne(n)}}}class Ee extends Re{constructor(e,n,i){let r;if(super(),R(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&ne.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&et(e.next,o),error:e.error&&et(e.error,o),complete:e.complete&&et(e.complete,o)}):r=e}this.destination=new qe(r)}}function Ne(t){ne.useDeprecatedSynchronousErrorHandling?function Ce(t){ne.useDeprecatedSynchronousErrorHandling&&Te&&(Te.errorThrown=!0,Te.error=t)}(t):B(t)}function He(t,e){const{onStoppedNotification:n}=ne;n&&X.setTimeout(()=>n(t,e))}const pe={closed:!0,next:b,error:function Pe(t){throw t},complete:b},Ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ye(t){return t}function st(...t){return Ze(t)}function Ze(t){return 0===t.length?Ye:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const o=function ie(t){return t&&t instanceof Re||function E(t){return t&&R(t.next)&&R(t.error)&&R(t.complete)}(t)&&q(t)}(n)?n:new Ee(n,i,r);return se(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=N(i))((r,o)=>{const s=new Ee({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[Ae](){return this}pipe(...n){return Ze(n)(this)}toPromise(n){return new(n=N(n))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function N(t){var e;return null!==(e=t??ne.Promise)&&void 0!==e?e:Promise}const z=$(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Se=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new tt(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new z}next(n){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){se(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:o}=this;return i||r?ae:(this.currentObservers=null,o.push(n),new H(()=>{this.currentObservers=null,I(o,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){const n=new le;return n.source=this,n}}return t.create=(e,n)=>new tt(e,n),t})();class tt extends Se{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:ae}}class ce extends Se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Z(t){return R(t?.lift)}function L(t){return e=>{if(Z(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function w(t,e,n,i,r){return new M(t,e,n,i,r)}class M extends Re{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Q(t,e){return L((n,i)=>{let r=0;n.subscribe(w(i,o=>{i.next(t.call(e,o,r++))}))})}function mt(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function gt(t,e){return function(n,i){e(n,i,t)}}function v(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function mr(t){return this instanceof mr?(this.v=t,this):new mr(t)}function Ui(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Wt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Vc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Pl(t){return R(t?.then)}function Hc(t){return R(t[Ae])}function Ud(t){return Symbol.asyncIterator&&R(t?.[Symbol.asyncIterator])}function zc(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Gc=function ih(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Nl(t){return R(t?.[Gc])}function Wc(t){return function ss(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(p){i[p]&&(r[p]=function(m){return new Promise(function(g,A){o.push([p,m,g,A])>1||a(p,m)})})}function a(p,m){try{!function c(p){p.value instanceof mr?Promise.resolve(p.value.v).then(l,d):h(o[0][2],p)}(i[p](m))}catch(g){h(o[0][3],g)}}function l(p){a("next",p)}function d(p){a("throw",p)}function h(p,m){p(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield mr(n.read());if(r)return yield mr(void 0);yield yield mr(i)}}finally{n.releaseLock()}})}function yi(t){return R(t?.getReader)}function Ri(t){if(t instanceof le)return t;if(null!=t){if(Hc(t))return function Ns(t){return new le(e=>{const n=t[Ae]();if(R(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Vc(t))return function Ca(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Pl(t))return function Ta(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,B)})}(t);if(Ud(t))return mo(t);if(Nl(t))return function cc(t){return new le(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(yi(t))return function ge(t){return mo(Wc(t))}(t)}throw zc(t)}function mo(t){return new le(e=>{(function Me(t,e){var n,i,r,o;return function re(t,e,n,i){return new(n||(n=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(h){s(h)}}function c(d){try{l(i.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):function r(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Ui(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function ye(t,e,n,i=0,r=!1){const o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Y(t,e,n=1/0){return R(e)?Y((i,r)=>Q((o,s)=>e(i,o,r,s))(Ri(t(i,r))),n):("number"==typeof e&&(n=e),L((i,r)=>function P(t,e,n,i,r,o,s,a){const c=[];let l=0,d=0,h=!1;const p=()=>{h&&!c.length&&!l&&e.complete()},m=A=>l<i?g(A):c.push(A),g=A=>{o&&e.next(A),l++;let D=!1;Ri(n(A,d++)).subscribe(w(e,j=>{r?.(j),o?m(j):e.next(j)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<i;){const j=c.shift();s?ye(e,s,()=>g(j)):g(j)}p()}catch(j){e.error(j)}}))};return t.subscribe(w(e,m,()=>{h=!0,p()})),()=>{a?.()}}(i,r,t,n)))}function me(t=1/0){return Y(Ye,t)}const Fe=new le(t=>t.complete());function Et(t){return t&&R(t.schedule)}function Dt(t){return t[t.length-1]}function Vt(t){return R(Dt(t))?t.pop():void 0}function Qt(t){return Et(Dt(t))?t.pop():void 0}function oo(t,e=0){return L((n,i)=>{n.subscribe(w(i,r=>ye(i,t,()=>i.next(r),e),()=>ye(i,t,()=>i.complete(),e),r=>ye(i,t,()=>i.error(r),e)))})}function Er(t,e=0){return L((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function go(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{ye(n,e,()=>{const i=t[Symbol.asyncIterator]();ye(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function xi(t,e){return e?function Fl(t,e){if(null!=t){if(Hc(t))return function ko(t,e){return Ri(t).pipe(Er(e),oo(e))}(t,e);if(Vc(t))return function ra(t,e){return new le(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(Pl(t))return function $c(t,e){return Ri(t).pipe(Er(e),oo(e))}(t,e);if(Ud(t))return go(t,e);if(Nl(t))return function Lr(t,e){return new le(n=>{let i;return ye(n,e,()=>{i=t[Gc](),ye(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void n.error(s)}o?n.complete():n.next(r)},0,!0)}),()=>R(i?.return)&&i.return()})}(t,e);if(yi(t))return function Yc(t,e){return go(Wc(t),e)}(t,e)}throw zc(t)}(t,e):Ri(t)}function gr(...t){const e=Qt(t),n=function vn(t,e){return"number"==typeof Dt(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?Ri(i[0]):me(n)(xi(i,e)):Fe}function $t(...t){return xi(t,Qt(t))}function Oo(t={}){const{connector:e=(()=>new Se),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,l=0,d=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),s=c=void 0,d=h=!1},g=()=>{const A=s;m(),A?.unsubscribe()};return L((A,D)=>{l++,!h&&!d&&p();const j=c=c??e();D.add(()=>{l--,0===l&&!h&&!d&&(a=Oe(g,r))}),j.subscribe(D),!s&&l>0&&(s=new Ee({next:k=>j.next(k),error:k=>{h=!0,p(),a=Oe(m,n,k),j.error(k)},complete:()=>{d=!0,p(),a=Oe(m,i),j.complete()}}),Ri(A).subscribe(s))})(o)}}function Oe(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Ee({next:()=>{i.unsubscribe(),t()}});return Ri(e(...n)).subscribe(i)}function Le(t,e){return L((n,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();n.subscribe(w(i,c=>{r?.unsubscribe();let l=0;const d=o++;Ri(t(c,d)).subscribe(r=w(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function nt(t,e=Ye){return t=t??pt,L((n,i)=>{let r,o=!0;n.subscribe(w(i,s=>{const a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function pt(t,e){return t===e}function xt(t){for(let e in t)if(t[e]===xt)return e;throw Error("Could not find renamed property on target object.")}function qt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function mn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(mn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function or(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Ir=xt({__forward_ref__:xt});function Rn(t){return t.__forward_ref__=Rn,t.toString=function(){return mn(this())},t}function gn(t){return Gg(t)?t():t}function Gg(t){return"function"==typeof t&&t.hasOwnProperty(Ir)&&t.__forward_ref__===Rn}function Qf(t){return t&&!!t.\u0275providers}const ov="https://g.co/ng/security#xss";class Pt extends Error{constructor(e,n){super(function ep(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Pn(t){return"string"==typeof t?t:null==t?"":String(t)}function Wg(t,e){throw new Pt(-201,!1)}function cs(t,e){null==t&&function Cn(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function St(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Zt(t){return{providers:t.providers||[],imports:t.imports||[]}}function rh(t){return av(t,oh)||av(t,sh)}function av(t,e){return t.hasOwnProperty(e)?t[e]:null}function np(t){return t&&(t.hasOwnProperty(Ma)||t.hasOwnProperty($g))?t[Ma]:null}const oh=xt({\u0275prov:xt}),Ma=xt({\u0275inj:xt}),sh=xt({ngInjectableDef:xt}),$g=xt({ngInjectorDef:xt});var fn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fn||{});let Ia;function $o(t){const e=Ia;return Ia=t,e}function rp(t,e,n){const i=rh(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&fn.Optional?null:void 0!==e?e:void Wg(mn(t))}const Ei=globalThis,ch={},sp="__NG_DI_FLAG__",bo="ngTempTokenPath",lh=/\n/gm,Xg="__source";let Hd;function qc(t){const e=Hd;return Hd=t,e}function ES(t,e=fn.Default){if(void 0===Hd)throw new Pt(-203,!1);return null===Hd?rp(t,void 0,e):Hd.get(t,e&fn.Optional?null:void 0,e)}function it(t,e=fn.Default){return(function ip(){return Ia}()||ES)(gn(t),e)}function Gt(t,e=fn.Default){return it(t,ap(e))}function ap(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function dh(t){const e=[];for(let n=0;n<t.length;n++){const i=gn(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Pt(900,!1);let r,o=fn.Default;for(let s=0;s<i.length;s++){const a=i[s],c=Kc(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(it(r,o))}else e.push(it(i))}return e}function zd(t,e){return t[sp]=e,t.prototype[sp]=e,t}function Kc(t){return t[sp]}function lc(t){return{toString:t}.toString()}var lp=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(lp||{}),yo=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(yo||{});const Dr={},gi=[],dp=xt({\u0275cmp:xt}),qg=xt({\u0275dir:xt}),Kg=xt({\u0275pipe:xt}),pv=xt({\u0275mod:xt}),dc=xt({\u0275fac:xt}),Jc=xt({__NG_ELEMENT_ID__:xt}),ct=xt({__NG_ENV_ID__:xt});function At(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function _t(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{const o=r,s=n[++i];Vn(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function tn(t){return 3===t||4===t||6===t}function Vn(t){return 64===t.charCodeAt(0)}function fi(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Rr(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Rr(t,e,n,i,r){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}const ki="ng-template";function Jg(t,e,n){let i=0,r=!0;for(;i<t.length;){let o=t[i++];if("string"==typeof o&&r){const s=t[i++];if(n&&"class"===o&&-1!==At(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<t.length&&"string"==typeof(o=t[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function mv(t){return 4===t.type&&t.value!==ki}function Ls(t,e,n){return e===(4!==t.type||n?t.value:ki)}function up(t,e,n){let i=4;const r=t.attrs||[],o=function Mi(t){for(let e=0;e<t.length;e++)if(tn(t[e]))return e;return t.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!Ls(t,c,n)||""===c&&1===e.length){if(sa(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==t.attrs){if(!Jg(t.attrs,l,n)){if(sa(i))return!1;s=!0}continue}const h=Gd(8&i?"class":c,r,mv(t),n);if(-1===h){if(sa(i))return!1;s=!0;continue}if(""!==l){let p;p=h>o?"":r[h+1].toLowerCase();const m=8&i?p:null;if(m&&-1!==At(m,l,0)||2&i&&l!==p){if(sa(i))return!1;s=!0}}}}else{if(!s&&!sa(i)&&!sa(c))return!1;if(s&&sa(c))continue;s=!1,i=c|1&i}}return sa(i)||s}function sa(t){return 0==(1&t)}function Gd(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){const s=e[r];if(s===t)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function SS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function uh(t,e,n=!1){for(let i=0;i<e.length;i++)if(up(t,e[i],n))return!0;return!1}function gv(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function hh(t,e){return t?":not("+e.trim()+")":e}function CS(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&i){const a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!sa(s)&&(e+=hh(o,r),r=""),i=s,o=o||!sa(i);n++}return""!==r&&(e+=hh(o,r)),e}function An(t){return lc(()=>{const e=yv(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||yo.Emulated,styles:t.styles||gi,_:null,schemas:t.schemas||null,tView:null,id:""};fh(n);const i=t.dependencies;return n.directiveDefs=jl(i,!1),n.pipeDefs=jl(i,!0),n.id=function IS(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function fp(t){return oi(t)||sr(t)}function _v(t){return null!==t}function Kt(t){return lc(()=>({type:t.type,bootstrap:t.bootstrap||gi,declarations:t.declarations||gi,imports:t.imports||gi,exports:t.exports||gi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Zg(t,e){if(null==t)return Dr;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}function Ut(t){return lc(()=>{const e=yv(t);return fh(e),e})}function so(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function oi(t){return t[dp]||null}function sr(t){return t[qg]||null}function Yr(t){return t[Kg]||null}function yv(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Dr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||gi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zg(t.inputs,e),outputs:Zg(t.outputs)}}function fh(t){t.features?.forEach(e=>e(t))}function jl(t,e){if(!t)return null;const n=e?Yr:fp;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(_v)}const _r=0,Jt=1,$n=2,Jn=3,Vi=4,ph=5,vo=6,Ul=7,Ar=8,Da=9,Ra=10,Nn=11,ka=12,$d=13,Oa=14,Ki=15,Pa=16,Yd=17,Na=18,mh=19,vv=20,Qc=21,Bs=22,el=23,gh=24,De=25,Xd=1,us=2,Hn=7,qd=9,ar=11;function Yo(t){return Array.isArray(t)&&"object"==typeof t[Xd]}function Xo(t){return Array.isArray(t)&&!0===t[Xd]}function e_(t){return 0!=(4&t.flags)}function Vl(t){return t.componentOffset>-1}function js(t){return 1==(1&t.flags)}function aa(t){return!!t.template}function t_(t){return 0!=(512&t[$n])}function hc(t,e){return t.hasOwnProperty(dc)?t[dc]:null}let fc=Ei.WeakRef??class PS{constructor(e){this.ref=e}deref(){return this.ref}},Us=0,La=null,yh=!1;function Br(t){const e=La;return La=t,e}class Qd{constructor(){this.id=Us++,this.ref=function s_(t){return new fc(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const i=n.producerNode.deref();if(null!=i&&n.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=yh;yh=!0;try{for(const[n,i]of this.consumers){const r=i.consumerNode.deref();null!=r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),r?.producers.delete(this.id))}}finally{yh=e}}producerAccessed(){if(yh)throw new Error("");if(null===La)return;let e=La.producers.get(this.id);void 0===e?(e={consumerNode:La.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:La.trackingVersion},La.producers.set(this.id,e),this.consumers.set(La.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=La.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==La?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let Xr=null;function d_(t){const e=Br(null);try{return t()}finally{Br(e)}}const wo=()=>{};class u_ extends Qd{constructor(e,n,i){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=wo,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=Br(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=wo,this.watch(this.registerOnCleanup)}finally{Br(e)}}cleanup(){this.cleanupFn()}}class Ev{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Sr(){return Av}function Av(t){return t.type.prototype.ngOnChanges&&(t.setInput=LS),h_}function h_(){const t=f_(this),e=t?.current;if(e){const n=t.previous;if(n===Dr)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function LS(t,e,n,i){const r=this.declaredInputs[n],o=f_(t)||function BS(t,e){return t[tu]=e}(t,{previous:Dr,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new Ev(c&&c.currentValue,e,a===Dr),t[i]=e}Sr.ngInherit=!0;const tu="__ngSimpleChanges__";function f_(t){return t[tu]||null}const Ba=function(t,e,n){},Sv="svg";function Fi(t){for(;Array.isArray(t);)t=t[_r];return t}function _p(t,e){return Fi(e[t])}function qo(t,e){return Fi(e[t.index])}function bp(t,e){return t.data[e]}function nu(t,e){return t[e]}function Po(t,e){const n=e[t];return Yo(n)?n:n[_r]}function ca(t,e){return null==e?null:t[e]}function Dv(t){t[Yd]=0}function Rv(t){1024&t[$n]||(t[$n]|=1024,kv(t,1))}function m_(t){1024&t[$n]&&(t[$n]&=-1025,kv(t,-1))}function kv(t,e){let n=t[Jn];if(null===n)return;n[ph]+=e;let i=n;for(n=n[Jn];null!==n&&(1===e&&1===i[ph]||-1===e&&0===i[ph]);)n[ph]+=e,i=n,n=n[Jn]}const Tn={lFrame:da(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Pv(){return Tn.bindingsEnabled}function iu(){return null!==Tn.skipHydrationRootTNode}function kt(){return Tn.lFrame.lView}function di(){return Tn.lFrame.tView}function cr(t){return Tn.lFrame.contextLView=t,t[Ar]}function br(t){return Tn.lFrame.contextLView=null,t}function qr(){let t=Ko();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ko(){return Tn.lFrame.currentTNode}function zs(t,e){const n=Tn.lFrame;n.currentTNode=t,n.isParent=e}function yp(){return Tn.lFrame.isParent}function ru(){Tn.lFrame.isParent=!1}function ao(){const t=Tn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ou(){return Tn.lFrame.bindingIndex++}function xo(t){const e=Tn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function w_(t,e){const n=Tn.lFrame;n.bindingIndex=n.bindingRootIndex=t,x_(e)}function x_(t){Tn.lFrame.currentDirectiveIndex=t}function A_(){return Tn.lFrame.currentQueryIndex}function vp(t){Tn.lFrame.currentQueryIndex=t}function WS(t){const e=t[Jt];return 2===e.type?e.declTNode:1===e.type?t[vo]:null}function S_(t,e,n){if(n&fn.SkipSelf){let r=e,o=t;for(;!(r=r.parent,null!==r||n&fn.Host||(r=WS(o),null===r||(o=o[Oa],10&r.type))););if(null===r)return!1;e=r,t=o}const i=Tn.lFrame=No();return i.currentTNode=e,i.lView=t,!0}function wp(t){const e=No(),n=t[Jt];Tn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function No(){const t=Tn.lFrame,e=null===t?null:t.child;return null===e?da(t):e}function da(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function jv(){const t=Tn.lFrame;return Tn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Uv=jv;function su(){const t=jv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Eo(){return Tn.lFrame.selectedIndex}function Gl(t){Tn.lFrame.selectedIndex=t}function Ji(){const t=Tn.lFrame;return bp(t.tView,t.selectedIndex)}let Ah=!0;function Sh(){return Ah}function ua(t){Ah=t}function Wl(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function xp(t,e,n){I_(t,e,3,n)}function Ch(t,e,n,i){(3&t[$n])===n&&I_(t,e,n,i)}function cu(t,e){let n=t[$n];(3&n)===e&&(n&=8191,n+=1,t[$n]=n)}function I_(t,e,n,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&t[Yd]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(t[Yd]+=65536),(a<o||-1==o)&&($S(t,n,e,c),t[Yd]=(4294901760&t[Yd])+c+2),c++}function Ep(t,e){Ba(4,t,e);const n=Br(null);try{e.call(t)}finally{Br(n),Ba(5,t,e)}}function $S(t,e,n,i){const r=n[i]<0,o=n[i+1],a=t[r?-n[i]:n[i]];r?t[$n]>>13<t[Yd]>>16&&(3&t[$n])===e&&(t[$n]+=8192,Ep(a,o)):Ep(a,o)}const $l=-1;class fs{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Th(t){return t!==$l}function Yl(t){return 32767&t}function ja(t,e){let n=function Ap(t){return t>>16}(t),i=e;for(;n>0;)i=i[Oa],n--;return i}let xn=!0;function Xl(t){const e=xn;return xn=t,e}const nl=255,$v=5;let R_=0;const ha={};function Sp(t,e){const n=O_(t,e);if(-1!==n)return n;const i=e[Jt];i.firstCreatePass&&(t.injectorIndex=e.length,k_(i.data,t),k_(e,null),k_(i.blueprint,null));const r=Cp(t,e),o=t.injectorIndex;if(Th(r)){const s=Yl(r),a=ja(r,e),c=a[Jt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function k_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function O_(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Cp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=F_(r),null===i)return $l;if(n++,r=r[Oa],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return $l}function Tp(t,e,n){!function Ao(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Jc)&&(i=n[Jc]),null==i&&(i=n[Jc]=R_++);const r=i&nl;e.data[t+(r>>$v)]|=1<<r}(t,e,n)}function Yv(t,e,n){if(n&fn.Optional||void 0!==t)return t;Wg()}function Xv(t,e,n,i){if(n&fn.Optional&&void 0===i&&(i=null),!(n&(fn.Self|fn.Host))){const r=t[Da],o=$o(void 0);try{return r?r.get(e,i,n&fn.Optional):rp(e,i,n&fn.Optional)}finally{$o(o)}}return Yv(i,0,n)}function Ua(t,e,n,i=fn.Default,r){if(null!==t){if(2048&e[$n]&&!(i&fn.Self)){const s=function Jv(t,e,n,i,r){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[$n]&&!(512&s[$n]);){const a=So(o,s,n,i|fn.Self,ha);if(a!==ha)return a;let c=o.parent;if(!c){const l=s[vv];if(l){const d=l.get(n,ha,i);if(d!==ha)return d}c=F_(s),s=s[Oa]}o=c}return r}(t,e,n,i,ha);if(s!==ha)return s}const o=So(t,e,n,i,ha);if(o!==ha)return o}return Xv(e,n,i,r)}function So(t,e,n,i,r){const o=function ZS(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Jc)?t[Jc]:void 0;return"number"==typeof e?e>=0?e&nl:QS:e}(n);if("function"==typeof o){if(!S_(e,t,i))return i&fn.Host?Yv(r,0,i):Xv(e,n,i,r);try{let s;if(s=o(i),null!=s||i&fn.Optional)return s;Wg()}finally{Uv()}}else if("number"==typeof o){let s=null,a=O_(t,e),c=$l,l=i&fn.Host?e[Ki][vo]:null;for((-1===a||i&fn.SkipSelf)&&(c=-1===a?Cp(t,e):e[a+8],c!==$l&&lu(i,!1)?(s=e[Jt],a=Yl(c),e=ja(c,e)):a=-1);-1!==a;){const d=e[Jt];if(qv(o,a,d.data)){const h=P_(a,e,n,s,i,l);if(h!==ha)return h}c=e[a+8],c!==$l&&lu(i,e[Jt].data[a+8]===l)&&qv(o,a,e)?(s=d,a=Yl(c),e=ja(c,e)):a=-1}}return r}function P_(t,e,n,i,r,o){const s=e[Jt],a=s.data[t+8],d=Mp(a,s,n,null==i?Vl(a)&&xn:i!=s&&0!=(3&a.type),r&fn.Host&&o===a);return null!==d?gc(e,s,d,a):ha}function Mp(t,e,n,i,r){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,p=r?a+d:t.directiveEnd;for(let m=i?a:a+d;m<p;m++){const g=s[m];if(m<c&&n===g||m>=c&&g.type===n)return m}if(r){const m=s[c];if(m&&aa(m)&&m.type===n)return c}return null}function gc(t,e,n,i){let r=t[n];const o=e.data;if(function zv(t){return t instanceof fs}(r)){const s=r;s.resolving&&function hS(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Pt(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Si(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Pn(t)}(o[n]));const a=Xl(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?$o(s.injectImpl):null;S_(t,i,fn.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function M_(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=Av(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==l&&$o(l),Xl(a),s.resolving=!1,Uv()}}return r}function qv(t,e,n){return!!(n[e+(t>>$v)]&1<<t)}function lu(t,e){return!(t&fn.Self||t&fn.Host&&e)}class Fo{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return Ua(this._tNode,this._lView,e,ap(i),n)}}function QS(){return new Fo(qr(),kt())}function Ci(t){return lc(()=>{const e=t.prototype.constructor,n=e[dc]||N_(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[dc]||N_(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function N_(t){return Gg(t)?()=>{const e=N_(gn(t));return e&&e()}:hc(t)}function F_(t){const e=t[Jt],n=e.type;return 2===n?e.declTNode:1===n?t[vo]:null}function _c(t){return function JS(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const o=n[r];if(tn(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(o===e)return n[r+1];r+=2}}}return null}(qr(),t)}const ql="__parameters__";function Kl(t,e,n){return lc(()=>{const i=function Dp(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,d){const h=c.hasOwnProperty(ql)?c[ql]:Object.defineProperty(c,ql,{value:[]})[ql];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function fu(t,e){t.forEach(n=>Array.isArray(n)?fu(n,e):e(n))}function B_(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ih(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pu(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function ps(t,e,n){let i=mu(t,e);return i>=0?t[1|i]=n:(i=~i,function sC(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function j_(t,e){const n=mu(t,e);if(n>=0)return t[1|n]}function mu(t,e){return function Qv(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}(t,e,1)}const gu=zd(Kl("Optional"),8),kp=zd(Kl("SkipSelf"),4);function Bp(t){return 128==(128&t.flags)}var rl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(rl||{});const Y_=new Map;let SC=0;const q_="__ngContext__";function Co(t,e){Yo(e)?(t[q_]=e[mh],function Up(t){Y_.set(t[mh],t)}(e)):t[q_]=e}let Hp;function Q_(t,e){return Hp(t,e)}function kh(t){const e=t[Jn];return Xo(e)?e[Jn]:e}function xw(t){return Wp(t[ka])}function Ew(t){return Wp(t[Vi])}function Wp(t){for(;null!==t&&!Xo(t);)t=t[Vi];return t}function Jl(t,e,n,i,r){if(null!=i){let o,s=!1;Xo(i)?o=i:Yo(i)&&(s=!0,i=i[_r]);const a=Fi(i);0===t&&null!==n?null==r?yr(e,n,a):kr(e,n,a,r||null,!0):1===t&&null!==n?kr(e,n,a,r||null,!0):2===t?function Ph(t,e,n){const i=qp(t,e);i&&function ol(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function jC(t,e,n,i,r){const o=n[Hn];o!==Fi(n)&&Jl(e,t,i,o,r);for(let a=ar;a<n.length;a++){const c=n[a];Nh(c[Jt],c,t,e,i,o)}}(e,t,o,n,r)}}function Yp(t,e,n){return t.createElement(e,n)}function Sw(t,e){const n=t[qd],i=n.indexOf(e);m_(e),n.splice(i,1)}function Xp(t,e){if(t.length<=ar)return;const n=ar+e,i=t[n];if(i){const r=i[Pa];null!==r&&r!==t&&Sw(r,i),e>0&&(t[n-1][Vi]=i[Vi]);const o=Ih(t,ar+e);!function DC(t,e){Nh(t,e,e[Nn],2,null,null),e[_r]=null,e[vo]=null}(i[Jt],i);const s=o[Na];null!==s&&s.detachView(o[Jt]),i[Jn]=null,i[Vi]=null,i[$n]&=-129}return i}function ms(t,e){if(!(256&e[$n])){const n=e[Nn];e[el]?.destroy(),e[gh]?.destroy(),n.destroyNode&&Nh(t,e,n,3,null,null),function OC(t){let e=t[ka];if(!e)return tb(t[Jt],t);for(;e;){let n=null;if(Yo(e))n=e[ka];else{const i=e[ar];i&&(n=i)}if(!n){for(;e&&!e[Vi]&&e!==t;)Yo(e)&&tb(e[Jt],e),e=e[Jn];null===e&&(e=t),Yo(e)&&tb(e[Jt],e),n=e&&e[Vi]}e=n}}(e)}}function tb(t,e){if(!(256&e[$n])){e[$n]&=-129,e[$n]|=256,function Zl(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof fs)){const o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];Ba(4,a,c);try{c.call(a)}finally{Ba(5,a,c)}}else{Ba(4,r,o);try{o.call(r)}finally{Ba(5,r,o)}}}}}(t,e),function FC(t,e){const n=t.cleanup,i=e[Ul];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else n[o].call(i[n[o+1]]);null!==i&&(e[Ul]=null);const r=e[Qc];if(null!==r){e[Qc]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(t,e),1===e[Jt].type&&e[Nn].destroy();const n=e[Pa];if(null!==n&&Xo(e[Jn])){n!==e[Jn]&&Sw(n,e);const i=e[Na];null!==i&&i.detachView(t)}!function TC(t){Y_.delete(t[mh])}(e)}}function zn(t,e,n){return function Cw(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[_r];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=t.data[i.directiveStart+r];if(o===yo.None||o===yo.Emulated)return null}return qo(i,n)}}(t,e.parent,n)}function kr(t,e,n,i,r){t.insertBefore(e,n,i,r)}function yr(t,e,n){t.appendChild(e,n)}function Tw(t,e,n,i,r){null!==i?kr(t,e,n,i,r):yr(t,e,n)}function qp(t,e){return t.parentNode(e)}function Mw(t,e,n){return Kp(t,e,n)}let nb,Lh,rb,Kp=function Iw(t,e,n){return 40&t.type?qo(t,n):null};function Oh(t,e,n,i){const r=zn(t,i,e),o=e[Nn],a=Mw(i.parent||e[vo],i,e);if(null!=r)if(Array.isArray(n))for(let c=0;c<n.length;c++)Tw(o,r,n[c],a,!1);else Tw(o,r,n,a,!1);void 0!==nb&&nb(o,i,e,n,r)}function sl(t,e){if(null!==e){const n=e.type;if(3&n)return qo(e,t);if(4&n)return Qi(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return sl(t,i);{const r=t[e.index];return Xo(r)?Qi(-1,r):Fi(r)}}if(32&n)return Q_(e,t)()||Fi(t[e.index]);{const i=Zi(t,e);return null!==i?Array.isArray(i)?i[0]:sl(kh(t[Ki]),i):sl(t,e.next)}}return null}function Zi(t,e){return null!==e?t[Ki][vo].projection[e.projection]:null}function Qi(t,e){const n=ar+t+1;if(n<e.length){const i=e[n],r=i[Jt].firstChild;if(null!==r)return sl(i,r)}return e[Hn]}function ib(t,e,n,i,r,o,s){for(;null!=n;){const a=i[n.index],c=n.type;if(s&&0===e&&(a&&Co(Fi(a),i),n.flags|=2),32!=(32&n.flags))if(8&c)ib(t,e,n.child,i,r,o,!1),Jl(e,t,r,a,o);else if(32&c){const l=Q_(n,i);let d;for(;d=l();)Jl(e,t,r,d,o);Jl(e,t,r,a,o)}else 16&c?Rw(t,e,i,n,r,o):Jl(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Nh(t,e,n,i,r,o){ib(n,i,t.firstChild,e,r,o,!1)}function Rw(t,e,n,i,r,o){const s=n[Ki],c=s[vo].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Jl(e,t,r,c[l],o);else{let l=c;const d=s[Jn];Bp(i)&&(l.flags|=128),ib(t,e,l,d,r,o,!0)}}function Jp(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ow(t,e,n){const{mergedAttrs:i,classes:r,styles:o}=n;null!==i&&_t(t,e,i),null!==r&&Jp(t,e,r),null!==o&&function Fh(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function Kr(t){return function yu(){if(void 0===Lh&&(Lh=null,Ei.trustedTypes))try{Lh=Ei.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Lh}()?.createHTML(t)||t}class ed{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ov})`}}class Ti extends ed{getTypeName(){return"HTML"}}class zC extends ed{getTypeName(){return"Style"}}class Pw extends ed{getTypeName(){return"Script"}}class Zp extends ed{getTypeName(){return"URL"}}class GC extends ed{getTypeName(){return"ResourceURL"}}function _s(t){return t instanceof ed?t.changingThisBreaksApplicationSecurity:t}function za(t,e){const n=function WC(t){return t instanceof ed&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ov})`)}return n===e}class JC{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Kr(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class ZC{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Kr(e),n}}const ab=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qp(t){return(t=String(t)).match(ab)?t:"unsafe:"+t}function fa(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Bh(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const Fw=fa("area,br,col,hr,img,wbr"),Lw=fa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ur=fa("rp,rt"),cb=Bh(Fw,Bh(Lw,fa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bh(Ur,fa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bh(Ur,Lw)),em=fa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Bw=Bh(em,fa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jw=fa("script,style,template");class eT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!cb.hasOwnProperty(n))return this.sanitizedSomething=!0,!jw.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!Bw.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;em[a]&&(c=Qp(c)),this.buf.push(" ",s,'="',lb(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();cb.hasOwnProperty(n)&&!Fw.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(lb(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const tT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nT=/([^\#-~ |!])/g;function lb(t){return t.replace(/&/g,"&amp;").replace(tT,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(nT,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jh;function Uw(t,e){let n=null;try{jh=jh||function Nw(t){const e=new ZC(t);return function QC(){try{return!!(new window.DOMParser).parseFromString(Kr(""),"text/html")}catch{return!1}}()?new JC(e):e}(t);let i=e?String(e):"";n=jh.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=jh.getInertBodyElement(i)}while(i!==o);return Kr((new eT).sanitizeChildren(db(n)||n))}finally{if(n){const i=db(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function db(t){return"content"in t&&function iT(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Jr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Jr||{});function ub(t){const e=function Uh(){const t=kt();return t&&t[Ra].sanitizer}();return e?e.sanitize(Jr.URL,t)||"":za(t,"URL")?_s(t):Qp(Pn(t))}class yt{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=St({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Vh=new yt("ENVIRONMENT_INITIALIZER"),tm=new yt("INJECTOR",-1),Ww=new yt("INJECTOR_DEF_TYPES");class hb{get(e,n=ch){if(n===ch){const i=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw i.name="NullInjectorError",i}return n}}function aT(...t){return{\u0275providers:$w(0,t),\u0275fromNgModule:!0}}function $w(t,...e){const n=[],i=new Set;let r;const o=s=>{n.push(s)};return fu(e,s=>{const a=s;nm(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Yw(r,o),n}function Yw(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];pb(r,o=>{e(o,i)})}}function nm(t,e,n,i){if(!(t=gn(t)))return!1;let r=null,o=np(t);const s=!o&&oi(t);if(o||s){if(s&&!s.standalone)return!1;r=t}else{const c=t.ngModule;if(o=np(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)nm(l,e,n,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{fu(o.imports,d=>{nm(d,e,n,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&Yw(l,e)}if(!a){const l=hc(r)||(()=>new r);e({provide:r,useFactory:l,deps:gi},r),e({provide:Ww,useValue:r,multi:!0},r),e({provide:Vh,useValue:()=>it(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=t;pb(c,d=>{e(d,l)})}}}return r!==t&&void 0!==t.providers}function pb(t,e){for(let n of t)Qf(n)&&(n=n.\u0275providers),Array.isArray(n)?pb(n,e):e(n)}const cT=xt({provide:String,useValue:xt});function mb(t){return null!==t&&"object"==typeof t&&cT in t}function td(t){return"function"==typeof t}const gb=new yt("Set Injector scope."),im={},dT={};let Hh;function zh(){return void 0===Hh&&(Hh=new hb),Hh}class ys{}class rm extends ys{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vb(e,s=>this.processProvider(s)),this.records.set(tm,xu(void 0,this)),r.has("environment")&&this.records.set(ys,xu(void 0,this));const o=this.records.get(gb);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ww.multi,gi,fn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=qc(this),i=$o(void 0);try{return e()}finally{qc(n),$o(i)}}get(e,n=ch,i=fn.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ct))return e[ct](this);i=ap(i);const o=qc(this),s=$o(void 0);try{if(!(i&fn.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function yb(t){return"function"==typeof t||"object"==typeof t&&t instanceof yt}(e)&&rh(e);c=l&&this.injectableDefInScope(l)?xu(_b(e),im):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&fn.Self?zh():this.parent).get(e,n=i&fn.Optional&&n===ch?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[bo]=a[bo]||[]).unshift(mn(e)),o)throw a;return function cp(t,e,n,i){const r=t[bo];throw e[Xg]&&r.unshift(e[Xg]),t.message=function AS(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=mn(e);if(Array.isArray(e))r=e.map(mn).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):mn(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(lh,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[bo]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{$o(s),qc(o)}}resolveInjectorInitializers(){const e=qc(this),n=$o(void 0);try{const r=this.get(Vh.multi,gi,fn.Self);for(const o of r)o()}finally{qc(e),$o(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(mn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pt(205,!1)}processProvider(e){let n=td(e=gn(e))?e:gn(e&&e.provide);const i=function bb(t){return mb(t)?xu(void 0,t.useValue):xu(Kw(t),im)}(e);if(td(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=xu(void 0,im,!0),r.factory=()=>dh(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===im&&(n.value=dT,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Zo(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=gn(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function _b(t){const e=rh(t),n=null!==e?e.factory:hc(t);if(null!==n)return n;if(t instanceof yt)throw new Pt(204,!1);if(t instanceof Function)return function uT(t){const e=t.length;if(e>0)throw pu(e,"?"),new Pt(204,!1);const n=function Fs(t){return t&&(t[oh]||t[sh])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Pt(204,!1)}function Kw(t,e,n){let i;if(td(t)){const r=gn(t);return hc(r)||_b(r)}if(mb(t))i=()=>gn(t.useValue);else if(function qw(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...dh(t.deps||[]));else if(function Xw(t){return!(!t||!t.useExisting)}(t))i=()=>it(gn(t.useExisting));else{const r=gn(t&&(t.useClass||t.provide));if(!function hT(t){return!!t.deps}(t))return hc(r)||_b(r);i=()=>new r(...dh(t.deps))}return i}function xu(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function vb(t,e){for(const n of t)Array.isArray(n)?vb(n,e):n&&Qf(n)?vb(n.\u0275providers,e):e(n)}const Gh=new yt("AppId",{providedIn:"root",factory:()=>fT}),fT="ng",Jw=new yt("Platform Initializer"),vs=new yt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Cr=new yt("AnimationModuleType"),wb=new yt("CSP nonce",{providedIn:"root",factory:()=>function Ql(){if(void 0!==rb)return rb;if(typeof document<"u")return document;throw new Pt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Qw=(t,e,n)=>null;function Tb(t,e,n=!1){return Qw(t,e,n)}class je{}class Qe{}class Mt{resolveComponentFactory(e){throw function rt(t){const e=Error(`No component factory found for ${mn(t)}.`);return e.ngComponent=t,e}(e)}}let Rt=(()=>{class e{}return e.NULL=new Mt,e})();function Yt(){return sn(qr(),kt())}function sn(t,e){return new Nt(qo(t,e))}let Nt=(()=>{class e{constructor(i){this.nativeElement=i}}return e.__NG_ELEMENT_ID__=Yt,e})();function Qn(t){return t instanceof Nt?t.nativeElement:t}class Sn{}let ws=(()=>{var t;class e{}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>null}),e})();class vr{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const xs=new vr("16.2.1"),lr={};function KN(t,e=null,n=null,i){const r=JN(t,e,n,i);return r.resolveInjectorInitializers(),r}function JN(t,e=null,n=null,i,r=new Set){const o=[n||gi,aT(t)];return i=i||("object"==typeof t?void 0:mn(t)),new rm(o,e||zh(),i||null,r)}let dr=(()=>{var t;class e{static create(i,r){if(Array.isArray(i))return KN({name:""},r,i,"");{const o=i.name??"";return KN({name:o},i.parent,i.providers,o)}}}return(t=e).THROW_IF_NOT_FOUND=ch,t.NULL=new hb,t.\u0275prov=St({token:t,providedIn:"any",factory:()=>it(tm)}),t.__NG_ELEMENT_ID__=-1,e})();let ET=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new Pt(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const i of this.callbacks)i.invoke()}finally{this.runningCallbacks=!1;for(const i of this.deferredCallbacks)this.callbacks.add(i);this.deferredCallbacks.clear()}}register(i){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(i)}unregister(i){this.callbacks.delete(i),this.deferredCallbacks.delete(i)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>new t}),e})();function Ib(t){for(;t;){t[$n]|=64;const e=kh(t);if(t_(t)&&!e)return t;t=e}return null}function AT(t){return t.ngOriginalError}class yc{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&AT(e);for(;n&&AT(n);)n=AT(n);return n||null}}const nF=new yt("",{providedIn:"root",factory:()=>!1});class sF extends Qd{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){Ib(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,i){const r=Br(this);this.trackingVersion++;try{e(n,i)}finally{Br(r)}}destroy(){this.trackingVersion++}}let nx=null;function aF(){return nx??=new sF,nx}function cF(t,e){return t[e]??aF()}function lF(t,e){const n=aF();n.hasReadASignal&&(t[e]=nx,n.lView=t,nx=new sF)}const Zn={};function Ot(t){dF(di(),kt(),Eo()+t,!1)}function dF(t,e,n,i){if(!i)if(3==(3&e[$n])){const o=t.preOrderCheckHooks;null!==o&&xp(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Ch(e,o,0,n)}Gl(n)}function Ve(t,e=fn.Default){const n=kt();return null===n?it(t,e):Ua(qr(),n,gn(t),e)}function Eu(){throw new Error("invalid")}function ix(t,e,n,i,r,o,s,a,c,l,d){const h=e.blueprint.slice();return h[_r]=r,h[$n]=140|i,(null!==l||t&&2048&t[$n])&&(h[$n]|=2048),Dv(h),h[Jn]=h[Oa]=t,h[Ar]=n,h[Ra]=s||t&&t[Ra],h[Nn]=a||t&&t[Nn],h[Da]=c||t&&t[Da]||null,h[vo]=o,h[mh]=function CC(){return SC++}(),h[Bs]=d,h[vv]=l,h[Ki]=2==e.type?t[Ki]:h,h}function dm(t,e,n,i,r){let o=t.data[e];if(null===o)o=function ST(t,e,n,i,r){const o=Ko(),s=yp(),c=t.data[e]=function eX(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return iu()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(t,e,n,i,r),function Bv(){return Tn.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=i,o.attrs=r;const s=function Hs(){const t=Tn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return zs(o,!0),o}function Db(t,e,n,i){if(0===n)return-1;const r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function uF(t,e,n,i,r){const o=cF(e,el),s=Eo(),a=2&i;try{if(Gl(-1),a&&e.length>De&&dF(t,e,De,!1),Ba(a?2:0,r),a)o.runInContext(n,i,r);else{const l=Br(null);try{n(i,r)}finally{Br(l)}}}finally{a&&null===e[el]&&lF(e,el),Gl(s),Ba(a?3:1,r)}}function CT(t,e,n){if(e_(e)){const i=Br(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Br(i)}}}function TT(t,e,n){Pv()&&(function aX(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;Vl(n)&&function pX(t,e,n){const i=qo(e,t),r=hF(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=rx(t,ix(t,r,null,s,i,e,null,t[Ra].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Sp(n,e),Co(i,e);const s=n.initialInputs;for(let a=r;a<o;a++){const c=t.data[a],l=gc(e,t,a,n);Co(l,e),null!==s&&mX(0,a-r,l,c,0,s),aa(c)&&(Po(n.index,e)[Ar]=gc(e,t,a,n))}}(t,e,n,qo(n,e)),64==(64&n.flags)&&_F(t,e,n))}function MT(t,e,n=qo){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(e,t):t[s];t[r++]=a}}}function hF(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=IT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function IT(t,e,n,i,r,o,s,a,c,l,d){const h=De+i,p=h+r,m=function XY(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Zn);return n}(h,p),g="function"==typeof l?l():l;return m[Jt]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:d}}let fF=t=>null;function pF(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const o=t[r];null===i?mF(n,e,r,o):i.hasOwnProperty(r)&&mF(n,e,i[r],o)}return n}function mF(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function ma(t,e,n,i,r,o,s,a){const c=qo(e,n);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(PT(t,n,d,i,r),Vl(e)&&function iX(t,e){const n=Po(e,t);16&n[$n]||(n[$n]|=64)}(n,e.index)):3&e.type&&(i=function nX(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function DT(t,e,n,i){if(Pv()){const r=null===i?null:{"":-1},o=function lX(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(uh(e,s.selectors,!1))if(i||(i=[]),aa(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),RT(t,e,a.length)}else i.unshift(s),RT(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&gF(t,e,n,s,r,a),r&&function dX(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const o=n[e[r+1]];if(null==o)throw new Pt(-301,!1);i.push(e[r],o)}}}(n,i,r)}n.mergedAttrs=fi(n.mergedAttrs,n.attrs)}function gF(t,e,n,i,r,o){for(let l=0;l<i.length;l++)Tp(Sp(n,e),t,i[l].type);!function hX(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=Db(t,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];n.mergedAttrs=fi(n.mergedAttrs,d.hostAttrs),fX(t,n,e,c,d),uX(c,d,r),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function tX(t,e,n){const r=e.directiveEnd,o=t.data,s=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=o[d],p=n?n.get(h):null,g=p?p.outputs:null;c=pF(h.inputs,d,c,p?p.inputs:null),l=pF(h.outputs,d,l,g);const A=null===c||null===s||mv(e)?null:gX(c,d,s);a.push(A)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,o)}function _F(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=n.index,s=function GS(){return Tn.lFrame.currentDirectiveIndex}();try{Gl(o);for(let a=i;a<r;a++){const c=t.data[a],l=e[a];x_(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&cX(c,l)}}finally{Gl(-1),x_(s)}}function cX(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function RT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function uX(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;aa(e)&&(n[""]=t)}}function fX(t,e,n,i,r){t.data[i]=r;const o=r.factory||(r.factory=hc(r.type)),s=new fs(o,aa(r),Ve);t.blueprint[i]=s,n[i]=s,function oX(t,e,n,i,r){const o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function sX(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,i,o)}}(t,e,i,Db(t,n,r.hostVars,Zn),r)}function cl(t,e,n,i,r,o){const s=qo(t,e);!function kT(t,e,n,i,r,o,s){if(null==o)t.removeAttribute(e,r,n);else{const a=null==s?Pn(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}(e[Nn],s,o,t.value,n,i,r)}function mX(t,e,n,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)bF(i,n,s[a++],s[a++],s[a++])}function bF(t,e,n,i,r){const o=Br(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==t.setInput?t.setInput(e,r,n,i):e[i]=r}finally{Br(o)}}function gX(t,e,n){let i=null,r=0;for(;r<n.length;){const o=n[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===i&&(i=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function yF(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null,null]}function vF(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const s=t.data[o];vp(n[i]),s.contentQueries(2,e[o],o)}}}function rx(t,e){return t[ka]?t[$d][Vi]=e:t[ka]=e,t[$d]=e,e}function OT(t,e,n){vp(0);const i=Br(null);try{e(t,n)}finally{Br(i)}}function wF(t){return t[Ul]||(t[Ul]=[])}function xF(t){return t.cleanup||(t.cleanup=[])}function AF(t,e){const n=t[Da],i=n?n.get(yc,null):null;i&&i.handleError(e)}function PT(t,e,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];bF(t.data[s],e[s],i,a,r)}}function _X(t,e){const n=Po(e,t),i=n[Jt];!function bX(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[_r];null!==r&&null===n[Bs]&&(n[Bs]=Tb(r,n[Da])),NT(i,n,n[Ar])}function NT(t,e,n){wp(e);try{const i=t.viewQuery;null!==i&&OT(1,i,n);const r=t.template;null!==r&&uF(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&vF(t,e),t.staticViewQueries&&OT(2,t.viewQuery,n);const o=t.components;null!==o&&function yX(t,e){for(let n=0;n<e.length;n++)_X(t,e[n])}(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[$n]&=-5,su()}}let SF=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(i,r,o){const s=typeof Zone>"u"?null:Zone.current,a=new u_(i,d=>{this.all.has(d)&&this.queue.set(d,s)},o);let c;this.all.add(a),a.notify();const l=()=>{a.cleanup(),c?.(),this.all.delete(a),this.queue.delete(a)};return c=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[i,r]of this.queue)this.queue.delete(i),r?r.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:()=>new t}),e})();function ox(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=or(r,a):2==o&&(i=or(i,a+": "+e[++s]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function Rb(t,e,n,i,r=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&i.push(Fi(o)),Xo(o)){for(let a=ar;a<o.length;a++){const c=o[a],l=c[Jt].firstChild;null!==l&&Rb(c[Jt],c,l,i)}o[Hn]!==o[_r]&&i.push(o[Hn])}const s=n.type;if(8&s)Rb(t,e,n.child,i);else if(32&s){const a=Q_(n,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=Zi(e,n);if(Array.isArray(a))i.push(...a);else{const c=kh(e[Ki]);Rb(c[Jt],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function sx(t,e,n,i=!0){const r=e[Ra],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{CF(t,e,t.template,n)}catch(c){throw i&&AF(e,c),c}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function CF(t,e,n,i){const r=e[$n];if(256!=(256&r)){e[Ra].effectManager?.flush(),wp(e);try{Dv(e),function pc(t){return Tn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&uF(t,e,n,2,i);const s=3==(3&r);if(s){const l=t.preOrderCheckHooks;null!==l&&xp(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Ch(e,l,0,null),cu(e,0)}if(function xX(t){for(let e=xw(t);null!==e;e=Ew(e)){if(!e[us])continue;const n=e[qd];for(let i=0;i<n.length;i++){Rv(n[i])}}}(e),TF(e,2),null!==t.contentQueries&&vF(t,e),s){const l=t.contentCheckHooks;null!==l&&xp(e,l)}else{const l=t.contentHooks;null!==l&&Ch(e,l,1),cu(e,1)}!function YY(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const i=cF(e,gh);try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)Gl(~o);else{const s=o,a=n[++r],c=n[++r];w_(a,s),i.runInContext(c,2,e[s])}}}finally{null===e[gh]&&lF(e,gh),Gl(-1)}}(t,e);const a=t.components;null!==a&&IF(e,a,0);const c=t.viewQuery;if(null!==c&&OT(2,c,i),s){const l=t.viewCheckHooks;null!==l&&xp(e,l)}else{const l=t.viewHooks;null!==l&&Ch(e,l,2),cu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[$n]&=-73,m_(e)}finally{su()}}}function TF(t,e){for(let n=xw(t);null!==n;n=Ew(n))for(let i=ar;i<n.length;i++)MF(n[i],e)}function EX(t,e,n){MF(Po(e,t),n)}function MF(t,e){if(!function Mv(t){return 128==(128&t[$n])}(t))return;const n=t[Jt];if(80&t[$n]&&0===e||1024&t[$n]||2===e)CF(n,t,n.template,t[Ar]);else if(t[ph]>0){TF(t,1);const r=t[Jt].components;null!==r&&IF(t,r,1)}}function IF(t,e,n){for(let i=0;i<e.length;i++)EX(t,e[i],n)}class kb{get rootNodes(){const e=this._lView,n=e[Jt];return Rb(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ar]}set context(e){this._lView[Ar]=e}get destroyed(){return 256==(256&this._lView[$n])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Jn];if(Xo(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(Xp(e,i),Ih(n,i))}this._attachedToViewContainer=!1}ms(this._lView[Jt],this._lView)}onDestroy(e){!function g_(t,e){if(256==(256&t[$n]))throw new Pt(911,!1);null===t[Qc]&&(t[Qc]=[]),t[Qc].push(e)}(this._lView,e)}markForCheck(){Ib(this._cdRefInjectingView||this._lView)}detach(){this._lView[$n]&=-129}reattach(){this._lView[$n]|=128}detectChanges(){sx(this._lView[Jt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kC(t,e){Nh(t,e,e[Nn],2,null,null)}(this._lView[Jt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Pt(902,!1);this._appRef=e}}class AX extends kb{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;sx(e[Jt],e,e[Ar],!1)}checkNoChanges(){}get context(){return null}}class DF extends Rt{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=oi(e);return new Ob(n,this.ngModule)}}function RF(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class CX{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=ap(i);const r=this.injector.get(e,lr,i);return r!==lr||n===lr?r:this.parentInjector.get(e,n,i)}}class Ob extends Qe{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=RF(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return RF(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function TS(t){return t.map(CS).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=(r=r||this.ngModule)instanceof ys?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new CX(e,o):e,a=s.get(Sn,null);if(null===a)throw new Pt(407,!1);const h={rendererFactory:a,sanitizer:s.get(ws,null),effectManager:s.get(SF,null),afterRenderEventManager:s.get(ET,null)},p=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",g=i?function qY(t,e,n,i){const o=i.get(nF,!1)||n===yo.ShadowDom,s=t.selectRootElement(e,o);return function KY(t){fF(t)}(s),s}(p,i,this.componentDef.encapsulation,s):Yp(p,m,function SX(t){const e=t.toLowerCase();return"svg"===e?Sv:"math"===e?"math":null}(m)),j=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let k=null;null!==g&&(k=Tb(g,s,!0));const ue=IT(0,null,null,1,0,null,null,null,null,null,null),we=ix(null,ue,null,j,null,null,h,p,s,null,k);let Be,We;wp(we);try{const Ke=this.componentDef;let ut,ft=null;Ke.findHostDirectiveDefs?(ut=[],ft=new Map,Ke.findHostDirectiveDefs(Ke,ut,ft),ut.push(Ke)):ut=[Ke];const bt=function MX(t,e){const n=t[Jt],i=De;return t[i]=e,dm(n,i,2,"#host",null)}(we,g),vt=function IX(t,e,n,i,r,o,s){const a=r[Jt];!function DX(t,e,n,i){for(const r of t)e.mergedAttrs=fi(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(ox(e,e.mergedAttrs,!0),null!==n&&Ow(i,n,e))}(i,t,e,s);let c=null;null!==e&&(c=Tb(e,r[Da]));const l=o.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const h=ix(r,hF(n),null,d,r[t.index],t,o,l,null,null,c);return a.firstCreatePass&&RT(a,t,i.length-1),rx(r,h),r[t.index]=h}(bt,g,Ke,ut,we,h,p);We=bp(ue,De),g&&function kX(t,e,n,i){if(i)_t(t,n,["ng-version",xs.full]);else{const{attrs:r,classes:o}=function MS(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!sa(r))break;r=o}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&_t(t,n,r),o&&o.length>0&&Jp(t,n,o.join(" "))}}(p,Ke,g,i),void 0!==n&&function OX(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const o=n[r];i.push(null!=o?Array.from(o):null)}}(We,this.ngContentSelectors,n),Be=function RX(t,e,n,i,r,o){const s=qr(),a=r[Jt],c=qo(s,r);gF(a,r,s,n,null,i);for(let d=0;d<n.length;d++)Co(gc(r,a,s.directiveStart+d,s),r);_F(a,r,s),c&&Co(c,r);const l=gc(r,a,s.directiveStart+s.componentOffset,s);if(t[Ar]=r[Ar]=l,null!==o)for(const d of o)d(l,e);return CT(a,s,t),l}(vt,Ke,ut,ft,we,[PX]),NT(ue,we,null)}finally{su()}return new TX(this.componentType,Be,sn(We,we),we,We)}}class TX extends je{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new AX(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;PT(o[Jt],o,r,e,n),this.previousInputValues.set(e,n),Ib(Po(this._tNode.index,o))}}get injector(){return new Fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function PX(){const t=qr();Wl(kt()[Jt],t)}function _n(t){let e=function kF(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(aa(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Pt(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const s=t;s.inputs=ax(t.inputs),s.inputTransforms=ax(t.inputTransforms),s.declaredInputs=ax(t.declaredInputs),s.outputs=ax(t.outputs);const a=r.hostBindings;a&&BX(t,a);const c=r.viewQuery,l=r.contentQueries;if(c&&FX(t,c),l&&LX(t,l),qt(t.inputs,r.inputs),qt(t.declaredInputs,r.declaredInputs),qt(t.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),qt(s.inputTransforms,r.inputTransforms)),aa(r)&&r.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===_n&&(n=!1)}}e=Object.getPrototypeOf(e)}!function NX(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=fi(r.hostAttrs,n=fi(n,r.hostAttrs))}}(i)}function ax(t){return t===Dr?{}:t===gi?[]:t}function FX(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function LX(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,o)=>{e(i,r,o),n(i,r,o)}:e}function BX(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function cx(t){return!!function FT(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ll(t,e,n){return t[e]=n}function Qo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function vi(t,e,n,i){const r=kt();return Qo(r,ou(),e)&&(di(),cl(Ji(),r,t,e,n,i)),vi}function hm(t,e,n,i){return Qo(t,ou(),n)?e+Pn(n)+i:Zn}function pn(t,e,n,i,r,o,s,a){const c=kt(),l=di(),d=t+De,h=l.firstCreatePass?function lq(t,e,n,i,r,o,s,a,c){const l=e.consts,d=dm(e,t,4,s||null,ca(l,a));DT(e,n,d,ca(l,c)),Wl(e,d);const h=d.tView=IT(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,n,i,r,o,s):l.data[d];zs(h,!1);const p=qF(l,c,h,t);Sh()&&Oh(l,c,p,h),Co(p,c),rx(c,c[d]=yF(p,c,p,h)),js(h)&&TT(l,c,h),null!=s&&MT(c,h,a)}let qF=function KF(t,e,n,i){return ua(!0),e[Nn].createComment("")};function Ys(t){return nu(function Fv(){return Tn.lFrame.contextLView}(),De+t)}function jt(t,e,n){const i=kt();return Qo(i,ou(),e)&&ma(di(),Ji(),i,t,e,i[Nn],n,!1),jt}function HT(t,e,n,i,r){const s=r?"class":"style";PT(t,n,e.inputs[s],s,i)}function Ct(t,e,n,i){const r=kt(),o=di(),s=De+t,a=r[Nn],c=o.firstCreatePass?function fq(t,e,n,i,r,o){const s=e.consts,c=dm(e,t,2,i,ca(s,r));return DT(e,n,c,ca(s,o)),null!==c.attrs&&ox(c,c.attrs,!1),null!==c.mergedAttrs&&ox(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,n,i):o.data[s],l=JF(o,r,c,a,e,t);r[s]=l;const d=js(c);return zs(c,!0),Ow(a,l,c),32!=(32&c.flags)&&Sh()&&Oh(o,r,l,c),0===function VS(){return Tn.lFrame.elementDepthCount}()&&Co(l,r),function b_(){Tn.lFrame.elementDepthCount++}(),d&&(TT(o,r,c),CT(o,c,r)),null!==i&&MT(r,c),Ct}function It(){let t=qr();yp()?ru():(t=t.parent,zs(t,!1));const e=t;(function xh(t){return Tn.skipHydrationRootTNode===t})(e)&&function Vs(){Tn.skipHydrationRootTNode=null}(),function ii(){Tn.lFrame.elementDepthCount--}();const n=di();return n.firstCreatePass&&(Wl(n,t),e_(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function qS(t){return 0!=(8&t.flags)}(e)&&HT(n,e,kt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function KS(t){return 0!=(16&t.flags)}(e)&&HT(n,e,kt(),e.stylesWithoutHost,!1),It}function jn(t,e,n,i){return Ct(t,e,n,i),It(),jn}let JF=(t,e,n,i,r,o)=>(ua(!0),Yp(i,r,function T_(){return Tn.lFrame.currentNamespace}()));function vc(){return kt()}function vm(t){return!!t&&"function"==typeof t.then}function eL(t){return!!t&&"function"==typeof t.subscribe}function bn(t,e,n,i){const r=kt(),o=di(),s=qr();return function nL(t,e,n,i,r,o,s){const a=js(i),l=t.firstCreatePass&&xF(t),d=e[Ar],h=wF(e);let p=!0;if(3&i.type||s){const A=qo(i,e),D=s?s(A):A,j=h.length,k=s?we=>s(Fi(we[i.index])):i.index;let ue=null;if(!s&&a&&(ue=function yq(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===n&&r[o+1]===i){const a=e[Ul],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(t,e,r,i.index)),null!==ue)(ue.__ngLastListenerFn__||ue).__ngNextListenerFn__=o,ue.__ngLastListenerFn__=o,p=!1;else{o=rL(i,e,d,o,!1);const we=n.listen(D,r,o);h.push(o,we),l&&l.push(r,k,j,j+1)}}else o=rL(i,e,d,o,!1);const m=i.outputs;let g;if(p&&null!==m&&(g=m[r])){const A=g.length;if(A)for(let D=0;D<A;D+=2){const Be=e[g[D]][g[D+1]].subscribe(o),We=h.length;h.push(o,Be),l&&l.push(r,i.index,We,-(We+1))}}}(o,r,r[Nn],s,t,e,i),bn}function iL(t,e,n,i){try{return Ba(6,e,n),!1!==n(i)}catch(r){return AF(t,r),!1}finally{Ba(7,e,n)}}function rL(t,e,n,i,r){return function o(s){if(s===Function)return i;Ib(t.componentOffset>-1?Po(t.index,e):e);let c=iL(e,n,i,s),l=o.__ngNextListenerFn__;for(;l;)c=iL(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function Fn(t=1){return function au(t){return(Tn.lFrame.contextLView=function Vv(t,e){for(;t>0;)e=e[Oa],t--;return e}(t,Tn.lFrame.contextLView))[Ar]}(t)}function vq(t,e){let n=null;const i=function hp(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?uh(t,o,!0):gv(i,o))return r}else n=r}return n}function Vr(t){const e=kt()[Ki][vo];if(!e.projection){const i=e.projection=pu(t?t.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=t?vq(o,t):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function kn(t,e=0,n){const i=kt(),r=di(),o=dm(r,De+t,16,null,n||null);null===o.projection&&(o.projection=e),ru(),(!i[Bs]||iu())&&32!=(32&o.flags)&&function BC(t,e,n){Rw(e[Nn],0,e,n,zn(t,n,e),Mw(n.parent||e[vo],n,e))}(r,i,o)}function fx(t,e,n){return zT(t,"",e,"",n),fx}function zT(t,e,n,i,r){const o=kt(),s=hm(o,e,n,i);return s!==Zn&&ma(di(),Ji(),o,t,s,o[Nn],r,!1),zT}function px(t,e){return t<<17|e<<2}function Au(t){return t>>17&32767}function GT(t){return 2|t}function Jh(t){return(131068&t)>>2}function WT(t,e){return-131069&t|e<<2}function $T(t){return 1|t}function fL(t,e,n,i,r){const o=t[n+1],s=null===e;let a=i?Au(o):Jh(o),c=!1;for(;0!==a&&(!1===c||s);){const d=t[a+1];Cq(t[a],e)&&(c=!0,t[a+1]=i?$T(d):GT(d)),a=i?Au(d):Jh(d)}c&&(t[n+1]=i?GT(o):$T(o))}function Cq(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&mu(t,e)>=0}const co={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pL(t){return t.substring(co.key,co.keyEnd)}function mL(t,e){const n=co.textEnd;return n===e?-1:(e=co.keyEnd=function Dq(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,co.key=e,n),wm(t,e,n))}function wm(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function mx(t,e,n){return xc(t,e,n,!1),mx}function On(t,e){return xc(t,e,null,!0),On}function ga(t){!function Ec(t,e,n,i){const r=di(),o=xo(2);r.firstUpdatePass&&wL(r,null,o,i);const s=kt();if(n!==Zn&&Qo(s,o,n)){const a=r.data[Eo()];if(SL(a,i)&&!vL(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=or(c,n||"")),HT(r,a,s,n,i)}else!function Uq(t,e,n,i,r,o,s,a){r===Zn&&(r=gi);let c=0,l=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const p=c<r.length?r[c+1]:void 0,m=l<o.length?o[l+1]:void 0;let A,g=null;d===h?(c+=2,l+=2,p!==m&&(g=h,A=m)):null===h||null!==d&&d<h?(c+=2,g=d):(l+=2,g=h,A=m),null!==g&&EL(t,e,n,i,g,A,s,a),d=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}(r,a,s,s[Nn],s[o+1],s[o+1]=function Bq(t,e,n){if(null==n||""===n)return gi;const i=[],r=_s(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,o)}}(jq,dl,t,!0)}function dl(t,e){for(let n=function Mq(t){return function _L(t){co.key=0,co.keyEnd=0,co.value=0,co.valueEnd=0,co.textEnd=t.length}(t),mL(t,wm(t,0,co.textEnd))}(e);n>=0;n=mL(e,n))ps(t,pL(e),!0)}function xc(t,e,n,i){const r=kt(),o=di(),s=xo(2);o.firstUpdatePass&&wL(o,t,s,i),e!==Zn&&Qo(r,s,e)&&EL(o,o.data[Eo()],r,r[Nn],t,r[s+1]=function Vq(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=mn(_s(t)))),t}(e,n),i,s)}function vL(t,e){return e>=t.expandoStartIndex}function wL(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[Eo()],s=vL(t,n);SL(o,i)&&null===e&&!s&&(e=!1),e=function Pq(t,e,n,i){const r=function E_(t){const e=Tn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Ub(n=XT(null,t,e,n,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==r)if(n=XT(r,t,e,n,i),null===o){let c=function Nq(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Jh(i))return t[Au(i)]}(t,e,i);void 0!==c&&Array.isArray(c)&&(c=XT(null,t,e,c[1],i),c=Ub(c,e.attrs,i),function Fq(t,e,n,i){t[Au(n?e.classBindings:e.styleBindings)]=i}(t,e,i,c))}else o=function Lq(t,e,n){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Ub(i,t[o].hostAttrs,n);return Ub(i,e.attrs,n)}(t,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),n}(r,o,e,i),function Aq(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Au(s),c=Jh(s);t[i]=n;let d,l=!1;if(Array.isArray(n)?(d=n[1],(null===d||mu(n,d)>0)&&(l=!0)):d=n,r)if(0!==c){const p=Au(t[a+1]);t[i+1]=px(p,a),0!==p&&(t[p+1]=WT(t[p+1],i)),t[a+1]=function xq(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=px(a,0),0!==a&&(t[a+1]=WT(t[a+1],i)),a=i;else t[i+1]=px(c,0),0===a?a=i:t[c+1]=WT(t[c+1],i),c=i;l&&(t[i+1]=GT(t[i+1])),fL(t,d,i,!0),fL(t,d,i,!1),function Sq(t,e,n,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&mu(o,e)>=0&&(n[i+1]=$T(n[i+1]))}(e,d,t,i,o),s=px(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,n,s,i)}}function XT(t,e,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],i=Ub(i,o.hostAttrs,r),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Ub(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ps(t,s,!!n||e[++o]))}return void 0===t?null:t}function jq(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&ps(t,i,n)}function EL(t,e,n,i,r,o,s,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],d=function Eq(t){return 1==(1&t)}(l)?AL(c,e,n,r,Jh(l),s):void 0;gx(d)||(gx(o)||function wq(t){return 2==(2&t)}(l)&&(o=AL(c,null,n,r,a,s)),function kw(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=-1===i.indexOf("-")?void 0:rl.DashCase;null==r?t.removeStyle(n,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=rl.Important),t.setStyle(n,i,r,o))}}(i,s,_p(Eo(),n),r,o))}function AL(t,e,n,i,r,o){const s=null===e;let a;for(;r>0;){const c=t[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let p=n[r+1];p===Zn&&(p=h?gi:void 0);let m=h?j_(p,i):d===i?p:void 0;if(l&&!gx(m)&&(m=j_(c,i)),gx(m)&&(a=m,s))return a;const g=t[r+1];r=s?Au(g):Jh(g)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=j_(c,i))}return a}function gx(t){return void 0!==t}function SL(t,e){return 0!=(t.flags&(e?8:16))}function si(t,e=""){const n=kt(),i=di(),r=t+De,o=i.firstCreatePass?dm(i,r,1,e,null):i.data[r],s=CL(i,n,o,e,t);n[r]=s,Sh()&&Oh(i,n,s,o),zs(o,!1)}let CL=(t,e,n,i,r)=>(ua(!0),function $p(t,e){return t.createText(e)}(e[Nn],i));function To(t){return Es("",t,""),To}function Es(t,e,n){const i=kt(),r=hm(i,t,e,n);return r!==Zn&&function id(t,e,n){const i=_p(e,t);!function Aw(t,e,n){t.setValue(e,n)}(t[Nn],i,n)}(i,Eo(),r),Es}function ul(t,e,n){const i=kt();return Qo(i,ou(),e)&&ma(di(),Ji(),i,t,e,i[Nn],n,!0),ul}const Em="en-US";let $L=Em;function ZT(t,e,n,i,r){if(t=gn(t),Array.isArray(t))for(let o=0;o<t.length;o++)ZT(t[o],e,n,i,r);else{const o=di(),s=kt(),a=qr();let c=td(t)?t:gn(t.provide);const l=Kw(t),d=1048575&a.providerIndexes,h=a.directiveStart,p=a.providerIndexes>>20;if(td(t)||!t.multi){const m=new fs(l,r,Ve),g=eM(c,e,r?d:d+p,h);-1===g?(Tp(Sp(a,s),o,c),QT(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[g]=m,s[g]=m)}else{const m=eM(c,e,d+p,h),g=eM(c,e,d,d+p),D=g>=0&&n[g];if(r&&!D||!r&&!(m>=0&&n[m])){Tp(Sp(a,s),o,c);const j=function cJ(t,e,n,i,r){const o=new fs(t,n,Ve);return o.multi=[],o.index=e,o.componentProviders=0,_B(o,r,i&&!n),o}(r?aJ:sJ,n.length,r,i,l);!r&&D&&(n[g].providerFactory=j),QT(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else QT(o,t,m>-1?m:g,_B(n[r?g:m],l,!r&&i));!r&&i&&D&&n[g].componentProviders++}}}function QT(t,e,n,i){const r=td(e),o=function lT(t){return!!t.useClass}(e);if(r||o){const c=(o?gn(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(n);-1===d?l.push(n,[i,c]):l[d+1].push(i,c)}else l.push(n,c)}}}function _B(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function eM(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function sJ(t,e,n,i){return tM(this.multi,[])}function aJ(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=gc(n,n[Jt],this.providerFactory.index,i);o=a.slice(0,s),tM(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],tM(r,o);return o}function tM(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ai(t,e=[]){return n=>{n.providersResolver=(i,r)=>function oJ(t,e,n){const i=di();if(i.firstCreatePass){const r=aa(t);ZT(n,i.data,i.blueprint,r,!0),ZT(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}class Qh{}class bB{}class nM extends Qh{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new DF(this);const r=function ds(t,e){const n=t[pv]||null;if(!n&&!0===e)throw new Error(`Type ${mn(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function nd(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=JN(e,n,[{provide:Qh,useValue:this},{provide:Rt,useValue:this.componentFactoryResolver},...i],mn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class iM extends bB{constructor(e){super(),this.moduleType=e}create(e){return new nM(this.moduleType,e,[])}}function wx(t,e,n){const i=ao()+t,r=kt();return r[i]===Zn?ll(r,i,n?e.call(n):e()):function Pb(t,e){return t[e]}(r,i)}function MB(t,e,n,i,r,o){const s=e+n;return Qo(t,s,r)?ll(t,s+1,o?i.call(o,r):i(r)):function $b(t,e){const n=t[e];return n===Zn?void 0:n}(t,s+1)}function Zr(t,e){const n=di();let i;const r=t+De;n.firstCreatePass?(i=function IJ(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=hc(i.type)),a=$o(Ve);try{const c=Xl(!1),l=o();return Xl(c),function hq(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,kt(),r,l),l}finally{$o(a)}}function Lo(t,e,n){const i=t+De,r=kt(),o=nu(r,i);return function Yb(t,e){return t[Jt].data[e].pure}(r,i)?MB(r,ao(),e,o.transform,n,o):o.transform(n)}function oM(t){return e=>{setTimeout(t,void 0,e)}}const rn=class OJ extends Se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=oM(o),r&&(r=oM(r)),s&&(s=oM(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof H&&e.add(a),a}};function PJ(){return this._results[Symbol.iterator]()}class Xb{get changes(){return this._changes||(this._changes=new rn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Xb.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=PJ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function Gs(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function rC(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function FJ(t,e,n,i=!0){const r=e[Jt];if(function PC(t,e,n,i){const r=ar+i,o=n.length;i>0&&(n[r-1][Vi]=e),i<o-ar?(e[Vi]=n[r],B_(n,ar+i,e)):(n.push(e),e[Vi]=null),e[Jn]=n;const s=e[Pa];null!==s&&n!==s&&function NC(t,e){const n=t[qd];e[Ki]!==e[Jn][Jn][Ki]&&(t[us]=!0),null===n?t[qd]=[e]:n.push(e)}(s,e);const a=e[Na];null!==a&&a.insertView(t),e[$n]|=128}(r,e,t,n),i){const o=Qi(n,t),s=e[Nn],a=qp(s,t[Hn]);null!==a&&function RC(t,e,n,i,r,o){i[_r]=r,i[vo]=e,Nh(t,i,n,1,r,o)}(r,t[vo],s,e,a,o)}}let $a=(()=>{class e{}return e.__NG_ELEMENT_ID__=jJ,e})();const LJ=$a,BJ=class extends LJ{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=function NJ(t,e,n,i){const r=e.tView,a=ix(t,r,n,4096&t[$n]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Pa]=t[e.index];const l=t[Na];return null!==l&&(a[Na]=l.createEmbeddedView(r)),NT(r,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:i});return new kb(r)}};function jJ(){return Ex(qr(),kt())}function Ex(t,e){return 4&t.type?new BJ(e,t,sn(t,e)):null}let Bo=(()=>{class e{}return e.__NG_ELEMENT_ID__=WJ,e})();function WJ(){return jB(qr(),kt())}const $J=Bo,LB=class extends $J{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return sn(this._hostTNode,this._hostLView)}get injector(){return new Fo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Cp(this._hostTNode,this._hostLView);if(Th(e)){const n=ja(e,this._hostLView),i=Yl(e);return new Fo(n[Jt].data[i+8],n)}return new Fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=BB(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-ar}createEmbeddedView(e,n,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,n,i,r,o){const s=e&&!function Mh(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const A=n||{};a=A.index,i=A.injector,r=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}const c=s?e:new Ob(oi(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const D=(s?l:this.parentInjector).get(ys,null);D&&(o=D)}oi(c.componentType??{});const m=c.create(l,r,null,o);return this.insertImpl(m.hostView,a,false),m}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,i){const r=e._lView;if(function Iv(t){return Xo(t[Jn])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[Jn],d=new LB(l,l[vo],l[Jn]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return FJ(a,r,s,!i),e.attachToViewContainerRef(),B_(sM(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=BB(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=Xp(this._lContainer,n);i&&(Ih(sM(this._lContainer),n),ms(i[Jt],i))}detach(e){const n=this._adjustIndex(e,-1),i=Xp(this._lContainer,n);return i&&null!=Ih(sM(this._lContainer),n)?new kb(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function BB(t){return t[8]}function sM(t){return t[8]||(t[8]=[])}function jB(t,e){let n;const i=e[t.index];return Xo(i)?n=i:(n=yF(i,e,null,t),e[t.index]=n,rx(e,n)),UB(n,e,t,i),new LB(n,t,e)}let UB=function VB(t,e,n,i){if(t[Hn])return;let r;r=8&n.type?Fi(i):function YJ(t,e){const n=t[Nn],i=n.createComment(""),r=qo(e,t);return kr(n,qp(n,r),i,function LC(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Hn]=r};class aM{constructor(e){this.queryList=e,this.matches=null}clone(){return new aM(this.queryList)}setDirty(){this.queryList.setDirty()}}class cM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){const s=n.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new cM(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==$B(e,n).matches&&this.queries[n].setDirty()}}class HB{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class lM{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==n?n.push(o):n=[o])}return null!==n?new lM(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class dM{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new dM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,n,KJ(n,o)),this.matchTNodeWithReadOption(e,n,Mp(n,e,o,!1,!1))}else i===$a?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Mp(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Nt||r===Bo||r===$a&&4&n.type)this.addMatch(n.index,-2);else{const o=Mp(n,e,r,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function KJ(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function ZJ(t,e,n,i){return-1===n?function JJ(t,e){return 11&t.type?sn(t,e):4&t.type?Ex(t,e):null}(e,t):-2===n?function QJ(t,e,n){return n===Nt?sn(e,t):n===$a?Ex(e,t):n===Bo?jB(e,t):void 0}(t,e,i):gc(t,t[Jt],n,e)}function zB(t,e,n,i){const r=e[Na].queries[i];if(null===r.matches){const o=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:ZJ(e,o[l],s[c+1],n.metadata.read))}r.matches=a}return r.matches}function uM(t,e,n,i){const r=t.queries.getByIndex(n),o=r.matches;if(null!==o){const s=zB(t,e,r,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],d=e[-c];for(let h=ar;h<d.length;h++){const p=d[h];p[Pa]===p[Jn]&&uM(p[Jt],p,l,i)}if(null!==d[qd]){const h=d[qd];for(let p=0;p<h.length;p++){const m=h[p];uM(m[Jt],m,l,i)}}}}}return i}function Ln(t){const e=kt(),n=di(),i=A_();vp(i+1);const r=$B(n,i);if(t.dirty&&function Tv(t){return 4==(4&t[$n])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?uM(n,e,i,[]):zB(n,e,r,i);t.reset(o,Qn),t.notifyOnChanges()}return!0}return!1}function Oi(t,e,n){const i=di();i.firstCreatePass&&(WB(i,new HB(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),GB(i,kt(),e)}function Bn(){return function eZ(t,e){return t[Na].queries[e].queryList}(kt(),A_())}function GB(t,e,n){const i=new Xb(4==(4&n));(function QY(t,e,n,i){const r=wF(e);r.push(n),t.firstCreatePass&&xF(t).push(i,r.length-1)})(t,e,i,i.destroy),null===e[Na]&&(e[Na]=new cM),e[Na].queries.push(new aM(i))}function WB(t,e,n){null===t.queries&&(t.queries=new lM),t.queries.track(new dM(e,n))}function $B(t,e){return t.queries.getByIndex(e)}const _M=new yt("Application Initializer");let bM=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Gt(_M,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const o of this.appInits){const s=o();if(vm(s))i.push(s);else if(eL(s)){const a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});i.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),0===i.length&&r(),this.initialized=!0}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const hl=new yt("LocaleId",{providedIn:"root",factory:()=>Gt(hl,fn.Optional|fn.SkipSelf)||function xZ(){return typeof $localize<"u"&&$localize.locale||Em}()});let Cx=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ce(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function p3(...t){}class cn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rn(!1),this.onMicrotaskEmpty=new rn(!1),this.onStable=new rn(!1),this.onError=new rn(!1),typeof Zone>"u")throw new Pt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function $Z(){const t="function"==typeof Ei.requestAnimationFrame;let e=Ei[t?"requestAnimationFrame":"setTimeout"],n=Ei[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function qZ(t){const e=()=>{!function XZ(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ei,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,xM(t),t.isCheckStableRunning=!0,wM(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),xM(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{try{return m3(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),g3(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return m3(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),g3(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,xM(t),wM(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cn.isInAngularZone())throw new Pt(909,!1)}static assertNotInAngularZone(){if(cn.isInAngularZone())throw new Pt(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,YZ,p3,p3);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const YZ={};function wM(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function xM(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function m3(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function g3(t){t._nesting--,wM(t)}class KZ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rn,this.onMicrotaskEmpty=new rn,this.onStable=new rn,this.onError=new rn}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const _3=new yt("",{providedIn:"root",factory:b3});function b3(){const t=Gt(cn);let e=!0;return gr(new le(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),new le(r=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{cn.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=t.onUnstable.subscribe(()=>{cn.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Oo()))}const y3=new yt(""),Mx=new yt("");let SM,EM=(()=>{var t;class e{constructor(i,r,o){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,SM||(function JZ(t){SM=t}(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:s,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}}return(t=e).\u0275fac=function(i){return new(i||t)(it(cn),it(AM),it(Mx))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),AM=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return SM?.findTestabilityInTree(this,i,r)??null}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Su=null;const v3=new yt("AllowMultipleToken"),CM=new yt("PlatformDestroyListeners"),Ix=new yt("appBootstrapListener");function E3(t,e,n=[]){const i=`Platform: ${e}`,r=new yt(i);return(o=[])=>{let s=TM();if(!s||s.injector.get(v3,!1)){const a=[...n,...o,{provide:r,useValue:!0}];t?t(a):function eQ(t){if(Su&&!Su.get(v3,!1))throw new Pt(400,!1);(function w3(){!function xv(t){Xr=t}(()=>{throw new Pt(600,!1)})})(),Su=t;const e=t.get(S3);(function x3(t){t.get(Jw,null)?.forEach(n=>n())})(t)}(function A3(t=[],e){return dr.create({name:e,providers:[{provide:gb,useValue:"platform"},{provide:CM,useValue:new Set([()=>Su=null])},...t]})}(a,i))}return function nQ(t){const e=TM();if(!e)throw new Pt(401,!1);return e}()}}function TM(){return Su?.get(S3)??null}let S3=(()=>{var t;class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const o=function iQ(t="zone.js",e){return"noop"===t?new KZ:"zone.js"===t?new cn(e):t}(r?.ngZone,function C3(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const s=function dJ(t,e,n){return new nM(t,e,n)}(i.moduleType,this.injector,function R3(t){return[{provide:cn,useFactory:t},{provide:Vh,multi:!0,useFactory:()=>{const e=Gt(oQ,{optional:!0});return()=>e.initialize()}},{provide:D3,useFactory:rQ},{provide:_3,useFactory:b3}]}(()=>o)),a=s.injector.get(yc,null);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{Dx(this._modules,s),c.unsubscribe()})}),function T3(t,e,n){try{const i=n();return vm(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(a,o,()=>{const c=s.injector.get(bM);return c.runInitializers(),c.donePromise.then(()=>(function YL(t){cs(t,"Expected localeId to be defined"),"string"==typeof t&&($L=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(hl,Em)||Em),this._moduleDoBootstrap(s),s))})})}bootstrapModule(i,r=[]){const o=M3({},r);return function ZZ(t,e,n){const i=new iM(n);return Promise.resolve(i)}(0,0,i).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(i){const r=i.injector.get(ef);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!i.instance.ngDoBootstrap)throw new Pt(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get(CM,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(i){return new(i||t)(it(dr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function M3(t,e){return Array.isArray(e)?e.reduce(M3,t):{...t,...e}}let ef=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Gt(D3),this.zoneIsStable=Gt(_3),this.componentTypes=[],this.components=[],this.isStable=Gt(Cx).hasPendingTasks.pipe(Le(i=>i?$t(!1):this.zoneIsStable),nt(),Oo()),this._injector=Gt(ys)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const o=i instanceof Qe;if(!this._injector.get(bM).done)throw!o&&function Wd(t){const e=oi(t)||sr(t)||Yr(t);return null!==e&&e.standalone}(i),new Pt(405,!1);let a;a=o?i:this._injector.get(Rt).resolveComponentFactory(i),this.componentTypes.push(a.componentType);const c=function QZ(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Qh),d=a.create(dr.NULL,[],r||a.selector,c),h=d.location.nativeElement,p=d.injector.get(y3,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Dx(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Pt(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;Dx(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(Ix,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Dx(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Pt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Dx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const D3=new yt("",{providedIn:"root",factory:()=>Gt(yc).handleError.bind(void 0)});function rQ(){const t=Gt(cn),e=Gt(yc);return n=>t.runOutsideAngular(()=>e.handleError(n))}let oQ=(()=>{var t;class e{constructor(){this.zone=Gt(cn),this.applicationRef=Gt(ef)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let eo=(()=>{class e{}return e.__NG_ELEMENT_ID__=aQ,e})();function aQ(t){return function cQ(t,e,n){if(Vl(t)&&!n){const i=Po(t.index,e);return new kb(i,i)}return 47&t.type?new kb(e[Ki],e):null}(qr(),kt(),16==(16&t))}class N3{constructor(){}supports(e){return cx(e)}create(e){return new pQ(e)}}const fQ=(t,e)=>e;class pQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fQ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){const s=!i||n&&n.currentIndex<L3(i,r,o)?n:i,a=L3(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,d=c-r;if(l!=d){for(let p=0;p<l;p++){const m=p<o.length?o[p]:o[p]=0,g=m+p;d<=g&&g<l&&(o[p]=m+1)}o[s.previousIndex]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!cx(e))throw new Pt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),i=!0),n=n._next}else r=0,function WX(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,s)?(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new mQ(n,i),o,r),e}_verifyReinsertion(e,n,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new F3),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new F3),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class mQ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gQ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class F3{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new gQ,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function L3(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function j3(){return new Ox([new N3])}let Ox=(()=>{var t;class e{constructor(i){this.factories=i}static create(i,r){if(null!=r){const o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||j3()),deps:[[e,new kp,new gu]]}}find(i){const r=this.factories.find(o=>o.supports(i));if(null!=r)return r;throw new Pt(901,!1)}}return(t=e).\u0275prov=St({token:t,providedIn:"root",factory:j3}),e})();const wQ=E3(null,"core",[]);let xQ=(()=>{var t;class e{constructor(i){}}return(t=e).\u0275fac=function(i){return new(i||t)(it(ef))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),e})(),OM=null;function Cu(){return OM}class NQ{}const Yn=new yt("DocumentToken");let X3=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return Gt(FQ)},providedIn:"platform"}),e})(),FQ=(()=>{var t;class e extends X3{constructor(){super(),this._doc=Gt(Yn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cu().getBaseHref(this._doc)}onPopState(i){const r=Cu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=Cu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function q3(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function K3(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function nf(t){return t&&"?"!==t[0]?"?"+t:t}let Nx=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(){return Gt(BQ)},providedIn:"root"}),e})();const LQ=new yt("appBaseHref");let BQ=(()=>{var t;class e extends Nx{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Gt(Yn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return q3(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+nf(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){const a=this.prepareExternalUrl(o+nf(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){const a=this.prepareExternalUrl(o+nf(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(X3),it(LQ,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Qb=(()=>{var t;class e{constructor(i){this._subject=new rn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function VQ(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(K3(J3(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+nf(r))}normalize(i){return e.stripTrailingSlash(function UQ(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,J3(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+nf(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+nf(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}}return(t=e).normalizeQueryParams=nf,t.joinWithSlash=q3,t.stripTrailingSlash=K3,t.\u0275fac=function(i){return new(i||t)(it(Nx))},t.\u0275prov=St({token:t,factory:function(){return function jQ(){return new Qb(it(Nx))}()},providedIn:"root"}),e})();function J3(t){return t.replace(/\/index.html$/,"")}function sj(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,o]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}class Cee{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ad=(()=>{var t;class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Cee(o.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,a),lj(c,o)}});for(let o=0,s=r.length;o<s;o++){const c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{lj(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Bo),Ve($a),Ve(Ox))},t.\u0275dir=Ut({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function lj(t,e){t.context.$implicit=e.item}let Sc=(()=>{var t;class e{constructor(i,r){this._viewContainer=i,this._context=new Tee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){dj("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){dj("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Bo),Ve($a))},t.\u0275dir=Ut({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Tee{constructor(){this.$implicit=null,this.ngIf=null}}function dj(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${mn(e)}'.`)}class Dee{createSubscription(e,n){return d_(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){d_(()=>e.unsubscribe())}}class Ree{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const kee=new Ree,Oee=new Dee;let ny=(()=>{var t;class e{constructor(i){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){return this._obj?i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue:(i&&this._subscribe(i),this._latestValue)}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(vm(i))return kee;if(eL(i))return Oee;throw function Cc(t,e){return new Pt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(eo,16))},t.\u0275pipe=so({name:"async",type:t,pure:!1,standalone:!0}),e})(),Hi=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),e})();const _j="browser";function Tu(t){return t===_j}function qM(t){return"server"===t}class bj{}class wte extends NQ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ZM extends wte{static makeCurrent(){!function PQ(t){OM||(OM=t)}(new ZM)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function xte(){return ry=ry||document.querySelector("base"),ry?ry.getAttribute("href"):null}();return null==n?null:function Ete(t){qx=qx||document.createElement("a"),qx.setAttribute("href",t);const e=qx.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){ry=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sj(document.cookie,e)}}let qx,ry=null,Ste=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const QM=new yt("EventManagerPlugins");let Ej=(()=>{var t;class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new Pt(5101,!1);return this._eventNameToPlugin.set(i,r),r}}return(t=e).\u0275fac=function(i){return new(i||t)(it(QM),it(cn))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();class Aj{constructor(e){this._doc=e}}const eI="ng-app-id";let Sj=(()=>{var t;class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=qM(s),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(i){for(const r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){const r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${eI}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){const o=this.styleRef;if(o.has(i)){const s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){const o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(eI),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(eI,this.appId),a}}addStyleToHost(i,r){const o=this.getStyleElement(i,r);i.appendChild(o);const s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn),it(Gh),it(wb,8),it(vs))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const tI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nI=/%COMP%/g,Ite=new yt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Tj(t,e){return e.map(n=>n.replace(nI,t))}let Mj=(()=>{var t;class e{constructor(i,r,o,s,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=qM(c),this.defaultRenderer=new iI(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===yo.ShadowDom&&(r={...r,encapsulation:yo.Emulated});const o=this.getOrCreateRenderer(i,r);return o instanceof Dj?o.applyToHost(i):o instanceof rI&&o.applyStyles(),o}getOrCreateRenderer(i,r){const o=this.rendererByCompId;let s=o.get(r.id);if(!s){const a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case yo.Emulated:s=new Dj(l,d,r,this.appId,h,a,c,p);break;case yo.ShadowDom:return new Ote(l,d,i,r,a,c,this.nonce,p);default:s=new rI(l,d,r,h,a,c,p)}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Ej),it(Sj),it(Gh),it(Ite),it(Yn),it(vs),it(cn),it(wb))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();class iI{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(tI[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ij(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(Ij(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Pt(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const o=tI[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=tI[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(rl.DashCase|rl.Important)?e.style.setProperty(n,i,r&rl.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&rl.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=Cu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Ij(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Ote extends iI{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Tj(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class rI extends iI{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?Tj(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Dj extends rI{constructor(e,n,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,n,i,o,s,a,c,l),this.contentAttr=function Dte(t){return"_ngcontent-%COMP%".replace(nI,t)}(l),this.hostAttr=function Rte(t){return"_nghost-%COMP%".replace(nI,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let Pte=(()=>{var t;class e extends Aj{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const Rj=["alt","control","meta","shift"],Nte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fte={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Lte=(()=>{var t;class e extends Aj{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,o){const s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cu().onAndCancel(i,s.domEventName,a))}static parseEventName(i){const r=i.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const s=e._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Rj.forEach(d=>{const h=r.indexOf(d);h>-1&&(r.splice(h,1),a+=d+".")}),a+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=Nte[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Rj.forEach(a=>{a!==o&&(0,Fte[a])(i)&&(s+=a+".")}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const Oj=[{provide:vs,useValue:_j},{provide:Jw,useValue:function Bte(){ZM.makeCurrent()},multi:!0},{provide:Yn,useFactory:function Ute(){return function HC(t){rb=t}(document),document},deps:[]}],Vte=E3(wQ,"browser",Oj),Hte=new yt(""),Pj=[{provide:Mx,useClass:class Ate{addToWindow(e){Ei.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Pt(5103,!1);return o},Ei.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ei.getAllAngularRootElements=()=>e.getAllRootElements(),Ei.frameworkStabilizers||(Ei.frameworkStabilizers=[]),Ei.frameworkStabilizers.push(i=>{const r=Ei.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?Cu().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:y3,useClass:EM,deps:[cn,AM,Mx]},{provide:EM,useClass:EM,deps:[cn,AM,Mx]}],Nj=[{provide:gb,useValue:"root"},{provide:yc,useFactory:function jte(){return new yc},deps:[]},{provide:QM,useClass:Pte,multi:!0,deps:[Yn,cn,vs]},{provide:QM,useClass:Lte,multi:!0,deps:[Yn]},Mj,Sj,Ej,{provide:Sn,useExisting:Mj},{provide:bj,useClass:Ste,deps:[]},[]];let zte=(()=>{var t;class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Gh,useValue:i.appId}]}}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Hte,12))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({providers:[...Nj,...Pj],imports:[Hi,xQ]}),e})();typeof window<"u"&&window;let oy=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:function(i){let r=null;return r=i?new(i||t):it(jj),r},providedIn:"root"}),e})(),jj=(()=>{var t;class e extends oy{constructor(i){super(),this._doc=i}sanitize(i,r){if(null==r)return null;switch(i){case Jr.NONE:return r;case Jr.HTML:return za(r,"HTML")?_s(r):Uw(this._doc,String(r)).toString();case Jr.STYLE:return za(r,"Style")?_s(r):r;case Jr.SCRIPT:if(za(r,"Script"))return _s(r);throw new Pt(5200,!1);case Jr.URL:return za(r,"URL")?_s(r):Qp(String(r));case Jr.RESOURCE_URL:if(za(r,"ResourceURL"))return _s(r);throw new Pt(5201,!1);default:throw new Pt(5202,!1)}}bypassSecurityTrustHtml(i){return function $C(t){return new Ti(t)}(i)}bypassSecurityTrustStyle(i){return function YC(t){return new zC(t)}(i)}bypassSecurityTrustScript(i){return function XC(t){return new Pw(t)}(i)}bypassSecurityTrustUrl(i){return function qC(t){return new Zp(t)}(i)}bypassSecurityTrustResourceUrl(i){return function KC(t){return new GC(t)}(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn))},t.\u0275prov=St({token:t,factory:function(i){let r=null;return r=i?new i:function qte(t){return new jj(t.get(Yn))}(it(dr)),r},providedIn:"root"}),e})();const sI={now:()=>(sI.delegate||Date).now(),delegate:void 0};class rf extends Se{constructor(e=1/0,n=1/0,i=sI){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=n.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}const Kx={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return Kx.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return Kx.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let aI;function rne(t,e,n){let i=n;return function Jte(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,o)=>!("*"===r||!function Qte(t,e){if(!aI){const n=Element.prototype;aI=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&aI.call(t,e)}(t,r)||(i=o,0))),i}class sne{constructor(e,n){this.componentFactory=n.get(Rt).resolveComponentFactory(e)}create(e){return new ane(this.componentFactory,e)}}class ane{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new rf(1),this.events=this.eventEmitters.pipe(Le(i=>gr(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(cn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=Kx.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function ene(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=dr.create({providers:[],parent:this.injector}),i=function ine(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((o,s)=>"*"===o&&(r=s,!0));for(let o=0,s=n.length;o<s;++o){const a=n[o],c=rne(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(eo),this.implementsOnChanges=function Zte(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(ef).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(Q(s=>({name:r,value:s}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Kx.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),o=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Ev(o,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class cne extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const dne={initialConfig:{},parse:{},rename:{}};class une{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...dne,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s={...r,...i.snapshot,...n};for(const[a,c]of Object.entries(e))this.processChange(a,c,s);i.setConfig(s)}processChange(e,n,i){const{options:{parse:r,rename:o}}=this,s=o[e]??e,a=n.currentValue,c=r[e]??r[s];if(null==a)delete i[s];else if(c)try{i[s]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a}`,l.message)}else i[s]=a}}let hne=(()=>{var t;class e{constructor(i,r,o={}){this.configState=i,this.cdr=r,this.options=o,this.initialized=!1,this.configManager=new une(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(i){this.configManager.addChanges(i),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return(t=e).\u0275fac=function(i){Eu()},t.\u0275dir=Ut({type:t,features:[Sr]}),e})();const cI={boolean:t=>"false"!=`${t}`,json:t=>"string"==typeof t?JSON.parse(t):t,function:t=>{if("function"!=typeof t)throw new Error("Expected a javascript function");return t}},sf_dbOptions={ccfOwlUrl:"https://r5i95k35v5.us-east-2.awsapprunner.com/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??"",useRemoteApi:!1,remoteApiEndpoint:"https://r5i95k35v5.us-east-2.awsapprunner.com/v1"};function Vj(t,e,n,i,r,o,s){try{var a=t[o](s),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Ht(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function s(c){Vj(o,i,r,s,a,"next",c)}function a(c){Vj(o,i,r,s,a,"throw",c)}s(void 0)})}}function sy(t){return(sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ve(t,e,n){return(e=function pne(t){var e=function fne(t,e){if("object"!==sy(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==sy(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sy(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hj(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function fl(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||Hj()}const zj=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";fl();class gne{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";ve(this,"storage",void 0),ve(this,"id",void 0),ve(this,"config",void 0),this.storage=function mne(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function lI(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Jx;var t;function Gj(t){return"string"==typeof t?Jx[t.toUpperCase()]||Jx.WHITE:t}function Zx(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=Jx||(Jx={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const Iu={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},Qx=Iu.window||Iu.self||Iu.global,ay=Iu.process||{};function Mm(){let t;var e,n;if(fl&&"performance"in Qx)t=null==Qx||null===(e=Qx.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in ay){var i;const r=null==ay||null===(i=ay.hrtime)||void 0===i?void 0:i.call(ay);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const Im={debug:fl&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Ene={enabled:!0,level:0};function qa(){}const Wj={},$j={once:!0};class dI{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};ve(this,"id",void 0),ve(this,"VERSION",zj),ve(this,"_startTs",Mm()),ve(this,"_deltaTs",Mm()),ve(this,"_storage",void 0),ve(this,"userData",{}),ve(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new gne("__probe-".concat(this.id,"__"),Ene),this.timeStamp("".concat(this.id," started")),function xne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(o=>r===o)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Mm()-this._startTs).toPrecision(10))}getDelta(){return Number((Mm()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Zx(e,n)}warn(e){return this._getLogFunction(0,e,Im.warn,arguments,$j)}error(e){return this._getLogFunction(0,e,Im.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Im.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Im.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return this._getLogFunction(e,n,Im.debug||Im.info,arguments,$j)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||qa,i&&[i],{tag:Tne(n)}):qa}image(e){let{logLevel:n,priority:i,image:r,message:o="",scale:s=1}=e;return this._shouldLog(n||i)?fl?function Cne(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=lI(o,n,i);console.log(...s)},o.src=e,qa}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...lI(e,n,i)),qa;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...lI(o,n,i)),o.src=e.toDataURL(),qa}return qa}({image:r,message:o,scale:s}):function Sne(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),qa}({image:r,message:o,scale:s}):qa}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||qa)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Xj({logLevel:e,message:n,opts:i}),{collapsed:o}=i;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||qa)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Yj(e)}_getLogFunction(e,n,i,r,o){if(this._shouldLog(e)){o=Xj({logLevel:e,message:n,args:r,opts:o}),Zx(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Mm();const s=o.tag||o.message;if(o.once){if(Wj[s])return qa;Wj[s]=Mm()}return n=function Ane(t,e,n){if("string"==typeof e){const i=n.time?function bne(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function _ne(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function wne(t,e,n){return!fl&&"string"==typeof t&&(e&&(e=Gj(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=Gj(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,o.message,o),i.bind(console,n,...o.args)}return qa}}function Yj(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Zx(Number.isFinite(e)&&e>=0),e}function Xj(t){const{logLevel:e,message:n}=t;t.logLevel=Yj(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return Zx("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Tne(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}ve(dI,"VERSION",zj);const mi=new dI({id:"deck"}),wi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(wi,"IDENTITY",{get:()=>(mi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const pl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},eE={common:0,meters:1,pixels:2},qj={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},dn=new dI({id:"luma.gl"});function Ts(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Ine="Requires WebGL2";function tE(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function ui(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function nE(t){return Ts(tE(t),"Invalid WebGLRenderingContext"),t}function es(t){return Ts(ui(t),Ine),t}const cy={};const ly=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(ly.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const af=function(e){const n=this;this.gl=e,function Pne(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(cy[i]=!0)}while(0!==i);for(i in cy)if(cy[i])return delete cy[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:n.currentArrayBuffer=s;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=s}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const c=n.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,d){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,o);const p=h.attribs[o];return p.buffer=n.currentArrayBuffer,p.size=s,p.type=a,p.normalized=c,p.stride=l,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function kne(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};af.prototype.VERTEX_ARRAY_BINDING_OES=34229,af.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new ly(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},af.prototype.createVertexArrayOES=function(){const e=new ly(this);return this.vertexArrayObjects.push(e),e},af.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},af.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof ly&&e.hasBeenBound&&e.ext===this)},af.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function One(t,e){cy[t]=!0,void 0!==e&&function Rne(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(r===o)return;(!r||o.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){const l=o.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(s!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const Kj="OES_element_index",Jj="WEBGL_draw_buffers",Zj="WEBGL_debug_renderer_info",nr=t=>ui(t)?void 0:0,Wne={3074:t=>ui(t)?void 0:36064,35723:t=>ui(t)?void 0:4352,35977:nr,32937:nr,36795:(t,e)=>{const n=ui(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(Zj);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(Zj);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:nr,35071:nr,37447:nr,36063:(t,e)=>{if(!ui(t)){const n=t.getExtension(Jj);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:nr,35374:nr,35377:nr,34852:t=>{if(!ui(t)){const e=t.getExtension(Jj);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Kj)?2147483647:65535,33001:t=>t.getExtension(Kj)?16777216:65535,33e3:t=>16777216,37157:nr,35373:nr,35657:nr,36183:nr,37137:nr,34045:nr,35978:nr,35979:nr,35968:nr,35376:nr,35375:nr,35659:nr,37154:nr,35371:nr,35658:nr,35076:nr,35077:nr,35380:nr},Qj="ANGLE_instanced_arrays",eU={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Ts(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Qj]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Ts(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ts(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Ts(!1)},deleteQuery:()=>{Ts(!1)},beginQuery:()=>{Ts(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},uI={readBuffer:(t,e,n)=>{ui(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:o}=function Zne(t,e){return{webgl2:ui(t),ext:t.getExtension(e)}}(t,Qj);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!ui(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>ui(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,o=r.EXT_texture_filter_anisotropic;i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function $ne(t,e,n){const i=Wne[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function iie(t,e){let{extension:n,target:i,target2:r}=e;const o=eU[n];Ts(o);const{meta:s={}}=o,{suffix:a=""}=s,c=t.getExtension(n);for(const l of Object.keys(o)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof o[l]&&(h=o[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function Qne(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function Nne(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new af(this)),this.__OESVertexArrayObject))}}(t),function eie(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function nie(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&iie(t,{extension:n,target:t.luma,target2:t})}(t,eU),function tie(t,e){let{target:n,target2:i}=e;Object.keys(uI).forEach(r=>{if("function"==typeof uI[r]){const o=t[r]?t[r].bind(t):()=>{},s=uI[r].bind(null,t,o);n[r]=s,i[r]=s}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const hI={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Du=(t,e,n)=>e?t.enable(n):t.disable(n),tU=(t,e,n)=>t.hint(n,e),ba=(t,e,n)=>t.pixelStorei(n,e);function dy(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const sie={3042:Du,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Du,2885:(t,e)=>t.cullFace(e),2929:Du,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Du,35723:tU,36006:(t,e)=>{const n=ui(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:tU,2849:(t,e)=>t.lineWidth(e),32823:Du,32824:"polygonOffset",10752:"polygonOffset",35977:Du,32938:"sampleCoverage",32939:"sampleCoverage",3089:Du,3088:(t,e)=>t.scissor(...e),2960:Du,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:ba,3317:ba,37440:ba,37441:ba,37443:ba,3330:ba,3332:ba,3331:ba,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:ba,32878:ba,3316:ba,3315:ba,32877:ba,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=dy(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=dy(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=dy(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=dy(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=dy(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Pr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const aie={blendEquation:(t,e,n)=>t.blendEquationSeparate(Pr(32777,e,n),Pr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Pr(32969,e,n),Pr(32968,e,n),Pr(32971,e,n),Pr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Pr(32824,e,n),Pr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Pr(32938,e,n),Pr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Pr(2962,e,n),Pr(2967,e,n),Pr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Pr(34816,e,n),Pr(36003,e,n),Pr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Pr(2964,e,n),Pr(2965,e,n),Pr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Pr(34817,e,n),Pr(34818,e,n),Pr(34819,e,n))},nU={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},ml=(t,e)=>t.isEnabled(e),iU={3042:ml,2884:ml,2929:ml,3024:ml,32823:ml,32926:ml,32928:ml,3089:ml,2960:ml,35977:ml};function rU(t){for(const e in t)return!1;return!0}function cie(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function oU(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function lie(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...s);return c&&i(...s),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class uie{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function fie(t,e){if("number"==typeof(e=e||hI)){const r=e,o=iU[r];return o?o(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const o=iU[r];i[r]=o?o(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},hI),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Ts(this.stateStack.length>0),cd(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Ts(void 0!==o);const s=e[o],a=this.cache[o];cie(s,a)||(n=!0,i=a,r&&!(o in r)&&(r[o]=a),this.cache[o]=s)}return{valueChanged:n,oldValue:i}}}function sU(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Ts(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new uie(t,{copyState:i}),function die(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const o in nU)lie(t,o,nU[o]);oU(t,"getParameter"),oU(t,"isEnabled")}return t.state.enable=n,t}function aU(t){Ts(t.state),t.state.pop()}function cd(t,e){if(Ts(tE(t),"setParameters requires a WebGL context"),rU(e))return;const n={};for(const r in e){const o=Number(r),s=sie[r];s&&("string"==typeof s?n[s]=!0:s(t,e[r],o))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,aie[r])(t,e,i)}function Tc(t,e,n){if(rU(e))return n(t);const{nocatch:i=!0}=e;let r;if(function hie(t){t.state||sU(t,{copyState:!1}),t.state.push()}(t),cd(t,e),i)r=n(t),aU(t);else try{r=n(t)}finally{aU(t)}return r}function Dm(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function fI(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function gie(t,e,n,i,r){const o=cU(t[0],e,n);let s=lU(t[1],e,i,r),a=cU(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;return a=lU(t[1]+1,e,i,r),r?(a=0===a?a:a+1,l=s,s=a):l=a===i-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,Dm(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function cU(t,e,n){return Math.min(Math.round(t*e),n-1)}function lU(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const pI=fl(),_ie=pI&&typeof document<"u",dU={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function uU(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ts(pI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},dU,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:o}=t,s=function wie(t){let o,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(_ie&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}({canvas:o,width:e,height:n,onError:i});return r=function vie(t,e){const{onError:n}=e;let i=null;const r=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(s,t),r?(r=mI(r,t),function xie(t){const e=ui(t)?"WebGL2":"WebGL1",n=function bie(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";dn.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function mI(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function Eie(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},dU,e);const{manageState:n,debug:i}=e;return n&&sU(t,{copyState:!1,log:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return dn.log(1,...o)()}}),pI&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),dn.level=Math.max(dn.level,1)):dn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function hU(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class fU{constructor(e,n){ve(this,"name",void 0),ve(this,"type",void 0),ve(this,"sampleSize",1),ve(this,"time",void 0),ve(this,"count",void 0),ve(this,"samples",void 0),ve(this,"lastTiming",void 0),ve(this,"lastSampleTime",void 0),ve(this,"lastSampleCount",void 0),ve(this,"_count",0),ve(this,"_time",0),ve(this,"_samples",0),ve(this,"_startTime",0),ve(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=hU(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(hU()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class gI{constructor(e){ve(this,"id",void 0),ve(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof fU?e:new fU(n,i)),this.stats[n]}}const uy="8.5.20",cf=new class Cie{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new gI({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==uy)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(uy));function Xt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function _I(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Xt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function Ru(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(fl()&&dn.log(1,"luma.gl ".concat(uy," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:uy,version:uy,log:dn,stats:cf,globals:{modules:{},nodeIO:{}}}),globalThis;const bI={};function Ks(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";bI[t]=bI[t]||1;const e=bI[t]++;return"".concat(t,"-").concat(e)}function pU(t){return Xt("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function Rm(t){let e=!0;for(const n in t){e=!1;break}return e}function mU(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach(s=>{o.methodName||(o[s]=()=>{throw dn.removed("Calling removed method ".concat(e,".").concat(s,": "),r)(),new Error(s)})})}const km="Resource subclass must define virtual methods";class ld{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};nE(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||Ks(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xt(e=_I(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=ui(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))return o&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},o=ui(this.gl),s={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?Ru(this.gl,c):c;s[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(s[h]=Ru(this.gl,s[h]))}}return s}setParameter(e,n){Xt(e=_I(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=ui(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=_I(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return mU(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(km)}_deleteHandle(){throw new Error(km)}_bindHandle(e){throw new Error(km)}_getOptsFromHandle(){throw new Error(km)}_getParameter(e,n){throw new Error(km)}_setParameter(e,n){throw new Error(km)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=cf.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];cf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=cf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=cf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Tie="Failed to deduce GL constant from typed array";function yI(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Tie)}}function hy(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Iie(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)s[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:s,width:r,height:o}}function vI(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";dn.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];dn.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let s=null;for(const a in o)if(a in e){const c=o[a];dn.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}const Die={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Rie={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Js{static getBytesPerElement(e){return hy(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Xt(e.size),hy(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new Js(Die,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Js.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Js.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=vI("Accessor",e,Rie),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const _U={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},kie={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:_U},Oie={removedProps:_U};class zi extends ld{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/Js.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/Js.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=vI("Buffer",e,kie),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=vI("Buffer",e,Oie))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Js(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,o=e.byteLength||e.length;Xt(n);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==o?(es(this.gl),this.gl.bufferSubData(this.target,i,n,r,o)):this.gl.bufferSubData(s,i,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:o}=e;const{gl:s}=this;return es(s),s.bindBuffer(36662,n.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,r,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};es(this.gl);const o=hy(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(s,r||s),l=a+c);const d=Math.min(s,c);return r=r||d,Xt(r<=d),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(Xt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;Xt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const o=yI(e);return Xt(o),this.setAccessor(new Js(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Xt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/hy(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new Js(this.accessor,{type:yI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return dn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return dn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return dn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return dn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Js(this.accessor,e),this}}const wI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},bU={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},yU={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Fie=[9729,9728],vU=globalThis.WebGLBuffer||function(){};class lf extends ld{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let o=!0;return i&&(o=o&&function Pie(t,e){const n=wI[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=ui(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),o=o&&(!r||function Nie(t,e){const n=wI[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),o}constructor(e,n){const{id:i=Ks("texture"),handle:r,target:o}=n;super(e,{id:i,handle:r}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(k=>this.initialize(Object.assign({},e,{pixels:k,data:k}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;n||(n=r);let{width:h,height:p,dataFormat:m,type:g,compressed:A=!1,mipmaps:D=!0}=e;const{depth:j=0}=e;return({width:h,height:p,compressed:A,dataFormat:m,type:g}=this._deduceParameters({format:o,type:g,dataFormat:m,compressed:A,data:n,width:h,height:p})),this.width=h,this.height=p,this.depth=j,this.format=o,this.type=g,this.dataFormat=m,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),D&&this._isNPOT()&&(dn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),D=!1,this._updateForNPOT(c)),this.mipmaps=D,this.setImageData({data:n,width:h,height:p,depth:j,format:o,type:g,dataFormat:m,border:s,mipmaps:D,parameters:l,compressed:A}),D&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(dn.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Tc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:p=this.height,dataFormat:m=this.dataFormat,compressed:g=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:g,width:h,height:p}=this._deduceParameters({format:o,type:d,dataFormat:m,compressed:g,data:l,width:h,height:p}));const{gl:A}=this;A.bindTexture(this.target,this.handle);let D=null;({data:l,dataType:D}=this._getDataType({data:l,compressed:g}));let j,k=0;return Tc(this.gl,c,()=>{switch(D){case"null":A.texImage2D(n,r,o,h,p,s,m,d,l);break;case"typed-array":A.texImage2D(n,r,o,h,p,s,m,d,l,a);break;case"buffer":j=es(A),j.bindBuffer(35052,l.handle||l),j.texImage2D(n,r,o,h,p,s,m,d,a),j.bindBuffer(35052,null);break;case"browser-object":ui(A)?A.texImage2D(n,r,o,h,p,s,m,d,l):A.texImage2D(n,r,o,m,d,l);break;case"compressed":for(const[ue,we]of l.entries())A.compressedTexImage2D(n,ue,we.format,we.width,we.height,s,we.data),k+=we.levelSize;break;default:Xt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===D?k:l&&l.byteLength?l.byteLength:this.width*this.height*(bU[this.dataFormat]||4)*(yU[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:p=this.dataFormat,compressed:m=!1,offset:g=0,border:A=this.border,parameters:D={}}=e;if(({type:h,dataFormat:p,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:p,compressed:m,data:r,width:a,height:c})),Xt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const j=r;r=j.data,a=j.shape[0],c=j.shape[1]}r instanceof zi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Tc(this.gl,D,()=>{if(m)this.gl.compressedTexSubImage2D(n,l,o,s,a,c,d,r);else if(null===r)this.gl.texSubImage2D(n,l,o,s,a,c,p,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,o,s,a,c,p,h,r,g);else if(r instanceof vU){const j=es(this.gl);j.bindBuffer(35052,r),j.texSubImage2D(n,l,o,s,a,c,p,h,g),j.bindBuffer(35052,null)}else ui(this.gl)?es(this.gl).texSubImage2D(n,l,o,s,a,c,p,h,r):this.gl.texSubImage2D(n,l,o,s,p,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return dn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof zi?{data:n.handle,dataType:"buffer"}:n instanceof vU?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:o,dataFormat:s,type:a,compressed:c}=e;const l=wI[n];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:o}=this._deduceImageSize(i,r,o)),{dataFormat:s,type:a,compressed:c,width:r,height:o,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},Xt(r,"Could not deduced texture size"),Xt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),Xt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Xt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(ui(this.gl)||!this.width||!this.height||pU(this.width)&&pU(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===Fie.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function Lie(t,e){return Xt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class Ms extends lf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return lf.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};nE(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:Lie(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const df="EXT_color_buffer_float",wU={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:df,bpp:2},33327:{gl2:df,bpp:4},34842:{gl2:df,bpp:8},33326:{gl2:df,bpp:4},33328:{gl2:df,bpp:8},34836:{gl2:df,bpp:16},35898:{gl2:df,bpp:4}};class Om extends ld{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function Bie(t,e,n){const i=n[e];if(!i)return!1;const r=ui(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,wU)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:o=0}=e;return Xt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==o&&ui(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*wU[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const xU=6144,CU="clear: bad arguments";function EI(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Xt(0!==s,CU),Tc(t,o,()=>{t.clear(s)})}const AI=[34069,34070,34071,34072,34073,34074];let Gie=(()=>{class t extends lf{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};nE(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:o=0,y:s=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return Ht(function*(){let{width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=n;const{gl:h}=i,p=s||a,m=yield Promise.all(AI.map(g=>{const A=p[g];return Promise.all(Array.isArray(A)?A:[A])}));i.bind(),AI.forEach((g,A)=>{m[A].length>1&&!1!==i.opts.mipmaps&&dn.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[A].forEach((D,j)=>{r&&o?h.texImage2D(g,j,l,r,o,c,l,d,D):h.texImage2D(g,j,l,l,d,D)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=n,{gl:h}=this,p=s||a;return this.bind(),p instanceof Promise?p.then(m=>this.setImageDataForFace(Object.assign({},n,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,o,c,l,d,p):h.texImage2D(i,0,l,l,d,p),this}}return t.FACES=AI,t})();class Wie extends lf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return ui(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};es(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:p={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Tc(this.gl,p,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,o,s,a,c,l,h),h instanceof zi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,o,s,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(bU[this.dataFormat]||4)*(yU[this.type]||1),"Texture"),this.loaded=!0,this}}function Yie(t,e){const{gl:n,width:i,height:r,id:o}=t;return new lo(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:t}}))}function iE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=fy(t);Xt(d);const{gl:p,handle:m,attachments:g}=d;a=a||d.width,c=c||d.height,36064===o&&null===m&&(o=1028),Xt(g[o]),l=l||g[o].type,s=function qie(t,e,n,i,r){if(t)return t;const o=hy(e=e||5121,{clamped:!1}),s=function zie(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Xt(!1),0}}(n);return new o(i*r*s)}(s,l,r,a,c),l=l||yI(s);const A=p.bindFramebuffer(36160,m);return p.readPixels(n,i,a,c,r,l,s),p.bindFramebuffer(36160,A||null),h&&d.delete(),s}function SI(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=iE(t,{sourceAttachment:e}),{width:r,height:o}=t;for(;o>n;)({data:i,width:r,height:o}=Iie({data:i,width:r,height:o}));!function Mie(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:o}=t;const s=n*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const c=a*s,l=(i-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),c=a.createImageData(r,o);return c.data.set(i),a.putImageData(c,0,0),s.toDataURL()}function fy(t){return t instanceof lo?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Yie(t),deleteFramebuffer:!0}}const TU="Multiple render targets not supported";class lo extends ld{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(o=o&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new lo(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=es(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=es(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Xt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const p=r[h];(Array.isArray(p)?p[0]:p).resize({width:n,height:i})}else r=this._createDefaultAttachments(o,s,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return Xt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&dn.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(s=>{r[s]=null}),Object.assign(r,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in r){Xt(void 0!==s,"Misspelled framebuffer binding point?");const a=Number(s),c=r[a];let l=c;if(l)if(l instanceof Om)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,p=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:p})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function Jie(t){return(lo.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&EI(this.gl,{color:n,depth:i,stencil:r}),o.forEach((a,c)=>{!function Hie(t){let{framebuffer:e=null,buffer:n=xU,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};es(t),Tc(t,{framebuffer:e},()=>{switch(n){case xU:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[o,s]=r;t.clearBufferfi(34041,0,o,s);break;default:Xt(!1,CU)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return dn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return dn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return dn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return dn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return dn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return dn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:o,height:s}=e;const a=es(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=Ru(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const o of i)r[n?Ru(this.gl,o):o]=this.getAttachmentParameter(e,o,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const o=Number(r);i[e?Ru(this.gl,o):o]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window<"u"&&window.open(SI(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>dn.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=SI(this,{targetMaxHeight:100});return dn.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,o){let s=null;return e&&(s=s||{},s[36064]=new Ms(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),n&&i?(s=s||{},s[33306]=new Om(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):n?(s=s||{},s[36096]=new Om(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o}),this.ownResources.push(s[36096])):i&&Xt(!1),s}_unattach(e){const n=this.attachments[e];n&&(n instanceof Om?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:o}=e;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:es(s).framebufferTextureLayer(36160,n,i.target,o,r);break;case 34067:const c=function Kie(t){return t<34069?t+34069:t}(r);s.framebufferTexture2D(36160,n,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,n,3553,i.handle,o);break;default:Xt(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function Dne(t){return ui(t)?t:null}(this.gl);n?n.readBuffer(e):Xt(36064===e||1029===e,TU),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=es(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Xt(1===e.length&&(36064===e[0]||1029===e[0]),TU)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function tre(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in MU)void 0===t.luma.caps[e]&&(t.luma.caps[e]=DU(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}lo.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const MU={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Qie(t){const e=new Ms(t,{format:6408,type:5126,dataFormat:6408}),n=new lo(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},ere=2;function CI(t,e){return IU(t,e)}function IU(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>DU(t,n))}function DU(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function nre(t,e){const n=MU[e];let i;Xt(n,e);const r=ui(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const o of r)i=i&&!!t.getExtension(o)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:Xt(!1);return i}(t,e)),t.luma.caps[e]||dn.log(ere,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}class TI{constructor(e,n){ve(this,"opts",void 0),ve(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let o=i;if(i&&i.length!==r){o=new Float32Array(r);const s=n.elementOffset||0;for(let a=0;a<r;++a)o[a]=i[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const py=new class rre{constructor(e={}){ve(this,"_pool",[]),ve(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=n*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+o);const p=this._allocate(l,d,a,h);return e&&s?p.set(e):a||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,n,i,r){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>r&&(o=r);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(s.splice(c,1)[0],0,o);return i&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,o=n.findIndex(s=>s.byteLength>=r);o<0?n.push(i):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,i),n.length>this.opts.poolSize&&n.shift()}},ore=1/Math.PI*180,sre=1/180*Math.PI,zr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function are(t,{precision:e=zr.precision}={}){return t=function hre(t){return Math.round(t/zr.EPSILON)*zr.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function dd(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function RU(t){return function lre(t,e){return ud(t,n=>n*sre,e)}(t)}function cre(t){return function dre(t,e){return ud(t,n=>n*ore,e)}(t)}function wr(t,e,n){return ud(t,i=>Math.max(e,Math.min(n,i)))}function rE(t,e,n){return dd(t)?t.map((i,r)=>rE(i,e[r],n)):n*e+(1-n)*t}function ku(t,e,n){const i=zr.EPSILON;n&&(zr.EPSILON=n);try{if(t===e)return!0;if(dd(t)&&dd(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!ku(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=zr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{zr.EPSILON=i}}function ud(t,e,n){if(dd(t)){const i=t;n=n||function fre(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class oE extends(function pre(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:dd(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(zr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+are(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!ku(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(n[r]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(zr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function hi(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function my(t,e,n=""){if(zr.debug&&!function mre(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function gy(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class OU extends oE{get x(){return this[0]}set x(e){this[0]=hi(e)}get y(){return this[1]}set y(e){this[1]=hi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return hi(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return hi(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return gy(e>=0&&e<this.ELEMENTS,"index is out of range"),hi(this[e])}setComponent(e,n){return gy(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var gl=1e-6,Zs=typeof Float32Array<"u"?Float32Array:Array;function PU(){var t=new Zs(3);return Zs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function NU(t,e,n){var i=new Zs(3);return i[0]=t,i[1]=e,i[2]=n,i}function FU(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function sE(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2];return t[0]=r*c-o*a,t[1]=o*s-i*c,t[2]=i*a-r*s,t}function MI(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/(s=s||1),t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t}function LU(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function BU(t,e,n){var i=n[0],r=n[1],o=n[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,p=i*c-r*a,m=r*p-o*h,g=o*d-i*p,A=i*h-r*d,D=2*n[3];return h*=D,p*=D,g*=2,A*=2,t[0]=a+(d*=D)+(m*=2),t[1]=c+h+g,t[2]=l+p+A,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function jU(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o||1;return t[0]=(n[0]*i+n[4]*r+n[8]*o)/s,t[1]=(n[1]*i+n[5]*r+n[9]*o)/s,t[2]=(n[2]*i+n[6]*r+n[10]*o)/s,t}function UU(t,e,n){const i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*o,t[1]=n[1]*i+n[4]*r+n[7]*o,t[2]=n[2]*i+n[5]*r+n[8]*o,t[3]=e[3],t}PU();const II=[0,0,0];let aE;class nn extends OU{static get ZERO(){return aE||(aE=new nn(0,0,0),Object.freeze(aE)),aE}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&dd(e)?this.copy(e):(zr.debug&&(hi(e),hi(n),hi(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return zr.debug&&(hi(e.x),hi(e.y),hi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=hi(e)}angle(e){return function Are(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&FU(t,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return sE(this,this,e),this.check()}rotateX({radians:e,origin:n=II}){return function wre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=II}){return function xre(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=II}){return function Ere(t,e,n,i){var r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return MI(this,this,e),this.check()}transformAsVector(e){return jU(this,this,e),this.check()}transformByMatrix3(e){return LU(this,this,e),this.check()}transformByMatrix2(e){return function Mre(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return BU(this,this,e),this.check()}}const VU=new nn;function Pm(t,e,n,i){VU.set(t,e,n);const r=VU.len();return{distance:i/r,normal:new nn(-t/r,-e/r,-n/r)}}function Ore(t){return t-Math.fround(t)}let by;function DI(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,o=(r-i)/n;by=py.allocate(by,o,{type:Float32Array,size:2*n});let s=i,a=0;for(;s<r;){for(let c=0;c<n;c++){const l=t[s++];by[a+c]=l,by[a+c+n]=Ore(l)}a+=2*n}return by.subarray(0,o*n*2)}function Pre(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}function cE(t){return t.stride||t.size*t.bytesPerElement}function HU(t,e){e.offset&&mi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=cE(t),o=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:n}}class Fre{constructor(e,n,i){ve(this,"gl",void 0),ve(this,"id",void 0),ve(this,"size",void 0),ve(this,"settings",void 0),ve(this,"value",void 0),ve(this,"doublePrecision",void 0),ve(this,"_buffer",void 0),ve(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,o=5130===r;let a,{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),a=o?5126:!r&&n.isIndexed?e&&CI(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function ire(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=o,o&&!1===n.fp64&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:s,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new zi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*cE(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),py.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,o=function Nre(t,e){const n=HU(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new TI(this,o.high),i["".concat(e,"64Low")]=r?new TI(this,o.low):new Float32Array(this.size),i}if(n){const i=HU(this.getAccessor(),n);return{[e]:new TI(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,o=i*r;if(n&&o&&n.length>=o){const s=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<r;l++){const d=n[c++];d<s[l]&&(s[l]=d),d>a[l]&&(a[l]=d)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof zi?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),n.constant&&this._areValuesEqual(o,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(i.buffer){const o=i.buffer;n.externalBuffer=o,n.constant=!1,this.value=i.value||null;const s=i.value instanceof Float64Array;r.type=i.type||o.accessor.type,r.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=cE(r)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;n.externalBuffer=null,n.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=cE(r);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=DI(o,r));const c=o.byteLength+a+2*r.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),r.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?DI(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,o=py.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),n&&r&&s.subData({data:r instanceof Float64Array?DI(r,this):r,offset:a})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&mi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e){let s=o;for(;--s>=0;)n[i+s]=r[s];return n}switch(o){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=o;for(;--s>=0;)n[i+s]=Number.isFinite(e[s])?e[s]:r[s]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}function jo(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}const zU=[],GU=[];function lE(t,e=0,n=1/0){let i=zU;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(GU.length=t.length,i=GU):i=zU,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function WU(t){return t&&t[Symbol.asyncIterator]}function RI(t,e=(()=>!0)){return Array.isArray(t)?$U(t,e,[]):e(t)?[t]:[]}function $U(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?$U(r,e,n):e(r)&&n.push(r)}return n}function Bre({target:t,source:e,start:n=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let a=n;s<r;s++)t[a++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}const jre=[],dE=[[0,1/0]];function kI(t){const{source:e,target:n,start:i=0,size:r,getData:o}=t,a=e.length,c=(t.end||n.length)-i;if(a>c)return void n.set(e.subarray(0,c),i);if(n.set(e,i),!o)return;let l=a;for(;l<c;){const d=o(l,e);for(let h=0;h<r;h++)n[i+l]=d[h]||0,l++}}const Hre={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function YU(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Hre[n],...e,...t,type:n}}function XU(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function qU(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function KU(t){t.push(t.shift())}function OI(t,e){const{doublePrecision:n,settings:i,value:r,size:o}=t,s=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function JU({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:o=(s=>s)}){const s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,c=n.byteOffset,l=n.startIndices,d=r&&l,h=OI(n,e),p=n.isConstant;if(!d&&i>=h)return;const m=p?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!p){const j=o;o=(k,ue)=>n.normalizeConstant(j(k,ue))}const g=p?(j,k)=>o(m,k):(j,k)=>o(m.subarray(j,j+a),k),A=t.getData({length:i}),D=new Float32Array(h);(function Vre({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return kI({source:t,target:e,size:n,getData:i}),e;let s=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,o.length);for(let d=1;d<l;d++){const h=r[d]*n,p=o[d]*n;kI({source:t.subarray(s,h),target:e,start:a,end:p,size:n,getData:c}),s=h,a=p}a<e.length&&kI({source:[],target:e,start:a,size:n,getData:c})})({source:A,target:D,sourceStartIndices:r,targetStartIndices:l,size:a,getData:g}),t.byteLength<D.byteLength+c&&t.reallocate(D.byteLength+c),t.subData({data:D,offset:c})}class PI extends Fre{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:dE}),ve(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return YU(Array.isArray(n)?e[n.find(o=>e[o])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function Ure(t,e){if(t===dE||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let o=0;o<i;o++){const s=t[o];s[1]<e[0]?(n.push(s),r=o+1):s[0]>e[1]?n.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=dE}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=jre}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==dE),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let c=!0;if(s){for(const[l,d]of o)s.call(r,this,{data:n,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of o){const h=Number.isFinite(l)?this.getVertexOffset(l):0,p=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:p})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;return jo(ArrayBuffer.isView(s.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function Lre(t,e){const{size:n,stride:i,offset:r,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,c=i?i/a:n,l=r?r/a:0,d=Math.floor((t.length-l)/c);return(h,{index:p,target:m})=>{if(!o){const j=p*c+l;for(let k=0;k<n;k++)m[k]=t[j+k];return m}const g=o[p],A=o[p+1]||d;let D;if(s){D=new Array(A-g);for(let j=g;j<A;j++){const k=j*c+l;m=new Array(n);for(let ue=0;ue<n;ue++)m[ue]=t[k+ue];D[j-g]=m}}else if(c===n)D=t.subarray(g*n+l,A*n+l);else{D=new t.constructor((A-g)*n);let j=0;for(let k=g;k<A;k++){const ue=k*c+l;for(let we=0;we<n;we++)D[j++]=t[ue+we]}}return D}}(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:n,nested:!!s.size&&s.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:p,transform:m}=a,g=c.binaryAccessor||("function"==typeof p?p:o[p]);jo("function"==typeof g,'accessor "'.concat(p,'" is not a function'));let A=e.getVertexOffset(i);const{iterable:D,objectInfo:j}=lE(n,i,r);for(const k of D){j.index++;let ue=g(k,j);if(m&&(ue=m.call(this,ue)),h){const we=(j.index<h.length-1?h[j.index+1]:s)-h[j.index];if(ue&&Array.isArray(ue[0])){let Be=A;for(const We of ue)e._normalizeValue(We,l,Be),Be+=d}else ue&&ue.length>d?l.set(ue,A):(e._normalizeValue(ue,j.target,0),Bre({target:l,source:j.target,start:A,count:we}));A+=we*d}else e._normalizeValue(ue,l,A),A+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}function zre(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function yy(t){let n,e={};return i=>{for(const r in i)if(!zre(i[r],e[r])){n=t(i),e=i;break}return n}}let NI={};function Gre(t){NI=t}function ts(t,e,n,i){mi.level>0&&NI[t]&&NI[t].call(null,e,n,i)}function ya(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const ZU="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",$re="#version 300 es\n".concat(ZU);function QU(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,o]=n;return e.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function e4(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?$re:e>300?"#version ".concat(e,"\n").concat(ZU):"void main() {gl_FragColor = vec4(0);}";const o=function qre(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return ya(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class t4 extends ld{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return ui(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};es(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Rm(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(n);return i<0?(this.unused[e]=r,dn.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof zi?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const o=n&&n.handle;return o&&void 0!==r?this.gl.bindBufferRange(35982,e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,o),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Kre{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof zi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Xt(ui(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const o=i[r];if("string"==typeof o){const s=n[o],{byteLength:a,usage:c,accessor:l}=s;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new t4(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const o=this.feedbackMap[r];n[r]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[r],Xt(i[o]instanceof zi)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new zi(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function n4(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const vy="vs",Qre={[vy]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},uE="__LUMA_INJECT_DECLARATIONS__",i4=/void\s+main\s*\([^)]*\)\s*\{\n?/,r4=/}\n?[^{}]*$/,LI=[];function o4(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===vy;for(const o in n){const s=n[o];s.sort((c,l)=>c.order-l.order),LI.length=s.length;for(let c=0,l=s.length;c<l;++c)LI[c]=s[c].injection;const a="".concat(LI.join("\n"),"\n");switch(o){case"vs:#decl":r&&(t=t.replace(uE,a));break;case"vs:#main-start":r&&(t=t.replace(i4,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(r4,c=>a+c));break;case"fs:#decl":r||(t=t.replace(uE,a));break;case"fs:#main-start":r||(t=t.replace(i4,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(r4,c=>a+c));break;default:t=t.replace(o,c=>c+a)}}return t=t.replace(uE,""),i&&(t=t.replace(/\}\s*$/,o=>o+Qre[e])),t}function BI(t){const e={};return ya(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}const eoe={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},hE="transform_uSize_",s4="transform_position";const coe={10241:9728,10240:9728,10242:33071,10243:33071};class doe{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function ioe(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let o,s;n&&(({width:o,height:s}=i),r["".concat(hE).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(hE).concat(a)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=iE(n);if(!e)return i;const r=i.constructor,o=function Xre(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return ya(!1),null}}(this.targetTextureType),s=new r(i.length*o/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<o;l++)s[a++]=i[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof Ms)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,o)=>{o[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new zi(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new lo(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(coe)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function $ie(t,e){Xt(t instanceof Ms||t instanceof Gie||t instanceof Wie);const n=t.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d}=t;return new n(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=function noe(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,s=Object.keys(n).length,a=null;const c={};let l=e,d={};if(s>0||i){const h=l.split("\n"),p=h.slice();if(h.forEach((m,g,A)=>{if(s>0){const D=function aoe(t,e){const n={},i=function roe(t){return QU(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const s="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function ooe(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(hE).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(o),d=function Yre(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return ya(!1),null}}(r),h="  ".concat(r," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return n[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:n}}return null}(m,n);if(D){const{updatedLine:j,inject:k}=D;p[g]=j,d=BI([d,k]),Object.assign(c,D.samplerTextureMap),s--}}i&&!a&&(a=function soe(t,e){const n=QU(t,["varying","out"]);return n&&n.name===e?n.type:null}(m,i))}),i){Xt(r);const m="".concat(hE).concat(i),g="uniform vec2 ".concat(m,";\n"),A="     vec2 ".concat(s4," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat(s4,", 0, 1.);\n");d=BI([d,{"vs:#decl":g,"vs:#main-start":A}])}l=p.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=BI([e.inject||{},a]);return this.targetTextureType=s,this.samplerTextureMap=c,{vs:r,fs:e._fs||e4({version:n4(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[eoe].concat(e.modules||[]):e.modules,uniforms:o,inject:l}}}const jI={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function hoe(t){let e=a4(t);return"object"===e?t?"type"in t?Object.assign({},t,jI[t.type]):"value"in t?(e=a4(t.value),Object.assign({type:e},t,jI[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},jI[e])}function a4(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class UI{constructor(e){let{name:n,vs:i,fs:r,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:p}=e;ya("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||p,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function moe(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(d),s&&(this.uniforms=function uoe(t){const e={};for(const n in t){const r=hoe(t[n]);e[n]=r}return e}(s))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:ya(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const o=i[r];r in e&&!o.private?(o.validate&&ya(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=o.value}return n}}function goe(t){return function c4(t){const e={},n={};return VI({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(l4(t))}function VI(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<n)&&(r[o.name]=n);for(const o of e)o.dependencies&&VI({modules:o.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function l4(t,e){return t.map(n=>(n instanceof UI||(ya("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),ya(n.name,"shader module has no name"),(n=new UI(n)).dependencies=l4(n.dependencies)),n))}const boe=7936,yoe=7937,voe=7938,woe=35724,HI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},uf={};function Aoe(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(HI).forEach(t=>{uf[t]=t});const zI={};function d4(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=HI[e];if(ya(i,e),!function _oe(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in zI)return zI[e];const o=n.behavior||"enable",s="#extension GL_".concat(i[0]," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),zI[e]=c,c}function fE(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function Soe(t,e){const n=HI[e];ya(n,e);const i=function xoe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return ya(!1===r||!0===r),r}(t,n))}function Nm(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const u4=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Moe=[...u4,[Nm("attribute"),"in $1"],[Nm("varying"),"out $1"]],Ioe=[...u4,[Nm("varying"),"in $1"]],h4=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Doe=[...h4,[Nm("in"),"attribute $1"],[Nm("out"),"varying $1"]],Roe=[...h4,[Nm("in"),"varying $1"]],GI="gl_FragColor",WI=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,koe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function pE(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const Foe="\n\n".concat(uE,"\n\n"),f4={[vy]:"vertex",fs:"fragment"};function p4(t,e){let{id:n,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;ya("string"==typeof i,"shader source must be a string");const p=r===vy,m=i.split("\n");let g=100,A="",D=i;0===m[0].indexOf("#version ")?(g=300,A=m[0],D=m.slice(1).join("\n")):A="#version ".concat(g);const j={};o.forEach(Ke=>{Object.assign(j,Ke.getDefines())}),Object.assign(j,s);let k=d?"".concat(A,"\n").concat(function Voe(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(f4[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function Uoe(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(f4[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function Coe(t){switch(function Eoe(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||boe),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||yoe);return{gpuVendor:Aoe(n,i),vendor:n,renderer:i,version:t.getParameter(voe),shadingLanguageVersion:t.getParameter(woe)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function Toe(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return fE(t,uf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),fE(t,uf.GLSL_DERIVATIVES)&&d4(t,uf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),fE(t,uf.GLSL_FRAG_DATA)&&d4(t,uf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),fE(t,uf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function Hoe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(j),"\n").concat(p?"":"precision highp float;\n\n","\n"):"".concat(A,"\n");const ue=function Goe(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,o]=n.split(":"),s=n.replace(/\(.+/,"");e[r][s]=Object.assign(i,{signature:o})}),e}(a),we={},Be={},We={};for(const Ke in c){const ut="string"==typeof c[Ke]?{injection:c[Ke],order:0}:c[Ke],ft=Ke.match(/^(v|f)s:(#)?([\w-]+)$/);ft?ft[2]?"decl"===ft[3]?Be[Ke]=[ut]:We[Ke]=[ut]:we[Ke]=[ut]:We[Ke]=[ut]}for(const Ke of o){h&&Ke.checkDeprecations(D,h),k+=Ke.getModuleSource(r,g);const ft=Ke.injections[r];for(const bt in ft){const vt=bt.match(/^(v|f)s:#([\w-]+)$/);if(vt){const ht="decl"===vt[2]?Be:We;ht[bt]=ht[bt]||[],ht[bt].push(ft[bt])}else we[bt]=we[bt]||[],we[bt].push(ft[bt])}}return k+=Foe,k=o4(k,r,Be),k+=function zoe(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const o=e[i];o.sort((s,a)=>s.order-a.order);for(const s of o)n+="  ".concat(s.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(ue[r],we),k+=D,k=o4(k,r,We),k=function Ooe(t,e,n){switch(e){case 300:return n?pE(t,Moe):function Poe(t){const e=(t=pE(t,Ioe)).match(WI);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(GI,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(koe,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(GI,"\\b"),"g"),n)}return t}(t);case 100:return n?pE(t,Doe):function Noe(t){const e=(t=pE(t,Roe)).match(WI);if(e){const n=e[1];t=t.replace(WI,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),GI)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(k,l?100:g,p),k}function joe(t){return function(n){const i={};for(const r of t){const o=r.getUniforms(n,i);Object.assign(i,o)}return i}}const Woe={5126:ur.bind(null,"uniform1fv",va,1,ns),35664:ur.bind(null,"uniform2fv",va,2,ns),35665:ur.bind(null,"uniform3fv",va,3,ns),35666:ur.bind(null,"uniform4fv",va,4,ns),5124:ur.bind(null,"uniform1iv",Ou,1,ns),35667:ur.bind(null,"uniform2iv",Ou,2,ns),35668:ur.bind(null,"uniform3iv",Ou,3,ns),35669:ur.bind(null,"uniform4iv",Ou,4,ns),35670:ur.bind(null,"uniform1iv",Ou,1,ns),35671:ur.bind(null,"uniform2iv",Ou,2,ns),35672:ur.bind(null,"uniform3iv",Ou,3,ns),35673:ur.bind(null,"uniform4iv",Ou,4,ns),35674:ur.bind(null,"uniformMatrix2fv",va,4,hd),35675:ur.bind(null,"uniformMatrix3fv",va,9,hd),35676:ur.bind(null,"uniformMatrix4fv",va,16,hd),35678:Uo,35680:Uo,5125:ur.bind(null,"uniform1uiv",mE,1,ns),36294:ur.bind(null,"uniform2uiv",mE,2,ns),36295:ur.bind(null,"uniform3uiv",mE,3,ns),36296:ur.bind(null,"uniform4uiv",mE,4,ns),35685:ur.bind(null,"uniformMatrix2x3fv",va,6,hd),35686:ur.bind(null,"uniformMatrix2x4fv",va,8,hd),35687:ur.bind(null,"uniformMatrix3x2fv",va,6,hd),35688:ur.bind(null,"uniformMatrix3x4fv",va,12,hd),35689:ur.bind(null,"uniformMatrix4x2fv",va,8,hd),35690:ur.bind(null,"uniformMatrix4x3fv",va,12,hd),35678:Uo,35680:Uo,35679:Uo,35682:Uo,36289:Uo,36292:Uo,36293:Uo,36298:Uo,36299:Uo,36300:Uo,36303:Uo,36306:Uo,36307:Uo,36308:Uo,36311:Uo},$oe={},Yoe={},Xoe={},m4=[0];function $I(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(m4[0]=t,t=m4);const r=t.length;if(r%e&&dn.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=i[r];o||(o=new n(r),i[r]=o);for(let s=0;s<r;s++)o[s]=t[s];return o}function va(t,e){return $I(t,e,Float32Array,$oe)}function Ou(t,e){return $I(t,e,Int32Array,Yoe)}function mE(t,e){return $I(t,e,Uint32Array,Xoe)}function g4(t,e,n){const i=Woe[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function qoe(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function Joe(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function Qoe(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof lf||t instanceof Om)||t instanceof lo&&!!t.texture}function Zoe(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,o=n.length;r<o;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function Uo(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function ur(t,e,n,i){let r=null,o=null;return(s,a,c)=>{const l=e(c,n),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),o=d,h=!0;else{Xt(o===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(l[p]!==r[p]){h=!0;break}}return h&&(i(s,t,a,l),r.set(l)),h}}function ns(t,e,n,i){t[e](n,i)}function hd(t,e,n,i){t[e](n,!1,i)}function gE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function b4(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const o=t[i+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();n+=y4("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function y4(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class wy extends ld{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Xt(!1),"unknown"}}constructor(e,n){nE(e),Xt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:gE(n.source,null)||n.id||Ks("unnamed ".concat(wy.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=gE(n,null);i&&(this.id=Ks(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(wy.getTypeName(this.shaderType),":").concat(this.id)}getName(){return gE(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:o,warnings:s}=function _4(t,e,n,i){const r=t.split(/\r?\n/),o={},s={},a=i||gE(e)||"(unnamed)",c="".concat(function nse(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const p=h.split(":"),m=p[0],g=parseInt(p[2],10);if(isNaN(g))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==m?o[g]=h:s[g]=h}const l=function ise(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((o,s)=>{const a=String(s+e);return y4(a,r-a.length)+n+o})}(e);return{shaderName:c,errors:b4(o,l),warnings:b4(s,l)}}(i,this.source,this.shaderType,this.id);throw dn.error("GLSL compilation errors in ".concat(r,"\n").concat(o))(),dn.warn("GLSL compilation warnings in ".concat(r,"\n").concat(s))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class YI extends wy{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class XI extends wy{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const ose=5120,sse=5121,ase=5122,cse=5123,uo=5126,xy=5124,Ey=5125,qI={[uo]:[uo,1,"float"],35664:[uo,2,"vec2"],35665:[uo,3,"vec3"],35666:[uo,4,"vec4"],[xy]:[xy,1,"int"],35667:[xy,2,"ivec2"],35668:[xy,3,"ivec3"],35669:[xy,4,"ivec4"],[Ey]:[Ey,1,"uint"],36294:[Ey,2,"uvec2"],36295:[Ey,3,"uvec3"],36296:[Ey,4,"uvec4"],35670:[uo,1,"bool"],35671:[uo,2,"bvec2"],35672:[uo,3,"bvec3"],35673:[uo,4,"bvec4"],35674:[uo,8,"mat2"],35685:[uo,8,"mat2x3"],35686:[uo,8,"mat2x4"],35675:[uo,12,"mat3"],35687:[uo,12,"mat3x2"],35688:[uo,12,"mat3x4"],35676:[uo,16,"mat4"],35689:[uo,16,"mat4x2"],35690:[uo,16,"mat4x3"]};function S4(t){const e=qI[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function C4(t,e){switch(t){case ose:case sse:case ase:case cse:t=uo}for(const n in qI){const[i,r,o]=qI[n];if(i===t&&r===e)return{glType:n,name:o}}return null}class kse{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((r,o)=>r.location-o.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!ui(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,o,s,a)}this.varyingInfos.sort((r,o)=>r.location-o.location)}_addAttribute(e,n,i,r){const{type:o,components:s}=S4(i),a={type:o,size:r*s};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new Js(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:o,components:s}=S4(i),c={location:e,name:n,accessor:new Js({type:o,size:r*s})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Ose=35981,Pse=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class M4 extends ld{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",Pse),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:o,bufferMode:s=Ose}=e;return this.hash=n||"",this.vs="string"==typeof i?new YI(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new XI(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Xt(this.vs instanceof YI),Xt(this.fs instanceof XI),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(es(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new kse(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:p=null,transformFeedback:m,framebuffer:g,parameters:A={},uniforms:D,samplers:j}=e;if((D||j)&&(dn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(D||{})),dn.priority>=n){const k=g?g.id:"default",ue="mode=".concat(Ru(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(Ru(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(k);dn.log(n,ue)()}return Xt(p),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(p.bindForDraw(r,d,()=>{if(void 0!==g&&(A=Object.assign({},A,{framebuffer:g})),m){const k=function A4(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Xt(!1),0}}(i);m.begin(k)}this._bindTextures(),Tc(this.gl,A,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,o,d):c&&ui(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(i,s,a,r,l,o):c?this.gl.drawElements(i,r,l,o):h?this.gl2.drawArraysInstanced(i,o,r,d):this.gl.drawArrays(i,o,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dn.priority>=2&&function Koe(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!Joe(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let o=i,s=!1;if(o instanceof lo&&(o=o.texture),o instanceof lf)if(s=this.uniforms[n]!==i,s){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:c}=r;a.bind(c),o=c,this._textureUniforms[n]=a}else o=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(o)||s)&&Zoe(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new YI({handle:r});break;case 35632:i.fs=new XI({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Ks(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),dn.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),dn.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||dn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=qoe(i.name);let o=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=g4(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(r,"[").concat(s,"]")),this._uniformSetters["".concat(r,"[").concat(s,"]")]=g4(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class Ay{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Ay(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(n),h=this._getHash(i),p=l.map(ue=>this._getHash(ue.name)).sort(),m=s.map(ue=>this._getHash(ue)),g=Object.keys(r).sort(),A=Object.keys(o).sort(),D=[],j=[];for(const ue of g)D.push(this._getHash(ue)),D.push(this._getHash(r[ue]));for(const ue of A)j.push(this._getHash(ue)),j.push(this._getHash(o[ue]));const k="".concat(d,"/").concat(h,"D").concat(D.join("/"),"M").concat(p.join("/"),"I").concat(j.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[k]){const ue=function Boe(t,e){const{vs:n,fs:i}=e,r=goe(e.modules||[]);return{gl:t,vs:p4(t,Object.assign({},e,{source:n,type:vy,modules:r})),fs:p4(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:joe(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[k]=new M4(this.gl,{hash:k,vs:ue.vs,fs:ue.fs,varyings:s,bufferMode:a}),this._getUniforms[k]=ue.getUniforms||(we=>{}),this._useCounts[k]=0}return this._useCounts[k]++,this._programCache[k]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],c=a.name;n[r++]=a,i[c]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}let bE=null;const yE=globalThis;function I4(t){if(!t&&!fl())return"Node";if(Hj(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":yE.chrome?"Chrome":yE.safari?"Safari":yE.mozInnerScreenX?"Firefox":"Unknown"}class wa extends ld{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||ui(e)||"Chrome"===I4()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new wa(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return wa.MAX_ATTRIBUTES=wa.MAX_ATTRIBUTES||e.getParameter(34921),wa.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:wa._setConstantFloatArray(e,n,i);break;case Int32Array:wa._setConstantIntArray(e,n,i);break;case Uint32Array:wa._setConstantUintArray(e,n,i);break;default:Xt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return wa.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Xt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:p}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(Xt(ui(h)),p.vertexAttribIPointer(e,r,o,s,a)):h.vertexAttribPointer(e,r,o,c,s,a),h.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!wa.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,o=i.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new zi(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){const a=function Fse(t,e){const n=function Nse(t){return(!bE||bE.byteLength<t)&&(bE=new ArrayBuffer(t)),bE}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,o);(function Lse(t){let{target:e,source:n,start:i=0,count:r=1}=t;const o=n.length,s=r*o;let a=0;for(let c=i;a<o;a++)e[c++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)})({target:a,source:i,start:0,count:o}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Xt(!1)}}static _setConstantIntArray(e,n,i){switch(Xt(ui(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Xt(!1)}}static _setConstantUintArray(e,n,i){switch(Xt(ui(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Xt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Xt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const Use=/^(.+)__LOCATION_([0-9]+)$/,Vse=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Hse{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new wa(e),mU(this,"VertexArray","v6.0",Vse),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,o)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new zi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof zi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof zi&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=n,dn.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const c=this._getAttributeInfo(a||s);if(!c)return o;const d=Js.resolve(c.accessor,this.accessors[s]||{},i,r),{size:h,type:p}=d;return Xt(Number.isFinite(h)&&Number.isFinite(p)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=Use.exec(e),r=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+o,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof zi)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof zi)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof zi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)r=this.values[o],ArrayBuffer.isView(r)&&this._setConstantAttribute(o,r)}_setConstantAttributeZero(e,n){if(wa.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){wa.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:o}=r,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof zi){const a=i;if(s){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function Sy(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function zse(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(r+=",".concat(s%i==0?" ":"")),r+=Sy(t[s],e);const o=t.length>n?"...":"]";return"".concat(r).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function D4(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,o="NOT PROVIDED",s=1,a=0,c=0;if(n&&(o=n.type,s=n.size,o=String(o).replace("Array",""),l=-1!==o.indexOf("nt")),e instanceof zi){const p=e,{data:m,changed:g}=p.getDebugData();let A;return d=g?"*":"",h=m,c=p.byteLength,a=c/m.BYTES_PER_ELEMENT/s,n?A="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(Ru(r,o),")"):(l=!0,A="".concat(c," bytes")),{[i]:"".concat(d).concat(Sy(h,{size:s,isInteger:l})),"Format ":A}}return h=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=-1!==o.indexOf("nt"),{[i]:"".concat(Sy(h,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function Wse(t,e){const{type:n,size:i}=e,r=C4(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function R4(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Xt(n);const s=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(s)&&KI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(s)&&KI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||KI({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const p={};if(!r)for(const m in i){const g=i[m];c[m]||(h++,p[m]={Type:"NOT USED: ".concat(g),[e]:Sy(g)})}return{table:c,count:d,unusedTable:p,unusedCount:h}}function KI(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:o}=t;const s=i[r],a=function $se(t){return null!=t}(s);return!(o&&a||(e[r]={[n]:a?Sy(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function k4(t){const{type:e,size:n}=t.accessor,i=C4(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const Xse={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Kse(t,e){const{attributeMap:n=Xse}=e||{};return n&&n[t]||t}function Jse(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Xt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const O4=()=>{},eae={};class jm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=Ks("model")}=n;Xt(tE(e)),this.id=i,this.gl=e,this.id=n.id||Ks("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Ay.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Xt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Xt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Xt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function qse(t,e,n){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=Kse(o,n);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const c=s.value,l={...s};delete l.value,i[a]=[new zi(t,c),l],Jse(o,l)}}if(r){const o=r.value||r;Xt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new zi(t,{data:o,target:34963}),s]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Rm(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return EI(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(r),dn.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:p=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:g=d.isInstanced}=this.props;g&&!this.isInstanced&&dn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:A,instanceCount:D}=this,{onBeforeRender:j=O4,onAfterRender:k=O4}=this.props;j(),this.program.setUniforms(this.uniforms);const ue=this.program.draw(Object.assign(eae,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:h,indexType:p,isInstanced:A,instanceCount:D,offset:h?m:0}));return k(),dn.priority>=2&&this._logDrawCallEnd(l,c,i),ue}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:o}=e;i&&this._setFeedbackBuffers(i),n&&(o=Object.assign({},o,{35977:n})),r.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{r.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Xt(n instanceof M4,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Hse(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof zi&&n.delete()}}_setAnimationProps(e){this.animated&&Xt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Rm(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new t4(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),dn.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:dn.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const o=function Gse(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=D4(e,e.elements,null,n));const r=e.values;for(const o in r){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(Wse(s.name,c))),i[a]=D4(e,r[o],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=R4({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=R4({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&dn.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&dn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function Yse(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=k4(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=k4(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);dn.table(e,o)(),dn.table(e,s)(),dn.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),dn.groupEnd(2)()}}class JI{static isSupported(e){return ui(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();Xt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new jm(n,Object.assign({},e,{fs:e.fs||e4({version:n4(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function tae(t){return!(Rm(t.feedbackBuffers)&&Rm(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new Kre(e,n)),function nae(t){return!(Rm(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new doe(e,n)),Xt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}class Cy{constructor(e){ve(this,"_inProgress",void 0),ve(this,"_handle",void 0),ve(this,"_timeline",void 0),ve(this,"time",void 0),ve(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const dae={interpolation:class iae{constructor({gl:e,attribute:n,timeline:i}){ve(this,"gl",void 0),ve(this,"type","interpolation"),ve(this,"attributeInTransition",void 0),ve(this,"settings",void 0),ve(this,"attribute",void 0),ve(this,"transition",void 0),ve(this,"currentStartIndices",void 0),ve(this,"currentLength",void 0),ve(this,"transform",void 0),ve(this,"buffers",void 0),this.gl=e,this.transition=new Cy(i),this.attribute=n,this.attributeInTransition=new PI(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function oae(t,e){const n=qU(e.size);return new JI(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new zi(e,r),new zi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:o}=this;KU(r);const s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)JU({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=OI(o,n),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:r[0],aTo:XU(0,o)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let o=r/n;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class sae{constructor({gl:e,attribute:n,timeline:i}){ve(this,"gl",void 0),ve(this,"type","spring"),ve(this,"attributeInTransition",void 0),ve(this,"settings",void 0),ve(this,"attribute",void 0),ve(this,"transition",void 0),ve(this,"currentStartIndices",void 0),ve(this,"currentLength",void 0),ve(this,"texture",void 0),ve(this,"framebuffer",void 0),ve(this,"transform",void 0),ve(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Cy(i),this.attribute=n,this.attributeInTransition=new PI(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function cae(t){return new Ms(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function lae(t,e){return new lo(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function aae(t,e,n){const i=qU(e.size);return new JI(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new zi(e,r),new zi(e,r),new zi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:o}=this,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)JU({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=OI(o,n),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:XU(0,o)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const s=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),KU(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),iE(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class uae{constructor(e,{id:n,timeline:i}){ve(this,"id",void 0),ve(this,"isSupported",void 0),ve(this,"gl",void 0),ve(this,"timeline",void 0),ve(this,"transitions",void 0),ve(this,"needsRedraw",void 0),ve(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=JI.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const o=e[r],s=o.getTransitionSetting(n);s&&this._updateAttribute(r,o,s)}for(const r in this.transitions){const o=e[r];(!o||!o.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let o=!r||r.type!==i.type;if(o){if(!this.isSupported)return void mi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const s=dae[i.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):(mi.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const P4="attributeManager.invalidate";class _ae{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){ve(this,"id",void 0),ve(this,"gl",void 0),ve(this,"attributes",void 0),ve(this,"updateTriggers",void 0),ve(this,"needsRedraw",void 0),ve(this,"userData",void 0),ve(this,"stats",void 0),ve(this,"attributeTransitionManager",void 0),ve(this,"mergeBoundsMemoized",yy(Pre)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new uae(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);ts(P4,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);ts(P4,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}){let c=!1;ts("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=n,o[l]&&mi.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(s[l])||d.setBinaryValue("string"==typeof h?s[h]:void 0,e.startIndices)||"string"==typeof h&&!s[h]&&d.setConstantValue(o[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&ts("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(i=>{var r;return null===(r=this.attributes[i])||void 0===r?void 0:r.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const o in n){const s=n[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(r[o]=s)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new PI(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,o=r[e];return o&&o.forEach(s=>{const a=i[s];a&&a.setNeedsUpdate(a.id,n)}),o}_updateAttribute(e){const{attribute:n,numInstances:i}=e;ts("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&ts("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,ts("attribute.updateEnd",n,i)))}}function F4(t,e,n,i,r){const o=e-t;return(n-e)*r+-o*i+o+e}function L4(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const wae={interpolation:class bae extends Cy{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:o}}=this,s=o(e/r);this._value=rE(n,i,s)}},spring:class vae extends Cy{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=function yae(t,e,n,i,r){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=F4(t[s],e[s],n[s],i,r);return o}return F4(t,e,n,i,r)}(o,s,n,i,r);const c=L4(a,n),l=L4(a,s);c<1e-5&&l<1e-5&&(a=n,this.end()),this._prevValue=s,this._currValue=a}}};class xae{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:o}=this;if(o.has(e)){const c=o.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(!(r=YU(r)))return;const s=wae[r.type];if(!s)return void mi.error("unsupported transition type '".concat(r.type,"'"))();const a=new s(this.timeline);a.start({...r,fromValue:n,toValue:i}),o.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const vE=Symbol.for("component"),Pu=Symbol.for("propTypes"),ZI=Symbol.for("deprecatedProps"),Vm=Symbol.for("asyncPropDefaults"),hf=Symbol.for("asyncPropOriginal"),Nu=Symbol.for("asyncPropResolved");function Sae(t,e){if(!t.transitions)return!1;const n={},i=t[Pu];let r=!1;for(const o in t.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&QI(t[o],e[o],s)&&(n[o]=!0,r=!0)}return!!r&&n}function B4({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(r,".").concat(o," added");const s=QI(t[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const s=QI(t[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}}return!1}function QI(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function Mae(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function j4(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},B4({oldProps:r,newProps:i,triggerName:n})}function Pae(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function eD(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],p=e[10],m=e[11],g=e[12],A=e[13],D=e[14],j=e[15],k=n*a-i*s,ue=n*c-r*s,we=n*l-o*s,Be=i*c-r*a,We=i*l-o*a,Ke=r*l-o*c,ut=d*A-h*g,ft=d*D-p*g,bt=d*j-m*g,vt=h*D-p*A,Ft=h*j-m*A,ht=p*j-m*D,wt=k*ht-ue*Ft+we*vt+Be*bt-We*ft+Ke*ut;return wt?(t[0]=(a*ht-c*Ft+l*vt)*(wt=1/wt),t[1]=(r*Ft-i*ht-o*vt)*wt,t[2]=(A*Ke-D*We+j*Be)*wt,t[3]=(p*We-h*Ke-m*Be)*wt,t[4]=(c*bt-s*ht-l*ft)*wt,t[5]=(n*ht-r*bt+o*ft)*wt,t[6]=(D*we-g*Ke-j*ue)*wt,t[7]=(d*Ke-p*we+m*ue)*wt,t[8]=(s*Ft-a*bt+l*ut)*wt,t[9]=(i*bt-n*Ft-o*ut)*wt,t[10]=(g*We-A*we+j*k)*wt,t[11]=(h*we-d*We-m*k)*wt,t[12]=(a*ft-s*vt-c*ut)*wt,t[13]=(n*vt-i*ft+r*ut)*wt,t[14]=(A*ue-g*Be-D*k)*wt,t[15]=(d*Be-h*ue+p*k)*wt,t):null}function ff(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=e[9],m=e[10],g=e[11],A=e[12],D=e[13],j=e[14],k=e[15],ue=n[0],we=n[1],Be=n[2],We=n[3];return t[0]=ue*i+we*a+Be*h+We*A,t[1]=ue*r+we*c+Be*p+We*D,t[2]=ue*o+we*l+Be*m+We*j,t[3]=ue*s+we*d+Be*g+We*k,t[4]=(ue=n[4])*i+(we=n[5])*a+(Be=n[6])*h+(We=n[7])*A,t[5]=ue*r+we*c+Be*p+We*D,t[6]=ue*o+we*l+Be*m+We*j,t[7]=ue*s+we*d+Be*g+We*k,t[8]=(ue=n[8])*i+(we=n[9])*a+(Be=n[10])*h+(We=n[11])*A,t[9]=ue*r+we*c+Be*p+We*D,t[10]=ue*o+we*l+Be*m+We*j,t[11]=ue*s+we*d+Be*g+We*k,t[12]=(ue=n[12])*i+(we=n[13])*a+(Be=n[14])*h+(We=n[15])*A,t[13]=ue*r+we*c+Be*p+We*D,t[14]=ue*o+we*l+Be*m+We*j,t[15]=ue*s+we*d+Be*g+We*k,t}function wE(t,e,n){var s,a,c,l,d,h,p,m,g,A,D,j,i=n[0],r=n[1],o=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*o+e[12],t[13]=e[1]*i+e[5]*r+e[9]*o+e[13],t[14]=e[2]*i+e[6]*r+e[10]*o+e[14],t[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],p=e[6],m=e[7],g=e[8],A=e[9],D=e[10],j=e[11],t[0]=s=e[0],t[1]=a,t[2]=c,t[3]=l,t[4]=d,t[5]=h,t[6]=p,t[7]=m,t[8]=g,t[9]=A,t[10]=D,t[11]=j,t[12]=s*i+d*r+g*o+e[12],t[13]=a*i+h*r+A*o+e[13],t[14]=c*i+p*r+D*o+e[14],t[15]=l*i+m*r+j*o+e[15]),t}function tD(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function U4(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+d*i,t[6]=a*r+h*i,t[7]=c*r+p*i,t[8]=l*r-o*i,t[9]=d*r-s*i,t[10]=h*r-a*i,t[11]=p*r-c*i,t}function V4(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+d*i,t[2]=a*r+h*i,t[3]=c*r+p*i,t[4]=l*r-o*i,t[5]=d*r-s*i,t[6]=h*r-a*i,t[7]=p*r-c*i,t}function z4(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Ty(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}!function Xae(){var t=new Zs(4);Zs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const G4=[0,0,0,0],cce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],W4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],lce=[0,0,0],$4=[0,0,0],dce=yy(function fce({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function uce(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=G4,c=G4,l=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:p}=Y4(t,e,n);return p&&(c=t.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=Ty([],c,s),o=i||o,s=ff([],r,o),s=ff([],s,cce)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(t,n,i),d=t.getDistanceScales(),h=[t.width*e,t.height*e],p=Ty([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,m={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:lce,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:W4,project_uCameraPosition:a};if(l){const g=t.getDistanceScales(l);switch(n){case wi.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=g.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=g.unitsPerMeter2;break;case wi.LNGLAT:case wi.LNGLAT_OFFSETS:t._pseudoMeters||(m.project_uCommonUnitsPerMeter=g.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=g.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=g.unitsPerDegree2;break;case wi.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,g.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,g.unitsPerMeter2[2]]}}return m});function Y4(t,e,n=$4){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===wi.LNGLAT_OFFSETS||e===wi.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case pl.WEB_MERCATOR:(e===wi.LNGLAT||e===wi.CARTESIAN)&&(r=[0,0,0],o=!1);break;case pl.WEB_MERCATOR_AUTO_OFFSET:e===wi.LNGLAT?i=r:e===wi.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case pl.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case pl.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class X4 extends oE{toString(){let e="[";if(zr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=hi(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function xE(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function q4(t,e){return t[0]=-e[0],t[1]=-e[1],t}function K4(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}!function pce(){var t=new Zs(2);Zs!=Float32Array&&(t[0]=0,t[1]=0)}();var J4=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(J4||{});const _ce=45*Math.PI/180,bce=1,nD=.1,iD=500,yce=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Wn extends X4{static get IDENTITY(){return function wce(){return AE||(AE=new Wn,Object.freeze(AE)),AE}()}static get ZERO(){return function vce(){return EE||(EE=new Wn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(EE)),EE}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return J4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,o,s,a,c,l,d,h,p,m,g,A,D){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=p,this[12]=m,this[13]=g,this[14]=A,this[15]=D,this.check()}setRowMajor(e,n,i,r,o,s,a,c,l,d,h,p,m,g,A,D){return this[0]=e,this[1]=o,this[2]=l,this[3]=m,this[4]=n,this[5]=s,this[6]=d,this[7]=g,this[8]=i,this[9]=a,this[10]=h,this[11]=A,this[12]=r,this[13]=c,this[14]=p,this[15]=D,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(yce)}fromObject(e){return this.check()}fromQuaternion(e){return function Vae(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,l=n*s,d=i*s,h=i*a,p=r*s,m=r*a,g=r*c,A=o*s,D=o*a,j=o*c;t[0]=1-h-g,t[1]=d+j,t[2]=p-D,t[3]=0,t[4]=d-j,t[5]=1-l-g,t[6]=m+A,t[7]=0,t[8]=p+D,t[9]=m-A,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:o,near:s=nD,far:a=iD}=e;return a===1/0?function xce(t,e,n,i,r,o){const a=2*o/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),p=-2*o;t[0]=2*o/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=p,t[15]=0}(this,n,i,r,o,s):function Hae(t,e,n,i,r,o,s){var a=1/(n-e),c=1/(r-i),l=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0}(this,n,i,r,o,s,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function Yae(t,e,n,i){var r,o,s,a,c,l,d,h,p,m,g=e[0],A=e[1],D=e[2],j=i[0],k=i[1],ue=i[2],we=n[0],Be=n[1],We=n[2];Math.abs(g-we)<gl&&Math.abs(A-Be)<gl&&Math.abs(D-We)<gl?function Nae(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(d=g-we,h=A-Be,p=D-We,r=k*(p*=m=1/Math.hypot(d,h,p))-ue*(h*=m),o=ue*(d*=m)-j*p,s=j*h-k*d,(m=Math.hypot(r,o,s))?(r*=m=1/m,o*=m,s*=m):(r=0,o=0,s=0),a=h*s-p*o,c=p*r-d*s,l=d*o-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),t[0]=r,t[1]=a,t[2]=d,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=p,t[11]=0,t[12]=-(r*g+o*A+s*D),t[13]=-(a*g+c*A+l*D),t[14]=-(d*g+h*A+p*D),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:o,near:s=nD,far:a=iD}=e;return function Wae(t,e,n,i,r,o,s){var a=1/(e-n),c=1/(i-r),l=1/(o-s);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(s+o)*l,t[15]=1}(this,n,i,r,o,s,a),this.check()}orthographic(e){const{fovy:n=_ce,aspect:i=bce,focalDistance:r=1,near:o=nD,far:s=iD}=e;Z4(n);const c=r*Math.tan(n/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:o=500}=e;return Z4(n),function zae(t,e,n,i,r){var s,o=1/Math.tan(e/2);t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(s=1/(i-r)),t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,o),this.check()}determinant(){return function Lae(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],g=t[13],A=t[14],D=t[15];return(e*s-n*o)*(h*D-p*A)-(e*a-i*o)*(d*D-p*g)+(e*c-r*o)*(d*A-h*g)+(n*a-i*s)*(l*D-p*m)-(n*c-r*s)*(l*A-h*m)+(i*c-r*a)*(l*g-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return function Fae(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return eD(this,this),this.check()}multiplyLeft(e){return ff(this,e,this),this.check()}multiplyRight(e){return ff(this,this,e),this.check()}rotateX(e){return U4(this,this,e),this.check()}rotateY(e){return function jae(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*i,t[1]=s*r-d*i,t[2]=a*r-h*i,t[3]=c*r-p*i,t[8]=o*i+l*r,t[9]=s*i+d*r,t[10]=a*i+h*r,t[11]=c*i+p*r}(this,this,e),this.check()}rotateZ(e){return V4(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function Bae(t,e,n,i){var c,l,d,h,p,m,g,A,D,j,k,ue,we,Be,We,Ke,ut,ft,bt,vt,Ft,ht,wt,Bt,r=i[0],o=i[1],s=i[2],a=Math.hypot(r,o,s);a<gl||(r*=a=1/a,o*=a,s*=a,c=Math.sin(n),l=Math.cos(n),p=e[1],m=e[2],g=e[3],D=e[5],j=e[6],k=e[7],we=e[9],Be=e[10],We=e[11],bt=r*o*(d=1-l)-s*c,vt=o*o*d+l,Ft=s*o*d+r*c,ht=r*s*d+o*c,wt=o*s*d-r*c,Bt=s*s*d+l,t[0]=(h=e[0])*(Ke=r*r*d+l)+(A=e[4])*(ut=o*r*d+s*c)+(ue=e[8])*(ft=s*r*d-o*c),t[1]=p*Ke+D*ut+we*ft,t[2]=m*Ke+j*ut+Be*ft,t[3]=g*Ke+k*ut+We*ft,t[4]=h*bt+A*vt+ue*Ft,t[5]=p*bt+D*vt+we*Ft,t[6]=m*bt+j*vt+Be*Ft,t[7]=g*bt+k*vt+We*Ft,t[8]=h*ht+A*wt+ue*Bt,t[9]=p*ht+D*wt+we*Bt,t[10]=m*ht+j*wt+Be*Bt,t[11]=g*ht+k*wt+We*Bt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return tD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return wE(this,this,e),this.check()}transform(e,n){return 4===e.length?(my(n=Ty(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function gce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=MI(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return my(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function Tre(t,e,n){const i=e[0],r=e[1],o=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/o,t[1]=(n[1]*i+n[5]*r)/o,t}(n||[-0,-0],e,this);break;case 3:i=jU(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return my(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let EE,AE;function Z4(t){if(t>2*Math.PI)throw Error("expected radians")}function Hm(t,e){const n=Ty([],e,t);return z4(n,n,1/n[3]),n}function Q4(t,e){const n=t%e;return n<0?e+n:n}function rD(t,e,n){return t<e?e:t>n?n:t}const oD=Math.log2||function Ace(t){return Math.log(t)*Math.LOG2E};function fd(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Mc=Math.PI,eV=Mc/4,Ka=Mc/180,sD=180/Mc,zm=512,SE=4003e4,CE=85.051129,Sce=1.5;function TE(t){const[e,n]=t;return fd(Number.isFinite(e)),fd(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[zm*(e*Ka+Mc)/(2*Mc),zm*(Mc+Math.log(Math.tan(eV+n*Ka*.5)))/(2*Mc)]}function Gm(t){const[e,n]=t,i=e/zm*(2*Mc)-Mc,r=2*(Math.atan(Math.exp(n/zm*(2*Mc)-Mc))-eV);return[i*sD,r*sD]}function aD(t){const e=Math.cos(t*Ka);return zm/SE/e}function cD(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;fd(Number.isFinite(e)&&Number.isFinite(n));const r=zm,o=Math.cos(e*Ka),s=r/360,a=s/o,c=r/SE/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(i){const d=Ka*Math.tan(e*Ka)/o,p=r/SE*d,m=p/a*c;l.unitsPerDegree2=[0,s*d/2,p],l.unitsPerMeter2=[m,0,m]}return l}function tV(t,e){const[n,i,r]=t,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=cD({longitude:n,latitude:i,highPrecision:!0}),d=TE(t);d[0]+=o*(c[0]+l[0]*s),d[1]+=s*(c[1]+l[1]*s);const h=Gm(d),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],p]:h}function ME(t){return 2*Math.atan(.5/t)*sD}function lD(t){return.5/Math.tan(.5*t*Ka)}function iV(t,e){const[n,i,r=0]=t;return fd(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Hm(e,[n,i,r,1])}function My(t,e,n=0){const[i,r,o]=t;if(fd(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return Hm(e,[i,r,o,1]);const s=Hm(e,[i,r,0,1]),a=Hm(e,[i,r,1,1]),c=s[2],l=a[2];return K4([],s,a,c===l?0:((n||0)-c)/(l-c))}const rV=Math.PI/180;function oV(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=Hm(i,[e,0,1,1]),o=Hm(i,[e,t.height,1,1]),l=Gm(K4([],r,o,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return l.push(n),l}const Pce=Math.PI/180,Nce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],dV=[0,0,0],Fce={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Fu{constructor(e={}){ve(this,"id",void 0),ve(this,"x",void 0),ve(this,"y",void 0),ve(this,"width",void 0),ve(this,"height",void 0),ve(this,"padding",void 0),ve(this,"isGeospatial",void 0),ve(this,"zoom",void 0),ve(this,"focalDistance",void 0),ve(this,"position",void 0),ve(this,"modelMatrix",void 0),ve(this,"distanceScales",void 0),ve(this,"scale",void 0),ve(this,"center",void 0),ve(this,"cameraPosition",void 0),ve(this,"projectionMatrix",void 0),ve(this,"viewMatrix",void 0),ve(this,"viewMatrixUncentered",void 0),ve(this,"viewMatrixInverse",void 0),ve(this,"viewProjectionMatrix",void 0),ve(this,"pixelProjectionMatrix",void 0),ve(this,"pixelUnprojectionMatrix",void 0),ve(this,"resolution",void 0),ve(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Fce,this.focalDistance=e.focalDistance||1,this.position=e.position||dV,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?pl.WEB_MERCATOR:pl.WEB_MERCATOR_AUTO_OFFSET:pl.IDENTITY}equals(e){return e instanceof Fu&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&ku(e.projectionMatrix,this.projectionMatrix)&&ku(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=iV(this.projectPosition(e),this.pixelProjectionMatrix),[o,s]=r,a=n?s:this.height-s;return 2===e.length?[o,a]:[o,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,o,s]=e,l=My([r,n?o:this.height-o,s],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,p]=this.unprojectPosition(l);return Number.isFinite(s)?[d,h,p]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=TE(e);return n[1]=wr(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Gm(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],o[0],s[0]),Math.min(i[1],r[1],o[1],s[1]),Math.max(i[0],r[0],o[0],s[0]),Math.max(i[1],r[1],o[1],s[1])]}getDistanceScales(e){return e?cD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function kre(t){return{left:Pm(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Pm(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Pm(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Pm(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Pm(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Pm(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Tce(t){const{latitude:e}=t;fd(Number.isFinite(e));const n=Math.cos(e*Ka);return function Cce(t){return oD(t)}(SE*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||cD({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:s}=e;let a=dV;if(o&&(a=s?new Wn(s).transformAsVector(o,[]):o),this.isGeospatial){const c=this.projectPosition([n,i,0]);this.center=new nn(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=Nce,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new Wn).multiplyRight(n).translate(new nn(this.center).negate()),this.projectionMatrix=i||function Lce({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const c=t/e,l=n?(new Wn).orthographic({fovy:i,aspect:c,focalDistance:r,near:s,far:a}):(new Wn).perspective({fovy:i,aspect:c,near:s,far:a});if(o){const{left:d=0,right:h=0,top:p=0,bottom:m=0}=o,g=wr((d+t-h)/2,0,t)-t/2,A=wr((p+e-m)/2,0,e)-e/2;l[8]-=2*g/t,l[9]+=2*A/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||s*Pce,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ff(h,h,this.projectionMatrix),ff(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=eD([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Rre(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];tD(p,p,[this.width/2,-this.height/2,1]),wE(p,p,[1,-1,0]),ff(m,p,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=eD([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||mi.warn("Pixel project matrix not invertible")()}}ve(Fu,"displayName","Viewport");class Wm extends Fu{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:p=0,position:m,padding:g,legacyMeterSizes:A=!1}=e;let{width:D,height:j,altitude:k=1.5}=e;const ue=Math.pow(2,r);D=D||1,j=j||1;let we,Be=null;if(d)k=d[5]/2,we=ME(k);else{let Ke;if(e.fovy?(we=e.fovy,k=lD(we)):we=ME(k),g){const{top:ut=0,bottom:ft=0}=g;Ke=[0,wr((ut+j-ft)/2,0,j)-j/2]}Be=function nV(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:d=ME(Sce)}=t;void 0!==i&&(d=ME(i));const h=d*Ka,p=r*Ka,m=lD(d);let g=m;s&&(g+=s[2]*a/Math.cos(p)/n);const A=h*(.5+(o?o[1]:0)/n),D=Math.sin(A)*g/Math.sin(rD(Math.PI/2-p-A,.01,Math.PI-.01)),j=Math.sin(p)*D+g;return{fov:h,aspect:e/n,focalDistance:m,near:c,far:Math.min(j*l,10*g)}}({width:D,height:j,scale:ue,center:m&&[0,0,m[2]*aD(n)],offset:Ke,pitch:o,fovy:we,nearZMultiplier:a,farZMultiplier:c})}let We=function Mce(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];wE(a,a,[0,0,-r]),U4(a,a,-n*Ka),V4(a,a,i*Ka);const c=o/e;return tD(a,a,[c,c,c]),s&&wE(a,a,function yre(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),a}({height:j,pitch:o,bearing:s,scale:ue,altitude:k});p&&(We=(new Wn).translate([512*p,0,0]).multiplyLeft(We)),super({...e,width:D,height:j,viewMatrix:We,longitude:i,latitude:n,zoom:r,...Be,fovy:we,focalDistance:k}),ve(this,"longitude",void 0),ve(this,"latitude",void 0),ve(this,"pitch",void 0),ve(this,"bearing",void 0),ve(this,"altitude",void 0),ve(this,"fovy",void 0),ve(this,"orthographic",void 0),ve(this,"_subViewports",void 0),ve(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=k,this.fovy=we,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=A,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const o=r?new Wm({...this,worldOffset:r}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*aD(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/aD(i)]}addMetersToLngLat(e,n){return tV(e,n)}panByPosition(e,n){const i=My(n,this.pixelUnprojectionMatrix),o=xE([],this.projectFlat(e),q4([],i)),s=xE([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){const n=function Rce(t,e=0){const{width:n,height:i,unproject:r}=t,o={targetZ:e},s=r([0,i],o),a=r([n,i],o);let c,l;return(t.fovy?.5*t.fovy*rV:Math.atan(.5/t.altitude))>(90-t.pitch)*rV-.01?(c=oV(t,0,e),l=oV(t,n,e)):(c=r([0,0],o),l=r([n,0],o)),[s,a,l,c]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:o,latitude:s,zoom:a}=function Ice(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,c],[l,d]]=i,h=function Dce(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(fd(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),p=TE([a,rD(d,-CE,CE)]),m=TE([l,rD(c,-CE,CE)]),g=[Math.max(Math.abs(m[0]-p[0]),r),Math.max(Math.abs(m[1]-p[1]),r)],A=[e-h.left-h.right-2*Math.abs(s[0]),n-h.top-h.bottom-2*Math.abs(s[1])];fd(A[0]>0&&A[1]>0);const D=A[0]/g[0],j=A[1]/g[1],Be=Gm([(m[0]+p[0])/2+(h.right-h.left)/2/D,(m[1]+p[1])/2+(h.top-h.bottom)/2/j]),We=Math.min(o,oD(Math.abs(Math.min(D,j))));return fd(Number.isFinite(We)),{longitude:Be[0],latitude:Be[1],zoom:We}}({width:i,height:r,bounds:e,...n});return new Wm({width:i,height:r,longitude:o,latitude:s,zoom:a})}}ve(Wm,"displayName","WebMercatorViewport");const uV=[0,0,0];function uD(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof Wm){const[r,o,s=0]=t,a=e.getDistanceScales([r,o]);i[2]=s*a.unitsPerMeter[2]}return i}function hV(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,c=0]=t;switch(n&&([s,a,c]=Ty([],[s,a,c,1],n)),i){case wi.LNGLAT:return uD([s,a,c],e,o);case wi.LNGLAT_OFFSETS:return uD([s+r[0],a+r[1],c+(r[2]||0)],e,o);case wi.METER_OFFSETS:return uD(tV(r,[s,a,c]),e,o);default:return e.isGeospatial?[s+r[0],a+r[1],c+r[2]]:e.projectPosition([s,a,c])}}const Uce={10241:9987,10240:9729,10242:33071,10243:33071},hD={};function _l(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!_l(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const o of i)if(!e.hasOwnProperty(o)||!_l(t[o],e[o],n-1))return!1;return!0}return!1}const zce={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||fD(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>_l(t,e,1)},accessor:{validate(t,e){const n=IE(t);return"function"===n||n===IE(e.value)},equal:(t,e,n)=>"function"==typeof e||_l(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||fD(t),equal(t,e,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?_l(t,e,r):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?_l(t,e,r):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>{const i=n.context;return i&&i.gl?function Vce(t,e,n,i){if(n instanceof Ms)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let r=null;n.compressed&&(r={10241:n.data.length>1?9985:9729});const o=new Ms(e,{...n,parameters:{...Uce,...r,...i}});return hD[o.id]=t,o}(n.id,i.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{!function Hce(t,e){!e||!(e instanceof Ms)||hD[e.id]===t&&(e.delete(),delete hD[e.id])}(n.id,t)}}};function Wce(t,e){switch(IE(e)){case"object":return Iy(t,e);case"array":return Iy(t,{type:"array",value:e,compare:!1});case"boolean":return Iy(t,{type:"boolean",value:e});case"number":return Iy(t,{type:"number",value:e});case"function":return Iy(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Iy(t,e){return"type"in e?{name:t,...zce[e.type],...e}:"value"in e?{name:t,type:IE(e.value),...e}:{name:t,type:"object",value:e}}function fD(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function IE(t){return fD(t)?"array":null===t?"null":typeof t}function pD(t,e){let n="_mergedDefaultProps";if(e)for(const r of e){const o=r.constructor;o&&(n+=":".concat(o.extensionName||o.name))}return fV(t,n)||(t[n]=function Xce(t,e){if(!t.prototype)return null;const r=pD(Object.getPrototypeOf(t)),s=function Gce(t){const e={},n={},i={};for(const[r,o]of Object.entries(t)){const s=o?.deprecatedFor;if(s)i[r]=Array.isArray(s)?s:[s];else{const a=Wce(r,o);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(fV(t,"defaultProps")||{}),a=Object.assign(Object.create(null),r,s.defaultProps),c=Object.assign(Object.create(null),r?.[Pu],s.propTypes),l=Object.assign(Object.create(null),r?.[ZI],s.deprecatedProps);for(const d of e){const h=pD(d.constructor);h&&(Object.assign(a,h),Object.assign(c,h[Pu]),Object.assign(l,h[ZI]))}return function qce(t,e){const n=function Qce(t){const e=t.componentName;return e||mi.warn("".concat(t.name,".componentName not specified"))(),e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}(a,t),function Jce(t,e){const n={},i={};for(const r in e){const o=e[r],{name:s,value:a}=o;o.async&&(n[s]=a,i[s]=Zce(s))}t[Vm]=n,t[hf]={},Object.defineProperties(t,i)}(a,c),function Kce(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const o of e[n])mD(this,o)||(this[o]=i);mi.deprecated(r,e[n].join("/"))()}})}(a,l),a[Pu]=c,a[ZI]=l,0===e.length&&!mD(t,"_propTypes")&&(t._propTypes=c),a}(t,e||[]))}function Zce(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||WU(e)?this[hf][t]=e:this[Nu][t]=e},get(){if(this[Nu]){if(t in this[Nu])return this[Nu][t]||this[Vm][t];if(t in this[hf]){const e=this[vE]&&this[vE].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Vm][t]}}return this[Vm][t]}}}function mD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fV(t,e){return mD(t,e)&&t[e]}let ele=0;class gD{constructor(...e){ve(this,"id",void 0),ve(this,"props",void 0),ve(this,"count",void 0),this.props=function $ce(t,e){let n;for(let o=e.length-1;o>=0;o--){const s=e[o];"extensions"in s&&(n=s.extensions)}const i=pD(t.constructor,n),r=Object.create(i);r[vE]=t,r[hf]={},r[Nu]={};for(let o=0;o<e.length;++o){const s=e[o];for(const a in s)r[a]=s[a]}return Object.freeze(r),r}(this,e),this.id=this.props.id,this.count=ele++}clone(e){const{props:n}=this,i={};for(const r in n[Vm])r in n[Nu]?i[r]=n[Nu][r]:r in n[hf]&&(i[r]=n[hf][r]);return new this.constructor({...n,...i,...e})}}function _D(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new DE(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function DE(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(DE=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new DE(t)}ve(gD,"componentName","Component"),ve(gD,"defaultProps",{});const tle=Object.freeze({});class nle{constructor(e){ve(this,"component",void 0),ve(this,"onAsyncPropUpdated",void 0),ve(this,"asyncProps",void 0),ve(this,"oldProps",void 0),ve(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||tle}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[vE]||this.component;const n=e[Nu]||{},i=e[hf]||e,r=e[Vm]||{};for(const o in n){const s=n[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(const o in i){const s=i[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(WU(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(o=>{this.component&&(o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,r),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,n){var i=this;return Ht(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const o=r.pendingLoadCount;let s=[],a=0;var d,c=!1,l=!1;try{for(var p,h=_D(n);c=!(p=yield h.next()).done;c=!1){const m=p.value;{if(!i.component)return;const{dataTransform:g}=i.component.props;s=g?g(m,s):s.concat(m),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,i._setAsyncPropValue(e,s,o)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,s)})()}_postProcessValue(e,n){const i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.props[Pu];this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class ile extends nle{constructor({attributeManager:e,layer:n}){super(n),ve(this,"attributeManager",void 0),ve(this,"needsRedraw",void 0),ve(this,"needsUpdate",void 0),ve(this,"subLayers",void 0),ve(this,"usesPickingColorCache",void 0),ve(this,"hasPickingBuffer",void 0),ve(this,"changeFlags",void 0),ve(this,"viewport",void 0),ve(this,"uniformTransitions",void 0),ve(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const i=this.layer,r=i?.props.fetch;return r?r(n,{propName:e,layer:i}):super._fetch(e,n)}_onResolve(e,n){const i=this.layer;if(i){const r=i.props.onDataLoad;"data"===e&&r&&r(n,{propName:e,layer:i})}}_onError(e,n){const i=this.layer;i&&i.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const Ic=t=>"function"==typeof t,Lu=t=>null!==t&&"object"==typeof t,mV=t=>Lu(t)&&t.constructor==={}.constructor,rle=t=>t&&"function"==typeof t[Symbol.iterator],ole=t=>t&&"function"==typeof t[Symbol.asyncIterator],pf=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,mf=t=>typeof Blob<"u"&&t instanceof Blob,sle=t=>t&&"object"==typeof t&&t.isBuffer,gV=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Lu(t)&&Ic(t.tee)&&Ic(t.cancel)&&Ic(t.getReader))(t)||(t=>Lu(t)&&Ic(t.read)&&Ic(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function pd(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function bD(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function yD(t){var e,n;let i;return pd(t,"null loader"),pd(bD(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let vD="";const wD={},hle=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,fle=/^([-\w.]+\/[-\w.+]+)/;function _V(t){const e=hle.exec(t);return e?e[1]:""}const bV=/\?.*/;function xD(t){return t.replace(bV,"")}function RE(t){return pf(t)?t.url:mf(t)?t.name||"":"string"==typeof t?t:""}function ED(t){if(pf(t)){const e=t,n=e.headers.get("content-type")||"",i=xD(e.url);return function ple(t){const e=fle.exec(t);return e?e[1]:t}(n)||_V(i)}return mf(t)?t.type||"":"string"==typeof t?_V(t):""}function yV(t){return AD.apply(this,arguments)}function AD(){return AD=Ht(function*(t){if(pf(t))return t;const e={},n=function gle(t){return pf(t)?t.headers["content-length"]||-1:mf(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const i=RE(t),r=ED(t);r&&(e["content-type"]=r);const o=yield function yle(t){return TD.apply(this,arguments)}(t);o&&(e["x-first-bytes"]=o),"string"==typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}),AD.apply(this,arguments)}function SD(){return SD=Ht(function*(t){if(!t.ok){const e=yield function ble(t){return CD.apply(this,arguments)}(t);throw new Error(e)}}),SD.apply(this,arguments)}function CD(){return CD=Ht(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),CD.apply(this,arguments)}function TD(){return TD=Ht(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=o=>{var s;return i(null==o||null===(s=o.target)||void 0===s?void 0:s.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function vle(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),TD.apply(this,arguments)}function vV(t,e){return MD.apply(this,arguments)}function MD(){return MD=Ht(function*(t,e){if("string"==typeof t){t=function ule(t){for(const e in wD)t.startsWith(e)&&(t=t.replace(e,wD[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(vD).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield yV(t)}),MD.apply(this,arguments)}function $m(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function wle(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}()}const wV=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";$m();class Ele{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=function xle(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function ID(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let kE;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(kE||(kE={}));function xV(t){return"string"!=typeof t?t:(t=t.toUpperCase(),kE[t]||kE.WHITE)}function OE(t,e){if(!t)throw new Error(e||"Assertion failed")}globalThis.self||globalThis.window||globalThis;const PE=globalThis.window||globalThis.self||globalThis.global,Dy=(globalThis,globalThis.process||{});function Ym(){let t;var e,n;if($m()&&PE.performance)t=null==PE||null===(e=PE.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Dy){var i;const r=null==Dy||null===(i=Dy.hrtime)||void 0===i?void 0:i.call(Dy);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}globalThis,globalThis;const Xm={debug:$m()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Rle={enabled:!0,level:0};function Ja(){}const EV={},AV={once:!0};let SV=(()=>{class t{constructor(){let{id:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.id=void 0,this.VERSION=wV,this._startTs=Ym(),this._deltaTs=Ym(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=n,this.userData={},this._storage=new Ele("__probe-".concat(this.id,"__"),Rle),this.timeStamp("".concat(this.id," started")),function Dle(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=t;for(const o of i){const s=r[o];"function"==typeof s&&(e.find(a=>o===a)||(r[o]=s.bind(t)))}}(this),Object.seal(this)}set level(n){this.setLevel(n)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ym()-this._startTs).toPrecision(10))}getDelta(){return Number((Ym()-this._deltaTs).toPrecision(10))}set priority(n){this.level=n}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(n){return this._storage.setConfiguration({level:n}),this}get(n){return this._storage.config[n]}set(n,i){this._storage.setConfiguration({[n]:i})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(n,i){OE(n,i)}warn(n){return this._getLogFunction(0,n,Xm.warn,arguments,AV)}error(n){return this._getLogFunction(0,n,Xm.error,arguments)}deprecated(n,i){return this.warn("`".concat(n,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(n,i){return this.error("`".concat(n,"` has been removed. Use `").concat(i,"` instead"))}probe(n,i){return this._getLogFunction(n,i,Xm.log,arguments,{time:!0,once:!0})}log(n,i){return this._getLogFunction(n,i,Xm.debug,arguments)}info(n,i){return this._getLogFunction(n,i,console.info,arguments)}once(n,i){return this._getLogFunction(n,i,Xm.debug||Xm.info,arguments,AV)}table(n,i,r){return i?this._getLogFunction(n,i,console.table||Ja,r&&[r],{tag:Nle(i)}):Ja}image(n){let{logLevel:i,priority:r,image:o,message:s="",scale:a=1}=n;return this._shouldLog(i||r)?$m()?function Ple(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=ID(o,n,i);console.log(...s)},o.src=e,Ja}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...ID(e,n,i)),Ja;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...ID(o,n,i)),o.src=e.toDataURL(),Ja}return Ja}({image:o,message:s,scale:a}):function Ole(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),Ja}({image:o,message:s,scale:a}):Ja}time(n,i){return this._getLogFunction(n,i,console.time?console.time:console.info)}timeEnd(n,i){return this._getLogFunction(n,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(n,i){return this._getLogFunction(n,i,console.timeStamp||Ja)}group(n,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const o=TV({logLevel:n,message:i,opts:r}),{collapsed:s}=r;return o.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(o)}groupCollapsed(n,i){return this.group(n,i,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(n){return this._getLogFunction(n,"",console.groupEnd||Ja)}withGroup(n,i,r){this.group(n,i)();try{r()}finally{this.groupEnd(n)()}}trace(){console.trace&&console.trace()}_shouldLog(n){return this.isEnabled()&&this.getLevel()>=CV(n)}_getLogFunction(n,i,r,o,s){if(this._shouldLog(n)){s=TV({logLevel:n,message:i,args:o,opts:s}),OE(r=r||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Ym();const a=s.tag||s.message;if(s.once&&a){if(EV[a])return Ja;EV[a]=Ym()}return i=function kle(t,e,n){if("string"==typeof e){const i=n.time?function Sle(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function Ale(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function Ile(t,e,n){if(!$m&&"string"==typeof t){if(e){const i=xV(e);t="\x1b[".concat(i,"m").concat(t,"\x1b[39m")}if(n){const i=xV(n);t="\x1b[".concat(i+10,"m").concat(t,"\x1b[49m")}}return t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),r.bind(console,i,...s.args)}return Ja}}return t.VERSION=wV,t})();function CV(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return OE(Number.isFinite(e)&&e>=0),e}function TV(t){const{logLevel:e,message:n}=t;t.logLevel=CV(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return OE("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function Nle(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const MV=new SV({id:"loaders.gl"});class Fle{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const NE=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),IV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),DV=(IV&&parseFloat(IV[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class Lle{constructor(){ve(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.error.bind(this.console,...n)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:NE,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Ble={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function DD(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const RD=()=>{const t=DD();return t.globalOptions=t.globalOptions||{...DV},t.globalOptions};function jle(t,e,n,i){return n=n||[],function Ule(t,e){RV(t,null,DV,Ble,e);for(const n of e)RV(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function kV(t,e,n){const r={...t.options||{}};return function Hle(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new Fle),OV(r,RD()),OV(r,e),r}(e,t,i)}function RV(t,e,n,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const c=!e&&Lu(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)MV.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=Vle(a,r);MV.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(h))()}}}function Vle(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const o in r.options){if(t===o)return"Did you mean '".concat(r.id,".").concat(o,"'?");const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(o,"'?"))}return i}function OV(t,e){for(const n in e)n in e&&(t[n]=mV(e[n])&&mV(t[n])?{...t[n],...e[n]}:e[n])}function PV(t,e){const n=RD(),i=t||n;return"function"==typeof i.fetch?i.fetch:Lu(i.fetch)?r=>vV(r,i):null!=e&&e.fetch?e?.fetch:vV}function yl(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const zle="3.4.11",vl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Wle=vl.global||vl.self||vl.window||{},wl="object"!=typeof process||"[object process]"!==String(process)||process.browser,kD="function"==typeof importScripts,$le=typeof window<"u"&&typeof window.orientation<"u",NV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);NV&&parseFloat(NV[1]);class OD{terminate(){}}const PD=new Map;function FV(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function LV(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=n||new Set;if(t)if(BV(t))i.add(t);else if(BV(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)LV(t[r],e,i);return void 0===n?Array.from(i):[]}function BV(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const ND=()=>{};class FD{static isSupported(){return typeof Worker<"u"&&wl||typeof OD<"u"&&!wl}constructor(e){ve(this,"name",void 0),ve(this,"source",void 0),ve(this,"url",void 0),ve(this,"terminated",!1),ve(this,"worker",void 0),ve(this,"onMessage",void 0),ve(this,"onError",void 0),ve(this,"_loadableURL","");const{name:n,source:i,url:r}=e;yl(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=ND,this.onError=o=>console.log(o),this.worker=wl?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=ND,this.onError=ND,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||LV(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function Yle(t){yl(t.source&&!t.url||!t.source&&t.url);let e=PD.get(t.source||t.url);return e||(t.url&&(e=function Xle(t){if(!t.startsWith("http"))return t;const e=function qle(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return FV(e)}(t.url),PD.set(t.url,e)),t.source&&(e=FV(t.source),PD.set(t.source,e))),yl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new OD(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new OD(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Jle{constructor(e,n){ve(this,"name",void 0),ve(this,"workerThread",void 0),ve(this,"isRunning",!0),ve(this,"result",void 0),ve(this,"_resolve",()=>{}),ve(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){yl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){yl(this.isRunning),this.isRunning=!1,this._reject(e)}}class Zle{static isSupported(){return FD.isSupported()}constructor(e){ve(this,"name","unnamed"),ve(this,"source",void 0),ve(this,"url",void 0),ve(this,"maxConcurrency",1),ve(this,"maxMobileConcurrency",1),ve(this,"onDebug",()=>{}),ve(this,"reuseWorkers",!0),ve(this,"props",{}),ve(this,"jobQueue",[]),ve(this,"idleQueue",[]),ve(this,"count",0),ve(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e){var n=arguments,i=this;return Ht(function*(){let r=n.length>1&&void 0!==n[1]?n[1]:(a,c,l)=>a.done(l),o=n.length>2&&void 0!==n[2]?n[2]:(a,c)=>a.error(c);const s=new Promise(a=>(i.jobQueue.push({name:e,onMessage:r,onError:o,onStart:a}),i));return i._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return Ht(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new Jle(i.name,n);n.onMessage=o=>i.onMessage(r,o.type,o.payload),n.onError=o=>i.onError(r,o),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new FD({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return $le?this.maxMobileConcurrency:this.maxConcurrency}}const Qle={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class md{static isSupported(){return FD.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return md._workerFarm=md._workerFarm||new md({}),md._workerFarm.setProps(e),md._workerFarm}constructor(e){ve(this,"props",void 0),ve(this,"workerPools",new Map),this.props={...Qle},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let o=this.workerPools.get(n);return o||(o=new Zle({name:n,source:i,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ve(md,"_workerFarm",void 0);const ede="latest";function LD(){return LD=Ht(function*(t,e,n,i,r){const o=t.id,s=function tde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let o=t.version;"latest"===o&&(o=ede);const s=o?"@".concat(o):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(i)}return yl(r),r}(t,n),c=md.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",rde.bind(null,r));return l.postMessage("process",{input:e,options:n,context:i}),yield(yield l.result).result}),LD.apply(this,arguments)}function rde(t,e,n,i){return BD.apply(this,arguments)}function BD(){return BD=Ht(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const a=yield t(o,s);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),BD.apply(this,arguments)}function UV(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function UD(){return UD=Ht(function*(t){const e=[];var r,n=!1,i=!1;try{for(var s,o=_D(t);n=!(s=yield o.next()).done;n=!1)e.push(s.value)}catch(a){i=!0,r=a}finally{try{n&&null!=o.return&&(yield o.return())}finally{if(i)throw r}}return function sde(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),r=i.reduce((a,c)=>a+c.byteLength,0),o=new Uint8Array(r);let s=0;for(const a of i)o.set(a,s),s+=a.byteLength;return o.buffer}(...e)}),UD.apply(this,arguments)}const cde=262144,dde=262144;function VV(t,e){this.v=t,this.k=e}function FE(t){return new VV(t,0)}function Ry(t){var e,n;function i(o,s){try{var a=t[o](s),c=a.value,l=c instanceof VV;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===o?"return":"next";if(!c.k||d.done)return i(h,d);d=t[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(o,s){return new Promise(function(a,c){var l={key:o,arg:s,resolve:a,reject:c,next:null};n?n=n.next=l:(e=n=l,i(o,s))})},"function"!=typeof t.return&&(this.return=void 0)}function HD(t){return function(){return new Ry(t.apply(this,arguments))}}Ry.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ry.prototype.next=function(t){return this._invoke("next",t)},Ry.prototype.throw=function(t){return this._invoke("throw",t)},Ry.prototype.return=function(t){return this._invoke("return",t)};const hde=1048576;function zD(){return zD=HD(function*(t,e){const n=e?.chunkSize||hde;let i=0;for(;i<t.size;){const r=i+n,o=yield FE(t.slice(i,r).arrayBuffer());i=r,yield o}}),zD.apply(this,arguments)}function HV(t){if(function pde(t){return t&&"object"==typeof t&&t.isBuffer}(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function zV(t,e){return NE?function mde(t,e){return GD.apply(this,arguments)}(t,e):function gde(t,e){return WD.apply(this,arguments)}(t,e)}function GD(){return GD=HD(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:o,value:s}=yield FE(r);if(o)return;yield HV(s)}}catch{n.releaseLock()}}),GD.apply(this,arguments)}function WD(){return WD=HD(function*(t,e){var r,n=!1,i=!1;try{for(var s,o=_D(t);n=!(s=yield FE(o.next())).done;n=!1){const a=s.value;yield HV(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=o.return&&(yield FE(o.return()))}finally{if(i)throw r}}}),WD.apply(this,arguments)}const $D="Cannot convert supplied data type";function YD(){return YD=Ht(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function bde(t,e,n){if(e.text&&"string"==typeof t)return t;if(sle(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error($D)}(t,e);if(mf(t)&&(t=yield yV(t)),pf(t)){const r=t;return yield function _le(t){return SD.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(gV(t)&&(t=function _de(t,e){if("string"==typeof t)return function*lde(t,e){const n=e?.chunkSize||cde;let i=0;const r=new TextEncoder;for(;i<t.length;){const o=Math.min(t.length-i,n),s=t.slice(i,i+o);i+=o,yield r.encode(s)}}(t,e);if(t instanceof ArrayBuffer)return function ude(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=dde}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),o=new ArrayBuffer(r),s=new Uint8Array(t,i,r);new Uint8Array(o).set(s),i+=r,yield o}}()}(t,e);if(mf(t))return function fde(t,e){return zD.apply(this,arguments)}(t,e);if(gV(t))return zV(t,e);if(pf(t))return zV(t.body,e);throw new Error("makeIterator")}(t,n)),rle(t)||ole(t))return function ade(t){return UD.apply(this,arguments)}(t);throw new Error($D)}),YD.apply(this,arguments)}function GV(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}const Sde=new SV({id:"loaders.gl"}),WV=()=>{const t=DD();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function $V(t){const e=WV();t=Array.isArray(t)?t:[t];for(const n of t){const i=yD(n);e.find(r=>i===r)||e.unshift(i)}}const Tde=/\.([^.]+)$/;function JD(){return JD=Ht(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!XV(t))return null;let r=YV(t,e,{...n,nothrow:!0},i);if(r)return r;if(mf(t)&&(r=YV(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(qV(t));return r}),JD.apply(this,arguments)}function YV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!XV(t))return null;if(e&&!Array.isArray(e))return yD(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function Cde(){return WV()}()),function Dde(t){for(const e of t)yD(e)}(r);const o=function Ide(t,e,n,i){const r=RE(t),o=ED(t),s=xD(r)||i?.url;let a=null,c="";var l;return null!=n&&n.mimeType&&(a=ZD(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function Rde(t,e){const n=e&&Tde.exec(e),i=n&&n[1];return i?function kde(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||ZD(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function Ode(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(Pde(e,n))return n}else if(ArrayBuffer.isView(e)){if(KV(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&KV(e,0,n))return n;return null}(e,t),c=c||(a?"matched initial data ".concat(JV(t)):""),a=a||ZD(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&Sde.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(t,r,n,i);if(!(o||null!=n&&n.nothrow))throw new Error(qV(t));return o}function XV(t){return!(t instanceof Response&&204===t.status)}function qV(t){const e=RE(t),n=ED(t);let i="No valid loader found (";i+=e?"".concat(GV(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?JV(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function ZD(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function Pde(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function KV(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function Nde(t,e,n,i){if(i instanceof ArrayBuffer)return function ode(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===QD(t,e,i.length);default:return!1}}(t,e,n,r))}function JV(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?QD(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?QD(t,0,e):""}function QD(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function LE(t,e,n,i){return eR.apply(this,arguments)}function eR(){return eR=Ht(function*(t,e,n,i){yl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!bD(e)&&(i=void 0,n=e,e=void 0),n=n||{};const r=RE(t=yield t),s=function Ade(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function Mde(t){return JD.apply(this,arguments)}(t,s,n);return a?(i=function Ede(t,e,n){if(n)return n;const i={fetch:PV(e,t),...t};if(i.url){const r=xD(i.url);i.baseUrl=r,i.queryString=function mle(t){const e=t.match(bV);return e&&e[0]}(i.url),i.filename=GV(r),i.baseUrl=function wde(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(r)}return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:LE,loaders:s},n=jle(n,a,s,r),i||null),yield function Fde(t,e,n,i){return tR.apply(this,arguments)}(a,t,n,i)):null}),eR.apply(this,arguments)}function tR(){return tR=Ht(function*(t,e,n,i){if(function Gle(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zle;yl(t,"no worker provided")}(t),pf(e)){const r=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:o,redirected:s,status:a,statusText:c,type:l,url:d}}if(e=yield function yde(t,e,n){return YD.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function nde(t,e){return!(!md.isSupported()||!(wl||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function ide(t,e,n,i,r){return LD.apply(this,arguments)}(t,e,n,i,LE);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw yl(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),tR.apply(this,arguments)}function Oy(t,e,n,i){return nR.apply(this,arguments)}function nR(){return nR=Ht(function*(t,e,n,i){!Array.isArray(e)&&!bD(e)&&(n=e,e=void 0);const r=PV(n);let o=t;return"string"==typeof t&&(o=yield r(t)),mf(t)&&(o=yield r(t)),yield LE(o,e,n)}),nR.apply(this,arguments)}const Hde=Object.freeze([]),zde=yy(({oldViewport:t,viewport:e})=>t.equals(e));let xl=new Uint8ClampedArray(0);const Gde={data:{type:"data",value:Hde,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(t);return!c&&!r&&(s.add({resourceId:t,data:Oy(t,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:l=>{var d;return null===(d=n.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):Oy(t,i,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:wi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class gf extends gD{constructor(...e){super(...e),ve(this,"internalState",null),ve(this,"lifecycle","Awaiting state"),ve(this,"context",void 0),ve(this,"state",void 0),ve(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){jo(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=hV(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,s]=iV(i,n.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,s]}unproject(e){return jo(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return jo(this.internalState),function jce(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function Bce(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return r===wi.DEFAULT&&(r=e.isGeospatial?wi.LNGLAT:wi.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:c=!0}=e,{geospatialOrigin:l=uV,shaderCoordinateOrigin:d=uV,offsetMode:h=!1}=c?Y4(n,i,r):{},p=hV(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:h});h&&function bre(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(p,p,n.projectPosition(l||d));return p}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===wi.DEFAULT||e===wi.LNGLAT||e===wi.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){jo(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function Rae(t){if(!function Oae(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function kae(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return null===(e=this.getAttributeManager())||void 0===e?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=Pae(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const r of i)n.invalidateAll(r);else n.invalidateAll();if(n){const{props:r}=e,o=this.internalState.hasPickingBuffer,s=Number.isInteger(r.highlightedObjectIndex)||r.pickable||r.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(o!==s){this.internalState.hasPickingBuffer=s;const{pickingColors:a,instancePickingColors:c}=n.attributes,l=a||c;l&&(s&&l.constant&&(l.constant=!1,n.invalidate(l.id)),!l.value&&!s&&(l.constant=!0,l.value=[0,0,0]))}}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,o,s;n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(o=this.context)||void 0===o||null===(s=o.onError)||void 0===s||s.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!zde({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(xl.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&mi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),xl=py.allocate(xl,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(xl.length/3),o=[];for(let s=i;s<r;s++)this.encodePickingColor(s,o),xl[3*s+0]=o[0],xl[3*s+1]=o[1],xl[3*s+2]=o[2]}e.value=xl.subarray(0,3*n)}_setModelAttributes(e,n){const o=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(o)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n))return void this._disablePickingIndex(e);const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,o=i||r,s=o&&n.attributes&&n.attributes[o.id];if(s&&s.value){const a=s.value,c=this.encodePickingColor(e);for(let l=0;l<n.length;l++){const d=o.getVertexOffset(l);a[d]===c[0]&&a[d+1]===c[1]&&a[d+2]===c[2]&&this._disablePickingIndex(l)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const o=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==xl.buffer&&(i.value=xl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){jo(!this.internalState),jo(Number.isFinite(this.props.coordinateSystem)),ts("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new ile({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(mi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new xae(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){ts("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(ts("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,o=i.viewport,s=this._updateUniformTransition();r.propsInTransition=s,i.viewport=r.viewport||o,this.props=s;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=o,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){ts("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];cd(o.gl,{polygonOffset:c}),Tc(o.gl,i,()=>{const l={moduleParameters:e,uniforms:n,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let o=!1;if("dataChanged"===r){const s=e[r],a=n[r];s&&Array.isArray(a)&&(n.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0)}n[r]||(n[r]=e[r],o=!0),o&&ts("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function Aae(t,e){const n=B4({newProps:t,oldProps:e,propTypes:t[Pu],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function Cae(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function Tae(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&j4(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&j4(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:Mae(t,e),transitionsChanged:Sae(t,e)}}(e,n);if(i.updateTriggersChanged)for(const o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(const o in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,n[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(i)}validateProps(){!function Eae(t){const e=t[Pu];for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new _ae(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=i;if(n||r.autoHighlight!==s||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(n||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);if(n=n||r,n)for(const o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ve(gf,"defaultProps",Gde),ve(gf,"layerName","Layer");class iR extends gf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:g,modelMatrix:A,extensions:D,fetch:j,operation:k,_subLayerProps:ue}=this.props,we={id:"",updateTriggers:{},opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:g,modelMatrix:A,extensions:D,fetch:j,operation:k},Be=ue&&e.id&&ue[e.id],We=Be&&Be.updateTriggers,Ke=e.id||"sublayer";if(Be){const ut=this.props[Pu],ft=e.type?e.type._propTypes:{};for(const bt in Be){const vt=ft[bt]||ut[bt];vt&&"accessor"===vt.type&&(Be[bt]=this.getSubLayerAccessor(Be[bt]))}}Object.assign(we,e,Be),we.id="".concat(this.props.id,"-").concat(Ke),we.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...We};for(const ut of D){const ft=ut.getSubLayerProps.call(this,ut);ft&&Object.assign(we,ft,{updateTriggers:Object.assign(we.updateTriggers,ft.updateTriggers)})}return we}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=RI(this.renderLayers(),Boolean),this.internalState.subLayers=i),ts("compositeLayer.renderLayers",this,r,i);for(const o of i)o.parent=this}}ve(iR,"layerName","CompositeLayer");const $de=/([0-9]+\.?[0-9]*)(%|px)/;function Bu(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=$de.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function ju(t,e){return t.relative?Math.round(t.position*e):t.position}class rR{constructor(e){ve(this,"id",void 0),ve(this,"viewportInstance",void 0),ve(this,"_x",void 0),ve(this,"_y",void 0),ve(this,"_width",void 0),ve(this,"_height",void 0),ve(this,"_padding",void 0),ve(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};jo(!c||c instanceof Fu),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Bu(i),this._y=Bu(r),this._width=Bu(o),this._height=Bu(s),this._padding=a&&{left:Bu(a.left||0),right:Bu(a.right||0),top:Bu(a.top||0),bottom:Bu(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&_l(this.props,e.props,2))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return r.height&&r.width?new this.ViewportType({...i,...this.props,...r}):null}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:ju(this._x,e),y:ju(this._y,n),width:ju(this._width,e),height:ju(this._height,n)};return this._padding&&(i.padding={left:ju(this._padding.left,e),top:ju(this._padding.top,n),right:ju(this._padding.right,e),bottom:ju(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Yde=(new Wn).lookAt({eye:[0,0,1]});function Xde({width:t,height:e,near:n,far:i,padding:r}){let o=-t/2,s=t/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:p=0}=r,m=wr((l+t-d)/2,0,t)-t/2,g=wr((h+e-p)/2,0,e)-e/2;o-=m,s-=m,a+=g,c+=g}return(new Wn).ortho({left:o,right:s,bottom:a,top:c,near:n,far:i})}class qde extends Fu{constructor(e){const{width:n,height:i,near:r=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,p=Math.min(d,h),m=Math.pow(2,p);let g;if(d!==h){const A=Math.pow(2,d),D=Math.pow(2,h);g={unitsPerMeter:[A/m,D/m,1],metersPerUnit:[m/A,m/D,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Yde.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:Xde({width:n||1,height:i||1,padding:c,near:r,far:o}),zoom:p,distanceScales:g})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=My(n,this.pixelUnprojectionMatrix),o=xE([],this.projectFlat(e),q4([],i)),s=xE([],this.center,o);return{target:this.unprojectFlat(s)}}}const QV=()=>{},Kde=t=>t;class Zde{constructor(e){ve(this,"getControllerState",void 0),ve(this,"props",void 0),ve(this,"propsInTransition",void 0),ve(this,"transition",void 0),ve(this,"onViewStateChange",void 0),ve(this,"onStateChange",void 0),ve(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:o,endProps:s,duration:a,easing:c}}=n,l=c(i/a),d=r.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Cy(e.timeline),this.onViewStateChange=e.onViewStateChange||QV,this.onStateChange=e.onStateChange||QV}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;r={...i,...2===o?s:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(0===s)return;const a=o.initializeProps(e,r);this.propsInTransition={};const c={duration:s,easing:n.transitionEasing||Kde,interpolator:o,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class Qde{constructor(e){ve(this,"_propsToCompare",void 0),ve(this,"_propsToExtract",void 0),ve(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!ku(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const o of this._propsToExtract)(o in e||o in n)&&(i[o]=e[o],r[o]=n[o]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];jo(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const eue=["longitude","latitude","zoom","bearing","pitch"],tue=["longitude","latitude","zoom"];class BE extends Qde{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:eue,required:tue},super(i.transitionProps),ve(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:o}=this.opts;if(r&&o){const s=r(e),a=r(n),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const o of this._propsToExtract)r[o]=rE(e[o]||0,n[o]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...n,...r});Object.assign(r,o.panByPosition(n.aroundPosition,rE(e.around,n.around,i)))}return r}}const Uu={transitionDuration:0},jE=t=>1-(1-t)*(1-t),qm_WHEEL=["wheel"],qm_PAN=["panstart","panmove","panend"],qm_PINCH=["pinchstart","pinchmove","pinchend"],qm_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],qm_DOUBLE_TAP=["doubletap"],qm_KEYBOARD=["keydown"],_f={};class sR{constructor(e){ve(this,"props",void 0),ve(this,"state",{}),ve(this,"transitionManager",void 0),ve(this,"eventManager",void 0),ve(this,"onViewStateChange",void 0),ve(this,"onStateChange",void 0),ve(this,"makeViewport",void 0),ve(this,"_controllerState",void 0),ve(this,"_events",{}),ve(this,"_interactionState",{isDragging:!1}),ve(this,"_customEvents",[]),ve(this,"_eventStartBlocked",null),ve(this,"_panMove",!1),ve(this,"invertPan",!1),ve(this,"dragMode","rotate"),ve(this,"inertia",0),ve(this,"scrollZoom",!0),ve(this,"dragPan",!0),ve(this,"dragRotate",!0),ve(this,"doubleClickZoom",!0),ve(this,"touchZoom",!0),ve(this,"touchRotate",!1),ve(this,"keyboard",!0),this.transitionManager=new Zde({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(qm_WHEEL,d&&i),this.toggleEvents(qm_PAN,d),this.toggleEvents(qm_PINCH,d&&(a||c)),this.toggleEvents(qm_TRIPLE_PAN,d&&c),this.toggleEvents(qm_DOUBLE_TAP,d&&s),this.toggleEvents(qm_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,Uu,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Uu,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),o=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:jE},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Uu,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),o=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:jE},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&0!==s&&(s=1/s);const a=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Uu,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Uu,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:r});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:jE},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return _f._startPinchRotation=e.rotation,_f._lastPinchEvent=e,this.updateViewport(i,Uu,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:_f._startPinchRotation-i})}return this.updateViewport(n,Uu,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),_f._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=_f;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+a*n/2);o=o.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:jE},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return _f._startPinchRotation=null,_f._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new BE({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:Uu}}class e8{constructor(e,n){ve(this,"_viewportProps",void 0),ve(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class t8 extends e8{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:p,startRotatePos:m,startRotationX:g,startRotationOrbit:A,startZoomPosition:D,startZoom:j}=e;super({width:n,height:i,rotationX:r,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:p,startRotatePos:m,startRotationX:g,startRotationOrbit:A,startZoomPosition:D,startZoom:j}),ve(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let l;if(e){let d=(e[0]-r[0])/a;(o<-90||o>90)&&(d*=-1),l={rotationX:o+(e[1]-r[1])/c*180,rotationOrbit:s+180*d}}else l={rotationX:o+i,rotationOrbit:s+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),wr(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[wr(r[0],i,n),wr(r[1],i,n)]:wr(r,i,n),e.rotationX=wr(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=function Dre(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class iue extends sR{constructor(...e){super(...e),ve(this,"ControllerState",t8),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new BE({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class rue extends t8{constructor(e){super(e),ve(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[s,a]=n;switch(this.zoomAxis){case"X":s=wr(s+o,r,i);break;case"Y":a=wr(a+o,r,i);break;default:let c=Math.min(s+o,a+o);c<r&&(o+=r-c),c=Math.max(s+o,a+o),c>i&&(o+=i-c),s+=o,a+=o}return[s,a]}return wr(n+o,r,i)}}class oue extends sR{constructor(...e){super(...e),ve(this,"ControllerState",rue),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new BE(["target","zoom"])}),ve(this,"dragMode","pan")}_onPanRotate(){return!1}}class n8 extends rR{get ViewportType(){return qde}get ControllerType(){return oue}}ve(n8,"displayName","OrthographicView");const aR=Math.PI/180;function sue({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:o}){const s="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],c=(new Wn).lookAt({eye:a,up:s});c.rotateX(i*aR),"Z"===n?c.rotateZ(r*aR):c.rotateY(r*aR);const l=Math.pow(2,o)/t;return c.scale(l),c}class aue extends Fu{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:lD(r);super({...e,longitude:void 0,viewMatrix:sue({height:n||1,focalDistance:d,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:s,zoom:l}),ve(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,o=this.projectedCenter[2]]=e,s=n?r:this.height-r,[a,c,l]=My([i,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class i8 extends rR{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return aue}get ControllerType(){return iue}}ve(i8,"displayName","OrbitView");const cue=[255,255,255],lue=1;let due=0;class r8{constructor(e={}){ve(this,"id",void 0),ve(this,"color",void 0),ve(this,"intensity",void 0),ve(this,"type","ambient");const{color:n=cue}=e,{intensity:i=lue}=e;this.id=e.id||"ambient-".concat(due++),this.color=n,this.intensity=i}}const uue=[255,255,255],hue=1,fue=[0,0,-1];let pue=0;class o8{constructor(e={}){ve(this,"id",void 0),ve(this,"color",void 0),ve(this,"intensity",void 0),ve(this,"type","directional"),ve(this,"direction",void 0),ve(this,"shadow",void 0);const{color:n=uue}=e,{intensity:i=hue}=e,{direction:r=fue}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(pue++),this.color=n,this.intensity=i,this.type="directional",this.direction=new nn(r).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class mue{constructor(e,n={id:"pass"}){ve(this,"id",void 0),ve(this,"gl",void 0),ve(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class cR extends mue{constructor(...e){super(...e),ve(this,"_lastRenderIndex",-1)}render(e){return cd(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function _ue(t,e){cd(t,{viewport:[0,0,e?e.width:t.drawingBufferWidth,e?e.height:t.drawingBufferHeight]}),t.clear(16640)}(l,n),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const p=o&&o[h.id];s?.(h);const m=this._getDrawLayerParams(h,e),g=h.subViewports||[h];for(const A of g){const D=this._drawLayersInViewport(l,{target:n,moduleParameters:i,viewport:A,view:p,pass:e.pass,layers:e.layers},m);d.push(D)}}return d}_getDrawLayerParams(e,{layers:n,pass:i,isPicking:r=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:c},l=!1){const d=[],h=s8(this._lastRenderIndex+1),p={layer:n[0],viewport:e,isPicking:r,renderPass:i,cullRect:s},m={};for(let g=0;g<n.length;g++){const A=n[g],D=this._shouldDrawLayer(A,p,o,m),j={shouldDrawLayer:D};D&&!l&&(j.layerRenderIndex=h(A,D),j.moduleParameters=this._getModuleParameters(A,a,i,c),j.layerParameters=this.getLayerParameters(A,g,e)),d[g]=j}return d}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:o,viewport:s,view:a},c){const l=function gue(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,o=e&&e.devicePixelRatio||Dm(t);return[i.x*o,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*o,i.width*o,i.height*o]}(e,{moduleParameters:i,target:o,viewport:s});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Tc(e,{scissorTest:!0,scissor:l},()=>EI(e,h))}const d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};cd(e,{viewport:l});for(let h=0;h<n.length;h++){const p=n[h],{shouldDrawLayer:m,layerRenderIndex:g,moduleParameters:A,layerParameters:D}=c[h];if(m&&p.props.pickable&&d.pickableCount++,p.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,g),A.viewport=s;try{p._drawLayer({moduleParameters:A,uniforms:{layerIndex:g},parameters:D})}catch(j){p.raiseError(j,"drawing ".concat(p," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(n))return!1;n.layer=s,s=s.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var o;const s=Object.assign(Object.create((null===(o=e.internalState)||void 0===o?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Dm(this.gl)});if(n)for(const c of n){var a;Object.assign(s,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,n),r)}}function s8(t=0,e={}){const n={},i=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in n){const d=n[c]=n[c]||s8(e[c],e);l=d(r,o),n[a]=d}else Number.isFinite(s)?(l=s+(e[c]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return i}class bue extends cR{constructor(e,n){super(e,n),ve(this,"shadowMap",void 0),ve(this,"depthBuffer",void 0),ve(this,"fbo",void 0),this.shadowMap=new Ms(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Om(e,{format:33189,width:1,height:1}),this.fbo=new lo(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Tc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=Dm(this.gl),o=i.width*r,s=i.height*r;(o!==n.width||s!==n.height)&&n.resize({width:o,height:s}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const a8="#define SMOOTH_EDGE_RADIUS 0.5",xue={name:"geometry",vs:"\n".concat(a8,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(a8,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Eue=Object.keys(wi).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(wi[t],";")).join(""),Aue=Object.keys(pl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(pl[t],";")).join(""),Sue=Object.keys(eE).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(eE[t],";")).join(""),Cue="".concat(Eue,"\n").concat(Aue,"\n").concat(Sue,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),Tue={},lR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},xue],vs:Cue,getUniforms:function Mue(t=Tue){return"viewport"in t?function hce({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=wi.DEFAULT,coordinateOrigin:r=$4,autoWrapLongitude:o=!1}){i===wi.DEFAULT&&(i=t.isGeospatial?wi.LNGLAT:wi.CARTESIAN);const s=dce({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||W4,s}(t):{}}},Rue=yy(function Fue({viewport:t,center:e}){return new Wn(t.viewProjectionMatrix).invert().transform(e)}),kue=yy(function Lue({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,o=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>function Nue(t,e){const[n,i,r]=t,o=My([n,i,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(s,i));for(const s of e){const a=s.clone().translate(new nn(t.center).negate()),c=o.map(d=>a.transform(d)),l=(new Wn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});n.push(l.multiplyRight(s))}return n}),Oue=[0,0,0,1],Pue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],dR={name:"shadow",dependencies:[lR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function Bue(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Oue,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=Rue({viewport:t.viewport,center:e.project_uCenter}),o=[],s=kue({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const c=s[a],l=c.clone().translate(new nn(t.viewport.center).negate());e.project_uCoordinateSystem===wi.LNGLAT&&e.project_uProjectionMode===pl.WEB_MERCATOR?(s[a]=l,o[a]=r):(s[a]=c.clone().multiplyRight(Pue),o[a]=l.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},jue={color:[255,255,255],intensity:1},c8=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Uue=[0,0,0,200/255];class uR{constructor(e={}){ve(this,"id","lighting-effect"),ve(this,"props",void 0),ve(this,"shadowColor",Uue),ve(this,"shadow",void 0),ve(this,"ambientLight",void 0),ve(this,"directionalLights",void 0),ve(this,"pointLights",void 0),ve(this,"shadowPasses",[]),ve(this,"shadowMaps",[]),ve(this,"dummyShadowMap",null),ve(this,"programManager",void 0),ve(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=Ay.getDefaultProgramManager(e),dR&&this.programManager.addDefaultModule(dR)),this.dummyShadowMap||(this.dummyShadowMap=new Ms(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(dR),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new Wn).lookAt({eye:new nn(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new bue(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new r8(jue),this.directionalLights.push(new o8(c8[0]),new o8(c8[1])))}}let Vue=1,Hue=1;class l8{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:o=1}=e,s=Vue++,a={time:0,delay:n,duration:i,rate:r,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:o,channel:s}=r;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=Hue++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class zue{constructor(e,n,i){ve(this,"id",void 0),ve(this,"context",void 0),ve(this,"isLoaded",void 0),ve(this,"persistent",void 0),ve(this,"_loadCount",0),ve(this,"_subscribers",new Set),ve(this,"_data",void 0),ve(this,"_loader",void 0),ve(this,"_error",void 0),ve(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=Oy(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class Gue{constructor({gl:e,protocol:n}){ve(this,"protocol",void 0),ve(this,"_context",void 0),ve(this,"_resources",void 0),ve(this,"_consumers",void 0),ve(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let o=this._resources[e];o?o.setData(n,i):(o=new zue(e,n,this._context),this._resources[e]=o),o.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],o=this._resources[r.resourceId];o&&o.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(o[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const o=this._consumers,s=o[e]=o[e]||{},a=s[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(s[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const Wue=[lR],$ue=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Yue(t){const e=Ay.getDefaultProgramManager(t);for(const n of Wue)e.addDefaultModule(n);for(const n of $ue)e.addShaderHook(n);return e}class Kue{constructor(e,{deck:n,stats:i,viewport:r,timeline:o}={}){ve(this,"layers",void 0),ve(this,"context",void 0),ve(this,"resourceManager",void 0),ve(this,"_lastRenderedLayers",[]),ve(this,"_needsRedraw",!1),ve(this,"_needsUpdate",!1),ve(this,"_nextLayers",null),ve(this,"_debug",!1),ve(this,"activateViewport",s=>{ts("layerManager.activateViewport",this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new Gue({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&Yue(e),stats:i||new gI({id:"deck.gl"}),viewport:r||new Fu({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new l8,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){ts("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=RI(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const s of e)i[s.id]?mi.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let o=!1;for(const s of r)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const o=n[r.id];null===o&&mi.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let s=null;try{this._debug&&o!==r&&r.validateProps(),o?(this._transferLayerState(o,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}s&&this._updateSublayersRecursively(s,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class Jue{constructor(e){ve(this,"width",void 0),ve(this,"height",void 0),ve(this,"views",void 0),ve(this,"viewState",void 0),ve(this,"controllers",void 0),ve(this,"timeline",void 0),ve(this,"_viewports",void 0),ve(this,"_viewportMap",void 0),ve(this,"_isUpdating",void 0),ve(this,"_needsRedraw",void 0),ve(this,"_needsUpdate",void 0),ve(this,"_eventManager",void 0),ve(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){const s=i[o];if(s.containsPixel(r)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=RI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!_l(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):mi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return null===(s=this.getView(e.id))||void 0===s?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const o=e.controller;if(o&&i){const s={...n,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!r||r.constructor!==o.type)&&(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const o=e[r],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let c=n[o.id];const l=!!o.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),a&&this._viewports.unshift(a)}for(const r in n){const o=n[r];o&&!this.controllers[r]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}class Que extends e8{constructor(e){const{width:n,height:i,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:p=0,maxPitch:m=60,minPitch:g=0,startPanLngLat:A,startZoomLngLat:D,startRotatePos:j,startBearing:k,startPitch:ue,startZoom:we,normalize:Be=!0}=e;jo(Number.isFinite(o)),jo(Number.isFinite(r)),jo(Number.isFinite(s)),super({width:n,height:i,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:p,maxPitch:m,minPitch:g,normalize:Be,position:d},{startPanLngLat:A,startZoomLngLat:D,startRotatePos:j,startBearing:k,startPitch:ue,startZoom:we}),ve(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+n,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=wr(c,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:o}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-n.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=wr(r,i,n);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=wr(a,s,o);const{normalize:c=!0}=e;return c&&Object.assign(e,function kce(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=t;(r<-180||r>180)&&(r=Q4(r+180,360)-180),(a<-180||a>180)&&(a=Q4(a+180,360)-180);const c=oD(n/512);if(s<=c)s=c,o=0;else{const l=n/2/Math.pow(2,s),d=Gm([0,l])[1];if(o<d)o=d;else{const h=Gm([0,512-l])[1];o>h&&(o=h)}}return{width:e,height:n,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const o=e[0]-n[0],s=e[1]-n[1],a=e[1],c=n[1],{width:l,height:d}=this.getViewportProps(),h=o/l;let p=0;s>0?Math.abs(d-c)>5&&(p=s/(c-d)*1.2):s<0&&c>5&&(p=1-a/c),p=wr(p,-1,1);const{minPitch:m,maxPitch:g}=this.getViewportProps();let D=i;return p>0?D=i+p*(g-i):p<0&&(D=i-p*(m-i)),{pitch:D,bearing:r+180*h}}}class ehe extends sR{constructor(...e){super(...e),ve(this,"ControllerState",Que),ve(this,"transition",{transitionDuration:300,transitionInterpolator:new BE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),ve(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class u8 extends rR{get ViewportType(){return Wm}get ControllerType(){return ehe}}ve(u8,"displayName","MapView");const the=new uR;class ihe{constructor(){ve(this,"effects",void 0),ve(this,"_resolvedEffects",[]),ve(this,"_defaultEffects",[]),ve(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(i=>i.id===e.id)){const i=n.findIndex(r=>function nhe(t,e){var n,i;return(null!==(n=t.order)&&void 0!==n?n:1/0)-(null!==(i=e.order)&&void 0!==i?i:1/0)}(r,e)>0);i<0?n.push(e):n.splice(i,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(_l(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const r of this.effects)n[r.id]=r;const i=[];for(const r of e){const o=n[r.id];o&&o!==r?o.setProps?(o.setProps(r.props),i.push(o)):(o.cleanup(),i.push(r)):i.push(r),delete n[r.id]}for(const r in n)n[r].cleanup();this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(r=>r instanceof uR)||this._resolvedEffects.push(the),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class rhe extends cR{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const h8={blendFunc:[1,0,32771,0],blendEquation:32774};class f8 extends cR{constructor(...e){super(...e),ve(this,"pickZ",void 0),ve(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:p,pass:m="picking",pickZ:g,moduleParameters:A}){const D=this.gl;this.pickZ=g;const j=this._resetColorEncoder(g),k=Tc(D,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...h8,blend:!g},()=>super.render({target:s,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:o,cullRect:h,effects:p?.filter(we=>we.useInPicking),pass:m,isPicking:!0,moduleParameters:A}));return this._colorEncoderState=null,{decodePickingColor:j&&she.bind(null,j),stats:k}}shouldDrawLayer(e){const{pickable:n,operation:i}=e.props;return n&&i.includes("draw")||i.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters},{pickable:o,operation:s}=e.props;return this._colorEncoderState?o&&s.includes("draw")&&(Object.assign(r,h8),r.blend=!0,r.blendColor=function ohe(t,e,n){const{byLayer:i,byAlpha:r}=t;let o,s=i.get(e);return s?(s.viewports.push(n),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},i.set(e,s),r[o]=s):(mi.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colorEncoderState,e,i)):r.blend=!1,s.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function she(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class che{constructor(e){ve(this,"gl",void 0),ve(this,"layerFilter",void 0),ve(this,"drawPickingColors",void 0),ve(this,"drawLayersPass",void 0),ve(this,"pickLayersPass",void 0),ve(this,"renderCount",void 0),ve(this,"_needsRedraw",void 0),ve(this,"renderBuffers",void 0),ve(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new rhe(e),this.pickLayersPass=new f8(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||lo.getDefaultFramebuffer(this.gl)};i.effects&&this._preRender(i.effects,i);const r=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,o=n.render({...i,target:r});i.effects&&this._postRender(i.effects,i),this.renderCount++,ts("deckRenderer.renderLayers",this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const i of e)n.preRenderStats[i.id]=i.preRender(this.gl,n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new lo(this.gl),new lo(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={...n,inputBuffer:i[0],swapBuffer:i[1],target:null};for(const o of e)if(o.postRender){if(o.id===this.lastPostProcessEffect){r.target=n.target,o.postRender(this.gl,r);break}const s=o.postRender(this.gl,r);r.inputBuffer=s,r.swapBuffer=s===i[0]?i[1]:i[0]}}}const lhe={pickedColor:null,pickedObjectIndex:-1};function dhe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let d=r*r,h=-1,p=0;for(let m=0;m<l;m++){const g=m+a-i,A=g*g;if(A>d)p+=4*c;else for(let D=0;D<c;D++){if(t[p+3]-1>=0){const k=D+s-n,ue=k*k+A;ue<=d&&(d=ue,h=p)}p+=4}}if(h>=0){const m=t.slice(h,h+4),g=e(m);if(g){const A=Math.floor(h/4/c),D=h/4-A*c;return{...g,pickedColor:m,pickedX:s+D,pickedY:a+A}}mi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return lhe}function p8({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:o}){let a,s=e[0];if(e.length>1&&(s=function fhe(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),s){const c=[i-s.x,r-s.y];void 0!==o&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function hhe(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===i){const p=n.layerId,m=s?s.props.id:null;if(m!==p||a!==n.index){if(m!==p){const g=r.find(A=>A.props.id===p);g&&c.unshift(g)}n.layerId=m,n.index=a,n.info=null}}const l=p8(t),d=new Map;return d.set(null,l),c.forEach(h=>{let p={...l};h===s&&(p.color=o,p.index=a,p.picked=!0),p=m8({layer:h,info:p,mode:i});const m=p.layer;h===s&&"hover"===i&&(n.info=p),d.set(m.id,p),"hover"===i&&m.updateAutoHighlight(p)}),d}function m8({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class phe{constructor(e){ve(this,"gl",void 0),ve(this,"pickingFBO",void 0),ve(this,"depthFBO",void 0),ve(this,"pickLayersPass",void 0),ve(this,"layerFilter",void 0),ve(this,"lastPickedInfo",void 0),ve(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new f8(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?i.find(p=>p.id===s):null,l=a&&r.find(p=>p.id===a)||r[0],d=l&&l.unproject([e-l.x,n-l.y]);return{...o,x:e,y:n,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new lo(i),lo.isSupported(i,{colorBufferFloat:!0}))){const r=new lo(i);r.attach({36064:new Ms(i,{format:ui(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const p=this._getPickable(e),m=Dm(this.gl);if(!p)return{result:[],emptyInfo:p8({viewports:i,x:r,y:o,pixelRatio:m})};this._resizeBuffer();const g=fI(this.gl,[r,o],!0),A=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],D=Math.round(s*m),{width:j,height:k}=this.pickingFBO,ue=this._getPickingRect({deviceX:A[0],deviceY:A[1],deviceRadius:D,deviceWidth:j,deviceHeight:k}),we={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let Be;const We=[],Ke=new Set;for(let ut=0;ut<a;ut++){let ft,bt;if(ft=ue?dhe({...this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:ue,cullRect:we,effects:h,pass:"picking:".concat(c)}),deviceX:A[0],deviceY:A[1],deviceRadius:D,deviceRect:ue}):{pickedColor:null,pickedObjectIndex:-1},ft.pickedLayer&&l&&this.depthFBO){const{pickedColors:vt}=this._drawAndSample({layers:[ft.pickedLayer],views:n,viewports:i,onViewportActive:d,deviceRect:{x:ft.pickedX,y:ft.pickedY,width:1,height:1},cullRect:we,effects:h,pass:"picking:".concat(c,":z")},!0);vt[3]&&(bt=vt[0])}ft.pickedLayer&&ut+1<a&&(Ke.add(ft.pickedLayer),ft.pickedLayer.disablePickingIndex(ft.pickedObjectIndex)),Be=hhe({pickInfo:ft,lastPickedInfo:this.lastPickedInfo,mode:c,layers:p,viewports:i,x:r,y:o,z:bt,pixelRatio:m});for(const vt of Be.values())vt.layer&&We.push(vt);if(!ft.pickedColor)break}for(const ut of Ke)ut.restorePickingColors();return{result:We,emptyInfo:Be.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const p=this._getPickable(e);if(!p)return[];this._resizeBuffer();const m=Dm(this.gl),g=fI(this.gl,[r,o],!0),A=g.x,D=g.y+g.height,j=fI(this.gl,[r+s,o+a],!0),ue=j.y,We=function uhe({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const o=t.slice(i,i+4),s=o.join(",");if(!n.has(s)){const a=e(o);a?n.set(s,{...a,color:o}):mi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:{x:A,y:ue,width:j.x+j.width-A,height:D-ue},cullRect:{x:r,y:o,width:s,height:a},effects:h,pass:"picking:".concat(c)})),Ke=new Map,ut=Number.isFinite(l);for(let ft=0;ft<We.length&&!(ut&&l&&Ke.size>=l);ft++){const bt=We[ft];let vt={color:bt.pickedColor,layer:null,index:bt.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:m};vt=m8({layer:bt.pickedLayer,info:vt,mode:c}),Ke.has(vt.object)||Ke.set(vt.object,vt)}return Array.from(Ke.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,h={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l,preRenderStats:{}};for(const k of a)k.useInPicking&&(h.preRenderStats[k.id]=k.preRender(this.gl,h));const{decodePickingColor:p}=this.pickLayersPass.render(h),{x:m,y:g,width:A,height:D}=o,j=new(l?Float32Array:Uint8Array)(A*D*4);return iE(d,{sourceX:m,sourceY:g,sourceWidth:A,sourceHeight:D,target:j}),{pickedColors:j,decodePickingColor:p}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:o}){const s=Math.max(0,e-i),a=Math.max(0,n-i),c=Math.min(r,e+i+1)-s,l=Math.min(o,n+i+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}const mhe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class ghe{constructor(e){ve(this,"el",null),ve(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,mhe),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)"),e&&"object"==typeof e&&"style"in e&&Object.assign(r.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:bhe}=globalThis,hR=typeof Image<"u",fR=typeof ImageBitmap<"u",pR=!!NE||!!bhe;function g8(t){const e=function b8(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const whe=/^data:image\/svg\+xml/,xhe=/\.svg((\?|#).*)?$/;function mR(t){return t&&(whe.test(t)||xhe.test(t))}function y8(t,e){if(mR(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function v8(t,e,n){return gR.apply(this,arguments)}function gR(){return gR=Ht(function*(t,e,n){const i=function Ehe(t,e){if(mR(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return y8(t,e)}(t,n),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function Ahe(t,e){return _R.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),gR.apply(this,arguments)}function _R(){return _R=Ht(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=o=>r(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){r(o)}})}),_R.apply(this,arguments)}const She={};let w8=!0;function bR(){return bR=Ht(function*(t,e,n){let i;i=mR(n)?yield v8(t,e,n):y8(t,n);const r=e&&e.imagebitmap;return yield function The(t){return yR.apply(this,arguments)}(i,r)}),bR.apply(this,arguments)}function yR(){return yR=Ht(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function Mhe(t){for(const e in t||She)return!1;return!0}(e)||!w8)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),w8=!1}return yield createImageBitmap(t)}),yR.apply(this,arguments)}const El=!1,Py=!0;function vR(t){const e=Ny(t);return function Nhe(t){const e=Ny(t);return e.byteLength>=24&&2303741511===e.getUint32(0,El)?{mimeType:"image/png",width:e.getUint32(16,El),height:e.getUint32(20,El)}:null}(e)||function Bhe(t){const e=Ny(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,El)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function jhe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,El);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,El),width:e.getUint16(o+7,El)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,El)}return null}(e)||function Fhe(t){const e=Ny(t);return e.byteLength>=10&&1195984440===e.getUint32(0,El)?{mimeType:"image/gif",width:e.getUint16(6,Py),height:e.getUint16(8,Py)}:null}(e)||function Lhe(t){const e=Ny(t);return e.byteLength>=14&&16973===e.getUint16(0,El)&&e.getUint32(2,Py)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Py),height:e.getUint32(22,Py)}:null}(e)||function Phe(t){const n=function Ihe(t){return function Ohe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function khe(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function Dhe(t){switch(function Rhe(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function Ny(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function wR(){return wR=Ht(function*(t,e){const{mimeType:n}=vR(t)||{},i=globalThis._parseImageNode;return pd(i),yield i(t,n)}),wR.apply(this,arguments)}function xR(){return xR=Ht(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:o}=n||{},s=function Hhe(t){switch(t){case"auto":case"data":return function vhe(){if(fR)return"imagebitmap";if(hR)return"image";if(pR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function yhe(t){switch(t){case"auto":return fR||hR||pR;case"imagebitmap":return fR;case"image":return hR;case"data":return pR;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(s){case"imagebitmap":a=yield function Che(t,e,n){return bR.apply(this,arguments)}(t,e,o);break;case"image":a=yield v8(t,e,o);break;case"data":a=yield function Uhe(t,e){return wR.apply(this,arguments)}(t,e);break;default:pd(!1)}return"data"===r&&(a=function _8(t){switch(g8(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),xR.apply(this,arguments)}const x8={id:"image",module:"images",name:"Images",version:"3.4.11",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function Vhe(t,e,n){return xR.apply(this,arguments)},tests:[t=>!!vR(new DataView(t))],options:{image:{type:"auto",decode:!0}}},Ghe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function zhe(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},$he=function Whe(){const t="8.9.24",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(mi.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:mi,_registerLoggers:Gre},$V([Ghe,[x8,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();class UE extends ld{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=ui(e),r=IU(e,"TIMER_QUERY");let o=i||r;for(const s of n)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&r;break;default:Xt(!1)}return o}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return UE.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const E8=fl()&&typeof document<"u";let nfe=0;class ife{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(D=>uU(D)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:s=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:m=!0,stats:g=cf.get("animation-loop-".concat(nfe++))}=e;let{useDevicePixels:A=!0}=e;"useDevicePixelRatio"in e&&(dn.deprecated("useDevicePixelRatio","useDevicePixels")(),A=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=g,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:m,useDevicePixels:A}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Xt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=UE.isSupported(this.gl,["timers"])?new UE(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return Ht(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return dn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=E8?new Promise((e,n)=>{E8&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function tfe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function efe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?mI(this.props.gl,e):this.onCreateContext(e),!tE(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function pie(t){cd(t,hI)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function yie(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function mie(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function Aie(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(dn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let s=e;const a=Math.floor(i*s),c=Math.floor(r*s);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&(dn.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*s),t.canvas.height=Math.floor(r*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new lo(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var VE=T(7271);const rfe={mousedown:1,mousemove:2,mouseup:4};(function sfe(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function ofe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,o=>o.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(VE.PointerEventInput),function afe(t){t.prototype.handler=function(n){let i=rfe[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(VE.MouseInput);const cfe=VE.Manager,Al=VE;class HE{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const lfe=Al?[[Al.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Al.Rotate,{enable:!1}],[Al.Pinch,{enable:!1}],[Al.Swipe,{enable:!1}],[Al.Pan,{threshold:0,enable:!1}],[Al.Press,{enable:!1}],[Al.Tap,{event:"doubletap",taps:2,enable:!1}],[Al.Tap,{event:"anytap",enable:!1}],[Al.Tap,{enable:!1}]]:null,C8={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},dfe={doubletap:["tap"]},ufe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},AR={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},hfe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},T8={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},ffe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Km=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let SR=!1;try{Km.addEventListener("test",null,{get passive(){return SR=!0,!0}}),Km.removeEventListener("test",null)}catch{SR=!1}const pfe=-1!==ffe.indexOf("firefox"),{WHEEL_EVENTS:mfe}=AR,I8=4.000244140625;class bfe extends HE{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let o=r.deltaY;Km.WheelEvent&&(pfe&&r.deltaMode===Km.WheelEvent.DOM_DELTA_PIXEL&&(o/=Km.devicePixelRatio),r.deltaMode===Km.WheelEvent.DOM_DELTA_LINE&&(o*=40)),0!==o&&o%I8==0&&(o=Math.floor(o/I8)),r.shiftKey&&o&&(o*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-o,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(mfe),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!SR&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:yfe}=AR,D8="pointermove",R8="pointerover",k8="pointerout",O8="pointerenter",P8="pointerleave";class vfe extends HE{constructor(e,n,i){super(e,n,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(yfe),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===D8&&(this.enableMoveEvent=n),e===R8&&(this.enableOverEvent=n),e===k8&&(this.enableOutEvent=n),e===O8&&(this.enableEnterEvent=n),e===P8&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(R8,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(k8,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(O8,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(P8,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(D8,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:wfe}=AR,N8="keydown";class xfe extends HE{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const o=r.target||r.srcElement;"INPUT"===o.tagName&&"text"===o.type||"TEXTAREA"===o.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:N8,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(wfe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===N8&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const L8="contextmenu";class Efe extends HE{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:L8,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===L8&&(this.options.enable=n)}}const Afe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Pfe(t){const e=Afe[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===r,s=2===r,a=3===r):2===e?(o=!!(1&n),s=!!(4&n),a=!!(2&n)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function Nfe(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const MR={srcElement:"root",priority:0};class Ffe{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let c=MR;"string"==typeof i||i&&i.addEventListener?c={...MR,srcElement:i}:i&&(c={...MR,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type===e&&s.handler===n){i.splice(o,1);const a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...Pfe(e),...Nfe(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const Lfe={events:null,recognizers:null,recognizerOptions:{},Manager:cfe,touchAction:"none",tabIndex:0};class Bfe{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:o}=r,s=ufe[o.type];s&&this.manager.emit(s,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...Lfe,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||lfe}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(C8).forEach(r=>{const o=this.manager.get(r);o&&C8[r].forEach(s=>{o.recognizeWith(s)})});for(const r in n.recognizerOptions){const o=this.manager.get(r);if(o){const s=n.recognizerOptions[r];delete s.enable,o.set(s)}}this.wheelInput=new bfe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new vfe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new xfe(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Efe(e,this._onOtherEvent,{enable:!1});for(const[r,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(r,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const o=dfe[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=i.get(s);n?(a.requireFailure(e),r.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,o){if("string"!=typeof e){i=n;for(const d in e)this._addEventHandler(d,e[d],i,r,o);return}const{manager:s,events:a}=this,c=T8[e]||e;let l=a.get(c);l||(l=new Ffe(this),a.set(c,l),l.recognizerName=hfe[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,n,i,r,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:i}=this,o=i.get(T8[e]||e);if(o&&(o.remove(e,n),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function bf(){}const B8={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:bf,onResize:bf,onViewStateChange:bf,onInteractionStateChange:bf,onBeforeRender:bf,onAfterRender:bf,onLoad:bf,onError:t=>mi.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class IR{constructor(e){ve(this,"props",void 0),ve(this,"width",0),ve(this,"height",0),ve(this,"userData",{}),ve(this,"canvas",null),ve(this,"viewManager",null),ve(this,"layerManager",null),ve(this,"effectManager",null),ve(this,"deckRenderer",null),ve(this,"deckPicker",null),ve(this,"eventManager",null),ve(this,"tooltip",null),ve(this,"metrics",void 0),ve(this,"animationLoop",void 0),ve(this,"stats",void 0),ve(this,"viewState",void 0),ve(this,"cursorState",void 0),ve(this,"_needsRedraw",void 0),ve(this,"_pickRequest",void 0),ve(this,"_lastPointerDownInfo",null),ve(this,"_metricsCounter",void 0),ve(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),ve(this,"_onEvent",n=>{const i=qj[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:o,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,s,n)),!d&&l&&l(s,n)}),ve(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...B8,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&mi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===I4()&&mi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new gI({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&py.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,o,s,a,c,l;null===(e=this.animationLoop)||void 0===e||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(n=this.layerManager)||void 0===n||n.finalize(),this.layerManager=null,null===(i=this.viewManager)||void 0===i||i.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(o=this.deckRenderer)||void 0===o||o.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(a=this.eventManager)||void 0===a||a.destroy(),this.eventManager=null,null===(c=this.tooltip)||void 0===c||c.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&mi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&mi.removed("onLayerClick","onClick")(),e.initialViewState&&!_l(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||i||r||o||s,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return jo(this.viewManager),this.viewManager.views}getViewports(e){return jo(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,i){jo(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),jo(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(i||0===i){var r;const o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var e,n;const{canvas:i}=this;if(!i)return;const r=null!==(e=i.clientWidth)&&void 0!==e?e:i.width,o=null!==(n=i.clientHeight)&&void 0!==n?n:i.height;var s,a;r===this.width&&o===this.height||(this.width=r,this.height=o,null===(s=this.viewManager)||void 0===s||s.setProps({width:r,height:o}),null===(a=this.layerManager)||void 0===a||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:o}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new ife({width:n,height:i,useDevicePixels:d,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:h=>uU({...o,...h,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new u8({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=r,s=!1;for(const a of i){var n;o=a,s=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,mI(e,{enable:!0,copyState:!0})),this.tooltip=new ghe(this.canvas),cd(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new l8;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new Bfe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in qj)this.eventManager.on(r,this._onEvent);this.viewManager=new Jue({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Kue(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new ihe,this.deckRenderer=new che(e),this.deckPicker=new phe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;cd(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),mi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=cf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}ve(IR,"defaultProps",B8),ve(IR,"VERSION",$he);const GE={name:"project32",dependencies:[lR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},jfe={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},WE={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function Ufe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jfe;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},j8={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Vu{static get DRAW_MODE(){return j8}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("geometry"),drawMode:i=j8.TRIANGLES,attributes:r={},indices:o=null,vertexCount:s=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Xt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Xt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const o=e[r],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(i=Math.min(i,s.length/a))}return Xt(Number.isFinite(i)),i}}const U8=()=>{},V8={10241:9987,10240:9729,10242:33071,10243:33071};function Wfe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function $fe(t,e,n,i){const r=Math.min(n/e.width,i/e.height),o=Math.floor(e.width*r),s=Math.floor(e.height*r);return 1===r?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function Fy(t){return t&&(t.id||t.url)}function H8(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];t[Fy(r)]={...r,x:o,y:n}}}class Kfe{constructor(e,{onUpdate:n=U8,onError:i=U8}){ve(this,"gl",void 0),ve(this,"onUpdate",void 0),ve(this,"onError",void 0),ve(this,"_loadOptions",null),ve(this,"_texture",null),ve(this,"_externalTexture",null),ve(this,"_mapping",{}),ve(this,"_textureParameters",null),ve(this,"_pendingCount",0),ve(this,"_autoPacking",!1),ve(this,"_xOffset",0),ve(this,"_yOffset",0),ve(this,"_rowHeight",0),ve(this,"_buffer",4),ve(this,"_canvasWidth",1024),ve(this,"_canvasHeight",0),ve(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Fy(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:o}){var s;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i),o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function qfe(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=lE(t);for(const s of r){o.index++;const a=e(s,o),c=Fy(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||a.url!==n[c].url)&&(i[c]={...a,source:s,sourceIndex:o.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=function Xfe({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[Fy(l)]){const{height:h,width:p}=l;i+p+e>s&&(H8(n,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+p+e,o=Math.max(o,h)}}return a.length>0&&H8(n,a,r),{mapping:n,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:Wfe(o+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new Ms(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||V8})),this._texture.height!==this._canvasHeight&&(this._texture=function Yfe(t,e,n,i){const r=t.width,o=t.height,s=new Ms(t.gl,{width:e,height:n,parameters:i});return function Xie(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=n;const{framebuffer:p,deleteFramebuffer:m}=fy(t);Xt(p);const{gl:g,handle:A}=p,D=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const j=g.bindFramebuffer(36160,A);Xt(e);let k=null;if(e instanceof lf&&(k=e,d=Number.isFinite(d)?d:k.width,h=Number.isFinite(h)?h:k.height,k.bind(0),e=k.target),D)switch(e){case 3553:case 34067:g.copyTexSubImage2D(e,o,a,c,i,r,d,h);break;case 35866:case 32879:es(g).copyTexSubImage3D(e,o,a,c,l,i,r,d,h)}else g.copyTexImage2D(e,o,s,i,r,d,h,0);k&&k.unbind(),g.bindFramebuffer(36160,j||null),m&&p.delete()}(t,s,{targetY:0,width:r,height:o}),t.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||V8)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of e)this._pendingCount++,Oy(i.url,this._loadOptions).then(r=>{const o=Fy(i),s=this._mapping[o],{x:a,y:c,width:l,height:d}=s,{data:h,width:p,height:m}=$fe(n,r,l,d);this._texture.setSubImageData({data:h,x:a+(l-p)/2,y:c+(d-m)/2,width:p,height:m}),s.width=p,s.height=m,this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const z8=[0,0,0,255],Jfe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:z8},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class DR extends gf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[GE,WE]})}initializeState(){this.state={iconManager:new Kfe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:z8},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:d}=n,{iconManager:h}=this.state,p=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!p,iconAtlas:s,iconMapping:p?a:null,textureParameters:d}),p?i.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:g}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(g),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:eE[o],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new jm(e,{...this.getShaders(),id:this.props.id,geometry:new Vu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):mi.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:o}=this.state.iconManager.getIconMapping(e);return[n,i,r,o]}}ve(DR,"defaultProps",Jfe),ve(DR,"layerName","IconLayer");const G8=[];class kR extends DR{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(o=>o/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&mi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:o}=this.state,s=r?Math.max(i,.75*(1-r)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:.75,outlineBuffer:s,gamma:i,sdf:!!n,outlineColor:o},super.draw(e),n&&r){const{iconManager:a}=this.state;a.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:.75}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):G8}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):G8}}ve(kR,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),ve(kR,"layerName","MultiIconLayer");const Ly=1e20;class epe{constructor({fontSize:e=24,buffer:n=3,radius:i=8,cutoff:r=.25,fontFamily:o="sans-serif",fontWeight:s="normal",fontStyle:a="normal"}={}){this.buffer=n,this.cutoff=r,this.radius=i;const c=this.size=e+4*n,l=this._createCanvas(c),d=this.ctx=l.getContext("2d",{willReadFrequently:!0});d.font=`${a} ${s} ${e}px ${o}`,d.textBaseline="alphabetic",d.textAlign="left",d.fillStyle="black",this.gridOuter=new Float64Array(c*c),this.gridInner=new Float64Array(c*c),this.f=new Float64Array(c),this.z=new Float64Array(c+1),this.v=new Uint16Array(c)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:o,actualBoundingBoxRight:s}=this.ctx.measureText(e),a=Math.ceil(i),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-o))),d=Math.min(this.size-this.buffer,a+Math.ceil(r)),h=l+2*this.buffer,p=d+2*this.buffer,m=Math.max(h*p,0),g=new Uint8ClampedArray(m),A={data:g,width:h,height:p,glyphWidth:l,glyphHeight:d,glyphTop:a,glyphLeft:0,glyphAdvance:n};if(0===l||0===d)return A;const{ctx:D,buffer:j,gridInner:k,gridOuter:ue}=this;D.clearRect(j,j,l,d),D.fillText(e,j,j+a);const we=D.getImageData(j,j,l,d);ue.fill(Ly,0,m),k.fill(0,0,m);for(let Be=0;Be<d;Be++)for(let We=0;We<l;We++){const Ke=we.data[4*(Be*l+We)+3]/255;if(0===Ke)continue;const ut=(Be+j)*h+We+j;if(1===Ke)ue[ut]=0,k[ut]=Ly;else{const ft=.5-Ke;ue[ut]=ft>0?ft*ft:0,k[ut]=ft<0?ft*ft:0}}W8(ue,0,0,h,p,h,this.f,this.v,this.z),W8(k,j,j,l,d,h,this.f,this.v,this.z);for(let Be=0;Be<m;Be++){const We=Math.sqrt(ue[Be])-Math.sqrt(k[Be]);g[Be]=Math.round(255-255*(We/this.radius+this.cutoff))}return A}}function W8(t,e,n,i,r,o,s,a,c){for(let l=e;l<e+i;l++)$8(t,n*o+l,o,r,s,a,c);for(let l=n;l<n+r;l++)$8(t,l*o+e,1,i,s,a,c)}function $8(t,e,n,i,r,o,s){o[0]=0,s[0]=-Ly,s[1]=Ly,r[0]=t[e];for(let a=1,c=0,l=0;a<i;a++){r[a]=t[e+a*n];const d=a*a;do{const h=o[c];l=(r[a]-r[h]+d-h*h)/(a-h)/2}while(l<=s[c]&&--c>-1);c++,o[c]=a,s[c]=l,s[c+1]=Ly}for(let a=0,c=0;a<i;a++){for(;s[c+1]<a;)c++;const l=o[c],d=a-l;t[e+a*n]=r[l]+d*d}}const npe=[];function ipe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Y8(t,e,n,i){let r=0;for(let s=e;s<n;s++){var o;r+=(null===(o=i[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return r}function X8(t,e,n,i,r,o){let s=e,a=0;for(let c=e;c<n;c++){const l=Y8(t,c,c+1,r);a+l>i&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function spe(t,e,n,i,r=0,o){void 0===o&&(o=t.length);const s=[];return"break-all"===e?X8(t,r,o,n,i,s):function ope(t,e,n,i,r,o){let s=e,a=e,c=e,l=0;for(let d=e;d<n;d++)if((" "===t[d]||" "===t[d+1]||d+1===n)&&(c=d+1),c>a){let h=Y8(t,a,c,r);l+h>i&&(s<a&&(o.push(a),s=a,l=0),h>i&&(h=X8(t,a,c,i,r,o),s=o[o.length-1])),a=c,l+=h}}(t,r,o,n,i,s),s}function ape(t,e,n,i,r,o){let s=0,a=0;for(let c=e;c<n;c++){const l=t[c],d=i[l];d?(a||(a=d.layoutHeight),r[c]=s+d.layoutWidth/2,s+=d.layoutWidth):(mi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=s,s+=32)}o[0]=s,o[1]=a}class q8{constructor(e=5){ve(this,"limit",void 0),ve(this,"_cache",{}),ve(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const Jm={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function dpe(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let $E=new q8(3);function hpe(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function eH(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class ppe{constructor(){ve(this,"props",{...Jm}),ve(this,"_key",void 0),ve(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(1.2*e+2*n)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=function upe(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=$E.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),i=$E.get(this._key);if(i&&0===n.size)return void(this._atlas!==i&&(this._atlas=i));const r=this._generateFontAtlas(n,i);this._atlas=r,$E.set(this._key,r)}_generateFontAtlas(e,n){const{fontFamily:i,fontWeight:r,fontSize:o,buffer:s,sdf:a,radius:c,cutoff:l}=this.props;let d=n&&n.data;d||(d=document.createElement("canvas"),d.width=1024);const h=d.getContext("2d",{willReadFrequently:!0});eH(h,i,o,r);const{mapping:p,canvasHeight:m,xOffset:g,yOffset:A}=function rpe({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;const d=n+2*i;for(const h of t)if(!o[h]){const p=e(h);l+p+2*i>r&&(l=0,c++),o[h]={x:l+i,y:a+c*d+i,width:p,height:d,layoutWidth:p,layoutHeight:n},l+=p+2*i}return{mapping:o,xOffset:l,yOffset:a+c*d,canvasHeight:ipe(a+(c+1)*d)}}({getFontWidth:D=>h.measureText(D).width,fontHeight:1.2*o,buffer:s,characterSet:e,maxCanvasWidth:1024,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(d.height!==m){const D=h.getImageData(0,0,d.width,d.height);d.height=m,h.putImageData(D,0,0)}if(eH(h,i,o,r),a){const D=new epe({fontSize:o,buffer:s,radius:c,cutoff:l,fontFamily:i,fontWeight:"".concat(r)});for(const j of e){const{data:k,width:ue,height:we,glyphTop:Be}=D.draw(j);p[j].width=ue,p[j].layoutOffsetY=.9*o-Be;const We=h.createImageData(ue,we);hpe(k,We),h.putImageData(We,p[j].x,p[j].y)}}else for(const D of e)h.fillText(D,p[D].x,p[D].y+s+.9*o);return{xOffset:g,yOffset:A,mapping:p,data:d,width:d.width,height:d.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const _pe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class OR extends gf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[GE,WE]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:eE[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new jm(e,{...this.getShaders(),id:this.props.id,geometry:new Vu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}ve(OR,"defaultProps",_pe),ve(OR,"layerName","TextBackgroundLayer");const tH={start:1,middle:0,end:-1},nH={top:1,center:0,bottom:-1},PR=[0,0,0,255],ype={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:PR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Jm.characterSet},fontFamily:Jm.fontFamily,fontWeight:Jm.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:PR},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:PR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class NR extends iR{constructor(...e){super(...e),ve(this,"state",void 0),ve(this,"getBoundingRect",(n,i)=>{let{size:[r,o]}=this.transformParagraph(n,i);const{fontSize:s}=this.state.fontAtlasManager.props;r/=s,o/=s;const{getTextAnchor:a,getAlignmentBaseline:c}=this.props;return[(tH["function"==typeof a?a(n,i):a]-1)*r/2,(nH["function"==typeof c?c(n,i):c]-1)*o/2,r,o]}),ve(this,"getIconOffsets",(n,i)=>{const{getTextAnchor:r,getAlignmentBaseline:o}=this.props,{x:s,y:a,rowWidth:c,size:[l,d]}=this.transformParagraph(n,i),h=tH["function"==typeof r?r(n,i):r],p=nH["function"==typeof o?o(n,i):o],m=s.length,g=new Array(2*m);let A=0;for(let D=0;D<m;D++)g[A++]=(h-1)*l/2+(1-h)*(l-c[D])/2+s[D],g[A++]=(p-1)*d/2+a[D];return g})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new ppe},this.props.maxWidth>0&&mi.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(s),!0;for(const a in s)if(s[a]!==r.props[a])return r.setProps(s),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:o}=this.props,s=n.startIndices;const c="auto"===i&&new Set;if(r&&s){const{texts:l,characterCount:d}=function lpe({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=n?n/s:1,c=i?i/s:0,l=r[e]||Math.ceil((t.length-c)/a),d=o&&new Set,h=new Array(e);let p=t;if(a>1||c>0){p=new(0,t.constructor)(l);for(let g=0;g<l;g++)p[g]=t[g*a+c]}for(let m=0;m<e;m++){const D=p.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,D),d&&D.forEach(d.add,d)}if(d)for(const m of d)o.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:s,characterSet:c});a=d,o=(h,{index:p})=>l[p]}else{const{iterable:l,objectInfo:d}=lE(n);s=[0],a=0;for(const h of l){d.index++;const p=Array.from(o(h,d)||"");c&&p.forEach(c.add,c),a+=p.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||i})}transformParagraph(e,n){const{fontAtlasManager:i}=this.state,r=i.mapping,o=this.state.getText,{wordBreak:s,lineHeight:a,maxWidth:c}=this.props;return function cpe(t,e,n,i,r){const o=Array.from(t),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),d=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],p=[0,0];let m=0,g=0,A=0;for(let j=0;j<=s;j++){const k=o[j];if(("\n"===k||j===s)&&(A=j),A>g){const ue=d?spe(o,n,i,r,g,A):npe;for(let we=0;we<=ue.length;we++){const Be=0===we?g:ue[we-1],We=we<ue.length?ue[we]:A;ape(o,Be,We,r,a,p);for(let Ke=Be;Ke<We;Ke++){var D;const ft=(null===(D=r[o[Ke]])||void 0===D?void 0:D.layoutOffsetY)||0;c[Ke]=m+p[1]/2+ft,l[Ke]=p[0]}m+=p[1]*e,h[0]=Math.max(h[0],p[0])}g=A}"\n"===k&&(a[g]=0,c[g]=0,l[g]=0,g++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}(o(e,n)||"",a,s,c*i.props.fontSize,r)}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:p,getAngle:m,getPixelOffset:g,getBackgroundColor:A,getBorderColor:D,getBorderWidth:j,backgroundPadding:k,background:ue,billboard:we,fontSettings:Be,outlineWidth:We,outlineColor:Ke,sizeScale:ut,sizeUnits:ft,sizeMinPixels:bt,sizeMaxPixels:vt,transitions:Ft,updateTriggers:ht}=this.props,wt=this.getSubLayerClass("characters",kR),Bt=this.getSubLayerClass("background",OR);return[ue&&new Bt({getFillColor:A,getLineColor:D,getLineWidth:j,padding:k,getPosition:d,getSize:p,getAngle:m,getPixelOffset:g,billboard:we,sizeScale:ut,sizeUnits:ft,sizeMinPixels:bt,sizeMaxPixels:vt,transitions:Ft&&{getPosition:Ft.getPosition,getAngle:Ft.getAngle,getSize:Ft.getSize,getFillColor:Ft.getBackgroundColor,getLineColor:Ft.getBorderColor,getLineWidth:Ft.getBorderWidth,getPixelOffset:Ft.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ht.getPosition,getAngle:ht.getAngle,getSize:ht.getSize,getFillColor:ht.getBackgroundColor,getLineColor:ht.getBorderColor,getLineWidth:ht.getBorderWidth,getPixelOffset:ht.getPixelOffset,getBoundingRect:{getText:ht.getText,getTextAnchor:ht.getTextAnchor,getAlignmentBaseline:ht.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new wt({sdf:Be.sdf,smoothing:Number.isFinite(Be.smoothing)?Be.smoothing:Jm.smoothing,outlineWidth:We/(Be.radius||Jm.radius),outlineColor:Ke,iconAtlas:o,iconMapping:s,getPosition:d,getColor:h,getSize:p,getAngle:m,getPixelOffset:g,billboard:we,sizeScale:ut*r,sizeUnits:ft,sizeMinPixels:bt*r,sizeMaxPixels:vt*r,transitions:Ft&&{getPosition:Ft.getPosition,getAngle:Ft.getAngle,getColor:Ft.getColor,getSize:Ft.getSize,getPixelOffset:Ft.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:ht.getText,getPosition:ht.getPosition,getAngle:ht.getAngle,getColor:ht.getColor,getSize:ht.getSize,getPixelOffset:ht.getPixelOffset,getIconOffsets:{getTextAnchor:ht.getTextAnchor,getAlignmentBaseline:ht.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function fpe(t){mi.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),$E=new q8(t)}(e)}}ve(NR,"defaultProps",ype),ve(NR,"layerName","TextLayer");const iH="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",vpe={lightSources:{}};function FR(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const LR={name:"lights",vs:iH,fs:iH,getUniforms:function rH(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vpe;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function wpe(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?FR(e):[0,0,0],n.forEach((o,s)=>{r["lighting_uPointLight[".concat(s,"].color")]=FR(o),r["lighting_uPointLight[".concat(s,"].position")]=o.position,r["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((o,s)=>{r["lighting_uDirectionalLight[".concat(s,"].color")]=FR(o),r["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return rH({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},xpe={};const Ape={name:"phong-lighting",dependencies:[LR],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function sH(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xpe;if(!("material"in t))return{};const{material:e}=t;return e?function Epe(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(o=>o/255)}}(e):{lighting_uEnabled:!1}}},BR=Math.PI/180,YE=new Float32Array(16),aH=new Float32Array(12);function cH(t,e,n){const i=e[0]*BR,r=e[1]*BR,o=e[2]*BR,s=Math.sin(o),a=Math.sin(i),c=Math.sin(r),l=Math.cos(o),d=Math.cos(i),h=Math.cos(r),p=n[0],m=n[1],g=n[2];t[0]=p*h*d,t[1]=p*c*d,t[2]=p*-a,t[3]=m*(-c*l+h*a*s),t[4]=m*(h*l+c*a*s),t[5]=m*d*s,t[6]=g*(c*s+h*a*l),t[7]=g*(-h*s+c*a*l),t[8]=g*d*l}function lH(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const dH={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(o),h=Array.isArray(r),p=Array.isArray(s),m=l||!c&&!!a(i[0]);t.constant=m?l:h&&d&&p;const g=t.value;if(t.constant){let A;m?(YE.set(a),A=lH(YE)):(A=aH,cH(A,r,o),A.set(s,9)),t.value=new Float32Array(A)}else{let A=e*t.size;const{iterable:D,objectInfo:j}=lE(i,e,n);for(const k of D){let ue;j.index++,m?(YE.set(l?a:a(k,j)),ue=lH(YE)):(ue=aH,cH(ue,h?r:r(k,j),d?o:o(k,j)),ue.set(p?s:s(k,j),9)),g[A++]=ue[0],g[A++]=ue[1],g[A++]=ue[2],g[A++]=ue[3],g[A++]=ue[4],g[A++]=ue[5],g[A++]=ue[6],g[A++]=ue[7],g[A++]=ue[8],g[A++]=ue[9],g[A++]=ue[10],g[A++]=ue[11]}}}};function uH(t,e){return e===wi.CARTESIAN||e===wi.METER_OFFSETS||e===wi.DEFAULT&&!t.isGeospatial}function hH(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],p=a[l+2];e=d<e?d:e,n=h<n?h:n,i=p<i?p:i,r=d>r?d:r,o=h>o?h:o,s=p>s?p:s}return[[e,n,i],[r,o,s]]}function fH(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),mi.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function pH(t,e){if(t.attributes)return fH(t.attributes,e),t instanceof Vu?t:new Vu(t);if(t.positions||t.POSITION)return fH(t,e),new Vu({attributes:t});throw Error("Invalid mesh")}class jR extends gf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){const e=!ui(this.context.gl),n={};return CI(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  DECKGL_FILTER_COLOR(color, geometry);\n\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n}\n",modules:[GE,Ape,WE],transpileToGLSL100:e,defines:n})}getBounds(){var e;if(this.props._instanced)return super.getBounds();let n=this.state.positionBounds;if(n)return n;const{mesh:i}=this.props;if(!i)return null;if(n=null===(e=i.header)||void 0===e?void 0:e.boundingBox,!n){const{attributes:r}=pH(i,this.props._useMeshColors);r.POSITION=r.POSITION||r.positions,n=hH(r)}return this.state.positionBounds=n,n}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:dH}),this.setState({emptyTexture:new Ms(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var o;if(this.state.positionBounds=null,null===(o=this.state.model)||void 0===o||o.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const s=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!s.NORMAL&&!s.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||uH(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new jm(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:pH(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}ve(jR,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}}),ve(jR,"layerName","SimpleMeshLayer");const mH={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[LR]};class Zm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||Ks(this.constructor.name),this.display=!0,this.position=new nn,this.rotation=new nn,this.scale=new nn(1,1,1),this.matrix=new Wn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Xt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Xt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Xt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:o=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){Xt(e),n=n||this.matrix;const i=new Wn(e).multiplyRight(n),r=i.invert(),o=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class By extends Zm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;dn.assert(n.every(i=>i instanceof Zm),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const o=n.getBounds();if(!o)return;const[s,a]=o,c=new nn(s).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new nn(a).subtract(s).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new nn(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let p=0;p<3;p++)e[0][p]=Math.min(e[0][p],h[p]),e[1][p]=Math.max(e[1][p],h[p])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new Wn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Wn(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof By?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let XE;class UR extends OU{static get ZERO(){return XE||(XE=new UR(0,0,0,0),Object.freeze(XE)),XE}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),dd(e)&&1===arguments.length?this.copy(e):(zr.debug&&(hi(e),hi(n),hi(i),hi(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return zr.debug&&(hi(e.x),hi(e.y),hi(e.z),hi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=hi(e)}get w(){return this[3]}set w(e){this[3]=hi(e)}transform(e){return MI(this,this,e),this.check()}transformByMatrix3(e){return UU(this,this,e),this.check()}transformByMatrix2(e){return function Ire(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return BU(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function gH(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],m=n[1],g=n[2],A=n[3],D=n[4],j=n[5],k=n[6],ue=n[7],we=n[8];return t[0]=p*i+m*s+g*l,t[1]=p*r+m*a+g*d,t[2]=p*o+m*c+g*h,t[3]=A*i+D*s+j*l,t[4]=A*r+D*a+j*d,t[5]=A*o+D*c+j*h,t[6]=k*i+ue*s+we*l,t[7]=k*r+ue*a+we*d,t[8]=k*o+ue*c+we*h,t}function _H(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function bH(){var t=new Zs(4);return Zs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function yH(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function vH(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],c=n[1],l=n[2],d=n[3];return t[0]=i*d+s*a+r*l-o*c,t[1]=r*d+s*c+o*a-i*l,t[2]=o*d+s*l+i*c-r*a,t[3]=s*d-i*a-r*c-o*l,t}var xH=z4,Xpe=function(){var t=PU(),e=NU(1,0,0),n=NU(0,1,0);return function(i,r,o){var s=FU(r,o);return s<-.999999?(sE(t,e,r),function _re(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&sE(t,n,r),function vre(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(t,t),yH(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(sE(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,function nce(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=o*s,t}(i,i))}}();bH(),bH(),function Mpe(){var t=new Zs(9);Zs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const qpe=[0,0,0,1];class jy extends oE{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function wH(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*i,t[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),t[o]=(e[3*o+r]+e[3*r+o])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return yH(this,e,n),this.check()}identity(){return function Npe(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=hi(e)}get y(){return this[1]}set y(e){this[1]=hi(e)}get z(){return this[2]}set z(e){this[2]=hi(e)}get w(){return this[3]}set w(e){this[3]=hi(e)}len(){return function ece(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function tce(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function ice(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return Xpe(this,e,n),this.check()}add(e){return function Qae(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function jpe(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function zpe(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function Hpe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function rce(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return vH(this,this,e),this.check()}multiplyLeft(e){return vH(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function Fpe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+s*a,t[1]=r*c+o*a,t[2]=o*c-r*a,t[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function Lpe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-o*a,t[1]=r*c+s*a,t[2]=o*c+i*a,t[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function Bpe(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=o*c+s*a,t[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return xH(this,this,e),this.check()}slerp(e,n,i){let r,o,s;switch(arguments.length){case 1:({start:r=qpe,target:o,ratio:s}=e);break;case 2:r=this,o=e,s=n;break;default:r=e,o=n,s=i}return function qE(t,e,n,i){var p,m,g,A,D,r=e[0],o=e[1],s=e[2],a=e[3],c=n[0],l=n[1],d=n[2],h=n[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>gl?(p=Math.acos(m),g=Math.sin(p),A=Math.sin((1-i)*p)/g,D=Math.sin(i*p)/g):(A=1-i,D=i),t[0]=A*r+D*c,t[1]=A*o+D*l,t[2]=A*s+D*d,t[3]=A*a+D*h,t}(this,r,o,s),this.check()}transformVector4(e,n=new UR){return function oce(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2],l=n[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,p=l*o+s*r-a*i,m=-s*i-a*r-c*o;t[0]=d*l+m*-s+h*-c-p*-a,t[1]=h*l+m*-a+p*-s-d*-c,t[2]=p*l+m*-c+d*-a-h*-s,t[3]=e[3]}(n,e,this),my(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const Kpe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jpe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function SH(t){if(!t._animation){const e=Jpe[t.componentType],n=Kpe[t.type],i=n*t.count,{buffer:r,byteOffset:o}=t.bufferView.data,s=new e(r,o+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(s);else{const a=[];for(let c=0;c<s.length;c+=n)a.push(Array.from(s.slice(c,c+n)));t._animation=a}}return t._animation}const Zpe=new Wn,VR=new jy;class rme{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:o,target:s,path:a}=r;(function ime(t,e,n,i){let{input:r,interpolation:o,output:s}=e;const c=t%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:dn.warn("Bad animation path ".concat(i))()}Xt(n[i].length===s[d].length);const h=r[d],p=r[l];switch(o){case"STEP":!function nme(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,s[d]);break;case"LINEAR":p>h&&function eme(t,e,n,i,r){if("rotation"===e){VR.slerp({start:n,target:i,ratio:r});for(let o=0;o<VR.length;o++)t[e][o]=VR[o]}else for(let o=0;o<n.length;o++)t[e][o]=r*i[o]+(1-r)*n[o]}(n,i,s[d],s[l],(c-h)/(p-h));break;case"CUBICSPLINE":p>h&&function tme(t,e,n){let{p0:i,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){const d=r[l]*a,h=o[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(n,i,{p0:s[3*d+1],outTangent0:s[3*d+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:p-h,ratio:(c-h)/(p-h)});break;default:dn.warn("Interpolation ".concat(o," not supported"))()}})(i,o,s,a),function Qpe(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=Zpe.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(s,s._node)})}}class ome{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),o=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:SH(e.accessors[c]),interpolation:l,output:SH(e.accessors[d])}}),s=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new rme({name:r,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class sme extends Zm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof jm?(this.model=e,this._setModelNodeProps(n)):this.model=new jm(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class ame{constructor(e,n){let{attributes:i,material:r,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},CI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.texture.source.image;let s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};const c=new Ms(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(dn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function CH(t,e){return ui(t)?"#version 300 es\n".concat(e):e}const ume={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},hme={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class fme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},hme,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new ome(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(o=>this.createNode(o));return new By({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));const r=new By({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const o=(new Wn).fromQuaternion(e.rotation);r.matrix.multiplyRight(o)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),r=new By({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){dn.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function dme(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:o,modelOptions:s}=e,a=new ame(t,e);dn.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));const l=new sme(t,Object.assign({id:n,drawMode:i,vertexCount:r,modules:[mH],defines:a.defines,parameters:a.parameters,vs:CH(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:CH(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c},s));return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),dn.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new zi(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new Js({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:ume[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var Uy=T(9125);const _me="3.4.11",HR={};function yf(t){return zR.apply(this,arguments)}function zR(){return zR=Ht(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&(t=function bme(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:wl?n.CDN?(yl(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(_me,"/dist/libs/").concat(t)):kD?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),HR[t]=HR[t]||function yme(t){return GR.apply(this,arguments)}(t),yield HR[t]}),zR.apply(this,arguments)}function GR(){return GR=Ht(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!wl)try{return Uy&&Uy.requireFromFile&&(yield Uy.requireFromFile(t))}catch{return null}return kD?importScripts(t):function vme(t,e){if(!wl)return Uy.requireFromString&&Uy.requireFromString(t,e);if(kD)return eval.call(Wle,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),GR.apply(this,arguments)}const wme="https://unpkg.com/@loaders.gl/textures@".concat("3.4.11","/dist/libs/basis_encoder.wasm"),xme="https://unpkg.com/@loaders.gl/textures@".concat("3.4.11","/dist/libs/basis_encoder.js");let WR,XR;function MH(t){return $R.apply(this,arguments)}function $R(){return $R=Ht(function*(t){const e=t.modules||{};return e.basis?e.basis:(WR=WR||function Eme(t){return YR.apply(this,arguments)}(t),yield WR)}),$R.apply(this,arguments)}function YR(){return YR=Ht(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield yf("basis_transcoder.js","textures",t),yield yf("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function Ame(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:o,initializeBasis:s}=r;s(),i({BasisFile:o})})})}(e,n)}),YR.apply(this,arguments)}function IH(t){return qR.apply(this,arguments)}function qR(){return qR=Ht(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(XR=XR||function Sme(t){return KR.apply(this,arguments)}(t),yield XR)}),qR.apply(this,arguments)}function KR(){return KR=Ht(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield yf(xme,"textures",t),yield yf(wme,"textures",t)]),e=e||globalThis.BASIS,yield function Cme(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}(e,n)}),KR.apply(this,arguments)}const Tme=["","WEBKIT_","MOZ_"],DH={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let KE=null;var JR,JE,ZR,ZE,kH,QR,OH,PH;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(JR||(JR={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(JE||(JE={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(ZR||(ZR={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(ZE||(ZE={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(kH||(kH={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(QR||(QR={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(OH||(OH={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(PH||(PH={}));const xa=[171,75,84,88,32,50,48,187,13,10,26,10],Ome={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function tk(){return tk=Ht(function*(t,e){if("auto"===e.basis.containerFormat){if(function kme(t){const e=new Uint8Array(t);return!(e.byteLength<xa.length||e[0]!==xa[0]||e[1]!==xa[1]||e[2]!==xa[2]||e[3]!==xa[3]||e[4]!==xa[4]||e[5]!==xa[5]||e[6]!==xa[6]||e[7]!==xa[7]||e[8]!==xa[8]||e[9]!==xa[9]||e[10]!==xa[10]||e[11]!==xa[11])}(t))return LH((yield IH(e)).KTX2File,t,e);const{BasisFile:n}=yield MH(e);return nk(n,t,e)}if("encoder"===e.basis.module){const n=yield IH(e);return"ktx2"===e.basis.containerFormat?LH(n.KTX2File,t,e):nk(n.BasisFile,t,e)}{const{BasisFile:i}=yield MH(e);return nk(i,t,e)}}),tk.apply(this,arguments)}function nk(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),o=[];for(let s=0;s<r;s++){const a=i.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(Nme(i,s,l,n));o.push(c)}return o}finally{i.close(),i.delete()}}function Nme(t,e,n,i){const r=t.getImageWidth(e,n),o=t.getImageHeight(e,n),s=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=BH(i,s),d=t.getImageTranscodedSizeInBytes(e,n,l),h=new Uint8Array(d);if(!t.transcodeImage(h,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:c,hasAlpha:s}}function LH(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),o=[];for(let s=0;s<r;s++){o.push(Fme(i,s,n));break}return[o]}finally{i.close(),i.delete()}}function Fme(t,e,n){const{alphaFlag:i,height:r,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=BH(n,i),l=t.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!t.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:d,compressed:s,levelSize:l,hasAlpha:i,format:a}}function BH(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=jH()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),Ome[n]}function jH(){const t=function Mme(t){if(!KE){t=t||function Ime(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,KE=new Set;for(const e of Tme)for(const n in DH)t&&t.getExtension("".concat(e).concat(n))&&KE.add(DH[n])}return KE}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const Lme={name:"Basis",id:wl?"basis":"basis-nodejs",module:"textures",version:"3.4.11",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function Pme(t,e){return tk.apply(this,arguments)}};function UH(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let o=0;o<n;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function Ea(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function VH(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function Hy(t,e){return pd(t>=0),pd(e>0),t+(e-1)&~(e-1)}function Ume(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+Hy(i.byteLength,4)}const zH=["SCALAR","VEC2","VEC3","VEC4"],Vme=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Hme=new Map(Vme),zme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Gme={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Wme={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function GH(t){return zH[t-1]||zH[0]}function WH(t){const e=Hme.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function ik(t,e){const n=Wme[t.componentType],i=zme[t.type],o=t.count*i,s=t.count*i*Gme[t.componentType];return Ea(s>=0&&s<=e.byteLength),{ArrayType:n,length:o,byteLength:s}}const $me={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class Qs{constructor(e){ve(this,"gltf",void 0),ve(this,"sourceBuffers",void 0),ve(this,"byteLength",void 0),this.gltf=e||{json:{...$me},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Ea(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:o,length:s}=ik(e,n);return new o(r,n.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ea(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ea(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(!this.getExtension(e))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:o}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=vR(e),r=n||i?.mimeType,s={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Ea(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=Hy(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:GH(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const o={size:n.size,componentType:WH(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(o,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),o=new Uint8Array(r);let s=0;for(const a of this.sourceBuffers||[])s=Ume(a,o,s);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={};for(const i in e){const r=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(r.value,r);n[o]=s}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const o of r)i.min.push(o),i.max.push(o);for(let o=n;o<e.length;o+=n)for(let s=0;s<n;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}}const Xme="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",qme="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Kme=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Jme=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),$H={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Zme={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function ak(){return ak=Ht(function*(t,e,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const s=yield function e1(){return lk.apply(this,arguments)}();!function t1(t,e,n,i,r,o,s){const a=t.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(o.length),h=new Uint8Array(t.exports.memory.buffer);h.set(o,d);const p=e(l,i,r,d,o.length);if(0===p&&s&&s(l,c,r),n.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==p)throw new Error("Malformed buffer data: ".concat(p))}(s,s.exports[Zme[r]],t,e,n,i,s.exports[$H[o||"NONE"]])}),ak.apply(this,arguments)}let ck;function lk(){return lk=Ht(function*(){return ck||(ck=function ege(){return dk.apply(this,arguments)}()),ck}),lk.apply(this,arguments)}function dk(){return dk=Ht(function*(){let t=Xme;WebAssembly.validate(Kme)&&(t=qme,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function tge(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?Jme[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),dk.apply(this,arguments)}const uk="EXT_meshopt_compression",nge=uk;function ige(t,e){return hk.apply(this,arguments)}function hk(){return hk=Ht(function*(t,e){var n;const i=new Qs(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const o of t.json.bufferViews||[])r.push(rge(i,o));yield Promise.all(r),i.removeExtension(uk)}),hk.apply(this,arguments)}function rge(t,e){return fk.apply(this,arguments)}function fk(){return fk=Ht(function*(t,e){const n=t.getObjectExtension(e,uk);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=n,d=t.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),p=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function Qme(t,e,n,i,r){return ak.apply(this,arguments)}(p,s,o,h,a,c),p}return null}),fk.apply(this,arguments)}const mk={};function sge(t){if(void 0===mk[t]){const e=NE?function age(t){switch(t){case"image/avif":case"image/webp":return function dge(t){try{return 0===document.createElement("canvas").toDataURL(t).indexOf("data:".concat(t))}catch{return!1}}(t);default:return!0}}(t):function XH(t){const e=["image/png","image/jpeg","image/gif"],{_parseImageNode:n,_imageFormatsNode:i=e}=globalThis;return!!n&&i.includes(t)}(t);mk[t]=e}return mk[t]}const eg="EXT_texture_webp",hge=eg;function fge(t,e){const n=new Qs(t);if(!sge("image/webp")){if(n.getRequiredExtensions().includes(eg))throw new Error("gltf: Required extension ".concat(eg," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const o=n.getObjectExtension(r,eg);o&&(r.source=o.source),n.removeObjectExtension(r,eg)}n.removeExtension(eg)}const n1="KHR_texture_basisu",pge=n1;function mge(t,e){const n=new Qs(t),{json:i}=n;for(const r of i.textures||[]){const o=n.getObjectExtension(r,n1);o&&(r.source=o.source),n.removeObjectExtension(r,n1)}n.removeExtension(n1)}const KH={name:"Draco",id:wl?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:"3.4.11",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class r1{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;ve(this,"name",void 0),ve(this,"type",void 0),ve(this,"nullable",void 0),ve(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new r1(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let JH,ZH,QH,e6,t6,n6,i6,r6,rr=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({});class vf{static isNull(e){return e&&e.typeId===rr.Null}static isInt(e){return e&&e.typeId===rr.Int}static isFloat(e){return e&&e.typeId===rr.Float}static isBinary(e){return e&&e.typeId===rr.Binary}static isUtf8(e){return e&&e.typeId===rr.Utf8}static isBool(e){return e&&e.typeId===rr.Bool}static isDecimal(e){return e&&e.typeId===rr.Decimal}static isDate(e){return e&&e.typeId===rr.Date}static isTime(e){return e&&e.typeId===rr.Time}static isTimestamp(e){return e&&e.typeId===rr.Timestamp}static isInterval(e){return e&&e.typeId===rr.Interval}static isList(e){return e&&e.typeId===rr.List}static isStruct(e){return e&&e.typeId===rr.Struct}static isUnion(e){return e&&e.typeId===rr.Union}static isFixedSizeBinary(e){return e&&e.typeId===rr.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===rr.FixedSizeList}static isMap(e){return e&&e.typeId===rr.Map}static isDictionary(e){return e&&e.typeId===rr.Dictionary}get typeId(){return rr.NONE}compareTo(e){return this===e}}Symbol,Symbol,JH=Symbol.toStringTag;class tg extends vf{constructor(e,n){super(),ve(this,"isSigned",void 0),ve(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return rr.Int}get[JH](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class gge extends tg{constructor(){super(!0,8)}}class _ge extends tg{constructor(){super(!0,16)}}class bge extends tg{constructor(){super(!0,32)}}class yge extends tg{constructor(){super(!1,8)}}class vge extends tg{constructor(){super(!1,16)}}class wge extends tg{constructor(){super(!1,32)}}ZH=Symbol.toStringTag;class o6 extends vf{constructor(e){super(),ve(this,"precision",void 0),this.precision=e}get typeId(){return rr.Float}get[ZH](){return"Float"}toString(){return"Float".concat(this.precision)}}class xge extends o6{constructor(){super(32)}}class Ege extends o6{constructor(){super(64)}}Symbol,Symbol,QH=Symbol.toStringTag,e6=Symbol.toStringTag,t6=Symbol.toStringTag,n6=Symbol.toStringTag,i6=Symbol.toStringTag;class Age extends vf{constructor(e,n){super(),ve(this,"listSize",void 0),ve(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return rr.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[i6](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}r6=Symbol.toStringTag;class ng{constructor(e,n){ve(this,"fields",void 0),ve(this,"metadata",void 0),function Mge(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function Ige(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(){const e=Object.create(null);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(const s of i)e[s]=!0;const o=this.fields.filter(s=>e[s.name]);return new ng(o,this.metadata)}selectAt(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.map(o=>this.fields[o]).filter(Boolean);return new ng(r,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof ng){const s=e;n=s.fields,i=a6(a6(new Map,this.metadata),s.metadata)}else n=e;const r=Object.create(null);for(const s of this.fields)r[s.name]=s;for(const s of n)r[s.name]=s;const o=Object.values(r);return new ng(o,i)}}function a6(t,e){return new Map([...t||new Map,...e||new Map])}function c6(t,e,n){return function s6(t,e,n){const i=function Sge(t){switch(t.constructor){case Int8Array:return new gge;case Uint8Array:return new yge;case Int16Array:return new _ge;case Uint16Array:return new vge;case Int32Array:return new bge;case Uint32Array:return new wge;case Float32Array:return new xge;case Float64Array:return new Ege;default:throw new Error("array type not supported")}}(e.value),r=n||function Tge(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new r1(t,new Age(e.size,new r1("value",i)),!1,r)}(t,e,n?l6(n.metadata):void 0)}function l6(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const d6={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},kge={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Pge{constructor(e){ve(this,"draco",void 0),ve(this,"decoder",void 0),ve(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(r){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){const p="DRACO decompression failed: ".concat(s.error_msg());throw new Error(p)}const a=this._getDracoLoaderData(o,r,n),c=this._getMeshData(o,a,n),l=hH(c.attributes),d=function Dge(t,e,n){const i=l6(e.metadata),r=[],o=function Rge(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const s in t){const c=c6(s,t[s],o[s]);r.push(c)}if(n){const s=c6("indices",n);r.push(s)}return new ng(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:o}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const o=this.decoder.GetAttribute(e,r),s=this._getAttributeMetadata(e,r);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:r,metadata:s};const a=this._getQuantizationTransform(o,n);a&&(i[o.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(o,n);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const o of Object.values(e.attributes)){const s=this._deduceAttributeName(o,i);o.name=s;const{value:a,size:c}=this._getAttributeValues(n,o);r[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,o=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function Lge(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=kge[n.data_type],r=n.num_components,s=e.num_points()*r,a=s*i.BYTES_PER_ELEMENT,c=function Nge(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[s,a]of Object.entries(n.extraAttributes||{}))if(a===i)return s;const r=e.attribute_type;for(const s in d6)if(this.draco[s]===r)return d6[s];const o=n.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const o=this.metadataQuerier.GetEntryName(e,r);n[o]=this._getDracoMetadataField(e,o)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function Fge(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const o of r)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}}const wk="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),Uge="".concat(wk,"/draco_decoder.js"),Vge="".concat(wk,"/draco_wasm_wrapper.js"),Hge="".concat(wk,"/draco_decoder.wasm");let zy;function xk(){return xk=Ht(function*(t){const e=t.modules||{};return zy=e.draco3d?zy||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):zy||function Wge(t){return Ak.apply(this,arguments)}(t),yield zy}),xk.apply(this,arguments)}function Ak(){return Ak=Ht(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield yf(Uge,"draco",t):[e,n]=yield Promise.all([yield yf(Vge,"draco",t),yield yf(Hge,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function $ge(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),Ak.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");const Ck={...KH,parse:function Xge(t,e){return Tk.apply(this,arguments)}};function Tk(){return Tk=Ht(function*(t,e){const{draco:n}=yield function Gge(t){return xk.apply(this,arguments)}(e),i=new Pge(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),Tk.apply(this,arguments)}function u6(t){const{buffer:e,size:n,count:i}=function Kge(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function Jge(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:GH(n),componentType:WH(e)}}const wf="KHR_draco_mesh_compression",Zge=wf;function Qge(t,e,n){const i=new Qs(t);for(const r of h6(i))i.getObjectExtension(r,wf)}function e_e(t,e,n){return Mk.apply(this,arguments)}function Mk(){return Mk=Ht(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new Qs(t),o=[];for(const s of h6(r))r.getObjectExtension(s,wf)&&o.push(n_e(r,s,e,n));yield Promise.all(o),r.removeExtension(wf)}),Mk.apply(this,arguments)}function t_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Qs(t);for(const i of n.json.meshes||[])i_e(i,e),n.addRequiredExtension(wf)}function n_e(t,e,n,i){return Ik.apply(this,arguments)}function Ik(){return Ik=Ht(function*(t,e,n,i){const r=t.getObjectExtension(e,wf);if(!r)return;const o=t.getTypedArrayForBufferView(r.bufferView),s=UV(o.buffer,o.byteOffset),{parse:a}=i,c={...n};delete c["3d-tiles"];const l=yield a(s,Ck,c,i),d=function qge(t){const e={};for(const n in t)if("indices"!==n){const r=u6(t[n]);e[n]=r}return e}(l.attributes);for(const[h,p]of Object.entries(d))if(h in e.attributes){const g=t.getAccessor(e.attributes[h]);null!=g&&g.min&&null!=g&&g.max&&(p.min=g.min,p.max=g.max)}e.attributes=d,l.indices&&(e.indices=u6(l.indices)),function r_e(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),Ik.apply(this,arguments)}function i_e(t,e){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=r.DracoWriter.encodeSync({attributes:t}),a=null==o||null===(n=o.parseSync)||void 0===n?void 0:n.call(o,{attributes:t}),c=r._addFauxAttributes(a.attributes),l=r.addBufferView(s);return{primitives:[{attributes:c,mode:i,extensions:{[wf]:{bufferView:l,attributes:c}}}]}}function*h6(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}var f6=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2",t}(f6||{});const o_e=Object.freeze([1,0,0,0,1,0,0,0,1]);class Ho extends X4{static get IDENTITY(){return function a_e(){return s1||(s1=new Ho,Object.freeze(s1)),s1}()}static get ZERO(){return function s_e(){return o1||(o1=new Ho([0,0,0,0,0,0,0,0,0]),Object.freeze(o1)),o1}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return f6}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(o_e)}fromObject(e){return this.check()}fromQuaternion(e){return function Ppe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,l=n*s,d=i*s,h=i*a,p=r*s,m=r*a,g=r*c,A=o*s,D=o*a,j=o*c;t[0]=1-h-g,t[3]=d-j,t[6]=p+D,t[1]=d+j,t[4]=1-l-g,t[7]=m-A,t[2]=p-D,t[5]=m+A,t[8]=1-l-h}(this,e),this.check()}set(e,n,i,r,o,s,a,c,l){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,n,i,r,o,s,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=l,this.check()}determinant(){return function Rpe(t){var r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8];return t[0]*(l*o-s*c)+t[1]*(-l*r+s*a)+t[2]*(c*r-o*a)}(this)}transpose(){return function Ipe(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function Dpe(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*s-a*l,p=-d*o+a*c,m=l*o-s*c,g=n*h+i*p+r*m;g&&(t[0]=h*(g=1/g),t[1]=(-d*i+r*l)*g,t[2]=(a*i-r*s)*g,t[3]=p*g,t[4]=(d*n-r*c)*g,t[5]=(-a*n+r*o)*g,t[6]=m*g,t[7]=(-l*n+i*c)*g,t[8]=(s*n-i*o)*g)}(this,this),this.check()}multiplyLeft(e){return gH(this,e,this),this.check()}multiplyRight(e){return gH(this,this,e),this.check()}rotate(e){return function Ope(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=Math.sin(n),m=Math.cos(n);t[0]=m*i+p*s,t[1]=m*r+p*a,t[2]=m*o+p*c,t[3]=m*s-p*i,t[4]=m*a-p*r,t[5]=m*c-p*o,t[6]=l,t[7]=d,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?_H(this,this,e):_H(this,this,[e,e]),this.check()}translate(e){return function kpe(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],p=n[0],m=n[1];t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=p*i+m*s+l,t[7]=p*r+m*a+d,t[8]=p*o+m*c+h}(this,this,e),this.check()}transform(e,n){let i;switch(e.length){case 2:i=function mce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:i=LU(n||[-0,-0,-0],e,this);break;case 4:i=UU(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return my(i,e.length),i}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let o1,s1;const p6={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},m6={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Dk="KHR_texture_transform",c_e=Dk,a1=new nn,l_e=new Ho,d_e=new Ho;function u_e(t,e){return Rk.apply(this,arguments)}function Rk(){return Rk=Ht(function*(t,e){if(!new Qs(t).getExtension(Dk))return;const r=t.json.materials||[];for(let o=0;o<r.length;o++)h_e(o,t)}),Rk.apply(this,arguments)}function h_e(t,e){var n,i,r;const o=[],s=null===(n=e.json.materials)||void 0===n?void 0:n[t],a=null==s||null===(i=s.pbrMetallicRoughness)||void 0===i?void 0:i.baseColorTexture;a&&Wy(e,t,a,o);const c=s?.emissiveTexture;c&&Wy(e,t,c,o);const l=s?.normalTexture;l&&Wy(e,t,l,o);const d=s?.occlusionTexture;d&&Wy(e,t,d,o);const h=null==s||null===(r=s.pbrMetallicRoughness)||void 0===r?void 0:r.metallicRoughnessTexture;h&&Wy(e,t,h,o)}function Wy(t,e,n,i){const r=function f_e(t,e){var n;const i=null===(n=t.extensions)||void 0===n?void 0:n[Dk],{texCoord:r=0}=t,{texCoord:o=r}=i;if(-1===e.findIndex(a=>{let[c,l]=a;return c===r&&l===o})){const a=function __e(t){const{offset:e=[0,0],rotation:n=0,scale:i=[1,1]}=t,r=(new Ho).set(1,0,0,0,1,0,e[0],e[1],1),o=l_e.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),s=d_e.set(i[0],0,0,0,i[1],0,0,0,1);return r.multiplyRight(o).multiplyRight(s)}(i);return r!==o&&(t.texCoord=o),e.push([r,o]),{originalTexCoord:r,texCoord:o,matrix:a}}return null}(n,i);if(!r)return;const o=t.json.meshes||[];for(const s of o)for(const a of s.primitives){const c=a.material;Number.isFinite(c)&&e===c&&p_e(t,a,r)}}function p_e(t,e,n){const{originalTexCoord:i,texCoord:r,matrix:o}=n,s=e.attributes["TEXCOORD_".concat(i)];if(Number.isFinite(s)){var a;const l=null===(a=t.json.accessors)||void 0===a?void 0:a[s];if(l&&l.bufferView){var c;const d=null===(c=t.json.bufferViews)||void 0===c?void 0:c[l.bufferView];if(d){const{arrayBuffer:h,byteOffset:p}=t.buffers[d.buffer],m=(p||0)+(l.byteOffset||0)+(d.byteOffset||0),{ArrayType:g,length:A}=ik(l,d),j=p6[l.type],k=d.byteStride||m6[l.componentType]*j,ue=new Float32Array(A);for(let we=0;we<l.count;we++){const Be=new g(h,m+we*k,2);a1.set(Be[0],Be[1],1),a1.transformByMatrix3(o),ue.set([a1[0],a1[1]],we*j)}i===r?function m_e(t,e,n,i){t.componentType=5126,n.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=i.buffer.byteLength,e.byteOffset=0,delete e.byteStride}(l,d,t.buffers,ue):function g_e(t,e,n,i,r){i.buffers.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength});const o=i.json.bufferViews;if(!o)return;o.push({buffer:i.buffers.length-1,byteLength:r.buffer.byteLength,byteOffset:0});const s=i.json.accessors;s&&(s.push({bufferView:o?.length-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes["TEXCOORD_".concat(t)]=s.length-1)}(r,l,e,t,ue)}}}}const xf="KHR_lights_punctual",b_e=xf;function y_e(t){return kk.apply(this,arguments)}function kk(){return kk=Ht(function*(t){const e=new Qs(t),{json:n}=e,i=e.getExtension(xf);i&&(e.json.lights=i.lights,e.removeExtension(xf));for(const r of n.nodes||[]){const o=e.getObjectExtension(r,xf);o&&(r.light=o.light),e.removeObjectExtension(r,xf)}}),kk.apply(this,arguments)}function v_e(t){return Ok.apply(this,arguments)}function Ok(){return Ok=Ht(function*(t){const e=new Qs(t),{json:n}=e;if(n.lights){const i=e.addExtension(xf);Ea(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,xf,i);delete e.json.lights}}),Ok.apply(this,arguments)}const $y="KHR_materials_unlit",w_e=$y;function x_e(t){return Pk.apply(this,arguments)}function Pk(){return Pk=Ht(function*(t){const e=new Qs(t),{json:n}=e;for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,$y);e.removeExtension($y)}),Pk.apply(this,arguments)}function E_e(t){const e=new Qs(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,$y,{}),e.addExtension($y))}const Yy="KHR_techniques_webgl",A_e=Yy;function S_e(t){return Nk.apply(this,arguments)}function Nk(){return Nk=Ht(function*(t){const e=new Qs(t),{json:n}=e,i=e.getExtension(Yy);if(i){const r=function T_e(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,o=new TextDecoder;return i.forEach(s=>{if(!Number.isFinite(s.bufferView))throw new Error("KHR_techniques_webgl: no shader code");s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView))}),n.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),r.forEach(s=>{s.program=n[s.program]}),r}(i,e);for(const o of n.materials||[]){const s=e.getObjectExtension(o,Yy);s&&(o.technique=Object.assign({},s,r[s.technique]),o.technique.values=M_e(o.technique,e)),e.removeObjectExtension(o,Yy)}e.removeExtension(Yy)}}),Nk.apply(this,arguments)}function C_e(t,e){return Fk.apply(this,arguments)}function Fk(){return(Fk=Ht(function*(t,e){})).apply(this,arguments)}function M_e(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const g6="EXT_feature_metadata",I_e=g6;function D_e(t){return Lk.apply(this,arguments)}function Lk(){return Lk=Ht(function*(t){!function R_e(t){var e;const n=t.getExtension(g6),i=null==n||null===(e=n.schema)||void 0===e?void 0:e.classes,r=n?.featureTables;if(n?.featureTextures&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),i&&r)for(const s in i){const a=i[s],c=P_e(r,s);c&&k_e(t,c,a)}}(new Qs(t))}),Lk.apply(this,arguments)}function k_e(t,e,n){for(const r in n.properties){var i;const s=null==e||null===(i=e.properties)||void 0===i?void 0:i[r];if(s){const c=O_e(t,n.properties[r],e.count,s);s.data=c}}}function O_e(t,e,n,i){let o=t.getTypedArrayForBufferView(i.bufferView);if("STRING"===e.type)o=function N_e(t,e,n){const i=[],r=new TextDecoder("utf8");let o=0;for(let a=0;a<n;a++){const c=e[4*(a+1)]-e[4*a],l=t.subarray(o,c+o),d=r.decode(l);i.push(d),o+=c}return i}(o,t.getTypedArrayForBufferView(i.stringOffsetBufferView),n);return o}function P_e(t,e){for(const n in t){const i=t[n];if(i.class===e)return i}return null}const _6=[J,S,te,U,_,x,F,ee,W];function Bk(){return Bk=Ht(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=_6.filter(o=>b6(o.name,e));for(const o of i){var r;yield null===(r=o.decode)||void 0===r?void 0:r.call(o,t,e,n)}}),Bk.apply(this,arguments)}function b6(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const jk="KHR_binary_glTF",y6={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},j_e={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class U_e{constructor(){ve(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),ve(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function B_e(t){const e=new Qs(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,jk);r&&Object.assign(i,r),e.removeObjectExtension(i,jk)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(jk)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in y6)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const o=i[r];o.id=o.id||r;const s=e[n].length;e[n].push(o),this.idToIndexMap[n][r]=s}}}_convertObjectIdsToArrayIndices(e){for(const n in y6)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:o}=n;for(const s in i)i[s]=this._convertIdToIndex(i[s],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const s=this._convertIdToIndex(i[r],r);i[r]=s}}_convertIdToIndex(e,n){const i=j_e[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const o of e.materials){var n,i,r;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(n=o.values)||void 0===n?void 0:n.tex)||(null===(i=o.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=o.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===s);-1!==a&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}}const H_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},z_e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},G_e={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},W_e={10240:9729,10241:9986,10242:10497,10243:10497};class X_e{constructor(){ve(this,"baseUri",""),ve(this,"json",{}),ve(this,"buffers",[]),ve(this,"images",[])}postProcess(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{json:i,buffers:r=[],images:o=[],baseUri:s=""}=e;return Ea(i),this.baseUri=s,this.json=i,this.buffers=r,this.images=o,this._resolveTree(this.json,n),this.json}_resolveTree(e){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const o=this.getMesh(r);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const o in r)i.attributes[o]=this.getAccessor(r[o]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function $_e(t){return z_e[t]}(e.componentType),e.components=function Y_e(t){return H_e[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:o}=ik(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,o){const s=new Uint8Array(o*r);for(let a=0;a<o;a++){const c=n+a*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return s.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):W_e,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return G_e[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const v6=1735152710,Uk=12,c1=8,K_e=1313821514,J_e=5130562,Z_e=0,Q_e=1,ebe=0,ig=!0;function Vk(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),s=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(s),Hy(i,4)}function Hk(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),Hy(i,4)}function zk(){return zk=Ht(function*(t,e){var n,i,r,o;let a=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;(function cbe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function nbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new DataView(t),{magic:r=v6}=n,o=i.getUint32(e,!1);return o===r||o===v6}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function jme(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function Bme(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?UH(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?UH(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const s={};n=function ibe(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=new DataView(e),o=function tbe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),s=r.getUint32(n+4,ig),a=r.getUint32(n+8,ig);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),n+=Uk,t.version){case 1:return function rbe(t,e,n){pd(t.header.byteLength>Uk+c1);const i=e.getUint32(n+0,ig),r=e.getUint32(n+4,ig);return n+=c1,pd(r===ebe),Vk(t,e,n,i),(n+=i)+Hk(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function obe(t,e,n,i){return pd(t.header.byteLength>Uk+c1),function sbe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,ig),o=e.getUint32(n+4,ig);switch(n+=c1,o){case K_e:Vk(t,e,n,r);break;case J_e:Hk(t,e,n,r);break;case Z_e:i.strict||Vk(t,e,n,r);break;case Q_e:i.strict||Hk(t,e,n,r)}n+=Hy(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,i={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(s,e,n,i.glb),Ea("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),t._glb=s,t.json=s.json}else Ea(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:s}=t._glb;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a),function V_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(new U_e).normalize(t,e)}(t,{normalize:null==a||null===(n=a.gltf)||void 0===n?void 0:n.normalize}),function F_e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=_6.filter(o=>b6(o.name,e));for(const o of i){var r;null===(r=o.preprocess)||void 0===r||r.call(o,t,e,n)}}(t,a,c);const l=[];if(null!=a&&null!==(i=a.gltf)&&void 0!==i&&i.loadBuffers&&t.json.buffers&&(yield function lbe(t,e,n){return Gk.apply(this,arguments)}(t,a,c)),null!=a&&null!==(r=a.gltf)&&void 0!==r&&r.loadImages){const h=function dbe(t,e,n){return Wk.apply(this,arguments)}(t,a,c);l.push(h)}const d=function L_e(t){return Bk.apply(this,arguments)}(t,a,c);return l.push(d),yield Promise.all(l),null!=a&&null!==(o=a.gltf)&&void 0!==o&&o.postProcess?function q_e(t,e){return(new X_e).postProcess(t,e)}(t,a):t}),zk.apply(this,arguments)}function Gk(){return Gk=Ht(function*(t,e,n){const i=t.json.buffers||[];for(let s=0;s<i.length;++s){const a=i[s];if(a.uri){var r,o;const{fetch:c}=n;Ea(c);const l=VH(a.uri,e),d=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,l),h=yield null==d||null===(o=d.arrayBuffer)||void 0===o?void 0:o.call(d);t.buffers[s]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[s]&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),Gk.apply(this,arguments)}function Wk(){return Wk=Ht(function*(t,e,n){const i=function ube(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],o=[];for(const s of i)o.push(hbe(t,r[s],s,e,n));return yield Promise.all(o)}),Wk.apply(this,arguments)}function hbe(t,e,n,i,r){return $k.apply(this,arguments)}function $k(){return $k=Ht(function*(t,e,n,i,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=VH(e.uri,i);a=yield(yield o(l)).arrayBuffer(),e.bufferView={data:a}}if(Number.isFinite(e.bufferView)){const l=function HH(t,e,n){const i=t.bufferViews[n];Ea(i);const o=e[i.buffer];return Ea(o),new Uint8Array(o.arrayBuffer,(i.byteOffset||0)+o.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=UV(l.buffer,l.byteOffset,l.byteLength)}Ea(a,"glTF image has no data");let c=yield s(a,[x8,Lme],{mimeType:e.mimeType,basis:i.basis||{format:jH()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}),$k.apply(this,arguments)}const rg={name:"glTF",id:"gltf",module:"gltf",version:"3.4.11",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function fbe(t){return Yk.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function Yk(){return Yk=Ht(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;e={...rg.options,...e},e.gltf={...rg.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function abe(t,e){return zk.apply(this,arguments)}({},t,i,e,n)}),Yk.apply(this,arguments)}function Xk(){return Xk=Ht(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function mbe(t){return qk.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),Xk.apply(this,arguments)}function qk(){return qk=Ht(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),qk.apply(this,arguments)}const w6=[255,255,255,255],bbe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:w6},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[rg]};class Kk extends gf{constructor(...e){super(...e),ve(this,"state",void 0)}getShaders(){const e=[GE,WE];return"pbr"===this.props._lighting&&e.push(mH),super.getShaders({vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    geometry.normal = project_normal(normal);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:w6,transition:!0},instanceModelMatrix:dH})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof Zm)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function pme(t,e,n){const i=new fme(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...c},function pbe(t){return Xk.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(mi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},o=e.getScene(i,r),s=e.getAnimator(i,r);o instanceof Zm?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&mi.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(o=>{const s=i[o];if("*"===o)r.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){const a=Number(o);a>=0&&a<r.length?Object.assign(r[a],s):mi.warn("animation ".concat(o," not found"))()}else{const a=r.find(({name:c})=>c===o);a?Object.assign(a,s):mi.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Zm&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!ui(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:p})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:uH(r,l),sceneModelMatrix:p,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}ve(Kk,"defaultProps",bbe),ve(Kk,"layerName","ScenegraphLayer");class ybe extends Vu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("sphere-geometry")}=e,{indices:i,attributes:r}=function vbe(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const s=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(n+1);if("number"==typeof i){const j=i;i=(k,ue,we,Be,We)=>j}const h=new Float32Array(3*d),p=new Float32Array(3*d),m=new Float32Array(2*d),A=new(d>65535?Uint32Array:Uint16Array)(e*n*6);for(let j=0;j<=e;j++)for(let k=0;k<=n;k++){const ue=k/n,we=j/e,Be=k+j*(n+1),We=2*Be,Ke=3*Be,ut=l*ue,ft=s*we,bt=Math.sin(ut),vt=Math.cos(ut),Ft=Math.sin(ft),wt=vt*Ft,Bt=Math.cos(ft),Lt=bt*Ft,En=i(wt,Bt,Lt,ue,we);h[Ke+0]=En*wt,h[Ke+1]=En*Bt,h[Ke+2]=En*Lt,p[Ke+0]=wt,p[Ke+1]=Bt,p[Ke+2]=Lt,m[We+0]=ue,m[We+1]=1-we}const D=n+1;for(let j=0;j<n;j++)for(let k=0;k<e;k++){const ue=6*(j*e+k);A[ue+0]=k*D+j,A[ue+1]=k*D+j+1,A[ue+2]=(k+1)*D+j,A[ue+3]=(k+1)*D+j,A[ue+4]=k*D+j+1,A[ue+5]=(k+1)*D+j+1}return{indices:{size:1,value:A},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:p},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const wbe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class x6 extends Vu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("truncated-code-geometry")}=e,{indices:i,attributes:r}=function xbe(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),d=(r+1)*(o+1+l),h=Math.atan2(e-n,i),p=Math.sin,m=Math.cos,g=Math.PI,A=m(h),D=p(h),j=a?-2:0,k=o+(c?2:0),ue=r+1,we=new Uint16Array(r*(o+l)*6),Be=wbe[s],We=new Float32Array(3*d),Ke=new Float32Array(3*d),ut=new Float32Array(2*d);let ft=0,bt=0;for(let vt=j;vt<=k;vt++){let wt,Ft=vt/o,ht=i*Ft;vt<0?(ht=0,Ft=1,wt=e):vt>o?(ht=i,Ft=1,wt=n):wt=e+vt/o*(n-e),(-2===vt||vt===o+2)&&(wt=0,Ft=0),ht-=i/2;for(let Bt=0;Bt<ue;Bt++){const Lt=p(Bt*g*2/r),En=m(Bt*g*2/r);We[ft+Be[0]]=Lt*wt,We[ft+Be[1]]=ht,We[ft+Be[2]]=En*wt,Ke[ft+Be[0]]=vt<0||vt>o?0:Lt*A,Ke[ft+Be[1]]=vt<0?-1:vt>o?1:D,Ke[ft+Be[2]]=vt<0||vt>o?0:En*A,ut[bt+0]=Bt/r,ut[bt+1]=Ft,bt+=2,ft+=3}}for(let vt=0;vt<o+l;vt++)for(let Ft=0;Ft<r;Ft++){const ht=6*(vt*r+Ft);we[ht+0]=ue*(vt+0)+0+Ft,we[ht+1]=ue*(vt+0)+1+Ft,we[ht+2]=ue*(vt+1)+1+Ft,we[ht+3]=ue*(vt+0)+0+Ft,we[ht+4]=ue*(vt+1)+1+Ft,we[ht+5]=ue*(vt+1)+0+Ft}return{indices:we,attributes:{POSITION:{size:3,value:We},NORMAL:{size:3,value:Ke},TEXCOORD_0:{size:2,value:ut}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class Ebe extends x6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class Abe extends x6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const Sbe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Cbe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Tbe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Mbe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Ibe={POSITION:{size:3,value:new Float32Array(Cbe)},NORMAL:{size:3,value:new Float32Array(Tbe)},TEXCOORD_0:{size:2,value:new Float32Array(Mbe)}};class Dbe extends Vu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=Ks("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(Sbe)},attributes:{...Ibe,...e.attributes}})}}class Dc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new be);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new be);const i=this.elements,r=e.x,o=e.y,s=e.z;return n.x=i[0]*r+i[1]*o+i[2]*s,n.y=i[3]*r+i[4]*o+i[5]*s,n.z=i[6]*r+i[7]*o+i[8]*s,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new Dc);const i=this.elements,r=e.elements,o=n.elements,s=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],p=i[6],m=i[7],g=i[8],A=r[0],D=r[1],j=r[2],k=r[3],ue=r[4],we=r[5],Be=r[6],We=r[7],Ke=r[8];return o[0]=s*A+a*k+c*Be,o[1]=s*D+a*ue+c*We,o[2]=s*j+a*we+c*Ke,o[3]=l*A+d*k+h*Be,o[4]=l*D+d*ue+h*We,o[5]=l*j+d*we+h*Ke,o[6]=p*A+m*k+g*Be,o[7]=p*D+m*ue+g*We,o[8]=p*j+m*we+g*Ke,n}scale(e,n){void 0===n&&(n=new Dc);const i=this.elements,r=n.elements;for(let o=0;3!==o;o++)r[3*o+0]=e.x*i[3*o+0],r[3*o+1]=e.y*i[3*o+1],r[3*o+2]=e.z*i[3*o+2];return n}solve(e,n){void 0===n&&(n=new be);const o=[];let s,a;for(s=0;s<12;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+4*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3;const l=c;let d,p;do{if(s=l-c,0===o[s+4*s])for(a=s+1;a<l;a++)if(0!==o[s+4*a]){d=4;do{p=4-d,o[p+4*s]+=o[p+4*a]}while(--d);break}if(0!==o[s+4*s])for(a=s+1;a<l;a++){const m=o[s+4*a]/o[s+4*s];d=4;do{p=4-d,o[p+4*a]=p<=s?0:o[p+4*a]-o[p+4*s]*m}while(--d)}}while(--c);if(n.z=o[11]/o[10],n.y=(o[7]-o[6]*n.z)/o[5],n.x=(o[3]-o[2]*n.z-o[1]*n.y)/o[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Dc);const r=Rbe;let o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)r[o+6*s]=this.elements[o+3*s];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(o=c-a,0===r[o+6*o])for(s=o+1;s<c;s++)if(0!==r[o+6*s]){l=6;do{h=6-l,r[h+6*o]+=r[h+6*s]}while(--l);break}if(0!==r[o+6*o])for(s=o+1;s<c;s++){const p=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=h<=o?0:r[h+6*s]-r[h+6*o]*p}while(--l)}}while(--a);o=2;do{s=o-1;do{const p=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]-r[h+6*o]*p}while(--l)}while(s--)}while(--o);o=2;do{const p=1/r[o+6*o];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]*p}while(--l)}while(o--);o=2;do{s=2;do{if(h=r[3+s+6*o],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,h)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,o=e.w,s=n+n,a=i+i,c=r+r,l=n*s,d=n*a,h=n*c,p=i*a,m=i*c,g=r*c,A=o*s,D=o*a,j=o*c,k=this.elements;return k[0]=1-(p+g),k[1]=d-j,k[2]=h+D,k[3]=d+j,k[4]=1-(l+g),k[5]=m-A,k[6]=h-D,k[7]=m+A,k[8]=1-(l+p),this}transpose(e){void 0===e&&(e=new Dc);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const Rbe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class be{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new be);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return n.x=a*o-c*r,n.y=c*i-s*o,n.z=s*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new be(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new be(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new Dc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const o=1/r;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new be);const n=this.x,i=this.y,r=this.z;let o=Math.sqrt(n*n+i*i+r*r);return o>0?(o=1/o,e.x=n*o,e.y=i*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-n)*(o-n)+(s-i)*(s-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return(o-n)*(o-n)+(s-i)*(s-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new be);const r=this.y,o=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*o,n}vmul(e,n){return void 0===n&&(n=new be),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new be),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new be),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=kbe,o=1/i;r.set(this.x*o,this.y*o,this.z*o);const s=Obe;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,o=this.y,s=this.z;i.x=r+(e.x-r)*n,i.y=o+(e.y-o)*n,i.z=s+(e.z-s)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(E6),E6.almostEquals(e,n)}clone(){return new be(this.x,this.y,this.z)}}be.ZERO=new be(0,0,0),be.UNIT_X=new be(1,0,0),be.UNIT_Y=new be(0,1,0),be.UNIT_Z=new be(0,0,1);const kbe=new be,Obe=new be,E6=new be;class $i{constructor(e){void 0===e&&(e={}),this.lowerBound=new be,this.upperBound=new be,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const o=this.lowerBound,s=this.upperBound,a=i;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,A6),l=A6),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return n&&(n.vadd(o,o),n.vadd(s,s)),r&&(o.x-=r,o.y-=r,o.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new $i).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return(r.x<=i.x&&i.x<=o.x||n.x<=o.x&&o.x<=i.x)&&(r.y<=i.y&&i.y<=o.y||n.y<=o.y&&o.y<=i.y)&&(r.z<=i.z&&i.z<=o.z||n.z<=o.z&&o.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return n.x<=r.x&&i.x>=o.x&&n.y<=r.y&&i.y>=o.y&&n.z<=r.z&&i.z>=o.z}getCorners(e,n,i,r,o,s,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),n.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),o.set(d.x,l.y,d.z),s.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,n){const i=S6;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const m=i[p];e.pointToLocal(m,m)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=S6;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const m=i[p];e.pointToWorld(m,m)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,o=1/n.y,s=1/n.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*o,d=(this.upperBound.y-i.y)*o,h=(this.lowerBound.z-i.z)*s,p=(this.upperBound.z-i.z)*s,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,p)),g=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,p));return!(g<0||m>g)}}const A6=new be,S6=[new be,new be,new be,new be,new be,new be,new be,new be];class Pbe{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}return this}}class Nr{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new be),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=Nbe;e.tangents(i,Fbe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Nr);const i=this.x,r=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return n.x=i*d+s*a+r*l-o*c,n.y=r*d+s*c+o*a-i*l,n.z=o*d+s*l+i*c-r*a,n.w=s*d-i*a-r*c-o*l,n}inverse(e){void 0===e&&(e=new Nr);const n=this.x,i=this.y,r=this.z,o=this.w;this.conjugate(e);const s=1/(n*n+i*i+r*r+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new Nr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new be);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*o-c*r,h=l*r+c*i-s*o,p=l*o+s*r-a*i,m=-s*i-a*r-c*o;return n.x=d*l+m*-s+h*-c-p*-a,n.y=h*l+m*-a+p*-s-d*-c,n.z=p*l+m*-c+d*-a-h*-s,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,o;void 0===n&&(n="YZX");const s=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const d=s*a+c*l;if(d>.499&&(i=2*Math.atan2(s,l),r=Math.PI/2,o=0),d<-.499&&(i=-2*Math.atan2(s,l),r=-Math.PI/2,o=0),void 0===i){const h=s*s,m=c*c;i=Math.atan2(2*a*l-2*s*c,1-a*a*2-2*m),r=Math.asin(2*d),o=Math.atan2(2*s*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=o}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const o=Math.cos(e/2),s=Math.cos(n/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(n/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"YXZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"ZXY"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"ZYX"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"YZX"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a-c*l*d):"XZY"===r&&(this.x=c*s*a-o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a+c*l*d),this}clone(){return new Nr(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Nr);const r=this.x,o=this.y,s=this.z,a=this.w;let p,m,g,A,D,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+o*l+s*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(p=Math.acos(m),g=Math.sin(p),A=Math.sin((1-n)*p)/g,D=Math.sin(n*p)/g):(A=1-n,D=n),i.x=A*r+D*c,i.y=A*o+D*l,i.z=A*s+D*d,i.w=A*a+D*h,i}integrate(e,n,i,r){void 0===r&&(r=new Nr);const o=e.x*i.x,s=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,p=.5*n;return r.x+=p*(o*h+s*d-a*l),r.y+=p*(s*h+a*c-o*d),r.z+=p*(a*h+o*l-s*c),r.w+=p*(-o*c-s*l-a*d),r}}const Nbe=new be,Fbe=new be,Lbe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let un=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=Lbe,t})();class Ai{constructor(e){void 0===e&&(e={}),this.position=new be,this.quaternion=new Nr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Ai.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Ai.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new be),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new be),i.vsub(e,r),n.conjugate(T6),T6.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new be),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new be),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new be),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const T6=new Nr;class Ef extends un{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:o,boundingSphereRadius:s}=e;super({type:un.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new be;for(let o=0;o!==e.length;o++){const s=e[o],a=s.length;for(let c=0;c!==a;c++){n[s[c]].vsub(n[s[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new be;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];Ef.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const o=new be,s=new be;n.vsub(e,s),i.vsub(n,o),o.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,o,s,a,c,l){const d=new be;let h=-1,p=-Number.MAX_VALUE;for(let g=0;g<i.faces.length;g++){d.copy(i.faceNormals[g]),o.vmult(d,d);const A=d.dot(s);A>p&&(p=A,h=g)}const m=[];for(let g=0;g<i.faces[h].length;g++){const A=i.vertices[i.faces[h][g]],D=new be;D.copy(A),o.vmult(D,D),r.vadd(D,D),m.push(D)}h>=0&&this.clipFaceAgainstHull(s,e,n,m,a,c,l)}findSeparatingAxis(e,n,i,r,o,s,a,c){const l=new be,d=new be,h=new be,p=new be,m=new be,g=new be;let A=Number.MAX_VALUE;const D=this;if(D.uniqueAxes)for(let j=0;j!==D.uniqueAxes.length;j++){i.vmult(D.uniqueAxes[j],l);const k=D.testSepAxis(l,e,n,i,r,o);if(!1===k)return!1;k<A&&(A=k,s.copy(l))}else{const j=a?a.length:D.faces.length;for(let k=0;k<j;k++){l.copy(D.faceNormals[a?a[k]:k]),i.vmult(l,l);const we=D.testSepAxis(l,e,n,i,r,o);if(!1===we)return!1;we<A&&(A=we,s.copy(l))}}if(e.uniqueAxes)for(let j=0;j!==e.uniqueAxes.length;j++){o.vmult(e.uniqueAxes[j],d);const k=D.testSepAxis(d,e,n,i,r,o);if(!1===k)return!1;k<A&&(A=k,s.copy(d))}else{const j=c?c.length:e.faces.length;for(let k=0;k<j;k++){d.copy(e.faceNormals[c?c[k]:k]),o.vmult(d,d);const we=D.testSepAxis(d,e,n,i,r,o);if(!1===we)return!1;we<A&&(A=we,s.copy(d))}}for(let j=0;j!==D.uniqueEdges.length;j++){i.vmult(D.uniqueEdges[j],p);for(let k=0;k!==e.uniqueEdges.length;k++)if(o.vmult(e.uniqueEdges[k],m),p.cross(m,g),!g.almostZero()){g.normalize();const ue=D.testSepAxis(g,e,n,i,r,o);if(!1===ue)return!1;ue<A&&(A=ue,s.copy(g))}}return r.vsub(n,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,n,i,r,o,s){Ef.project(this,e,i,r,Jk),Ef.project(n,e,o,s,Zk);const c=Jk[0],l=Jk[1],d=Zk[0],h=Zk[1];if(c<h||d<l)return!1;const p=c-h,m=d-l;return p<m?p:m}calculateLocalInertia(e,n){const i=new be,r=new be;this.computeLocalAABB(r,i);const o=i.x-r.x,s=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*s*2*s+2*a*2*a),n.y=1/12*e*(2*o*2*o+2*a*2*a),n.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,o,s,a){const c=new be,l=new be,d=new be,h=new be,p=new be,m=new be,g=new be,A=new be,D=this,k=r,ue=[];let we=-1,Be=Number.MAX_VALUE;for(let bt=0;bt<D.faces.length;bt++){c.copy(D.faceNormals[bt]),i.vmult(c,c);const vt=c.dot(e);vt<Be&&(Be=vt,we=bt)}if(we<0)return;const We=D.faces[we];We.connectedFaces=[];for(let bt=0;bt<D.faces.length;bt++)for(let vt=0;vt<D.faces[bt].length;vt++)-1!==We.indexOf(D.faces[bt][vt])&&bt!==we&&-1===We.connectedFaces.indexOf(bt)&&We.connectedFaces.push(bt);const Ke=We.length;for(let bt=0;bt<Ke;bt++){const vt=D.vertices[We[bt]];vt.vsub(D.vertices[We[(bt+1)%Ke]],l),d.copy(l),i.vmult(d,d),n.vadd(d,d),h.copy(this.faceNormals[we]),i.vmult(h,h),n.vadd(h,h),d.cross(h,p),p.negate(p),m.copy(vt),i.vmult(m,m),n.vadd(m,m);const ht=We.connectedFaces[bt];g.copy(this.faceNormals[ht]);const wt=this.getPlaneConstantOfFace(ht);A.copy(g),i.vmult(A,A);const Bt=wt-A.dot(n);for(this.clipFaceAgainstPlane(k,ue,A,Bt);k.length;)k.shift();for(;ue.length;)k.push(ue.shift())}g.copy(this.faceNormals[we]);const ut=this.getPlaneConstantOfFace(we);A.copy(g),i.vmult(A,A);const ft=ut-A.dot(n);for(let bt=0;bt<k.length;bt++){let vt=A.dot(k[bt])+ft;vt<=o&&(console.log(`clamped: depth=${vt} to minDist=${o}`),vt=o),vt<=s&&vt<=1e-6&&a.push({point:k[bt],normal:A,depth:vt})}}clipFaceAgainstPlane(e,n,i,r){let o,s;const a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];o=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],s=i.dot(l)+r,o<0)if(s<0){const h=new be;h.copy(l),n.push(h)}else{const h=new be;c.lerp(l,o/(o-s),h),n.push(h)}else if(s<0){const h=new be;c.lerp(l,o/(o-s),h),n.push(h),n.push(l)}c=l,o=s}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new be);const i=this.vertices,r=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)n.vmult(i[o],r[o]),e.vadd(r[o],r[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const o=i[r];o.x<e.x?e.x=o.x:o.x>n.x&&(n.x=o.x),o.y<e.y?e.y=o.y:o.y>n.y&&(n.y=o.y),o.z<e.z?e.z=o.z:o.z>n.z&&(n.z=o.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new be);const i=this.faceNormals,r=this.worldFaceNormals;for(let o=0;o!==n;o++)e.vmult(i[o],r[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const o=this.vertices;let s,a,c,l,d,h,p=new be;for(let m=0;m<o.length;m++)p.copy(o[m]),n.vmult(p,p),e.vadd(p,p),(void 0===s||p.x<s)&&(s=p.x),(void 0===l||p.x>l)&&(l=p.x),(void 0===a||p.y<a)&&(a=p.y),(void 0===d||p.y>d)&&(d=p.y),(void 0===c||p.z<c)&&(c=p.z),(void 0===h||p.z>h)&&(h=p.z);i.set(s,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new be);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let o=0;o<i;o++){const s=r[o];n.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){const s=this.faceNormals[o];n.vmult(s,s)}}if(e)for(let o=0;o<i;o++){const s=r[o];s.vadd(e,s)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,s=new be;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=n[i[a][0]],d=new be;e.vsub(l,d);const h=c.dot(d),p=new be;s.vsub(l,p);const m=c.dot(p);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,n,i,r,o){const s=e.vertices.length,a=jbe;let c=0,l=0;const d=Ube,h=e.vertices;d.setZero(),Ai.vectorToLocalFrame(i,r,n,a),Ai.pointToLocalFrame(i,r,d,d);const p=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<s;m++){const g=h[m].dot(a);g>c&&(c=g),g<l&&(l=g)}if(l-=p,c-=p,l>c){const m=l;l=c,c=m}o[0]=c,o[1]=l}}const Jk=[],Zk=[],jbe=(new be,new be),Ube=new be;class l1 extends un{constructor(e){super({type:un.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=be,o=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new Ef({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new be),l1.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let o=0;o!==i.length;o++)n.vmult(i[o],i[o]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,o=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let s=0;s<o.length;s++)zu.set(o[s][0],o[s][1],o[s][2]),n.vmult(zu,zu),e.vadd(zu,zu),i(zu.x,zu.y,zu.z)}calculateWorldAABB(e,n,i,r){const o=this.halfExtents;Sl[0].set(o.x,o.y,o.z),Sl[1].set(-o.x,o.y,o.z),Sl[2].set(-o.x,-o.y,o.z),Sl[3].set(-o.x,-o.y,-o.z),Sl[4].set(o.x,-o.y,-o.z),Sl[5].set(o.x,o.y,-o.z),Sl[6].set(-o.x,o.y,-o.z),Sl[7].set(o.x,-o.y,o.z);const s=Sl[0];n.vmult(s,s),e.vadd(s,s),r.copy(s),i.copy(s);for(let a=1;a<8;a++){const c=Sl[a];n.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const zu=new be,Sl=[new be,new be,new be,new be,new be,new be,new be,new be];class hn extends Pbe{constructor(e){void 0===e&&(e={}),super(),this.id=hn.idCounter++,this.index=-1,this.world=null,this.vlambda=new be,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new be,this.previousPosition=new be,this.interpolatedPosition=new be,this.initPosition=new be,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new be,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new be,this.force=new be;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?hn.STATIC:hn.DYNAMIC,typeof e.type==typeof hn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=hn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new be,this.quaternion=new Nr,this.initQuaternion=new Nr,this.previousQuaternion=new Nr,this.interpolatedQuaternion=new Nr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new be,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new be,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new be,this.invInertia=new be,this.invInertiaWorld=new Dc,this.invMassSolve=0,this.invInertiaSolve=new be,this.invInertiaWorldSolve=new Dc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new be(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new be(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new $i,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new be,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=hn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===hn.SLEEPING&&this.dispatchEvent(hn.wakeupEvent)}sleep(){this.sleepState=hn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===hn.AWAKE&&i<r?(this.sleepState=hn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(hn.sleepyEvent)):n===hn.SLEEPY&&i>r?this.wakeUp():n===hn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(hn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===hn.SLEEPING||this.type===hn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new be),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new be),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new be),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new be),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new be,o=new Nr;return n&&r.copy(n),i&&o.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let o=0;o!==i;o++){const s=e[o];s.updateBoundingSphereRadius();const a=n[o].length(),c=s.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,o=Vbe,s=Hbe,a=this.quaternion,c=this.aabb,l=zbe;for(let d=0;d!==r;d++){const h=e[d];a.vmult(n[d],o),o.vadd(this.position,o),a.mult(i[d],s),h.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=Gbe,r=Wbe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new be),this.type!==hn.DYNAMIC)return;this.sleepState===hn.SLEEPING&&this.wakeUp();const i=Ybe;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new be),this.type!==hn.DYNAMIC)return;const i=Xbe,r=qbe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===hn.DYNAMIC&&(this.sleepState===hn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new be),this.type!==hn.DYNAMIC)return;this.sleepState===hn.SLEEPING&&this.wakeUp();const i=n,r=Kbe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const o=Jbe;i.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new be),this.type!==hn.DYNAMIC)return;const i=Zbe,r=Qbe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=eye;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),l1.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new be;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==hn.DYNAMIC&&this.type!==hn.KINEMATIC||this.sleepState===hn.SLEEPING)return;const r=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,p=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*p.x,r.y+=a.y*m*p.y,r.z+=a.z*m*p.z;const g=h.elements,A=this.angularFactor,D=c.x*A.x,j=c.y*A.y,k=c.z*A.z;o.x+=e*(g[0]*D+g[1]*j+g[2]*k),o.y+=e*(g[3]*D+g[4]*j+g[5]*k),o.z+=e*(g[6]*D+g[7]*j+g[8]*k),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}hn.idCounter=0,hn.COLLIDE_EVENT_NAME="collide",hn.DYNAMIC=1,hn.STATIC=2,hn.KINEMATIC=4,hn.AWAKE=0,hn.SLEEPY=1,hn.SLEEPING=2,hn.wakeupEvent={type:"wakeup"},hn.sleepyEvent={type:"sleepy"},hn.sleepEvent={type:"sleep"};const Vbe=new be,Hbe=new Nr,zbe=new $i,Gbe=new Dc,Wbe=new Dc,Ybe=(new Dc,new be),Xbe=new be,qbe=new be,Kbe=new be,Jbe=new be,Zbe=new be,Qbe=new be,eye=new be;new be,new be,new Nr,new be,new be,new be,new be;class Xy{constructor(){this.rayFromWorld=new be,this.rayToWorld=new be,this.hitNormalWorld=new be,this.hitPointWorld=new be,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=o,this.body=s,this.distance=a}}let M6,I6,D6,R6,k6,O6,P6;M6=un.types.SPHERE,I6=un.types.PLANE,D6=un.types.BOX,R6=un.types.CYLINDER,k6=un.types.CONVEXPOLYHEDRON,O6=un.types.HEIGHTFIELD,P6=un.types.TRIMESH;class no{get[M6](){return this._intersectSphere}get[I6](){return this._intersectPlane}get[D6](){return this._intersectBox}get[R6](){return this._intersectConvex}get[k6](){return this._intersectConvex}get[O6](){return this._intersectHeightfield}get[P6](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new be),void 0===n&&(n=new be),this.from=e.clone(),this.to=n.clone(),this.direction=new be,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=no.ANY,this.result=new Xy,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||no.ANY,this.result=n.result||new Xy,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(N6),nO.length=0,e.broadphase.aabbQuery(e,N6,nO),this.intersectBodies(nO),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=aye,o=cye;for(let s=0,a=e.shapes.length;s<a;s++){const c=e.shapes[s];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],r),r.vadd(e.position,r),this.intersectShape(c,o,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function Aye(t,e,n){n.vsub(t,Af);const i=Af.dot(e);return e.scale(i,u1),u1.vadd(t,u1),n.distanceTo(u1)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,o){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,o)}_intersectPlane(e,n,i,r,o){const s=this.from,a=this.to,c=this.direction,l=new be(0,0,1);n.vmult(l,l);const d=new be;s.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||s.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const g=new be,A=new be,D=new be;s.vsub(i,g);const j=-l.dot(g)/m;c.scale(j,A),s.vadd(A,D),this.reportIntersection(l,D,o,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,o=this.from;n.x=Math.min(r.x,o.x),n.y=Math.min(r.y,o.y),n.z=Math.min(r.z,o.z),i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.z=Math.max(r.z,o.z)}_intersectHeightfield(e,n,i,r,o){const s=lye;s.from.copy(this.from),s.to.copy(this.to),Ai.pointToLocalFrame(i,n,s.from,s.from),Ai.pointToLocalFrame(i,n,s.to,s.to),s.updateDirection();const a=dye;let c,l,d,h;c=l=0,d=h=e.data.length-1;const p=new $i;s.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let g=l;g<h;g++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,g,p),p.overlapsRay(s)){if(e.getConvexTrianglePillar(m,g,!1),Ai.pointToWorldFrame(i,n,e.pillarOffset,d1),this._intersectConvex(e.pillarConvex,n,d1,r,o,F6),this.result.shouldStop)return;e.getConvexTrianglePillar(m,g,!0),Ai.pointToWorldFrame(i,n,e.pillarOffset,d1),this._intersectConvex(e.pillarConvex,n,d1,r,o,F6)}}}_intersectSphere(e,n,i,r,o){const s=this.from,a=this.to,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,d=2*((a.x-s.x)*(s.x-i.x)+(a.y-s.y)*(s.y-i.y)+(a.z-s.z)*(s.z-i.z)),p=d**2-4*l*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-e.radius**2),m=uye,g=hye;if(!(p<0))if(0===p)s.lerp(a,p,m),m.vsub(i,g),g.normalize(),this.reportIntersection(g,m,o,r,-1);else{const A=(-d-Math.sqrt(p))/(2*l),D=(-d+Math.sqrt(p))/(2*l);if(A>=0&&A<=1&&(s.lerp(a,A,m),m.vsub(i,g),g.normalize(),this.reportIntersection(g,m,o,r,-1)),this.result.shouldStop)return;D>=0&&D<=1&&(s.lerp(a,D,m),m.vsub(i,g),g.normalize(),this.reportIntersection(g,m,o,r,-1))}}_intersectConvex(e,n,i,r,o,s){const a=fye,c=L6,l=s&&s.faceList||null,d=e.faces,h=e.vertices,p=e.faceNormals,m=this.direction,g=this.from,D=g.distanceTo(this.to),j=l?l.length:d.length,k=this.result;for(let ue=0;!k.shouldStop&&ue<j;ue++){const we=l?l[ue]:ue,Be=d[we],We=p[we],Ke=n,ut=i;c.copy(h[Be[0]]),Ke.vmult(c,c),c.vadd(ut,c),c.vsub(g,c),Ke.vmult(We,a);const ft=m.dot(a);if(Math.abs(ft)<this.precision)continue;const bt=a.dot(c)/ft;if(!(bt<0)){m.scale(bt,ea),ea.vadd(g,ea),Rc.copy(h[Be[0]]),Ke.vmult(Rc,Rc),ut.vadd(Rc,Rc);for(let vt=1;!k.shouldStop&&vt<Be.length-1;vt++){Cl.copy(h[Be[vt]]),Tl.copy(h[Be[vt+1]]),Ke.vmult(Cl,Cl),Ke.vmult(Tl,Tl),ut.vadd(Cl,Cl),ut.vadd(Tl,Tl);const Ft=ea.distanceTo(g);!no.pointInTriangle(ea,Rc,Cl,Tl)&&!no.pointInTriangle(ea,Cl,Rc,Tl)||Ft>D||this.reportIntersection(a,ea,o,r,we)}}}}_intersectTrimesh(e,n,i,r,o,s){const a=gye,c=xye,l=Eye,d=L6,h=_ye,p=bye,m=yye,g=wye,A=vye,D=e.indices,j=this.from,k=this.to,ue=this.direction;l.position.copy(i),l.quaternion.copy(n),Ai.vectorToLocalFrame(i,n,ue,h),Ai.pointToLocalFrame(i,n,j,p),Ai.pointToLocalFrame(i,n,k,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,m.vsub(p,h),h.normalize();const we=p.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let Be=0,We=c.length;!this.result.shouldStop&&Be!==We;Be++){const Ke=c[Be];e.getNormal(Ke,a),e.getVertex(D[3*Ke],Rc),Rc.vsub(p,d);const ut=h.dot(a),ft=a.dot(d)/ut;if(ft<0)continue;h.scale(ft,ea),ea.vadd(p,ea),e.getVertex(D[3*Ke+1],Cl),e.getVertex(D[3*Ke+2],Tl);const bt=ea.distanceSquared(p);!no.pointInTriangle(ea,Cl,Rc,Tl)&&!no.pointInTriangle(ea,Rc,Cl,Tl)||bt>we||(Ai.vectorToWorldFrame(n,a,A),Ai.pointToWorldFrame(i,n,ea,g),this.reportIntersection(A,g,o,r,Ke))}c.length=0}reportIntersection(e,n,i,r,o){const s=this.from,a=this.to,c=s.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case no.ALL:this.hasHit=!0,l.set(s,a,e,n,i,r,c),l.hasHit=!0,this.callback(l);break;case no.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,i,r,c));break;case no.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,Af),i.vsub(n,qy),e.vsub(n,iO);const o=Af.dot(Af),s=Af.dot(qy),a=Af.dot(iO),c=qy.dot(qy),l=qy.dot(iO);let d,h;return(d=c*a-s*l)>=0&&(h=o*l-s*a)>=0&&d+h<o*c-s*s}}no.CLOSEST=1,no.ANY=2,no.ALL=4;const N6=new $i,nO=[],qy=new be,iO=new be,aye=new be,cye=new Nr,ea=new be,Rc=new be,Cl=new be,Tl=new be;new be,new Xy;const F6={faceList:[0]},d1=new be,lye=new no,dye=[],uye=new be,hye=new be,fye=new be,L6=(new be,new be,new be),gye=new be,_ye=new be,bye=new be,yye=new be,vye=new be,wye=new be;new $i;const xye=[],Eye=new Ai,Af=new be,u1=new be;new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new no,new be,new be,new be,new be(1,0,0),new be(0,1,0),new be(0,0,1),new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new $i,new be,new $i,new be,new be,new be,new be,new be,new be,new be,new $i,new be,new Ai,new $i,new be,new be,new be,new be,new be,new Nr,new Nr,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new $i,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new be,new Nr,new be,new be,new be,new be,new be,new be,new be,new be,new be,new $i,new no;const ho=globalThis.performance||{};if(!ho.now){let t=Date.now();ho.timing&&ho.timing.navigationStart&&(t=ho.timing.navigationStart),ho.now=()=>Date.now()-t}new be;var Mf=T(1979);function cg(t,e,n){e||(e=new Wn(Wn.IDENTITY));const i=new Wn(Wn.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const o=new Wn(Wn.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(o)}t.scale&&i.scale(t.scale)}const r=new Wn(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const o of t.nodes||t.children||[])if(!1===cg(o,r,n))return!1;return!0}function lz(){$V([KH,rg])}function dz(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||cg(r,new Wn(Wn.IDENTITY),(o,s)=>o!==n||(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function aO(t,e){return cO.apply(this,arguments)}function cO(){return cO=Ht(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(o=>o.blob())):fetch(n);const r=yield LE(i,rg,{DracoLoader:Ck,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),dz(t.scenegraphNode,r)}),cO.apply(this,arguments)}function Mwe(t,e){return lO.apply(this,arguments)}function lO(){return lO=Ht(function*(t,e){return dz(t,yield e)}),lO.apply(this,arguments)}function dO(){return dO=Ht(function*(t){console.log("Starting Collisioning");const e=t.filter(s=>!s.scenegraph&&"wireframe"!==s.geometry).map(s=>{const a=new Wn(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new $i({lowerBound:new be(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new be(...l.map((d,h)=>Math.max(d,c[h])))})}}),n=[];for(const s of t.filter(a=>!!a.scenegraph)){const a=yield Oy(s.scenegraph,rg,{DracoLoader:Ck,decompress:!0,postProcess:!0});for(const c of a.scenes)cg(c,new Wn(s.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new $i({lowerBound:new be(...p.map((g,A)=>Math.min(g,m[A]))),upperBound:new be(...m.map((g,A)=>Math.max(g,p[A])))}),gltf:a})}return!0})}const i=[],r=[];for(const s of e){const a=[];for(const c of n)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":s.entityId,name:s.name,hits:a}):r.push(s)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(s=>s.hits.length))});const o=[];for(const s of i){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(const a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),i}),dO.apply(this,arguments)}function uO(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new ybe;break;case"cone":i=new Ebe;break;case"cylinder":i=new Abe;break;default:i=new Dbe}return new jR({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:wi.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function uz(t,e,n){if(e&&0!==e.length)return new NR({id:t,pickable:!0,data:e.map(i=>({...i,position:new Wn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}let Dwe=(()=>{var t;class e extends iR{initializeState(){const{data:i}=this.props;this.setState({data:i??[],zoomOpacity:.8,doCollisions:!1}),lz()}renderLayers(){const i=this.state,r={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const a of i.data){const c=a.geometry??"cube";a.scenegraph?r.scenegraph.push(a):void 0!==r[c]&&r[c].push(a)}const o={};for(const a of r.scenegraph)a.scenegraph&&a.scenegraphNode&&!Object.prototype.hasOwnProperty.call(o,a.scenegraph)&&(o[a.scenegraph]=aO({scenegraph:a.scenegraph},e.gltfCache));const s=[];for(const[a,c]of Object.entries(r))if("scenegraph"===a)for(const l of c)s.push(new Kk({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?i.zoomOpacity:l.opacity??1,pickable:!l.unpickable,coordinateSystem:wi.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?Mwe(l.scenegraphNode,o[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:l.color??[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}}));else"text"===a?(s.push(uz("text",c.filter(l=>l.unpickable),{pickable:!1})),s.push(uz("textPickable",c.filter(l=>!l.unpickable),{pickable:!0}))):"wireframe"===a?s.push(uO(a,c,{wireframe:!0,pickable:!1,geometry:a})):(s.push(uO(a,c.filter(l=>l.unpickable),{wireframe:!1,pickable:!1,geometry:a})),s.push(uO(`${a}Pickable`,c.filter(l=>!l.unpickable),{wireframe:!1,pickable:!0,geometry:a})));return i.doCollisions&&function Iwe(t){dO.apply(this,arguments)}(i.data),s.filter(a=>!!a)}getPickingInfo(i){return i.info}}return(t=e).layerName="BodyUILayer",t.gltfCache={},e})();function hz(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),hz(n,e);return e}function hO(){return hO=Ht(function*(t,e,n,i){lz();const r=yield aO({scenegraph:t,scenegraphNode:n},i),o={},s=[];for(const a of r.scenes)cg(a,e=new Wn(e||Wn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Wn(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:d["@id"],transformMatrix:new Wn(e||Wn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new $i({lowerBound:new be(...p.map((g,A)=>Math.min(g,m[A]))),upperBound:new be(...m.map((g,A)=>Math.max(g,p[A])))})}return o[d["@id"]]=d,!0});for(const a of Object.values(o).filter(c=>!c.bbox)){for(const c of hz(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(const a of Object.values(o)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new be(.5,.5,.5)),p=a.center=c.clone().vadd(h);a.transformMatrix=new Wn(Wn.IDENTITY).translate(p.toArray()).scale(h.toArray())}for(const a of s)o[a["@id"]]=a;return o}),hO.apply(this,arguments)}let kwe=(()=>{class t{constructor(n){this.deckProps=n,this.bodyUILayer=new Dwe({}),this.nodeClickSubject=new Se,this.nodeHoverStartSubject=new Se,this.nodeHoverStopSubject=new Se,this.sceneRotationSubject=new ce([0,0]),this.nodeDragStartSubject=new Se,this.nodeDragSubject=new Se,this.nodeDragEndSubject=new Se,this.nodeClick$=this.nodeClickSubject.pipe(Oo()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Oo()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Oo()),this.sceneRotation$=this.sceneRotationSubject.pipe(Oo()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Oo()),this.nodeDrag$=this.nodeDragSubject.pipe(Oo()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Oo());const i={...n,views:["orthographic"===n.camera?new n8({flipY:!1,near:-1e3}):new i8({orbitAxis:"Y"})],controller:n.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};n.legacyLighting&&(i.effects=[new uR({ambientLight:new r8({color:[255,255,255],intensity:10})})]),this.deck=new IR(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:n.minRotationX??-15,maxRotationX:n.maxRotationX??15,target:n.target??[.5,.5,0],rotationX:0,rotationOrbit:n.rotation??0,zoom:n.zoom??9.5,camera:n.camera}}),n.rotation&&this.sceneRotationSubject.next([n.rotation,0])}initialize(){var n=this;return Ht(function*(){for(;!n.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(n){if(n?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const o of n)o.zoomToOnLoad&&(this.zoomTo(o),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(n,i):this.bodyUILayer.setState({data:n,zoomOpacity:i})}}debugSceneNodeProcessing(n,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",o=new Wn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function Rwe(t,e,n,i){return hO.apply(this,arguments)})(r,o,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",n),(n=n.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:o,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:n,zoomOpacity:i})})}zoomTo(n){const i=new Wn(n.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:n}})}setRotationX(n){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:n}})}setZoom(n){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:n}})}setTarget(n){this.deck.setProps({viewState:{...this.deck.props.viewState,target:n}})}setInteractive(n){this.deck.setProps({controller:n})}_onHover(n){const{lastHovered:i}=this;this.cursor=n.picked?"pointer":void 0,n.picked&&n.object?.["@id"]?i!==n.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=n.object,this.nodeHoverStartSubject.next(n.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(n,i){n.picked&&n.object?.["@id"]&&this.nodeClickSubject.next({node:n.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(n){if(n.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(n.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...n.viewState}}),this.sceneRotationSubject.next([n.viewState.rotationOrbit,n.viewState.rotationX])}_onDragStart(n,i){this._dragEvent(n,i,this.nodeDragStartSubject)}_onDrag(n,i){this._dragEvent(n,i,this.nodeDragSubject)}_onDragEnd(n,i){this._dragEvent(n,i,this.nodeDragEndSubject)}_dragEvent(n,i,r){n?.object?.["@id"]&&r.next({node:n.object,info:n,e:i})}}return mt([Mf.ak],t.prototype,"_onHover",null),mt([Mf.ak],t.prototype,"_onClick",null),mt([Mf.ak],t.prototype,"_onViewStateChange",null),mt([Mf.ak],t.prototype,"_onDragStart",null),mt([Mf.ak],t.prototype,"_onDrag",null),mt([Mf.ak],t.prototype,"_onDragEnd",null),t})();const t0=$(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Pwe}=Array,{getPrototypeOf:Nwe,prototype:Fwe,keys:Lwe}=Object;function fz(t){if(1===t.length){const e=t[0];if(Pwe(e))return{args:e,keys:null};if(function Bwe(t){return t&&"object"==typeof t&&Nwe(t)===Fwe}(e)){const n=Lwe(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:jwe}=Array;function n0(t){return Q(e=>function Uwe(t,e){return jwe(e)?t(...e):t(e)}(t,e))}function pz(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Qa(...t){const e=Qt(t),n=Vt(t),{args:i,keys:r}=fz(t);if(0===i.length)return xi([],e);const o=new le(mz(i,e,r?s=>pz(r,s):Ye));return n?o.pipe(n0(n)):o}function mz(t,e,n=Ye){return i=>{gz(e,()=>{const{length:r}=t,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)gz(e,()=>{const l=xi(t[c],e);let d=!1;l.subscribe(w(i,h=>{o[c]=h,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function gz(t,e,n){t?ye(n,t,e):e()}let _z=(()=>{class t{constructor(){this.bootstrap$=new rf(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Hwe(t,e){return t===e}function pO(t,e=Hwe){let n=null,i=null;function r(){return function zwe(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let Gwe=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const bz=new yt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>Gwe.pop()}),yz=new yt("\u0275NGXS_STATE_FACTORY"),vz=new yt("\u0275NGXS_STATE_CONTEXT_FACTORY");function r0(...t){const e=Vt(t),{args:n,keys:i}=fz(t),r=new le(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let d=0;d<s;d++){let h=!1;Ri(n[d]).subscribe(w(o,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?pz(i,a):a),o.complete())}))}});return e?r.pipe(n0(e)):r}function xd(t,e){const n=R(t)?t:()=>t,i=r=>r.error(n());return new le(e?r=>e.schedule(i,0,r):i)}function If(t){return!!t&&(t instanceof le||R(t.lift)&&R(t.subscribe))}function _i(t,e){return L((n,i)=>{let r=0;n.subscribe(w(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Is(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,Oo({connector:()=>new rf(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Yi(t){return t<=0?()=>Fe:L((e,n)=>{let i=0;e.subscribe(w(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function wz(t,e){return e?n=>n.pipe(wz((i,r)=>Ri(t(i,r)).pipe(Q((o,s)=>e(i,o,r,s))))):L((n,i)=>{let r=0,o=null,s=!1;n.subscribe(w(i,a=>{o||(o=w(i,void 0,()=>{o=null,s&&i.complete()}),Ri(t(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function lg(t){return L((e,n)=>{let i=!1;e.subscribe(w(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function ec(t){return L((e,n)=>{let o,i=null,r=!1;i=e.subscribe(w(n,void 0,void 0,s=>{o=Ri(t(s,ec(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function fr(t){return L((e,n)=>{Ri(t).subscribe(w(n,()=>n.complete(),b)),!n.closed&&e.subscribe(n)})}function Pi(t,e,n){const i=R(t)||e||n?{next:t,error:e,complete:n}:t;return i?L((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(w(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Ye}function o0(...t){return function Wwe(){return me(1)}()(xi(t,Qt(t)))}function tc(...t){const e=Qt(t);return L((n,i)=>{(e?o0(t,n,e):o0(t,n)).subscribe(i)})}function Df(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const xz=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((o,s,a)=>(o[s]=a===r?n:Array.isArray(o[s])?o[s].slice():Object.assign({},o[s]),o&&o[s]),t),t},mO=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),gO=t=>t&&"object"==typeof t&&!Array.isArray(t),_O=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(gO(t)&&gO(n))for(const i in n)gO(n[i])?(t[i]||Object.assign(t,{[i]:{}}),_O(t[i],n[i])):Object.assign(t,{[i]:n[i]});return _O(t,...e)};let Ez=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return qM(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return cn.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return cn.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(it(cn),it(vs))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Az=new yt("ROOT_OPTIONS"),Sz=new yt("ROOT_STATE_TOKEN"),Cz=new yt("FEATURE_STATE_TOKEN"),Tz=new yt("NGXS_PLUGINS"),Ed="NGXS_META",Mz="NGXS_OPTIONS_META",bO="NGXS_SELECTOR_META";let y1=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=Ez}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:function(n){let i=null;return n?i=new n:(r=it(Az),i=_O(new t,r)),i;var r},providedIn:"root"}),t})();class exe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let txe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Iz=new yt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),nxe=new yt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=Gt(tm),e=t.get(Iz);return t.get(e||(typeof Ei.Zone<"u"?Ez:txe))}});function yO(t){if(!t.hasOwnProperty(Ed)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,Ed,{value:e})}return Rf(t)}function Rf(t){return t[Ed]}function v1(t){return t[bO]}function Dz(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function ixe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function rxe(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let o=n;for(;++i<r;)o=o+" && "+(n=n+"."+e[i]);return new Function("store","return "+o+";")}(t)}function dxe(...t){return function dg(t,e,n=fxe){const i=function pxe(t){return t.reduce((e,n)=>(e[Df(n)]=!0,e),{})}(t),r=e&&function mxe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(o){return o.pipe(function uxe(t,e){return _i(n=>{const i=Df(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function fxe(){return Q(t=>t.action)}function w1(t){return e=>new le(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let Rz=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(it(nxe))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function kz(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const o=e.pop();o&&t(...o)}n=!1}}}class gxe extends Se{constructor(){super(...arguments),this._orderedNext=kz(e=>super.next(e))}next(e){this._orderedNext(e)}}class _xe extends ce{constructor(e){super(e),this._orderedNext=kz(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let Oz=(()=>{class t extends gxe{ngOnDestroy(){this.complete()}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ci(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Pz=t=>(...e)=>t.shift()(...e,(...i)=>Pz(t)(...i));let Nz=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(yc));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(it(dr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wO=(()=>{class t extends _xe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),xO=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(it(t,12),it(Tz,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})(),Fz=(()=>{class t extends Se{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ci(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yxe=(()=>{class t{constructor(n,i,r,o,s,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=s,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function bxe(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new le(r=>(i=!0,n.pipe(w1(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?$t(this._stateStream.getValue()):r0(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return Pz([...this._pluginManager.plugins,(o,s)=>{o!==i&&this._stateStream.next(o);const a=this.getActionResultStream(s);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(Is())}getActionResultStream(n){return this._actionResults.pipe(_i(i=>i.action===n&&"DISPATCHED"!==i.status),Yi(1),Is())}createDispatchObservable(n){return n.pipe(wz(i=>{switch(i.status){case"SUCCESSFUL":return $t(this._stateStream.getValue());case"ERRORED":return xd(i.error);default:return Fe}})).pipe(Is())}}return t.\u0275fac=function(n){return new(n||t)(it(Oz),it(Fz),it(xO),it(wO),it(Rz),it(Nz))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),s0=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(it(wO),it(yxe),it(y1))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EO=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();function r(c){return mO(c,n.path)}function o(c,l){const d=xz(c,n.path,l);return i.setState(d),d}function s(c,l){return o(c,l(r(c)))}return{getState:()=>r(i.getState()),patchState(c){const l=i.getState(),d=function vxe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(c);return s(l,d)},setState(c){const l=i.getState();return function a(c){return"function"==typeof c}(c)?s(l,c):o(l,c)},dispatch:c=>i.dispatch(c)}}}return t.\u0275fac=function(n){return new(n||t)(it(s0))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new RegExp("^[a-zA-Z0-9_]+$");class Bz{static get type(){return"@@INIT"}}class jz{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}new yt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let ug=(()=>{class t{constructor(n,i,r,o,s,a,c){this._injector=n,this._config=i,this._parentFactory=r,this._actions=o,this._actionResults=s,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=pO(()=>{const l=this;function d(p){const m=l.statePaths[p];return m?Dz(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let m=d(p);return m||((...g)=>(m||(m=d(p)),m?m(...g):void 0))},getSelectorOptions:p=>Object.assign(Object.assign({},l._config.selectorOptions),p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(n){let i={};return i=Array.isArray(n)?n.slice():function lxe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?Object.assign({},n):void 0===n?{}:n,i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function oxe(t){const e=n=>t.find(r=>r===n)[Ed].name;return t.reduce((n,i)=>{const{name:r,children:o}=i[Ed];return n[r]=(o||[]).map(e),n},{})}(i),o=function cxe(t){const e=[],n={},i=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),n[r]=!0,t[r].forEach(s=>{n[s]||i(s,o.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),s=function axe(t,e={}){const n=(i,r)=>{for(const o in i)if(i.hasOwnProperty(o)&&i[o].indexOf(r)>=0){const s=n(i,o);return null!==s?`${s}.${o}`:o}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function sxe(t){return t.reduce((e,n)=>(e[n[Ed].name]=n,e),{})}(i),c=[];for(const l of o){const d=a[l],h=s[l],p=d[Ed];this.addRuntimeInfoToMeta(p,h);const m={name:l,path:h,isInitialised:!1,actions:p.actions,instance:this._injector.get(d),defaults:t.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((s,a)=>xz(s,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new Se;this._actionsSubscription=this._actions.pipe(_i(i=>"DISPATCHED"===i.status),Y(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(Q(()=>({action:r,status:"SUCCESSFUL"})),lg({action:r,status:"CANCELED"}),ec(o=>$t({action:r,status:"ERRORED",error:o})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=Df(i),o=[];let s=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=xi(h)),If(h)?(h=h.pipe(Y(p=>p instanceof Promise?xi(p):If(p)?p:$t(p)),lg({})),l.options.cancelUncompleted&&(h=h.pipe(fr(n.pipe(dxe(i)))))):h=$t({}).pipe(Is()),o.push(h)}catch(h){o.push(xd(h))}s=!0}}return o.length||o.push($t({})),r0(o)}addToStatesMap(n){const i=[],r=this.statesByName;for(const o of n){const s=Rf(o).name;!r[s]&&(i.push(o),r[s]=o)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==mO(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(it(dr),it(y1),it(t,12),it(Oz),it(Fz),it(EO),it(bz,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();function Uz(t){const e=v1(t)||Rf(t);return e&&e.makeRootSelector||(()=>t)}let Ml=(()=>{class t{constructor(n,i,r,o,s,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=o,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(w1(this._internalExecutionStrategy),Is({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(Q(i),ec(r=>{const{suppressErrors:o}=this._config.selectorOptions;return r instanceof TypeError&&o?$t(void 0):xd(r)}),nt(),w1(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(Yi(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(w1(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return Uz(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const s=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(s)}}}return t.\u0275fac=function(n){return new(n||t)(it(wO),it(s0),it(y1),it(Rz),it(ug),it(bz,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x1=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(it(Ml),it(y1))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vz=(()=>{class t{constructor(n,i,r,o,s){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=o,this._bootstrapper=s,this._destroy$=new Se}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(_i(()=>!!i),Pi(()=>this._invokeInitOnStates(i.states)),Y(()=>this._bootstrapper.appBootstrapped$),_i(r=>!!r),ec(r=>(this._internalErrorReporter.reportErrorSafely(r),Fe)),fr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(o=>mO(o,i.path)).pipe(tc(void 0),L((t,e)=>{let n,i=!1;t.subscribe(w(e,r=>{const o=n;n=r,i&&e.next([o,r]),i=!0}))}),fr(this._destroy$)).subscribe(([o,s])=>{const a=new exe(o,s,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(it(Ml),it(Nz),it(s0),it(EO),it(_z))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ixe=(()=>{class t{constructor(n,i,r,o,s=[],a){const c=n.addAndReturnDefaults(s);i.setStateToTheCurrentWithNew(c),n.connectActionHandlers(),a.ngxsBootstrap(new Bz,c)}}return t.\u0275fac=function(n){return new(n||t)(it(ug),it(s0),it(Ml),it(x1),it(Sz,8),it(Vz))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),t})(),Dxe=(()=>{class t{constructor(n,i,r,o=[],s){const a=t.flattenStates(o),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),s.ngxsBootstrap(new jz(c.defaults),c))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(it(Ml),it(s0),it(ug),it(Cz,8),it(Vz))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),t})(),Hz=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:Ixe,providers:[ug,xO,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:Dxe,providers:[ug,xO,...n,{provide:Cz,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:Iz,useValue:i.executionStrategy},{provide:Sz,useValue:n},{provide:Az,useValue:i},{provide:Ix,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[_z]},{provide:vz,useExisting:EO},{provide:yz,useExisting:ug}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),t})();function CO(t,e){return(n,i)=>{const r=yO(n.constructor);Array.isArray(t)||(t=[t]);for(const o of t){const s=o.type;r.actions[s]||(r.actions[s]=[]),r.actions[s].push({fn:i,options:e||{},type:s})}}}function zz(t){return i=>{const r=i,o=yO(r),s=Object.getPrototypeOf(r),a=function e(i){return Object.assign(Object.assign({},i[Mz]||{}),t)}(s);(function n(i){const{meta:r,inheritedStateClass:o,optionsWithInheritance:s}=i,{children:a,defaults:c,name:l}=s,d="string"==typeof l?l:l&&l.getName()||null;if(o.hasOwnProperty(Ed)){const h=o[Ed]||{};r.actions=Object.assign(Object.assign({},r.actions),h.actions)}r.children=a,r.defaults=c,r.name=d})({meta:o,inheritedStateClass:s,optionsWithInheritance:a}),r[Mz]=a}}const Rxe=36;function E1(t,...e){return function(n,i){const r=i.toString(),o=`__${r}__selector`,s=function Oxe(t,e,n=[]){return e=e||function Pxe(t){const e=t.length-1;return t.charCodeAt(e)===Rxe?t.slice(0,e):t}(t),"string"==typeof e?Dz(n.length?[e,...n]:e.split("."),x1.config):e}(r,t,e);Object.defineProperties(n,{[o]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[o]||(this[o]=function kxe(t){return x1.store||function Qwe(){throw new Error("You have forgotten to import the NGXS module!")}(),x1.store.select(t)}(s))}}})}}const Gz="NGXS_SELECTOR_OPTIONS_META",A1={getOptions:t=>t&&t[Gz]||{},defineOptions:(t,e)=>{t&&(t[Gz]=e)}};function Nxe(t,e){const n=function vO(t){return t.hasOwnProperty(bO)||Object.defineProperty(t,bO,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),v1(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function Fxe(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},A1.getOptions(t.containerClass)||{}),A1.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function a0(t,e,n){const i=function Cxe(t,e){const n=e&&e.containerClass,r=pO(function(...s){const a=t.apply(n,s);return a instanceof Function?pO.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=Nxe(e,n);return r.makeRootSelector=function Sxe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:o}=function Txe(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),s=function Mxe(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&Rf(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>Uz(a)(t));return{selectorOptions:r,argumentSelectorFunctions:s}}(i,t,e);return function(a){const c=r.map(l=>l(a));try{return n(...c)}catch(l){if(l instanceof TypeError&&o.suppressErrors)return;throw l}}}}(r,t,i),i}function hg(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,o=a0(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),s={configurable:!0,get:()=>o};return s.originalFn=r,s}}const Ds=new yt("NgValueAccessor");let XO;try{XO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{XO=!1}let p0,Ff,qO,Tr=(()=>{var t;class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Tu(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!XO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(t=e).\u0275fac=function(i){return new(i||t)(it(vs))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Nf(t){return function FEe(){if(null==p0&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>p0=!0}))}finally{p0=p0||!1}return p0}()?t:!!t.capture}function LEe(){if(null==Ff){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ff=!1,Ff;if("scrollBehavior"in document.documentElement.style)Ff=!0;else{const t=Element.prototype.scrollTo;Ff=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Ff}function j1(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Sd(t){return t.composedPath?t.composedPath()[0]:t.target}function KO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function kc(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class XEe extends H{constructor(e,n){super()}schedule(e,n=0){return this}}const H1={setInterval(t,e,...n){const{delegate:i}=H1;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=H1;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class QO extends XEe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return H1.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&H1.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,I(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class g0{constructor(e,n=g0.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}g0.now=sI.now;class e2 extends g0{constructor(e,n=g0.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const z1=new e2(QO),qEe=z1;function n2(t){return _i((e,n)=>t<=n)}function ci(t){return null!=t&&"false"!=`${t}`}function nc(t,e=0){return function KEe(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function G1(t){return Array.isArray(t)?t:[t]}function io(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Cd(t){return t instanceof Nt?t.nativeElement:t}const cG=new Set;let Lf,QEe=(()=>{var t;class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):t1e}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&function e1e(t,e){if(!cG.has(t))try{Lf||(Lf=document.createElement("style"),e&&(Lf.nonce=e),Lf.setAttribute("type","text/css"),document.head.appendChild(Lf)),Lf.sheet&&(Lf.sheet.insertRule(`@media ${t} {body{ }}`,0),cG.add(t))}catch(n){console.error(n)}}(i,this._nonce),this._matchMedia(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Tr),it(wb,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function t1e(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let n1e=(()=>{var t;class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Se}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return lG(G1(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let s=Qa(lG(G1(i)).map(a=>this._registerQuery(a).observable));return s=o0(s.pipe(Yi(1)),s.pipe(n2(1),function t2(t,e=z1){return L((n,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=o;o=null,i.next(l)}};function c(){const l=s+t,d=e.now();if(d<l)return r=this.schedule(void 0,l-d),void i.add(r);a()}n.subscribe(w(i,l=>{o=l,s=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),s.pipe(Q(a=>{const c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);const r=this._mediaMatcher.matchMedia(i),s={observable:new le(a=>{const c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(tc(r),Q(({matches:a})=>({query:i,matches:a})),fr(this._destroySubject)),mql:r};return this._queries.set(i,s),s}}return(t=e).\u0275fac=function(i){return new(i||t)(it(QEe),it(cn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function lG(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}let Y1=(()=>{var t;class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return function a1e(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(i)&&"visible"===getComputedStyle(i).visibility}isTabbable(i){if(!this._platform.isBrowser)return!1;const r=function s1e(t){try{return t.frameElement}catch{return null}}(function m1e(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(i));if(r&&(-1===gG(r)||!this.isVisible(r)))return!1;let o=i.nodeName.toLowerCase(),s=gG(i);return i.hasAttribute("contenteditable")?-1!==s:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function f1e(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(i))&&("audio"===o?!!i.hasAttribute("controls")&&-1!==s:"video"===o?-1!==s&&(null!==s||this._platform.FIREFOX||i.hasAttribute("controls")):i.tabIndex>=0)}isFocusable(i,r){return function p1e(t){return!function l1e(t){return function u1e(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function c1e(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function d1e(t){return function h1e(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||mG(t))}(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Tr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function mG(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function gG(t){if(!mG(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class g1e{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,o=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Yi(1)).subscribe(e)}}let c2=(()=>{var t;class e{constructor(i,r,o){this._checker=i,this._ngZone=r,this._document=o}create(i,r=!1){return new g1e(i,this._checker,this._ngZone,this._document,r)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Y1),it(cn),it(Yn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function _G(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function bG(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const _1e=new yt("cdk-input-modality-detector-options"),b1e={ignoreKeys:[18,17,224,91,16]},mg=Nf({passive:!0,capture:!0});let y1e=(()=>{var t;class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new ce(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Sd(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(_G(a)?"keyboard":"mouse"),this._mostRecentTarget=Sd(a))},this._onTouchstart=a=>{bG(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Sd(a))},this._options={...b1e,...s},this.modalityDetected=this._modality.pipe(n2(1)),this.modalityChanged=this.modalityDetected.pipe(nt()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,mg),o.addEventListener("mousedown",this._onMousedown,mg),o.addEventListener("touchstart",this._onTouchstart,mg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mg),document.removeEventListener("mousedown",this._onMousedown,mg),document.removeEventListener("touchstart",this._onTouchstart,mg))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Tr),it(cn),it(Yn),it(_1e,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const w1e=new yt("cdk-focus-monitor-default-options"),X1=Nf({passive:!0,capture:!0});let $u=(()=>{var t;class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Se,this._rootNodeFocusAndBlurListener=c=>{for(let d=Sd(c);d;d=d.parentElement)"focus"===c.type?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){const o=Cd(i);if(!this._platform.isBrowser||1!==o.nodeType)return $t();const s=function jEe(t){if(function BEe(){if(null==qO){const t=typeof document<"u"?document.head:null;qO=!(!t||!t.createShadowRoot&&!t.attachShadow)}return qO}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new Se,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){const r=Cd(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){const s=Cd(i);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return 1===this._detectionMode||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused","touch"===r),i.classList.toggle("cdk-keyboard-focused","keyboard"===r),i.classList.toggle("cdk-mouse-focused","mouse"===r),i.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=i,this._originFromTouchInteraction="touch"===i&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(i,r){const o=this._elementInfo.get(r),s=Sd(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;const r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,X1),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,X1)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(fr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){const r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,X1),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,X1),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){const r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){const{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!r||r===i||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName||i.disabled)return!1;const s=i.labels;if(s)for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0;return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(it(cn),it(Tr),it(y1e),it(Yn,8),it(w1e,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const vG="cdk-high-contrast-black-on-white",wG="cdk-high-contrast-white-on-black",l2="cdk-high-contrast-active";let xG=(()=>{var t;class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=Gt(n1e).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);const r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const i=this._document.body.classList;i.remove(l2,vG,wG),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?i.add(l2,vG):2===r&&i.add(l2,wG)}}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Tr),it(Yn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const x1e=new yt("cdk-dir-doc",{providedIn:"root",factory:function E1e(){return Gt(Yn)}}),A1e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Bf=(()=>{var t;class e{constructor(i){this.value="ltr",this.change=new rn,i&&(this.value=function S1e(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?A1e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((i.body?i.body.dir:null)||(i.documentElement?i.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return(t=e).\u0275fac=function(i){return new(i||t)(it(x1e,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),_0=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),e})();const O1e=new yt("mat-sanity-checks",{providedIn:"root",factory:function k1e(){return!0}});let Ni=(()=>{var t;class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return!KO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[i])}}return(t=e).\u0275fac=function(i){return new(i||t)(it(xG),it(O1e,8),it(Yn))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[_0,_0]}),e})();function q1(t){return class extends t{get disabled(){return this._disabled}set disabled(e){this._disabled=ci(e)}constructor(...e){super(...e),this._disabled=!1}}}function b0(t,e){return class extends t{get color(){return this._color}set color(n){const i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function K1(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ci(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function J1(t,e=0){return class extends t{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(n){this._tabIndex=null!=n?nc(n):this.defaultTabIndex}constructor(...n){super(...n),this._tabIndex=e,this.defaultTabIndex=e}}}class L1e{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const TG=Nf({passive:!0,capture:!0});class B1e{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=Sd(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){const o=this._events.get(n);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,TG)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const o=r.get(n);o&&(o.delete(i),0===o.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,TG)))}}const MG={enterDuration:225,exitDuration:150},IG=Nf({passive:!0,capture:!0}),DG=["mousedown","touchstart"],RG=["mouseup","mouseleave","touchend","touchcancel"];class gg{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Cd(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...MG,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const s=i.radius||function U1e(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,c=n-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=c-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,g="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,A=new L1e(this,d,i,g);d.style.transform="scale3d(1, 1, 1)",A.state=0,i.persistent||(this._mostRecentTransientRipple=A);let D=null;return!g&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const j=()=>this._finishRippleTransition(A),k=()=>this._destroyRipple(A);d.addEventListener("transitionend",j),d.addEventListener("transitioncancel",k),D={onTransitionEnd:j,onTransitionCancel:k}}),this._activeRipples.set(A,D),(g||!l)&&this._finishRippleTransition(A),A}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,i={...MG,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=Cd(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,DG.forEach(i=>{gg._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{RG.forEach(n=>{this._triggerElement.addEventListener(n,this,IG)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=_G(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!bG(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(DG.forEach(n=>gg._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&RG.forEach(n=>e.removeEventListener(n,this,IG)))}}gg._eventManager=new B1e;const v0=new yt("mat-ripple-global-options");let _g=(()=>{var t;class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,s,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new gg(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return"number"==typeof i?this._rippleRenderer.fadeInRipple(i,r,{...this.rippleConfig,...o}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...i})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Nt),Ve(cn),Ve(Tr),Ve(v0,8),Ve(Cr,8))},t.\u0275dir=Ut({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&On("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),e})(),bg=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[Ni,Ni]}),e})();const Y1e=["addListener","removeListener"],X1e=["addEventListener","removeEventListener"],q1e=["on","off"];function jf(t,e,n,i){if(R(n)&&(i=n,n=void 0),i)return jf(t,e,n).pipe(n0(i));const[r,o]=function Z1e(t){return R(t.addEventListener)&&R(t.removeEventListener)}(t)?X1e.map(s=>a=>t[s](e,a,n)):function K1e(t){return R(t.addListener)&&R(t.removeListener)}(t)?Y1e.map(VG(t,e)):function J1e(t){return R(t.on)&&R(t.off)}(t)?q1e.map(VG(t,e)):[];if(!r&&Vc(t))return Y(s=>jf(s,e,n))(Ri(t));if(!r)throw new TypeError("Invalid event target");return new le(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function VG(t,e){return n=>i=>t[n](e,i)}const w0={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=w0;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(o=>{n=void 0,t(o)});return new H(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=w0;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=w0;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class eAe extends e2{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class Q1e extends QO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=w0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(w0.cancelAnimationFrame(n),e._scheduled=void 0)}});let h2,nAe=1;const Q1={};function HG(t){return t in Q1&&(delete Q1[t],!0)}const iAe={setImmediate(t){const e=nAe++;return Q1[e]=!0,h2||(h2=Promise.resolve()),h2.then(()=>HG(e)&&t()),e},clearImmediate(t){HG(t)}},{setImmediate:rAe,clearImmediate:oAe}=iAe,eA={setImmediate(...t){const{delegate:e}=eA;return(e?.setImmediate||rAe)(...t)},clearImmediate(t){const{delegate:e}=eA;return(e?.clearImmediate||oAe)(t)},delegate:void 0};new class aAe extends e2{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class sAe extends QO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=eA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:o}=e;null!=n&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==n&&(eA.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}});function f2(t=0,e,n=qEe){let i=-1;return null!=e&&(Et(e)?n=e:i=e),new le(r=>{let o=function dAe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function zG(t,e=z1){return function lAe(t){return L((e,n)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const l=r;r=null,n.next(l)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};e.subscribe(w(n,l=>{i=!0,r=l,o||Ri(t(l)).subscribe(o=w(n,a,c))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}(()=>f2(t,e))}let GG=(()=>{var t;class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Se,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){const r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=20){return this._platform.isBrowser?new le(r=>{this._globalSubscription||this._addGlobalListener();const o=i>0?this._scrolled.pipe(zG(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):$t()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){const o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(_i(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){const r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=Cd(r),s=i.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>jf(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(cn),it(Tr),it(Yn,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),p2=(()=>{var t;class e{constructor(i,r,o){this._platform=i,this._change=new Se,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){const i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect();return{top:-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,left:-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(i=20){return i>0?this._change.pipe(zG(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Tr),it(cn),it(Yn,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class m2{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class nA extends m2{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class iA extends m2{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class fAe extends m2{constructor(e){super(),this.element=e instanceof Nt?e.nativeElement:e}}class g2{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof nA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof iA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof fAe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class pAe extends g2{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||dr.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let rA=(()=>{var t;class e extends g2{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new rn,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);const r=null!=i.viewContainerRef?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Rt),Ve(Bo),Ve(Yn))},t.\u0275dir=Ut({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[_n]}),e})();const $G=LEe();class mAe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=io(-this._previousScrollPosition.left),e.style.top=io(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),$G&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),$G&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class gAe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(_i(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class YG{enable(){}disable(){}attach(){}}function _2(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function XG(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class _Ae{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();_2(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let bAe=(()=>{var t;class e{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new YG,this.close=a=>new gAe(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new mAe(this._viewportRuler,this._document),this.reposition=a=>new _Ae(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}}return(t=e).\u0275fac=function(i){return new(i||t)(it(GG),it(p2),it(cn),it(Yn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class b2{constructor(e){if(this.scrollStrategy=new YG,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class yAe{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let qG=(()=>{var t;class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){const r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),vAe=(()=>{var t;class e extends qG{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{const s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){const c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn),it(cn,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),wAe=(()=>{var t;class e extends qG{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Sd(s)},this._clickListener=s=>{const a=Sd(s),c="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){const h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(c))break;const p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(i){if(super.add(i),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn),it(Tr),it(cn,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),oA=(()=>{var t;class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i="cdk-overlay-container";if(this._platform.isBrowser||KO()){const o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}const r=this._document.createElement("div");r.classList.add(i),KO()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn),it(Tr))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class E0{constructor(e,n,i,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Se,this._attachments=new Se,this._detachments=new Se,this._locationChanges=H.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Se,this._outsidePointerEvents=new Se,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Yi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=io(this._config.width),e.height=io(this._config.height),e.minWidth=io(this._config.minWidth),e.minHeight=io(this._config.minHeight),e.maxWidth=io(this._config.maxWidth),e.maxHeight=io(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=G1(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(fr(gr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const KG="cdk-overlay-connected-position-bounding-box",xAe=/([A-Za-z%]+)$/;class EAe{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Se,this._resizeSubscription=H.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(KG),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),d=this._getOverlayFit(l,n,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(const l of o){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Uf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(KG),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return n.left<0&&(r-=n.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r,o;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,o="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){const o=ZG(n);let{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let p=0-a,m=a+o.height-i.height,g=this._subtractOverflows(o.width,0-s,s+o.width-i.width),A=this._subtractOverflows(o.height,p,m),D=g*A;return{visibleArea:D,isCompletelyWithinViewport:o.width*o.height===D,fitsInViewportVertically:A===o.height,fitsInViewportHorizontally:g==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,o=i.right-n.x,s=JG(this._overlayRef.getConfig().minHeight),a=JG(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=ZG(n),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=o.width?l||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,h=r.height<=o.height?c||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new yAe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,h,p;if("top"===n.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),g=this._lastBoundingBoxSize.height;o=2*m,s=e.y-m,o>g&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-g/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)p=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),g=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>g&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-g/2)}return{top:s,left:h,bottom:a,right:p,width:d,height:o}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=io(i.height),r.top=io(i.top),r.bottom=io(i.bottom),r.width=io(i.width),r.left=io(i.left),r.right=io(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=io(o)),s&&(r.maxWidth=io(s))}this._lastBoundingBoxSize=i,Uf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Uf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Uf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Uf(i,this._getExactOverlayY(n,e,d)),Uf(i,this._getExactOverlayX(n,e,d))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=io(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=io(s.maxWidth):o&&(i.maxWidth="")),Uf(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=io(o.y),r}_getExactOverlayX(e,n,i){let s,r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=io(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:XG(e,i),isOriginOutsideView:_2(e,i),isOverlayClipped:XG(n,i),isOverlayOutsideView:_2(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&G1(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Nt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function Uf(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function JG(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(xAe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function ZG(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const QG="cdk-global-overlay-wrapper";class AAe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(QG),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",g="",A="";c?A="flex-start":"center"===d?(A="center",p?g=h:m=h):p?"left"===d||"end"===d?(A="flex-end",m=h):("right"===d||"start"===d)&&(A="flex-start",g=h):"left"===d||"start"===d?(A="flex-start",m=h):("right"===d||"end"===d)&&(A="flex-end",g=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":g,n.justifyContent=A,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(QG),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let SAe=(()=>{var t;class e{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new AAe}flexibleConnectedTo(i){return new EAe(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(p2),it(Yn),it(Tr),it(oA))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),CAe=0,Il=(()=>{var t;class e{constructor(i,r,o,s,a,c,l,d,h,p,m,g){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=h,this._location=p,this._outsideClickDispatcher=m,this._animationsModuleType=g}create(i){const r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new b2(i);return a.direction=a.direction||this._directionality.value,new E0(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(i){const r=this._document.createElement("div");return r.id="cdk-overlay-"+CAe++,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){const i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(ef)),new pAe(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(bAe),it(oA),it(Rt),it(SAe),it(vAe),it(dr),it(cn),it(Yn),it(Bf),it(Qb),it(wAe),it(Cr,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Vf(t,e){return{type:7,name:t,definitions:e,options:{}}}function ic(t,e=null){return{type:4,styles:e,timings:t}}function fo(t){return{type:6,styles:t,offset:null}}function rc(t,e,n){return{type:0,name:t,styles:e,options:n}}function Oc(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function A0(t){return new le(e=>{Ri(t()).subscribe(e)})}function x2(t){return Q(()=>t)}function m9(t,e){return e?n=>o0(e.pipe(Yi(1),function fSe(){return L((t,e)=>{t.subscribe(w(e,b))})}()),n.pipe(m9(t))):Y((n,i)=>Ri(t(n,i)).pipe(Yi(1),x2(n)))}function g9(t,e=z1){const n=f2(t,e);return m9(()=>n)}function w9(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return Q(n=>{let i=n;for(let r=0;r<e;r++){const o=i?.[t[r]];if(!(typeof o<"u"))return;i=o}return i})}function Hf(t){return L((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}T(1563);class cA{}class lA{}class Pc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Pc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Pc;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Pc?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class BSe{encodeKey(e){return x9(e)}encodeValue(e){return x9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const USe=/%(\d[a-f0-9])/gi,VSe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function x9(t){return encodeURIComponent(t).replace(USe,(e,n)=>VSe[n]??e)}function dA(t){return`${t}`}class xr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new BSe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function jSe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(dA):[dA(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new xr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(dA(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(dA(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Io{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function E9(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function A9(t){return typeof Blob<"u"&&t instanceof Blob}function S9(t){return typeof FormData<"u"&&t instanceof FormData}class C0{constructor(e,n,i,r){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function HSe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Pc),this.context||(this.context=new Io),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new xr,this.urlWithParams=n}serializeBody(){return null===this.body?null:E9(this.body)||A9(this.body)||S9(this.body)||function zSe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||S9(this.body)?null:A9(this.body)?this.body.type||null:E9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),l)),new C0(n,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var yg=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(yg||{});class E2{constructor(e,n=200,i="OK"){this.headers=e.headers||new Pc,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class A2 extends E2{constructor(e={}){super(e),this.type=yg.ResponseHeader}clone(e={}){return new A2({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vg extends E2{constructor(e={}){super(e),this.type=yg.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new vg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class C9 extends E2{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function S2(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Yu=(()=>{var t;class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof C0)s=i;else{let l,d;l=o.headers instanceof Pc?o.headers:new Pc(o.headers),o.params&&(d=o.params instanceof xr?o.params:new xr({fromObject:o.params})),s=new C0(i,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const a=$t(s).pipe(function S0(t,e){return R(e)?Y(t,e,1):Y(t,1)}(l=>this.handler.handle(l)));if(i instanceof C0||"events"===o.observe)return a;const c=a.pipe(_i(l=>l instanceof vg));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(Q(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Q(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Q(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return c.pipe(Q(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:(new xr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,S2(o,r))}post(i,r,o={}){return this.request("POST",i,S2(o,r))}put(i,r,o={}){return this.request("PUT",i,S2(o,r))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(cA))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();function I9(t,e){return e(t)}function WSe(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}const YSe=new yt(""),T0=new yt(""),D9=new yt("");function XSe(){let t=null;return(e,n)=>{null===t&&(t=(Gt(YSe,{optional:!0})??[]).reduceRight(WSe,I9));const i=Gt(Cx),r=i.add();return t(e,n).pipe(Hf(()=>i.remove(r)))}}let R9=(()=>{var t;class e extends cA{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=Gt(Cx)}handle(i){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(T0),...this.injector.get(D9,[])]));this.chain=o.reduceRight((s,a)=>function $Se(t,e,n){return(i,r)=>n.runInContext(()=>e(i,o=>t(o,r)))}(s,a,this.injector),I9)}const r=this.pendingTasks.add();return this.chain(i,o=>this.backend.handle(o)).pipe(Hf(()=>this.pendingTasks.remove(r)))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(lA),it(ys))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const ZSe=/^\)\]\}',?\n/;let O9=(()=>{var t;class e{constructor(i){this.xhrFactory=i}handle(i){if("JSONP"===i.method)throw new Pt(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?xi(r.\u0275loadImpl()):$t(null)).pipe(Le(()=>new le(s=>{const a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((D,j)=>a.setRequestHeader(D,j.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){const D=i.detectContentTypeHeader();null!==D&&a.setRequestHeader("Content-Type",D)}if(i.responseType){const D=i.responseType.toLowerCase();a.responseType="json"!==D?D:"text"}const c=i.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const D=a.statusText||"OK",j=new Pc(a.getAllResponseHeaders()),k=function QSe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(a)||i.url;return l=new A2({headers:j,status:a.status,statusText:D,url:k}),l},h=()=>{let{headers:D,status:j,statusText:k,url:ue}=d(),we=null;204!==j&&(we=typeof a.response>"u"?a.responseText:a.response),0===j&&(j=we?200:0);let Be=j>=200&&j<300;if("json"===i.responseType&&"string"==typeof we){const We=we;we=we.replace(ZSe,"");try{we=""!==we?JSON.parse(we):null}catch(Ke){we=We,Be&&(Be=!1,we={error:Ke,text:we})}}Be?(s.next(new vg({body:we,headers:D,status:j,statusText:k,url:ue||void 0})),s.complete()):s.error(new C9({error:we,headers:D,status:j,statusText:k,url:ue||void 0}))},p=D=>{const{url:j}=d(),k=new C9({error:D,status:a.status||0,statusText:a.statusText||"Unknown Error",url:j||void 0});s.error(k)};let m=!1;const g=D=>{m||(s.next(d()),m=!0);let j={type:yg.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(j.total=D.total),"text"===i.responseType&&a.responseText&&(j.partialText=a.responseText),s.next(j)},A=D=>{let j={type:yg.UploadProgress,loaded:D.loaded};D.lengthComputable&&(j.total=D.total),s.next(j)};return a.addEventListener("load",h),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),i.reportProgress&&(a.addEventListener("progress",g),null!==c&&a.upload&&a.upload.addEventListener("progress",A)),a.send(c),s.next({type:yg.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",h),a.removeEventListener("timeout",p),i.reportProgress&&(a.removeEventListener("progress",g),null!==c&&a.upload&&a.upload.removeEventListener("progress",A)),a.readyState!==a.DONE&&a.abort()}})))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(bj))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const C2=new yt("XSRF_ENABLED"),P9=new yt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),N9=new yt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class F9{}let nCe=(()=>{var t;class e{constructor(i,r,o){this.doc=i,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=sj(i,this.cookieName),this.lastCookieString=i),this.lastToken}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yn),it(vs),it(P9))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();function iCe(t,e){const n=t.url.toLowerCase();if(!Gt(C2)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const i=Gt(F9).getToken(),r=Gt(N9);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var Xu=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Xu||{});function zf(t,e){return{\u0275kind:t,\u0275providers:e}}function rCe(...t){const e=[Yu,O9,R9,{provide:cA,useExisting:R9},{provide:lA,useExisting:O9},{provide:T0,useValue:iCe,multi:!0},{provide:C2,useValue:!0},{provide:F9,useClass:nCe}];for(const n of t)e.push(...n.\u0275providers);return function fb(t){return{\u0275providers:t}}(e)}const L9=new yt("LEGACY_INTERCEPTOR_FN");let B9=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({providers:[rCe(zf(Xu.LegacyInterceptors,[{provide:L9,useFactory:XSe},{provide:T0,useExisting:L9,multi:!0}]))]}),e})();const uCe=["*"];let hA;function M0(t){return function hCe(){if(void 0===hA&&(hA=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(hA=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return hA}()?.createHTML(t)||t}function j9(t){return Error(`Unable to find icon with the name "${t}"`)}function U9(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function V9(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Gf{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let fA=(()=>{var t;class e{constructor(i,r,o,s){this._httpClient=i,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(i,r,o){return this.addSvgIconInNamespace("",i,r,o)}addSvgIconLiteral(i,r,o){return this.addSvgIconLiteralInNamespace("",i,r,o)}addSvgIconInNamespace(i,r,o,s){return this._addSvgIconConfig(i,r,new Gf(o,null,s))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,o,s){const a=this._sanitizer.sanitize(Jr.HTML,o);if(!a)throw V9(o);const c=M0(a);return this._addSvgIconConfig(i,r,new Gf("",c,s))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,o){return this._addSvgIconSetConfig(i,new Gf(r,null,o))}addSvgIconSetLiteralInNamespace(i,r,o){const s=this._sanitizer.sanitize(Jr.HTML,r);if(!s)throw V9(r);const a=M0(s);return this._addSvgIconSetConfig(i,new Gf("",a,o))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){const r=this._sanitizer.sanitize(Jr.RESOURCE_URL,i);if(!r)throw U9(i);const o=this._cachedIconsByUrl.get(r);return o?$t(pA(o)):this._loadSvgIconFromConfig(new Gf(i,null)).pipe(Pi(s=>this._cachedIconsByUrl.set(r,s)),Q(s=>pA(s)))}getNamedSvgIcon(i,r=""){const o=H9(r,i);let s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,i),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):xd(j9(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?$t(pA(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(Q(r=>pA(r)))}_getSvgFromIconSetConfigs(i,r){const o=this._extractIconWithNameFromAnySet(i,r);return o?$t(o):r0(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(ec(c=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(Jr.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),$t(null)})))).pipe(Q(()=>{const a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw j9(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.svgText&&s.svgText.toString().indexOf(i)>-1){const a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,i,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(Pi(r=>i.svgText=r),Q(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?$t(null):this._fetchIcon(i).pipe(Pi(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,o){const s=i.querySelector(`[id="${r}"]`);if(!s)return null;const a=s.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,o);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),o);const c=this._svgElementFromString(M0("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(i){const r=this._document.createElement("DIV");r.innerHTML=i;const o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(i){const r=this._svgElementFromString(M0("<svg></svg>")),o=i.attributes;for(let s=0;s<o.length;s++){const{name:a,value:c}=o[s];"id"!==a&&r.setAttribute(a,c)}for(let s=0;s<i.childNodes.length;s++)i.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){const{url:r,options:o}=i,s=o?.withCredentials??!1;if(!this._httpClient)throw function fCe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Jr.RESOURCE_URL,r);if(!a)throw U9(r);const c=this._inProgressUrlFetches.get(a);if(c)return c;const l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(Q(d=>M0(d)),Hf(()=>this._inProgressUrlFetches.delete(a)),Oo());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(i,r,o){return this._svgIconConfigs.set(H9(i,r),o),this}_addSvgIconSetConfig(i,r){const o=this._iconSetConfigs.get(i);return o?o.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){const r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let o=0;o<this._resolvers.length;o++){const s=this._resolvers[o](r,i);if(s)return mCe(s)?new Gf(s.url,null,s.options):new Gf(s,null)}}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yu,8),it(oy),it(Yn,8),it(yc))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function pA(t){return t.cloneNode(!0)}function H9(t,e){return t+":"+e}function mCe(t){return!(!t.url||!t.options)}const gCe=b0(class{constructor(t){this._elementRef=t}}),_Ce=new yt("MAT_ICON_DEFAULT_OPTIONS"),bCe=new yt("mat-icon-location",{providedIn:"root",factory:function yCe(){const t=Gt(Yn),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),z9=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],vCe=z9.map(t=>`[${t}]`).join(", "),wCe=/^url\(['"]?#(.*?)['"]?\)$/;let wg=(()=>{var t;class e extends gCe{get inline(){return this._inline}set inline(i){this._inline=ci(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){const r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){const r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,o,s,a,c){super(i),this._iconRegistry=r,this._location=s,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=H.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),o||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];const r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const i=this._elementsWithExternalReferences;if(i&&i.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){const i=this._elementRef.nativeElement;let r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const o=i.childNodes[r];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>i.classList.remove(o)),r.forEach(o=>i.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return"string"==typeof i?i.trim().split(" ")[0]:i}_prependPathToReferences(i){const r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){const r=i.querySelectorAll(vCe),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)z9.forEach(a=>{const c=r[s],l=c.getAttribute(a),d=l?l.match(wCe):null;if(d){let h=o.get(c);h||(h=[],o.set(c,h)),h.push({name:a,value:d[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){const[r,o]=this._splitIconName(i);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(Yi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${o}! ${s.message}`))})}}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Nt),Ve(fA),_c("aria-hidden"),Ve(bCe),Ve(yc),Ve(_Ce,8))},t.\u0275cmp=An({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(vi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),On("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[_n],ngContentSelectors:uCe,decls:1,vars:0,template:function(i,r){1&i&&(Vr(),kn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})();function XCe(t,e){}class mA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let K9=(()=>{var t;class e extends g2{constructor(i,r,o,s,a,c,l,d){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const p=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),p},this._document=o,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{i.removeEventListener("blur",o),i.removeEventListener("mousedown",o),i.removeAttribute("tabindex")};i.addEventListener("blur",o),i.addEventListener("mousedown",o)})),i.focus(r)}_focusByCssSelector(i,r){let o=this._elementRef.nativeElement.querySelector(i);o&&this._forceFocus(o,r)}_trapFocus(){const i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const i=this._config.restoreFocus;let r=null;if("string"==typeof i?r=this._document.querySelector(i):"boolean"==typeof i?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&"function"==typeof r.focus){const o=j1(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const i=this._elementRef.nativeElement,r=j1();return i===r||i.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=j1())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Nt),Ve(c2),Ve(Yn,8),Ve(mA),Ve(Y1),Ve(cn),Ve(E0),Ve($u))},t.\u0275cmp=An({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Oi(rA,7),2&i){let o;Ln(o=Bn())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&vi("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[_n],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&pn(0,XCe,0,0,"ng-template",0)},dependencies:[rA],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class M2{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Se,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!kc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const J9=new yt("DialogScrollStrategy"),qCe=new yt("DialogData"),KCe=new yt("DefaultDialogConfig");let QCe=0,Z9=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,o,s,a,c){this._overlay=i,this._injector=r,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Se,this._afterOpenedAtThisLevel=new Se,this._ariaHiddenElements=new Map,this.afterAllClosed=A0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(tc(void 0))),this._scrollStrategy=c}open(i,r){(r={...this._defaultOptions||new mA,...r}).id=r.id||"cdk-dialog-"+QCe++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),a=this._overlay.create(s),c=new M2(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){I2(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){I2(this._openDialogsAtThisLevel,i=>{!1===i.config.closeOnDestroy&&this._removeOpenDialog(i,!1)}),I2(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){const r=new b2({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,o){const s=o.injector||o.viewContainerRef?.injector,a=[{provide:mA,useValue:o},{provide:M2,useValue:r},{provide:E0,useValue:i}];let c;o.container?"function"==typeof o.container?c=o.container:(c=o.container.type,a.push(...o.container.providers(o))):c=K9;const l=new nA(c,o.viewContainerRef,dr.create({parent:s||this._injector,providers:a}),o.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,o,s){if(i instanceof $a){const a=this._createInjector(s,r,o,void 0);let c={$implicit:s.data,dialogRef:r};s.templateContext&&(c={...c,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),o.attachTemplatePortal(new iA(i,null,c,a))}else{const a=this._createInjector(s,r,o,this._injector),c=o.attachComponentPortal(new nA(i,s.viewContainerRef,a,s.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,o,s){const a=i.injector||i.viewContainerRef?.injector,c=[{provide:qCe,useValue:i.data},{provide:M2,useValue:r}];return i.providers&&("function"==typeof i.providers?c.push(...i.providers(r,i,o)):c.push(...i.providers)),i.direction&&(!a||!a.get(Bf,null,{optional:!0}))&&c.push({provide:Bf,useValue:{value:i.direction,change:$t()}}),dr.create({parent:a||s,providers:c})}_removeOpenDialog(i,r){const o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const i=this._overlayContainer.getContainerElement();if(i.parentElement){const r=i.parentElement.children;for(let o=r.length-1;o>-1;o--){const s=r[o];s!==i&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Il),it(dr),it(KCe,8),it(t,12),it(oA),it(J9))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();function I2(t,e){let n=t.length;for(;n--;)e(t[n])}function tTe(t,e){}class gA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const D2="mdc-dialog--open",Q9="mdc-dialog--opening",e7="mdc-dialog--closing";let rTe=(()=>{var t;class e extends K9{constructor(i,r,o,s,a,c,l,d){super(i,r,o,s,a,c,l,d),this._animationStateChanged=new rn}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Nt),Ve(c2),Ve(Yn,8),Ve(gA),Ve(Y1),Ve(cn),Ve(E0),Ve($u))},t.\u0275cmp=An({type:t,selectors:[["ng-component"]],features:[_n],decls:0,vars:0,template:function(i,r){},encapsulation:2}),e})();const t7="--mat-dialog-transition-duration";function n7(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?nc(t.substring(0,t.length-2)):t.endsWith("s")?1e3*nc(t.substring(0,t.length-1)):"0"===t?0:null}let oTe=(()=>{var t;class e extends rTe{constructor(i,r,o,s,a,c,l,d,h){super(i,r,o,s,a,c,l,h),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?n7(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?n7(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(t7,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Q9,D2)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(D2),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(D2),this._animationsEnabled?(this._hostElement.style.setProperty(t7,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(e7)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(Q9,e7)}_waitForAnimationToComplete(i,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(i):i()})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Nt),Ve(c2),Ve(Yn,8),Ve(gA),Ve(Y1),Ve(cn),Ve(E0),Ve(Cr,8),Ve($u))},t.\u0275cmp=An({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(ul("id",r._config.id),vi("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),On("_mat-animation-noopable",!r._animationsEnabled))},features:[_n],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Ct(0,"div",0)(1,"div",1),pn(2,tTe,0,0,"ng-template",2),It()())},dependencies:[rA],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),e})();class R2{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Se,this._beforeClosed=new Se,this._state=0,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(_i(r=>"opened"===r.state),Yi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(_i(r=>"closed"===r.state),Yi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),gr(this.backdropClick(),this.keydownEvents().pipe(_i(r=>27===r.keyCode&&!this.disableClose&&!kc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function sTe(t,e,n){t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(_i(n=>"closing"===n.state),Yi(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const i7=new yt("MatMdcDialogData"),aTe=new yt("mat-mdc-dialog-default-options"),r7=new yt("mat-mdc-dialog-scroll-strategy");let dTe=0,uTe=(()=>{var t;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,o,s,a,c,l,d,h,p){this._overlay=i,this._defaultOptions=o,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=d,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Se,this._afterOpenedAtThisLevel=new Se,this._idPrefix="mat-dialog-",this.dialogConfigClass=gA,this.afterAllClosed=A0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(tc(void 0))),this._scrollStrategy=c,this._dialog=r.get(Z9)}open(i,r){let o;(r={...this._defaultOptions||new gA,...r}).id=r.id||`${this._idPrefix}${dTe++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(i,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:mA,useValue:r}]},templateContext:()=>({dialogRef:o}),providers:(a,c,l)=>(o=new this._dialogRefConstructor(a,r,l),o.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:o}])});return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(o);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}}return(t=e).\u0275fac=function(i){Eu()},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),_A=(()=>{var t;class e extends uTe{constructor(i,r,o,s,a,c,l,d){super(i,r,s,c,l,a,R2,oTe,i7,d),this._idPrefix="mat-mdc-dialog-"}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Il),it(dr),it(Qb,8),it(aTe,8),it(r7),it(t,12),it(oA),it(Cr,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),hTe=0,o7=(()=>{var t;class e{constructor(i,r,o){this._dialogRef=i,this._elementRef=r,this._dialog=o,this.id="mat-mdc-dialog-title-"+hTe++}ngOnInit(){this._dialogRef||(this._dialogRef=function fTe(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const i=this._dialogRef?._containerInstance?._ariaLabelledByQueue;i&&Promise.resolve().then(()=>{const r=i.indexOf(this.id);r>-1&&i.splice(r,1)})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(R2,8),Ve(Nt),Ve(_A))},t.\u0275dir=Ut({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&ul("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),e})(),s7=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=Ut({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),e})(),l7=(()=>{var t;class e{constructor(){this._listeners=[]}notify(i,r){for(let o of this._listeners)o(i,r)}listen(i){return this._listeners.push(i),()=>{this._listeners=this._listeners.filter(r=>i!==r)}}ngOnDestroy(){this._listeners=[]}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const d7=new yt("CdkAccordion");let pTe=0,mTe=(()=>{var t;class e{get expanded(){return this._expanded}set expanded(i){i=ci(i),this._expanded!==i&&(this._expanded=i,this.expandedChange.emit(i),i?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(i){this._disabled=ci(i)}constructor(i,r,o){this.accordion=i,this._changeDetectorRef=r,this._expansionDispatcher=o,this._openCloseAllSubscription=H.EMPTY,this.closed=new rn,this.opened=new rn,this.destroyed=new rn,this.expandedChange=new rn,this.id="cdk-accordion-child-"+pTe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=o.listen((s,a)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===a&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(i=>{this.disabled||(this.expanded=i)})}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(d7,12),Ve(eo),Ve(l7))},t.\u0275dir=Ut({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[ai([{provide:d7,useValue:void 0}])]}),e})();const _Te=["body"];function bTe(t,e){}const yTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],vTe=["mat-expansion-panel-header","*","mat-action-row"];function wTe(t,e){1&t&&jn(0,"span",2),2&t&&jt("@indicatorRotate",Fn()._getExpandedState())}const xTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ETe=["mat-panel-title","mat-panel-description","*"],u7=new yt("MAT_ACCORDION"),h7="225ms cubic-bezier(0.4,0.0,0.2,1)",f7={indicatorRotate:Vf("indicatorRotate",[rc("collapsed, void",fo({transform:"rotate(0deg)"})),rc("expanded",fo({transform:"rotate(180deg)"})),Oc("expanded <=> collapsed, void => collapsed",ic(h7))]),bodyExpansion:Vf("bodyExpansion",[rc("collapsed, void",fo({height:"0px",visibility:"hidden"})),rc("expanded",fo({height:"*",visibility:""})),Oc("expanded <=> collapsed, void => collapsed",ic(h7))])},p7=new yt("MAT_EXPANSION_PANEL");let ATe=(()=>{var t;class e{constructor(i,r){this._template=i,this._expansionPanel=r}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve($a),Ve(p7,8))},t.\u0275dir=Ut({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),STe=0;const m7=new yt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let g7=(()=>{var t;class e extends mTe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(i){this._hideToggle=ci(i)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(i){this._togglePosition=i}constructor(i,r,o,s,a,c,l){super(i,r,o),this._viewContainerRef=s,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new rn,this.afterCollapse=new rn,this._inputChanges=new Se,this._headerId="mat-expansion-panel-header-"+STe++,this._bodyAnimationDone=new Se,this.accordion=i,this._document=a,this._bodyAnimationDone.pipe(nt((d,h)=>d.fromState===h.fromState&&d.toState===h.toState)).subscribe(d=>{"void"!==d.fromState&&("expanded"===d.toState?this.afterExpand.emit():"collapsed"===d.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(tc(null),_i(()=>this.expanded&&!this._portal),Yi(1)).subscribe(()=>{this._portal=new iA(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(i){this._inputChanges.next(i)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const i=this._document.activeElement,r=this._body.nativeElement;return i===r||r.contains(i)}return!1}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(u7,12),Ve(eo),Ve(l7),Ve(Bo),Ve(Yn),Ve(Cr,8),Ve(m7,8))},t.\u0275cmp=An({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&function Qr(t,e,n,i){const r=di();if(r.firstCreatePass){const o=qr();WB(r,new HB(e,n,i),o.index),function tZ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}GB(r,kt(),n)}(o,ATe,5),2&i){let s;Ln(s=Bn())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&Oi(_Te,5),2&i){let o;Ln(o=Bn())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&On("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[ai([{provide:u7,useValue:void 0},{provide:p7,useExisting:t}]),_n,Sr],ngContentSelectors:vTe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(Vr(yTe),kn(0),Ct(1,"div",0,1),bn("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),Ct(3,"div",2),kn(4,1),pn(5,bTe,0,0,"ng-template",3),It(),kn(6,2),It()),2&i&&(Ot(1),jt("@bodyExpansion",r._getExpandedState())("id",r.id),vi("aria-labelledby",r._headerId),Ot(4),jt("cdkPortalOutlet",r._portal))},dependencies:[rA],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[f7.bodyExpansion]},changeDetection:0}),e})();class CTe{}const TTe=J1(CTe);let MTe=(()=>{var t;class e extends TTe{constructor(i,r,o,s,a,c,l){super(),this.panel=i,this._element=r,this._focusMonitor=o,this._changeDetectorRef=s,this._animationMode=c,this._parentChangeSubscription=H.EMPTY;const d=i.accordion?i.accordion._stateChanges.pipe(_i(h=>!(!h.hideToggle&&!h.togglePosition))):Fe;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=gr(i.opened,i.closed,d,i._inputChanges.pipe(_i(h=>!!(h.hideToggle||h.disabled||h.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),i.closed.pipe(_i(()=>i._containsFocus())).subscribe(()=>o.focusVia(r,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const i=this._isExpanded();return i&&this.expandedHeight?this.expandedHeight:!i&&this.collapsedHeight?this.collapsedHeight:null}_keydown(i){switch(i.keyCode){case 32:case 13:kc(i)||(i.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(i))}}focus(i,r){i?this._focusMonitor.focusVia(this._element,i,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(i=>{i&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(g7,1),Ve(Nt),Ve($u),Ve(eo),Ve(m7,8),Ve(Cr,8),_c("tabindex"))},t.\u0275cmp=An({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&bn("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(vi("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),mx("height",r._getHeaderHeight()),On("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[_n],ngContentSelectors:ETe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(Vr(xTe),Ct(0,"span",0),kn(1),kn(2,1),kn(3,2),It(),pn(4,wTe,1,1,"span",1)),2&i&&(On("mat-content-hide-toggle",!r._showToggle()),Ot(4),jt("ngIf",r._showToggle()))},dependencies:[Sc],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[f7.indicatorRotate]},changeDetection:0}),e})();function _7(t,e,n){return n?_7(t,e).pipe(n0(n)):new le(i=>{const r=(...s)=>i.next(1===s.length?s[0]:s),o=t(r);return R(e)?()=>e(r,o):void 0})}function bA(){return L((t,e)=>{let n=null;t._refCount++;const i=w(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}class O2 extends le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Z(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new H;const n=this.getSubject();e.add(this.source.subscribe(w(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=H.EMPTY)}return e}refCount(){return bA()(this)}}const RTe={connector:()=>new Se};function b7(t,e=RTe){const{connector:n}=e;return L((i,r)=>{const o=n();Ri(t(function DTe(t){return new le(e=>t.subscribe(e))}(o))).subscribe(r),r.add(i.subscribe(o))})}function y7(t,e){const n=R(t)?t:()=>t;return R(e)?b7(e,{connector:n}):i=>new O2(i,n)}function P2(...t){const e=Vt(t);return L((n,i)=>{const r=t.length,o=new Array(r);let s=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)Ri(t[c]).subscribe(w(i,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(Ye))&&(s=null))},b));n.subscribe(w(i,c=>{if(a){const l=[c,...o];i.next(e?e(...l):l)}}))})}const{isArray:PTe}=Array;function NTe(t){return 1===t.length&&PTe(t[0])?t[0]:t}function w7(...t){const e=Vt(t);return e?st(w7(...t),n0(e)):L((n,i)=>{mz([n,...NTe(t)])(i)})}const LTe=["youtubeContainer"];let A7=(()=>{var t;class e{get videoId(){return this._videoId.value}set videoId(i){this._videoId.next(i)}get height(){return this._height.value}set height(i){this._height.next(i||390)}get width(){return this._width.value}set width(i){this._width.next(i||640)}set startSeconds(i){this._startSeconds.next(i)}set endSeconds(i){this._endSeconds.next(i)}set suggestedQuality(i){this._suggestedQuality.next(i)}get playerVars(){return this._playerVars.value}set playerVars(i){this._playerVars.next(i)}get disableCookies(){return this._disableCookies.value}set disableCookies(i){this._disableCookies.next(!!i)}constructor(i,r){this._ngZone=i,this._youtubeContainer=new Se,this._destroyed=new Se,this._playerChanges=new ce(void 0),this._videoId=new ce(void 0),this._height=new ce(390),this._width=new ce(640),this._startSeconds=new ce(void 0),this._endSeconds=new ce(void 0),this._suggestedQuality=new ce(void 0),this._playerVars=new ce(void 0),this._disableCookies=new ce(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=Tu(r)}ngOnInit(){if(!this._isBrowser)return;let i=$t(!0);if(!window.YT||!window.YT.Player){const s=new Se;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>s.next(!0))},i=s.pipe(Yi(1),tc(!1))}const r=this._disableCookies.pipe(Q(s=>s?"https://www.youtube-nocookie.com":void 0)),o=function VTe(t,e,n,i,r,o,s,a){const c=Qa([e,n,s]).pipe(P2(Qa([r,o])),Q(([l,d])=>{const[h,p,m]=l,[g,A]=d;if(h||m?.list&&m?.listType)return{videoId:h,playerVars:m,width:g,height:A,host:p}}));return Qa([t,c,$t(a)]).pipe(function HTe(t){return st(w7(t),function FTe(t){return L((e,n)=>{let i=!1,r=0;e.subscribe(w(n,o=>(i||(i=!t(o,r++)))&&n.next(o)))})}(([e,n])=>!n),Q(([e])=>e))}(i),function v7(t,e){return L(function OTe(t,e,n,i,r){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(w(s,d=>{const h=l++;c=a?t(c,d,h):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}(zTe,void 0),nt())}(this._youtubeContainer,this._videoId,r,i,this._width,this._height,this._playerVars,this._ngZone).pipe(Pi(s=>{this._playerChanges.next(s)}),function UTe(t){return Y(e=>e?S7(e)?$t(e):new le(n=>{let i=!1,r=!1;const o=s=>{r=!0,i||(s.target.removeEventListener("onReady",o),n.next(s.target))};return e.addEventListener("onReady",o),()=>{i=!0,r||t(e)}}).pipe(Yi(1),tc(void 0)):$t(void 0))}(s=>{S7(s)||s.destroy()}),fr(this._destroyed),function kTe(t){return t?e=>b7(t)(e):e=>y7(new Se)(e)}());o.subscribe(s=>{this._player=s,s&&this._pendingPlayerState&&this._initializePlayer(s,this._pendingPlayerState),this._pendingPlayerState=void 0}),function BTe(t,e,n){Qa([t,e,n]).subscribe(([i,r,o])=>i&&i.setSize(r,o))}(o,this._width,this._height),function jTe(t,e){Qa([t,e]).subscribe(([n,i])=>n&&i&&n.setPlaybackQuality(i))}(o,this._suggestedQuality),function GTe(t,e,n,i,r,o){const s=Qa([n,i]).pipe(Q(([d,h])=>({startSeconds:d,endSeconds:h}))),a=s.pipe(N2(t,d=>!!d&&!function WTe(t){const e=t.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),c=e.pipe(N2(t,(d,h)=>!!d&&d.videoId!==h));gr(t.pipe(N2(Qa([e,s]),([d,h],p)=>!(!p||d==p.videoId&&!h.startSeconds&&!h.endSeconds))),c,a).pipe(P2(Qa([t,e,s,r])),Q(([d,h])=>h),fr(o)).subscribe(([d,h,p,m])=>{!h||!d||(d.videoId=h,d.cueVideoById({videoId:h,suggestedQuality:m,...p}))})}(o,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),o.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(i,r){this._player?this._player.seekTo(i,r):this._getPendingState().seek={seconds:i,allowSeekAhead:r}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(i){this._player?this._player.setVolume(i):this._getPendingState().volume=i}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(i){if(this._player)return this._player.setPlaybackRate(i);this._getPendingState().playbackRate=i}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(i,r){const{playbackState:o,playbackRate:s,volume:a,muted:c,seek:l}=r;switch(o){case YT.PlayerState.PLAYING:i.playVideo();break;case YT.PlayerState.PAUSED:i.pauseVideo();break;case YT.PlayerState.CUED:i.stopVideo()}null!=s&&i.setPlaybackRate(s),null!=a&&i.setVolume(a),null!=c&&(c?i.mute():i.unMute()),null!=l&&i.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(i){return this._playerChanges.pipe(Le(r=>r?_7(o=>{r.addEventListener(i,o)},o=>{try{r.removeEventListener&&r.removeEventListener(i,o)}catch{}}):$t()),r=>new le(o=>r.subscribe({next:s=>this._ngZone.run(()=>o.next(s)),error:s=>o.error(s),complete:()=>o.complete()})),fr(this._destroyed))}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(cn),Ve(vs))},t.\u0275cmp=An({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Oi(LTe,5),2&i){let o;Ln(o=Bn())&&(r.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&jn(0,"div",null,0)},encapsulation:2,changeDetection:0}),e})();function zTe(t,[e,n,i]){if(t&&n&&(t.playerVars!==n.playerVars||t.host!==n.host))t.destroy();else{if(!n)return void(t&&t.destroy());if(t)return t}const r=i.runOutsideAngular(()=>new YT.Player(e,n));return r.videoId=n.videoId,r.playerVars=n.playerVars,r.host=n.host,r}function S7(t){return"getPlayerStatus"in t}function N2(t,e){return st(P2(t),_i(([n,i])=>e(i,n)),Q(([n])=>n))}function C7(t=YTe){return L((e,n)=>{let i=!1;e.subscribe(w(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function YTe(){return new t0}let $f={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const M7=/[&<>"']/,qTe=new RegExp(M7.source,"g"),I7=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,KTe=new RegExp(I7.source,"g"),JTe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},D7=t=>JTe[t];function is(t,e){if(e){if(M7.test(t))return t.replace(qTe,D7)}else if(I7.test(t))return t.replace(KTe,D7);return t}const ZTe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function R7(t){return t.replace(ZTe,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const QTe=/(^|[^\[])\^/g;function Xi(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(i,r)=>(r=(r=r.source||r).replace(QTe,"$1"),t=t.replace(i,r),n),getRegex:()=>new RegExp(t,e)};return n}const eMe=/[^\w:]/g,tMe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function k7(t,e,n){if(t){let i;try{i=decodeURIComponent(R7(n)).replace(eMe,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!tMe.test(n)&&(n=function oMe(t,e){yA[" "+t]||(yA[" "+t]=nMe.test(t)?t+"/":wA(t,"/",!0));const n=-1===(t=yA[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(iMe,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(rMe,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const yA={},nMe=/^[^:]+:\/*[^/]*$/,iMe=/^([^:]+:)[\s\S]*$/,rMe=/^([^:]+:\/*[^/]*)[\s\S]*$/,vA={exec:function(){}};function O7(t,e){const i=t.replace(/\|/g,(o,s,a)=>{let c=!1,l=s;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function wA(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const o=t.charAt(i-r-1);if(o!==e||n){if(o===e||!n)break;r++}else r++}return t.slice(0,i-r)}function P7(t,e){if(e<1)return"";let n="";for(;e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function N7(t,e,n,i){const r=e.href,o=e.title?is(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:o,text:is(s)}}class F2{constructor(e){this.options=e||$f}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:wA(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function cMe(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[s]=o;return s.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=wA(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:o,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i,r,o,s,a,c,l,d,h,p,m,g,A=n[1].trim();const D=A.length>1,j={type:"list",raw:"",ordered:D,start:D?+A.slice(0,-1):"",loose:!1,items:[]};A=D?`\\d{1,9}\\${A.slice(-1)}`:`\\${A}`,this.options.pedantic&&(A=D?A:"[*+-]");const k=new RegExp(`^( {0,3}${A})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(g=!1,(n=k.exec(e))&&!this.rules.block.hr.test(e));){if(i=n[0],e=e.substring(i.length),d=n[2].split("\n",1)[0].replace(/^\t+/,we=>" ".repeat(3*we.length)),h=e.split("\n",1)[0],this.options.pedantic?(s=2,m=d.trimLeft()):(s=n[2].search(/[^ ]/),s=s>4?1:s,m=d.slice(s),s+=n[1].length),c=!1,!d&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),g=!0),!g){const we=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Be=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),We=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),Ke=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(p=e.split("\n",1)[0],h=p,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(We.test(h)||Ke.test(h)||we.test(h)||Be.test(e)));){if(h.search(/[^ ]/)>=s||!h.trim())m+="\n"+h.slice(s);else{if(c||d.search(/[^ ]/)>=4||We.test(d)||Ke.test(d)||Be.test(d))break;m+="\n"+h}!c&&!h.trim()&&(c=!0),i+=p+"\n",e=e.substring(p.length+1),d=h.slice(s)}}j.loose||(l?j.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(m),r&&(o="[ ] "!==r[0],m=m.replace(/^\[[ xX]\] +/,""))),j.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:m}),j.raw+=i}j.items[j.items.length-1].raw=i.trimRight(),j.items[j.items.length-1].text=m.trimRight(),j.raw=j.raw.trimRight();const ue=j.items.length;for(a=0;a<ue;a++)if(this.lexer.state.top=!1,j.items[a].tokens=this.lexer.blockTokens(j.items[a].text,[]),!j.loose){const we=j.items[a].tokens.filter(We=>"space"===We.type),Be=we.length>0&&we.some(We=>/\n.*\n/.test(We.raw));j.loose=Be}if(j.loose)for(a=0;a<ue;a++)j.items[a].loose=!0;return j}}html(e){const n=this.rules.block.html.exec(e);if(n){const i={type:"html",raw:n[0],pre:!this.options.sanitizer&&("pre"===n[1]||"script"===n[1]||"style"===n[1]),text:n[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(n[0]):is(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:o}}}table(e){const n=this.rules.block.table.exec(e);if(n){const i={type:"table",header:O7(n[1]).map(r=>({text:r})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=n[0];let o,s,a,c,r=i.align.length;for(o=0;o<r;o++)i.align[o]=/^ *-+: *$/.test(i.align[o])?"right":/^ *:-+: *$/.test(i.align[o])?"center":/^ *:-+ *$/.test(i.align[o])?"left":null;for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=O7(i.rows[o],i.header.length).map(l=>({text:l}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(r=i.rows.length,s=0;s<r;s++)for(c=i.rows[s],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:is(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):is(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=wA(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function sMe(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let i=0,r=0;for(;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return-1}(n[2],"()");if(s>-1){const c=(0===n[0].indexOf("!")?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let r=n[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),N7(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return N7(i,r,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){const s=r[0].length-1;let a,c,l=s,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+s);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=a.length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&s%3&&!((s+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const p=e.slice(0,s+r.index+(r[0].length-a.length)+c);if(Math.min(s,c)%2){const g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=is(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const i=this.rules.inline.autolink.exec(e);if(i){let r,o;return"@"===i[2]?(r=is(this.options.mangle?n(i[1]):i[1]),o="mailto:"+r):(r=is(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,n){let i;if(i=this.rules.inline.url.exec(e)){let r,o;if("@"===i[2])r=is(this.options.mangle?n(i[0]):i[0]),o="mailto:"+r;else{let s;do{s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(s!==i[0]);r=is(i[0]),o="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,n){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):is(i[0]):i[0]:is(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Mn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:vA,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Mn.def=Xi(Mn.def).replace("label",Mn._label).replace("title",Mn._title).getRegex(),Mn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Mn.listItemStart=Xi(/^( *)(bull) */).replace("bull",Mn.bullet).getRegex(),Mn.list=Xi(Mn.list).replace(/bull/g,Mn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Mn.def.source+")").getRegex(),Mn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Mn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Mn.html=Xi(Mn.html,"i").replace("comment",Mn._comment).replace("tag",Mn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Mn.paragraph=Xi(Mn._paragraph).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.blockquote=Xi(Mn.blockquote).replace("paragraph",Mn.paragraph).getRegex(),Mn.normal={...Mn},Mn.gfm={...Mn.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Mn.gfm.table=Xi(Mn.gfm.table).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.gfm.paragraph=Xi(Mn._paragraph).replace("hr",Mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Mn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mn._tag).getRegex(),Mn.pedantic={...Mn.normal,html:Xi("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Mn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:vA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Xi(Mn.normal._paragraph).replace("hr",Mn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Mn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const ln={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:vA,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:vA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function lMe(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function F7(t){let n,i,e="";const r=t.length;for(n=0;n<r;n++)i=t.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}ln._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ln.punctuation=Xi(ln.punctuation).replace(/punctuation/g,ln._punctuation).getRegex(),ln.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ln.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,ln._comment=Xi(Mn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),ln.emStrong.lDelim=Xi(ln.emStrong.lDelim).replace(/punct/g,ln._punctuation).getRegex(),ln.emStrong.rDelimAst=Xi(ln.emStrong.rDelimAst,"g").replace(/punct/g,ln._punctuation).getRegex(),ln.emStrong.rDelimUnd=Xi(ln.emStrong.rDelimUnd,"g").replace(/punct/g,ln._punctuation).getRegex(),ln._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ln._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ln._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ln.autolink=Xi(ln.autolink).replace("scheme",ln._scheme).replace("email",ln._email).getRegex(),ln._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ln.tag=Xi(ln.tag).replace("comment",ln._comment).replace("attribute",ln._attribute).getRegex(),ln._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ln._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ln._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ln.link=Xi(ln.link).replace("label",ln._label).replace("href",ln._href).replace("title",ln._title).getRegex(),ln.reflink=Xi(ln.reflink).replace("label",ln._label).replace("ref",Mn._label).getRegex(),ln.nolink=Xi(ln.nolink).replace("ref",Mn._label).getRegex(),ln.reflinkSearch=Xi(ln.reflinkSearch,"g").replace("reflink",ln.reflink).replace("nolink",ln.nolink).getRegex(),ln.normal={...ln},ln.pedantic={...ln.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Xi(/^!?\[(label)\]\((.*?)\)/).replace("label",ln._label).getRegex(),reflink:Xi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ln._label).getRegex()},ln.gfm={...ln.normal,escape:Xi(ln.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ln.gfm.url=Xi(ln.gfm.url,"i").replace("email",ln.gfm._extended_email).getRegex(),ln.breaks={...ln.gfm,br:Xi(ln.br).replace("{2,}","*").getRegex(),text:Xi(ln.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class qu{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||$f,this.options.tokenizer=this.options.tokenizer||new F2,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Mn.normal,inline:ln.normal};this.options.pedantic?(n.block=Mn.pedantic,n.inline=ln.pedantic):this.options.gfm&&(n.block=Mn.gfm,n.inline=this.options.breaks?ln.breaks:ln.gfm),this.tokenizer.rules=n}static get rules(){return{block:Mn,inline:ln}}static lex(e,n){return new qu(n).lex(e)}static lexInline(e,n){return new qu(n).inlineTokens(e)}lex(e){let n;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){let i,r,o,s;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(d){l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=n[n.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,o,a,c,l,s=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+P7("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+P7("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(s));)s=s.slice(0,a.index+a[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e,F7)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,F7))){e=e.substring(i.raw.length),n.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(function(m){p=m.call({lexer:this},h),"number"==typeof p&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o,lMe)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return n}}class D0{constructor(e){this.options=e||$f}code(e,n,i){const r=(n||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,r);null!=o&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+is(r)+'">'+(i?e:is(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:is(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,n,i,r){return this.options.headerIds?`<h${n} id="${this.options.headerPrefix+r.slug(i)}">${e}</h${n}>\n`:`<h${n}>${e}</h${n}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){if(null===(e=k7(this.options.sanitize,this.options.baseUrl,e)))return i;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>",r}image(e,n,i){if(null===(e=k7(this.options.sanitize,this.options.baseUrl,e)))return i;let r=`<img src="${e}" alt="${i}"`;return n&&(r+=` title="${n}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class L7{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class B7{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{r++,i=e+"-"+r}while(this.seen.hasOwnProperty(i))}return n||(this.seen[e]=r,this.seen[i]=0),i}slug(e,n={}){const i=this.serialize(e);return this.getNextSafeSlug(i,n.dryrun)}}class Ku{constructor(e){this.options=e||$f,this.options.renderer=this.options.renderer||new D0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new L7,this.slugger=new B7}static parse(e,n){return new Ku(n).parse(e)}static parseInline(e,n){return new Ku(n).parseInline(e)}parse(e,n=!0){let r,o,s,a,c,l,d,h,p,m,g,A,D,j,k,ue,we,Be,We,i="";const Ke=e.length;for(r=0;r<Ke;r++)if(m=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(We=this.options.extensions.renderers[m.type].call({parser:this},m),!1!==We||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)))i+=We||"";else switch(m.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(m.tokens),m.depth,R7(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(m.text,m.lang,m.escaped);continue;case"table":for(h="",d="",a=m.header.length,o=0;o<a;o++)d+=this.renderer.tablecell(this.parseInline(m.header[o].tokens),{header:!0,align:m.align[o]});for(h+=this.renderer.tablerow(d),p="",a=m.rows.length,o=0;o<a;o++){for(l=m.rows[o],d="",c=l.length,s=0;s<c;s++)d+=this.renderer.tablecell(this.parseInline(l[s].tokens),{header:!1,align:m.align[s]});p+=this.renderer.tablerow(d)}i+=this.renderer.table(h,p);continue;case"blockquote":p=this.parse(m.tokens),i+=this.renderer.blockquote(p);continue;case"list":for(g=m.ordered,A=m.start,D=m.loose,a=m.items.length,p="",o=0;o<a;o++)k=m.items[o],ue=k.checked,we=k.task,j="",k.task&&(Be=this.renderer.checkbox(ue),D?k.tokens.length>0&&"paragraph"===k.tokens[0].type?(k.tokens[0].text=Be+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&"text"===k.tokens[0].tokens[0].type&&(k.tokens[0].tokens[0].text=Be+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:Be}):j+=Be),j+=this.parse(k.tokens,D),p+=this.renderer.listitem(j,we,ue);i+=this.renderer.list(p,g,A);continue;case"html":i+=this.renderer.html(m.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(m.tokens));continue;case"text":for(p=m.tokens?this.parseInline(m.tokens):m.text;r+1<Ke&&"text"===e[r+1].type;)m=e[++r],p+="\n"+(m.tokens?this.parseInline(m.tokens):m.text);i+=n?this.renderer.paragraph(p):p;continue;default:{const ut='Token with "'+m.type+'" type was not found.';if(this.options.silent)return void console.error(ut);throw new Error(ut)}}return i}parseInline(e,n){n=n||this.renderer;let r,o,s,i="";const a=e.length;for(r=0;r<a;r++)if(o=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))i+=s||"";else switch(o.type){case"escape":case"text":i+=n.text(o.text);break;case"html":i+=n.html(o.text);break;case"link":i+=n.link(o.href,o.title,this.parseInline(o.tokens,n));break;case"image":i+=n.image(o.href,o.title,o.text);break;case"strong":i+=n.strong(this.parseInline(o.tokens,n));break;case"em":i+=n.em(this.parseInline(o.tokens,n));break;case"codespan":i+=n.codespan(o.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(o.tokens,n));break;default:{const c='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return i}}class xA{constructor(e){this.options=e||$f}preprocess(e){return e}postprocess(e){return e}}function j7(t,e){return(n,i,r)=>{"function"==typeof i&&(r=i,i=null);const o={...i},s=function dMe(t,e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const r="<p>An error occurred:</p><pre>"+is(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):n?void n(null,r):r}if(e)return Promise.reject(i);if(!n)throw i;n(i)}}((i={...In.defaults,...o}).silent,i.async,r);if(typeof n>"u"||null===n)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function aMe(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const a=i.highlight;let c;try{i.hooks&&(n=i.hooks.preprocess(n)),c=t(n,i)}catch(h){return s(h)}const l=function(h){let p;if(!h)try{i.walkTokens&&In.walkTokens(c,i.walkTokens),p=e(c,i),i.hooks&&(p=i.hooks.postprocess(p))}catch(m){h=m}return i.highlight=a,h?s(h):r(null,p)};if(!a||a.length<3||(delete i.highlight,!c.length))return l();let d=0;return In.walkTokens(c,function(h){"code"===h.type&&(d++,setTimeout(()=>{a(h.text,h.lang,function(p,m){if(p)return l(p);null!=m&&m!==h.text&&(h.text=m,h.escaped=!0),d--,0===d&&l()})},0))}),void(0===d&&l())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(a=>t(a,i)).then(a=>i.walkTokens?Promise.all(In.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>e(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(s);try{i.hooks&&(n=i.hooks.preprocess(n));const a=t(n,i);i.walkTokens&&In.walkTokens(a,i.walkTokens);let c=e(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return s(a)}}}function In(t,e,n){return j7(qu.lex,Ku.parse)(t,e,n)}ve(xA,"passThroughHooks",new Set(["preprocess","postprocess"])),In.options=In.setOptions=function(t){return function XTe(t){$f=t}(In.defaults={...In.defaults,...t}),In},In.getDefaults=function T7(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},In.defaults=$f,In.use=function(...t){const e=In.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(n=>{const i={...n};if(i.async=In.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers[r.name];e.renderers[r.name]=o?function(...s){let a=r.renderer.apply(this,s);return!1===a&&(a=o.apply(this,s)),a}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=In.defaults.renderer||new D0;for(const o in n.renderer){const s=r[o];r[o]=(...a)=>{let c=n.renderer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.renderer=r}if(n.tokenizer){const r=In.defaults.tokenizer||new F2;for(const o in n.tokenizer){const s=r[o];r[o]=(...a)=>{let c=n.tokenizer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.tokenizer=r}if(n.hooks){const r=In.defaults.hooks||new xA;for(const o in n.hooks){const s=r[o];r[o]=xA.passThroughHooks.has(o)?a=>{if(In.defaults.async)return Promise.resolve(n.hooks[o].call(r,a)).then(l=>s.call(r,l));const c=n.hooks[o].call(r,a);return s.call(r,c)}:(...a)=>{let c=n.hooks[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.hooks=r}if(n.walkTokens){const r=In.defaults.walkTokens;i.walkTokens=function(o){let s=[];return s.push(n.walkTokens.call(this,o)),r&&(s=s.concat(r.call(this,o))),s}}In.setOptions(i)})},In.walkTokens=function(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(In,i)),i.type){case"table":for(const r of i.header)n=n.concat(In.walkTokens(r.tokens,e));for(const r of i.rows)for(const o of r)n=n.concat(In.walkTokens(o.tokens,e));break;case"list":n=n.concat(In.walkTokens(i.items,e));break;default:In.defaults.extensions&&In.defaults.extensions.childTokens&&In.defaults.extensions.childTokens[i.type]?In.defaults.extensions.childTokens[i.type].forEach(function(r){n=n.concat(In.walkTokens(i[r],e))}):i.tokens&&(n=n.concat(In.walkTokens(i.tokens,e)))}return n},In.parseInline=j7(qu.lexInline,Ku.parseInline),In.Parser=Ku,In.parser=Ku.parse,In.Renderer=D0,In.TextRenderer=L7,In.Lexer=qu,In.lexer=qu.lex,In.Tokenizer=F2,In.Slugger=B7,In.Hooks=xA,In.parse=In;const uMe=["*"];let U7=(()=>{var t;class e{constructor(){this._buttonClick$=new Se,this.copied$=this._buttonClick$.pipe(Le(()=>gr($t(!0),f2(3e3).pipe(x2(!1)))),nt(),Is(1)),this.copiedText$=this.copied$.pipe(tc(!1),Q(i=>i?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Ct(0,"button",0),bn("click",function(){return r.onCopyToClipboardClick()}),Zr(1,"async"),si(2),Zr(3,"async"),It()),2&i&&(On("copied",Lo(1,3,r.copied$)),Ot(2),To(Lo(3,5,r.copiedText$)))},dependencies:[ny],encapsulation:2,changeDetection:0}),e})();class pMe{}var L2=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(L2||{});class gMe{}const V7=new yt("SECURITY_CONTEXT");let B2=(()=>{var t;class e{get options(){return this._options}set options(i){this._options={...this.DEFAULT_MARKED_OPTIONS,...i}}get renderer(){return this.options.renderer}set renderer(i){this.options.renderer=i}constructor(i,r,o,s,a,c){this.platform=i,this.securityContext=r,this.http=o,this.clipboardOptions=s,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new D0},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Se,this.reload$=this._reload$.asObservable(),this.options=a}parse(i,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:o,inline:s,emoji:a,mermaid:c,disableSanitizer:l}=r,d={...this.options,...r.markedOptions};c&&(this.renderer=this.extendRenderer(d.renderer||new D0));const h=this.trimIndentation(i),p=o?this.decodeHtml(h):h,m=a?this.parseEmoji(p):p,g=this.parseMarked(m,d,s);return(l?g:this.sanitizer.sanitize(this.securityContext,g))||""}render(i,r=this.DEFAULT_RENDER_OPTIONS,o){const{clipboard:s,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=r;s&&this.renderClipboard(i,o,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...a}),c&&this.renderKatex(i,{...this.DEFAULT_KATEX_OPTIONS,...l}),d&&this.renderMermaid(i,{...this.DEFAULT_MERMAID_OPTIONS,...h}),this.highlight(i)}reload(){this._reload$.next()}getSource(i){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(i,{responseType:"text"}).pipe(Q(r=>this.handleExtension(i,r)))}highlight(i){if(!Tu(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;i||(i=document);const r=i.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,o=>o.classList.add("language-none")),Prism.highlightAllUnder(i)}decodeHtml(i){if(!Tu(this.platform))return i;const r=document.createElement("textarea");return r.innerHTML=i,r.value}extendRenderer(i){const r=i;if(!0===r.\u0275NgxMarkdownRendererExtended)return i;const o=i.code;return i.code=function(s,a,c){return"mermaid"===a?`<div class="mermaid">${s}</div>`:o.call(this,s,a,c)},r.\u0275NgxMarkdownRendererExtended=!0,i}handleExtension(i,r){const o=i.lastIndexOf("://"),s=o>-1?i.substring(o+4):i,a=s.lastIndexOf("/"),c=a>-1?s.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&"md"!==d?"```"+d+"\n"+r+"\n```":r}parseMarked(i,r,o=!1){return o?In.parseInline(i,r):In.parse(i,r)}parseEmoji(i){if(!Tu(this.platform))return i;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(i)}renderKatex(i,r){if(Tu(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(i,r)}}renderClipboard(i,r,o){if(!Tu(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:a}=o,c=i.querySelectorAll("pre");for(let l=0;l<c.length;l++){const d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);const p=document.createElement("div");let m,g;p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.opacity="0",p.style.transition="opacity 250ms ease-out",h.insertAdjacentElement("beforeend",p),d.onmouseover=()=>p.style.opacity="1",d.onmouseout=()=>p.style.opacity="0",m=s?r.createComponent(s).hostView:a?r.createEmbeddedView(a):r.createComponent(U7).hostView,m.rootNodes.forEach(A=>{A.onmouseover=()=>p.style.opacity="1",p.appendChild(A),g=new ClipboardJS(A,{text:()=>d.innerText})}),m.onDestroy(()=>g.destroy())}}renderMermaid(i,r=this.DEFAULT_MERMAID_OPTIONS){if(!Tu(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const o=i.querySelectorAll(".mermaid");0!==o.length&&(mermaid.initialize(r),mermaid.init(o))}trimIndentation(i){if(!i)return"";let r;return i.split("\n").map(o=>{let s=r;return o.length>0&&(s=isNaN(s)?o.search(/\S|$/):Math.min(o.search(/\S|$/),s)),isNaN(r)&&(r=s),s?o.substring(s):o}).join("\n")}}return(t=e).\u0275fac=function(i){return new(i||t)(it(vs),it(V7),it(Yu,8),it(pMe,8),it(gMe,8),it(oy))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),H7=(()=>{var t;class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(i){this._disableSanitizer=this.coerceBooleanProperty(i)}get inline(){return this._inline}set inline(i){this._inline=this.coerceBooleanProperty(i)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(i){this._srcRelativeLink=this.coerceBooleanProperty(i)}get clipboard(){return this._clipboard}set clipboard(i){this._clipboard=this.coerceBooleanProperty(i)}get emoji(){return this._emoji}set emoji(i){this._emoji=this.coerceBooleanProperty(i)}get katex(){return this._katex}set katex(i){this._katex=this.coerceBooleanProperty(i)}get mermaid(){return this._mermaid}set mermaid(i){this._mermaid=this.coerceBooleanProperty(i)}get lineHighlight(){return this._lineHighlight}set lineHighlight(i){this._lineHighlight=this.coerceBooleanProperty(i)}get lineNumbers(){return this._lineNumbers}set lineNumbers(i){this._lineNumbers=this.coerceBooleanProperty(i)}get commandLine(){return this._commandLine}set commandLine(i){this._commandLine=this.coerceBooleanProperty(i)}constructor(i,r,o){this.element=i,this.markdownService=r,this.viewContainerRef=o,this.error=new rn,this.load=new rn,this.ready=new rn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new Se}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(fr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(i,r=!1){let o;this.src&&this.srcRelativeLink&&(o={baseUrl:new URL(this.src,location.origin).pathname});const a={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},c=this.markdownService.parse(i,{decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:o,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=c,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,a,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(i){return null!=i&&"false"!=`${String(i)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:i=>{this.render(i),this.load.emit(i)},error:i=>this.error.emit(i)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,L2.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,L2.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(i,r){const o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++){const a=r instanceof Array?r:[r];o.item(s).classList.add(...a)}}setPluginOptions(i,r){const o=i.querySelectorAll("pre");for(let s=0;s<o.length;s++)Object.keys(r).forEach(a=>{const c=r[a];if(c){const l=this.toLispCase(a);o.item(s).setAttribute(l,c.toString())}})}toLispCase(i){const r=i.match(/([A-Z])/g);if(!r)return i;let o=i.toString();for(let s=0,a=r.length;s<a;s++)o=o.replace(new RegExp(r[s]),"-"+r[s].toLowerCase());return"-"===o.slice(0,1)&&(o=o.slice(1)),o}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Nt),Ve(B2),Ve(Bo))},t.\u0275cmp=An({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[Sr],ngContentSelectors:uMe,decls:1,vars:0,template:function(i,r){1&i&&(Vr(),kn(0))},encapsulation:2}),e})();var z7;!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(z7||(z7={}));let G7=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=Ut({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]}),e})();function xg(t){return!0===t}function ta(t){return null===t||typeof t>"u"}function rs(t){return!ta(t)}function j2(t){return!!t}function K7(t){return ta(t)?t:JSON.parse(JSON.stringify(t))}function J7(t){return rs(t)&&"object"==typeof t&&function U2(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}const cIe="NGXS_COMPUTED_OPTION",eW="NGXS_DATA_META",V2="NGXS_META",tW="NGXS_ARGUMENT_REGISTRY_META";let nW=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new ce(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(it(Ml,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();function k0(t){return t[eW]}let sc=(()=>{class t{constructor(n,i,r){t.store=n.get(Ml),t.ngZone=n.get(cn),t.factory=i,t.context=r,t.computed=n.get(nW),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(it(dr),it(yz),it(vz))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();class Gr{constructor(){Gr.statesCachedMeta.clear()}static createStateContext(e){return sc.context.createStateContext(e)}static ensureMappedState(e){if(ta(sc.factory)||ta(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(rs(e.name)?Gr.statesCachedMeta.get(e.name):null)||Gr.ensureMeta(e)}static getRepositoryByInstance(e){const i=k0(Gr.getStateClassByInstance(e))??null;if(ta(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=Gr.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[o,s]of r.entries()){const a=n?.getPayloadTypeByIndex(o);rs(a)&&(i[a]=s)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=Gr.createPayload(n,i),o=function hIe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new o(r)}static ensureMeta(e){const n=rs(e.name)?sc.factory.states?.find(i=>i.name===e.name):null;return rs(n)&&rs(e.name)&&Gr.statesCachedMeta.set(e.name,n),n}}Gr.statesCachedMeta=new Map,Gr.\u0275fac=function(e){return new(e||Gr)},Gr.\u0275prov=St({token:Gr,factory:Gr.\u0275fac}),new class fIe{constructor(){this.subject=new rf(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function Td(t,e){const n=arguments.length>=2;return i=>i.pipe(t?_i((r,o)=>t(r,o,i)):Ye,Yi(1),n?lg(e):C7(()=>new t0))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new rf(1)}};class mIe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${rs(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function iW(t){return t.NGXS_OPTIONS_META??{name:""}}function rW(t){const e=iW(t),n=e.children??[],r=K7(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(J7(r))return function gIe(t,e){return e.reduce((n,i)=>{const r=iW(i);if(function R0(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=rW(i),n},t??{})}(r,n);throw new mIe(r)}return r}function oW(){return`__${cIe}__`}function sW(t){return t[oW()]??null}function aW(){return sc?.computed?.sequenceValue??0}function yIe(t){let e=!1;return If(t)&&(e=!0),e}function H2(t){return t[tW]}class vIe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class wIe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if(j2(this.argumentMap.has(e))||j2(this.payloadMap.has(e)))throw new vIe(e,n)}}function TIe(t){return{enumerable:!0,configurable:!0,get(){const e=k0(t),n=Gr.ensureMappedState(e.stateMeta);return Gr.createStateContext(n)}}}const OIe={dataActionSubscribeRequired:!0},PIe=new yt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>OIe});let NIe=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[Gr,sc,nW,...n]}}}return t.\u0275fac=function(n){return new(n||t)(it(Gr,2),it(sc,2))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),t})();function cW(){return(t,e,n)=>{!function uIe(t,e){if(!function tIe(t,e){let n=t,i=!1;if(J7(n))for(;null!==n;){if(xg(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const o=function bIe(t){return ta(sW(t))&&Object.defineProperties(t,{[oW()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),sW(t)}(this),s=o?.get(i);if(xg(s?.isObservable))return s?.value;if(ta(s)||s.sequenceId!==aW()){o.delete(i);const c=i.apply(this,r);return o.set(i,{value:c,sequenceId:aW(),isObservable:yIe(c)}),c}return s?.value},n}}const FIe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function z2(t={}){const e=function LIe(t){const e=sc?.injector?.get(PIe,void 0,fn.Optional),n={...FIe};return rs(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function dIe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const o=r.value,s=i.toString();return r.value=function(...a){const c=this;let l=null;const d=Gr.getRepositoryByInstance(c),h=d.operations;let p=h[s];const m=d.stateMeta,g=H2(o);if(ta(p)){const ue=function kIe(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(o),we=function pIe(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let o="";for(let s=0;s<n.length;s++)rs(r?.getArgumentNameByIndex(s))?o+=r?.getArgumentNameByIndex(s):rs(r?.getPayloadTypeByIndex(s))?o+=r?.getPayloadTypeByIndex(s):o+=`$arg${s}`,s!==n.length-1&&(o+=", ");return`@${e.replace(/\./g,"/")}.${i}(${o})`}({statePath:m.path,methodName:s,argumentsNames:ue,argumentRegistry:g});p=h[s]={type:we,options:{cancelUncompleted:e.cancelUncompleted??!1}},rs(p)&&(m.actions[p.type]=[{type:p.type,options:p.options,fn:p.type}])}Gr.ensureMappedState(m).instance[p.type]=()=>(xg(e.insideZone)?sc.ngZone?.run(()=>{l=o.apply(c,a)}):l=o.apply(c,a),If(l)&&xg(e.subscribeRequired)?$t(null).pipe(Q(()=>l)):l);const j=Gr.createAction(p,a,g),k=sc.store.dispatch(j);return If(l)?function _Ie(t,e){return r0([t,e]).pipe(Q(n=>n.pop()))}(k,l):l},r}}function lW(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function xIe(t,e){const n=t[e];return ta(H2(n))&&Object.defineProperties(n,{[tW]:{enumerable:!0,configurable:!0,value:new wIe}}),H2(n)})(e,n).createPayloadType(r,n,i)}}function jIe(){return t=>{const e=function RIe(t){if(function GMe(t){return!j2(t)}(t.hasOwnProperty(V2))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,V2,{value:e})}return function DIe(t){return t?.[V2]}(t)}(t);if(ta(e.name))throw new Error("@StateRepository should be add before decorator @State");!function SIe(t,e){(function AIe(t){const e=k0(t)??null;return(ta(e)||e?.stateClass!==t)&&function EIe(t){Object.defineProperty(t,eW,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),k0(t)}(t)).stateMeta=e}(t,e),function UIe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>K7(n)},context:TIe(t)})}(t,e,rW(t)),function MIe(t){const n=k0(t)?.stateMeta?.name??null;if(rs(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(rs(this[i]))return this[i];if(ta(sc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=sc.store.select(t).pipe(Q(r=>r),Is({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let VIe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new Se,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})(),HIe=(()=>{class t extends VIe{get snapshot(){return this.getState()}get ctx(){return function IIe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=Ci(t)))(i||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac}),mt([cW(),v("design:type",Object),v("design:paramtypes",[])],t.prototype,"snapshot",null),mt([z2(),gt(0,lW("patchValue")),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],t.prototype,"patchState",null),mt([z2(),gt(0,lW("stateValue")),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],t.prototype,"setState",null),mt([z2(),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",void 0)],t.prototype,"reset",null),t})(),d$=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Ut({type:t,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),t})();const Y0=new yt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),uP=new yt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=Gt(Yn);if(!t)throw new Error("Window is not available");return t}}),ZRe=new yt("ngx-data-layer",{providedIn:"root",factory:()=>function JRe(t){return t?t.dataLayer=t.dataLayer||[]:null}(Gt(uP))}),u$=new yt("ngx-gtag-fn",{providedIn:"root",factory:()=>function QRe(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(Gt(uP),Gt(ZRe))});let X0=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,o])=>Object.defineProperty(i,r,{value:o,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,o,s,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),o&&c.set("value",o),void 0!==s&&c.set("interaction",s),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",n,l):this.gtag("event",n)}catch(c){this.throw(c)}}pageView(n,i,r,o){try{const s=new Map([["page_path",n]]);i&&s.set("page_title",i),(r||this.document)&&s.set("page_location",r||this.document.location.href),o&&Object.entries(o).map(([a,c])=>s.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(s))}catch(s){this.throw(s)}}appView(n,i,r,o,s){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),o&&a.set("app_version",o),s&&a.set("app_installer_id",s),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(it(Y0),it(Yn),it(u$))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),eke=(()=>{class t{constructor(n,i,r,o){this.gaCategoryDirective=n,this.gaService=i,this.settings=r,this.el=o,this.gaBind="click"}set gaBind(n){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=n,this.bindSubscription=jf(this.el.nativeElement,n).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(n){this.throw(n)}}throw(n){this.settings.enableTracing&&console&&console.warn&&console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)(Ve(d$,8),Ve(X0),Ve(Y0),Ve(Nt))},t.\u0275dir=Ut({type:t,selectors:[["","gaEvent",""]],inputs:{gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent",gaBind:"gaBind"},exportAs:["gaEvent"]}),t})();const nke={provide:_M,multi:!0,useFactory:function ike(t,e,n){return Ht(function*(){if(!t.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");n||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),t.uri=t.uri||`https://www.googletagmanager.com/gtag/js?id=${t.trackingCode}`,t.initCommands=t?.initCommands??[],t.initCommands.find(o=>"config"===o.command)||t.initCommands.unshift({command:"config",values:[t.trackingCode]}),t.initCommands.find(o=>"js"===o.command)||t.initCommands.unshift({command:"js",values:[new Date]});for(const o of t.initCommands)e(o.command,...o.values);const i=n.createElement("script");i.async=!0,i.src=t.uri,t.nonce&&i.setAttribute("nonce",t.nonce),n.getElementsByTagName("head")[0].appendChild(i)})},deps:[Y0,u$,Yn]};new yt("ngx-google-analytics-routing-settings",{factory:()=>({})});let hP=(()=>{class t{static forRoot(n,i=[],r,o,s){return{ngModule:t,providers:[{provide:Y0,useValue:{trackingCode:n,initCommands:i,uri:r,enableTracing:o,nonce:s}},nke]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),t})(),zA=(()=>{var t;class e{constructor(){this.consent="not-set",this.consentChange=new rf(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(i){this.consent!==i&&(this.consent=i,this.consentChange.next(i))}unsetConsent(){this.setConsent("not-set")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),xke=(()=>{var t;class e{constructor(i,r,{trackingCode:o}){this.window=r,this.subscriptions=new H,this.token=o,this.subscriptions.add(i.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(i){this.window&&(this.window[`ga-disable-${this.token}`]=i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(zA),it(uP),it(Y0))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const Eke=new yt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),m$=[zA,xke,(()=>{var t;class e{constructor(i,r){this.key=r,this.subscriptions=new H;try{this.storage=localStorage}catch{}i.setConsent(this.loadConsent()),this.subscriptions.add(i.consentChange.subscribe(o=>this.saveConsent(o)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){const i=this.storage?.getItem?.(this.key);if(null==i)return"not-set";const r=i.trim().toLowerCase();switch(r){case"given":case"rescinded":return r;default:return"not-set"}}saveConsent(i){this.storage?.setItem?.(this.key,i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(zA),it(Eke))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})()];function Ake(t){return Object.entries(t).reduce((e,[n,i])=>(null!=i&&(e[n]=`${i}`),e),{})}let Cke=(()=>{var t;class e{static forRoot(i){const{providers:r=[]}=hP.forRoot(i.gaToken,function Ske(t){const{appName:e,projectName:n,developmentMode:i}=t;return[{command:"set",values:[Ake({appName:e,projectName:n,developmentMode:i})]}]}(i));return{ngModule:e,providers:r}}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({providers:[...m$,{provide:_M,multi:!0,useFactory:()=>()=>{},deps:m$}],imports:[hP]}),e})();class Mke{}const Dke=(t,e)=>JSON.stringify(t)===JSON.stringify(e),Rke=t=>t.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Lc={storageStrategy:class Ike extends Mke{constructor(){super(...arguments),this.cachePairs=[]}add(e,n,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,n){Object.assign(this.cachePairs[e],n)}update(e,n){Object.assign(this.cachePairs[e],n)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},kke=new Se;function Bc(t={}){return function(e,n,i){const r=t.cacheKey||e.constructor.name+"#"+n,o=i.value;if(i&&i.value){let s=t.storageStrategy?new t.storageStrategy:new Lc.storageStrategy;const a=[];t.cacheModifier&&t.cacheModifier.subscribe(d=>s.addMany(d(s.getAll(r,this)),r,this)),gr(kke.asObservable(),t.cacheBusterObserver?t.cacheBusterObserver:function $e(t){return t?function ot(t){return new le(e=>t.schedule(()=>e.complete()))}(t):Fe}()).subscribe(d=>{s.removeAll(r,this),a.length=0}),t.cacheResolver=t.cacheResolver||Lc.cacheResolver||Dke,t.cacheHasher=t.cacheHasher||Lc.cacheHasher||Rke,i.value=function(...d){const h=s.getAll(r,this);let p=t.cacheHasher(d),m=h.find(A=>t.cacheResolver(A.parameters,p));const g=a.find(A=>t.cacheResolver(A.parameters,p));if((t.maxAge||Lc.maxAge)&&m&&m.created&&((new Date).getTime()-new Date(m.created).getTime()>(t.maxAge||Lc.maxAge)?(s.remove?s.remove(h.indexOf(m),m,r,this):s.removeAtIndex(h.indexOf(m),r,this),m=null):(t.slidingExpiration||Lc.slidingExpiration)&&(m.created=new Date,s.update?s.update(h.indexOf(m),m,r,this):s.updateAtIndex(h.indexOf(m),m,r,this))),m){const A=$t(m.response);return t.async?A.pipe(g9(0)):A}if(g)return g.response;{const A=o.call(this,...d).pipe(Hf(()=>{const D=a.find(j=>t.cacheResolver(j.parameters,p));a.splice(a.indexOf(D),1)}),Pi(D=>{(!t.shouldCacheDecider||t.shouldCacheDecider(D))&&((!(t.maxCacheCount||Lc.maxCacheCount)||1===(t.maxCacheCount||Lc.maxCacheCount)||(t.maxCacheCount||Lc.maxCacheCount)&&(t.maxCacheCount||Lc.maxCacheCount)<h.length+1)&&(s.remove?s.remove(0,h[0],r,this):s.removeAtIndex(0,r,this)),s.add({parameters:p,response:D,created:t.maxAge||Lc.maxAge?new Date:null},r,this))}),function Tke(t,e,n,i){n&&!R(n)&&(i=n);const r=R(n)?n:void 0;return o=>y7(new rf(t,e,i),r)(o)}(1),bA());return a.push({parameters:p,response:A,created:new Date}),A}}}return i}}class Oke{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Pke=new yt("basePath");class GA{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:n=>this.defaultEncodeParam(n),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}selectHeaderAccept(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(n.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const n=this.credentials[e];return"function"==typeof n?n():n}defaultEncodeParam(e){const n="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(n))}}let fP,g$=(()=>{class t{constructor(n,i,r){this.httpClient=n,this.basePath="/v1",this.defaultHeaders=new Pc,this.configuration=new GA,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new Oke}addToHttpParams(n,i,r){return this.addToHttpParamsRecursive(n,i,r)}addToHttpParamsRecursive(n,i,r){if(null==i)return n;if("object"==typeof i)if(Array.isArray(i))i.forEach(o=>n=this.addToHttpParamsRecursive(n,o,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");n=n.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(o=>n=this.addToHttpParamsRecursive(n,i[o],null!=r?`${r}.${o}`:o));else{if(null==r)throw Error("key may not be null if value is not object or array");n=n.append(r,i)}return n}aggregateResults(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.providers,g=n.sex,A=n.spatial,D=n.technologies,j=n.token;let k=new xr({encoder:this.encoder});null!=s&&(k=this.addToHttpParams(k,s,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=c&&(k=this.addToHttpParams(k,c,"bmi")),null!=l&&(k=this.addToHttpParams(k,l,"bmi-range")),null!=d&&(k=this.addToHttpParams(k,d,"cache")),h&&h.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"ontology-terms")}),p&&p.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"providers")}),null!=g&&(k=this.addToHttpParams(k,g,"sex")),A&&A.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"spatial")}),D&&D.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"technologies")}),null!=j&&(k=this.addToHttpParams(k,j,"token"));let ue=this.defaultHeaders,we=o&&o.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(ue=ue.set("Accept",we));let Be=o&&o.context;void 0===Be&&(Be=new Io);let We="json";return we&&(We=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:Be,params:k,responseType:We,withCredentials:this.configuration.withCredentials,headers:ue,observe:i,reportProgress:r})}cellTypeTermOccurences(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.providers,g=n.sex,A=n.spatial,D=n.technologies,j=n.token;let k=new xr({encoder:this.encoder});null!=s&&(k=this.addToHttpParams(k,s,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=c&&(k=this.addToHttpParams(k,c,"bmi")),null!=l&&(k=this.addToHttpParams(k,l,"bmi-range")),null!=d&&(k=this.addToHttpParams(k,d,"cache")),h&&h.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"ontology-terms")}),p&&p.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"providers")}),null!=g&&(k=this.addToHttpParams(k,g,"sex")),A&&A.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"spatial")}),D&&D.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"technologies")}),null!=j&&(k=this.addToHttpParams(k,j,"token"));let ue=this.defaultHeaders,we=o&&o.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(ue=ue.set("Accept",we));let Be=o&&o.context;void 0===Be&&(Be=new Io);let We="json";return we&&(We=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:Be,params:k,responseType:We,withCredentials:this.configuration.withCredentials,headers:ue,observe:i,reportProgress:r})}cellTypeTreeModel(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new xr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new Io);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(n,i="body",r=!1,o){const s=n.token;let a=new xr({encoder:this.encoder});null!=s&&(a=this.addToHttpParams(a,s,"token"));let c=this.defaultHeaders,l=o&&o.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=o&&o.context;void 0===d&&(d=new Io);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(n,i="body",r=!1,o){const s=n.getSpatialPlacementRequest;if(null==s)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=o&&o.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=o&&o.context;void 0===l&&(l=new Io);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let p="json";return c&&(p=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,s,{context:l,responseType:p,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(n,i="body",r=!1,o){const s=n.cache;let a=new xr({encoder:this.encoder});null!=s&&(a=this.addToHttpParams(a,s,"cache"));let c=this.defaultHeaders,l=o&&o.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=o&&o.context;void 0===d&&(d=new Io);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new xr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new Io);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.providers,g=n.sex,A=n.spatial,D=n.technologies,j=n.token;let k=new xr({encoder:this.encoder});null!=s&&(k=this.addToHttpParams(k,s,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=c&&(k=this.addToHttpParams(k,c,"bmi")),null!=l&&(k=this.addToHttpParams(k,l,"bmi-range")),null!=d&&(k=this.addToHttpParams(k,d,"cache")),h&&h.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"ontology-terms")}),p&&p.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"providers")}),null!=g&&(k=this.addToHttpParams(k,g,"sex")),A&&A.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"spatial")}),D&&D.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"technologies")}),null!=j&&(k=this.addToHttpParams(k,j,"token"));let ue=this.defaultHeaders,we=o&&o.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(ue=ue.set("Accept",we));let Be=o&&o.context;void 0===Be&&(Be=new Io);let We="json";return we&&(We=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:Be,params:k,responseType:We,withCredentials:this.configuration.withCredentials,headers:ue,observe:i,reportProgress:r})}ontologyTreeModel(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new xr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new Io);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new xr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new Io);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(n,i="body",r=!1,o){const s=n.organIri;if(null==s)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=n.age,c=n.ageRange,l=n.bmi,d=n.bmiRange,h=n.cache,p=n.ontologyTerms,m=n.cellTypeTerms,g=n.providers,A=n.sex,D=n.spatial,j=n.technologies,k=n.token;let ue=new xr({encoder:this.encoder});null!=a&&(ue=this.addToHttpParams(ue,a,"age")),null!=c&&(ue=this.addToHttpParams(ue,c,"age-range")),null!=l&&(ue=this.addToHttpParams(ue,l,"bmi")),null!=d&&(ue=this.addToHttpParams(ue,d,"bmi-range")),null!=h&&(ue=this.addToHttpParams(ue,h,"cache")),p&&p.forEach(ut=>{ue=this.addToHttpParams(ue,ut,"ontology-terms")}),m&&m.forEach(ut=>{ue=this.addToHttpParams(ue,ut,"cell-type-terms")}),null!=s&&(ue=this.addToHttpParams(ue,s,"organ-iri")),g&&g.forEach(ut=>{ue=this.addToHttpParams(ue,ut,"providers")}),null!=A&&(ue=this.addToHttpParams(ue,A,"sex")),D&&D.forEach(ut=>{ue=this.addToHttpParams(ue,ut,"spatial")}),j&&j.forEach(ut=>{ue=this.addToHttpParams(ue,ut,"technologies")}),null!=k&&(ue=this.addToHttpParams(ue,k,"token"));let we=this.defaultHeaders,Be=o&&o.httpHeaderAccept;void 0===Be&&(Be=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Be&&(we=we.set("Accept",Be));let We=o&&o.context;void 0===We&&(We=new Io);let Ke="json";return Be&&(Ke=Be.startsWith("text")?"text":this.configuration.isJsonMime(Be)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:We,params:ue,responseType:Ke,withCredentials:this.configuration.withCredentials,headers:we,observe:i,reportProgress:r})}referenceOrgans(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new xr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new Io);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.providers,g=n.sex,A=n.spatial,D=n.technologies,j=n.token;let k=new xr({encoder:this.encoder});null!=s&&(k=this.addToHttpParams(k,s,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=c&&(k=this.addToHttpParams(k,c,"bmi")),null!=l&&(k=this.addToHttpParams(k,l,"bmi-range")),null!=d&&(k=this.addToHttpParams(k,d,"cache")),h&&h.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"ontology-terms")}),p&&p.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"providers")}),null!=g&&(k=this.addToHttpParams(k,g,"sex")),A&&A.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"spatial")}),D&&D.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"technologies")}),null!=j&&(k=this.addToHttpParams(k,j,"token"));let ue=this.defaultHeaders,we=o&&o.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(ue=ue.set("Accept",we));let Be=o&&o.context;void 0===Be&&(Be=new Io);let We="json";return we&&(We=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:Be,params:k,responseType:We,withCredentials:this.configuration.withCredentials,headers:ue,observe:i,reportProgress:r})}sparql(n,i="body",r=!1,o){const s=n.query;if(null==s)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=n.token,c=n.format;let l=new xr({encoder:this.encoder});null!=s&&(l=this.addToHttpParams(l,s,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=o&&o.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let p=o&&o.context;void 0===p&&(p=new Io);let m="json";return h&&(m=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}sparqlPost(n,i="body",r=!1,o){const s=n.sparqlQueryRequest;if(null==s)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=n.token,c=n.format;let l=new xr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=o&&o.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let p=o&&o.context;void 0===p&&(p=new Io);const g=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==g&&(d=d.set("Content-Type",g));let A="json";return h&&(A=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,s,{context:p,params:l,responseType:A,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}technologyNames(n,i="body",r=!1,o){const s=n.cache,a=n.token;let c=new xr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new Io);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(n,i="body",r=!1,o){const s=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,d=n.cache,h=n.ontologyTerms,p=n.cellTypeTerms,m=n.providers,g=n.sex,A=n.spatial,D=n.technologies,j=n.token;let k=new xr({encoder:this.encoder});null!=s&&(k=this.addToHttpParams(k,s,"age")),null!=a&&(k=this.addToHttpParams(k,a,"age-range")),null!=c&&(k=this.addToHttpParams(k,c,"bmi")),null!=l&&(k=this.addToHttpParams(k,l,"bmi-range")),null!=d&&(k=this.addToHttpParams(k,d,"cache")),h&&h.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"ontology-terms")}),p&&p.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"cell-type-terms")}),m&&m.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"providers")}),null!=g&&(k=this.addToHttpParams(k,g,"sex")),A&&A.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"spatial")}),D&&D.forEach(Ke=>{k=this.addToHttpParams(k,Ke,"technologies")}),null!=j&&(k=this.addToHttpParams(k,j,"token"));let ue=this.defaultHeaders,we=o&&o.httpHeaderAccept;void 0===we&&(we=this.configuration.selectHeaderAccept(["application/json"])),void 0!==we&&(ue=ue.set("Accept",we));let Be=o&&o.context;void 0===Be&&(Be=new Io);let We="json";return we&&(We=we.startsWith("text")?"text":this.configuration.isJsonMime(we)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:Be,params:k,responseType:We,withCredentials:this.configuration.withCredentials,headers:ue,observe:i,reportProgress:r})}}return t.\u0275fac=function(n){return new(n||t)(it(Yu),it(Pke,8),it(GA,8))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Nke=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:GA,useFactory:n}]}}constructor(n,i){if(n)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return t.\u0275fac=function(n){return new(n||t)(it(t,12),it(Yu,8))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),t})();function na(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function jc(){return fP||(fP=function Fke(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=na(n);return(r,o)=>i.then(s=>o(s.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),fP}function _$(t,e=jc()){return e("readonly",n=>na(n.get(t)))}var jke=T(5020),Uke=T(7661);const q0="http://www.w3.org/1999/02/22-rdf-syntax-ns#",K0="http://www.w3.org/2001/XMLSchema#",mP="http://www.w3.org/2000/10/swap/",ks={xsd:{decimal:`${K0}decimal`,boolean:`${K0}boolean`,double:`${K0}double`,integer:`${K0}integer`,string:`${K0}string`},rdf:{type:`${q0}type`,nil:`${q0}nil`,first:`${q0}first`,rest:`${q0}rest`,langString:`${q0}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${mP}reify#forSome`,forAll:`${mP}reify#forAll`},log:{implies:`${mP}log#implies`}};const{rdf:Vke,xsd:qf}=ks;let J0,Hke=0;const v$=/^"(.*".*)(?="[^"]*$)/,zke=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,gP={namedNode:function Xke(t){return new w$(t)},blankNode:function qke(t){return new Gke(t||"n3-"+Hke++)},variable:function Jke(t){return new Wke(t)},literal:function Kke(t,e){if("string"==typeof e)return new Rg(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=qf.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?qf.integer:qf.double:(n=qf.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new Rg(""===n||n===qf.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function Zke(){return J0},quad:x$,triple:x$},Mr=gP;class Dd{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Dd?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class w$ extends Dd{get termType(){return"NamedNode"}}class Rg extends Dd{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new w$(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?qf.string:Vke.langString}equals(e){return e instanceof Rg?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Gke extends Dd{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Wke extends Dd{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function Rd(t,e){if(e=e||gP,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===gP)return new Rg(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),"@"===t[n+1]?t.substr(n+2):e.namedNode(t.substr(n+3)));case"<":const i=zke.exec(t);return e.quad(Rd(WA(i[1]),e),Rd(WA(i[2]),e),Rd(WA(i[3]),e),i[4]&&Rd(WA(i[4]),e));default:return e.namedNode(t)}}function Bi(t){if("string"==typeof t)return t;if(t instanceof Dd&&"Quad"!==t.termType)return t.id;if(!t)return J0.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==qf.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${_P(Bi(t.subject))} ${_P(Bi(t.predicate))} ${_P(Bi(t.object))}${function b$(t){return!!t&&"DefaultGraph"===t.termType}(t.graph)?"":` ${Bi(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}J0=new class $ke extends Dd{constructor(){return super(""),J0||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class Yke extends Dd{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||J0}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function _P(t){return t.replace(v$,(e,n)=>`"${n.replace(/"/g,'""')}`)}function WA(t){return t.replace(v$,(e,n)=>`"${n.replace(/""/g,'"')}`)}function x$(t,e,n,i){return new Yke(t,e,n,i)}var Qke=T(3410),eOe=T.n(Qke);const{xsd:$A}=ks,tOe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,E$={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},nOe=/[\x00-\x20<>\\"\{\}\|\^\`]/,iOe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},rOe=/$0^/;class oOe{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in iOe)&&this[n]instanceof RegExp&&(this[n]=rOe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(c=this._comment.exec(i))&&o("comment",c[1],"",this._line,i.length),i=null,o("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",p="",m="",g=null,A=0,D=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(A=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){D=!0;break}case"<":if(g=this._unescapedIri.exec(i))h="IRI",p=g[1];else if(g=this._iri.exec(i)){if(p=this._unescape(g[1]),null===p||nOe.test(p))return s(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",A=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",A=2,p=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",A=2);break;case"_":((g=this._blank.exec(i))||n&&(g=this._blank.exec(`${i} `)))&&(h="blank",m="_",p=g[1]);break;case'"':if(g=this._simpleQuotedString.exec(i))p=g[1];else if(({value:p,matchLength:A}=this._parseLiteral(i)),null===p)return s(this);(null!==g||0!==A)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(g=this._simpleApostropheString.exec(i))p=g[1];else if(({value:p,matchLength:A}=this._parseLiteral(i)),null===p)return s(this);(null!==g||0!==A)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(g=this._variable.exec(i))&&(h="var",p=g[0]);break;case"@":"literal"===this._previousMarker&&(g=this._langcode.exec(i))?(h="langcode",p=g[1]):(g=this._keyword.exec(i))&&(h=g[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",A=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(g=this._number.exec(i)||n&&(g=this._number.exec(`${i} `)))&&(h="literal",p=g[0],m="string"==typeof g[1]?$A.double:"string"==typeof g[2]?$A.decimal:$A.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(g=this._sparqlKeyword.exec(i))?h=g[0].toUpperCase():D=!0;break;case"f":case"t":(g=this._boolean.exec(i))?(h="literal",p=g[0],m=$A.boolean):D=!0;break;case"a":(g=this._shortPredicates.exec(i))?(h="abbreviation",p="a"):D=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(A=1,p="="):(A=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(A=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",A=2):(h=d,A=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",A=2);break;default:D=!0}if(D&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(g=this._prefix.exec(i))?((g=this._prefixed.exec(i))||n&&(g=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=g[1]||"",p=this._unescape(g[2])):(h="prefix",p=g[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?s(this):this._input=i;const j=A||g[0].length,k=o(h,p,m,l,j);this.previousToken=k,this._previousMarker=h,i=i.substr(j,i.length)}function o(a,c,l,d,h){const p=i?r-i.length:r,g={type:a,value:c,prefix:l,line:d,start:p,end:p+h};return e(null,g),g}function s(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace(tOe,(r,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in E$?E$[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let o=0;for(;"\\"===e[r-o-1];)o++;if(o%2==0){const s=e.substring(i,r),a=s.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((o,s)=>o?r=o:i.push(s),!0),r)throw r;return i}eOe()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}let A$=0;class S${constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&C$(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),o=/triple/.test(n),s=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=o||s;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||o||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new oOe({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){A$=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:o,graph:n,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(void 0===o)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(o+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===o?null===a.predicate?a.subject=i:a.object=i:this._emit(o,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const s=this._predicate,a=this._object;o?this._emit(a,s,r,i):this._emit(r,s,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=bP}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,o=-1,s=0,a="/";for(;r<n;){switch(a){case":":if(o<0&&"/"===e[++r]&&"/"===e[++r])for(;(o=r+1)<n&&"/"!==e[o];)r=o;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return i+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(s,r-2),(s=i.lastIndexOf("/"))>=o&&(i=i.substr(0,s)),"/"!==a)return`${i}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return i+e.substring(s)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${A$++}_`,this._prefixCallback=i||bP,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&r.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return r}this._callback=n,this._lexer.tokenize(e,(r,o)=>{null!==r?(this._callback(r),this._callback=bP):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function bP(){}function C$(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(ks.rdf.first),t.RDF_REST=n(ks.rdf.rest),t.RDF_NIL=n(ks.rdf.nil),t.N3_FORALL=n(ks.r.forAll),t.N3_FORSOME=n(ks.r.forSome),t.ABBREVIATIONS={a:n(ks.rdf.type),"=":n(ks.owl.sameAs),">":n(ks.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}C$(S$.prototype,Mr);var yP=T(8905);class vP{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||Mr,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const o in n)for(const s in i=n[o].subjects)for(const a in r=i[s])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const o=e[n]||(e[n]={}),s=o[i]||(o[i]={}),a=r in s;return a||(s[r]=null),!a}_removeFromIndex(e,n,i,r){const o=e[n],s=o[i];delete s[r];for(const a in s)return;delete o[i];for(const a in o)return;delete e[n]}*_findInIndex(e,n,i,r,o,s,a,c){let l,d,h;const p=this._entities,m=Rd(c,this._factory),g={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const A in e)if(d=e[A]){g[o]=Rd(p[A],this._factory),i&&((l=d,d={})[i]=l[i]);for(const D in d)if(h=d[D]){g[s]=Rd(p[D],this._factory);const j=r?r in h?[r]:[]:Object.keys(h);for(let k=0;k<j.length;k++)g[a]=Rd(p[j[k]],this._factory),yield this._factory.quad(g.subject,g.predicate,g.object,m)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,o;if(r=e[n])for(o in r)i(o)}_loopByKey1(e,n,i){let r,o;for(r in e)o=e[r],o[n]&&i(r)}_loopBy2Keys(e,n,i,r){let o,s,a;if((o=e[n])&&(s=o[i]))for(a in s)r(a)}_countInIndex(e,n,i,r){let s,a,c,o=0;n&&((s=e,e={})[n]=s[n]);for(const l in e)if(a=e[l]){i&&((s=a,a={})[i]=s[i]);for(const d in a)(c=a[d])&&(r?r in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!Aa(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(Rd(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Bi(e),n=Bi(n),i=Bi(i),r=Bi(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const s=this._ids,a=this._entities;e=s[e]||(s[a[++this._id]=e]=this._id),n=s[n]||(s[a[++this._id]=n]=this._id),i=s[i]||(s[a[++this._id]=i]=this._id);const c=this._addToIndex(o.subjects,e,n,i);return this._addToIndex(o.predicates,n,i,e),this._addToIndex(o.objects,i,e,n),this._size=null,c}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),e=Bi(e),n=Bi(n),i=Bi(i),r=Bi(r);const o=this._ids,s=this._graphs;let a,c,l;if(!((e=o[e])&&(n=o[n])&&(i=o[i])&&(a=s[r])&&(c=a.subjects[e])&&(l=c[n])&&i in l))return!1;for(e in this._removeFromIndex(a.subjects,e,n,i),this._removeFromIndex(a.predicates,n,i,e),this._removeFromIndex(a.objects,i,e,n),null!==this._size&&this._size--,a.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const o=new yP.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,n,i,r))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){e=e&&Bi(e),n=n&&Bi(n),i=i&&Bi(i),r=r&&Bi(r);const o=this._getGraphs(r),s=this._ids;let a,c,l,d;if(!(Aa(e)&&!(c=s[e])||Aa(n)&&!(l=s[n])||Aa(i)&&!(d=s[i])))for(const h in o)(a=o[h])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",h):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",h):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h))}match(e,n,i,r){return new wP(this,e,n,i,r)}countQuads(e,n,i,r){e=e&&Bi(e),n=n&&Bi(n),i=i&&Bi(i),r=r&&Bi(r);const o=this._getGraphs(r),s=this._ids;let c,l,d,h,a=0;if(Aa(e)&&!(l=s[e])||Aa(n)&&!(d=s[n])||Aa(i)&&!(h=s[i]))return 0;for(const p in o)(c=o[p])&&(a+=e?i?this._countInIndex(c.objects,h,l,d):this._countInIndex(c.subjects,l,d,h):n?this._countInIndex(c.predicates,d,h,l):this._countInIndex(c.objects,h,l,d));return a}forEach(e,n,i,r,o){this.some(s=>(e(s),!1),n,i,r,o)}every(e,n,i,r,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),n,i,r,o);return s&&a}some(e,n,i,r,o){for(const s of this.readQuads(n,i,r,o))if(e(s))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(o=>{r.push(o)},e,n,i),r}forSubjects(e,n,i,r){n=n&&Bi(n),i=i&&Bi(i),r=r&&Bi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Aa(n)&&!(c=o[n])||Aa(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(o=>{r.push(o)},e,n,i),r}forPredicates(e,n,i,r){n=n&&Bi(n),i=i&&Bi(i),r=r&&Bi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Aa(n)&&!(c=o[n])||Aa(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(o=>{r.push(o)},e,n,i),r}forObjects(e,n,i,r){n=n&&Bi(n),i=i&&Bi(i),r=r&&Bi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Aa(n)&&!(c=o[n])||Aa(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(o=>{r.push(o)},e,n,i),r}forGraphs(e,n,i,r){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),n,i,r,o)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,ks.rdf.rest,ks.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let d,h,l=!1;const p=a.graph;let m=a.subject;for(;m&&!l;){const g=this.getQuads(null,null,m,null),A=this.getQuads(m,null,null,null);let D,j=null,k=null,ue=null;for(let we=0;we<A.length&&!l;we++)D=A[we],D.graph.equals(p)?d?l=r(m,"has non-list arcs out"):D.predicate.value===ks.rdf.first?j?l=r(m,"has multiple rdf:first arcs"):s.push(j=D):D.predicate.value===ks.rdf.rest?k?l=r(m,"has multiple rdf:rest arcs"):s.push(k=D):g.length?l=r(m,"can't be subject and object"):(d=D,h="subject"):l=r(m,"not confined to single graph");for(let we=0;we<g.length&&!l;++we)D=g[we],d?l=r(m,"can't have coreferences"):D.predicate.value===ks.rdf.rest?ue?l=r(m,"has incoming rdf:rest arcs"):ue=D:(d=D,h="object");j?c.unshift(j.object):l=r(m,"has no list head"),m=ue&&ue.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(s),i}*[Symbol.iterator](){yield*this.readQuads()}}function Aa(t){return"string"==typeof t||t instanceof String}class wP extends yP.Readable{constructor(e,n,i,r,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:o}=this,s=this._filtered=new vP({factory:e._factory});for(const a of e.readQuads(o,r,i,n))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new wP(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var sOe=T(2821);function Fr(t,e,n,i,r){return t.readQuads(e,n,i,r)}function T$(t){const e=t.length;let n=0;return new yP.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function xP(t,e){return EP.apply(this,arguments)}function EP(){return EP=Ht(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield(0,Uke.toRDF)(n);e.import(T$(i))}return e}),EP.apply(this,arguments)}function AP(){return AP=Ht(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new sOe.RdfXmlParser({dataFactory:Mr,strict:!0}),r=new Promise(o=>{i.once("end",()=>o(e))});return e.import(i),i.write(n),i.end(),r}return e}),AP.apply(this,arguments)}function SP(){return SP=Ht(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new S$({format:"n3"}).parse(n);e.import(T$(i))}return e}),SP.apply(this,arguments)}function CP(t,e){const n=JSON.parse(t),i=new vP;return Object.assign(i,n,{_factory:e??Mr}),i}const YA="Unknown Euler angle order",kg=.99999;var Do=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(Do||{});class Wr extends oE{static get ZYX(){return Do.ZYX}static get YXZ(){return Do.YXZ}static get XZY(){return Do.XZY}static get ZXY(){return Do.ZXY}static get YZX(){return Do.YZX}static get XYZ(){return Do.XYZ}static get RollPitchYaw(){return Do.ZYX}static get DefaultOrder(){return Do.ZYX}static get RotationOrders(){return Do}static rotationOrder(e){return Do[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=Wr.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,o]=e,s=i*i,a=-2*(s+r*r)+1,c=2*(n*i+o*r);let l=-2*(n*r-o*i);l=l>1?1:l,l=l<-1?-1:l;const p=Math.atan2(2*(i*r+o*n),-2*(n*n+s)+1),m=Math.asin(l),g=Math.atan2(c,a);return this.set(p,m,g,Wr.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function dOe(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=hi(e)}get y(){return this[1]}set y(e){this[1]=hi(e)}get z(){return this[2]}set z(e){this[2]=hi(e)}get alpha(){return this[0]}set alpha(e){this[0]=hi(e)}get beta(){return this[1]}set beta(e){this[1]=hi(e)}get gamma(){return this[2]}set gamma(e){this[2]=hi(e)}get phi(){return this[0]}set phi(e){this[0]=hi(e)}get theta(){return this[1]}set theta(e){this[1]=hi(e)}get psi(){return this[2]}set psi(e){this[2]=hi(e)}get roll(){return this[0]}set roll(e){this[0]=hi(e)}get pitch(){return this[1]}set pitch(e){this[1]=hi(e)}get yaw(){return this[2]}set yaw(e){this[2]=hi(e)}get order(){return this[3]}set order(e){this[3]=function uOe(t){if(t<0&&t>=6)throw new Error(YA);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,Do.ZYX)}fromRotationMatrix(e,n=Wr.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new jy;switch(this[4]){case Do.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Do.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Do.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Do.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Do.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Do.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(YA)}}_fromRotationMatrix(e,n=Wr.DefaultOrder){const i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(n=n||this[3]){case Wr.XYZ:this[1]=Math.asin(wr(o,-1,1)),Math.abs(o)<kg?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case Wr.YXZ:this[0]=Math.asin(-wr(c,-1,1)),Math.abs(c)<kg?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case Wr.ZXY:this[0]=Math.asin(wr(d,-1,1)),Math.abs(d)<kg?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(s,i));break;case Wr.ZYX:this[1]=Math.asin(-wr(l,-1,1)),Math.abs(l)<kg?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case Wr.YZX:this[2]=Math.asin(wr(s,-1,1)),Math.abs(s)<kg?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case Wr.XZY:this[2]=Math.asin(-wr(r,-1,1)),Math.abs(r)<kg?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(YA)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,o=this.z,s=Math.cos(i),a=Math.cos(r),c=Math.cos(o),l=Math.sin(i),d=Math.sin(r),h=Math.sin(o);switch(this[3]){case Wr.XYZ:{const p=s*c,m=s*h,g=l*c,A=l*h;n[0]=a*c,n[4]=-a*h,n[8]=d,n[1]=m+g*d,n[5]=p-A*d,n[9]=-l*a,n[2]=A-p*d,n[6]=g+m*d,n[10]=s*a;break}case Wr.YXZ:{const p=a*c,m=a*h,g=d*c,A=d*h;n[0]=p+A*l,n[4]=g*l-m,n[8]=s*d,n[1]=s*h,n[5]=s*c,n[9]=-l,n[2]=m*l-g,n[6]=A+p*l,n[10]=s*a;break}case Wr.ZXY:{const p=a*c,m=a*h,g=d*c,A=d*h;n[0]=p-A*l,n[4]=-s*h,n[8]=g+m*l,n[1]=m+g*l,n[5]=s*c,n[9]=A-p*l,n[2]=-s*d,n[6]=l,n[10]=s*a;break}case Wr.ZYX:{const p=s*c,m=s*h,g=l*c,A=l*h;n[0]=a*c,n[4]=g*d-m,n[8]=p*d+A,n[1]=a*h,n[5]=A*d+p,n[9]=m*d-g,n[2]=-d,n[6]=l*a,n[10]=s*a;break}case Wr.YZX:{const p=s*a,m=s*d,g=l*a,A=l*d;n[0]=a*c,n[4]=A-p*h,n[8]=g*h+m,n[1]=h,n[5]=s*c,n[9]=-l*c,n[2]=-d*c,n[6]=m*h+g,n[10]=p-A*h;break}case Wr.XZY:{const p=s*a,m=s*d,g=l*a,A=l*d;n[0]=a*c,n[4]=-h,n[8]=d*c,n[1]=p*h+A,n[5]=s*c,n[9]=m*h-g,n[2]=g*h-m,n[6]=l*c,n[10]=A*h+p;break}default:throw new Error(YA)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),o=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch);return new jy(e*r*o-n*i*s,e*i*s+n*r*o,n*i*o-e*r*s,e*i*o+n*r*s)}}var hOe=T(4938),fOe=T(7991),qi=T(6990);const M$={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let XA;const pOe=new Uint8Array(16);function mOe(){if(!XA&&(XA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!XA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return XA(pOe)}const zo=[];for(let t=0;t<256;++t)zo.push((t+256).toString(16).slice(1));const _Oe=function gOe(t,e,n){if(M$.randomUUID&&!e&&!t)return M$.randomUUID();const i=(t=t||{}).random||(t.rng||mOe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function I$(t,e=0){return(zo[t[e+0]]+zo[t[e+1]]+zo[t[e+2]]+zo[t[e+3]]+"-"+zo[t[e+4]]+zo[t[e+5]]+"-"+zo[t[e+6]]+zo[t[e+7]]+"-"+zo[t[e+8]]+zo[t[e+9]]+"-"+zo[t[e+10]]+zo[t[e+11]]+zo[t[e+12]]+zo[t[e+13]]+zo[t[e+14]]+zo[t[e+15]]).toLowerCase()}(i)};var qA=T(9689);new nn,new nn;const Z0=new nn,k$=new nn;class TP{constructor(e=[0,0,0],n=0){ve(this,"center",void 0),ve(this,"radius",void 0),this.radius=-0,this.center=new nn,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=Z0.from(n),this.center=(new nn).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new TP(this.center,this.radius)}union(e){const n=this.center,i=this.radius,o=e.radius,s=Z0.copy(e.center).subtract(n),a=s.magnitude();if(i>=a+o)return this.clone();if(o>=a+i)return e.clone();const c=.5*(i+a+o);return k$.copy(s).scale((-i+c)/a).add(n),this.center.copy(k$),this.radius=c,this}expand(e){const i=Z0.from(e).subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}transform(e){this.center.transform(e);const n=function H4(t,e){var o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(c,l,d),t}(Z0,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const i=Z0.from(e).subtract(this.center);return Math.max(0,i.len()-this.radius)}intersectPlane(e){const i=this.radius,o=e.normal.dot(this.center)+e.distance;return o<-i?-1:o<i?0:1}}const yOe=new nn,vOe=new nn,KA=new nn,JA=new nn,ZA=new nn,wOe=new nn,xOe=new nn;class MP{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){ve(this,"center",void 0),ve(this,"halfAxes",void 0),this.center=(new nn).from(e),this.halfAxes=new Ho(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new nn(e).len(),new nn(n).len(),new nn(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new nn(e).normalize(),o=new nn(n).normalize(),s=new nn(i).normalize();return(new jy).fromMatrix3(new Ho([...r,...o,...s]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new jy(i),o=(new Ho).fromQuaternion(r);return o[0]=o[0]*n[0],o[1]=o[1]*n[0],o[2]=o[2]*n[0],o[3]=o[3]*n[1],o[4]=o[4]*n[1],o[5]=o[5]*n[1],o[6]=o[6]*n[2],o[7]=o[7]*n[2],o[8]=o[8]*n[2],this.center=(new nn).from(e),this.halfAxes=o,this}clone(){return new MP(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new TP){const n=this.halfAxes,i=n.getColumn(0,KA),r=n.getColumn(1,JA),o=n.getColumn(2,ZA),s=yOe.copy(i).add(r).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,o=i.x,s=i.y,a=i.z,c=Math.abs(o*r[0]+s*r[1]+a*r[2])+Math.abs(o*r[3]+s*r[4]+a*r[5])+Math.abs(o*r[6]+s*r[7]+a*r[8]),l=i.dot(n)+e.distance;return l<=-c?-1:l>=c?1:0}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=vOe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,KA),o=i.getColumn(1,JA),s=i.getColumn(2,ZA),a=r.magnitude(),c=o.magnitude(),l=s.magnitude();r.normalize(),o.normalize(),s.normalize();let h,d=0;return h=Math.abs(n.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(n.dot(o))-c,h>0&&(d+=h*h),h=Math.abs(n.dot(s))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,c=a.getColumn(0,KA),l=a.getColumn(1,JA),d=a.getColumn(2,ZA),h=wOe.copy(c).add(l).add(d).add(s),p=xOe.copy(h).subtract(e);let m=n.dot(p);return r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).add(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).add(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).subtract(d),p.copy(h).subtract(e),m=n.dot(p),r=Math.min(m,r),o=Math.max(m,o),i[0]=r,i[1]=o,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,KA);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,JA);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,ZA);return r.transformAsPoint(e),this.halfAxes=new Ho([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const O$=new nn,P$=new nn;class Q0{constructor(e=[0,0,1],n=0){ve(this,"normal",void 0),ve(this,"distance",void 0),this.normal=new nn,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return gy(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=O$.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),gy(ku(this.normal.len(),1)),this.distance=r,this}clone(){return new Q0(this.normal,this.distance)}equals(e){return ku(this.distance,e.distance)&&ku(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=P$.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=O$.from(e);const i=this.getPointDistance(e),r=P$.copy(this.normal).scale(i);return e.subtract(r).to(n)}}const N$=[new nn([1,0,0]),new nn([0,1,0]),new nn([0,0,1])],F$=new nn,EOe=new nn;new Q0(new nn(1,0,0),0);class Zu{constructor(e=[]){ve(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*N$.length;const n=e.center,i=e.radius;let r=0;for(const o of N$){let s=this.planes[r],a=this.planes[r+1];s||(s=this.planes[r]=new Q0),a||(a=this.planes[r+1]=new Q0);const c=F$.copy(o).scale(-i).add(n);o.dot(c),s.fromPointNormal(c,o);const d=F$.copy(o).scale(i).add(n),h=EOe.copy(o).negate();h.dot(d),a.fromPointNormal(d,h),r+=2}return this}computeVisibility(e){let n=1;for(const i of this.planes)switch(e.intersectPlane(i)){case-1:return-1;case 0:n=0}return n}computeVisibilityWithPlaneMask(e,n){if(gy(Number.isFinite(n),"parentPlaneMask is required."),n===Zu.MASK_OUTSIDE||n===Zu.MASK_INSIDE)return n;let i=Zu.MASK_INSIDE;const r=this.planes;for(let o=0;o<this.planes.length;++o){const s=o<31?1<<o:0;if(o<31&&!(n&s))continue;const c=e.intersectPlane(r[o]);if(-1===c)return Zu.MASK_OUTSIDE;0===c&&(i|=s)}return i}}function*OP(t,e,n){for(const[i,r]of Object.entries(n))for(const o of Fr(t,e,i,null,null)){const s="Literal"===o.object.termType?(0,qA.fromRdf)(o.object):o.object.id;yield[r,s]}}function Kf(t,e,n,i){const r={"@id":e,"@type":n};for(const[o,s]of Object.entries(i))for(const a of Fr(t,r["@id"],o,null,null)){const c="Literal"===a.object.termType?(0,qA.fromRdf)(a.object):a.object.id;r[s]=c}return r}ve(Zu,"MASK_OUTSIDE",4294967295),ve(Zu,"MASK_INSIDE",0),ve(Zu,"MASK_INDETERMINATE",2147483647),new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,new nn,Math,new Ho,new Ho,new Ho,new Ho,new Ho,new nn,new nn,new nn,new nn,new nn,new Ho,new Ho,new Ho;const ji=function y$(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,o){if("string"==typeof o){const s=Object.create(null);n[r]=a=>s[a]||(s[a]=e.namedNode(o+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||Mr,i}({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},Mr),B$={x:ji("rdf"),type:ji("rdf")("type")},en=(ji("rdfs"),ji("rdfs")("label"),ji("rdfs")("comment"),ji("rdfs")("isDefinedBy"),ji("rdfs")("seeAlso"),ji("ccf")),ri={id:ji("ccf")("has_registration_location"),label:ji("rdfs")("label"),description:ji("rdfs")("comment"),link:en("url"),sex:en("sex"),age:en("age"),bmi:en("bmi"),Male:Mr.literal("Male"),Female:Mr.literal("Female"),consortiumName:en("consortium_name"),providerName:en("tissue_provider_name"),providerUUID:en("tissue_provider_uuid"),donor:en("comes_from"),sections:en("subdivided_into_sections"),datasets:en("generates_dataset"),sampleType:en("sample_type"),TissueBlock:Mr.literal("Tissue Block"),TissueSection:Mr.literal("Tissue Section"),NonStandard:Mr.literal("Non-standard"),sectionCount:en("section_count"),sectionSize:en("section_size"),sectionUnits:en("section_size_unit"),sectionNumber:en("section_number"),spatialEntity:en("has_registration_location"),ontologyTerms:en("has_ontology_term"),cellTypeTerms:en("has_cell_type_term"),technology:en("technology"),thumbnail:en("thumbnail")},bi={x:en,base:ji("base"),ontologyNode:{label:en("ccf_pref_label"),parent:en("ccf_part_of"),children:en("ccf_part_of"),rui_rank:en("rui_rank"),synonymLabels:Mr.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:en("ccf_part_of"),ct_is_a:en("ccf_ct_isa"),located_in:en("ccf_located_in"),characterizes:en("ccf_characterizes")},spatial:{Female:ji("base")("VHFemale"),Male:ji("base")("VHMale"),BothSexes:ji("base")("VHBothSexes"),FemaleOrgans:ji("base")("VHFemaleOrgans"),MaleOrgans:ji("base")("VHMaleOrgans")},SpatialObjectReference:en("spatial_object_reference"),SpatialEntity:en("spatial_entity"),SpatialPlacement:en("spatial_placement"),spatialObjectReference:{file:en("file_url"),file_format:en("file_format"),file_subpath:en("file_subpath")},extractionSet:{label:ji("rdfs")("label"),rui_rank:en("rui_rank")},spatialEntity:{label:ji("rdfs")("label"),description:ji("rdfs")("comment"),creator:ji("dcterms")("creator"),creator_first_name:en("creator_first_name"),creator_last_name:en("creator_last_name"),creator_orcid:en("creator_orcid"),creation_date:ji("dcterms")("created"),updated_date:en("updated_date"),ccf_annotations:en("collides_with"),representation_of:en("representation_of"),reference_organ:en("has_reference_organ"),extraction_set_for:en("extraction_set_for"),extraction_set:en("has_extraction_set"),sex:en("organ_owner_sex"),side:en("organ_side"),rui_rank:en("rui_rank"),slice_thickness:en("slice_thickness"),slice_count:en("slice_count"),x_dimension:en("x_dimension"),y_dimension:en("y_dimension"),z_dimension:en("z_dimension"),dimension_units:en("dimension_unit"),object:en("has_object_reference")},spatialPlacement:{source:en("placement_for"),target:en("placement_relative_to"),placement_date:ji("dcterms")("created"),x_scaling:en("x_scaling"),y_scaling:en("y_scaling"),z_scaling:en("z_scaling"),scaling_units:en("scaling_unit"),x_rotation:en("x_rotation"),y_rotation:en("y_rotation"),z_rotation:en("z_rotation"),w_rotation:en("theta_rotation"),rotation_order:en("rotation_order"),rotation_units:en("rotation_unit"),x_translation:en("x_translation"),y_translation:en("y_translation"),z_translation:en("z_translation"),translation_units:en("translation_unit")}},ti={x:ji("uberon"),body:ji("uberon")("0013702")},ZOe={x:ji("cl"),cell:ji("cl")("0000000")},ev={x:ji("fma")},Od=(ji("lmha"),{body:ti.body,cell:ZOe.cell,respiratory_system:ti.x("0001004"),colon:ti.x("0001155"),left_lung:ti.x("0002168"),right_lung:ti.x("0002167"),left_bronchus:ti.x("0002178"),right_bronchus:ti.x("0002177"),kidney:ti.x("0002113"),ureter:ti.x("0000056"),eye:ti.x("0000970"),fallopian_tube:ti.x("0003889"),knee:ti.x("0001465"),ovary:ti.x("0000992"),trachea:ti.x("0003126"),aorta:ti.x("0000947"),blood:ti.x("0000178"),bone_marrow:ti.x("0002371"),male_reproductive_system:ti.x("0000079"),lymph_node:ti.x("0000029"),blood_vasculature:ti.x("0004537"),brain:ti.x("0000955"),eye_left:ti.x("0004548"),eye_right:ev.x("54449"),fallopian_tube_left:ti.x("0001303"),fallopian_tube_right:ti.x("0001302"),heart:ti.x("0000948"),kidney_left:ti.x("0004538"),kidney_right:ti.x("0004539"),knee_left:ev.x("24978"),knee_right:ev.x("24977"),large_intestine:ti.x("0000059"),liver:ti.x("0002107"),lungs:ti.x("0002048"),mesenteric_lymph_node:ti.x("0002509"),ovary_left:ev.x("7214"),ovary_right:ev.x("7213"),pancreas:ti.x("0001264"),pelvis:ti.x("0001270"),prostate_gland:ti.x("0002367"),skin:ti.x("0002097"),small_intestine:ti.x("0002108"),spleen:ti.x("0002106"),thymus:ti.x("0002370"),ureter_left:ti.x("0001223"),ureter_right:ti.x("0001222"),urinary_bladder:ti.x("0001255"),uterus:ti.x("0000995")});function PP(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const eS={spatialObjectReference:PP(bi.spatialObjectReference),spatialEntity:PP(bi.spatialEntity),spatialPlacement:PP(bi.spatialPlacement)};function j$(t,e){const n=Kf(t,e,"ExtractionSet",eS.spatialEntity);return n.extractionSites=(0,qi.sortBy)(t.getSubjects(bi.spatialEntity.extraction_set,e,null).map(i=>Jf(t,i.id)),["rui_rank"]),n}function Jf(t,e){const n=Kf(t,e,"SpatialEntity",eS.spatialEntity);return n.object&&(n.object=function QOe(t,e){return Kf(t,e,"SpatialObjectReference",eS.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,bi.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,ri.spatialEntity,e,null),n}function i2e(t,e){const n=Kf(t,e,"SpatialPlacement",eS.spatialPlacement);return n.source&&(n.source=Jf(t,n.source)),n.target&&(n.target=Jf(t,n.target)),n}function U$(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),o=[n.x_rotation,n.y_rotation,n.z_rotation].map(RU),s=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(o).scale(s)}class V${constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new hOe.DirectedGraph;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},B$.type,bi.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},B$.type,bi.SpatialEntity,null);const n={};for(const i of Fr(e,null,bi.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of Fr(e,null,bi.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new Wn(Wn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new Wn(Wn.IDENTITY),o=fOe(this.graph,e,n);if(o&&o.length>0){o.reverse();let s="";for(const a of o)s&&U$(r,i2e(i,this.graph.getEdgeAttribute(a,s,"id"))),s=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,qi.get)(e,"placement[0]",(0,qi.get)(e,"placement",void 0));let o;if(r&&this.graph.hasNode(r.target)?(o=this.getTransformationMatrix(r.target,n),o&&(o=U$(o,r))):i&&(o=this.getTransformationMatrix(i,n)),o){const s=(new Wr).fromRotationMatrix(o,Wr.XYZ),a=o.getTranslation().map(d=>1e3*d),c=s.toVector3().map(cre),l=o.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${_Oe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class H${constructor(e){this.db=e}getSpatialEntity(e){return Jf(this.db.store,e)}getExtractionSets(e){return function e2e(t,e){return(0,qi.sortBy)(t.getSubjects(bi.spatialEntity.extraction_set_for,e,null).map(n=>j$(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return j$(this.db.store,e)}getAnatomicalStructures(e){return function t2e(t,e){return(0,qi.sortBy)(t.getSubjects(bi.spatialEntity.reference_organ,e,null).map(n=>Jf(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function n2e(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(Jf(t,n.subject.id))},null,bi.spatialEntity.reference_organ,null,null),(0,qi.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=bi.spatial.Male.id;break;case"Female":n=bi.spatial.Female.id;break;default:n=bi.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,o])=>i.concat(o.length>0?o:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(o=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of,a=this.getSceneNode(o,n,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s});return s&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(bi.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(bi.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(bi.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(bi.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(bi.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(o=>void 0!==o)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(o=>o.representation_of===e&&(!i||o.sex===n?.sex));if(r.length>0){const o=r[0],a=this.getSceneNode(o,o,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(n)??[]).map(l=>this.getSceneNode(l,o,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let s=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(s){if(r)s=new Wn(Wn.IDENTITY).rotateX(RU(90)).multiplyLeft(s);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);s.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:s,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const o2e={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function tS(t,e=o2e){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const nS="https://entity.api.hubmapconsortium.org/entities/",z$=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),s2e={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},Pg={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},NP="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class l2e{constructor(e,n="",i="",r){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const a=this.data.descendants||[],c=(this.data.ancestors||[]).find(we=>"Donor"===we.entity_type);this.donor=this.getDonor(c,i);const l=this.getRuiLocation(e,this.donor);l?this.rui_location=l:this.bad=!0,Pg[e.group_uuid]||(Pg[e.group_uuid]=e.group_name);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=Pg[e.group_uuid]||e.group_name,p=e.created_by_user_displayname;this["@id"]=nS+e.uuid,this.label=`Registered ${d}, ${p}, ${h}`,this.link=`${i}browse/sample/${e.uuid}`;const m={},g=[];this.sections=g;const A=[];this.datasets=A;for(const we of a.filter(Be=>"Sample"===Be.entity_type)){const Be=this.getSection(we,e,i);m[we.submission_id]=Be,g.push(Be),Be.section_number=Be.section_number??g.length}for(const we of a)if("Dataset"===we.entity_type){const Be=this.getDataset(we,n,i,r),We=(0,qi.get)(we,["ingest_metadata","metadata","tissue_id"]);m[We]?m[We].datasets?.push(Be):A.push(Be)}const D=l??{},j=`${D.x_dimension} x ${D.y_dimension} x ${D.z_dimension} ${D.dimension_units}`;this.section_count=D.slice_count||g.length;const k=parseFloat((D.slice_thickness||(D.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=k;const ue=D.dimension_units||"millimeter";this.section_units=ue,this.description=`${j}, ${k} ${ue}, ${this.section_count} Sections`,g.forEach((we,Be)=>{we.description=`${D.x_dimension} x ${D.y_dimension} x ${k} ${ue}, ${k} ${ue}, ${we.description}`,we.section_number=Be+1})}getSection(e,n,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":nS+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${Pg[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n="",i="",r){const o=new Date(e.last_modified_timestamp).toLocaleDateString(),s=Pg[e.group_uuid]||e.group_name,a=e.created_by_user_displayname,c=[...e.data_types,(0,qi.get)(e,["ingest_metadata","metadata","assay_type"],"")],l=c.join("|").toLowerCase();let d,h="assets/icons/ico-unknown.svg";return-1!==l.indexOf("10x")?(d="10x",h="assets/icons/ico-bulk-10x.svg"):-1!==l.indexOf("af")?(d="AF",h="assets/icons/ico-spatial-af.svg"):-1!==l.indexOf("codex")?(d="CODEX",h="assets/icons/ico-spatial-codex.svg"):-1!==l.indexOf("imc")?(d="IMC",h="assets/icons/ico-spatial-imc.svg"):-1!==l.indexOf("lc")&&-1===l.indexOf("af")?(d="LC",h="assets/icons/ico-bulk-lc.svg"):d=-1!==l.indexOf("maldi")?"MALDI":-1!==l.indexOf("pas")?"PAS":"OTHER",h=this.getDatasetThumbnail(e,n,r)??h,{"@id":nS+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${a}, ${s}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:d,thumbnail:h}}getDatasetThumbnail(e,n,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${n}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=(0,qi.get)(e,"metadata.files",[]).filter(o=>/\.(ome\.tif|ome\.tiff)$/.test(o.rel_path)).filter(o=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(o.rel_path)).filter(o=>z$.has(o.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(o=>`${n}/${e.uuid}/${o.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const o=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(z$.has(o))return`assets/thumbnails/TMC-Vanderbilt/DR1/${o}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=s2e[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,n){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const o=i.match(/age ([0-9]+)/);let s,a;o&&(s=(0,qi.toNumber)(o[1]));for(const p of(0,qi.get)(e,"metadata.organ_donor_data",(0,qi.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===p.preferred_term||"Female"===p.preferred_term?r="Female":"Masculine gender"===p.preferred_term||"Male"===p.preferred_term?r="Male":"Current chronological age"===p.preferred_term||"Age"===p.preferred_term?s=(0,qi.toNumber)(p.data_value):"Body mass index"===p.preferred_term&&(a=(0,qi.toNumber)(p.data_value));let c="";r&&s&&(c+=`${r}, Age ${s}`,a&&(c+=`, BMI ${a.toFixed(1)}`));const l=new Date(e.last_modified_timestamp).toLocaleDateString(),d=Pg[e.group_uuid]||e.group_name;return{"@id":nS+e.uuid,"@type":"Donor",label:c,description:`Entered ${l}, ${e.created_by_user_displayname}, ${d}`,link:`${n}browse/donor/${e.uuid}`,age:s,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:d,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const o=(0,qi.get)(i,["placement","target"])??"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,qi.set)(i,["placement","target"],o.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&(0,qi.set)(i,["placement","target"],"Male"===n.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return(0,qi.omit)({...this},["data","bad","donor"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const d2e=1e4,u2e=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],h2e={exists:{field:"rui_location"}};function G$(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??h2e,_source:{includes:u2e}})}function FP(t,e){return LP.apply(this,arguments)}function LP(){return LP=Ht(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(o=>o.json()):JSON.parse(i):void 0}catch{return}}),LP.apply(this,arguments)}function BP(){return BP=Ht(function*(t,e,n){const i=d2e,r=function f2e(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),o=G$(0,i,n),s=yield FP(t,{method:"POST",headers:r,body:o});if(!s)return;const a=s.hits.total.value;if(a<=i)return s;const c=[];for(let h=i;h<a;h+=i)c.push(FP(t,{method:"POST",headers:r,body:G$(h,i,n)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...s,hits:{...s.hits,hits:s.hits.hits.concat(...d)}}}),BP.apply(this,arguments)}function jP(){return jP=Ht(function*(t,e,n,i,r="",o=""){let s;if("static"===e?s=yield FP(t):"search-api"===e&&(s=yield function p2e(t,e,n){return BP.apply(this,arguments)}(t,i,n)),s)return function a2e(t,e="",n="",i,r=!1){const s={},a=(0,qi.get)(t,"hits.hits",[]).map(l=>(0,qi.get)(l,"_source",{})).sort((l,d)=>l.uuid.localeCompare(d.uuid)).map(l=>new l2e(l,e,n,i).toJsonLd());for(const l of a){const d=l["@id"];s[d]?s[d].samples.push(l.samples[0]):s[d]=l}const c=Object.values(s);return r&&(function c2e(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let o=0;o<r.length;o++){const s=r[o]["@id"];e=e.concat(r[o].datasets);for(const a of r[o].sections)e=e.concat(a.datasets);for(let a=o+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===s)&&(r[o].deleteMe=!0,n++)}i.samples=r.filter(o=>!0!==o.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(c),console.log(c.map(l=>({"@context":NP,...l})))),tS(JSON.stringify({"@context":NP,"@graph":c}),NP)}(s,r,o,i);console.warn(`Unable to load ${t} as HuBMAP Data`)}),jP.apply(this,arguments)}function tv(t,e,n){const i=new Set;for(const r of e)for(const o of Fr(t,r,n,null,null))i.add(o.object.id);return i}const b2e={[bi.spatialEntity.x_dimension.id]:"x",[bi.spatialEntity.y_dimension.id]:"y",[bi.spatialEntity.z_dimension.id]:"z"};function v2e(t,e,n,i){const r=e.getTransformationMatrix(n,i);let o;if(r){const s=r.getTranslation(),a=function y2e(t,e){const n=Kf(t,e,"Dimensions",b2e);return[n.x,n.y,n.z]}(t,n).map(l=>l/1e3/2),c=(new Wr).fromRotationMatrix(r,Wr.XYZ).toQuaternion().normalize().calculateW();o=(new MP).fromCenterHalfSizeQuaternion(s,a,c)}return o}function w2e(t,e,n,i){const{x:r,y:o,z:s,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of n){const p=v2e(t,e,h,c);p&&p.distanceSquaredTo([r,o,s].map(g=>g/1e3))<=d&&l.add(h)}return l}function iS(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Fr(t,a,ri.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=n(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function VP(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Fr(t,a,ri.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=n(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function nv(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function Y$(t,e,n){const i=new Set;for(const r of n){const o=Mr.namedNode(r);t.forSubjects(nv(e,i),bi.spatialEntity.ccf_annotations,o,null)}return i}function X$(t,e){const n=function O2e(t,e){const n=new Map;for(const i of t)for(const r of Fr(e,i,ri.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id).add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const o=n.get(r);for(const s of Fr(e,r,bi.spatialEntity.ccf_annotations,null,null))if(i.has(s.object.id)){const a=i.get(s.object.id);o.forEach(c=>a.add(c))}else i.set(s.object.id,new Set(o))}return i}function F2e(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[bi.ontologyNode.label.id]:"label",[n]:"parent",[bi.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of OP(t,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=t.getSubjects(n,e,null).map(o=>o.id),i}function q$(t,e,n,i){const r={root:e,nodes:{}},o=new Set;for(const a of Fr(t,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=F2e(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const s=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,K$(r),r}function K$(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)K$(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const J$=(0,qi.memoize)(function L2e(t){const e=q$(t,Od.body.id,"body",bi.asctb.part_of.id);return e.nodes[Od.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>""),rS={[ri.label.id]:"label",[ri.description.id]:"description",[ri.link.id]:"link"},j2e={...rS,[ri.providerName.id]:"providerName"},U2e={...rS,[ri.technology.id]:"technology",[ri.thumbnail.id]:"thumbnail"},V2e={...rS,[ri.sampleType.id]:"sampleType",[ri.sectionNumber.id]:"sectionNumber",[ri.datasets.id]:"datasets"},H2e={...rS,[ri.sampleType.id]:"sampleType",[ri.sectionCount.id]:"sectionCount",[ri.sectionSize.id]:"sectionSize",[ri.sectionUnits.id]:"sectionUnits",[ri.donor.id]:"donor",[ri.spatialEntity.id]:"spatialEntityId",[ri.sections.id]:"sections",[ri.datasets.id]:"datasets"};function z2e(t,e){return Kf(t,e,"Donor",j2e)}function Z$(t,e){return Kf(t,e,"Dataset",U2e)}function G2e(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of OP(t,e,V2e))if("datasets"===i){const o=Z$(t,r);n[i].push(o)}else n[i]=r;return n}class $2e{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const n=Date.now();return this.database.connect().then(function(){var i=Ht(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-n})}}const X2e={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class q2e{constructor(e=X2e){this.options=e,this.store=new vP(void 0,{factory:Mr}),this.graph=new V$(this),this.scene=new H$(this)}connect(e,n=!1){var i=this;return Ht(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return Ht(function*(){const n=(new Date).getTime(),i=jke(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,o=`ccf-database.${i}`,s=yield _$(r).catch(()=>{});let a;s&&n-new Date(+s).getTime()>36e5?yield function Bke(t,e=jc()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),na(n.transaction)))}([o,r]).catch(()=>{}):a=yield _$(o).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),function Lke(t,e=jc()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),na(n.transaction)))}([[o,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return Ht(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=CP(r,Mr);else if(r.endsWith(".n3store.json")){const o=yield fetch(r).then(s=>s.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(e.store=CP(o,Mr))}else r?.length>0&&i.push(r);e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function W$(t,e,n,i){return jP.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken,e.options.hubmapAssetsUrl,e.options.hubmapPortalUrl).then(o=>{if(o)return e.addDataSources([o])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return Ht(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var o=Ht(function*(s){"string"==typeof s?(s.startsWith("http")||s.startsWith("assets/"))&&s.includes("jsonld")?(s=tS(s=yield fetch(s).then(a=>a.text())),yield xP(s,r)):s.endsWith("n3")?yield function cOe(t,e){return SP.apply(this,arguments)}(s,r):s.endsWith("rdf")||s.endsWith("owl")||s.endsWith("xml")?yield function aOe(t,e){return AP.apply(this,arguments)}(s,r):(s=tS(s),yield xP(s,r)):(s=tS(JSON.stringify(s)),yield xP(s,r))});return function(s){return o.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return Ht(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function Y2e(t){const e=J$(t),n=new Map;for(const{subject:i,object:r}of Fr(t,null,bi.spatialEntity.representation_of,null,null)){const o=new Set([r.id]);let s=e.nodes[r.id]?.parent;for(;s&&!o.has(s);)o.add(s),s=e.nodes[s]?.parent;n.set(i.id,[...o].map(a=>Mr.namedNode(a)))}for(const{object:i}of Fr(t,null,ri.spatialEntity,null,null))for(const{subject:r}of Fr(t,null,bi.spatialPlacement.source,i,null))for(const{object:o}of Fr(t,r,bi.spatialPlacement.target,null,null))for(const s of n.get(o.id)??[])t.addQuad(Mr.namedNode(i.id),bi.spatialEntity.ccf_annotations,s)}(e.store),e})()}serialize(){return function lOe(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return Ht(function*(){n.store=CP(e,Mr),n.graph=new V$(n),n.scene=new H$(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function E2e(t,e,n){let i=function A2e(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),ri.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function R2e(t,e,n=!0){const i=new Set;if(t.forSubjects(nv(e,i),ri.spatialEntity,null,null),!n){const r=new Set;return e.forEach(o=>i.has(o)?void 0:r.add(o)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=iS(t,i,o=>function S2e(t,e,n){const i=new Set;return t.forSubjects(nv(e,i),ri.sex,ri[n],null),i}(t,o,r))}if(i.size>0&&n.tmc?.length>0&&(i=iS(t,i,r=>function C2e(t,e,n){const i=new Set;for(const r of n){const o=Mr.literal(r);t.forSubjects(nv(e,i),ri.providerName,o,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function x2e(t,e,n){const i=new Map,r=new Set,o=new Set(e);for(const c of e)for(const l of Fr(t,c,ri.sections,null,null))o.add(l.object.id);for(const c of o)for(const l of Fr(t,c,ri.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const s=n(r),a=new Set;for(const c of s)for(const l of i.get(c)??[])a.add(l);return a}(t,i,r=>function T2e(t,e,n){const i=new Set;for(const r of n){const o=Mr.literal(r);t.forSubjects(nv(e,i),ri.technology,o,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=VP(t,i,r=>function k2e(t,e,n,i){const r=new Set;for(const o of i)w2e(t,e,n,o).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(Od.body.id)&&(i=VP(t,i,o=>Y$(t,o,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(Od.cell.id)&&(i=VP(t,i,o=>function M2e(t,e,n){const i=new Set;for(const r of n)t.forObjects(o=>{i.add(o.id)},r,bi.asctb.located_in,null),r===Od.cell.id&&i.add(Od.body.id);return Y$(t,e,[...i])}(t,o,r)))}if(i.size>0&&2===n.ageRange?.length&&(0,qi.isFinite)(n.ageRange[0])&&(0,qi.isFinite)(n.ageRange[1])){const r=Math.max(...n.ageRange),o=Math.min(...n.ageRange);1===o&&110===r||(i=iS(t,i,s=>function I2e(t,e,n,i){const r=new Set;for(const o of e)for(const s of Fr(t,o,ri.age,null,null)){const a=(0,qA.fromRdf)(s.object);a>=n&&a<=i&&r.add(o)}return r}(t,s,o,r)))}if(i.size>0&&2===n.bmiRange?.length&&(0,qi.isFinite)(n.bmiRange[0])&&(0,qi.isFinite)(n.bmiRange[1])){const r=Math.max(...n.bmiRange),o=Math.min(...n.bmiRange);13===o&&83===r||(i=iS(t,i,s=>function D2e(t,e,n,i){const r=new Set;for(const o of e)for(const s of Fr(t,o,ri.bmi,null,null)){const a=(0,qA.fromRdf)(s.object);a>=n&&a<=i&&r.add(o)}return r}(t,s,o,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(Mr.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function r2e(t,e){const n=t.getObjects(Mr.namedNode(e),ri.spatialEntity,null);if(n.length>0)return Jf(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return Ht(function*(){return e.status||(e.status=new $2e(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return Ht(function*(){return function g2e(t){const e=new Set;for(const n of Fr(t,null,ri.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return Ht(function*(){return function _2e(t){const e=new Set;for(const n of Fr(t,null,ri.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return Ht(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function W2e(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of OP(t,e,H2e))if("sections"===i){const o=G2e(t,r);n[i].push(o)}else if("datasets"===i){const o=Z$(t,r);n[i].push(o)}else n[i]="donor"===i?z2e(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return Ht(function*(){return function m2e(t,e){const n=tv(e,t,ri.donor.id),i=tv(e,n,ri.providerUUID.id),r=new Set;for(const c of t)for(const l of Fr(e,c,ri.spatialEntity,null,null))r.add(l.subject.id);const o=tv(e,r,ri.sections.id),s=new Set([...tv(e,r,ri.datasets.id),...tv(e,o,ri.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":o.size,"Tissue Datasets":s.size}).map(([c,l])=>({label:c,count:l}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return Ht(function*(){return function P2e(t,e){const n={};return X$(t,e).forEach((r,o)=>{n[o]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return Ht(function*(){return function N2e(t,e){const n=X$(t,e),i=new Map;for(const o of n.keys()){const s=n.get(o);for(const a of Fr(e,null,bi.asctb.located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r[Od.cell.id]=n.get(Od.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return Ht(function*(){return J$(e.store)})()}getCellTypeTreeModel(){var e=this;return Ht(function*(){return function B2e(t){return q$(t,Od.cell.id,"cell",bi.asctb.ct_is_a.id)}(e.store)})()}getReferenceOrgans(){var e=this;return Ht(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return Ht(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return Ht(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return Ht(function*(){return i.graph.getSpatialPlacement(e,n)})()}}class Q$ extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class iPe{constructor(){this.cancelUncompleted$=new Se}cancelPreviousAction(){this.cancelUncompleted$.next()}}const HP="\u0275fac",eY=Symbol("InjectorInstance"),tY=Symbol("FactoryHasBeenDecorated");function nY(t,e){const n=t[eY];return n?n.get(e):null}const sPe={cancelUncompleted:!1};function iY(t=sPe){return(e,n,i)=>{let r;const o=function rPe(t){return t?new iPe:null}(t.cancelUncompleted);function s(){null!==o&&o.cancelPreviousAction();const a=nY(this,Ml)||function tPe(){throw new Q$}(),c=nY(this,cn)||function nPe(){throw new Q$}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function ePe(t,e,n){return vm(e)?function Q2e(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):If(e)?function Z2e(t,e,n){return null!==n&&(e=e.pipe(fr(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,l,o))}"function"==typeof i?.value?(r=i.value,i.value=s):Object.defineProperty(e,n,{set:a=>r=a,get:()=>s}),function oPe(t){if(tY in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[HP]&&function zP(t){const e=t[HP];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[eY]=Ve(tm),r};n&&(n.factory=i),Object.defineProperty(t,HP,{get:()=>i})}(e),t.constructor.prototype[tY]=!0}(e)}}var Zf;const JPe=["bodyCanvas"];let ZPe=(()=>{var t;class e{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new rn,this.nodeDrag=new rn,this.nodeClick=new rn,this.nodeHoverStart=new rn,this.nodeHoverStop=new rn,this.initialized=new rn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(i){this._scene=i,this.bodyUI?.setScene(i)}get rotation(){return this._rotation}set rotation(i){this._rotation=i,this.bodyUI?.setRotation(i)}get rotationX(){return this._rotationX}set rotationX(i){this._rotationX=i,this.bodyUI?.setRotationX(i)}get zoom(){return this._zoom}set zoom(i){this._zoom=i,this.bodyUI?.setZoom(i)}get target(){return this._target}set target(i){this._target=i,this.bodyUI?.setTarget(i)}get bounds(){return this._bounds}set bounds(i){this._bounds=i,this.zoomToBounds(i)}get camera(){return this._camera}set camera(i){this._camera=i}get interactive(){return this._interactive}set interactive(i){this._interactive=i,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(i,r={x:48,y:48}){if(this.bodyCanvas){const{width:o,height:s}=this.bodyCanvas.nativeElement,a=window.devicePixelRatio,c=Math.min(Math.log2((o-r.x)/a/i.x),Math.log2((s-r.y)/a/i.y));this.zoom=c}}setupBodyUI(){var i=this;return Ht(function*(){const r=i.bodyCanvas.nativeElement,o=new kwe({id:"body-ui",canvas:r,zoom:i.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:i.interactive,camera:i.camera});r.addEventListener("contextmenu",s=>s.preventDefault()),yield o.initialize(),i.bodyUI=o,window.bodyUI=o,i.scene?.length>0&&i.bodyUI.setScene(i.scene),i.bounds&&i.zoomToBounds(i.bounds),i.target&&i.bodyUI.setTarget(i.target),i.subscriptions=[i.bodyUI.sceneRotation$.subscribe(s=>i.rotationChange.next(s)),i.bodyUI.nodeDrag$.subscribe(s=>i.nodeDrag.emit(s)),i.bodyUI.nodeClick$.subscribe(s=>i.nodeClick.emit(s)),i.bodyUI.nodeHoverStart$.subscribe(s=>i.nodeHoverStart.emit(s)),i.bodyUI.nodeHoverStop$.subscribe(s=>i.nodeHoverStop.emit(s))],i.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Oi(JPe,5,Nt),2&i){let o;Ln(o=Bn())&&(r.bodyCanvas=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&ga(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&jn(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0}),e})(),QPe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[Hi]}),e})();new yt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const _Y=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name));function bNe(t,e){if(1&t&&(Ct(0,"div",16),jn(1,"youtube-player",17),It()),2&t){const n=Fn(3);Ot(1),fx("videoId",n.videoID)}}function yNe(t,e){if(1&t&&(Ct(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),si(3),It()(),Ct(4,"div",13),jn(5,"markdown",14),pn(6,bNe,2,1,"div",15),It()()),2&t){const n=Fn(),i=n.index,r=n.$implicit;jt("expanded",0===i),Ot(3),To(r.title),Ot(2),On("first",0===i),jt("data",r.content),Ot(1),jt("ngIf",0===i)}}function vNe(t,e){if(1&t&&(Ct(0,"div",9),pn(1,yNe,7,6,"mat-expansion-panel",10),It()),2&t){const n=e.$implicit;Ot(1),jt("ngIf",n)}}_Y.filter(t=>!0!==t.disabled);let bY=(()=>{var t;class e{constructor(i,r){this.dialogRef=i,this.data=r,this.documentationContents=r.content||[],this.infoTitle=r.title||"",this.videoID=r.videoID}ngOnInit(){const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",document.body.appendChild(i)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(R2),Ve(i7))},t.\u0275cmp=An({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Ct(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),si(5),It(),Ct(6,"div",5)(7,"mat-icon",6),bn("click",function(){return r.close()}),si(8,"clear"),It()()(),Ct(9,"mat-dialog-content",7),pn(10,vNe,2,1,"div",8),It()()()()),2&i&&(Ot(5),To(r.infoTitle),Ot(5),jt("ngForOf",r.documentationContents))},dependencies:[ad,Sc,o7,s7,wg,g7,MTe,A7,H7],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e})(),yY=(()=>{var t;class e{constructor(i){this.http=i,this.panelContent=new ce({content:[],infoTitle:"",videoID:""})}updateData(i,r,o){this.http.get(i,{responseType:"text"}).subscribe(s=>{const a={content:this.parseMarkdown(s),infoTitle:o,videoID:r};this.panelContent.next(a)})}parseMarkdown(i){const r=[],o=i.split("# ");for(const s of o)if(s.length){const a=s.includes("\n\n")?"\n\n":"\r\n\r\n",c=s.split(a);r.push({title:c[0],content:c.splice(1).join(a)})}return r}}return(t=e).\u0275fac=function(i){return new(i||t)(it(Yu))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),xNe=(()=>{var t;class e{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new rn,this.closeClicked=new rn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&ga(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(Ct(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),si(5),It(),Ct(6,"mat-icon",5),bn("click",function(){return r.close()}),si(7,"clear"),It()(),jn(8,"img",6),Ct(9,"mat-dialog-content",7)(10,"div",8),si(11),It(),Ct(12,"a",9),bn("click",function(){return r.onDialogButtonClick()}),It()()()()()),2&i&&(Ot(5),To(r.infoTitle),Ot(3),jt("src",r.imageUrl,ub),Ot(3),Es(" ",r.message,""),Ot(1),jt("text",r.callToAction))},dependencies:[wg,o7,s7,G7],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),e})(),jg=(()=>{var t;let e=((t=class extends HIe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function zIe(){return _i(t=>null!=t)}(),Is(1))}setConfig(i){this.setState(i)}patchConfig(i){this.patchState(i)}getProperty(i){return this.config$.pipe(w9(...i),nt(),Is(1))}getOption(...i){const r=this.getPathKey(i);if(this.optionCache.has(r))return this.optionCache.get(r);const o=this.config$.pipe(w9(...i),nt(),Is(1));return this.optionCache.set(r,o),o}getPathKey(i){return`${i.length}:${i.join(".")}`}}).\u0275fac=function(){let n;return function(r){return(n||(n=Ci(t)))(r||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac}),t);return mt([cW()],e.prototype,"config$",null),e=mt([jIe(),zz({name:"globalConfig",defaults:null})],e),e})();!function SNe(){const t=localStorage.getItem("ALLOW_TELEMETRY");null===t||t.toLowerCase()}();class MNe{getDatabaseStatus(){return this.forwardCall("getDatabaseStatus")}getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getCellTypeTreeModel(){return this.forwardCall("getCellTypeTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getCellTypeTermOccurences(e){return this.forwardCall("getCellTypeTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,n){return this.forwardCall("getReferenceOrganScene",e,n)}}class vY extends MNe{forwardCall(e,...n){return this.impl$.pipe(Le(i=>i[e](...n)))}}let wY=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})();const WP=new Se,rv={cacheBusterObserver:WP},Ug={cacheBusterObserver:WP,maxCacheCount:4};function xY(t,e,n){return t?{min:t[0]>e?t[0]:void 0,max:t[1]<n?t[1]:void 0}:void 0}function INe(t){return{age:xY(t?.ageRange,1,110),bmi:xY(t?.bmiRange,13,83),sex:t?.sex?.toLowerCase?.(),ontologyTerms:t?.ontologyTerms,cellTypeTerms:t?.cellTypeTerms,providers:t?.tmc,technologies:t?.technologies,spatial:t?.spatialSearches}}function EY(t){return t.map(e=>({...e,transformMatrix:new Wn(e.transformMatrix??[])}))}let DNe=(()=>{var t;class e{constructor(i,r){this.api=i,this.globalConfig=r,r.getOption("hubmapToken").subscribe(WP)}getDatabaseStatus(){return this.doRequest(i=>this.api.dbStatus(i))}getProviderNames(){return this.doRequest(i=>this.api.providerNames(i))}getDatasetTechnologyNames(){return this.doRequest(i=>this.api.technologyNames(i))}getOntologyTreeModel(){return this.doRequest(i=>this.api.ontologyTreeModel(i),void 0,{},t=>t)}getCellTypeTreeModel(){return this.doRequest(i=>this.api.cellTypeTreeModel(i),void 0,{},t=>t)}getReferenceOrgans(){return this.doRequest(i=>this.api.referenceOrgans(i),void 0,{},t=>t)}getTissueBlockResults(i){return this.doRequest(r=>this.api.tissueBlocks(r),i,{},t=>t)}getAggregateResults(i){return this.doRequest(r=>this.api.aggregateResults(r),i)}getOntologyTermOccurences(i){return this.doRequest(r=>this.api.ontologyTermOccurences(r),i)}getCellTypeTermOccurences(i){return this.doRequest(r=>this.api.cellTypeTermOccurences(r),i)}getScene(i){return this.doRequest(r=>this.api.scene(r),i,{},EY)}getReferenceOrganScene(i,r){return this.doRequest(o=>this.api.referenceOrganScene(o),r,{organIri:i},EY)}doRequest(i,r,o,s){const{api:a,globalConfig:c}=this,l={...INe(r),...o};return Qa([c.getOption("remoteApiEndpoint"),c.getOption("hubmapToken")]).pipe(Yi(1),Pi(([d,h])=>{a.configuration.basePath=d,h&&(l.token=h)}),Le(()=>i(l)),Q(d=>s?s(d):d))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(g$),it(jg))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),mt([Bc(rv)],e.prototype,"getProviderNames",null),mt([Bc(rv)],e.prototype,"getDatasetTechnologyNames",null),mt([Bc(rv)],e.prototype,"getOntologyTreeModel",null),mt([Bc(rv)],e.prototype,"getCellTypeTreeModel",null),mt([Bc(rv)],e.prototype,"getReferenceOrgans",null),mt([Bc(Ug)],e.prototype,"getTissueBlockResults",null),mt([Bc(Ug)],e.prototype,"getAggregateResults",null),mt([Bc(Ug)],e.prototype,"getOntologyTermOccurences",null),mt([Bc(Ug)],e.prototype,"getCellTypeTermOccurences",null),mt([Bc(Ug)],e.prototype,"getScene",null),mt([Bc(Ug)],e.prototype,"getReferenceOrganScene",null),e})(),RNe=(()=>{var t;class e extends vY{constructor(i){super(),this.impl$=this.database$=i.config$.pipe(r=>r,_i(r=>Object.keys(r).length>0),Le(r=>function Vwe(t,e){return new le(n=>{const i=t(),r=e(i);return(r?Ri(r):Fe).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDatabase(r),o=>this.connectDatabase(o,r))),Q(r=>r.database),Is(1))}connectDatabase(i,r){return Ht(function*(){return yield i.database.connect(r,!0),i})()}}return(t=e).\u0275fac=function(i){return new(i||t)(it(jg))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),kNe=(()=>{var t;class e extends RNe{createDatabase(i){return{database:new q2e(i),unsubscribe:()=>{}}}}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=Ci(t)))(r||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),ONe=(()=>{var t;class e extends vY{constructor(i,r){super(),this.impl$=i.config$.pipe(o=>o,Q(o=>this.selectToken(o)),nt(),Q(o=>r.get(o)),Is(1))}}return(t=e).\u0275fac=function(i){return new(i||t)(it(jg),it(dr))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),e})(),$P=(()=>{class e{}return e.type="[CallToAction] Learn More",e})(),YP=(()=>{class e{}return e.type="[CallToAction] Open Dialog",e})(),XP=(()=>{class e{}return e.type="[CallToAction] Close Dialog",e})();var qP;class Pd{get length(){return Pd.storage?.length??0}key(e){return Pd.storage?.key(e)??null}getItem(e,n){return Pd.storage?.getItem(e)??n??null}setItem(e,n){try{return Pd.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){Pd.storage?.removeItem(e)}clear(){Pd.storage?.clear()}}(Zf=Pd).storage=(()=>{let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length?t:void 0}})(),Zf.\u0275fac=function(e){return new(e||Zf)},Zf.\u0275prov=St({token:Zf,factory:Zf.\u0275fac,providedIn:"root"});const AY="callToActionPopupShown";let eh=(()=>{var t;let e=(t=class{static ctaDatePassed(i,r=Date.now){return+r()>+new Date(i)}constructor(i,r,o,s,a){this.dialog=i,this.ga=r,this.storage=o,this.infoService=s,this.http=a}ngxsOnInit(i){const{expirationDate:r,popupShown:o}=i.getState(),s=this.storage.getItem(AY,`${o}`),a=qP.ctaDatePassed(r);"true"!==s&&!a&&i.dispatch(new YP)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(Q(i=>this.infoService.parseMarkdown(i)))}launchLearnMore(i){this.dialog.open(bY,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:i,videoID:"UfxMpzatowE"}})}learnMore(i){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Pi(r=>this.launchLearnMore(r)))}open(i){this.dialog.open(NNe,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(AY,"true"),i.patchState({popupShown:!0})}close(i){this.dialog.closeAll(),this.ga.event("close","call_to_action")}},qP=t,t.\u0275fac=function(i){return new(i||t)(it(_A),it(X0),it(Pd),it(yY),it(Yu))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t);return mt([CO($P)],e.prototype,"learnMore",null),mt([CO(YP)],e.prototype,"open",null),mt([CO(XP)],e.prototype,"close",null),e})();eh=qP=mt([zz({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],eh);let lS=(()=>{class t{static title(n){return n.title}static message(n){return n.message}static callToAction(n){return n.callToAction}static imageUrl(n){return n.imageUrl}static expirationDate(n){return n.expirationDate}static popupShown(n){return n.popupShown}}return mt([hg([eh])],t,"title",null),mt([hg([eh])],t,"message",null),mt([hg([eh])],t,"callToAction",null),mt([hg([eh])],t,"imageUrl",null),mt([hg([eh])],t,"expirationDate",null),mt([hg([eh])],t,"popupShown",null),t})(),NNe=(()=>{var t;class e{constructor(){this.close=()=>new XP,this.learnMore=()=>new $P}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(Ct(0,"ccf-call-to-action",0),bn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),Zr(1,"async"),Zr(2,"async"),Zr(3,"async"),Zr(4,"async"),It()),2&i&&jt("infoTitle",Lo(1,4,r.title$))("message",Lo(2,6,r.message$))("callToAction",Lo(3,8,r.callToAction$))("imageUrl",Lo(4,10,r.imageUrl$))},dependencies:[xNe,ny],changeDetection:0}),mt([E1(lS.title)],e.prototype,"title$",void 0),mt([E1(lS.message)],e.prototype,"message$",void 0),mt([E1(lS.callToAction)],e.prototype,"callToAction$",void 0),mt([E1(lS.imageUrl)],e.prototype,"imageUrl$",void 0),mt([iY()],e.prototype,"close",void 0),mt([iY()],e.prototype,"learnMore",void 0),e})(),BNe=(()=>{var t;class e{constructor(i){this.source=i,this.organs=_Y}getOrganInfo(i,r,o="Female"){let s=this.organs.find(c=>c.id===i);if(!s)return $t(void 0);const a=s.organ;return s.disabled&&(s=this.organs.find(c=>!c.disabled&&c.organ===a)),s?.side&&r&&s.side!==r&&(s=this.organs.find(c=>!c.disabled&&c.organ===a&&c.side===r)),$t(s)}getOrgan(i,r="Both"){return this.source.getReferenceOrgans().pipe(Q(o=>o.find(s=>s.representation_of===i.id&&("Both"===r||s.sex===r))))}getOrganScene(i,r="Female"){return i.id?this.source.getReferenceOrganScene(i.id,{ontologyTerms:[i.id],sex:r}):$t([])}getOrganStats(i,r="Female"){return i.id?this.source.getAggregateResults({ontologyTerms:[i.id],sex:r}):$t([])}getBlocks(i,r="Female"){return i.id?this.source.getTissueBlockResults({ontologyTerms:[i.id],sex:r}):$t([])}}return(t=e).\u0275fac=function(i){return new(i||t)(it(wY))},t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function jNe(t,e){if(1&t){const n=vc();Ct(0,"div",6)(1,"div",7)(2,"div",8),si(3),It(),Ct(4,"div",9),bn("click",function(){const o=cr(n).$implicit;return br(Fn().goToURL(o.buttonUrl))}),si(5),It()()()}if(2&t){const n=e.$implicit;Ot(3),To(n.body),Ot(1),jt("gaLabel",n.buttonUrl),Ot(1),Es(" ",n.buttonTitle,"")}}function UNe(t,e){if(1&t){const n=vc();Ct(0,"div",10),bn("click",function(){const o=cr(n).$implicit;return br(Fn().goToURL(o.buttonUrl))}),si(1),It()}if(2&t){const n=e.$implicit;jt("gaLabel",n.buttonUrl),Ot(1),To(n.buttonTitle)}}let VNe=(()=>{var t;class e{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}goToURL(i){window.open(i,"_blank")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(i,r){1&i&&(Ct(0,"div",0),pn(1,jNe,6,3,"div",1),It(),Ct(2,"div",2)(3,"div",3),si(4,"Human Reference Atlas (HRA) Deep Dive"),It(),Ct(5,"div",4),pn(6,UNe,2,2,"div",5),It()()),2&i&&(Ot(1),jt("ngForOf",r.linkCards),Ot(5),jt("ngForOf",r.deepDives))},dependencies:[ad,eke,d$],styles:[".link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0rem 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:Inter Variable,Helvetica,Arial,sans-serif}"],changeDetection:0}),e})();function HNe(t,e){if(1&t&&(Ct(0,"div",3)(1,"div",4),si(2),It(),Ct(3,"div",5),si(4),It()()),2&t){const n=e.$implicit;Ot(2),To(n.count),Ot(2),To(n.label)}}let zNe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(i,r){1&i&&(Ct(0,"div",0)(1,"div",1),si(2),It(),pn(3,HNe,5,2,"div",2),It()),2&i&&(Ot(2),Es(" ",r.statsLabel," "),Ot(1),jt("ngForOf",r.stats))},dependencies:[ad],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0}),e})();const GNe=["switch"];function WNe(t,e){1&t&&(Ct(0,"div",12),function mc(){Tn.lFrame.currentNamespace=Sv}(),Ct(1,"svg",13),jn(2,"path",14),It(),Ct(3,"svg",15),jn(4,"path",16),It()())}const $Ne=["*"],YNe=new yt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),XNe={provide:Ds,useExisting:Rn(()=>CY),multi:!0};class SY{constructor(e,n){this.source=e,this.checked=n}}let qNe=0;const KNe=J1(b0(K1(q1(class{constructor(t){this._elementRef=t}}))));let JNe=(()=>{var t;class e extends KNe{get required(){return this._required}set required(i){this._required=ci(i)}get checked(){return this._checked}set checked(i){this._checked=ci(i),this._changeDetectorRef.markForCheck()}get hideIcon(){return this._hideIcon}set hideIcon(i){this._hideIcon=ci(i)}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(i,r,o,s,a,c,l){super(i),this._focusMonitor=r,this._changeDetectorRef=o,this.defaults=a,this._onChange=d=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this._hideIcon=!1,this.change=new rn,this.toggleChange=new rn,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=a.color||"accent",this._noopAnimations="NoopAnimations"===c,this.id=this._uniqueId=`${l}${++qNe}`,this._hideIcon=a.hideIcon??!1}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{"keyboard"===i||"program"===i?(this._focused=!0,this._changeDetectorRef.markForCheck()):i||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(i){this.checked=!!i}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return(t=e).\u0275fac=function(i){Eu()},t.\u0275dir=Ut({type:t,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked",hideIcon:"hideIcon"},outputs:{change:"change",toggleChange:"toggleChange"},features:[_n]}),e})(),CY=(()=>{var t;class e extends JNe{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(i,r,o,s,a,c){super(i,r,o,s,a,c,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new SY(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(i){return new SY(this,i)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(Nt),Ve($u),Ve(eo),_c("tabindex"),Ve(YNe),Ve(Cr,8))},t.\u0275cmp=An({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&Oi(GNe,5),2&i){let o;Ln(o=Bn())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(i,r){2&i&&(ul("id",r.id),vi("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),On("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[ai([XNe]),_n],ngContentSelectors:$Ne,decls:13,vars:25,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons",4,"ngIf"],[1,"mdc-label",3,"for","click"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i&&(Vr(),Ct(0,"div",0)(1,"button",1,2),bn("click",function(){return r._handleClick()}),jn(3,"div",3),Ct(4,"div",4)(5,"div",5)(6,"div",6),jn(7,"div",7),It(),Ct(8,"div",8),jn(9,"div",9),It(),pn(10,WNe,5,0,"div",10),It()()(),Ct(11,"label",11),bn("click",function(s){return s.stopPropagation()}),kn(12),It()()),2&i){const o=Ys(2);On("mdc-form-field--align-end","before"==r.labelPosition),Ot(1),On("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),jt("tabIndex",r.tabIndex)("disabled",r.disabled),vi("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),Ot(8),jt("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Ot(1),jt("ngIf",!r.hideIcon),Ot(1),jt("for",r.buttonId),vi("id",r._labelId)}},dependencies:[_g,Sc],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width);--mdc-switch-disabled-handle-opacity:0.38;--mdc-switch-disabled-selected-icon-opacity:0.38;--mdc-switch-disabled-track-opacity:0.12;--mdc-switch-disabled-unselected-icon-opacity:0.38;--mdc-switch-handle-height:20px;--mdc-switch-handle-shape:10px;--mdc-switch-handle-width:20px;--mdc-switch-selected-icon-size:18px;--mdc-switch-track-height:14px;--mdc-switch-track-shape:7px;--mdc-switch-track-width:36px;--mdc-switch-unselected-icon-size:18px;--mdc-switch-state-layer-size:40px;--mdc-switch-selected-focus-state-layer-opacity:0.12;--mdc-switch-selected-hover-state-layer-opacity:0.04;--mdc-switch-selected-pressed-state-layer-opacity:0.1;--mdc-switch-unselected-focus-state-layer-opacity:0.12;--mdc-switch-unselected-hover-state-layer-opacity:0.04;--mdc-switch-unselected-pressed-state-layer-opacity:0.1}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0}),e})(),TY=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),e})(),eFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[TY,Ni,bg,Hi,TY,Ni]}),e})(),tFe=(()=>{var t;class e{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new rn}get left(){const{value:i,labels:r}=this;return i!==r[1]}updateToggle(i){this.value=i?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=An({type:t,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(i,r){2&i&&ga(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],["hideIcon","",1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(i,r){if(1&i){const o=vc();Ct(0,"span",0),bn("click",function(){cr(o);const a=Ys(3);return r.left||a.toggle(),br(r.updateToggle(!0))}),si(1),It(),Ct(2,"mat-slide-toggle",1,2),bn("change",function(a){return r.updateToggle(!a.checked)}),It(),Ct(4,"span",0),bn("click",function(){cr(o);const a=Ys(3);return r.left&&a.toggle(),br(r.updateToggle(!1))}),si(5),It()}2&i&&(On("disabled",r.disabled)("highlighted",r.left),Ot(1),To(r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1)),Ot(1),jt("disabled",r.disabled)("checked",!r.left),Ot(2),On("disabled",r.disabled)("highlighted",!r.left),Ot(1),To(r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1)))},dependencies:[CY],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mdc-switch__track:before, [_nghost-%COMP%]     .slider .mdc-switch__track:after{background-color:#43476580!important}[_nghost-%COMP%]     .slider .mdc-switch__shadow{background-color:#434765}"],changeDetection:0}),e})();const nFe=["bodyUI"],iFe=function(){return["Male","Female"]},rFe=function(){return["Left","Right"]};let oFe=(()=>{var t;class e{constructor(i){this.ga=i,this.sexChange=new rn,this.sideChange=new rn}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){const i=new Set(this.filter?.tmc??[]);this.filteredBlocks=this.blocks?.filter(r=>i.has(r.donor.providerName)).map(r=>r["@id"])??[],this.bodyUI.scene=this.bodyUI.scene.map(r=>({...r,color:r.entityId&&this.highlightedNodeId===r["@id"]?[30,136,229,255]:this.filteredBlocks.includes(r.entityId??"")?[173,255,47,229.5]:[255,255,255,229.5]}))}ngOnChanges(i){this.bodyUI&&"organ"in i&&this.zoomToFitOrgan()}updateSex(i){this.sex=i,this.sexChange.emit(this.sex)}updateSide(i){this.side=i,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:i,organ:r}=this;if(r){const{x_dimension:o,y_dimension:s,z_dimension:a}=r;i.rotation=i.rotationX=0,i.bounds={x:1.25*o/1e3,y:1.25*s/1e3,z:1.25*a/1e3},i.target=[o/1e3/2,s/1e3/2,a/1e3/2]}}nodeClicked(i){this.ga.event("node_click","organ",i.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===i.node["@id"]?"":i.node["@id"]}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(X0))},t.\u0275cmp=An({type:t,selectors:[["ccf-organ"]],viewQuery:function(i,r){if(1&i&&Oi(nFe,7),2&i){let o;Ln(o=Bn())&&(r.bodyUI=o.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange"},features:[Sr],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(i,r){1&i&&(Ct(0,"ccf-body-ui",0,1),bn("nodeClick",function(s){return r.nodeClicked(s)})("initialized",function(){return r.zoomToFitOrgan()}),It(),Ct(2,"div",2)(3,"ccf-slide-toggle",3),bn("valueChange",function(s){return r.updateSex(s)}),It(),Ct(4,"ccf-slide-toggle",3),bn("valueChange",function(s){return r.updateSide(s)}),It()()),2&i&&(jt("scene",r.scene)("interactive",!0),Ot(3),jt("labels",wx(8,iFe))("value",r.sex)("hidden",!r.sex),Ot(1),jt("labels",wx(9,rFe))("value",r.side)("hidden",!r.side))},dependencies:[ZPe,tFe],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0}),e})();const sFe=["left"],aFe=["right"],cFe=function(){return[]},lFe=[{color:[0,0,0,0],opacity:.001}];let dFe=(()=>{var t;class e{constructor(i,r,o){this.ga=r,this.configState=o,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(Q(s=>({tmc:s}))),this.latestConfig={},this.organInfo$=o.config$.pipe(Pi(s=>this.latestConfig=s),Le(s=>i.getOrganInfo(s.organIri??"",s.side?.toLowerCase?.(),s.sex)),Pi(s=>this.logOrganLookup(s)),Pi(s=>this.latestOrganInfo=s),Is(1)),this.organ$=this.organInfo$.pipe(Le(s=>s?i.getOrgan(s,s.hasSex?this.latestConfig.sex:void 0):$t(void 0)),Pi(s=>{if(s&&this.latestOrganInfo){const a=this.latestOrganInfo?.hasSex?s.sex:void 0;a!==this.latestConfig.sex&&this.updateInput("sex",a),s.side!==this.latestConfig.side&&this.updateInput("side",s.side)}}),Is(1)),this.scene$=this.organ$.pipe(Le(s=>s&&this.latestOrganInfo?i.getOrganScene(this.latestOrganInfo,s.sex):$t(lFe))),this.stats$=this.organ$.pipe(Le(s=>s&&this.latestOrganInfo?i.getOrganStats(this.latestOrganInfo,s.sex):$t([]))),this.statsLabel$=this.organ$.pipe(Q(s=>this.makeStatsLabel(this.latestOrganInfo,s?.sex)),tc("Loading...")),this.blocks$=this.organ$.pipe(Le(s=>s&&this.latestOrganInfo?i.getBlocks(this.latestOrganInfo,s.sex):$t([])))}ngAfterViewInit(){const{left:i,right:r}=this;i.nativeElement.style.height=`${r.nativeElement.offsetHeight}px`}updateInput(i,r){this.configState.patchConfig({[i]:r})}makeStatsLabel(i,r){let o=[`Unknown IRI: ${this.latestConfig.organIri}`];if(i){const s=i.side?i.side.charAt(0).toUpperCase()+i.side.slice(1):void 0;o=[r,i.organ,s]}return o.filter(s=>!!s).join(", ")}logOrganLookup(i){this.ga.event(i?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(BNe),Ve(X0),Ve(jg))},t.\u0275cmp=An({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&(Oi(sFe,7,Nt),Oi(aFe,7,Nt)),2&i){let o;Ln(o=Bn())&&(r.left=o.first),Ln(o=Bn())&&(r.right=o.first)}},decls:16,vars:25,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(i,r){if(1&i&&(Ct(0,"div",0)(1,"div",1,2)(3,"ccf-organ",3),bn("sexChange",function(s){return r.updateInput("sex",s)})("sideChange",function(s){return r.updateInput("side",s)}),Zr(4,"async"),Zr(5,"async"),Zr(6,"async"),Zr(7,"async"),Zr(8,"async"),Zr(9,"async"),It()(),Ct(10,"div",4,5),jn(12,"ccf-stats-list",6),Zr(13,"async"),Zr(14,"async"),jn(15,"ccf-link-cards"),It()()),2&i){let o;Ot(3),jt("blocks",Lo(4,8,r.blocks$))("filter",Lo(5,10,r.filter$))("sex",Lo(6,12,r.sex$))("side",Lo(7,14,r.side$))("organ",Lo(8,16,r.organ$))("scene",null!==(o=Lo(9,18,r.scene$))&&void 0!==o?o:wx(24,cFe)),Ot(9),jt("statsLabel",Lo(13,20,r.statsLabel$))("stats",Lo(14,22,r.stats$))}},dependencies:[VNe,zNe,oFe,ny],styles:[".container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:Inter;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-moz-fit-content;height:fit-content;width:29rem}"],changeDetection:0}),e})();function uFe(t,e){1&t&&jn(0,"ccf-root")}function hFe(t){const e=i=>"string"==typeof i,n=i=>Array.isArray(i)&&i.every(e);if("string"==typeof t){const i=cI.json(t);if(n(i))return i}else if(n(t))return t;throw new Error("Invalid data sources")}function fFe(t){const e=i=>"string"==typeof i,n=i=>Array.isArray(i)&&i.every(e);if("string"==typeof t){if(!t?.startsWith("["))return[t];{const i=cI.json(t);if(n(i))return i}}else if(n(t))return t;throw new Error("Invalid data sources")}let pFe=(()=>{var t;class e extends hne{constructor(i,r){super(i,r,{initialDelay:10,initialConfig:{...sf_dbOptions,...globalThis.dbOptions},parse:{dataSources:hFe,highlightProviders:fFe,useRemoteApi:cI.boolean}}),this.sex="Female",this.side="Left"}}return(t=e).\u0275fac=function(i){return new(i||t)(Ve(jg),Ve(eo))},t.\u0275cmp=An({type:t,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint"},features:[_n],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(i,r){1&i&&pn(0,uFe,1,0,"ccf-root",0),2&i&&jt("ngIf",r.initialized)},dependencies:[Sc,dFe],encapsulation:2,changeDetection:0}),e})(),mFe=(()=>{var t;class e extends ONe{selectToken(i){return i.useRemoteApi&&i.remoteApiEndpoint?DNe:kNe}}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=Ci(t)))(r||t)}}(),t.\u0275prov=St({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const dS=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class bFe{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=Df(this.action),i=function _Fe(t){return dS(t.getHours(),2)+":"+dS(t.getMinutes(),2)+":"+dS(t.getSeconds(),2)+"."+dS(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class yFe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const MY=new yt("NGXS_LOGGER_PLUGIN_OPTIONS");let vFe=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new yFe(this._options),this._store=this._store||this._injector.get(Ml);const o=new bFe(i,this._store,this._logWriter);return o.dispatched(n),r(n,i).pipe(Pi(s=>{o.completed(s)}),ec(s=>{throw o.errored(s),s}))}}return t.\u0275fac=function(n){return new(n||t)(it(MY),it(dr))},t.\u0275prov=St({token:t,factory:t.\u0275fac}),t})();const IY=new yt("LOGGER_USER_OPTIONS");function wFe(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let xFe=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:Tz,useClass:vFe,multi:!0},{provide:IY,useValue:n},{provide:MY,useFactory:wFe,deps:[IY]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({}),t})();const EFe=[jg];let AFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[NIe.forRoot(),Hz.forRoot(EFe,{developmentMode:!1}),xFe.forRoot({disabled:true})]}),e})(),SFe=(()=>{var t;class e{constructor(i){if(i)throw new Error("The core module should only be imported once in the root module")}}return(t=e).\u0275fac=function(i){return new(i||t)(it(t,12))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({providers:[{provide:wY,useExisting:mFe}],imports:[B9,Cke.forRoot({gaToken:"G-ERNVZ1Q4KE",appName:"organ-info",projectName:"ccf",developmentMode:!1}),Nke.forRoot(()=>new GA({basePath:sf_dbOptions.remoteApiEndpoint})),AFe]}),e})(),CFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[Hi,eFe]}),e})(),TFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[Hi,QPe,CFe]}),e})(),MFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[Hi,hP]}),e})(),IFe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[Hi]}),e})(),DFe=(()=>{var t;class e{constructor(i){this.injector=i}ngDoBootstrap(){const i=function lne(t,e){const i=function nne(t,e){return e.get(Rt).resolveComponentFactory(t).inputs}(t,e.injector),r=e.strategyFactory||new sne(t,e.injector),o=function tne(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function Kte(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(i);class s extends cne{get ngElementStrategy(){if(!this._ngElementStrategy){const c=this._ngElementStrategy=r.create(this.injector||e.injector);i.forEach(({propName:l,transform:d})=>{if(!this.hasOwnProperty(l))return;const h=this[l];delete this[l],c.setInputValue(l,h,d)})}return this._ngElementStrategy}constructor(c){super(),this.injector=c}attributeChangedCallback(c,l,d,h){const[p,m]=o[c];this.ngElementStrategy.setInputValue(p,d,m)}connectedCallback(){let c=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),c=!0),this.ngElementStrategy.connect(this),c||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(c=>{const l=new CustomEvent(c.name,{detail:c.value});this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(o),i.forEach(({propName:a,transform:c})=>{Object.defineProperty(s.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(l){this.ngElementStrategy.setInputValue(a,l,c)},configurable:!0,enumerable:!0})}),s}(pFe,{injector:this.injector});customElements.define("ccf-organ-info",i)}}return(t=e).\u0275fac=function(i){return new(i||t)(it(dr))},t.\u0275mod=Kt({type:t}),t.\u0275inj=Zt({imports:[zte,SFe,MFe,IFe,TFe]}),e})();Vte().bootstrapModule(DFe).catch(t=>console.error(t))},2323:Ue=>{Ue.exports=function(T,J){var S=J.length;if(0!==S){var te=T.length;T.length+=S;for(var U=0;U<S;U++)T[te+U]=J[U]}}},3982:Ue=>{"use strict";const{AbortController:_e,AbortSignal:T}=typeof self<"u"?self:typeof window<"u"?window:void 0;Ue.exports=_e,Ue.exports.AbortSignal=T,Ue.exports.default=_e},9919:(Ue,_e)=>{"use strict";_e.byteLength=function x(I){var H=_(I),q=H[1];return 3*(H[0]+q)/4-q},_e.toByteArray=function W(I){var H,b,ae=_(I),q=ae[0],oe=ae[1],ne=new S(function F(I,H,ae){return 3*(H+ae)/4-ae}(0,q,oe)),X=0,B=oe>0?q-4:q;for(b=0;b<B;b+=4)H=J[I.charCodeAt(b)]<<18|J[I.charCodeAt(b+1)]<<12|J[I.charCodeAt(b+2)]<<6|J[I.charCodeAt(b+3)],ne[X++]=H>>16&255,ne[X++]=H>>8&255,ne[X++]=255&H;return 2===oe&&(H=J[I.charCodeAt(b)]<<2|J[I.charCodeAt(b+1)]>>4,ne[X++]=255&H),1===oe&&(H=J[I.charCodeAt(b)]<<10|J[I.charCodeAt(b+1)]<<4|J[I.charCodeAt(b+2)]>>2,ne[X++]=H>>8&255,ne[X++]=255&H),ne},_e.fromByteArray=function de(I){for(var H,ae=I.length,q=ae%3,oe=[],X=0,B=ae-q;X<B;X+=16383)oe.push($(I,X,X+16383>B?B:X+16383));return 1===q?oe.push(T[(H=I[ae-1])>>2]+T[H<<4&63]+"=="):2===q&&oe.push(T[(H=(I[ae-2]<<8)+I[ae-1])>>10]+T[H>>4&63]+T[H<<2&63]+"="),oe.join("")};for(var T=[],J=[],S=typeof Uint8Array<"u"?Uint8Array:Array,te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=0;U<64;++U)T[U]=te[U],J[te.charCodeAt(U)]=U;function _(I){var H=I.length;if(H%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=I.indexOf("=");return-1===ae&&(ae=H),[ae,ae===H?0:4-ae%4]}function R(I){return T[I>>18&63]+T[I>>12&63]+T[I>>6&63]+T[63&I]}function $(I,H,ae){for(var oe=[],ne=H;ne<ae;ne+=3)oe.push(R((I[ne]<<16&16711680)+(I[ne+1]<<8&65280)+(255&I[ne+2])));return oe.join("")}J["-".charCodeAt(0)]=62,J["_".charCodeAt(0)]=63},1979:(Ue,_e)=>{"use strict";var J=function(te){return te.typeOfFunction="function",te.boolTrue=!0,te}(J||{});_e.ak=function S(te,U,ee){if(!ee||typeof ee.value!==J.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+U+"> is not a method!");return{configurable:J.boolTrue,get:function(){var _=ee.value.bind(this);return Object.defineProperty(this,U,{value:_,configurable:J.boolTrue,writable:J.boolTrue}),_}}}},9007:(Ue,_e,T)=>{"use strict";var J=T(9919),S=T(2601);_e.Buffer=_,_e.SlowBuffer=function q(L){return+L!=L&&(L=0),_.alloc(+L)},_e.INSPECT_MAX_BYTES=50;var te=2147483647;function ee(L){if(L>te)throw new RangeError('The value "'+L+'" is invalid for option "size"');var w=new Uint8Array(L);return w.__proto__=_.prototype,w}function _(L,w,M){if("number"==typeof L){if("string"==typeof w)throw new TypeError('The "string" argument must be of type string. Received type number');return R(L)}return x(L,w,M)}function x(L,w,M){if("string"==typeof L)return function $(L,w){if(("string"!=typeof w||""===w)&&(w="utf8"),!_.isEncoding(w))throw new TypeError("Unknown encoding: "+w);var M=0|oe(L,w),Q=ee(M),fe=Q.write(L,w);return fe!==M&&(Q=Q.slice(0,fe)),Q}(L,w);if(ArrayBuffer.isView(L))return de(L);if(null==L)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(ce(L,ArrayBuffer)||L&&ce(L.buffer,ArrayBuffer))return function I(L,w,M){if(w<0||L.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<w+(M||0))throw new RangeError('"length" is outside of buffer bounds');var Q;return(Q=void 0===w&&void 0===M?new Uint8Array(L):void 0===M?new Uint8Array(L,w):new Uint8Array(L,w,M)).__proto__=_.prototype,Q}(L,w,M);if("number"==typeof L)throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=L.valueOf&&L.valueOf();if(null!=Q&&Q!==L)return _.from(Q,w,M);var fe=function H(L){if(_.isBuffer(L)){var w=0|ae(L.length),M=ee(w);return 0===M.length||L.copy(M,0,0,w),M}return void 0!==L.length?"number"!=typeof L.length||Z(L.length)?ee(0):de(L):"Buffer"===L.type&&Array.isArray(L.data)?de(L.data):void 0}(L);if(fe)return fe;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof L[Symbol.toPrimitive])return _.from(L[Symbol.toPrimitive]("string"),w,M);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}function F(L){if("number"!=typeof L)throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function R(L){return F(L),ee(L<0?0:0|ae(L))}function de(L){for(var w=L.length<0?0:0|ae(L.length),M=ee(w),Q=0;Q<w;Q+=1)M[Q]=255&L[Q];return M}function ae(L){if(L>=te)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+te.toString(16)+" bytes");return 0|L}function oe(L,w){if(_.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||ce(L,ArrayBuffer))return L.byteLength;if("string"!=typeof L)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);var M=L.length,Q=arguments.length>2&&!0===arguments[2];if(!Q&&0===M)return 0;for(var fe=!1;;)switch(w){case"ascii":case"latin1":case"binary":return M;case"utf8":case"utf-8":return E(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*M;case"hex":return M>>>1;case"base64":return Se(L).length;default:if(fe)return Q?-1:E(L).length;w=(""+w).toLowerCase(),fe=!0}}function ne(L,w,M){var Q=!1;if((void 0===w||w<0)&&(w=0),w>this.length||((void 0===M||M>this.length)&&(M=this.length),M<=0)||(M>>>=0)<=(w>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return Ne(this,w,M);case"utf8":case"utf-8":return Re(this,w,M);case"ascii":return qe(this,w,M);case"latin1":case"binary":return Ee(this,w,M);case"base64":return Ce(this,w,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,w,M);default:if(Q)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),Q=!0}}function X(L,w,M){var Q=L[w];L[w]=L[M],L[M]=Q}function B(L,w,M,Q,fe){if(0===L.length)return-1;if("string"==typeof M?(Q=M,M=0):M>2147483647?M=2147483647:M<-2147483648&&(M=-2147483648),Z(M=+M)&&(M=fe?0:L.length-1),M<0&&(M=L.length+M),M>=L.length){if(fe)return-1;M=L.length-1}else if(M<0){if(!fe)return-1;M=0}if("string"==typeof w&&(w=_.from(w,Q)),_.isBuffer(w))return 0===w.length?-1:b(L,w,M,Q,fe);if("number"==typeof w)return w&=255,"function"==typeof Uint8Array.prototype.indexOf?fe?Uint8Array.prototype.indexOf.call(L,w,M):Uint8Array.prototype.lastIndexOf.call(L,w,M):b(L,[w],M,Q,fe);throw new TypeError("val must be string, number or Buffer")}function b(L,w,M,Q,fe){var gt,ze=1,Xe=L.length,dt=w.length;if(void 0!==Q&&("ucs2"===(Q=String(Q).toLowerCase())||"ucs-2"===Q||"utf16le"===Q||"utf-16le"===Q)){if(L.length<2||w.length<2)return-1;ze=2,Xe/=2,dt/=2,M/=2}function mt(G,v){return 1===ze?G[v]:G.readUInt16BE(v*ze)}if(fe){var zt=-1;for(gt=M;gt<Xe;gt++)if(mt(L,gt)===mt(w,-1===zt?0:gt-zt)){if(-1===zt&&(zt=gt),gt-zt+1===dt)return zt*ze}else-1!==zt&&(gt-=gt-zt),zt=-1}else for(M+dt>Xe&&(M=Xe-dt),gt=M;gt>=0;gt--){for(var on=!0,Ie=0;Ie<dt;Ie++)if(mt(L,gt+Ie)!==mt(w,Ie)){on=!1;break}if(on)return gt}return-1}function O(L,w,M,Q){M=Number(M)||0;var fe=L.length-M;Q?(Q=Number(Q))>fe&&(Q=fe):Q=fe;var ze=w.length;Q>ze/2&&(Q=ze/2);for(var Xe=0;Xe<Q;++Xe){var dt=parseInt(w.substr(2*Xe,2),16);if(Z(dt))return Xe;L[M+Xe]=dt}return Xe}function C(L,w,M,Q){return tt(E(w,L.length-M),L,M,Q)}function he(L,w,M,Q){return tt(function ie(L){for(var w=[],M=0;M<L.length;++M)w.push(255&L.charCodeAt(M));return w}(w),L,M,Q)}function V(L,w,M,Q){return he(L,w,M,Q)}function Te(L,w,M,Q){return tt(Se(w),L,M,Q)}function se(L,w,M,Q){return tt(function z(L,w){for(var M,Q,ze=[],Xe=0;Xe<L.length&&!((w-=2)<0);++Xe)Q=(M=L.charCodeAt(Xe))>>8,ze.push(M%256),ze.push(Q);return ze}(w,L.length-M),L,M,Q)}function Ce(L,w,M){return J.fromByteArray(0===w&&M===L.length?L:L.slice(w,M))}function Re(L,w,M){M=Math.min(L.length,M);for(var Q=[],fe=w;fe<M;){var mt,gt,zt,on,ze=L[fe],Xe=null,dt=ze>239?4:ze>223?3:ze>191?2:1;if(fe+dt<=M)switch(dt){case 1:ze<128&&(Xe=ze);break;case 2:128==(192&(mt=L[fe+1]))&&(on=(31&ze)<<6|63&mt)>127&&(Xe=on);break;case 3:gt=L[fe+2],128==(192&(mt=L[fe+1]))&&128==(192&gt)&&(on=(15&ze)<<12|(63&mt)<<6|63&gt)>2047&&(on<55296||on>57343)&&(Xe=on);break;case 4:gt=L[fe+2],zt=L[fe+3],128==(192&(mt=L[fe+1]))&&128==(192&gt)&&128==(192&zt)&&(on=(15&ze)<<18|(63&mt)<<12|(63&gt)<<6|63&zt)>65535&&on<1114112&&(Xe=on)}null===Xe?(Xe=65533,dt=1):Xe>65535&&(Q.push((Xe-=65536)>>>10&1023|55296),Xe=56320|1023&Xe),Q.push(Xe),fe+=dt}return function et(L){var w=L.length;if(w<=ke)return String.fromCharCode.apply(String,L);for(var M="",Q=0;Q<w;)M+=String.fromCharCode.apply(String,L.slice(Q,Q+=ke));return M}(Q)}_e.kMaxLength=te,!(_.TYPED_ARRAY_SUPPORT=function U(){try{var L=new Uint8Array(1);return L.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===L.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(L,w,M){return x(L,w,M)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(L,w,M){return function W(L,w,M){return F(L),L<=0?ee(L):void 0!==w?"string"==typeof M?ee(L).fill(w,M):ee(L).fill(w):ee(L)}(L,w,M)},_.allocUnsafe=function(L){return R(L)},_.allocUnsafeSlow=function(L){return R(L)},_.isBuffer=function(w){return null!=w&&!0===w._isBuffer&&w!==_.prototype},_.compare=function(w,M){if(ce(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),ce(M,Uint8Array)&&(M=_.from(M,M.offset,M.byteLength)),!_.isBuffer(w)||!_.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===M)return 0;for(var Q=w.length,fe=M.length,ze=0,Xe=Math.min(Q,fe);ze<Xe;++ze)if(w[ze]!==M[ze]){Q=w[ze],fe=M[ze];break}return Q<fe?-1:fe<Q?1:0},_.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(w,M){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(0===w.length)return _.alloc(0);var Q;if(void 0===M)for(M=0,Q=0;Q<w.length;++Q)M+=w[Q].length;var fe=_.allocUnsafe(M),ze=0;for(Q=0;Q<w.length;++Q){var Xe=w[Q];if(ce(Xe,Uint8Array)&&(Xe=_.from(Xe)),!_.isBuffer(Xe))throw new TypeError('"list" argument must be an Array of Buffers');Xe.copy(fe,ze),ze+=Xe.length}return fe},_.byteLength=oe,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var w=this.length;if(w%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<w;M+=2)X(this,M,M+1);return this},_.prototype.swap32=function(){var w=this.length;if(w%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<w;M+=4)X(this,M,M+3),X(this,M+1,M+2);return this},_.prototype.swap64=function(){var w=this.length;if(w%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<w;M+=8)X(this,M,M+7),X(this,M+1,M+6),X(this,M+2,M+5),X(this,M+3,M+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var w=this.length;return 0===w?"":0===arguments.length?Re(this,0,w):ne.apply(this,arguments)},_.prototype.equals=function(w){if(!_.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w||0===_.compare(this,w)},_.prototype.inspect=function(){var w="",M=_e.INSPECT_MAX_BYTES;return w=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(w+=" ... "),"<Buffer "+w+">"},_.prototype.compare=function(w,M,Q,fe,ze){if(ce(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),!_.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(void 0===M&&(M=0),void 0===Q&&(Q=w?w.length:0),void 0===fe&&(fe=0),void 0===ze&&(ze=this.length),M<0||Q>w.length||fe<0||ze>this.length)throw new RangeError("out of range index");if(fe>=ze&&M>=Q)return 0;if(fe>=ze)return-1;if(M>=Q)return 1;if(this===w)return 0;for(var Xe=(ze>>>=0)-(fe>>>=0),dt=(Q>>>=0)-(M>>>=0),mt=Math.min(Xe,dt),gt=this.slice(fe,ze),zt=w.slice(M,Q),on=0;on<mt;++on)if(gt[on]!==zt[on]){Xe=gt[on],dt=zt[on];break}return Xe<dt?-1:dt<Xe?1:0},_.prototype.includes=function(w,M,Q){return-1!==this.indexOf(w,M,Q)},_.prototype.indexOf=function(w,M,Q){return B(this,w,M,Q,!0)},_.prototype.lastIndexOf=function(w,M,Q){return B(this,w,M,Q,!1)},_.prototype.write=function(w,M,Q,fe){if(void 0===M)fe="utf8",Q=this.length,M=0;else if(void 0===Q&&"string"==typeof M)fe=M,Q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(Q)?(Q>>>=0,void 0===fe&&(fe="utf8")):(fe=Q,Q=void 0)}var ze=this.length-M;if((void 0===Q||Q>ze)&&(Q=ze),w.length>0&&(Q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");for(var Xe=!1;;)switch(fe){case"hex":return O(this,w,M,Q);case"utf8":case"utf-8":return C(this,w,M,Q);case"ascii":return he(this,w,M,Q);case"latin1":case"binary":return V(this,w,M,Q);case"base64":return Te(this,w,M,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,w,M,Q);default:if(Xe)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),Xe=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ke=4096;function qe(L,w,M){var Q="";M=Math.min(L.length,M);for(var fe=w;fe<M;++fe)Q+=String.fromCharCode(127&L[fe]);return Q}function Ee(L,w,M){var Q="";M=Math.min(L.length,M);for(var fe=w;fe<M;++fe)Q+=String.fromCharCode(L[fe]);return Q}function Ne(L,w,M){var Q=L.length;(!w||w<0)&&(w=0),(!M||M<0||M>Q)&&(M=Q);for(var fe="",ze=w;ze<M;++ze)fe+=N(L[ze]);return fe}function Pe(L,w,M){for(var Q=L.slice(w,M),fe="",ze=0;ze<Q.length;ze+=2)fe+=String.fromCharCode(Q[ze]+256*Q[ze+1]);return fe}function He(L,w,M){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+w>M)throw new RangeError("Trying to access beyond buffer length")}function pe(L,w,M,Q,fe,ze){if(!_.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>fe||w<ze)throw new RangeError('"value" argument is out of bounds');if(M+Q>L.length)throw new RangeError("Index out of range")}function Ae(L,w,M,Q,fe,ze){if(M+Q>L.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("Index out of range")}function Ye(L,w,M,Q,fe){return w=+w,M>>>=0,fe||Ae(L,0,M,4),S.write(L,w,M,Q,23,4),M+4}function st(L,w,M,Q,fe){return w=+w,M>>>=0,fe||Ae(L,0,M,8),S.write(L,w,M,Q,52,8),M+8}_.prototype.slice=function(w,M){var Q=this.length;(w=~~w)<0?(w+=Q)<0&&(w=0):w>Q&&(w=Q),(M=void 0===M?Q:~~M)<0?(M+=Q)<0&&(M=0):M>Q&&(M=Q),M<w&&(M=w);var fe=this.subarray(w,M);return fe.__proto__=_.prototype,fe},_.prototype.readUIntLE=function(w,M,Q){w>>>=0,M>>>=0,Q||He(w,M,this.length);for(var fe=this[w],ze=1,Xe=0;++Xe<M&&(ze*=256);)fe+=this[w+Xe]*ze;return fe},_.prototype.readUIntBE=function(w,M,Q){w>>>=0,M>>>=0,Q||He(w,M,this.length);for(var fe=this[w+--M],ze=1;M>0&&(ze*=256);)fe+=this[w+--M]*ze;return fe},_.prototype.readUInt8=function(w,M){return w>>>=0,M||He(w,1,this.length),this[w]},_.prototype.readUInt16LE=function(w,M){return w>>>=0,M||He(w,2,this.length),this[w]|this[w+1]<<8},_.prototype.readUInt16BE=function(w,M){return w>>>=0,M||He(w,2,this.length),this[w]<<8|this[w+1]},_.prototype.readUInt32LE=function(w,M){return w>>>=0,M||He(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+16777216*this[w+3]},_.prototype.readUInt32BE=function(w,M){return w>>>=0,M||He(w,4,this.length),16777216*this[w]+(this[w+1]<<16|this[w+2]<<8|this[w+3])},_.prototype.readIntLE=function(w,M,Q){w>>>=0,M>>>=0,Q||He(w,M,this.length);for(var fe=this[w],ze=1,Xe=0;++Xe<M&&(ze*=256);)fe+=this[w+Xe]*ze;return fe>=(ze*=128)&&(fe-=Math.pow(2,8*M)),fe},_.prototype.readIntBE=function(w,M,Q){w>>>=0,M>>>=0,Q||He(w,M,this.length);for(var fe=M,ze=1,Xe=this[w+--fe];fe>0&&(ze*=256);)Xe+=this[w+--fe]*ze;return Xe>=(ze*=128)&&(Xe-=Math.pow(2,8*M)),Xe},_.prototype.readInt8=function(w,M){return w>>>=0,M||He(w,1,this.length),128&this[w]?-1*(255-this[w]+1):this[w]},_.prototype.readInt16LE=function(w,M){w>>>=0,M||He(w,2,this.length);var Q=this[w]|this[w+1]<<8;return 32768&Q?4294901760|Q:Q},_.prototype.readInt16BE=function(w,M){w>>>=0,M||He(w,2,this.length);var Q=this[w+1]|this[w]<<8;return 32768&Q?4294901760|Q:Q},_.prototype.readInt32LE=function(w,M){return w>>>=0,M||He(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},_.prototype.readInt32BE=function(w,M){return w>>>=0,M||He(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},_.prototype.readFloatLE=function(w,M){return w>>>=0,M||He(w,4,this.length),S.read(this,w,!0,23,4)},_.prototype.readFloatBE=function(w,M){return w>>>=0,M||He(w,4,this.length),S.read(this,w,!1,23,4)},_.prototype.readDoubleLE=function(w,M){return w>>>=0,M||He(w,8,this.length),S.read(this,w,!0,52,8)},_.prototype.readDoubleBE=function(w,M){return w>>>=0,M||He(w,8,this.length),S.read(this,w,!1,52,8)},_.prototype.writeUIntLE=function(w,M,Q,fe){w=+w,M>>>=0,Q>>>=0,fe||pe(this,w,M,Q,Math.pow(2,8*Q)-1,0);var Xe=1,dt=0;for(this[M]=255&w;++dt<Q&&(Xe*=256);)this[M+dt]=w/Xe&255;return M+Q},_.prototype.writeUIntBE=function(w,M,Q,fe){w=+w,M>>>=0,Q>>>=0,fe||pe(this,w,M,Q,Math.pow(2,8*Q)-1,0);var Xe=Q-1,dt=1;for(this[M+Xe]=255&w;--Xe>=0&&(dt*=256);)this[M+Xe]=w/dt&255;return M+Q},_.prototype.writeUInt8=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,1,255,0),this[M]=255&w,M+1},_.prototype.writeUInt16LE=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,2,65535,0),this[M]=255&w,this[M+1]=w>>>8,M+2},_.prototype.writeUInt16BE=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,2,65535,0),this[M]=w>>>8,this[M+1]=255&w,M+2},_.prototype.writeUInt32LE=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,4,4294967295,0),this[M+3]=w>>>24,this[M+2]=w>>>16,this[M+1]=w>>>8,this[M]=255&w,M+4},_.prototype.writeUInt32BE=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,4,4294967295,0),this[M]=w>>>24,this[M+1]=w>>>16,this[M+2]=w>>>8,this[M+3]=255&w,M+4},_.prototype.writeIntLE=function(w,M,Q,fe){if(w=+w,M>>>=0,!fe){var ze=Math.pow(2,8*Q-1);pe(this,w,M,Q,ze-1,-ze)}var Xe=0,dt=1,mt=0;for(this[M]=255&w;++Xe<Q&&(dt*=256);)w<0&&0===mt&&0!==this[M+Xe-1]&&(mt=1),this[M+Xe]=(w/dt>>0)-mt&255;return M+Q},_.prototype.writeIntBE=function(w,M,Q,fe){if(w=+w,M>>>=0,!fe){var ze=Math.pow(2,8*Q-1);pe(this,w,M,Q,ze-1,-ze)}var Xe=Q-1,dt=1,mt=0;for(this[M+Xe]=255&w;--Xe>=0&&(dt*=256);)w<0&&0===mt&&0!==this[M+Xe+1]&&(mt=1),this[M+Xe]=(w/dt>>0)-mt&255;return M+Q},_.prototype.writeInt8=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,1,127,-128),w<0&&(w=255+w+1),this[M]=255&w,M+1},_.prototype.writeInt16LE=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,2,32767,-32768),this[M]=255&w,this[M+1]=w>>>8,M+2},_.prototype.writeInt16BE=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,2,32767,-32768),this[M]=w>>>8,this[M+1]=255&w,M+2},_.prototype.writeInt32LE=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,4,2147483647,-2147483648),this[M]=255&w,this[M+1]=w>>>8,this[M+2]=w>>>16,this[M+3]=w>>>24,M+4},_.prototype.writeInt32BE=function(w,M,Q){return w=+w,M>>>=0,Q||pe(this,w,M,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[M]=w>>>24,this[M+1]=w>>>16,this[M+2]=w>>>8,this[M+3]=255&w,M+4},_.prototype.writeFloatLE=function(w,M,Q){return Ye(this,w,M,!0,Q)},_.prototype.writeFloatBE=function(w,M,Q){return Ye(this,w,M,!1,Q)},_.prototype.writeDoubleLE=function(w,M,Q){return st(this,w,M,!0,Q)},_.prototype.writeDoubleBE=function(w,M,Q){return st(this,w,M,!1,Q)},_.prototype.copy=function(w,M,Q,fe){if(!_.isBuffer(w))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),!fe&&0!==fe&&(fe=this.length),M>=w.length&&(M=w.length),M||(M=0),fe>0&&fe<Q&&(fe=Q),fe===Q||0===w.length||0===this.length)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),w.length-M<fe-Q&&(fe=w.length-M+Q);var ze=fe-Q;if(this===w&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(M,Q,fe);else if(this===w&&Q<M&&M<fe)for(var Xe=ze-1;Xe>=0;--Xe)w[Xe+M]=this[Xe+Q];else Uint8Array.prototype.set.call(w,this.subarray(Q,fe),M);return ze},_.prototype.fill=function(w,M,Q,fe){if("string"==typeof w){if("string"==typeof M?(fe=M,M=0,Q=this.length):"string"==typeof Q&&(fe=Q,Q=this.length),void 0!==fe&&"string"!=typeof fe)throw new TypeError("encoding must be a string");if("string"==typeof fe&&!_.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(1===w.length){var ze=w.charCodeAt(0);("utf8"===fe&&ze<128||"latin1"===fe)&&(w=ze)}}else"number"==typeof w&&(w&=255);if(M<0||this.length<M||this.length<Q)throw new RangeError("Out of range index");if(Q<=M)return this;var Xe;if(M>>>=0,Q=void 0===Q?this.length:Q>>>0,w||(w=0),"number"==typeof w)for(Xe=M;Xe<Q;++Xe)this[Xe]=w;else{var dt=_.isBuffer(w)?w:_.from(w,fe),mt=dt.length;if(0===mt)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(Xe=0;Xe<Q-M;++Xe)this[Xe+M]=dt[Xe%mt]}return this};var Ze=/[^+/0-9A-Za-z-_]/g;function N(L){return L<16?"0"+L.toString(16):L.toString(16)}function E(L,w){w=w||1/0;for(var M,Q=L.length,fe=null,ze=[],Xe=0;Xe<Q;++Xe){if((M=L.charCodeAt(Xe))>55295&&M<57344){if(!fe){if(M>56319){(w-=3)>-1&&ze.push(239,191,189);continue}if(Xe+1===Q){(w-=3)>-1&&ze.push(239,191,189);continue}fe=M;continue}if(M<56320){(w-=3)>-1&&ze.push(239,191,189),fe=M;continue}M=65536+(fe-55296<<10|M-56320)}else fe&&(w-=3)>-1&&ze.push(239,191,189);if(fe=null,M<128){if((w-=1)<0)break;ze.push(M)}else if(M<2048){if((w-=2)<0)break;ze.push(M>>6|192,63&M|128)}else if(M<65536){if((w-=3)<0)break;ze.push(M>>12|224,M>>6&63|128,63&M|128)}else{if(!(M<1114112))throw new Error("Invalid code point");if((w-=4)<0)break;ze.push(M>>18|240,M>>12&63|128,M>>6&63|128,63&M|128)}}return ze}function Se(L){return J.toByteArray(function le(L){if((L=(L=L.split("=")[0]).trim().replace(Ze,"")).length<2)return"";for(;L.length%4!=0;)L+="=";return L}(L))}function tt(L,w,M,Q){for(var fe=0;fe<Q&&!(fe+M>=w.length||fe>=L.length);++fe)w[fe+M]=L[fe];return fe}function ce(L,w){return L instanceof w||null!=L&&null!=L.constructor&&null!=L.constructor.name&&L.constructor.name===w.name}function Z(L){return L!=L}},1563:(Ue,_e,T)=>{Ue.exports={ResizeSensor:T(884),ElementQueries:T(8381)}},8381:function(Ue,_e,T){"use strict";var J,S,te;typeof window<"u"&&window,S=[T(884)],void 0!==(te="function"==typeof(J=function(U){var ee=function(){var x,F={},W=[];function R(V){V||(V=document.documentElement);var Te=window.getComputedStyle(V,null).fontSize;return parseFloat(Te)||16}function de(V,Te){var se=Te.split(/\d/),Ce=se[se.length-1];switch(Te=parseFloat(Te),Ce){case"px":default:return Te;case"em":return Te*R(V);case"rem":return Te*R();case"vw":return Te*document.documentElement.clientWidth/100;case"vh":return Te*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Re=document.documentElement.clientWidth/100,ke=document.documentElement.clientHeight/100;return Te*(0,Math["vmin"===Ce?"min":"max"])(Re,ke)}}function I(V,Te){this.element=V;var se,Ce,Re,ke,et,qe,Ee,Ne,Pe=["min-width","min-height","max-width","max-height"];this.call=function(){for(se in Re=function $(V){if(!V.getBoundingClientRect)return{width:V.offsetWidth,height:V.offsetHeight};var Te=V.getBoundingClientRect();return{width:Math.round(Te.width),height:Math.round(Te.height)}}(this.element),qe={},F[Te])F[Te].hasOwnProperty(se)&&(ke=de(this.element,(Ce=F[Te][se]).value),et="width"===Ce.property?Re.width:Re.height,Ee="","min"===Ce.mode&&et>=ke&&(Ee+=Ce.value),"max"===Ce.mode&&et<=ke&&(Ee+=Ce.value),qe[Ne=Ce.mode+"-"+Ce.property]||(qe[Ne]=""),Ee&&-1===(" "+qe[Ne]+" ").indexOf(" "+Ee+" ")&&(qe[Ne]+=" "+Ee));for(var He in Pe)Pe.hasOwnProperty(He)&&(qe[Pe[He]]?this.element.setAttribute(Pe[He],qe[Pe[He]].substr(1)):this.element.removeAttribute(Pe[He]))}}function H(V,Te){V.elementQueriesSetupInformation||(V.elementQueriesSetupInformation=new I(V,Te)),V.elementQueriesSensor||(V.elementQueriesSensor=new U(V,function(){V.elementQueriesSetupInformation.call()}))}function ae(V,Te,se,Ce){if(typeof F[V]>"u"){F[V]=[];var Re=W.length;x.innerHTML+="\n"+V+" {animation: 0.1s element-queries;}",x.innerHTML+="\n"+V+" > .resize-sensor {min-width: "+Re+"px;}",W.push(V)}F[V].push({mode:Te,property:se,value:Ce})}function q(V){var Te;if(document.querySelectorAll&&(Te=V?V.querySelectorAll.bind(V):document.querySelectorAll.bind(document)),!Te&&typeof $$<"u"&&(Te=$$),!Te&&typeof jQuery<"u"&&(Te=jQuery),!Te)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Te}function ne(V){var Te=[],se=[],Ce=[],Re=0,ke=-1,et=[];for(var qe in V.children)if(V.children.hasOwnProperty(qe)&&V.children[qe].tagName&&"img"===V.children[qe].tagName.toLowerCase()){Te.push(V.children[qe]);var Ee=V.children[qe].getAttribute("min-width")||V.children[qe].getAttribute("data-min-width"),Ne=V.children[qe].getAttribute("data-src")||V.children[qe].getAttribute("url");Ce.push(Ne),se.push({minWidth:Ee}),Ee?V.children[qe].style.display="none":(Re=Te.length-1,V.children[qe].style.display="block")}function He(){var Ae,pe=!1;for(Ae in Te)Te.hasOwnProperty(Ae)&&se[Ae].minWidth&&V.offsetWidth>se[Ae].minWidth&&(pe=Ae);if(pe||(pe=Re),ke!==pe)if(et[pe])Te[ke].style.display="none",Te[pe].style.display="block",ke=pe;else{var Ye=new Image;Ye.onload=function(){Te[pe].src=Ce[pe],Te[ke].style.display="none",Te[pe].style.display="block",et[pe]=!0,ke=pe},Ye.src=Ce[pe]}else Te[pe].src=Ce[pe]}ke=Re,V.resizeSensorInstance=new U(V,He),He()}var B=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,b=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function O(V){var Te,se,Ce,Re;for(V=V.replace(/'/g,'"');null!==(Te=B.exec(V));)for(se=Te[1]+Te[3],Ce=Te[2];null!==(Re=b.exec(Ce));)ae(se,Re[1],Re[2],Re[3])}function C(V){var Te="";if(V)if("string"==typeof V)(-1!==(V=V.toLowerCase()).indexOf("min-width")||-1!==V.indexOf("max-width"))&&O(V);else for(var se=0,Ce=V.length;se<Ce;se++)1===V[se].type?(-1!==(Te=V[se].selectorText||V[se].cssText).indexOf("min-height")||-1!==Te.indexOf("max-height")||-1!==Te.indexOf("min-width")||-1!==Te.indexOf("max-width"))&&O(Te):4===V[se].type?C(V[se].cssRules||V[se].rules):3===V[se].type&&V[se].styleSheet.hasOwnProperty("cssRules")&&C(V[se].styleSheet.cssRules)}var he=!1;this.init=function(){var V="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?V="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?V="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(V="oanimationstart"),document.body.addEventListener(V,function(Ce){var Re=Ce.target,ke=Re&&window.getComputedStyle(Re,null),et=ke&&ke.getPropertyValue("animation-name");if(et&&-1!==et.indexOf("element-queries")){Re.elementQueriesSensor=new U(Re,function(){Re.elementQueriesSetupInformation&&Re.elementQueriesSetupInformation.call()});var Ne=window.getComputedStyle(Re.resizeSensor,null).getPropertyValue("min-width");Ne=parseInt(Ne.replace("px","")),H(Ce.target,W[Ne])}}),he||((x=document.createElement("style")).type="text/css",x.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",x.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(x),he=!0);for(var Te=0,se=document.styleSheets.length;Te<se;Te++)try{document.styleSheets[Te].href&&0===document.styleSheets[Te].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Te].href),C(document.styleSheets[Te].cssRules||document.styleSheets[Te].rules||document.styleSheets[Te].cssText)}catch{}!function X(){for(var Te=q()("[data-responsive-image],[responsive-image]"),se=0,Ce=Te.length;se<Ce;se++)ne(Te[se])}()},this.findElementQueriesElements=function(V){!function oe(V){var Te=q(V);for(var se in F)if(F.hasOwnProperty(se))for(var Ce=Te(se,V),Re=0,ke=Ce.length;Re<ke;Re++)H(Ce[Re],se)}(V)},this.update=function(){this.init()}};ee.update=function(){ee.instance.update()},ee.detach=function(x){x.elementQueriesSetupInformation?(x.elementQueriesSensor.detach(),delete x.elementQueriesSetupInformation,delete x.elementQueriesSensor):x.resizeSensorInstance&&(x.resizeSensorInstance.detach(),delete x.resizeSensorInstance)},ee.init=function(){ee.instance||(ee.instance=new ee),ee.instance.init()};return ee.findElementQueriesElements=function(x){ee.instance.findElementQueriesElements(x)},ee.listen=function(){!function(x){if(document.addEventListener)document.addEventListener("DOMContentLoaded",x,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var F=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(x(),clearInterval(F))},10);else window.onload=x}(ee.init)},ee})?J.apply(_e,S):J)&&(Ue.exports=te)},884:function(Ue,_e,T){"use strict";var J,S;typeof window<"u"&&window,void 0!==(S="function"==typeof(J=function(){if(typeof window>"u")return null;var te=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),U=te.requestAnimationFrame||te.mozRequestAnimationFrame||te.webkitRequestAnimationFrame||function($){return te.setTimeout($,20)},ee=te.cancelAnimationFrame||te.mozCancelAnimationFrame||te.webkitCancelAnimationFrame||function($){te.clearTimeout($)};function _($,de){var I=Object.prototype.toString.call($),H="[object Array]"===I||"[object NodeList]"===I||"[object HTMLCollection]"===I||"[object Object]"===I||typeof jQuery<"u"&&$ instanceof jQuery||typeof Elements<"u"&&$ instanceof Elements,ae=0,q=$.length;if(H)for(;ae<q;ae++)de($[ae]);else de($)}function x($){if(!$.getBoundingClientRect)return{width:$.offsetWidth,height:$.offsetHeight};var de=$.getBoundingClientRect();return{width:Math.round(de.width),height:Math.round(de.height)}}function F($,de){Object.keys(de).forEach(function(I){$.style[I]=de[I]})}var W=function($,de){var I=0;function H(){var oe,ne,q=[];this.add=function(X){q.push(X)},this.call=function(X){for(oe=0,ne=q.length;oe<ne;oe++)q[oe].call(this,X)},this.remove=function(X){var B=[];for(oe=0,ne=q.length;oe<ne;oe++)q[oe]!==X&&B.push(q[oe]);q=B},this.length=function(){return q.length}}function ae(q,oe){if(q){if(q.resizedAttached)return void q.resizedAttached.add(oe);q.resizedAttached=new H,q.resizedAttached.add(oe),q.resizeSensor=document.createElement("div"),q.resizeSensor.dir="ltr",q.resizeSensor.className="resize-sensor";var ne={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},X={position:"absolute",left:"0px",top:"0px",transition:"0s"};F(q.resizeSensor,ne);var B=document.createElement("div");B.className="resize-sensor-expand",F(B,ne);var b=document.createElement("div");F(b,X),B.appendChild(b);var O=document.createElement("div");O.className="resize-sensor-shrink",F(O,ne);var C=document.createElement("div");F(C,X),F(C,{width:"200%",height:"200%"}),O.appendChild(C),q.resizeSensor.appendChild(B),q.resizeSensor.appendChild(O),q.appendChild(q.resizeSensor);var he=window.getComputedStyle(q),V=he?he.getPropertyValue("position"):null;"absolute"!==V&&"relative"!==V&&"fixed"!==V&&"sticky"!==V&&(q.style.position="relative");var Te=!1,se=0,Ce=x(q),Re=0,ke=0,et=!0;I=0;var Ee=function(){if(et){if(0===q.offsetWidth&&0===q.offsetHeight)return void(I||(I=U(function(){I=0,Ee()})));et=!1}var pe,Ae;Ae=q.offsetHeight,b.style.width=(pe=q.offsetWidth)+10+"px",b.style.height=Ae+10+"px",B.scrollLeft=pe+10,B.scrollTop=Ae+10,O.scrollLeft=pe+10,O.scrollTop=Ae+10};q.resizeSensor.resetSensor=Ee;var Ne=function(){se=0,Te&&(Re=Ce.width,ke=Ce.height,q.resizedAttached&&q.resizedAttached.call(Ce))},Pe=function(){Ce=x(q),(Te=Ce.width!==Re||Ce.height!==ke)&&!se&&(se=U(Ne)),Ee()},He=function(pe,Ae,Ye){pe.attachEvent?pe.attachEvent("on"+Ae,Ye):pe.addEventListener(Ae,Ye)};He(B,"scroll",Pe),He(O,"scroll",Pe),I=U(function(){I=0,Ee()})}}_($,function(q){ae(q,de)}),this.detach=function(q){I||(ee(I),I=0),W.detach($,q)},this.reset=function(){$.resizeSensor.resetSensor()}};if(W.reset=function($){_($,function(de){de.resizeSensor.resetSensor()})},W.detach=function($,de){_($,function(I){I&&(I.resizedAttached&&"function"==typeof de&&(I.resizedAttached.remove(de),I.resizedAttached.length())||I.resizeSensor&&(I.contains(I.resizeSensor)&&I.removeChild(I.resizeSensor),delete I.resizeSensor,delete I.resizedAttached))})},typeof MutationObserver<"u"){var R=new MutationObserver(function($){for(var de in $)if($.hasOwnProperty(de))for(var I=$[de].addedNodes,H=0;H<I.length;H++)I[H].resizeSensor&&W.reset(I[H])});document.addEventListener("DOMContentLoaded",function($){R.observe(document.body,{childList:!0,subtree:!0})})}return W})?J.call(_e,T,_e,Ue):J)&&(Ue.exports=S)},2016:Ue=>{"use strict";var J,_e="object"==typeof Reflect?Reflect:null,T=_e&&"function"==typeof _e.apply?_e.apply:function(B,b,O){return Function.prototype.apply.call(B,b,O)};J=_e&&"function"==typeof _e.ownKeys?_e.ownKeys:Object.getOwnPropertySymbols?function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:function(B){return Object.getOwnPropertyNames(B)};var te=Number.isNaN||function(B){return B!=B};function U(){U.init.call(this)}Ue.exports=U,Ue.exports.once=function q(X,B){return new Promise(function(b,O){function C(V){X.removeListener(B,he),O(V)}function he(){"function"==typeof X.removeListener&&X.removeListener("error",C),b([].slice.call(arguments))}ne(X,B,he,{once:!0}),"error"!==B&&function oe(X,B,b){"function"==typeof X.on&&ne(X,"error",B,b)}(X,C,{once:!0})})},U.EventEmitter=U,U.prototype._events=void 0,U.prototype._eventsCount=0,U.prototype._maxListeners=void 0;var ee=10;function _(X){if("function"!=typeof X)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof X)}function x(X){return void 0===X._maxListeners?U.defaultMaxListeners:X._maxListeners}function F(X,B,b,O){var C,he,V;if(_(b),void 0===(he=X._events)?(he=X._events=Object.create(null),X._eventsCount=0):(void 0!==he.newListener&&(X.emit("newListener",B,b.listener?b.listener:b),he=X._events),V=he[B]),void 0===V)V=he[B]=b,++X._eventsCount;else if("function"==typeof V?V=he[B]=O?[b,V]:[V,b]:O?V.unshift(b):V.push(b),(C=x(X))>0&&V.length>C&&!V.warned){V.warned=!0;var Te=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");Te.name="MaxListenersExceededWarning",Te.emitter=X,Te.type=B,Te.count=V.length,function S(X){console&&console.warn&&console.warn(X)}(Te)}return X}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R(X,B,b){var O={fired:!1,wrapFn:void 0,target:X,type:B,listener:b},C=W.bind(O);return C.listener=b,O.wrapFn=C,C}function $(X,B,b){var O=X._events;if(void 0===O)return[];var C=O[B];return void 0===C?[]:"function"==typeof C?b?[C.listener||C]:[C]:b?function ae(X){for(var B=new Array(X.length),b=0;b<B.length;++b)B[b]=X[b].listener||X[b];return B}(C):I(C,C.length)}function de(X){var B=this._events;if(void 0!==B){var b=B[X];if("function"==typeof b)return 1;if(void 0!==b)return b.length}return 0}function I(X,B){for(var b=new Array(B),O=0;O<B;++O)b[O]=X[O];return b}function ne(X,B,b,O){if("function"==typeof X.on)O.once?X.once(B,b):X.on(B,b);else{if("function"!=typeof X.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof X);X.addEventListener(B,function C(he){O.once&&X.removeEventListener(B,C),b(he)})}}Object.defineProperty(U,"defaultMaxListeners",{enumerable:!0,get:function(){return ee},set:function(X){if("number"!=typeof X||X<0||te(X))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+X+".");ee=X}}),U.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},U.prototype.setMaxListeners=function(B){if("number"!=typeof B||B<0||te(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this},U.prototype.getMaxListeners=function(){return x(this)},U.prototype.emit=function(B){for(var b=[],O=1;O<arguments.length;O++)b.push(arguments[O]);var C="error"===B,he=this._events;if(void 0!==he)C=C&&void 0===he.error;else if(!C)return!1;if(C){var V;if(b.length>0&&(V=b[0]),V instanceof Error)throw V;var Te=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw Te.context=V,Te}var se=he[B];if(void 0===se)return!1;if("function"==typeof se)T(se,this,b);else{var Ce=se.length,Re=I(se,Ce);for(O=0;O<Ce;++O)T(Re[O],this,b)}return!0},U.prototype.on=U.prototype.addListener=function(B,b){return F(this,B,b,!1)},U.prototype.prependListener=function(B,b){return F(this,B,b,!0)},U.prototype.once=function(B,b){return _(b),this.on(B,R(this,B,b)),this},U.prototype.prependOnceListener=function(B,b){return _(b),this.prependListener(B,R(this,B,b)),this},U.prototype.off=U.prototype.removeListener=function(B,b){var O,C,he,V,Te;if(_(b),void 0===(C=this._events))return this;if(void 0===(O=C[B]))return this;if(O===b||O.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete C[B],C.removeListener&&this.emit("removeListener",B,O.listener||b));else if("function"!=typeof O){for(he=-1,V=O.length-1;V>=0;V--)if(O[V]===b||O[V].listener===b){Te=O[V].listener,he=V;break}if(he<0)return this;0===he?O.shift():function H(X,B){for(;B+1<X.length;B++)X[B]=X[B+1];X.pop()}(O,he),1===O.length&&(C[B]=O[0]),void 0!==C.removeListener&&this.emit("removeListener",B,Te||b)}return this},U.prototype.removeAllListeners=function(B){var b,O,C;if(void 0===(O=this._events))return this;if(void 0===O.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==O[B]&&(0==--this._eventsCount?this._events=Object.create(null):delete O[B]),this;if(0===arguments.length){var V,he=Object.keys(O);for(C=0;C<he.length;++C)"removeListener"!==(V=he[C])&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=O[B]))this.removeListener(B,b);else if(void 0!==b)for(C=b.length-1;C>=0;C--)this.removeListener(B,b[C]);return this},U.prototype.listeners=function(B){return $(this,B,!0)},U.prototype.rawListeners=function(B){return $(this,B,!1)},U.listenerCount=function(X,B){return"function"==typeof X.listenerCount?X.listenerCount(B):de.call(X,B)},U.prototype.listenerCount=de,U.prototype.eventNames=function(){return this._eventsCount>0?J(this._events):[]}},7991:(Ue,_e,T)=>{var J=T(6943),S=T(9151),te=T(2323);function U($,de,I){if(!J($))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!$.hasNode(de))throw new Error('graphology-shortest-path: the "'+de+'" source node does not exist in the given graph.');if(!$.hasNode(I))throw new Error('graphology-shortest-path: the "'+I+'" target node does not exist in the given graph.');if((de=""+de)==(I=""+I))return[de];var H=$.inboundNeighbors.bind($),ae=$.outboundNeighbors.bind($),q={},oe={};q[de]=null,oe[I]=null;var B,b,O,C,he,V,Te,se,ne=[de],X=[I],Ce=!1;e:for(;ne.length&&X.length;)if(ne.length<=X.length){for(B=ne,ne=[],he=0,Te=B.length;he<Te;he++)for(V=0,se=(O=ae(b=B[he])).length;V<se;V++)if((C=O[V])in q||(ne.push(C),q[C]=b),C in oe){Ce=!0;break e}}else for(B=X,X=[],he=0,Te=B.length;he<Te;he++)for(b=B[he],O=H(b),V=0,se=O.length;V<se;V++)if(C=O[V],C in oe||(X.push(C),oe[C]=b),C in q){Ce=!0;break e}if(!Ce)return null;for(var Re=[];C;)Re.unshift(C),C=q[C];for(C=oe[Re[Re.length-1]];C;)Re.push(C),C=oe[C];return Re.length?Re:null}function ee($,de){if(!J($))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!$.hasNode(de))throw new Error('graphology-shortest-path: the "'+de+'" source node does not exist in the given graph.');var ae,q,oe,ne,X,B,I={},H={};for(I[de=""+de]=!0,H[de]=[de];Object.keys(I).length;)for(oe in ae=I,I={},ae)for(X=0,B=(q=$.outboundNeighbors(oe)).length;X<B;X++)H[ne=q[X]]||(H[ne]=H[oe].concat(ne),I[ne]=!0);return H}function _($,de,I){if(!J(de))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!de.hasNode(I))throw new Error('graphology-shortest-path: the "'+I+'" source node does not exist in the given graph.');I=""+I;var H=new Set,ae={},q=0;ae[I]=0;for(var ne,X,B,oe=[I];0!==oe.length;){var b=[];for(ne=0,X=oe.length;ne<X;ne++)!H.has(B=oe[ne])&&(H.add(B),te(b,de[$](B)),ae[B]=q);q++,oe=b}return ae}var x=_.bind(null,"outboundNeighbors"),F=_.bind(null,"neighbors");function W($,de,I){return arguments.length<3?ee($,de):U($,de,I)}W.bidirectional=U,W.singleSource=ee,W.singleSourceLength=x,W.undirectedSingleSourceLength=F,W.brandes=function R($,de){de=""+de;var oe,ne,X,B,b,O,C,he,V,I=[],H={},ae={},q=$.nodes();for(O=0,he=q.length;O<he;O++)H[B=q[O]]=[],ae[B]=0;var Te={};ae[de]=1,Te[de]=0;for(var se=S.of(de);se.size;)for(B=se.dequeue(),I.push(B),oe=Te[B],ne=ae[B],C=0,V=(X=$.outboundNeighbors(B)).length;C<V;C++)(b=X[C])in Te||(se.enqueue(b),Te[b]=oe+1),Te[b]===oe+1&&(ae[b]+=ne,H[b].push(B));return[I,H,ae]},Ue.exports=W},6943:Ue=>{Ue.exports=function(T){return null!==T&&"object"==typeof T&&"function"==typeof T.addUndirectedEdgeWithKey&&"function"==typeof T.dropNode&&"boolean"==typeof T.multi}},4938:function(Ue){Ue.exports=function(){"use strict";function _e(ge){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Me){return typeof Me}:function(Me){return Me&&"function"==typeof Symbol&&Me.constructor===Symbol&&Me!==Symbol.prototype?"symbol":typeof Me})(ge)}function T(ge,Me){ge.prototype=Object.create(Me.prototype),ge.prototype.constructor=ge,S(ge,Me)}function J(ge){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(Me){return Me.__proto__||Object.getPrototypeOf(Me)})(ge)}function S(ge,Me){return(S=Object.setPrototypeOf||function(ye,P){return ye.__proto__=P,ye})(ge,Me)}function U(ge,Me,ye){return(U=function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(P,Y,me){var Fe=[null];Fe.push.apply(Fe,Y);var $e=new(Function.bind.apply(P,Fe));return me&&S($e,me.prototype),$e}).apply(null,arguments)}function ee(ge){var Me="function"==typeof Map?new Map:void 0;return(ee=function(ye){if(null===ye||-1===Function.toString.call(ye).indexOf("[native code]"))return ye;if("function"!=typeof ye)throw new TypeError("Super expression must either be null or a function");if(void 0!==Me){if(Me.has(ye))return Me.get(ye);Me.set(ye,Y)}function Y(){return U(ye,arguments,J(this).constructor)}return Y.prototype=Object.create(ye.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),S(Y,ye)})(ge)}function _(ge){if(void 0===ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge}var x=function(){for(var ge=arguments[0],Me=1,ye=arguments.length;Me<ye;Me++)if(arguments[Me])for(var P in arguments[Me])ge[P]=arguments[Me][P];return ge};function F(ge,Me,ye,P){var Y=ge._nodes.get(Me),me=null;return Y?me="mixed"===P?Y.out&&Y.out[ye]||Y.undirected&&Y.undirected[ye]:"directed"===P?Y.out&&Y.out[ye]:Y.undirected&&Y.undirected[ye]:me}function R(ge){return"object"===_e(ge)&&null!==ge&&ge.constructor===Object}function $(ge){var Me;for(Me in ge)return!1;return!0}function de(ge,Me,ye){Object.defineProperty(ge,Me,{enumerable:!1,configurable:!1,writable:!0,value:ye})}function I(ge,Me,ye){var P={enumerable:!0,configurable:!0};"function"==typeof ye?P.get=ye:(P.value=ye,P.writable=!1),Object.defineProperty(ge,Me,P)}function H(ge){return!(!R(ge)||ge.attributes&&!Array.isArray(ge.attributes))}"function"==typeof Object.assign&&(x=Object.assign);var ae,q={exports:{}},oe="object"==typeof Reflect?Reflect:null,ne=oe&&"function"==typeof oe.apply?oe.apply:function(ge,Me,ye){return Function.prototype.apply.call(ge,Me,ye)};ae=oe&&"function"==typeof oe.ownKeys?oe.ownKeys:Object.getOwnPropertySymbols?function(ge){return Object.getOwnPropertyNames(ge).concat(Object.getOwnPropertySymbols(ge))}:function(ge){return Object.getOwnPropertyNames(ge)};var X=Number.isNaN||function(ge){return ge!=ge};function B(){B.init.call(this)}q.exports=B,q.exports.once=function(ge,Me){return new Promise(function(ye,P){function Y(Fe){ge.removeListener(Me,me),P(Fe)}function me(){"function"==typeof ge.removeListener&&ge.removeListener("error",Y),ye([].slice.call(arguments))}var Fe;ke(ge,Me,me,{once:!0}),"error"!==Me&&("function"==typeof(Fe=ge).on&&ke(Fe,"error",Y,{once:!0}))})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var b=10;function O(ge){if("function"!=typeof ge)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ge)}function C(ge){return void 0===ge._maxListeners?B.defaultMaxListeners:ge._maxListeners}function he(ge,Me,ye,P){var Y,me,Fe;if(O(ye),void 0===(me=ge._events)?(me=ge._events=Object.create(null),ge._eventsCount=0):(void 0!==me.newListener&&(ge.emit("newListener",Me,ye.listener?ye.listener:ye),me=ge._events),Fe=me[Me]),void 0===Fe)Fe=me[Me]=ye,++ge._eventsCount;else if("function"==typeof Fe?Fe=me[Me]=P?[ye,Fe]:[Fe,ye]:P?Fe.unshift(ye):Fe.push(ye),(Y=C(ge))>0&&Fe.length>Y&&!Fe.warned){Fe.warned=!0;var ot=new Error("Possible EventEmitter memory leak detected. "+Fe.length+" "+String(Me)+" listeners added. Use emitter.setMaxListeners() to increase limit");ot.name="MaxListenersExceededWarning",ot.emitter=ge,ot.type=Me,ot.count=Fe.length,console&&console.warn&&console.warn(ot)}return ge}function V(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Te(ge,Me,ye){var P={fired:!1,wrapFn:void 0,target:ge,type:Me,listener:ye},Y=V.bind(P);return Y.listener=ye,P.wrapFn=Y,Y}function se(ge,Me,ye){var P=ge._events;if(void 0===P)return[];var Y=P[Me];return void 0===Y?[]:"function"==typeof Y?ye?[Y.listener||Y]:[Y]:ye?function(me){for(var Fe=new Array(me.length),$e=0;$e<Fe.length;++$e)Fe[$e]=me[$e].listener||me[$e];return Fe}(Y):Re(Y,Y.length)}function Ce(ge){var Me=this._events;if(void 0!==Me){var ye=Me[ge];if("function"==typeof ye)return 1;if(void 0!==ye)return ye.length}return 0}function Re(ge,Me){for(var ye=new Array(Me),P=0;P<Me;++P)ye[P]=ge[P];return ye}function ke(ge,Me,ye,P){if("function"==typeof ge.on)P.once?ge.once(Me,ye):ge.on(Me,ye);else{if("function"!=typeof ge.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ge);ge.addEventListener(Me,function Y(me){P.once&&ge.removeEventListener(Me,Y),ye(me)})}}function et(ge){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:ge}),this.done=!1}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(ge){if("number"!=typeof ge||ge<0||X(ge))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ge+".");b=ge}}),B.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(ge){if("number"!=typeof ge||ge<0||X(ge))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ge+".");return this._maxListeners=ge,this},B.prototype.getMaxListeners=function(){return C(this)},B.prototype.emit=function(ge){for(var Me=[],ye=1;ye<arguments.length;ye++)Me.push(arguments[ye]);var P="error"===ge,Y=this._events;if(void 0!==Y)P=P&&void 0===Y.error;else if(!P)return!1;if(P){var me;if(Me.length>0&&(me=Me[0]),me instanceof Error)throw me;var Fe=new Error("Unhandled error."+(me?" ("+me.message+")":""));throw Fe.context=me,Fe}var $e=Y[ge];if(void 0===$e)return!1;if("function"==typeof $e)ne($e,this,Me);else{var ot=$e.length,Et=Re($e,ot);for(ye=0;ye<ot;++ye)ne(Et[ye],this,Me)}return!0},B.prototype.addListener=function(ge,Me){return he(this,ge,Me,!1)},B.prototype.on=B.prototype.addListener,B.prototype.prependListener=function(ge,Me){return he(this,ge,Me,!0)},B.prototype.once=function(ge,Me){return O(Me),this.on(ge,Te(this,ge,Me)),this},B.prototype.prependOnceListener=function(ge,Me){return O(Me),this.prependListener(ge,Te(this,ge,Me)),this},B.prototype.removeListener=function(ge,Me){var ye,P,Y,me,Fe;if(O(Me),void 0===(P=this._events))return this;if(void 0===(ye=P[ge]))return this;if(ye===Me||ye.listener===Me)0==--this._eventsCount?this._events=Object.create(null):(delete P[ge],P.removeListener&&this.emit("removeListener",ge,ye.listener||Me));else if("function"!=typeof ye){for(Y=-1,me=ye.length-1;me>=0;me--)if(ye[me]===Me||ye[me].listener===Me){Fe=ye[me].listener,Y=me;break}if(Y<0)return this;0===Y?ye.shift():function($e,ot){for(;ot+1<$e.length;ot++)$e[ot]=$e[ot+1];$e.pop()}(ye,Y),1===ye.length&&(P[ge]=ye[0]),void 0!==P.removeListener&&this.emit("removeListener",ge,Fe||Me)}return this},B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=function(ge){var Me,ye,P;if(void 0===(ye=this._events))return this;if(void 0===ye.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ye[ge]&&(0==--this._eventsCount?this._events=Object.create(null):delete ye[ge]),this;if(0===arguments.length){var Y,me=Object.keys(ye);for(P=0;P<me.length;++P)"removeListener"!==(Y=me[P])&&this.removeAllListeners(Y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Me=ye[ge]))this.removeListener(ge,Me);else if(void 0!==Me)for(P=Me.length-1;P>=0;P--)this.removeListener(ge,Me[P]);return this},B.prototype.listeners=function(ge){return se(this,ge,!0)},B.prototype.rawListeners=function(ge){return se(this,ge,!1)},B.listenerCount=function(ge,Me){return"function"==typeof ge.listenerCount?ge.listenerCount(Me):Ce.call(ge,Me)},B.prototype.listenerCount=Ce,B.prototype.eventNames=function(){return this._eventsCount>0?ae(this._events):[]},et.prototype.next=function(){if(this.done)return{done:!0};var ge=this._next();return ge.done&&(this.done=!0),ge},typeof Symbol<"u"&&(et.prototype[Symbol.iterator]=function(){return this}),et.of=function(){var ge=arguments,Me=ge.length,ye=0;return new et(function(){return ye>=Me?{done:!0}:{done:!1,value:ge[ye++]}})},et.empty=function(){var ge=new et(null);return ge.done=!0,ge},et.is=function(ge){return ge instanceof et||"object"==typeof ge&&null!==ge&&"function"==typeof ge.next};var qe=et,Ee=function(ge,Me){for(var ye,P=arguments.length>1?Me:1/0,Y=P!==1/0?new Array(P):[],me=0;;){if(me===P)return Y;if((ye=ge.next()).done)return me!==Me?Y.slice(0,me):Y;Y[me++]=ye.value}},Ne=function(ge){function Me(ye,P){var Y;return(Y=ge.call(this)||this).name="GraphError",Y.message=ye||"",Y.data=P||{},Y}return T(Me,ge),Me}(ee(Error)),Pe=function(ge){function Me(ye,P){var Y;return(Y=ge.call(this,ye,P)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Y),Me.prototype.constructor),Y}return T(Me,ge),Me}(Ne),He=function(ge){function Me(ye,P){var Y;return(Y=ge.call(this,ye,P)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Y),Me.prototype.constructor),Y}return T(Me,ge),Me}(Ne),pe=function(ge){function Me(ye,P){var Y;return(Y=ge.call(this,ye,P)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(Y),Me.prototype.constructor),Y}return T(Me,ge),Me}(Ne);function Ae(ge,Me){this.key=ge,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function Ye(ge,Me){this.key=ge,this.attributes=Me,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function st(ge,Me){this.key=ge,this.attributes=Me,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Ze(ge,Me,ye,P,Y,me){this.key=Me,this.attributes=me,this.undirected=ge,this.source=P,this.target=Y,this.generatedKey=ye}function le(ge,Me,ye,P,Y,me,Fe){var $e,ot,Et="out",Dt="in";if(Me&&(Et=Dt="undirected"),ge.multi){if(void 0===(ot=($e=me[Et])[Y])&&($e[Y]=ot=new Set),ot.add(ye),P===Y&&Me)return;void 0===($e=Fe[Dt])[P]&&($e[P]=ot)}else{if(me[Et][Y]=ye,P===Y&&Me)return;Fe[Dt][P]=ye}}Ye.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},st.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var E=[{name:function(ge){return"get".concat(ge,"Attribute")},attacher:function(ge,Me,ye){ge.prototype[Me]=function(P,Y){var me;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new pe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new pe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+P,$e=""+Y;if(Y=arguments[2],!(me=F(this,Fe,$e,ye)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(me=this._edges.get(P=""+P)))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" edge in the graph.'));if("mixed"!==ye&&me.undirected!==("undirected"===ye))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" ').concat(ye," edge in the graph."));return me.attributes[Y]}}},{name:function(ge){return"get".concat(ge,"Attributes")},attacher:function(ge,Me,ye){ge.prototype[Me]=function(P){var Y;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new pe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new pe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var me=""+P,Fe=""+arguments[1];if(!(Y=F(this,me,Fe,ye)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(me,'" - "').concat(Fe,'").'))}else if(!(Y=this._edges.get(P=""+P)))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" edge in the graph.'));if("mixed"!==ye&&Y.undirected!==("undirected"===ye))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" ').concat(ye," edge in the graph."));return Y.attributes}}},{name:function(ge){return"has".concat(ge,"Attribute")},attacher:function(ge,Me,ye){ge.prototype[Me]=function(P,Y){var me;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new pe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new pe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+P,$e=""+Y;if(Y=arguments[2],!(me=F(this,Fe,$e,ye)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(me=this._edges.get(P=""+P)))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" edge in the graph.'));if("mixed"!==ye&&me.undirected!==("undirected"===ye))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" ').concat(ye," edge in the graph."));return me.attributes.hasOwnProperty(Y)}}},{name:function(ge){return"set".concat(ge,"Attribute")},attacher:function(ge,Me,ye){ge.prototype[Me]=function(P,Y,me){var Fe;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new pe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new pe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+P,ot=""+Y;if(Y=arguments[2],me=arguments[3],!(Fe=F(this,$e,ot,ye)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat($e,'" - "').concat(ot,'").'))}else if(!(Fe=this._edges.get(P=""+P)))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" edge in the graph.'));if("mixed"!==ye&&Fe.undirected!==("undirected"===ye))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" ').concat(ye," edge in the graph."));return Fe.attributes[Y]=me,this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:Y}),this}}},{name:function(ge){return"update".concat(ge,"Attribute")},attacher:function(ge,Me,ye){ge.prototype[Me]=function(P,Y,me){var Fe;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new pe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new pe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+P,ot=""+Y;if(Y=arguments[2],me=arguments[3],!(Fe=F(this,$e,ot,ye)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat($e,'" - "').concat(ot,'").'))}else if(!(Fe=this._edges.get(P=""+P)))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" edge in the graph.'));if("function"!=typeof me)throw new Pe("Graph.".concat(Me,": updater should be a function."));if("mixed"!==ye&&Fe.undirected!==("undirected"===ye))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" ').concat(ye," edge in the graph."));return Fe.attributes[Y]=me(Fe.attributes[Y]),this.emit("edgeAttributesUpdated",{key:Fe.key,type:"set",attributes:Fe.attributes,name:Y}),this}}},{name:function(ge){return"remove".concat(ge,"Attribute")},attacher:function(ge,Me,ye){ge.prototype[Me]=function(P,Y){var me;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new pe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new pe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+P,$e=""+Y;if(Y=arguments[2],!(me=F(this,Fe,$e,ye)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(me=this._edges.get(P=""+P)))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" edge in the graph.'));if("mixed"!==ye&&me.undirected!==("undirected"===ye))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" ').concat(ye," edge in the graph."));return delete me.attributes[Y],this.emit("edgeAttributesUpdated",{key:me.key,type:"remove",attributes:me.attributes,name:Y}),this}}},{name:function(ge){return"replace".concat(ge,"Attributes")},attacher:function(ge,Me,ye){ge.prototype[Me]=function(P,Y){var me;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new pe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new pe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+P,$e=""+Y;if(Y=arguments[2],!(me=F(this,Fe,$e,ye)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(me=this._edges.get(P=""+P)))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" edge in the graph.'));if(!R(Y))throw new Pe("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==ye&&me.undirected!==("undirected"===ye))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" ').concat(ye," edge in the graph."));return me.attributes=Y,this.emit("edgeAttributesUpdated",{key:me.key,type:"replace",attributes:me.attributes}),this}}},{name:function(ge){return"merge".concat(ge,"Attributes")},attacher:function(ge,Me,ye){ge.prototype[Me]=function(P,Y){var me;if("mixed"!==this.type&&"mixed"!==ye&&ye!==this.type)throw new pe("Graph.".concat(Me,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new pe("Graph.".concat(Me,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+P,$e=""+Y;if(Y=arguments[2],!(me=F(this,Fe,$e,ye)))throw new He("Graph.".concat(Me,': could not find an edge for the given path ("').concat(Fe,'" - "').concat($e,'").'))}else if(!(me=this._edges.get(P=""+P)))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" edge in the graph.'));if(!R(Y))throw new Pe("Graph.".concat(Me,": provided attributes are not a plain object."));if("mixed"!==ye&&me.undirected!==("undirected"===ye))throw new He("Graph.".concat(Me,': could not find the "').concat(P,'" ').concat(ye," edge in the graph."));return x(me.attributes,Y),this.emit("edgeAttributesUpdated",{key:me.key,type:"merge",attributes:me.attributes,data:Y}),this}}}],ie=qe,z=function(){var ge,Me=arguments,ye=-1;return new ie(function P(){if(!ge){if(++ye>=Me.length)return{done:!0};ge=Me[ye]}var Y=ge.next();return Y.done?(ge=null,P()):Y})},Se=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function tt(ge,Me){for(var ye in Me)ge.push(Me[ye].key)}function ce(ge,Me){for(var ye in Me)Me[ye].forEach(function(P){return ge.push(P.key)})}function Z(ge,Me,ye){for(var P in ge)if(P!==ye){var Y=ge[P];Me(Y.key,Y.attributes,Y.source.key,Y.target.key,Y.source.attributes,Y.target.attributes,Y.undirected,Y.generatedKey)}}function L(ge,Me,ye){for(var P in ge)P!==ye&&ge[P].forEach(function(Y){return Me(Y.key,Y.attributes,Y.source.key,Y.target.key,Y.source.attributes,Y.target.attributes,Y.undirected,Y.generatedKey)})}function w(ge,Me,ye){for(var P in ge)if(P!==ye){var Y=ge[P];if(Me(Y.key,Y.attributes,Y.source.key,Y.target.key,Y.source.attributes,Y.target.attributes,Y.undirected,Y.generatedKey))return!0}return!1}function M(ge,Me,ye){var P,Y,me,Fe,$e;for(var ot in ge)if(ot!==ye)for(P=ge[ot].values();!0!==(Y=P.next()).done;)if(Fe=(me=Y.value).source,Me(me.key,me.attributes,Fe.key,($e=me.target).key,Fe.attributes,$e.attributes,me.undirected,me.generatedKey))return!0;return!1}function Q(ge,Me){var ye=Object.keys(ge),P=ye.length,Y=null,me=0;return new qe(function Fe(){var $e;if(Y){var ot=Y.next();if(ot.done)return Y=null,me++,Fe();$e=ot.value}else{if(me>=P)return{done:!0};var Et=ye[me];if(Et===Me)return me++,Fe();if(($e=ge[Et])instanceof Set)return Y=$e.values(),Fe();me++}return{done:!1,value:[$e.key,$e.attributes,$e.source.key,$e.target.key,$e.source.attributes,$e.target.attributes]}})}function fe(ge,Me,ye){var P=Me[ye];P&&ge.push(P.key)}function ze(ge,Me,ye){var P=Me[ye];P&&P.forEach(function(Y){return ge.push(Y.key)})}function Xe(ge,Me,ye){var P=ge[Me];if(P){var Y=P.source,me=P.target;ye(P.key,P.attributes,Y.key,me.key,Y.attributes,me.attributes,P.undirected,P.generatedKey)}}function dt(ge,Me,ye){var P=ge[Me];P&&P.forEach(function(Y){return ye(Y.key,Y.attributes,Y.source.key,Y.target.key,Y.source.attributes,Y.target.attributes,Y.undirected,Y.generatedKey)})}function mt(ge,Me,ye){var P=ge[Me];if(P){var Y=P.source,me=P.target;return ye(P.key,P.attributes,Y.key,me.key,Y.attributes,me.attributes,P.undirected,P.generatedKey)}}function gt(ge,Me,ye){var P=ge[Me];if(P){for(var Y,me,Fe=P.values();!0!==(Y=Fe.next()).done;)if(ye((me=Y.value).key,me.attributes,me.source.key,me.target.key,me.source.attributes,me.target.attributes,me.undirected,me.generatedKey))return!0;return!1}}function zt(ge,Me){var ye=ge[Me];if(ye instanceof Set){var P=ye.values();return new qe(function(){var Y=P.next();if(Y.done)return Y;var me=Y.value;return{done:!1,value:[me.key,me.attributes,me.source.key,me.target.key,me.source.attributes,me.target.attributes]}})}return qe.of([ye.key,ye.attributes,ye.source.key,ye.target.key,ye.source.attributes,ye.target.attributes])}var Dn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function mr(ge,Me){if(void 0!==Me)for(var ye in Me)ge.add(ye)}function Wo(ge,Me,ye){for(var P in Me){var Y=Me[P];Y instanceof Set&&(Y=Y.values().next().value);var me=Y.source,$e=me===ge?Y.target:me;ye($e.key,$e.attributes)}}function Ui(ge,Me,ye,P){for(var Y in ye){var me=ye[Y];me instanceof Set&&(me=me.values().next().value);var Fe=me.source,ot=Fe===Me?me.target:Fe;ge.has(ot.key)||(ge.add(ot.key),P(ot.key,ot.attributes))}}function $r(ge,Me,ye){for(var P in Me){var Y=Me[P];Y instanceof Set&&(Y=Y.values().next().value);var me=Y.source,$e=me===ge?Y.target:me;if(ye($e.key,$e.attributes))return!0}return!1}function as(ge,Me,ye,P){for(var Y in ye){var me=ye[Y];me instanceof Set&&(me=me.values().next().value);var Fe=me.source,ot=Fe===Me?me.target:Fe;if(!ge.has(ot.key)&&(ge.add(ot.key),P(ot.key,ot.attributes)))return!0}return!1}function Ps(ge,Me){var ye=Object.keys(Me),P=ye.length,Y=0;return new qe(function(){if(Y>=P)return{done:!0};var me=Me[ye[Y++]];me instanceof Set&&(me=me.values().next().value);var Fe=me.source,ot=Fe===ge?me.target:Fe;return{done:!1,value:[ot.key,ot.attributes]}})}function Ro(ge,Me,ye){var P=Object.keys(ye),Y=P.length,me=0;return new qe(function Fe(){if(me>=Y)return{done:!0};var $e=ye[P[me++]];$e instanceof Set&&($e=$e.values().next().value);var ot=$e.source,Dt=ot===Me?$e.target:ot;return ge.has(Dt.key)?Fe():(ge.add(Dt.key),{done:!1,value:[Dt.key,Dt.attributes]})})}function Uc(ge,Me,ye){for(var P,Y,me,Fe,$e,ot,Et,Dt=Me._nodes.values(),Vt=Me.type;!0!==(P=Dt.next()).done;){if(Y=P.value,"undirected"!==Vt)for(me in Fe=Y.out)if(ot=($e=Fe[me]).target,Et=ye(Y.key,ot.key,Y.attributes,ot.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),ge&&Et)return;if("directed"!==Vt)for(me in Fe=Y.undirected)if((ot=($e=Fe[me]).target).key!==me&&(ot=$e.source),Et=ye(Y.key,ot.key,Y.attributes,ot.attributes,$e.key,$e.attributes,$e.undirected,$e.generatedKey),ge&&Et)return}}function ac(ge,Me,ye){for(var P,Y,me,Fe,$e,ot,Et,Dt,Vt,Qt=Me._nodes.values(),vn=Me.type;!0!==(P=Qt.next()).done;){if(Y=P.value,"undirected"!==vn)for(me in ot=Y.out)for(Fe=ot[me].values();!0!==($e=Fe.next()).done;)if(Dt=(Et=$e.value).target,Vt=ye(Y.key,Dt.key,Y.attributes,Dt.attributes,Et.key,Et.attributes,Et.undirected,Et.generatedKey),ge&&Vt)return;if("directed"!==vn)for(me in ot=Y.undirected)for(Fe=ot[me].values();!0!==($e=Fe.next()).done;)if((Dt=(Et=$e.value).target).key!==me&&(Dt=Et.source),Vt=ye(Y.key,Dt.key,Y.attributes,Dt.attributes,Et.key,Et.attributes,Et.undirected,Et.generatedKey),ge&&Vt)return}}function Ol(ge,Me){var ye={key:ge};return $(Me.attributes)||(ye.attributes=x({},Me.attributes)),ye}function Vc(ge,Me){var ye={source:Me.source.key,target:Me.target.key};return Me.generatedKey||(ye.key=ge),$(Me.attributes)||(ye.attributes=x({},Me.attributes)),Me.undirected&&(ye.undirected=!0),ye}var Ud=new Set(["directed","undirected","mixed"]),zc=new Set(["domain","_events","_eventsCount","_maxListeners"]),ih={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Gc(ge,Me,ye){var P=new ge.NodeDataClass(Me,ye);return ge._nodes.set(Me,P),ge.emit("nodeAdded",{key:Me,attributes:ye}),P}function Nl(ge,Me,ye,P,Y,me,Fe,$e){if(!P&&"undirected"===ge.type)throw new pe("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(P&&"directed"===ge.type)throw new pe("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e&&!R($e))throw new Pe("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat($e,'"'));if(me=""+me,Fe=""+Fe,$e=$e||{},!ge.allowSelfLoops&&me===Fe)throw new pe("Graph.".concat(Me,': source & target are the same ("').concat(me,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ot=ge._nodes.get(me),Et=ge._nodes.get(Fe);if(!ot)throw new He("Graph.".concat(Me,': source node "').concat(me,'" not found.'));if(!Et)throw new He("Graph.".concat(Me,': target node "').concat(Fe,'" not found.'));var Dt={key:null,undirected:P,source:me,target:Fe,attributes:$e};if(ye&&(Y=ge._edgeKeyGenerator(Dt)),ge._edges.has(Y=""+Y))throw new pe("Graph.".concat(Me,': the "').concat(Y,'" edge already exists in the graph.'));if(!ge.multi&&(P?void 0!==ot.undirected[Fe]:void 0!==ot.out[Fe]))throw new pe("Graph.".concat(Me,': an edge linking "').concat(me,'" to "').concat(Fe,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Vt=new Ze(P,Y,ye,ot,Et,$e);return ge._edges.set(Y,Vt),me===Fe?P?(ot.undirectedSelfLoops++,ge._undirectedSelfLoopCount++):(ot.directedSelfLoops++,ge._directedSelfLoopCount++):P?(ot.undirectedDegree++,Et.undirectedDegree++):(ot.outDegree++,Et.inDegree++),le(ge,P,Vt,me,Fe,ot,Et),P?ge._undirectedSize++:ge._directedSize++,Dt.key=Y,ge.emit("edgeAdded",Dt),Y}function Wc(ge,Me,ye,P,Y,me,Fe,$e,ot){if(!P&&"undirected"===ge.type)throw new pe("Graph.".concat(Me,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(P&&"directed"===ge.type)throw new pe("Graph.".concat(Me,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if($e)if(ot){if("function"!=typeof $e)throw new Pe("Graph.".concat(Me,': invalid updater function. Expecting a function but got "').concat($e,'"'))}else if(!R($e))throw new Pe("Graph.".concat(Me,': invalid attributes. Expecting an object but got "').concat($e,'"'));var Et;if(me=""+me,Fe=""+Fe,ot&&(Et=$e,$e=void 0),!ge.allowSelfLoops&&me===Fe)throw new pe("Graph.".concat(Me,': source & target are the same ("').concat(me,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Dt,Vt,Qt=ge._nodes.get(me),vn=ge._nodes.get(Fe);if(!ye&&(Dt=ge._edges.get(Y))){if(Dt.source.key!==me||Dt.target.key!==Fe||P&&(Dt.source.key!==Fe||Dt.target.key!==me))throw new pe("Graph.".concat(Me,': inconsistency detected when attempting to merge the "').concat(Y,'" edge with "').concat(me,'" source & "').concat(Fe,'" target vs. ("').concat(Dt.source.key,'", "').concat(Dt.target.key,'").'));Vt=Dt}if(Vt||ge.multi||!Qt||(Vt=P?Qt.undirected[Fe]:Qt.out[Fe]),Vt)return(ot?Et:$e)?(ot?(Vt.attributes=Et(Vt.attributes),ge.emit("edgeAttributesUpdated",{type:"replace",key:Vt.key,attributes:Vt.attributes})):(x(Vt.attributes,$e),ge.emit("edgeAttributesUpdated",{type:"merge",key:Vt.key,attributes:Vt.attributes,data:$e})),Vt.key):Vt.key;$e=$e||{},ot&&Et&&($e=Et($e));var Er={key:null,undirected:P,source:me,target:Fe,attributes:$e};if(ye&&(Y=ge._edgeKeyGenerator(Er)),ge._edges.has(Y=""+Y))throw new pe("Graph.".concat(Me,': the "').concat(Y,'" edge already exists in the graph.'));return Qt||(Qt=Gc(ge,me,{}),me===Fe&&(vn=Qt)),vn||(vn=Gc(ge,Fe,{})),Dt=new Ze(P,Y,ye,Qt,vn,$e),ge._edges.set(Y,Dt),me===Fe?P?(Qt.undirectedSelfLoops++,ge._undirectedSelfLoopCount++):(Qt.directedSelfLoops++,ge._directedSelfLoopCount++):P?(Qt.undirectedDegree++,vn.undirectedDegree++):(Qt.outDegree++,vn.inDegree++),le(ge,P,Dt,me,Fe,Qt,vn),P?ge._undirectedSize++:ge._directedSize++,Er.key=Y,ge.emit("edgeAdded",Er),Y}var ge,yi=function(ge){function Me(P){var Y;if(Y=ge.call(this)||this,(P=x({},ih,P)).edgeKeyGenerator&&"function"!=typeof P.edgeKeyGenerator)throw new Pe("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(P.edgeKeyGenerator,'".'));if("boolean"!=typeof P.multi)throw new Pe("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(P.multi,'".'));if(!Ud.has(P.type))throw new Pe('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(P.type,'".'));if("boolean"!=typeof P.allowSelfLoops)throw new Pe("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(P.allowSelfLoops,'".'));var me,Fe="mixed"===P.type?Ae:"directed"===P.type?Ye:st;return de(_(Y),"NodeDataClass",Fe),de(_(Y),"_attributes",{}),de(_(Y),"_nodes",new Map),de(_(Y),"_edges",new Map),de(_(Y),"_directedSize",0),de(_(Y),"_undirectedSize",0),de(_(Y),"_directedSelfLoopCount",0),de(_(Y),"_undirectedSelfLoopCount",0),de(_(Y),"_edgeKeyGenerator",P.edgeKeyGenerator||(me=0,function(){return me++})),de(_(Y),"_options",P),zc.forEach(function($e){return de(_(Y),$e,Y[$e])}),I(_(Y),"order",function(){return Y._nodes.size}),I(_(Y),"size",function(){return Y._edges.size}),I(_(Y),"directedSize",function(){return Y._directedSize}),I(_(Y),"undirectedSize",function(){return Y._undirectedSize}),I(_(Y),"selfLoopCount",function(){return Y._directedSelfLoopCount+Y._undirectedSelfLoopCount}),I(_(Y),"directedSelfLoopCount",function(){return Y._directedSelfLoopCount}),I(_(Y),"undirectedSelfLoopCount",function(){return Y._undirectedSelfLoopCount}),I(_(Y),"multi",Y._options.multi),I(_(Y),"type",Y._options.type),I(_(Y),"allowSelfLoops",Y._options.allowSelfLoops),I(_(Y),"implementation",function(){return"graphology"}),Y}T(Me,ge);var ye=Me.prototype;return ye.hasNode=function(P){return this._nodes.has(""+P)},ye.hasDirectedEdge=function(P,Y){if("undirected"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+P);return!!Fe&&!Fe.undirected}if(2===arguments.length){Y=""+Y;var $e=this._nodes.get(P=""+P);if(!$e)return!1;var ot=$e.out[Y];return!(!ot||this.multi&&!ot.size)}throw new Pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ye.hasUndirectedEdge=function(P,Y){if("directed"===this.type)return!1;if(1===arguments.length){var Fe=this._edges.get(""+P);return!!Fe&&Fe.undirected}if(2===arguments.length){Y=""+Y;var $e=this._nodes.get(P=""+P);if(!$e)return!1;var ot=$e.undirected[Y];return!(!ot||this.multi&&!ot.size)}throw new Pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ye.hasEdge=function(P,Y){if(1===arguments.length)return this._edges.has(""+P);if(2===arguments.length){Y=""+Y;var Fe=this._nodes.get(P=""+P);if(!Fe)return!1;var $e=void 0!==Fe.out&&Fe.out[Y];return $e||($e=void 0!==Fe.undirected&&Fe.undirected[Y]),!(!$e||this.multi&&!$e.size)}throw new Pe("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ye.directedEdge=function(P,Y){if("undirected"!==this.type){if(P=""+P,Y=""+Y,this.multi)throw new pe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var me=this._nodes.get(P);if(!me)throw new He('Graph.directedEdge: could not find the "'.concat(P,'" source node in the graph.'));if(!this._nodes.has(Y))throw new He('Graph.directedEdge: could not find the "'.concat(Y,'" target node in the graph.'));var Fe=me.out&&me.out[Y]||void 0;return Fe?Fe.key:void 0}},ye.undirectedEdge=function(P,Y){if("directed"!==this.type){if(P=""+P,Y=""+Y,this.multi)throw new pe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var me=this._nodes.get(P);if(!me)throw new He('Graph.undirectedEdge: could not find the "'.concat(P,'" source node in the graph.'));if(!this._nodes.has(Y))throw new He('Graph.undirectedEdge: could not find the "'.concat(Y,'" target node in the graph.'));var Fe=me.undirected&&me.undirected[Y]||void 0;return Fe?Fe.key:void 0}},ye.edge=function(P,Y){if(this.multi)throw new pe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Y=""+Y;var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.edge: could not find the "'.concat(P,'" source node in the graph.'));if(!this._nodes.has(Y))throw new He('Graph.edge: could not find the "'.concat(Y,'" target node in the graph.'));var Fe=me.out&&me.out[Y]||me.undirected&&me.undirected[Y]||void 0;if(Fe)return Fe.key},ye.inDegree=function(P){var Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Y)throw new Pe('Graph.inDegree: Expecting a boolean but got "'.concat(Y,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.inDegree: could not find the "'.concat(P,'" node in the graph.'));return"undirected"===this.type?0:me.inDegree+(Y?me.directedSelfLoops:0)},ye.outDegree=function(P){var Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Y)throw new Pe('Graph.outDegree: Expecting a boolean but got "'.concat(Y,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.outDegree: could not find the "'.concat(P,'" node in the graph.'));return"undirected"===this.type?0:me.outDegree+(Y?me.directedSelfLoops:0)},ye.directedDegree=function(P){var Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Y)throw new Pe('Graph.directedDegree: Expecting a boolean but got "'.concat(Y,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.directedDegree: could not find the "'.concat(P,'" node in the graph.'));if("undirected"===this.type)return 0;var Fe=Y?me.directedSelfLoops:0;return me.inDegree+Fe+(me.outDegree+Fe)},ye.undirectedDegree=function(P){var Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Y)throw new Pe('Graph.undirectedDegree: Expecting a boolean but got "'.concat(Y,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.undirectedDegree: could not find the "'.concat(P,'" node in the graph.'));return"directed"===this.type?0:me.undirectedDegree+2*(Y?me.undirectedSelfLoops:0)},ye.degree=function(P){var Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof Y)throw new Pe('Graph.degree: Expecting a boolean but got "'.concat(Y,'" for the second parameter (allowing self-loops to be counted).'));var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.degree: could not find the "'.concat(P,'" node in the graph.'));var Fe=0,$e=0;return"directed"!==this.type&&(Y&&($e=me.undirectedSelfLoops),Fe+=me.undirectedDegree+2*$e),"undirected"!==this.type&&(Y&&($e=me.directedSelfLoops),Fe+=me.inDegree+me.outDegree+2*$e),Fe},ye.source=function(P){var Y=this._edges.get(P=""+P);if(!Y)throw new He('Graph.source: could not find the "'.concat(P,'" edge in the graph.'));return Y.source.key},ye.target=function(P){var Y=this._edges.get(P=""+P);if(!Y)throw new He('Graph.target: could not find the "'.concat(P,'" edge in the graph.'));return Y.target.key},ye.extremities=function(P){var Y=this._edges.get(P=""+P);if(!Y)throw new He('Graph.extremities: could not find the "'.concat(P,'" edge in the graph.'));return[Y.source.key,Y.target.key]},ye.opposite=function(P,Y){P=""+P;var me=this._edges.get(Y=""+Y);if(!me)throw new He('Graph.opposite: could not find the "'.concat(Y,'" edge in the graph.'));var Fe=me.source.key,$e=me.target.key;if(P!==Fe&&P!==$e)throw new He('Graph.opposite: the "'.concat(P,'" node is not attached to the "').concat(Y,'" edge (').concat(Fe,", ").concat($e,")."));return P===Fe?$e:Fe},ye.hasExtremity=function(P,Y){Y=""+Y;var me=this._edges.get(P=""+P);if(!me)throw new He('Graph.hasExtremity: could not find the "'.concat(P,'" edge in the graph.'));return me.source.key===Y||me.target.key===Y},ye.isUndirected=function(P){var Y=this._edges.get(P=""+P);if(!Y)throw new He('Graph.isUndirected: could not find the "'.concat(P,'" edge in the graph.'));return Y.undirected},ye.isDirected=function(P){var Y=this._edges.get(P=""+P);if(!Y)throw new He('Graph.isDirected: could not find the "'.concat(P,'" edge in the graph.'));return!Y.undirected},ye.isSelfLoop=function(P){var Y=this._edges.get(P=""+P);if(!Y)throw new He('Graph.isSelfLoop: could not find the "'.concat(P,'" edge in the graph.'));return Y.source===Y.target},ye.hasGeneratedKey=function(P){var Y=this._edges.get(P=""+P);if(!Y)throw new He('Graph.hasGeneratedKey: could not find the "'.concat(P,'" edge in the graph.'));return Y.generatedKey},ye.addNode=function(P,Y){return function(me,Fe,$e){if($e&&!R($e))throw new Pe('Graph.addNode: invalid attributes. Expecting an object but got "'.concat($e,'"'));if($e=$e||{},me._nodes.has(Fe=""+Fe))throw new pe('Graph.addNode: the "'.concat(Fe,'" node already exist in the graph.'));var ot=new me.NodeDataClass(Fe,$e);return me._nodes.set(Fe,ot),me.emit("nodeAdded",{key:Fe,attributes:$e}),ot}(this,P,Y).key},ye.mergeNode=function(P,Y){if(Y&&!R(Y))throw new Pe('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Y,'"'));Y=Y||{};var me=this._nodes.get(P=""+P);return me?(Y&&(x(me.attributes,Y),this.emit("nodeAttributesUpdated",{type:"merge",key:P,attributes:me.attributes,data:Y})),P):(me=new this.NodeDataClass(P,Y),this._nodes.set(P,me),this.emit("nodeAdded",{key:P,attributes:Y}),P)},ye.updateNode=function(P,Y){if(Y&&"function"!=typeof Y)throw new Pe('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Y,'"'));var me=this._nodes.get(P=""+P);if(me)return Y&&(me.attributes=Y(me.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:P,attributes:me.attributes})),P;var $e=Y?Y({}):{};return me=new this.NodeDataClass(P,$e),this._nodes.set(P,me),this.emit("nodeAdded",{key:P,attributes:$e}),P},ye.dropNode=function(P){var Y=this,me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.dropNode: could not find the "'.concat(P,'" node in the graph.'));this.forEachEdge(P,function(Fe){Y.dropEdge(Fe)}),this._nodes.delete(P),this.emit("nodeDropped",{key:P,attributes:me.attributes})},ye.dropEdge=function(P){var Y;if(arguments.length>1){var me=""+arguments[0],Fe=""+arguments[1];if(!(Y=F(this,me,Fe,this.type)))throw new He('Graph.dropEdge: could not find the "'.concat(me,'" -> "').concat(Fe,'" edge in the graph.'))}else if(!(Y=this._edges.get(P=""+P)))throw new He('Graph.dropEdge: could not find the "'.concat(P,'" edge in the graph.'));this._edges.delete(Y.key);var ot=Y.source,Et=Y.target,Dt=Y.attributes,Vt=Y.undirected;return ot===Et?Vt?(ot.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(ot.directedSelfLoops--,this._directedSelfLoopCount--):Vt?(ot.undirectedDegree--,Et.undirectedDegree--):(ot.outDegree--,Et.inDegree--),function N(ge,Me,ye){var P=ge.multi,Y=ye.source,me=ye.target,Fe=Y.key,$e=me.key,ot=Y[Me?"undirected":"out"],Et=Me?"undirected":"in";if($e in ot)if(P){var Dt=ot[$e];1===Dt.size?(delete ot[$e],delete me[Et][Fe]):Dt.delete(ye)}else delete ot[$e];P||delete me[Et][Fe]}(this,Vt,Y),Vt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:P,attributes:Dt,source:ot.key,target:Et.key,undirected:Vt}),this},ye.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ye.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ye.getAttribute=function(P){return this._attributes[P]},ye.getAttributes=function(){return this._attributes},ye.hasAttribute=function(P){return this._attributes.hasOwnProperty(P)},ye.setAttribute=function(P,Y){return this._attributes[P]=Y,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:P}),this},ye.updateAttribute=function(P,Y){if("function"!=typeof Y)throw new Pe("Graph.updateAttribute: updater should be a function.");return this._attributes[P]=Y(this._attributes[P]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:P}),this},ye.removeAttribute=function(P){return delete this._attributes[P],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:P}),this},ye.replaceAttributes=function(P){if(!R(P))throw new Pe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=P,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ye.mergeAttributes=function(P){if(!R(P))throw new Pe("Graph.mergeAttributes: provided attributes are not a plain object.");return x(this._attributes,P),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:P}),this},ye.getNodeAttribute=function(P,Y){var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.getNodeAttribute: could not find the "'.concat(P,'" node in the graph.'));return me.attributes[Y]},ye.getNodeAttributes=function(P){var Y=this._nodes.get(P=""+P);if(!Y)throw new He('Graph.getNodeAttributes: could not find the "'.concat(P,'" node in the graph.'));return Y.attributes},ye.hasNodeAttribute=function(P,Y){var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.hasNodeAttribute: could not find the "'.concat(P,'" node in the graph.'));return me.attributes.hasOwnProperty(Y)},ye.setNodeAttribute=function(P,Y,me){var Fe=this._nodes.get(P=""+P);if(!Fe)throw new He('Graph.setNodeAttribute: could not find the "'.concat(P,'" node in the graph.'));if(arguments.length<3)throw new Pe("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Fe.attributes[Y]=me,this.emit("nodeAttributesUpdated",{key:P,type:"set",attributes:Fe.attributes,name:Y}),this},ye.updateNodeAttribute=function(P,Y,me){var Fe=this._nodes.get(P=""+P);if(!Fe)throw new He('Graph.updateNodeAttribute: could not find the "'.concat(P,'" node in the graph.'));if(arguments.length<3)throw new Pe("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof me)throw new Pe("Graph.updateAttribute: updater should be a function.");var $e=Fe.attributes,ot=me($e[Y]);return $e[Y]=ot,this.emit("nodeAttributesUpdated",{key:P,type:"set",attributes:Fe.attributes,name:Y}),this},ye.removeNodeAttribute=function(P,Y){var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.hasNodeAttribute: could not find the "'.concat(P,'" node in the graph.'));return delete me.attributes[Y],this.emit("nodeAttributesUpdated",{key:P,type:"remove",attributes:me.attributes,name:Y}),this},ye.replaceNodeAttributes=function(P,Y){var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.replaceNodeAttributes: could not find the "'.concat(P,'" node in the graph.'));if(!R(Y))throw new Pe("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return me.attributes=Y,this.emit("nodeAttributesUpdated",{key:P,type:"replace",attributes:me.attributes}),this},ye.mergeNodeAttributes=function(P,Y){var me=this._nodes.get(P=""+P);if(!me)throw new He('Graph.mergeNodeAttributes: could not find the "'.concat(P,'" node in the graph.'));if(!R(Y))throw new Pe("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return x(me.attributes,Y),this.emit("nodeAttributesUpdated",{key:P,type:"merge",attributes:me.attributes,data:Y}),this},ye.updateEachNodeAttributes=function(P,Y){if("function"!=typeof P)throw new Pe("Graph.updateEachNodeAttributes: expecting an updater function.");if(Y&&!H(Y))throw new Pe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var me,Fe,$e=this._nodes.values();!0!==(me=$e.next()).done;)(Fe=me.value).attributes=P(Fe.key,Fe.attributes);this.emit("eachNodeAttributesUpdated",{hints:Y||null})},ye.updateEachEdgeAttributes=function(P,Y){if("function"!=typeof P)throw new Pe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Y&&!H(Y))throw new Pe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var me,Fe,$e=this._edges.values();!0!==(me=$e.next()).done;)(Fe=me.value).attributes=P(Fe.key,Fe.attributes);this.emit("eachEdgeAttributesUpdated",{hints:Y||null})},ye.forEach=function(P){if("function"!=typeof P)throw new Pe("Graph.forEach: expecting a callback.");this.multi?ac(!1,this,P):Uc(!1,this,P)},ye.forEachUntil=function(P){if("function"!=typeof P)throw new Pe("Graph.forEach: expecting a callback.");this.multi?ac(!0,this,P):Uc(!0,this,P)},ye.adjacency=function(){return this.multi?(ot=(P=this)._nodes.values(),Et=P.type,Dt="outer",Vt=null,new qe(function Qt(){var vn;if("outer"===Dt)return!0===(vn=ot.next()).done?vn:(Y=vn.value,Dt="directed",Qt());if("directed"===Dt)return"undirected"===Et?(Dt="undirected",Qt()):(Fe=Y.out,me=Object.keys(Y.out),$e=0,Dt="inner-directed",Qt());if("undirected"===Dt){if("directed"===Et)return Dt="outer",Qt();Fe=Y.undirected,me=Object.keys(Y.undirected),$e=0,Dt="inner-undirected"}if(!Vt&&$e>=me.length)return Dt="inner-undirected"===Dt?"outer":"undirected",Qt();if(!Vt){var oo=me[$e++];return Vt=Fe[oo].values(),Qt()}if((vn=Vt.next()).done)return Vt=null,Qt();var Er=vn.value,ko=Er.target;return"inner-undirected"===Dt&&ko.key===Y.key&&(ko=Er.source),{done:!1,value:[Y.key,ko.key,Y.attributes,ko.attributes,Er.key,Er.attributes]}})):($c=(Qt=this)._nodes.values(),ra=Qt.type,Lr="outer",new qe(function go(){var Yc;if("outer"===Lr)return!0===(Yc=$c.next()).done?Yc:(vn=Yc.value,Lr="directed",go());if("directed"===Lr)return"undirected"===ra?(Lr="undirected",go()):(Er=vn.out,oo=Object.keys(vn.out),ko=0,Lr="inner-directed",go());if("undirected"===Lr){if("directed"===ra)return Lr="outer",go();Er=vn.undirected,oo=Object.keys(vn.undirected),ko=0,Lr="inner-undirected"}if(ko>=oo.length)return Lr="inner-undirected"===Lr?"outer":"undirected",go();var Fl=oo[ko++],xi=Er[Fl],gr=xi.target;return"inner-undirected"===Lr&&gr.key===vn.key&&(gr=xi.source),{done:!1,value:[vn.key,gr.key,vn.attributes,gr.attributes,xi.key,xi.attributes]}}));var Qt,vn,oo,Er,ko,$c,ra,Lr,P,Y,me,Fe,$e,ot,Et,Dt,Vt},ye.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ee(this._nodes.keys(),this._nodes.size)},ye.forEachNode=function(P){if("function"!=typeof P)throw new Pe("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(Y,me){P(me,Y.attributes)})},ye.forEachNodeUntil=function(P){if("function"!=typeof P)throw new Pe("Graph.forEachNode: expecting a callback.");for(var Y,me,Fe=this._nodes.values();!0!==(Y=Fe.next())&&!P((me=Y.value).key,me.attributes););},ye.nodeEntries=function(){var P=this._nodes.values();return new qe(function(){var Y=P.next();if(Y.done)return Y;var me=Y.value;return{value:[me.key,me.attributes],done:!1}})},ye.exportNode=function(P){var Y=this._nodes.get(P=""+P);if(!Y)throw new He('Graph.exportNode: could not find the "'.concat(P,'" node in the graph.'));return Ol(P,Y)},ye.exportEdge=function(P){var Y=this._edges.get(P=""+P);if(!Y)throw new He('Graph.exportEdge: could not find the "'.concat(P,'" edge in the graph.'));return Vc(P,Y)},ye.export=function(){var P=new Array(this._nodes.size),Y=0;this._nodes.forEach(function(Fe,$e){P[Y++]=Ol($e,Fe)});var me=new Array(this._edges.size);return Y=0,this._edges.forEach(function(Fe,$e){me[Y++]=Vc($e,Fe)}),{attributes:this.getAttributes(),nodes:P,edges:me,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ye.importNode=function(P){var Y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],me=function Pl(ge){return R(ge)?"key"in ge?!("attributes"in ge)||R(ge.attributes)&&null!==ge.attributes?null:"invalid-attributes":"no-key":"not-object"}(P);if(me){if("not-object"===me)throw new Pe('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===me)throw new Pe("Graph.importNode: no key provided.");if("invalid-attributes"===me)throw new Pe("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Fe=P.key,$e=P.attributes,ot=void 0===$e?{}:$e;return Y?this.mergeNode(Fe,ot):this.addNode(Fe,ot),this},ye.importEdge=function(P){var Y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],me=function Hc(ge){return R(ge)?"source"in ge?"target"in ge?!("attributes"in ge)||R(ge.attributes)&&null!==ge.attributes?"undirected"in ge&&"boolean"!=typeof ge.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(P);if(me){if("not-object"===me)throw new Pe('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===me)throw new Pe("Graph.importEdge: missing souce.");if("no-target"===me)throw new Pe("Graph.importEdge: missing target.");if("invalid-attributes"===me)throw new Pe("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===me)throw new Pe("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Fe=P.source,$e=P.target,ot=P.attributes,Et=void 0===ot?{}:ot,Dt=P.undirected,Vt=void 0!==Dt&&Dt;return"key"in P?(Y?Vt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Vt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,P.key,Fe,$e,Et):(Y?Vt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Vt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Fe,$e,Et),this},ye.import=function(P){var Y,me,Fe,$e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function W(ge){return null!==ge&&"object"===_e(ge)&&"function"==typeof ge.addUndirectedEdgeWithKey&&"function"==typeof ge.dropNode}(P))return this.import(P.export(),$e),this;if(!R(P))throw new Pe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(P.attributes){if(!R(P.attributes))throw new Pe("Graph.import: invalid attributes. Expecting a plain object.");$e?this.mergeAttributes(P.attributes):this.replaceAttributes(P.attributes)}if(P.nodes){if(Fe=P.nodes,!Array.isArray(Fe))throw new Pe("Graph.import: invalid nodes. Expecting an array.");for(Y=0,me=Fe.length;Y<me;Y++)this.importNode(Fe[Y],$e)}if(P.edges){if(Fe=P.edges,!Array.isArray(Fe))throw new Pe("Graph.import: invalid edges. Expecting an array.");for(Y=0,me=Fe.length;Y<me;Y++)this.importEdge(Fe[Y],$e)}return this},ye.nullCopy=function(P){return new Me(x({},this._options,P))},ye.emptyCopy=function(P){var Y=this.nullCopy(P);return this._nodes.forEach(function(me,Fe){var $e=x({},me.attributes);me=new Y.NodeDataClass(Fe,$e),Y._nodes.set(Fe,me)}),Y},ye.copy=function(){var P=new Me(this._options);return P.import(this),P},ye.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(P){return P.upgradeToMixed()}),this._options.type="mixed",I(this,"type",this._options.type),de(this,"NodeDataClass",Ae)),this},ye.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,I(this,"multi",!0),(P=this)._nodes.forEach(function(Y,me){if(Y.out)for(var Fe in Y.out){var $e=new Set;$e.add(Y.out[Fe]),Y.out[Fe]=$e,P._nodes.get(Fe).in[me]=$e}if(Y.undirected)for(var ot in Y.undirected)if(!(ot>me)){var Et=new Set;Et.add(Y.undirected[ot]),Y.undirected[ot]=Et,P._nodes.get(ot).undirected[me]=Et}})),this;var P},ye.clearIndex=function(){return this._nodes.forEach(function(P){void 0!==P.in&&(P.in={},P.out={}),void 0!==P.undirected&&(P.undirected={})}),this},ye.toJSON=function(){return this.export()},ye.toString=function(){return"[object Graph]"},ye.inspect=function(){var P=this,Y={};this._nodes.forEach(function(Et,Dt){Y[Dt]=Et.attributes});var me={},Fe={};this._edges.forEach(function(Et,Dt){var Vt=Et.undirected?"--":"->",Qt="",vn="(".concat(Et.source.key,")").concat(Vt,"(").concat(Et.target.key,")");Et.generatedKey?P.multi&&(void 0===Fe[vn]?Fe[vn]=0:Fe[vn]++,Qt+="".concat(Fe[vn],". ")):Qt+="[".concat(Dt,"]: "),me[Qt+=vn]=Et.attributes});var $e={};for(var ot in this)this.hasOwnProperty(ot)&&!zc.has(ot)&&"function"!=typeof this[ot]&&($e[ot]=this[ot]);return $e.attributes=this._attributes,$e.nodes=Y,$e.edges=me,de($e,"constructor",this.constructor),$e},Me}(q.exports.EventEmitter);typeof Symbol<"u"&&(yi.prototype[Symbol.for("nodejs.util.inspect.custom")]=yi.prototype.inspect),[{name:function(ge){return"".concat(ge,"Edge")},generateKey:!0},{name:function(ge){return"".concat(ge,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(ge){return"".concat(ge,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(ge){return"".concat(ge,"EdgeWithKey")}},{name:function(ge){return"".concat(ge,"DirectedEdgeWithKey")},type:"directed"},{name:function(ge){return"".concat(ge,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(ge){["add","merge","update"].forEach(function(Me){var ye=ge.name(Me),P="add"===Me?Nl:Wc;yi.prototype[ye]=ge.generateKey?function(Y,me,Fe){return P(this,ye,!0,"undirected"===(ge.type||this.type),null,Y,me,Fe,"update"===Me)}:function(Y,me,Fe,$e){return P(this,ye,!1,"undirected"===(ge.type||this.type),Y,me,Fe,$e,"update"===Me)}})}),typeof Symbol<"u"&&(yi.prototype[Symbol.iterator]=yi.prototype.adjacency),ge=yi,E.forEach(function(Me){var ye=Me.name,P=Me.attacher;P(ge,ye("Edge"),"mixed"),P(ge,ye("DirectedEdge"),"directed"),P(ge,ye("UndirectedEdge"),"undirected")}),function(ge){Se.forEach(function(Me){var P,Y,me,Fe;me=(P=Me).type,Fe=P.direction,ge.prototype[Y=P.name]=function($e,ot){if("mixed"!==me&&"mixed"!==this.type&&me!==this.type)return[];if(!arguments.length)return function on(ge,Me){if(0===ge.size)return[];if("mixed"===Me||Me===ge.type)return"function"==typeof Array.from?Array.from(ge._edges.keys()):Ee(ge._edges.keys(),ge._edges.size);for(var ye,P,me=new Array("undirected"===Me?ge.undirectedSize:ge.directedSize),Fe="undirected"===Me,$e=ge._edges.values(),ot=0;!0!==(ye=$e.next()).done;)(P=ye.value).undirected===Fe&&(me[ot++]=P.key);return me}(this,me);if(1===arguments.length){var Et=this._nodes.get($e=""+$e);if(void 0===Et)throw new He("Graph.".concat(Y,': could not find the "').concat($e,'" node in the graph.'));return function re(ge,Me,ye,P){var Y=[],me=ge?ce:tt;return"undirected"!==Me&&("out"!==ye&&me(Y,P.in),"in"!==ye&&me(Y,P.out),!ye&&P.directedSelfLoops>0&&Y.splice(Y.lastIndexOf(P.key),1)),"directed"!==Me&&me(Y,P.undirected),Y}(this.multi,"mixed"===me?this.type:me,Fe,Et)}if(2===arguments.length){ot=""+ot;var Dt=this._nodes.get($e=""+$e);if(!Dt)throw new He("Graph.".concat(Y,':  could not find the "').concat($e,'" source node in the graph.'));if(!this._nodes.has(ot))throw new He("Graph.".concat(Y,':  could not find the "').concat(ot,'" target node in the graph.'));return function Wt(ge,Me,ye,P,Y){var me=Me?ze:fe,Fe=[];return"undirected"!==ge&&(void 0!==P.in&&"out"!==ye&&me(Fe,P.in,Y),void 0!==P.out&&"in"!==ye&&me(Fe,P.out,Y),!ye&&P.directedSelfLoops>0&&Fe.splice(Fe.lastIndexOf(P.key),1)),"directed"!==ge&&void 0!==P.undirected&&me(Fe,P.undirected,Y),Fe}(me,this.multi,Fe,Dt,ot)}throw new Pe("Graph.".concat(Y,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ye,P){var Y=P.name,me=P.type,Fe=P.direction,$e="forEach"+Y[0].toUpperCase()+Y.slice(1,-1);ye.prototype[$e]=function(ot,Et,Dt){if("mixed"===me||"mixed"===this.type||me===this.type){if(1===arguments.length)return function Ie(ge,Me,ye){if(0!==ge.size)for(var P,Y,me="mixed"!==Me&&Me!==ge.type,Fe="undirected"===Me,$e=ge._edges.values();!0!==(P=$e.next()).done;)if(Y=P.value,!me||Y.undirected===Fe){var Vt=Y.source,Qt=Y.target;ye(Y.key,Y.attributes,Vt.key,Qt.key,Vt.attributes,Qt.attributes,Y.undirected,Y.generatedKey)}}(this,me,Dt=ot);if(2===arguments.length){Dt=Et;var Vt=this._nodes.get(ot=""+ot);if(void 0===Vt)throw new He("Graph.".concat($e,': could not find the "').concat(ot,'" node in the graph.'));return function Ge(ge,Me,ye,P,Y){var me=ge?L:Z;"undirected"!==Me&&("out"!==ye&&me(P.in,Y),"in"!==ye&&me(P.out,Y,ye?null:P.key)),"directed"!==Me&&me(P.undirected,Y)}(this.multi,"mixed"===me?this.type:me,Fe,Vt,Dt)}if(3===arguments.length){Et=""+Et;var Qt=this._nodes.get(ot=""+ot);if(!Qt)throw new He("Graph.".concat($e,':  could not find the "').concat(ot,'" source node in the graph.'));if(!this._nodes.has(Et))throw new He("Graph.".concat($e,':  could not find the "').concat(Et,'" target node in the graph.'));return function an(ge,Me,ye,P,Y,me){var Fe=Me?dt:Xe;"undirected"!==ge&&(void 0!==P.in&&"out"!==ye&&Fe(P.in,Y,me),P.key!==Y&&void 0!==P.out&&"in"!==ye&&Fe(P.out,Y,me)),"directed"!==ge&&void 0!==P.undirected&&Fe(P.undirected,Y,me)}(me,this.multi,Fe,Qt,Et,Dt)}throw new Pe("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ge,Me),function(ye,P){var Y=P.name,me=P.type,Fe=P.direction,$e="forEach"+Y[0].toUpperCase()+Y.slice(1,-1)+"Until";ye.prototype[$e]=function(ot,Et,Dt){if("mixed"===me||"mixed"===this.type||me===this.type){if(1===arguments.length)return function G(ge,Me,ye){if(0!==ge.size)for(var P,Y,me="mixed"!==Me&&Me!==ge.type,Fe="undirected"===Me,$e=ge._edges.values();!0!==(P=$e.next()).done;)if(Y=P.value,!me||Y.undirected===Fe){var Vt=Y.source,Qt=Y.target;if(ye(Y.key,Y.attributes,Vt.key,Qt.key,Vt.attributes,Qt.attributes,Y.undirected,Y.generatedKey))break}}(this,me,Dt=ot);if(2===arguments.length){Dt=Et;var Vt=this._nodes.get(ot=""+ot);if(void 0===Vt)throw new He("Graph.".concat($e,': could not find the "').concat(ot,'" node in the graph.'));return function Je(ge,Me,ye,P,Y){var me=ge?M:w;"undirected"!==Me&&("out"!==ye&&me(P.in,Y)||"in"!==ye&&me(P.out,Y,ye?null:P.key))||"directed"===Me||me(P.undirected,Y)}(this.multi,"mixed"===me?this.type:me,Fe,Vt,Dt)}if(3===arguments.length){Et=""+Et;var Qt=this._nodes.get(ot=""+ot);if(!Qt)throw new He("Graph.".concat($e,':  could not find the "').concat(ot,'" source node in the graph.'));if(!this._nodes.has(Et))throw new He("Graph.".concat($e,':  could not find the "').concat(Et,'" target node in the graph.'));return function Kn(ge,Me,ye,P,Y,me){var Fe=Me?gt:mt;"undirected"!==ge&&(void 0!==P.in&&"out"!==ye&&Fe(P.in,Y,me)||P.key!==Y&&void 0!==P.out&&"in"!==ye&&Fe(P.out,Y,me,ye?null:P.key))||"directed"===ge||void 0===P.undirected||Fe(P.undirected,Y,me)}(me,this.multi,Fe,Qt,Et,Dt)}throw new Pe("Graph.".concat($e,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ge,Me),function(ye,P){var me=P.type,Fe=P.direction,$e=P.name.slice(0,-1)+"Entries";ye.prototype[$e]=function(ot,Et){if("mixed"!==me&&"mixed"!==this.type&&me!==this.type)return qe.empty();if(!arguments.length)return function v(ge,Me){if(0===ge.size)return qe.empty();var ye="mixed"!==Me&&Me!==ge.type,P="undirected"===Me,Y=ge._edges.values();return new qe(function(){for(var me,Fe;;){if((me=Y.next()).done)return me;if(Fe=me.value,!ye||Fe.undirected===P)break}return{value:[Fe.key,Fe.attributes,Fe.source.key,Fe.target.key,Fe.source.attributes,Fe.target.attributes],done:!1}})}(this,me);if(1===arguments.length){var Dt=this._nodes.get(ot=""+ot);if(!Dt)throw new He("Graph.".concat($e,': could not find the "').concat(ot,'" node in the graph.'));return function at(ge,Me,ye){var P=qe.empty();return"undirected"!==ge&&("out"!==Me&&void 0!==ye.in&&(P=z(P,Q(ye.in))),"in"!==Me&&void 0!==ye.out&&(P=z(P,Q(ye.out,Me?null:ye.key)))),"directed"!==ge&&void 0!==ye.undirected&&(P=z(P,Q(ye.undirected))),P}(me,Fe,Dt)}if(2===arguments.length){Et=""+Et;var Vt=this._nodes.get(ot=""+ot);if(!Vt)throw new He("Graph.".concat($e,':  could not find the "').concat(ot,'" source node in the graph.'));if(!this._nodes.has(Et))throw new He("Graph.".concat($e,':  could not find the "').concat(Et,'" target node in the graph.'));return function Xn(ge,Me,ye,P){var Y=qe.empty();return"undirected"!==ge&&(void 0!==ye.in&&"out"!==Me&&P in ye.in&&(Y=z(Y,zt(ye.in,P))),void 0!==ye.out&&"in"!==Me&&P in ye.out&&(Y=z(Y,zt(ye.out,P)))),"directed"!==ge&&void 0!==ye.undirected&&P in ye.undirected&&(Y=z(Y,zt(ye.undirected,P))),Y}(me,Fe,Vt,Et)}throw new Pe("Graph.".concat($e,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(ge,Me)})}(yi),function(ge){Dn.forEach(function(Me){var P,Y,me,Fe;me=(P=Me).type,Fe=P.direction,ge.prototype[Y=P.name]=function($e){if("mixed"!==me&&"mixed"!==this.type&&me!==this.type)return[];if(2===arguments.length){var ot=""+arguments[0],Et=""+arguments[1];if(!this._nodes.has(ot))throw new He("Graph.".concat(Y,': could not find the "').concat(ot,'" node in the graph.'));if(!this._nodes.has(Et))throw new He("Graph.".concat(Y,': could not find the "').concat(Et,'" node in the graph.'));return function po(ge,Me,ye,P,Y){var me=ge._nodes.get(P);if("undirected"!==Me){if("out"!==ye&&void 0!==me.in)for(var Fe in me.in)if(Fe===Y)return!0;if("in"!==ye&&void 0!==me.out)for(var $e in me.out)if($e===Y)return!0}if("directed"!==Me&&void 0!==me.undirected)for(var ot in me.undirected)if(ot===Y)return!0;return!1}(this,me,Fe,ot,Et)}if(1===arguments.length){var Dt=this._nodes.get($e=""+$e);if(void 0===Dt)throw new He("Graph.".concat(Y,': could not find the "').concat($e,'" node in the graph.'));return function ss(ge,Me,ye){if("mixed"!==ge){if("undirected"===ge)return Object.keys(ye.undirected);if("string"==typeof Me)return Object.keys(ye[Me])}var P=new Set;return"undirected"!==ge&&("out"!==Me&&mr(P,ye.in),"in"!==Me&&mr(P,ye.out)),"directed"!==ge&&mr(P,ye.undirected),Ee(P.values(),P.size)}("mixed"===me?this.type:me,Fe,Dt)}throw new Pe("Graph.".concat(Y,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function jd(ge,Me){var ye=Me.name,P=Me.type,Y=Me.direction,me="forEach"+ye[0].toUpperCase()+ye.slice(1,-1);ge.prototype[me]=function(Fe,$e){if("mixed"===P||"mixed"===this.type||P===this.type){var ot=this._nodes.get(Fe=""+Fe);if(void 0===ot)throw new He("Graph.".concat(me,': could not find the "').concat(Fe,'" node in the graph.'));!function(Et,Dt,Vt,Qt){if("mixed"!==Et){if("undirected"===Et)return Wo(Vt,Vt.undirected,Qt);if("string"==typeof Dt)return Wo(Vt,Vt[Dt],Qt)}var vn=new Set;"undirected"!==Et&&("out"!==Dt&&Ui(vn,Vt,Vt.in,Qt),"in"!==Dt&&Ui(vn,Vt,Vt.out,Qt)),"directed"!==Et&&Ui(vn,Vt,Vt.undirected,Qt)}("mixed"===P?this.type:P,Y,ot,$e)}}}(ge,Me),function th(ge,Me){var ye=Me.name,P=Me.type,Y=Me.direction,me="forEach"+ye[0].toUpperCase()+ye.slice(1,-1)+"Until";ge.prototype[me]=function(Fe,$e){if("mixed"===P||"mixed"===this.type||P===this.type){var ot=this._nodes.get(Fe=""+Fe);if(void 0===ot)throw new He("Graph.".concat(me,': could not find the "').concat(Fe,'" node in the graph.'));!function(Et,Dt,Vt,Qt){if("mixed"!==Et){if("undirected"===Et)return $r(Vt,Vt.undirected,Qt);if("string"==typeof Dt)return $r(Vt,Vt[Dt],Qt)}var vn=new Set;"undirected"!==Et&&("out"!==Dt&&as(vn,Vt,Vt.in,Qt)||"in"!==Dt&&as(vn,Vt,Vt.out,Qt))||"directed"===Et||as(vn,Vt,Vt.undirected,Qt)}("mixed"===P?this.type:P,Y,ot,$e)}}}(ge,Me),function nh(ge,Me){var P=Me.type,Y=Me.direction,me=Me.name.slice(0,-1)+"Entries";ge.prototype[me]=function(Fe){if("mixed"!==P&&"mixed"!==this.type&&P!==this.type)return qe.empty();var $e=this._nodes.get(Fe=""+Fe);if(void 0===$e)throw new He("Graph.".concat(me,': could not find the "').concat(Fe,'" node in the graph.'));return function(ot,Et,Dt){if("mixed"!==ot){if("undirected"===ot)return Ps(Dt,Dt.undirected);if("string"==typeof Et)return Ps(Dt,Dt[Et])}var Vt=qe.empty(),Qt=new Set;return"undirected"!==ot&&("out"!==Et&&(Vt=z(Vt,Ro(Qt,Dt,Dt.in))),"in"!==Et&&(Vt=z(Vt,Ro(Qt,Dt,Dt.out)))),"directed"!==ot&&(Vt=z(Vt,Ro(Qt,Dt,Dt.undirected))),Vt}("mixed"===P?this.type:P,Y,$e)}}(ge,Me)})}(yi);var Ri=function(ge){function Me(ye){var P=x({type:"directed"},ye);if("multi"in P&&!1!==P.multi)throw new Pe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==P.type)throw new Pe('DirectedGraph.from: inconsistent "'+P.type+'" type in given options!');return ge.call(this,P)||this}return T(Me,ge),Me}(yi),Ns=function(ge){function Me(ye){var P=x({type:"undirected"},ye);if("multi"in P&&!1!==P.multi)throw new Pe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==P.type)throw new Pe('UndirectedGraph.from: inconsistent "'+P.type+'" type in given options!');return ge.call(this,P)||this}return T(Me,ge),Me}(yi),Ca=function(ge){function Me(ye){var P=x({multi:!0},ye);if("multi"in P&&!0!==P.multi)throw new Pe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return ge.call(this,P)||this}return T(Me,ge),Me}(yi),Ta=function(ge){function Me(ye){var P=x({type:"directed",multi:!0},ye);if("multi"in P&&!0!==P.multi)throw new Pe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==P.type)throw new Pe('MultiDirectedGraph.from: inconsistent "'+P.type+'" type in given options!');return ge.call(this,P)||this}return T(Me,ge),Me}(yi),cc=function(ge){function Me(ye){var P=x({type:"undirected",multi:!0},ye);if("multi"in P&&!0!==P.multi)throw new Pe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==P.type)throw new Pe('MultiUndirectedGraph.from: inconsistent "'+P.type+'" type in given options!');return ge.call(this,P)||this}return T(Me,ge),Me}(yi);function mo(ge){ge.from=function(Me,ye){var P=x({},Me.options,ye),Y=new ge(P);return Y.import(Me),Y}}return mo(yi),mo(Ri),mo(Ns),mo(Ca),mo(Ta),mo(cc),yi.Graph=yi,yi.DirectedGraph=Ri,yi.UndirectedGraph=Ns,yi.MultiGraph=Ca,yi.MultiDirectedGraph=Ta,yi.MultiUndirectedGraph=cc,yi.InvalidArgumentsGraphError=Pe,yi.NotFoundGraphError=He,yi.UsageGraphError=pe,yi}()},7271:(Ue,_e,T)=>{var J;!function(S,te,U,ee){"use strict";var q,_=["","webkit","Moz","MS","ms","o"],x=te.createElement("div"),F="function",W=Math.round,R=Math.abs,$=Date.now;function de(Oe,Le,nt){return setTimeout(B(Oe,nt),Le)}function I(Oe,Le,nt){return!!Array.isArray(Oe)&&(H(Oe,nt[Le],nt),!0)}function H(Oe,Le,nt){var pt;if(Oe)if(Oe.forEach)Oe.forEach(Le,nt);else if(Oe.length!==ee)for(pt=0;pt<Oe.length;)Le.call(nt,Oe[pt],pt,Oe),pt++;else for(pt in Oe)Oe.hasOwnProperty(pt)&&Le.call(nt,Oe[pt],pt,Oe)}function ae(Oe,Le,nt){var pt="DEPRECATED METHOD: "+Le+"\n"+nt+" AT \n";return function(){var xt=new Error("get-stack-trace"),qt=xt&&xt.stack?xt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",mn=S.console&&(S.console.warn||S.console.log);return mn&&mn.call(S.console,pt,qt),Oe.apply(this,arguments)}}q="function"!=typeof Object.assign?function(Le){if(Le===ee||null===Le)throw new TypeError("Cannot convert undefined or null to object");for(var nt=Object(Le),pt=1;pt<arguments.length;pt++){var xt=arguments[pt];if(xt!==ee&&null!==xt)for(var qt in xt)xt.hasOwnProperty(qt)&&(nt[qt]=xt[qt])}return nt}:Object.assign;var oe=ae(function(Le,nt,pt){for(var xt=Object.keys(nt),qt=0;qt<xt.length;)(!pt||pt&&Le[xt[qt]]===ee)&&(Le[xt[qt]]=nt[xt[qt]]),qt++;return Le},"extend","Use `assign`."),ne=ae(function(Le,nt){return oe(Le,nt,!0)},"merge","Use `assign`.");function X(Oe,Le,nt){var xt,pt=Le.prototype;(xt=Oe.prototype=Object.create(pt)).constructor=Oe,xt._super=pt,nt&&q(xt,nt)}function B(Oe,Le){return function(){return Oe.apply(Le,arguments)}}function b(Oe,Le){return typeof Oe==F?Oe.apply(Le&&Le[0]||ee,Le):Oe}function O(Oe,Le){return Oe===ee?Le:Oe}function C(Oe,Le,nt){H(se(Le),function(pt){Oe.addEventListener(pt,nt,!1)})}function he(Oe,Le,nt){H(se(Le),function(pt){Oe.removeEventListener(pt,nt,!1)})}function V(Oe,Le){for(;Oe;){if(Oe==Le)return!0;Oe=Oe.parentNode}return!1}function Te(Oe,Le){return Oe.indexOf(Le)>-1}function se(Oe){return Oe.trim().split(/\s+/g)}function Ce(Oe,Le,nt){if(Oe.indexOf&&!nt)return Oe.indexOf(Le);for(var pt=0;pt<Oe.length;){if(nt&&Oe[pt][nt]==Le||!nt&&Oe[pt]===Le)return pt;pt++}return-1}function Re(Oe){return Array.prototype.slice.call(Oe,0)}function ke(Oe,Le,nt){for(var pt=[],xt=[],qt=0;qt<Oe.length;){var mn=Le?Oe[qt][Le]:Oe[qt];Ce(xt,mn)<0&&pt.push(Oe[qt]),xt[qt]=mn,qt++}return nt&&(pt=Le?pt.sort(function(Ir,Rn){return Ir[Le]>Rn[Le]}):pt.sort()),pt}function et(Oe,Le){for(var nt,pt,xt=Le[0].toUpperCase()+Le.slice(1),qt=0;qt<_.length;){if((pt=(nt=_[qt])?nt+xt:Le)in Oe)return pt;qt++}return ee}var qe=1;function Ne(Oe){var Le=Oe.ownerDocument||Oe;return Le.defaultView||Le.parentWindow||S}var He="ontouchstart"in S,pe=et(S,"PointerEvent")!==ee,Ae=He&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ye="touch",Ze="mouse",N=25,E=1,z=4,Se=8,tt=1,ce=2,Z=4,L=8,w=16,M=ce|Z,Q=L|w,fe=M|Q,ze=["x","y"],Xe=["clientX","clientY"];function dt(Oe,Le){var nt=this;this.manager=Oe,this.callback=Le,this.element=Oe.element,this.target=Oe.options.inputTarget,this.domHandler=function(pt){b(Oe.options.enable,[Oe])&&nt.handler(pt)},this.init()}function gt(Oe,Le,nt){var pt=nt.pointers.length,xt=nt.changedPointers.length,qt=Le&E&&pt-xt==0,mn=Le&(z|Se)&&pt-xt==0;nt.isFirst=!!qt,nt.isFinal=!!mn,qt&&(Oe.session={}),nt.eventType=Le,function zt(Oe,Le){var nt=Oe.session,pt=Le.pointers,xt=pt.length;nt.firstInput||(nt.firstInput=G(Le)),xt>1&&!nt.firstMultiple?nt.firstMultiple=G(Le):1===xt&&(nt.firstMultiple=!1);var qt=nt.firstInput,mn=nt.firstMultiple,or=mn?mn.center:qt.center,Ir=Le.center=v(pt);Le.timeStamp=$(),Le.deltaTime=Le.timeStamp-qt.timeStamp,Le.angle=at(or,Ir),Le.distance=Je(or,Ir),function on(Oe,Le){var nt=Le.center,pt=Oe.offsetDelta||{},xt=Oe.prevDelta||{},qt=Oe.prevInput||{};(Le.eventType===E||qt.eventType===z)&&(xt=Oe.prevDelta={x:qt.deltaX||0,y:qt.deltaY||0},pt=Oe.offsetDelta={x:nt.x,y:nt.y}),Le.deltaX=xt.x+(nt.x-pt.x),Le.deltaY=xt.y+(nt.y-pt.y)}(nt,Le),Le.offsetDirection=Ge(Le.deltaX,Le.deltaY);var Rn=re(Le.deltaTime,Le.deltaX,Le.deltaY);Le.overallVelocityX=Rn.x,Le.overallVelocityY=Rn.y,Le.overallVelocity=R(Rn.x)>R(Rn.y)?Rn.x:Rn.y,Le.scale=mn?function an(Oe,Le){return Je(Le[0],Le[1],Xe)/Je(Oe[0],Oe[1],Xe)}(mn.pointers,pt):1,Le.rotation=mn?function Wt(Oe,Le){return at(Le[1],Le[0],Xe)+at(Oe[1],Oe[0],Xe)}(mn.pointers,pt):0,Le.maxPointers=nt.prevInput?Le.pointers.length>nt.prevInput.maxPointers?Le.pointers.length:nt.prevInput.maxPointers:Le.pointers.length,function Ie(Oe,Le){var xt,qt,mn,or,nt=Oe.lastInterval||Le,pt=Le.timeStamp-nt.timeStamp;if(Le.eventType!=Se&&(pt>N||nt.velocity===ee)){var Ir=Le.deltaX-nt.deltaX,Rn=Le.deltaY-nt.deltaY,gn=re(pt,Ir,Rn);qt=gn.x,mn=gn.y,xt=R(gn.x)>R(gn.y)?gn.x:gn.y,or=Ge(Ir,Rn),Oe.lastInterval=Le}else xt=nt.velocity,qt=nt.velocityX,mn=nt.velocityY,or=nt.direction;Le.velocity=xt,Le.velocityX=qt,Le.velocityY=mn,Le.direction=or}(nt,Le);var gn=Oe.element;V(Le.srcEvent.target,gn)&&(gn=Le.srcEvent.target),Le.target=gn}(Oe,nt),Oe.emit("hammer.input",nt),Oe.recognize(nt),Oe.session.prevInput=nt}function G(Oe){for(var Le=[],nt=0;nt<Oe.pointers.length;)Le[nt]={clientX:W(Oe.pointers[nt].clientX),clientY:W(Oe.pointers[nt].clientY)},nt++;return{timeStamp:$(),pointers:Le,center:v(Le),deltaX:Oe.deltaX,deltaY:Oe.deltaY}}function v(Oe){var Le=Oe.length;if(1===Le)return{x:W(Oe[0].clientX),y:W(Oe[0].clientY)};for(var nt=0,pt=0,xt=0;xt<Le;)nt+=Oe[xt].clientX,pt+=Oe[xt].clientY,xt++;return{x:W(nt/Le),y:W(pt/Le)}}function re(Oe,Le,nt){return{x:Le/Oe||0,y:nt/Oe||0}}function Ge(Oe,Le){return Oe===Le?tt:R(Oe)>=R(Le)?Oe<0?ce:Z:Le<0?L:w}function Je(Oe,Le,nt){nt||(nt=ze);var pt=Le[nt[0]]-Oe[nt[0]],xt=Le[nt[1]]-Oe[nt[1]];return Math.sqrt(pt*pt+xt*xt)}function at(Oe,Le,nt){return nt||(nt=ze),180*Math.atan2(Le[nt[1]]-Oe[nt[1]],Le[nt[0]]-Oe[nt[0]])/Math.PI}dt.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(Ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&he(this.element,this.evEl,this.domHandler),this.evTarget&&he(this.target,this.evTarget,this.domHandler),this.evWin&&he(Ne(this.element),this.evWin,this.domHandler)}};var Kn={mousedown:E,mousemove:2,mouseup:z},Xn="mousedown",Dn="mousemove mouseup";function mr(){this.evEl=Xn,this.evWin=Dn,this.pressed=!1,dt.apply(this,arguments)}X(mr,dt,{handler:function(Le){var nt=Kn[Le.type];nt&E&&0===Le.button&&(this.pressed=!0),2&nt&&1!==Le.which&&(nt=z),this.pressed&&(nt&z&&(this.pressed=!1),this.callback(this.manager,nt,{pointers:[Le],changedPointers:[Le],pointerType:Ze,srcEvent:Le}))}});var ss={pointerdown:E,pointermove:2,pointerup:z,pointercancel:Se,pointerout:Se},Wo={2:Ye,3:"pen",4:Ze,5:"kinect"},Ui="pointerdown",$r="pointermove pointerup pointercancel";function as(){this.evEl=Ui,this.evWin=$r,dt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}S.MSPointerEvent&&!S.PointerEvent&&(Ui="MSPointerDown",$r="MSPointerMove MSPointerUp MSPointerCancel"),X(as,dt,{handler:function(Le){var nt=this.store,pt=!1,xt=Le.type.toLowerCase().replace("ms",""),qt=ss[xt],mn=Wo[Le.pointerType]||Le.pointerType,or=mn==Ye,Ir=Ce(nt,Le.pointerId,"pointerId");qt&E&&(0===Le.button||or)?Ir<0&&(nt.push(Le),Ir=nt.length-1):qt&(z|Se)&&(pt=!0),!(Ir<0)&&(nt[Ir]=Le,this.callback(this.manager,qt,{pointers:nt,changedPointers:[Le],pointerType:mn,srcEvent:Le}),pt&&nt.splice(Ir,1))}});var Ps={touchstart:E,touchmove:2,touchend:z,touchcancel:Se};function jd(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,dt.apply(this,arguments)}function th(Oe,Le){var nt=Re(Oe.touches),pt=Re(Oe.changedTouches);return Le&(z|Se)&&(nt=ke(nt.concat(pt),"identifier",!0)),[nt,pt]}X(jd,dt,{handler:function(Le){var nt=Ps[Le.type];if(nt===E&&(this.started=!0),this.started){var pt=th.call(this,Le,nt);nt&(z|Se)&&pt[0].length-pt[1].length==0&&(this.started=!1),this.callback(this.manager,nt,{pointers:pt[0],changedPointers:pt[1],pointerType:Ye,srcEvent:Le})}}});var nh={touchstart:E,touchmove:2,touchend:z,touchcancel:Se},Uc="touchstart touchmove touchend touchcancel";function ac(){this.evTarget=Uc,this.targetIds={},dt.apply(this,arguments)}function Ol(Oe,Le){var nt=Re(Oe.touches),pt=this.targetIds;if(Le&(2|E)&&1===nt.length)return pt[nt[0].identifier]=!0,[nt,nt];var xt,qt,mn=Re(Oe.changedTouches),or=[],Ir=this.target;if(qt=nt.filter(function(Rn){return V(Rn.target,Ir)}),Le===E)for(xt=0;xt<qt.length;)pt[qt[xt].identifier]=!0,xt++;for(xt=0;xt<mn.length;)pt[mn[xt].identifier]&&or.push(mn[xt]),Le&(z|Se)&&delete pt[mn[xt].identifier],xt++;return or.length?[ke(qt.concat(or),"identifier",!0),or]:void 0}X(ac,dt,{handler:function(Le){var nt=nh[Le.type],pt=Ol.call(this,Le,nt);pt&&this.callback(this.manager,nt,{pointers:pt[0],changedPointers:pt[1],pointerType:Ye,srcEvent:Le})}});var Vc=2500;function Hc(){dt.apply(this,arguments);var Oe=B(this.handler,this);this.touch=new ac(this.manager,Oe),this.mouse=new mr(this.manager,Oe),this.primaryTouch=null,this.lastTouches=[]}function Ud(Oe,Le){Oe&E?(this.primaryTouch=Le.changedPointers[0].identifier,zc.call(this,Le)):Oe&(z|Se)&&zc.call(this,Le)}function zc(Oe){var Le=Oe.changedPointers[0];if(Le.identifier===this.primaryTouch){var nt={x:Le.clientX,y:Le.clientY};this.lastTouches.push(nt);var pt=this.lastTouches;setTimeout(function(){var qt=pt.indexOf(nt);qt>-1&&pt.splice(qt,1)},Vc)}}function ih(Oe){for(var Le=Oe.srcEvent.clientX,nt=Oe.srcEvent.clientY,pt=0;pt<this.lastTouches.length;pt++){var xt=this.lastTouches[pt],qt=Math.abs(Le-xt.x),mn=Math.abs(nt-xt.y);if(qt<=25&&mn<=25)return!0}return!1}X(Hc,dt,{handler:function(Le,nt,pt){var qt=pt.pointerType==Ze;if(!(qt&&pt.sourceCapabilities&&pt.sourceCapabilities.firesTouchEvents)){if(pt.pointerType==Ye)Ud.call(this,nt,pt);else if(qt&&ih.call(this,pt))return;this.callback(Le,nt,pt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Gc=et(x.style,"touchAction"),Nl=Gc!==ee,Wc="compute",Ri="manipulation",Ns="none",Ca="pan-x",Ta="pan-y",cc=function Me(){if(!Nl)return!1;var Oe={},Le=S.CSS&&S.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(nt){Oe[nt]=!Le||S.CSS.supports("touch-action",nt)}),Oe}();function mo(Oe,Le){this.manager=Oe,this.set(Le)}mo.prototype={set:function(Oe){Oe==Wc&&(Oe=this.compute()),Nl&&this.manager.element.style&&cc[Oe]&&(this.manager.element.style[Gc]=Oe),this.actions=Oe.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Oe=[];return H(this.manager.recognizers,function(Le){b(Le.options.enable,[Le])&&(Oe=Oe.concat(Le.getTouchAction()))}),function ge(Oe){if(Te(Oe,Ns))return Ns;var Le=Te(Oe,Ca),nt=Te(Oe,Ta);return Le&&nt?Ns:Le||nt?Le?Ca:Ta:Te(Oe,Ri)?Ri:"auto"}(Oe.join(" "))},preventDefaults:function(Oe){var Le=Oe.srcEvent,nt=Oe.offsetDirection;if(!this.manager.session.prevented){var pt=this.actions,xt=Te(pt,Ns)&&!cc[Ns],qt=Te(pt,Ta)&&!cc[Ta],mn=Te(pt,Ca)&&!cc[Ca];if(xt&&1===Oe.pointers.length&&Oe.distance<2&&Oe.deltaTime<250)return;return mn&&qt||!(xt||qt&&nt&M||mn&&nt&Q)?void 0:this.preventSrc(Le)}Le.preventDefault()},preventSrc:function(Oe){this.manager.session.prevented=!0,Oe.preventDefault()}};var ye=1;function Et(Oe){this.options=q({},this.defaults,Oe||{}),this.id=function Ee(){return qe++}(),this.manager=null,this.options.enable=O(this.options.enable,!0),this.state=ye,this.simultaneous={},this.requireFail=[]}function Dt(Oe){return 16&Oe?"cancel":8&Oe?"end":4&Oe?"move":2&Oe?"start":""}function Vt(Oe){return Oe==w?"down":Oe==L?"up":Oe==ce?"left":Oe==Z?"right":""}function Qt(Oe,Le){var nt=Le.manager;return nt?nt.get(Oe):Oe}function vn(){Et.apply(this,arguments)}function oo(){vn.apply(this,arguments),this.pX=null,this.pY=null}function Er(){vn.apply(this,arguments)}function ko(){Et.apply(this,arguments),this._timer=null,this._input=null}function $c(){vn.apply(this,arguments)}function ra(){vn.apply(this,arguments)}function Lr(){Et.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function go(Oe,Le){return(Le=Le||{}).recognizers=O(Le.recognizers,go.defaults.preset),new xi(Oe,Le)}function xi(Oe,Le){this.options=q({},go.defaults,Le||{}),this.options.inputTarget=this.options.inputTarget||Oe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Oe,this.input=function mt(Oe){return new(Oe.options.inputClass||(pe?as:Ae?ac:He?Hc:mr))(Oe,gt)}(this),this.touchAction=new mo(this,this.options.touchAction),gr(this,!0),H(this.options.recognizers,function(nt){var pt=this.add(new nt[0](nt[1]));nt[2]&&pt.recognizeWith(nt[2]),nt[3]&&pt.requireFailure(nt[3])},this)}function gr(Oe,Le){var pt,nt=Oe.element;nt.style&&(H(Oe.options.cssProps,function(xt,qt){pt=et(nt.style,qt),Le?(Oe.oldCssProps[pt]=nt.style[pt],nt.style[pt]=xt):nt.style[pt]=Oe.oldCssProps[pt]||""}),Le||(Oe.oldCssProps={}))}Et.prototype={defaults:{},set:function(Oe){return q(this.options,Oe),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Oe){if(I(Oe,"recognizeWith",this))return this;var Le=this.simultaneous;return Le[(Oe=Qt(Oe,this)).id]||(Le[Oe.id]=Oe,Oe.recognizeWith(this)),this},dropRecognizeWith:function(Oe){return I(Oe,"dropRecognizeWith",this)||(Oe=Qt(Oe,this),delete this.simultaneous[Oe.id]),this},requireFailure:function(Oe){if(I(Oe,"requireFailure",this))return this;var Le=this.requireFail;return-1===Ce(Le,Oe=Qt(Oe,this))&&(Le.push(Oe),Oe.requireFailure(this)),this},dropRequireFailure:function(Oe){if(I(Oe,"dropRequireFailure",this))return this;Oe=Qt(Oe,this);var Le=Ce(this.requireFail,Oe);return Le>-1&&this.requireFail.splice(Le,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Oe){return!!this.simultaneous[Oe.id]},emit:function(Oe){var Le=this,nt=this.state;function pt(xt){Le.manager.emit(xt,Oe)}nt<8&&pt(Le.options.event+Dt(nt)),pt(Le.options.event),Oe.additionalEvent&&pt(Oe.additionalEvent),nt>=8&&pt(Le.options.event+Dt(nt))},tryEmit:function(Oe){if(this.canEmit())return this.emit(Oe);this.state=32},canEmit:function(){for(var Oe=0;Oe<this.requireFail.length;){if(!(this.requireFail[Oe].state&(32|ye)))return!1;Oe++}return!0},recognize:function(Oe){var Le=q({},Oe);if(!b(this.options.enable,[this,Le]))return this.reset(),void(this.state=32);56&this.state&&(this.state=ye),this.state=this.process(Le),30&this.state&&this.tryEmit(Le)},process:function(Oe){},getTouchAction:function(){},reset:function(){}},X(vn,Et,{defaults:{pointers:1},attrTest:function(Oe){var Le=this.options.pointers;return 0===Le||Oe.pointers.length===Le},process:function(Oe){var Le=this.state,nt=Oe.eventType,pt=6&Le,xt=this.attrTest(Oe);return pt&&(nt&Se||!xt)?16|Le:pt||xt?nt&z?8|Le:2&Le?4|Le:2:32}}),X(oo,vn,{defaults:{event:"pan",threshold:10,pointers:1,direction:fe},getTouchAction:function(){var Oe=this.options.direction,Le=[];return Oe&M&&Le.push(Ta),Oe&Q&&Le.push(Ca),Le},directionTest:function(Oe){var Le=this.options,nt=!0,pt=Oe.distance,xt=Oe.direction,qt=Oe.deltaX,mn=Oe.deltaY;return xt&Le.direction||(Le.direction&M?(xt=0===qt?tt:qt<0?ce:Z,nt=qt!=this.pX,pt=Math.abs(Oe.deltaX)):(xt=0===mn?tt:mn<0?L:w,nt=mn!=this.pY,pt=Math.abs(Oe.deltaY))),Oe.direction=xt,nt&&pt>Le.threshold&&xt&Le.direction},attrTest:function(Oe){return vn.prototype.attrTest.call(this,Oe)&&(2&this.state||!(2&this.state)&&this.directionTest(Oe))},emit:function(Oe){this.pX=Oe.deltaX,this.pY=Oe.deltaY;var Le=Vt(Oe.direction);Le&&(Oe.additionalEvent=this.options.event+Le),this._super.emit.call(this,Oe)}}),X(Er,vn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ns]},attrTest:function(Oe){return this._super.attrTest.call(this,Oe)&&(Math.abs(Oe.scale-1)>this.options.threshold||2&this.state)},emit:function(Oe){1!==Oe.scale&&(Oe.additionalEvent=this.options.event+(Oe.scale<1?"in":"out")),this._super.emit.call(this,Oe)}}),X(ko,Et,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Oe){var Le=this.options,nt=Oe.pointers.length===Le.pointers,pt=Oe.distance<Le.threshold,xt=Oe.deltaTime>Le.time;if(this._input=Oe,!pt||!nt||Oe.eventType&(z|Se)&&!xt)this.reset();else if(Oe.eventType&E)this.reset(),this._timer=de(function(){this.state=8,this.tryEmit()},Le.time,this);else if(Oe.eventType&z)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Oe){8===this.state&&(Oe&&Oe.eventType&z?this.manager.emit(this.options.event+"up",Oe):(this._input.timeStamp=$(),this.manager.emit(this.options.event,this._input)))}}),X($c,vn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ns]},attrTest:function(Oe){return this._super.attrTest.call(this,Oe)&&(Math.abs(Oe.rotation)>this.options.threshold||2&this.state)}}),X(ra,vn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:M|Q,pointers:1},getTouchAction:function(){return oo.prototype.getTouchAction.call(this)},attrTest:function(Oe){var nt,Le=this.options.direction;return Le&(M|Q)?nt=Oe.overallVelocity:Le&M?nt=Oe.overallVelocityX:Le&Q&&(nt=Oe.overallVelocityY),this._super.attrTest.call(this,Oe)&&Le&Oe.offsetDirection&&Oe.distance>this.options.threshold&&Oe.maxPointers==this.options.pointers&&R(nt)>this.options.velocity&&Oe.eventType&z},emit:function(Oe){var Le=Vt(Oe.offsetDirection);Le&&this.manager.emit(this.options.event+Le,Oe),this.manager.emit(this.options.event,Oe)}}),X(Lr,Et,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ri]},process:function(Oe){var Le=this.options,nt=Oe.pointers.length===Le.pointers,pt=Oe.distance<Le.threshold,xt=Oe.deltaTime<Le.time;if(this.reset(),Oe.eventType&E&&0===this.count)return this.failTimeout();if(pt&&xt&&nt){if(Oe.eventType!=z)return this.failTimeout();var qt=!this.pTime||Oe.timeStamp-this.pTime<Le.interval,mn=!this.pCenter||Je(this.pCenter,Oe.center)<Le.posThreshold;if(this.pTime=Oe.timeStamp,this.pCenter=Oe.center,mn&&qt?this.count+=1:this.count=1,this._input=Oe,0==this.count%Le.taps)return this.hasRequireFailures()?(this._timer=de(function(){this.state=8,this.tryEmit()},Le.interval,this),2):8}return 32},failTimeout:function(){return this._timer=de(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),go.VERSION="2.0.7",go.defaults={domEvents:!1,touchAction:Wc,enable:!0,inputTarget:null,inputClass:null,preset:[[$c,{enable:!1}],[Er,{enable:!1},["rotate"]],[ra,{direction:M}],[oo,{direction:M},["swipe"]],[Lr],[Lr,{event:"doubletap",taps:2},["tap"]],[ko]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},xi.prototype={set:function(Oe){return q(this.options,Oe),Oe.touchAction&&this.touchAction.update(),Oe.inputTarget&&(this.input.destroy(),this.input.target=Oe.inputTarget,this.input.init()),this},stop:function(Oe){this.session.stopped=Oe?2:1},recognize:function(Oe){var Le=this.session;if(!Le.stopped){this.touchAction.preventDefaults(Oe);var nt,pt=this.recognizers,xt=Le.curRecognizer;(!xt||xt&&8&xt.state)&&(xt=Le.curRecognizer=null);for(var qt=0;qt<pt.length;)nt=pt[qt],2===Le.stopped||xt&&nt!=xt&&!nt.canRecognizeWith(xt)?nt.reset():nt.recognize(Oe),!xt&&14&nt.state&&(xt=Le.curRecognizer=nt),qt++}},get:function(Oe){if(Oe instanceof Et)return Oe;for(var Le=this.recognizers,nt=0;nt<Le.length;nt++)if(Le[nt].options.event==Oe)return Le[nt];return null},add:function(Oe){if(I(Oe,"add",this))return this;var Le=this.get(Oe.options.event);return Le&&this.remove(Le),this.recognizers.push(Oe),Oe.manager=this,this.touchAction.update(),Oe},remove:function(Oe){if(I(Oe,"remove",this))return this;if(Oe=this.get(Oe)){var Le=this.recognizers,nt=Ce(Le,Oe);-1!==nt&&(Le.splice(nt,1),this.touchAction.update())}return this},on:function(Oe,Le){if(Oe!==ee&&Le!==ee){var nt=this.handlers;return H(se(Oe),function(pt){nt[pt]=nt[pt]||[],nt[pt].push(Le)}),this}},off:function(Oe,Le){if(Oe!==ee){var nt=this.handlers;return H(se(Oe),function(pt){Le?nt[pt]&&nt[pt].splice(Ce(nt[pt],Le),1):delete nt[pt]}),this}},emit:function(Oe,Le){this.options.domEvents&&function $t(Oe,Le){var nt=te.createEvent("Event");nt.initEvent(Oe,!0,!0),nt.gesture=Le,Le.target.dispatchEvent(nt)}(Oe,Le);var nt=this.handlers[Oe]&&this.handlers[Oe].slice();if(nt&&nt.length){Le.type=Oe,Le.preventDefault=function(){Le.srcEvent.preventDefault()};for(var pt=0;pt<nt.length;)nt[pt](Le),pt++}},destroy:function(){this.element&&gr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},q(go,{INPUT_START:E,INPUT_MOVE:2,INPUT_END:z,INPUT_CANCEL:Se,STATE_POSSIBLE:ye,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:tt,DIRECTION_LEFT:ce,DIRECTION_RIGHT:Z,DIRECTION_UP:L,DIRECTION_DOWN:w,DIRECTION_HORIZONTAL:M,DIRECTION_VERTICAL:Q,DIRECTION_ALL:fe,Manager:xi,Input:dt,TouchAction:mo,TouchInput:ac,MouseInput:mr,PointerEventInput:as,TouchMouseInput:Hc,SingleTouchInput:jd,Recognizer:Et,AttrRecognizer:vn,Tap:Lr,Pan:oo,Swipe:ra,Pinch:Er,Rotate:$c,Press:ko,on:C,off:he,each:H,merge:ne,extend:oe,assign:q,inherit:X,bindFn:B,prefixed:et}),(typeof S<"u"?S:typeof self<"u"?self:{}).Hammer=go,(J=function(){return go}.call(_e,T,_e,Ue))!==ee&&(Ue.exports=J)}(window,document)},2601:(Ue,_e)=>{_e.read=function(T,J,S,te,U){var ee,_,x=8*U-te-1,F=(1<<x)-1,W=F>>1,R=-7,$=S?U-1:0,de=S?-1:1,I=T[J+$];for($+=de,ee=I&(1<<-R)-1,I>>=-R,R+=x;R>0;ee=256*ee+T[J+$],$+=de,R-=8);for(_=ee&(1<<-R)-1,ee>>=-R,R+=te;R>0;_=256*_+T[J+$],$+=de,R-=8);if(0===ee)ee=1-W;else{if(ee===F)return _?NaN:1/0*(I?-1:1);_+=Math.pow(2,te),ee-=W}return(I?-1:1)*_*Math.pow(2,ee-te)},_e.write=function(T,J,S,te,U,ee){var _,x,F,W=8*ee-U-1,R=(1<<W)-1,$=R>>1,de=23===U?Math.pow(2,-24)-Math.pow(2,-77):0,I=te?0:ee-1,H=te?1:-1,ae=J<0||0===J&&1/J<0?1:0;for(J=Math.abs(J),isNaN(J)||J===1/0?(x=isNaN(J)?1:0,_=R):(_=Math.floor(Math.log(J)/Math.LN2),J*(F=Math.pow(2,-_))<1&&(_--,F*=2),(J+=_+$>=1?de/F:de*Math.pow(2,1-$))*F>=2&&(_++,F/=2),_+$>=R?(x=0,_=R):_+$>=1?(x=(J*F-1)*Math.pow(2,U),_+=$):(x=J*Math.pow(2,$-1)*Math.pow(2,U),_=0));U>=8;T[S+I]=255&x,I+=H,x/=256,U-=8);for(_=_<<U|x,W+=U;W>0;T[S+I]=255&_,I+=H,_/=256,W-=8);T[S+I-H]|=128*ae}},6698:Ue=>{Ue.exports="function"==typeof Object.create?function(T,J){J&&(T.super_=J,T.prototype=Object.create(J.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}))}:function(T,J){if(J){T.super_=J;var S=function(){};S.prototype=J.prototype,T.prototype=new S,T.prototype.constructor=T}}},4198:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const{isArray:S,isObject:te,isString:U}=T(8254),{asArray:ee}=T(3521),{prependBase:_}=T(2651),x=T(1874),F=T(1252);function R(de){throw new x("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:de})}function $({context:de,base:I}){if(!de)return;const H=de["@context"];if(U(H))de["@context"]=_(I,H);else if(S(H))for(let ae=0;ae<H.length;++ae){const q=H[ae];U(q)?H[ae]=_(I,q):te(q)&&$({context:{"@context":q},base:I})}else if(te(H))for(const ae in H)$({context:H[ae],base:I})}Ue.exports=class{constructor({sharedCache:I}){this.perOpCache=new Map,this.sharedCache=I}resolve({activeCtx:I,context:H,documentLoader:ae,base:q,cycles:oe=new Set}){var ne=this;return J(function*(){H&&te(H)&&H["@context"]&&(H=H["@context"]),H=ee(H);const X=[];for(const B of H){if(U(B)){let C=ne._get(B);C||(C=yield ne._resolveRemoteContext({activeCtx:I,url:B,documentLoader:ae,base:q,cycles:oe})),S(C)?X.push(...C):X.push(C);continue}if(null===B){X.push(new F({document:null}));continue}te(B)||R(H);const b=JSON.stringify(B);let O=ne._get(b);O||(O=new F({document:B}),ne._cacheResolvedContext({key:b,resolved:O,tag:"static"})),X.push(O)}return X})()}_get(I){let H=this.perOpCache.get(I);if(!H){const ae=this.sharedCache.get(I);ae&&(H=ae.get("static"),H&&this.perOpCache.set(I,H))}return H}_cacheResolvedContext({key:I,resolved:H,tag:ae}){if(this.perOpCache.set(I,H),void 0!==ae){let q=this.sharedCache.get(I);q||(q=new Map,this.sharedCache.set(I,q)),q.set(ae,H)}return H}_resolveRemoteContext({activeCtx:I,url:H,documentLoader:ae,base:q,cycles:oe}){var ne=this;return J(function*(){H=_(q,H);const{context:X,remoteDoc:B}=yield ne._fetchContext({activeCtx:I,url:H,documentLoader:ae,cycles:oe});$({context:X,base:q=B.documentUrl||H});const b=yield ne.resolve({activeCtx:I,context:X,documentLoader:ae,base:q,cycles:oe});return ne._cacheResolvedContext({key:H,resolved:b,tag:B.tag}),b})()}_fetchContext({activeCtx:I,url:H,documentLoader:ae,cycles:q}){return J(function*(){if(q.size>10)throw new x("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===I.processingMode?"loading remote context failed":"context overflow",max:10});if(q.has(H))throw new x("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===I.processingMode?"recursive context inclusion":"context overflow",url:H});let oe,ne;q.add(H);try{ne=yield ae(H),oe=ne.document||null,U(oe)&&(oe=JSON.parse(oe))}catch(X){throw new x("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:H,cause:X})}if(!te(oe))throw new x("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:H});return oe="@context"in oe?{"@context":oe["@context"]}:{"@context":{}},ne.contextUrl&&(S(oe["@context"])||(oe["@context"]=[oe["@context"]]),oe["@context"].push(ne.contextUrl)),{context:oe,remoteDoc:ne}})()}}},1874:Ue=>{"use strict";Ue.exports=class extends Error{constructor(T="An unspecified JSON-LD error occurred.",J="jsonld.Error",S={}){super(T),this.name=J,this.message=T,this.details=S}}},1828:Ue=>{"use strict";Ue.exports=_e=>{class T{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(T,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(T.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:T}),T.compact=function(J,S){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):_e.compact(J,S)},T.expand=function(J){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):_e.expand(J)},T.flatten=function(J){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):_e.flatten(J)},T}},7260:(Ue,_e,T)=>{"use strict";Ue.exports=T(1986).NQuads},4044:(Ue,_e,T)=>{"use strict";var J=T(7156).default;Ue.exports=class{constructor(){this._requests={}}wrapLoader(te){const U=this;return U._loader=te,function(){return U.add.apply(U,arguments)}}add(te){var U=this;return J(function*(){let ee=U._requests[te];if(ee)return Promise.resolve(ee);ee=U._requests[te]=U._loader(te);try{return yield ee}finally{delete U._requests[te]}})()}}},1252:(Ue,_e,T)=>{"use strict";const J=T(1072);Ue.exports=class{constructor({document:U}){this.document=U,this.cache=new J({max:10})}getProcessed(U){return this.cache.get(U)}setProcessed(U,ee){this.cache.set(U,ee)}}},8809:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(1874),{isArray:te,isObject:U,isString:ee,isUndefined:_}=T(8254),{isList:x,isValue:F,isGraph:W,isSimpleGraph:R,isSubjectReference:$}=T(543),{expandIri:de,getContextValue:I,isKeyword:H,process:ae,processingMode:q}=T(9611),{removeBase:oe,prependBase:ne}=T(2651),{REGEX_KEYWORD:X,addValue:B,asArray:b,compareShortestLeast:O}=T(3521),C={};function V(Te,se,Ce){if("@nest"!==de(Te,se,{vocab:!0},Ce))throw new S("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ue.exports=C,C.compact=function(){var Te=J(function*({activeCtx:se,activeProperty:Ce=null,element:Re,options:ke={}}){if(te(Re)){let qe=[];for(let Ee=0;Ee<Re.length;++Ee){const Ne=yield C.compact({activeCtx:se,activeProperty:Ce,element:Re[Ee],options:ke});null!==Ne&&qe.push(Ne)}return ke.compactArrays&&1===qe.length&&0===(I(se,Ce,"@container")||[]).length&&(qe=qe[0]),qe}const et=I(se,Ce,"@context");if(_(et)||(se=yield ae({activeCtx:se,localCtx:et,propagate:!0,overrideProtected:!0,options:ke})),U(Re)){if(ke.link&&"@id"in Re&&ke.link.hasOwnProperty(Re["@id"])){const Ye=ke.link[Re["@id"]];for(let st=0;st<Ye.length;++st)if(Ye[st].expanded===Re)return Ye[st].compacted}if(F(Re)||$(Re)){const Ye=C.compactValue({activeCtx:se,activeProperty:Ce,value:Re,options:ke});return ke.link&&$(Re)&&(ke.link.hasOwnProperty(Re["@id"])||(ke.link[Re["@id"]]=[]),ke.link[Re["@id"]].push({expanded:Re,compacted:Ye})),Ye}if(x(Re)&&(I(se,Ce,"@container")||[]).includes("@list"))return C.compact({activeCtx:se,activeProperty:Ce,element:Re["@list"],options:ke});const qe="@reverse"===Ce,Ee={},Ne=se;!F(Re)&&!$(Re)&&(se=se.revertToPreviousContext());const Pe=I(Ne,Ce,"@context");_(Pe)||(se=yield ae({activeCtx:se,localCtx:Pe,propagate:!0,overrideProtected:!0,options:ke})),ke.link&&"@id"in Re&&(ke.link.hasOwnProperty(Re["@id"])||(ke.link[Re["@id"]]=[]),ke.link[Re["@id"]].push({expanded:Re,compacted:Ee}));let He=Re["@type"]||[];He.length>1&&(He=Array.from(He).sort());const pe=se;for(const Ye of He){const st=C.compactIri({activeCtx:pe,iri:Ye,relativeTo:{vocab:!0}}),Ze=I(Ne,st,"@context");_(Ze)||(se=yield ae({activeCtx:se,localCtx:Ze,options:ke,propagate:!1}))}const Ae=Object.keys(Re).sort();for(const Ye of Ae){const st=Re[Ye];if("@id"!==Ye)if("@type"!==Ye)if("@reverse"!==Ye)if("@preserve"!==Ye)if("@index"!==Ye)if("@graph"!==Ye&&"@list"!==Ye&&"@included"!==Ye&&H(Ye)){const Ze=C.compactIri({activeCtx:se,iri:Ye,relativeTo:{vocab:!0}});B(Ee,Ze,st)}else{if(!te(st))throw new S("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===st.length){const Ze=C.compactIri({activeCtx:se,iri:Ye,value:st,relativeTo:{vocab:!0},reverse:qe}),le=se.mappings.has(Ze)?se.mappings.get(Ze)["@nest"]:null;let N=Ee;le&&(V(se,le,ke),U(Ee[le])||(Ee[le]={}),N=Ee[le]),B(N,Ze,st,{propertyIsArray:!0})}for(const Ze of st){const le=C.compactIri({activeCtx:se,iri:Ye,value:Ze,relativeTo:{vocab:!0},reverse:qe}),N=se.mappings.has(le)?se.mappings.get(le)["@nest"]:null;let E=Ee;N&&(V(se,N,ke),U(Ee[N])||(Ee[N]={}),E=Ee[N]);const ie=I(se,le,"@container")||[],z=W(Ze),Se=x(Ze);let tt;Se?tt=Ze["@list"]:z&&(tt=Ze["@graph"]);let ce=yield C.compact({activeCtx:se,activeProperty:le,element:Se||z?tt:Ze,options:ke});if(Se){if(te(ce)||(ce=[ce]),ie.includes("@list")){B(E,le,ce,{valueIsArray:!0,allowDuplicate:!0});continue}ce={[C.compactIri({activeCtx:se,iri:"@list",relativeTo:{vocab:!0}})]:ce},"@index"in Ze&&(ce[C.compactIri({activeCtx:se,iri:"@index",relativeTo:{vocab:!0}})]=Ze["@index"])}if(z)if(ie.includes("@graph")&&(ie.includes("@id")||ie.includes("@index")&&R(Ze))){let Z;E.hasOwnProperty(le)?Z=E[le]:E[le]=Z={};const L=(ie.includes("@id")?Ze["@id"]:Ze["@index"])||C.compactIri({activeCtx:se,iri:"@none",relativeTo:{vocab:!0}});B(Z,L,ce,{propertyIsArray:!ke.compactArrays||ie.includes("@set")})}else ie.includes("@graph")&&R(Ze)?(te(ce)&&ce.length>1&&(ce={"@included":ce}),B(E,le,ce,{propertyIsArray:!ke.compactArrays||ie.includes("@set")})):(te(ce)&&1===ce.length&&ke.compactArrays&&(ce=ce[0]),ce={[C.compactIri({activeCtx:se,iri:"@graph",relativeTo:{vocab:!0}})]:ce},"@id"in Ze&&(ce[C.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}})]=Ze["@id"]),"@index"in Ze&&(ce[C.compactIri({activeCtx:se,iri:"@index",relativeTo:{vocab:!0}})]=Ze["@index"]),B(E,le,ce,{propertyIsArray:!ke.compactArrays||ie.includes("@set")}));else if(ie.includes("@language")||ie.includes("@index")||ie.includes("@id")||ie.includes("@type")){let Z,L;if(E.hasOwnProperty(le)?Z=E[le]:E[le]=Z={},ie.includes("@language"))F(ce)&&(ce=ce["@value"]),L=Ze["@language"];else if(ie.includes("@index")){const w=I(se,le,"@index")||"@index",M=C.compactIri({activeCtx:se,iri:w,relativeTo:{vocab:!0}});if("@index"===w)L=Ze["@index"],delete ce[M];else{let Q;if([L,...Q]=b(ce[w]||[]),ee(L))switch(Q.length){case 0:delete ce[w];break;case 1:ce[w]=Q[0];break;default:ce[w]=Q}else L=null}}else if(ie.includes("@id")){const w=C.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}});L=ce[w],delete ce[w]}else if(ie.includes("@type")){const w=C.compactIri({activeCtx:se,iri:"@type",relativeTo:{vocab:!0}});let M;switch([L,...M]=b(ce[w]||[]),M.length){case 0:delete ce[w];break;case 1:ce[w]=M[0];break;default:ce[w]=M}1===Object.keys(ce).length&&"@id"in Ze&&(ce=yield C.compact({activeCtx:se,activeProperty:le,element:{"@id":Ze["@id"]},options:ke}))}L||(L=C.compactIri({activeCtx:se,iri:"@none",relativeTo:{vocab:!0}})),B(Z,L,ce,{propertyIsArray:ie.includes("@set")})}else{const Z=!ke.compactArrays||ie.includes("@set")||ie.includes("@list")||te(ce)&&0===ce.length||"@list"===Ye||"@graph"===Ye;B(E,le,ce,{propertyIsArray:Z})}}}else{if((I(se,Ce,"@container")||[]).includes("@index"))continue;const le=C.compactIri({activeCtx:se,iri:Ye,relativeTo:{vocab:!0}});B(Ee,le,st)}else{const Ze=yield C.compact({activeCtx:se,activeProperty:Ce,element:st,options:ke});te(Ze)&&0===Ze.length||B(Ee,Ye,Ze)}else{const Ze=yield C.compact({activeCtx:se,activeProperty:"@reverse",element:st,options:ke});for(const le in Ze)if(se.mappings.has(le)&&se.mappings.get(le).reverse){const N=Ze[le],ie=(I(se,le,"@container")||[]).includes("@set")||!ke.compactArrays;B(Ee,le,N,{propertyIsArray:ie}),delete Ze[le]}if(Object.keys(Ze).length>0){const le=C.compactIri({activeCtx:se,iri:Ye,relativeTo:{vocab:!0}});B(Ee,le,Ze)}}else{let Ze=b(st).map(z=>C.compactIri({activeCtx:Ne,iri:z,relativeTo:{vocab:!0}}));1===Ze.length&&(Ze=Ze[0]);const le=C.compactIri({activeCtx:se,iri:"@type",relativeTo:{vocab:!0}}),ie=(I(se,le,"@container")||[]).includes("@set")&&q(se,1.1)||te(Ze)&&0===st.length;B(Ee,le,Ze,{propertyIsArray:ie})}else{let Ze=b(st).map(N=>C.compactIri({activeCtx:se,iri:N,relativeTo:{vocab:!1},base:ke.base}));1===Ze.length&&(Ze=Ze[0]),Ee[C.compactIri({activeCtx:se,iri:"@id",relativeTo:{vocab:!0}})]=Ze}}return Ee}return Re});return function(se){return Te.apply(this,arguments)}}(),C.compactIri=({activeCtx:Te,iri:se,value:Ce=null,relativeTo:Re={vocab:!1},reverse:ke=!1,base:et=null})=>{if(null===se)return se;Te.isPropertyTermScoped&&Te.previousContext&&(Te=Te.previousContext);const qe=Te.getInverse();if(H(se)&&se in qe&&"@none"in qe[se]&&"@type"in qe[se]["@none"]&&"@none"in qe[se]["@none"]["@type"])return qe[se]["@none"]["@type"]["@none"];if(Re.vocab&&se in qe){const pe=Te["@language"]||"@none",Ae=[];U(Ce)&&"@index"in Ce&&!("@graph"in Ce)&&Ae.push("@index","@index@set"),U(Ce)&&"@preserve"in Ce&&(Ce=Ce["@preserve"][0]),W(Ce)?("@index"in Ce&&Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Ce&&Ae.push("@graph@id","@graph@id@set"),Ae.push("@graph","@graph@set","@set"),"@index"in Ce||Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in Ce||Ae.push("@graph@id","@graph@id@set")):U(Ce)&&!F(Ce)&&Ae.push("@id","@id@set","@type","@set@type");let Ye="@language",st="@null";if(ke)Ye="@type",st="@reverse",Ae.push("@set");else if(x(Ce)){"@index"in Ce||Ae.push("@list");const le=Ce["@list"];if(0===le.length)Ye="@any",st="@none";else{let N=0===le.length?pe:null,E=null;for(let ie=0;ie<le.length;++ie){const z=le[ie];let Se="@none",tt="@none";if(F(z)?"@direction"in z?Se=`${(z["@language"]||"").toLowerCase()}_${z["@direction"]}`:"@language"in z?Se=z["@language"].toLowerCase():"@type"in z?tt=z["@type"]:Se="@null":tt="@id",null===N?N=Se:Se!==N&&F(z)&&(N="@none"),null===E?E=tt:tt!==E&&(E="@none"),"@none"===N&&"@none"===E)break}N=N||"@none",E=E||"@none","@none"!==E?(Ye="@type",st=E):st=N}}else{if(F(Ce))if("@language"in Ce&&!("@index"in Ce)){Ae.push("@language","@language@set"),st=Ce["@language"];const le=Ce["@direction"];le&&(st=`${st}_${le}`)}else"@direction"in Ce&&!("@index"in Ce)?st=`_${Ce["@direction"]}`:"@type"in Ce&&(Ye="@type",st=Ce["@type"]);else Ye="@type",st="@id";Ae.push("@set")}Ae.push("@none"),U(Ce)&&!("@index"in Ce)&&Ae.push("@index","@index@set"),F(Ce)&&1===Object.keys(Ce).length&&Ae.push("@language","@language@set");const Ze=function he(Te,se,Ce,Re,ke,et){null===et&&(et="@null");const qe=[];if(("@id"===et||"@reverse"===et)&&U(Ce)&&"@id"in Ce){"@reverse"===et&&qe.push("@reverse");const Ne=C.compactIri({activeCtx:Te,iri:Ce["@id"],relativeTo:{vocab:!0}});Te.mappings.has(Ne)&&Te.mappings.get(Ne)&&Te.mappings.get(Ne)["@id"]===Ce["@id"]?qe.push.apply(qe,["@vocab","@id"]):qe.push.apply(qe,["@id","@vocab"])}else{qe.push(et);const Ne=qe.find(Pe=>Pe.includes("_"));Ne&&qe.push(Ne.replace(/^[^_]+_/,"_"))}qe.push("@none");const Ee=Te.inverse[se];for(const Ne of Re){if(!(Ne in Ee))continue;const Pe=Ee[Ne][ke];for(const He of qe)if(He in Pe)return Pe[He]}return null}(Te,se,Ce,Ae,Ye,st);if(null!==Ze)return Ze}if(Re.vocab&&"@vocab"in Te){const pe=Te["@vocab"];if(0===se.indexOf(pe)&&se!==pe){const Ae=se.substr(pe.length);if(!Te.mappings.has(Ae))return Ae}}let Ee=null;const Ne=[];let Pe=Te.fastCurieMap;const He=se.length-1;for(let pe=0;pe<He&&se[pe]in Pe;++pe)Pe=Pe[se[pe]],""in Pe&&Ne.push(Pe[""][0]);for(let pe=Ne.length-1;pe>=0;--pe){const Ae=Ne[pe],Ye=Ae.terms;for(const st of Ye){const Ze=st+":"+se.substr(Ae.iri.length);Te.mappings.get(st)._prefix&&(!Te.mappings.has(Ze)||null===Ce&&Te.mappings.get(Ze)["@id"]===se)&&(null===Ee||O(Ze,Ee)<0)&&(Ee=Ze)}}if(null!==Ee)return Ee;for(const[pe,Ae]of Te.mappings)if(Ae&&Ae._prefix&&se.startsWith(pe+":"))throw new S(`Absolute IRI "${se}" confused with prefix "${pe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Te});if(!Re.vocab){if("@base"in Te){if(Te["@base"]){const pe=oe(ne(et,Te["@base"]),se);return X.test(pe)?`./${pe}`:pe}return se}return oe(et,se)}return se},C.compactValue=({activeCtx:Te,activeProperty:se,value:Ce,options:Re})=>{if(F(Ce)){const Ee=I(Te,se,"@type"),Ne=I(Te,se,"@language"),Pe=I(Te,se,"@direction"),He=I(Te,se,"@container")||[],pe="@index"in Ce&&!He.includes("@index");if(!pe&&"@none"!==Ee&&(Ce["@type"]===Ee||"@language"in Ce&&Ce["@language"]===Ne&&"@direction"in Ce&&Ce["@direction"]===Pe||"@language"in Ce&&Ce["@language"]===Ne||"@direction"in Ce&&Ce["@direction"]===Pe))return Ce["@value"];const Ae=Object.keys(Ce).length,Ye=1===Ae||2===Ae&&"@index"in Ce&&!pe,st="@language"in Te,Ze=ee(Ce["@value"]),le=Te.mappings.has(se)&&null===Te.mappings.get(se)["@language"];if(Ye&&"@none"!==Ee&&(!st||!Ze||le))return Ce["@value"];const N={};return pe&&(N[C.compactIri({activeCtx:Te,iri:"@index",relativeTo:{vocab:!0}})]=Ce["@index"]),"@type"in Ce?N[C.compactIri({activeCtx:Te,iri:"@type",relativeTo:{vocab:!0}})]=C.compactIri({activeCtx:Te,iri:Ce["@type"],relativeTo:{vocab:!0}}):"@language"in Ce&&(N[C.compactIri({activeCtx:Te,iri:"@language",relativeTo:{vocab:!0}})]=Ce["@language"]),"@direction"in Ce&&(N[C.compactIri({activeCtx:Te,iri:"@direction",relativeTo:{vocab:!0}})]=Ce["@direction"]),N[C.compactIri({activeCtx:Te,iri:"@value",relativeTo:{vocab:!0}})]=Ce["@value"],N}const ke=de(Te,se,{vocab:!0},Re),et=I(Te,se,"@type"),qe=C.compactIri({activeCtx:Te,iri:Ce["@id"],relativeTo:{vocab:"@vocab"===et},base:Re.base});return"@id"===et||"@vocab"===et||"@graph"===ke?qe:{[C.compactIri({activeCtx:Te,iri:"@id",relativeTo:{vocab:!0}})]:qe}}},6982:Ue=>{"use strict";const _e="http://www.w3.org/1999/02/22-rdf-syntax-ns#",T="http://www.w3.org/2001/XMLSchema#";Ue.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:_e,RDF_LIST:_e+"List",RDF_FIRST:_e+"first",RDF_REST:_e+"rest",RDF_NIL:_e+"nil",RDF_TYPE:_e+"type",RDF_PLAIN_LITERAL:_e+"PlainLiteral",RDF_XML_LITERAL:_e+"XMLLiteral",RDF_JSON_LITERAL:_e+"JSON",RDF_OBJECT:_e+"object",RDF_LANGSTRING:_e+"langString",XSD:T,XSD_BOOLEAN:T+"boolean",XSD_DOUBLE:T+"double",XSD_INTEGER:T+"integer",XSD_STRING:T+"string"}},9611:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(3521),te=T(1874),{isArray:U,isObject:ee,isString:_,isUndefined:x}=T(8254),{isAbsolute:F,isRelative:W,prependBase:R}=T(2651),{handleEvent:$}=T(3855),{REGEX_BCP47:de,REGEX_KEYWORD:I,asArray:H,compareShortestLeast:ae}=T(3521),q=new Map,ne={};function X(b,O,C,he,V,Te){if(null===O||!_(O)||ne.isKeyword(O))return O;if(O.match(I))return null;if(he&&he.hasOwnProperty(O)&&!0!==V.get(O)&&ne.createTermDefinition({activeCtx:b,localCtx:he,term:O,defined:V,options:Te}),(C=C||{}).vocab){const Ce=b.mappings.get(O);if(null===Ce)return null;if(ee(Ce)&&"@id"in Ce)return Ce["@id"]}const se=O.indexOf(":");if(se>0){const Ce=O.substr(0,se),Re=O.substr(se+1);if("_"===Ce||0===Re.indexOf("//"))return O;he&&he.hasOwnProperty(Ce)&&ne.createTermDefinition({activeCtx:b,localCtx:he,term:Ce,defined:V,options:Te});const ke=b.mappings.get(Ce);if(ke&&ke._prefix)return ke["@id"]+Re;if(F(O))return O}if(C.vocab&&"@vocab"in b)O=b["@vocab"]+O;else if(C.base){let Ce,Re;"@base"in b?b["@base"]?(Re=R(Te.base,b["@base"]),Ce=R(Re,O)):(Re=b["@base"],Ce=O):(Re=Te.base,Ce=R(Te.base,O)),O=Ce}return O}function B(b,O){if(!b||"object"!=typeof b||!O||"object"!=typeof O)return b===O;const C=Array.isArray(b);if(C!==Array.isArray(O))return!1;if(C){if(b.length!==O.length)return!1;for(let Te=0;Te<b.length;++Te)if(!B(b[Te],O[Te]))return!1;return!0}const he=Object.keys(b),V=Object.keys(O);if(he.length!==V.length)return!1;for(const Te in b){let se=b[Te],Ce=O[Te];if("@container"===Te&&Array.isArray(se)&&Array.isArray(Ce)&&(se=se.slice().sort(),Ce=Ce.slice().sort()),!B(se,Ce))return!1}return!0}Ue.exports=ne,ne.process=function(){var b=J(function*({activeCtx:O,localCtx:C,options:he,propagate:V=!0,overrideProtected:Te=!1,cycles:se=new Set}){if(ee(C)&&"@context"in C&&U(C["@context"])&&(C=C["@context"]),0===H(C).length)return O;const Re=[],ke=[({event:Ne,next:Pe})=>{Re.push(Ne),Pe()}];he.eventHandler&&ke.push(he.eventHandler);const et=he;he={...he,eventHandler:ke};const qe=yield he.contextResolver.resolve({activeCtx:O,context:C,documentLoader:he.documentLoader,base:he.base});ee(qe[0].document)&&"boolean"==typeof qe[0].document["@propagate"]&&(V=qe[0].document["@propagate"]);let Ee=O;!V&&!Ee.previousContext&&(Ee=Ee.clone(),Ee.previousContext=O);for(const Ne of qe){let{document:Pe}=Ne;if(O=Ee,null===Pe){if(!Te&&0!==Object.keys(O.protected).length)throw new te("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ee=O=ne.getInitialContext(he).clone();continue}const He=Ne.getProcessed(O);if(He){if(et.eventHandler)for(const Ae of He.events)$({event:Ae,options:et});Ee=O=He.context;continue}if(ee(Pe)&&"@context"in Pe&&(Pe=Pe["@context"]),!ee(Pe))throw new te("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Pe});Ee=Ee.clone();const pe=new Map;if("@version"in Pe){if(1.1!==Pe["@version"])throw new te("Unsupported JSON-LD version: "+Pe["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Pe});if(O.processingMode&&"json-ld-1.0"===O.processingMode)throw new te("@version: "+Pe["@version"]+" not compatible with "+O.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Pe});Ee.processingMode="json-ld-1.1",Ee["@version"]=Pe["@version"],pe.set("@version",!0)}if(Ee.processingMode=Ee.processingMode||O.processingMode,"@base"in Pe){let Ae=Pe["@base"];if(null!==Ae&&!F(Ae)){if(!W(Ae))throw new te('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Pe});Ae=R(Ee["@base"],Ae)}Ee["@base"]=Ae,pe.set("@base",!0)}if("@vocab"in Pe){const Ae=Pe["@vocab"];if(null===Ae)delete Ee["@vocab"];else{if(!_(Ae))throw new te('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Pe});if(!F(Ae)&&ne.processingMode(Ee,1))throw new te('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Pe});{const Ye=X(Ee,Ae,{vocab:!0,base:!0},void 0,void 0,he);F(Ye)||he.eventHandler&&$({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Ye}},options:he}),Ee["@vocab"]=Ye}}pe.set("@vocab",!0)}if("@language"in Pe){const Ae=Pe["@language"];if(null===Ae)delete Ee["@language"];else{if(!_(Ae))throw new te('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Pe});Ae.match(de)||he.eventHandler&&$({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ae}},options:he}),Ee["@language"]=Ae.toLowerCase()}pe.set("@language",!0)}if("@direction"in Pe){const Ae=Pe["@direction"];if("json-ld-1.0"===O.processingMode)throw new te("Invalid JSON-LD syntax; @direction not compatible with "+O.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Pe});if(null===Ae)delete Ee["@direction"];else{if("ltr"!==Ae&&"rtl"!==Ae)throw new te('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Pe});Ee["@direction"]=Ae}pe.set("@direction",!0)}if("@propagate"in Pe){const Ae=Pe["@propagate"];if("json-ld-1.0"===O.processingMode)throw new te("Invalid JSON-LD syntax; @propagate not compatible with "+O.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Pe});if("boolean"!=typeof Ae)throw new te("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:C});pe.set("@propagate",!0)}if("@import"in Pe){const Ae=Pe["@import"];if("json-ld-1.0"===O.processingMode)throw new te("Invalid JSON-LD syntax; @import not compatible with "+O.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Pe});if(!_(Ae))throw new te("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:C});const Ye=yield he.contextResolver.resolve({activeCtx:O,context:Ae,documentLoader:he.documentLoader,base:he.base});if(1!==Ye.length)throw new te("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:C});const st=Ye[0].getProcessed(O);if(st)Pe=st;else{const Ze=Ye[0].document;if("@import"in Ze)throw new te("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:C});for(const le in Ze)Pe.hasOwnProperty(le)||(Pe[le]=Ze[le]);Ye[0].setProcessed(O,Pe)}pe.set("@import",!0)}pe.set("@protected",Pe["@protected"]||!1);for(const Ae in Pe)if(ne.createTermDefinition({activeCtx:Ee,localCtx:Pe,term:Ae,defined:pe,options:he,overrideProtected:Te}),ee(Pe[Ae])&&"@context"in Pe[Ae]){const Ye=Pe[Ae]["@context"];let st=!0;if(_(Ye)){const Ze=R(he.base,Ye);se.has(Ze)?st=!1:se.add(Ze)}if(st)try{yield ne.process({activeCtx:Ee.clone(),localCtx:Pe[Ae]["@context"],overrideProtected:!0,options:he,cycles:se})}catch{throw new te("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Pe[Ae]["@context"],term:Ae})}}Ne.setProcessed(O,{context:Ee,events:Re})}return Ee});return function(O){return b.apply(this,arguments)}}(),ne.createTermDefinition=({activeCtx:b,localCtx:O,term:C,defined:he,options:V,overrideProtected:Te=!1})=>{if(he.has(C)){if(he.get(C))return;throw new te("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:O,term:C})}let se;if(he.set(C,!1),O.hasOwnProperty(C)&&(se=O[C]),"@type"===C&&ee(se)&&"@set"===(se["@container"]||"@set")&&ne.processingMode(b,1.1)){const Ne=["@container","@id","@protected"],Pe=Object.keys(se);if(0===Pe.length||Pe.some(He=>!Ne.includes(He)))throw new te("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:O,term:C})}else{if(ne.isKeyword(C))throw new te("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:O,term:C});if(C.match(I))return void(V.eventHandler&&$({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:C}},options:V}));if(""===C)throw new te("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:O})}const Ce=b.mappings.get(C);b.mappings.has(C)&&b.mappings.delete(C);let Re=!1;if((_(se)||null===se)&&(Re=!0,se={"@id":se}),!ee(se))throw new te("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:O});const ke={};b.mappings.set(C,ke),ke.reverse=!1;const et=["@container","@id","@language","@reverse","@type"];ne.processingMode(b,1.1)&&et.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ne in se)if(!et.includes(Ne))throw new te("Invalid JSON-LD syntax; a term definition must not contain "+Ne,"jsonld.SyntaxError",{code:"invalid term definition",context:O});const qe=C.indexOf(":");if(ke._termHasColon=qe>0,"@reverse"in se){if("@id"in se)throw new te("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:O});if("@nest"in se)throw new te("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:O});const Ne=se["@reverse"];if(!_(Ne))throw new te("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});if(Ne.match(I))return V.eventHandler&&$({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ne}},options:V}),void(Ce?b.mappings.set(C,Ce):b.mappings.delete(C));const Pe=X(b,Ne,{vocab:!0,base:!1},O,he,V);if(!F(Pe))throw new te("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});ke["@id"]=Pe,ke.reverse=!0}else if("@id"in se){let Ne=se["@id"];if(Ne&&!_(Ne))throw new te("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});if(null===Ne)ke["@id"]=null;else{if(!ne.isKeyword(Ne)&&Ne.match(I))return V.eventHandler&&$({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ne}},options:V}),void(Ce?b.mappings.set(C,Ce):b.mappings.delete(C));if(Ne!==C){if(Ne=X(b,Ne,{vocab:!0,base:!1},O,he,V),!F(Ne)&&!ne.isKeyword(Ne))throw new te("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});if(C.match(/(?::[^:])|\//)&&X(b,C,{vocab:!0,base:!1},O,new Map(he).set(C,!0),V)!==Ne)throw new te("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O});ke["@id"]=Ne,ke._prefix=Re&&!ke._termHasColon&&Ne.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ke))if(ke._termHasColon){const Ne=C.substr(0,qe);if(O.hasOwnProperty(Ne)&&ne.createTermDefinition({activeCtx:b,localCtx:O,term:Ne,defined:he,options:V}),b.mappings.has(Ne)){const Pe=C.substr(qe+1);ke["@id"]=b.mappings.get(Ne)["@id"]+Pe}else ke["@id"]=C}else if("@type"===C)ke["@id"]=C;else{if(!("@vocab"in b))throw new te("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:O,term:C});ke["@id"]=b["@vocab"]+C}if((!0===se["@protected"]||!0===he.get("@protected")&&!1!==se["@protected"])&&(b.protected[C]=!0,ke.protected=!0),he.set(C,!0),"@type"in se){let Ne=se["@type"];if(!_(Ne))throw new te("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:O});if("@json"===Ne||"@none"===Ne){if(ne.processingMode(b,1))throw new te(`Invalid JSON-LD syntax; an @context @type value must not be "${Ne}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:O})}else if("@id"!==Ne&&"@vocab"!==Ne){if(Ne=X(b,Ne,{vocab:!0,base:!1},O,he,V),!F(Ne))throw new te("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:O});if(0===Ne.indexOf("_:"))throw new te("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:O})}ke["@type"]=Ne}if("@container"in se){const Ne=_(se["@container"])?[se["@container"]]:se["@container"]||[],Pe=["@list","@set","@index","@language"];let He=!0;const pe=Ne.includes("@set");if(ne.processingMode(b,1.1)){if(Pe.push("@graph","@id","@type"),Ne.includes("@list")){if(1!==Ne.length)throw new te("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:O})}else if(Ne.includes("@graph")){if(Ne.some(Ae=>"@graph"!==Ae&&"@id"!==Ae&&"@index"!==Ae&&"@set"!==Ae))throw new te("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:O})}else He&=Ne.length<=(pe?2:1);if(Ne.includes("@type")&&(ke["@type"]=ke["@type"]||"@id",!["@id","@vocab"].includes(ke["@type"])))throw new te("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:O})}else He&=!U(se["@container"]),He&=Ne.length<=1;if(He&=Ne.every(Ae=>Pe.includes(Ae)),He&=!(pe&&Ne.includes("@list")),!He)throw new te("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Pe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:O});if(ke.reverse&&!Ne.every(Ae=>["@index","@set"].includes(Ae)))throw new te("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:O});ke["@container"]=Ne}if("@index"in se){if(!("@container"in se)||!ke["@container"].includes("@index"))throw new te(`Invalid JSON-LD syntax; @index without @index in @container: "${se["@index"]}" on term "${C}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:O});if(!_(se["@index"])||0===se["@index"].indexOf("@"))throw new te(`Invalid JSON-LD syntax; @index must expand to an IRI: "${se["@index"]}" on term "${C}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:O});ke["@index"]=se["@index"]}if("@context"in se&&(ke["@context"]=se["@context"]),"@language"in se&&!("@type"in se)){let Ne=se["@language"];if(null!==Ne&&!_(Ne))throw new te("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:O});null!==Ne&&(Ne=Ne.toLowerCase()),ke["@language"]=Ne}if("@prefix"in se){if(C.match(/:|\//))throw new te("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:O});if(ne.isKeyword(ke["@id"]))throw new te("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:O});if("boolean"!=typeof se["@prefix"])throw new te("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:O});ke._prefix=!0===se["@prefix"]}if("@direction"in se){const Ne=se["@direction"];if(null!==Ne&&"ltr"!==Ne&&"rtl"!==Ne)throw new te('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:O});ke["@direction"]=Ne}if("@nest"in se){const Ne=se["@nest"];if(!_(Ne)||"@nest"!==Ne&&0===Ne.indexOf("@"))throw new te("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:O});ke["@nest"]=Ne}const Ee=ke["@id"];if("@context"===Ee||"@preserve"===Ee)throw new te("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:O});if(Ce&&Ce.protected&&!Te&&(b.protected[C]=!0,ke.protected=!0,!B(Ce,ke)))throw new te("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:O,term:C})},ne.expandIri=(b,O,C,he)=>X(b,O,C,void 0,void 0,he),ne.getInitialContext=b=>{const O=JSON.stringify({processingMode:b.processingMode}),C=q.get(O);if(C)return C;const he={processingMode:b.processingMode,mappings:new Map,inverse:null,getInverse:function V(){const ke=this;if(ke.inverse)return ke.inverse;const et=ke.inverse={},qe=ke.fastCurieMap={},Ee={},Ne=(ke["@language"]||"@none").toLowerCase(),Pe=ke["@direction"],He=ke.mappings,pe=[...He.keys()].sort(ae);for(const Ae of pe){const Ye=He.get(Ae);if(null===Ye)continue;let st=Ye["@container"]||"@none";if(st=[].concat(st).sort().join(""),null===Ye["@id"])continue;const Ze=H(Ye["@id"]);for(const le of Ze){let N=et[le];const E=ne.isKeyword(le);if(N)!E&&!Ye._termHasColon&&Ee[le].push(Ae);else if(et[le]=N={},!E&&!Ye._termHasColon){Ee[le]=[Ae];const ie={iri:le,terms:Ee[le]};le[0]in qe?qe[le[0]].push(ie):qe[le[0]]=[ie]}if(N[st]||(N[st]={"@language":{},"@type":{},"@any":{}}),N=N[st],se(Ae,N["@any"],"@none"),Ye.reverse)se(Ae,N["@type"],"@reverse");else if("@none"===Ye["@type"])se(Ae,N["@any"],"@none"),se(Ae,N["@language"],"@none"),se(Ae,N["@type"],"@none");else if("@type"in Ye)se(Ae,N["@type"],Ye["@type"]);else if("@language"in Ye&&"@direction"in Ye){const ie=Ye["@language"],z=Ye["@direction"];se(Ae,N["@language"],ie&&z?`${ie}_${z}`.toLowerCase():ie?ie.toLowerCase():z?`_${z}`:"@null")}else"@language"in Ye?se(Ae,N["@language"],(Ye["@language"]||"@null").toLowerCase()):"@direction"in Ye?se(Ae,N["@language"],Ye["@direction"]?`_${Ye["@direction"]}`:"@none"):Pe?(se(Ae,N["@language"],`_${Pe}`),se(Ae,N["@language"],"@none"),se(Ae,N["@type"],"@none")):(se(Ae,N["@language"],Ne),se(Ae,N["@language"],"@none"),se(Ae,N["@type"],"@none"))}}for(const Ae in qe)Te(qe,Ae,1);return et},clone:function Ce(){const ke={};return ke.mappings=S.clone(this.mappings),ke.clone=this.clone,ke.inverse=null,ke.getInverse=this.getInverse,ke.protected=S.clone(this.protected),this.previousContext&&(ke.previousContext=this.previousContext.clone()),ke.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(ke["@base"]=this["@base"]),"@language"in this&&(ke["@language"]=this["@language"]),"@vocab"in this&&(ke["@vocab"]=this["@vocab"]),ke},revertToPreviousContext:function Re(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===q.size&&q.clear(),q.set(O,he),he;function Te(ke,et,qe){const Ee=ke[et],Ne=ke[et]={};let Pe,He;for(const pe of Ee)Pe=pe.iri,He=qe>=Pe.length?"":Pe[qe],He in Ne?Ne[He].push(pe):Ne[He]=[pe];for(const pe in Ne)""!==pe&&Te(Ne,pe,qe+1)}function se(ke,et,qe){et.hasOwnProperty(qe)||(et[qe]=ke)}},ne.getContextValue=(b,O,C)=>{if(null===O)return"@context"===C?void 0:null;if(b.mappings.has(O)){const he=b.mappings.get(O);if(x(C))return he;if(he.hasOwnProperty(C))return he[C]}return"@language"===C&&C in b||"@direction"===C&&C in b?b[C]:"@context"!==C?null:void 0},ne.processingMode=(b,O)=>O.toString()>="1.1"?!b.processingMode||b.processingMode>="json-ld-"+O.toString():"json-ld-1.0"===b.processingMode,ne.isKeyword=b=>{if(!_(b)||"@"!==b[0])return!1;switch(b){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const{parseLinkHeader:S,buildHeaders:te}=T(3521),{LINK_HEADER_CONTEXT:U}=T(6982),ee=T(1874),_=T(4044),{prependBase:x}=T(2651),F=/(^|(\r\n))link:/i;Ue.exports=({secure:R,headers:$={},xhr:de}={headers:{}})=>{return $=te($),(new _).wrapLoader(H);function H(q){return ae.apply(this,arguments)}function ae(){return ae=J(function*(q){if(0!==q.indexOf("http:")&&0!==q.indexOf("https:"))throw new ee('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:q});if(R&&0!==q.indexOf("https"))throw new ee('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:q});let oe;try{oe=yield function W(R,$,de){const I=new(R=R||XMLHttpRequest);return new Promise((H,ae)=>{I.onload=()=>H(I),I.onerror=q=>ae(q),I.open("GET",$,!0);for(const q in de)I.setRequestHeader(q,de[q]);I.send()})}(de,q,$)}catch(O){throw new ee("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:q,cause:O})}if(oe.status>=400)throw new ee("URL could not be dereferenced: "+oe.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:q,httpStatusCode:oe.status});let ne={contextUrl:null,documentUrl:q,document:oe.response},X=null;const B=oe.getResponseHeader("Content-Type");let b;if(F.test(oe.getAllResponseHeaders())&&(b=oe.getResponseHeader("Link")),b&&"application/ld+json"!==B){const O=S(b),C=O[U];if(Array.isArray(C))throw new ee("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:q});C&&(ne.contextUrl=C.target),X=O.alternate,X&&"application/ld+json"==X.type&&!(B||"").match(/^application\/(\w*\+)?json$/)&&(ne=yield H(x(q,X.target)))}return ne}),ae.apply(this,arguments)}}},3855:(Ue,_e,T)=>{"use strict";const J=T(1874),{isArray:S}=T(8254),{asArray:te}=T(3521),U={};function ee({event:x,handlers:F}){let W=!0;for(let R=0;W&&R<F.length;++R){W=!1;const $=F[R];if(S($))W=ee({event:x,handlers:$});else if("function"==typeof $)$({event:x,next:()=>{W=!0}});else{if("object"!=typeof $)throw new J("Invalid event handler.","jsonld.InvalidEventHandler",{event:x});x.code in $?$[x.code]({event:x,next:()=>{W=!0}}):W=!0}}return W}Ue.exports=U,U.defaultEventHandler=null,U.setupEventHandler=({options:x={}})=>{const F=[].concat(x.safe?U.safeEventHandler:[],x.eventHandler?te(x.eventHandler):[],U.defaultEventHandler?U.defaultEventHandler:[]);return 0===F.length?null:F},U.handleEvent=({event:x,options:F})=>{ee({event:x,handlers:F.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);U.safeEventHandler=function({event:F,next:W}){if("warning"===F.level&&_.has(F.code))throw new J("Safe mode validation error.","jsonld.ValidationError",{event:F});W()},U.logEventHandler=function({event:F,next:W}){console.log(`EVENT: ${F.message}`,{event:F}),W()},U.logWarningEventHandler=function({event:F,next:W}){"warning"===F.level&&console.warn(`WARNING: ${F.message}`,{event:F}),W()},U.unhandledEventHandler=function({event:F}){throw new J("No handler for event.","jsonld.UnhandledEvent",{event:F})},U.setDefaultEventHandler=function({eventHandler:x}={}){U.defaultEventHandler=x?te(x):null}},3860:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(1874),{isArray:te,isObject:U,isEmptyObject:ee,isString:_,isUndefined:x}=T(8254),{isList:F,isValue:W,isGraph:R,isSubject:$}=T(543),{expandIri:de,getContextValue:I,isKeyword:H,process:ae,processingMode:q}=T(9611),{isAbsolute:oe}=T(2651),{REGEX_BCP47:ne,REGEX_KEYWORD:X,addValue:B,asArray:b,getValues:O,validateTypeValue:C}=T(3521),{handleEvent:he}=T(3855),V={};function Te({value:Ee,count:Ne,options:Pe}){if(0===Ne||"@value"in Ee||"@list"in Ee||1===Ne&&"@id"in Ee){if(Pe.eventHandler){let He,pe;0===Ne?(He="empty object",pe="Dropping empty object."):"@value"in Ee?(He="object with only @value",pe="Dropping object with only @value."):"@list"in Ee?(He="object with only @list",pe="Dropping object with only @list."):1===Ne&&"@id"in Ee&&(He="object with only @id",pe="Dropping object with only @id."),he({event:{type:["JsonLdEvent"],code:He,level:"warning",message:pe,details:{value:Ee}},options:Pe})}return null}return Ee}function se(Ee){return Ce.apply(this,arguments)}function Ce(){return(Ce=J(function*({activeCtx:Ee,activeProperty:Ne,expandedActiveProperty:Pe,element:He,expandedParent:pe,options:Ae={},insideList:Ye,typeKey:st,typeScopedContext:Ze}){const le=Object.keys(He).sort(),N=[];let E;const ie=He[st]&&"@json"===de(Ee,te(He[st])?He[st][0]:He[st],{vocab:!0},{...Ae,typeExpansion:!0});for(const z of le){let tt,Se=He[z];if("@context"===z)continue;const ce=de(Ee,z,{vocab:!0},Ae);if(null===ce||!oe(ce)&&!H(ce)){Ae.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:z,expandedProperty:ce}},options:Ae});continue}if(H(ce)){if("@reverse"===Pe)throw new S("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Se});if(ce in pe&&"@included"!==ce&&"@type"!==ce)throw new S("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ce})}if("@id"===ce){if(!_(Se)){if(!Ae.isFrame)throw new S('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Se});if(U(Se)){if(!ee(Se))throw new S('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Se})}else{if(!te(Se))throw new S('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Se});if(!Se.every(M=>_(M)))throw new S('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Se})}}B(pe,"@id",b(Se).map(M=>{if(_(M)){const Q=de(Ee,M,{base:!0},Ae);return Ae.eventHandler&&(null===Q?he(null===M?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:M}},options:Ae}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:M}},options:Ae}):oe(Q)||he({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:M,expandedId:Q}},options:Ae})),Q}return M}),{propertyIsArray:Ae.isFrame});continue}if("@type"===ce){U(Se)&&(Se=Object.fromEntries(Object.entries(Se).map(([M,Q])=>[de(Ze,M,{vocab:!0}),b(Q).map(fe=>de(Ze,fe,{base:!0,vocab:!0},{...Ae,typeExpansion:!0}))]))),C(Se,Ae.isFrame),B(pe,"@type",b(Se).map(M=>{if(_(M)){const Q=de(Ze,M,{base:!0,vocab:!0},{...Ae,typeExpansion:!0});return"@json"!==Q&&!oe(Q)&&Ae.eventHandler&&he({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:M}},options:Ae}),Q}return M}),{propertyIsArray:!!Ae.isFrame});continue}if("@included"===ce&&q(Ee,1.1)){const M=b(yield V.expand({activeCtx:Ee,activeProperty:Ne,element:Se,options:Ae}));if(!M.every(Q=>$(Q)))throw new S("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Se});B(pe,"@included",M,{propertyIsArray:!0});continue}if("@graph"===ce&&!U(Se)&&!te(Se))throw new S('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Se});if("@value"===ce){E=Se,ie&&q(Ee,1.1)?pe["@value"]=Se:B(pe,"@value",Se,{propertyIsArray:Ae.isFrame});continue}if("@language"===ce){if(null===Se)continue;if(!_(Se)&&!Ae.isFrame)throw new S('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Se});Se=b(Se).map(M=>_(M)?M.toLowerCase():M);for(const M of Se)_(M)&&!M.match(ne)&&Ae.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:M}},options:Ae});B(pe,"@language",Se,{propertyIsArray:Ae.isFrame});continue}if("@direction"===ce){if(!_(Se)&&!Ae.isFrame)throw new S('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Se});Se=b(Se);for(const M of Se)if(_(M)&&"ltr"!==M&&"rtl"!==M)throw new S('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Se});B(pe,"@direction",Se,{propertyIsArray:Ae.isFrame});continue}if("@index"===ce){if(!_(Se))throw new S('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Se});B(pe,"@index",Se);continue}if("@reverse"===ce){if(!U(Se))throw new S('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Se});if(tt=yield V.expand({activeCtx:Ee,activeProperty:"@reverse",element:Se,options:Ae}),"@reverse"in tt)for(const Q in tt["@reverse"])B(pe,Q,tt["@reverse"][Q],{propertyIsArray:!0});let M=pe["@reverse"]||null;for(const Q in tt){if("@reverse"===Q)continue;null===M&&(M=pe["@reverse"]={}),B(M,Q,[],{propertyIsArray:!0});const fe=tt[Q];for(let ze=0;ze<fe.length;++ze){const Xe=fe[ze];if(W(Xe)||F(Xe))throw new S('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:tt});B(M,Q,Xe,{propertyIsArray:!0})}}continue}if("@nest"===ce){N.push(z);continue}let Z=Ee;const L=I(Ee,z,"@context");x(L)||(Z=yield ae({activeCtx:Ee,localCtx:L,propagate:!0,overrideProtected:!0,options:Ae}));const w=I(Z,z,"@container")||[];if(w.includes("@language")&&U(Se))tt=ke(Z,Se,I(Z,z,"@direction"),Ae);else if(w.includes("@index")&&U(Se)){const M=w.includes("@graph"),Q=I(Z,z,"@index")||"@index",fe="@index"!==Q&&de(Ee,Q,{vocab:!0},Ae);tt=yield et({activeCtx:Z,options:Ae,activeProperty:z,value:Se,asGraph:M,indexKey:Q,propertyIndex:fe})}else if(w.includes("@id")&&U(Se)){const M=w.includes("@graph");tt=yield et({activeCtx:Z,options:Ae,activeProperty:z,value:Se,asGraph:M,indexKey:"@id"})}else if(w.includes("@type")&&U(Se))tt=yield et({activeCtx:Z.revertToPreviousContext(),options:Ae,activeProperty:z,value:Se,asGraph:!1,indexKey:"@type"});else{const M="@list"===ce;if(M||"@set"===ce){let Q=Ne;M&&"@graph"===Pe&&(Q=null),tt=yield V.expand({activeCtx:Z,activeProperty:Q,element:Se,options:Ae,insideList:M})}else tt="@json"===I(Ee,z,"@type")?{"@type":"@json","@value":Se}:yield V.expand({activeCtx:Z,activeProperty:z,element:Se,options:Ae,insideList:!1})}if(null!==tt||"@value"===ce){if("@list"!==ce&&!F(tt)&&w.includes("@list")&&(tt={"@list":b(tt)}),w.includes("@graph")&&!w.some(M=>"@id"===M||"@index"===M)){tt=b(tt);const M=Object.keys(tt[0]).length;if(!Ae.isFrame&&null===Te({value:tt[0],count:M,options:Ae}))continue;tt=tt.map(Q=>({"@graph":b(Q)}))}if(Z.mappings.has(z)&&Z.mappings.get(z).reverse){const M=pe["@reverse"]=pe["@reverse"]||{};tt=b(tt);for(let Q=0;Q<tt.length;++Q){const fe=tt[Q];if(W(fe)||F(fe))throw new S('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:tt});B(M,ce,fe,{propertyIsArray:!0})}continue}B(pe,ce,tt,{propertyIsArray:!0})}}if("@value"in pe&&("@json"!==pe["@type"]||!q(Ee,1.1))&&(U(E)||te(E))&&!Ae.isFrame)throw new S('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:E});for(const z of N){const Se=te(He[z])?He[z]:[He[z]];for(const tt of Se){if(!U(tt)||Object.keys(tt).some(ce=>"@value"===de(Ee,ce,{vocab:!0},Ae)))throw new S("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:tt});yield se({activeCtx:Ee,activeProperty:Ne,expandedActiveProperty:Pe,element:tt,expandedParent:pe,options:Ae,insideList:Ye,typeScopedContext:Ze,typeKey:st})}}})).apply(this,arguments)}function Re({activeCtx:Ee,activeProperty:Ne,value:Pe,options:He}){if(null==Pe)return null;const pe=de(Ee,Ne,{vocab:!0},He);if("@id"===pe)return de(Ee,Pe,{base:!0},He);if("@type"===pe)return de(Ee,Pe,{vocab:!0,base:!0},{...He,typeExpansion:!0});const Ae=I(Ee,Ne,"@type");if(("@id"===Ae||"@graph"===pe)&&_(Pe)){const st=de(Ee,Pe,{base:!0},He);return null===st&&Pe.match(X)&&He.eventHandler&&he({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ne}},options:He}),{"@id":st}}if("@vocab"===Ae&&_(Pe))return{"@id":de(Ee,Pe,{vocab:!0,base:!0},He)};if(H(pe))return Pe;const Ye={};if(Ae&&!["@id","@vocab","@none"].includes(Ae))Ye["@type"]=Ae;else if(_(Pe)){const st=I(Ee,Ne,"@language");null!==st&&(Ye["@language"]=st);const Ze=I(Ee,Ne,"@direction");null!==Ze&&(Ye["@direction"]=Ze)}return["boolean","number","string"].includes(typeof Pe)||(Pe=Pe.toString()),Ye["@value"]=Pe,Ye}function ke(Ee,Ne,Pe,He){const pe=[],Ae=Object.keys(Ne).sort();for(const Ye of Ae){const st=de(Ee,Ye,{vocab:!0},He);let Ze=Ne[Ye];te(Ze)||(Ze=[Ze]);for(const le of Ze){if(null===le)continue;if(!_(le))throw new S("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ne});const N={"@value":le};"@none"!==st&&(Ye.match(ne)||He.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ye}},options:He}),N["@language"]=Ye.toLowerCase()),Pe&&(N["@direction"]=Pe),pe.push(N)}}return pe}function et(Ee){return qe.apply(this,arguments)}function qe(){return(qe=J(function*({activeCtx:Ee,options:Ne,activeProperty:Pe,value:He,asGraph:pe,indexKey:Ae,propertyIndex:Ye}){const st=[],Ze=Object.keys(He).sort(),le="@type"===Ae;for(let N of Ze){if(le){const z=I(Ee,N,"@context");x(z)||(Ee=yield ae({activeCtx:Ee,localCtx:z,propagate:!1,options:Ne}))}let ie,E=He[N];te(E)||(E=[E]),E=yield V.expand({activeCtx:Ee,activeProperty:Pe,element:E,options:Ne,insideList:!1,insideIndex:!0}),ie=Ye?"@none"===N?"@none":Re({activeCtx:Ee,activeProperty:Ae,value:N,options:Ne}):de(Ee,N,{vocab:!0},Ne),"@id"===Ae?N=de(Ee,N,{base:!0},Ne):le&&(N=ie);for(let z of E){if(pe&&!R(z)&&(z={"@graph":[z]}),"@type"===Ae)"@none"===ie||(z["@type"]=z["@type"]?[N].concat(z["@type"]):[N]);else{if(W(z)&&!["@language","@type","@index"].includes(Ae))throw new S(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ae}".`,"jsonld.SyntaxError",{code:"invalid value object",value:z});Ye?"@none"!==ie&&B(z,Ye,ie,{propertyIsArray:!0,prependValue:!0}):"@none"!==ie&&!(Ae in z)&&(z[Ae]=N)}st.push(z)}}return st})).apply(this,arguments)}Ue.exports=V,V.expand=function(){var Ee=J(function*({activeCtx:Ne,activeProperty:Pe=null,element:He,options:pe={},insideList:Ae=!1,insideIndex:Ye=!1,typeScopedContext:st=null}){if(null==He)return null;if("@default"===Pe&&(pe=Object.assign({},pe,{isFrame:!1})),!te(He)&&!U(He))return Ae||null!==Pe&&"@graph"!==de(Ne,Pe,{vocab:!0},pe)?Re({activeCtx:Ne,activeProperty:Pe,value:He,options:pe}):(pe.eventHandler&&he({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:He}},options:pe}),null);if(te(He)){let tt=[];const ce=I(Ne,Pe,"@container")||[];Ae=Ae||ce.includes("@list");for(let Z=0;Z<He.length;++Z){let L=yield V.expand({activeCtx:Ne,activeProperty:Pe,element:He[Z],options:pe,insideIndex:Ye,typeScopedContext:st});Ae&&te(L)&&(L={"@list":L}),null!==L&&(te(L)?tt=tt.concat(L):tt.push(L))}return tt}const Ze=de(Ne,Pe,{vocab:!0},pe),le=I(Ne,Pe,"@context");st=st||(Ne.previousContext?Ne:null);let N=Object.keys(He).sort(),E=!Ye;if(E&&st&&N.length<=2&&!N.includes("@context"))for(const tt of N){const ce=de(st,tt,{vocab:!0},pe);if("@value"===ce){E=!1,Ne=st;break}if("@id"===ce&&1===N.length){E=!1;break}}E&&(Ne=Ne.revertToPreviousContext()),x(le)||(Ne=yield ae({activeCtx:Ne,localCtx:le,propagate:!0,overrideProtected:!0,options:pe})),"@context"in He&&(Ne=yield ae({activeCtx:Ne,localCtx:He["@context"],options:pe})),st=Ne;let ie=null;for(const tt of N)if("@type"===de(Ne,tt,{vocab:!0},pe)){ie=ie||tt;const Z=He[tt],L=Array.isArray(Z)?Z.length>1?Z.slice().sort():Z:[Z];for(const w of L){const M=I(st,w,"@context");x(M)||(Ne=yield ae({activeCtx:Ne,localCtx:M,options:pe,propagate:!1}))}}let z={};yield se({activeCtx:Ne,activeProperty:Pe,expandedActiveProperty:Ze,element:He,expandedParent:z,options:pe,insideList:Ae,typeKey:ie,typeScopedContext:st}),N=Object.keys(z);let Se=N.length;if("@value"in z){if("@type"in z&&("@language"in z||"@direction"in z))throw new S('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:z});let tt=Se-1;if("@type"in z&&(tt-=1),"@index"in z&&(tt-=1),"@language"in z&&(tt-=1),"@direction"in z&&(tt-=1),0!==tt)throw new S('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:z});const ce=null===z["@value"]?[]:b(z["@value"]),Z=O(z,"@type");if(!q(Ne,1.1)||!Z.includes("@json")||1!==Z.length)if(0===ce.length)pe.eventHandler&&he({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:z}},options:pe}),z=null;else{if(!ce.every(L=>_(L)||ee(L))&&"@language"in z)throw new S("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:z});if(!Z.every(L=>oe(L)&&!(_(L)&&0===L.indexOf("_:"))||ee(L)))throw new S('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:z})}}else if("@type"in z&&!te(z["@type"]))z["@type"]=[z["@type"]];else if("@set"in z||"@list"in z){if(Se>1&&(2!==Se||!("@index"in z)))throw new S('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:z});"@set"in z&&(z=z["@set"],N=Object.keys(z),Se=N.length)}else 1===Se&&"@language"in z&&(pe.eventHandler&&he({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:z}},options:pe}),z=null);return U(z)&&!pe.keepFreeFloatingNodes&&!Ae&&(null===Pe||"@graph"===Ze||(I(Ne,Pe,"@container")||[]).includes("@graph"))&&(z=Te({value:z,count:Se,options:pe})),z});return function(Ne){return Ee.apply(this,arguments)}}()},8295:(Ue,_e,T)=>{"use strict";const{isSubjectReference:J}=T(543),{createMergedNodeMap:S}=T(9783),te={};Ue.exports=te,te.flatten=U=>{const ee=S(U),_=[],x=Object.keys(ee).sort();for(let F=0;F<x.length;++F){const W=ee[x[F]];J(W)||_.push(W)}return _}},9193:(Ue,_e,T)=>{"use strict";const{isKeyword:J}=T(9611),S=T(543),te=T(8254),U=T(3521),ee=T(2651),_=T(1874),{createNodeMap:x,mergeNodeMapGraphs:F}=T(9783),W={};function R(b){const O={};for(const C in b)void 0!==b[C]&&(O["@"+C]=[b[C]]);return[O]}function $(b,O,C){for(let he=C.length-1;he>=0;--he){const V=C[he];if(V.graph===O&&V.subject["@id"]===b["@id"])return!0}return!1}function de(b,O,C){const he="@"+C;let V=he in b?b[he][0]:O[C];if("embed"===C)if(!0===V)V="@once";else if(!1===V)V="@never";else if("@always"!==V&&"@never"!==V&&"@link"!==V&&"@first"!==V&&"@last"!==V&&"@once"!==V)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:b});return V}function I(b){if(!te.isArray(b)||1!==b.length||!te.isObject(b[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:b});if("@id"in b[0])for(const O of U.asArray(b[0]["@id"]))if(!te.isObject(O)&&!ee.isAbsolute(O)||te.isString(O)&&0===O.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:b});if("@type"in b[0])for(const O of U.asArray(b[0]["@type"]))if(!te.isObject(O)&&!ee.isAbsolute(O)&&"@json"!==O||te.isString(O)&&0===O.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:b})}function ae(b,O,C,he){let V=!0,Te=!1;for(const se in C){let Ce=!1;const Re=U.getValues(O,se),ke=0===U.getValues(C,se).length;if("@id"===se){if(te.isEmptyObject(C["@id"][0]||{})?Ce=!0:C["@id"].length>=0&&(Ce=C["@id"].includes(Re[0])),!he.requireAll)return Ce}else if("@type"===se){if(V=!1,ke){if(Re.length>0)return!1;Ce=!0}else if(1===C["@type"].length&&te.isEmptyObject(C["@type"][0]))Ce=Re.length>0;else for(const et of C["@type"])Ce=!(!te.isObject(et)||!("@default"in et))||Ce||Re.some(qe=>qe===et);if(!he.requireAll)return Ce}else{if(J(se))continue;{const et=U.getValues(C,se)[0];let qe=!1;if(et&&(I([et]),qe="@default"in et),V=!1,0===Re.length&&qe)continue;if(Re.length>0&&ke)return!1;if(void 0===et){if(Re.length>0)return!1;Ce=!0}else if(S.isList(et)){const Ee=et["@list"][0];if(S.isList(Re[0])){const Ne=Re[0]["@list"];S.isValue(Ee)?Ce=Ne.some(Pe=>B(Ee,Pe)):(S.isSubject(Ee)||S.isSubjectReference(Ee))&&(Ce=Ne.some(Pe=>X(b,Ee,Pe,he)))}}else Ce=S.isValue(et)?Re.some(Ee=>B(et,Ee)):S.isSubjectReference(et)?Re.some(Ee=>X(b,et,Ee,he)):!!te.isObject(et)&&Re.length>0}}if(!Ce&&he.requireAll)return!1;Te=Te||Ce}return V||Te}function q(b,O){const C=b.uniqueEmbeds[b.graph],he=C[O],V=he.parent,Te=he.property,se={"@id":O};if(te.isArray(V)){for(let Re=0;Re<V.length;++Re)if(U.compareValues(V[Re],se)){V[Re]=se;break}}else{const Re=te.isArray(V[Te]);U.removeValue(V,Te,se,{propertyIsArray:Re}),U.addValue(V,Te,se,{propertyIsArray:Re})}const Ce=Re=>{const ke=Object.keys(C);for(const et of ke)et in C&&te.isObject(C[et].parent)&&C[et].parent["@id"]===Re&&(delete C[et],Ce(et))};Ce(O)}function oe(b,O){if(te.isArray(b))return b.map(C=>oe(C,O));if(te.isObject(b)){if("@preserve"in b)return b["@preserve"][0];if(S.isValue(b))return b;if(S.isList(b))return b["@list"]=oe(b["@list"],O),b;if("@id"in b){const C=b["@id"];if(O.link.hasOwnProperty(C)){const he=O.link[C].indexOf(b);if(-1!==he)return O.link[C][he];O.link[C].push(b)}else O.link[C]=[b]}for(const C in b)"@id"===C&&O.bnodesToClear.includes(b[C])?delete b["@id"]:b[C]=oe(b[C],O)}return b}function ne(b,O,C){te.isObject(b)?U.addValue(b,O,C,{propertyIsArray:!0}):b.push(C)}function X(b,O,C,he){if(!("@id"in C))return!1;const V=b.subjects[C["@id"]];return V&&ae(b,V,O,he)}function B(b,O){const C=O["@value"],he=O["@type"],V=O["@language"],Te=b["@value"]?te.isArray(b["@value"])?b["@value"]:[b["@value"]]:[],se=b["@type"]?te.isArray(b["@type"])?b["@type"]:[b["@type"]]:[],Ce=b["@language"]?te.isArray(b["@language"])?b["@language"]:[b["@language"]]:[];return 0===Te.length&&0===se.length&&0===Ce.length||!(!Te.includes(C)&&!te.isEmptyObject(Te[0])||!(!he&&0===se.length||se.includes(he)||he&&te.isEmptyObject(se[0]))||!(!V&&0===Ce.length||Ce.includes(V)||V&&te.isEmptyObject(Ce[0])))}Ue.exports=W,W.frameMergedOrDefault=(b,O,C)=>{const he={options:C,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},V=new U.IdentifierIssuer("_:b");x(b,he.graphMap,"@default",V),C.merged&&(he.graphMap["@merged"]=F(he.graphMap),he.graph="@merged"),he.subjects=he.graphMap[he.graph];const Te=[];return W.frame(he,Object.keys(he.subjects).sort(),O,Te),C.pruneBlankNodeIdentifiers&&(C.bnodesToClear=Object.keys(he.bnodeMap).filter(se=>1===he.bnodeMap[se].length)),C.link={},oe(Te,C)},W.frame=(b,O,C,he,V=null)=>{I(C);const Te=b.options,se={embed:de(C=C[0],Te,"embed"),explicit:de(C,Te,"explicit"),requireAll:de(C,Te,"requireAll")};b.link.hasOwnProperty(b.graph)||(b.link[b.graph]={});const Ce=b.link[b.graph],Re=function H(b,O,C,he){const V={};for(const Te of O){const se=b.graphMap[b.graph][Te];ae(b,se,C,he)&&(V[Te]=se)}return V}(b,O,C,se),ke=Object.keys(Re).sort();for(const et of ke){const qe=Re[et];if(null===V?b.uniqueEmbeds={[b.graph]:{}}:b.uniqueEmbeds[b.graph]=b.uniqueEmbeds[b.graph]||{},"@link"===se.embed&&et in Ce){ne(he,V,Ce[et]);continue}const Ee={"@id":et};if(0===et.indexOf("_:")&&U.addValue(b.bnodeMap,et,Ee,{propertyIsArray:!0}),Ce[et]=Ee,("@first"===se.embed||"@last"===se.embed)&&b.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:C});if(b.embedded||!b.uniqueEmbeds[b.graph].hasOwnProperty(et)){if(b.embedded&&("@never"===se.embed||$(qe,b.graph,b.subjectStack))){ne(he,V,Ee);continue}if(b.embedded&&("@first"==se.embed||"@once"==se.embed)&&b.uniqueEmbeds[b.graph].hasOwnProperty(et)){ne(he,V,Ee);continue}if("@last"===se.embed&&et in b.uniqueEmbeds[b.graph]&&q(b,et),b.uniqueEmbeds[b.graph][et]={parent:he,property:V},b.subjectStack.push({subject:qe,graph:b.graph}),et in b.graphMap){let Ne=!1,Pe=null;"@graph"in C?(Pe=C["@graph"][0],Ne=!("@merged"===et||"@default"===et),te.isObject(Pe)||(Pe={})):(Ne="@merged"!==b.graph,Pe={}),Ne&&W.frame({...b,graph:et,embedded:!1},Object.keys(b.graphMap[et]).sort(),[Pe],Ee,"@graph")}"@included"in C&&W.frame({...b,embedded:!1},O,C["@included"],Ee,"@included");for(const Ne of Object.keys(qe).sort())if(J(Ne)){if(Ee[Ne]=U.clone(qe[Ne]),"@type"===Ne)for(const Pe of qe["@type"])0===Pe.indexOf("_:")&&U.addValue(b.bnodeMap,Pe,Ee,{propertyIsArray:!0})}else if(!se.explicit||Ne in C)for(const Pe of qe[Ne]){const He=Ne in C?C[Ne]:R(se);if(S.isList(Pe)){const pe=C[Ne]&&C[Ne][0]&&C[Ne][0]["@list"]?C[Ne][0]["@list"]:R(se),Ae={"@list":[]};ne(Ee,Ne,Ae);const Ye=Pe["@list"];for(const st of Ye)S.isSubjectReference(st)?W.frame({...b,embedded:!0},[st["@id"]],pe,Ae,"@list"):ne(Ae,"@list",U.clone(st))}else S.isSubjectReference(Pe)?W.frame({...b,embedded:!0},[Pe["@id"]],He,Ee,Ne):B(He[0],Pe)&&ne(Ee,Ne,U.clone(Pe))}for(const Ne of Object.keys(C).sort()){if("@type"===Ne){if(!te.isObject(C[Ne][0])||!("@default"in C[Ne][0]))continue}else if(J(Ne))continue;const Pe=C[Ne][0]||{};if(!de(Pe,Te,"omitDefault")&&!(Ne in Ee)){let pe="@null";"@default"in Pe&&(pe=U.clone(Pe["@default"])),te.isArray(pe)||(pe=[pe]),Ee[Ne]=[{"@preserve":pe}]}}for(const Ne of Object.keys(C["@reverse"]||{}).sort()){const Pe=C["@reverse"][Ne];for(const He of Object.keys(b.subjects))U.getValues(b.subjects[He],Ne).some(Ae=>Ae["@id"]===et)&&(Ee["@reverse"]=Ee["@reverse"]||{},U.addValue(Ee["@reverse"],Ne,[],{propertyIsArray:!0}),W.frame({...b,embedded:!0},[He],Pe,Ee["@reverse"][Ne],V))}ne(he,V,Ee),b.subjectStack.pop()}}},W.cleanupNull=(b,O)=>{if(te.isArray(b))return b.map(he=>W.cleanupNull(he,O)).filter(he=>he);if("@null"===b)return null;if(te.isObject(b)){if("@id"in b){const C=b["@id"];if(O.link.hasOwnProperty(C)){const he=O.link[C].indexOf(b);if(-1!==he)return O.link[C][he];O.link[C].push(b)}else O.link[C]=[b]}for(const C in b)b[C]=W.cleanupNull(b[C],O)}return b}},9767:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(1874),te=T(543),U=T(8254),{REGEX_BCP47:ee,addValue:_}=T(3521),{handleEvent:x}=T(3855),{RDF_LIST:F,RDF_FIRST:W,RDF_REST:R,RDF_NIL:$,RDF_TYPE:de,RDF_JSON_LITERAL:I,XSD_BOOLEAN:H,XSD_DOUBLE:ae,XSD_INTEGER:q,XSD_STRING:oe}=T(6982),ne={};function X(B,b,O,C){if(B.termType.endsWith("Node"))return{"@id":B.value};const he={"@value":B.value};if(B.language)B.language.match(ee)||C.eventHandler&&x({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:B.language}},options:C}),he["@language"]=B.language;else{let V=B.datatype.value;if(V||(V=oe),V===I){V="@json";try{he["@value"]=JSON.parse(he["@value"])}catch(Te){throw new S("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:he["@value"],cause:Te})}}if(b){if(V===H)"true"===he["@value"]?he["@value"]=!0:"false"===he["@value"]&&(he["@value"]=!1);else if(U.isNumeric(he["@value"]))if(V===q){const Te=parseInt(he["@value"],10);Te.toFixed(0)===he["@value"]&&(he["@value"]=Te)}else V===ae&&(he["@value"]=parseFloat(he["@value"]));[H,q,ae,oe].includes(V)||(he["@type"]=V)}else if("i18n-datatype"===O&&V.startsWith("https://www.w3.org/ns/i18n#")){const[,Te,se]=V.split(/[#_]/);Te.length>0&&(he["@language"]=Te,Te.match(ee)||C.eventHandler&&x({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Te}},options:C})),he["@direction"]=se}else V!==oe&&(he["@type"]=V)}return he}Ue.exports=ne,ne.fromRDF=function(){var B=J(function*(b,O){const C={},he={"@default":C},V={},{useRdfType:Te=!1,useNativeTypes:se=!1,rdfDirection:Ce=null}=O;for(const et of b){const qe="DefaultGraph"===et.graph.termType?"@default":et.graph.value;qe in he||(he[qe]={}),"@default"!==qe&&!(qe in C)&&(C[qe]={"@id":qe});const Ee=he[qe],Ne=et.subject.value,Pe=et.predicate.value,He=et.object;Ne in Ee||(Ee[Ne]={"@id":Ne});const pe=Ee[Ne],Ae=He.termType.endsWith("Node");if(Ae&&!(He.value in Ee)&&(Ee[He.value]={"@id":He.value}),Pe===de&&!Te&&Ae){_(pe,"@type",He.value,{propertyIsArray:!0});continue}const Ye=X(He,se,Ce,O);if(_(pe,Pe,Ye,{propertyIsArray:!0}),Ae)if(He.value===$){const st=Ee[He.value];"usages"in st||(st.usages=[]),st.usages.push({node:pe,property:Pe,value:Ye})}else V[He.value]=!(He.value in V)&&{node:pe,property:Pe,value:Ye}}for(const et in he){const qe=he[et];if(!($ in qe))continue;const Ee=qe[$];if(Ee.usages){for(let Ne of Ee.usages){let Pe=Ne.node,He=Ne.property,pe=Ne.value;const Ae=[],Ye=[];let st=Object.keys(Pe).length;for(;He===R&&U.isObject(V[Pe["@id"]])&&U.isArray(Pe[W])&&1===Pe[W].length&&U.isArray(Pe[R])&&1===Pe[R].length&&(3===st||4===st&&U.isArray(Pe["@type"])&&1===Pe["@type"].length&&Pe["@type"][0]===F)&&(Ae.push(Pe[W][0]),Ye.push(Pe["@id"]),Ne=V[Pe["@id"]],Pe=Ne.node,He=Ne.property,pe=Ne.value,st=Object.keys(Pe).length,te.isBlankNode(Pe)););delete pe["@id"],pe["@list"]=Ae.reverse();for(const Ze of Ye)delete qe[Ze]}delete Ee.usages}}const Re=[],ke=Object.keys(C).sort();for(const et of ke){const qe=C[et];if(et in he){const Ee=qe["@graph"]=[],Ne=he[et],Pe=Object.keys(Ne).sort();for(const He of Pe){const pe=Ne[He];te.isSubjectReference(pe)||Ee.push(pe)}}te.isSubjectReference(qe)||Re.push(qe)}return Re});return function(b,O){return B.apply(this,arguments)}}()},543:(Ue,_e,T)=>{"use strict";const J=T(8254),S={};Ue.exports=S,S.isSubject=te=>!(!J.isObject(te)||"@value"in te||"@set"in te||"@list"in te)&&(Object.keys(te).length>1||!("@id"in te)),S.isSubjectReference=te=>J.isObject(te)&&1===Object.keys(te).length&&"@id"in te,S.isValue=te=>J.isObject(te)&&"@value"in te,S.isList=te=>J.isObject(te)&&"@list"in te,S.isGraph=te=>J.isObject(te)&&"@graph"in te&&1===Object.keys(te).filter(U=>"@id"!==U&&"@index"!==U).length,S.isSimpleGraph=te=>S.isGraph(te)&&!("@id"in te),S.isBlankNode=te=>{if(J.isObject(te)){if("@id"in te){const U=te["@id"];return!J.isString(U)||0===U.indexOf("_:")}return 0===Object.keys(te).length||!("@value"in te||"@set"in te||"@list"in te)}return!1}},7661:(Ue,_e,T)=>{var J=T(7156).default;const S=T(1986),te=T(8924),U=T(3521),ee=T(4198),_=U.IdentifierIssuer,x=T(1874),F=T(1072),W=T(7260),{expand:R}=T(3860),{flatten:$}=T(8295),{fromRDF:de}=T(9767),{toRDF:I}=T(240),{frameMergedOrDefault:H,cleanupNull:ae}=T(9193),{isArray:q,isObject:oe,isString:ne}=T(8254),{isSubjectReference:X}=T(543),{expandIri:B,getInitialContext:b,process:O,processingMode:C}=T(9611),{compact:he,compactIri:V}=T(8809),{createNodeMap:Te,createMergedNodeMap:se,mergeNodeMaps:Ce}=T(9783),{logEventHandler:Re,logWarningEventHandler:ke,safeEventHandler:et,setDefaultEventHandler:qe,setupEventHandler:Ee,strictEventHandler:Ne,unhandledEventHandler:Pe}=T(3855),He=function(Ae){const Ye={},Ze=new F({max:100});function le(N,{documentLoader:E=Ae.documentLoader,...ie}){if(N&&"compactionMap"in N)throw new x('"compactionMap" not supported.',"jsonld.OptionsError");if(N&&"expansionMap"in N)throw new x('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:E},ie,N,{eventHandler:Ee({options:N})})}return Ae.compact=function(){var N=J(function*(E,ie,z){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ie)throw new x("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===E)return null;let Se;(z=le(z,{base:ne(E)?E:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new ee({sharedCache:Ze})})).link&&(z.skipExpansion=!0),z.compactToRelative||delete z.base,Se=z.skipExpansion?E:yield Ae.expand(E,z);const tt=yield Ae.processContext(b(z),ie,z);let ce=yield he({activeCtx:tt,element:Se,options:z});z.compactArrays&&!z.graph&&q(ce)?1===ce.length?ce=ce[0]:0===ce.length&&(ce={}):z.graph&&oe(ce)&&(ce=[ce]),oe(ie)&&"@context"in ie&&(ie=ie["@context"]),ie=U.clone(ie),q(ie)||(ie=[ie]);const Z=ie;ie=[];for(let w=0;w<Z.length;++w)(!oe(Z[w])||Object.keys(Z[w]).length>0)&&ie.push(Z[w]);const L=ie.length>0;if(1===ie.length&&(ie=ie[0]),q(ce)){const w=V({activeCtx:tt,iri:"@graph",relativeTo:{vocab:!0}}),M=ce;ce={},L&&(ce["@context"]=ie),ce[w]=M}else if(oe(ce)&&L){const w=ce;ce={"@context":ie};for(const M in w)ce[M]=w[M]}return ce});return function(E,ie,z){return N.apply(this,arguments)}}(),Ae.expand=function(){var N=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const z={},Se=[];if("expandContext"in(ie=le(ie,{keepFreeFloatingNodes:!1,contextResolver:new ee({sharedCache:Ze})}))){const L=U.clone(ie.expandContext);z.expandContext=oe(L)&&"@context"in L?L:{"@context":L},Se.push(z.expandContext)}let tt;if(ne(E)){const L=yield Ae.get(E,ie);tt=L.documentUrl,z.input=L.document,L.contextUrl&&(z.remoteContext={"@context":L.contextUrl},Se.push(z.remoteContext))}else z.input=U.clone(E);"base"in ie||(ie.base=tt||"");let ce=b(ie);for(const L of Se)ce=yield O({activeCtx:ce,localCtx:L,options:ie});let Z=yield R({activeCtx:ce,element:z.input,options:ie});return oe(Z)&&"@graph"in Z&&1===Object.keys(Z).length?Z=Z["@graph"]:null===Z&&(Z=[]),q(Z)||(Z=[Z]),Z});return function(E,ie){return N.apply(this,arguments)}}(),Ae.flatten=function(){var N=J(function*(E,ie,z){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ie="function"==typeof ie?null:ie||null,z=le(z,{base:ne(E)?E:"",contextResolver:new ee({sharedCache:Ze})});const Se=yield Ae.expand(E,z),tt=$(Se);return null===ie?tt:(z.graph=!0,z.skipExpansion=!0,yield Ae.compact(tt,ie,z))});return function(E,ie,z){return N.apply(this,arguments)}}(),Ae.frame=function(){var N=J(function*(E,ie,z){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(z=le(z,{base:ne(E)?E:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ee({sharedCache:Ze})}),ne(ie)){const fe=yield Ae.get(ie,z);if(ie=fe.document,fe.contextUrl){let ze=ie["@context"];ze?q(ze)?ze.push(fe.contextUrl):ze=[ze,fe.contextUrl]:ze=fe.contextUrl,ie["@context"]=ze}}const Se=ie&&ie["@context"]||{},tt=yield Ae.processContext(b(z),Se,z);z.hasOwnProperty("omitGraph")||(z.omitGraph=C(tt,1.1)),z.hasOwnProperty("pruneBlankNodeIdentifiers")||(z.pruneBlankNodeIdentifiers=C(tt,1.1));const ce=yield Ae.expand(E,z),Z={...z};Z.isFrame=!0,Z.keepFreeFloatingNodes=!0;const L=yield Ae.expand(ie,Z),w=Object.keys(ie).map(fe=>B(tt,fe,{vocab:!0}));Z.merged=!w.includes("@graph"),Z.is11=C(tt,1.1);const M=H(ce,L,Z);Z.graph=!z.omitGraph,Z.skipExpansion=!0,Z.link={},Z.framing=!0;let Q=yield Ae.compact(M,Se,Z);return Z.link={},Q=ae(Q,Z),Q});return function(E,ie,z){return N.apply(this,arguments)}}(),Ae.link=function(){var N=J(function*(E,ie,z){const Se={};return ie&&(Se["@context"]=ie),Se["@embed"]="@link",Ae.frame(E,Se,z)});return function(E,ie,z){return N.apply(this,arguments)}}(),Ae.normalize=Ae.canonize=function(){var N=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ie=le(ie,{base:ne(E)?E:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new ee({sharedCache:Ze})}))){if("application/n-quads"!==ie.inputFormat&&"application/nquads"!==ie.inputFormat)throw new x("Unknown canonicalization input format.","jsonld.CanonizeError");const tt=W.parse(E);return S.canonize(tt,ie)}const z={...ie};delete z.format,z.produceGeneralizedRdf=!1;const Se=yield Ae.toRDF(E,z);return S.canonize(Se,ie)});return function(E,ie){return N.apply(this,arguments)}}(),Ae.fromRDF=function(){var N=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ie=le(ie,{format:ne(E)?"application/n-quads":void 0});const{format:z}=ie;let{rdfParser:Se}=ie;if(z){if(Se=Se||Ye[z],!Se)throw new x("Unknown input format.","jsonld.UnknownFormat",{format:z})}else Se=()=>E;const tt=yield Se(E);return de(tt,ie)});return function(E,ie){return N.apply(this,arguments)}}(),Ae.toRDF=function(){var N=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let z;z=(ie=le(ie,{base:ne(E)?E:"",skipExpansion:!1,contextResolver:new ee({sharedCache:Ze})})).skipExpansion?E:yield Ae.expand(E,ie);const Se=I(z,ie);if(ie.format){if("application/n-quads"===ie.format||"application/nquads"===ie.format)return W.serialize(Se);throw new x("Unknown output format.","jsonld.UnknownFormat",{format:ie.format})}return Se});return function(E,ie){return N.apply(this,arguments)}}(),Ae.createNodeMap=function(){var N=J(function*(E,ie){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ie=le(ie,{base:ne(E)?E:"",contextResolver:new ee({sharedCache:Ze})});const z=yield Ae.expand(E,ie);return se(z,ie)});return function(E,ie){return N.apply(this,arguments)}}(),Ae.merge=function(){var N=J(function*(E,ie,z){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!q(E))throw new TypeError('Could not merge, "docs" must be an array.');ie="function"==typeof ie?null:ie||null,z=le(z,{contextResolver:new ee({sharedCache:Ze})});const Se=yield Promise.all(E.map(fe=>{const ze={...z};return Ae.expand(fe,ze)}));let tt=!0;"mergeNodes"in z&&(tt=z.mergeNodes);const ce=z.issuer||new _("_:b"),Z={"@default":{}};for(let fe=0;fe<Se.length;++fe){const ze=U.relabelBlankNodes(Se[fe],{issuer:new _("_:b"+fe+"-")}),Xe=tt||0===fe?Z:{"@default":{}};if(Te(ze,Xe,"@default",ce),Xe!==Z)for(const dt in Xe){const mt=Xe[dt];if(!(dt in Z)){Z[dt]=mt;continue}const gt=Z[dt];for(const zt in mt)zt in gt||(gt[zt]=mt[zt])}}const L=Ce(Z),w=[],M=Object.keys(L).sort();for(let fe=0;fe<M.length;++fe){const ze=L[M[fe]];X(ze)||w.push(ze)}return null===ie?w:(z.graph=!0,z.skipExpansion=!0,yield Ae.compact(w,ie,z))});return function(E,ie,z){return N.apply(this,arguments)}}(),Object.defineProperty(Ae,"documentLoader",{get:()=>Ae._documentLoader,set:N=>Ae._documentLoader=N}),Ae.documentLoader=function(){var N=J(function*(E){throw new x("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:E})});return function(E){return N.apply(this,arguments)}}(),Ae.get=function(){var N=J(function*(E,ie){let z;z="function"==typeof ie.documentLoader?ie.documentLoader:Ae.documentLoader;const Se=yield z(E);try{if(!Se.document)throw new x("No remote document found at the given URL.","jsonld.NullRemoteDocument");ne(Se.document)&&(Se.document=JSON.parse(Se.document))}catch(tt){throw new x("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:tt,remoteDoc:Se})}return Se});return function(E,ie){return N.apply(this,arguments)}}(),Ae.processContext=function(){var N=J(function*(E,ie,z){return z=le(z,{base:"",contextResolver:new ee({sharedCache:Ze})}),null===ie?b(z):(ie=U.clone(ie),oe(ie)&&"@context"in ie||(ie={"@context":ie}),O({activeCtx:E,localCtx:ie,options:z}))});return function(E,ie,z){return N.apply(this,arguments)}}(),Ae.getContextValue=T(9611).getContextValue,Ae.documentLoaders={},Ae.useDocumentLoader=function(N){if(!(N in Ae.documentLoaders))throw new x('Unknown document loader type: "'+N+'"',"jsonld.UnknownDocumentLoader",{type:N});Ae.documentLoader=Ae.documentLoaders[N].apply(Ae,Array.prototype.slice.call(arguments,1))},Ae.registerRDFParser=function(N,E){Ye[N]=E},Ae.unregisterRDFParser=function(N){delete Ye[N]},Ae.registerRDFParser("application/n-quads",W.parse),Ae.registerRDFParser("application/nquads",W.parse),Ae.url=T(2651),Ae.logEventHandler=Re,Ae.logWarningEventHandler=ke,Ae.safeEventHandler=et,Ae.setDefaultEventHandler=qe,Ae.strictEventHandler=Ne,Ae.unhandledEventHandler=Pe,Ae.util=U,Object.assign(Ae,U),Ae.promises=Ae,Ae.RequestQueue=T(4044),Ae.JsonLdProcessor=T(1828)(Ae),te.setupGlobals(Ae),te.setupDocumentLoaders(Ae),Ae},pe=function(){return He(function(){return pe()})};He(pe),Ue.exports=pe},9783:(Ue,_e,T)=>{"use strict";const{isKeyword:J}=T(9611),S=T(543),te=T(8254),U=T(3521),ee=T(1874),_={};Ue.exports=_,_.createMergedNodeMap=(x,F)=>{const W=(F=F||{}).issuer||new U.IdentifierIssuer("_:b"),R={"@default":{}};return _.createNodeMap(x,R,"@default",W),_.mergeNodeMaps(R)},_.createNodeMap=(x,F,W,R,$,de)=>{if(te.isArray(x)){for(const q of x)_.createNodeMap(q,F,W,R,void 0,de);return}if(!te.isObject(x))return void(de&&de.push(x));if(S.isValue(x)){if("@type"in x){let q=x["@type"];0===q.indexOf("_:")&&(x["@type"]=q=R.getId(q))}return void(de&&de.push(x))}if(de&&S.isList(x)){const q=[];return _.createNodeMap(x["@list"],F,W,R,$,q),void de.push({"@list":q})}if("@type"in x){const q=x["@type"];for(const oe of q)0===oe.indexOf("_:")&&R.getId(oe)}te.isUndefined($)&&($=S.isBlankNode(x)?R.getId(x["@id"]):x["@id"]),de&&de.push({"@id":$});const I=F[W],H=I[$]=I[$]||{};H["@id"]=$;const ae=Object.keys(x).sort();for(let q of ae){if("@id"===q)continue;if("@reverse"===q){const ne={"@id":$},X=x["@reverse"];for(const B in X){const b=X[B];for(const O of b){let C=O["@id"];S.isBlankNode(O)&&(C=R.getId(C)),_.createNodeMap(O,F,W,R,C),U.addValue(I[C],B,ne,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===q){$ in F||(F[$]={}),_.createNodeMap(x[q],F,$,R);continue}if("@included"===q){_.createNodeMap(x[q],F,W,R);continue}if("@type"!==q&&J(q)){if("@index"===q&&q in H&&(x[q]!==H[q]||x[q]["@id"]!==H[q]["@id"]))throw new ee("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:H});H[q]=x[q];continue}const oe=x[q];if(0===q.indexOf("_:")&&(q=R.getId(q)),0!==oe.length)for(let ne of oe)if("@type"===q&&(ne=0===ne.indexOf("_:")?R.getId(ne):ne),S.isSubject(ne)||S.isSubjectReference(ne)){if("@id"in ne&&!ne["@id"])continue;const X=S.isBlankNode(ne)?R.getId(ne["@id"]):ne["@id"];U.addValue(H,q,{"@id":X},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ne,F,W,R,X)}else if(S.isValue(ne))U.addValue(H,q,ne,{propertyIsArray:!0,allowDuplicate:!1});else if(S.isList(ne)){const X=[];_.createNodeMap(ne["@list"],F,W,R,$,X),ne={"@list":X},U.addValue(H,q,ne,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ne,F,W,R,$),U.addValue(H,q,ne,{propertyIsArray:!0,allowDuplicate:!1});else U.addValue(H,q,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=x=>{const F={};for(const W of Object.keys(x).sort())for(const R of Object.keys(x[W]).sort()){const $=x[W][R];R in F||(F[R]={"@id":R});const de=F[R];for(const I of Object.keys($).sort())if(J(I)&&"@type"!==I)de[I]=U.clone($[I]);else for(const H of $[I])U.addValue(de,I,U.clone(H),{propertyIsArray:!0,allowDuplicate:!1})}return F},_.mergeNodeMaps=x=>{const F=x["@default"],W=Object.keys(x).sort();for(const R of W){if("@default"===R)continue;const $=x[R];let de=F[R];de?"@graph"in de||(de["@graph"]=[]):F[R]=de={"@id":R,"@graph":[]};const I=de["@graph"];for(const H of Object.keys($).sort()){const ae=$[H];S.isSubjectReference(ae)||I.push(ae)}}return F}},8924:(Ue,_e,T)=>{"use strict";const J=T(627),S={};Ue.exports=S,S.setupDocumentLoaders=function(te){typeof XMLHttpRequest<"u"&&(te.documentLoaders.xhr=J,te.useDocumentLoader("xhr"))},S.setupGlobals=function(te){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:te.JsonLdProcessor})}},240:(Ue,_e,T)=>{"use strict";const{createNodeMap:J}=T(9783),{isKeyword:S}=T(9611),te=T(543),U=T(5041),ee=T(8254),_=T(3521),{handleEvent:x}=T(3855),{RDF_FIRST:F,RDF_REST:W,RDF_NIL:R,RDF_TYPE:$,RDF_JSON_LITERAL:de,RDF_LANGSTRING:I,XSD_BOOLEAN:H,XSD_DOUBLE:ae,XSD_INTEGER:q,XSD_STRING:oe}=T(6982),{isAbsolute:ne}=T(2651),X={};function B(C,he,V,Te,se){const Ce=Object.keys(he).sort();for(const Re of Ce){const ke=he[Re],et=Object.keys(ke).sort();for(let qe of et){const Ee=ke[qe];if("@type"===qe)qe=$;else if(S(qe))continue;for(const Ne of Ee){const Pe={termType:Re.startsWith("_:")?"BlankNode":"NamedNode",value:Re};if(!ne(Re)){se.eventHandler&&x({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Re}},options:se});continue}const He={termType:qe.startsWith("_:")?"BlankNode":"NamedNode",value:qe};if(!ne(qe)){se.eventHandler&&x({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:qe}},options:se});continue}if("BlankNode"===He.termType&&!se.produceGeneralizedRdf){se.eventHandler&&x({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:Te.getOldIds().find(Ae=>Te.getId(Ae)===qe)}},options:se});continue}const pe=O(Ne,Te,C,V,se.rdfDirection,se);pe&&C.push({subject:Pe,predicate:He,object:pe,graph:V})}}}}function O(C,he,V,Te,se,Ce){const Re={};if(te.isValue(C)){Re.termType="Literal",Re.value=void 0,Re.datatype={termType:"NamedNode"};let ke=C["@value"];const et=C["@type"]||null;"@json"===et?(Re.value=U(ke),Re.datatype.value=de):ee.isBoolean(ke)?(Re.value=ke.toString(),Re.datatype.value=et||H):ee.isDouble(ke)||et===ae?(ee.isDouble(ke)||(ke=parseFloat(ke)),Re.value=ke.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Re.datatype.value=et||ae):ee.isNumber(ke)?(Re.value=ke.toFixed(0),Re.datatype.value=et||q):"i18n-datatype"===se&&"@direction"in C?(Re.datatype.value="https://www.w3.org/ns/i18n#"+(C["@language"]||"")+`_${C["@direction"]}`,Re.value=ke):"@language"in C?(Re.value=ke,Re.datatype.value=et||I,Re.language=C["@language"]):(Re.value=ke,Re.datatype.value=et||oe)}else if(te.isList(C)){const ke=function b(C,he,V,Te,se,Ce){const Re={termType:"NamedNode",value:F},ke={termType:"NamedNode",value:W},et={termType:"NamedNode",value:R},qe=C.pop(),Ee=qe?{termType:"BlankNode",value:he.getId()}:et;let Ne=Ee;for(const Pe of C){const He=O(Pe,he,V,Te,se,Ce),pe={termType:"BlankNode",value:he.getId()};V.push({subject:Ne,predicate:Re,object:He,graph:Te}),V.push({subject:Ne,predicate:ke,object:pe,graph:Te}),Ne=pe}if(qe){const Pe=O(qe,he,V,Te,se,Ce);V.push({subject:Ne,predicate:Re,object:Pe,graph:Te}),V.push({subject:Ne,predicate:ke,object:et,graph:Te})}return Ee}(C["@list"],he,V,Te,se,Ce);Re.termType=ke.termType,Re.value=ke.value}else{const ke=ee.isObject(C)?C["@id"]:C;Re.termType=ke.startsWith("_:")?"BlankNode":"NamedNode",Re.value=ke}return"NamedNode"!==Re.termType||ne(Re.value)?Re:(Ce.eventHandler&&x({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Re.value}},options:Ce}),null)}Ue.exports=X,X.toRDF=(C,he)=>{const V=new _.IdentifierIssuer("_:b"),Te={"@default":{}};J(C,Te,"@default",V);const se=[],Ce=Object.keys(Te).sort();for(const Re of Ce){let ke;if("@default"===Re)ke={termType:"DefaultGraph",value:""};else{if(!ne(Re)){he.eventHandler&&x({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Re}},options:he});continue}ke=Re.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},ke.value=Re}B(se,Te[Re],ke,V,he)}return se}},8254:Ue=>{"use strict";const _e={};Ue.exports=_e,_e.isArray=Array.isArray,_e.isBoolean=T=>"boolean"==typeof T||"[object Boolean]"===Object.prototype.toString.call(T),_e.isDouble=T=>_e.isNumber(T)&&(-1!==String(T).indexOf(".")||Math.abs(T)>=1e21),_e.isEmptyObject=T=>_e.isObject(T)&&0===Object.keys(T).length,_e.isNumber=T=>"number"==typeof T||"[object Number]"===Object.prototype.toString.call(T),_e.isNumeric=T=>!isNaN(parseFloat(T))&&isFinite(T),_e.isObject=T=>"[object Object]"===Object.prototype.toString.call(T),_e.isString=T=>"string"==typeof T||"[object String]"===Object.prototype.toString.call(T),_e.isUndefined=T=>typeof T>"u"},2651:(Ue,_e,T)=>{"use strict";const J=T(8254),S={};Ue.exports=S,S.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},S.parse=(U,ee)=>{const _={},x=S.parsers[ee||"full"],F=x.regex.exec(U);let W=x.keys.length;for(;W--;)_[x.keys[W]]=void 0===F[W]?null:F[W];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=S.removeDotSegments(_.path),_},S.prependBase=(U,ee)=>{if(null===U||S.isAbsolute(ee))return ee;(!U||J.isString(U))&&(U=S.parse(U||""));const _=S.parse(ee),x={protocol:U.protocol||""};if(null!==_.authority)x.authority=_.authority,x.path=_.path,x.query=_.query;else if(x.authority=U.authority,""===_.path)x.path=U.path,x.query=null!==_.query?_.query:U.query;else{if(0===_.path.indexOf("/"))x.path=_.path;else{let W=U.path;W=W.substr(0,W.lastIndexOf("/")+1),(W.length>0||U.authority)&&"/"!==W.substr(-1)&&(W+="/"),W+=_.path,x.path=W}x.query=_.query}""!==_.path&&(x.path=S.removeDotSegments(x.path));let F=x.protocol;return null!==x.authority&&(F+="//"+x.authority),F+=x.path,null!==x.query&&(F+="?"+x.query),null!==_.fragment&&(F+="#"+_.fragment),""===F&&(F="./"),F},S.removeBase=(U,ee)=>{if(null===U)return ee;(!U||J.isString(U))&&(U=S.parse(U||""));let _="";if(""!==U.href?_+=(U.protocol||"")+"//"+(U.authority||""):ee.indexOf("//")&&(_+="//"),0!==ee.indexOf(_))return ee;const x=S.parse(ee.substr(_.length)),F=U.normalizedPath.split("/"),W=x.normalizedPath.split("/"),R=x.fragment||x.query?0:1;for(;F.length>0&&W.length>R&&F[0]===W[0];)F.shift(),W.shift();let $="";if(F.length>0){F.pop();for(let de=0;de<F.length;++de)$+="../"}return $+=W.join("/"),null!==x.query&&($+="?"+x.query),null!==x.fragment&&($+="#"+x.fragment),""===$&&($="./"),$},S.removeDotSegments=U=>{if(0===U.length)return"";const ee=U.split("/"),_=[];for(;ee.length>0;){const x=ee.shift(),F=0===ee.length;"."!==x?".."!==x?_.push(x):(_.pop(),F&&_.push("")):F&&_.push("")}return"/"===U[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const te=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;S.isAbsolute=U=>J.isString(U)&&te.test(U),S.isRelative=U=>J.isString(U)},3521:(Ue,_e,T)=>{"use strict";const J=T(543),S=T(8254),te=T(1986).IdentifierIssuer,U=T(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,x=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,F=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,R_headers_accept="application/ld+json, application/json",$={};function de(I,H){if(S.isArray(H))for(let ae=0;ae<H.length;++ae)H[ae]=de(I,H[ae]);else if(J.isList(H))H["@list"]=de(I,H["@list"]);else if(S.isObject(H)){J.isBlankNode(H)&&(H["@id"]=I.getId(H["@id"]));const ae=Object.keys(H).sort();for(let q=0;q<ae.length;++q){const oe=ae[q];"@id"!==oe&&(H[oe]=de(I,H[oe]))}}return H}Ue.exports=$,$.IdentifierIssuer=te,$.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,$.REGEX_KEYWORD=/^@[a-zA-Z]+$/,$.clone=function(I){if(I&&"object"==typeof I){let H;if(S.isArray(I)){H=[];for(let ae=0;ae<I.length;++ae)H[ae]=$.clone(I[ae])}else if(I instanceof Map){H=new Map;for(const[ae,q]of I)H.set(ae,$.clone(q))}else if(I instanceof Set){H=new Set;for(const ae of I)H.add($.clone(ae))}else if(S.isObject(I)){H={};for(const ae in I)H[ae]=$.clone(I[ae])}else H=I.toString();return H}return I},$.asArray=function(I){return Array.isArray(I)?I:[I]},$.buildHeaders=(I={})=>{if(Object.keys(I).some(ae=>"accept"===ae.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+R_headers_accept+'" is supported.');return Object.assign({Accept:R_headers_accept},I)},$.parseLinkHeader=I=>{const H={},ae=I.match(_);for(let q=0;q<ae.length;++q){let oe=ae[q].match(x);if(!oe)continue;const ne={target:oe[1]},X=oe[2];for(;oe=F.exec(X);)ne[oe[1]]=void 0===oe[2]?oe[3]:oe[2];const B=ne.rel||"";Array.isArray(H[B])?H[B].push(ne):H[B]=H.hasOwnProperty(B)?[H[B],ne]:ne}return H},$.validateTypeValue=(I,H)=>{if(!(S.isString(I)||S.isArray(I)&&I.every(ae=>S.isString(ae)))){if(H&&S.isObject(I))switch(Object.keys(I).length){case 0:return;case 1:if("@default"in I&&$.asArray(I["@default"]).every(ae=>S.isString(ae)))return}throw new U('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:I})}},$.hasProperty=(I,H)=>{if(I.hasOwnProperty(H)){const ae=I[H];return!S.isArray(ae)||ae.length>0}return!1},$.hasValue=(I,H,ae)=>{if($.hasProperty(I,H)){let q=I[H];const oe=J.isList(q);if(S.isArray(q)||oe){oe&&(q=q["@list"]);for(let ne=0;ne<q.length;++ne)if($.compareValues(ae,q[ne]))return!0}else if(!S.isArray(ae))return $.compareValues(ae,q)}return!1},$.addValue=(I,H,ae,q)=>{if("propertyIsArray"in(q=q||{})||(q.propertyIsArray=!1),"valueIsArray"in q||(q.valueIsArray=!1),"allowDuplicate"in q||(q.allowDuplicate=!0),"prependValue"in q||(q.prependValue=!1),q.valueIsArray)I[H]=ae;else if(S.isArray(ae)){0===ae.length&&q.propertyIsArray&&!I.hasOwnProperty(H)&&(I[H]=[]),q.prependValue&&(ae=ae.concat(I[H]),I[H]=[]);for(let oe=0;oe<ae.length;++oe)$.addValue(I,H,ae[oe],q)}else if(I.hasOwnProperty(H)){const oe=!q.allowDuplicate&&$.hasValue(I,H,ae);!S.isArray(I[H])&&(!oe||q.propertyIsArray)&&(I[H]=[I[H]]),oe||(q.prependValue?I[H].unshift(ae):I[H].push(ae))}else I[H]=q.propertyIsArray?[ae]:ae},$.getValues=(I,H)=>[].concat(I[H]||[]),$.removeProperty=(I,H)=>{delete I[H]},$.removeValue=(I,H,ae,q)=>{"propertyIsArray"in(q=q||{})||(q.propertyIsArray=!1);const oe=$.getValues(I,H).filter(ne=>!$.compareValues(ne,ae));0===oe.length?$.removeProperty(I,H):I[H]=1!==oe.length||q.propertyIsArray?oe:oe[0]},$.relabelBlankNodes=(I,H)=>de((H=H||{}).issuer||new te("_:b"),I),$.compareValues=(I,H)=>!!(I===H||J.isValue(I)&&J.isValue(H)&&I["@value"]===H["@value"]&&I["@type"]===H["@type"]&&I["@language"]===H["@language"]&&I["@index"]===H["@index"])||!!(S.isObject(I)&&"@id"in I&&S.isObject(H)&&"@id"in H)&&I["@id"]===H["@id"],$.compareShortestLeast=(I,H)=>I.length<H.length?-1:H.length<I.length?1:I===H?0:I<H?-1:1},5041:Ue=>{"use strict";Ue.exports=function _e(T){return null===T||"object"!=typeof T||null!=T.toJSON?JSON.stringify(T):Array.isArray(T)?"["+T.reduce((J,S,te)=>J+(0===te?"":",")+_e(void 0===S||"symbol"==typeof S?null:S),"")+"]":"{"+Object.keys(T).sort().reduce((J,S,te)=>void 0===T[S]||"symbol"==typeof T[S]?J:J+(0===J.length?"":",")+_e(S)+":"+_e(T[S]),"")+"}"}},1072:(Ue,_e,T)=>{"use strict";const J=T(4439),S=Symbol("max"),te=Symbol("length"),U=Symbol("lengthCalculator"),ee=Symbol("allowStale"),_=Symbol("maxAge"),x=Symbol("dispose"),F=Symbol("noDisposeOnSet"),W=Symbol("lruList"),R=Symbol("cache"),$=Symbol("updateAgeOnGet"),de=()=>1,H=(B,b,O)=>{const C=B[R].get(b);if(C){const he=C.value;if(ae(B,he)){if(oe(B,C),!B[ee])return}else O&&(B[$]&&(C.value.now=Date.now()),B[W].unshiftNode(C));return he.value}},ae=(B,b)=>{if(!b||!b.maxAge&&!B[_])return!1;const O=Date.now()-b.now;return b.maxAge?O>b.maxAge:B[_]&&O>B[_]},q=B=>{if(B[te]>B[S])for(let b=B[W].tail;B[te]>B[S]&&null!==b;){const O=b.prev;oe(B,b),b=O}},oe=(B,b)=>{if(b){const O=b.value;B[x]&&B[x](O.key,O.value),B[te]-=O.length,B[R].delete(O.key),B[W].removeNode(b)}};class ne{constructor(b,O,C,he,V){this.key=b,this.value=O,this.length=C,this.now=he,this.maxAge=V||0}}const X=(B,b,O,C)=>{let he=O.value;ae(B,he)&&(oe(B,O),B[ee]||(he=void 0)),he&&b.call(C,he.value,he.key,B)};Ue.exports=class I{constructor(b){if("number"==typeof b&&(b={max:b}),b||(b={}),b.max&&("number"!=typeof b.max||b.max<0))throw new TypeError("max must be a non-negative number");this[S]=b.max||1/0;const C=b.length||de;if(this[U]="function"!=typeof C?de:C,this[ee]=b.stale||!1,b.maxAge&&"number"!=typeof b.maxAge)throw new TypeError("maxAge must be a number");this[_]=b.maxAge||0,this[x]=b.dispose,this[F]=b.noDisposeOnSet||!1,this[$]=b.updateAgeOnGet||!1,this.reset()}set max(b){if("number"!=typeof b||b<0)throw new TypeError("max must be a non-negative number");this[S]=b||1/0,q(this)}get max(){return this[S]}set allowStale(b){this[ee]=!!b}get allowStale(){return this[ee]}set maxAge(b){if("number"!=typeof b)throw new TypeError("maxAge must be a non-negative number");this[_]=b,q(this)}get maxAge(){return this[_]}set lengthCalculator(b){"function"!=typeof b&&(b=de),b!==this[U]&&(this[U]=b,this[te]=0,this[W].forEach(O=>{O.length=this[U](O.value,O.key),this[te]+=O.length})),q(this)}get lengthCalculator(){return this[U]}get length(){return this[te]}get itemCount(){return this[W].length}rforEach(b,O){O=O||this;for(let C=this[W].tail;null!==C;){const he=C.prev;X(this,b,C,O),C=he}}forEach(b,O){O=O||this;for(let C=this[W].head;null!==C;){const he=C.next;X(this,b,C,O),C=he}}keys(){return this[W].toArray().map(b=>b.key)}values(){return this[W].toArray().map(b=>b.value)}reset(){this[x]&&this[W]&&this[W].length&&this[W].forEach(b=>this[x](b.key,b.value)),this[R]=new Map,this[W]=new J,this[te]=0}dump(){return this[W].map(b=>!ae(this,b)&&{k:b.key,v:b.value,e:b.now+(b.maxAge||0)}).toArray().filter(b=>b)}dumpLru(){return this[W]}set(b,O,C){if((C=C||this[_])&&"number"!=typeof C)throw new TypeError("maxAge must be a number");const he=C?Date.now():0,V=this[U](O,b);if(this[R].has(b)){if(V>this[S])return oe(this,this[R].get(b)),!1;const Ce=this[R].get(b).value;return this[x]&&(this[F]||this[x](b,Ce.value)),Ce.now=he,Ce.maxAge=C,Ce.value=O,this[te]+=V-Ce.length,Ce.length=V,this.get(b),q(this),!0}const Te=new ne(b,O,V,he,C);return Te.length>this[S]?(this[x]&&this[x](b,O),!1):(this[te]+=Te.length,this[W].unshift(Te),this[R].set(b,this[W].head),q(this),!0)}has(b){if(!this[R].has(b))return!1;const O=this[R].get(b).value;return!ae(this,O)}get(b){return H(this,b,!0)}peek(b){return H(this,b,!1)}pop(){const b=this[W].tail;return b?(oe(this,b),b.value):null}del(b){oe(this,this[R].get(b))}load(b){this.reset();const O=Date.now();for(let C=b.length-1;C>=0;C--){const he=b[C],V=he.e||0;if(0===V)this.set(he.k,he.v);else{const Te=V-O;Te>0&&this.set(he.k,he.v,Te)}}}prune(){this[R].forEach((b,O)=>H(this,O,!1))}}},6990:function(Ue,_e,T){var J;Ue=T.nmd(Ue),function(){var S,_="Expected a function",F="__lodash_hash_undefined__",R="__lodash_placeholder__",b=32,C=128,Ee=1/0,Ne=9007199254740991,pe=4294967295,st=[["ary",C],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",b],["partialRight",64],["rearg",256]],Ze="[object Arguments]",le="[object Array]",E="[object Boolean]",ie="[object Date]",Se="[object Error]",tt="[object Function]",ce="[object GeneratorFunction]",Z="[object Map]",L="[object Number]",M="[object Object]",Q="[object Promise]",ze="[object RegExp]",Xe="[object Set]",dt="[object String]",mt="[object Symbol]",zt="[object WeakMap]",Ie="[object ArrayBuffer]",G="[object DataView]",v="[object Float32Array]",re="[object Float64Array]",Ge="[object Int8Array]",Je="[object Int16Array]",at="[object Int32Array]",Wt="[object Uint8Array]",an="[object Uint8ClampedArray]",Kn="[object Uint16Array]",Xn="[object Uint32Array]",Dn=/\b__p \+= '';/g,mr=/\b(__p \+=) '' \+/g,ss=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wo=/&(?:amp|lt|gt|quot|#39);/g,Ui=/[&<>"']/g,$r=RegExp(Wo.source),as=RegExp(Ui.source),Ps=/<%-([\s\S]+?)%>/g,Ro=/<%([\s\S]+?)%>/g,po=/<%=([\s\S]+?)%>/g,jd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,th=/^\w*$/,nh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Uc=/[\\^$.*+?()[\]{}|]/g,ac=RegExp(Uc.source),Ol=/^\s+/,Vc=/\s/,Pl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hc=/\{\n\/\* \[wrapped with (.+)\] \*/,Ud=/,? & /,zc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ih=/[()=,{}\[\]\/\s]/,Gc=/\\(\\)?/g,Nl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wc=/\w*$/,yi=/^[-+]0x[0-9a-f]+$/i,Ri=/^0b[01]+$/i,Ns=/^\[object .+?Constructor\]$/,Ca=/^0o[0-7]+$/i,Ta=/^(?:0|[1-9]\d*)$/,cc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mo=/($^)/,ge=/['\n\r\u2028\u2029\\]/g,Me="\\ud800-\\udfff",me="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Fe="\\u2700-\\u27bf",$e="a-z\\xdf-\\xf6\\xf8-\\xff",Qt="A-Z\\xc0-\\xd6\\xd8-\\xde",vn="\\ufe0e\\ufe0f",oo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ko="["+Me+"]",$c="["+oo+"]",ra="["+me+"]",Lr="\\d+",go="["+Fe+"]",Yc="["+$e+"]",Fl="[^"+Me+oo+Lr+Fe+$e+Qt+"]",xi="\\ud83c[\\udffb-\\udfff]",$t="[^"+Me+"]",Oo="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+Qt+"]",pt="(?:"+Yc+"|"+Fl+")",xt="(?:"+Le+"|"+Fl+")",qt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",mn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",or="(?:"+ra+"|"+xi+")?",Ir="["+vn+"]?",Qf=Ir+or+"(?:\\u200d(?:"+[$t,Oo,Oe].join("|")+")"+Ir+or+")*",KP="(?:"+[go,Oo,Oe].join("|")+")"+Qf,ov="(?:"+[$t+ra+"?",ra,Oo,Oe,ko].join("|")+")",Pt=RegExp("['\u2019]","g"),ep=RegExp(ra,"g"),Pn=RegExp(xi+"(?="+xi+")|"+ov+Qf,"g"),Si=RegExp([Le+"?"+Yc+"+"+qt+"(?="+[$c,Le,"$"].join("|")+")",xt+"+"+mn+"(?="+[$c,Le+pt,"$"].join("|")+")",Le+"?"+pt+"+"+qt,Le+"+"+mn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lr,KP].join("|"),"g"),hS=RegExp("[\\u200d"+Me+me+vn+"]"),JP=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wg=-1,li={};li[v]=li[re]=li[Ge]=li[Je]=li[at]=li[Wt]=li[an]=li[Kn]=li[Xn]=!0,li[Ze]=li[le]=li[Ie]=li[E]=li[G]=li[ie]=li[Se]=li[tt]=li[Z]=li[L]=li[M]=li[ze]=li[Xe]=li[dt]=li[zt]=!1;var Gi={};Gi[Ze]=Gi[le]=Gi[Ie]=Gi[G]=Gi[E]=Gi[ie]=Gi[v]=Gi[re]=Gi[Ge]=Gi[Je]=Gi[at]=Gi[Z]=Gi[L]=Gi[M]=Gi[ze]=Gi[Xe]=Gi[dt]=Gi[mt]=Gi[Wt]=Gi[an]=Gi[Kn]=Gi[Xn]=!0,Gi[Se]=Gi[tt]=Gi[zt]=!1;var QP={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},eN=parseFloat,tN=parseInt,mS="object"==typeof global&&global&&global.Object===Object&&global,gS="object"==typeof self&&self&&self.Object===Object&&self,_o=mS||gS||Function("return this")(),sv=_e&&!_e.nodeType&&_e,tp=sv&&Ue&&!Ue.nodeType&&Ue,cs=tp&&tp.exports===sv,Cn=cs&&mS.process,oa=function(){try{return tp&&tp.require&&tp.require("util").types||Cn&&Cn.binding&&Cn.binding("util")}catch{}}(),_S=oa&&oa.isArrayBuffer,bS=oa&&oa.isDate,St=oa&&oa.isMap,yS=oa&&oa.isRegExp,Zt=oa&&oa.isSet,rh=oa&&oa.isTypedArray;function ls(ct,At,_t){switch(_t.length){case 0:return ct.call(At);case 1:return ct.call(At,_t[0]);case 2:return ct.call(At,_t[0],_t[1]);case 3:return ct.call(At,_t[0],_t[1],_t[2])}return ct.apply(At,_t)}function av(ct,At,_t,tn){for(var Vn=-1,fi=null==ct?0:ct.length;++Vn<fi;){var Rr=ct[Vn];At(tn,Rr,_t(Rr),ct)}return tn}function Fs(ct,At){for(var _t=-1,tn=null==ct?0:ct.length;++_t<tn&&!1!==At(ct[_t],_t,ct););return ct}function np(ct,At){for(var _t=null==ct?0:ct.length;_t--&&!1!==At(ct[_t],_t,ct););return ct}function oh(ct,At){for(var _t=-1,tn=null==ct?0:ct.length;++_t<tn;)if(!At(ct[_t],_t,ct))return!1;return!0}function Ma(ct,At){for(var _t=-1,tn=null==ct?0:ct.length,Vn=0,fi=[];++_t<tn;){var Rr=ct[_t];At(Rr,_t,ct)&&(fi[Vn++]=Rr)}return fi}function sh(ct,At){return!(null==ct||!ct.length)&&Xc(ct,At,0)>-1}function $g(ct,At,_t){for(var tn=-1,Vn=null==ct?0:ct.length;++tn<Vn;)if(_t(At,ct[tn]))return!0;return!1}function fn(ct,At){for(var _t=-1,tn=null==ct?0:ct.length,Vn=Array(tn);++_t<tn;)Vn[_t]=At(ct[_t],_t,ct);return Vn}function Ia(ct,At){for(var _t=-1,tn=At.length,Vn=ct.length;++_t<tn;)ct[Vn+_t]=At[_t];return ct}function ip(ct,At,_t,tn){var Vn=-1,fi=null==ct?0:ct.length;for(tn&&fi&&(_t=ct[++Vn]);++Vn<fi;)_t=At(_t,ct[Vn],Vn,ct);return _t}function $o(ct,At,_t,tn){var Vn=null==ct?0:ct.length;for(tn&&Vn&&(_t=ct[--Vn]);Vn--;)_t=At(_t,ct[Vn],Vn,ct);return _t}function rp(ct,At){for(var _t=-1,tn=null==ct?0:ct.length;++_t<tn;)if(At(ct[_t],_t,ct))return!0;return!1}var nN=ah("length");function vS(ct,At,_t){var tn;return _t(ct,function(Vn,fi,Rr){if(At(Vn,fi,Rr))return tn=fi,!1}),tn}function Vd(ct,At,_t,tn){for(var Vn=ct.length,fi=_t+(tn?1:-1);tn?fi--:++fi<Vn;)if(At(ct[fi],fi,ct))return fi;return-1}function Xc(ct,At,_t){return At==At?function lc(ct,At,_t){for(var tn=_t-1,Vn=ct.length;++tn<Vn;)if(ct[tn]===At)return tn;return-1}(ct,At,_t):Vd(ct,op,_t)}function cv(ct,At,_t,tn){for(var Vn=_t-1,fi=ct.length;++Vn<fi;)if(tn(ct[Vn],At))return Vn;return-1}function op(ct){return ct!=ct}function lv(ct,At){var _t=null==ct?0:ct.length;return _t?uv(ct,At)/_t:NaN}function ah(ct){return function(At){return null==At?S:At[ct]}}function dv(ct){return function(At){return null==ct?S:ct[At]}}function wS(ct,At,_t,tn,Vn){return Vn(ct,function(fi,Rr,ki){_t=tn?(tn=!1,fi):At(_t,fi,Rr,ki)}),_t}function uv(ct,At){for(var _t,tn=-1,Vn=ct.length;++tn<Vn;){var fi=At(ct[tn]);fi!==S&&(_t=_t===S?fi:_t+fi)}return _t}function hv(ct,At){for(var _t=-1,tn=Array(ct);++_t<ct;)tn[_t]=At(_t);return tn}function sp(ct){return ct&&ct.slice(0,gi(ct)+1).replace(Ol,"")}function bo(ct){return function(At){return ct(At)}}function Yg(ct,At){return fn(At,function(_t){return ct[_t]})}function lh(ct,At){return ct.has(At)}function fv(ct,At){for(var _t=-1,tn=ct.length;++_t<tn&&Xc(At,ct[_t],0)>-1;);return _t}function Xg(ct,At){for(var _t=ct.length;_t--&&Xc(At,ct[_t],0)>-1;);return _t}var xS=dv({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),qc=dv({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ES(ct){return"\\"+QP[ct]}function Bl(ct){return hS.test(ct)}function dh(ct){var At=-1,_t=Array(ct.size);return ct.forEach(function(tn,Vn){_t[++At]=[Vn,tn]}),_t}function zd(ct,At){return function(_t){return ct(At(_t))}}function Kc(ct,At){for(var _t=-1,tn=ct.length,Vn=0,fi=[];++_t<tn;){var Rr=ct[_t];(Rr===At||Rr===R)&&(ct[_t]=R,fi[Vn++]=_t)}return fi}function cp(ct){var At=-1,_t=Array(ct.size);return ct.forEach(function(tn){_t[++At]=tn}),_t}function yo(ct){return Bl(ct)?function qg(ct){for(var At=Pn.lastIndex=0;Pn.test(ct);)++At;return At}(ct):nN(ct)}function Dr(ct){return Bl(ct)?function Kg(ct){return ct.match(Pn)||[]}(ct):function Ei(ct){return ct.split("")}(ct)}function gi(ct){for(var At=ct.length;At--&&Vc.test(ct.charAt(At)););return At}var dp=dv({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Jc=function ct(At){var u,_t=(At=null==At?_o:Jc.defaults(_o.Object(),At,Jc.pick(_o,fS))).Array,tn=At.Date,Vn=At.Error,fi=At.Function,Rr=At.Math,ki=At.Object,Jg=At.RegExp,mv=At.String,Ls=At.TypeError,up=_t.prototype,Gd=ki.prototype,uh=At["__core-js_shared__"],hp=fi.prototype.toString,Mi=Gd.hasOwnProperty,SS=0,gv=(u=/[^.]+$/.exec(uh&&uh.keys&&uh.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",hh=Gd.toString,CS=hp.call(ki),TS=_o._,MS=Jg("^"+hp.call(Mi).replace(Uc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),An=cs?At.Buffer:S,Zc=At.Symbol,fp=At.Uint8Array,_v=An?An.allocUnsafe:S,Kt=zd(ki.getPrototypeOf,ki),bv=ki.create,Zg=Gd.propertyIsEnumerable,Ut=up.splice,so=Zc?Zc.isConcatSpreadable:S,oi=Zc?Zc.iterator:S,sr=Zc?Zc.toStringTag:S,Yr=function(){try{var u=nl(ki,"defineProperty");return u({},"",{}),u}catch{}}(),Wd=At.clearTimeout!==_o.clearTimeout&&At.clearTimeout,ds=tn&&tn.now!==_o.Date.now&&tn.now,yv=At.setTimeout!==_o.setTimeout&&At.setTimeout,fh=Rr.ceil,jl=Rr.floor,Qg=ki.getOwnPropertySymbols,IS=An?An.isBuffer:S,_r=At.isFinite,Jt=up.join,$n=zd(ki.keys,ki),Jn=Rr.max,Vi=Rr.min,ph=tn.now,vo=At.parseInt,Ul=Rr.random,Ar=up.reverse,Da=nl(At,"DataView"),Ra=nl(At,"Map"),Nn=nl(At,"Promise"),ka=nl(At,"Set"),$d=nl(At,"WeakMap"),Oa=nl(ki,"create"),Ki=$d&&new $d,Pa={},Yd=uu(Da),Na=uu(Ra),mh=uu(Nn),vv=uu(ka),Qc=uu($d),Bs=Zc?Zc.prototype:S,el=Bs?Bs.valueOf:S,gh=Bs?Bs.toString:S;function De(u){if(Qi(u)&&!zn(u)&&!(u instanceof Hn)){if(u instanceof us)return u;if(Mi.call(u,"__wrapped__"))return eC(u)}return new us(u)}var _h=function(){function u(){}return function(f){if(!Zi(f))return{};if(bv)return bv(f);u.prototype=f;var y=new u;return u.prototype=S,y}}();function Xd(){}function us(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=S}function Hn(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pe,this.__views__=[]}function ar(u){var f=-1,y=null==u?0:u.length;for(this.clear();++f<y;){var K=u[f];this.set(K[0],K[1])}}function js(u){var f=-1,y=null==u?0:u.length;for(this.clear();++f<y;){var K=u[f];this.set(K[0],K[1])}}function uc(u){var f=-1,y=null==u?0:u.length;for(this.clear();++f<y;){var K=u[f];this.set(K[0],K[1])}}function Kd(u){var f=-1,y=null==u?0:u.length;for(this.__data__=new uc;++f<y;)this.add(u[f])}function Fa(u){var f=this.__data__=new js(u);this.size=f.size}function n_(u,f){var y=zn(u),K=!y&&Zl(u),xe=!y&&!K&&ol(u),je=!y&&!K&&!xe&&vu(u),Qe=y||K||xe||je,rt=Qe?hv(u.length,mv):[],lt=rt.length;for(var Tt in u)(f||Mi.call(u,Tt))&&(!Qe||!("length"==Tt||xe&&("offset"==Tt||"parent"==Tt)||je&&("buffer"==Tt||"byteLength"==Tt||"byteOffset"==Tt)||Ua(Tt,lt)))&&rt.push(Tt);return rt}function OS(u){var f=u.length;return f?u[Ov(0,f-1)]:S}function _N(u,f){return L_(No(u),Zd(f,0,u.length))}function bN(u){return L_(No(u))}function hc(u,f,y){(y!==S&&!ms(u[f],y)||y===S&&!(f in u))&&fc(u,f,y)}function Jd(u,f,y){var K=u[f];(!Mi.call(u,f)||!ms(K,y)||y===S&&!(f in u))&&fc(u,f,y)}function i_(u,f){for(var y=u.length;y--;)if(ms(u[y][0],f))return y;return-1}function r_(u,f,y,K){return Hl(u,function(xe,je,Qe){f(K,xe,y(xe),Qe)}),K}function o_(u,f){return u&&da(f,Ur(f),u)}function fc(u,f,y){"__proto__"==f&&Yr?Yr(u,f,{configurable:!0,enumerable:!0,value:y,writable:!0}):u[f]=y}function s_(u,f){for(var y=-1,K=f.length,xe=_t(K),je=null==u;++y<K;)xe[y]=je?S:ab(u,f[y]);return xe}function Zd(u,f,y){return u==u&&(y!==S&&(u=u<=y?u:y),f!==S&&(u=u>=f?u:f)),u}function Us(u,f,y,K,xe,je){var Qe,rt=1&f,lt=2&f,Tt=4&f;if(y&&(Qe=xe?y(u,K,xe,je):y(u)),Qe!==S)return Qe;if(!Zi(u))return u;var Mt=zn(u);if(Mt){if(Qe=function Cp(u){var f=u.length,y=new u.constructor(f);return f&&"string"==typeof u[0]&&Mi.call(u,"index")&&(y.index=u.index,y.input=u.input),y}(u),!rt)return No(u,Qe)}else{var Rt=Ao(u),Yt=Rt==tt||Rt==ce;if(ol(u))return v_(u,rt);if(Rt==M||Rt==Ze||Yt&&!xe){if(Qe=lt||Yt?{}:Tp(u),!rt)return lt?function Uv(u,f){return da(u,ha(u),f)}(u,function PS(u,f){return u&&da(f,bs(f),u)}(Qe,u)):function jv(u,f){return da(u,R_(u),f)}(u,o_(Qe,u))}else{if(!Gi[Rt])return xe?u:{};Qe=function JS(u,f,y){var K=u.constructor;switch(f){case Ie:return w_(u);case E:case ie:return new K(+u);case G:return function GS(u,f){var y=f?w_(u.buffer):u.buffer;return new u.constructor(y,u.byteOffset,u.byteLength)}(u,y);case v:case re:case Ge:case Je:case at:case Wt:case an:case Kn:case Xn:return A_(u,y);case Z:return new K;case L:case dt:return new K(u);case ze:return function x_(u){var f=new u.constructor(u.source,Wc.exec(u));return f.lastIndex=u.lastIndex,f}(u);case Xe:return new K;case mt:return function E_(u){return el?ki(el.call(u)):{}}(u)}}(u,Rt,rt)}}je||(je=new Fa);var sn=je.get(u);if(sn)return sn;je.set(u,Qe),Lh(u)?u.forEach(function(Sn){Qe.add(Us(Sn,f,y,Sn,u,je))}):Ph(u)&&u.forEach(function(Sn,Gn){Qe.set(Gn,Us(Sn,f,y,Gn,u,je))});var Qn=Mt?S:(Tt?lt?Th:Gv:lt?bs:Ur)(u);return Fs(Qn||u,function(Sn,Gn){Qn&&(Sn=u[Gn=Sn]),Jd(Qe,Gn,Us(Sn,f,y,Gn,u,je))}),Qe}function yh(u,f,y){var K=y.length;if(null==u)return!K;for(u=ki(u);K--;){var xe=y[K],Qe=u[xe];if(Qe===S&&!(xe in u)||!(0,f[xe])(Qe))return!1}return!0}function Br(u,f,y){if("function"!=typeof u)throw new Ls(_);return Va(function(){u.apply(S,y)},f)}function Qd(u,f,y,K){var xe=-1,je=sh,Qe=!0,rt=u.length,lt=[],Tt=f.length;if(!rt)return lt;y&&(f=fn(f,bo(y))),K?(je=$g,Qe=!1):f.length>=200&&(je=lh,Qe=!1,f=new Kd(f));e:for(;++xe<rt;){var Mt=u[xe],Rt=null==y?Mt:y(Mt);if(Mt=K||0!==Mt?Mt:0,Qe&&Rt==Rt){for(var Yt=Tt;Yt--;)if(f[Yt]===Rt)continue e;lt.push(Mt)}else je(f,Rt,K)||lt.push(Mt)}return lt}De.templateSettings={escape:Ps,evaluate:Ro,interpolate:po,variable:"",imports:{_:De}},(De.prototype=Xd.prototype).constructor=De,(us.prototype=_h(Xd.prototype)).constructor=us,(Hn.prototype=_h(Xd.prototype)).constructor=Hn,ar.prototype.clear=function oN(){this.__data__=Oa?Oa(null):{},this.size=0},ar.prototype.delete=function Yo(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f},ar.prototype.get=function Xo(u){var f=this.__data__;if(Oa){var y=f[u];return y===F?S:y}return Mi.call(f,u)?f[u]:S},ar.prototype.has=function e_(u){var f=this.__data__;return Oa?f[u]!==S:Mi.call(f,u)},ar.prototype.set=function Vl(u,f){var y=this.__data__;return this.size+=this.has(u)?0:1,y[u]=Oa&&f===S?F:f,this},js.prototype.clear=function aa(){this.__data__=[],this.size=0},js.prototype.delete=function t_(u){var f=this.__data__,y=i_(f,u);return!(y<0||(y==f.length-1?f.pop():Ut.call(f,y,1),--this.size,0))},js.prototype.get=function DS(u){var f=this.__data__,y=i_(f,u);return y<0?S:f[y][1]},js.prototype.has=function RS(u){return i_(this.__data__,u)>-1},js.prototype.set=function sN(u,f){var y=this.__data__,K=i_(y,u);return K<0?(++this.size,y.push([u,f])):y[K][1]=f,this},uc.prototype.clear=function kS(){this.size=0,this.__data__={hash:new ar,map:new(Ra||js),string:new ar}},uc.prototype.delete=function aN(u){var f=Xl(this,u).delete(u);return this.size-=f?1:0,f},uc.prototype.get=function cN(u){return Xl(this,u).get(u)},uc.prototype.has=function lN(u){return Xl(this,u).has(u)},uc.prototype.set=function dN(u,f){var y=Xl(this,u),K=y.size;return y.set(u,f),this.size+=y.size==K?0:1,this},Kd.prototype.add=Kd.prototype.push=function uN(u){return this.__data__.set(u,F),this},Kd.prototype.has=function hN(u){return this.__data__.has(u)},Fa.prototype.clear=function fN(){this.__data__=new js,this.size=0},Fa.prototype.delete=function pN(u){var f=this.__data__,y=f.delete(u);return this.size=f.size,y},Fa.prototype.get=function mN(u){return this.__data__.get(u)},Fa.prototype.has=function gN(u){return this.__data__.has(u)},Fa.prototype.set=function wv(u,f){var y=this.__data__;if(y instanceof js){var K=y.__data__;if(!Ra||K.length<199)return K.push([u,f]),this.size=++y.size,this;y=this.__data__=new uc(K)}return y.set(u,f),this.size=y.size,this};var Hl=Vv(hs),mp=Vv(c_,!0);function a_(u,f){var y=!0;return Hl(u,function(K,xe,je){return y=!!f(K,xe,je)}),y}function zl(u,f,y){for(var K=-1,xe=u.length;++K<xe;){var je=u[K],Qe=f(je);if(null!=Qe&&(rt===S?Qe==Qe&&!Kr(Qe):y(Qe,rt)))var rt=Qe,lt=je}return lt}function FS(u,f){var y=[];return Hl(u,function(K,xe,je){f(K,xe,je)&&y.push(K)}),y}function Xr(u,f,y,K,xe){var je=-1,Qe=u.length;for(y||(y=Xv),xe||(xe=[]);++je<Qe;){var rt=u[je];f>0&&y(rt)?f>1?Xr(rt,f-1,y,K,xe):Ia(xe,rt):K||(xe[xe.length]=rt)}return xe}var vh=Eo(),xv=Eo(!0);function hs(u,f){return u&&vh(u,f,Ur)}function c_(u,f){return u&&xv(u,f,Ur)}function l_(u,f){return Ma(f,function(y){return Ha(u[y])})}function eu(u,f){for(var y=0,K=(f=pc(f,u)).length;null!=u&&y<K;)u=u[bc(f[y++])];return y&&y==K?u:S}function d_(u,f,y){var K=f(u);return zn(u)?K:Ia(K,y(u))}function wo(u){return null==u?u===S?"[object Undefined]":"[object Null]":sr&&sr in ki(u)?function $v(u){var f=Mi.call(u,sr),y=u[sr];try{u[sr]=S;var K=!0}catch{}var xe=hh.call(u);return K&&(f?u[sr]=y:delete u[sr]),xe}(u):function N_(u){return hh.call(u)}(u)}function u_(u,f){return u>f}function Ev(u,f){return null!=u&&Mi.call(u,f)}function Sr(u,f){return null!=u&&f in ki(u)}function h_(u,f,y){for(var K=y?$g:sh,xe=u[0].length,je=u.length,Qe=je,rt=_t(je),lt=1/0,Tt=[];Qe--;){var Mt=u[Qe];Qe&&f&&(Mt=fn(Mt,bo(f))),lt=Vi(Mt.length,lt),rt[Qe]=!y&&(f||xe>=120&&Mt.length>=120)?new Kd(Qe&&Mt):S}Mt=u[0];var Rt=-1,Yt=rt[0];e:for(;++Rt<xe&&Tt.length<lt;){var sn=Mt[Rt],Nt=f?f(sn):sn;if(sn=y||0!==sn?sn:0,!(Yt?lh(Yt,Nt):K(Tt,Nt,y))){for(Qe=je;--Qe;){var Qn=rt[Qe];if(!(Qn?lh(Qn,Nt):K(u[Qe],Nt,y)))continue e}Yt&&Yt.push(Nt),Tt.push(sn)}}return Tt}function tu(u,f,y){var K=null==(u=F_(u,f=pc(f,u)))?u:u[bc(Ws(f))];return null==K?S:ls(K,u,y)}function f_(u){return Qi(u)&&wo(u)==Ze}function wh(u,f,y,K,xe){return u===f||(null==u||null==f||!Qi(u)&&!Qi(f)?u!=u&&f!=f:function Ba(u,f,y,K,xe,je){var Qe=zn(u),rt=zn(f),lt=Qe?le:Ao(u),Tt=rt?le:Ao(f),Mt=(lt=lt==Ze?M:lt)==M,Rt=(Tt=Tt==Ze?M:Tt)==M,Yt=lt==Tt;if(Yt&&ol(u)){if(!ol(f))return!1;Qe=!0,Mt=!1}if(Yt&&!Mt)return je||(je=new Fa),Qe||vu(u)?XS(u,f,y,K,xe,je):function qS(u,f,y,K,xe,je,Qe){switch(y){case G:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case Ie:return!(u.byteLength!=f.byteLength||!je(new fp(u),new fp(f)));case E:case ie:case L:return ms(+u,+f);case Se:return u.name==f.name&&u.message==f.message;case ze:case dt:return u==f+"";case Z:var rt=dh;case Xe:if(rt||(rt=cp),u.size!=f.size&&!(1&K))return!1;var Tt=Qe.get(u);if(Tt)return Tt==f;K|=2,Qe.set(u,f);var Mt=XS(rt(u),rt(f),K,xe,je,Qe);return Qe.delete(u),Mt;case mt:if(el)return el.call(u)==el.call(f)}return!1}(u,f,lt,y,K,xe,je);if(!(1&y)){var sn=Mt&&Mi.call(u,"__wrapped__"),Nt=Rt&&Mi.call(f,"__wrapped__");if(sn||Nt){var Qn=sn?u.value():u,Sn=Nt?f.value():f;return je||(je=new Fa),xe(Qn,Sn,y,K,je)}}return!!Yt&&(je||(je=new Fa),function KS(u,f,y,K,xe,je){var Qe=1&y,rt=Gv(u),lt=rt.length;if(lt!=Gv(f).length&&!Qe)return!1;for(var Rt=lt;Rt--;){var Yt=rt[Rt];if(!(Qe?Yt in f:Mi.call(f,Yt)))return!1}var sn=je.get(u),Nt=je.get(f);if(sn&&Nt)return sn==f&&Nt==u;var Qn=!0;je.set(u,f),je.set(f,u);for(var Sn=Qe;++Rt<lt;){var Gn=u[Yt=rt[Rt]],pi=f[Yt];if(K)var ws=Qe?K(pi,Gn,Yt,f,u,je):K(Gn,pi,Yt,u,f,je);if(!(ws===S?Gn===pi||xe(Gn,pi,y,K,je):ws)){Qn=!1;break}Sn||(Sn="constructor"==Yt)}if(Qn&&!Sn){var vr=u.constructor,xs=f.constructor;vr!=xs&&"constructor"in u&&"constructor"in f&&!("function"==typeof vr&&vr instanceof vr&&"function"==typeof xs&&xs instanceof xs)&&(Qn=!1)}return je.delete(u),je.delete(f),Qn}(u,f,y,K,xe,je))}(u,f,y,K,wh,xe))}function gp(u,f,y,K){var xe=y.length,je=xe,Qe=!K;if(null==u)return!je;for(u=ki(u);xe--;){var rt=y[xe];if(Qe&&rt[2]?rt[1]!==u[rt[0]]:!(rt[0]in u))return!1}for(;++xe<je;){var lt=(rt=y[xe])[0],Tt=u[lt],Mt=rt[1];if(Qe&&rt[2]){if(Tt===S&&!(lt in u))return!1}else{var Rt=new Fa;if(K)var Yt=K(Tt,Mt,lt,u,f,Rt);if(!(Yt===S?wh(Mt,Tt,3,K,Rt):Yt))return!1}}return!0}function Fi(u){return!(!Zi(u)||function ZS(u){return!!gv&&gv in u}(u))&&(Ha(u)?MS:Ns).test(uu(u))}function Cv(u){return"function"==typeof u?u:null==u?Zo:"object"==typeof u?zn(u)?Iv(u[0],u[1]):Mv(u):Wh(u)}function bp(u){if(!lu(u))return $n(u);var f=[];for(var y in ki(u))Mi.call(u,y)&&"constructor"!=y&&f.push(y);return f}function Po(u,f){return u<f}function Tv(u,f){var y=-1,K=kr(u)?_t(u.length):[];return Hl(u,function(xe,je,Qe){K[++y]=f(xe,je,Qe)}),K}function Mv(u){var f=Wv(u);return 1==f.length&&f[0][2]?Kv(f[0][0],f[0][1]):function(y){return y===u||gp(y,u,f)}}function Iv(u,f){return P_(u)&&du(f)?Kv(bc(u),f):function(y){var K=ab(y,u);return K===S&&K===f?fa(y,u):wh(f,K,3)}}function ca(u,f,y,K,xe){u!==f&&vh(f,function(je,Qe){if(xe||(xe=new Fa),Zi(je))!function Dv(u,f,y,K,xe,je,Qe){var rt=il(u,y),lt=il(f,y),Tt=Qe.get(lt);if(Tt)hc(u,y,Tt);else{var Mt=je?je(rt,lt,y+"",u,f,Qe):S,Rt=Mt===S;if(Rt){var Yt=zn(lt),sn=!Yt&&ol(lt),Nt=!Yt&&!sn&&vu(lt);Mt=lt,Yt||sn||Nt?zn(rt)?Mt=rt:yr(rt)?Mt=No(rt):sn?(Rt=!1,Mt=v_(lt,!0)):Nt?(Rt=!1,Mt=A_(lt,!0)):Mt=[]:Fh(lt)||Zl(lt)?(Mt=rt,Zl(rt)?Mt=sb(rt):(!Zi(rt)||Ha(rt))&&(Mt=Tp(lt))):Rt=!1}Rt&&(Qe.set(lt,Mt),xe(Mt,lt,K,je,Qe),Qe.delete(lt)),hc(u,y,Mt)}}(u,f,Qe,y,ca,K,xe);else{var rt=K?K(il(u,Qe),je,Qe+"",u,f,xe):S;rt===S&&(rt=je),hc(u,Qe,rt)}},bs)}function Rv(u,f){var y=u.length;if(y)return Ua(f+=f<0?y:0,y)?u[f]:S}function m_(u,f,y){f=f.length?fn(f,function(je){return zn(je)?function(Qe){return eu(Qe,1===je.length?je[0]:je)}:je}):[Zo];var K=-1;return f=fn(f,bo(xn())),function rN(ct,At){var _t=ct.length;for(ct.sort(At);_t--;)ct[_t]=ct[_t].value;return ct}(Tv(u,function(je,Qe,rt){return{criteria:fn(f,function(Tt){return Tt(je)}),index:++K,value:je}}),function(je,Qe){return function WS(u,f,y){for(var K=-1,xe=u.criteria,je=f.criteria,Qe=xe.length,rt=y.length;++K<Qe;){var lt=vp(xe[K],je[K]);if(lt)return K>=rt?lt:lt*("desc"==y[K]?-1:1)}return u.index-f.index}(je,Qe,y)})}function g_(u,f,y){for(var K=-1,xe=f.length,je={};++K<xe;){var Qe=f[K],rt=eu(u,Qe);y(rt,Qe)&&xh(je,pc(Qe,u),rt)}return je}function Tn(u,f,y,K){var xe=K?cv:Xc,je=-1,Qe=f.length,rt=u;for(u===f&&(f=No(f)),y&&(rt=fn(u,bo(y)));++je<Qe;)for(var lt=0,Tt=f[je],Mt=y?y(Tt):Tt;(lt=xe(rt,Mt,lt,K))>-1;)rt!==u&&Ut.call(rt,lt,1),Ut.call(u,lt,1);return u}function __(u,f){for(var y=u?f.length:0,K=y-1;y--;){var xe=f[y];if(y==K||xe!==je){var je=xe;Ua(xe)?Ut.call(u,xe,1):zs(u,xe)}}return u}function Ov(u,f){return u+jl(Ul()*(f-u+1))}function b_(u,f){var y="";if(!u||f<1||f>Ne)return y;do{f%2&&(y+=u),(f=jl(f/2))&&(u+=u)}while(f);return y}function ii(u,f){return Ip(Jv(u,f,Zo),u+"")}function Pv(u){return OS(wu(u))}function iu(u,f){var y=wu(u);return L_(y,Zd(f,0,y.length))}function xh(u,f,y,K){if(!Zi(u))return u;for(var xe=-1,je=(f=pc(f,u)).length,Qe=je-1,rt=u;null!=rt&&++xe<je;){var lt=bc(f[xe]),Tt=y;if("__proto__"===lt||"constructor"===lt||"prototype"===lt)return u;if(xe!=Qe){var Mt=rt[lt];(Tt=K?K(Mt,lt,rt):S)===S&&(Tt=Zi(Mt)?Mt:Ua(f[xe+1])?[]:{})}Jd(rt,lt,Tt),rt=rt[lt]}return u}var Nv=Ki?function(u,f){return Ki.set(u,f),u}:Zo,HS=Yr?function(u,f){return Yr(u,"toString",{configurable:!0,enumerable:!1,value:bb(f),writable:!0})}:Zo;function zS(u){return L_(wu(u))}function Vs(u,f,y){var K=-1,xe=u.length;f<0&&(f=-f>xe?0:xe+f),(y=y>xe?xe:y)<0&&(y+=xe),xe=f>y?0:y-f>>>0,f>>>=0;for(var je=_t(xe);++K<xe;)je[K]=u[K+f];return je}function kt(u,f){var y;return Hl(u,function(K,xe,je){return!(y=f(K,xe,je))}),!!y}function di(u,f,y){var K=0,xe=null==u?K:u.length;if("number"==typeof f&&f==f&&xe<=2147483647){for(;K<xe;){var je=K+xe>>>1,Qe=u[je];null!==Qe&&!Kr(Qe)&&(y?Qe<=f:Qe<f)?K=je+1:xe=je}return xe}return cr(u,f,Zo,y)}function cr(u,f,y,K){var xe=0,je=null==u?0:u.length;if(0===je)return 0;for(var Qe=(f=y(f))!=f,rt=null===f,lt=Kr(f),Tt=f===S;xe<je;){var Mt=jl((xe+je)/2),Rt=y(u[Mt]),Yt=Rt!==S,sn=null===Rt,Nt=Rt==Rt,Qn=Kr(Rt);if(Qe)var Sn=K||Nt;else Sn=Tt?Nt&&(K||Yt):rt?Nt&&Yt&&(K||!sn):lt?Nt&&Yt&&!sn&&(K||!Qn):!sn&&!Qn&&(K?Rt<=f:Rt<f);Sn?xe=Mt+1:je=Mt}return Vi(je,4294967294)}function br(u,f){for(var y=-1,K=u.length,xe=0,je=[];++y<K;){var Qe=u[y],rt=f?f(Qe):Qe;if(!y||!ms(rt,lt)){var lt=rt;je[xe++]=0===Qe?0:Qe}}return je}function qr(u){return"number"==typeof u?u:Kr(u)?NaN:+u}function Ko(u){if("string"==typeof u)return u;if(zn(u))return fn(u,Ko)+"";if(Kr(u))return gh?gh.call(u):"";var f=u+"";return"0"==f&&1/u==-Ee?"-0":f}function Hs(u,f,y){var K=-1,xe=sh,je=u.length,Qe=!0,rt=[],lt=rt;if(y)Qe=!1,xe=$g;else if(je>=200){var Tt=f?null:$S(u);if(Tt)return cp(Tt);Qe=!1,xe=lh,lt=new Kd}else lt=f?[]:rt;e:for(;++K<je;){var Mt=u[K],Rt=f?f(Mt):Mt;if(Mt=y||0!==Mt?Mt:0,Qe&&Rt==Rt){for(var Yt=lt.length;Yt--;)if(lt[Yt]===Rt)continue e;f&&lt.push(Rt),rt.push(Mt)}else xe(lt,Rt,y)||(lt!==rt&&lt.push(Rt),rt.push(Mt))}return rt}function zs(u,f){return null==(u=F_(u,f=pc(f,u)))||delete u[bc(Ws(f))]}function yp(u,f,y,K){return xh(u,f,y(eu(u,f)),K)}function ru(u,f,y,K){for(var xe=u.length,je=K?xe:-1;(K?je--:++je<xe)&&f(u[je],je,u););return y?Vs(u,K?0:je,K?je+1:xe):Vs(u,K?je+1:0,K?xe:je)}function Fv(u,f){var y=u;return y instanceof Hn&&(y=y.value()),ip(f,function(K,xe){return xe.func.apply(xe.thisArg,Ia([K],xe.args))},y)}function Lv(u,f,y){var K=u.length;if(K<2)return K?Hs(u[0]):[];for(var xe=-1,je=_t(K);++xe<K;)for(var Qe=u[xe],rt=-1;++rt<K;)rt!=xe&&(je[xe]=Qd(je[xe]||Qe,u[rt],f,y));return Hs(Xr(je,1),f,y)}function y_(u,f,y){for(var K=-1,xe=u.length,je=f.length,Qe={};++K<xe;)y(Qe,u[K],K<je?f[K]:S);return Qe}function ao(u){return yr(u)?u:[]}function la(u){return"function"==typeof u?u:Zo}function pc(u,f){return zn(u)?u:P_(u,f)?[u]:Zv(Ti(u))}var ou=ii;function xo(u,f,y){var K=u.length;return y=y===S?K:y,!f&&y>=K?u:Vs(u,f,y)}var Bv=Wd||function(u){return _o.clearTimeout(u)};function v_(u,f){if(f)return u.slice();var y=u.length,K=_v?_v(y):new u.constructor(y);return u.copy(K),K}function w_(u){var f=new u.constructor(u.byteLength);return new fp(f).set(new fp(u)),f}function A_(u,f){var y=f?w_(u.buffer):u.buffer;return new u.constructor(y,u.byteOffset,u.length)}function vp(u,f){if(u!==f){var y=u!==S,K=null===u,xe=u==u,je=Kr(u),Qe=f!==S,rt=null===f,lt=f==f,Tt=Kr(f);if(!rt&&!Tt&&!je&&u>f||je&&Qe&&lt&&!rt&&!Tt||K&&Qe&&lt||!y&&lt||!xe)return 1;if(!K&&!je&&!Tt&&u<f||Tt&&y&&xe&&!K&&!je||rt&&y&&xe||!Qe&&xe||!lt)return-1}return 0}function S_(u,f,y,K){for(var xe=-1,je=u.length,Qe=y.length,rt=-1,lt=f.length,Tt=Jn(je-Qe,0),Mt=_t(lt+Tt),Rt=!K;++rt<lt;)Mt[rt]=f[rt];for(;++xe<Qe;)(Rt||xe<je)&&(Mt[y[xe]]=u[xe]);for(;Tt--;)Mt[rt++]=u[xe++];return Mt}function wp(u,f,y,K){for(var xe=-1,je=u.length,Qe=-1,rt=y.length,lt=-1,Tt=f.length,Mt=Jn(je-rt,0),Rt=_t(Mt+Tt),Yt=!K;++xe<Mt;)Rt[xe]=u[xe];for(var sn=xe;++lt<Tt;)Rt[sn+lt]=f[lt];for(;++Qe<rt;)(Yt||xe<je)&&(Rt[sn+y[Qe]]=u[xe++]);return Rt}function No(u,f){var y=-1,K=u.length;for(f||(f=_t(K));++y<K;)f[y]=u[y];return f}function da(u,f,y,K){var xe=!y;y||(y={});for(var je=-1,Qe=f.length;++je<Qe;){var rt=f[je],lt=K?K(y[rt],u[rt],rt,y,u):S;lt===S&&(lt=u[rt]),xe?fc(y,rt,lt):Jd(y,rt,lt)}return y}function su(u,f){return function(y,K){var xe=zn(y)?av:r_,je=f?f():{};return xe(y,u,xn(K,2),je)}}function au(u){return ii(function(f,y){var K=-1,xe=y.length,je=xe>1?y[xe-1]:S,Qe=xe>2?y[2]:S;for(je=u.length>3&&"function"==typeof je?(xe--,je):S,Qe&&So(y[0],y[1],Qe)&&(je=xe<3?S:je,xe=1),f=ki(f);++K<xe;){var rt=y[K];rt&&u(f,rt,K,je)}return f})}function Vv(u,f){return function(y,K){if(null==y)return y;if(!kr(y))return u(y,K);for(var xe=y.length,je=f?xe:-1,Qe=ki(y);(f?je--:++je<xe)&&!1!==K(Qe[je],je,Qe););return y}}function Eo(u){return function(f,y,K){for(var xe=-1,je=ki(f),Qe=K(f),rt=Qe.length;rt--;){var lt=Qe[u?rt:++xe];if(!1===y(je[lt],lt,je))break}return f}}function Ji(u){return function(f){var y=Bl(f=Ti(f))?Dr(f):S,K=y?y[0]:f.charAt(0),xe=y?xo(y,1).join(""):f.slice(1);return K[u]()+xe}}function mc(u){return function(f){return ip(zh(zw(f).replace(Pt,"")),u,"")}}function Eh(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var y=_h(u.prototype),K=u.apply(y,f);return Zi(K)?K:y}}function Hv(u){return function(f,y,K){var xe=ki(f);if(!kr(f)){var je=xn(y,3);f=Ur(f),y=function(rt){return je(xe[rt],rt,xe)}}var Qe=u(f,y,K);return Qe>-1?xe[je?f[Qe]:Qe]:S}}function T_(u){return tl(function(f){var y=f.length,K=y,xe=us.prototype.thru;for(u&&f.reverse();K--;){var je=f[K];if("function"!=typeof je)throw new Ls(_);if(xe&&!Qe&&"wrapper"==Ap(je))var Qe=new us([],!0)}for(K=Qe?K:y;++K<y;){var rt=Ap(je=f[K]),lt="wrapper"==rt?Yl(je):S;Qe=lt&&gc(lt[0])&&424==lt[1]&&!lt[4].length&&1==lt[9]?Qe[Ap(lt[0])].apply(Qe,lt[3]):1==je.length&&gc(je)?Qe[rt]():Qe.thru(je)}return function(){var Tt=arguments,Mt=Tt[0];if(Qe&&1==Tt.length&&zn(Mt))return Qe.plant(Mt).value();for(var Rt=0,Yt=y?f[Rt].apply(this,Tt):Mt;++Rt<y;)Yt=f[Rt].call(this,Yt);return Yt}})}function Ah(u,f,y,K,xe,je,Qe,rt,lt,Tt){var Mt=f&C,Rt=1&f,Yt=2&f,sn=24&f,Nt=512&f,Qn=Yt?S:Eh(u);return function Sn(){for(var Gn=arguments.length,pi=_t(Gn),ws=Gn;ws--;)pi[ws]=arguments[ws];if(sn)var vr=ja(Sn),xs=function Hd(ct,At){for(var _t=ct.length,tn=0;_t--;)ct[_t]===At&&++tn;return tn}(pi,vr);if(K&&(pi=S_(pi,K,xe,sn)),je&&(pi=wp(pi,je,Qe,sn)),Gn-=xs,sn&&Gn<Tt){var lr=Kc(pi,vr);return I_(u,f,Ah,Sn.placeholder,y,pi,lr,rt,lt,Tt-Gn)}var Ga=Rt?y:this,pa=Yt?Ga[u]:u;return Gn=pi.length,rt?pi=function _c(u,f){for(var y=u.length,K=Vi(f.length,y),xe=No(u);K--;){var je=f[K];u[K]=Ua(je,y)?xe[je]:S}return u}(pi,rt):Nt&&Gn>1&&pi.reverse(),Mt&&lt<Gn&&(pi.length=lt),this&&this!==_o&&this instanceof Sn&&(pa=Qn||Eh(pa)),pa.apply(Ga,pi)}}function Sh(u,f){return function(y,K){return function LS(u,f,y,K){return hs(u,function(xe,je,Qe){f(K,y(xe),je,Qe)}),K}(y,u,f(K),{})}}function ua(u,f){return function(y,K){var xe;if(y===S&&K===S)return f;if(y!==S&&(xe=y),K!==S){if(xe===S)return K;"string"==typeof y||"string"==typeof K?(y=Ko(y),K=Ko(K)):(y=qr(y),K=qr(K)),xe=u(y,K)}return xe}}function M_(u){return tl(function(f){return f=fn(f,bo(xn())),ii(function(y){var K=this;return u(f,function(xe){return ls(xe,K,y)})})})}function Wl(u,f){var y=(f=f===S?" ":Ko(f)).length;if(y<2)return y?b_(f,u):f;var K=b_(f,fh(u/yo(f)));return Bl(f)?xo(Dr(K),0,u).join(""):K.slice(0,u)}function Ch(u){return function(f,y,K){return K&&"number"!=typeof K&&So(f,y,K)&&(y=K=S),f=$s(f),y===S?(y=f,f=0):y=$s(y),function VS(u,f,y,K){for(var xe=-1,je=Jn(fh((f-u)/(y||1)),0),Qe=_t(je);je--;)Qe[K?je:++xe]=u,u+=y;return Qe}(f,y,K=K===S?f<y?1:-1:$s(K),u)}}function cu(u){return function(f,y){return"string"==typeof f&&"string"==typeof y||(f=gs(f),y=gs(y)),u(f,y)}}function I_(u,f,y,K,xe,je,Qe,rt,lt,Tt){var Mt=8&f;f|=Mt?b:64,4&(f&=~(Mt?64:b))||(f&=-4);var Qn=[u,f,xe,Mt?je:S,Mt?Qe:S,Mt?S:je,Mt?S:Qe,rt,lt,Tt],Sn=y.apply(S,Qn);return gc(u)&&ql(Sn,Qn),Sn.placeholder=K,Dp(Sn,u,f)}function Ep(u){var f=Rr[u];return function(y,K){if(y=gs(y),(K=null==K?0:Vi(qn(K),292))&&_r(y)){var xe=(Ti(y)+"e").split("e");return+((xe=(Ti(f(xe[0]+"e"+(+xe[1]+K)))+"e").split("e"))[0]+"e"+(+xe[1]-K))}return f(y)}}var $S=ka&&1/cp(new ka([,-0]))[1]==Ee?function(u){return new ka(u)}:Cr;function $l(u){return function(f){var y=Ao(f);return y==Z?dh(f):y==Xe?function AS(ct){var At=-1,_t=Array(ct.size);return ct.forEach(function(tn){_t[++At]=[tn,tn]}),_t}(f):function ch(ct,At){return fn(At,function(_t){return[_t,ct[_t]]})}(f,u(f))}}function fs(u,f,y,K,xe,je,Qe,rt){var lt=2&f;if(!lt&&"function"!=typeof u)throw new Ls(_);var Tt=K?K.length:0;if(Tt||(f&=-97,K=xe=S),Qe=Qe===S?Qe:Jn(qn(Qe),0),rt=rt===S?rt:qn(rt),Tt-=xe?xe.length:0,64&f){var Mt=K,Rt=xe;K=xe=S}var Yt=lt?S:Yl(u),sn=[u,f,y,K,xe,Mt,Rt,je,Qe,rt];if(Yt&&function QS(u,f){var y=u[1],K=f[1],xe=y|K;if(!(xe<131)&&!(K==C&&8==y||K==C&&256==y&&u[7].length<=f[8]||384==K&&f[7].length<=f[8]&&8==y))return u;1&K&&(u[2]=f[2],xe|=1&y?0:4);var rt=f[3];if(rt){var lt=u[3];u[3]=lt?S_(lt,rt,f[4]):rt,u[4]=lt?Kc(u[3],R):f[4]}(rt=f[5])&&(u[5]=(lt=u[5])?wp(lt,rt,f[6]):rt,u[6]=lt?Kc(u[5],R):f[6]),(rt=f[7])&&(u[7]=rt),K&C&&(u[8]=null==u[8]?f[8]:Vi(u[8],f[8])),null==u[9]&&(u[9]=f[9]),u[0]=f[0],u[1]=xe}(sn,Yt),u=sn[0],f=sn[1],y=sn[2],K=sn[3],xe=sn[4],!(rt=sn[9]=sn[9]===S?lt?0:u.length:Jn(sn[9]-Tt,0))&&24&f&&(f&=-25),f&&1!=f)Nt=8==f||16==f?function C_(u,f,y){var K=Eh(u);return function xe(){for(var je=arguments.length,Qe=_t(je),rt=je,lt=ja(xe);rt--;)Qe[rt]=arguments[rt];var Tt=je<3&&Qe[0]!==lt&&Qe[je-1]!==lt?[]:Kc(Qe,lt);return(je-=Tt.length)<y?I_(u,f,Ah,xe.placeholder,S,Qe,Tt,S,S,y-je):ls(this&&this!==_o&&this instanceof xe?K:u,this,Qe)}}(u,f,rt):f!=b&&33!=f||xe.length?Ah.apply(S,sn):function xp(u,f,y,K){var xe=1&f,je=Eh(u);return function Qe(){for(var rt=-1,lt=arguments.length,Tt=-1,Mt=K.length,Rt=_t(Mt+lt),Yt=this&&this!==_o&&this instanceof Qe?je:u;++Tt<Mt;)Rt[Tt]=K[Tt];for(;lt--;)Rt[Tt++]=arguments[++rt];return ls(Yt,xe?y:this,Rt)}}(u,f,y,K);else var Nt=function Gl(u,f,y){var K=1&f,xe=Eh(u);return function je(){return(this&&this!==_o&&this instanceof je?xe:u).apply(K?y:this,arguments)}}(u,f,y);return Dp((Yt?Nv:ql)(Nt,sn),u,f)}function zv(u,f,y,K){return u===S||ms(u,Gd[y])&&!Mi.call(K,y)?f:u}function YS(u,f,y,K,xe,je){return Zi(u)&&Zi(f)&&(je.set(f,u),ca(u,f,S,YS,je),je.delete(f)),u}function D_(u){return Fh(u)?S:u}function XS(u,f,y,K,xe,je){var Qe=1&y,rt=u.length,lt=f.length;if(rt!=lt&&!(Qe&&lt>rt))return!1;var Tt=je.get(u),Mt=je.get(f);if(Tt&&Mt)return Tt==f&&Mt==u;var Rt=-1,Yt=!0,sn=2&y?new Kd:S;for(je.set(u,f),je.set(f,u);++Rt<rt;){var Nt=u[Rt],Qn=f[Rt];if(K)var Sn=Qe?K(Qn,Nt,Rt,f,u,je):K(Nt,Qn,Rt,u,f,je);if(Sn!==S){if(Sn)continue;Yt=!1;break}if(sn){if(!rp(f,function(Gn,pi){if(!lh(sn,pi)&&(Nt===Gn||xe(Nt,Gn,y,K,je)))return sn.push(pi)})){Yt=!1;break}}else if(Nt!==Qn&&!xe(Nt,Qn,y,K,je)){Yt=!1;break}}return je.delete(u),je.delete(f),Yt}function tl(u){return Ip(Jv(u,S,pu),u+"")}function Gv(u){return d_(u,Ur,R_)}function Th(u){return d_(u,bs,ha)}var Yl=Ki?function(u){return Ki.get(u)}:Cr;function Ap(u){for(var f=u.name+"",y=Pa[f],K=Mi.call(Pa,f)?y.length:0;K--;){var xe=y[K],je=xe.func;if(null==je||je==u)return xe.name}return f}function ja(u){return(Mi.call(De,"placeholder")?De:u).placeholder}function xn(){var u=De.iteratee||yb;return u=u===yb?Cv:u,arguments.length?u(arguments[0],arguments[1]):u}function Xl(u,f){var y=u.__data__;return function Mp(u){var f=typeof u;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u}(f)?y["string"==typeof f?"string":"hash"]:y.map}function Wv(u){for(var f=Ur(u),y=f.length;y--;){var K=f[y],xe=u[K];f[y]=[K,xe,du(xe)]}return f}function nl(u,f){var y=function it(ct,At){return null==ct?S:ct[At]}(u,f);return Fi(y)?y:S}var R_=Qg?function(u){return null==u?[]:(u=ki(u),Ma(Qg(u),function(f){return Zg.call(u,f)}))}:al,ha=Qg?function(u){for(var f=[];u;)Ia(f,R_(u)),u=Kt(u);return f}:al,Ao=wo;function O_(u,f,y){for(var K=-1,xe=(f=pc(f,u)).length,je=!1;++K<xe;){var Qe=bc(f[K]);if(!(je=null!=u&&y(u,Qe)))break;u=u[Qe]}return je||++K!=xe?je:!!(xe=null==u?0:u.length)&&sl(xe)&&Ua(Qe,xe)&&(zn(u)||Zl(u))}function Tp(u){return"function"!=typeof u.constructor||lu(u)?{}:_h(Kt(u))}function Xv(u){return zn(u)||Zl(u)||!!(so&&u&&u[so])}function Ua(u,f){var y=typeof u;return!!(f=f??Ne)&&("number"==y||"symbol"!=y&&Ta.test(u))&&u>-1&&u%1==0&&u<f}function So(u,f,y){if(!Zi(y))return!1;var K=typeof f;return!!("number"==K?kr(y)&&Ua(f,y.length):"string"==K&&f in y)&&ms(y[f],u)}function P_(u,f){if(zn(u))return!1;var y=typeof u;return!("number"!=y&&"symbol"!=y&&"boolean"!=y&&null!=u&&!Kr(u))||th.test(u)||!jd.test(u)||null!=f&&u in ki(f)}function gc(u){var f=Ap(u),y=De[f];if("function"!=typeof y||!(f in Hn.prototype))return!1;if(u===y)return!0;var K=Yl(y);return!!K&&u===K[0]}(Da&&Ao(new Da(new ArrayBuffer(1)))!=G||Ra&&Ao(new Ra)!=Z||Nn&&Ao(Nn.resolve())!=Q||ka&&Ao(new ka)!=Xe||$d&&Ao(new $d)!=zt)&&(Ao=function(u){var f=wo(u),y=f==M?u.constructor:S,K=y?uu(y):"";if(K)switch(K){case Yd:return G;case Na:return Z;case mh:return Q;case vv:return Xe;case Qc:return zt}return f});var qv=uh?Ha:$h;function lu(u){var f=u&&u.constructor;return u===("function"==typeof f&&f.prototype||Gd)}function du(u){return u==u&&!Zi(u)}function Kv(u,f){return function(y){return null!=y&&y[u]===f&&(f!==S||u in ki(y))}}function Jv(u,f,y){return f=Jn(f===S?u.length-1:f,0),function(){for(var K=arguments,xe=-1,je=Jn(K.length-f,0),Qe=_t(je);++xe<je;)Qe[xe]=K[f+xe];xe=-1;for(var rt=_t(f+1);++xe<f;)rt[xe]=K[xe];return rt[f]=y(Qe),ls(u,this,rt)}}function F_(u,f){return f.length<2?u:eu(u,Vs(f,0,-1))}function il(u,f){if(("constructor"!==f||"function"!=typeof u[f])&&"__proto__"!=f)return u[f]}var ql=Kl(Nv),Va=yv||function(u,f){return _o.setTimeout(u,f)},Ip=Kl(HS);function Dp(u,f,y){var K=f+"";return Ip(u,function Yv(u,f){var y=f.length;if(!y)return u;var K=y-1;return f[K]=(y>1?"& ":"")+f[K],f=f.join(y>2?", ":" "),u.replace(Pl,"{\n/* [wrapped with "+f+"] */\n")}(K,function yN(u,f){return Fs(st,function(y){var K="_."+y[0];f&y[1]&&!sh(u,K)&&u.push(K)}),u.sort()}(function k_(u){var f=u.match(Hc);return f?f[1].split(Ud):[]}(K),y)))}function Kl(u){var f=0,y=0;return function(){var K=ph(),xe=16-(K-y);if(y=K,xe>0){if(++f>=800)return arguments[0]}else f=0;return u.apply(S,arguments)}}function L_(u,f){var y=-1,K=u.length,xe=K-1;for(f=f===S?K:f;++y<f;){var je=Ov(y,xe),Qe=u[je];u[je]=u[y],u[y]=Qe}return u.length=f,u}var Zv=function Fo(u){var f=zp(u,function(K){return 500===y.size&&y.clear(),K}),y=f.cache;return f}(function(u){var f=[];return 46===u.charCodeAt(0)&&f.push(""),u.replace(nh,function(y,K,xe,je){f.push(xe?je.replace(Gc,"$1"):K||y)}),f});function bc(u){if("string"==typeof u||Kr(u))return u;var f=u+"";return"0"==f&&1/u==-Ee?"-0":f}function uu(u){if(null!=u){try{return hp.call(u)}catch{}try{return u+""}catch{}}return""}function eC(u){if(u instanceof Hn)return u.clone();var f=new us(u.__wrapped__,u.__chain__);return f.__actions__=No(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}var tC=ii(function(u,f){return yr(u)?Qd(u,Xr(f,1,yr,!0)):[]}),nC=ii(function(u,f){var y=Ws(f);return yr(y)&&(y=S),yr(u)?Qd(u,Xr(f,1,yr,!0),xn(y,2)):[]}),jr=ii(function(u,f){var y=Ws(f);return yr(y)&&(y=S),yr(u)?Qd(u,Xr(f,1,yr,!0),S,y):[]});function B_(u,f,y){var K=null==u?0:u.length;if(!K)return-1;var xe=null==y?0:qn(y);return xe<0&&(xe=Jn(K+xe,0)),Vd(u,xn(f,3),xe)}function Ih(u,f,y){var K=null==u?0:u.length;if(!K)return-1;var xe=K-1;return y!==S&&(xe=qn(y),xe=y<0?Jn(K+xe,0):Vi(xe,K-1)),Vd(u,xn(f,3),xe,!0)}function pu(u){return null!=u&&u.length?Xr(u,1):[]}function aC(u){return u&&u.length?u[0]:S}var mu=ii(function(u){var f=fn(u,ao);return f.length&&f[0]===u[0]?h_(f):[]}),EN=ii(function(u){var f=Ws(u),y=fn(u,ao);return f===Ws(y)?f=S:y.pop(),y.length&&y[0]===u[0]?h_(y,xn(f,2)):[]}),Qv=ii(function(u){var f=Ws(u),y=fn(u,ao);return(f="function"==typeof f?f:S)&&y.pop(),y.length&&y[0]===u[0]?h_(y,S,f):[]});function Ws(u){var f=null==u?0:u.length;return f?u[f-1]:S}var uC=ii(ew);function ew(u,f){return u&&u.length&&f&&f.length?Tn(u,f):u}var hC=tl(function(u,f){var y=null==u?0:u.length,K=s_(u,f);return __(u,fn(f,function(xe){return Ua(xe,y)?+xe:xe}).sort(vp)),K});function V_(u){return null==u?u:Ar.call(u)}var SN=ii(function(u){return Hs(Xr(u,1,yr,!0))}),bC=ii(function(u){var f=Ws(u);return yr(f)&&(f=S),Hs(Xr(u,1,yr,!0),xn(f,2))}),yC=ii(function(u){var f=Ws(u);return f="function"==typeof f?f:S,Hs(Xr(u,1,yr,!0),S,f)});function z_(u){if(!u||!u.length)return[];var f=0;return u=Ma(u,function(y){if(yr(y))return f=Jn(y.length,f),!0}),hv(f,function(y){return fn(u,ah(y))})}function G_(u,f){if(!u||!u.length)return[];var y=z_(u);return null==f?y:fn(y,function(K){return ls(f,S,K)})}var CN=ii(function(u,f){return yr(u)?Qd(u,f):[]}),ow=ii(function(u){return Lv(Ma(u,yr))}),TN=ii(function(u){var f=Ws(u);return yr(f)&&(f=S),Lv(Ma(u,yr),xn(f,2))}),wC=ii(function(u){var f=Ws(u);return f="function"==typeof f?f:S,Lv(Ma(u,yr),S,f)}),xC=ii(z_),IN=ii(function(u){var f=u.length,y=f>1?u[f-1]:S;return y="function"==typeof y?(u.pop(),y):S,G_(u,y)});function Np(u){var f=De(u);return f.__chain__=!0,f}function $_(u,f){return f(u)}var RN=tl(function(u){var f=u.length,y=f?u[0]:0,K=this.__wrapped__,xe=function(je){return s_(je,u)};return!(f>1||this.__actions__.length)&&K instanceof Hn&&Ua(y)?((K=K.slice(y,+y+(f?1:0))).__actions__.push({func:$_,args:[xe],thisArg:S}),new us(K,this.__chain__).thru(function(je){return f&&!je.length&&je.push(S),je})):this.thru(xe)}),cw=su(function(u,f,y){Mi.call(u,y)?++u[y]:fc(u,y,1)}),dw=Hv(B_),Bp=Hv(Ih);function uw(u,f){return(zn(u)?Fs:Hl)(u,xn(f,3))}function hw(u,f){return(zn(u)?np:mp)(u,xn(f,3))}var fw=su(function(u,f,y){Mi.call(u,y)?u[y].push(f):fc(u,y,[f])}),SC=ii(function(u,f,y){var K=-1,xe="function"==typeof f,je=kr(u)?_t(u.length):[];return Hl(u,function(Qe){je[++K]=xe?ls(f,Qe,y):tu(Qe,f,y)}),je}),CC=su(function(u,f,y){fc(u,y,f)});function Up(u,f){return(zn(u)?fn:Tv)(u,xn(f,3))}var TC=su(function(u,f,y){u[y?0:1].push(f)},function(){return[[],[]]}),_w=ii(function(u,f){if(null==u)return[];var y=f.length;return y>1&&So(u,f[0],f[1])?f=[]:y>2&&So(f[0],f[1],f[2])&&(f=[f[0]]),m_(u,Xr(f,1),[])}),Vp=ds||function(){return _o.Date.now()};function yw(u,f,y){return f=y?S:f,fs(u,C,S,S,S,S,f=u&&null==f?u.length:f)}function K_(u,f){var y;if("function"!=typeof f)throw new Ls(_);return u=qn(u),function(){return--u>0&&(y=f.apply(this,arguments)),u<=1&&(f=S),y}}var J_=ii(function(u,f,y){var K=1;if(y.length){var xe=Kc(y,ja(J_));K|=b}return fs(u,K,f,y,xe)}),Z_=ii(function(u,f,y){var K=3;if(y.length){var xe=Kc(y,ja(Z_));K|=b}return fs(f,K,u,y,xe)});function Hp(u,f,y){var K,xe,je,Qe,rt,lt,Tt=0,Mt=!1,Rt=!1,Yt=!0;if("function"!=typeof u)throw new Ls(_);function sn(lr){var Ga=K,pa=xe;return K=xe=S,Tt=lr,Qe=u.apply(pa,Ga)}function Sn(lr){var Ga=lr-lt;return lt===S||Ga>=f||Ga<0||Rt&&lr-Tt>=je}function Gn(){var lr=Vp();if(Sn(lr))return pi(lr);rt=Va(Gn,function Qn(lr){var Mb=f-(lr-lt);return Rt?Vi(Mb,je-(lr-Tt)):Mb}(lr))}function pi(lr){return rt=S,Yt&&K?sn(lr):(K=xe=S,Qe)}function xs(){var lr=Vp(),Ga=Sn(lr);if(K=arguments,xe=this,lt=lr,Ga){if(rt===S)return function Nt(lr){return Tt=lr,rt=Va(Gn,f),Mt?sn(lr):Qe}(lt);if(Rt)return Bv(rt),rt=Va(Gn,f),sn(lt)}return rt===S&&(rt=Va(Gn,f)),Qe}return f=gs(f)||0,Zi(y)&&(Mt=!!y.leading,je=(Rt="maxWait"in y)?Jn(gs(y.maxWait)||0,f):je,Yt="trailing"in y?!!y.trailing:Yt),xs.cancel=function ws(){rt!==S&&Bv(rt),Tt=0,K=lt=xe=rt=S},xs.flush=function vr(){return rt===S?Qe:pi(Vp())},xs}var Q_=ii(function(u,f){return Br(u,1,f)}),IC=ii(function(u,f,y){return Br(u,gs(f)||0,y)});function zp(u,f){if("function"!=typeof u||null!=f&&"function"!=typeof f)throw new Ls(_);var y=function(){var K=arguments,xe=f?f.apply(this,K):K[0],je=y.cache;if(je.has(xe))return je.get(xe);var Qe=u.apply(this,K);return y.cache=je.set(xe,Qe)||je,Qe};return y.cache=new(zp.Cache||uc),y}function Gp(u){if("function"!=typeof u)throw new Ls(_);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}zp.Cache=uc;var Ew=ou(function(u,f){var y=(f=1==f.length&&zn(f[0])?fn(f[0],bo(xn())):fn(Xr(f,1),bo(xn()))).length;return ii(function(K){for(var xe=-1,je=Vi(K.length,y);++xe<je;)K[xe]=f[xe].call(this,K[xe]);return ls(u,this,K)})}),Wp=ii(function(u,f){var y=Kc(f,ja(Wp));return fs(u,b,S,f,y)}),Jl=ii(function(u,f){var y=Kc(f,ja(Jl));return fs(u,64,S,f,y)}),$p=tl(function(u,f){return fs(u,256,S,S,S,f)});function ms(u,f){return u===f||u!=u&&f!=f}var tb=cu(u_),FC=cu(function(u,f){return u>=f}),Zl=f_(function(){return arguments}())?f_:function(u){return Qi(u)&&Mi.call(u,"callee")&&!Zg.call(u,"callee")},zn=_t.isArray,Cw=_S?bo(_S):function BS(u){return Qi(u)&&wo(u)==Ie};function kr(u){return null!=u&&sl(u.length)&&!Ha(u)}function yr(u){return Qi(u)&&kr(u)}var ol=IS||$h,PN=bS?bo(bS):function p_(u){return Qi(u)&&wo(u)==ie};function Kp(u){if(!Qi(u))return!1;var f=wo(u);return f==Se||"[object DOMException]"==f||"string"==typeof u.message&&"string"==typeof u.name&&!Fh(u)}function Ha(u){if(!Zi(u))return!1;var f=wo(u);return f==tt||f==ce||"[object AsyncFunction]"==f||"[object Proxy]"==f}function Oh(u){return"number"==typeof u&&u==qn(u)}function sl(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Ne}function Zi(u){var f=typeof u;return null!=u&&("object"==f||"function"==f)}function Qi(u){return null!=u&&"object"==typeof u}var Ph=St?bo(St):function Sv(u){return Qi(u)&&Ao(u)==Z};function kw(u){return"number"==typeof u||Qi(u)&&wo(u)==L}function Fh(u){if(!Qi(u)||wo(u)!=M)return!1;var f=Kt(u);if(null===f)return!0;var y=Mi.call(f,"constructor")&&f.constructor;return"function"==typeof y&&y instanceof y&&hp.call(y)==CS}var Jp=yS?bo(yS):function jS(u){return Qi(u)&&wo(u)==ze},Lh=Zt?bo(Zt):function _p(u){return Qi(u)&&Ao(u)==Xe};function yu(u){return"string"==typeof u||!zn(u)&&Qi(u)&&wo(u)==dt}function Kr(u){return"symbol"==typeof u||Qi(u)&&wo(u)==mt}var vu=rh?bo(rh):function qo(u){return Qi(u)&&sl(u.length)&&!!li[wo(u)]},rb=cu(Po),HC=cu(function(u,f){return u<=f});function Ql(u){if(!u)return[];if(kr(u))return yu(u)?Dr(u):No(u);if(oi&&u[oi])return function ap(ct){for(var At,_t=[];!(At=ct.next()).done;)_t.push(At.value);return _t}(u[oi]());var f=Ao(u);return(f==Z?dh:f==Xe?cp:wu)(u)}function $s(u){return u?(u=gs(u))===Ee||u===-Ee?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function qn(u){var f=$s(u),y=f%1;return f==f?y?f-y:f:0}function ob(u){return u?Zd(qn(u),0,pe):0}function gs(u){if("number"==typeof u)return u;if(Kr(u))return NaN;if(Zi(u)){var f="function"==typeof u.valueOf?u.valueOf():u;u=Zi(f)?f+"":f}if("string"!=typeof u)return 0===u?u:+u;u=sp(u);var y=Ri.test(u);return y||Ca.test(u)?tN(u.slice(2),y?2:8):yi.test(u)?NaN:+u}function sb(u){return da(u,bs(u))}function Ti(u){return null==u?"":Ko(u)}var zC=au(function(u,f){if(lu(f)||kr(f))da(f,Ur(f),u);else for(var y in f)Mi.call(f,y)&&Jd(u,y,f[y])}),Pw=au(function(u,f){da(f,bs(f),u)}),Zp=au(function(u,f,y,K){da(f,bs(f),u,K)}),GC=au(function(u,f,y,K){da(f,Ur(f),u,K)}),_s=tl(s_),WC=ii(function(u,f){u=ki(u);var y=-1,K=f.length,xe=K>2?f[2]:S;for(xe&&So(f[0],f[1],xe)&&(K=1);++y<K;)for(var je=f[y],Qe=bs(je),rt=-1,lt=Qe.length;++rt<lt;){var Tt=Qe[rt],Mt=u[Tt];(Mt===S||ms(Mt,Gd[Tt])&&!Mi.call(u,Tt))&&(u[Tt]=je[Tt])}return u}),$C=ii(function(u){return u.push(S,YS),ls(em,S,u)});function ab(u,f,y){var K=null==u?S:eu(u,f);return K===S?y:K}function fa(u,f){return null!=u&&O_(u,f,Sr)}var Bh=Sh(function(u,f,y){null!=f&&"function"!=typeof f.toString&&(f=hh.call(f)),u[f]=y},bb(Zo)),Fw=Sh(function(u,f,y){null!=f&&"function"!=typeof f.toString&&(f=hh.call(f)),Mi.call(u,f)?u[f].push(y):u[f]=[y]},xn),Lw=ii(tu);function Ur(u){return kr(u)?n_(u):bp(u)}function bs(u){return kr(u)?n_(u,!0):function nu(u){if(!Zi(u))return function Ci(u){var f=[];if(null!=u)for(var y in ki(u))f.push(y);return f}(u);var f=lu(u),y=[];for(var K in u)"constructor"==K&&(f||!Mi.call(u,K))||y.push(K);return y}(u)}var cb=au(function(u,f,y){ca(u,f,y)}),em=au(function(u,f,y,K){ca(u,f,y,K)}),BN=tl(function(u,f){var y={};if(null==u)return y;var K=!1;f=fn(f,function(je){return je=pc(je,u),K||(K=je.length>1),je}),da(u,Th(u),y),K&&(y=Us(y,7,D_));for(var xe=f.length;xe--;)zs(y,f[xe]);return y}),Bw=tl(function(u,f){return null==u?{}:function kv(u,f){return g_(u,f,function(y,K){return fa(u,K)})}(u,f)});function jw(u,f){if(null==u)return{};var y=fn(Th(u),function(K){return[K]});return f=xn(f),g_(u,y,function(K,xe){return f(K,xe[0])})}var lb=$l(Ur),jh=$l(bs);function wu(u){return null==u?[]:Yg(u,Ur(u))}var sT=mc(function(u,f,y){return f=f.toLowerCase(),u+(y?Hw(f):f)});function Hw(u){return Hh(Ti(u).toLowerCase())}function zw(u){return(u=Ti(u))&&u.replace(cc,xS).replace(ep,"")}var Uh=mc(function(u,f,y){return u+(y?"-":"")+f.toLowerCase()}),yt=mc(function(u,f,y){return u+(y?" ":"")+f.toLowerCase()}),Vh=Ji("toLowerCase"),Yw=mc(function(u,f,y){return u+(y?"_":"")+f.toLowerCase()}),HN=mc(function(u,f,y){return u+(y?" ":"")+Hh(f)}),dT=mc(function(u,f,y){return u+(y?" ":"")+f.toUpperCase()}),Hh=Ji("toUpperCase");function zh(u,f,y){return u=Ti(u),(f=y?S:f)===S?function Gt(ct){return JP.test(ct)}(u)?function pv(ct){return ct.match(Si)||[]}(u):function iN(ct){return ct.match(zc)||[]}(u):u.match(f)||[]}var ys=ii(function(u,f){try{return ls(u,S,f)}catch(y){return Kp(y)?y:new Vn(y)}}),rm=tl(function(u,f){return Fs(f,function(y){y=bc(y),fc(u,y,J_(u[y],u))}),u});function bb(u){return function(){return u}}var xu=T_(),hT=T_(!0);function Zo(u){return u}function yb(u){return Cv("function"==typeof u?u:Us(u,1))}var fT=ii(function(u,f){return function(y){return tu(y,u,f)}}),Jw=ii(function(u,f){return function(y){return tu(u,y,f)}});function vs(u,f,y){var K=Ur(f),xe=l_(f,K);null==y&&(!Zi(f)||!xe.length&&K.length)&&(y=f,f=u,u=this,xe=l_(f,Ur(f)));var je=!(Zi(y)&&"chain"in y&&!y.chain),Qe=Ha(u);return Fs(xe,function(rt){var lt=f[rt];u[rt]=lt,Qe&&(u.prototype[rt]=function(){var Tt=this.__chain__;if(je||Tt){var Mt=u(this.__wrapped__);return(Mt.__actions__=No(this.__actions__)).push({func:lt,args:arguments,thisArg:u}),Mt.__chain__=Tt,Mt}return lt.apply(u,Ia([this.value()],arguments))})}),u}function Cr(){}var pT=M_(fn),GN=M_(oh),WN=M_(rp);function Wh(u){return P_(u)?ah(bc(u)):function US(u){return function(f){return eu(f,u)}}(u)}var xb=Ch(),Eb=Ch(!0);function al(){return[]}function $h(){return!1}var sm=ua(function(u,f){return u+f},0),$N=Ep("ceil"),Cb=ua(function(u,f){return u/f},1),qh=Ep("floor"),yT=ua(function(u,f){return u*f},1),vT=Ep("round"),YN=ua(function(u,f){return u-f},0);return De.after=function bw(u,f){if("function"!=typeof f)throw new Ls(_);return u=qn(u),function(){if(--u<1)return f.apply(this,arguments)}},De.ary=yw,De.assign=zC,De.assignIn=Pw,De.assignInWith=Zp,De.assignWith=GC,De.at=_s,De.before=K_,De.bind=J_,De.bindAll=rm,De.bindKey=Z_,De.castArray=function kC(){if(!arguments.length)return[];var u=arguments[0];return zn(u)?u:[u]},De.chain=Np,De.chunk=function vN(u,f,y){f=(y?So(u,f,y):f===S)?1:Jn(qn(f),0);var K=null==u?0:u.length;if(!K||f<1)return[];for(var xe=0,je=0,Qe=_t(fh(K/f));xe<K;)Qe[je++]=Vs(u,xe,xe+=f);return Qe},De.compact=function wN(u){for(var f=-1,y=null==u?0:u.length,K=0,xe=[];++f<y;){var je=u[f];je&&(xe[K++]=je)}return xe},De.concat=function hu(){var u=arguments.length;if(!u)return[];for(var f=_t(u-1),y=arguments[0],K=u;K--;)f[K-1]=arguments[K];return Ia(zn(y)?No(y):[y],Xr(f,1))},De.cond=function _b(u){var f=null==u?0:u.length,y=xn();return u=f?fn(u,function(K){if("function"!=typeof K[1])throw new Ls(_);return[y(K[0]),K[1]]}):[],ii(function(K){for(var xe=-1;++xe<f;){var je=u[xe];if(ls(je[0],this,K))return ls(je[1],this,K)}})},De.conforms=function uT(u){return function La(u){var f=Ur(u);return function(y){return yh(y,u,f)}}(Us(u,1))},De.constant=bb,De.countBy=cw,De.create=function za(u,f){var y=_h(u);return null==f?y:o_(y,f)},De.curry=function vw(u,f,y){var K=fs(u,8,S,S,S,S,S,f=y?S:f);return K.placeholder=vw.placeholder,K},De.curryRight=function ww(u,f,y){var K=fs(u,16,S,S,S,S,S,f=y?S:f);return K.placeholder=ww.placeholder,K},De.debounce=Hp,De.defaults=WC,De.defaultsDeep=$C,De.defer=Q_,De.delay=IC,De.difference=tC,De.differenceBy=nC,De.differenceWith=jr,De.drop=function iC(u,f,y){var K=null==u?0:u.length;return K?Vs(u,(f=y||f===S?1:qn(f))<0?0:f,K):[]},De.dropRight=function Mh(u,f,y){var K=null==u?0:u.length;return K?Vs(u,0,(f=K-(f=y||f===S?1:qn(f)))<0?0:f):[]},De.dropRightWhile=function rC(u,f){return u&&u.length?ru(u,xn(f,3),!0,!0):[]},De.dropWhile=function Gs(u,f){return u&&u.length?ru(u,xn(f,3),!0):[]},De.fill=function fu(u,f,y,K){var xe=null==u?0:u.length;return xe?(y&&"number"!=typeof y&&So(u,f,y)&&(y=0,K=xe),function NS(u,f,y,K){var xe=u.length;for((y=qn(y))<0&&(y=-y>xe?0:xe+y),(K=K===S||K>xe?xe:qn(K))<0&&(K+=xe),K=y>K?0:ob(K);y<K;)u[y++]=f;return u}(u,f,y,K)):[]},De.filter=function lw(u,f){return(zn(u)?Ma:FS)(u,xn(f,3))},De.flatMap=function jp(u,f){return Xr(Up(u,f),1)},De.flatMapDeep=function rl(u,f){return Xr(Up(u,f),Ee)},De.flatMapDepth=function AC(u,f,y){return y=y===S?1:qn(y),Xr(Up(u,f),y)},De.flatten=pu,De.flattenDeep=function oC(u){return null!=u&&u.length?Xr(u,Ee):[]},De.flattenDepth=function xN(u,f){return null!=u&&u.length?Xr(u,f=f===S?1:qn(f)):[]},De.flip=function kh(u){return fs(u,512)},De.flow=xu,De.flowRight=hT,De.fromPairs=function sC(u){for(var f=-1,y=null==u?0:u.length,K={};++f<y;){var xe=u[f];K[xe[0]]=xe[1]}return K},De.functions=function ZC(u){return null==u?[]:l_(u,Ur(u))},De.functionsIn=function QC(u){return null==u?[]:l_(u,bs(u))},De.groupBy=fw,De.initial=function j_(u){return null!=u&&u.length?Vs(u,0,-1):[]},De.intersection=mu,De.intersectionBy=EN,De.intersectionWith=Qv,De.invert=Bh,De.invertBy=Fw,De.invokeMap=SC,De.iteratee=yb,De.keyBy=CC,De.keys=Ur,De.keysIn=bs,De.map=Up,De.mapKeys=function FN(u,f){var y={};return f=xn(f,3),hs(u,function(K,xe,je){fc(y,f(K,xe,je),K)}),y},De.mapValues=function LN(u,f){var y={};return f=xn(f,3),hs(u,function(K,xe,je){fc(y,xe,f(K,xe,je))}),y},De.matches=function vb(u){return Mv(Us(u,1))},De.matchesProperty=function Gh(u,f){return Iv(u,Us(f,1))},De.memoize=zp,De.merge=cb,De.mergeWith=em,De.method=fT,De.methodOf=Jw,De.mixin=vs,De.negate=Gp,De.nthArg=function wb(u){return u=qn(u),ii(function(f){return Rv(f,u)})},De.omit=BN,De.omitBy=function jN(u,f){return jw(u,Gp(xn(f)))},De.once=function xw(u){return K_(2,u)},De.orderBy=function pw(u,f,y,K){return null==u?[]:(zn(f)||(f=null==f?[]:[f]),zn(y=K?S:y)||(y=null==y?[]:[y]),m_(u,f,y))},De.over=pT,De.overArgs=Ew,De.overEvery=GN,De.overSome=WN,De.partial=Wp,De.partialRight=Jl,De.partition=TC,De.pick=Bw,De.pickBy=jw,De.property=Wh,De.propertyOf=function mT(u){return function(f){return null==u?S:eu(u,f)}},De.pull=uC,De.pullAll=ew,De.pullAllBy=function U_(u,f,y){return u&&u.length&&f&&f.length?Tn(u,f,xn(y,2)):u},De.pullAllWith=function Rp(u,f,y){return u&&u.length&&f&&f.length?Tn(u,f,S,y):u},De.pullAt=hC,De.range=xb,De.rangeRight=Eb,De.rearg=$p,De.reject=function X_(u,f){return(zn(u)?Ma:FS)(u,Gp(xn(f,3)))},De.remove=function gu(u,f){var y=[];if(!u||!u.length)return y;var K=-1,xe=[],je=u.length;for(f=xn(f,3);++K<je;){var Qe=u[K];f(Qe,K,u)&&(y.push(Qe),xe.push(K))}return __(u,xe),y},De.rest=function Aw(u,f){if("function"!=typeof u)throw new Ls(_);return ii(u,f=f===S?f:qn(f))},De.reverse=V_,De.sampleSize=function q_(u,f,y){return f=(y?So(u,f,y):f===S)?1:qn(f),(zn(u)?_N:iu)(u,f)},De.set=function tT(u,f,y){return null==u?u:xh(u,f,y)},De.setWith=function nT(u,f,y,K){return K="function"==typeof K?K:S,null==u?u:xh(u,f,y,K)},De.shuffle=function Co(u){return(zn(u)?bN:zS)(u)},De.slice=function kp(u,f,y){var K=null==u?0:u.length;return K?(y&&"number"!=typeof y&&So(u,f,y)?(f=0,y=K):(f=null==f?0:qn(f),y=y===S?K:qn(y)),Vs(u,f,y)):[]},De.sortBy=_w,De.sortedUniq=function mC(u){return u&&u.length?br(u):[]},De.sortedUniqBy=function _u(u,f){return u&&u.length?br(u,xn(f,2)):[]},De.split=function nm(u,f,y){return y&&"number"!=typeof y&&So(u,f,y)&&(f=y=S),(y=y===S?pe:y>>>0)?(u=Ti(u))&&("string"==typeof f||null!=f&&!Jp(f))&&!(f=Ko(f))&&Bl(u)?xo(Dr(u),0,y):u.split(f,y):[]},De.spread=function eb(u,f){if("function"!=typeof u)throw new Ls(_);return f=null==f?0:Jn(qn(f),0),ii(function(y){var K=y[f],xe=xo(y,0,f);return K&&Ia(xe,K),ls(u,this,xe)})},De.tail=function Dh(u){var f=null==u?0:u.length;return f?Vs(u,1,f):[]},De.take=function gC(u,f,y){return u&&u.length?Vs(u,0,(f=y||f===S?1:qn(f))<0?0:f):[]},De.takeRight=function AN(u,f,y){var K=null==u?0:u.length;return K?Vs(u,(f=K-(f=y||f===S?1:qn(f)))<0?0:f,K):[]},De.takeRightWhile=function iw(u,f){return u&&u.length?ru(u,xn(f,3),!1,!0):[]},De.takeWhile=function _C(u,f){return u&&u.length?ru(u,xn(f,3)):[]},De.tap=function DN(u,f){return f(u),u},De.throttle=function Yp(u,f,y){var K=!0,xe=!0;if("function"!=typeof u)throw new Ls(_);return Zi(y)&&(K="leading"in y?!!y.leading:K,xe="trailing"in y?!!y.trailing:xe),Hp(u,f,{leading:K,maxWait:f,trailing:xe})},De.thru=$_,De.toArray=Ql,De.toPairs=lb,De.toPairsIn=jh,De.toPath=function Zw(u){return zn(u)?fn(u,bc):Kr(u)?[u]:No(Zv(Ti(u)))},De.toPlainObject=sb,De.transform=function Uw(u,f,y){var K=zn(u),xe=K||ol(u)||vu(u);if(f=xn(f,4),null==y){var je=u&&u.constructor;y=xe?K?new je:[]:Zi(u)&&Ha(je)?_h(Kt(u)):{}}return(xe?Fs:hs)(u,function(Qe,rt,lt){return f(y,Qe,rt,lt)}),y},De.unary=function DC(u){return yw(u,1)},De.union=SN,De.unionBy=bC,De.unionWith=yC,De.uniq=function vC(u){return u&&u.length?Hs(u):[]},De.uniqBy=function Pp(u,f){return u&&u.length?Hs(u,xn(f,2)):[]},De.uniqWith=function rw(u,f){return f="function"==typeof f?f:S,u&&u.length?Hs(u,S,f):[]},De.unset=function db(u,f){return null==u||zs(u,f)},De.unzip=z_,De.unzipWith=G_,De.update=function iT(u,f,y){return null==u?u:yp(u,f,la(y))},De.updateWith=function Jr(u,f,y,K){return K="function"==typeof K?K:S,null==u?u:yp(u,f,la(y),K)},De.values=wu,De.valuesIn=function rT(u){return null==u?[]:Yg(u,bs(u))},De.without=CN,De.words=zh,De.wrap=function RC(u,f){return Wp(la(f),u)},De.xor=ow,De.xorBy=TN,De.xorWith=wC,De.zip=xC,De.zipObject=function W_(u,f){return y_(u||[],f||[],Jd)},De.zipObjectDeep=function MN(u,f){return y_(u||[],f||[],xh)},De.zipWith=IN,De.entries=lb,De.entriesIn=jh,De.extend=Pw,De.extendWith=Zp,vs(De,De),De.add=sm,De.attempt=ys,De.camelCase=sT,De.capitalize=Hw,De.ceil=$N,De.clamp=function ub(u,f,y){return y===S&&(y=f,f=S),y!==S&&(y=(y=gs(y))==y?y:0),f!==S&&(f=(f=gs(f))==f?f:0),Zd(gs(u),f,y)},De.clone=function OC(u){return Us(u,4)},De.cloneDeep=function NC(u){return Us(u,5)},De.cloneDeepWith=function Sw(u,f){return Us(u,5,f="function"==typeof f?f:S)},De.cloneWith=function PC(u,f){return Us(u,4,f="function"==typeof f?f:S)},De.conformsTo=function Xp(u,f){return null==f||yh(u,f,Ur(f))},De.deburr=zw,De.defaultTo=function Kw(u,f){return null==u||u!=u?f:u},De.divide=Cb,De.endsWith=function Gw(u,f,y){u=Ti(u),f=Ko(f);var K=u.length,xe=y=y===S?K:Zd(qn(y),0,K);return(y-=f.length)>=0&&u.slice(y,xe)==f},De.eq=ms,De.escape=function UN(u){return(u=Ti(u))&&as.test(u)?u.replace(Ui,qc):u},De.escapeRegExp=function VN(u){return(u=Ti(u))&&ac.test(u)?u.replace(Uc,"\\$&"):u},De.every=function bu(u,f,y){var K=zn(u)?oh:a_;return y&&So(u,f,y)&&(f=S),K(u,xn(f,3))},De.find=dw,De.findIndex=B_,De.findKey=function YC(u,f){return vS(u,xn(f,3),hs)},De.findLast=Bp,De.findLastIndex=Ih,De.findLastKey=function XC(u,f){return vS(u,xn(f,3),c_)},De.floor=qh,De.forEach=uw,De.forEachRight=hw,De.forIn=function qC(u,f){return null==u?u:vh(u,xn(f,3),bs)},De.forInRight=function KC(u,f){return null==u?u:xv(u,xn(f,3),bs)},De.forOwn=function Nw(u,f){return u&&hs(u,xn(f,3))},De.forOwnRight=function JC(u,f){return u&&c_(u,xn(f,3))},De.get=ab,De.gt=tb,De.gte=FC,De.has=function Qp(u,f){return null!=u&&O_(u,f,Ev)},De.hasIn=fa,De.head=aC,De.identity=Zo,De.includes=function Y_(u,f,y,K){u=kr(u)?u:wu(u),y=y&&!K?qn(y):0;var xe=u.length;return y<0&&(y=Jn(xe+y,0)),yu(u)?y<=xe&&u.indexOf(f,y)>-1:!!xe&&Xc(u,f,y)>-1},De.indexOf=function ps(u,f,y){var K=null==u?0:u.length;if(!K)return-1;var xe=null==y?0:qn(y);return xe<0&&(xe=Jn(K+xe,0)),Xc(u,f,xe)},De.inRange=function Vw(u,f,y){return f=$s(f),y===S?(y=f,f=0):y=$s(y),function Av(u,f,y){return u>=Vi(f,y)&&u<Jn(f,y)}(u=gs(u),f,y)},De.invoke=Lw,De.isArguments=Zl,De.isArray=zn,De.isArrayBuffer=Cw,De.isArrayLike=kr,De.isArrayLikeObject=yr,De.isBoolean=function Tw(u){return!0===u||!1===u||Qi(u)&&wo(u)==E},De.isBuffer=ol,De.isDate=PN,De.isElement=function qp(u){return Qi(u)&&1===u.nodeType&&!Fh(u)},De.isEmpty=function LC(u){if(null==u)return!0;if(kr(u)&&(zn(u)||"string"==typeof u||"function"==typeof u.splice||ol(u)||vu(u)||Zl(u)))return!u.length;var f=Ao(u);if(f==Z||f==Xe)return!u.size;if(lu(u))return!bp(u).length;for(var y in u)if(Mi.call(u,y))return!1;return!0},De.isEqual=function Mw(u,f){return wh(u,f)},De.isEqualWith=function Iw(u,f,y){var K=(y="function"==typeof y?y:S)?y(u,f):S;return K===S?wh(u,f,S,y):!!K},De.isError=Kp,De.isFinite=function nb(u){return"number"==typeof u&&_r(u)},De.isFunction=Ha,De.isInteger=Oh,De.isLength=sl,De.isMap=Ph,De.isMatch=function Dw(u,f){return u===f||gp(u,f,Wv(f))},De.isMatchWith=function ib(u,f,y){return y="function"==typeof y?y:S,gp(u,f,Wv(f),y)},De.isNaN=function Nh(u){return kw(u)&&u!=+u},De.isNative=function BC(u){if(qv(u))throw new Vn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fi(u)},De.isNil=function jC(u){return null==u},De.isNull=function Rw(u){return null===u},De.isNumber=kw,De.isObject=Zi,De.isObjectLike=Qi,De.isPlainObject=Fh,De.isRegExp=Jp,De.isSafeInteger=function Ow(u){return Oh(u)&&u>=-Ne&&u<=Ne},De.isSet=Lh,De.isString=yu,De.isSymbol=Kr,De.isTypedArray=vu,De.isUndefined=function UC(u){return u===S},De.isWeakMap=function NN(u){return Qi(u)&&Ao(u)==zt},De.isWeakSet=function VC(u){return Qi(u)&&"[object WeakSet]"==wo(u)},De.join=function cC(u,f){return null==u?"":Jt.call(u,f)},De.kebabCase=Uh,De.last=Ws,De.lastIndexOf=function lC(u,f,y){var K=null==u?0:u.length;if(!K)return-1;var xe=K;return y!==S&&(xe=(xe=qn(y))<0?Jn(K+xe,0):Vi(xe,K-1)),f==f?function lp(ct,At,_t){for(var tn=_t+1;tn--;)if(ct[tn]===At)return tn;return tn}(u,f,xe):Vd(u,op,xe,!0)},De.lowerCase=yt,De.lowerFirst=Vh,De.lt=rb,De.lte=HC,De.max=function gT(u){return u&&u.length?zl(u,Zo,u_):S},De.maxBy=function Qw(u,f){return u&&u.length?zl(u,xn(f,2),u_):S},De.mean=function _T(u){return lv(u,Zo)},De.meanBy=function bT(u,f){return lv(u,xn(f,2))},De.min=function Tb(u){return u&&u.length?zl(u,Zo,Po):S},De.minBy=function ex(u,f){return u&&u.length?zl(u,xn(f,2),Po):S},De.stubArray=al,De.stubFalse=$h,De.stubObject=function Ab(){return{}},De.stubString=function Yh(){return""},De.stubTrue=function om(){return!0},De.multiply=yT,De.nth=function dC(u,f){return u&&u.length?Rv(u,qn(f)):S},De.noConflict=function zN(){return _o._===this&&(_o._=TS),this},De.noop=Cr,De.now=Vp,De.pad=function tm(u,f,y){u=Ti(u);var K=(f=qn(f))?yo(u):0;if(!f||K>=f)return u;var xe=(f-K)/2;return Wl(jl(xe),y)+u+Wl(fh(xe),y)},De.padEnd=function Ww(u,f,y){u=Ti(u);var K=(f=qn(f))?yo(u):0;return f&&K<f?u+Wl(f-K,y):u},De.padStart=function hb(u,f,y){u=Ti(u);var K=(f=qn(f))?yo(u):0;return f&&K<f?Wl(f-K,y)+u:u},De.parseInt=function fb(u,f,y){return y||null==f?f=0:f&&(f=+f),vo(Ti(u).replace(Ol,""),f||0)},De.random=function oT(u,f,y){if(y&&"boolean"!=typeof y&&So(u,f,y)&&(f=y=S),y===S&&("boolean"==typeof f?(y=f,f=S):"boolean"==typeof u&&(y=u,u=S)),u===S&&f===S?(u=0,f=1):(u=$s(u),f===S?(f=u,u=0):f=$s(f)),u>f){var K=u;u=f,f=K}if(y||u%1||f%1){var xe=Ul();return Vi(u+xe*(f-u+eN("1e-"+((xe+"").length-1))),f)}return Ov(u,f)},De.reduce=function MC(u,f,y){var K=zn(u)?ip:wS,xe=arguments.length<3;return K(u,xn(f,4),y,xe,Hl)},De.reduceRight=function Jo(u,f,y){var K=zn(u)?$o:wS,xe=arguments.length<3;return K(u,xn(f,4),y,xe,mp)},De.repeat=function aT(u,f,y){return f=(y?So(u,f,y):f===S)?1:qn(f),b_(Ti(u),f)},De.replace=function $w(){var u=arguments,f=Ti(u[0]);return u.length<3?f:f.replace(u[1],u[2])},De.result=function eT(u,f,y){var K=-1,xe=(f=pc(f,u)).length;for(xe||(xe=1,u=S);++K<xe;){var je=null==u?S:u[bc(f[K])];je===S&&(K=xe,je=y),u=Ha(je)?je.call(u):je}return u},De.round=vT,De.runInContext=ct,De.sample=function mw(u){return(zn(u)?OS:Pv)(u)},De.size=function Rh(u){if(null==u)return 0;if(kr(u))return yu(u)?yo(u):u.length;var f=Ao(u);return f==Z||f==Xe?u.size:bp(u).length},De.snakeCase=Yw,De.some=function gw(u,f,y){var K=zn(u)?rp:kt;return y&&So(u,f,y)&&(f=S),K(u,xn(f,3))},De.sortedIndex=function fC(u,f){return di(u,f)},De.sortedIndexBy=function tw(u,f,y){return cr(u,f,xn(y,2))},De.sortedIndexOf=function H_(u,f){var y=null==u?0:u.length;if(y){var K=di(u,f);if(K<y&&ms(u[K],f))return K}return-1},De.sortedLastIndex=function Op(u,f){return di(u,f,!0)},De.sortedLastIndexBy=function nw(u,f,y){return cr(u,f,xn(y,2),!0)},De.sortedLastIndexOf=function pC(u,f){if(null!=u&&u.length){var K=di(u,f,!0)-1;if(ms(u[K],f))return K}return-1},De.startCase=HN,De.startsWith=function pb(u,f,y){return u=Ti(u),y=null==y?0:Zd(qn(y),0,u.length),f=Ko(f),u.slice(y,y+f.length)==f},De.subtract=YN,De.sum=function wT(u){return u&&u.length?uv(u,Zo):0},De.sumBy=function am(u,f){return u&&u.length?uv(u,xn(f,2)):0},De.template=function cT(u,f,y){var K=De.templateSettings;y&&So(u,f,y)&&(f=S),u=Ti(u),f=Zp({},f,K,zv);var rt,lt,xe=Zp({},f.imports,K.imports,zv),je=Ur(xe),Qe=Yg(xe,je),Tt=0,Mt=f.interpolate||mo,Rt="__p += '",Yt=Jg((f.escape||mo).source+"|"+Mt.source+"|"+(Mt===po?Nl:mo).source+"|"+(f.evaluate||mo).source+"|$","g"),sn="//# sourceURL="+(Mi.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wg+"]")+"\n";u.replace(Yt,function(Sn,Gn,pi,ws,vr,xs){return pi||(pi=ws),Rt+=u.slice(Tt,xs).replace(ge,ES),Gn&&(rt=!0,Rt+="' +\n__e("+Gn+") +\n'"),vr&&(lt=!0,Rt+="';\n"+vr+";\n__p += '"),pi&&(Rt+="' +\n((__t = ("+pi+")) == null ? '' : __t) +\n'"),Tt=xs+Sn.length,Sn}),Rt+="';\n";var Nt=Mi.call(f,"variable")&&f.variable;if(Nt){if(ih.test(Nt))throw new Vn("Invalid `variable` option passed into `_.template`")}else Rt="with (obj) {\n"+Rt+"\n}\n";Rt=(lt?Rt.replace(Dn,""):Rt).replace(mr,"$1").replace(ss,"$1;"),Rt="function("+(Nt||"obj")+") {\n"+(Nt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(rt?", __e = _.escape":"")+(lt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Rt+"return __p\n}";var Qn=ys(function(){return fi(je,sn+"return "+Rt).apply(S,Qe)});if(Qn.source=Rt,Kp(Qn))throw Qn;return Qn},De.times=function Xh(u,f){if((u=qn(u))<1||u>Ne)return[];var y=pe,K=Vi(u,pe);f=xn(f),u-=pe;for(var xe=hv(K,f);++y<u;)f(y);return xe},De.toFinite=$s,De.toInteger=qn,De.toLength=ob,De.toLower=function mb(u){return Ti(u).toLowerCase()},De.toNumber=gs,De.toSafeInteger=function ed(u){return u?Zd(qn(u),-Ne,Ne):0===u?u:0},De.toString=Ti,De.toUpper=function Xw(u){return Ti(u).toUpperCase()},De.trim=function qw(u,f,y){if((u=Ti(u))&&(y||f===S))return sp(u);if(!u||!(f=Ko(f)))return u;var K=Dr(u),xe=Dr(f);return xo(K,fv(K,xe),Xg(K,xe)+1).join("")},De.trimEnd=function td(u,f,y){if((u=Ti(u))&&(y||f===S))return u.slice(0,gi(u)+1);if(!u||!(f=Ko(f)))return u;var K=Dr(u);return xo(K,0,Xg(K,Dr(f))+1).join("")},De.trimStart=function lT(u,f,y){if((u=Ti(u))&&(y||f===S))return u.replace(Ol,"");if(!u||!(f=Ko(f)))return u;var K=Dr(u);return xo(K,fv(K,Dr(f))).join("")},De.truncate=function gb(u,f){var y=30,K="...";if(Zi(f)){var xe="separator"in f?f.separator:xe;y="length"in f?qn(f.length):y,K="omission"in f?Ko(f.omission):K}var je=(u=Ti(u)).length;if(Bl(u)){var Qe=Dr(u);je=Qe.length}if(y>=je)return u;var rt=y-yo(K);if(rt<1)return K;var lt=Qe?xo(Qe,0,rt).join(""):u.slice(0,rt);if(xe===S)return lt+K;if(Qe&&(rt+=lt.length-rt),Jp(xe)){if(u.slice(rt).search(xe)){var Tt,Mt=lt;for(xe.global||(xe=Jg(xe.source,Ti(Wc.exec(xe))+"g")),xe.lastIndex=0;Tt=xe.exec(Mt);)var Rt=Tt.index;lt=lt.slice(0,Rt===S?rt:Rt)}}else if(u.indexOf(Ko(xe),rt)!=rt){var Yt=lt.lastIndexOf(xe);Yt>-1&&(lt=lt.slice(0,Yt))}return lt+K},De.unescape=function im(u){return(u=Ti(u))&&$r.test(u)?u.replace(Wo,dp):u},De.uniqueId=function Sb(u){var f=++SS;return Ti(u)+f},De.upperCase=dT,De.upperFirst=Hh,De.each=uw,De.eachRight=hw,De.first=aC,vs(De,function(){var u={};return hs(De,function(f,y){Mi.call(De.prototype,y)||(u[y]=f)}),u}(),{chain:!1}),De.VERSION="4.17.21",Fs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){De[u].placeholder=De}),Fs(["drop","take"],function(u,f){Hn.prototype[u]=function(y){y=y===S?1:Jn(qn(y),0);var K=this.__filtered__&&!f?new Hn(this):this.clone();return K.__filtered__?K.__takeCount__=Vi(y,K.__takeCount__):K.__views__.push({size:Vi(y,pe),type:u+(K.__dir__<0?"Right":"")}),K},Hn.prototype[u+"Right"]=function(y){return this.reverse()[u](y).reverse()}}),Fs(["filter","map","takeWhile"],function(u,f){var y=f+1,K=1==y||3==y;Hn.prototype[u]=function(xe){var je=this.clone();return je.__iteratees__.push({iteratee:xn(xe,3),type:y}),je.__filtered__=je.__filtered__||K,je}}),Fs(["head","last"],function(u,f){var y="take"+(f?"Right":"");Hn.prototype[u]=function(){return this[y](1).value()[0]}}),Fs(["initial","tail"],function(u,f){var y="drop"+(f?"":"Right");Hn.prototype[u]=function(){return this.__filtered__?new Hn(this):this[y](1)}}),Hn.prototype.compact=function(){return this.filter(Zo)},Hn.prototype.find=function(u){return this.filter(u).head()},Hn.prototype.findLast=function(u){return this.reverse().find(u)},Hn.prototype.invokeMap=ii(function(u,f){return"function"==typeof u?new Hn(this):this.map(function(y){return tu(y,u,f)})}),Hn.prototype.reject=function(u){return this.filter(Gp(xn(u)))},Hn.prototype.slice=function(u,f){u=qn(u);var y=this;return y.__filtered__&&(u>0||f<0)?new Hn(y):(u<0?y=y.takeRight(-u):u&&(y=y.drop(u)),f!==S&&(y=(f=qn(f))<0?y.dropRight(-f):y.take(f-u)),y)},Hn.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Hn.prototype.toArray=function(){return this.take(pe)},hs(Hn.prototype,function(u,f){var y=/^(?:filter|find|map|reject)|While$/.test(f),K=/^(?:head|last)$/.test(f),xe=De[K?"take"+("last"==f?"Right":""):f],je=K||/^find/.test(f);xe&&(De.prototype[f]=function(){var Qe=this.__wrapped__,rt=K?[1]:arguments,lt=Qe instanceof Hn,Tt=rt[0],Mt=lt||zn(Qe),Rt=function(Gn){var pi=xe.apply(De,Ia([Gn],rt));return K&&Yt?pi[0]:pi};Mt&&y&&"function"==typeof Tt&&1!=Tt.length&&(lt=Mt=!1);var Yt=this.__chain__,Nt=je&&!Yt,Qn=lt&&!this.__actions__.length;if(!je&&Mt){Qe=Qn?Qe:new Hn(this);var Sn=u.apply(Qe,rt);return Sn.__actions__.push({func:$_,args:[Rt],thisArg:S}),new us(Sn,Yt)}return Nt&&Qn?u.apply(this,rt):(Sn=this.thru(Rt),Nt?K?Sn.value()[0]:Sn.value():Sn)})}),Fs(["pop","push","shift","sort","splice","unshift"],function(u){var f=up[u],y=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",K=/^(?:pop|shift)$/.test(u);De.prototype[u]=function(){var xe=arguments;if(K&&!this.__chain__){var je=this.value();return f.apply(zn(je)?je:[],xe)}return this[y](function(Qe){return f.apply(zn(Qe)?Qe:[],xe)})}}),hs(Hn.prototype,function(u,f){var y=De[f];if(y){var K=y.name+"";Mi.call(Pa,K)||(Pa[K]=[]),Pa[K].push({name:f,func:y})}}),Pa[Ah(S,2).name]=[{name:"wrapper",func:S}],Hn.prototype.clone=function pp(){var u=new Hn(this.__wrapped__);return u.__actions__=No(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=No(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=No(this.__views__),u},Hn.prototype.reverse=function qd(){if(this.__filtered__){var u=new Hn(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},Hn.prototype.value=function bh(){var u=this.__wrapped__.value(),f=this.__dir__,y=zn(u),K=f<0,xe=y?u.length:0,je=function Sp(u,f,y){for(var K=-1,xe=y.length;++K<xe;){var je=y[K],Qe=je.size;switch(je.type){case"drop":u+=Qe;break;case"dropRight":f-=Qe;break;case"take":f=Vi(f,u+Qe);break;case"takeRight":u=Jn(u,f-Qe)}}return{start:u,end:f}}(0,xe,this.__views__),Qe=je.start,rt=je.end,lt=rt-Qe,Tt=K?rt:Qe-1,Mt=this.__iteratees__,Rt=Mt.length,Yt=0,sn=Vi(lt,this.__takeCount__);if(!y||!K&&xe==lt&&sn==lt)return Fv(u,this.__actions__);var Nt=[];e:for(;lt--&&Yt<sn;){for(var Qn=-1,Sn=u[Tt+=f];++Qn<Rt;){var Gn=Mt[Qn],ws=Gn.type,vr=(0,Gn.iteratee)(Sn);if(2==ws)Sn=vr;else if(!vr){if(1==ws)continue e;break e}}Nt[Yt++]=Sn}return Nt},De.prototype.at=RN,De.prototype.chain=function kN(){return Np(this)},De.prototype.commit=function ON(){return new us(this.value(),this.__chain__)},De.prototype.next=function EC(){this.__values__===S&&(this.__values__=Ql(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?S:this.__values__[this.__index__++]}},De.prototype.plant=function Lp(u){for(var f,y=this;y instanceof Xd;){var K=eC(y);K.__index__=0,K.__values__=S,f?xe.__wrapped__=K:f=K;var xe=K;y=y.__wrapped__}return xe.__wrapped__=u,f},De.prototype.reverse=function sw(){var u=this.__wrapped__;if(u instanceof Hn){var f=u;return this.__actions__.length&&(f=new Hn(this)),(f=f.reverse()).__actions__.push({func:$_,args:[V_],thisArg:S}),new us(f,this.__chain__)}return this.thru(V_)},De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=function aw(){return Fv(this.__wrapped__,this.__actions__)},De.prototype.first=De.prototype.head,oi&&(De.prototype[oi]=function Fp(){return this}),De}();_o._=Jc,(J=function(){return Jc}.call(_e,T,_e,Ue))!==S&&(Ue.exports=J)}.call(this)},5249:(Ue,_e,T)=>{var J=T(549),S=J.ARRAY_BUFFER_SUPPORT,te=J.SYMBOL_SUPPORT;Ue.exports=function(ee,_){var x,F,W,R,$;if(!ee)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(ee)||S&&ArrayBuffer.isView(ee)||"string"==typeof ee||"[object Arguments]"===ee.toString())for(W=0,R=ee.length;W<R;W++)_(ee[W],W);else if("function"!=typeof ee.forEach)if(te&&Symbol.iterator in ee&&"function"!=typeof ee.next&&(ee=ee[Symbol.iterator]()),"function"!=typeof ee.next)for(F in ee)ee.hasOwnProperty(F)&&_(ee[F],F);else for(x=ee,W=0;!0!==($=x.next()).done;)_($.value,W),W++;else ee.forEach(_)}},2508:Ue=>{function _e(T){if("function"!=typeof T)throw new Error("obliterator/iterator: expecting a function!");this.next=T}typeof Symbol<"u"&&(_e.prototype[Symbol.iterator]=function(){return this}),_e.of=function(){var T=arguments,J=T.length,S=0;return new _e(function(){return S>=J?{done:!0}:{done:!1,value:T[S++]}})},_e.empty=function(){return new _e(function(){return{done:!0}})},_e.fromSequence=function(T){var J=0,S=T.length;return new _e(function(){return J>=S?{done:!0}:{done:!1,value:T[J++]}})},_e.is=function(T){return T instanceof _e||"object"==typeof T&&null!==T&&"function"==typeof T.next},Ue.exports=_e},549:(Ue,_e)=>{_e.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",_e.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(Ue,_e,T)=>{var J=T(2508),S=T(5249);function te(){this.clear()}te.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},te.prototype.enqueue=function(U){return this.items.push(U),++this.size},te.prototype.dequeue=function(){if(this.size){var U=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,U}},te.prototype.peek=function(){if(this.size)return this.items[this.offset]},te.prototype.forEach=function(U,ee){ee=arguments.length>1?ee:this;for(var _=this.offset,x=0,F=this.items.length;_<F;_++,x++)U.call(ee,this.items[_],x,this)},te.prototype.toArray=function(){return this.items.slice(this.offset)},te.prototype.values=function(){var U=this.items,ee=this.offset;return new J(function(){if(ee>=U.length)return{done:!0};var _=U[ee];return ee++,{value:_,done:!1}})},te.prototype.entries=function(){var U=this.items,ee=this.offset,_=0;return new J(function(){if(ee>=U.length)return{done:!0};var x=U[ee];return ee++,{value:[_++,x],done:!1}})},typeof Symbol<"u"&&(te.prototype[Symbol.iterator]=te.prototype.values),te.prototype.toString=function(){return this.toArray().join(",")},te.prototype.toJSON=function(){return this.toArray()},te.prototype.inspect=function(){var U=this.toArray();return Object.defineProperty(U,"constructor",{value:te,enumerable:!1}),U},typeof Symbol<"u"&&(te.prototype[Symbol.for("nodejs.util.inspect.custom")]=te.prototype.inspect),te.from=function(U){var ee=new te;return S(U,function(_){ee.enqueue(_)}),ee},te.of=function(){return te.from(arguments)},Ue.exports=te},5020:Ue=>{Ue.exports=function _e(T,J,S){function te(_,x){if(!J[_]){if(!T[_]){if(U)return U(_,!0);throw new Error("Cannot find module '"+_+"'")}x=J[_]={exports:{}},T[_][0].call(x.exports,function(W){return te(T[_][1][W]||W)},x,x.exports,_e,T,J,S)}return J[_].exports}for(var U=void 0,ee=0;ee<S.length;ee++)te(S[ee]);return te}({1:[function(_e,T,J){(function(S,te,U,ee,_,x,F,W,R){"use strict";var $=_e("crypto");function de(X,B){var b;return void 0===(b="passthrough"!==(B=ae(X,B)).algorithm?$.createHash(B.algorithm):new ne).write&&(b.write=b.update,b.end=b.update),oe(B,b).dispatch(X),b.update||b.end(""),b.digest?b.digest("buffer"===B.encoding?void 0:B.encoding):(X=b.read(),"buffer"!==B.encoding?X.toString(B.encoding):X)}(J=T.exports=de).sha1=function(X){return de(X)},J.keys=function(X){return de(X,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},J.MD5=function(X){return de(X,{algorithm:"md5",encoding:"hex"})},J.keysMD5=function(X){return de(X,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var I=$.getHashes?$.getHashes().slice():["sha1","md5"],H=(I.push("passthrough"),["buffer","hex","binary","base64"]);function ae(X,B){var b={};if(b.algorithm=(B=B||{}).algorithm||"sha1",b.encoding=B.encoding||"hex",b.excludeValues=!!B.excludeValues,b.algorithm=b.algorithm.toLowerCase(),b.encoding=b.encoding.toLowerCase(),b.ignoreUnknown=!0===B.ignoreUnknown,b.respectType=!1!==B.respectType,b.respectFunctionNames=!1!==B.respectFunctionNames,b.respectFunctionProperties=!1!==B.respectFunctionProperties,b.unorderedArrays=!0===B.unorderedArrays,b.unorderedSets=!1!==B.unorderedSets,b.unorderedObjects=!1!==B.unorderedObjects,b.replacer=B.replacer||void 0,b.excludeKeys=B.excludeKeys||void 0,void 0===X)throw new Error("Object argument required.");for(var O=0;O<I.length;++O)I[O].toLowerCase()===b.algorithm.toLowerCase()&&(b.algorithm=I[O]);if(-1===I.indexOf(b.algorithm))throw new Error('Algorithm "'+b.algorithm+'"  not supported. supported values: '+I.join(", "));if(-1===H.indexOf(b.encoding)&&"passthrough"!==b.algorithm)throw new Error('Encoding "'+b.encoding+'"  not supported. supported values: '+H.join(", "));return b}function q(X){if("function"==typeof X)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(X))}function oe(X,B,b){function O(C){return B.update?B.update(C,"utf8"):B.write(C,"utf8")}return b=b||[],{dispatch:function(C){return this["_"+(null===(C=X.replacer?X.replacer(C):C)?"null":typeof C)](C)},_object:function(C){var he,V=Object.prototype.toString.call(C),Te=/\[object (.*)\]/i.exec(V);if(Te=(Te=Te?Te[1]:"unknown:["+V+"]").toLowerCase(),0<=(V=b.indexOf(C)))return this.dispatch("[CIRCULAR:"+V+"]");if(b.push(C),void 0!==U&&U.isBuffer&&U.isBuffer(C))return O("buffer:"),O(C);if("object"===Te||"function"===Te||"asyncfunction"===Te)return V=Object.keys(C),X.unorderedObjects&&(V=V.sort()),!1===X.respectType||q(C)||V.splice(0,0,"prototype","__proto__","constructor"),X.excludeKeys&&(V=V.filter(function(se){return!X.excludeKeys(se)})),O("object:"+V.length+":"),he=this,V.forEach(function(se){he.dispatch(se),O(":"),X.excludeValues||he.dispatch(C[se]),O(",")});if(!this["_"+Te]){if(X.ignoreUnknown)return O("["+Te+"]");throw new Error('Unknown object type "'+Te+'"')}this["_"+Te](C)},_array:function(C,se){se=void 0!==se?se:!1!==X.unorderedArrays;var V=this;if(O("array:"+C.length+":"),!se||C.length<=1)return C.forEach(function(Ce){return V.dispatch(Ce)});var Te=[];return se=C.map(function(Ce){var Re=new ne,ke=b.slice();return oe(X,Re,ke).dispatch(Ce),Te=Te.concat(ke.slice(b.length)),Re.read().toString()}),b=b.concat(Te),se.sort(),this._array(se,!1)},_date:function(C){return O("date:"+C.toJSON())},_symbol:function(C){return O("symbol:"+C.toString())},_error:function(C){return O("error:"+C.toString())},_boolean:function(C){return O("bool:"+C.toString())},_string:function(C){O("string:"+C.length+":"),O(C.toString())},_function:function(C){O("fn:"),q(C)?this.dispatch("[native]"):this.dispatch(C.toString()),!1!==X.respectFunctionNames&&this.dispatch("function-name:"+String(C.name)),X.respectFunctionProperties&&this._object(C)},_number:function(C){return O("number:"+C.toString())},_xml:function(C){return O("xml:"+C.toString())},_null:function(){return O("Null")},_undefined:function(){return O("Undefined")},_regexp:function(C){return O("regex:"+C.toString())},_uint8array:function(C){return O("uint8array:"),this.dispatch(Array.prototype.slice.call(C))},_uint8clampedarray:function(C){return O("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(C))},_int8array:function(C){return O("int8array:"),this.dispatch(Array.prototype.slice.call(C))},_uint16array:function(C){return O("uint16array:"),this.dispatch(Array.prototype.slice.call(C))},_int16array:function(C){return O("int16array:"),this.dispatch(Array.prototype.slice.call(C))},_uint32array:function(C){return O("uint32array:"),this.dispatch(Array.prototype.slice.call(C))},_int32array:function(C){return O("int32array:"),this.dispatch(Array.prototype.slice.call(C))},_float32array:function(C){return O("float32array:"),this.dispatch(Array.prototype.slice.call(C))},_float64array:function(C){return O("float64array:"),this.dispatch(Array.prototype.slice.call(C))},_arraybuffer:function(C){return O("arraybuffer:"),this.dispatch(new Uint8Array(C))},_url:function(C){return O("url:"+C.toString())},_map:function(C){return O("map:"),C=Array.from(C),this._array(C,!1!==X.unorderedSets)},_set:function(C){return O("set:"),C=Array.from(C),this._array(C,!1!==X.unorderedSets)},_file:function(C){return O("file:"),this.dispatch([C.name,C.size,C.type,C.lastModfied])},_blob:function(){if(X.ignoreUnknown)return O("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return O("domwindow")},_bigint:function(C){return O("bigint:"+C.toString())},_process:function(){return O("process")},_timer:function(){return O("timer")},_pipe:function(){return O("pipe")},_tcp:function(){return O("tcp")},_udp:function(){return O("udp")},_tty:function(){return O("tty")},_statwatcher:function(){return O("statwatcher")},_securecontext:function(){return O("securecontext")},_connection:function(){return O("connection")},_zlib:function(){return O("zlib")},_context:function(){return O("context")},_nodescript:function(){return O("nodescript")},_httpparser:function(){return O("httpparser")},_dataview:function(){return O("dataview")},_signal:function(){return O("signal")},_fsevent:function(){return O("fsevent")},_tlswrap:function(){return O("tlswrap")}}}function ne(){return{buf:"",write:function(X){this.buf+=X},end:function(X){this.buf+=X},read:function(){return this.buf}}}J.writeToStream=function(X,B,b){return void 0===b&&(b=B,B={}),oe(B=ae(X,B),b).dispatch(X)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(_e,T,J){(function(S,te,U,ee,_,x,F,W,R){!function($){"use strict";var de=typeof Uint8Array<"u"?Uint8Array:Array,I="+".charCodeAt(0),H="/".charCodeAt(0),ae="0".charCodeAt(0),q="a".charCodeAt(0),oe="A".charCodeAt(0),ne="-".charCodeAt(0),X="_".charCodeAt(0);function B(b){return(b=b.charCodeAt(0))===I||b===ne?62:b===H||b===X?63:b<ae?-1:b<ae+10?b-ae+26+26:b<oe+26?b-oe:b<q+26?b-q+26:void 0}$.toByteArray=function(b){var O,C;if(0<b.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var he="="===b.charAt((he=b.length)-2)?2:"="===b.charAt(he-1)?1:0,V=new de(3*b.length/4-he),Te=0<he?b.length-4:b.length,se=0;function Ce(Re){V[se++]=Re}for(O=0;O<Te;O+=4,0)Ce((16711680&(C=B(b.charAt(O))<<18|B(b.charAt(O+1))<<12|B(b.charAt(O+2))<<6|B(b.charAt(O+3))))>>16),Ce((65280&C)>>8),Ce(255&C);return 2==he?Ce(255&(C=B(b.charAt(O))<<2|B(b.charAt(O+1))>>4)):1==he&&(Ce((C=B(b.charAt(O))<<10|B(b.charAt(O+1))<<4|B(b.charAt(O+2))>>2)>>8&255),Ce(255&C)),V},$.fromByteArray=function(b){var O,C,he,V,Te=b.length%3,se="";function Ce(Re){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Re)}for(O=0,he=b.length-Te;O<he;O+=3)se+=Ce((V=C=(b[O]<<16)+(b[O+1]<<8)+b[O+2])>>18&63)+Ce(V>>12&63)+Ce(V>>6&63)+Ce(63&V);switch(Te){case 1:se=(se+=Ce((C=b[b.length-1])>>2))+Ce(C<<4&63)+"==";break;case 2:se=(se=(se+=Ce((C=(b[b.length-2]<<8)+b[b.length-1])>>10))+Ce(C>>4&63))+Ce(C<<2&63)+"="}return se}}(void 0===J?this.base64js={}:J)}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(_e,T,J){(function(S,te,I,ee,_,x,F,W,R){var $=_e("base64-js"),de=_e("ieee754");function I(le,N,E){if(!(this instanceof I))return new I(le,N,E);var ie,z,Se,tt,ce=typeof le;if("base64"===N&&"string"==ce)for(le=(tt=le).trim?tt.trim():tt.replace(/^\s+|\s+$/g,"");le.length%4!=0;)le+="=";if("number"==ce)ie=et(le);else if("string"==ce)ie=I.byteLength(le,N);else{if("object"!=ce)throw new Error("First argument needs to be a number, array or string.");ie=et(le.length)}if(I._useTypedArrays?z=I._augment(new Uint8Array(ie)):((z=this).length=ie,z._isBuffer=!0),I._useTypedArrays&&"number"==typeof le.byteLength)z._set(le);else if(qe(tt=le)||I.isBuffer(tt)||tt&&"object"==typeof tt&&"number"==typeof tt.length)for(Se=0;Se<ie;Se++)z[Se]=I.isBuffer(le)?le.readUInt8(Se):le[Se];else if("string"==ce)z.write(le,0,N);else if("number"==ce&&!I._useTypedArrays&&!E)for(Se=0;Se<ie;Se++)z[Se]=0;return z}function oe(le,N,E,Se){var z;if(Se||(Ze("boolean"==typeof E,"missing or invalid endian"),Ze(null!=N,"missing offset"),Ze(N+1<le.length,"Trying to read beyond buffer length")),!((Se=le.length)<=N))return E?(z=le[N],N+1<Se&&(z|=le[N+1]<<8)):(z=le[N]<<8,N+1<Se&&(z|=le[N+1])),z}function ne(le,N,E,Se){var z;if(Se||(Ze("boolean"==typeof E,"missing or invalid endian"),Ze(null!=N,"missing offset"),Ze(N+3<le.length,"Trying to read beyond buffer length")),!((Se=le.length)<=N))return E?(N+2<Se&&(z=le[N+2]<<16),N+1<Se&&(z|=le[N+1]<<8),z|=le[N],N+3<Se&&(z+=le[N+3]<<24>>>0)):(N+1<Se&&(z=le[N+1]<<16),N+2<Se&&(z|=le[N+2]<<8),N+3<Se&&(z|=le[N+3]),z+=le[N]<<24>>>0),z}function X(le,N,E,ie){if(ie||(Ze("boolean"==typeof E,"missing or invalid endian"),Ze(null!=N,"missing offset"),Ze(N+1<le.length,"Trying to read beyond buffer length")),!(le.length<=N))return 32768&(ie=oe(le,N,E,!0))?-1*(65535-ie+1):ie}function B(le,N,E,ie){if(ie||(Ze("boolean"==typeof E,"missing or invalid endian"),Ze(null!=N,"missing offset"),Ze(N+3<le.length,"Trying to read beyond buffer length")),!(le.length<=N))return 2147483648&(ie=ne(le,N,E,!0))?-1*(4294967295-ie+1):ie}function b(le,N,E,ie){return ie||(Ze("boolean"==typeof E,"missing or invalid endian"),Ze(N+3<le.length,"Trying to read beyond buffer length")),de.read(le,N,E,23,4)}function O(le,N,E,ie){return ie||(Ze("boolean"==typeof E,"missing or invalid endian"),Ze(N+7<le.length,"Trying to read beyond buffer length")),de.read(le,N,E,52,8)}function C(le,N,E,ie,z){if(z||(Ze(null!=N,"missing value"),Ze("boolean"==typeof ie,"missing or invalid endian"),Ze(null!=E,"missing offset"),Ze(E+1<le.length,"trying to write beyond buffer length"),Ae(N,65535)),!((z=le.length)<=E))for(var Se=0,tt=Math.min(z-E,2);Se<tt;Se++)le[E+Se]=(N&255<<8*(ie?Se:1-Se))>>>8*(ie?Se:1-Se)}function he(le,N,E,ie,z){if(z||(Ze(null!=N,"missing value"),Ze("boolean"==typeof ie,"missing or invalid endian"),Ze(null!=E,"missing offset"),Ze(E+3<le.length,"trying to write beyond buffer length"),Ae(N,4294967295)),!((z=le.length)<=E))for(var Se=0,tt=Math.min(z-E,4);Se<tt;Se++)le[E+Se]=N>>>8*(ie?Se:3-Se)&255}function V(le,N,E,ie,z){z||(Ze(null!=N,"missing value"),Ze("boolean"==typeof ie,"missing or invalid endian"),Ze(null!=E,"missing offset"),Ze(E+1<le.length,"Trying to write beyond buffer length"),Ye(N,32767,-32768)),le.length<=E||C(le,0<=N?N:65535+N+1,E,ie,z)}function Te(le,N,E,ie,z){z||(Ze(null!=N,"missing value"),Ze("boolean"==typeof ie,"missing or invalid endian"),Ze(null!=E,"missing offset"),Ze(E+3<le.length,"Trying to write beyond buffer length"),Ye(N,2147483647,-2147483648)),le.length<=E||he(le,0<=N?N:4294967295+N+1,E,ie,z)}function se(le,N,E,ie,z){z||(Ze(null!=N,"missing value"),Ze("boolean"==typeof ie,"missing or invalid endian"),Ze(null!=E,"missing offset"),Ze(E+3<le.length,"Trying to write beyond buffer length"),st(N,34028234663852886e22,-34028234663852886e22)),le.length<=E||de.write(le,N,E,ie,23,4)}function Ce(le,N,E,ie,z){z||(Ze(null!=N,"missing value"),Ze("boolean"==typeof ie,"missing or invalid endian"),Ze(null!=E,"missing offset"),Ze(E+7<le.length,"Trying to write beyond buffer length"),st(N,17976931348623157e292,-17976931348623157e292)),le.length<=E||de.write(le,N,E,ie,52,8)}J.Buffer=I,J.SlowBuffer=I,J.INSPECT_MAX_BYTES=50,I.poolSize=8192,I._useTypedArrays=function(){try{var le=new ArrayBuffer(0),N=new Uint8Array(le);return N.foo=function(){return 42},42===N.foo()&&"function"==typeof N.subarray}catch{return!1}}(),I.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},I.isBuffer=function(le){return!(null==le||!le._isBuffer)},I.byteLength=function(le,N){var E;switch(le+="",N||"utf8"){case"hex":E=le.length/2;break;case"utf8":case"utf-8":E=Ne(le).length;break;case"ascii":case"binary":case"raw":E=le.length;break;case"base64":E=Pe(le).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":E=2*le.length;break;default:throw new Error("Unknown encoding")}return E},I.concat=function(le,N){if(Ze(qe(le),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===le.length)return new I(0);if(1===le.length)return le[0];if("number"!=typeof N)for(z=N=0;z<le.length;z++)N+=le[z].length;for(var E=new I(N),ie=0,z=0;z<le.length;z++){var Se=le[z];Se.copy(E,ie),ie+=Se.length}return E},I.prototype.write=function(le,N,E,ie){isFinite(N)?isFinite(E)||(ie=E,E=void 0):(Z=ie,ie=N,N=E,E=Z),N=Number(N)||0;var z,Se,tt,ce,Z=this.length-N;switch((!E||Z<(E=Number(E)))&&(E=Z),ie=String(ie||"utf8").toLowerCase()){case"hex":z=function(L,w,M,Q){M=Number(M)||0;var fe=L.length-M;(!Q||fe<(Q=Number(Q)))&&(Q=fe),Ze((fe=w.length)%2==0,"Invalid hex string"),fe/2<Q&&(Q=fe/2);for(var ze=0;ze<Q;ze++){var Xe=parseInt(w.substr(2*ze,2),16);Ze(!isNaN(Xe),"Invalid hex string"),L[M+ze]=Xe}return I._charsWritten=2*ze,ze}(this,le,N,E);break;case"utf8":case"utf-8":Se=this,tt=N,ce=E,z=I._charsWritten=He(Ne(le),Se,tt,ce);break;case"ascii":case"binary":z=function H(le,N,E,ie){return I._charsWritten=He(function(z){for(var Se=[],tt=0;tt<z.length;tt++)Se.push(255&z.charCodeAt(tt));return Se}(N),le,E,ie)}(this,le,N,E);break;case"base64":Se=this,tt=N,ce=E,z=I._charsWritten=He(Pe(le),Se,tt,ce);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":z=function ae(le,N,E,ie){return I._charsWritten=He(function(z){for(var Se,tt,ce=[],Z=0;Z<z.length;Z++)Se=(tt=z.charCodeAt(Z))>>8,ce.push(tt%=256),ce.push(Se);return ce}(N),le,E,ie)}(this,le,N,E);break;default:throw new Error("Unknown encoding")}return z},I.prototype.toString=function(le,N,E){var ie,z,Se,tt,ce=this;if(le=String(le||"utf8").toLowerCase(),N=Number(N)||0,(E=void 0!==E?Number(E):ce.length)===N)return"";switch(le){case"hex":ie=function(Z,L,w){var M=Z.length;(!L||L<0)&&(L=0),(!w||w<0||M<w)&&(w=M);for(var Q="",fe=L;fe<w;fe++)Q+=Ee(Z[fe]);return Q}(ce,N,E);break;case"utf8":case"utf-8":ie=function(Z,L,w){var M="",Q="";w=Math.min(Z.length,w);for(var fe=L;fe<w;fe++)Z[fe]<=127?(M+=pe(Q)+String.fromCharCode(Z[fe]),Q=""):Q+="%"+Z[fe].toString(16);return M+pe(Q)}(ce,N,E);break;case"ascii":case"binary":ie=function q(le,N,E){var ie="";E=Math.min(le.length,E);for(var z=N;z<E;z++)ie+=String.fromCharCode(le[z]);return ie}(ce,N,E);break;case"base64":z=ce,tt=E,ie=0===(Se=N)&&tt===z.length?$.fromByteArray(z):$.fromByteArray(z.slice(Se,tt));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=function(Z,L,w){for(var M=Z.slice(L,w),Q="",fe=0;fe<M.length;fe+=2)Q+=String.fromCharCode(M[fe]+256*M[fe+1]);return Q}(ce,N,E);break;default:throw new Error("Unknown encoding")}return ie},I.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},I.prototype.copy=function(le,N,E,ie){if(N=N||0,(ie=ie||0===ie?ie:this.length)!==(E=E||0)&&0!==le.length&&0!==this.length){Ze(E<=ie,"sourceEnd < sourceStart"),Ze(0<=N&&N<le.length,"targetStart out of bounds"),Ze(0<=E&&E<this.length,"sourceStart out of bounds"),Ze(0<=ie&&ie<=this.length,"sourceEnd out of bounds"),ie>this.length&&(ie=this.length);var z=(ie=le.length-N<ie-E?le.length-N+E:ie)-E;if(z<100||!I._useTypedArrays)for(var Se=0;Se<z;Se++)le[Se+N]=this[Se+E];else le._set(this.subarray(E,E+z),N)}},I.prototype.slice=function(le,N){var E=this.length;if(le=ke(le,E,0),N=ke(N,E,E),I._useTypedArrays)return I._augment(this.subarray(le,N));for(var ie=N-le,z=new I(ie,void 0,!0),Se=0;Se<ie;Se++)z[Se]=this[Se+le];return z},I.prototype.get=function(le){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(le)},I.prototype.set=function(le,N){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(le,N)},I.prototype.readUInt8=function(le,N){if(N||(Ze(null!=le,"missing offset"),Ze(le<this.length,"Trying to read beyond buffer length")),!(le>=this.length))return this[le]},I.prototype.readUInt16LE=function(le,N){return oe(this,le,!0,N)},I.prototype.readUInt16BE=function(le,N){return oe(this,le,!1,N)},I.prototype.readUInt32LE=function(le,N){return ne(this,le,!0,N)},I.prototype.readUInt32BE=function(le,N){return ne(this,le,!1,N)},I.prototype.readInt8=function(le,N){if(N||(Ze(null!=le,"missing offset"),Ze(le<this.length,"Trying to read beyond buffer length")),!(le>=this.length))return 128&this[le]?-1*(255-this[le]+1):this[le]},I.prototype.readInt16LE=function(le,N){return X(this,le,!0,N)},I.prototype.readInt16BE=function(le,N){return X(this,le,!1,N)},I.prototype.readInt32LE=function(le,N){return B(this,le,!0,N)},I.prototype.readInt32BE=function(le,N){return B(this,le,!1,N)},I.prototype.readFloatLE=function(le,N){return b(this,le,!0,N)},I.prototype.readFloatBE=function(le,N){return b(this,le,!1,N)},I.prototype.readDoubleLE=function(le,N){return O(this,le,!0,N)},I.prototype.readDoubleBE=function(le,N){return O(this,le,!1,N)},I.prototype.writeUInt8=function(le,N,E){E||(Ze(null!=le,"missing value"),Ze(null!=N,"missing offset"),Ze(N<this.length,"trying to write beyond buffer length"),Ae(le,255)),N>=this.length||(this[N]=le)},I.prototype.writeUInt16LE=function(le,N,E){C(this,le,N,!0,E)},I.prototype.writeUInt16BE=function(le,N,E){C(this,le,N,!1,E)},I.prototype.writeUInt32LE=function(le,N,E){he(this,le,N,!0,E)},I.prototype.writeUInt32BE=function(le,N,E){he(this,le,N,!1,E)},I.prototype.writeInt8=function(le,N,E){E||(Ze(null!=le,"missing value"),Ze(null!=N,"missing offset"),Ze(N<this.length,"Trying to write beyond buffer length"),Ye(le,127,-128)),N>=this.length||this.writeUInt8(0<=le?le:255+le+1,N,E)},I.prototype.writeInt16LE=function(le,N,E){V(this,le,N,!0,E)},I.prototype.writeInt16BE=function(le,N,E){V(this,le,N,!1,E)},I.prototype.writeInt32LE=function(le,N,E){Te(this,le,N,!0,E)},I.prototype.writeInt32BE=function(le,N,E){Te(this,le,N,!1,E)},I.prototype.writeFloatLE=function(le,N,E){se(this,le,N,!0,E)},I.prototype.writeFloatBE=function(le,N,E){se(this,le,N,!1,E)},I.prototype.writeDoubleLE=function(le,N,E){Ce(this,le,N,!0,E)},I.prototype.writeDoubleBE=function(le,N,E){Ce(this,le,N,!1,E)},I.prototype.fill=function(le,N,E){if(N=N||0,E=E||this.length,Ze("number"==typeof(le="string"==typeof(le=le||0)?le.charCodeAt(0):le)&&!isNaN(le),"value is not a number"),Ze(N<=E,"end < start"),E!==N&&0!==this.length){Ze(0<=N&&N<this.length,"start out of bounds"),Ze(0<=E&&E<=this.length,"end out of bounds");for(var ie=N;ie<E;ie++)this[ie]=le}},I.prototype.inspect=function(){for(var le=[],N=this.length,E=0;E<N;E++)if(le[E]=Ee(this[E]),E===J.INSPECT_MAX_BYTES){le[E+1]="...";break}return"<Buffer "+le.join(" ")+">"},I.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(I._useTypedArrays)return new I(this).buffer;for(var le=new Uint8Array(this.length),N=0,E=le.length;N<E;N+=1)le[N]=this[N];return le.buffer};var Re=I.prototype;function ke(le,N,E){return"number"!=typeof le?E:N<=(le=~~le)?N:0<=le||0<=(le+=N)?le:0}function et(le){return(le=~~Math.ceil(+le))<0?0:le}function qe(le){return(Array.isArray||function(N){return"[object Array]"===Object.prototype.toString.call(N)})(le)}function Ee(le){return le<16?"0"+le.toString(16):le.toString(16)}function Ne(le){for(var N=[],E=0;E<le.length;E++){var ie=le.charCodeAt(E);if(ie<=127)N.push(le.charCodeAt(E));else for(var z=E,Se=(55296<=ie&&ie<=57343&&E++,encodeURIComponent(le.slice(z,E+1)).substr(1).split("%")),tt=0;tt<Se.length;tt++)N.push(parseInt(Se[tt],16))}return N}function Pe(le){return $.toByteArray(le)}function He(le,N,E,ie){for(var z=0;z<ie&&!(z+E>=N.length||z>=le.length);z++)N[z+E]=le[z];return z}function pe(le){try{return decodeURIComponent(le)}catch{return String.fromCharCode(65533)}}function Ae(le,N){Ze("number"==typeof le,"cannot write a non-number as a number"),Ze(0<=le,"specified a negative value for writing an unsigned value"),Ze(le<=N,"value is larger than maximum value for type"),Ze(Math.floor(le)===le,"value has a fractional component")}function Ye(le,N,E){Ze("number"==typeof le,"cannot write a non-number as a number"),Ze(le<=N,"value larger than maximum allowed value"),Ze(E<=le,"value smaller than minimum allowed value"),Ze(Math.floor(le)===le,"value has a fractional component")}function st(le,N,E){Ze("number"==typeof le,"cannot write a non-number as a number"),Ze(le<=N,"value larger than maximum allowed value"),Ze(E<=le,"value smaller than minimum allowed value")}function Ze(le,N){if(!le)throw new Error(N||"Failed assertion")}I._augment=function(le){return le._isBuffer=!0,le._get=le.get,le._set=le.set,le.get=Re.get,le.set=Re.set,le.write=Re.write,le.toString=Re.toString,le.toLocaleString=Re.toString,le.toJSON=Re.toJSON,le.copy=Re.copy,le.slice=Re.slice,le.readUInt8=Re.readUInt8,le.readUInt16LE=Re.readUInt16LE,le.readUInt16BE=Re.readUInt16BE,le.readUInt32LE=Re.readUInt32LE,le.readUInt32BE=Re.readUInt32BE,le.readInt8=Re.readInt8,le.readInt16LE=Re.readInt16LE,le.readInt16BE=Re.readInt16BE,le.readInt32LE=Re.readInt32LE,le.readInt32BE=Re.readInt32BE,le.readFloatLE=Re.readFloatLE,le.readFloatBE=Re.readFloatBE,le.readDoubleLE=Re.readDoubleLE,le.readDoubleBE=Re.readDoubleBE,le.writeUInt8=Re.writeUInt8,le.writeUInt16LE=Re.writeUInt16LE,le.writeUInt16BE=Re.writeUInt16BE,le.writeUInt32LE=Re.writeUInt32LE,le.writeUInt32BE=Re.writeUInt32BE,le.writeInt8=Re.writeInt8,le.writeInt16LE=Re.writeInt16LE,le.writeInt16BE=Re.writeInt16BE,le.writeInt32LE=Re.writeInt32LE,le.writeInt32BE=Re.writeInt32BE,le.writeFloatLE=Re.writeFloatLE,le.writeFloatBE=Re.writeFloatBE,le.writeDoubleLE=Re.writeDoubleLE,le.writeDoubleBE=Re.writeDoubleBE,le.fill=Re.fill,le.inspect=Re.inspect,le.toArrayBuffer=Re.toArrayBuffer,le}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(_e,T,J){(function(S,te,$,ee,_,x,F,W,R){$=_e("buffer").Buffer;var I=new $(4);I.fill(0),T.exports={hash:function(H,ae,q,oe){for(var ne=ae(function(C,he){C.length%4!=0&&(C=$.concat([C,I],C.length+(4-C.length%4)));for(var Te=[],se=he?C.readInt32BE:C.readInt32LE,Ce=0;Ce<C.length;Ce+=4)Te.push(se.call(C,Ce));return Te}(H=$.isBuffer(H)?H:new $(H),oe),8*H.length),X=(ae=oe,new $(q)),B=ae?X.writeInt32BE:X.writeInt32LE,b=0;b<ne.length;b++)B.call(X,ne[b],4*b,!0);return X}}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(_e,T,J){(function(S,te,$,ee,_,x,F,W,R){$=_e("buffer").Buffer;var de=_e("./sha"),I=_e("./sha256"),H=_e("./rng"),ae={sha1:de,sha256:I,md5:_e("./md5")},q=64,oe=new $(q);function ne(C,he){var V=ae[C=C||"sha1"],Te=[];return V||X("algorithm:",C,"is not yet supported"),{update:function(se){return $.isBuffer(se)||(se=new $(se)),Te.push(se),this},digest:function(se){var Ce=$.concat(Te);return Ce=he?function(Re,ke,et){$.isBuffer(ke)||(ke=new $(ke)),$.isBuffer(et)||(et=new $(et)),ke.length>q?ke=Re(ke):ke.length<q&&(ke=$.concat([ke,oe],q));for(var qe=new $(q),Ee=new $(q),Ne=0;Ne<q;Ne++)qe[Ne]=54^ke[Ne],Ee[Ne]=92^ke[Ne];return et=Re($.concat([qe,et])),Re($.concat([Ee,et]))}(V,he,Ce):V(Ce),Te=null,se?Ce.toString(se):Ce}}}function X(){var C=[].slice.call(arguments).join(" ");throw new Error([C,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}oe.fill(0),J.createHash=function(C){return ne(C)},J.createHmac=ne,J.randomBytes=function(C,he){if(!he||!he.call)return new $(H(C));try{he.call(this,void 0,new $(H(C)))}catch(V){he(V)}};var B,b=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],O=function(C){J[C]=function(){X("sorry,",C,"is not implemented yet")}};for(B in b)O(b[B])}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(_e,T,J){(function(S,te,U,ee,_,x,F,W,R){var $=_e("./helpers");function de(X,B){X[B>>5]|=128<<B%32,X[14+(B+64>>>9<<4)]=B;for(var b=1732584193,O=-271733879,C=-1732584194,he=271733878,V=0;V<X.length;V+=16){var Te=b,se=O,Ce=C,Re=he;b=H(b,O,C,he,X[V+0],7,-680876936),he=H(he,b,O,C,X[V+1],12,-389564586),C=H(C,he,b,O,X[V+2],17,606105819),O=H(O,C,he,b,X[V+3],22,-1044525330),b=H(b,O,C,he,X[V+4],7,-176418897),he=H(he,b,O,C,X[V+5],12,1200080426),C=H(C,he,b,O,X[V+6],17,-1473231341),O=H(O,C,he,b,X[V+7],22,-45705983),b=H(b,O,C,he,X[V+8],7,1770035416),he=H(he,b,O,C,X[V+9],12,-1958414417),C=H(C,he,b,O,X[V+10],17,-42063),O=H(O,C,he,b,X[V+11],22,-1990404162),b=H(b,O,C,he,X[V+12],7,1804603682),he=H(he,b,O,C,X[V+13],12,-40341101),C=H(C,he,b,O,X[V+14],17,-1502002290),b=ae(b,O=H(O,C,he,b,X[V+15],22,1236535329),C,he,X[V+1],5,-165796510),he=ae(he,b,O,C,X[V+6],9,-1069501632),C=ae(C,he,b,O,X[V+11],14,643717713),O=ae(O,C,he,b,X[V+0],20,-373897302),b=ae(b,O,C,he,X[V+5],5,-701558691),he=ae(he,b,O,C,X[V+10],9,38016083),C=ae(C,he,b,O,X[V+15],14,-660478335),O=ae(O,C,he,b,X[V+4],20,-405537848),b=ae(b,O,C,he,X[V+9],5,568446438),he=ae(he,b,O,C,X[V+14],9,-1019803690),C=ae(C,he,b,O,X[V+3],14,-187363961),O=ae(O,C,he,b,X[V+8],20,1163531501),b=ae(b,O,C,he,X[V+13],5,-1444681467),he=ae(he,b,O,C,X[V+2],9,-51403784),C=ae(C,he,b,O,X[V+7],14,1735328473),b=q(b,O=ae(O,C,he,b,X[V+12],20,-1926607734),C,he,X[V+5],4,-378558),he=q(he,b,O,C,X[V+8],11,-2022574463),C=q(C,he,b,O,X[V+11],16,1839030562),O=q(O,C,he,b,X[V+14],23,-35309556),b=q(b,O,C,he,X[V+1],4,-1530992060),he=q(he,b,O,C,X[V+4],11,1272893353),C=q(C,he,b,O,X[V+7],16,-155497632),O=q(O,C,he,b,X[V+10],23,-1094730640),b=q(b,O,C,he,X[V+13],4,681279174),he=q(he,b,O,C,X[V+0],11,-358537222),C=q(C,he,b,O,X[V+3],16,-722521979),O=q(O,C,he,b,X[V+6],23,76029189),b=q(b,O,C,he,X[V+9],4,-640364487),he=q(he,b,O,C,X[V+12],11,-421815835),C=q(C,he,b,O,X[V+15],16,530742520),b=oe(b,O=q(O,C,he,b,X[V+2],23,-995338651),C,he,X[V+0],6,-198630844),he=oe(he,b,O,C,X[V+7],10,1126891415),C=oe(C,he,b,O,X[V+14],15,-1416354905),O=oe(O,C,he,b,X[V+5],21,-57434055),b=oe(b,O,C,he,X[V+12],6,1700485571),he=oe(he,b,O,C,X[V+3],10,-1894986606),C=oe(C,he,b,O,X[V+10],15,-1051523),O=oe(O,C,he,b,X[V+1],21,-2054922799),b=oe(b,O,C,he,X[V+8],6,1873313359),he=oe(he,b,O,C,X[V+15],10,-30611744),C=oe(C,he,b,O,X[V+6],15,-1560198380),O=oe(O,C,he,b,X[V+13],21,1309151649),b=oe(b,O,C,he,X[V+4],6,-145523070),he=oe(he,b,O,C,X[V+11],10,-1120210379),C=oe(C,he,b,O,X[V+2],15,718787259),O=oe(O,C,he,b,X[V+9],21,-343485551),b=ne(b,Te),O=ne(O,se),C=ne(C,Ce),he=ne(he,Re)}return Array(b,O,C,he)}function I(X,B,b,O,C,he){return ne((B=ne(ne(B,X),ne(O,he)))<<C|B>>>32-C,b)}function H(X,B,b,O,C,he,V){return I(B&b|~B&O,X,B,C,he,V)}function ae(X,B,b,O,C,he,V){return I(B&O|b&~O,X,B,C,he,V)}function q(X,B,b,O,C,he,V){return I(B^b^O,X,B,C,he,V)}function oe(X,B,b,O,C,he,V){return I(b^(B|~O),X,B,C,he,V)}function ne(X,B){var b=(65535&X)+(65535&B);return(X>>16)+(B>>16)+(b>>16)<<16|65535&b}T.exports=function(X){return $.hash(X,de,16)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(_e,T,J){(function(S,te,U,ee,_,x,F,W,R){T.exports=function(de){for(var I,H=new Array(de),ae=0;ae<de;ae++)!(3&ae)&&(I=4294967296*Math.random()),H[ae]=I>>>((3&ae)<<3)&255;return H}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(_e,T,J){(function(S,te,U,ee,_,x,F,W,R){var $=_e("./helpers");function de(ae,q){ae[q>>5]|=128<<24-q%32,ae[15+(q+64>>9<<4)]=q;for(var oe,ne,X,B=Array(80),b=1732584193,O=-271733879,C=-1732584194,he=271733878,V=-1009589776,Te=0;Te<ae.length;Te+=16){for(var se=b,Ce=O,Re=C,ke=he,et=V,qe=0;qe<80;qe++){B[qe]=qe<16?ae[Te+qe]:H(B[qe-3]^B[qe-8]^B[qe-14]^B[qe-16],1);var Ee=I(I(H(b,5),(Ee=O,ne=C,X=he,(oe=qe)<20?Ee&ne|~Ee&X:!(oe<40)&&oe<60?Ee&ne|Ee&X|ne&X:Ee^ne^X)),I(I(V,B[qe]),(oe=qe)<20?1518500249:oe<40?1859775393:oe<60?-1894007588:-899497514));V=he,he=C,C=H(O,30),O=b,b=Ee}b=I(b,se),O=I(O,Ce),C=I(C,Re),he=I(he,ke),V=I(V,et)}return Array(b,O,C,he,V)}function I(ae,q){var oe=(65535&ae)+(65535&q);return(ae>>16)+(q>>16)+(oe>>16)<<16|65535&oe}function H(ae,q){return ae<<q|ae>>>32-q}T.exports=function(ae){return $.hash(ae,de,20,!0)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(_e,T,J){(function(S,te,U,ee,_,x,F,W,R){function $(q,oe){var ne=(65535&q)+(65535&oe);return(q>>16)+(oe>>16)+(ne>>16)<<16|65535&ne}function de(q,oe){var ne,X=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),B=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),b=new Array(64);q[oe>>5]|=128<<24-oe%32,q[15+(oe+64>>9<<4)]=oe;for(var O,C,he=0;he<q.length;he+=16){for(var V=B[0],Te=B[1],se=B[2],Ce=B[3],Re=B[4],ke=B[5],et=B[6],qe=B[7],Ee=0;Ee<64;Ee++)b[Ee]=Ee<16?q[Ee+he]:$($($(H(C=b[Ee-2],17)^H(C,19)^ae(C,10),b[Ee-7]),H(C=b[Ee-15],7)^H(C,18)^ae(C,3)),b[Ee-16]),ne=$($($($(qe,H(C=Re,6)^H(C,11)^H(C,25)),Re&ke^~Re&et),X[Ee]),b[Ee]),O=$(H(O=V,2)^H(O,13)^H(O,22),V&Te^V&se^Te&se),qe=et,et=ke,ke=Re,Re=$(Ce,ne),Ce=se,se=Te,Te=V,V=$(ne,O);B[0]=$(V,B[0]),B[1]=$(Te,B[1]),B[2]=$(se,B[2]),B[3]=$(Ce,B[3]),B[4]=$(Re,B[4]),B[5]=$(ke,B[5]),B[6]=$(et,B[6]),B[7]=$(qe,B[7])}return B}var I=_e("./helpers"),H=function(q,oe){return q>>>oe|q<<32-oe},ae=function(q,oe){return q>>>oe};T.exports=function(q){return I.hash(q,de,32,!0)}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(_e,T,J){(function(S,te,U,ee,_,x,F,W,R){J.read=function($,de,I,H,he){var q,oe,ne=8*he-H-1,X=(1<<ne)-1,B=X>>1,b=-7,O=I?he-1:0,C=I?-1:1;for(he=$[de+O],O+=C,q=he&(1<<-b)-1,he>>=-b,b+=ne;0<b;q=256*q+$[de+O],O+=C,b-=8);for(oe=q&(1<<-b)-1,q>>=-b,b+=H;0<b;oe=256*oe+$[de+O],O+=C,b-=8);if(0===q)q=1-B;else{if(q===X)return oe?NaN:1/0*(he?-1:1);oe+=Math.pow(2,H),q-=B}return(he?-1:1)*oe*Math.pow(2,q-H)},J.write=function($,de,I,H,ae,V){var oe,ne,X=8*V-ae-1,B=(1<<X)-1,b=B>>1,O=23===ae?Math.pow(2,-24)-Math.pow(2,-77):0,C=H?0:V-1,he=H?1:-1;for(V=de<0||0===de&&1/de<0?1:0,de=Math.abs(de),isNaN(de)||de===1/0?(ne=isNaN(de)?1:0,oe=B):(oe=Math.floor(Math.log(de)/Math.LN2),de*(H=Math.pow(2,-oe))<1&&(oe--,H*=2),2<=(de+=1<=oe+b?O/H:O*Math.pow(2,1-b))*H&&(oe++,H/=2),B<=oe+b?(ne=0,oe=B):1<=oe+b?(ne=(de*H-1)*Math.pow(2,ae),oe+=b):(ne=de*Math.pow(2,b-1)*Math.pow(2,ae),oe=0));8<=ae;$[I+C]=255&ne,C+=he,ne/=256,ae-=8);for(oe=oe<<ae|ne,X+=ae;0<X;$[I+C]=255&oe,C+=he,oe/=256,X-=8);$[I+C-he]|=128*V}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(_e,T,J){(function(S,te,U,ee,_,x,F,W,R){var $,de,I;function H(){}(S=T.exports={}).nextTick=(de=typeof window<"u"&&window.setImmediate,I=typeof window<"u"&&window.postMessage&&window.addEventListener,de?function(ae){return window.setImmediate(ae)}:I?($=[],window.addEventListener("message",function(ae){var q=ae.source;q!==window&&null!==q||"process-tick"!==ae.data||(ae.stopPropagation(),0<$.length&&$.shift()())},!0),function(ae){$.push(ae),window.postMessage("process-tick","*")}):function(ae){setTimeout(ae,0)}),S.title="browser",S.browser=!0,S.env={},S.argv=[],S.on=H,S.addListener=H,S.once=H,S.off=H,S.removeListener=H,S.removeAllListeners=H,S.emit=H,S.binding=function(ae){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(ae){throw new Error("process.chdir is not supported")}}).call(this,_e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},_e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:Ue=>{var T,J,_e=Ue.exports={};function S(){throw new Error("setTimeout has not been defined")}function te(){throw new Error("clearTimeout has not been defined")}function U(H){if(T===setTimeout)return setTimeout(H,0);if((T===S||!T)&&setTimeout)return T=setTimeout,setTimeout(H,0);try{return T(H,0)}catch{try{return T.call(null,H,0)}catch{return T.call(this,H,0)}}}!function(){try{T="function"==typeof setTimeout?setTimeout:S}catch{T=S}try{J="function"==typeof clearTimeout?clearTimeout:te}catch{J=te}}();var F,_=[],x=!1,W=-1;function R(){!x||!F||(x=!1,F.length?_=F.concat(_):W=-1,_.length&&$())}function $(){if(!x){var H=U(R);x=!0;for(var ae=_.length;ae;){for(F=_,_=[];++W<ae;)F&&F[W].run();W=-1,ae=_.length}F=null,x=!1,function ee(H){if(J===clearTimeout)return clearTimeout(H);if((J===te||!J)&&clearTimeout)return J=clearTimeout,clearTimeout(H);try{return J(H)}catch{try{return J.call(null,H)}catch{return J.call(this,H)}}}(H)}}function de(H,ae){this.fun=H,this.array=ae}function I(){}_e.nextTick=function(H){var ae=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)ae[q-1]=arguments[q];_.push(new de(H,ae)),1===_.length&&!x&&U($)},de.prototype.run=function(){this.fun.apply(null,this.array)},_e.title="browser",_e.browser=!0,_e.env={},_e.argv=[],_e.version="",_e.versions={},_e.on=I,_e.addListener=I,_e.once=I,_e.off=I,_e.removeListener=I,_e.removeAllListeners=I,_e.emit=I,_e.prependListener=I,_e.prependOnceListener=I,_e.listeners=function(H){return[]},_e.binding=function(H){throw new Error("process.binding is not supported")},_e.cwd=function(){return"/"},_e.chdir=function(H){throw new Error("process.chdir is not supported")},_e.umask=function(){return 0}},3410:Ue=>{let _e;Ue.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):T=>(_e||(_e=Promise.resolve())).then(T).catch(J=>setTimeout(()=>{throw J},0))},1986:(Ue,_e,T)=>{Ue.exports=T(7842)},5327:Ue=>{"use strict";Ue.exports=class RY{constructor(T,J=new Map,S=0){this.prefix=T,this._existing=J,this.counter=S}clone(){const{prefix:T,_existing:J,counter:S}=this;return new RY(T,new Map(J),S)}getId(T){const J=T&&this._existing.get(T);if(J)return J;const S=this.prefix+this.counter;return this.counter++,T&&this._existing.set(T,S),S}hasId(T){return this._existing.has(T)}getOldIds(){return[...this._existing.keys()]}}},7475:(Ue,_e,T)=>{"use strict";var J=T(7156).default;T(8280);const S=self.crypto||self.msCrypto;Ue.exports=class{constructor(U){if(!S||!S.subtle)throw new Error("crypto.subtle not found.");if("sha256"===U)this.algorithm={name:"SHA-256"};else{if("sha1"!==U)throw new Error(`Unsupported algorithm "${U}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(U){this._content+=U}digest(){var U=this;return J(function*(){const ee=(new TextEncoder).encode(U._content),_=new Uint8Array(yield S.subtle.digest(U.algorithm,ee));let x="";for(let F=0;F<_.length;++F)x+=_[F].toString(16).padStart(2,"0");return x})()}}},8003:Ue=>{"use strict";const J="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",S="http://www.w3.org/2001/XMLSchema#string",te="NamedNode",U="BlankNode",ee="Literal",_="DefaultGraph",x={};function F(I,H){return I.subject.termType===H.subject.termType&&I.object.termType===H.object.termType&&I.subject.value===H.subject.value&&I.predicate.value===H.predicate.value&&I.object.value===H.object.value&&(I.object.termType!==ee||I.object.datatype.termType===H.object.datatype.termType&&I.object.language===H.object.language&&I.object.datatype.value===H.object.datatype.value)}(()=>{const I="(?:<([^:]+:[^>]*)>)",ae="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",q=ae+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ne="(_:(?:["+ae+"0-9])(?:(?:["+q+".])*(?:["+q+"]))?)",C="[ \\t]+",he="[ \\t]*",V="(?:"+I+"|"+ne+")"+C,Te=I+C,se="(?:"+I+"|"+ne+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+I+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+he,Ce="(?:\\.|(?:(?:"+I+"|"+ne+")"+he+"\\.))";x.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,x.empty=new RegExp("^[ \\t]*$"),x.quad=new RegExp("^"+he+V+Te+se+Ce+he+"$")})(),Ue.exports=class uS{static parse(H){const ae=[],q={},oe=H.split(x.eoln);let ne=0;for(const X of oe){if(ne++,x.empty.test(X))continue;const B=X.match(x.quad);if(null===B)throw new Error("N-Quads parse error on line "+ne+".");const b={subject:null,predicate:null,object:null,graph:null};if(b.subject=void 0!==B[1]?{termType:te,value:B[1]}:{termType:U,value:B[2]},b.predicate={termType:te,value:B[3]},void 0!==B[4]?b.object={termType:te,value:B[4]}:void 0!==B[5]?b.object={termType:U,value:B[5]}:(b.object={termType:ee,value:void 0,datatype:{termType:te}},void 0!==B[7]?b.object.datatype.value=B[7]:void 0!==B[8]?(b.object.datatype.value=J,b.object.language=B[8]):b.object.datatype.value=S,b.object.value=B[6].replace($,function(H,ae,q,oe){if(ae)switch(ae){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(q)return String.fromCharCode(parseInt(q,16));if(oe)throw new Error("Unsupported U escape")})),b.graph=void 0!==B[9]?{termType:te,value:B[9]}:void 0!==B[10]?{termType:U,value:B[10]}:{termType:_,value:""},b.graph.value in q){let O=!0;const C=q[b.graph.value];for(const he of C)if(F(he,b)){O=!1;break}O&&(C.push(b),ae.push(b))}else q[b.graph.value]=[b],ae.push(b)}return ae}static serialize(H){Array.isArray(H)||(H=uS.legacyDatasetToQuads(H));const ae=[];for(const q of H)ae.push(uS.serializeQuad(q));return ae.sort().join("")}static serializeQuadComponents(H,ae,q,oe){let ne="";return ne+=H.termType===te?`<${H.value}>`:`${H.value}`,ne+=` <${ae.value}> `,q.termType===te?ne+=`<${q.value}>`:q.termType===U?ne+=q.value:(ne+=`"${function R(I){return I.replace(W,function(H){switch(H){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(q.value)}"`,q.datatype.value===J?q.language&&(ne+=`@${q.language}`):q.datatype.value!==S&&(ne+=`^^<${q.datatype.value}>`)),oe.termType===te?ne+=` <${oe.value}>`:oe.termType===U&&(ne+=` ${oe.value}`),ne+=" .\n",ne}static serializeQuad(H){return uS.serializeQuadComponents(H.subject,H.predicate,H.object,H.graph)}static legacyDatasetToQuads(H){const ae=[],q={"blank node":U,IRI:te,literal:ee};for(const oe in H)H[oe].forEach(X=>{const B={};for(const b in X){const O=X[b],C={termType:q[O.type],value:O.value};C.termType===ee&&(C.datatype={termType:te},"datatype"in O&&(C.datatype.value=O.datatype),"language"in O?("datatype"in O||(C.datatype.value=J),C.language=O.language):"datatype"in O||(C.datatype.value=S)),B[b]=C}B.graph="@default"===oe?{termType:_,value:""}:{termType:oe.startsWith("_:")?U:te,value:oe},ae.push(B)});return ae}};const W=/["\\\n\r]/g,$=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:Ue=>{"use strict";Ue.exports=class{constructor(T){this.current=T.sort(),this.done=!1,this.dir=new Map;for(let J=0;J<T.length;++J)this.dir.set(T[J],!0)}hasNext(){return!this.done}next(){const{current:T,dir:J}=this,S=T.slice();let te=null,U=0;const ee=T.length;for(let _=0;_<ee;++_){const x=T[_],F=J.get(x);(null===te||x>te)&&(F&&_>0&&x>T[_-1]||!F&&_<ee-1&&x>T[_+1])&&(te=x,U=_)}if(null===te)this.done=!0;else{const _=J.get(te)?U-1:U+1;T[U]=T[_],T[_]=te;for(const x of T)x>te&&J.set(x,!J.get(x))}return S}}},7218:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(5327),te=T(7475),U=T(7790),ee=T(8003);function _(x,F){return x.hash<F.hash?-1:x.hash>F.hash?1:0}Ue.exports=class{constructor({createMessageDigest:F=(()=>new te("sha256")),canonicalIdMap:W=new Map,maxDeepIterations:R=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new S("_:c14n",W),this.createMessageDigest=F,this.maxDeepIterations=R,this.quads=null,this.deepIterations=null}main(F){var W=this;return J(function*(){W.deepIterations=new Map,W.quads=F;for(const q of F)W._addBlankNodeQuadInfo({quad:q,component:q.subject}),W._addBlankNodeQuadInfo({quad:q,component:q.object}),W._addBlankNodeQuadInfo({quad:q,component:q.graph});const R=new Map,$=[...W.blankNodeInfo.keys()];let de=0;for(const q of $)++de%100==0&&(yield W._yield()),yield W._hashAndTrackBlankNode({id:q,hashToBlankNodes:R});const I=[...R.keys()].sort(),H=[];for(const q of I){const oe=R.get(q);oe.length>1?H.push(oe):W.canonicalIssuer.getId(oe[0])}for(const q of H){const oe=[];for(const ne of q){if(W.canonicalIssuer.hasId(ne))continue;const X=new S("_:b");X.getId(ne);const B=yield W.hashNDegreeQuads(ne,X);oe.push(B)}oe.sort(_);for(const ne of oe){const X=ne.issuer.getOldIds();for(const B of X)W.canonicalIssuer.getId(B)}}const ae=[];for(const q of W.quads){const oe=ee.serializeQuadComponents(W._componentWithCanonicalId(q.subject),q.predicate,W._componentWithCanonicalId(q.object),W._componentWithCanonicalId(q.graph));ae.push(oe)}return ae.sort(),ae.join("")})()}hashFirstDegreeQuads(F){var W=this;return J(function*(){const R=[],$=W.blankNodeInfo.get(F),de=$.quads;for(const H of de){const ae={subject:null,predicate:H.predicate,object:null,graph:null};ae.subject=W.modifyFirstDegreeComponent(F,H.subject,"subject"),ae.object=W.modifyFirstDegreeComponent(F,H.object,"object"),ae.graph=W.modifyFirstDegreeComponent(F,H.graph,"graph"),R.push(ee.serializeQuad(ae))}R.sort();const I=W.createMessageDigest();for(const H of R)I.update(H);return $.hash=yield I.digest(),$.hash})()}hashRelatedBlankNode(F,W,R,$){var de=this;return J(function*(){let I;I=de.canonicalIssuer.hasId(F)?de.canonicalIssuer.getId(F):R.hasId(F)?R.getId(F):de.blankNodeInfo.get(F).hash;const H=de.createMessageDigest();return H.update($),"g"!==$&&H.update(de.getRelatedPredicate(W)),H.update(I),H.digest()})()}hashNDegreeQuads(F,W){var R=this;return J(function*(){const $=R.deepIterations.get(F)||0;if($>R.maxDeepIterations)throw new Error(`Maximum deep iterations (${R.maxDeepIterations}) exceeded.`);R.deepIterations.set(F,$+1);const de=R.createMessageDigest(),I=yield R.createHashToRelated(F,W),H=[...I.keys()].sort();for(const ae of H){de.update(ae);let oe,q="";const ne=new U(I.get(ae));let X=0;for(;ne.hasNext();){const B=ne.next();++X%3==0&&(yield R._yield());let b=W.clone(),O="";const C=[];let he=!1;for(const V of B)if(R.canonicalIssuer.hasId(V)?O+=R.canonicalIssuer.getId(V):(b.hasId(V)||C.push(V),O+=b.getId(V)),0!==q.length&&O>q){he=!0;break}if(!he){for(const V of C){const Te=yield R.hashNDegreeQuads(V,b);if(O+=b.getId(V),O+=`<${Te.hash}>`,b=Te.issuer,0!==q.length&&O>q){he=!0;break}}he||(0===q.length||O<q)&&(q=O,oe=b)}}de.update(q),W=oe}return{hash:yield de.digest(),issuer:W}})()}modifyFirstDegreeComponent(F,W){return"BlankNode"!==W.termType?W:{termType:"BlankNode",value:W.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return`<${F.predicate.value}>`}createHashToRelated(F,W){var R=this;return J(function*(){const $=new Map,de=R.blankNodeInfo.get(F).quads;let I=0;for(const H of de)++I%100==0&&(yield R._yield()),yield Promise.all([R._addRelatedBlankNodeHash({quad:H,component:H.subject,position:"s",id:F,issuer:W,hashToRelated:$}),R._addRelatedBlankNodeHash({quad:H,component:H.object,position:"o",id:F,issuer:W,hashToRelated:$}),R._addRelatedBlankNodeHash({quad:H,component:H.graph,position:"g",id:F,issuer:W,hashToRelated:$})]);return $})()}_hashAndTrackBlankNode({id:F,hashToBlankNodes:W}){var R=this;return J(function*(){const $=yield R.hashFirstDegreeQuads(F),de=W.get($);de?de.push(F):W.set($,[F])})()}_addBlankNodeQuadInfo({quad:F,component:W}){if("BlankNode"!==W.termType)return;const R=W.value,$=this.blankNodeInfo.get(R);$?$.quads.add(F):this.blankNodeInfo.set(R,{quads:new Set([F]),hash:null})}_addRelatedBlankNodeHash({quad:F,component:W,position:R,id:$,issuer:de,hashToRelated:I}){var H=this;return J(function*(){if("BlankNode"!==W.termType||W.value===$)return;const ae=W.value,q=yield H.hashRelatedBlankNode(ae,F,de,R),oe=I.get(q);oe?oe.push(ae):I.set(q,[ae])})()}_componentWithCanonicalId(F){return"BlankNode"!==F.termType||F.value.startsWith(this.canonicalIssuer.prefix)?F:{termType:"BlankNode",value:this.canonicalIssuer.getId(F.value)}}_yield(){return J(function*(){return new Promise(F=>setImmediate(F))})()}}},9123:(Ue,_e,T)=>{"use strict";const J=T(5327),S=T(7475),te=T(7790),U=T(8003);function ee(_,x){return _.hash<x.hash?-1:_.hash>x.hash?1:0}Ue.exports=class{constructor({createMessageDigest:x=(()=>new S("sha256")),canonicalIdMap:F=new Map,maxDeepIterations:W=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new J("_:c14n",F),this.createMessageDigest=x,this.maxDeepIterations=W,this.quads=null,this.deepIterations=null}main(x){this.deepIterations=new Map,this.quads=x;for(const I of x)this._addBlankNodeQuadInfo({quad:I,component:I.subject}),this._addBlankNodeQuadInfo({quad:I,component:I.object}),this._addBlankNodeQuadInfo({quad:I,component:I.graph});const F=new Map,W=[...this.blankNodeInfo.keys()];for(const I of W)this._hashAndTrackBlankNode({id:I,hashToBlankNodes:F});const R=[...F.keys()].sort(),$=[];for(const I of R){const H=F.get(I);H.length>1?$.push(H):this.canonicalIssuer.getId(H[0])}for(const I of $){const H=[];for(const ae of I){if(this.canonicalIssuer.hasId(ae))continue;const q=new J("_:b");q.getId(ae);const oe=this.hashNDegreeQuads(ae,q);H.push(oe)}H.sort(ee);for(const ae of H){const q=ae.issuer.getOldIds();for(const oe of q)this.canonicalIssuer.getId(oe)}}const de=[];for(const I of this.quads){const H=U.serializeQuadComponents(this._componentWithCanonicalId({component:I.subject}),I.predicate,this._componentWithCanonicalId({component:I.object}),this._componentWithCanonicalId({component:I.graph}));de.push(H)}return de.sort(),de.join("")}hashFirstDegreeQuads(x){const F=[],W=this.blankNodeInfo.get(x),R=W.quads;for(const de of R){const I={subject:null,predicate:de.predicate,object:null,graph:null};I.subject=this.modifyFirstDegreeComponent(x,de.subject,"subject"),I.object=this.modifyFirstDegreeComponent(x,de.object,"object"),I.graph=this.modifyFirstDegreeComponent(x,de.graph,"graph"),F.push(U.serializeQuad(I))}F.sort();const $=this.createMessageDigest();for(const de of F)$.update(de);return W.hash=$.digest(),W.hash}hashRelatedBlankNode(x,F,W,R){let $;$=this.canonicalIssuer.hasId(x)?this.canonicalIssuer.getId(x):W.hasId(x)?W.getId(x):this.blankNodeInfo.get(x).hash;const de=this.createMessageDigest();return de.update(R),"g"!==R&&de.update(this.getRelatedPredicate(F)),de.update($),de.digest()}hashNDegreeQuads(x,F){const W=this.deepIterations.get(x)||0;if(W>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(x,W+1);const R=this.createMessageDigest(),$=this.createHashToRelated(x,F),de=[...$.keys()].sort();for(const I of de){R.update(I);let ae,H="";const q=new te($.get(I));for(;q.hasNext();){const oe=q.next();let ne=F.clone(),X="";const B=[];let b=!1;for(const O of oe)if(this.canonicalIssuer.hasId(O)?X+=this.canonicalIssuer.getId(O):(ne.hasId(O)||B.push(O),X+=ne.getId(O)),0!==H.length&&X>H){b=!0;break}if(!b){for(const O of B){const C=this.hashNDegreeQuads(O,ne);if(X+=ne.getId(O),X+=`<${C.hash}>`,ne=C.issuer,0!==H.length&&X>H){b=!0;break}}b||(0===H.length||X<H)&&(H=X,ae=ne)}}R.update(H),F=ae}return{hash:R.digest(),issuer:F}}modifyFirstDegreeComponent(x,F){return"BlankNode"!==F.termType?F:{termType:"BlankNode",value:F.value===x?"_:a":"_:z"}}getRelatedPredicate(x){return`<${x.predicate.value}>`}createHashToRelated(x,F){const W=new Map,R=this.blankNodeInfo.get(x).quads;for(const $ of R)this._addRelatedBlankNodeHash({quad:$,component:$.subject,position:"s",id:x,issuer:F,hashToRelated:W}),this._addRelatedBlankNodeHash({quad:$,component:$.object,position:"o",id:x,issuer:F,hashToRelated:W}),this._addRelatedBlankNodeHash({quad:$,component:$.graph,position:"g",id:x,issuer:F,hashToRelated:W});return W}_hashAndTrackBlankNode({id:x,hashToBlankNodes:F}){const W=this.hashFirstDegreeQuads(x),R=F.get(W);R?R.push(x):F.set(W,[x])}_addBlankNodeQuadInfo({quad:x,component:F}){if("BlankNode"!==F.termType)return;const W=F.value,R=this.blankNodeInfo.get(W);R?R.quads.add(x):this.blankNodeInfo.set(W,{quads:new Set([x]),hash:null})}_addRelatedBlankNodeHash({quad:x,component:F,position:W,id:R,issuer:$,hashToRelated:de}){if("BlankNode"!==F.termType||F.value===R)return;const I=F.value,H=this.hashRelatedBlankNode(I,x,$,W),ae=de.get(H);ae?ae.push(I):de.set(H,[I])}_componentWithCanonicalId({component:x}){return"BlankNode"!==x.termType||x.value.startsWith(this.canonicalIssuer.prefix)?x:{termType:"BlankNode",value:this.canonicalIssuer.getId(x.value)}}}},1326:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(7475),te=T(7218);Ue.exports=class extends te{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new S("sha1")}modifyFirstDegreeComponent(ee,_,x){return"BlankNode"!==_.termType?_:"graph"===x?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===ee?"_:a":"_:z"}}getRelatedPredicate(ee){return ee.predicate.value}createHashToRelated(ee,_){var x=this;return J(function*(){const F=new Map,W=x.blankNodeInfo.get(ee).quads;let R=0;for(const $ of W){let de,I;if("BlankNode"===$.subject.termType&&$.subject.value!==ee)I=$.subject.value,de="p";else{if("BlankNode"!==$.object.termType||$.object.value===ee)continue;I=$.object.value,de="r"}++R%100==0&&(yield x._yield());const H=yield x.hashRelatedBlankNode(I,$,_,de),ae=F.get(H);ae?ae.push(I):F.set(H,[I])}return F})()}}},9869:(Ue,_e,T)=>{"use strict";const J=T(7475),S=T(9123);Ue.exports=class extends S{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new J("sha1")}modifyFirstDegreeComponent(U,ee,_){return"BlankNode"!==ee.termType?ee:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:ee.value===U?"_:a":"_:z"}}getRelatedPredicate(U){return U.predicate.value}createHashToRelated(U,ee){const _=new Map,x=this.blankNodeInfo.get(U).quads;for(const F of x){let W,R;if("BlankNode"===F.subject.termType&&F.subject.value!==U)R=F.subject.value,W="p";else{if("BlankNode"!==F.object.termType||F.object.value===U)continue;R=F.object.value,W="r"}const $=this.hashRelatedBlankNode(R,F,ee,W),de=_.get($);de?de.push(R):_.set($,[R])}return _}}},7842:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(7218),te=T(1326),U=T(9123),ee=T(9869);let _;try{_=T(7670)}catch{}function x(F){return Array.isArray(F)?F:_e.NQuads.legacyDatasetToQuads(F)}_e.NQuads=T(8003),_e.IdentifierIssuer=T(5327),_e._rdfCanonizeNative=function(F){return F&&(_=F),_},_e.canonize=function(){var F=J(function*(W,R){const $=x(W);if(R.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(R.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((de,I)=>_.canonize($,R,(H,ae)=>H?I(H):de(ae)))}if("URDNA2015"===R.algorithm)return new S(R).main($);if("URGNA2012"===R.algorithm){if(R.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new te(R).main($)}throw"algorithm"in R?new Error("Invalid RDF Dataset Canonicalization algorithm: "+R.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(W,R){return F.apply(this,arguments)}}(),_e._canonizeSync=function(F,W){const R=x(F);if(W.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(W.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(R,W)}if("URDNA2015"===W.algorithm)return new U(W).main(R);if("URGNA2012"===W.algorithm){if(W.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new ee(W).main(R)}throw"algorithm"in W?new Error("Invalid RDF Dataset Canonicalization algorithm: "+W.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(Ue,_e,T){"use strict";var J=this&&this.__createBinding||(Object.create?function(te,U,ee,_){void 0===_&&(_=ee),Object.defineProperty(te,_,{enumerable:!0,get:function(){return U[ee]}})}:function(te,U,ee,_){void 0===_&&(_=ee),te[_]=U[ee]}),S=this&&this.__exportStar||function(te,U){for(var ee in te)"default"!==ee&&!Object.prototype.hasOwnProperty.call(U,ee)&&J(U,te,ee)};Object.defineProperty(_e,"__esModule",{value:!0}),S(T(4740),_e),S(T(3613),_e),S(T(9379),_e),S(T(5565),_e),S(T(3283),_e),S(T(3905),_e),S(T(2234),_e)},4740:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.BlankNode=void 0,_e.BlankNode=class T{constructor(S){this.termType="BlankNode",this.value=S}equals(S){return!!S&&"BlankNode"===S.termType&&S.value===this.value}}},3613:(Ue,_e,T)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.DataFactory=void 0;const J=T(4740),S=T(9379),te=T(5565),U=T(3283),ee=T(3905),_=T(2234);let x=0;_e.DataFactory=class F{constructor(R){this.blankNodeCounter=0,this.blankNodePrefix=(R=R||{}).blankNodePrefix||`df_${x++}_`}namedNode(R){return new U.NamedNode(R)}blankNode(R){return new J.BlankNode(R||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(R,$){return new te.Literal(R,$)}variable(R){return new _.Variable(R)}defaultGraph(){return S.DefaultGraph.INSTANCE}quad(R,$,de,I){return new ee.Quad(R,$,de,I||this.defaultGraph())}fromTerm(R){switch(R.termType){case"NamedNode":return this.namedNode(R.value);case"BlankNode":return this.blankNode(R.value);case"Literal":return R.language?this.literal(R.value,R.language):R.datatype.equals(te.Literal.XSD_STRING)?this.literal(R.value):this.literal(R.value,this.fromTerm(R.datatype));case"Variable":return this.variable(R.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(R.subject),this.fromTerm(R.predicate),this.fromTerm(R.object),this.fromTerm(R.graph))}}fromQuad(R){return this.fromTerm(R)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.DefaultGraph=void 0;class T{constructor(){this.termType="DefaultGraph",this.value=""}equals(S){return!!S&&"DefaultGraph"===S.termType}}_e.DefaultGraph=T,T.INSTANCE=new T},5565:(Ue,_e,T)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Literal=void 0;const J=T(3283);class S{constructor(U,ee){this.termType="Literal",this.value=U,"string"==typeof ee?(this.language=ee,this.datatype=S.RDF_LANGUAGE_STRING):ee?(this.language="",this.datatype=ee):(this.language="",this.datatype=S.XSD_STRING)}equals(U){return!!U&&"Literal"===U.termType&&U.value===this.value&&U.language===this.language&&this.datatype.equals(U.datatype)}}_e.Literal=S,S.RDF_LANGUAGE_STRING=new J.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),S.XSD_STRING=new J.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.NamedNode=void 0,_e.NamedNode=class T{constructor(S){this.termType="NamedNode",this.value=S}equals(S){return!!S&&"NamedNode"===S.termType&&S.value===this.value}}},3905:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Quad=void 0,_e.Quad=class T{constructor(S,te,U,ee){this.termType="Quad",this.value="",this.subject=S,this.predicate=te,this.object=U,this.graph=ee}equals(S){return!!S&&("Quad"===S.termType||!S.termType)&&this.subject.equals(S.subject)&&this.predicate.equals(S.predicate)&&this.object.equals(S.object)&&this.graph.equals(S.graph)}}},2234:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Variable=void 0,_e.Variable=class T{constructor(S){this.termType="Variable",this.value=S}equals(S){return!!S&&"Variable"===S.termType&&S.value===this.value}}},9689:function(Ue,_e,T){"use strict";var J=this&&this.__createBinding||(Object.create?function(I,H,ae,q){void 0===q&&(q=ae),Object.defineProperty(I,q,{enumerable:!0,get:function(){return H[ae]}})}:function(I,H,ae,q){void 0===q&&(q=ae),I[q]=H[ae]}),S=this&&this.__exportStar||function(I,H){for(var ae in I)"default"!==ae&&!Object.prototype.hasOwnProperty.call(H,ae)&&J(H,I,ae)};Object.defineProperty(_e,"__esModule",{value:!0}),_e.getSupportedJavaScriptPrimitives=_e.getSupportedRdfDatatypes=_e.getTermRaw=_e.toRdf=_e.fromRdf=void 0;const te=T(2633),U=T(2538),ee=T(6374);S(T(2538),_e),S(T(1815),_e),S(T(6374),_e);const _=new te.DataFactory,x=new ee.Translator;function F(I,H){return x.fromRdf(I,H)}x.registerHandler(new U.TypeHandlerString,U.TypeHandlerString.TYPES.map(I=>_.namedNode(I)),["string"]),x.registerHandler(new U.TypeHandlerBoolean,[U.TypeHandlerBoolean.TYPE].map(I=>_.namedNode(I)),["boolean"]),x.registerHandler(new U.TypeHandlerNumberDouble,U.TypeHandlerNumberDouble.TYPES.map(I=>_.namedNode(I)),["number"]),x.registerHandler(new U.TypeHandlerNumberInteger,U.TypeHandlerNumberInteger.TYPES.map(I=>_.namedNode(I)),["number"]),x.registerHandler(new U.TypeHandlerDate,U.TypeHandlerDate.TYPES.map(I=>_.namedNode(I)),["object"]),_e.fromRdf=F,_e.toRdf=function W(I,H){return H&&"namedNode"in H&&(H={dataFactory:H}),(H=H||{})&&!H.dataFactory&&(H.dataFactory=_),x.toRdf(I,H)},_e.getTermRaw=function R(I,H){return"Literal"===I.termType?F(I,H):I.value},_e.getSupportedRdfDatatypes=function $(){return x.getSupportedRdfDatatypes()},_e.getSupportedJavaScriptPrimitives=function de(){return x.getSupportedJavaScriptPrimitives()}},1815:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0})},6374:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.Translator=void 0,_e.Translator=class T{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(S){throw new Error(`Invalid RDF ${S.datatype.value} value: '${S.value}'`)}registerHandler(S,te,U){for(const ee of te)this.supportedRdfDatatypes.push(ee),this.fromRdfHandlers[ee.value]=S;for(const ee of U){let _=this.toRdfHandlers[ee];_||(this.toRdfHandlers[ee]=_=[]),_.push(S)}}fromRdf(S,te){const U=this.fromRdfHandlers[S.datatype.value];return U?U.fromRdf(S,te):S.value}toRdf(S,te){const U=this.toRdfHandlers[typeof S];if(U)for(const ee of U){const _=ee.toRdf(S,te);if(_)return _}throw new Error(`Invalid JavaScript value: '${S}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(Ue,_e,T)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerBoolean=void 0;const J=T(6374);class S{fromRdf(U,ee){switch(U.value){case"true":case"1":return!0;case"false":case"0":return!1}return ee&&J.Translator.incorrectRdfDataType(U),!1}toRdf(U,{datatype:ee,dataFactory:_}){return _.literal(U?"true":"false",ee||_.namedNode(S.TYPE))}}_e.TypeHandlerBoolean=S,S.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(Ue,_e,T)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerDate=void 0;const J=T(6374);class S{fromRdf(U,ee){switch(ee&&!U.value.match(S.VALIDATORS[U.datatype.value.substr(33,U.datatype.value.length)])&&J.Translator.incorrectRdfDataType(U),U.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(U.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const _=U.value.split("-");return new Date(0,parseInt(_[0],10)-1,parseInt(_[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(U.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(U.value+"-01");default:return new Date(U.value)}}toRdf(U,{datatype:ee,dataFactory:_}){if(ee=ee||_.namedNode(S.TYPES[0]),!(U instanceof Date))return null;const x=U;let F;switch(ee.value){case"http://www.w3.org/2001/XMLSchema#gDay":F=String(x.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":F=x.getUTCMonth()+1+"-"+x.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":F=String(x.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":F=x.getUTCFullYear()+"-"+(x.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":F=x.toISOString().replace(/T.*$/,"");break;default:F=x.toISOString()}return _.literal(F,ee)}}_e.TypeHandlerDate=S,S.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],S.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(Ue,_e,T)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerNumberDouble=void 0;const J=T(6374);class S{fromRdf(U,ee){const _=parseFloat(U.value);return ee&&isNaN(_)&&J.Translator.incorrectRdfDataType(U),_}toRdf(U,{datatype:ee,dataFactory:_}){return ee=ee||_.namedNode(S.TYPES[0]),isNaN(U)?_.literal("NaN",ee):isFinite(U)?U%1==0?null:_.literal(U.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),ee):_.literal(U>0?"INF":"-INF",ee)}}_e.TypeHandlerNumberDouble=S,S.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(Ue,_e,T)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerNumberInteger=void 0;const J=T(6374);class S{fromRdf(U,ee){const _=parseInt(U.value,10);return ee&&(isNaN(_)||U.value.indexOf(".")>=0)&&J.Translator.incorrectRdfDataType(U),_}toRdf(U,{datatype:ee,dataFactory:_}){return _.literal(String(U),ee||_.namedNode(U<=S.MAX_INT&&U>=S.MIN_INT?S.TYPES[0]:S.TYPES[1]))}}_e.TypeHandlerNumberInteger=S,S.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],S.MAX_INT=2147483647,S.MIN_INT=-2147483648},2210:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.TypeHandlerString=void 0;class T{fromRdf(S){return S.value}toRdf(S,{datatype:te,dataFactory:U}){return U.literal(S,te)}}_e.TypeHandlerString=T,T.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(Ue,_e,T){"use strict";var J=this&&this.__createBinding||(Object.create?function(te,U,ee,_){void 0===_&&(_=ee),Object.defineProperty(te,_,{enumerable:!0,get:function(){return U[ee]}})}:function(te,U,ee,_){void 0===_&&(_=ee),te[_]=U[ee]}),S=this&&this.__exportStar||function(te,U){for(var ee in te)"default"!==ee&&!Object.prototype.hasOwnProperty.call(U,ee)&&J(U,te,ee)};Object.defineProperty(_e,"__esModule",{value:!0}),S(T(88),_e),S(T(1600),_e),S(T(1511),_e),S(T(9199),_e),S(T(2210),_e)},2821:function(Ue,_e,T){"use strict";var J=this&&this.__createBinding||(Object.create?function(te,U,ee,_){void 0===_&&(_=ee),Object.defineProperty(te,_,{enumerable:!0,get:function(){return U[ee]}})}:function(te,U,ee,_){void 0===_&&(_=ee),te[_]=U[ee]}),S=this&&this.__exportStar||function(te,U){for(var ee in te)"default"!==ee&&!Object.prototype.hasOwnProperty.call(U,ee)&&J(U,te,ee)};Object.defineProperty(_e,"__esModule",{value:!0}),S(T(5664),_e)},758:(Ue,_e)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.ParseError=void 0;class T extends Error{constructor(S,te){const U=S.saxStream._parser;super(S.trackPosition?`Line ${U.line+1} column ${U.column+1}: ${te}`:te)}}_e.ParseError=T},5664:(Ue,_e,T)=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0}),_e.ParseType=_e.RdfXmlParser=void 0;const J=T(7054),S=T(9528),te=T(1793),U=T(758),ee=T(2633);class _ extends te.Transform{constructor(W){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},W&&(Object.assign(this,W),this.options=W),this.dataFactory||(this.dataFactory=new ee.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=S.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(W,R){const $={};let de=!1;for(const H in W.attributes)H.startsWith("xmlns")&&(5===H.length?(de=!0,$[""]=W.attributes[H]):":"===H.charAt(5)&&(de=!0,$[H.substr(6)]=W.attributes[H]));const I=R&&R.ns?R.ns:[_.DEFAULT_NS];return de?I.concat([$]):I}static expandPrefixedTerm(W,R,$){const de=W.indexOf(":");let I,H;de>=0?(I=W.substr(0,de),H=W.substr(de+1)):(I="",H=W);let ae=null,q=null;for(let oe=R.length-1;oe>=0;oe--){const ne=R[oe][I];if(ne){ae=ne;break}q||(q=R[oe][""])}if(!ae){if(I&&"xmlns"!==I)throw new U.ParseError($,`The prefix '${I}' in term '${W}' was not bound.`);ae=q||""}return{prefix:I,local:H,uri:ae}}static isValidIri(W){return _.IRI_REGEX.test(W)}import(W){const R=new te.PassThrough({readableObjectMode:!0});W.on("error",de=>$.emit("error",de)),W.on("data",de=>R.push(de)),W.on("end",()=>R.push(null));const $=R.pipe(new _(this.options));return $}_transform(W,R,$){try{this.saxStream.write(W,R)}catch(de){return $(de)}$()}newParseError(W){return new U.ParseError(this,W)}valueToUri(W,R){return this.uriToNamedNode(J.resolve(W,R.baseIRI))}uriToNamedNode(W){if(!_.isValidIri(W))throw this.newParseError(`Invalid URI: ${W}`);return this.dataFactory.namedNode(W)}validateNcname(W){if(!_.NCNAME_MATCHER.test(W))throw this.newParseError(`Not a valid NCName: ${W}`)}attachSaxListeners(){this.saxStream.on("error",W=>this.emit("error",W)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(W){const R=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let $=x.RESOURCE;if(R&&(R.hadChildren=!0,$=R.childrenParseType),R&&R.childrenStringTags){const I=W.name;let H="";for(const ne in W.attributes)H+=` ${ne}="${W.attributes[ne]}"`;R.childrenStringTags.push(`<${I}${H}>`);const oe={childrenStringTags:R.childrenStringTags};return oe.childrenStringEmitClosingTag=`</${I}>`,void this.activeTagStack.push(oe)}const de={};R?(de.language=R.language,de.baseIRI=R.baseIRI):de.baseIRI=this.baseIRI,this.activeTagStack.push(de),de.ns=_.parseNamespace(W,R),$===x.RESOURCE?this.onTagResource(W,de,R,!R):this.onTagProperty(W,de,R)}onTagResource(W,R,$,de){const I=_.expandPrefixedTerm(W.name,R.ns,this);R.childrenParseType=x.PROPERTY;let H=!0;if(I.uri===_.RDF){if(!de&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(I.local)>=0)throw this.newParseError(`Illegal node element name: ${I.local}`);switch(I.local){case"RDF":R.childrenParseType=x.RESOURCE;case"Description":H=!1}}const ae=[],q=[];let oe=null,ne=!1,X=!1,B=null;for(const b in W.attributes){const O=W.attributes[b],C=_.expandPrefixedTerm(b,R.ns,this);if($&&C.uri===_.RDF)switch(C.local){case"about":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${O} and ${oe} where found.`);oe=O;continue;case"ID":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${O} and ${oe} where found.`);this.validateNcname(O),oe="#"+O,ne=!0;continue;case"nodeID":if(oe)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${O} and ${oe} where found.`);this.validateNcname(O),oe=O,X=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":B=O;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(C.uri===_.XML){if("lang"===C.local){R.language=""===O?null:O.toLowerCase();continue}if("base"===C.local){R.baseIRI=J.resolve(O,R.baseIRI);continue}}"xml"!==C.prefix&&C.uri&&(ae.push(this.uriToNamedNode(C.uri+C.local)),q.push(O))}if(null!==oe&&(R.subject=X?this.dataFactory.blankNode(oe):this.valueToUri(oe,R),ne&&this.claimNodeId(R.subject)),R.subject||(R.subject=this.dataFactory.blankNode()),H){const b=this.uriToNamedNode(I.uri+I.local);this.emitTriple(R.subject,this.dataFactory.namedNode(_.RDF+"type"),b,$?$.reifiedStatementId:null)}if($){if($.predicate)if($.childrenCollectionSubject){const b=this.dataFactory.blankNode();this.emitTriple($.childrenCollectionSubject,$.childrenCollectionPredicate,b,$.reifiedStatementId),this.emitTriple(b,this.dataFactory.namedNode(_.RDF+"first"),R.subject,R.reifiedStatementId),$.childrenCollectionSubject=b,$.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple($.subject,$.predicate,R.subject,$.reifiedStatementId);for(let b=0;b<$.predicateSubPredicates.length;b++)this.emitTriple(R.subject,$.predicateSubPredicates[b],$.predicateSubObjects[b],null);$.predicateSubPredicates=[],$.predicateSubObjects=[],$.predicateEmitted=!0}for(let b=0;b<ae.length;b++){const O=this.dataFactory.literal(q[b],R.datatype||R.language);this.emitTriple(R.subject,ae[b],O,$.reifiedStatementId)}B&&this.emitTriple(R.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(B),null)}}onTagProperty(W,R,$){const de=_.expandPrefixedTerm(W.name,R.ns,this);if(R.childrenParseType=x.RESOURCE,R.subject=$.subject,de.uri===_.RDF&&"li"===de.local?($.listItemCounter||($.listItemCounter=1),R.predicate=this.uriToNamedNode(de.uri+"_"+$.listItemCounter++)):R.predicate=this.uriToNamedNode(de.uri+de.local),de.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(de.local)>=0)throw this.newParseError(`Illegal property element name: ${de.local}`);R.predicateSubPredicates=[],R.predicateSubObjects=[];let I=!1,H=!1,ae=null,q=!0;const oe=[],ne=[];for(const X in W.attributes){const B=W.attributes[X],b=_.expandPrefixedTerm(X,R.ns,this);if(b.uri===_.RDF)switch(b.local){case"resource":if(ae)throw this.newParseError(`Found both rdf:resource (${B}) and rdf:nodeID (${ae}).`);if(I)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${B})`);R.hadChildren=!0,ae=B,q=!1;continue;case"datatype":if(H)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${B}).`);if(I)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${B})`);R.datatype=this.valueToUri(B,R);continue;case"nodeID":if(H)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${B}).`);if(R.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${B}).`);if(I)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${B})`);this.validateNcname(B),R.hadChildren=!0,ae=B,q=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(H)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(R.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${R.datatype.value})`);if(ae)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ae})`);if("Resource"===B){I=!0,R.childrenParseType=x.PROPERTY;const O=this.dataFactory.blankNode();this.emitTriple(R.subject,R.predicate,O,R.reifiedStatementId),R.subject=O,R.predicate=null}else"Collection"===B?(I=!0,R.hadChildren=!0,R.childrenCollectionSubject=R.subject,R.childrenCollectionPredicate=R.predicate,q=!1):"Literal"===B&&(I=!0,R.childrenTagsToString=!0,R.childrenStringTags=[]);continue;case"ID":this.validateNcname(B),R.reifiedStatementId=this.valueToUri("#"+B,R),this.claimNodeId(R.reifiedStatementId);continue}else if(b.uri===_.XML&&"lang"===b.local){R.language=""===B?null:B.toLowerCase();continue}if("xml"!==b.prefix&&"xmlns"!==b.prefix&&b.uri){if(I||R.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${B}`);R.hadChildren=!0,H=!0,oe.push(this.uriToNamedNode(b.uri+b.local)),ne.push(this.dataFactory.literal(B,R.datatype||R.language))}}if(null!==ae){const X=R.subject;R.subject=q?this.dataFactory.blankNode(ae):this.valueToUri(ae,R),this.emitTriple(X,R.predicate,R.subject,R.reifiedStatementId);for(let B=0;B<oe.length;B++)this.emitTriple(R.subject,oe[B],ne[B],null);R.predicateEmitted=!0}else q&&(R.predicateSubPredicates=oe,R.predicateSubObjects=ne,R.predicateEmitted=!1)}emitTriple(W,R,$,de){this.push(this.dataFactory.quad(W,R,$,this.defaultGraph)),de&&(this.push(this.dataFactory.quad(de,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(de,this.dataFactory.namedNode(_.RDF+"subject"),W,this.defaultGraph)),this.push(this.dataFactory.quad(de,this.dataFactory.namedNode(_.RDF+"predicate"),R,this.defaultGraph)),this.push(this.dataFactory.quad(de,this.dataFactory.namedNode(_.RDF+"object"),$,this.defaultGraph)))}claimNodeId(W){if(!this.allowDuplicateRdfIds){if(this.nodeIds[W.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${W.value}'.`);this.nodeIds[W.value]=!0}}onText(W){const R=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;R&&(R.childrenStringTags?R.childrenStringTags.push(W):R.predicate&&(R.text=W))}onCloseTag(){const W=this.activeTagStack.pop();if(W.childrenStringEmitClosingTag&&W.childrenStringTags.push(W.childrenStringEmitClosingTag),W.childrenTagsToString&&(W.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),W.text=W.childrenStringTags.join(""),W.hadChildren=!1),W.childrenCollectionSubject)this.emitTriple(W.childrenCollectionSubject,W.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),W.reifiedStatementId);else if(W.predicate)if(W.hadChildren||W.childrenParseType===x.PROPERTY){if(!W.predicateEmitted){const R=this.dataFactory.blankNode();this.emitTriple(W.subject,W.predicate,R,W.reifiedStatementId);for(let $=0;$<W.predicateSubPredicates.length;$++)this.emitTriple(R,W.predicateSubPredicates[$],W.predicateSubObjects[$],null)}}else this.emitTriple(W.subject,W.predicate,this.dataFactory.literal(W.text||"",W.datatype||W.language),W.reifiedStatementId)}onDoctype(W){W.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(R,$,de)=>(this.saxStream._parser.ENTITIES[$]=de,""))}}var x,F;_e.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(F=x=_e.ParseType||(_e.ParseType={}))[F.RESOURCE=0]="RESOURCE",F[F.PROPERTY=1]="PROPERTY"},9987:(Ue,_e,T)=>{"use strict";const{AbortError:J,codes:S}=T(4370),{isNodeStream:te,isWebStream:U,kControllerErrorFunction:ee}=T(5428),_=T(4618),{ERR_INVALID_ARG_TYPE:x}=S;Ue.exports.addAbortSignal=function(R,$){if(((W,R)=>{if("object"!=typeof W||!("aborted"in W))throw new x("signal","AbortSignal",W)})(R),!te($)&&!U($))throw new x("stream",["ReadableStream","WritableStream","Stream"],$);return Ue.exports.addAbortSignalNoValidate(R,$)},Ue.exports.addAbortSignalNoValidate=function(W,R){if("object"!=typeof W||!("aborted"in W))return R;const $=te(R)?()=>{R.destroy(new J(void 0,{cause:W.reason}))}:()=>{R[ee](new J(void 0,{cause:W.reason}))};return W.aborted?$():(W.addEventListener("abort",$),_(R,()=>W.removeEventListener("abort",$))),R}},2960:(Ue,_e,T)=>{"use strict";const{StringPrototypeSlice:J,SymbolIterator:S,TypedArrayPrototypeSet:te,Uint8Array:U}=T(6305),{Buffer:ee}=T(1657),{inspect:_}=T(2656);Ue.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(F){const W={data:F,next:null};this.length>0?this.tail.next=W:this.head=W,this.tail=W,++this.length}unshift(F){const W={data:F,next:this.head};0===this.length&&(this.tail=W),this.head=W,++this.length}shift(){if(0===this.length)return;const F=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,F}clear(){this.head=this.tail=null,this.length=0}join(F){if(0===this.length)return"";let W=this.head,R=""+W.data;for(;null!==(W=W.next);)R+=F+W.data;return R}concat(F){if(0===this.length)return ee.alloc(0);const W=ee.allocUnsafe(F>>>0);let R=this.head,$=0;for(;R;)te(W,R.data,$),$+=R.data.length,R=R.next;return W}consume(F,W){const R=this.head.data;if(F<R.length){const $=R.slice(0,F);return this.head.data=R.slice(F),$}return F===R.length?this.shift():W?this._getString(F):this._getBuffer(F)}first(){return this.head.data}*[S](){for(let F=this.head;F;F=F.next)yield F.data}_getString(F){let W="",R=this.head,$=0;do{const de=R.data;if(!(F>de.length)){F===de.length?(W+=de,++$,this.head=R.next?R.next:this.tail=null):(W+=J(de,0,F),this.head=R,R.data=J(de,F));break}W+=de,F-=de.length,++$}while(null!==(R=R.next));return this.length-=$,W}_getBuffer(F){const W=ee.allocUnsafe(F),R=F;let $=this.head,de=0;do{const I=$.data;if(!(F>I.length)){F===I.length?(te(W,I,R-F),++de,this.head=$.next?$.next:this.tail=null):(te(W,new U(I.buffer,I.byteOffset,F),R-F),this.head=$,$.data=I.slice(F));break}te(W,I,R-F),F-=I.length,++de}while(null!==($=$.next));return this.length-=de,W}[Symbol.for("nodejs.util.inspect.custom")](F,W){return _(this,{...W,depth:0,customInspect:!1})}}},7721:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const{pipeline:S}=T(4514),te=T(5931),{destroyer:U}=T(5601),{isNodeStream:ee,isReadable:_,isWritable:x,isWebStream:F,isTransformStream:W,isWritableStream:R,isReadableStream:$}=T(5428),{AbortError:de,codes:{ERR_INVALID_ARG_VALUE:I,ERR_MISSING_ARGS:H}}=T(4370),ae=T(4618);Ue.exports=function(...oe){if(0===oe.length)throw new H("streams");if(1===oe.length)return te.from(oe[0]);const ne=[...oe];if("function"==typeof oe[0]&&(oe[0]=te.from(oe[0])),"function"==typeof oe[oe.length-1]){const Re=oe.length-1;oe[Re]=te.from(oe[Re])}for(let Re=0;Re<oe.length;++Re)if(ee(oe[Re])||F(oe[Re])){if(Re<oe.length-1&&!(_(oe[Re])||$(oe[Re])||W(oe[Re])))throw new I(`streams[${Re}]`,ne[Re],"must be readable");if(Re>0&&!(x(oe[Re])||R(oe[Re])||W(oe[Re])))throw new I(`streams[${Re}]`,ne[Re],"must be writable")}let X,B,b,O,C;const V=oe[0],Te=S(oe,function he(Re){const ke=O;O=null,ke?ke(Re):Re?C.destroy(Re):!Ce&&!se&&C.destroy()}),se=!!(x(V)||R(V)||W(V)),Ce=!!(_(Te)||$(Te)||W(Te));if(C=new te({writableObjectMode:!(null==V||!V.writableObjectMode),readableObjectMode:!(null==Te||!Te.writableObjectMode),writable:se,readable:Ce}),se){if(ee(V))C._write=function(ke,et,qe){V.write(ke,et)?qe():X=qe},C._final=function(ke){V.end(),B=ke},V.on("drain",function(){if(X){const ke=X;X=null,ke()}});else if(F(V)){const et=(W(V)?V.writable:V).getWriter();C._write=function(){var qe=J(function*(Ee,Ne,Pe){try{yield et.ready,et.write(Ee).catch(()=>{}),Pe()}catch(He){Pe(He)}});return function(Ee,Ne,Pe){return qe.apply(this,arguments)}}(),C._final=function(){var qe=J(function*(Ee){try{yield et.ready,et.close().catch(()=>{}),B=Ee}catch(Ne){Ee(Ne)}});return function(Ee){return qe.apply(this,arguments)}}()}const Re=W(Te)?Te.readable:Te;ae(Re,()=>{if(B){const ke=B;B=null,ke()}})}if(Ce)if(ee(Te))Te.on("readable",function(){if(b){const Re=b;b=null,Re()}}),Te.on("end",function(){C.push(null)}),C._read=function(){for(;;){const Re=Te.read();if(null===Re)return void(b=C._read);if(!C.push(Re))return}};else if(F(Te)){const ke=(W(Te)?Te.readable:Te).getReader();C._read=J(function*(){for(;;)try{const{value:et,done:qe}=yield ke.read();if(!C.push(et))return;if(qe)return void C.push(null)}catch{return}})}return C._destroy=function(Re,ke){!Re&&null!==O&&(Re=new de),b=null,X=null,B=null,null===O?ke(Re):(O=ke,ee(Te)&&U(Te,Re))},C}},5601:(Ue,_e,T)=>{"use strict";const J=T(42),{aggregateTwoErrors:S,codes:{ERR_MULTIPLE_CALLBACK:te},AbortError:U}=T(4370),{Symbol:ee}=T(6305),{kDestroyed:_,isDestroyed:x,isFinished:F,isServerRequest:W}=T(5428),R=ee("kDestroy"),$=ee("kConstruct");function de(se,Ce,Re){se&&(Ce&&!Ce.errored&&(Ce.errored=se),Re&&!Re.errored&&(Re.errored=se))}function H(se,Ce,Re){let ke=!1;function et(qe){if(ke)return;ke=!0;const Ee=se._readableState,Ne=se._writableState;de(qe,Ne,Ee),Ne&&(Ne.closed=!0),Ee&&(Ee.closed=!0),"function"==typeof Re&&Re(qe),qe?J.nextTick(ae,se,qe):J.nextTick(q,se)}try{se._destroy(Ce||null,et)}catch(qe){et(qe)}}function ae(se,Ce){oe(se,Ce),q(se)}function q(se){const Ce=se._readableState,Re=se._writableState;Re&&(Re.closeEmitted=!0),Ce&&(Ce.closeEmitted=!0),(null!=Re&&Re.emitClose||null!=Ce&&Ce.emitClose)&&se.emit("close")}function oe(se,Ce){const Re=se._readableState,ke=se._writableState;null!=ke&&ke.errorEmitted||null!=Re&&Re.errorEmitted||(ke&&(ke.errorEmitted=!0),Re&&(Re.errorEmitted=!0),se.emit("error",Ce))}function X(se,Ce,Re){const ke=se._readableState,et=se._writableState;if(null!=et&&et.destroyed||null!=ke&&ke.destroyed)return this;null!=ke&&ke.autoDestroy||null!=et&&et.autoDestroy?se.destroy(Ce):Ce&&(et&&!et.errored&&(et.errored=Ce),ke&&!ke.errored&&(ke.errored=Ce),Re?J.nextTick(oe,se,Ce):oe(se,Ce))}function b(se){let Ce=!1;function Re(ke){if(Ce)return void X(se,ke??new te);Ce=!0;const et=se._readableState,qe=se._writableState,Ee=qe||et;et&&(et.constructed=!0),qe&&(qe.constructed=!0),Ee.destroyed?se.emit(R,ke):ke?X(se,ke,!0):J.nextTick(O,se)}try{se._construct(ke=>{J.nextTick(Re,ke)})}catch(ke){J.nextTick(Re,ke)}}function O(se){se.emit($)}function C(se){return se?.setHeader&&"function"==typeof se.abort}function he(se){se.emit("close")}function V(se,Ce){se.emit("error",Ce),J.nextTick(he,se)}Ue.exports={construct:function B(se,Ce){if("function"!=typeof se._construct)return;const Re=se._readableState,ke=se._writableState;Re&&(Re.constructed=!1),ke&&(ke.constructed=!1),se.once($,Ce),!(se.listenerCount($)>1)&&J.nextTick(b,se)},destroyer:function Te(se,Ce){!se||x(se)||(!Ce&&!F(se)&&(Ce=new U),W(se)?(se.socket=null,se.destroy(Ce)):C(se)?se.abort():C(se.req)?se.req.abort():"function"==typeof se.destroy?se.destroy(Ce):"function"==typeof se.close?se.close():Ce?J.nextTick(V,se,Ce):J.nextTick(he,se),se.destroyed||(se[_]=!0))},destroy:function I(se,Ce){const Re=this._readableState,ke=this._writableState,et=ke||Re;return null!=ke&&ke.destroyed||null!=Re&&Re.destroyed?("function"==typeof Ce&&Ce(),this):(de(se,ke,Re),ke&&(ke.destroyed=!0),Re&&(Re.destroyed=!0),et.constructed?H(this,se,Ce):this.once(R,function(qe){H(this,S(qe,se),Ce)}),this)},undestroy:function ne(){const se=this._readableState,Ce=this._writableState;se&&(se.constructed=!0,se.closed=!1,se.closeEmitted=!1,se.destroyed=!1,se.errored=null,se.errorEmitted=!1,se.reading=!1,se.ended=!1===se.readable,se.endEmitted=!1===se.readable),Ce&&(Ce.constructed=!0,Ce.destroyed=!1,Ce.closed=!1,Ce.closeEmitted=!1,Ce.errored=null,Ce.errorEmitted=!1,Ce.finalCalled=!1,Ce.prefinished=!1,Ce.ended=!1===Ce.writable,Ce.ending=!1===Ce.writable,Ce.finished=!1===Ce.writable)},errorOrDestroy:X}},5931:(Ue,_e,T)=>{"use strict";const{ObjectDefineProperties:J,ObjectGetOwnPropertyDescriptor:S,ObjectKeys:te,ObjectSetPrototypeOf:U}=T(6305);Ue.exports=x;const ee=T(8383),_=T(9764);U(x.prototype,ee.prototype),U(x,ee);{const $=te(_.prototype);for(let de=0;de<$.length;de++){const I=$[de];x.prototype[I]||(x.prototype[I]=_.prototype[I])}}function x($){if(!(this instanceof x))return new x($);ee.call(this,$),_.call(this,$),$?(this.allowHalfOpen=!1!==$.allowHalfOpen,!1===$.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===$.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let F,R;function W(){return void 0===F&&(F={}),F}J(x.prototype,{writable:{__proto__:null,...S(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...S(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...S(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...S(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...S(_.prototype,"writableLength")},writableFinished:{__proto__:null,...S(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...S(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...S(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...S(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set($){this._readableState&&this._writableState&&(this._readableState.destroyed=$,this._writableState.destroyed=$)}}}),x.fromWeb=function($,de){return W().newStreamDuplexFromReadableWritablePair($,de)},x.toWeb=function($){return W().newReadableWritablePairFromDuplex($)},x.from=function($){return R||(R=T(8078)),R($,"body")}},8078:(Ue,_e,T)=>{var J=T(7156).default,S=T(6737).default,te=T(8186).default;const U=T(42),ee=T(1657),{isReadable:_,isWritable:x,isIterable:F,isNodeStream:W,isReadableNodeStream:R,isWritableNodeStream:$,isDuplexNodeStream:de}=T(5428),I=T(4618),{AbortError:H,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_INVALID_RETURN_VALUE:q}}=T(4370),{destroyer:oe}=T(5601),ne=T(5931),X=T(8383),{createDeferredPromise:B}=T(2656),b=T(55),O=globalThis.Blob||ee.Blob,C=typeof O<"u"?function(ke){return ke instanceof O}:function(ke){return!1},he=globalThis.AbortController||T(3982).AbortController,{FunctionPrototypeCall:V}=T(6305);class Te extends ne{constructor(ke){super(ke),!1===ke?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===ke?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Ce(Re){const ke=Re.readable&&"function"!=typeof Re.readable.read?X.wrap(Re.readable):Re.readable,et=Re.writable;let Ne,Pe,He,pe,Ae,qe=!!_(ke),Ee=!!x(et);function Ye(st){const Ze=pe;pe=null,Ze?Ze(st):st&&Ae.destroy(st)}return Ae=new Te({readableObjectMode:!(null==ke||!ke.readableObjectMode),writableObjectMode:!(null==et||!et.writableObjectMode),readable:qe,writable:Ee}),Ee&&(I(et,st=>{Ee=!1,st&&oe(ke,st),Ye(st)}),Ae._write=function(st,Ze,le){et.write(st,Ze)?le():Ne=le},Ae._final=function(st){et.end(),Pe=st},et.on("drain",function(){if(Ne){const st=Ne;Ne=null,st()}}),et.on("finish",function(){if(Pe){const st=Pe;Pe=null,st()}})),qe&&(I(ke,st=>{qe=!1,st&&oe(ke,st),Ye(st)}),ke.on("readable",function(){if(He){const st=He;He=null,st()}}),ke.on("end",function(){Ae.push(null)}),Ae._read=function(){for(;;){const st=ke.read();if(null===st)return void(He=Ae._read);if(!Ae.push(st))return}}),Ae._destroy=function(st,Ze){!st&&null!==pe&&(st=new H),He=null,Ne=null,Pe=null,null===pe?Ze(st):(pe=Ze,oe(et,st),oe(ke,st))},Ae}Ue.exports=function Re(ke,et){if(de(ke))return ke;if(R(ke))return Ce({readable:ke});if($(ke))return Ce({writable:ke});if(W(ke))return Ce({writable:!1,readable:!1});if("function"==typeof ke){const{value:Ee,write:Ne,final:Pe,destroy:He}=function se(Re){let{promise:ke,resolve:et}=B();const qe=new he,Ee=qe.signal;return{value:Re(te(function*(){for(;;){const Pe=ke;ke=null;const{chunk:He,done:pe,cb:Ae}=yield S(Pe);if(U.nextTick(Ae),pe)return;if(Ee.aborted)throw new H(void 0,{cause:Ee.reason});({promise:ke,resolve:et}=B()),yield He}})(),{signal:Ee}),write(Pe,He,pe){const Ae=et;et=null,Ae({chunk:Pe,done:!1,cb:pe})},final(Pe){const He=et;et=null,He({done:!0,cb:Pe})},destroy(Pe,He){qe.abort(),He(Pe)}}}(ke);if(F(Ee))return b(Te,Ee,{objectMode:!0,write:Ne,final:Pe,destroy:He});const pe=Ee?.then;if("function"==typeof pe){let Ae;const Ye=V(pe,Ee,st=>{if(null!=st)throw new q("nully","body",st)},st=>{oe(Ae,st)});return Ae=new Te({objectMode:!0,readable:!1,write:Ne,final(st){Pe(J(function*(){try{yield Ye,U.nextTick(st,null)}catch(Ze){U.nextTick(st,Ze)}}))},destroy:He})}throw new q("Iterable, AsyncIterable or AsyncFunction",et,Ee)}if(C(ke))return Re(ke.arrayBuffer());if(F(ke))return b(Te,ke,{objectMode:!0,writable:!1});if("object"==typeof ke?.writable||"object"==typeof ke?.readable)return Ce({readable:null!=ke&&ke.readable?R(ke?.readable)?ke?.readable:Re(ke.readable):void 0,writable:null!=ke&&ke.writable?$(ke?.writable)?ke?.writable:Re(ke.writable):void 0});const qe=ke?.then;if("function"==typeof qe){let Ee;return V(qe,ke,Ne=>{null!=Ne&&Ee.push(Ne),Ee.push(null)},Ne=>{oe(Ee,Ne)}),Ee=new Te({objectMode:!0,writable:!1,read(){}})}throw new ae(et,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],ke)}},4618:(Ue,_e,T)=>{const J=T(42),{AbortError:S,codes:te}=T(4370),{ERR_INVALID_ARG_TYPE:U,ERR_STREAM_PREMATURE_CLOSE:ee}=te,{kEmptyObject:_,once:x}=T(2656),{validateAbortSignal:F,validateFunction:W,validateObject:R,validateBoolean:$}=T(2120),{Promise:de,PromisePrototypeThen:I}=T(6305),{isClosed:H,isReadable:ae,isReadableNodeStream:q,isReadableStream:oe,isReadableFinished:ne,isReadableErrored:X,isWritable:B,isWritableNodeStream:b,isWritableStream:O,isWritableFinished:C,isWritableErrored:he,isNodeStream:V,willEmitClose:Te,kIsClosedPromise:se}=T(5428),Re=()=>{};function ke(Ee,Ne,Pe){var He,pe;if(2===arguments.length?(Pe=Ne,Ne=_):null==Ne?Ne=_:R(Ne,"options"),W(Pe,"callback"),F(Ne.signal,"options.signal"),Pe=x(Pe),oe(Ee)||O(Ee))return function et(Ee,Ne,Pe){let He=!1,pe=Re;if(Ne.signal)if(pe=()=>{He=!0,Pe.call(Ee,new S(void 0,{cause:Ne.signal.reason}))},Ne.signal.aborted)J.nextTick(pe);else{const Ye=Pe;Pe=x((...st)=>{Ne.signal.removeEventListener("abort",pe),Ye.apply(Ee,st)}),Ne.signal.addEventListener("abort",pe)}const Ae=(...Ye)=>{He||J.nextTick(()=>Pe.apply(Ee,Ye))};return I(Ee[se].promise,Ae,Ae),Re}(Ee,Ne,Pe);if(!V(Ee))throw new U("stream",["ReadableStream","WritableStream","Stream"],Ee);const Ae=null!==(He=Ne.readable)&&void 0!==He?He:q(Ee),Ye=null!==(pe=Ne.writable)&&void 0!==pe?pe:b(Ee),st=Ee._writableState,Ze=Ee._readableState,le=()=>{Ee.writable||ie()};let N=Te(Ee)&&q(Ee)===Ae&&b(Ee)===Ye,E=C(Ee,!1);const ie=()=>{E=!0,Ee.destroyed&&(N=!1),(!N||Ee.readable&&!Ae)&&(!Ae||z)&&Pe.call(Ee)};let z=ne(Ee,!1);const Se=()=>{z=!0,Ee.destroyed&&(N=!1),(!N||Ee.writable&&!Ye)&&(!Ye||E)&&Pe.call(Ee)},tt=Q=>{Pe.call(Ee,Q)};let ce=H(Ee);const Z=()=>{ce=!0;const Q=he(Ee)||X(Ee);return Q&&"boolean"!=typeof Q?Pe.call(Ee,Q):Ae&&!z&&q(Ee,!0)&&!ne(Ee,!1)?Pe.call(Ee,new ee):!Ye||E||C(Ee,!1)?void Pe.call(Ee):Pe.call(Ee,new ee)},L=()=>{ce=!0;const Q=he(Ee)||X(Ee);if(Q&&"boolean"!=typeof Q)return Pe.call(Ee,Q);Pe.call(Ee)},w=()=>{Ee.req.on("finish",ie)};!function Ce(Ee){return Ee.setHeader&&"function"==typeof Ee.abort}(Ee)?Ye&&!st&&(Ee.on("end",le),Ee.on("close",le)):(Ee.on("complete",ie),N||Ee.on("abort",Z),Ee.req?w():Ee.on("request",w)),!N&&"boolean"==typeof Ee.aborted&&Ee.on("aborted",Z),Ee.on("end",Se),Ee.on("finish",ie),!1!==Ne.error&&Ee.on("error",tt),Ee.on("close",Z),ce?J.nextTick(Z):null!=st&&st.errorEmitted||null!=Ze&&Ze.errorEmitted?N||J.nextTick(L):(!Ae&&(!N||ae(Ee))&&(E||!1===B(Ee))||!Ye&&(!N||B(Ee))&&(z||!1===ae(Ee))||Ze&&Ee.req&&Ee.aborted)&&J.nextTick(L);const M=()=>{Pe=Re,Ee.removeListener("aborted",Z),Ee.removeListener("complete",ie),Ee.removeListener("abort",Z),Ee.removeListener("request",w),Ee.req&&Ee.req.removeListener("finish",ie),Ee.removeListener("end",le),Ee.removeListener("close",le),Ee.removeListener("finish",ie),Ee.removeListener("end",Se),Ee.removeListener("error",tt),Ee.removeListener("close",Z)};if(Ne.signal&&!ce){const Q=()=>{const fe=Pe;M(),fe.call(Ee,new S(void 0,{cause:Ne.signal.reason}))};if(Ne.signal.aborted)J.nextTick(Q);else{const fe=Pe;Pe=x((...ze)=>{Ne.signal.removeEventListener("abort",Q),fe.apply(Ee,ze)}),Ne.signal.addEventListener("abort",Q)}}return M}Ue.exports=ke,Ue.exports.finished=function qe(Ee,Ne){var Pe;let He=!1;return null===Ne&&(Ne=_),null!==(Pe=Ne)&&void 0!==Pe&&Pe.cleanup&&($(Ne.cleanup,"cleanup"),He=Ne.cleanup),new de((pe,Ae)=>{const Ye=ke(Ee,Ne,st=>{He&&Ye(),st?Ae(st):pe()})})}},55:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(42),{PromisePrototypeThen:te,SymbolAsyncIterator:U,SymbolIterator:ee}=T(6305),{Buffer:_}=T(1657),{ERR_INVALID_ARG_TYPE:x,ERR_STREAM_NULL_VALUES:F}=T(4370).codes;Ue.exports=function W(R,$,de){let I,H;if("string"==typeof $||$ instanceof _)return new R({objectMode:!0,...de,read(){this.push($),this.push(null)}});if($&&$[U])H=!0,I=$[U]();else{if(!$||!$[ee])throw new x("iterable",["Iterable"],$);H=!1,I=$[ee]()}const ae=new R({objectMode:!0,highWaterMark:1,...de});let q=!1;function ne(){return(ne=J(function*(b){if(null!=b&&"function"==typeof I.throw){const{value:he,done:V}=yield I.throw(b);if(yield he,V)return}if("function"==typeof I.return){const{value:he}=yield I.return();yield he}})).apply(this,arguments)}function B(){return(B=J(function*(){for(;;){try{const{value:b,done:O}=H?yield I.next():I.next();if(O)ae.push(null);else{const C=b&&"function"==typeof b.then?yield b:b;if(null===C)throw q=!1,new F;if(ae.push(C))continue;q=!1}}catch(b){ae.destroy(b)}break}})).apply(this,arguments)}return ae._read=function(){q||(q=!0,function X(){B.apply(this,arguments)}())},ae._destroy=function(b,O){te(function oe(b){return ne.apply(this,arguments)}(b),()=>S.nextTick(O,b),C=>S.nextTick(O,C||b))},ae}},900:(Ue,_e,T)=>{"use strict";const{ArrayIsArray:J,ObjectSetPrototypeOf:S}=T(6305),{EventEmitter:te}=T(2016);function U(_){te.call(this,_)}function ee(_,x,F){if("function"==typeof _.prependListener)return _.prependListener(x,F);_._events&&_._events[x]?J(_._events[x])?_._events[x].unshift(F):_._events[x]=[F,_._events[x]]:_.on(x,F)}S(U.prototype,te.prototype),S(U,te),U.prototype.pipe=function(_,x){const F=this;function W(q){_.writable&&!1===_.write(q)&&F.pause&&F.pause()}function R(){F.readable&&F.resume&&F.resume()}F.on("data",W),_.on("drain",R),!_._isStdio&&(!x||!1!==x.end)&&(F.on("end",de),F.on("close",I));let $=!1;function de(){$||($=!0,_.end())}function I(){$||($=!0,"function"==typeof _.destroy&&_.destroy())}function H(q){ae(),0===te.listenerCount(this,"error")&&this.emit("error",q)}function ae(){F.removeListener("data",W),_.removeListener("drain",R),F.removeListener("end",de),F.removeListener("close",I),F.removeListener("error",H),_.removeListener("error",H),F.removeListener("end",ae),F.removeListener("close",ae),_.removeListener("close",ae)}return ee(F,"error",H),ee(_,"error",H),F.on("end",ae),F.on("close",ae),_.on("close",ae),_.emit("pipe",F),_},Ue.exports={Stream:U,prependListener:ee}},7624:(Ue,_e,T)=>{"use strict";var J=T(7156).default,S=T(8131).default,te=T(8237).default,U=T(6737).default,ee=T(8186).default;const _=globalThis.AbortController||T(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:x,ERR_INVALID_ARG_TYPE:F,ERR_MISSING_ARGS:W,ERR_OUT_OF_RANGE:R},AbortError:$}=T(4370),{validateAbortSignal:de,validateInteger:I,validateObject:H}=T(2120),ae=T(6305).Symbol("kWeak"),{finished:q}=T(4618),oe=T(7721),{addAbortSignalNoValidate:ne}=T(9987),{isWritable:X,isNodeStream:B}=T(5428),{ArrayPrototypePush:b,MathFloor:O,Number:C,NumberIsNaN:he,Promise:V,PromiseReject:Te,PromisePrototypeThen:se,Symbol:Ce}=T(6305),Re=Ce("kEmpty"),ke=Ce("kEof");function qe(w,M){if("function"!=typeof w)throw new F("fn",["Function","AsyncFunction"],w);null!=M&&H(M,"options"),null!=M?.signal&&de(M.signal,"options.signal");let Q=1;return null!=M?.concurrency&&(Q=O(M.concurrency)),I(Q,"concurrency",1),function(){var fe=ee(function*(){var Xe,dt;const mt=new _,gt=this,zt=[],on=mt.signal,Ie={signal:on},G=()=>mt.abort();null!=M&&null!==(Xe=M.signal)&&void 0!==Xe&&Xe.aborted&&G(),null==M||null===(dt=M.signal)||void 0===dt||dt.addEventListener("abort",G);let v,re,Ge=!1;function Je(){Ge=!0}function Wt(){return(Wt=J(function*(){try{var Xn,an=!1,Kn=!1;try{for(var mr,Dn=te(gt);an=!(mr=yield Dn.next()).done;an=!1){let Ui=mr.value;var ss;if(Ge)return;if(on.aborted)throw new $;try{Ui=w(Ui,Ie)}catch($r){Ui=Te($r)}Ui!==Re&&("function"==typeof(null===(ss=Ui)||void 0===ss?void 0:ss.catch)&&Ui.catch(Je),zt.push(Ui),v&&(v(),v=null),!Ge&&zt.length&&zt.length>=Q&&(yield new V($r=>{re=$r})))}}catch(Ui){Kn=!0,Xn=Ui}finally{try{an&&null!=Dn.return&&(yield Dn.return())}finally{if(Kn)throw Xn}}zt.push(ke)}catch(Ui){const $r=Te(Ui);se($r,void 0,Je),zt.push($r)}finally{var Wo;Ge=!0,v&&(v(),v=null),null==M||null===(Wo=M.signal)||void 0===Wo||Wo.removeEventListener("abort",G)}})).apply(this,arguments)}!function at(){Wt.apply(this,arguments)}();try{for(;;){for(;zt.length>0;){const an=yield U(zt[0]);if(an===ke)return;if(on.aborted)throw new $;an!==Re&&(yield an),zt.shift(),re&&(re(),re=null)}yield U(new V(an=>{v=an}))}}finally{mt.abort(),Ge=!0,re&&(re(),re=null)}});return function ze(){return fe.apply(this,arguments)}}().call(this)}function Ne(w){return Pe.apply(this,arguments)}function Pe(){return(Pe=J(function*(w,M=void 0){var ze,Q=!1,fe=!1;try{for(var Xe=te(le.call(this,w,M));Q=!(yield Xe.next()).done;Q=!1)return!0}catch(mt){fe=!0,ze=mt}finally{try{Q&&null!=Xe.return&&(yield Xe.return())}finally{if(fe)throw ze}}return!1})).apply(this,arguments)}function pe(){return(pe=J(function*(w,M=void 0){if("function"!=typeof w)throw new F("fn",["Function","AsyncFunction"],w);return!(yield Ne.call(this,J(function*(...Q){return!(yield w(...Q))}),M))})).apply(this,arguments)}function Ye(){return(Ye=J(function*(w,M){var ze,Q=!1,fe=!1;try{for(var dt,Xe=te(le.call(this,w,M));Q=!(dt=yield Xe.next()).done;Q=!1)return dt.value}catch(mt){fe=!0,ze=mt}finally{try{Q&&null!=Xe.return&&(yield Xe.return())}finally{if(fe)throw ze}}})).apply(this,arguments)}function Ze(){return Ze=J(function*(w,M){if("function"!=typeof w)throw new F("fn",["Function","AsyncFunction"],w);function fe(){return(fe=J(function*(zt,on){return yield w(zt,on),Re})).apply(this,arguments)}var dt,ze=!1,Xe=!1;try{for(var mt=te(qe.call(this,function Q(zt,on){return fe.apply(this,arguments)},M));ze=!(yield mt.next()).done;ze=!1);}catch(zt){Xe=!0,dt=zt}finally{try{ze&&null!=mt.return&&(yield mt.return())}finally{if(Xe)throw dt}}}),Ze.apply(this,arguments)}function le(w,M){if("function"!=typeof w)throw new F("fn",["Function","AsyncFunction"],w);function fe(){return(fe=J(function*(ze,Xe){return(yield w(ze,Xe))?ze:Re})).apply(this,arguments)}return qe.call(this,function Q(ze,Xe){return fe.apply(this,arguments)},M)}class N extends W{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ie(){return ie=J(function*(w,M,Q){var fe;if("function"!=typeof w)throw new F("reducer",["Function","AsyncFunction"],w);null!=Q&&H(Q,"options"),null!=Q?.signal&&de(Q.signal,"options.signal");let ze=arguments.length>1;if(null!=Q&&null!==(fe=Q.signal)&&void 0!==fe&&fe.aborted){const re=new $(void 0,{cause:Q.signal.reason});throw this.once("error",()=>{}),yield q(this.destroy(re)),re}const Xe=new _,dt=Xe.signal;null!=Q&&Q.signal&&Q.signal.addEventListener("abort",()=>Xe.abort(),{once:!0,[ae]:this});let mt=!1;try{var on,gt=!1,zt=!1;try{for(var G,Ie=te(this);gt=!(G=yield Ie.next()).done;gt=!1){const re=G.value;var v;if(mt=!0,null!=Q&&null!==(v=Q.signal)&&void 0!==v&&v.aborted)throw new $;ze?M=yield w(M,re,{signal:dt}):(M=re,ze=!0)}}catch(re){zt=!0,on=re}finally{try{gt&&null!=Ie.return&&(yield Ie.return())}finally{if(zt)throw on}}if(!mt&&!ze)throw new N}finally{Xe.abort()}return M}),ie.apply(this,arguments)}function Se(){return(Se=J(function*(w){null!=w&&H(w,"options"),null!=w?.signal&&de(w.signal,"options.signal");const M=[];var ze,Q=!1,fe=!1;try{for(var dt,Xe=te(this);Q=!(dt=yield Xe.next()).done;Q=!1){const gt=dt.value;var mt;if(null!=w&&null!==(mt=w.signal)&&void 0!==mt&&mt.aborted)throw new $(void 0,{cause:w.signal.reason});b(M,gt)}}catch(gt){fe=!0,ze=gt}finally{try{Q&&null!=Xe.return&&(yield Xe.return())}finally{if(fe)throw ze}}return M})).apply(this,arguments)}function ce(w){if(w=C(w),he(w))return 0;if(w<0)throw new R("number",">= 0",w);return w}Ue.exports.streamReturningOperators={asIndexedPairs:function Ee(w=void 0){return null!=w&&H(w,"options"),null!=w?.signal&&de(w.signal,"options.signal"),function(){var M=ee(function*(){let fe=0;var dt,ze=!1,Xe=!1;try{for(var gt,mt=te(this);ze=!(gt=yield U(mt.next())).done;ze=!1){const on=gt.value;var zt;if(null!=w&&null!==(zt=w.signal)&&void 0!==zt&&zt.aborted)throw new $({cause:w.signal.reason});yield[fe++,on]}}catch(on){Xe=!0,dt=on}finally{try{ze&&null!=mt.return&&(yield U(mt.return()))}finally{if(Xe)throw dt}}});return function Q(){return M.apply(this,arguments)}}().call(this)},drop:function Z(w,M=void 0){return null!=M&&H(M,"options"),null!=M?.signal&&de(M.signal,"options.signal"),w=ce(w),function(){var Q=ee(function*(){var ze;if(null!=M&&null!==(ze=M.signal)&&void 0!==ze&&ze.aborted)throw new $;var mt,Xe=!1,dt=!1;try{for(var zt,gt=te(this);Xe=!(zt=yield U(gt.next())).done;Xe=!1){const Ie=zt.value;var on;if(null!=M&&null!==(on=M.signal)&&void 0!==on&&on.aborted)throw new $;w--<=0&&(yield Ie)}}catch(Ie){dt=!0,mt=Ie}finally{try{Xe&&null!=gt.return&&(yield U(gt.return()))}finally{if(dt)throw mt}}});return function fe(){return Q.apply(this,arguments)}}().call(this)},filter:le,flatMap:function tt(w,M){const Q=qe.call(this,w,M);return function(){var fe=ee(function*(){var mt,Xe=!1,dt=!1;try{for(var zt,gt=te(Q);Xe=!(zt=yield U(gt.next())).done;Xe=!1){const on=zt.value;yield*S(te(on),U)}}catch(on){dt=!0,mt=on}finally{try{Xe&&null!=gt.return&&(yield U(gt.return()))}finally{if(dt)throw mt}}});return function ze(){return fe.apply(this,arguments)}}().call(this)},map:qe,take:function L(w,M=void 0){return null!=M&&H(M,"options"),null!=M?.signal&&de(M.signal,"options.signal"),w=ce(w),function(){var Q=ee(function*(){var ze;if(null!=M&&null!==(ze=M.signal)&&void 0!==ze&&ze.aborted)throw new $;var mt,Xe=!1,dt=!1;try{for(var zt,gt=te(this);Xe=!(zt=yield U(gt.next())).done;Xe=!1){const Ie=zt.value;var on;if(null!=M&&null!==(on=M.signal)&&void 0!==on&&on.aborted)throw new $;if(!(w-- >0))return;yield Ie}}catch(Ie){dt=!0,mt=Ie}finally{try{Xe&&null!=gt.return&&(yield U(gt.return()))}finally{if(dt)throw mt}}});return function fe(){return Q.apply(this,arguments)}}().call(this)},compose:function et(w,M){if(null!=M&&H(M,"options"),null!=M?.signal&&de(M.signal,"options.signal"),B(w)&&!X(w))throw new x("stream",w,"must be writable");const Q=oe(this,w);return null!=M&&M.signal&&ne(M.signal,Q),Q}},Ue.exports.promiseReturningOperators={every:function He(w){return pe.apply(this,arguments)},forEach:function st(w,M){return Ze.apply(this,arguments)},reduce:function E(w,M,Q){return ie.apply(this,arguments)},toArray:function z(w){return Se.apply(this,arguments)},some:Ne,find:function Ae(w,M){return Ye.apply(this,arguments)}}},6973:(Ue,_e,T)=>{"use strict";const{ObjectSetPrototypeOf:J}=T(6305);Ue.exports=te;const S=T(123);function te(U){if(!(this instanceof te))return new te(U);S.call(this,U)}J(te.prototype,S.prototype),J(te,S),te.prototype._transform=function(U,ee,_){_(null,U)}},4514:(Ue,_e,T)=>{var J=T(7156).default,S=T(8186).default,te=T(6737).default,U=T(8131).default,ee=T(8237).default;const _=T(42),{ArrayIsArray:x,Promise:F,SymbolAsyncIterator:W}=T(6305),R=T(4618),{once:$}=T(2656),de=T(5601),I=T(5931),{aggregateTwoErrors:H,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_INVALID_RETURN_VALUE:q,ERR_MISSING_ARGS:oe,ERR_STREAM_DESTROYED:ne,ERR_STREAM_PREMATURE_CLOSE:X},AbortError:B}=T(4370),{validateFunction:b,validateAbortSignal:O}=T(2120),{isIterable:C,isReadable:he,isReadableNodeStream:V,isNodeStream:Te,isTransformStream:se,isWebStream:Ce,isReadableStream:Re,isReadableEnded:ke}=T(5428),et=globalThis.AbortController||T(3982).AbortController;let qe,Ee;function Ne(z,Se,tt){let ce=!1;return z.on("close",()=>{ce=!0}),{destroy:L=>{ce||(ce=!0,de.destroyer(z,L||new ne("pipe")))},cleanup:R(z,{readable:Se,writable:tt},L=>{ce=!L})}}function He(z){if(C(z))return z;if(V(z))return function pe(z){return Ae.apply(this,arguments)}(z);throw new ae("val",["Readable","Iterable","AsyncIterable"],z)}function Ae(){return(Ae=S(function*(z){Ee||(Ee=T(8383)),yield*U(ee(Ee.prototype[W].call(z)),te)})).apply(this,arguments)}function Ye(z,Se,tt,ce){return st.apply(this,arguments)}function st(){return(st=J(function*(z,Se,tt,{end:ce}){let Z,L=null;const w=gt=>{if(gt&&(Z=gt),L){const zt=L;L=null,zt()}},M=()=>new F((gt,zt)=>{Z?zt(Z):L=()=>{Z?zt(Z):gt()}});Se.on("drain",w);const Q=R(Se,{readable:!1},w);try{Se.writableNeedDrain&&(yield M());var Xe,fe=!1,ze=!1;try{for(var mt,dt=ee(z);fe=!(mt=yield dt.next()).done;fe=!1)Se.write(mt.value)||(yield M())}catch(gt){ze=!0,Xe=gt}finally{try{fe&&null!=dt.return&&(yield dt.return())}finally{if(ze)throw Xe}}ce&&Se.end(),yield M(),tt()}catch(gt){tt(Z!==gt?H(Z,gt):gt)}finally{Q(),Se.off("drain",w)}})).apply(this,arguments)}function Ze(z,Se,tt,ce){return le.apply(this,arguments)}function le(){return(le=J(function*(z,Se,tt,{end:ce}){se(Se)&&(Se=Se.writable);const Z=Se.getWriter();try{var M,L=!1,w=!1;try{for(var fe,Q=ee(z);L=!(fe=yield Q.next()).done;L=!1){const ze=fe.value;yield Z.ready,Z.write(ze).catch(()=>{})}}catch(ze){w=!0,M=ze}finally{try{L&&null!=Q.return&&(yield Q.return())}finally{if(w)throw M}}yield Z.ready,ce&&(yield Z.close()),tt()}catch(ze){try{yield Z.abort(ze),tt(ze)}catch(Xe){tt(Xe)}}})).apply(this,arguments)}function E(z,Se,tt){if(1===z.length&&x(z[0])&&(z=z[0]),z.length<2)throw new oe("streams");const ce=new et,Z=ce.signal,L=tt?.signal,w=[];function M(){mt(new B)}let Q,fe;O(L,"options.signal"),L?.addEventListener("abort",M);const ze=[];let gt,Xe=0;function dt(G){mt(G,0==--Xe)}function mt(G,v){if(G&&(!Q||"ERR_STREAM_PREMATURE_CLOSE"===Q.code)&&(Q=G),Q||v){for(;ze.length;)ze.shift()(Q);L?.removeEventListener("abort",M),ce.abort(),v&&(Q||w.forEach(re=>re()),_.nextTick(Se,Q,fe))}}for(let G=0;G<z.length;G++){const v=z[G],re=G<z.length-1,Ge=G>0,Je=re||!1!==tt?.end,at=G===z.length-1;if(Te(v)){let Wt=function(an){an&&"AbortError"!==an.name&&"ERR_STREAM_PREMATURE_CLOSE"!==an.code&&dt(an)};if(Je){const{destroy:an,cleanup:Kn}=Ne(v,re,Ge);ze.push(an),he(v)&&at&&w.push(Kn)}v.on("error",Wt),he(v)&&at&&w.push(()=>{v.removeListener("error",Wt)})}if(0===G)if("function"==typeof v){if(gt=v({signal:Z}),!C(gt))throw new q("Iterable, AsyncIterable or Stream","source",gt)}else gt=C(v)||V(v)||se(v)?v:I.from(v);else if("function"==typeof v){var zt;if(gt=se(gt)?He(null===(zt=gt)||void 0===zt?void 0:zt.readable):He(gt),gt=v(gt,{signal:Z}),re){if(!C(gt,!0))throw new q("AsyncIterable",`transform[${G-1}]`,gt)}else{var on;qe||(qe=T(6973));const Wt=new qe({objectMode:!0}),an=null===(on=gt)||void 0===on?void 0:on.then;if("function"==typeof an)Xe++,an.call(gt,Dn=>{fe=Dn,null!=Dn&&Wt.write(Dn),Je&&Wt.end(),_.nextTick(dt)},Dn=>{Wt.destroy(Dn),_.nextTick(dt,Dn)});else if(C(gt,!0))Xe++,Ye(gt,Wt,dt,{end:Je});else{if(!Re(gt)&&!se(gt))throw new q("AsyncIterable or Promise","destination",gt);Xe++,Ye(gt.readable||gt,Wt,dt,{end:Je})}gt=Wt;const{destroy:Kn,cleanup:Xn}=Ne(gt,!1,!0);ze.push(Kn),at&&w.push(Xn)}}else if(Te(v)){if(V(gt)){Xe+=2;const Wt=ie(gt,v,dt,{end:Je});he(v)&&at&&w.push(Wt)}else if(se(gt)||Re(gt))Xe++,Ye(gt.readable||gt,v,dt,{end:Je});else{if(!C(gt))throw new ae("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],gt);Xe++,Ye(gt,v,dt,{end:Je})}gt=v}else if(Ce(v)){if(V(gt))Xe++,Ze(He(gt),v,dt,{end:Je});else if(Re(gt)||C(gt))Xe++,Ze(gt,v,dt,{end:Je});else{if(!se(gt))throw new ae("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],gt);Xe++,Ze(gt.readable,v,dt,{end:Je})}gt=v}else gt=I.from(v)}return(null!=Z&&Z.aborted||null!=L&&L.aborted)&&_.nextTick(M),gt}function ie(z,Se,tt,{end:ce}){let Z=!1;if(Se.on("close",()=>{Z||tt(new X)}),z.pipe(Se,{end:!1}),ce){let w=function(){Z=!0,Se.end()};ke(z)?_.nextTick(w):z.once("end",w)}else tt();return R(z,{readable:!0,writable:!1},w=>{const M=z._readableState;w&&"ERR_STREAM_PREMATURE_CLOSE"===w.code&&M&&M.ended&&!M.errored&&!M.errorEmitted?z.once("end",tt).once("error",tt):tt(w)}),R(Se,{readable:!1,writable:!0},tt)}Ue.exports={pipelineImpl:E,pipeline:function N(...z){return E(z,$(function Pe(z){return b(z[z.length-1],"streams[stream.length - 1]"),z.pop()}(z)))}}},8383:(Ue,_e,T)=>{var J=T(6737).default,S=T(8186).default;const te=T(42),{ArrayPrototypeIndexOf:U,NumberIsInteger:ee,NumberIsNaN:_,NumberParseInt:x,ObjectDefineProperties:F,ObjectKeys:W,ObjectSetPrototypeOf:R,Promise:$,SafeSet:de,SymbolAsyncIterator:I,Symbol:H}=T(6305);Ue.exports=Ye,Ye.ReadableState=Ae;const{EventEmitter:ae}=T(2016),{Stream:q,prependListener:oe}=T(900),{Buffer:ne}=T(1657),{addAbortSignal:X}=T(9987),B=T(4618);let b=T(2656).debuglog("stream",v=>{b=v});const O=T(2960),C=T(5601),{getHighWaterMark:he,getDefaultHighWaterMark:V}=T(8782),{aggregateTwoErrors:Te,codes:{ERR_INVALID_ARG_TYPE:se,ERR_METHOD_NOT_IMPLEMENTED:Ce,ERR_OUT_OF_RANGE:Re,ERR_STREAM_PUSH_AFTER_EOF:ke,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:et}}=T(4370),{validateObject:qe}=T(2120),Ee=H("kPaused"),{StringDecoder:Ne}=T(2024),Pe=T(55);R(Ye.prototype,q.prototype),R(Ye,q);const He=()=>{},{errorOrDestroy:pe}=C;function Ae(v,re,Ge){"boolean"!=typeof Ge&&(Ge=re instanceof T(5931)),this.objectMode=!(!v||!v.objectMode),Ge&&(this.objectMode=this.objectMode||!(!v||!v.readableObjectMode)),this.highWaterMark=v?he(this,v,"readableHighWaterMark",Ge):V(!1),this.buffer=new O,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Ee]=null,this.errorEmitted=!1,this.emitClose=!v||!1!==v.emitClose,this.autoDestroy=!v||!1!==v.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=v&&v.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,v&&v.encoding&&(this.decoder=new Ne(v.encoding),this.encoding=v.encoding)}function Ye(v){if(!(this instanceof Ye))return new Ye(v);const re=this instanceof T(5931);this._readableState=new Ae(v,this,re),v&&("function"==typeof v.read&&(this._read=v.read),"function"==typeof v.destroy&&(this._destroy=v.destroy),"function"==typeof v.construct&&(this._construct=v.construct),v.signal&&!re&&X(v.signal,this)),q.call(this,v),C.construct(this,()=>{this._readableState.needReadable&&tt(this,this._readableState)})}function st(v,re,Ge,Je){b("readableAddChunk",re);const at=v._readableState;let Wt;if(at.objectMode||("string"==typeof re?at.encoding!==(Ge=Ge||at.defaultEncoding)&&(Je&&at.encoding?re=ne.from(re,Ge).toString(at.encoding):(re=ne.from(re,Ge),Ge="")):re instanceof ne?Ge="":q._isUint8Array(re)?(re=q._uint8ArrayToBuffer(re),Ge=""):null!=re&&(Wt=new se("chunk",["string","Buffer","Uint8Array"],re))),Wt)pe(v,Wt);else if(null===re)at.reading=!1,function ie(v,re){if(b("onEofChunk"),!re.ended){if(re.decoder){const Ge=re.decoder.end();Ge&&Ge.length&&(re.buffer.push(Ge),re.length+=re.objectMode?1:Ge.length)}re.ended=!0,re.sync?z(v):(re.needReadable=!1,re.emittedReadable=!0,Se(v))}}(v,at);else if(at.objectMode||re&&re.length>0)if(Je)if(at.endEmitted)pe(v,new et);else{if(at.destroyed||at.errored)return!1;Ze(v,at,re,!0)}else if(at.ended)pe(v,new ke);else{if(at.destroyed||at.errored)return!1;at.reading=!1,at.decoder&&!Ge?(re=at.decoder.write(re),at.objectMode||0!==re.length?Ze(v,at,re,!1):tt(v,at)):Ze(v,at,re,!1)}else Je||(at.reading=!1,tt(v,at));return!at.ended&&(at.length<at.highWaterMark||0===at.length)}function Ze(v,re,Ge,Je){re.flowing&&0===re.length&&!re.sync&&v.listenerCount("data")>0?(re.multiAwaitDrain?re.awaitDrainWriters.clear():re.awaitDrainWriters=null,re.dataEmitted=!0,v.emit("data",Ge)):(re.length+=re.objectMode?1:Ge.length,Je?re.buffer.unshift(Ge):re.buffer.push(Ge),re.needReadable&&z(v)),tt(v,re)}function E(v,re){return v<=0||0===re.length&&re.ended?0:re.objectMode?1:_(v)?re.flowing&&re.length?re.buffer.first().length:re.length:v<=re.length?v:re.ended?re.length:0}function z(v){const re=v._readableState;b("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(b("emitReadable",re.flowing),re.emittedReadable=!0,te.nextTick(Se,v))}function Se(v){const re=v._readableState;b("emitReadable_",re.destroyed,re.length,re.ended),!re.destroyed&&!re.errored&&(re.length||re.ended)&&(v.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,fe(v)}function tt(v,re){!re.readingMore&&re.constructed&&(re.readingMore=!0,te.nextTick(ce,v,re))}function ce(v,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&0===re.length);){const Ge=re.length;if(b("maybeReadMore read 0"),v.read(0),Ge===re.length)break}re.readingMore=!1}function L(v){const re=v._readableState;re.readableListening=v.listenerCount("readable")>0,re.resumeScheduled&&!1===re[Ee]?re.flowing=!0:v.listenerCount("data")>0?v.resume():re.readableListening||(re.flowing=null)}function w(v){b("readable nexttick read 0"),v.read(0)}function Q(v,re){b("resume",re.reading),re.reading||v.read(0),re.resumeScheduled=!1,v.emit("resume"),fe(v),re.flowing&&!re.reading&&v.read(0)}function fe(v){const re=v._readableState;for(b("flow",re.flowing);re.flowing&&null!==v.read(););}function ze(v,re){"function"!=typeof v.read&&(v=Ye.wrap(v,{objectMode:!0}));const Ge=function Xe(v,re){return dt.apply(this,arguments)}(v,re);return Ge.stream=v,Ge}function dt(){return(dt=S(function*(v,re){let at,Ge=He;function Je(an){this===v?(Ge(),Ge=He):Ge=an}v.on("readable",Je);const Wt=B(v,{writable:!1},an=>{at=an?Te(at,an):null,Ge(),Ge=He});try{for(;;){const an=v.destroyed?null:v.read();if(null!==an)yield an;else{if(at)throw at;if(null===at)return;yield J(new $(Je))}}}catch(an){throw at=Te(at,an),at}finally{!at&&!1===re?.destroyOnReturn||void 0!==at&&!v._readableState.autoDestroy?(v.off("readable",Je),Wt()):C.destroyer(v,null)}})).apply(this,arguments)}function mt(v,re){if(0===re.length)return null;let Ge;return re.objectMode?Ge=re.buffer.shift():!v||v>=re.length?(Ge=re.decoder?re.buffer.join(""):1===re.buffer.length?re.buffer.first():re.buffer.concat(re.length),re.buffer.clear()):Ge=re.buffer.consume(v,re.decoder),Ge}function gt(v){const re=v._readableState;b("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,te.nextTick(zt,re,v))}function zt(v,re){if(b("endReadableNT",v.endEmitted,v.length),!v.errored&&!v.closeEmitted&&!v.endEmitted&&0===v.length)if(v.endEmitted=!0,re.emit("end"),re.writable&&!1===re.allowHalfOpen)te.nextTick(on,re);else if(v.autoDestroy){const Ge=re._writableState;(!Ge||Ge.autoDestroy&&(Ge.finished||!1===Ge.writable))&&re.destroy()}}function on(v){v.writable&&!v.writableEnded&&!v.destroyed&&v.end()}let Ie;function G(){return void 0===Ie&&(Ie={}),Ie}Ye.prototype.destroy=C.destroy,Ye.prototype._undestroy=C.undestroy,Ye.prototype._destroy=function(v,re){re(v)},Ye.prototype[ae.captureRejectionSymbol]=function(v){this.destroy(v)},Ye.prototype.push=function(v,re){return st(this,v,re,!1)},Ye.prototype.unshift=function(v,re){return st(this,v,re,!0)},Ye.prototype.isPaused=function(){const v=this._readableState;return!0===v[Ee]||!1===v.flowing},Ye.prototype.setEncoding=function(v){const re=new Ne(v);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;const Ge=this._readableState.buffer;let Je="";for(const at of Ge)Je+=re.write(at);return Ge.clear(),""!==Je&&Ge.push(Je),this._readableState.length=Je.length,this},Ye.prototype.read=function(v){b("read",v),void 0===v?v=NaN:ee(v)||(v=x(v,10));const re=this._readableState,Ge=v;if(v>re.highWaterMark&&(re.highWaterMark=function N(v){if(v>1073741824)throw new Re("size","<= 1GiB",v);return v--,v|=v>>>1,v|=v>>>2,v|=v>>>4,v|=v>>>8,v|=v>>>16,++v}(v)),0!==v&&(re.emittedReadable=!1),0===v&&re.needReadable&&((0!==re.highWaterMark?re.length>=re.highWaterMark:re.length>0)||re.ended))return b("read: emitReadable",re.length,re.ended),0===re.length&&re.ended?gt(this):z(this),null;if(0===(v=E(v,re))&&re.ended)return 0===re.length&&gt(this),null;let at,Je=re.needReadable;if(b("need readable",Je),(0===re.length||re.length-v<re.highWaterMark)&&(Je=!0,b("length less than watermark",Je)),re.ended||re.reading||re.destroyed||re.errored||!re.constructed)Je=!1,b("reading, ended or constructing",Je);else if(Je){b("do read"),re.reading=!0,re.sync=!0,0===re.length&&(re.needReadable=!0);try{this._read(re.highWaterMark)}catch(Wt){pe(this,Wt)}re.sync=!1,re.reading||(v=E(Ge,re))}return at=v>0?mt(v,re):null,null===at?(re.needReadable=re.length<=re.highWaterMark,v=0):(re.length-=v,re.multiAwaitDrain?re.awaitDrainWriters.clear():re.awaitDrainWriters=null),0===re.length&&(re.ended||(re.needReadable=!0),Ge!==v&&re.ended&&gt(this)),null!==at&&!re.errorEmitted&&!re.closeEmitted&&(re.dataEmitted=!0,this.emit("data",at)),at},Ye.prototype._read=function(v){throw new Ce("_read()")},Ye.prototype.pipe=function(v,re){const Ge=this,Je=this._readableState;1===Je.pipes.length&&(Je.multiAwaitDrain||(Je.multiAwaitDrain=!0,Je.awaitDrainWriters=new de(Je.awaitDrainWriters?[Je.awaitDrainWriters]:[]))),Je.pipes.push(v),b("pipe count=%d opts=%j",Je.pipes.length,re);const Wt=re&&!1===re.end||v===te.stdout||v===te.stderr?Ps:Kn;function Kn(){b("onend"),v.end()}Je.endEmitted?te.nextTick(Wt):Ge.once("end",Wt),v.on("unpipe",function an(Ro,po){b("onunpipe"),Ro===Ge&&po&&!1===po.hasUnpiped&&(po.hasUnpiped=!0,function mr(){b("cleanup"),v.removeListener("close",$r),v.removeListener("finish",as),Xn&&v.removeListener("drain",Xn),v.removeListener("error",Ui),v.removeListener("unpipe",an),Ge.removeListener("end",Kn),Ge.removeListener("end",Ps),Ge.removeListener("data",Wo),Dn=!0,Xn&&Je.awaitDrainWriters&&(!v._writableState||v._writableState.needDrain)&&Xn()}())});let Xn,Dn=!1;function ss(){Dn||(1===Je.pipes.length&&Je.pipes[0]===v?(b("false write response, pause",0),Je.awaitDrainWriters=v,Je.multiAwaitDrain=!1):Je.pipes.length>1&&Je.pipes.includes(v)&&(b("false write response, pause",Je.awaitDrainWriters.size),Je.awaitDrainWriters.add(v)),Ge.pause()),Xn||(Xn=function Z(v,re){return function(){const Je=v._readableState;Je.awaitDrainWriters===re?(b("pipeOnDrain",1),Je.awaitDrainWriters=null):Je.multiAwaitDrain&&(b("pipeOnDrain",Je.awaitDrainWriters.size),Je.awaitDrainWriters.delete(re)),(!Je.awaitDrainWriters||0===Je.awaitDrainWriters.size)&&v.listenerCount("data")&&v.resume()}}(Ge,v),v.on("drain",Xn))}function Wo(Ro){b("ondata");const po=v.write(Ro);b("dest.write",po),!1===po&&ss()}function Ui(Ro){if(b("onerror",Ro),Ps(),v.removeListener("error",Ui),0===v.listenerCount("error")){const po=v._writableState||v._readableState;po&&!po.errorEmitted?pe(v,Ro):v.emit("error",Ro)}}function $r(){v.removeListener("finish",as),Ps()}function as(){b("onfinish"),v.removeListener("close",$r),Ps()}function Ps(){b("unpipe"),Ge.unpipe(v)}return Ge.on("data",Wo),oe(v,"error",Ui),v.once("close",$r),v.once("finish",as),v.emit("pipe",Ge),!0===v.writableNeedDrain?Je.flowing&&ss():Je.flowing||(b("pipe resume"),Ge.resume()),v},Ye.prototype.unpipe=function(v){const re=this._readableState;if(0===re.pipes.length)return this;if(!v){const at=re.pipes;re.pipes=[],this.pause();for(let Wt=0;Wt<at.length;Wt++)at[Wt].emit("unpipe",this,{hasUnpiped:!1});return this}const Je=U(re.pipes,v);return-1===Je||(re.pipes.splice(Je,1),0===re.pipes.length&&this.pause(),v.emit("unpipe",this,{hasUnpiped:!1})),this},Ye.prototype.addListener=Ye.prototype.on=function(v,re){const Ge=q.prototype.on.call(this,v,re),Je=this._readableState;return"data"===v?(Je.readableListening=this.listenerCount("readable")>0,!1!==Je.flowing&&this.resume()):"readable"===v&&!Je.endEmitted&&!Je.readableListening&&(Je.readableListening=Je.needReadable=!0,Je.flowing=!1,Je.emittedReadable=!1,b("on readable",Je.length,Je.reading),Je.length?z(this):Je.reading||te.nextTick(w,this)),Ge},Ye.prototype.off=Ye.prototype.removeListener=function(v,re){const Ge=q.prototype.removeListener.call(this,v,re);return"readable"===v&&te.nextTick(L,this),Ge},Ye.prototype.removeAllListeners=function(v){const re=q.prototype.removeAllListeners.apply(this,arguments);return("readable"===v||void 0===v)&&te.nextTick(L,this),re},Ye.prototype.resume=function(){const v=this._readableState;return v.flowing||(b("resume"),v.flowing=!v.readableListening,function M(v,re){re.resumeScheduled||(re.resumeScheduled=!0,te.nextTick(Q,v,re))}(this,v)),v[Ee]=!1,this},Ye.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ee]=!0,this},Ye.prototype.wrap=function(v){let re=!1;v.on("data",Je=>{!this.push(Je)&&v.pause&&(re=!0,v.pause())}),v.on("end",()=>{this.push(null)}),v.on("error",Je=>{pe(this,Je)}),v.on("close",()=>{this.destroy()}),v.on("destroy",()=>{this.destroy()}),this._read=()=>{re&&v.resume&&(re=!1,v.resume())};const Ge=W(v);for(let Je=1;Je<Ge.length;Je++){const at=Ge[Je];void 0===this[at]&&"function"==typeof v[at]&&(this[at]=v[at].bind(v))}return this},Ye.prototype[I]=function(){return ze(this)},Ye.prototype.iterator=function(v){return void 0!==v&&qe(v,"options"),ze(this,v)},F(Ye.prototype,{readable:{__proto__:null,get(){const v=this._readableState;return!(!v||!1===v.readable||v.destroyed||v.errorEmitted||v.endEmitted)},set(v){this._readableState&&(this._readableState.readable=!!v)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(v){this._readableState&&(this._readableState.flowing=v)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(v){this._readableState&&(this._readableState.destroyed=v)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),F(Ae.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Ee]},set(v){this[Ee]=!!v}}}),Ye._fromList=mt,Ye.from=function(v,re){return Pe(Ye,v,re)},Ye.fromWeb=function(v,re){return G().newStreamReadableFromReadableStream(v,re)},Ye.toWeb=function(v,re){return G().newReadableStreamFromStreamReadable(v,re)},Ye.wrap=function(v,re){var Ge,Je;return new Ye({objectMode:null===(Ge=null!==(Je=v.readableObjectMode)&&void 0!==Je?Je:v.objectMode)||void 0===Ge||Ge,...re,destroy(at,Wt){C.destroyer(v,at),Wt(at)}}).wrap(v)}},8782:(Ue,_e,T)=>{"use strict";const{MathFloor:J,NumberIsInteger:S}=T(6305),{ERR_INVALID_ARG_VALUE:te}=T(4370).codes;function ee(x){return x?16:16384}Ue.exports={getHighWaterMark:function _(x,F,W,R){const $=function U(x,F,W){return null!=x.highWaterMark?x.highWaterMark:F?x[W]:null}(F,R,W);if(null!=$){if(!S($)||$<0)throw new te(R?`options.${W}`:"options.highWaterMark",$);return J($)}return ee(x.objectMode)},getDefaultHighWaterMark:ee}},123:(Ue,_e,T)=>{"use strict";const{ObjectSetPrototypeOf:J,Symbol:S}=T(6305);Ue.exports=x;const{ERR_METHOD_NOT_IMPLEMENTED:te}=T(4370).codes,U=T(5931),{getHighWaterMark:ee}=T(8782);J(x.prototype,U.prototype),J(x,U);const _=S("kCallback");function x(R){if(!(this instanceof x))return new x(R);const $=R?ee(this,R,"readableHighWaterMark",!0):null;0===$&&(R={...R,highWaterMark:null,readableHighWaterMark:$,writableHighWaterMark:R.writableHighWaterMark||0}),U.call(this,R),this._readableState.sync=!1,this[_]=null,R&&("function"==typeof R.transform&&(this._transform=R.transform),"function"==typeof R.flush&&(this._flush=R.flush)),this.on("prefinish",W)}function F(R){"function"!=typeof this._flush||this.destroyed?(this.push(null),R&&R()):this._flush(($,de)=>{$?R?R($):this.destroy($):(null!=de&&this.push(de),this.push(null),R&&R())})}function W(){this._final!==F&&F.call(this)}x.prototype._final=F,x.prototype._transform=function(R,$,de){throw new te("_transform()")},x.prototype._write=function(R,$,de){const I=this._readableState,H=this._writableState,ae=I.length;this._transform(R,$,(q,oe)=>{q?de(q):(null!=oe&&this.push(oe),H.ended||ae===I.length||I.length<I.highWaterMark?de():this[_]=de)})},x.prototype._read=function(){if(this[_]){const R=this[_];this[_]=null,R()}}},5428:(Ue,_e,T)=>{"use strict";const{Symbol:J,SymbolAsyncIterator:S,SymbolIterator:te,SymbolFor:U}=T(6305),ee=J("kDestroyed"),_=J("kIsErrored"),x=J("kIsReadable"),F=J("kIsDisturbed"),W=U("nodejs.webstream.isClosedPromise"),R=U("nodejs.webstream.controllerErrorFunction");function $(pe,Ae=!1){var Ye;return!(!pe||"function"!=typeof pe.pipe||"function"!=typeof pe.on||Ae&&("function"!=typeof pe.pause||"function"!=typeof pe.resume)||pe._writableState&&!1===(null===(Ye=pe._readableState)||void 0===Ye?void 0:Ye.readable)||pe._writableState&&!pe._readableState)}function de(pe){var Ae;return!(!pe||"function"!=typeof pe.write||"function"!=typeof pe.on||pe._readableState&&!1===(null===(Ae=pe._writableState)||void 0===Ae?void 0:Ae.writable))}function H(pe){return pe&&(pe._readableState||pe._writableState||"function"==typeof pe.write&&"function"==typeof pe.on||"function"==typeof pe.pipe&&"function"==typeof pe.on)}function ae(pe){return!(!pe||H(pe)||"function"!=typeof pe.pipeThrough||"function"!=typeof pe.getReader||"function"!=typeof pe.cancel)}function q(pe){return!(!pe||H(pe)||"function"!=typeof pe.getWriter||"function"!=typeof pe.abort)}function oe(pe){return!(!pe||H(pe)||"object"!=typeof pe.readable||"object"!=typeof pe.writable)}function B(pe){if(!H(pe))return null;const st=pe._writableState||pe._readableState;return!!(pe.destroyed||pe[ee]||null!=st&&st.destroyed)}function b(pe){if(!de(pe))return null;if(!0===pe.writableEnded)return!0;const Ae=pe._writableState;return(null==Ae||!Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)}function he(pe,Ae){if(!$(pe))return null;const Ye=pe._readableState;return(null==Ye||!Ye.errored)&&("boolean"!=typeof Ye?.endEmitted?null:!!(Ye.endEmitted||!1===Ae&&!0===Ye.ended&&0===Ye.length))}function V(pe){return pe&&null!=pe[x]?pe[x]:"boolean"!=typeof pe?.readable?null:!B(pe)&&$(pe)&&pe.readable&&!he(pe)}function Te(pe){return"boolean"!=typeof pe?.writable?null:!B(pe)&&de(pe)&&pe.writable&&!b(pe)}function et(pe){return"boolean"==typeof pe._closed&&"boolean"==typeof pe._defaultKeepAlive&&"boolean"==typeof pe._removedConnection&&"boolean"==typeof pe._removedContLen}function qe(pe){return"boolean"==typeof pe._sent100&&et(pe)}Ue.exports={kDestroyed:ee,isDisturbed:function Pe(pe){var Ae;return!(!pe||!(null!==(Ae=pe[F])&&void 0!==Ae?Ae:pe.readableDidRead||pe.readableAborted))},kIsDisturbed:F,isErrored:function He(pe){var Ae,Ye,st,Ze,le,N,E,ie,z,Se;return!(!pe||!(null!==(Ae=null!==(Ye=null!==(st=null!==(Ze=null!==(le=null!==(N=pe[_])&&void 0!==N?N:pe.readableErrored)&&void 0!==le?le:pe.writableErrored)&&void 0!==Ze?Ze:null===(E=pe._readableState)||void 0===E?void 0:E.errorEmitted)&&void 0!==st?st:null===(ie=pe._writableState)||void 0===ie?void 0:ie.errorEmitted)&&void 0!==Ye?Ye:null===(z=pe._readableState)||void 0===z?void 0:z.errored)&&void 0!==Ae?Ae:null!==(Se=pe._writableState)&&void 0!==Se&&Se.errored))},kIsErrored:_,isReadable:V,kIsReadable:x,kIsClosedPromise:W,kControllerErrorFunction:R,isClosed:function ke(pe){if(!H(pe))return null;if("boolean"==typeof pe.closed)return pe.closed;const Ae=pe._writableState,Ye=pe._readableState;return"boolean"==typeof Ae?.closed||"boolean"==typeof Ye?.closed?Ae?.closed||Ye?.closed:"boolean"==typeof pe._closed&&et(pe)?pe._closed:null},isDestroyed:B,isDuplexNodeStream:function I(pe){return!(!pe||"function"!=typeof pe.pipe||!pe._readableState||"function"!=typeof pe.on||"function"!=typeof pe.write)},isFinished:function se(pe,Ae){return H(pe)?!!B(pe)||!(!1!==Ae?.readable&&V(pe)||!1!==Ae?.writable&&Te(pe)):null},isIterable:function X(pe,Ae){return null!=pe&&(!0===Ae?"function"==typeof pe[S]:!1===Ae?"function"==typeof pe[te]:"function"==typeof pe[S]||"function"==typeof pe[te])},isReadableNodeStream:$,isReadableStream:ae,isReadableEnded:function C(pe){if(!$(pe))return null;if(!0===pe.readableEnded)return!0;const Ae=pe._readableState;return!(!Ae||Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)},isReadableFinished:he,isReadableErrored:function Re(pe){var Ae,Ye;return H(pe)?pe.readableErrored?pe.readableErrored:null!==(Ae=null===(Ye=pe._readableState)||void 0===Ye?void 0:Ye.errored)&&void 0!==Ae?Ae:null:null},isNodeStream:H,isWebStream:function ne(pe){return ae(pe)||q(pe)||oe(pe)},isWritable:Te,isWritableNodeStream:de,isWritableStream:q,isWritableEnded:b,isWritableFinished:function O(pe,Ae){if(!de(pe))return null;if(!0===pe.writableFinished)return!0;const Ye=pe._writableState;return(null==Ye||!Ye.errored)&&("boolean"!=typeof Ye?.finished?null:!!(Ye.finished||!1===Ae&&!0===Ye.ended&&0===Ye.length))},isWritableErrored:function Ce(pe){var Ae,Ye;return H(pe)?pe.writableErrored?pe.writableErrored:null!==(Ae=null===(Ye=pe._writableState)||void 0===Ye?void 0:Ye.errored)&&void 0!==Ae?Ae:null:null},isServerRequest:function Ee(pe){var Ae;return"boolean"==typeof pe._consuming&&"boolean"==typeof pe._dumped&&void 0===(null===(Ae=pe.req)||void 0===Ae?void 0:Ae.upgradeOrConnect)},isServerResponse:qe,willEmitClose:function Ne(pe){if(!H(pe))return null;const st=pe._writableState||pe._readableState;return!st&&qe(pe)||!!(st&&st.autoDestroy&&st.emitClose&&!1===st.closed)},isTransformStream:oe}},9764:(Ue,_e,T)=>{const J=T(42),{ArrayPrototypeSlice:S,Error:te,FunctionPrototypeSymbolHasInstance:U,ObjectDefineProperty:ee,ObjectDefineProperties:_,ObjectSetPrototypeOf:x,StringPrototypeToLowerCase:F,Symbol:W,SymbolHasInstance:R}=T(6305);Ue.exports=qe,qe.WritableState=ke;const{EventEmitter:$}=T(2016),de=T(900).Stream,{Buffer:I}=T(1657),H=T(5601),{addAbortSignal:ae}=T(9987),{getHighWaterMark:q,getDefaultHighWaterMark:oe}=T(8782),{ERR_INVALID_ARG_TYPE:ne,ERR_METHOD_NOT_IMPLEMENTED:X,ERR_MULTIPLE_CALLBACK:B,ERR_STREAM_CANNOT_PIPE:b,ERR_STREAM_DESTROYED:O,ERR_STREAM_ALREADY_FINISHED:C,ERR_STREAM_NULL_VALUES:he,ERR_STREAM_WRITE_AFTER_END:V,ERR_UNKNOWN_ENCODING:Te}=T(4370).codes,{errorOrDestroy:se}=H;function Ce(){}x(qe.prototype,de.prototype),x(qe,de);const Re=W("kOnFinished");function ke(Z,L,w){"boolean"!=typeof w&&(w=L instanceof T(5931)),this.objectMode=!(!Z||!Z.objectMode),w&&(this.objectMode=this.objectMode||!(!Z||!Z.writableObjectMode)),this.highWaterMark=Z?q(this,Z,"writableHighWaterMark",w):oe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(Z&&!1===Z.decodeStrings),this.defaultEncoding=Z&&Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=pe.bind(void 0,L),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,et(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Z||!1!==Z.emitClose,this.autoDestroy=!Z||!1!==Z.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Re]=[]}function et(Z){Z.buffered=[],Z.bufferedIndex=0,Z.allBuffers=!0,Z.allNoop=!0}function qe(Z){const L=this instanceof T(5931);if(!L&&!U(qe,this))return new qe(Z);this._writableState=new ke(Z,this,L),Z&&("function"==typeof Z.write&&(this._write=Z.write),"function"==typeof Z.writev&&(this._writev=Z.writev),"function"==typeof Z.destroy&&(this._destroy=Z.destroy),"function"==typeof Z.final&&(this._final=Z.final),"function"==typeof Z.construct&&(this._construct=Z.construct),Z.signal&&ae(Z.signal,this)),de.call(this,Z),H.construct(this,()=>{const w=this._writableState;w.writing||Ze(this,w),ie(this,w)})}function Ee(Z,L,w,M){const Q=Z._writableState;if("function"==typeof w)M=w,w=Q.defaultEncoding;else{if(w){if("buffer"!==w&&!I.isEncoding(w))throw new Te(w)}else w=Q.defaultEncoding;"function"!=typeof M&&(M=Ce)}if(null===L)throw new he;if(!Q.objectMode)if("string"==typeof L)!1!==Q.decodeStrings&&(L=I.from(L,w),w="buffer");else if(L instanceof I)w="buffer";else{if(!de._isUint8Array(L))throw new ne("chunk",["string","Buffer","Uint8Array"],L);L=de._uint8ArrayToBuffer(L),w="buffer"}let fe;return Q.ending?fe=new V:Q.destroyed&&(fe=new O("write")),fe?(J.nextTick(M,fe),se(Z,fe,!0),fe):(Q.pendingcb++,function Ne(Z,L,w,M,Q){const fe=L.objectMode?1:w.length;L.length+=fe;const ze=L.length<L.highWaterMark;return ze||(L.needDrain=!0),L.writing||L.corked||L.errored||!L.constructed?(L.buffered.push({chunk:w,encoding:M,callback:Q}),L.allBuffers&&"buffer"!==M&&(L.allBuffers=!1),L.allNoop&&Q!==Ce&&(L.allNoop=!1)):(L.writelen=fe,L.writecb=Q,L.writing=!0,L.sync=!0,Z._write(w,M,L.onwrite),L.sync=!1),ze&&!L.errored&&!L.destroyed}(Z,Q,L,w,M))}function Pe(Z,L,w,M,Q,fe,ze){L.writelen=M,L.writecb=ze,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new O("write")):w?Z._writev(Q,L.onwrite):Z._write(Q,fe,L.onwrite),L.sync=!1}function He(Z,L,w,M){--L.pendingcb,M(w),st(L),se(Z,w)}function pe(Z,L){const w=Z._writableState,M=w.sync,Q=w.writecb;"function"==typeof Q?(w.writing=!1,w.writecb=null,w.length-=w.writelen,w.writelen=0,L?(w.errored||(w.errored=L),Z._readableState&&!Z._readableState.errored&&(Z._readableState.errored=L),M?J.nextTick(He,Z,w,L,Q):He(Z,w,L,Q)):(w.buffered.length>w.bufferedIndex&&Ze(Z,w),M?null!==w.afterWriteTickInfo&&w.afterWriteTickInfo.cb===Q?w.afterWriteTickInfo.count++:(w.afterWriteTickInfo={count:1,cb:Q,stream:Z,state:w},J.nextTick(Ae,w.afterWriteTickInfo)):Ye(Z,w,1,Q))):se(Z,new B)}function Ae({stream:Z,state:L,count:w,cb:M}){return L.afterWriteTickInfo=null,Ye(Z,L,w,M)}function Ye(Z,L,w,M){for(!L.ending&&!Z.destroyed&&0===L.length&&L.needDrain&&(L.needDrain=!1,Z.emit("drain"));w-- >0;)L.pendingcb--,M();L.destroyed&&st(L),ie(Z,L)}function st(Z){if(Z.writing)return;for(let Q=Z.bufferedIndex;Q<Z.buffered.length;++Q){var L;const{chunk:fe,callback:ze}=Z.buffered[Q];Z.length-=Z.objectMode?1:fe.length,ze(null!==(L=Z.errored)&&void 0!==L?L:new O("write"))}const w=Z[Re].splice(0);for(let Q=0;Q<w.length;Q++){var M;w[Q](null!==(M=Z.errored)&&void 0!==M?M:new O("end"))}et(Z)}function Ze(Z,L){if(L.corked||L.bufferProcessing||L.destroyed||!L.constructed)return;const{buffered:w,bufferedIndex:M,objectMode:Q}=L,fe=w.length-M;if(!fe)return;let ze=M;if(L.bufferProcessing=!0,fe>1&&Z._writev){L.pendingcb-=fe-1;const Xe=L.allNoop?Ce:mt=>{for(let gt=ze;gt<w.length;++gt)w[gt].callback(mt)},dt=L.allNoop&&0===ze?w:S(w,ze);dt.allBuffers=L.allBuffers,Pe(Z,L,!0,L.length,dt,"",Xe),et(L)}else{do{const{chunk:Xe,encoding:dt,callback:mt}=w[ze];w[ze++]=null,Pe(Z,L,!1,Q?1:Xe.length,Xe,dt,mt)}while(ze<w.length&&!L.writing);ze===w.length?et(L):ze>256?(w.splice(0,ze),L.bufferedIndex=0):L.bufferedIndex=ze}L.bufferProcessing=!1}function le(Z){return Z.ending&&!Z.destroyed&&Z.constructed&&0===Z.length&&!Z.errored&&0===Z.buffered.length&&!Z.finished&&!Z.writing&&!Z.errorEmitted&&!Z.closeEmitted}function ie(Z,L,w){le(L)&&(function E(Z,L){!L.prefinished&&!L.finalCalled&&("function"!=typeof Z._final||L.destroyed?(L.prefinished=!0,Z.emit("prefinish")):(L.finalCalled=!0,function N(Z,L){let w=!1;function M(Q){if(w)se(Z,Q??B());else if(w=!0,L.pendingcb--,Q){const fe=L[Re].splice(0);for(let ze=0;ze<fe.length;ze++)fe[ze](Q);se(Z,Q,L.sync)}else le(L)&&(L.prefinished=!0,Z.emit("prefinish"),L.pendingcb++,J.nextTick(z,Z,L))}L.sync=!0,L.pendingcb++;try{Z._final(M)}catch(Q){M(Q)}L.sync=!1}(Z,L)))}(Z,L),0===L.pendingcb&&(w?(L.pendingcb++,J.nextTick((M,Q)=>{le(Q)?z(M,Q):Q.pendingcb--},Z,L)):le(L)&&(L.pendingcb++,z(Z,L))))}function z(Z,L){L.pendingcb--,L.finished=!0;const w=L[Re].splice(0);for(let M=0;M<w.length;M++)w[M]();if(Z.emit("finish"),L.autoDestroy){const M=Z._readableState;(!M||M.autoDestroy&&(M.endEmitted||!1===M.readable))&&Z.destroy()}}ke.prototype.getBuffer=function(){return S(this.buffered,this.bufferedIndex)},ee(ke.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),ee(qe,R,{__proto__:null,value:function(Z){return!!U(this,Z)||this===qe&&Z&&Z._writableState instanceof ke}}),qe.prototype.pipe=function(){se(this,new b)},qe.prototype.write=function(Z,L,w){return!0===Ee(this,Z,L,w)},qe.prototype.cork=function(){this._writableState.corked++},qe.prototype.uncork=function(){const Z=this._writableState;Z.corked&&(Z.corked--,Z.writing||Ze(this,Z))},qe.prototype.setDefaultEncoding=function(L){if("string"==typeof L&&(L=F(L)),!I.isEncoding(L))throw new Te(L);return this._writableState.defaultEncoding=L,this},qe.prototype._write=function(Z,L,w){if(!this._writev)throw new X("_write()");this._writev([{chunk:Z,encoding:L}],w)},qe.prototype._writev=null,qe.prototype.end=function(Z,L,w){const M=this._writableState;let Q;if("function"==typeof Z?(w=Z,Z=null,L=null):"function"==typeof L&&(w=L,L=null),null!=Z){const fe=Ee(this,Z,L);fe instanceof te&&(Q=fe)}return M.corked&&(M.corked=1,this.uncork()),Q||(M.errored||M.ending?M.finished?Q=new C("end"):M.destroyed&&(Q=new O("end")):(M.ending=!0,ie(this,M,!0),M.ended=!0)),"function"==typeof w&&(Q||M.finished?J.nextTick(w,Q):M[Re].push(w)),this},_(qe.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(Z){this._writableState&&(this._writableState.destroyed=Z)}},writable:{__proto__:null,get(){const Z=this._writableState;return!(!Z||!1===Z.writable||Z.destroyed||Z.errored||Z.ending||Z.ended)},set(Z){this._writableState&&(this._writableState.writable=!!Z)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const Z=this._writableState;return!!Z&&!Z.destroyed&&!Z.ending&&Z.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Se=H.destroy;let tt;function ce(){return void 0===tt&&(tt={}),tt}qe.prototype.destroy=function(Z,L){const w=this._writableState;return!w.destroyed&&(w.bufferedIndex<w.buffered.length||w[Re].length)&&J.nextTick(st,w),Se.call(this,Z,L),this},qe.prototype._undestroy=H.undestroy,qe.prototype._destroy=function(Z,L){L(Z)},qe.prototype[$.captureRejectionSymbol]=function(Z){this.destroy(Z)},qe.fromWeb=function(Z,L){return ce().newStreamWritableFromWritableStream(Z,L)},qe.toWeb=function(Z){return ce().newWritableStreamFromStreamWritable(Z)}},2120:(Ue,_e,T)=>{"use strict";const{ArrayIsArray:J,ArrayPrototypeIncludes:S,ArrayPrototypeJoin:te,ArrayPrototypeMap:U,NumberIsInteger:ee,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:x,NumberMIN_SAFE_INTEGER:F,NumberParseInt:W,ObjectPrototypeHasOwnProperty:R,RegExpPrototypeExec:$,String:de,StringPrototypeToUpperCase:I,StringPrototypeTrim:H}=T(6305),{hideStackFrames:ae,codes:{ERR_SOCKET_BAD_PORT:q,ERR_INVALID_ARG_TYPE:oe,ERR_INVALID_ARG_VALUE:ne,ERR_OUT_OF_RANGE:X,ERR_UNKNOWN_SIGNAL:B}}=T(4370),{normalizeEncoding:b}=T(2656),{isAsyncFunction:O,isArrayBufferView:C}=T(2656).types,he={},se=/^[0-7]+$/,ke=ae((fe,ze,Xe=F,dt=x)=>{if("number"!=typeof fe)throw new oe(ze,"number",fe);if(!ee(fe))throw new X(ze,"an integer",fe);if(fe<Xe||fe>dt)throw new X(ze,`>= ${Xe} && <= ${dt}`,fe)}),et=ae((fe,ze,Xe=-2147483648,dt=2147483647)=>{if("number"!=typeof fe)throw new oe(ze,"number",fe);if(!ee(fe))throw new X(ze,"an integer",fe);if(fe<Xe||fe>dt)throw new X(ze,`>= ${Xe} && <= ${dt}`,fe)}),qe=ae((fe,ze,Xe=!1)=>{if("number"!=typeof fe)throw new oe(ze,"number",fe);if(!ee(fe))throw new X(ze,"an integer",fe);const dt=Xe?1:0,mt=4294967295;if(fe<dt||fe>mt)throw new X(ze,`>= ${dt} && <= ${mt}`,fe)});function Ee(fe,ze){if("string"!=typeof fe)throw new oe(ze,"string",fe)}const Pe=ae((fe,ze,Xe)=>{if(!S(Xe,fe)){const mt="must be one of: "+te(U(Xe,gt=>"string"==typeof gt?`'${gt}'`:de(gt)),", ");throw new ne(ze,fe,mt)}});function He(fe,ze){if("boolean"!=typeof fe)throw new oe(ze,"boolean",fe)}function pe(fe,ze,Xe){return null!=fe&&R(fe,ze)?fe[ze]:Xe}const Ae=ae((fe,ze,Xe=null)=>{const dt=pe(Xe,"allowArray",!1),mt=pe(Xe,"allowFunction",!1);if(!pe(Xe,"nullable",!1)&&null===fe||!dt&&J(fe)||"object"!=typeof fe&&(!mt||"function"!=typeof fe))throw new oe(ze,"Object",fe)}),Ye=ae((fe,ze)=>{if(null!=fe&&"object"!=typeof fe&&"function"!=typeof fe)throw new oe(ze,"a dictionary",fe)}),st=ae((fe,ze,Xe=0)=>{if(!J(fe))throw new oe(ze,"Array",fe);if(fe.length<Xe)throw new ne(ze,fe,`must be longer than ${Xe}`)}),E=ae((fe,ze="buffer")=>{if(!C(fe))throw new oe(ze,["Buffer","TypedArray","DataView"],fe)}),Se=ae((fe,ze)=>{if(void 0!==fe&&(null===fe||"object"!=typeof fe||!("aborted"in fe)))throw new oe(ze,"AbortSignal",fe)}),tt=ae((fe,ze)=>{if("function"!=typeof fe)throw new oe(ze,"Function",fe)}),ce=ae((fe,ze)=>{if("function"!=typeof fe||O(fe))throw new oe(ze,"Function",fe)}),Z=ae((fe,ze)=>{if(void 0!==fe)throw new oe(ze,"undefined",fe)}),w=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function M(fe,ze){if(typeof fe>"u"||!$(w,fe))throw new ne(ze,fe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Ue.exports={isInt32:function V(fe){return fe===(0|fe)},isUint32:function Te(fe){return fe===fe>>>0},parseFileMode:function Re(fe,ze,Xe){if(typeof fe>"u"&&(fe=Xe),"string"==typeof fe){if(null===$(se,fe))throw new ne(ze,fe,"must be a 32-bit unsigned integer or an octal string");fe=W(fe,8)}return qe(fe,ze),fe},validateArray:st,validateStringArray:function Ze(fe,ze){st(fe,ze);for(let Xe=0;Xe<fe.length;Xe++)Ee(fe[Xe],`${ze}[${Xe}]`)},validateBooleanArray:function le(fe,ze){st(fe,ze);for(let Xe=0;Xe<fe.length;Xe++)He(fe[Xe],`${ze}[${Xe}]`)},validateBoolean:He,validateBuffer:E,validateDictionary:Ye,validateEncoding:function ie(fe,ze){const Xe=b(ze),dt=fe.length;if("hex"===Xe&&dt%2!=0)throw new ne("encoding",ze,`is invalid for data of length ${dt}`)},validateFunction:tt,validateInt32:et,validateInteger:ke,validateNumber:function Ne(fe,ze,Xe=void 0,dt){if("number"!=typeof fe)throw new oe(ze,"number",fe);if(null!=Xe&&fe<Xe||null!=dt&&fe>dt||(null!=Xe||null!=dt)&&_(fe))throw new X(ze,`${null!=Xe?`>= ${Xe}`:""}${null!=Xe&&null!=dt?" && ":""}${null!=dt?`<= ${dt}`:""}`,fe)},validateObject:Ae,validateOneOf:Pe,validatePlainFunction:ce,validatePort:function z(fe,ze="Port",Xe=!0){if("number"!=typeof fe&&"string"!=typeof fe||"string"==typeof fe&&0===H(fe).length||+fe!=+fe>>>0||fe>65535||0===fe&&!Xe)throw new q(ze,fe,Xe);return 0|fe},validateSignalName:function N(fe,ze="signal"){if(Ee(fe,ze),void 0===he[fe])throw void 0!==he[I(fe)]?new B(fe+" (signals must use all capital letters)"):new B(fe)},validateString:Ee,validateUint32:qe,validateUndefined:Z,validateUnion:function L(fe,ze,Xe){if(!S(Xe,fe))throw new oe(ze,`('${te(Xe,"|")}')`,fe)},validateAbortSignal:Se,validateLinkHeaderValue:function Q(fe){if("string"==typeof fe)return M(fe,"hints"),fe;if(J(fe)){const ze=fe.length;let Xe="";if(0===ze)return Xe;for(let dt=0;dt<ze;dt++){const mt=fe[dt];M(mt,"hints"),Xe+=mt,dt!==ze-1&&(Xe+=", ")}return Xe}throw new ne("hints",fe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(Ue,_e,T)=>{"use strict";const J=T(8110),S=T(16),te=J.Readable.destroy;Ue.exports=J.Readable,Ue.exports._uint8ArrayToBuffer=J._uint8ArrayToBuffer,Ue.exports._isUint8Array=J._isUint8Array,Ue.exports.isDisturbed=J.isDisturbed,Ue.exports.isErrored=J.isErrored,Ue.exports.isReadable=J.isReadable,Ue.exports.Readable=J.Readable,Ue.exports.Writable=J.Writable,Ue.exports.Duplex=J.Duplex,Ue.exports.Transform=J.Transform,Ue.exports.PassThrough=J.PassThrough,Ue.exports.addAbortSignal=J.addAbortSignal,Ue.exports.finished=J.finished,Ue.exports.destroy=J.destroy,Ue.exports.destroy=te,Ue.exports.pipeline=J.pipeline,Ue.exports.compose=J.compose,Object.defineProperty(J,"promises",{configurable:!0,enumerable:!0,get:()=>S}),Ue.exports.Stream=J.Stream,Ue.exports.default=Ue.exports},4370:(Ue,_e,T)=>{"use strict";const{format:J,inspect:S,AggregateError:te}=T(2656),U=globalThis.AggregateError||te,ee=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],x=/^([A-Z][a-z0-9]*)+$/,W={};function R(oe,ne){if(!oe)throw new W.ERR_INTERNAL_ASSERTION(ne)}function $(oe){let ne="",X=oe.length;const B="-"===oe[0]?1:0;for(;X>=B+4;X-=3)ne=`_${oe.slice(X-3,X)}${ne}`;return`${oe.slice(0,X)}${ne}`}function I(oe,ne,X){X||(X=Error);class B extends X{constructor(...O){super(function de(oe,ne,X){if("function"==typeof ne)return R(ne.length<=X.length,`Code: ${oe}; The provided arguments length (${X.length}) does not match the required ones (${ne.length}).`),ne(...X);const B=(ne.match(/%[dfijoOs]/g)||[]).length;return R(B===X.length,`Code: ${oe}; The provided arguments length (${X.length}) does not match the required ones (${B}).`),0===X.length?ne:J(ne,...X)}(oe,ne,O))}toString(){return`${this.name} [${oe}]: ${this.message}`}}Object.defineProperties(B.prototype,{name:{value:X.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${oe}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),B.prototype.code=oe,B.prototype[ee]=!0,W[oe]=B}function H(oe){return Object.defineProperty(oe,"name",{value:"__node_internal_"+oe.name}),oe}class q extends Error{constructor(ne="The operation was aborted",X=void 0){if(void 0!==X&&"object"!=typeof X)throw new W.ERR_INVALID_ARG_TYPE("options","Object",X);super(ne,X),this.code="ABORT_ERR",this.name="AbortError"}}I("ERR_ASSERTION","%s",Error),I("ERR_INVALID_ARG_TYPE",(oe,ne,X)=>{R("string"==typeof oe,"'name' must be a string"),Array.isArray(ne)||(ne=[ne]);let B="The ";oe.endsWith(" argument")?B+=`${oe} `:B+=`"${oe}" ${oe.includes(".")?"property":"argument"} `,B+="must be ";const b=[],O=[],C=[];for(const V of ne)R("string"==typeof V,"All expected entries have to be of type string"),_.includes(V)?b.push(V.toLowerCase()):x.test(V)?O.push(V):(R("object"!==V,'The value "object" should be written as "Object"'),C.push(V));if(O.length>0){const V=b.indexOf("object");-1!==V&&(b.splice(b,V,1),O.push("Object"))}if(b.length>0){switch(b.length){case 1:B+=`of type ${b[0]}`;break;case 2:B+=`one of type ${b[0]} or ${b[1]}`;break;default:{const V=b.pop();B+=`one of type ${b.join(", ")}, or ${V}`}}(O.length>0||C.length>0)&&(B+=" or ")}if(O.length>0){switch(O.length){case 1:B+=`an instance of ${O[0]}`;break;case 2:B+=`an instance of ${O[0]} or ${O[1]}`;break;default:{const V=O.pop();B+=`an instance of ${O.join(", ")}, or ${V}`}}C.length>0&&(B+=" or ")}switch(C.length){case 0:break;case 1:C[0].toLowerCase()!==C[0]&&(B+="an "),B+=`${C[0]}`;break;case 2:B+=`one of ${C[0]} or ${C[1]}`;break;default:{const V=C.pop();B+=`one of ${C.join(", ")}, or ${V}`}}if(null==X)B+=`. Received ${X}`;else if("function"==typeof X&&X.name)B+=`. Received function ${X.name}`;else if("object"==typeof X){var he;null!==(he=X.constructor)&&void 0!==he&&he.name?B+=`. Received an instance of ${X.constructor.name}`:B+=`. Received ${S(X,{depth:-1})}`}else{let V=S(X,{colors:!1});V.length>25&&(V=`${V.slice(0,25)}...`),B+=`. Received type ${typeof X} (${V})`}return B},TypeError),I("ERR_INVALID_ARG_VALUE",(oe,ne,X="is invalid")=>{let B=S(ne);return B.length>128&&(B=B.slice(0,128)+"..."),`The ${oe.includes(".")?"property":"argument"} '${oe}' ${X}. Received ${B}`},TypeError),I("ERR_INVALID_RETURN_VALUE",(oe,ne,X)=>{var B;return`Expected ${oe} to be returned from the "${ne}" function but got ${null!=X&&null!==(B=X.constructor)&&void 0!==B&&B.name?`instance of ${X.constructor.name}`:"type "+typeof X}.`},TypeError),I("ERR_MISSING_ARGS",(...oe)=>{let ne;R(oe.length>0,"At least one arg needs to be specified");const X=oe.length;switch(oe=(Array.isArray(oe)?oe:[oe]).map(B=>`"${B}"`).join(" or "),X){case 1:ne+=`The ${oe[0]} argument`;break;case 2:ne+=`The ${oe[0]} and ${oe[1]} arguments`;break;default:{const B=oe.pop();ne+=`The ${oe.join(", ")}, and ${B} arguments`}}return`${ne} must be specified`},TypeError),I("ERR_OUT_OF_RANGE",(oe,ne,X)=>{let B;return R(ne,'Missing "range" argument'),Number.isInteger(X)&&Math.abs(X)>2**32?B=$(String(X)):"bigint"==typeof X?(B=String(X),(X>2n**32n||X<-(2n**32n))&&(B=$(B)),B+="n"):B=S(X),`The value of "${oe}" is out of range. It must be ${ne}. Received ${B}`},RangeError),I("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),I("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),I("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),I("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),I("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),I("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),I("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),I("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),I("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),I("ERR_STREAM_WRITE_AFTER_END","write after end",Error),I("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Ue.exports={AbortError:q,aggregateTwoErrors:H(function ae(oe,ne){if(oe&&ne&&oe!==ne){if(Array.isArray(ne.errors))return ne.errors.push(oe),ne;const X=new U([ne,oe],ne.message);return X.code=ne.code,X}return oe||ne}),hideStackFrames:H,codes:W}},6305:Ue=>{"use strict";Ue.exports={ArrayIsArray:_e=>Array.isArray(_e),ArrayPrototypeIncludes:(_e,T)=>_e.includes(T),ArrayPrototypeIndexOf:(_e,T)=>_e.indexOf(T),ArrayPrototypeJoin:(_e,T)=>_e.join(T),ArrayPrototypeMap:(_e,T)=>_e.map(T),ArrayPrototypePop:(_e,T)=>_e.pop(T),ArrayPrototypePush:(_e,T)=>_e.push(T),ArrayPrototypeSlice:(_e,T,J)=>_e.slice(T,J),Error,FunctionPrototypeCall:(_e,T,...J)=>_e.call(T,...J),FunctionPrototypeSymbolHasInstance:(_e,T)=>Function.prototype[Symbol.hasInstance].call(_e,T),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(_e,T)=>Object.defineProperties(_e,T),ObjectDefineProperty:(_e,T,J)=>Object.defineProperty(_e,T,J),ObjectGetOwnPropertyDescriptor:(_e,T)=>Object.getOwnPropertyDescriptor(_e,T),ObjectKeys:_e=>Object.keys(_e),ObjectSetPrototypeOf:(_e,T)=>Object.setPrototypeOf(_e,T),Promise,PromisePrototypeCatch:(_e,T)=>_e.catch(T),PromisePrototypeThen:(_e,T,J)=>_e.then(T,J),PromiseReject:_e=>Promise.reject(_e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(_e,T)=>_e.test(T),SafeSet:Set,String,StringPrototypeSlice:(_e,T,J)=>_e.slice(T,J),StringPrototypeToLowerCase:_e=>_e.toLowerCase(),StringPrototypeToUpperCase:_e=>_e.toUpperCase(),StringPrototypeTrim:_e=>_e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(_e,T,J)=>_e.set(T,J),Uint8Array}},2656:(Ue,_e,T)=>{"use strict";var J=T(7156).default;const S=T(1657),te=Object.getPrototypeOf(J(function*(){})).constructor,U=globalThis.Blob||S.Blob,ee=typeof U<"u"?function(F){return F instanceof U}:function(F){return!1};class _ extends Error{constructor(F){if(!Array.isArray(F))throw new TypeError("Expected input to be an Array, got "+typeof F);let W="";for(let R=0;R<F.length;R++)W+=`    ${F[R].stack}\n`;super(W),this.name="AggregateError",this.errors=F}}Ue.exports={AggregateError:_,kEmptyObject:Object.freeze({}),once(x){let F=!1;return function(...W){F||(F=!0,x.apply(this,W))}},createDeferredPromise:function(){let x,F;return{promise:new Promise((R,$)=>{x=R,F=$}),resolve:x,reject:F}},promisify:x=>new Promise((F,W)=>{x((R,...$)=>R?W(R):F(...$))}),debuglog:()=>function(){},format:(x,...F)=>x.replace(/%([sdifj])/g,function(...[W,R]){const $=F.shift();return"f"===R?$.toFixed(6):"j"===R?JSON.stringify($):"s"===R&&"object"==typeof $?`${$.constructor!==Object?$.constructor.name:""} {}`.trim():$.toString()}),inspect(x){switch(typeof x){case"string":if(x.includes("'")){if(!x.includes('"'))return`"${x}"`;if(!x.includes("`")&&!x.includes("${"))return`\`${x}\``}return`'${x}'`;case"number":return isNaN(x)?"NaN":Object.is(x,-0)?String(x):x;case"bigint":return`${String(x)}n`;case"boolean":case"undefined":return String(x);case"object":return"{}"}},types:{isAsyncFunction:x=>x instanceof te,isArrayBufferView:x=>ArrayBuffer.isView(x)},isBlob:ee},Ue.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(Ue,_e,T)=>{const{Buffer:J}=T(1657),{ObjectDefineProperty:S,ObjectKeys:te,ReflectApply:U}=T(6305),{promisify:{custom:ee}}=T(2656),{streamReturningOperators:_,promiseReturningOperators:x}=T(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:F}}=T(4370),W=T(7721),{pipeline:R}=T(4514),{destroyer:$}=T(5601),de=T(4618),H=T(16),ae=T(5428),q=Ue.exports=T(900).Stream;q.isDisturbed=ae.isDisturbed,q.isErrored=ae.isErrored,q.isReadable=ae.isReadable,q.Readable=T(8383);for(const X of te(_)){let b=function(...O){if(new.target)throw F();return q.Readable.from(U(B,this,O))};const B=_[X];S(b,"name",{__proto__:null,value:B.name}),S(b,"length",{__proto__:null,value:B.length}),S(q.Readable.prototype,X,{__proto__:null,value:b,enumerable:!1,configurable:!0,writable:!0})}for(const X of te(x)){let b=function(...C){if(new.target)throw F();return U(B,this,C)};const B=x[X];S(b,"name",{__proto__:null,value:B.name}),S(b,"length",{__proto__:null,value:B.length}),S(q.Readable.prototype,X,{__proto__:null,value:b,enumerable:!1,configurable:!0,writable:!0})}q.Writable=T(9764),q.Duplex=T(5931),q.Transform=T(123),q.PassThrough=T(6973),q.pipeline=R;const{addAbortSignal:oe}=T(9987);q.addAbortSignal=oe,q.finished=de,q.destroy=$,q.compose=W,S(q,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>H}),S(R,ee,{__proto__:null,enumerable:!0,get:()=>H.pipeline}),S(de,ee,{__proto__:null,enumerable:!0,get:()=>H.finished}),q.Stream=q,q._isUint8Array=function(B){return B instanceof Uint8Array},q._uint8ArrayToBuffer=function(B){return J.from(B.buffer,B.byteOffset,B.byteLength)}},16:(Ue,_e,T)=>{"use strict";const{ArrayPrototypePop:J,Promise:S}=T(6305),{isIterable:te,isNodeStream:U,isWebStream:ee}=T(5428),{pipelineImpl:_}=T(4514),{finished:x}=T(4618);T(8110),Ue.exports={finished:x,pipeline:function F(...W){return new S((R,$)=>{let de,I;const H=W[W.length-1];if(H&&"object"==typeof H&&!U(H)&&!te(H)&&!ee(H)){const ae=J(W);de=ae.signal,I=ae.end}_(W,(ae,q)=>{ae?$(ae):R(q)},{signal:de,end:I})})}}},1657:(Ue,_e,T)=>{"use strict";const J=T(9919),S=T(2601),te="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;_e.Buffer=x,_e.SlowBuffer=function ne(Ie){return+Ie!=Ie&&(Ie=0),x.alloc(+Ie)},_e.INSPECT_MAX_BYTES=50;const U=2147483647;function _(Ie){if(Ie>U)throw new RangeError('The value "'+Ie+'" is invalid for option "size"');const G=new Uint8Array(Ie);return Object.setPrototypeOf(G,x.prototype),G}function x(Ie,G,v){if("number"==typeof Ie){if("string"==typeof G)throw new TypeError('The "string" argument must be of type string. Received type number');return $(Ie)}return F(Ie,G,v)}function F(Ie,G,v){if("string"==typeof Ie)return function de(Ie,G){if(("string"!=typeof G||""===G)&&(G="utf8"),!x.isEncoding(G))throw new TypeError("Unknown encoding: "+G);const v=0|X(Ie,G);let re=_(v);const Ge=re.write(Ie,G);return Ge!==v&&(re=re.slice(0,Ge)),re}(Ie,G);if(ArrayBuffer.isView(Ie))return function H(Ie){if(dt(Ie,Uint8Array)){const G=new Uint8Array(Ie);return ae(G.buffer,G.byteOffset,G.byteLength)}return I(Ie)}(Ie);if(null==Ie)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie);if(dt(Ie,ArrayBuffer)||Ie&&dt(Ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(dt(Ie,SharedArrayBuffer)||Ie&&dt(Ie.buffer,SharedArrayBuffer)))return ae(Ie,G,v);if("number"==typeof Ie)throw new TypeError('The "value" argument must not be of type number. Received type number');const re=Ie.valueOf&&Ie.valueOf();if(null!=re&&re!==Ie)return x.from(re,G,v);const Ge=function q(Ie){if(x.isBuffer(Ie)){const G=0|oe(Ie.length),v=_(G);return 0===v.length||Ie.copy(v,0,0,G),v}return void 0!==Ie.length?"number"!=typeof Ie.length||mt(Ie.length)?_(0):I(Ie):"Buffer"===Ie.type&&Array.isArray(Ie.data)?I(Ie.data):void 0}(Ie);if(Ge)return Ge;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Ie[Symbol.toPrimitive])return x.from(Ie[Symbol.toPrimitive]("string"),G,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie)}function W(Ie){if("number"!=typeof Ie)throw new TypeError('"size" argument must be of type number');if(Ie<0)throw new RangeError('The value "'+Ie+'" is invalid for option "size"')}function $(Ie){return W(Ie),_(Ie<0?0:0|oe(Ie))}function I(Ie){const G=Ie.length<0?0:0|oe(Ie.length),v=_(G);for(let re=0;re<G;re+=1)v[re]=255&Ie[re];return v}function ae(Ie,G,v){if(G<0||Ie.byteLength<G)throw new RangeError('"offset" is outside of buffer bounds');if(Ie.byteLength<G+(v||0))throw new RangeError('"length" is outside of buffer bounds');let re;return re=void 0===G&&void 0===v?new Uint8Array(Ie):void 0===v?new Uint8Array(Ie,G):new Uint8Array(Ie,G,v),Object.setPrototypeOf(re,x.prototype),re}function oe(Ie){if(Ie>=U)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+U.toString(16)+" bytes");return 0|Ie}function X(Ie,G){if(x.isBuffer(Ie))return Ie.length;if(ArrayBuffer.isView(Ie)||dt(Ie,ArrayBuffer))return Ie.byteLength;if("string"!=typeof Ie)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ie);const v=Ie.length,re=arguments.length>2&&!0===arguments[2];if(!re&&0===v)return 0;let Ge=!1;for(;;)switch(G){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return M(Ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return ze(Ie).length;default:if(Ge)return re?-1:M(Ie).length;G=(""+G).toLowerCase(),Ge=!0}}function B(Ie,G,v){let re=!1;if((void 0===G||G<0)&&(G=0),G>this.length||((void 0===v||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(G>>>=0))return"";for(Ie||(Ie="utf8");;)switch(Ie){case"hex":return Pe(this,G,v);case"utf8":case"utf-8":return ke(this,G,v);case"ascii":return Ee(this,G,v);case"latin1":case"binary":return Ne(this,G,v);case"base64":return Re(this,G,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,G,v);default:if(re)throw new TypeError("Unknown encoding: "+Ie);Ie=(Ie+"").toLowerCase(),re=!0}}function b(Ie,G,v){const re=Ie[G];Ie[G]=Ie[v],Ie[v]=re}function O(Ie,G,v,re,Ge){if(0===Ie.length)return-1;if("string"==typeof v?(re=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),mt(v=+v)&&(v=Ge?0:Ie.length-1),v<0&&(v=Ie.length+v),v>=Ie.length){if(Ge)return-1;v=Ie.length-1}else if(v<0){if(!Ge)return-1;v=0}if("string"==typeof G&&(G=x.from(G,re)),x.isBuffer(G))return 0===G.length?-1:C(Ie,G,v,re,Ge);if("number"==typeof G)return G&=255,"function"==typeof Uint8Array.prototype.indexOf?Ge?Uint8Array.prototype.indexOf.call(Ie,G,v):Uint8Array.prototype.lastIndexOf.call(Ie,G,v):C(Ie,[G],v,re,Ge);throw new TypeError("val must be string, number or Buffer")}function C(Ie,G,v,re,Ge){let Kn,Je=1,at=Ie.length,Wt=G.length;if(void 0!==re&&("ucs2"===(re=String(re).toLowerCase())||"ucs-2"===re||"utf16le"===re||"utf-16le"===re)){if(Ie.length<2||G.length<2)return-1;Je=2,at/=2,Wt/=2,v/=2}function an(Xn,Dn){return 1===Je?Xn[Dn]:Xn.readUInt16BE(Dn*Je)}if(Ge){let Xn=-1;for(Kn=v;Kn<at;Kn++)if(an(Ie,Kn)===an(G,-1===Xn?0:Kn-Xn)){if(-1===Xn&&(Xn=Kn),Kn-Xn+1===Wt)return Xn*Je}else-1!==Xn&&(Kn-=Kn-Xn),Xn=-1}else for(v+Wt>at&&(v=at-Wt),Kn=v;Kn>=0;Kn--){let Xn=!0;for(let Dn=0;Dn<Wt;Dn++)if(an(Ie,Kn+Dn)!==an(G,Dn)){Xn=!1;break}if(Xn)return Kn}return-1}function he(Ie,G,v,re){v=Number(v)||0;const Ge=Ie.length-v;re?(re=Number(re))>Ge&&(re=Ge):re=Ge;const Je=G.length;let at;for(re>Je/2&&(re=Je/2),at=0;at<re;++at){const Wt=parseInt(G.substr(2*at,2),16);if(mt(Wt))return at;Ie[v+at]=Wt}return at}function V(Ie,G,v,re){return Xe(M(G,Ie.length-v),Ie,v,re)}function Te(Ie,G,v,re){return Xe(function Q(Ie){const G=[];for(let v=0;v<Ie.length;++v)G.push(255&Ie.charCodeAt(v));return G}(G),Ie,v,re)}function se(Ie,G,v,re){return Xe(ze(G),Ie,v,re)}function Ce(Ie,G,v,re){return Xe(function fe(Ie,G){let v,re,Ge;const Je=[];for(let at=0;at<Ie.length&&!((G-=2)<0);++at)v=Ie.charCodeAt(at),re=v>>8,Ge=v%256,Je.push(Ge),Je.push(re);return Je}(G,Ie.length-v),Ie,v,re)}function Re(Ie,G,v){return J.fromByteArray(0===G&&v===Ie.length?Ie:Ie.slice(G,v))}function ke(Ie,G,v){v=Math.min(Ie.length,v);const re=[];let Ge=G;for(;Ge<v;){const Je=Ie[Ge];let at=null,Wt=Je>239?4:Je>223?3:Je>191?2:1;if(Ge+Wt<=v){let an,Kn,Xn,Dn;switch(Wt){case 1:Je<128&&(at=Je);break;case 2:an=Ie[Ge+1],128==(192&an)&&(Dn=(31&Je)<<6|63&an,Dn>127&&(at=Dn));break;case 3:an=Ie[Ge+1],Kn=Ie[Ge+2],128==(192&an)&&128==(192&Kn)&&(Dn=(15&Je)<<12|(63&an)<<6|63&Kn,Dn>2047&&(Dn<55296||Dn>57343)&&(at=Dn));break;case 4:an=Ie[Ge+1],Kn=Ie[Ge+2],Xn=Ie[Ge+3],128==(192&an)&&128==(192&Kn)&&128==(192&Xn)&&(Dn=(15&Je)<<18|(63&an)<<12|(63&Kn)<<6|63&Xn,Dn>65535&&Dn<1114112&&(at=Dn))}}null===at?(at=65533,Wt=1):at>65535&&(at-=65536,re.push(at>>>10&1023|55296),at=56320|1023&at),re.push(at),Ge+=Wt}return function qe(Ie){const G=Ie.length;if(G<=et)return String.fromCharCode.apply(String,Ie);let v="",re=0;for(;re<G;)v+=String.fromCharCode.apply(String,Ie.slice(re,re+=et));return v}(re)}_e.kMaxLength=U,!(x.TYPED_ARRAY_SUPPORT=function ee(){try{const Ie=new Uint8Array(1),G={foo:function(){return 42}};return Object.setPrototypeOf(G,Uint8Array.prototype),Object.setPrototypeOf(Ie,G),42===Ie.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}}),x.poolSize=8192,x.from=function(Ie,G,v){return F(Ie,G,v)},Object.setPrototypeOf(x.prototype,Uint8Array.prototype),Object.setPrototypeOf(x,Uint8Array),x.alloc=function(Ie,G,v){return function R(Ie,G,v){return W(Ie),Ie<=0?_(Ie):void 0!==G?"string"==typeof v?_(Ie).fill(G,v):_(Ie).fill(G):_(Ie)}(Ie,G,v)},x.allocUnsafe=function(Ie){return $(Ie)},x.allocUnsafeSlow=function(Ie){return $(Ie)},x.isBuffer=function(G){return null!=G&&!0===G._isBuffer&&G!==x.prototype},x.compare=function(G,v){if(dt(G,Uint8Array)&&(G=x.from(G,G.offset,G.byteLength)),dt(v,Uint8Array)&&(v=x.from(v,v.offset,v.byteLength)),!x.isBuffer(G)||!x.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(G===v)return 0;let re=G.length,Ge=v.length;for(let Je=0,at=Math.min(re,Ge);Je<at;++Je)if(G[Je]!==v[Je]){re=G[Je],Ge=v[Je];break}return re<Ge?-1:Ge<re?1:0},x.isEncoding=function(G){switch(String(G).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(G,v){if(!Array.isArray(G))throw new TypeError('"list" argument must be an Array of Buffers');if(0===G.length)return x.alloc(0);let re;if(void 0===v)for(v=0,re=0;re<G.length;++re)v+=G[re].length;const Ge=x.allocUnsafe(v);let Je=0;for(re=0;re<G.length;++re){let at=G[re];if(dt(at,Uint8Array))Je+at.length>Ge.length?(x.isBuffer(at)||(at=x.from(at)),at.copy(Ge,Je)):Uint8Array.prototype.set.call(Ge,at,Je);else{if(!x.isBuffer(at))throw new TypeError('"list" argument must be an Array of Buffers');at.copy(Ge,Je)}Je+=at.length}return Ge},x.byteLength=X,x.prototype._isBuffer=!0,x.prototype.swap16=function(){const G=this.length;if(G%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<G;v+=2)b(this,v,v+1);return this},x.prototype.swap32=function(){const G=this.length;if(G%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<G;v+=4)b(this,v,v+3),b(this,v+1,v+2);return this},x.prototype.swap64=function(){const G=this.length;if(G%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<G;v+=8)b(this,v,v+7),b(this,v+1,v+6),b(this,v+2,v+5),b(this,v+3,v+4);return this},x.prototype.toLocaleString=x.prototype.toString=function(){const G=this.length;return 0===G?"":0===arguments.length?ke(this,0,G):B.apply(this,arguments)},x.prototype.equals=function(G){if(!x.isBuffer(G))throw new TypeError("Argument must be a Buffer");return this===G||0===x.compare(this,G)},x.prototype.inspect=function(){let G="";const v=_e.INSPECT_MAX_BYTES;return G=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(G+=" ... "),"<Buffer "+G+">"},te&&(x.prototype[te]=x.prototype.inspect),x.prototype.compare=function(G,v,re,Ge,Je){if(dt(G,Uint8Array)&&(G=x.from(G,G.offset,G.byteLength)),!x.isBuffer(G))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof G);if(void 0===v&&(v=0),void 0===re&&(re=G?G.length:0),void 0===Ge&&(Ge=0),void 0===Je&&(Je=this.length),v<0||re>G.length||Ge<0||Je>this.length)throw new RangeError("out of range index");if(Ge>=Je&&v>=re)return 0;if(Ge>=Je)return-1;if(v>=re)return 1;if(this===G)return 0;let at=(Je>>>=0)-(Ge>>>=0),Wt=(re>>>=0)-(v>>>=0);const an=Math.min(at,Wt),Kn=this.slice(Ge,Je),Xn=G.slice(v,re);for(let Dn=0;Dn<an;++Dn)if(Kn[Dn]!==Xn[Dn]){at=Kn[Dn],Wt=Xn[Dn];break}return at<Wt?-1:Wt<at?1:0},x.prototype.includes=function(G,v,re){return-1!==this.indexOf(G,v,re)},x.prototype.indexOf=function(G,v,re){return O(this,G,v,re,!0)},x.prototype.lastIndexOf=function(G,v,re){return O(this,G,v,re,!1)},x.prototype.write=function(G,v,re,Ge){if(void 0===v)Ge="utf8",re=this.length,v=0;else if(void 0===re&&"string"==typeof v)Ge=v,re=this.length,v=0;else{if(!isFinite(v))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");v>>>=0,isFinite(re)?(re>>>=0,void 0===Ge&&(Ge="utf8")):(Ge=re,re=void 0)}const Je=this.length-v;if((void 0===re||re>Je)&&(re=Je),G.length>0&&(re<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");let at=!1;for(;;)switch(Ge){case"hex":return he(this,G,v,re);case"utf8":case"utf-8":return V(this,G,v,re);case"ascii":case"latin1":case"binary":return Te(this,G,v,re);case"base64":return se(this,G,v,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,G,v,re);default:if(at)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),at=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const et=4096;function Ee(Ie,G,v){let re="";v=Math.min(Ie.length,v);for(let Ge=G;Ge<v;++Ge)re+=String.fromCharCode(127&Ie[Ge]);return re}function Ne(Ie,G,v){let re="";v=Math.min(Ie.length,v);for(let Ge=G;Ge<v;++Ge)re+=String.fromCharCode(Ie[Ge]);return re}function Pe(Ie,G,v){const re=Ie.length;(!G||G<0)&&(G=0),(!v||v<0||v>re)&&(v=re);let Ge="";for(let Je=G;Je<v;++Je)Ge+=gt[Ie[Je]];return Ge}function He(Ie,G,v){const re=Ie.slice(G,v);let Ge="";for(let Je=0;Je<re.length-1;Je+=2)Ge+=String.fromCharCode(re[Je]+256*re[Je+1]);return Ge}function pe(Ie,G,v){if(Ie%1!=0||Ie<0)throw new RangeError("offset is not uint");if(Ie+G>v)throw new RangeError("Trying to access beyond buffer length")}function Ae(Ie,G,v,re,Ge,Je){if(!x.isBuffer(Ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(G>Ge||G<Je)throw new RangeError('"value" argument is out of bounds');if(v+re>Ie.length)throw new RangeError("Index out of range")}function Ye(Ie,G,v,re,Ge){tt(G,re,Ge,Ie,v,7);let Je=Number(G&BigInt(4294967295));Ie[v++]=Je,Je>>=8,Ie[v++]=Je,Je>>=8,Ie[v++]=Je,Je>>=8,Ie[v++]=Je;let at=Number(G>>BigInt(32)&BigInt(4294967295));return Ie[v++]=at,at>>=8,Ie[v++]=at,at>>=8,Ie[v++]=at,at>>=8,Ie[v++]=at,v}function st(Ie,G,v,re,Ge){tt(G,re,Ge,Ie,v,7);let Je=Number(G&BigInt(4294967295));Ie[v+7]=Je,Je>>=8,Ie[v+6]=Je,Je>>=8,Ie[v+5]=Je,Je>>=8,Ie[v+4]=Je;let at=Number(G>>BigInt(32)&BigInt(4294967295));return Ie[v+3]=at,at>>=8,Ie[v+2]=at,at>>=8,Ie[v+1]=at,at>>=8,Ie[v]=at,v+8}function Ze(Ie,G,v,re,Ge,Je){if(v+re>Ie.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function le(Ie,G,v,re,Ge){return G=+G,v>>>=0,Ge||Ze(Ie,0,v,4),S.write(Ie,G,v,re,23,4),v+4}function N(Ie,G,v,re,Ge){return G=+G,v>>>=0,Ge||Ze(Ie,0,v,8),S.write(Ie,G,v,re,52,8),v+8}x.prototype.slice=function(G,v){const re=this.length;(G=~~G)<0?(G+=re)<0&&(G=0):G>re&&(G=re),(v=void 0===v?re:~~v)<0?(v+=re)<0&&(v=0):v>re&&(v=re),v<G&&(v=G);const Ge=this.subarray(G,v);return Object.setPrototypeOf(Ge,x.prototype),Ge},x.prototype.readUintLE=x.prototype.readUIntLE=function(G,v,re){G>>>=0,v>>>=0,re||pe(G,v,this.length);let Ge=this[G],Je=1,at=0;for(;++at<v&&(Je*=256);)Ge+=this[G+at]*Je;return Ge},x.prototype.readUintBE=x.prototype.readUIntBE=function(G,v,re){G>>>=0,v>>>=0,re||pe(G,v,this.length);let Ge=this[G+--v],Je=1;for(;v>0&&(Je*=256);)Ge+=this[G+--v]*Je;return Ge},x.prototype.readUint8=x.prototype.readUInt8=function(G,v){return G>>>=0,v||pe(G,1,this.length),this[G]},x.prototype.readUint16LE=x.prototype.readUInt16LE=function(G,v){return G>>>=0,v||pe(G,2,this.length),this[G]|this[G+1]<<8},x.prototype.readUint16BE=x.prototype.readUInt16BE=function(G,v){return G>>>=0,v||pe(G,2,this.length),this[G]<<8|this[G+1]},x.prototype.readUint32LE=x.prototype.readUInt32LE=function(G,v){return G>>>=0,v||pe(G,4,this.length),(this[G]|this[G+1]<<8|this[G+2]<<16)+16777216*this[G+3]},x.prototype.readUint32BE=x.prototype.readUInt32BE=function(G,v){return G>>>=0,v||pe(G,4,this.length),16777216*this[G]+(this[G+1]<<16|this[G+2]<<8|this[G+3])},x.prototype.readBigUInt64LE=zt(function(G){ce(G>>>=0,"offset");const v=this[G],re=this[G+7];(void 0===v||void 0===re)&&Z(G,this.length-8);const Ge=v+256*this[++G]+65536*this[++G]+this[++G]*2**24,Je=this[++G]+256*this[++G]+65536*this[++G]+re*2**24;return BigInt(Ge)+(BigInt(Je)<<BigInt(32))}),x.prototype.readBigUInt64BE=zt(function(G){ce(G>>>=0,"offset");const v=this[G],re=this[G+7];(void 0===v||void 0===re)&&Z(G,this.length-8);const Ge=v*2**24+65536*this[++G]+256*this[++G]+this[++G],Je=this[++G]*2**24+65536*this[++G]+256*this[++G]+re;return(BigInt(Ge)<<BigInt(32))+BigInt(Je)}),x.prototype.readIntLE=function(G,v,re){G>>>=0,v>>>=0,re||pe(G,v,this.length);let Ge=this[G],Je=1,at=0;for(;++at<v&&(Je*=256);)Ge+=this[G+at]*Je;return Je*=128,Ge>=Je&&(Ge-=Math.pow(2,8*v)),Ge},x.prototype.readIntBE=function(G,v,re){G>>>=0,v>>>=0,re||pe(G,v,this.length);let Ge=v,Je=1,at=this[G+--Ge];for(;Ge>0&&(Je*=256);)at+=this[G+--Ge]*Je;return Je*=128,at>=Je&&(at-=Math.pow(2,8*v)),at},x.prototype.readInt8=function(G,v){return G>>>=0,v||pe(G,1,this.length),128&this[G]?-1*(255-this[G]+1):this[G]},x.prototype.readInt16LE=function(G,v){G>>>=0,v||pe(G,2,this.length);const re=this[G]|this[G+1]<<8;return 32768&re?4294901760|re:re},x.prototype.readInt16BE=function(G,v){G>>>=0,v||pe(G,2,this.length);const re=this[G+1]|this[G]<<8;return 32768&re?4294901760|re:re},x.prototype.readInt32LE=function(G,v){return G>>>=0,v||pe(G,4,this.length),this[G]|this[G+1]<<8|this[G+2]<<16|this[G+3]<<24},x.prototype.readInt32BE=function(G,v){return G>>>=0,v||pe(G,4,this.length),this[G]<<24|this[G+1]<<16|this[G+2]<<8|this[G+3]},x.prototype.readBigInt64LE=zt(function(G){ce(G>>>=0,"offset");const v=this[G],re=this[G+7];return(void 0===v||void 0===re)&&Z(G,this.length-8),(BigInt(this[G+4]+256*this[G+5]+65536*this[G+6]+(re<<24))<<BigInt(32))+BigInt(v+256*this[++G]+65536*this[++G]+this[++G]*2**24)}),x.prototype.readBigInt64BE=zt(function(G){ce(G>>>=0,"offset");const v=this[G],re=this[G+7];(void 0===v||void 0===re)&&Z(G,this.length-8);const Ge=(v<<24)+65536*this[++G]+256*this[++G]+this[++G];return(BigInt(Ge)<<BigInt(32))+BigInt(this[++G]*2**24+65536*this[++G]+256*this[++G]+re)}),x.prototype.readFloatLE=function(G,v){return G>>>=0,v||pe(G,4,this.length),S.read(this,G,!0,23,4)},x.prototype.readFloatBE=function(G,v){return G>>>=0,v||pe(G,4,this.length),S.read(this,G,!1,23,4)},x.prototype.readDoubleLE=function(G,v){return G>>>=0,v||pe(G,8,this.length),S.read(this,G,!0,52,8)},x.prototype.readDoubleBE=function(G,v){return G>>>=0,v||pe(G,8,this.length),S.read(this,G,!1,52,8)},x.prototype.writeUintLE=x.prototype.writeUIntLE=function(G,v,re,Ge){G=+G,v>>>=0,re>>>=0,Ge||Ae(this,G,v,re,Math.pow(2,8*re)-1,0);let Je=1,at=0;for(this[v]=255&G;++at<re&&(Je*=256);)this[v+at]=G/Je&255;return v+re},x.prototype.writeUintBE=x.prototype.writeUIntBE=function(G,v,re,Ge){G=+G,v>>>=0,re>>>=0,Ge||Ae(this,G,v,re,Math.pow(2,8*re)-1,0);let Je=re-1,at=1;for(this[v+Je]=255&G;--Je>=0&&(at*=256);)this[v+Je]=G/at&255;return v+re},x.prototype.writeUint8=x.prototype.writeUInt8=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,1,255,0),this[v]=255&G,v+1},x.prototype.writeUint16LE=x.prototype.writeUInt16LE=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,2,65535,0),this[v]=255&G,this[v+1]=G>>>8,v+2},x.prototype.writeUint16BE=x.prototype.writeUInt16BE=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,2,65535,0),this[v]=G>>>8,this[v+1]=255&G,v+2},x.prototype.writeUint32LE=x.prototype.writeUInt32LE=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,4,4294967295,0),this[v+3]=G>>>24,this[v+2]=G>>>16,this[v+1]=G>>>8,this[v]=255&G,v+4},x.prototype.writeUint32BE=x.prototype.writeUInt32BE=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,4,4294967295,0),this[v]=G>>>24,this[v+1]=G>>>16,this[v+2]=G>>>8,this[v+3]=255&G,v+4},x.prototype.writeBigUInt64LE=zt(function(G,v=0){return Ye(this,G,v,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeBigUInt64BE=zt(function(G,v=0){return st(this,G,v,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeIntLE=function(G,v,re,Ge){if(G=+G,v>>>=0,!Ge){const an=Math.pow(2,8*re-1);Ae(this,G,v,re,an-1,-an)}let Je=0,at=1,Wt=0;for(this[v]=255&G;++Je<re&&(at*=256);)G<0&&0===Wt&&0!==this[v+Je-1]&&(Wt=1),this[v+Je]=(G/at>>0)-Wt&255;return v+re},x.prototype.writeIntBE=function(G,v,re,Ge){if(G=+G,v>>>=0,!Ge){const an=Math.pow(2,8*re-1);Ae(this,G,v,re,an-1,-an)}let Je=re-1,at=1,Wt=0;for(this[v+Je]=255&G;--Je>=0&&(at*=256);)G<0&&0===Wt&&0!==this[v+Je+1]&&(Wt=1),this[v+Je]=(G/at>>0)-Wt&255;return v+re},x.prototype.writeInt8=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,1,127,-128),G<0&&(G=255+G+1),this[v]=255&G,v+1},x.prototype.writeInt16LE=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,2,32767,-32768),this[v]=255&G,this[v+1]=G>>>8,v+2},x.prototype.writeInt16BE=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,2,32767,-32768),this[v]=G>>>8,this[v+1]=255&G,v+2},x.prototype.writeInt32LE=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,4,2147483647,-2147483648),this[v]=255&G,this[v+1]=G>>>8,this[v+2]=G>>>16,this[v+3]=G>>>24,v+4},x.prototype.writeInt32BE=function(G,v,re){return G=+G,v>>>=0,re||Ae(this,G,v,4,2147483647,-2147483648),G<0&&(G=4294967295+G+1),this[v]=G>>>24,this[v+1]=G>>>16,this[v+2]=G>>>8,this[v+3]=255&G,v+4},x.prototype.writeBigInt64LE=zt(function(G,v=0){return Ye(this,G,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeBigInt64BE=zt(function(G,v=0){return st(this,G,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeFloatLE=function(G,v,re){return le(this,G,v,!0,re)},x.prototype.writeFloatBE=function(G,v,re){return le(this,G,v,!1,re)},x.prototype.writeDoubleLE=function(G,v,re){return N(this,G,v,!0,re)},x.prototype.writeDoubleBE=function(G,v,re){return N(this,G,v,!1,re)},x.prototype.copy=function(G,v,re,Ge){if(!x.isBuffer(G))throw new TypeError("argument should be a Buffer");if(re||(re=0),!Ge&&0!==Ge&&(Ge=this.length),v>=G.length&&(v=G.length),v||(v=0),Ge>0&&Ge<re&&(Ge=re),Ge===re||0===G.length||0===this.length)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(re<0||re>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),G.length-v<Ge-re&&(Ge=G.length-v+re);const Je=Ge-re;return this===G&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(v,re,Ge):Uint8Array.prototype.set.call(G,this.subarray(re,Ge),v),Je},x.prototype.fill=function(G,v,re,Ge){if("string"==typeof G){if("string"==typeof v?(Ge=v,v=0,re=this.length):"string"==typeof re&&(Ge=re,re=this.length),void 0!==Ge&&"string"!=typeof Ge)throw new TypeError("encoding must be a string");if("string"==typeof Ge&&!x.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(1===G.length){const at=G.charCodeAt(0);("utf8"===Ge&&at<128||"latin1"===Ge)&&(G=at)}}else"number"==typeof G?G&=255:"boolean"==typeof G&&(G=Number(G));if(v<0||this.length<v||this.length<re)throw new RangeError("Out of range index");if(re<=v)return this;let Je;if(v>>>=0,re=void 0===re?this.length:re>>>0,G||(G=0),"number"==typeof G)for(Je=v;Je<re;++Je)this[Je]=G;else{const at=x.isBuffer(G)?G:x.from(G,Ge),Wt=at.length;if(0===Wt)throw new TypeError('The value "'+G+'" is invalid for argument "value"');for(Je=0;Je<re-v;++Je)this[Je+v]=at[Je%Wt]}return this};const E={};function ie(Ie,G,v){E[Ie]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:G.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ie}]`,delete this.name}get code(){return Ie}set code(Ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ge,writable:!0})}toString(){return`${this.name} [${Ie}]: ${this.message}`}}}function z(Ie){let G="",v=Ie.length;const re="-"===Ie[0]?1:0;for(;v>=re+4;v-=3)G=`_${Ie.slice(v-3,v)}${G}`;return`${Ie.slice(0,v)}${G}`}function tt(Ie,G,v,re,Ge,Je){if(Ie>v||Ie<G){const at="bigint"==typeof G?"n":"";let Wt;throw Wt=Je>3?0===G||G===BigInt(0)?`>= 0${at} and < 2${at} ** ${8*(Je+1)}${at}`:`>= -(2${at} ** ${8*(Je+1)-1}${at}) and < 2 ** ${8*(Je+1)-1}${at}`:`>= ${G}${at} and <= ${v}${at}`,new E.ERR_OUT_OF_RANGE("value",Wt,Ie)}!function Se(Ie,G,v){ce(G,"offset"),(void 0===Ie[G]||void 0===Ie[G+v])&&Z(G,Ie.length-(v+1))}(re,Ge,Je)}function ce(Ie,G){if("number"!=typeof Ie)throw new E.ERR_INVALID_ARG_TYPE(G,"number",Ie)}function Z(Ie,G,v){throw Math.floor(Ie)!==Ie?(ce(Ie,v),new E.ERR_OUT_OF_RANGE(v||"offset","an integer",Ie)):G<0?new E.ERR_BUFFER_OUT_OF_BOUNDS:new E.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${G}`,Ie)}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(Ie){return Ie?`${Ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(Ie,G){return`The "${Ie}" argument must be of type number. Received type ${typeof G}`},TypeError),ie("ERR_OUT_OF_RANGE",function(Ie,G,v){let re=`The value of "${Ie}" is out of range.`,Ge=v;return Number.isInteger(v)&&Math.abs(v)>2**32?Ge=z(String(v)):"bigint"==typeof v&&(Ge=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(Ge=z(Ge)),Ge+="n"),re+=` It must be ${G}. Received ${Ge}`,re},RangeError);const L=/[^+/0-9A-Za-z-_]/g;function M(Ie,G){let v;G=G||1/0;const re=Ie.length;let Ge=null;const Je=[];for(let at=0;at<re;++at){if(v=Ie.charCodeAt(at),v>55295&&v<57344){if(!Ge){if(v>56319){(G-=3)>-1&&Je.push(239,191,189);continue}if(at+1===re){(G-=3)>-1&&Je.push(239,191,189);continue}Ge=v;continue}if(v<56320){(G-=3)>-1&&Je.push(239,191,189),Ge=v;continue}v=65536+(Ge-55296<<10|v-56320)}else Ge&&(G-=3)>-1&&Je.push(239,191,189);if(Ge=null,v<128){if((G-=1)<0)break;Je.push(v)}else if(v<2048){if((G-=2)<0)break;Je.push(v>>6|192,63&v|128)}else if(v<65536){if((G-=3)<0)break;Je.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((G-=4)<0)break;Je.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return Je}function ze(Ie){return J.toByteArray(function w(Ie){if((Ie=(Ie=Ie.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;Ie.length%4!=0;)Ie+="=";return Ie}(Ie))}function Xe(Ie,G,v,re){let Ge;for(Ge=0;Ge<re&&!(Ge+v>=G.length||Ge>=Ie.length);++Ge)G[Ge+v]=Ie[Ge];return Ge}function dt(Ie,G){return Ie instanceof G||null!=Ie&&null!=Ie.constructor&&null!=Ie.constructor.name&&Ie.constructor.name===G.name}function mt(Ie){return Ie!=Ie}const gt=function(){const Ie="0123456789abcdef",G=new Array(256);for(let v=0;v<16;++v){const re=16*v;for(let Ge=0;Ge<16;++Ge)G[re+Ge]=Ie[v]+Ie[Ge]}return G}();function zt(Ie){return typeof BigInt>"u"?on:Ie}function on(){throw new Error("BigInt not supported")}},7054:function(Ue,_e,T){"use strict";var J=this&&this.__createBinding||(Object.create?function(te,U,ee,_){void 0===_&&(_=ee),Object.defineProperty(te,_,{enumerable:!0,get:function(){return U[ee]}})}:function(te,U,ee,_){void 0===_&&(_=ee),te[_]=U[ee]}),S=this&&this.__exportStar||function(te,U){for(var ee in te)"default"!==ee&&!Object.prototype.hasOwnProperty.call(U,ee)&&J(U,te,ee)};Object.defineProperty(_e,"__esModule",{value:!0}),S(T(361),_e)},361:(Ue,_e)=>{"use strict";function J(U){const ee=[];let _=0;for(;_<U.length;)switch(U[_]){case"/":if("."===U[_+1])if("."===U[_+2]){if(!te(U[_+3])){ee.push([]),_++;break}ee.pop(),U[_+3]||ee.push([]),_+=3}else{if(!te(U[_+2])){ee.push([]),_++;break}U[_+2]||ee.push([]),_+=2}else ee.push([]),_++;break;case"#":case"?":ee.length||ee.push([]),ee[ee.length-1].push(U.substr(_)),_=U.length;break;default:ee.length||ee.push([]),ee[ee.length-1].push(U[_]),_++}return"/"+ee.map(x=>x.join("")).join("/")}function S(U,ee){let _=ee+1;ee>=0?"/"===U[ee+1]&&"/"===U[ee+2]&&(_=ee+3):"/"===U[0]&&"/"===U[1]&&(_=2);const x=U.indexOf("/",_);return x<0?U:U.substr(0,x)+J(U.substr(x))}function te(U){return!U||"#"===U||"?"===U||"/"===U}Object.defineProperty(_e,"__esModule",{value:!0}),_e.removeDotSegmentsOfPath=_e.removeDotSegments=_e.resolve=void 0,_e.resolve=function T(U,ee){const _=(ee=ee||"").indexOf("#");if(_>0&&(ee=ee.substr(0,_)),!U.length){if(ee.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${ee}' for value '${U}'`);return ee}if(U.startsWith("?")){const I=ee.indexOf("?");return I>0&&(ee=ee.substr(0,I)),ee+U}if(U.startsWith("#"))return ee+U;if(!ee.length){const I=U.indexOf(":");if(I<0)throw new Error(`Found invalid relative IRI '${U}' for a missing baseIRI`);return S(U,I)}const x=U.indexOf(":");if(x>=0)return S(U,x);const F=ee.indexOf(":");if(F<0)throw new Error(`Found invalid baseIRI '${ee}' for value '${U}'`);const W=ee.substr(0,F+1);if(0===U.indexOf("//"))return W+S(U,x);let R;if(ee.indexOf("//",F)===F+1){if(R=ee.indexOf("/",F+3),R<0)return ee.length>F+3?ee+"/"+S(U,x):W+S(U,x)}else if(R=ee.indexOf("/",F+1),R<0)return W+S(U,x);if(0===U.indexOf("/"))return ee.substr(0,R)+J(U);let $=ee.substr(R);const de=$.lastIndexOf("/");return de>=0&&de<$.length-1&&($=$.substr(0,de+1),"."===U[0]&&"."!==U[1]&&"/"!==U[1]&&U[2]&&(U=U.substr(1))),U=J(U=$+U),ee.substr(0,R)+U},_e.removeDotSegments=J,_e.removeDotSegmentsOfPath=S},9528:(Ue,_e,T)=>{!function(J){J.parser=function(N,E){return new te(N,E)},J.SAXParser=te,J.SAXStream=R,J.createStream=function W(N,E){return new R(N,E)},J.MAX_BUFFER_LENGTH=65536;var x,S=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function te(N,E){if(!(this instanceof te))return new te(N,E);var ie=this;(function ee(N){for(var E=0,ie=S.length;E<ie;E++)N[S[E]]=""})(ie),ie.q=ie.c="",ie.bufferCheckPosition=J.MAX_BUFFER_LENGTH,ie.opt=E||{},ie.opt.lowercase=ie.opt.lowercase||ie.opt.lowercasetags,ie.looseCase=ie.opt.lowercase?"toLowerCase":"toUpperCase",ie.tags=[],ie.closed=ie.closedRoot=ie.sawRoot=!1,ie.tag=ie.error=null,ie.strict=!!N,ie.noscript=!(!N&&!ie.opt.noscript),ie.state=V.BEGIN,ie.strictEntities=ie.opt.strictEntities,ie.ENTITIES=Object.create(ie.strictEntities?J.XML_ENTITIES:J.ENTITIES),ie.attribList=[],ie.opt.xmlns&&(ie.ns=Object.create(ae)),ie.trackPosition=!1!==ie.opt.position,ie.trackPosition&&(ie.position=ie.line=ie.column=0),se(ie,"onready")}J.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(N){function E(){}return E.prototype=N,new E}),Object.keys||(Object.keys=function(N){var E=[];for(var ie in N)N.hasOwnProperty(ie)&&E.push(ie);return E}),te.prototype={end:function(){qe(this)},write:function le(N){var E=this;if(this.error)throw this.error;if(E.closed)return et(E,"Cannot write after close. Assign an onready handler.");if(null===N)return qe(E);"object"==typeof N&&(N=N.toString());for(var ie=0,z="";z=Ze(N,ie++),E.c=z,z;)switch(E.trackPosition&&(E.position++,"\n"===z?(E.line++,E.column=0):E.column++),E.state){case V.BEGIN:if(E.state=V.BEGIN_WHITESPACE,"\ufeff"===z)continue;st(E,z);continue;case V.BEGIN_WHITESPACE:st(E,z);continue;case V.TEXT:if(E.sawRoot&&!E.closedRoot){for(var Se=ie-1;z&&"<"!==z&&"&"!==z;)(z=Ze(N,ie++))&&E.trackPosition&&(E.position++,"\n"===z?(E.line++,E.column=0):E.column++);E.textNode+=N.substring(Se,ie-1)}"<"!==z||E.sawRoot&&E.closedRoot&&!E.strict?(!B(z)&&(!E.sawRoot||E.closedRoot)&&Ee(E,"Text data outside of root node."),"&"===z?E.state=V.TEXT_ENTITY:E.textNode+=z):(E.state=V.OPEN_WAKA,E.startTagPosition=E.position);continue;case V.SCRIPT:"<"===z?E.state=V.SCRIPT_ENDING:E.script+=z;continue;case V.SCRIPT_ENDING:"/"===z?E.state=V.CLOSE_TAG:(E.script+="<"+z,E.state=V.SCRIPT);continue;case V.OPEN_WAKA:"!"===z?(E.state=V.SGML_DECL,E.sgmlDecl=""):B(z)||(C(q,z)?(E.state=V.OPEN_TAG,E.tagName=z):"/"===z?(E.state=V.CLOSE_TAG,E.tagName=""):"?"===z?(E.state=V.PROC_INST,E.procInstName=E.procInstBody=""):(Ee(E,"Unencoded <"),E.startTagPosition+1<E.position&&(z=new Array(E.position-E.startTagPosition).join(" ")+z),E.textNode+="<"+z,E.state=V.TEXT));continue;case V.SGML_DECL:(E.sgmlDecl+z).toUpperCase()===$?(Ce(E,"onopencdata"),E.state=V.CDATA,E.sgmlDecl="",E.cdata=""):E.sgmlDecl+z==="--"?(E.state=V.COMMENT,E.comment="",E.sgmlDecl=""):(E.sgmlDecl+z).toUpperCase()===de?(E.state=V.DOCTYPE,(E.doctype||E.sawRoot)&&Ee(E,"Inappropriately located doctype declaration"),E.doctype="",E.sgmlDecl=""):">"===z?(Ce(E,"onsgmldeclaration",E.sgmlDecl),E.sgmlDecl="",E.state=V.TEXT):(b(z)&&(E.state=V.SGML_DECL_QUOTED),E.sgmlDecl+=z);continue;case V.SGML_DECL_QUOTED:z===E.q&&(E.state=V.SGML_DECL,E.q=""),E.sgmlDecl+=z;continue;case V.DOCTYPE:">"===z?(E.state=V.TEXT,Ce(E,"ondoctype",E.doctype),E.doctype=!0):(E.doctype+=z,"["===z?E.state=V.DOCTYPE_DTD:b(z)&&(E.state=V.DOCTYPE_QUOTED,E.q=z));continue;case V.DOCTYPE_QUOTED:E.doctype+=z,z===E.q&&(E.q="",E.state=V.DOCTYPE);continue;case V.DOCTYPE_DTD:E.doctype+=z,"]"===z?E.state=V.DOCTYPE:b(z)&&(E.state=V.DOCTYPE_DTD_QUOTED,E.q=z);continue;case V.DOCTYPE_DTD_QUOTED:E.doctype+=z,z===E.q&&(E.state=V.DOCTYPE_DTD,E.q="");continue;case V.COMMENT:"-"===z?E.state=V.COMMENT_ENDING:E.comment+=z;continue;case V.COMMENT_ENDING:"-"===z?(E.state=V.COMMENT_ENDED,E.comment=ke(E.opt,E.comment),E.comment&&Ce(E,"oncomment",E.comment),E.comment=""):(E.comment+="-"+z,E.state=V.COMMENT);continue;case V.COMMENT_ENDED:">"!==z?(Ee(E,"Malformed comment"),E.comment+="--"+z,E.state=V.COMMENT):E.state=V.TEXT;continue;case V.CDATA:"]"===z?E.state=V.CDATA_ENDING:E.cdata+=z;continue;case V.CDATA_ENDING:"]"===z?E.state=V.CDATA_ENDING_2:(E.cdata+="]"+z,E.state=V.CDATA);continue;case V.CDATA_ENDING_2:">"===z?(E.cdata&&Ce(E,"oncdata",E.cdata),Ce(E,"onclosecdata"),E.cdata="",E.state=V.TEXT):"]"===z?E.cdata+="]":(E.cdata+="]]"+z,E.state=V.CDATA);continue;case V.PROC_INST:"?"===z?E.state=V.PROC_INST_ENDING:B(z)?E.state=V.PROC_INST_BODY:E.procInstName+=z;continue;case V.PROC_INST_BODY:if(!E.procInstBody&&B(z))continue;"?"===z?E.state=V.PROC_INST_ENDING:E.procInstBody+=z;continue;case V.PROC_INST_ENDING:">"===z?(Ce(E,"onprocessinginstruction",{name:E.procInstName,body:E.procInstBody}),E.procInstName=E.procInstBody="",E.state=V.TEXT):(E.procInstBody+="?"+z,E.state=V.PROC_INST_BODY);continue;case V.OPEN_TAG:C(oe,z)?E.tagName+=z:(Ne(E),">"===z?pe(E):"/"===z?E.state=V.OPEN_TAG_SLASH:(B(z)||Ee(E,"Invalid character in tag name"),E.state=V.ATTRIB));continue;case V.OPEN_TAG_SLASH:">"===z?(pe(E,!0),Ae(E)):(Ee(E,"Forward-slash in opening tag not followed by >"),E.state=V.ATTRIB);continue;case V.ATTRIB:if(B(z))continue;">"===z?pe(E):"/"===z?E.state=V.OPEN_TAG_SLASH:C(q,z)?(E.attribName=z,E.attribValue="",E.state=V.ATTRIB_NAME):Ee(E,"Invalid attribute name");continue;case V.ATTRIB_NAME:"="===z?E.state=V.ATTRIB_VALUE:">"===z?(Ee(E,"Attribute without value"),E.attribValue=E.attribName,He(E),pe(E)):B(z)?E.state=V.ATTRIB_NAME_SAW_WHITE:C(oe,z)?E.attribName+=z:Ee(E,"Invalid attribute name");continue;case V.ATTRIB_NAME_SAW_WHITE:if("="===z)E.state=V.ATTRIB_VALUE;else{if(B(z))continue;Ee(E,"Attribute without value"),E.tag.attributes[E.attribName]="",E.attribValue="",Ce(E,"onattribute",{name:E.attribName,value:""}),E.attribName="",">"===z?pe(E):C(q,z)?(E.attribName=z,E.state=V.ATTRIB_NAME):(Ee(E,"Invalid attribute name"),E.state=V.ATTRIB)}continue;case V.ATTRIB_VALUE:if(B(z))continue;b(z)?(E.q=z,E.state=V.ATTRIB_VALUE_QUOTED):(Ee(E,"Unquoted attribute value"),E.state=V.ATTRIB_VALUE_UNQUOTED,E.attribValue=z);continue;case V.ATTRIB_VALUE_QUOTED:if(z!==E.q){"&"===z?E.state=V.ATTRIB_VALUE_ENTITY_Q:E.attribValue+=z;continue}He(E),E.q="",E.state=V.ATTRIB_VALUE_CLOSED;continue;case V.ATTRIB_VALUE_CLOSED:B(z)?E.state=V.ATTRIB:">"===z?pe(E):"/"===z?E.state=V.OPEN_TAG_SLASH:C(q,z)?(Ee(E,"No whitespace between attributes"),E.attribName=z,E.attribValue="",E.state=V.ATTRIB_NAME):Ee(E,"Invalid attribute name");continue;case V.ATTRIB_VALUE_UNQUOTED:if(!O(z)){"&"===z?E.state=V.ATTRIB_VALUE_ENTITY_U:E.attribValue+=z;continue}He(E),">"===z?pe(E):E.state=V.ATTRIB;continue;case V.CLOSE_TAG:if(E.tagName)">"===z?Ae(E):C(oe,z)?E.tagName+=z:E.script?(E.script+="</"+E.tagName,E.tagName="",E.state=V.SCRIPT):(B(z)||Ee(E,"Invalid tagname in closing tag"),E.state=V.CLOSE_TAG_SAW_WHITE);else{if(B(z))continue;he(q,z)?E.script?(E.script+="</"+z,E.state=V.SCRIPT):Ee(E,"Invalid tagname in closing tag."):E.tagName=z}continue;case V.CLOSE_TAG_SAW_WHITE:if(B(z))continue;">"===z?Ae(E):Ee(E,"Invalid characters in closing tag");continue;case V.TEXT_ENTITY:case V.ATTRIB_VALUE_ENTITY_Q:case V.ATTRIB_VALUE_ENTITY_U:var ce,Z;switch(E.state){case V.TEXT_ENTITY:ce=V.TEXT,Z="textNode";break;case V.ATTRIB_VALUE_ENTITY_Q:ce=V.ATTRIB_VALUE_QUOTED,Z="attribValue";break;case V.ATTRIB_VALUE_ENTITY_U:ce=V.ATTRIB_VALUE_UNQUOTED,Z="attribValue"}";"===z?(E[Z]+=Ye(E),E.entity="",E.state=ce):C(E.entity.length?X:ne,z)?E.entity+=z:(Ee(E,"Invalid character in entity name"),E[Z]+="&"+E.entity+z,E.entity="",E.state=ce);continue;default:throw new Error(E,"Unknown state: "+E.state)}return E.position>=E.bufferCheckPosition&&function U(N){for(var E=Math.max(J.MAX_BUFFER_LENGTH,10),ie=0,z=0,Se=S.length;z<Se;z++){var tt=N[S[z]].length;if(tt>E)switch(S[z]){case"textNode":Re(N);break;case"cdata":Ce(N,"oncdata",N.cdata),N.cdata="";break;case"script":Ce(N,"onscript",N.script),N.script="";break;default:et(N,"Max buffer length exceeded: "+S[z])}ie=Math.max(ie,tt)}N.bufferCheckPosition=J.MAX_BUFFER_LENGTH-ie+N.position}(E),E},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(N){Re(N),""!==N.cdata&&(Ce(N,"oncdata",N.cdata),N.cdata=""),""!==N.script&&(Ce(N,"onscript",N.script),N.script="")}(this)}};try{x=T(1793).Stream}catch{x=function(){}}var F=J.EVENTS.filter(function(N){return"error"!==N&&"end"!==N});function R(N,E){if(!(this instanceof R))return new R(N,E);x.apply(this),this._parser=new te(N,E),this.writable=!0,this.readable=!0;var ie=this;this._parser.onend=function(){ie.emit("end")},this._parser.onerror=function(z){ie.emit("error",z),ie._parser.error=null},this._decoder=null,F.forEach(function(z){Object.defineProperty(ie,"on"+z,{get:function(){return ie._parser["on"+z]},set:function(Se){if(!Se)return ie.removeAllListeners(z),ie._parser["on"+z]=Se,Se;ie.on(z,Se)},enumerable:!0,configurable:!1})})}(R.prototype=Object.create(x.prototype,{constructor:{value:R}})).write=function(N){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(N)){if(!this._decoder){var E=T(2024).StringDecoder;this._decoder=new E("utf8")}N=this._decoder.write(N)}return this._parser.write(N.toString()),this.emit("data",N),!0},R.prototype.end=function(N){return N&&N.length&&this.write(N),this._parser.end(),!0},R.prototype.on=function(N,E){var ie=this;return!ie._parser["on"+N]&&-1!==F.indexOf(N)&&(ie._parser["on"+N]=function(){var z=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);z.splice(0,0,N),ie.emit.apply(ie,z)}),x.prototype.on.call(ie,N,E)};var $="[CDATA[",de="DOCTYPE",I="http://www.w3.org/XML/1998/namespace",H="http://www.w3.org/2000/xmlns/",ae={xml:I,xmlns:H},q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ne=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,X=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function B(N){return" "===N||"\n"===N||"\r"===N||"\t"===N}function b(N){return'"'===N||"'"===N}function O(N){return">"===N||B(N)}function C(N,E){return N.test(E)}function he(N,E){return!C(N,E)}var N,E,ie,V=0;for(var Te in J.STATE={BEGIN:V++,BEGIN_WHITESPACE:V++,TEXT:V++,TEXT_ENTITY:V++,OPEN_WAKA:V++,SGML_DECL:V++,SGML_DECL_QUOTED:V++,DOCTYPE:V++,DOCTYPE_QUOTED:V++,DOCTYPE_DTD:V++,DOCTYPE_DTD_QUOTED:V++,COMMENT_STARTING:V++,COMMENT:V++,COMMENT_ENDING:V++,COMMENT_ENDED:V++,CDATA:V++,CDATA_ENDING:V++,CDATA_ENDING_2:V++,PROC_INST:V++,PROC_INST_BODY:V++,PROC_INST_ENDING:V++,OPEN_TAG:V++,OPEN_TAG_SLASH:V++,ATTRIB:V++,ATTRIB_NAME:V++,ATTRIB_NAME_SAW_WHITE:V++,ATTRIB_VALUE:V++,ATTRIB_VALUE_QUOTED:V++,ATTRIB_VALUE_CLOSED:V++,ATTRIB_VALUE_UNQUOTED:V++,ATTRIB_VALUE_ENTITY_Q:V++,ATTRIB_VALUE_ENTITY_U:V++,CLOSE_TAG:V++,CLOSE_TAG_SAW_WHITE:V++,SCRIPT:V++,SCRIPT_ENDING:V++},J.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},J.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(J.ENTITIES).forEach(function(N){var E=J.ENTITIES[N],ie="number"==typeof E?String.fromCharCode(E):E;J.ENTITIES[N]=ie}),J.STATE)J.STATE[J.STATE[Te]]=Te;function se(N,E,ie){N[E]&&N[E](ie)}function Ce(N,E,ie){N.textNode&&Re(N),se(N,E,ie)}function Re(N){N.textNode=ke(N.opt,N.textNode),N.textNode&&se(N,"ontext",N.textNode),N.textNode=""}function ke(N,E){return N.trim&&(E=E.trim()),N.normalize&&(E=E.replace(/\s+/g," ")),E}function et(N,E){return Re(N),N.trackPosition&&(E+="\nLine: "+N.line+"\nColumn: "+N.column+"\nChar: "+N.c),E=new Error(E),N.error=E,se(N,"onerror",E),N}function qe(N){return N.sawRoot&&!N.closedRoot&&Ee(N,"Unclosed root tag"),N.state!==V.BEGIN&&N.state!==V.BEGIN_WHITESPACE&&N.state!==V.TEXT&&et(N,"Unexpected end"),Re(N),N.c="",N.closed=!0,se(N,"onend"),te.call(N,N.strict,N.opt),N}function Ee(N,E){if("object"!=typeof N||!(N instanceof te))throw new Error("bad call to strictFail");N.strict&&et(N,E)}function Ne(N){N.strict||(N.tagName=N.tagName[N.looseCase]());var E=N.tags[N.tags.length-1]||N,ie=N.tag={name:N.tagName,attributes:{}};N.opt.xmlns&&(ie.ns=E.ns),N.attribList.length=0,Ce(N,"onopentagstart",ie)}function Pe(N,E){var z=N.indexOf(":")<0?["",N]:N.split(":"),Se=z[0],tt=z[1];return E&&"xmlns"===N&&(Se="xmlns",tt=""),{prefix:Se,local:tt}}function He(N){if(N.strict||(N.attribName=N.attribName[N.looseCase]()),-1!==N.attribList.indexOf(N.attribName)||N.tag.attributes.hasOwnProperty(N.attribName))N.attribName=N.attribValue="";else{if(N.opt.xmlns){var E=Pe(N.attribName,!0),z=E.local;if("xmlns"===E.prefix)if("xml"===z&&N.attribValue!==I)Ee(N,"xml: prefix must be bound to "+I+"\nActual: "+N.attribValue);else if("xmlns"===z&&N.attribValue!==H)Ee(N,"xmlns: prefix must be bound to "+H+"\nActual: "+N.attribValue);else{var Se=N.tag,tt=N.tags[N.tags.length-1]||N;Se.ns===tt.ns&&(Se.ns=Object.create(tt.ns)),Se.ns[z]=N.attribValue}N.attribList.push([N.attribName,N.attribValue])}else N.tag.attributes[N.attribName]=N.attribValue,Ce(N,"onattribute",{name:N.attribName,value:N.attribValue});N.attribName=N.attribValue=""}}function pe(N,E){if(N.opt.xmlns){var ie=N.tag,z=Pe(N.tagName);ie.prefix=z.prefix,ie.local=z.local,ie.uri=ie.ns[z.prefix]||"",ie.prefix&&!ie.uri&&(Ee(N,"Unbound namespace prefix: "+JSON.stringify(N.tagName)),ie.uri=z.prefix),ie.ns&&(N.tags[N.tags.length-1]||N).ns!==ie.ns&&Object.keys(ie.ns).forEach(function(dt){Ce(N,"onopennamespace",{prefix:dt,uri:ie.ns[dt]})});for(var tt=0,ce=N.attribList.length;tt<ce;tt++){var Z=N.attribList[tt],L=Z[0],w=Z[1],M=Pe(L,!0),Q=M.prefix,ze=""===Q?"":ie.ns[Q]||"",Xe={name:L,value:w,prefix:Q,local:M.local,uri:ze};Q&&"xmlns"!==Q&&!ze&&(Ee(N,"Unbound namespace prefix: "+JSON.stringify(Q)),Xe.uri=Q),N.tag.attributes[L]=Xe,Ce(N,"onattribute",Xe)}N.attribList.length=0}N.tag.isSelfClosing=!!E,N.sawRoot=!0,N.tags.push(N.tag),Ce(N,"onopentag",N.tag),E||(N.state=N.noscript||"script"!==N.tagName.toLowerCase()?V.TEXT:V.SCRIPT,N.tag=null,N.tagName=""),N.attribName=N.attribValue="",N.attribList.length=0}function Ae(N){if(!N.tagName)return Ee(N,"Weird empty close tag."),N.textNode+="</>",void(N.state=V.TEXT);if(N.script){if("script"!==N.tagName)return N.script+="</"+N.tagName+">",N.tagName="",void(N.state=V.SCRIPT);Ce(N,"onscript",N.script),N.script=""}var E=N.tags.length,ie=N.tagName;N.strict||(ie=ie[N.looseCase]());for(var z=ie;E--&&N.tags[E].name!==z;)Ee(N,"Unexpected close tag");if(E<0)return Ee(N,"Unmatched closing tag: "+N.tagName),N.textNode+="</"+N.tagName+">",void(N.state=V.TEXT);N.tagName=ie;for(var tt=N.tags.length;tt-- >E;){var ce=N.tag=N.tags.pop();N.tagName=N.tag.name,Ce(N,"onclosetag",N.tagName);var Z={};for(var L in ce.ns)Z[L]=ce.ns[L];N.opt.xmlns&&ce.ns!==(N.tags[N.tags.length-1]||N).ns&&Object.keys(ce.ns).forEach(function(M){Ce(N,"onclosenamespace",{prefix:M,uri:ce.ns[M]})})}0===E&&(N.closedRoot=!0),N.tagName=N.attribValue=N.attribName="",N.attribList.length=0,N.state=V.TEXT}function Ye(N){var z,E=N.entity,ie=E.toLowerCase(),Se="";return N.ENTITIES[E]?N.ENTITIES[E]:N.ENTITIES[ie]?N.ENTITIES[ie]:("#"===(E=ie).charAt(0)&&("x"===E.charAt(1)?(E=E.slice(2),Se=(z=parseInt(E,16)).toString(16)):(E=E.slice(1),Se=(z=parseInt(E,10)).toString(10))),E=E.replace(/^0+/,""),isNaN(z)||Se.toLowerCase()!==E?(Ee(N,"Invalid character entity"),"&"+N.entity+";"):String.fromCodePoint(z))}function st(N,E){"<"===E?(N.state=V.OPEN_WAKA,N.startTagPosition=N.position):B(E)||(Ee(N,"Non-whitespace before first tag."),N.textNode=E,N.state=V.TEXT)}function Ze(N,E){var ie="";return E<N.length&&(ie=N.charAt(E)),ie}V=J.STATE,String.fromCodePoint||(N=String.fromCharCode,E=Math.floor,ie=function(){var Se=[],Z=-1,L=arguments.length;if(!L)return"";for(var w="";++Z<L;){var M=Number(arguments[Z]);if(!isFinite(M)||M<0||M>1114111||E(M)!==M)throw RangeError("Invalid code point: "+M);M<=65535?Se.push(M):Se.push(55296+((M-=65536)>>10),M%1024+56320),(Z+1===L||Se.length>16384)&&(w+=N.apply(null,Se),Se.length=0)}return w},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ie,configurable:!0,writable:!0}):String.fromCodePoint=ie)}(_e)},8280:function(){!function(Ue,_e){"use strict";if(!Ue.setImmediate){var U,T=1,J={},S=!1,te=Ue.document,ae=Object.getPrototypeOf&&Object.getPrototypeOf(Ue);ae=ae&&ae.setTimeout?ae:Ue,"[object process]"==={}.toString.call(Ue.process)?function W(){U=function(q){process.nextTick(function(){F(q)})}}():function R(){if(Ue.postMessage&&!Ue.importScripts){var q=!0,oe=Ue.onmessage;return Ue.onmessage=function(){q=!1},Ue.postMessage("","*"),Ue.onmessage=oe,q}}()?function $(){var q="setImmediate$"+Math.random()+"$",oe=function(ne){ne.source===Ue&&"string"==typeof ne.data&&0===ne.data.indexOf(q)&&F(+ne.data.slice(q.length))};Ue.addEventListener?Ue.addEventListener("message",oe,!1):Ue.attachEvent("onmessage",oe),U=function(ne){Ue.postMessage(q+ne,"*")}}():Ue.MessageChannel?function de(){var q=new MessageChannel;q.port1.onmessage=function(oe){F(oe.data)},U=function(oe){q.port2.postMessage(oe)}}():te&&"onreadystatechange"in te.createElement("script")?function I(){var q=te.documentElement;U=function(oe){var ne=te.createElement("script");ne.onreadystatechange=function(){F(oe),ne.onreadystatechange=null,q.removeChild(ne),ne=null},q.appendChild(ne)}}():function H(){U=function(q){setTimeout(F,0,q)}}(),ae.setImmediate=function ee(q){"function"!=typeof q&&(q=new Function(""+q));for(var oe=new Array(arguments.length-1),ne=0;ne<oe.length;ne++)oe[ne]=arguments[ne+1];return J[T]={callback:q,args:oe},U(T),T++},ae.clearImmediate=_}function _(q){delete J[q]}function F(q){if(S)setTimeout(F,0,q);else{var oe=J[q];if(oe){S=!0;try{!function x(q){var oe=q.callback,ne=q.args;switch(ne.length){case 0:oe();break;case 1:oe(ne[0]);break;case 2:oe(ne[0],ne[1]);break;case 3:oe(ne[0],ne[1],ne[2]);break;default:oe.apply(undefined,ne)}}(oe)}finally{_(q),S=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(Ue,_e,T)=>{Ue.exports=te;var J=T(2016).EventEmitter;function te(){J.call(this)}T(6698)(te,J),te.Readable=T(842),te.Writable=T(7597),te.Duplex=T(2232),te.Transform=T(555),te.PassThrough=T(8226),te.finished=T(1227),te.pipeline=T(2345),te.Stream=te,te.prototype.pipe=function(U,ee){var _=this;function x(H){U.writable&&!1===U.write(H)&&_.pause&&_.pause()}function F(){_.readable&&_.resume&&_.resume()}_.on("data",x),U.on("drain",F),!U._isStdio&&(!ee||!1!==ee.end)&&(_.on("end",R),_.on("close",$));var W=!1;function R(){W||(W=!0,U.end())}function $(){W||(W=!0,"function"==typeof U.destroy&&U.destroy())}function de(H){if(I(),0===J.listenerCount(this,"error"))throw H}function I(){_.removeListener("data",x),U.removeListener("drain",F),_.removeListener("end",R),_.removeListener("close",$),_.removeListener("error",de),U.removeListener("error",de),_.removeListener("end",I),_.removeListener("close",I),U.removeListener("close",I)}return _.on("error",de),U.on("error",de),_.on("end",I),_.on("close",I),U.on("close",I),U.emit("pipe",_),U}},9555:Ue=>{"use strict";var T={};function J(_,x,F){F||(F=Error);var R=function($){function de(I,H,ae){return $.call(this,function W($,de,I){return"string"==typeof x?x:x($,de,I)}(I,H,ae))||this}return function _e(_,x){_.prototype=Object.create(x.prototype),_.prototype.constructor=_,_.__proto__=x}(de,$),de}(F);R.prototype.name=F.name,R.prototype.code=_,T[_]=R}function S(_,x){if(Array.isArray(_)){var F=_.length;return _=_.map(function(W){return String(W)}),F>2?"one of ".concat(x," ").concat(_.slice(0,F-1).join(", "),", or ")+_[F-1]:2===F?"one of ".concat(x," ").concat(_[0]," or ").concat(_[1]):"of ".concat(x," ").concat(_[0])}return"of ".concat(x," ").concat(String(_))}J("ERR_INVALID_OPT_VALUE",function(_,x){return'The value "'+x+'" is invalid for option "'+_+'"'},TypeError),J("ERR_INVALID_ARG_TYPE",function(_,x,F){var W,R;if("string"==typeof x&&function te(_,x,F){return _.substr(!F||F<0?0:+F,x.length)===x}(x,"not ")?(W="must not be",x=x.replace(/^not /,"")):W="must be",function U(_,x,F){return(void 0===F||F>_.length)&&(F=_.length),_.substring(F-x.length,F)===x}(_," argument"))R="The ".concat(_," ").concat(W," ").concat(S(x,"type"));else{var $=function ee(_,x,F){return"number"!=typeof F&&(F=0),!(F+x.length>_.length)&&-1!==_.indexOf(x,F)}(_,".")?"property":"argument";R='The "'.concat(_,'" ').concat($," ").concat(W," ").concat(S(x,"type"))}return R+". Received type ".concat(typeof F)},TypeError),J("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),J("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),J("ERR_STREAM_PREMATURE_CLOSE","Premature close"),J("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),J("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),J("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),J("ERR_STREAM_WRITE_AFTER_END","write after end"),J("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),J("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),J("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ue.exports.q=T},2232:(Ue,_e,T)=>{"use strict";var J=Object.keys||function(R){var $=[];for(var de in R)$.push(de);return $};Ue.exports=x;var S=T(842),te=T(7597);T(6698)(x,S);for(var U=J(te.prototype),ee=0;ee<U.length;ee++){var _=U[ee];x.prototype[_]||(x.prototype[_]=te.prototype[_])}function x(R){if(!(this instanceof x))return new x(R);S.call(this,R),te.call(this,R),this.allowHalfOpen=!0,R&&(!1===R.readable&&(this.readable=!1),!1===R.writable&&(this.writable=!1),!1===R.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",F)))}function F(){this._writableState.ended||process.nextTick(W,this)}function W(R){R.end()}Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function($){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=$,this._writableState.destroyed=$)}})},8226:(Ue,_e,T)=>{"use strict";Ue.exports=S;var J=T(555);function S(te){if(!(this instanceof S))return new S(te);J.call(this,te)}T(6698)(S,J),S.prototype._transform=function(te,U,ee){ee(null,te)}},842:(Ue,_e,T)=>{"use strict";var J;Ue.exports=se,se.ReadableState=Te,T(2016);var R,te=function(Z,L){return Z.listeners(L).length},U=T(3951),ee=T(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},W=T(964);R=W&&W.debuglog?W.debuglog("stream"):function(){};var B,b,O,$=T(2998),de=T(3992),H=T(4962).getHighWaterMark,ae=T(9555).q,q=ae.ERR_INVALID_ARG_TYPE,oe=ae.ERR_STREAM_PUSH_AFTER_EOF,ne=ae.ERR_METHOD_NOT_IMPLEMENTED,X=ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;T(6698)(se,U);var C=de.errorOrDestroy,he=["error","close","destroy","pause","resume"];function Te(ce,Z,L){J=J||T(2232),"boolean"!=typeof L&&(L=Z instanceof J),this.objectMode=!!(ce=ce||{}).objectMode,L&&(this.objectMode=this.objectMode||!!ce.readableObjectMode),this.highWaterMark=H(this,ce,"readableHighWaterMark",L),this.buffer=new $,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ce.emitClose,this.autoDestroy=!!ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ce.encoding&&(B||(B=T(2024).StringDecoder),this.decoder=new B(ce.encoding),this.encoding=ce.encoding)}function se(ce){if(J=J||T(2232),!(this instanceof se))return new se(ce);this._readableState=new Te(ce,this,this instanceof J),this.readable=!0,ce&&("function"==typeof ce.read&&(this._read=ce.read),"function"==typeof ce.destroy&&(this._destroy=ce.destroy)),U.call(this)}function Ce(ce,Z,L,w,M){R("readableAddChunk",Z);var fe,Q=ce._readableState;if(null===Z)Q.reading=!1,function Ne(ce,Z){if(R("onEofChunk"),!Z.ended){if(Z.decoder){var L=Z.decoder.end();L&&L.length&&(Z.buffer.push(L),Z.length+=Z.objectMode?1:L.length)}Z.ended=!0,Z.sync?Pe(ce):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,He(ce)))}}(ce,Q);else if(M||(fe=function ke(ce,Z){var L;return!function F(ce){return ee.isBuffer(ce)||ce instanceof _}(Z)&&"string"!=typeof Z&&void 0!==Z&&!ce.objectMode&&(L=new q("chunk",["string","Buffer","Uint8Array"],Z)),L}(Q,Z)),fe)C(ce,fe);else if(Q.objectMode||Z&&Z.length>0)if("string"!=typeof Z&&!Q.objectMode&&Object.getPrototypeOf(Z)!==ee.prototype&&(Z=function x(ce){return ee.from(ce)}(Z)),w)Q.endEmitted?C(ce,new X):Re(ce,Q,Z,!0);else if(Q.ended)C(ce,new oe);else{if(Q.destroyed)return!1;Q.reading=!1,Q.decoder&&!L?(Z=Q.decoder.write(Z),Q.objectMode||0!==Z.length?Re(ce,Q,Z,!1):pe(ce,Q)):Re(ce,Q,Z,!1)}else w||(Q.reading=!1,pe(ce,Q));return!Q.ended&&(Q.length<Q.highWaterMark||0===Q.length)}function Re(ce,Z,L,w){Z.flowing&&0===Z.length&&!Z.sync?(Z.awaitDrain=0,ce.emit("data",L)):(Z.length+=Z.objectMode?1:L.length,w?Z.buffer.unshift(L):Z.buffer.push(L),Z.needReadable&&Pe(ce)),pe(ce,Z)}Object.defineProperty(se.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Z){this._readableState&&(this._readableState.destroyed=Z)}}),se.prototype.destroy=de.destroy,se.prototype._undestroy=de.undestroy,se.prototype._destroy=function(ce,Z){Z(ce)},se.prototype.push=function(ce,Z){var w,L=this._readableState;return L.objectMode?w=!0:"string"==typeof ce&&((Z=Z||L.defaultEncoding)!==L.encoding&&(ce=ee.from(ce,Z),Z=""),w=!0),Ce(this,ce,Z,!1,w)},se.prototype.unshift=function(ce){return Ce(this,ce,null,!0,!1)},se.prototype.isPaused=function(){return!1===this._readableState.flowing},se.prototype.setEncoding=function(ce){B||(B=T(2024).StringDecoder);var Z=new B(ce);this._readableState.decoder=Z,this._readableState.encoding=this._readableState.decoder.encoding;for(var L=this._readableState.buffer.head,w="";null!==L;)w+=Z.write(L.data),L=L.next;return this._readableState.buffer.clear(),""!==w&&this._readableState.buffer.push(w),this._readableState.length=w.length,this};var et=1073741824;function Ee(ce,Z){return ce<=0||0===Z.length&&Z.ended?0:Z.objectMode?1:ce!=ce?Z.flowing&&Z.length?Z.buffer.head.data.length:Z.length:(ce>Z.highWaterMark&&(Z.highWaterMark=function qe(ce){return ce>=et?ce=et:(ce--,ce|=ce>>>1,ce|=ce>>>2,ce|=ce>>>4,ce|=ce>>>8,ce|=ce>>>16,ce++),ce}(ce)),ce<=Z.length?ce:Z.ended?Z.length:(Z.needReadable=!0,0))}function Pe(ce){var Z=ce._readableState;R("emitReadable",Z.needReadable,Z.emittedReadable),Z.needReadable=!1,Z.emittedReadable||(R("emitReadable",Z.flowing),Z.emittedReadable=!0,process.nextTick(He,ce))}function He(ce){var Z=ce._readableState;R("emitReadable_",Z.destroyed,Z.length,Z.ended),!Z.destroyed&&(Z.length||Z.ended)&&(ce.emit("readable"),Z.emittedReadable=!1),Z.needReadable=!Z.flowing&&!Z.ended&&Z.length<=Z.highWaterMark,E(ce)}function pe(ce,Z){Z.readingMore||(Z.readingMore=!0,process.nextTick(Ae,ce,Z))}function Ae(ce,Z){for(;!Z.reading&&!Z.ended&&(Z.length<Z.highWaterMark||Z.flowing&&0===Z.length);){var L=Z.length;if(R("maybeReadMore read 0"),ce.read(0),L===Z.length)break}Z.readingMore=!1}function st(ce){var Z=ce._readableState;Z.readableListening=ce.listenerCount("readable")>0,Z.resumeScheduled&&!Z.paused?Z.flowing=!0:ce.listenerCount("data")>0&&ce.resume()}function Ze(ce){R("readable nexttick read 0"),ce.read(0)}function N(ce,Z){R("resume",Z.reading),Z.reading||ce.read(0),Z.resumeScheduled=!1,ce.emit("resume"),E(ce),Z.flowing&&!Z.reading&&ce.read(0)}function E(ce){var Z=ce._readableState;for(R("flow",Z.flowing);Z.flowing&&null!==ce.read(););}function ie(ce,Z){return 0===Z.length?null:(Z.objectMode?L=Z.buffer.shift():!ce||ce>=Z.length?(L=Z.decoder?Z.buffer.join(""):1===Z.buffer.length?Z.buffer.first():Z.buffer.concat(Z.length),Z.buffer.clear()):L=Z.buffer.consume(ce,Z.decoder),L);var L}function z(ce){var Z=ce._readableState;R("endReadable",Z.endEmitted),Z.endEmitted||(Z.ended=!0,process.nextTick(Se,Z,ce))}function Se(ce,Z){if(R("endReadableNT",ce.endEmitted,ce.length),!ce.endEmitted&&0===ce.length&&(ce.endEmitted=!0,Z.readable=!1,Z.emit("end"),ce.autoDestroy)){var L=Z._writableState;(!L||L.autoDestroy&&L.finished)&&Z.destroy()}}function tt(ce,Z){for(var L=0,w=ce.length;L<w;L++)if(ce[L]===Z)return L;return-1}se.prototype.read=function(ce){R("read",ce),ce=parseInt(ce,10);var Z=this._readableState,L=ce;if(0!==ce&&(Z.emittedReadable=!1),0===ce&&Z.needReadable&&((0!==Z.highWaterMark?Z.length>=Z.highWaterMark:Z.length>0)||Z.ended))return R("read: emitReadable",Z.length,Z.ended),0===Z.length&&Z.ended?z(this):Pe(this),null;if(0===(ce=Ee(ce,Z))&&Z.ended)return 0===Z.length&&z(this),null;var M,w=Z.needReadable;return R("need readable",w),(0===Z.length||Z.length-ce<Z.highWaterMark)&&R("length less than watermark",w=!0),Z.ended||Z.reading?R("reading or ended",w=!1):w&&(R("do read"),Z.reading=!0,Z.sync=!0,0===Z.length&&(Z.needReadable=!0),this._read(Z.highWaterMark),Z.sync=!1,Z.reading||(ce=Ee(L,Z))),null===(M=ce>0?ie(ce,Z):null)?(Z.needReadable=Z.length<=Z.highWaterMark,ce=0):(Z.length-=ce,Z.awaitDrain=0),0===Z.length&&(Z.ended||(Z.needReadable=!0),L!==ce&&Z.ended&&z(this)),null!==M&&this.emit("data",M),M},se.prototype._read=function(ce){C(this,new ne("_read()"))},se.prototype.pipe=function(ce,Z){var L=this,w=this._readableState;switch(w.pipesCount){case 0:w.pipes=ce;break;case 1:w.pipes=[w.pipes,ce];break;default:w.pipes.push(ce)}w.pipesCount+=1,R("pipe count=%d opts=%j",w.pipesCount,Z);var Q=Z&&!1===Z.end||ce===process.stdout||ce===process.stderr?G:ze;function ze(){R("onend"),ce.end()}w.endEmitted?process.nextTick(Q):L.once("end",Q),ce.on("unpipe",function fe(v,re){R("onunpipe"),v===L&&re&&!1===re.hasUnpiped&&(re.hasUnpiped=!0,function mt(){R("cleanup"),ce.removeListener("close",on),ce.removeListener("finish",Ie),ce.removeListener("drain",Xe),ce.removeListener("error",zt),ce.removeListener("unpipe",fe),L.removeListener("end",ze),L.removeListener("end",G),L.removeListener("data",gt),dt=!0,w.awaitDrain&&(!ce._writableState||ce._writableState.needDrain)&&Xe()}())});var Xe=function Ye(ce){return function(){var L=ce._readableState;R("pipeOnDrain",L.awaitDrain),L.awaitDrain&&L.awaitDrain--,0===L.awaitDrain&&te(ce,"data")&&(L.flowing=!0,E(ce))}}(L);ce.on("drain",Xe);var dt=!1;function gt(v){R("ondata");var re=ce.write(v);R("dest.write",re),!1===re&&((1===w.pipesCount&&w.pipes===ce||w.pipesCount>1&&-1!==tt(w.pipes,ce))&&!dt&&(R("false write response, pause",w.awaitDrain),w.awaitDrain++),L.pause())}function zt(v){R("onerror",v),G(),ce.removeListener("error",zt),0===te(ce,"error")&&C(ce,v)}function on(){ce.removeListener("finish",Ie),G()}function Ie(){R("onfinish"),ce.removeListener("close",on),G()}function G(){R("unpipe"),L.unpipe(ce)}return L.on("data",gt),function V(ce,Z,L){if("function"==typeof ce.prependListener)return ce.prependListener(Z,L);ce._events&&ce._events[Z]?Array.isArray(ce._events[Z])?ce._events[Z].unshift(L):ce._events[Z]=[L,ce._events[Z]]:ce.on(Z,L)}(ce,"error",zt),ce.once("close",on),ce.once("finish",Ie),ce.emit("pipe",L),w.flowing||(R("pipe resume"),L.resume()),ce},se.prototype.unpipe=function(ce){var Z=this._readableState,L={hasUnpiped:!1};if(0===Z.pipesCount)return this;if(1===Z.pipesCount)return ce&&ce!==Z.pipes||(ce||(ce=Z.pipes),Z.pipes=null,Z.pipesCount=0,Z.flowing=!1,ce&&ce.emit("unpipe",this,L)),this;if(!ce){var w=Z.pipes,M=Z.pipesCount;Z.pipes=null,Z.pipesCount=0,Z.flowing=!1;for(var Q=0;Q<M;Q++)w[Q].emit("unpipe",this,{hasUnpiped:!1});return this}var fe=tt(Z.pipes,ce);return-1===fe||(Z.pipes.splice(fe,1),Z.pipesCount-=1,1===Z.pipesCount&&(Z.pipes=Z.pipes[0]),ce.emit("unpipe",this,L)),this},se.prototype.addListener=se.prototype.on=function(ce,Z){var L=U.prototype.on.call(this,ce,Z),w=this._readableState;return"data"===ce?(w.readableListening=this.listenerCount("readable")>0,!1!==w.flowing&&this.resume()):"readable"===ce&&!w.endEmitted&&!w.readableListening&&(w.readableListening=w.needReadable=!0,w.flowing=!1,w.emittedReadable=!1,R("on readable",w.length,w.reading),w.length?Pe(this):w.reading||process.nextTick(Ze,this)),L},se.prototype.removeListener=function(ce,Z){var L=U.prototype.removeListener.call(this,ce,Z);return"readable"===ce&&process.nextTick(st,this),L},se.prototype.removeAllListeners=function(ce){var Z=U.prototype.removeAllListeners.apply(this,arguments);return("readable"===ce||void 0===ce)&&process.nextTick(st,this),Z},se.prototype.resume=function(){var ce=this._readableState;return ce.flowing||(R("resume"),ce.flowing=!ce.readableListening,function le(ce,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,process.nextTick(N,ce,Z))}(this,ce)),ce.paused=!1,this},se.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},se.prototype.wrap=function(ce){var Z=this,L=this._readableState,w=!1;for(var M in ce.on("end",function(){if(R("wrapped end"),L.decoder&&!L.ended){var fe=L.decoder.end();fe&&fe.length&&Z.push(fe)}Z.push(null)}),ce.on("data",function(fe){R("wrapped data"),L.decoder&&(fe=L.decoder.write(fe)),L.objectMode&&null==fe||!(L.objectMode||fe&&fe.length)||Z.push(fe)||(w=!0,ce.pause())}),ce)void 0===this[M]&&"function"==typeof ce[M]&&(this[M]=function(ze){return function(){return ce[ze].apply(ce,arguments)}}(M));for(var Q=0;Q<he.length;Q++)ce.on(he[Q],this.emit.bind(this,he[Q]));return this._read=function(fe){R("wrapped _read",fe),w&&(w=!1,ce.resume())},this},"function"==typeof Symbol&&(se.prototype[Symbol.asyncIterator]=function(){return void 0===b&&(b=T(2590)),b(this)}),Object.defineProperty(se.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(se.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(se.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Z){this._readableState&&(this._readableState.flowing=Z)}}),se._fromList=ie,Object.defineProperty(se.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(se.from=function(ce,Z){return void 0===O&&(O=T(5374)),O(se,ce,Z)})},555:(Ue,_e,T)=>{"use strict";Ue.exports=F;var J=T(9555).q,S=J.ERR_METHOD_NOT_IMPLEMENTED,te=J.ERR_MULTIPLE_CALLBACK,U=J.ERR_TRANSFORM_ALREADY_TRANSFORMING,ee=J.ERR_TRANSFORM_WITH_LENGTH_0,_=T(2232);function x($,de){var I=this._transformState;I.transforming=!1;var H=I.writecb;if(null===H)return this.emit("error",new te);I.writechunk=null,I.writecb=null,null!=de&&this.push(de),H($);var ae=this._readableState;ae.reading=!1,(ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}function F($){if(!(this instanceof F))return new F($);_.call(this,$),this._transformState={afterTransform:x.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,$&&("function"==typeof $.transform&&(this._transform=$.transform),"function"==typeof $.flush&&(this._flush=$.flush)),this.on("prefinish",W)}function W(){var $=this;"function"!=typeof this._flush||this._readableState.destroyed?R(this,null,null):this._flush(function(de,I){R($,de,I)})}function R($,de,I){if(de)return $.emit("error",de);if(null!=I&&$.push(I),$._writableState.length)throw new ee;if($._transformState.transforming)throw new U;return $.push(null)}T(6698)(F,_),F.prototype.push=function($,de){return this._transformState.needTransform=!1,_.prototype.push.call(this,$,de)},F.prototype._transform=function($,de,I){I(new S("_transform()"))},F.prototype._write=function($,de,I){var H=this._transformState;if(H.writecb=I,H.writechunk=$,H.writeencoding=de,!H.transforming){var ae=this._readableState;(H.needTransform||ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}},F.prototype._read=function($){var de=this._transformState;null===de.writechunk||de.transforming?de.needTransform=!0:(de.transforming=!0,this._transform(de.writechunk,de.writeencoding,de.afterTransform))},F.prototype._destroy=function($,de){_.prototype._destroy.call(this,$,function(I){de(I)})}},7597:(Ue,_e,T)=>{"use strict";function S(E){var ie=this;this.next=null,this.entry=null,this.finish=function(){!function N(E,ie,z){var Se=E.entry;for(E.entry=null;Se;){var tt=Se.callback;ie.pendingcb--,tt(z),Se=Se.next}ie.corkedRequestsFree.next=E}(ie,E)}}var te;Ue.exports=Te,Te.WritableState=he;var V,U={deprecate:T(496)},ee=T(3951),_=T(9007).Buffer,x=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},R=T(3992),de=T(4962).getHighWaterMark,I=T(9555).q,H=I.ERR_INVALID_ARG_TYPE,ae=I.ERR_METHOD_NOT_IMPLEMENTED,q=I.ERR_MULTIPLE_CALLBACK,oe=I.ERR_STREAM_CANNOT_PIPE,ne=I.ERR_STREAM_DESTROYED,X=I.ERR_STREAM_NULL_VALUES,B=I.ERR_STREAM_WRITE_AFTER_END,b=I.ERR_UNKNOWN_ENCODING,O=R.errorOrDestroy;function C(){}function he(E,ie,z){te=te||T(2232),"boolean"!=typeof z&&(z=ie instanceof te),this.objectMode=!!(E=E||{}).objectMode,z&&(this.objectMode=this.objectMode||!!E.writableObjectMode),this.highWaterMark=de(this,E,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===E.decodeStrings),this.defaultEncoding=E.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(tt){!function Ne(E,ie){var z=E._writableState,Se=z.sync,tt=z.writecb;if("function"!=typeof tt)throw new q;if(function Ee(E){E.writing=!1,E.writecb=null,E.length-=E.writelen,E.writelen=0}(z),ie)!function qe(E,ie,z,Se,tt){--ie.pendingcb,z?(process.nextTick(tt,Se),process.nextTick(Ze,E,ie),E._writableState.errorEmitted=!0,O(E,Se)):(tt(Se),E._writableState.errorEmitted=!0,O(E,Se),Ze(E,ie))}(E,z,Se,ie,tt);else{var ce=Ae(z)||E.destroyed;!ce&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&pe(E,z),Se?process.nextTick(Pe,E,z,ce,tt):Pe(E,z,ce,tt)}}(ie,tt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==E.emitClose,this.autoDestroy=!!E.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}function Te(E){var ie=this instanceof(te=te||T(2232));if(!ie&&!V.call(Te,this))return new Te(E);this._writableState=new he(E,this,ie),this.writable=!0,E&&("function"==typeof E.write&&(this._write=E.write),"function"==typeof E.writev&&(this._writev=E.writev),"function"==typeof E.destroy&&(this._destroy=E.destroy),"function"==typeof E.final&&(this._final=E.final)),ee.call(this)}function et(E,ie,z,Se,tt,ce,Z){ie.writelen=Se,ie.writecb=Z,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new ne("write")):z?E._writev(tt,ie.onwrite):E._write(tt,ce,ie.onwrite),ie.sync=!1}function Pe(E,ie,z,Se){z||function He(E,ie){0===ie.length&&ie.needDrain&&(ie.needDrain=!1,E.emit("drain"))}(E,ie),ie.pendingcb--,Se(),Ze(E,ie)}function pe(E,ie){ie.bufferProcessing=!0;var z=ie.bufferedRequest;if(E._writev&&z&&z.next){var tt=new Array(ie.bufferedRequestCount),ce=ie.corkedRequestsFree;ce.entry=z;for(var Z=0,L=!0;z;)tt[Z]=z,z.isBuf||(L=!1),z=z.next,Z+=1;tt.allBuffers=L,et(E,ie,!0,ie.length,tt,"",ce.finish),ie.pendingcb++,ie.lastBufferedRequest=null,ce.next?(ie.corkedRequestsFree=ce.next,ce.next=null):ie.corkedRequestsFree=new S(ie),ie.bufferedRequestCount=0}else{for(;z;){var w=z.chunk;if(et(E,ie,!1,ie.objectMode?1:w.length,w,z.encoding,z.callback),z=z.next,ie.bufferedRequestCount--,ie.writing)break}null===z&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=z,ie.bufferProcessing=!1}function Ae(E){return E.ending&&0===E.length&&null===E.bufferedRequest&&!E.finished&&!E.writing}function Ye(E,ie){E._final(function(z){ie.pendingcb--,z&&O(E,z),ie.prefinished=!0,E.emit("prefinish"),Ze(E,ie)})}function Ze(E,ie){var z=Ae(ie);if(z&&(function st(E,ie){!ie.prefinished&&!ie.finalCalled&&("function"!=typeof E._final||ie.destroyed?(ie.prefinished=!0,E.emit("prefinish")):(ie.pendingcb++,ie.finalCalled=!0,process.nextTick(Ye,E,ie)))}(E,ie),0===ie.pendingcb&&(ie.finished=!0,E.emit("finish"),ie.autoDestroy))){var Se=E._readableState;(!Se||Se.autoDestroy&&Se.endEmitted)&&E.destroy()}return z}T(6698)(Te,ee),he.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,z=[];ie;)z.push(ie),ie=ie.next;return z},function(){try{Object.defineProperty(he.prototype,"buffer",{get:U.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(V=Function.prototype[Symbol.hasInstance],Object.defineProperty(Te,Symbol.hasInstance,{value:function(ie){return!!V.call(this,ie)||this===Te&&ie&&ie._writableState instanceof he}})):V=function(ie){return ie instanceof this},Te.prototype.pipe=function(){O(this,new oe)},Te.prototype.write=function(E,ie,z){var Se=this._writableState,tt=!1,ce=!Se.objectMode&&function W(E){return _.isBuffer(E)||E instanceof x}(E);return ce&&!_.isBuffer(E)&&(E=function F(E){return _.from(E)}(E)),"function"==typeof ie&&(z=ie,ie=null),ce?ie="buffer":ie||(ie=Se.defaultEncoding),"function"!=typeof z&&(z=C),Se.ending?function se(E,ie){var z=new B;O(E,z),process.nextTick(ie,z)}(this,z):(ce||function Ce(E,ie,z,Se){var tt;return null===z?tt=new X:"string"!=typeof z&&!ie.objectMode&&(tt=new H("chunk",["string","Buffer"],z)),!tt||(O(E,tt),process.nextTick(Se,tt),!1)}(this,Se,E,z))&&(Se.pendingcb++,tt=function ke(E,ie,z,Se,tt,ce){if(!z){var Z=function Re(E,ie,z){return!E.objectMode&&!1!==E.decodeStrings&&"string"==typeof ie&&(ie=_.from(ie,z)),ie}(ie,Se,tt);Se!==Z&&(z=!0,tt="buffer",Se=Z)}var L=ie.objectMode?1:Se.length;ie.length+=L;var w=ie.length<ie.highWaterMark;if(w||(ie.needDrain=!0),ie.writing||ie.corked){var M=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:Se,encoding:tt,isBuf:z,callback:ce,next:null},M?M.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else et(E,ie,!1,L,Se,tt,ce);return w}(this,Se,ce,E,ie,z)),tt},Te.prototype.cork=function(){this._writableState.corked++},Te.prototype.uncork=function(){var E=this._writableState;E.corked&&(E.corked--,!E.writing&&!E.corked&&!E.bufferProcessing&&E.bufferedRequest&&pe(this,E))},Te.prototype.setDefaultEncoding=function(ie){if("string"==typeof ie&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new b(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(Te.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Te.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Te.prototype._write=function(E,ie,z){z(new ae("_write()"))},Te.prototype._writev=null,Te.prototype.end=function(E,ie,z){var Se=this._writableState;return"function"==typeof E?(z=E,E=null,ie=null):"function"==typeof ie&&(z=ie,ie=null),null!=E&&this.write(E,ie),Se.corked&&(Se.corked=1,this.uncork()),Se.ending||function le(E,ie,z){ie.ending=!0,Ze(E,ie),z&&(ie.finished?process.nextTick(z):E.once("finish",z)),ie.ended=!0,E.writable=!1}(this,Se,z),this},Object.defineProperty(Te.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Te.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),Te.prototype.destroy=R.destroy,Te.prototype._undestroy=R.undestroy,Te.prototype._destroy=function(E,ie){ie(E)}},2590:(Ue,_e,T)=>{"use strict";var J;function S(B,b,O){return b=function te(B){var b=function U(B,b){if("object"!=typeof B||null===B)return B;var O=B[Symbol.toPrimitive];if(void 0!==O){var C=O.call(B,b||"default");if("object"!=typeof C)return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(B)}(B,"string");return"symbol"==typeof b?b:String(b)}(b),b in B?Object.defineProperty(B,b,{value:O,enumerable:!0,configurable:!0,writable:!0}):B[b]=O,B}var ee=T(1227),_=Symbol("lastResolve"),x=Symbol("lastReject"),F=Symbol("error"),W=Symbol("ended"),R=Symbol("lastPromise"),$=Symbol("handlePromise"),de=Symbol("stream");function I(B,b){return{value:B,done:b}}function H(B){var b=B[_];if(null!==b){var O=B[de].read();null!==O&&(B[R]=null,B[_]=null,B[x]=null,b(I(O,!1)))}}function ae(B){process.nextTick(H,B)}var oe=Object.getPrototypeOf(function(){}),ne=Object.setPrototypeOf((S(J={get stream(){return this[de]},next:function(){var b=this,O=this[F];if(null!==O)return Promise.reject(O);if(this[W])return Promise.resolve(I(void 0,!0));if(this[de].destroyed)return new Promise(function(Te,se){process.nextTick(function(){b[F]?se(b[F]):Te(I(void 0,!0))})});var he,C=this[R];if(C)he=new Promise(function q(B,b){return function(O,C){B.then(function(){b[W]?O(I(void 0,!0)):b[$](O,C)},C)}}(C,this));else{var V=this[de].read();if(null!==V)return Promise.resolve(I(V,!1));he=new Promise(this[$])}return this[R]=he,he}},Symbol.asyncIterator,function(){return this}),S(J,"return",function(){var b=this;return new Promise(function(O,C){b[de].destroy(null,function(he){he?C(he):O(I(void 0,!0))})})}),J),oe);Ue.exports=function(b){var O,C=Object.create(ne,(S(O={},de,{value:b,writable:!0}),S(O,_,{value:null,writable:!0}),S(O,x,{value:null,writable:!0}),S(O,F,{value:null,writable:!0}),S(O,W,{value:b._readableState.endEmitted,writable:!0}),S(O,$,{value:function(V,Te){var se=C[de].read();se?(C[R]=null,C[_]=null,C[x]=null,V(I(se,!1))):(C[_]=V,C[x]=Te)},writable:!0}),O));return C[R]=null,ee(b,function(he){if(he&&"ERR_STREAM_PREMATURE_CLOSE"!==he.code){var V=C[x];return null!==V&&(C[R]=null,C[_]=null,C[x]=null,V(he)),void(C[F]=he)}var Te=C[_];null!==Te&&(C[R]=null,C[_]=null,C[x]=null,Te(I(void 0,!0))),C[W]=!0}),b.on("readable",ae.bind(null,C)),C}},2998:(Ue,_e,T)=>{"use strict";function J(ae,q){var oe=Object.keys(ae);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(ae);q&&(ne=ne.filter(function(X){return Object.getOwnPropertyDescriptor(ae,X).enumerable})),oe.push.apply(oe,ne)}return oe}function S(ae){for(var q=1;q<arguments.length;q++){var oe=null!=arguments[q]?arguments[q]:{};q%2?J(Object(oe),!0).forEach(function(ne){te(ae,ne,oe[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(oe)):J(Object(oe)).forEach(function(ne){Object.defineProperty(ae,ne,Object.getOwnPropertyDescriptor(oe,ne))})}return ae}function te(ae,q,oe){return(q=x(q))in ae?Object.defineProperty(ae,q,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ae[q]=oe,ae}function ee(ae,q){for(var oe=0;oe<q.length;oe++){var ne=q[oe];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(ae,x(ne.key),ne)}}function x(ae){var q=function F(ae,q){if("object"!=typeof ae||null===ae)return ae;var oe=ae[Symbol.toPrimitive];if(void 0!==oe){var ne=oe.call(ae,q||"default");if("object"!=typeof ne)return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===q?String:Number)(ae)}(ae,"string");return"symbol"==typeof q?q:String(q)}var R=T(9007).Buffer,de=T(9862).inspect,I=de&&de.custom||"inspect";function H(ae,q,oe){R.prototype.copy.call(ae,q,oe)}Ue.exports=function(){function ae(){(function U(ae,q){if(!(ae instanceof q))throw new TypeError("Cannot call a class as a function")})(this,ae),this.head=null,this.tail=null,this.length=0}return function _(ae,q,oe){q&&ee(ae.prototype,q),oe&&ee(ae,oe),Object.defineProperty(ae,"prototype",{writable:!1})}(ae,[{key:"push",value:function(oe){var ne={data:oe,next:null};this.length>0?this.tail.next=ne:this.head=ne,this.tail=ne,++this.length}},{key:"unshift",value:function(oe){var ne={data:oe,next:this.head};0===this.length&&(this.tail=ne),this.head=ne,++this.length}},{key:"shift",value:function(){if(0!==this.length){var oe=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,oe}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(oe){if(0===this.length)return"";for(var ne=this.head,X=""+ne.data;ne=ne.next;)X+=oe+ne.data;return X}},{key:"concat",value:function(oe){if(0===this.length)return R.alloc(0);for(var ne=R.allocUnsafe(oe>>>0),X=this.head,B=0;X;)H(X.data,ne,B),B+=X.data.length,X=X.next;return ne}},{key:"consume",value:function(oe,ne){var X;return oe<this.head.data.length?(X=this.head.data.slice(0,oe),this.head.data=this.head.data.slice(oe)):X=oe===this.head.data.length?this.shift():ne?this._getString(oe):this._getBuffer(oe),X}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(oe){var ne=this.head,X=1,B=ne.data;for(oe-=B.length;ne=ne.next;){var b=ne.data,O=oe>b.length?b.length:oe;if(B+=O===b.length?b:b.slice(0,oe),0==(oe-=O)){O===b.length?(++X,this.head=ne.next?ne.next:this.tail=null):(this.head=ne,ne.data=b.slice(O));break}++X}return this.length-=X,B}},{key:"_getBuffer",value:function(oe){var ne=R.allocUnsafe(oe),X=this.head,B=1;for(X.data.copy(ne),oe-=X.data.length;X=X.next;){var b=X.data,O=oe>b.length?b.length:oe;if(b.copy(ne,ne.length-oe,0,O),0==(oe-=O)){O===b.length?(++B,this.head=X.next?X.next:this.tail=null):(this.head=X,X.data=b.slice(O));break}++B}return this.length-=B,ne}},{key:I,value:function(oe,ne){return de(this,S(S({},ne),{},{depth:0,customInspect:!1}))}}]),ae}()},3992:Ue=>{"use strict";function T(ee,_){te(ee,_),J(ee)}function J(ee){ee._writableState&&!ee._writableState.emitClose||ee._readableState&&!ee._readableState.emitClose||ee.emit("close")}function te(ee,_){ee.emit("error",_)}Ue.exports={destroy:function _e(ee,_){var x=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(ee):ee&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(te,this,ee)):process.nextTick(te,this,ee)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(ee||null,function(R){!_&&R?x._writableState?x._writableState.errorEmitted?process.nextTick(J,x):(x._writableState.errorEmitted=!0,process.nextTick(T,x,R)):process.nextTick(T,x,R):_?(process.nextTick(J,x),_(R)):process.nextTick(J,x)}),this)},undestroy:function S(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function U(ee,_){var x=ee._readableState,F=ee._writableState;x&&x.autoDestroy||F&&F.autoDestroy?ee.destroy(_):ee.emit("error",_)}}},1227:(Ue,_e,T)=>{"use strict";var J=T(9555).q.ERR_STREAM_PREMATURE_CLOSE;function te(){}Ue.exports=function ee(_,x,F){if("function"==typeof x)return ee(_,null,x);x||(x={}),F=function S(_){var x=!1;return function(){if(!x){x=!0;for(var F=arguments.length,W=new Array(F),R=0;R<F;R++)W[R]=arguments[R];_.apply(this,W)}}}(F||te);var W=x.readable||!1!==x.readable&&_.readable,R=x.writable||!1!==x.writable&&_.writable,$=function(){_.writable||I()},de=_._writableState&&_._writableState.finished,I=function(){R=!1,de=!0,W||F.call(_)},H=_._readableState&&_._readableState.endEmitted,ae=function(){W=!1,H=!0,R||F.call(_)},q=function(B){F.call(_,B)},oe=function(){var B;return W&&!H?((!_._readableState||!_._readableState.ended)&&(B=new J),F.call(_,B)):R&&!de?((!_._writableState||!_._writableState.ended)&&(B=new J),F.call(_,B)):void 0},ne=function(){_.req.on("finish",I)};return function U(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",I),_.on("abort",oe),_.req?ne():_.on("request",ne)):R&&!_._writableState&&(_.on("end",$),_.on("close",$)),_.on("end",ae),_.on("finish",I),!1!==x.error&&_.on("error",q),_.on("close",oe),function(){_.removeListener("complete",I),_.removeListener("abort",oe),_.removeListener("request",ne),_.req&&_.req.removeListener("finish",I),_.removeListener("end",$),_.removeListener("close",$),_.removeListener("finish",I),_.removeListener("end",ae),_.removeListener("error",q),_.removeListener("close",oe)}}},5374:Ue=>{Ue.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(Ue,_e,T)=>{"use strict";var J,te=T(9555).q,U=te.ERR_MISSING_ARGS,ee=te.ERR_STREAM_DESTROYED;function _(I){if(I)throw I}function W(I){I()}function R(I,H){return I.pipe(H)}Ue.exports=function de(){for(var I=arguments.length,H=new Array(I),ae=0;ae<I;ae++)H[ae]=arguments[ae];var q=function $(I){return I.length&&"function"==typeof I[I.length-1]?I.pop():_}(H);if(Array.isArray(H[0])&&(H=H[0]),H.length<2)throw new U("streams");var oe,ne=H.map(function(X,B){var b=B<H.length-1;return function F(I,H,ae,q){q=function S(I){var H=!1;return function(){H||(H=!0,I.apply(void 0,arguments))}}(q);var oe=!1;I.on("close",function(){oe=!0}),void 0===J&&(J=T(1227)),J(I,{readable:H,writable:ae},function(X){if(X)return q(X);oe=!0,q()});var ne=!1;return function(X){if(!oe&&!ne){if(ne=!0,function x(I){return I.setHeader&&"function"==typeof I.abort}(I))return I.abort();if("function"==typeof I.destroy)return I.destroy();q(X||new ee("pipe"))}}}(X,b,B>0,function(C){oe||(oe=C),C&&ne.forEach(W),!b&&(ne.forEach(W),q(oe))})});return H.reduce(R)}},4962:(Ue,_e,T)=>{"use strict";var J=T(9555).q.ERR_INVALID_OPT_VALUE;Ue.exports={getHighWaterMark:function te(U,ee,_,x){var F=function S(U,ee,_){return null!=U.highWaterMark?U.highWaterMark:ee?U[_]:null}(ee,x,_);if(null!=F){if(!isFinite(F)||Math.floor(F)!==F||F<0)throw new J(x?_:"highWaterMark",F);return Math.floor(F)}return U.objectMode?16:16384}}},3951:(Ue,_e,T)=>{Ue.exports=T(2016).EventEmitter},2024:(Ue,_e,T)=>{"use strict";var J=T(4282).Buffer,S=J.isEncoding||function(ne){switch((ne=""+ne)&&ne.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ee(ne){var X;switch(this.encoding=function U(ne){var X=function te(ne){if(!ne)return"utf8";for(var X;;)switch(ne){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ne;default:if(X)return;ne=(""+ne).toLowerCase(),X=!0}}(ne);if("string"!=typeof X&&(J.isEncoding===S||!S(ne)))throw new Error("Unknown encoding: "+ne);return X||ne}(ne),this.encoding){case"utf16le":this.text=de,this.end=I,X=4;break;case"utf8":this.fillLast=W,X=4;break;case"base64":this.text=H,this.end=ae,X=3;break;default:return this.write=q,void(this.end=oe)}this.lastNeed=0,this.lastTotal=0,this.lastChar=J.allocUnsafe(X)}function _(ne){return ne<=127?0:ne>>5==6?2:ne>>4==14?3:ne>>3==30?4:ne>>6==2?-1:-2}function W(ne){var X=this.lastTotal-this.lastNeed,B=function F(ne,X,B){if(128!=(192&X[0]))return ne.lastNeed=0,"\ufffd";if(ne.lastNeed>1&&X.length>1){if(128!=(192&X[1]))return ne.lastNeed=1,"\ufffd";if(ne.lastNeed>2&&X.length>2&&128!=(192&X[2]))return ne.lastNeed=2,"\ufffd"}}(this,ne);return void 0!==B?B:this.lastNeed<=ne.length?(ne.copy(this.lastChar,X,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ne.copy(this.lastChar,X,0,ne.length),void(this.lastNeed-=ne.length))}function de(ne,X){if((ne.length-X)%2==0){var B=ne.toString("utf16le",X);if(B){var b=B.charCodeAt(B.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ne[ne.length-1],ne.toString("utf16le",X,ne.length-1)}function I(ne){var X=ne&&ne.length?this.write(ne):"";return this.lastNeed?X+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):X}function H(ne,X){var B=(ne.length-X)%3;return 0===B?ne.toString("base64",X):(this.lastNeed=3-B,this.lastTotal=3,1===B?this.lastChar[0]=ne[ne.length-1]:(this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1]),ne.toString("base64",X,ne.length-B))}function ae(ne){var X=ne&&ne.length?this.write(ne):"";return this.lastNeed?X+this.lastChar.toString("base64",0,3-this.lastNeed):X}function q(ne){return ne.toString(this.encoding)}function oe(ne){return ne&&ne.length?this.write(ne):""}_e.StringDecoder=ee,ee.prototype.write=function(ne){if(0===ne.length)return"";var X,B;if(this.lastNeed){if(void 0===(X=this.fillLast(ne)))return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<ne.length?X?X+this.text(ne,B):this.text(ne,B):X||""},ee.prototype.end=function $(ne){var X=ne&&ne.length?this.write(ne):"";return this.lastNeed?X+"\ufffd":X},ee.prototype.text=function R(ne,X){var B=function x(ne,X,B){var b=X.length-1;if(b<B)return 0;var O=_(X[b]);return O>=0?(O>0&&(ne.lastNeed=O-1),O):--b<B||-2===O?0:(O=_(X[b]))>=0?(O>0&&(ne.lastNeed=O-2),O):--b<B||-2===O?0:(O=_(X[b]))>=0?(O>0&&(2===O?O=0:ne.lastNeed=O-3),O):0}(this,ne,X);if(!this.lastNeed)return ne.toString("utf8",X);this.lastTotal=B;var b=ne.length-(B-this.lastNeed);return ne.copy(this.lastChar,0,b),ne.toString("utf8",X,b)},ee.prototype.fillLast=function(ne){if(this.lastNeed<=ne.length)return ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ne.length),this.lastNeed-=ne.length}},4282:(Ue,_e,T)=>{var J=T(9007),S=J.Buffer;function te(ee,_){for(var x in ee)_[x]=ee[x]}function U(ee,_,x){return S(ee,_,x)}S.from&&S.alloc&&S.allocUnsafe&&S.allocUnsafeSlow?Ue.exports=J:(te(J,_e),_e.Buffer=U),U.prototype=Object.create(S.prototype),te(S,U),U.from=function(ee,_,x){if("number"==typeof ee)throw new TypeError("Argument must not be a number");return S(ee,_,x)},U.alloc=function(ee,_,x){if("number"!=typeof ee)throw new TypeError("Argument must be a number");var F=S(ee);return void 0!==_?"string"==typeof x?F.fill(_,x):F.fill(_):F.fill(0),F},U.allocUnsafe=function(ee){if("number"!=typeof ee)throw new TypeError("Argument must be a number");return S(ee)},U.allocUnsafeSlow=function(ee){if("number"!=typeof ee)throw new TypeError("Argument must be a number");return J.SlowBuffer(ee)}},496:Ue=>{function T(J){try{if(!global.localStorage)return!1}catch{return!1}var S=global.localStorage[J];return null!=S&&"true"===String(S).toLowerCase()}Ue.exports=function _e(J,S){if(T("noDeprecation"))return J;var te=!1;return function U(){if(!te){if(T("throwDeprecation"))throw new Error(S);T("traceDeprecation")?console.trace(S):console.warn(S),te=!0}return J.apply(this,arguments)}}},1171:Ue=>{"use strict";Ue.exports=function(_e){_e.prototype[Symbol.iterator]=function*(){for(let T=this.head;T;T=T.next)yield T.value}}},4439:(Ue,_e,T)=>{"use strict";function J(_){var x=this;if(x instanceof J||(x=new J),x.tail=null,x.head=null,x.length=0,_&&"function"==typeof _.forEach)_.forEach(function(R){x.push(R)});else if(arguments.length>0)for(var F=0,W=arguments.length;F<W;F++)x.push(arguments[F]);return x}function S(_,x,F){var W=x===_.head?new ee(F,null,x,_):new ee(F,x,x.next,_);return null===W.next&&(_.tail=W),null===W.prev&&(_.head=W),_.length++,W}function te(_,x){_.tail=new ee(x,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function U(_,x){_.head=new ee(x,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function ee(_,x,F,W){if(!(this instanceof ee))return new ee(_,x,F,W);this.list=W,this.value=_,x?(x.next=this,this.prev=x):this.prev=null,F?(F.prev=this,this.next=F):this.next=null}Ue.exports=J,J.Node=ee,J.create=J,J.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var x=_.next,F=_.prev;return x&&(x.prev=F),F&&(F.next=x),_===this.head&&(this.head=x),_===this.tail&&(this.tail=F),_.list.length--,_.next=null,_.prev=null,_.list=null,x},J.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var x=this.head;_.list=this,_.next=x,x&&(x.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},J.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var x=this.tail;_.list=this,_.prev=x,x&&(x.next=_),this.tail=_,this.head||(this.head=_),this.length++}},J.prototype.push=function(){for(var _=0,x=arguments.length;_<x;_++)te(this,arguments[_]);return this.length},J.prototype.unshift=function(){for(var _=0,x=arguments.length;_<x;_++)U(this,arguments[_]);return this.length},J.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},J.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},J.prototype.forEach=function(_,x){x=x||this;for(var F=this.head,W=0;null!==F;W++)_.call(x,F.value,W,this),F=F.next},J.prototype.forEachReverse=function(_,x){x=x||this;for(var F=this.tail,W=this.length-1;null!==F;W--)_.call(x,F.value,W,this),F=F.prev},J.prototype.get=function(_){for(var x=0,F=this.head;null!==F&&x<_;x++)F=F.next;if(x===_&&null!==F)return F.value},J.prototype.getReverse=function(_){for(var x=0,F=this.tail;null!==F&&x<_;x++)F=F.prev;if(x===_&&null!==F)return F.value},J.prototype.map=function(_,x){x=x||this;for(var F=new J,W=this.head;null!==W;)F.push(_.call(x,W.value,this)),W=W.next;return F},J.prototype.mapReverse=function(_,x){x=x||this;for(var F=new J,W=this.tail;null!==W;)F.push(_.call(x,W.value,this)),W=W.prev;return F},J.prototype.reduce=function(_,x){var F,W=this.head;if(arguments.length>1)F=x;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");W=this.head.next,F=this.head.value}for(var R=0;null!==W;R++)F=_(F,W.value,R),W=W.next;return F},J.prototype.reduceReverse=function(_,x){var F,W=this.tail;if(arguments.length>1)F=x;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");W=this.tail.prev,F=this.tail.value}for(var R=this.length-1;null!==W;R--)F=_(F,W.value,R),W=W.prev;return F},J.prototype.toArray=function(){for(var _=new Array(this.length),x=0,F=this.head;null!==F;x++)_[x]=F.value,F=F.next;return _},J.prototype.toArrayReverse=function(){for(var _=new Array(this.length),x=0,F=this.tail;null!==F;x++)_[x]=F.value,F=F.prev;return _},J.prototype.slice=function(_,x){(x=x||this.length)<0&&(x+=this.length),(_=_||0)<0&&(_+=this.length);var F=new J;if(x<_||x<0)return F;_<0&&(_=0),x>this.length&&(x=this.length);for(var W=0,R=this.head;null!==R&&W<_;W++)R=R.next;for(;null!==R&&W<x;W++,R=R.next)F.push(R.value);return F},J.prototype.sliceReverse=function(_,x){(x=x||this.length)<0&&(x+=this.length),(_=_||0)<0&&(_+=this.length);var F=new J;if(x<_||x<0)return F;_<0&&(_=0),x>this.length&&(x=this.length);for(var W=this.length,R=this.tail;null!==R&&W>x;W--)R=R.prev;for(;null!==R&&W>_;W--,R=R.prev)F.push(R.value);return F},J.prototype.splice=function(_,x,...F){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var W=0,R=this.head;null!==R&&W<_;W++)R=R.next;var $=[];for(W=0;R&&W<x;W++)$.push(R.value),R=this.removeNode(R);for(null===R&&(R=this.tail),R!==this.head&&R!==this.tail&&(R=R.prev),W=0;W<F.length;W++)R=S(this,R,F[W]);return $},J.prototype.reverse=function(){for(var _=this.head,x=this.tail,F=_;null!==F;F=F.prev){var W=F.prev;F.prev=F.next,F.next=W}return this.head=x,this.tail=_,this};try{T(1171)(J)}catch{}},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(Ue,_e,T)=>{var J=T(3801);function S(te){var U,ee;function _(F,W){try{var R=te[F](W),$=R.value,de=$ instanceof J;Promise.resolve(de?$.v:$).then(function(I){if(de){var H="return"===F?"return":"next";if(!$.k||I.done)return _(H,I);I=te[H](I).value}x(R.done?"return":"normal",I)},function(I){_("throw",I)})}catch(I){x("throw",I)}}function x(F,W){switch(F){case"return":U.resolve({value:W,done:!0});break;case"throw":U.reject(W);break;default:U.resolve({value:W,done:!1})}(U=U.next)?_(U.key,U.arg):ee=null}this._invoke=function(F,W){return new Promise(function(R,$){var de={key:F,arg:W,resolve:R,reject:$,next:null};ee?ee=ee.next=de:(U=ee=de,_(F,W))})},"function"!=typeof te.return&&(this.return=void 0)}S.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},S.prototype.next=function(te){return this._invoke("next",te)},S.prototype.throw=function(te){return this._invoke("throw",te)},S.prototype.return=function(te){return this._invoke("return",te)},Ue.exports=S,Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},3801:Ue=>{Ue.exports=function _e(T,J){this.v=T,this.k=J},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8131:(Ue,_e,T)=>{var J=T(3801);Ue.exports=function S(te){var U={},ee=!1;function _(x,F){return ee=!0,F=new Promise(function(W){W(te[x](F))}),{done:!1,value:new J(F,1)}}return U[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},U.next=function(x){return ee?(ee=!1,x):_("next",x)},"function"==typeof te.throw&&(U.throw=function(x){if(ee)throw ee=!1,x;return _("throw",x)}),"function"==typeof te.return&&(U.return=function(x){return ee?(ee=!1,x):_("return",x)}),U},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8237:Ue=>{function T(J){function S(te){if(Object(te)!==te)return Promise.reject(new TypeError(te+" is not an object."));var U=te.done;return Promise.resolve(te.value).then(function(ee){return{value:ee,done:U}})}return(T=function(U){this.s=U,this.n=U.next}).prototype={s:null,n:null,next:function(){return S(this.n.apply(this.s,arguments))},return:function(U){var ee=this.s.return;return void 0===ee?Promise.resolve({value:U,done:!0}):S(ee.apply(this.s,arguments))},throw:function(U){var ee=this.s.return;return void 0===ee?Promise.reject(U):S(ee.apply(this.s,arguments))}},new T(J)}Ue.exports=function _e(J){var S,te,U,ee=2;for(typeof Symbol<"u"&&(te=Symbol.asyncIterator,U=Symbol.iterator);ee--;){if(te&&null!=(S=J[te]))return S.call(J);if(U&&null!=(S=J[U]))return new T(S.call(J));te="@@asyncIterator",U="@@iterator"}throw new TypeError("Object is not async iterable")},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},7156:Ue=>{function _e(J,S,te,U,ee,_,x){try{var F=J[_](x),W=F.value}catch(R){return void te(R)}F.done?S(W):Promise.resolve(W).then(U,ee)}Ue.exports=function T(J){return function(){var S=this,te=arguments;return new Promise(function(U,ee){var _=J.apply(S,te);function x(W){_e(_,U,ee,x,F,"next",W)}function F(W){_e(_,U,ee,x,F,"throw",W)}x(void 0)})}},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},6737:(Ue,_e,T)=>{var J=T(3801);Ue.exports=function S(te){return new J(te,0)},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports},8186:(Ue,_e,T)=>{var J=T(4642);Ue.exports=function S(te){return function(){return new J(te.apply(this,arguments))}},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports}},Ue=>{Ue(Ue.s=9941)}]);