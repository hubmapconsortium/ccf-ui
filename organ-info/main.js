(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[179],{822:ne=>{"use strict";ne.exports=g,ne.exports.default=g;var Z=1e20;function g(N,_,v,D,L,P){this.fontSize=N||24,this.buffer=void 0===_?3:_,this.cutoff=D||.25,this.fontFamily=L||"sans-serif",this.fontWeight=P||"normal",this.radius=v||8;var j=this.size=this.fontSize+2*this.buffer,se=j+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=j,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(se*se),this.gridInner=new Float64Array(se*se),this.f=new Float64Array(se),this.z=new Float64Array(se+1),this.v=new Uint16Array(se),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(j/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function O(N,_,v,D,L,P){for(var j=0;j<_;j++)C(N,j,_,v,D,L,P);for(var se=0;se<v;se++)C(N,se*_,1,_,D,L,P)}function C(N,_,v,D,L,P,j){var se,T,X,le;for(P[0]=0,j[0]=-Z,j[1]=Z,se=0;se<D;se++)L[se]=N[_+se*v];for(se=1,T=0,X=0;se<D;se++){do{X=(L[se]-L[le=P[T]]+se*se-le*le)/(se-le)/2}while(X<=j[T]&&--T>-1);P[++T]=se,j[T]=X,j[T+1]=Z}for(se=0,T=0;se<D;se++){for(;j[T+1]<se;)T++;N[_+se*v]=L[le=P[T]]+(se-le)*(se-le)}}g.prototype._draw=function(N,_){var P,j,se,T,X,le,K,re,ie,v=this.ctx.measureText(N),D=v.width,L=2*this.buffer;_&&this.useMetrics?(X=Math.floor(v.actualBoundingBoxAscent),re=this.buffer+Math.ceil(v.actualBoundingBoxAscent),le=this.buffer,K=this.buffer,P=(j=Math.min(this.size,Math.ceil(v.actualBoundingBoxRight-v.actualBoundingBoxLeft)))+L,se=(T=Math.min(this.size-le,Math.ceil(v.actualBoundingBoxAscent+v.actualBoundingBoxDescent)))+L,this.ctx.textBaseline="alphabetic"):(P=j=this.size,se=T=this.size,X=19*this.fontSize/24,le=K=0,re=this.middle,this.ctx.textBaseline="middle"),j&&T&&(this.ctx.clearRect(K,le,j,T),this.ctx.fillText(N,this.buffer,re),ie=this.ctx.getImageData(K,le,j,T));var J=new Uint8ClampedArray(P*se);return function S(N,_,v,D,L,P,j){P.fill(Z,0,_*v),j.fill(0,0,_*v);for(var se=(_-D)/2,T=0;T<L;T++)for(var X=0;X<D;X++){var le=(T+se)*_+X+se,K=N.data[4*(T*D+X)+3]/255;if(1===K)P[le]=0,j[le]=Z;else if(0===K)P[le]=Z,j[le]=0;else{var re=Math.max(0,.5-K),ie=Math.max(0,K-.5);P[le]=re*re,j[le]=ie*ie}}}(ie,P,se,j,T,this.gridOuter,this.gridInner),O(this.gridOuter,P,se,this.f,this.v,this.z),O(this.gridInner,P,se,this.f,this.v,this.z),function b(N,_,v,D,L,P,j){for(var se=0;se<_*v;se++){var T=Math.sqrt(D[se])-Math.sqrt(L[se]);N[se]=Math.round(255-255*(T/P+j))}}(J,P,se,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:J,metrics:{width:j,height:T,sdfWidth:P,sdfHeight:se,top:X,left:0,advance:D}}},g.prototype.draw=function(N){return this._draw(N,!1).data},g.prototype.drawWithMetrics=function(N){return this._draw(N,!0)}},9478:(ne,Z,g)=>{"use strict";var S={};g.r(S),g.d(S,{decode:()=>o_e,name:()=>r_e});var b={};g.r(b),g.d(b,{name:()=>u_e,preprocess:()=>h_e});var O={};g.r(O),g.d(O,{name:()=>f_e,preprocess:()=>p_e});var C={};g.r(C),g.d(C,{decode:()=>Z_e,encode:()=>Q_e,name:()=>K_e,preprocess:()=>J_e});var N={};g.r(N),g.d(N,{decode:()=>rbe,encode:()=>obe,name:()=>ibe});var _={};g.r(_),g.d(_,{decode:()=>abe,encode:()=>cbe,name:()=>sbe});var v={};g.r(v),g.d(v,{decode:()=>dbe,encode:()=>ube,name:()=>lbe});var D={};function L(n){return"function"==typeof n}function P(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}g.r(D),g.d(D,{delMany:()=>bke,get:()=>gke,setMany:()=>_ke});const j=P(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function se(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class T{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(L(i))try{i()}catch(o){e=o instanceof j?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{K(o)}catch(s){e=e??[],s instanceof j?e=[...e,...s.errors]:e.push(s)}}if(e)throw new j(e)}}add(e){var t;if(e&&e!==this)if(this.closed)K(e);else{if(e instanceof T){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&se(t,e)}remove(e){const{_finalizers:t}=this;t&&se(t,e),e instanceof T&&e._removeParent(this)}}T.EMPTY=(()=>{const n=new T;return n.closed=!0,n})();const X=T.EMPTY;function le(n){return n instanceof T||n&&"closed"in n&&L(n.remove)&&L(n.add)&&L(n.unsubscribe)}function K(n){L(n)?n():n.unsubscribe()}const re={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ie={setTimeout(n,e,...t){const{delegate:i}=ie;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ie;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function J(n){ie.setTimeout(()=>{const{onUnhandledError:e}=re;if(!e)throw n;e(n)})}function V(){}const x=he("C",void 0,void 0);function he(n,e,t){return{kind:n,value:e,error:t}}let W=null;function Me(n){if(re.useDeprecatedSynchronousErrorHandling){const e=!W;if(e&&(W={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=W;if(W=null,t)throw i}}else n()}class xe extends T{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,le(e)&&e.add(this)):this.destination=Ge}static create(e,t,i){return new Ke(e,t,i)}next(e){this.isStopped?Pe(function k(n){return he("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Pe(function B(n){return he("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pe(x,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Te(n,e){return Oe.call(n,e)}class Je{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Ee(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Ee(i)}else Ee(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ee(t)}}}class Ke extends xe{constructor(e,t,i){let r;if(super(),L(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&re.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Te(e.next,o),error:e.error&&Te(e.error,o),complete:e.complete&&Te(e.complete,o)}):r=e}this.destination=new Je(r)}}function Ee(n){re.useDeprecatedSynchronousErrorHandling?function de(n){re.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=n)}(n):J(n)}function Pe(n,e){const{onStoppedNotification:t}=re;t&&ie.setTimeout(()=>t(n,e))}const Ge={closed:!0,next:V,error:function Fe(n){throw n},complete:V},ge="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ae(n){return n}function qe(...n){return ct(n)}function ct(n){return 0===n.length?Ae:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function R(n){return n&&n instanceof xe||function G(n){return n&&L(n.next)&&L(n.error)&&L(n.complete)}(n)&&le(n)}(t)?t:new Ke(t,i,r);return Me(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=ye(i))((r,o)=>{const s=new Ke({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[ge](){return this}pipe(...t){return ct(t)(this)}toPromise(t){return new(t=ye(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function ye(n){var e;return null!==(e=n??re.Promise)&&void 0!==e?e:Promise}const ae=P(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let U=(()=>{class n extends Ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Le(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new ae}next(t){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?X:(this.currentObservers=null,o.push(t),new T(()=>{this.currentObservers=null,se(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Ye;return t.source=this,t}}return n.create=(e,t)=>new Le(e,t),n})();class Le extends U{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:X}}function tt(n){return L(n?.lift)}function fe(n){return e=>{if(tt(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(n,e,t,i,r){return new q(n,e,t,i,r)}class q extends xe{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function A(n,e){return fe((t,i)=>{let r=0;t.subscribe(ee(i,o=>{i.next(n.call(e,o,r++))}))})}function He(n,e,t,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o}function gt(n,e){return function(t,i){e(t,i,n)}}function Ie(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function Cn(n){return this instanceof Cn?(this.v=n,this):new Cn(n)}function ys(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Qe(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const da=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ic(n){return L(n?.then)}function Wl(n){return L(n[ge])}function $l(n){return Symbol.asyncIterator&&L(n?.[Symbol.asyncIterator])}function $c(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yc=function mh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function eu(n){return L(n?.[Yc])}function Xc(n){return function Mn(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(f){i[f]&&(r[f]=function(m){return new Promise(function(y,E){o.push([f,m,y,E])>1||a(f,m)})})}function a(f,m){try{!function c(f){f.value instanceof Cn?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}(i[f](m))}catch(y){h(o[0][3],y)}}function l(f){a("next",f)}function d(f){a("throw",f)}function h(f,m){f(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Cn(t.read());if(r)return yield Cn(void 0);yield yield Cn(i)}}finally{t.releaseLock()}})}function Yl(n){return L(n?.getReader)}function Li(n){if(n instanceof Ye)return n;if(null!=n){if(Wl(n))return function Si(n){return new Ye(e=>{const t=n[ge]();if(L(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(da(n))return function qc(n){return new Ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ic(n))return function Ws(n){return new Ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,J)})}(n);if($l(n))return ua(n);if(eu(n))return function Ta(n){return new Ye(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Yl(n))return function rc(n){return ua(Xc(n))}(n)}throw $c(n)}function ua(n){return new Ye(e=>{(function Po(n,e){var t,i,r,o;return function Q(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(d){try{l(i.next(d))}catch(h){s(h)}}function c(d){try{l(i.throw(d))}catch(h){s(h)}}function l(d){d.done?o(d.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(d.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=ys(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function _e(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function ve(n,e,t=1/0){return L(e)?ve((i,r)=>A((o,s)=>e(i,o,r,s))(Li(n(i,r))),t):("number"==typeof e&&(t=e),fe((i,r)=>function Re(n,e,t,i,r,o,s,a){const c=[];let l=0,d=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},m=E=>l<i?y(E):c.push(E),y=E=>{o&&e.next(E),l++;let M=!1;Li(t(E,d++)).subscribe(ee(e,H=>{r?.(H),o?m(H):e.next(H)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<i;){const H=c.shift();s?_e(e,s,()=>y(H)):y(H)}f()}catch(H){e.error(H)}}))};return n.subscribe(ee(e,m,()=>{h=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function z(n=1/0){return ve(Ae,n)}const te=new Ye(n=>n.complete());function Xe(n){return n&&L(n.schedule)}function st(n){return n[n.length-1]}function wt(n){return L(st(n))?n.pop():void 0}function It(n){return Xe(st(n))?n.pop():void 0}function en(n,e=0){return fe((t,i)=>{t.subscribe(ee(i,r=>_e(i,n,()=>i.next(r),e),()=>_e(i,n,()=>i.complete(),e),r=>_e(i,n,()=>i.error(r),e)))})}function yn(n,e=0){return fe((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function $s(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ye(t=>{_e(t,e,()=>{const i=n[Symbol.asyncIterator]();_e(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Bi(n,e){return e?function Fo(n,e){if(null!=n){if(Wl(n))return function bo(n,e){return Li(n).pipe(yn(e),en(e))}(n,e);if(da(n))return function No(n,e){return new Ye(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(ic(n))return function Dr(n,e){return Li(n).pipe(yn(e),en(e))}(n,e);if($l(n))return $s(n,e);if(eu(n))return function Kc(n,e){return new Ye(t=>{let i;return _e(t,e,()=>{i=n[Yc](),_e(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>L(i?.return)&&i.return()})}(n,e);if(Yl(n))return function Lr(n,e){return $s(Xc(n),e)}(n,e)}throw $c(n)}(n,e):Li(n)}function Rr(...n){const e=It(n),t=function Vt(n,e){return"number"==typeof st(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Li(i[0]):z(t)(Bi(i,e)):te}class hi extends U{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Wt(...n){return Bi(n,It(n))}function ts(n={}){const{connector:e=(()=>new U),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,d=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},m=()=>{f(),s=c=void 0,d=h=!1},y=()=>{const E=s;m(),E?.unsubscribe()};return fe((E,M)=>{l++,!h&&!d&&f();const H=c=c??e();M.add(()=>{l--,0===l&&!h&&!d&&(a=Xl(y,r))}),H.subscribe(M),!s&&l>0&&(s=new Ke({next:$=>H.next($),error:$=>{h=!0,f(),a=Xl(m,t,$),H.error($)},complete:()=>{d=!0,f(),a=Xl(m,i),H.complete()}}),Li(E).subscribe(s))})(o)}}function Xl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Ke({next:()=>{i.unsubscribe(),n()}});return Li(e(...t)).subscribe(i)}function ke(n,e){return fe((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(ee(i,c=>{r?.unsubscribe();let l=0;const d=o++;Li(n(c,d)).subscribe(r=ee(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function je(n,e=Ae){return n=n??it,fe((t,i)=>{let r,o=!0;t.subscribe(ee(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function it(n,e){return n===e}function ht(n){for(let e in n)if(n[e]===ht)return e;throw Error("Could not find renamed property on target object.")}function Nt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ht(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ht).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Yn(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const xr=ht({__forward_ref__:ht});function xn(n){return n.__forward_ref__=xn,n.toString=function(){return Ht(this())},n}function an(n){return ns(n)?n():n}function ns(n){return"function"==typeof n&&n.hasOwnProperty(xr)&&n.__forward_ref__===xn}function c_(n){return n&&!!n.\u0275providers}const Tv="https://g.co/ng/security#xss";class Pt extends Error{constructor(e,t){super(function up(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Vn(n){return"string"==typeof n?n:null==n?"":String(n)}function l_(n,e){throw new Pt(-201,!1)}function yo(n,e){null==n&&function Dn(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function At(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function gh(n){return is(n,hp)||is(n,oc)}function is(n,e){return n.hasOwnProperty(e)?n[e]:null}function Lo(n){return n&&(n.hasOwnProperty(fp)||n.hasOwnProperty(pp))?n[fp]:null}const hp=ht({\u0275prov:ht}),fp=ht({\u0275inj:ht}),oc=ht({ngInjectableDef:ht}),pp=ht({ngInjectorDef:ht});var si=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(si||{});let Wi;function vo(n){const e=Wi;return Wi=n,e}function kv(n,e,t){const i=gh(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&si.Optional?null:void 0!==e?e:void l_(Ht(n))}const Mi=globalThis,Jl={},u_="__NG_DI_FLAG__",_h="ngTempTokenPath",h_=/\n/gm,f_="__source";let Zl;function Jc(n){const e=Zl;return Zl=n,e}function HS(n,e=si.Default){if(void 0===Zl)throw new Pt(-203,!1);return null===Zl?kv(n,void 0,e):Zl.get(n,e&si.Optional?null:void 0,e)}function rt(n,e=si.Default){return(function sc(){return Wi}()||HS)(an(n),e)}function zt(n,e=si.Default){return rt(n,_p(e))}function _p(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function p_(n){const e=[];for(let t=0;t<n.length;t++){const i=an(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Pt(900,!1);let r,o=si.Default;for(let s=0;s<i.length;s++){const a=i[s],c=jv(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(rt(r,o))}else e.push(rt(i))}return e}function Ql(n,e){return n[u_]=e,n.prototype[u_]=e,n}function jv(n){return n[u_]}function ac(n){return{toString:n}.toString()}var yp=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(yp||{}),fa=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(fa||{});const Bo={},Xn=[],yh=ht({\u0275cmp:ht}),m_=ht({\u0275dir:ht}),g_=ht({\u0275pipe:ht}),Uv=ht({\u0275mod:ht}),cc=ht({\u0275fac:ht}),vh=ht({__NG_ELEMENT_ID__:ht}),xh=ht({__NG_ENV_ID__:ht});function lt(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function Et(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];Qt(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function bt(n){return 3===n||4===n||6===n}function Qt(n){return 64===n.charCodeAt(0)}function On(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||wi(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function wi(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const kr="ng-template";function ji(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==lt(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function vp(n){return 4===n.type&&n.value!==kr}function GS(n,e,t){return e===(4!==n.type||t?n.value:kr)}function Ys(n,e,t){let i=4;const r=n.attrs||[],o=function wp(n){for(let e=0;e<n.length;e++)if(bt(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!GS(n,c,t)||""===c&&1===e.length){if(rs(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!ji(n.attrs,l,t)){if(rs(i))return!1;s=!0}continue}const h=WS(8&i?"class":c,r,vp(n),t);if(-1===h){if(rs(i))return!1;s=!0;continue}if(""!==l){let f;f=h>o?"":r[h+1].toLowerCase();const m=8&i?f:null;if(m&&-1!==lt(m,l,0)||2&i&&l!==f){if(rs(i))return!1;s=!0}}}}else{if(!s&&!rs(i)&&!rs(c))return!1;if(s&&rs(c))continue;s=!1,i=c|1&i}}return rs(i)||s}function rs(n){return 0==(1&n)}function WS(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Ti(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function ed(n,e,t=!1){for(let i=0;i<e.length;i++)if(Ys(n,e[i],t))return!0;return!1}function $S(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function __(n,e){return n?":not("+e.trim()+")":e}function Ep(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!rs(s)&&(e+=__(o,r),r=""),i=s,o=o||!rs(i);t++}return""!==r&&(e+=__(o,r)),e}function Pn(n){return ac(()=>{const e=Vv(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===yp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||fa.Emulated,styles:n.styles||Xn,_:null,schemas:n.schemas||null,tView:null,id:""};zv(t);const i=n.dependencies;return t.directiveDefs=td(i,!1),t.pipeDefs=td(i,!0),t.id=function y_(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Qc(n){return _i(n)||wr(n)}function Sp(n){return null!==n}function Jt(n){return ac(()=>({type:n.type,bootstrap:n.bootstrap||Xn,declarations:n.declarations||Xn,imports:n.imports||Xn,exports:n.exports||Xn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function b_(n,e){if(null==n)return Bo;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function jt(n){return ac(()=>{const e=Vv(n);return zv(e),e})}function Br(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function _i(n){return n[yh]||null}function wr(n){return n[m_]||null}function Er(n){return n[g_]||null}function Vv(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Bo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Xn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:b_(n.inputs,e),outputs:b_(n.outputs)}}function zv(n){n.features?.forEach(e=>e(n))}function td(n,e){if(!n)return null;const t=e?Er:Qc;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Sp)}const gr=0,qt=1,Wn=2,nr=3,Ii=4,Or=5,xo=6,nu=7,_r=8,el=9,tl=10,Rn=11,nd=12,id=13,Ia=14,Ki=15,nl=16,pa=17,Da=18,wh=19,Hv=20,il=21,dc=22,rl=23,uc=24,ai=25,ol=1,Eh=2,Ar=7,iu=9,co=11;function os(n){return Array.isArray(n)&&"object"==typeof n[ol]}function jo(n){return Array.isArray(n)&&!0===n[ol]}function v_(n){return 0!=(4&n.flags)}function rd(n){return n.componentOffset>-1}function Tp(n){return 1==(1&n.flags)}function jr(n){return!!n.template}function x_(n){return 0!=(512&n[Wn])}function od(n,e){return n.hasOwnProperty(cc)?n[cc]:null}let lo=null,Sh=!1;function Xs(n){const e=lo;return lo=n,e}const Oa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function sl(n){if(!Ch(n)||n.dirty){if(!n.producerMustRecompute(n)&&!fc(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function A_(n){n.dirty=!0,function As(n){if(void 0===n.liveConsumerNode)return;const e=Sh;Sh=!0;try{for(const t of n.liveConsumerNode)t.dirty||A_(t)}finally{Sh=e}}(n),n.consumerMarkedDirty?.(n)}function Rp(n){return n&&(n.nextProducerIndex=0),Xs(n)}function sd(n,e){if(Xs(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ch(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ad(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function fc(n){cd(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(sl(t),i!==t.version))return!0}return!1}function S_(n){if(cd(n),Ch(n))for(let e=0;e<n.producerNode.length;e++)ad(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ad(n,e){if(function Xr(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),cd(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)ad(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];cd(r),r.producerIndexOfThis[i]=e}}function Ch(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function cd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let M_=null;function cu(n){const e=Xs(null);try{return n()}finally{Xs(e)}}const Kv=()=>{},R_=(()=>({...Oa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Kv}))();class Jv{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Sr(){return Zv}function Zv(n){return n.type.prototype.ngOnChanges&&(n.setInput=k_),Qv}function Qv(){const n=Op(this),e=n?.current;if(e){const t=n.previous;if(t===Bo)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function k_(n,e,t,i){const r=this.declaredInputs[t],o=Op(n)||function tx(n,e){return n[ex]=e}(n,{previous:Bo,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new Jv(c&&c.currentValue,e,a===Bo),n[i]=e}Sr.ngInherit=!0;const ex="__ngSimpleChanges__";function Op(n){return n[ex]||null}const Ss=function(n,e,t){},ix="svg";function Ui(n){for(;Array.isArray(n);)n=n[gr];return n}function Mh(n,e){return Ui(e[n])}function ss(n,e){return Ui(e[n.index])}function F_(n,e){return n.data[e]}function al(n,e){return n[e]}function Cs(n,e){const t=e[n];return os(t)?t:t[gr]}function cl(n,e){return null==e?null:n[e]}function lu(n){n[pa]=0}function rx(n){1024&n[Wn]||(n[Wn]|=1024,sx(n,1))}function ox(n){1024&n[Wn]&&(n[Wn]&=-1025,sx(n,-1))}function sx(n,e){let t=n[nr];if(null===t)return;t[Or]+=e;let i=t;for(t=t[nr];null!==t&&(1===e&&1===i[Or]||-1===e&&0===i[Or]);)t[Or]+=e,i=t,t=t[nr]}const An={lFrame:Dh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Fp(){return An.bindingsEnabled}function ld(){return null!==An.skipHydrationRootTNode}function Dt(){return An.lFrame.lView}function Kn(){return An.lFrame.tView}function Cr(n){return An.lFrame.contextLView=n,n[_r]}function Pi(n){return An.lFrame.contextLView=null,n}function qr(){let n=U_();for(;null!==n&&64===n.type;)n=n.parent;return n}function U_(){return An.lFrame.currentTNode}function Pa(n,e){const t=An.lFrame;t.currentTNode=n,t.isParent=e}function V_(){return An.lFrame.isParent}function z_(){An.lFrame.isParent=!1}function wo(){const n=An.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Vo(){return An.lFrame.bindingIndex++}function mc(n){const e=An.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function du(n,e){const t=An.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bp(e)}function Bp(n){An.lFrame.currentDirectiveIndex=n}function G_(){return An.lFrame.currentQueryIndex}function dl(n){An.lFrame.currentQueryIndex=n}function Ih(n){const e=n[qt];return 2===e.type?e.declTNode:1===e.type?n[xo]:null}function fx(n,e,t){if(t&si.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&si.Host||(r=Ih(o),null===r||(o=o[Ia],10&r.type))););if(null===r)return!1;e=r,n=o}const i=An.lFrame=W_();return i.currentTNode=e,i.lView=n,!0}function jp(n){const e=W_(),t=n[qt];An.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function W_(){const n=An.lFrame,e=null===n?null:n.child;return null===e?Dh(n):e}function Dh(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function $_(){const n=An.lFrame;return An.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Rh=$_;function kh(){const n=$_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Eo(){return An.lFrame.selectedIndex}function Fa(n){An.lFrame.selectedIndex=n}function ir(){const n=An.lFrame;return F_(n.tView,n.selectedIndex)}let X_=!0;function zp(){return X_}function _c(n){X_=n}function Hp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function qs(n,e,t){Gp(n,e,3,t)}function hu(n,e,t,i){(3&n[Wn])===t&&Gp(n,e,t,i)}function Oh(n,e){let t=n[Wn];(3&t)===e&&(t&=8191,t+=1,n[Wn]=t)}function Gp(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&n[pa]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[pa]+=65536),(a<o||-1==o)&&(fu(n,t,e,c),n[pa]=(4294901760&n[pa])+c+2),c++}function Ph(n,e){Ss(4,n,e);const t=Xs(null);try{e.call(n)}finally{Xs(t),Ss(5,n,e)}}function fu(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[Wn]>>13<n[pa]>>16&&(3&n[Wn])===e&&(n[Wn]+=8192,Ph(a,o)):Ph(a,o)}const bn=-1;class ul{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Wp(n){return n!==bn}function Nh(n){return 32767&n}function Fh(n,e){let t=function gx(n){return n>>16}(n),i=e;for(;t>0;)i=i[Ia],t--;return i}let J_=!0;function $p(n){const e=J_;return J_=n,e}const So=255,Yp=5;let fC=0;const Ks={};function Xp(n,e){const t=Z_(n,e);if(-1!==t)return t;const i=e[qt];i.firstCreatePass&&(n.injectorIndex=e.length,ud(i.data,n),ud(e,null),ud(i.blueprint,null));const r=Lh(n,e),o=n.injectorIndex;if(Wp(r)){const s=Nh(r),a=Fh(r,e),c=a[qt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function ud(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Z_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Lh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=vx(r),null===i)return bn;if(t++,r=r[Ia],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return bn}function Q_(n,e,t){!function pC(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(vh)&&(i=t[vh]),null==i&&(i=t[vh]=fC++);const r=i&So;e.data[n+(r>>Yp)]|=1<<r}(n,e,t)}function _x(n,e,t){if(t&si.Optional||void 0!==n)return n;l_()}function bx(n,e,t,i){if(t&si.Optional&&void 0===i&&(i=null),!(t&(si.Self|si.Host))){const r=n[el],o=vo(void 0);try{return r?r.get(e,i,t&si.Optional):kv(e,i,t&si.Optional)}finally{vo(o)}}return _x(i,0,t)}function eb(n,e,t,i=si.Default,r){if(null!==n){if(2048&e[Wn]&&!(i&si.Self)){const s=function yx(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[Wn]&&!(512&s[Wn]);){const a=tb(o,s,t,i|si.Self,Ks);if(a!==Ks)return a;let c=o.parent;if(!c){const l=s[Hv];if(l){const d=l.get(t,Ks,i);if(d!==Ks)return d}c=vx(s),s=s[Ia]}o=c}return r}(n,e,t,i,Ks);if(s!==Ks)return s}const o=tb(n,e,t,i,Ks);if(o!==Ks)return o}return bx(e,t,i,r)}function tb(n,e,t,i,r){const o=function Bh(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(vh)?n[vh]:void 0;return"number"==typeof e?e>=0?e&So:La:e}(t);if("function"==typeof o){if(!fx(e,n,i))return i&si.Host?_x(r,0,i):bx(e,t,i,r);try{let s;if(s=o(i),null!=s||i&si.Optional)return s;l_()}finally{Rh()}}else if("number"==typeof o){let s=null,a=Z_(n,e),c=bn,l=i&si.Host?e[Ki][xo]:null;for((-1===a||i&si.SkipSelf)&&(c=-1===a?Lh(n,e):e[a+8],c!==bn&&nb(i,!1)?(s=e[qt],a=Nh(c),e=Fh(c,e)):a=-1);-1!==a;){const d=e[qt];if(qp(o,a,d.data)){const h=gC(a,e,t,s,i,l);if(h!==Ks)return h}c=e[a+8],c!==bn&&nb(i,e[qt].data[a+8]===l)&&qp(o,a,e)?(s=d,a=Nh(c),e=Fh(c,e)):a=-1}}return r}function gC(n,e,t,i,r,o){const s=e[qt],a=s.data[n+8],d=mu(a,s,t,null==i?rd(a)&&J_:i!=s&&0!=(3&a.type),r&si.Host&&o===a);return null!==d?fl(e,s,d,a):Ks}function mu(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,d=o>>20,f=r?a+d:n.directiveEnd;for(let m=i?a:a+d;m<f;m++){const y=s[m];if(m<c&&t===y||m>=c&&y.type===t)return m}if(r){const m=s[c];if(m&&jr(m)&&m.type===t)return c}return null}function fl(n,e,t,i){let r=n[t];const o=e.data;if(function q_(n){return n instanceof ul}(r)){const s=r;s.resolving&&function NS(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Pt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function xi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Vn(n)}(o[t]));const a=$p(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?vo(s.injectImpl):null;fx(n,i,si.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function hC(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=Zv(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&vo(l),$p(a),s.resolving=!1,Rh()}}return r}function qp(n,e,t){return!!(t[e+(n>>Yp)]&1<<n)}function nb(n,e){return!(n&si.Self||n&si.Host&&e)}class Co{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return eb(this._tNode,this._lView,e,_p(i),t)}}function La(){return new Co(qr(),Dt())}function gi(n){return ac(()=>{const e=n.prototype.constructor,t=e[cc]||ib(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[cc]||ib(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function ib(n){return ns(n)?()=>{const e=ib(an(n));return e&&e()}:od(n)}function vx(n){const e=n[qt],t=e.type;return 2===t?e.declTNode:1===t?n[xo]:null}function bc(n){return function mC(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(bt(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(qr(),n)}const bu="__parameters__";function vu(n,e,t){return ac(()=>{const i=function rb(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,d){const h=c.hasOwnProperty(bu)?c[bu]:Object.defineProperty(c,bu,{value:[]})[bu];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function ho(n,e){n.forEach(t=>Array.isArray(t)?ho(t,e):e(t))}function Ex(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Jp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Uh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Is(n,e,t){let i=wu(n,e);return i>=0?n[1|i]=t:(i=~i,function AC(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Vh(n,e){const t=wu(n,e);if(t>=0)return n[1|t]}function wu(n,e){return function Sx(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Eu=Ql(vu("Optional"),8),Qp=Ql(vu("SkipSelf"),4);function im(n){return 128==(128&n.flags)}var pl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(pl||{});const db=new Map;let om=0;const pb="__ngContext__";function Mo(n,e){os(e)?(n[pb]=e[wh],function Ux(n){db.set(n[wh],n)}(e)):n[pb]=e}let _b;function bb(n,e){return _b(n,e)}function Yh(n){const e=n[nr];return jo(e)?e[nr]:e}function Gx(n){return Zs(n[nd])}function Wx(n){return Zs(n[Ii])}function Zs(n){for(;null!==n&&!jo(n);)n=n[Ii];return n}function Cu(n,e,t,i,r){if(null!=i){let o,s=!1;jo(i)?o=i:os(i)&&(s=!0,i=i[gr]);const a=Ui(i);0===n&&null!==t?null==r?dr(e,t,a):Di(e,t,a,r||null,!0):1===n&&null!==t?Di(e,t,a,r||null,!0):2===n?function vc(n,e,t){const i=um(n,e);i&&function iM(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function Jx(n,e,t,i,r){const o=t[Ar];o!==Ui(t)&&Cu(e,n,i,o,r);for(let a=co;a<t.length;a++){const c=t[a];Jh(c[qt],c,n,e,i,o)}}(e,n,o,t,r)}}function cm(n,e,t){return n.createElement(e,t)}function $x(n,e){const t=n[iu],i=t.indexOf(e);ox(e),t.splice(i,1)}function lm(n,e){if(n.length<=co)return;const t=co+e,i=n[t];if(i){const r=i[nl];null!==r&&r!==n&&$x(r,i),e>0&&(n[t-1][Ii]=i[Ii]);const o=Jp(n,co+e);!function as(n,e){Jh(n,e,e[Rn],2,null,null),e[gr]=null,e[xo]=null}(i[qt],i);const s=o[Da];null!==s&&s.detachView(o[qt]),i[nr]=null,i[Ii]=null,i[Wn]&=-129}return i}function yb(n,e){if(!(256&e[Wn])){const t=e[Rn];e[rl]&&S_(e[rl]),e[uc]&&S_(e[uc]),t.destroyNode&&Jh(n,e,t,3,null,null),function gl(n){let e=n[nd];if(!e)return Xh(n[qt],n);for(;e;){let t=null;if(os(e))t=e[nd];else{const i=e[co];i&&(t=i)}if(!t){for(;e&&!e[Ii]&&e!==n;)os(e)&&Xh(e[qt],e),e=e[nr];null===e&&(e=n),os(e)&&Xh(e[qt],e),t=e&&e[Ii]}e=t}}(e)}}function Xh(n,e){if(!(256&e[Wn])){e[Wn]&=-129,e[Wn]|=256,function yc(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof ul)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];Ss(4,a,c);try{c.call(a)}finally{Ss(5,a,c)}}else{Ss(4,r,o);try{o.call(r)}finally{Ss(5,r,o)}}}}}(n,e),function nM(n,e){const t=n.cleanup,i=e[nu];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[nu]=null);const r=e[il];if(null!==r){e[il]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[qt].type&&e[Rn].destroy();const t=e[nl];if(null!==t&&jo(e[nr])){t!==e[nr]&&$x(t,e);const i=e[Da];null!==i&&i.detachView(n)}!function hb(n){db.delete(n[wh])}(e)}}function dm(n,e,t){return function qh(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[gr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===fa.None||o===fa.Emulated)return null}return ss(i,t)}}(n,e.parent,t)}function Di(n,e,t,i,r){n.insertBefore(e,t,i,r)}function dr(n,e,t){n.appendChild(e,t)}function vb(n,e,t,i,r){null!==i?Di(n,e,t,i,r):dr(n,e,t)}function um(n,e){return n.parentNode(e)}function Yx(n,e,t){return xb(n,e,t)}let fd,Zh,Cb,xb=function Xx(n,e,t){return 40&n.type?ss(n,t):null};function fm(n,e,t,i){const r=dm(n,i,e),o=e[Rn],a=Yx(i.parent||e[xo],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)vb(o,r,t[c],a,!1);else vb(o,r,t,a,!1);void 0!==fd&&fd(o,i,e,t,r)}function Mu(n,e){if(null!==e){const t=e.type;if(3&t)return ss(e,n);if(4&t)return Ho(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Mu(n,i);{const r=n[e.index];return jo(r)?Ho(-1,r):Ui(r)}}if(32&t)return bb(e,n)()||Ui(n[e.index]);{const i=Kh(n,e);return null!==i?Array.isArray(i)?i[0]:Mu(Yh(n[Ki]),i):Mu(n,e.next)}}return null}function Kh(n,e){return null!==e?n[Ki][xo].projection[e.projection]:null}function Ho(n,e){const t=co+n+1;if(t<e.length){const i=e[t],r=i[qt].firstChild;if(null!==r)return Mu(i,r)}return e[Ar]}function wb(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],c=t.type;if(s&&0===e&&(a&&Mo(Ui(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)wb(n,e,t.child,i,r,o,!1),Cu(e,n,r,a,o);else if(32&c){const l=bb(t,i);let d;for(;d=l();)Cu(e,n,r,d,o);Cu(e,n,r,a,o)}else 16&c?Kx(n,e,i,t,r,o):Cu(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Jh(n,e,t,i,r,o){wb(t,i,n.firstChild,e,r,o,!1)}function Kx(n,e,t,i,r,o){const s=t[Ki],c=s[xo].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Cu(e,n,r,c[l],o);else{let l=c;const d=s[nr];im(i)&&(l.flags|=128),wb(n,e,l,d,r,o,!0)}}function Eb(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Ds(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&Et(n,e,i),null!==r&&Eb(n,e,r),null!==o&&function Jn(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function bi(n){return function Ab(){if(void 0===Zh&&(Zh=null,Mi.trustedTypes))try{Zh=Mi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zh}()?.createHTML(n)||n}class pd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tv})`}}class lM extends pd{getTypeName(){return"HTML"}}class dM extends pd{getTypeName(){return"Style"}}class uM extends pd{getTypeName(){return"Script"}}class Tb extends pd{getTypeName(){return"URL"}}class hM extends pd{getTypeName(){return"ResourceURL"}}function Go(n){return n instanceof pd?n.changingThisBreaksApplicationSecurity:n}function Ba(n,e){const t=function fM(n){return n instanceof pd&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Tv})`)}return t===e}class iw{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(bi(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class _M{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=bi(e),t}}const yM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qh(n){return(n=String(n)).match(yM)?n:"unsafe:"+n}function wc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function ef(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const rw=wc("area,br,col,hr,img,wbr"),Ib=wc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Db=wc("rp,rt"),Rb=ef(rw,ef(Ib,wc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ef(Db,wc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ef(Db,Ib)),_l=wc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ow=ef(_l,wc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vM=wc("script,style,template");class xM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Rb.hasOwnProperty(t))return this.sanitizedSomething=!0,!vM.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!ow.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;_l[a]&&(c=Qh(c)),this.buf.push(" ",s,'="',cw(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Rb.hasOwnProperty(t)&&!rw.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(cw(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const sw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,aw=/([^\#-~ |!])/g;function cw(n){return n.replace(/&/g,"&amp;").replace(sw,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(aw,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mm;function lw(n,e){let t=null;try{mm=mm||function nw(n){const e=new _M(n);return function bM(){try{return!!(new window.DOMParser).parseFromString(bi(""),"text/html")}catch{return!1}}()?new iw(e):e}(n);let i=e?String(e):"";t=mm.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=mm.getInertBodyElement(i)}while(i!==o);return bi((new xM).sanitizeChildren(kb(t)||t))}finally{if(t){const i=kb(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function kb(n){return"content"in n&&function wM(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Jr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Jr||{});function Ob(n){const e=function tf(){const n=Dt();return n&&n[tl].sanitizer}();return e?e.sanitize(Jr.URL,n)||"":Ba(n,"URL")?Go(n):Qh(Vn(n))}class vt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=At({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const nf=new vt("ENVIRONMENT_INITIALIZER"),gm=new vt("INJECTOR",-1),hw=new vt("INJECTOR_DEF_TYPES");class Pb{get(e,t=Jl){if(t===Jl){const i=new Error(`NullInjectorError: No provider for ${Ht(e)}!`);throw i.name="NullInjectorError",i}return t}}function IM(...n){return{\u0275providers:_m(0,n),\u0275fromNgModule:!0}}function _m(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return ho(e,s=>{const a=s;rf(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Fb(r,o),t}function Fb(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Lb(r,o=>{e(o,i)})}}function rf(n,e,t,i){if(!(n=an(n)))return!1;let r=null,o=Lo(n);const s=!o&&_i(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const c=n.ngModule;if(o=Lo(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)rf(l,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{ho(o.imports,d=>{rf(d,e,t,i)&&(l||=[],l.push(d))})}finally{}void 0!==l&&Fb(l,e)}if(!a){const l=od(r)||(()=>new r);e({provide:r,useFactory:l,deps:Xn},r),e({provide:hw,useValue:r,multi:!0},r),e({provide:nf,useValue:()=>rt(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=n;Lb(c,d=>{e(d,l)})}}}return r!==n&&void 0!==n.providers}function Lb(n,e){for(let t of n)c_(t)&&(t=t.\u0275providers),Array.isArray(t)?Lb(t,e):e(t)}const DM=ht({provide:String,useValue:ht});function sf(n){return null!==n&&"object"==typeof n&&DM in n}function md(n){return"function"==typeof n}const af=new vt("Set Injector scope."),bm={},RM={};let Bb;function ym(){return void 0===Bb&&(Bb=new Pb),Bb}class ds{}class vm extends ds{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jb(e,s=>this.processProvider(s)),this.records.set(gm,Iu(void 0,this)),r.has("environment")&&this.records.set(ds,Iu(void 0,this));const o=this.records.get(af);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hw.multi,Xn,si.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Jc(this),i=vo(void 0);try{return e()}finally{Jc(t),vo(i)}}get(e,t=Jl,i=si.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xh))return e[xh](this);i=_p(i);const o=Jc(this),s=vo(void 0);try{if(!(i&si.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function NM(n){return"function"==typeof n||"object"==typeof n&&n instanceof vt}(e)&&gh(e);c=l&&this.injectableDefInScope(l)?Iu(cf(e),bm):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&si.Self?ym():this.parent).get(e,t=i&si.Optional&&t===Jl?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[_h]=a[_h]||[]).unshift(Ht(e)),o)throw a;return function Zc(n,e,t,i){const r=n[_h];throw e[f_]&&r.unshift(e[f_]),n.message=function bp(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ht(e);if(Array.isArray(e))r=e.map(Ht).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ht(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(h_,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[_h]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{vo(s),Jc(o)}}resolveInjectorInitializers(){const e=Jc(this),t=vo(void 0);try{const r=this.get(nf.multi,Xn,si.Self);for(const o of r)o()}finally{Jc(e),vo(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Ht(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pt(205,!1)}processProvider(e){let t=md(e=an(e))?e:an(e&&e.provide);const i=function OM(n){return sf(n)?Iu(void 0,n.useValue):Iu(mw(n),bm)}(e);if(md(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Iu(void 0,bm,!0),r.factory=()=>p_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===bm&&(t.value=RM,t.value=t.factory()),"object"==typeof t.value&&t.value&&function PM(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=an(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function cf(n){const e=gh(n),t=null!==e?e.factory:od(n);if(null!==t)return t;if(n instanceof vt)throw new Pt(204,!1);if(n instanceof Function)return function kM(n){const e=n.length;if(e>0)throw Uh(e,"?"),new Pt(204,!1);const t=function US(n){return n&&(n[hp]||n[oc])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Pt(204,!1)}function mw(n,e,t){let i;if(md(n)){const r=an(n);return od(r)||cf(r)}if(sf(n))i=()=>an(n.useValue);else if(function pw(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...p_(n.deps||[]));else if(function fw(n){return!(!n||!n.useExisting)}(n))i=()=>rt(an(n.useExisting));else{const r=an(n&&(n.useClass||n.provide));if(!function gw(n){return!!n.deps}(n))return od(r)||cf(r);i=()=>new r(...p_(n.deps))}return i}function Iu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function jb(n,e){for(const t of n)Array.isArray(t)?jb(t,e):t&&c_(t)?jb(t.\u0275providers,e):e(t)}const gd=new vt("AppId",{providedIn:"root",factory:()=>Ub}),Ub="ng",_w=new vt("Platform Initializer"),ma=new vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Vr=new vt("AnimationModuleType"),Vb=new vt("CSP nonce",{providedIn:"root",factory:()=>function Tu(){if(void 0!==Cb)return Cb;if(typeof document<"u")return document;throw new Pt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Se=(n,e,t)=>null;function ot(n,e,t=!1){return Se(n,e,t)}class Rs{}class To{}class Ec{resolveComponentFactory(e){throw function ks(n){const e=Error(`No component factory found for ${Ht(n)}.`);return e.ngComponent=n,e}(e)}}let Ac=(()=>{class n{static#e=this.NULL=new Ec}return n})();function yX(){return Am(qr(),Dt())}function Am(n,e){return new vn(ss(n,e))}let vn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=yX}return n})();function vX(n){return n instanceof vn?n.nativeElement:n}class xF{}let wX=(()=>{class n{static#e=this.\u0275prov=At({token:n,providedIn:"root",factory:()=>null})}return n})();class ku{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const EX=new ku("16.2.10"),BM={};function SF(n,e=null,t=null,i){const r=CF(n,e,t,i);return r.resolveInjectorInitializers(),r}function CF(n,e=null,t=null,i,r=new Set){const o=[t||Xn,IM(n)];return i=i||("object"==typeof n?void 0:Ht(n)),new vm(o,e||ym(),i||null,r)}let ur=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Jl;static#t=this.NULL=new Pb;static create(t,i){if(Array.isArray(t))return SF({name:""},i,t,"");{const r=t.name??"";return SF({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=At({token:n,providedIn:"any",factory:()=>rt(gm)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function UM(n){return n.ngOriginalError}class ga{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&UM(e);for(;t&&UM(t);)t=UM(t);return t||null}}function zM(n){return e=>{setTimeout(n,void 0,e)}}const tn=class DX extends U{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=zM(o),r&&(r=zM(r)),s&&(s=zM(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof T&&e.add(a),a}};function TF(...n){}class nn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tn(!1),this.onMicrotaskEmpty=new tn(!1),this.onStable=new tn(!1),this.onError=new tn(!1),typeof Zone>"u")throw new Pt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function RX(){const n="function"==typeof Mi.requestAnimationFrame;let e=Mi[n?"requestAnimationFrame":"setTimeout"],t=Mi[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function PX(n){const e=()=>{!function OX(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,GM(n),n.isCheckStableRunning=!0,HM(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),GM(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function FX(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return IF(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),DF(n)}},onInvoke:(t,i,r,o,s,a,c)=>{try{return IF(n),t.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),DF(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,GM(n),HM(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nn.isInAngularZone())throw new Pt(909,!1)}static assertNotInAngularZone(){if(nn.isInAngularZone())throw new Pt(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,kX,TF,TF);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const kX={};function HM(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function GM(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function IF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function DF(n){n._nesting--,HM(n)}class NX{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tn,this.onMicrotaskEmpty=new tn,this.onStable=new tn,this.onError=new tn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const RF=new vt("",{providedIn:"root",factory:kF});function kF(){const n=zt(nn);let e=!0;return Rr(new Ye(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Ye(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{nn.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=n.onUnstable.subscribe(()=>{nn.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(ts()))}let WM=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=At({token:n,providedIn:"root",factory:()=>new n})}return n})();function Xb(n){for(;n;){n[Wn]|=64;const e=Yh(n);if(x_(n)&&!e)return n;n=e}return null}const LF=new vt("",{providedIn:"root",factory:()=>!1});let yw=null;function VF(n,e){return n[e]??GF()}function zF(n,e){const t=GF();t.producerNode?.length&&(n[e]=yw,t.lView=n,yw=HF())}const $X={...Oa,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Xb(n.lView)},lView:null};function HF(){return Object.create($X)}function GF(){return yw??=HF(),yw}const qn={};function Ot(n){WF(Kn(),Dt(),Eo()+n,!1)}function WF(n,e,t,i){if(!i)if(3==(3&e[Wn])){const o=n.preOrderCheckHooks;null!==o&&qs(e,o,t)}else{const o=n.preOrderHooks;null!==o&&hu(e,o,0,t)}Fa(t)}function ze(n,e=si.Default){const t=Dt();return null===t?rt(n,e):eb(qr(),t,an(n),e)}function Ou(){throw new Error("invalid")}function vw(n,e,t,i,r,o,s,a,c,l,d){const h=e.blueprint.slice();return h[gr]=r,h[Wn]=140|i,(null!==l||n&&2048&n[Wn])&&(h[Wn]|=2048),lu(h),h[nr]=h[Ia]=n,h[_r]=t,h[tl]=s||n&&n[tl],h[Rn]=a||n&&n[Rn],h[el]=c||n&&n[el]||null,h[xo]=o,h[wh]=function WC(){return om++}(),h[dc]=d,h[Hv]=l,h[Ki]=2==e.type?n[Ki]:h,h}function Mm(n,e,t,i,r){let o=n.data[e];if(null===o)o=function $M(n,e,t,i,r){const o=U_(),s=V_(),c=n.data[e]=function eq(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return ld()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,i,r),function lC(){return An.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function dd(){const n=An.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Pa(o,!0),o}function qb(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function $F(n,e,t,i,r){const o=VF(e,rl),s=Eo(),a=2&i;try{Fa(-1),a&&e.length>ai&&WF(n,e,ai,!1),Ss(a?2:0,r);const l=a?o:null,d=Rp(l);try{null!==l&&(l.dirty=!1),t(i,r)}finally{sd(l,d)}}finally{a&&null===e[rl]&&zF(e,rl),Fa(s),Ss(a?3:1,r)}}function YM(n,e,t){if(v_(e)){const i=Xs(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Xs(i)}}}function XM(n,e,t){Fp()&&(function aq(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;rd(t)&&function pq(n,e,t){const i=ss(e,n),r=YF(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=xw(n,vw(n,r,null,s,i,e,null,n[tl].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Xp(t,e),Mo(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const c=n.data[a],l=fl(e,n,a,t);Mo(l,e),null!==s&&mq(0,a-r,l,c,0,s),jr(c)&&(Cs(t.index,e)[_r]=fl(e,n,a,t))}}(n,e,t,ss(t,e)),64==(64&t.flags)&&ZF(n,e,t))}function qM(n,e,t=ss){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function YF(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=KM(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function KM(n,e,t,i,r,o,s,a,c,l,d){const h=ai+i,f=h+r,m=function XX(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:qn);return t}(h,f),y="function"==typeof l?l():l;return m[qt]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:d}}let XF=n=>null;function qF(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?KF(t,e,r,o):i.hasOwnProperty(r)&&KF(t,e,i[r],o)}return t}function KF(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function _a(n,e,t,i,r,o,s,a){const c=ss(e,t);let d,l=e.inputs;!a&&null!=l&&(d=l[i])?(tT(n,t,d,i,r),rd(e)&&function iq(n,e){const t=Cs(e,n);16&t[Wn]||(t[Wn]|=64)}(t,e.index)):3&e.type&&(i=function nq(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function JM(n,e,t,i){if(Fp()){const r=null===i?null:{"":-1},o=function lq(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(ed(e,s.selectors,!1))if(i||(i=[]),jr(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),ZM(n,e,a.length)}else i.unshift(s),ZM(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&JF(n,e,t,s,r,a),r&&function dq(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new Pt(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=On(t.mergedAttrs,t.attrs)}function JF(n,e,t,i,r,o){for(let l=0;l<i.length;l++)Q_(Xp(t,e),n,i[l].type);!function hq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const d=i[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=qb(n,e,i.length,null);for(let l=0;l<i.length;l++){const d=i[l];t.mergedAttrs=On(t.mergedAttrs,d.hostAttrs),fq(n,t,e,c,d),uq(c,d,r),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function tq(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let d=e.directiveStart;d<r;d++){const h=o[d],f=t?t.get(h):null,y=f?f.outputs:null;c=qF(h.inputs,d,c,f?f.inputs:null),l=qF(h.outputs,d,l,y);const E=null===c||null===s||vp(e)?null:gq(c,d,s);a.push(E)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function ZF(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function hx(){return An.lFrame.currentDirectiveIndex}();try{Fa(o);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];Bp(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&cq(c,l)}}finally{Fa(-1),Bp(s)}}function cq(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function ZM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function uq(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;jr(e)&&(t[""]=n)}}function fq(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=od(r.type)),s=new ul(o,jr(r),ze);n.blueprint[i]=s,t[i]=s,function oq(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function sq(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,qb(n,t,r.hostVars,qn),r)}function bl(n,e,t,i,r,o){const s=ss(n,e);!function QM(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?Vn(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[Rn],s,o,n.value,t,i,r)}function mq(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)QF(i,t,s[a++],s[a++],s[a++])}function QF(n,e,t,i,r){const o=Xs(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{Xs(o)}}function gq(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function eL(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function tL(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=n.data[o];dl(t[i]),s.contentQueries(2,e[o],o)}}}function xw(n,e){return n[nd]?n[id][Ii]=e:n[nd]=e,n[id]=e,e}function eT(n,e,t){dl(0);const i=Xs(null);try{e(n,t)}finally{Xs(i)}}function nL(n){return n[nu]||(n[nu]=[])}function iL(n){return n.cleanup||(n.cleanup=[])}function oL(n,e){const t=n[el],i=t?t.get(ga,null):null;i&&i.handleError(e)}function tT(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];QF(n.data[s],e[s],i,a,r)}}function _q(n,e){const t=Cs(e,n),i=t[qt];!function bq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[gr];null!==r&&null===t[dc]&&(t[dc]=ot(r,t[el])),nT(i,t,t[_r])}function nT(n,e,t){jp(e);try{const i=n.viewQuery;null!==i&&eT(1,i,t);const r=n.template;null!==r&&$F(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&tL(n,e),n.staticViewQueries&&eT(2,n.viewQuery,t);const o=n.components;null!==o&&function yq(n,e){for(let t=0;t<e.length;t++)_q(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Wn]&=-5,kh()}}let sL=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,s=function iC(n,e,t){const i=Object.create(R_);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=s=>{i.cleanupFn=s};return i.ref={notify:()=>A_(i),run:()=>{if(i.dirty=!1,i.hasRun&&!fc(i))return;i.hasRun=!0;const s=Rp(i);try{i.cleanupFn(),i.cleanupFn=Kv,i.fn(r)}finally{sd(i,s)}},cleanup:()=>i.cleanupFn()},i.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,o)},r);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=At({token:n,providedIn:"root",factory:()=>new n})}return n})();function ww(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=Yn(r,a):2==o&&(i=Yn(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Kb(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(Ui(o)),jo(o)&&aL(o,i);const s=t.type;if(8&s)Kb(n,e,t.child,i);else if(32&s){const a=bb(t,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=Kh(e,t);if(Array.isArray(a))i.push(...a);else{const c=Yh(e[Ki]);Kb(c[qt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function aL(n,e){for(let t=co;t<n.length;t++){const i=n[t],r=i[qt].firstChild;null!==r&&Kb(i[qt],i,r,e)}n[Ar]!==n[gr]&&e.push(n[Ar])}function Ew(n,e,t,i=!0){const r=e[tl],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{cL(n,e,n.template,t)}catch(c){throw i&&oL(e,c),c}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function cL(n,e,t,i){const r=e[Wn];if(256!=(256&r)){e[tl].effectManager?.flush(),jp(e);try{lu(e),function Uo(n){return An.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&$F(n,e,t,2,i);const s=3==(3&r);if(s){const l=n.preOrderCheckHooks;null!==l&&qs(e,l,null)}else{const l=n.preOrderHooks;null!==l&&hu(e,l,0,null),Oh(e,0)}if(function wq(n){for(let e=Gx(n);null!==e;e=Wx(e)){if(!e[Eh])continue;const t=e[iu];for(let i=0;i<t.length;i++){rx(t[i])}}}(e),lL(e,2),null!==n.contentQueries&&tL(n,e),s){const l=n.contentCheckHooks;null!==l&&qs(e,l)}else{const l=n.contentHooks;null!==l&&hu(e,l,1),Oh(e,1)}!function YX(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=VF(e,uc);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)Fa(~o);else{const s=o,a=t[++r],c=t[++r];du(a,s),i.dirty=!1;const l=Rp(i);try{c(2,e[s])}finally{sd(i,l)}}}}finally{null===e[uc]&&zF(e,uc),Fa(-1)}}(n,e);const a=n.components;null!==a&&uL(e,a,0);const c=n.viewQuery;if(null!==c&&eT(2,c,i),s){const l=n.viewCheckHooks;null!==l&&qs(e,l)}else{const l=n.viewHooks;null!==l&&hu(e,l,2),Oh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Wn]&=-73,ox(e)}finally{kh()}}}function lL(n,e){for(let t=Gx(n);null!==t;t=Wx(t))for(let i=co;i<t.length;i++)dL(t[i],e)}function Eq(n,e,t){dL(Cs(e,n),t)}function dL(n,e){if(!function ri(n){return 128==(128&n[Wn])}(n))return;const t=n[qt],i=n[Wn];if(80&i&&0===e||1024&i||2===e)cL(t,n,t.template,n[_r]);else if(n[Or]>0){lL(n,1);const r=t.components;null!==r&&uL(n,r,1)}}function uL(n,e,t){for(let i=0;i<e.length;i++)Eq(n,e[i],t)}class Jb{get rootNodes(){const e=this._lView,t=e[qt];return Kb(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_r]}set context(e){this._lView[_r]=e}get destroyed(){return 256==(256&this._lView[Wn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[nr];if(jo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(lm(e,i),Jp(t,i))}this._attachedToViewContainer=!1}yb(this._lView[qt],this._lView)}onDestroy(e){!function Ms(n,e){if(256==(256&n[Wn]))throw new Pt(911,!1);null===n[il]&&(n[il]=[]),n[il].push(e)}(this._lView,e)}markForCheck(){Xb(this._cdRefInjectingView||this._lView)}detach(){this._lView[Wn]&=-129}reattach(){this._lView[Wn]|=128}detectChanges(){Ew(this._lView[qt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function QC(n,e){Jh(n,e,e[Rn],2,null,null)}(this._lView[qt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Pt(902,!1);this._appRef=e}}class Aq extends Jb{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Ew(e[qt],e,e[_r],!1)}checkNoChanges(){}get context(){return null}}class hL extends Ac{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=_i(e);return new Zb(t,this.ngModule)}}function fL(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Cq{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=_p(i);const r=this.injector.get(e,BM,i);return r!==BM||t===BM?r:this.parentInjector.get(e,t,i)}}class Zb extends To{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=fL(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return fL(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function YS(n){return n.map(Ep).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof ds?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Cq(e,o):e,a=s.get(xF,null);if(null===a)throw new Pt(407,!1);const h={rendererFactory:a,sanitizer:s.get(wX,null),effectManager:s.get(sL,null),afterRenderEventManager:s.get(WM,null)},f=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",y=i?function qX(n,e,t,i){const o=i.get(LF,!1)||t===fa.ShadowDom,s=n.selectRootElement(e,o);return function KX(n){XF(n)}(s),s}(f,i,this.componentDef.encapsulation,s):cm(f,m,function Sq(n){const e=n.toLowerCase();return"svg"===e?ix:"math"===e?"math":null}(m)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let $=null;null!==y&&($=ot(y,s,!0));const Y=KM(0,null,null,1,0,null,null,null,null,null,null),pe=vw(null,Y,null,H,null,null,h,f,s,null,$);let De,Ve;jp(pe);try{const nt=this.componentDef;let Ze,dt=null;nt.findHostDirectiveDefs?(Ze=[],dt=new Map,nt.findHostDirectiveDefs(nt,Ze,dt),Ze.push(nt)):Ze=[nt];const mt=function Tq(n,e){const t=n[qt],i=ai;return n[i]=e,Mm(t,i,2,"#host",null)}(pe,y),_t=function Iq(n,e,t,i,r,o,s){const a=r[qt];!function Dq(n,e,t,i){for(const r of n)e.mergedAttrs=On(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(ww(e,e.mergedAttrs,!0),null!==t&&Ds(i,t,e))}(i,n,e,s);let c=null;null!==e&&(c=ot(e,r[el]));const l=o.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const h=vw(r,YF(t),null,d,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&ZM(a,n,i.length-1),xw(r,h),r[n.index]=h}(mt,y,nt,Ze,pe,h,f);Ve=F_(Y,ai),y&&function kq(n,e,t,i){if(i)Et(n,t,["ng-version",EX.full]);else{const{attrs:r,classes:o}=function XS(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!rs(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Et(n,t,r),o&&o.length>0&&Eb(n,t,o.join(" "))}}(f,nt,y,i),void 0!==t&&function Oq(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(Ve,this.ngContentSelectors,t),De=function Rq(n,e,t,i,r,o){const s=qr(),a=r[qt],c=ss(s,r);JF(a,r,s,t,null,i);for(let d=0;d<t.length;d++)Mo(fl(r,a,s.directiveStart+d,s),r);ZF(a,r,s),c&&Mo(c,r);const l=fl(r,a,s.directiveStart+s.componentOffset,s);if(n[_r]=r[_r]=l,null!==o)for(const d of o)d(l,e);return YM(a,s,n),l}(_t,nt,Ze,dt,pe,[Pq]),nT(Y,pe,null)}finally{kh()}return new Mq(this.componentType,De,Am(Ve,pe),pe,Ve)}}class Mq extends Rs{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Aq(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;tT(o[qt],o,r,e,t),this.previousInputValues.set(e,t),Xb(Cs(this._tNode.index,o))}}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Pq(){const n=qr();Hp(Dt()[qt],n)}function pn(n){let e=function pL(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(jr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Pt(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=Aw(n.inputs),s.inputTransforms=Aw(n.inputTransforms),s.declaredInputs=Aw(n.declaredInputs),s.outputs=Aw(n.outputs);const a=r.hostBindings;a&&Bq(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&Fq(n,c),l&&Lq(n,l),Nt(n.inputs,r.inputs),Nt(n.declaredInputs,r.declaredInputs),Nt(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Nt(s.inputTransforms,r.inputTransforms)),jr(r)&&r.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===pn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Nq(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=On(r.hostAttrs,t=On(t,r.hostAttrs))}}(i)}function Aw(n){return n===Bo?{}:n===Xn?[]:n}function Fq(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function Lq(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function Bq(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Sw(n){return!!function iT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function yl(n,e,t){return n[e]=t}function us(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ei(n,e,t,i){const r=Dt();return us(r,Vo(),e)&&(Kn(),bl(ir(),r,n,e,t,i)),Ei}function Im(n,e,t,i){return us(n,Vo(),t)?e+Vn(t)+i:qn}function hn(n,e,t,i,r,o,s,a){const c=Dt(),l=Kn(),d=n+ai,h=l.firstCreatePass?function lK(n,e,t,i,r,o,s,a,c){const l=e.consts,d=Mm(e,n,4,s||null,cl(l,a));JM(e,t,d,cl(l,c)),Hp(e,d);const h=d.tView=KM(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,l,c,e,t,i,r,o,s):l.data[d];Pa(h,!1);const f=RL(l,c,h,n);zp()&&fm(l,c,f,h),Mo(f,c),xw(c,c[d]=eL(f,c,f,h)),Tp(h)&&XM(l,c,h),null!=s&&qM(c,h,a)}let RL=function kL(n,e,t,i){return _c(!0),e[Rn].createComment("")};function Qs(n){return al(function dx(){return An.lFrame.contextLView}(),ai+n)}function Bt(n,e,t){const i=Dt();return us(i,Vo(),e)&&_a(Kn(),ir(),i,n,e,i[Rn],t,!1),Bt}function lT(n,e,t,i,r){const s=r?"class":"style";tT(n,t,e.inputs[s],s,i)}function St(n,e,t,i){const r=Dt(),o=Kn(),s=ai+n,a=r[Rn],c=o.firstCreatePass?function fK(n,e,t,i,r,o){const s=e.consts,c=Mm(e,n,2,i,cl(s,r));return JM(e,t,c,cl(s,o)),null!==c.attrs&&ww(c,c.attrs,!1),null!==c.mergedAttrs&&ww(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,t,i):o.data[s],l=OL(o,r,c,a,e,n);r[s]=l;const d=Tp(c);return Pa(c,!0),Ds(a,l,c),32!=(32&c.flags)&&zp()&&fm(o,r,l,c),0===function ax(){return An.lFrame.elementDepthCount}()&&Mo(l,r),function Ts(){An.lFrame.elementDepthCount++}(),d&&(XM(o,r,c),YM(o,c,r)),null!==i&&qM(r,c),St}function Rt(){let n=qr();V_()?z_():(n=n.parent,Pa(n,!1));const e=n;(function Lp(n){return An.skipHydrationRootTNode===n})(e)&&function j_(){An.skipHydrationRootTNode=null}(),function ll(){An.lFrame.elementDepthCount--}();const t=Kn();return t.firstCreatePass&&(Hp(t,n),v_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function mx(n){return 0!=(8&n.flags)}(e)&&lT(t,e,Dt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Ao(n){return 0!=(16&n.flags)}(e)&&lT(t,e,Dt(),e.stylesWithoutHost,!1),Rt}function Un(n,e,t,i){return St(n,e,t,i),Rt(),Un}let OL=(n,e,t,i,r,o)=>(_c(!0),cm(i,r,function Y_(){return An.lFrame.currentNamespace}()));function Sc(){return Dt()}function Lm(n){return!!n&&"function"==typeof n.then}function FL(n){return!!n&&"function"==typeof n.subscribe}function mn(n,e,t,i){const r=Dt(),o=Kn(),s=qr();return function BL(n,e,t,i,r,o,s){const a=Tp(i),l=n.firstCreatePass&&iL(n),d=e[_r],h=nL(e);let f=!0;if(3&i.type||s){const E=ss(i,e),M=s?s(E):E,H=h.length,$=s?pe=>s(Ui(pe[i.index])):i.index;let Y=null;if(!s&&a&&(Y=function yK(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[nu],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==Y)(Y.__ngLastListenerFn__||Y).__ngNextListenerFn__=o,Y.__ngLastListenerFn__=o,f=!1;else{o=UL(i,e,d,o,!1);const pe=t.listen(M,r,o);h.push(o,pe),l&&l.push(r,$,H,H+1)}}else o=UL(i,e,d,o,!1);const m=i.outputs;let y;if(f&&null!==m&&(y=m[r])){const E=y.length;if(E)for(let M=0;M<E;M+=2){const De=e[y[M]][y[M+1]].subscribe(o),Ve=h.length;h.push(o,De),l&&l.push(r,i.index,Ve,-(Ve+1))}}}(o,r,r[Rn],s,n,e,i),mn}function jL(n,e,t,i){try{return Ss(6,e,t),!1!==t(i)}catch(r){return oL(n,r),!1}finally{Ss(7,e,t)}}function UL(n,e,t,i,r){return function o(s){if(s===Function)return i;Xb(n.componentOffset>-1?Cs(n.index,e):e);let c=jL(e,t,i,s),l=o.__ngNextListenerFn__;for(;l;)c=jL(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function Ln(n=1){return function Up(n){return(An.lFrame.contextLView=function dC(n,e){for(;n>0;)e=e[Ia],n--;return e}(n,An.lFrame.contextLView))[_r]}(n)}function vK(n,e){let t=null;const i=function xp(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?ed(n,o,!0):$S(i,o))return r}else t=r}return t}function zr(n){const e=Dt()[Ki][xo];if(!e.projection){const i=e.projection=Uh(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=n?vK(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Nn(n,e=0,t){const i=Dt(),r=Kn(),o=Mm(r,ai+n,16,null,t||null);null===o.projection&&(o.projection=e),z_(),(!i[dc]||ld())&&32!=(32&o.flags)&&function oM(n,e,t){Kx(e[Rn],0,e,t,dm(n,t,e),Yx(t.parent||e[xo],t,e))}(r,i,o)}function Dw(n,e,t){return dT(n,"",e,"",t),Dw}function dT(n,e,t,i,r){const o=Dt(),s=Im(o,e,t,i);return s!==qn&&_a(Kn(),ir(),o,n,s,o[Rn],r,!1),dT}function Rw(n,e){return n<<17|e<<2}function Pu(n){return n>>17&32767}function uT(n){return 2|n}function uf(n){return(131068&n)>>2}function hT(n,e){return-131069&n|e<<2}function fT(n){return 1|n}function qL(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?Pu(o):uf(o),c=!1;for(;0!==a&&(!1===c||s);){const d=n[a+1];CK(n[a],e)&&(c=!0,n[a+1]=i?fT(d):uT(d)),a=i?Pu(d):uf(d)}c&&(n[t+1]=i?uT(o):fT(o))}function CK(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&wu(n,e)>=0}const fo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KL(n){return n.substring(fo.key,fo.keyEnd)}function JL(n,e){const t=fo.textEnd;return t===e?-1:(e=fo.keyEnd=function DK(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,fo.key=e,t),Bm(n,e,t))}function Bm(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function kw(n,e,t){return Mc(n,e,t,!1),kw}function Fn(n,e){return Mc(n,e,null,!0),Fn}function ba(n){!function Tc(n,e,t,i){const r=Kn(),o=mc(2);r.firstUpdatePass&&iB(r,null,o,i);const s=Dt();if(t!==qn&&us(s,o,t)){const a=r.data[Eo()];if(aB(a,i)&&!nB(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Yn(c,t||"")),lT(r,a,s,t,i)}else!function UK(n,e,t,i,r,o,s,a){r===qn&&(r=Xn);let c=0,l=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==d||null!==h;){const f=c<r.length?r[c+1]:void 0,m=l<o.length?o[l+1]:void 0;let E,y=null;d===h?(c+=2,l+=2,f!==m&&(y=h,E=m)):null===h||null!==d&&d<h?(c+=2,y=d):(l+=2,y=h,E=m),null!==y&&oB(n,e,t,i,y,E,s,a),d=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}(r,a,s,s[Rn],s[o+1],s[o+1]=function BK(n,e,t){if(null==t||""===t)return Xn;const i=[],r=Go(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}(jK,vl,n,!0)}function vl(n,e){for(let t=function TK(n){return function QL(n){fo.key=0,fo.keyEnd=0,fo.value=0,fo.valueEnd=0,fo.textEnd=n.length}(n),JL(n,Bm(n,0,fo.textEnd))}(e);t>=0;t=JL(e,t))Is(n,KL(e),!0)}function Mc(n,e,t,i){const r=Dt(),o=Kn(),s=mc(2);o.firstUpdatePass&&iB(o,n,s,i),e!==qn&&us(r,s,e)&&oB(o,o.data[Eo()],r,r[Rn],n,r[s+1]=function VK(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ht(Go(n)))),n}(e,t),i,s)}function nB(n,e){return e>=n.expandoStartIndex}function iB(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Eo()],s=nB(n,t);aB(o,i)&&null===e&&!s&&(e=!1),e=function PK(n,e,t,i){const r=function H_(n){const e=An.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=s0(t=pT(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=pT(r,n,e,t,i),null===o){let c=function NK(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==uf(i))return n[Pu(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=pT(null,n,e,c[1],i),c=s0(c,e.attrs,i),function FK(n,e,t,i){n[Pu(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else o=function LK(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=s0(i,n[o].hostAttrs,t);return s0(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function AK(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Pu(s),c=uf(s);n[i]=t;let d,l=!1;if(Array.isArray(t)?(d=t[1],(null===d||wu(t,d)>0)&&(l=!0)):d=t,r)if(0!==c){const f=Pu(n[a+1]);n[i+1]=Rw(f,a),0!==f&&(n[f+1]=hT(n[f+1],i)),n[a+1]=function wK(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Rw(a,0),0!==a&&(n[a+1]=hT(n[a+1],i)),a=i;else n[i+1]=Rw(c,0),0===a?a=i:n[c+1]=hT(n[c+1],i),c=i;l&&(n[i+1]=uT(n[i+1])),qL(n,d,i,!0),qL(n,d,i,!1),function SK(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&wu(o,e)>=0&&(t[i+1]=fT(t[i+1]))}(e,d,n,i,o),s=Rw(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function pT(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=s0(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function s0(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Is(n,s,!!t||e[++o]))}return void 0===n?null:n}function jK(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Is(n,i,t)}function oB(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],d=function EK(n){return 1==(1&n)}(l)?sB(c,e,t,r,uf(l),s):void 0;Ow(d)||(Ow(o)||function xK(n){return 2==(2&n)}(l)&&(o=sB(c,null,t,r,a,s)),function xc(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:pl.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=pl.Important),n.setStyle(t,i,r,o))}}(i,s,Mh(Eo(),t),r,o))}function sB(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),d=l?c[1]:c,h=null===d;let f=t[r+1];f===qn&&(f=h?Xn:void 0);let m=h?Vh(f,i):d===i?f:void 0;if(l&&!Ow(m)&&(m=Vh(c,i)),Ow(m)&&(a=m,s))return a;const y=n[r+1];r=s?Pu(y):uf(y)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Vh(c,i))}return a}function Ow(n){return void 0!==n}function aB(n,e){return 0!=(n.flags&(e?8:16))}function li(n,e=""){const t=Dt(),i=Kn(),r=n+ai,o=i.firstCreatePass?Mm(i,r,1,e,null):i.data[r],s=cB(i,t,o,e,n);t[r]=s,zp()&&fm(i,t,s,o),Pa(o,!1)}let cB=(n,e,t,i,r)=>(_c(!0),function am(n,e){return n.createText(e)}(e[Rn],i));function Io(n){return Os("",n,""),Io}function Os(n,e,t){const i=Dt(),r=Im(i,n,e,t);return r!==qn&&function yd(n,e,t){const i=Mh(e,n);!function ml(n,e,t){n.setValue(e,t)}(n[Rn],i,t)}(i,Eo(),r),Os}function xl(n,e,t){const i=Dt();return us(i,Vo(),e)&&_a(Kn(),ir(),i,n,e,i[Rn],t,!0),xl}const Um="en-US";let TB=Um;function bT(n,e,t,i,r){if(n=an(n),Array.isArray(n))for(let o=0;o<n.length;o++)bT(n[o],e,t,i,r);else{const o=Kn(),s=Dt(),a=qr();let c=md(n)?n:an(n.provide);const l=mw(n),d=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(md(n)||!n.multi){const m=new ul(l,r,ze),y=vT(c,e,r?d:d+f,h);-1===y?(Q_(Xp(a,s),o,c),yT(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[y]=m,s[y]=m)}else{const m=vT(c,e,d+f,h),y=vT(c,e,d,d+f),M=y>=0&&t[y];if(r&&!M||!r&&!(m>=0&&t[m])){Q_(Xp(a,s),o,c);const H=function cZ(n,e,t,i,r){const o=new ul(n,t,ze);return o.multi=[],o.index=e,o.componentProviders=0,QB(o,r,i&&!t),o}(r?aZ:sZ,t.length,r,i,l);!r&&M&&(t[y].providerFactory=H),yT(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(H),s.push(H)}else yT(o,n,m>-1?m:y,QB(t[r?y:m],l,!r&&i));!r&&i&&M&&t[y].componentProviders++}}}function yT(n,e,t,i){const r=md(e),o=function ls(n){return!!n.useClass}(e);if(r||o){const c=(o?an(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const d=l.indexOf(t);-1===d?l.push(t,[i,c]):l[d+1].push(i,c)}else l.push(t,c)}}}function QB(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function vT(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function sZ(n,e,t,i){return xT(this.multi,[])}function aZ(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=fl(t,t[qt],this.providerFactory.index,i);o=a.slice(0,s),xT(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],xT(r,o);return o}function xT(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function di(n,e=[]){return t=>{t.providersResolver=(i,r)=>function oZ(n,e,t){const i=Kn();if(i.firstCreatePass){const r=jr(n);bT(t,i.data,i.blueprint,r,!0),bT(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class ff{}class e3{}class wT extends ff{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hL(this);const r=function Es(n,e){const t=n[Uv]||null;if(!t&&!0===e)throw new Error(`Type ${Ht(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function bd(n){return n instanceof Function?n():n}(r.bootstrap),this._r3Injector=CF(e,t,[{provide:ff,useValue:this},{provide:Ac,useValue:this.componentFactoryResolver},...i],Ht(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ET extends e3{constructor(e){super(),this.moduleType=e}create(e){return new wT(this.moduleType,e,[])}}function Bw(n,e,t){const i=wo()+n,r=Dt();return r[i]===qn?yl(r,i,t?e.call(t):e()):function Qb(n,e){return n[e]}(r,i)}function u3(n,e,t,i,r,o){const s=e+t;return us(n,s,r)?yl(n,s+1,o?i.call(o,r):i(r)):function h0(n,e){const t=n[e];return t===qn?void 0:t}(n,s+1)}function Zr(n,e){const t=Kn();let i;const r=n+ai;t.firstCreatePass?(i=function IZ(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const o=i.factory||(i.factory=od(i.type)),a=vo(ze);try{const c=$p(!1),l=o();return $p(c),function hK(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Dt(),r,l),l}finally{vo(a)}}function Wo(n,e,t){const i=n+ai,r=Dt(),o=al(r,i);return function f0(n,e){return n[qt].data[e].pure}(r,i)?u3(r,wo(),e,o.transform,t,o):o.transform(t)}function OZ(){return this._results[Symbol.iterator]()}class p0{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new tn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=p0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=OZ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Js(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function EC(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function NZ(n,e,t,i=!0){const r=e[qt];if(function eM(n,e,t,i){const r=co+i,o=t.length;i>0&&(t[r-1][Ii]=e),i<o-co?(e[Ii]=t[r],Ex(t,co+i,e)):(t.push(e),e[Ii]=null),e[nr]=t;const s=e[nl];null!==s&&t!==s&&function tM(n,e){const t=n[iu];e[Ki]!==e[nr][nr][Ki]&&(n[Eh]=!0),null===t?n[iu]=[e]:t.push(e)}(s,e);const a=e[Da];null!==a&&a.insertView(n),e[Wn]|=128}(r,e,n,t),i){const o=Ho(t,n),s=e[Rn],a=um(s,n[Ar]);null!==a&&function Mr(n,e,t,i,r,o){i[gr]=r,i[xo]=e,Jh(n,i,t,1,r,o)}(r,n[xo],s,e,a,o)}}let Va=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=BZ}return n})();const FZ=Va,LZ=class extends FZ{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function PZ(n,e,t,i){const r=e.tView,a=vw(n,r,t,4096&n[Wn]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[nl]=n[e.index];const l=n[Da];return null!==l&&(a[Da]=l.createEmbeddedView(r)),nT(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new Jb(r)}};function BZ(){return Uw(qr(),Dt())}function Uw(n,e){return 4&n.type?new LZ(e,n,Am(n,e)):null}let $o=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=GZ}return n})();function GZ(){return w3(qr(),Dt())}const WZ=$o,v3=class extends WZ{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Am(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){const e=Lh(this._hostTNode,this._hostLView);if(Wp(e)){const t=Fh(e,this._hostLView),i=Nh(e);return new Co(t[qt].data[i+8],t)}return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=x3(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-co}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,o){const s=e&&!function jh(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const E=t||{};a=E.index,i=E.injector,r=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef}const c=s?e:new Zb(_i(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const M=(s?l:this.parentInjector).get(ds,null);M&&(o=M)}_i(c.componentType??{});const m=c.create(l,r,null,o);return this.insertImpl(m.hostView,a,false),m}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function oC(n){return jo(n[nr])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[nr],d=new v3(l,l[xo],l[nr]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return NZ(a,r,s,!i),e.attachToViewContainerRef(),Ex(ST(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=x3(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=lm(this._lContainer,t);i&&(Jp(ST(this._lContainer),t),yb(i[qt],i))}detach(e){const t=this._adjustIndex(e,-1),i=lm(this._lContainer,t);return i&&null!=Jp(ST(this._lContainer),t)?new Jb(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function x3(n){return n[8]}function ST(n){return n[8]||(n[8]=[])}function w3(n,e){let t;const i=e[n.index];return jo(i)?t=i:(t=eL(i,e,null,n),e[n.index]=t,xw(e,t)),E3(t,e,n,i),new v3(t,n,e)}let E3=function A3(n,e,t,i){if(n[Ar])return;let r;r=8&t.type?Ui(i):function $Z(n,e){const t=n[Rn],i=t.createComment(""),r=ss(e,n);return Di(t,um(t,r),i,function rM(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Ar]=r};class CT{constructor(e){this.queryList=e,this.matches=null}clone(){return new CT(this.queryList)}setDirty(){this.queryList.setDirty()}}class MT{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new MT(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==I3(e,t).matches&&this.queries[t].setDirty()}}class S3{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class TT{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new TT(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class IT{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new IT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,qZ(t,o)),this.matchTNodeWithReadOption(e,t,mu(t,e,o,!1,!1))}else i===Va?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,mu(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===vn||r===$o||r===Va&&4&t.type)this.addMatch(t.index,-2);else{const o=mu(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function qZ(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function JZ(n,e,t,i){return-1===t?function KZ(n,e){return 11&n.type?Am(n,e):4&n.type?Uw(n,e):null}(e,n):-2===t?function ZZ(n,e,t){return t===vn?Am(e,n):t===Va?Uw(e,n):t===$o?w3(e,n):void 0}(n,e,i):fl(n,n[qt],t,e)}function C3(n,e,t,i){const r=e[Da].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:JZ(e,o[l],s[c+1],t.metadata.read))}r.matches=a}return r.matches}function DT(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=C3(n,e,r,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],d=e[-c];for(let h=co;h<d.length;h++){const f=d[h];f[nl]===f[nr]&&DT(f[qt],f,l,i)}if(null!==d[iu]){const h=d[iu];for(let f=0;f<h.length;f++){const m=h[f];DT(m[qt],m,l,i)}}}}}return i}function Bn(n){const e=Dt(),t=Kn(),i=G_();dl(i+1);const r=I3(t,i);if(n.dirty&&function L_(n){return 4==(4&n[Wn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?DT(t,e,i,[]):C3(t,e,r,i);n.reset(o,vX),n.notifyOnChanges()}return!0}return!1}function Ni(n,e,t){const i=Kn();i.firstCreatePass&&(T3(i,new S3(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),M3(i,Dt(),e)}function jn(){return function QZ(n,e){return n[Da].queries[e].queryList}(Dt(),G_())}function M3(n,e,t){const i=new p0(4==(4&t));(function QX(n,e,t,i){const r=nL(e);r.push(t),n.firstCreatePass&&iL(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Da]&&(e[Da]=new MT),e[Da].queries.push(new CT(i))}function T3(n,e,t){null===n.queries&&(n.queries=new TT),n.queries.track(new IT(e,t))}function I3(n,e){return n.queries.getByIndex(e)}const FT=new vt("Application Initializer");let LT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=zt(FT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(Lm(o))t.push(o);else if(FL(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wl=new vt("LocaleId",{providedIn:"root",factory:()=>zt(wl,si.Optional|si.SkipSelf)||function xQ(){return typeof $localize<"u"&&$localize.locale||Um}()});let Hw=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new hi(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const K3=new vt(""),Ww=new vt("");let zT,UT=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zT||(function WQ(n){zT=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(rt(nn),rt(VT),rt(Ww))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),VT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return zT?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Nu=null;const J3=new vt("AllowMultipleToken"),HT=new vt("PlatformDestroyListeners"),$w=new vt("appBootstrapListener");function e4(n,e,t=[]){const i=`Platform: ${e}`,r=new vt(i);return(o=[])=>{let s=GT();if(!s||s.injector.get(J3,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function XQ(n){if(Nu&&!Nu.get(J3,!1))throw new Pt(400,!1);(function Z3(){!function T_(n){M_=n}(()=>{throw new Pt(600,!1)})})(),Nu=n;const e=n.get(n4);(function Q3(n){n.get(_w,null)?.forEach(t=>t())})(n)}(function t4(n=[],e){return ur.create({name:e,providers:[{provide:af,useValue:"platform"},{provide:HT,useValue:new Set([()=>Nu=null])},...n]})}(a,i))}return function KQ(n){const e=GT();if(!e)throw new Pt(401,!1);return e}()}}function GT(){return Nu?.get(n4)??null}let n4=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function JQ(n="zone.js",e){return"noop"===n?new NX:"zone.js"===n?new nn(e):n}(i?.ngZone,function i4(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function dZ(n,e,t){return new wT(n,e,t)}(t.moduleType,this.injector,function c4(n){return[{provide:nn,useFactory:n},{provide:nf,multi:!0,useFactory:()=>{const e=zt(QQ,{optional:!0});return()=>e.initialize()}},{provide:a4,useFactory:ZQ},{provide:RF,useFactory:kF}]}(()=>r)),s=o.injector.get(ga,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{Yw(this._modules,o),a.unsubscribe()})}),function r4(n,e,t){try{const i=t();return Lm(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(LT);return a.runInitializers(),a.donePromise.then(()=>(function IB(n){yo(n,"Expected localeId to be defined"),"string"==typeof n&&(TB=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(wl,Um)||Um),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=o4({},i);return function $Q(n,e,t){const i=new ET(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(pf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Pt(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(HT,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ur))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function o4(n,e){return Array.isArray(e)?e.reduce(o4,n):{...n,...e}}let pf=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=zt(a4),this.zoneIsStable=zt(RF),this.componentTypes=[],this.components=[],this.isStable=zt(Hw).hasPendingTasks.pipe(ke(t=>t?Wt(!1):this.zoneIsStable),je(),ts()),this._injector=zt(ds)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof To;if(!this._injector.get(LT).done)throw!r&&function lc(n){const e=_i(n)||wr(n)||Er(n);return null!==e&&e.standalone}(t),new Pt(405,!1);let s;s=r?t:this._injector.get(Ac).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function YQ(n){return n.isBoundToModule}(s)?void 0:this._injector.get(ff),l=s.create(ur.NULL,[],i||s.selector,a),d=l.location.nativeElement,h=l.injector.get(K3,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Yw(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Pt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Yw(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get($w,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Yw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Pt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const a4=new vt("",{providedIn:"root",factory:()=>zt(ga).handleError.bind(void 0)});function ZQ(){const n=zt(nn),e=zt(ga);return t=>n.runOutsideAngular(()=>e.handleError(t))}let QQ=(()=>{class n{constructor(){this.zone=zt(nn),this.applicationRef=zt(pf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let eo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=tee}return n})();function tee(n){return function nee(n,e,t){if(rd(n)&&!t){const i=Cs(n.index,e);return new Jb(i,i)}return 47&n.type?new Jb(e[Ki],e):null}(qr(),Dt(),16==(16&n))}class h4{constructor(){}supports(e){return Sw(e)}create(e){return new cee(e)}}const aee=(n,e)=>e;class cee{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||aee}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<p4(i,r,o)?t:i,a=p4(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,d=c-r;if(l!=d){for(let f=0;f<l;f++){const m=f<o.length?o[f]:o[f]=0,y=m+f;d<=y&&y<l&&(o[f]=m+1)}o[s.previousIndex]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Sw(e))throw new Pt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function Wq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new lee(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new f4),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new f4),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class lee{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dee{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class f4{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new dee,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function p4(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function g4(){return new Kw([new h4])}let Kw=(()=>{class n{static#e=this.\u0275prov=At({token:n,providedIn:"root",factory:g4});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||g4()),deps:[[n,new Qp,new Eu]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Pt(901,!1)}}return n})();const mee=e4(null,"core",[]);let gee=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(rt(pf))};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({})}return n})(),JT=null;function Fu(){return JT}class Iee{}const Gn=new vt("DocumentToken");let C4=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:function(){return zt(Dee)},providedIn:"platform"})}return n})(),Dee=(()=>{class n extends C4{constructor(){super(),this._doc=zt(Gn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fu().getBaseHref(this._doc)}onPopState(t){const i=Fu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Fu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function M4(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function T4(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function gf(n){return n&&"?"!==n[0]?"?"+n:n}let Zw=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:function(){return zt(kee)},providedIn:"root"})}return n})();const Ree=new vt("appBaseHref");let kee=(()=>{class n extends Zw{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??zt(Gn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return M4(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+gf(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+gf(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+gf(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(C4),rt(Ree,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y0=(()=>{class n{constructor(t){this._subject=new tn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Nee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(T4(I4(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+gf(i))}normalize(t){return n.stripTrailingSlash(function Pee(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,I4(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gf(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gf(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=gf;static#t=this.joinWithSlash=M4;static#n=this.stripTrailingSlash=T4;static#i=this.\u0275fac=function(i){return new(i||n)(rt(Zw))};static#r=this.\u0275prov=At({token:n,factory:function(){return function Oee(){return new y0(rt(Zw))}()},providedIn:"root"})}return n})();function I4(n){return n.replace(/\/index.html$/,"")}function B4(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}class vte{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ed=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new vte(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),V4(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{V4(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(ze($o),ze(Va),ze(Kw))};static#t=this.\u0275dir=jt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function V4(n,e){n.context.$implicit=e.item}let Dc=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new xte,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){z4("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){z4("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(ze($o),ze(Va))};static#t=this.\u0275dir=jt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class xte{constructor(){this.$implicit=null,this.ngIf=null}}function z4(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ht(e)}'.`)}class Ate{createSubscription(e,t){return cu(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){cu(()=>e.unsubscribe())}}class Ste{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Cte=new Ste,Mte=new Ate;let w0=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Lm(t))return Cte;if(FL(t))return Mte;throw function Rc(n,e){return new Pt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(ze(eo,16))};static#t=this.\u0275pipe=Br({name:"async",type:n,pure:!1,standalone:!0})}return n})(),$i=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({})}return n})();const q4="browser";function Lu(n){return n===q4}function fI(n){return"server"===n}class K4{}class mne extends Iee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class gI extends mne{static makeCurrent(){!function Tee(n){JT||(JT=n)}(new gI)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function gne(){return A0=A0||document.querySelector("base"),A0?A0.getAttribute("href"):null}();return null==t?null:function _ne(n){f1=f1||document.createElement("a"),f1.setAttribute("href",n);const e=f1.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){A0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return B4(document.cookie,e)}}let f1,A0=null,yne=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const _I=new vt("EventManagerPlugins");let tj=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Pt(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(rt(_I),rt(nn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();class nj{constructor(e){this._doc=e}}const bI="ng-app-id";let ij=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=fI(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${bI}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(bI),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(bI,this.appId),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn),rt(gd),rt(Vb,8),rt(ma))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const yI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vI=/%COMP%/g,Ene=new vt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function oj(n,e){return e.map(t=>t.replace(vI,n))}let sj=(()=>{class n{constructor(t,i,r,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=fI(a),this.defaultRenderer=new xI(t,s,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===fa.ShadowDom&&(i={...i,encapsulation:fa.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof cj?r.applyToHost(t):r instanceof wI&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case fa.Emulated:o=new cj(c,l,i,this.appId,d,s,a,h);break;case fa.ShadowDom:return new Mne(c,l,t,i,s,a,this.nonce,h);default:o=new wI(c,l,i,d,s,a,h)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(tj),rt(ij),rt(gd),rt(Ene),rt(Gn),rt(ma),rt(nn),rt(Vb))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();class xI{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(yI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(aj(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(aj(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Pt(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=yI[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=yI[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(pl.DashCase|pl.Important)?e.style.setProperty(t,i,r&pl.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&pl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Fu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function aj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Mne extends xI{constructor(e,t,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=oj(r.id,r.styles);for(const d of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wI extends xI{constructor(e,t,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?oj(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class cj extends wI{constructor(e,t,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,t,i,o,s,a,c,l),this.contentAttr=function Ane(n){return"_ngcontent-%COMP%".replace(vI,n)}(l),this.hostAttr=function Sne(n){return"_nghost-%COMP%".replace(vI,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Tne=(()=>{class n extends nj{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const lj=["alt","control","meta","shift"],Ine={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dne={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rne=(()=>{class n extends nj{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fu().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),lj.forEach(l=>{const d=i.indexOf(l);d>-1&&(i.splice(d,1),s+=l+".")}),s+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=Ine[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),lj.forEach(s=>{s!==r&&(0,Dne[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const uj=[{provide:ma,useValue:q4},{provide:_w,useValue:function kne(){gI.makeCurrent()},multi:!0},{provide:Gn,useFactory:function Pne(){return function cM(n){Cb=n}(document),document},deps:[]}],Nne=e4(mee,"browser",uj),Fne=new vt(""),hj=[{provide:Ww,useClass:class bne{addToWindow(e){Mi.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Pt(5103,!1);return o},Mi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mi.getAllAngularRootElements=()=>e.getAllRootElements(),Mi.frameworkStabilizers||(Mi.frameworkStabilizers=[]),Mi.frameworkStabilizers.push(i=>{const r=Mi.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Fu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:K3,useClass:UT,deps:[nn,VT,Ww]},{provide:UT,useClass:UT,deps:[nn,VT,Ww]}],fj=[{provide:af,useValue:"root"},{provide:ga,useFactory:function One(){return new ga},deps:[]},{provide:_I,useClass:Tne,multi:!0,deps:[Gn,nn,ma]},{provide:_I,useClass:Rne,multi:!0,deps:[Gn]},sj,ij,tj,{provide:xF,useExisting:sj},{provide:K4,useClass:yne,deps:[]},[]];let Lne=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:gd,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Fne,12))};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({providers:[...fj,...hj],imports:[$i,gee]})}return n})();typeof window<"u"&&window;let S0=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:function(i){let r=null;return r=i?new(i||n):rt(_j),r},providedIn:"root"})}return n})(),_j=(()=>{class n extends S0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Jr.NONE:return i;case Jr.HTML:return Ba(i,"HTML")?Go(i):lw(this._doc,String(i)).toString();case Jr.STYLE:return Ba(i,"Style")?Go(i):i;case Jr.SCRIPT:if(Ba(i,"Script"))return Go(i);throw new Pt(5200,!1);case Jr.URL:return Ba(i,"URL")?Go(i):Qh(String(i));case Jr.RESOURCE_URL:if(Ba(i,"ResourceURL"))return Go(i);throw new Pt(5201,!1);default:throw new Pt(5202,!1)}}bypassSecurityTrustHtml(t){return function pM(n){return new lM(n)}(t)}bypassSecurityTrustStyle(t){return function Kr(n){return new dM(n)}(t)}bypassSecurityTrustScript(t){return function cs(n){return new uM(n)}(t)}bypassSecurityTrustUrl(t){return function mM(n){return new Tb(n)}(t)}bypassSecurityTrustResourceUrl(t){return function gM(n){return new hM(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn))};static#t=this.\u0275prov=At({token:n,factory:function(i){let r=null;return r=i?new i:function Hne(n){return new _j(n.get(Gn))}(rt(ur)),r},providedIn:"root"})}return n})();const AI={now:()=>(AI.delegate||Date).now(),delegate:void 0};class _f extends U{constructor(e=1/0,t=1/0,i=AI){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}const p1={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return p1.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return p1.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let SI;function Zne(n,e,t){let i=t;return function Wne(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,o)=>!("*"===r||!function Yne(n,e){if(!SI){const t=Element.prototype;SI=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&SI.call(n,e)}(n,r)||(i=o,0))),i}class eie{constructor(e,t){this.componentFactory=t.get(Ac).resolveComponentFactory(e)}create(e){return new tie(this.componentFactory,e)}}class tie{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new _f(1),this.events=this.eventEmitters.pipe(ke(i=>Rr(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(nn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=p1.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function Xne(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=ur.create({providers:[],parent:this.injector}),i=function Jne(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((o,s)=>"*"===o&&(r=s,!0));for(let o=0,s=t.length;o<s;++o){const a=t[o],c=Zne(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(eo),this.implementsOnChanges=function $ne(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(pf).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(A(s=>({name:r,value:s}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=p1.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),o=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Jv(o,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class nie extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const rie={initialConfig:{},parse:{},rename:{}};class oie{constructor(e,t){this.configState=e,this.storedChanges={},this.options={...rie,...t}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s={...r,...i.snapshot,...t};for(const[a,c]of Object.entries(e))this.processChange(a,c,s);i.setConfig(s)}processChange(e,t,i){const{options:{parse:r,rename:o}}=this,s=o[e]??e,a=t.currentValue,c=r[e]??r[s];if(null==a)delete i[s];else if(c)try{i[s]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a}`,l.message)}else i[s]=a}}let sie=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new oie(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){Ou()};static#t=this.\u0275dir=jt({type:n,features:[Sr]})}return n})();const CI={boolean:n=>"false"!=`${n}`,json:n=>"string"==typeof n?JSON.parse(n):n,stringArray:n=>"string"==typeof n?Array.from(n).filter(e=>!"[], ".includes(e)):n,function:n=>{if("function"!=typeof n)throw new Error("Expected a javascript function");return n}},bf_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api--staging/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??"",useRemoteApi:!1,remoteApiEndpoint:"https://apps.humanatlas.io/hra-api--staging/v1"};function yj(n,e,t,i,r,o,s){try{var a=n[o](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Ut(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(c){yj(o,i,r,s,a,"next",c)}function a(c){yj(o,i,r,s,a,"throw",c)}s(void 0)})}}function C0(n){return(C0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Ce(n,e,t){return(e=function cie(n){var e=function aie(n,e){if("object"!==C0(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==C0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===C0(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vj(n){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function El(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||vj()}const xj=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";El();class die{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Ce(this,"storage",void 0),Ce(this,"id",void 0),Ce(this,"config",void 0),this.storage=function lie(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}(i),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function MI(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const o=n.width*t,s=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let m1;var n;function wj(n){return"string"==typeof n?m1[n.toUpperCase()]||m1.WHITE:n}function g1(n,e){if(!n)throw new Error(e||"Assertion failed")}(n=m1||(m1={}))[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE";const ju={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},_1=ju.window||ju.self||ju.global,M0=ju.process||{};function Wm(){let n;var e,t;if(El&&"performance"in _1)n=null==_1||null===(e=_1.performance)||void 0===e||null===(t=e.now)||void 0===t?void 0:t.call(e);else if("hrtime"in M0){var i;const r=null==M0||null===(i=M0.hrtime)||void 0===i?void 0:i.call(M0);n=1e3*r[0]+r[1]/1e6}else n=Date.now();return n}const $m={debug:El&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},_ie={enabled:!0,level:0};function Ga(){}const Ej={},Aj={once:!0};class T0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};Ce(this,"id",void 0),Ce(this,"VERSION",xj),Ce(this,"_startTs",Wm()),Ce(this,"_deltaTs",Wm()),Ce(this,"_storage",void 0),Ce(this,"userData",{}),Ce(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new die("__probe-".concat(this.id,"__"),_ie),this.timeStamp("".concat(this.id," started")),function gie(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(o=>r===o)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Wm()-this._startTs).toPrecision(10))}getDelta(){return Number((Wm()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){g1(e,t)}warn(e){return this._getLogFunction(0,e,$m.warn,arguments,Aj)}error(e){return this._getLogFunction(0,e,$m.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,$m.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,$m.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return this._getLogFunction(e,t,$m.debug||$m.info,arguments,Aj)}table(e,t,i){return t?this._getLogFunction(e,t,console.table||Ga,i&&[i],{tag:xie(t)}):Ga}image(e){let{logLevel:t,priority:i,image:r,message:o="",scale:s=1}=e;return this._shouldLog(t||i)?El?function vie(n){let{image:e,message:t="",scale:i=1}=n;if("string"==typeof e){const o=new Image;return o.onload=()=>{const s=MI(o,t,i);console.log(...s)},o.src=e,Ga}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...MI(e,t,i)),Ga;if("canvas"===r.toLowerCase()){const o=new Image;return o.onload=()=>console.log(...MI(o,t,i)),o.src=e.toDataURL(),Ga}return Ga}({image:r,message:o,scale:s}):function yie(n){let{message:t="",scale:i=1}=n;return console.warn("removed"),Ga}({image:r,message:o,scale:s}):Ga}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||Ga)}group(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Cj({logLevel:e,message:t,opts:i}),{collapsed:o}=i;return r.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Ga)}withGroup(e,t,i){this.group(e,t)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Sj(e)}_getLogFunction(e,t,i,r,o){if(this._shouldLog(e)){o=Cj({logLevel:e,message:t,args:r,opts:o}),g1(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Wm();const s=o.tag||o.message;if(o.once){if(Ej[s])return Ga;Ej[s]=Wm()}return t=function bie(n,e,t){if("string"==typeof e){const i=t.time?function hie(n){const t=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function uie(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function mie(n,e,t){return!El&&"string"==typeof n&&(e&&(e=wj(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=wj(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),i.bind(console,t,...o.args)}return Ga}}function Sj(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return g1(Number.isFinite(e)&&e>=0),e}function Cj(n){const{logLevel:e,message:t}=n;n.logLevel=Sj(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return g1("string"===r||"object"===r),Object.assign(n,{args:i},n.opts)}function xie(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}Ce(T0,"VERSION",xj);const yi=new T0({id:"deck"}),Ai={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ai,"IDENTITY",{get:()=>(yi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Al={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},b1={common:0,meters:1,pixels:2},Mj={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},ln=new T0({id:"luma.gl"});function Ls(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const Eie="Requires WebGL2";function y1(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||!Number.isFinite(n._version))}function fi(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}function v1(n){return Ls(y1(n),"Invalid WebGLRenderingContext"),n}function hs(n){return Ls(fi(n),Eie),n}const D0={};const R0=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(R0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const yf=function(e){const t=this;this.gl=e,function Tie(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(D0[i]=!0)}while(0!==i);for(i in D0)if(D0[i])return delete D0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=t.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=t.currentVertexArrayObject;return s.maxAttrib=Math.max(s.maxAttrib,o),s.attribs[o].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:t.currentArrayBuffer=s;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=s}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const c=t.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,d){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,o);const f=h.attribs[o];return f.buffer=t.currentArrayBuffer,f.size=s,f.type=a,f.normalized=c,f.stride=l,f.offset=d,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Cie(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)})("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};yf.prototype.VERTEX_ARRAY_BINDING_OES=34229,yf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new R0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},yf.prototype.createVertexArrayOES=function(){const e=new R0(this);return this.vertexArrayObjects.push(e),e},yf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},yf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof R0&&e.hasBeenBound&&e.ext===this)},yf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function Mie(n,e){D0[n]=!0,void 0!==e&&function Sie(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(r===o)return;(!r||o.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){const l=o.attribs[c],d=r?r.attribs[c]:null;if((!r||l.enabled!==d.enabled)&&(l.enabled?i.enableVertexAttribArray.call(t,c):i.disableVertexAttribArray.call(t,c)),l.enabled){let h=!1;(!r||l.buffer!==d.buffer)&&(s!==l.buffer&&(i.bindBuffer.call(t,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==d.cached)&&i.vertexAttribPointer.call(t,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const Tj="OES_element_index",Ij="WEBGL_draw_buffers",Dj="WEBGL_debug_renderer_info",sr=n=>fi(n)?void 0:0,jie={3074:n=>fi(n)?void 0:36064,35723:n=>fi(n)?void 0:4352,35977:sr,32937:sr,36795:(n,e)=>{const t=fi(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(Dj);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(Dj);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:sr,35071:sr,37447:sr,36063:(n,e)=>{if(!fi(n)){const t=n.getExtension(Ij);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:sr,35374:sr,35377:sr,34852:n=>{if(!fi(n)){const e=n.getExtension(Ij);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(Tj)?2147483647:65535,33001:n=>n.getExtension(Tj)?16777216:65535,33e3:n=>16777216,37157:sr,35373:sr,35657:sr,36183:sr,37137:sr,34045:sr,35978:sr,35979:sr,35968:sr,35376:sr,35375:sr,35659:sr,37154:sr,35371:sr,35658:sr,35076:sr,35077:sr,35380:sr},Rj="ANGLE_instanced_arrays",kj={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Ls(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Rj]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){Ls(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ls(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Ls(!1)},deleteQuery:()=>{Ls(!1)},beginQuery:()=>{Ls(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},TI={readBuffer:(n,e,t)=>{fi(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:o}=function $ie(n,e){return{webgl2:fi(n),ext:n.getExtension(e)}}(n,Rj);let s;switch(i){case 35069:s=!!r&&void 0;break;case 35070:s=r||o?void 0:0}return void 0!==s?s:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!fi(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>fi(n)||32937!==r?n.getInternalformatParameter(t,i,r):new Int32Array([0]),getTexParameter(n,e,t,i){if(34046===i){const{extensions:r}=n.luma,o=r.EXT_texture_filter_anisotropic;i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function Uie(n,e,t){const i=jie[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function Jie(n,e){let{extension:t,target:i,target2:r}=e;const o=kj[t];Ls(o);const{meta:s={}}=o,{suffix:a=""}=s,c=n.getExtension(t);for(const l of Object.keys(o)){const d="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof n[l]||(c&&"function"==typeof c[d]?h=function(){return c[d](...arguments)}:"function"==typeof o[l]&&(h=o[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function Yie(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function Iie(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new yf(this)),this.__OESVertexArrayObject))}}(n),function Xie(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function Kie(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&Jie(n,{extension:t,target:n.luma,target2:n})}(n,kj),function qie(n,e){let{target:t,target2:i}=e;Object.keys(TI).forEach(r=>{if("function"==typeof TI[r]){const o=n[r]?n[r].bind(n):()=>{},s=TI[r].bind(null,n,o);t[r]=s,i[r]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const II={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Uu=(n,e,t)=>e?n.enable(t):n.disable(t),Oj=(n,e,t)=>n.hint(t,e),va=(n,e,t)=>n.pixelStorei(t,e);function k0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const ere={3042:Uu,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:Uu,2885:(n,e)=>n.cullFace(e),2929:Uu,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:Uu,35723:Oj,36006:(n,e)=>{const t=fi(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:Oj,2849:(n,e)=>n.lineWidth(e),32823:Uu,32824:"polygonOffset",10752:"polygonOffset",35977:Uu,32938:"sampleCoverage",32939:"sampleCoverage",3089:Uu,3088:(n,e)=>n.scissor(...e),2960:Uu,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:va,3317:va,37440:va,37441:va,37443:va,3330:va,3332:va,3331:va,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:va,32878:va,3316:va,3315:va,32877:va,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=k0(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=k0(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=k0(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=k0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,o,s,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,o,s,a)},stencilOp:(n,e)=>{e=k0(e)&&3===e.length?[...e,...e]:e;const[t,i,r,o,s,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,o,s,a)},viewport:(n,e)=>n.viewport(...e)};function Nr(n,e,t){return void 0!==e[n]?e[n]:t[n]}const tre={blendEquation:(n,e,t)=>n.blendEquationSeparate(Nr(32777,e,t),Nr(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(Nr(32969,e,t),Nr(32968,e,t),Nr(32971,e,t),Nr(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(Nr(32824,e,t),Nr(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(Nr(32938,e,t),Nr(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,Nr(2962,e,t),Nr(2967,e,t),Nr(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,Nr(34816,e,t),Nr(36003,e,t),Nr(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,Nr(2964,e,t),Nr(2965,e,t),Nr(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,Nr(34817,e,t),Nr(34818,e,t),Nr(34819,e,t))},Pj={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},Sl=(n,e)=>n.isEnabled(e),Nj={3042:Sl,2884:Sl,2929:Sl,3024:Sl,32823:Sl,32926:Sl,32928:Sl,3089:Sl,2960:Sl,35977:Sl};function Fj(n){for(const e in n)return!1;return!0}function nre(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function Lj(n,e){const t=n[e].bind(n);n[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in n.state.cache&&n.state.enable?n.state.cache[r]:t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function ire(n,e,t){const i=n[e].bind(n);n[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:c,oldValue:l}=t(n.state._updateCache,...s);return c&&i(...s),l},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class ore{constructor(e){let{copyState:t=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function are(n,e){if("number"==typeof(e=e||II)){const r=e,o=Nj[r];return o?o(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const o=Nj[r];i[r]=o?o(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},II),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Ls(this.stateStack.length>0),Ad(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Ls(void 0!==o);const s=e[o],a=this.cache[o];nre(s,a)||(t=!0,i=a,r&&!(o in r)&&(r[o]=a),this.cache[o]=s)}return{valueChanged:t,oldValue:i}}}function Bj(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:t=!0,copyState:i}=e;if(Ls(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new ore(n,{copyState:i}),function rre(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const o in Pj)ire(n,o,Pj[o]);Lj(n,"getParameter"),Lj(n,"isEnabled")}return n.state.enable=t,n}function jj(n){Ls(n.state),n.state.pop()}function Ad(n,e){if(Ls(y1(n),"setParameters requires a WebGL context"),Fj(e))return;const t={};for(const r in e){const o=Number(r),s=ere[r];s&&("string"==typeof s?t[s]=!0:s(n,e[r],o))}const i=n.state&&n.state.cache;if(i)for(const r in t)(0,tre[r])(n,e,i)}function Wa(n,e,t){if(Fj(e))return t(n);const{nocatch:i=!0}=e;let r;if(function sre(n){n.state||Bj(n,{copyState:!1}),n.state.push()}(n),Ad(n,e),i)r=t(n),jj(n);else try{r=t(n)}finally{jj(n)}return r}function Ym(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,i="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return i?n.drawingBufferWidth/i:1}return 1}function DI(n,e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function dre(n,e,t,i,r){const o=Uj(n[0],e,t);let s=Vj(n[1],e,i,r),a=Uj(n[0]+1,e,t);const c=a===t-1?a:a-1;let l;return a=Vj(n[1]+1,e,i,r),r?(a=0===a?a:a+1,l=s,s=a):l=a===i-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,Ym(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function Uj(n,e,t){return Math.min(Math.round(n*e),t-1)}function Vj(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const RI=El(),ure=RI&&typeof document<"u",zj={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Hj(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ls(RI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},zj,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:o}=n,s=function mre(n){let o,{canvas:e,width:t=800,height:i=600,onError:r}=n;return"string"==typeof e?(ure&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}({canvas:o,width:e,height:t,onError:i});return r=function pre(n,e){const{onError:t}=e;let i=null;const r=c=>i=c.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),o&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(s,n),r?(r=kI(r,n),function gre(n){const e=fi(n)?"WebGL2":"WebGL1",t=function hre(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n),i=t?"(".concat(t.vendor,",").concat(t.renderer,")"):"",r=n.debug?" debug":"";ln.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function kI(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||function _re(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},zj,e);const{manageState:t,debug:i}=e;return t&&Bj(n,{copyState:!1,log:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return ln.log(1,...o)()}}),RI&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),ln.level=Math.max(ln.level,1)):ln.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function Gj(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class Wj{constructor(e,t){Ce(this,"name",void 0),Ce(this,"type",void 0),Ce(this,"sampleSize",1),Ce(this,"time",void 0),Ce(this,"count",void 0),Ce(this,"samples",void 0),Ce(this,"lastTiming",void 0),Ce(this,"lastSampleTime",void 0),Ce(this,"lastSampleCount",void 0),Ce(this,"_count",0),Ce(this,"_time",0),Ce(this,"_samples",0),Ce(this,"_startTime",0),Ce(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Gj(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Gj()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class OI{constructor(e){Ce(this,"id",void 0),Ce(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof Wj?e:new Wj(t,i)),this.stats[t]}}const O0="8.5.21",vf=new class vre{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new OI({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==O0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(O0));function Xt(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function PI(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return Xt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function Vu(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}globalThis.luma||(El()&&ln.log(1,"luma.gl ".concat(O0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:O0,version:O0,log:ln,stats:vf,globals:{modules:{},nodeIO:{}}}),globalThis;const NI={};function na(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";NI[n]=NI[n]||1;const e=NI[n]++;return"".concat(n,"-").concat(e)}function $j(n){return Xt("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function Xm(n){let e=!0;for(const t in n){e=!1;break}return e}function Yj(n,e,t,i){const r="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(n);i.forEach(s=>{o.methodName||(o[s]=()=>{throw ln.removed("Calling removed method ".concat(e,".").concat(s,": "),r)(),new Error(s)})})}const qm="Resource subclass must define virtual methods";class Sd{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v1(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||na(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xt(e=PI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=fi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))return o&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},o=fi(this.gl),s={},a=t||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?Vu(this.gl,c):c;s[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(s[h]=Vu(this.gl,s[h]))}}return s}setParameter(e,t){Xt(e=PI(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const o=fi(this.gl);if("webgl2"in r&&!o||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=PI(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return Yj(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(qm)}_deleteHandle(){throw new Error(qm)}_bindHandle(e){throw new Error(qm)}_getOptsFromHandle(){throw new Error(qm)}_getParameter(e,t){throw new Error(qm)}_setParameter(e,t){throw new Error(qm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=vf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];vf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=vf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=vf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const xre="Failed to deduce GL constant from typed array";function FI(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(xre)}}function P0(n){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ere(n){let{data:e,width:t,height:i}=n;const r=Math.round(t/2),o=Math.round(i/2),s=new Uint8Array(r*o*4);for(let a=0;a<o;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)s[4*(a*r+c)+l]=e[4*(2*a*t+2*c)+l];return{data:s,width:r,height:o}}function LI(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=t;for(const a in i)if(a in e){const l=i[a]?"".concat(n,".").concat(i[a]):"N/A";ln.removed("".concat(n,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];ln.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))()}let s=null;for(const a in o)if(a in e){const c=o[a];ln.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}const Are={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Sre={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ia{static getBytesPerElement(e){return P0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Xt(e.size),P0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new ia(Are,...t)}constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ia.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ia.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=LI("Accessor",e,Sre),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const qj={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Cre={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:qj},Mre={removedProps:qj};class Yi extends Sd{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/ia.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/ia.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=LI("Buffer",e,Cre),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=LI("Buffer",e,Mre))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new ia(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,o=e.byteLength||e.length;Xt(t);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==o?(hs(this.gl),this.gl.bufferSubData(this.target,i,t,r,o)):this.gl.bufferSubData(s,i,t),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:i=0,writeOffset:r=0,size:o}=e;const{gl:s}=this;return hs(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,r,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hs(this.gl);const o=P0(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(t),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(s,r||s),l=a+c);const d=Math.min(s,c);return r=r||d,Xt(r<=d),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(Xt(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;Xt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const o=FI(e);return Xt(o),this.setAccessor(new ia(this.accessor,{type:o})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Xt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/P0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new ia(this.accessor,{type:FI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return ln.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return ln.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return ln.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return ln.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ia(this.accessor,e),this}}const BI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Kj={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Jj={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Dre=[9729,9728],Zj=globalThis.WebGLBuffer||function(){};class xf extends Sd{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=t;let o=!0;return i&&(o=o&&function Tre(n,e){const t=BI[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=fi(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),o=o&&(!r||function Ire(n,e){const t=BI[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),o}constructor(e,t){const{id:i=na("texture"),handle:r,target:o}=t;super(e,{id:i,handle:r}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then($=>this.initialize(Object.assign({},e,{pixels:$,data:$}))),this;const i=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:d}=e;t||(t=r);let{width:h,height:f,dataFormat:m,type:y,compressed:E=!1,mipmaps:M=!0}=e;const{depth:H=0}=e;return({width:h,height:f,compressed:E,dataFormat:m,type:y}=this._deduceParameters({format:o,type:y,dataFormat:m,compressed:E,data:t,width:h,height:f})),this.width=h,this.height=f,this.depth=H,this.format=o,this.type=y,this.dataFormat=m,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),M&&this._isNPOT()&&(ln.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),M=!1,this._updateForNPOT(c)),this.mipmaps=M,this.setImageData({data:t,width:h,height:f,depth:H,format:o,type:y,dataFormat:m,border:s,mipmaps:M,parameters:l,compressed:E}),M&&this.generateMipmap(),this.setParameters(c),a&&(this.data=t),i&&(this._video={video:t,parameters:c,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:i,mipmaps:r=!1}=e;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(ln.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Wa(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:d=this.type,width:h=this.width,height:f=this.height,dataFormat:m=this.dataFormat,compressed:y=!1}=e;l||(l=i),({type:d,dataFormat:m,compressed:y,width:h,height:f}=this._deduceParameters({format:o,type:d,dataFormat:m,compressed:y,data:l,width:h,height:f}));const{gl:E}=this;E.bindTexture(this.target,this.handle);let M=null;({data:l,dataType:M}=this._getDataType({data:l,compressed:y}));let H,$=0;return Wa(this.gl,c,()=>{switch(M){case"null":E.texImage2D(t,r,o,h,f,s,m,d,l);break;case"typed-array":E.texImage2D(t,r,o,h,f,s,m,d,l,a);break;case"buffer":H=hs(E),H.bindBuffer(35052,l.handle||l),H.texImage2D(t,r,o,h,f,s,m,d,a),H.bindBuffer(35052,null);break;case"browser-object":fi(E)?E.texImage2D(t,r,o,h,f,s,m,d,l):E.texImage2D(t,r,o,m,d,l);break;case"compressed":for(const[Y,pe]of l.entries())E.compressedTexImage2D(t,Y,pe.format,pe.width,pe.height,s,pe.data),$+=pe.levelSize;break;default:Xt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===M?$:l&&l.byteLength?l.byteLength:this.width*this.height*(Kj[this.dataFormat]||4)*(Jj[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:i=null,data:r=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:d=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:m=!1,offset:y=0,border:E=this.border,parameters:M={}}=e;if(({type:h,dataFormat:f,compressed:m,width:a,height:c}=this._deduceParameters({format:d,type:h,dataFormat:f,compressed:m,data:r,width:a,height:c})),Xt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const H=r;r=H.data,a=H.shape[0],c=H.shape[1]}r instanceof Yi&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Wa(this.gl,M,()=>{if(m)this.gl.compressedTexSubImage2D(t,l,o,s,a,c,d,r);else if(null===r)this.gl.texSubImage2D(t,l,o,s,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,l,o,s,a,c,f,h,r,y);else if(r instanceof Zj){const H=hs(this.gl);H.bindBuffer(35052,r),H.texSubImage2D(t,l,o,s,a,c,f,h,y),H.bindBuffer(35052,null)}else fi(this.gl)?hs(this.gl).texSubImage2D(t,l,o,s,a,c,f,h,r):this.gl.texSubImage2D(t,l,o,s,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return ln.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:i=!1}=e;return i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof Yi?{data:t.handle,dataType:"buffer"}:t instanceof Zj?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:o,dataFormat:s,type:a,compressed:c}=e;const l=BI[t];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:o}=this._deduceImageSize(i,r,o)),{dataFormat:s,type:a,compressed:c,width:r,height:o,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},Xt(r,"Could not deduced texture size"),Xt(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Xt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Xt(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(fi(this.gl)||!this.width||!this.height||$j(this.width)&&$j(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Dre.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Rre(n,e){return Xt("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class Yo extends xf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return xf.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v1(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Rre(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const wf="EXT_color_buffer_float",Qj={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:wf,bpp:2},33327:{gl2:wf,bpp:4},34842:{gl2:wf,bpp:8},33326:{gl2:wf,bpp:4},33328:{gl2:wf,bpp:8},34836:{gl2:wf,bpp:16},35898:{gl2:wf,bpp:4}};class Km extends Sd{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function kre(n,e,t){const i=t[e];if(!i)return!1;const r=fi(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,Qj)}static getSamplesForFormat(e,t){let{format:i}=t;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:i=1,height:r=1,samples:o=0}=e;return Xt(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==o&&fi(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,t,i,r):this.gl.renderbufferStorage(36161,t,i,r),this.format=t,this.width=i,this.height=r,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Qj[this.format].bpp),this}resize(e){let{width:t,height:i}=e;return t!==this.width||i!==this.height?this.initialize({width:t,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const eU=6144,rU="clear: bad arguments";function UI(n){let{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;t&&(s|=16384,!0!==t&&(o.clearColor=t)),i&&(s|=256,!0!==i&&(o.clearDepth=i)),r&&(s|=1024,!0!==i&&(o.clearStencil=i)),Xt(0!==s,rU),Wa(n,o,()=>{n.clear(s)})}const VI=[34069,34070,34071,34072,34073,34074];let Bre=(()=>{class n extends xf{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v1(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage(t){let{face:i,data:r,x:o=0,y:s=0,mipmapLevel:a=0}=t;return this._subImage({target:i,data:r,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(t){var i=this;return Ut(function*(){let{width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=t;const{gl:h}=i,f=s||a,m=yield Promise.all(VI.map(y=>{const E=f[y];return Promise.all(Array.isArray(E)?E:[E])}));i.bind(),VI.forEach((y,E)=>{m[E].length>1&&!1!==i.opts.mipmaps&&ln.warn("".concat(i.id," has mipmap and multiple LODs."))(),m[E].forEach((M,H)=>{r&&o?h.texImage2D(y,H,l,r,o,c,l,d,M):h.texImage2D(y,H,l,l,d,M)})}),i.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:d=5121}=t,{gl:h}=this,f=s||a;return this.bind(),f instanceof Promise?f.then(m=>this.setImageDataForFace(Object.assign({},t,{face:i,data:m,pixels:m}))):this.width||this.height?h.texImage2D(i,0,l,r,o,c,l,d,f):h.texImage2D(i,0,l,l,d,f),this}}return n.FACES=VI,n})();class jre extends xf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return fi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hs(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:i=6408,width:r,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:d=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Wa(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,t,i,r,o,s,a,c,l,h),h instanceof Yi&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,t,i,r,o,s,a,c,l,d))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(Kj[this.dataFormat]||4)*(Jj[this.type]||1),"Texture"),this.loaded=!0,this}}function Vre(n,e){const{gl:t,width:i,height:r,id:o}=n;return new no(t,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:r,attachments:{36064:n}}))}function x1(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:d,deleteFramebuffer:h}=N0(n);Xt(d);const{gl:f,handle:m,attachments:y}=d;a=a||d.width,c=c||d.height,36064===o&&null===m&&(o=1028),Xt(y[o]),l=l||y[o].type,s=function Hre(n,e,t,i,r){if(n)return n;const o=P0(e=e||5121,{clamped:!1}),s=function Lre(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Xt(!1),0}}(t);return new o(i*r*s)}(s,l,r,a,c),l=l||FI(s);const E=f.bindFramebuffer(36160,m);return f.readPixels(t,i,a,c,r,l,s),f.bindFramebuffer(36160,E||null),h&&d.delete(),s}function zI(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=x1(n,{sourceAttachment:e}),{width:r,height:o}=n;for(;o>t;)({data:i,width:r,height:o}=Ere({data:i,width:r,height:o}));!function wre(n){let{data:e,width:t,height:i,bytesPerPixel:r=4,temp:o}=n;const s=t*r;o=o||new Uint8Array(s);for(let a=0;a<i/2;++a){const c=a*s,l=(i-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}({data:i,width:r,height:o});const s=document.createElement("canvas");s.width=r,s.height=o;const a=s.getContext("2d"),c=a.createImageData(r,o);return c.data.set(i),a.putImageData(c,0,0),s.toDataURL()}function N0(n){return n instanceof no?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:Vre(n),deleteFramebuffer:!0}}const oU="Multiple render targets not supported";class no extends Sd{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(o=o&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new no(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=hs(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=hs(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:i=1,attachments:r=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:d}=e;if(Xt(t>=0&&i>=0,"Width and height need to be integers"),this.width=t,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:t,height:i})}else r=this._createDefaultAttachments(o,s,a,t,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:d}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:i,drawBuffers:r,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(t,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:i}=e;if(null===this.handle)return Xt(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&ln.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};t&&Object.keys(this.attachments).forEach(s=>{r[s]=null}),Object.assign(r,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in r){Xt(void 0!==s,"Misspelled framebuffer binding point?");const a=Number(s),c=r[a];let l=c;if(l)if(l instanceof Km)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[d,h=0,f=0]=c;l=d,this._attachTexture({attachment:a,texture:d,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function Wre(n){return(no.STATUS||{})[n]||"Framebuffer error ".concat(n)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:i,stencil:r,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&UI(this.gl,{color:t,depth:i,stencil:r}),o.forEach((a,c)=>{!function Fre(n){let{framebuffer:e=null,buffer:t=eU,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hs(n),Wa(n,{framebuffer:e},()=>{switch(t){case eU:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[o,s]=r;n.clearBufferfi(34041,0,o,s);break;default:Xt(!1,rU)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return ln.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return ln.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return ln.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return ln.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return ln.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return ln.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:i=0,y:r=0,width:o,height:s}=e;const a=hs(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===o&&void 0===s?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,i,r,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=Vu(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const o of i)r[t?Vu(this.gl,o):o]=this.getAttachmentParameter(e,o,t);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),i={};for(const r of t){const o=Number(r);i[e?Vu(this.gl,o):o]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window<"u"&&window.open(zI(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>ln.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const i=zI(this,{targetMaxHeight:100});return ln.image({logLevel:e,message:t,image:i},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,o){let s=null;return e&&(s=s||{},s[36064]=new Yo(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),t&&i?(s=s||{},s[33306]=new Km(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):t?(s=s||{},s[36096]=new Km(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o}),this.ownResources.push(s[36096])):i&&Xt(!1),s}_unattach(e){const t=this.attachments[e];t&&(t instanceof Km?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,i.handle),this.attachments[t]=i}_attachTexture(e){let{attachment:t=36064,texture:i,layer:r,level:o}=e;const{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:hs(s).framebufferTextureLayer(36160,t,i.target,o,r);break;case 34067:const c=function Gre(n){return n<34069?n+34069:n}(r);s.framebufferTexture2D(36160,t,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,t,3553,i.handle,o);break;default:Xt(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[t]=i}_setReadBuffer(e){const t=function Aie(n){return fi(n)?n:null}(this.gl);t?t.readBuffer(e):Xt(36064===e||1029===e,oU),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=hs(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Xt(1===e.length&&(36064===e[0]||1029===e[0]),oU)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function qre(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in sU)void 0===n.luma.caps[e]&&(n.luma.caps[e]=cU(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}no.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const sU={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function Yre(n){const e=new Yo(n,{format:6408,type:5126,dataFormat:6408}),t=new no(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Xre=2;function HI(n,e){return aU(n,e)}function aU(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>cU(n,t))}function cU(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function Kre(n,e){const t=sU[e];let i;Xt(t,e);const r=fi(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const o of r)i=i&&!!n.getExtension(o)}else"string"==typeof r?i=!!n.getExtension(r):"boolean"==typeof r?i=r:Xt(!1);return i}(n,e)),n.luma.caps[e]||ln.log(Xre,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}class GI{constructor(e,t){Ce(this,"opts",void 0),Ce(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let o=i;if(i&&i.length!==r){o=new Float32Array(r);const s=t.elementOffset||0;for(let a=0;a<r;++a)o[a]=i[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const F0=new class Zre{constructor(e={}){Ce(this,"_pool",[]),Ce(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:i=1,type:r,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,d=t*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,d)}let h=1/0;c&&(h=c*i+o);const f=this._allocate(l,d,a,h);return e&&s?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,t,i,r){let o=Math.max(Math.ceil(t*this.opts.overAlloc),1);o>r&&(o=r);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(s.splice(c,1)[0],0,o);return i&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,o=t.findIndex(s=>s.byteLength>=r);o<0?t.push(i):(o>0||t.length<this.opts.poolSize)&&t.splice(o,0,i),t.length>this.opts.poolSize&&t.shift()}},Qre=1/Math.PI*180,eoe=1/180*Math.PI,Gr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function toe(n,{precision:e=Gr.precision}={}){return n=function soe(n){return Math.round(n/Gr.EPSILON)*Gr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Cd(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function lU(n){return function ioe(n,e){return Md(n,t=>t*eoe,e)}(n)}function noe(n){return function roe(n,e){return Md(n,t=>t*Qre,e)}(n)}function Tr(n,e,t){return Md(n,i=>Math.max(e,Math.min(t,i)))}function w1(n,e,t){return Cd(n)?n.map((i,r)=>w1(i,e[r],t)):t*e+(1-t)*n}function Jm(n,e,t){const i=Gr.EPSILON;t&&(Gr.EPSILON=t);try{if(n===e)return!0;if(Cd(n)&&Cd(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Jm(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):"number"==typeof n&&"number"==typeof e&&Math.abs(n-e)<=Gr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Gr.EPSILON=i}}function Md(n,e,t){if(Cd(n)){const i=n;t=t||function aoe(n){return n.clone?n.clone():new Array(n.length)}(i);for(let r=0;r<t.length&&r<i.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}class E1 extends(function coe(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Cd(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Gr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+toe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Jm(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){if(void 0===i)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(t[r]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(Gr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}get elements(){return this}}function pi(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function A1(n,e,t=""){if(Gr.debug&&!function loe(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}function uU(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}class hU extends E1{get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return pi(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return pi(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return uU(e>=0&&e<this.ELEMENTS,"index is out of range"),pi(this[e])}setComponent(e,t){return uU(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Cl=1e-6,ra=typeof Float32Array<"u"?Float32Array:Array;function fU(){var n=new ra(3);return ra!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function pU(n,e,t){var i=new ra(3);return i[0]=n,i[1]=e,i[2]=t,i}function mU(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function S1(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return n[0]=r*c-o*a,n[1]=o*s-i*c,n[2]=i*a-r*s,n}function WI(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*o+t[12])/(s=s||1),n[1]=(t[1]*i+t[5]*r+t[9]*o+t[13])/s,n[2]=(t[2]*i+t[6]*r+t[10]*o+t[14])/s,n}function gU(n,e,t){var i=t[0],r=t[1],o=t[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,f=i*c-r*a,m=r*f-o*h,y=o*d-i*f,E=i*h-r*d,M=2*t[3];return h*=M,f*=M,y*=2,E*=2,n[0]=a+(d*=M)+(m*=2),n[1]=c+h+y,n[2]=l+f+E,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function _U(n,e,t){const i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o||1;return n[0]=(t[0]*i+t[4]*r+t[8]*o)/s,n[1]=(t[1]*i+t[5]*r+t[9]*o)/s,n[2]=(t[2]*i+t[6]*r+t[10]*o)/s,n}fU();const $I=[0,0,0];let C1;class fs extends hU{static get ZERO(){return C1||(C1=new fs(0,0,0),Object.freeze(C1)),C1}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Cd(e)?this.copy(e):(Gr.debug&&(pi(e),pi(t),pi(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Gr.debug&&(pi(e.x),pi(e.y),pi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=pi(e)}angle(e){return function yoe(n,e){var t=n[0],i=n[1],r=n[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&mU(n,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return S1(this,this,e),this.check()}rotateX({radians:e,origin:t=$I}){return function goe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=$I}){return function _oe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=$I}){return function boe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return WI(this,this,e),this.check()}transformAsVector(e){return _U(this,this,e),this.check()}transformByMatrix3(e){return function moe(n,e,t){var i=e[0],r=e[1],o=e[2];n[0]=i*t[0]+r*t[3]+o*t[6],n[1]=i*t[1]+r*t[4]+o*t[7],n[2]=i*t[2]+r*t[5]+o*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function Eoe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return gU(this,this,e),this.check()}}const bU=new fs;function Zm(n,e,t,i){bU.set(n,e,t);const r=bU.len();return{distance:i/r,normal:new fs(-n/r,-e/r,-t/r)}}function Ioe(n){return n-Math.fround(n)}let B0;function YI(n,e){const{size:t=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:n.length,o=(r-i)/t;B0=F0.allocate(B0,o,{type:Float32Array,size:2*t});let s=i,a=0;for(;s<r;){for(let c=0;c<t;c++){const l=n[s++];B0[a+c]=l,B0[a+c+t]=Ioe(l)}a+=2*t}return B0.subarray(0,o*t*2)}function M1(n){return n.stride||n.size*n.bytesPerElement}function yU(n,e){e.offset&&yi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=M1(n),o=(void 0!==e.vertexOffset?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return{...e,offset:o,stride:t}}class Roe{constructor(e,t,i){Ce(this,"gl",void 0),Ce(this,"id",void 0),Ce(this,"size",void 0),Ce(this,"settings",void 0),Ce(this,"value",void 0),Ce(this,"doublePrecision",void 0),Ce(this,"_buffer",void 0),Ce(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,o=5130===r;let a,{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),a=o?5126:!r&&t.isIndexed?e&&HI(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function Jre(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=o,o&&!1===t.fp64&&(c=Float32Array),this.value=null,this.settings={...t,defaultType:c,defaultValue:s,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new Yi(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*M1(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),F0.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,o=function Doe(n,e){const t=yU(n,e);return{high:t,low:{...t,offset:t.offset+4*n.size}}}(this.getAccessor(),t||{});return i[e]=new GI(this,o.high),i["".concat(e,"64Low")]=r?new GI(this,o.low):new Float32Array(this.size),i}if(t){const i=yU(this.getAccessor(),t);return{[e]:new GI(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:i,size:r}=this,o=i*r;if(t&&o&&t.length>=o){const s=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<r;l++){const d=t[c++];d<s[l]&&(s[l]=d),d>a[l]&&(a[l]=d)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Yi?{buffer:e}:e;const r={...this.settings,...i};if(t.bufferAccessor=r,t.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),t.constant&&this._areValuesEqual(o,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=o}else if(i.buffer){const o=i.buffer;t.externalBuffer=o,t.constant=!1,this.value=i.value||null;const s=i.value instanceof Float64Array;r.type=i.type||o.accessor.type,r.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=M1(r)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;t.externalBuffer=null,t.constant=!1,this.value=o,r.bytesPerElement=o.BYTES_PER_ELEMENT,r.stride=M1(r);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=YI(o,r));const c=o.byteLength+a+2*r.stride;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),r.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?YI(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:i}=this,r=i.allocatedValue,o=F0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),t&&r&&s.subData({data:r instanceof Float64Array?YI(r,this):r,offset:a})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&yi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:o}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(o){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=o;for(;--s>=0;)t[i+s]=Number.isFinite(e[s])?e[s]:r[s]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}function Xo(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const vU=[],xU=[];function T1(n,e=0,t=1/0){let i=vU;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(xU.length=n.length,i=xU):i=vU,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function wU(n){return n&&n[Symbol.asyncIterator]}function XI(n,e=(()=>!0)){return Array.isArray(n)?EU(n,e,[]):e(n)?[n]:[]}function EU(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?EU(r,e,t):e(r)&&t.push(r)}return t}function Ooe({target:n,source:e,start:t=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let a=t;s<r;s++)n[a++]=e[s];for(;s<o;)s<o-s?(n.copyWithin(t+s,t,t+s),s*=2):(n.copyWithin(t+s,t,t+o-s),s=o);return n}const Poe=[],I1=[[0,1/0]];function qI(n){const{source:e,target:t,start:i=0,size:r,getData:o}=n,a=e.length,c=(n.end||t.length)-i;if(a>c)return void t.set(e.subarray(0,c),i);if(t.set(e,i),!o)return;let l=a;for(;l<c;){const d=o(l,e);for(let h=0;h<r;h++)t[i+l]=d[h]||0,l++}}const Loe={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function AU(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...Loe[t],...e,...n,type:t}}function SU(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function CU(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function MU(n){n.push(n.shift())}function KI(n,e){const{doublePrecision:t,settings:i,value:r,size:o}=n,s=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*o)*s}function TU({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:o=(s=>s)}){const s=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*s,c=t.byteOffset,l=t.startIndices,d=r&&l,h=KI(t,e),f=t.isConstant;if(!d&&i>=h)return;const m=f?t.value:t.getBuffer().getData({srcByteOffset:c});if(t.settings.normalized&&!f){const H=o;o=($,Y)=>t.normalizeConstant(H($,Y))}const y=f?(H,$)=>o(m,$):(H,$)=>o(m.subarray(H,H+a),$),E=n.getData({length:i}),M=new Float32Array(h);(function Foe({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!Array.isArray(o))return qI({source:n,target:e,size:t,getData:i}),e;let s=0,a=0;const c=i&&((d,h)=>i(d+a,h)),l=Math.min(r.length,o.length);for(let d=1;d<l;d++){const h=r[d]*t,f=o[d]*t;qI({source:n.subarray(s,h),target:e,start:a,end:f,size:t,getData:c}),s=h,a=f}a<e.length&&qI({source:[],target:e,start:a,size:t,getData:c})})({source:E,target:M,sourceStartIndices:r,targetStartIndices:l,size:a,getData:y}),n.byteLength<M.byteLength+c&&n.reallocate(M.byteLength+c),n.subData({data:M,offset:c})}class JI extends Roe{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:I1}),Ce(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return AU(Array.isArray(t)?e[t.find(o=>e[o])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function Noe(n,e){if(n===I1||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let o=0;o<i;o++){const s=n[o];s[1]<e[0]?(t.push(s),r=o+1):s[0]>e[1]?t.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=I1}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Poe}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,t.updateRanges!==I1),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let c=!0;if(s){for(const[l,d]of o)s.call(r,this,{data:t,startRow:l,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,d]of o){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;return Xo(ArrayBuffer.isView(s.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function koe(n,e){const{size:t,stride:i,offset:r,startIndices:o,nested:s}=e,a=n.BYTES_PER_ELEMENT,c=i?i/a:t,l=r?r/a:0,d=Math.floor((n.length-l)/c);return(h,{index:f,target:m})=>{if(!o){const H=f*c+l;for(let $=0;$<t;$++)m[$]=n[H+$];return m}const y=o[f],E=o[f+1]||d;let M;if(s){M=new Array(E-y);for(let H=y;H<E;H++){const $=H*c+l;m=new Array(t);for(let Y=0;Y<t;Y++)m[Y]=n[$+Y];M[H-y]=m}}else if(c===t)M=n.subarray(y*t+l,E*t+l);else{M=new n.constructor((E-y)*t);let H=0;for(let $=y;$<E;$++){const Y=$*c+l;for(let pe=0;pe<t;pe++)M[H++]=n[Y+pe]}}return M}}(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:t,nested:!!s.size&&s.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:c,value:l,size:d,startIndices:h}=e,{accessor:f,transform:m}=a,y=c.binaryAccessor||("function"==typeof f?f:o[f]);Xo("function"==typeof y,'accessor "'.concat(f,'" is not a function'));let E=e.getVertexOffset(i);const{iterable:M,objectInfo:H}=T1(t,i,r);for(const $ of M){H.index++;let Y=y($,H);if(m&&(Y=m.call(this,Y)),h){const pe=(H.index<h.length-1?h[H.index+1]:s)-h[H.index];if(Y&&Array.isArray(Y[0])){let De=E;for(const Ve of Y)e._normalizeValue(Ve,l,De),De+=d}else Y&&Y.length>d?l.set(Y,E):(e._normalizeValue(Y,H.target,0),Ooe({target:l,source:H.target,start:E,count:pe}));E+=pe*d}else e._normalizeValue(Y,l,E),E+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let ZI={};function ps(n,e,t,i){yi.level>0&&ZI[n]&&ZI[n].call(null,e,t,i)}function xa(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const IU="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Uoe="#version 300 es\n".concat(IU);function DU(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,o]=t;return e.includes(i)&&r&&o?{qualifier:i,type:r,name:o.split(";")[0]}:null}function RU(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?Uoe:e>300?"#version ".concat(e,"\n").concat(IU):"void main() {gl_FragColor = vec4(0);}";const o=function Hoe(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return xa(!1),null}}(t,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(t,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(t,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class kU extends Sd{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return fi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};hs(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Xm(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:o,byteOffset:s}=this._getBufferParams(t);return i<0?(this.unused[e]=r,ln.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,s,o),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof Yi?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let r=arguments.length>3?arguments[3]:void 0;const o=t&&t.handle;return o&&void 0!==r?this.gl.bindBufferRange(35982,e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,o),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Goe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof Yi?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Xt(fi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in t&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const o=i[r];if("string"==typeof o){const s=t[o],{byteLength:a,usage:c,accessor:l}=s;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,t){let{model:i}=t;const{program:r}=i;e.transformFeedback=new kU(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const o=this.feedbackMap[r];t[r]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[r],Xt(i[o]instanceof Yi)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new Yi(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function OU(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const j0="vs",Yoe={[j0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},D1="__LUMA_INJECT_DECLARATIONS__",PU=/void\s+main\s*\([^)]*\)\s*\{\n?/,NU=/}\n?[^{}]*$/,eD=[];function FU(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===j0;for(const o in t){const s=t[o];s.sort((c,l)=>c.order-l.order),eD.length=s.length;for(let c=0,l=s.length;c<l;++c)eD[c]=s[c].injection;const a="".concat(eD.join("\n"),"\n");switch(o){case"vs:#decl":r&&(n=n.replace(D1,a));break;case"vs:#main-start":r&&(n=n.replace(PU,c=>c+a));break;case"vs:#main-end":r&&(n=n.replace(NU,c=>a+c));break;case"fs:#decl":r||(n=n.replace(D1,a));break;case"fs:#main-start":r||(n=n.replace(PU,c=>c+a));break;case"fs:#main-end":r||(n=n.replace(NU,c=>a+c));break;default:n=n.replace(o,c=>c+a)}}return n=n.replace(D1,""),i&&(n=n.replace(/\}\s*$/,o=>o+Yoe[e])),n}function tD(n){const e={};return xa(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],"\n").concat(t[i]):t[i]}),e}const Xoe={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},R1="transform_uSize_",LU="transform_position";const nse={10241:9728,10240:9728,10242:33071,10243:33071};class rse{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const d=function Joe(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}=n;const r={};let o,s;t&&(({width:o,height:s}=i),r["".concat(R1).concat(t)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),r["".concat(R1).concat(a)]=[o,s];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,d)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],i=x1(t);if(!e)return i;const r=i.constructor,o=function zoe(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return xa(!1),null}}(this.targetTextureType),s=new r(i.length*o/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<o;l++)s[a++]=i[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof Yo)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,o)=>{o[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Yi(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:o}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new no(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(nse)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function Ure(n,e){Xt(n instanceof Yo||n instanceof Bre||n instanceof jre);const t=n.constructor,{gl:i,width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d}=n;return new t(i,Object.assign({width:r,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:d},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=function Koe(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:i,targetTexture:r}=n,s=Object.keys(t).length,a=null;const c={};let l=e,d={};if(s>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((m,y,E)=>{if(s>0){const M=function tse(n,e){const t={},i=function Zoe(n){return DU(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:o}=i;if(o&&e[o]){const s="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function Qoe(n){const e="".concat("transform_uSampler_").concat(n),t="".concat(R1).concat(n);return{samplerName:e,sizeName:t,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(t,";")}}(o),d=function Voe(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return xa(!1),null}}(r),h="  ".concat(r," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(d,";\n");return t[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:t}}return null}(m,t);if(M){const{updatedLine:H,inject:$}=M;f[y]=H,d=tD([d,$]),Object.assign(c,M.samplerTextureMap),s--}}i&&!a&&(a=function ese(n,e){const t=DU(n,["varying","out"]);return t&&t.name===e?t.type:null}(m,i))}),i){Xt(r);const m="".concat(R1).concat(i),y="uniform vec2 ".concat(m,";\n"),E="     vec2 ".concat(LU," = transform_getPos(").concat(m,");\n     gl_Position = vec4(").concat(LU,", 0, 1.);\n");d=tD([d,{"vs:#decl":y,"vs:#main-start":E}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:d,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=tD([e.inject||{},a]);return this.targetTextureType=s,this.samplerTextureMap=c,{vs:r,fs:e._fs||RU({version:OU(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Xoe].concat(e.modules||[]):e.modules,uniforms:o,inject:l}}}const nD={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function sse(n){let e=BU(n);return"object"===e?n?"type"in n?Object.assign({},n,nD[n.type]):"value"in n?(e=BU(n.value),Object.assign({type:e},n,nD[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},nD[e])}function BU(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class iD{constructor(e){let{name:t,vs:i,fs:r,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:d={},vertexShader:h,fragmentShader:f}=e;xa("string"==typeof t),this.name=t,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function lse(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];"string"==typeof i&&(i={order:0,injection:i}),e[t.slice(0,2)][t]=i}return e}(d),s&&(this.uniforms=function ose(n){const e={};for(const t in n){const r=sse(n[t]);e[t]=r}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:xa(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{t.regex="function"===t.type?new RegExp("\\b".concat(t.old,"\\(")):new RegExp("".concat(t.type," ").concat(t.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},i=this.uniforms;for(const r in i){const o=i[r];r in e&&!o.private?(o.validate&&xa(o.validate(e[r],o),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=o.value}return t}}function dse(n){return function jU(n){const e={},t={};return rD({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(UU(n))}function rD(n){let{modules:e,level:t,moduleMap:i,moduleDepth:r}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)i[o.name]=o,(void 0===r[o.name]||r[o.name]<t)&&(r[o.name]=t);for(const o of e)o.dependencies&&rD({modules:o.dependencies,level:t+1,moduleMap:i,moduleDepth:r})}function UU(n,e){return n.map(t=>(t instanceof iD||(xa("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),xa(t.name,"shader module has no name"),(t=new iD(t)).dependencies=UU(t.dependencies)),t))}const hse=7936,fse=7937,pse=7938,mse=35724,oD={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Ef={};function bse(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(oD).forEach(n=>{Ef[n]=n});const sD={};function VU(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=oD[e];if(xa(i,e),!function use(){const e=typeof window<"u"&&window.navigator||{},t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in sD)return sD[e];const o=t.behavior||"enable",s="#extension GL_".concat(i[0]," : ").concat(o,"\nvoid main(void) {}"),a=n.createShader(35633);n.shaderSource(a,s),n.compileShader(a);const c=n.getShaderParameter(a,35713);return n.deleteShader(a),sD[e]=c,c}function k1(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function yse(n,e){const t=oD[e];xa(t,e);const i=function gse(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}(n)&&t[1]||t[0],r="string"==typeof i?!!n.getExtension(i):i;return xa(!1===r||!0===r),r}(n,t))}function Qm(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const zU=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],wse=[...zU,[Qm("attribute"),"in $1"],[Qm("varying"),"out $1"]],Ese=[...zU,[Qm("varying"),"in $1"]],HU=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Ase=[...HU,[Qm("in"),"attribute $1"],[Qm("out"),"varying $1"]],Sse=[...HU,[Qm("in"),"varying $1"]],aD="gl_FragColor",cD=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Cse=/void\s+main\s*\([^)]*\)\s*\{\n?/;function O1(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const Dse="\n\n".concat(D1,"\n\n"),GU={[j0]:"vertex",fs:"fragment"};function WU(n,e){let{id:t,source:i,type:r,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:d=!0,log:h}=e;xa("string"==typeof i,"shader source must be a string");const f=r===j0,m=i.split("\n");let y=100,E="",M=i;0===m[0].indexOf("#version ")?(y=300,E=m[0],M=m.slice(1).join("\n")):E="#version ".concat(y);const H={};o.forEach(nt=>{Object.assign(H,nt.getDefines())}),Object.assign(H,s);let $=d?"".concat(E,"\n").concat(function Nse(n){let{id:e,source:t,type:i}=n;return e&&"string"==typeof e&&-1===t.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(GU[i],"\n\n"):""}({id:t,source:i,type:r}),"\n").concat(function Pse(n){let{type:e}=n;return"\n#define SHADER_TYPE_".concat(GU[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function vse(n){switch(function _se(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||hse),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||fse);return{gpuVendor:bse(t,i),vendor:t,renderer:i,version:n.getParameter(pse),shadingLanguageVersion:n.getParameter(mse)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n),"\n").concat(function xse(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return k1(n,Ef.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),k1(n,Ef.GLSL_DERIVATIVES)&&VU(n,Ef.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),k1(n,Ef.GLSL_FRAG_DATA)&&VU(n,Ef.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),k1(n,Ef.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n),"\n").concat(function Fse(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+="#define ".concat(i.toUpperCase()," ").concat(n[i],"\n"))}return 0===e&&(t+="\n"),t}(H),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(E,"\n");const Y=function Bse(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,o]=t.split(":"),s=t.replace(/\(.+/,"");e[r][s]=Object.assign(i,{signature:o})}),e}(a),pe={},De={},Ve={};for(const nt in c){const Ze="string"==typeof c[nt]?{injection:c[nt],order:0}:c[nt],dt=nt.match(/^(v|f)s:(#)?([\w-]+)$/);dt?dt[2]?"decl"===dt[3]?De[nt]=[Ze]:Ve[nt]=[Ze]:pe[nt]=[Ze]:Ve[nt]=[Ze]}for(const nt of o){h&&nt.checkDeprecations(M,h),$+=nt.getModuleSource(r,y);const dt=nt.injections[r];for(const mt in dt){const _t=mt.match(/^(v|f)s:#([\w-]+)$/);if(_t){const ut="decl"===_t[2]?De:Ve;ut[mt]=ut[mt]||[],ut[mt].push(dt[mt])}else pe[mt]=pe[mt]||[],pe[mt].push(dt[mt])}}return $+=Dse,$=FU($,r,De),$+=function Lse(n,e){let t="";for(const i in n){const r=n[i];if(t+="void ".concat(r.signature," {\n"),r.header&&(t+="  ".concat(r.header)),e[i]){const o=e[i];o.sort((s,a)=>s.order-a.order);for(const s of o)t+="  ".concat(s.injection,"\n")}r.footer&&(t+="  ".concat(r.footer)),t+="}\n"}return t}(Y[r],pe),$+=M,$=FU($,r,Ve),$=function Mse(n,e,t){switch(e){case 300:return t?O1(n,wse):function Tse(n){const e=(n=O1(n,Ese)).match(cD);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(aD,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(Cse,i=>"out vec4 ".concat(t,";\n").concat(i)).replace(new RegExp("\\b".concat(aD,"\\b"),"g"),t)}return n}(n);case 100:return t?O1(n,Ase):function Ise(n){const e=(n=O1(n,Sse)).match(cD);if(e){const t=e[1];n=n.replace(cD,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),aD)}return n}(n);default:throw new Error("unknown GLSL version ".concat(e))}}($,l?100:y,f),$}function Ose(n){return function(t){const i={};for(const r of n){const o=r.getUniforms(t,i);Object.assign(i,o)}return i}}const jse={5126:hr.bind(null,"uniform1fv",wa,1,ms),35664:hr.bind(null,"uniform2fv",wa,2,ms),35665:hr.bind(null,"uniform3fv",wa,3,ms),35666:hr.bind(null,"uniform4fv",wa,4,ms),5124:hr.bind(null,"uniform1iv",zu,1,ms),35667:hr.bind(null,"uniform2iv",zu,2,ms),35668:hr.bind(null,"uniform3iv",zu,3,ms),35669:hr.bind(null,"uniform4iv",zu,4,ms),35670:hr.bind(null,"uniform1iv",zu,1,ms),35671:hr.bind(null,"uniform2iv",zu,2,ms),35672:hr.bind(null,"uniform3iv",zu,3,ms),35673:hr.bind(null,"uniform4iv",zu,4,ms),35674:hr.bind(null,"uniformMatrix2fv",wa,4,Td),35675:hr.bind(null,"uniformMatrix3fv",wa,9,Td),35676:hr.bind(null,"uniformMatrix4fv",wa,16,Td),35678:qo,35680:qo,5125:hr.bind(null,"uniform1uiv",P1,1,ms),36294:hr.bind(null,"uniform2uiv",P1,2,ms),36295:hr.bind(null,"uniform3uiv",P1,3,ms),36296:hr.bind(null,"uniform4uiv",P1,4,ms),35685:hr.bind(null,"uniformMatrix2x3fv",wa,6,Td),35686:hr.bind(null,"uniformMatrix2x4fv",wa,8,Td),35687:hr.bind(null,"uniformMatrix3x2fv",wa,6,Td),35688:hr.bind(null,"uniformMatrix3x4fv",wa,12,Td),35689:hr.bind(null,"uniformMatrix4x2fv",wa,8,Td),35690:hr.bind(null,"uniformMatrix4x3fv",wa,12,Td),35678:qo,35680:qo,35679:qo,35682:qo,36289:qo,36292:qo,36293:qo,36298:qo,36299:qo,36300:qo,36303:qo,36306:qo,36307:qo,36308:qo,36311:qo},Use={},Vse={},zse={},$U=[0];function lD(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&($U[0]=n,n=$U);const r=n.length;if(r%e&&ln.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let o=i[r];o||(o=new t(r),i[r]=o);for(let s=0;s<r;s++)o[s]=n[s];return o}function wa(n,e){return lD(n,e,Float32Array,Use)}function zu(n,e){return lD(n,e,Int32Array,Vse)}function P1(n,e){return lD(n,e,Uint32Array,zse)}function YU(n,e,t){const i=jse[t.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(t.type));return i().bind(null,n,e)}function Hse(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function Wse(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function Yse(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof xf||n instanceof Km)||n instanceof no&&!!n.texture}function $se(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,o=t.length;r<o;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function qo(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function hr(n,e,t,i){let r=null,o=null;return(s,a,c)=>{const l=e(c,t),d=l.length;let h=!1;if(null===r)r=new Float32Array(d),o=d,h=!0;else{Xt(o===d,"Uniform length cannot change.");for(let f=0;f<d;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(s,n,a,l),r.set(l)),h}}function ms(n,e,t,i){n[e](t,i)}function Td(n,e,t,i){n[e](t,!1,i)}function N1(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function qU(n,e){let t="";for(let i=0;i<e.length;i++)if((n[i+3]||n[i+2]||n[i+1])&&(t+="".concat(e[i],"\n"),n[i+1])){const o=n[i+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();t+=KU("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return t}function KU(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return"".concat(t).concat(n)}class U0 extends Sd{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Xt(!1),"unknown"}}constructor(e,t){v1(e),Xt("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:N1(t.source,null)||t.id||na("unnamed ".concat(U0.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const i=N1(t,null);i&&(this.id=na(i)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(U0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return N1(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:o,warnings:s}=function XU(n,e,t,i){const r=n.split(/\r?\n/),o={},s={},a=i||N1(e)||"(unnamed)",c="".concat(function Kse(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)," shader ").concat(a);for(let d=0;d<r.length;d++){const h=r[d];if(h.length<=1)continue;const f=h.split(":"),m=f[0],y=parseInt(f[2],10);if(isNaN(y))throw new Error("GLSL compilation error in ".concat(c,": ").concat(n));"WARNING"!==m?o[y]=h:s[y]=h}const l=function Jse(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((o,s)=>{const a=String(s+e);return KU(a,r-a.length)+t+o})}(e);return{shaderName:c,errors:qU(o,l),warnings:qU(s,l)}}(i,this.source,this.shaderType,this.id);throw ln.error("GLSL compilation errors in ".concat(r,"\n").concat(o))(),ln.warn("GLSL compilation warnings in ".concat(r,"\n").concat(s))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class dD extends U0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class uD extends U0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Qse=5120,eae=5121,tae=5122,nae=5123,po=5126,V0=5124,z0=5125,hD={[po]:[po,1,"float"],35664:[po,2,"vec2"],35665:[po,3,"vec3"],35666:[po,4,"vec4"],[V0]:[V0,1,"int"],35667:[V0,2,"ivec2"],35668:[V0,3,"ivec3"],35669:[V0,4,"ivec4"],[z0]:[z0,1,"uint"],36294:[z0,2,"uvec2"],36295:[z0,3,"uvec3"],36296:[z0,4,"uvec4"],35670:[po,1,"bool"],35671:[po,2,"bvec2"],35672:[po,3,"bvec3"],35673:[po,4,"bvec4"],35674:[po,8,"mat2"],35685:[po,8,"mat2x3"],35686:[po,8,"mat2x4"],35675:[po,12,"mat3"],35687:[po,12,"mat3x2"],35688:[po,12,"mat3x4"],35676:[po,16,"mat4"],35689:[po,16,"mat4x2"],35690:[po,16,"mat4x3"]};function n8(n){const e=hD[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function i8(n,e){switch(n){case Qse:case eae:case tae:case nae:n=po}for(const t in hD){const[i,r,o]=hD[t];if(i===n&&r===e)return{glType:t,name:o}}return null}class Cae{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=t.getActiveAttrib(e.handle,r),c=t.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((r,o)=>r.location-o.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!fi(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:o,type:s,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,o,s,a)}this.varyingInfos.sort((r,o)=>r.location-o.location)}_addAttribute(e,t,i,r){const{type:o,components:s}=n8(i),a={type:o,size:r*s};this._inferProperties(e,t,a);const c={location:e,name:t,accessor:new ia(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:o,components:s}=n8(i),c={location:e,name:t,accessor:new ia({type:o,size:r*s})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Mae=35981,Tae=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class o8 extends Sd{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",Tae),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:i,fs:r,varyings:o,bufferMode:s=Mae}=e;return this.hash=t||"",this.vs="string"==typeof i?new dD(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new uD(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Xt(this.vs instanceof dD),Xt(this.fs instanceof uD),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(hs(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Cae(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:i=4,vertexCount:r,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:d=0,isInstanced:h=d>0,vertexArray:f=null,transformFeedback:m,framebuffer:y,parameters:E={},uniforms:M,samplers:H}=e;if((M||H)&&(ln.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(M||{})),ln.priority>=t){const $=y?y.id:"default",Y="mode=".concat(Vu(this.gl,i)," verts=").concat(r," ")+"instances=".concat(d," indexType=").concat(Vu(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat($);ln.log(t,Y)()}return Xt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===d||(f.bindForDraw(r,d,()=>{if(void 0!==y&&(E=Object.assign({},E,{framebuffer:y})),m){const $=function t8(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Xt(!1),0}}(i);m.begin($)}this._bindTextures(),Wa(this.gl,E,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,o,d):c&&fi(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(i,s,a,r,l,o):c?this.gl.drawElements(i,r,l,o):h?this.gl2.drawArraysInstanced(i,o,r,d):this.gl.drawArrays(i,o,r)}),m&&m.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ln.priority>=2&&function Gse(n,e,t){for(const i in n){const r=n[i];if((!t||t[i])&&!Wse(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let o=i,s=!1;if(o instanceof no&&(o=o.texture),o instanceof xf)if(s=this.uniforms[t]!==i,s){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:c}=r;a.bind(c),o=c,this._textureUniforms[t]=a}else o=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(o)||s)&&$se(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new dD({handle:r});break;case 35632:i.fs=new uD({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=na(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),ln.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),ln.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||ln.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=Hse(i.name);let o=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=YU(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(r,"[").concat(s,"]")),this._uniformSetters["".concat(r,"[").concat(s,"]")]=YU(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class H0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new H0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:i="",defines:r={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),d=this._getHash(t),h=this._getHash(i),f=l.map(Y=>this._getHash(Y.name)).sort(),m=s.map(Y=>this._getHash(Y)),y=Object.keys(r).sort(),E=Object.keys(o).sort(),M=[],H=[];for(const Y of y)M.push(this._getHash(Y)),M.push(this._getHash(r[Y]));for(const Y of E)H.push(this._getHash(Y)),H.push(this._getHash(o[Y]));const $="".concat(d,"/").concat(h,"D").concat(M.join("/"),"M").concat(f.join("/"),"I").concat(H.join("/"),"V").concat(m.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[$]){const Y=function kse(n,e){const{vs:t,fs:i}=e,r=dse(e.modules||[]);return{gl:n,vs:WU(n,Object.assign({},e,{source:t,type:j0,modules:r})),fs:WU(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Ose(r)}}(this.gl,{vs:t,fs:i,modules:l,inject:o,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[$]=new o8(this.gl,{hash:$,vs:Y.vs,fs:Y.fs,varyings:s,bufferMode:a}),this._getUniforms[$]=Y.getUniforms||(pe=>{}),this._useCounts[$]=0}return this._useCounts[$]++,this._programCache[$]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],c=a.name;t[r++]=a,i[c]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],c=a.name;i[c]||(t[r++]=a,i[c]=!0)}return t.length=r,t}}let L1=null;const B1=globalThis;function s8(n){if(!n&&!El())return"Node";if(vj(n))return"Electron";const t=n||(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":B1.chrome?"Chrome":B1.safari?"Safari":B1.mozInnerScreenX?"Firefox":"Unknown"}class Ea extends Sd{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||fi(e)||"Chrome"===s8()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ea(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ea.MAX_ATTRIBUTES=Ea.MAX_ATTRIBUTES||e.getParameter(34921),Ea.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Ea._setConstantFloatArray(e,t,i);break;case Int32Array:Ea._setConstantIntArray(e,t,i);break;case Uint32Array:Ea._setConstantUintArray(e,t,i);break;default:Xt(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ea.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Xt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:d}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),l?(Xt(fi(h)),f.vertexAttribIPointer(e,r,o,s,a)):h.vertexAttribPointer(e,r,o,c,s,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,d||0)}),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!Ea.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,o=i.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new Yi(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){const a=function Dae(n,e){const t=function Iae(n){return(!L1||L1.byteLength<n)&&(L1=new ArrayBuffer(n)),L1}(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}(t.constructor,o);(function Rae(n){let{target:e,source:t,start:i=0,count:r=1}=n;const o=t.length,s=r*o;let a=0;for(let c=i;a<o;a++)e[c++]=t[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s)})({target:a,source:i,start:0,count:o}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:Xt(!1)}}static _setConstantIntArray(e,t,i){switch(Xt(fi(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:Xt(!1)}}static _setConstantUintArray(e,t,i){switch(Xt(fi(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:Xt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:i}=t;return Xt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const Pae=/^(.+)__LOCATION_([0-9]+)$/,Nae=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Fae{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ea(e),Yj(this,"VertexArray","v6.0",Nae),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,o)),this}setConstant(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:o}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=o,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Yi(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Yi&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof Yi&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=t,ln.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const c=this._getAttributeInfo(a||s);if(!c)return o;const d=ia.resolve(c.accessor,this.accessors[s]||{},i,r),{size:h,type:f}=d;return Xt(Number.isFinite(h)&&Number.isFinite(f)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=Pae.exec(e),r=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+o,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof Yi)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Yi)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof Yi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)r=this.values[o],ArrayBuffer.isView(r)&&this._setConstantAttribute(o,r)}_setConstantAttributeZero(e,t){if(Ea.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Ea.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:o}=r,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof Yi){const a=i;if(s){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ln.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function G0(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function Lae(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let s=0;s<n.length&&s<t;++s)s>0&&(r+=",".concat(s%i==0?" ":"")),r+=G0(n[s],e);const o=n.length>t?"...":"]";return"".concat(r).concat(o)}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function a8(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let l,d,h,o="NOT PROVIDED",s=1,a=0,c=0;if(t&&(o=t.type,s=t.size,o=String(o).replace("Array",""),l=-1!==o.indexOf("nt")),e instanceof Yi){const f=e,{data:m,changed:y}=f.getDebugData();let E;return d=y?"*":"",h=m,c=f.byteLength,a=c/m.BYTES_PER_ELEMENT/s,t?E="".concat(t.divisor>0?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(Vu(r,o),")"):(l=!0,E="".concat(c," bytes")),{[i]:"".concat(d).concat(G0(h,{size:s,isInteger:l})),"Format ":E}}return h=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=-1!==o.indexOf("nt"),{[i]:"".concat(G0(h,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function jae(n,e){const{type:t,size:i}=e,r=i8(t,i);return r?"".concat(n," (").concat(r.name,")"):n}function c8(n){let{header:e="Uniforms",program:t,uniforms:i,undefinedOnly:r=!1}=n;Xt(t);const s=".*Matrix",c={},l=Object.keys(t._uniformSetters).sort();let d=0;for(const m of l)!m.match(".*_.*")&&!m.match(s)&&fD({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)m.match(s)&&fD({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;for(const m of l)c[m]||fD({table:c,header:e,uniforms:i,uniformName:m,undefinedOnly:r})&&d++;let h=0;const f={};if(!r)for(const m in i){const y=i[m];c[m]||(h++,f[m]={Type:"NOT USED: ".concat(y),[e]:G0(y)})}return{table:c,count:d,unusedTable:f,unusedCount:h}}function fD(n){let{table:e,header:t,uniforms:i,uniformName:r,undefinedOnly:o}=n;const s=i[r],a=function Uae(n){return null!=n}(s);return!(o&&a||(e[r]={[t]:a?G0(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},0))}function l8(n){const{type:e,size:t}=n.accessor,i=i8(e,t);return i?"".concat(i.name," ").concat(n.name):n.name}const zae={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Gae(n,e){const{attributeMap:t=zae}=e||{};return t&&t[n]||n}function Wae(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Xt(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const d8=()=>{},Xae={};class ig{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=na("model")}=t;Xt(y1(e)),this.id=i,this.gl=e,this.id=t.id||na("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||H0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Xt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Xt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Xt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function Hae(n,e,t){const i={};let r=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=Gae(o,t);if("indices"===o)r=s;else if(s.constant)i[a]=s.value;else{const c=s.value,l={...s};delete l.value,i[a]=[new Yi(n,c),l],Wae(o,l)}}if(r){const o=r.value||r;Xt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Yi(n,{data:o,target:34963}),s]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Xm(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return UI(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(o),this.updateModuleSettings(t),this.setUniforms(r),ln.priority>=2&&(l=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:h=d.isIndexed,indexType:f=d.indexType,indexOffset:m=d.indexOffset,vertexArrayInstanced:y=d.isInstanced}=this.props;y&&!this.isInstanced&&ln.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:E,instanceCount:M}=this,{onBeforeRender:H=d8,onAfterRender:$=d8}=this.props;H(),this.program.setUniforms(this.uniforms);const Y=this.program.draw(Object.assign(Xae,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:h,indexType:f,isInstanced:E,instanceCount:M,offset:h?m:0}));return $(),ln.priority>=2&&this._logDrawCallEnd(l,c,i),Y}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:o}=e;i&&this._setFeedbackBuffers(i),t&&(o=Object.assign({},o,{35977:t})),r.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{r.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ln.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Xt(t instanceof o8,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Fae(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Yi&&t.delete()}}_setAnimationProps(e){this.animated&&Xt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Xm(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new kU(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),ln.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:ln.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const o=function Bae(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=a8(e,e.elements,null,t));const r=e.values;for(const o in r){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(jae(s.name,c))),i[a]=a8(e,r[o],c,t)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=c8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:d}=c8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&ln.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&ln.log("UNUSED UNIFORMS",Object.keys(a))();const h=function Vae(n){const e={},t="Accessors for ".concat(n.id);for(const i of n.attributeInfos)if(i){const r=l8(i);e["in ".concat(r)]={[t]:JSON.stringify(i.accessor)}}for(const i of n.varyingInfos)if(i){const r=l8(i);e["out ".concat(r)]={[t]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);ln.table(e,o)(),ln.table(e,s)(),ln.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),ln.groupEnd(2)()}}class pD{static isSupported(e){return fi(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();Xt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new ig(t,Object.assign({},e,{fs:e.fs||RU({version:OU(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function qae(n){return!(Xm(n.feedbackBuffers)&&Xm(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new Goe(e,t)),function Kae(n){return!(Xm(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new rse(e,t)),Xt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}class W0{constructor(e){Ce(this,"_inProgress",void 0),Ce(this,"_handle",void 0),Ce(this,"_timeline",void 0),Ce(this,"time",void 0),Ce(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(i=this.settings).onStart)||void 0===t||t.call(i,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const rce={interpolation:class Jae{constructor({gl:e,attribute:t,timeline:i}){Ce(this,"gl",void 0),Ce(this,"type","interpolation"),Ce(this,"attributeInTransition",void 0),Ce(this,"settings",void 0),Ce(this,"attribute",void 0),Ce(this,"transition",void 0),Ce(this,"currentStartIndices",void 0),Ce(this,"currentLength",void 0),Ce(this,"transform",void 0),Ce(this,"buffers",void 0),this.gl=e,this.transition=new W0(i),this.attribute=t,this.attributeInTransition=new JI(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function Qae(n,e){const t=CU(e.size);return new pD(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new Yi(e,r),new Yi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:o}=this;MU(r);const s={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)TU({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=KI(o,t),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:r[0],aTo:SU(0,o)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:i}=this.settings,{time:r}=this.transition;let o=r/t;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class ece{constructor({gl:e,attribute:t,timeline:i}){Ce(this,"gl",void 0),Ce(this,"type","spring"),Ce(this,"attributeInTransition",void 0),Ce(this,"settings",void 0),Ce(this,"attribute",void 0),Ce(this,"transition",void 0),Ce(this,"currentStartIndices",void 0),Ce(this,"currentLength",void 0),Ce(this,"texture",void 0),Ce(this,"framebuffer",void 0),Ce(this,"transform",void 0),Ce(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new W0(i),this.attribute=t,this.attributeInTransition=new JI(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function nce(n){return new Yo(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function ice(n,e){return new no(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function tce(n,e,t){const i=CU(e.size);return new pD(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Yi(e,r),new Yi(e,r),new Yi(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:o}=this,s={numInstances:t,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)TU({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=KI(o,t),this.attributeInTransition.setData({buffer:r[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:SU(0,o)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;if(!r.update())return!1;const s=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),MU(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),x1(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class oce{constructor(e,{id:t,timeline:i}){Ce(this,"id",void 0),Ce(this,"isSupported",void 0),Ce(this,"gl",void 0),Ce(this,"timeline",void 0),Ce(this,"transitions",void 0),Ce(this,"needsRedraw",void 0),Ce(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=pD.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const o=e[r],s=o.getTransitionSetting(t);s&&this._updateAttribute(r,o,s)}for(const r in this.transitions){const o=e[r];(!o||!o.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let o=!r||r.type!==i.type;if(o){if(!this.isSupported)return void yi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const s=rce[i.type];s?this.transitions[e]=new s({attribute:t,timeline:this.timeline,gl:this.gl}):(yi.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const u8="attributeManager.invalidate";class uce{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){Ce(this,"id",void 0),Ce(this,"gl",void 0),Ce(this,"attributes",void 0),Ce(this,"updateTriggers",void 0),Ce(this,"needsRedraw",void 0),Ce(this,"userData",void 0),Ce(this,"stats",void 0),Ce(this,"attributeTransitionManager",void 0),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new oce(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const i=this._invalidateTrigger(e,t);ps(u8,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);ps(u8,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:o={},buffers:s={},context:a={}}){let c=!1;ps("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const d=this.attributes[l],h=d.settings.accessor;d.startIndices=i,d.numInstances=t,o[l]&&yi.removed("props.".concat(l),"data.attributes.".concat(l))(),d.setExternalBuffer(s[l])||d.setBinaryValue("string"==typeof h?s[h]:void 0,e.startIndices)||"string"==typeof h&&!s[h]&&d.setConstantValue(o[h])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:t,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&ps("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const o in t){const s=t[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(r[o]=s)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,t={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],t);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:i.instanced?1:t.divisor||0};return new JI(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,o=r[e];return o&&o.forEach(s=>{const a=i[s];a&&a.setNeedsUpdate(a.id,t)}),o}_updateAttribute(e){const{attribute:t,numInstances:i}=e;ps("attribute.updateStart",t),t.constant?t.setConstantValue(t.value):(t.allocate(i)&&ps("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,ps("attribute.updateEnd",t,i)))}}function f8(n,e,t,i,r){const o=e-n;return(t-e)*r+-o*i+o+e}function p8(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const mce={interpolation:class hce extends W0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:o}}=this,s=o(e/r);this._value=w1(t,i,s)}},spring:class pce extends W0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=function fce(n,e,t,i,r){if(Array.isArray(t)){const o=[];for(let s=0;s<t.length;s++)o[s]=f8(n[s],e[s],t[s],i,r);return o}return f8(n,e,t,i,r)}(o,s,t,i,r);const c=p8(a,t),l=p8(a,s);c<1e-5&&l<1e-5&&(a=t,this.end()),this._prevValue=s,this._currValue=a}}};class gce{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:o}=this;if(o.has(e)){const c=o.get(e),{value:l=c.settings.fromValue}=c;t=l,this.remove(e)}if(!(r=AU(r)))return;const s=mce[r.type];if(!s)return void yi.error("unsupported transition type '".concat(r.type,"'"))();const a=new s(this.timeline);a.start({...r,fromValue:t,toValue:i}),o.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const j1=Symbol.for("component"),og=Symbol.for("asyncPropDefaults"),Af=Symbol.for("asyncPropOriginal"),Hu=Symbol.for("asyncPropResolved");function yce(n,e){if(!n.transitions)return!1;const t={},i=gD(n);let r=!1;for(const o in n.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&mD(n[o],e[o],s)&&(t[o]=!0,r=!0)}return!!r&&t}function m8({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}){if(e===n)return!1;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const o of Object.keys(n))if(!(o in t)){if(!(o in e))return"".concat(r,".").concat(o," added");const s=mD(n[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in t)){if(!(o in n))return"".concat(r,".").concat(o," dropped");if(!Object.hasOwnProperty.call(n,o)){const s=mD(n[o],e[o],i[o]);if(s)return"".concat(r,".").concat(o," ").concat(s)}}return!1}function mD(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function wce(n,e){if(null===e)return!0;const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(!t||!i||i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function g8(n,e,t){let i=n.updateTriggers[t];i=i??{};let r=e.updateTriggers[t];return r=r??{},m8({oldProps:r,newProps:i,triggerName:t})}function gD(n){const e=n[j1],t=e&&e.constructor;return t?t._propTypes:{}}function Tce(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function U1(n){let t,e={};return i=>{for(const r in i)if(!Tce(i[r],e[r])){t=n(i),e=i;break}return t}}function Ice(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i={...n.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function _D(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=e[9],f=e[10],m=e[11],y=e[12],E=e[13],M=e[14],H=e[15],$=t*a-i*s,Y=t*c-r*s,pe=t*l-o*s,De=i*c-r*a,Ve=i*l-o*a,nt=r*l-o*c,Ze=d*E-h*y,dt=d*M-f*y,mt=d*H-m*y,_t=h*M-f*E,xt=h*H-m*E,ut=f*H-m*M,pt=$*ut-Y*xt+pe*_t+De*mt-Ve*dt+nt*Ze;return pt?(n[0]=(a*ut-c*xt+l*_t)*(pt=1/pt),n[1]=(r*xt-i*ut-o*_t)*pt,n[2]=(E*nt-M*Ve+H*De)*pt,n[3]=(f*Ve-h*nt-m*De)*pt,n[4]=(c*mt-s*ut-l*dt)*pt,n[5]=(t*ut-r*mt+o*dt)*pt,n[6]=(M*pe-y*nt-H*Y)*pt,n[7]=(d*nt-f*pe+m*Y)*pt,n[8]=(s*xt-a*mt+l*Ze)*pt,n[9]=(i*mt-t*xt-o*Ze)*pt,n[10]=(y*Ve-E*pe+H*$)*pt,n[11]=(h*pe-d*Ve-m*$)*pt,n[12]=(a*dt-s*_t-c*Ze)*pt,n[13]=(t*_t-i*dt+r*Ze)*pt,n[14]=(E*Y-y*De-M*$)*pt,n[15]=(d*De-h*Y+f*$)*pt,n):null}function Sf(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=e[9],m=e[10],y=e[11],E=e[12],M=e[13],H=e[14],$=e[15],Y=t[0],pe=t[1],De=t[2],Ve=t[3];return n[0]=Y*i+pe*a+De*h+Ve*E,n[1]=Y*r+pe*c+De*f+Ve*M,n[2]=Y*o+pe*l+De*m+Ve*H,n[3]=Y*s+pe*d+De*y+Ve*$,n[4]=(Y=t[4])*i+(pe=t[5])*a+(De=t[6])*h+(Ve=t[7])*E,n[5]=Y*r+pe*c+De*f+Ve*M,n[6]=Y*o+pe*l+De*m+Ve*H,n[7]=Y*s+pe*d+De*y+Ve*$,n[8]=(Y=t[8])*i+(pe=t[9])*a+(De=t[10])*h+(Ve=t[11])*E,n[9]=Y*r+pe*c+De*f+Ve*M,n[10]=Y*o+pe*l+De*m+Ve*H,n[11]=Y*s+pe*d+De*y+Ve*$,n[12]=(Y=t[12])*i+(pe=t[13])*a+(De=t[14])*h+(Ve=t[15])*E,n[13]=Y*r+pe*c+De*f+Ve*M,n[14]=Y*o+pe*l+De*m+Ve*H,n[15]=Y*s+pe*d+De*y+Ve*$,n}function V1(n,e,t){var s,a,c,l,d,h,f,m,y,E,M,H,i=t[0],r=t[1],o=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*o+e[12],n[13]=e[1]*i+e[5]*r+e[9]*o+e[13],n[14]=e[2]*i+e[6]*r+e[10]*o+e[14],n[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(a=e[1],c=e[2],l=e[3],d=e[4],h=e[5],f=e[6],m=e[7],y=e[8],E=e[9],M=e[10],H=e[11],n[0]=s=e[0],n[1]=a,n[2]=c,n[3]=l,n[4]=d,n[5]=h,n[6]=f,n[7]=m,n[8]=y,n[9]=E,n[10]=M,n[11]=H,n[12]=s*i+d*r+y*o+e[12],n[13]=a*i+h*r+E*o+e[13],n[14]=c*i+f*r+M*o+e[14],n[15]=l*i+m*r+H*o+e[15]),n}function bD(n,e,t){var i=t[0],r=t[1],o=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*o,n[9]=e[9]*o,n[10]=e[10]*o,n[11]=e[11]*o,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function _8(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],d=e[9],h=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=o*r+l*i,n[5]=s*r+d*i,n[6]=a*r+h*i,n[7]=c*r+f*i,n[8]=l*r-o*i,n[9]=d*r-s*i,n[10]=h*r-a*i,n[11]=f*r-c*i,n}function b8(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],d=e[5],h=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*r+l*i,n[1]=s*r+d*i,n[2]=a*r+h*i,n[3]=c*r+f*i,n[4]=l*r-o*i,n[5]=d*r-s*i,n[6]=h*r-a*i,n[7]=f*r-c*i,n}function y8(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function $0(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*o+t[12]*s,n[1]=t[1]*i+t[5]*r+t[9]*o+t[13]*s,n[2]=t[2]*i+t[6]*r+t[10]*o+t[14]*s,n[3]=t[3]*i+t[7]*r+t[11]*o+t[15]*s,n}!function Gce(){var n=new ra(4);ra!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const v8=[0,0,0,0],rle=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],x8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ole=[0,0,0],w8=[0,0,0],sle=U1(function lle({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function ale(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:o,viewProjectionMatrix:s}=n,a=v8,c=v8,l=n.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:h,offsetMode:f}=E8(n,e,t);return f&&(c=n.projectPosition(d||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=$0([],c,s),o=i||o,s=Sf([],r,o),s=Sf([],s,rle)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:d}}(n,t,i),d=n.getDistanceScales(),h=[n.width*e,n.height*e],f=$0([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,m={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:ole,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:x8,project_uCameraPosition:a};if(l){const y=n.getDistanceScales(l);switch(t){case Ai.METER_OFFSETS:m.project_uCommonUnitsPerWorldUnit=y.unitsPerMeter,m.project_uCommonUnitsPerWorldUnit2=y.unitsPerMeter2;break;case Ai.LNGLAT:case Ai.LNGLAT_OFFSETS:n._pseudoMeters||(m.project_uCommonUnitsPerMeter=y.unitsPerMeter),m.project_uCommonUnitsPerWorldUnit=y.unitsPerDegree,m.project_uCommonUnitsPerWorldUnit2=y.unitsPerDegree2;break;case Ai.CARTESIAN:m.project_uCommonUnitsPerWorldUnit=[1,1,y.unitsPerMeter[2]],m.project_uCommonUnitsPerWorldUnit2=[0,0,y.unitsPerMeter2[2]]}}return m});function E8(n,e,t=w8){t.length<3&&(t=[t[0],t[1],0]);let r,i=t,o=!0;switch(r=e===Ai.LNGLAT_OFFSETS||e===Ai.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Al.WEB_MERCATOR:(e===Ai.LNGLAT||e===Ai.CARTESIAN)&&(r=[0,0,0],o=!1);break;case Al.WEB_MERCATOR_AUTO_OFFSET:e===Ai.LNGLAT?i=r:e===Ai.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case Al.IDENTITY:i=n.position.map(Math.fround),i[2]=i[2]||0;break;case Al.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class dle extends E1{toString(){let e="[";if(Gr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=pi(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function z1(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function A8(n,e){return n[0]=-e[0],n[1]=-e[1],n}function S8(n,e,t,i){var r=e[0],o=e[1];return n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n}!function ule(){var n=new ra(2);ra!=Float32Array&&(n[0]=0,n[1]=0)}();var C8=function(n){return n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3",n}(C8||{});const fle=45*Math.PI/180,ple=1,yD=.1,vD=500,mle=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Hn extends dle{static get IDENTITY(){return function _le(){return G1||(G1=new Hn,Object.freeze(G1)),G1}()}static get ZERO(){return function gle(){return H1||(H1=new Hn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(H1)),H1}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return C8}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,o,s,a,c,l,d,h,f,m,y,E,M){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=d,this[10]=h,this[11]=f,this[12]=m,this[13]=y,this[14]=E,this[15]=M,this.check()}setRowMajor(e,t,i,r,o,s,a,c,l,d,h,f,m,y,E,M){return this[0]=e,this[1]=o,this[2]=l,this[3]=m,this[4]=t,this[5]=s,this[6]=d,this[7]=y,this[8]=i,this[9]=a,this[10]=h,this[11]=E,this[12]=r,this[13]=c,this[14]=f,this[15]=M,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(mle)}fromObject(e){return this.check()}fromQuaternion(e){return function Lce(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t+t,a=i+i,c=r+r,l=t*s,d=i*s,h=i*a,f=r*s,m=r*a,y=r*c,E=o*s,M=o*a,H=o*c;n[0]=1-h-y,n[1]=d+H,n[2]=f-M,n[3]=0,n[4]=d-H,n[5]=1-l-y,n[6]=m+E,n[7]=0,n[8]=f+M,n[9]=m-E,n[10]=1-l-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:i,bottom:r,top:o,near:s=yD,far:a=vD}=e;return a===1/0?function ble(n,e,t,i,r,o){const a=2*o/(r-i),c=(t+e)/(t-e),l=(r+i)/(r-i),f=-2*o;n[0]=2*o/(t-e),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=c,n[9]=l,n[10]=-1,n[11]=-1,n[12]=0,n[13]=0,n[14]=f,n[15]=0}(this,t,i,r,o,s):function Bce(n,e,t,i,r,o,s){var a=1/(t-e),c=1/(r-i),l=1/(o-s);n[0]=2*o*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*o*c,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*c,n[10]=(s+o)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=s*o*2*l,n[15]=0}(this,t,i,r,o,s,a),this.check()}lookAt(e){const{eye:t,center:i=[0,0,0],up:r=[0,1,0]}=e;return function Hce(n,e,t,i){var r,o,s,a,c,l,d,h,f,m,y=e[0],E=e[1],M=e[2],H=i[0],$=i[1],Y=i[2],pe=t[0],De=t[1],Ve=t[2];Math.abs(y-pe)<Cl&&Math.abs(E-De)<Cl&&Math.abs(M-Ve)<Cl?function Dce(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(d=y-pe,h=E-De,f=M-Ve,r=$*(f*=m=1/Math.hypot(d,h,f))-Y*(h*=m),o=Y*(d*=m)-H*f,s=H*h-$*d,(m=Math.hypot(r,o,s))?(r*=m=1/m,o*=m,s*=m):(r=0,o=0,s=0),a=h*s-f*o,c=f*r-d*s,l=d*o-h*r,(m=Math.hypot(a,c,l))?(a*=m=1/m,c*=m,l*=m):(a=0,c=0,l=0),n[0]=r,n[1]=a,n[2]=d,n[3]=0,n[4]=o,n[5]=c,n[6]=h,n[7]=0,n[8]=s,n[9]=l,n[10]=f,n[11]=0,n[12]=-(r*y+o*E+s*M),n[13]=-(a*y+c*E+l*M),n[14]=-(d*y+h*E+f*M),n[15]=1)}(this,t,i,r),this.check()}ortho(e){const{left:t,right:i,bottom:r,top:o,near:s=yD,far:a=vD}=e;return function Vce(n,e,t,i,r,o,s){var a=1/(e-t),c=1/(i-r),l=1/(o-s);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*c,n[14]=(s+o)*l,n[15]=1}(this,t,i,r,o,s,a),this.check()}orthographic(e){const{fovy:t=fle,aspect:i=ple,focalDistance:r=1,near:o=yD,far:s=vD}=e;M8(t);const c=r*Math.tan(t/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:o=500}=e;return M8(t),function jce(n,e,t,i,r){var s,o=1/Math.tan(e/2);n[0]=o/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(s=1/(i-r)),n[14]=2*r*i*s):(n[10]=-1,n[14]=-2*i)}(this,t,i,r,o),this.check()}determinant(){return function kce(n){var e=n[0],t=n[1],i=n[2],r=n[3],o=n[4],s=n[5],a=n[6],c=n[7],l=n[8],d=n[9],h=n[10],f=n[11],m=n[12],y=n[13],E=n[14],M=n[15];return(e*s-t*o)*(h*M-f*E)-(e*a-i*o)*(d*M-f*y)+(e*c-r*o)*(d*E-h*y)+(t*a-i*s)*(l*M-f*m)-(t*c-r*s)*(l*E-h*m)+(i*c-r*a)*(l*y-d*m)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return function Rce(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=o,n[11]=e[14],n[12]=r,n[13]=s,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return _D(this,this),this.check()}multiplyLeft(e){return Sf(this,e,this),this.check()}multiplyRight(e){return Sf(this,this,e),this.check()}rotateX(e){return _8(this,this,e),this.check()}rotateY(e){return function Pce(n,e,t){var i=Math.sin(t),r=Math.cos(t),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],d=e[9],h=e[10],f=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*r-l*i,n[1]=s*r-d*i,n[2]=a*r-h*i,n[3]=c*r-f*i,n[8]=o*i+l*r,n[9]=s*i+d*r,n[10]=a*i+h*r,n[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return b8(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function Oce(n,e,t,i){var c,l,d,h,f,m,y,E,M,H,$,Y,pe,De,Ve,nt,Ze,dt,mt,_t,xt,ut,pt,Tt,r=i[0],o=i[1],s=i[2],a=Math.hypot(r,o,s);a<Cl||(r*=a=1/a,o*=a,s*=a,c=Math.sin(t),l=Math.cos(t),f=e[1],m=e[2],y=e[3],M=e[5],H=e[6],$=e[7],pe=e[9],De=e[10],Ve=e[11],mt=r*o*(d=1-l)-s*c,_t=o*o*d+l,xt=s*o*d+r*c,ut=r*s*d+o*c,pt=o*s*d-r*c,Tt=s*s*d+l,n[0]=(h=e[0])*(nt=r*r*d+l)+(E=e[4])*(Ze=o*r*d+s*c)+(Y=e[8])*(dt=s*r*d-o*c),n[1]=f*nt+M*Ze+pe*dt,n[2]=m*nt+H*Ze+De*dt,n[3]=y*nt+$*Ze+Ve*dt,n[4]=h*mt+E*_t+Y*xt,n[5]=f*mt+M*_t+pe*xt,n[6]=m*mt+H*_t+De*xt,n[7]=y*mt+$*_t+Ve*xt,n[8]=h*ut+E*pt+Y*Tt,n[9]=f*ut+M*pt+pe*Tt,n[10]=m*ut+H*pt+De*Tt,n[11]=y*ut+$*pt+Ve*Tt,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return bD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return V1(this,this,e),this.check()}transform(e,t){return 4===e.length?(A1(t=$0(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;let r;switch(i){case 2:r=function hle(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:r=WI(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return A1(r,e.length),r}transformAsVector(e,t){let i;switch(e.length){case 2:i=function woe(n,e,t){const i=e[0],r=e[1],o=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/o,n[1]=(t[1]*i+t[5]*r)/o,n}(t||[-0,-0],e,this);break;case 3:i=_U(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return A1(i,e.length),i}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}}let H1,G1;function M8(n){if(n>2*Math.PI)throw Error("expected radians")}function sg(n,e){const t=$0([],e,n);return y8(t,t,1/t[3]),t}function T8(n,e){const t=n%e;return t<0?e+t:t}function xD(n,e,t){return n<e?e:n>t?t:n}const wD=Math.log2||function vle(n){return Math.log(n)*Math.LOG2E};function Id(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const kc=Math.PI,I8=kc/4,$a=kc/180,ED=180/kc,ag=512,W1=4003e4,$1=85.051129,xle=1.5;function Y1(n){const[e,t]=n;return Id(Number.isFinite(e)),Id(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude"),[ag*(e*$a+kc)/(2*kc),ag*(kc+Math.log(Math.tan(I8+t*$a*.5)))/(2*kc)]}function cg(n){const[e,t]=n,i=e/ag*(2*kc)-kc,r=2*(Math.atan(Math.exp(t/ag*(2*kc)-kc))-I8);return[i*ED,r*ED]}function AD(n){const{latitude:e,longitude:t,highPrecision:i=!1}=n;Id(Number.isFinite(e)&&Number.isFinite(t));const r=ag,o=Math.cos(e*$a),s=r/360,a=s/o,c=r/W1/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(i){const d=$a*Math.tan(e*$a)/o,f=r/W1*d,m=f/a*c;l.unitsPerDegree2=[0,s*d/2,f],l.unitsPerMeter2=[m,0,m]}return l}function D8(n,e){const[t,i,r]=n,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=AD({longitude:t,latitude:i,highPrecision:!0}),d=Y1(n);d[0]+=o*(c[0]+l[0]*s),d[1]+=s*(c[1]+l[1]*s);const h=cg(d),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function X1(n){return 2*Math.atan(.5/n)*ED}function SD(n){return.5/Math.tan(.5*n*$a)}function k8(n,e){const[t,i,r=0]=n;return Id(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),sg(e,[t,i,r,1])}function Y0(n,e,t=0){const[i,r,o]=n;if(Id(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o))return sg(e,[i,r,o,1]);const s=sg(e,[i,r,0,1]),a=sg(e,[i,r,1,1]),c=s[2],l=a[2];return S8([],s,a,c===l?0:((t||0)-c)/(l-c))}function O8(n){const{width:e,height:t,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=n,[[a,c],[l,d]]=i,h=function Sle(n=0){return"number"==typeof n?{top:n,bottom:n,left:n,right:n}:(Id(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}(n.padding),f=Y1([a,xD(d,-$1,$1)]),m=Y1([l,xD(c,-$1,$1)]),y=[Math.max(Math.abs(m[0]-f[0]),r),Math.max(Math.abs(m[1]-f[1]),r)],E=[e-h.left-h.right-2*Math.abs(s[0]),t-h.top-h.bottom-2*Math.abs(s[1])];Id(E[0]>0&&E[1]>0);const M=E[0]/y[0],H=E[1]/y[1],De=cg([(m[0]+f[0])/2+(h.right-h.left)/2/M,(m[1]+f[1])/2+(h.top-h.bottom)/2/H]),Ve=Math.min(o,wD(Math.abs(Math.min(M,H))));return Id(Number.isFinite(Ve)),{longitude:De[0],latitude:De[1],zoom:Ve}}const P8=Math.PI/180;function N8(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=sg(i,[e,0,1,1]),o=sg(i,[e,n.height,1,1]),l=cg(S8([],r,o,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return l.push(t),l}const Ile=Math.PI/180,Dle=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],U8=[0,0,0],Rle={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Gu{constructor(e={}){Ce(this,"id",void 0),Ce(this,"x",void 0),Ce(this,"y",void 0),Ce(this,"width",void 0),Ce(this,"height",void 0),Ce(this,"padding",void 0),Ce(this,"isGeospatial",void 0),Ce(this,"zoom",void 0),Ce(this,"focalDistance",void 0),Ce(this,"position",void 0),Ce(this,"modelMatrix",void 0),Ce(this,"distanceScales",void 0),Ce(this,"scale",void 0),Ce(this,"center",void 0),Ce(this,"cameraPosition",void 0),Ce(this,"projectionMatrix",void 0),Ce(this,"viewMatrix",void 0),Ce(this,"viewMatrixUncentered",void 0),Ce(this,"viewMatrixInverse",void 0),Ce(this,"viewProjectionMatrix",void 0),Ce(this,"pixelProjectionMatrix",void 0),Ce(this,"pixelUnprojectionMatrix",void 0),Ce(this,"resolution",void 0),Ce(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Rle,this.focalDistance=e.focalDistance||1,this.position=e.position||U8,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Al.WEB_MERCATOR:Al.WEB_MERCATOR_AUTO_OFFSET:Al.IDENTITY}equals(e){return e instanceof Gu&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Jm(e.projectionMatrix,this.projectionMatrix)&&Jm(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const r=k8(this.projectPosition(e),this.pixelProjectionMatrix),[o,s]=r,a=t?s:this.height-s;return 2===e.length?[o,a]:[o,a,r[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[r,o,s]=e,l=Y0([r,t?o:this.height-o,s],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,h,f]=this.unprojectPosition(l);return Number.isFinite(s)?[d,h,f]:Number.isFinite(i)?[d,h,i]:[d,h]}projectPosition(e){const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=Y1(e);return t[1]=Tr(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?cg(e):e}getBounds(e={}){const t={targetZ:e.z||0},i=this.unproject([0,0],t),r=this.unproject([this.width,0],t),o=this.unproject([0,this.height],t),s=this.unproject([this.width,this.height],t);return[Math.min(i[0],r[0],o[0],s[0]),Math.min(i[1],r[1],o[1],s[1]),Math.max(i[0],r[0],o[0],s[0]),Math.max(i[1],r[1],o[1],s[1])]}getDistanceScales(e){return e?AD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Toe(n){return{left:Zm(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:Zm(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:Zm(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:Zm(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:Zm(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:Zm(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Ele(n){const{latitude:e}=n;Id(Number.isFinite(e));const t=Math.cos(e*$a);return function wle(n){return wD(n)}(W1*t)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||AD({latitude:i,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:o,modelMatrix:s}=e;let a=U8;if(o&&(a=s?new Hn(s).transformAsVector(o,[]):o),this.isGeospatial){const c=this.projectPosition([t,i,0]);this.center=new fs(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=Dle,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:d=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Hn).multiplyRight(t).translate(new fs(this.center).negate()),this.projectionMatrix=i||function kle({width:n,height:e,orthographic:t,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const c=n/e,l=t?(new Hn).orthographic({fovy:i,aspect:c,focalDistance:r,near:s,far:a}):(new Hn).perspective({fovy:i,aspect:c,near:s,far:a});if(o){const{left:d=0,right:h=0,top:f=0,bottom:m=0}=o,y=Tr((d+n-h)/2,0,n)-n/2,E=Tr((f+e-m)/2,0,e)-e/2;l[8]-=2*y/n,l[9]+=2*E/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:o||s*Ile,focalDistance:d,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Sf(h,h,this.projectionMatrix),Sf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=_D([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function Moe(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];bD(f,f,[this.width/2,-this.height/2,1]),V1(f,f,[1,-1,0]),Sf(m,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=_D([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||yi.warn("Pixel project matrix not invertible")()}}Ce(Gu,"displayName","Viewport");const Nle=Math.PI/180;function V8(n){return 512/4003e4/Math.cos(n*Nle)}class Wu extends Gu{constructor(e={}){const{latitude:t=0,longitude:i=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:d,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:m=!1}=e;let{width:y,height:E,altitude:M=1.5}=e;const H=Math.pow(2,r);y=y||1,E=E||1;let $,Y=null;d?(M=d[5]/2,$=X1(M)):(e.fovy?($=e.fovy,M=SD($)):$=X1(M),Y=function R8(n){const{width:e,height:t,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=n;let{fovy:d=X1(xle)}=n;void 0!==i&&(d=X1(i));const h=d*$a,f=r*$a,m=SD(d);let y=m;s&&(y+=s[2]*a/Math.cos(f)/t);const E=h*(.5+(o?o[1]:0)/t),M=Math.sin(E)*y/Math.sin(xD(Math.PI/2-f-E,.01,Math.PI-.01)),H=Math.sin(f)*M+y;return{fov:h,aspect:e/t,focalDistance:m,near:c,far:Math.min(H*l,10*y)}}({width:y,height:E,pitch:o,fovy:$,nearZMultiplier:a,farZMultiplier:c}));let pe=function Ale(n){const{height:e,pitch:t,bearing:i,altitude:r,scale:o,center:s}=n,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];V1(a,a,[0,0,-r]),_8(a,a,-t*$a),b8(a,a,i*$a);const c=o/e;return bD(a,a,[c,c,c]),s&&V1(a,a,function foe(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),a}({height:E,pitch:o,bearing:s,scale:H,altitude:M});f&&(pe=(new Hn).translate([512*f,0,0]).multiplyLeft(pe)),super({...e,width:y,height:E,viewMatrix:pe,longitude:i,latitude:t,zoom:r,...Y,fovy:$,focalDistance:M}),Ce(this,"longitude",void 0),Ce(this,"latitude",void 0),Ce(this,"pitch",void 0),Ce(this,"bearing",void 0),Ce(this,"altitude",void 0),Ce(this,"fovy",void 0),Ce(this,"orthographic",void 0),Ce(this,"_subViewports",void 0),Ce(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=i,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=M,this.fovy=$,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=m,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=t;r<=i;r++){const o=r?new Wu({...this,worldOffset:r}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*V8(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)/V8(i)]}addMetersToLngLat(e,t){return D8(e,t)}panByPosition(e,t){const i=Y0(t,this.pixelUnprojectionMatrix),o=z1([],this.projectFlat(e),A8([],i)),s=z1([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){const t=function Cle(n,e=0){const{width:t,height:i,unproject:r}=n,o={targetZ:e},s=r([0,i],o),a=r([t,i],o);let c,l;return(n.fovy?.5*n.fovy*P8:Math.atan(.5/n.altitude))>(90-n.pitch)*P8-.01?(c=N8(n,0,e),l=N8(n,t,e)):(c=r([0,0],o),l=r([t,0],o)),[s,a,l,c]}(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:i,height:r}=this,{longitude:o,latitude:s,zoom:a}=O8({width:i,height:r,bounds:e,...t});return new Wu({width:i,height:r,longitude:o,latitude:s,zoom:a})}}function MD(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof Wu){const[r,o,s=0]=n,a=e.getDistanceScales([r,o]);i[2]=s*a.unitsPerMeter[2]}return i}function z8(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,c=0]=n;switch(t&&([s,a,c]=$0([],[s,a,c,1],t)),i){case Ai.LNGLAT:return MD([s,a,c],e,o);case Ai.LNGLAT_OFFSETS:return MD([s+r[0],a+r[1],c+(r[2]||0)],e,o);case Ai.METER_OFFSETS:return MD(D8(r,[s,a,c]),e,o);default:return e.isGeospatial?[s+r[0],a+r[1],c+r[2]]:e.projectPosition([s,a,c])}}Ce(Wu,"displayName","WebMercatorViewport");const Ble={10241:9987,10240:9729,10242:33071,10243:33071},TD={};function lg(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&lg(i,r)))return!1}return!0}const Vle={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>!!n==!!e},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||q0(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>ID(n,e)},accessor:{validate(n,e){const t=q1(n);return"function"===t||t===q1(e.value)},equal:(n,e,t)=>"function"==typeof e||ID(n,e)},array:{validate:(n,e)=>e.optional&&!n||q0(n),equal:(n,e,t)=>t.compare?ID(n,e):n===e},object:{equal:(n,e,t)=>t.compare?lg(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t.props;return i&&n?i(n):n}},image:{transform:(n,e,t)=>function jle(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof Yo)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new Yo(t,{...e,parameters:{...Ble,...i,...n.props.textureParameters}});return TD[r.id]=!0,r}(t,n),release:n=>{!function Ule(n){!n||!(n instanceof Yo)||TD[n.id]&&(n.delete(),delete TD[n.id])}(n)}}};function ID(n,e){if(n===e)return!0;if(!q0(n)||!q0(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Hle(n,e){switch(q1(e)){case"object":return X0(n,e);case"array":return X0(n,{type:"array",value:e,compare:!1});case"boolean":return X0(n,{type:"boolean",value:e});case"number":return X0(n,{type:"number",value:e});case"function":return X0(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function X0(n,e){return"type"in e?{name:n,...Vle[e.type],...e}:"value"in e?{name:n,type:q1(e.value),...e}:{name:n,type:"object",value:e}}function q0(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function q1(n){return q0(n)?"array":null===n?"null":typeof n}function H8(n){return K1(n,"_mergedDefaultProps")||(function Wle(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=H8(t),o=function zle(n){const e={},t={},i={};for(const[r,o]of Object.entries(n)){const s=o?.deprecatedFor;if(s)i[r]=Array.isArray(s)?s:[s];else{const a=Hle(r,o);e[r]=a,t[r]=a.value}}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(K1(n,"defaultProps")||{}),s=function $le(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function Kle(n){const e=K1(n,"layerName")||K1(n,"componentName");return e||yi.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(o.defaultProps,i,n),a={...t._propTypes,...o.propTypes};!function Xle(n,e){const t={},i={};for(const r in e){const o=e[r],{name:s,value:a}=o;o.async&&(t[s]=a,i[s]=qle(s))}n[og]=t,n[Af]={},Object.defineProperties(n,i)}(s,a);const c={...t._deprecatedProps,...o.deprecatedProps};(function Yle(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const o of e[t])G8(this,o)||(this[o]=i);yi.deprecated(r,e[t].join("/"))()}})})(s,c),n._mergedDefaultProps=s,n._propTypes=a,n._deprecatedProps=c}(n),n._mergedDefaultProps)}function qle(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||wU(e)?this[Af][n]=e:this[Hu][n]=e},get(){if(this[Hu]){if(n in this[Hu])return this[Hu][n]||this[og][n];if(n in this[Af]){const e=this[j1]&&this[j1].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[og][n]}}return this[og][n]}}}function G8(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function K1(n,e){return G8(n,e)&&n[e]}let Jle=0;class DD{constructor(...e){Ce(this,"id",void 0),Ce(this,"props",void 0),Ce(this,"count",void 0),this.props=function Gle(n,e){const t=H8(n.constructor),i=Object.create(t);i[j1]=n,i[Af]={},i[Hu]={};for(let r=0;r<e.length;++r){const o=e[r];for(const s in o)i[s]=o[s]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=Jle++}clone(e){const{props:t}=this,i={};for(const r in t[og])r in t[Hu]?i[r]=t[Hu][r]:r in t[Af]&&(i[r]=t[Af][r]);return new this.constructor({...t,...i,...e})}}function RD(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new J1(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function J1(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(J1=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new J1(n)}Ce(DD,"componentName","Component"),Ce(DD,"defaultProps",{});const Zle=Object.freeze({});class Qle{constructor(e){Ce(this,"component",void 0),Ce(this,"onAsyncPropUpdated",void 0),Ce(this,"asyncProps",void 0),Ce(this,"oldProps",void 0),Ce(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||Zle}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[Hu]||{},i=e[Af]||e,r=e[og]||{};for(const o in t){const s=t[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s),t[o]=this.getAsyncProp(o)}for(const o in i){const s=i[o];this._createAsyncPropData(o,r[o]),this._updateAsyncProp(o,s)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise)return void this._watchPromise(e,t);if(wU(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(o=>{o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,r),this._onResolve(e,o)}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,t){var i=this;return Ut(function*(){if("data"!==e)return void i._setPropValue(e,t);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const o=r.pendingLoadCount;let s=[],a=0;var d,c=!1,l=!1;try{for(var f,h=RD(t);c=!(f=yield h.next()).done;c=!1){const m=f.value;{const{dataTransform:y}=i.component.props;s=y?y(m,s):s.concat(m),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,i._setAsyncPropValue(e,s,o)}}}catch(m){l=!0,d=m}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw d}}i._onResolve(e,s)})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class ede extends Qle{constructor({attributeManager:e,layer:t}){super(t),Ce(this,"attributeManager",void 0),Ce(this,"needsRedraw",void 0),Ce(this,"needsUpdate",void 0),Ce(this,"subLayers",void 0),Ce(this,"usesPickingColorCache",void 0),Ce(this,"changeFlags",void 0),Ce(this,"viewport",void 0),Ce(this,"uniformTransitions",void 0),Ce(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,t){const i=this.component.props.fetch;return i?i(t,{propName:e,layer:this.layer}):super._fetch(e,t)}_onResolve(e,t){const i=this.component.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:this.layer})}_onError(e,t){this.layer.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const Oc=n=>"function"==typeof n,$u=n=>null!==n&&"object"==typeof n,$8=n=>$u(n)&&n.constructor==={}.constructor,tde=n=>n&&"function"==typeof n[Symbol.iterator],nde=n=>n&&"function"==typeof n[Symbol.asyncIterator],dg=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,ug=n=>typeof Blob<"u"&&n instanceof Blob,ide=n=>n&&"object"==typeof n&&n.isBuffer,Y8=n=>(n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||$u(n)&&Oc(n.tee)&&Oc(n.cancel)&&Oc(n.getReader))(n)||(n=>$u(n)&&Oc(n.read)&&Oc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function X8(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function kD(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function OD(n){var e,t;let i;return X8(n,"null loader"),X8(kD(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=n[0],n={...n,options:{...n.options,...i}}),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}let PD="";const ND={},lde=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,dde=/^([-\w.]+\/[-\w.+]+)/;function ude(n){const e=dde.exec(n);return e?e[1]:n}function q8(n){const e=lde.exec(n);return e?e[1]:""}const hde=/\?.*/;function Z1(n){if(dg(n)){const e=FD(n.url||"");return{url:e,type:ude(n.headers.get("content-type")||"")||q8(e)}}return ug(n)?{url:FD(n.name||""),type:n.type||""}:"string"==typeof n?{url:FD(n),type:q8(n)}:{url:"",type:""}}function FD(n){return n.replace(hde,"")}function K8(n){return LD.apply(this,arguments)}function LD(){return LD=Ut(function*(n){if(dg(n))return n;const e={},t=function fde(n){return dg(n)?n.headers["content-length"]||-1:ug(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=Z1(n);r&&(e["content-type"]=r);const o=yield function gde(n){return UD.apply(this,arguments)}(n);o&&(e["x-first-bytes"]=o),"string"==typeof n&&(n=(new TextEncoder).encode(n));const s=new Response(n,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}),LD.apply(this,arguments)}function BD(){return BD=Ut(function*(n){if(!n.ok){const e=yield function mde(n){return jD.apply(this,arguments)}(n);throw new Error(e)}}),BD.apply(this,arguments)}function jD(){return jD=Ut(function*(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=" ".concat(yield n.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),jD.apply(this,arguments)}function UD(){return UD=Ut(function*(n){if("string"==typeof n)return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=o=>{var s;return i(null==o||null===(s=o.target)||void 0===s?void 0:s.result)},r.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const i=function _de(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}(n.slice(0,5));return"data:base64,".concat(i)}return null}),UD.apply(this,arguments)}function J8(n,e){return VD.apply(this,arguments)}function VD(){return VD=Ut(function*(n,e){if("string"==typeof n){n=function cde(n){for(const e in ND)n.startsWith(e)&&(n=n.replace(e,ND[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(PD).concat(n)),n}(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(t=e.fetch),yield fetch(n,t)}return yield K8(n)}),VD.apply(this,arguments)}const Z8=new T0({id:"loaders.gl"});class bde{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Q8=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),eV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),tV=(eV&&parseFloat(eV[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class yde{constructor(){Ce(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Q8,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),vde={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function zD(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const HD=()=>{const n=zD();return n.globalOptions=n.globalOptions||{...tV},n.globalOptions};function xde(n,e,t,i){return t=t||[],function wde(n,e){iV(n,null,tV,vde,e);for(const t of e)iV(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function rV(n,e,t){const r={...n.options||{}};return function Ade(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new bde),oV(r,HD()),oV(r,e),r}(e,n,i)}function nV(n,e){const t=HD(),i=n||t;return"function"==typeof i.fetch?i.fetch:$u(i.fetch)?r=>J8(r,i):null!=e&&e.fetch?e?.fetch:J8}function iV(n,e,t,i,r){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in n){const c=!e&&$u(n[a]);if(!(a in t)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)Z8.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=Ede(a,r);Z8.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(h))()}}}function Ede(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const o in r.options){if(n===o)return"Did you mean '".concat(r.id,".").concat(o,"'?");const s=o.toLowerCase();(t.startsWith(s)||s.startsWith(t))&&(i=i||"Did you mean '".concat(r.id,".").concat(o,"'?"))}return i}function oV(n,e){for(const t in e)t in e&&(n[t]=$8(e[t])&&$8(n[t])?{...n[t],...e[t]}:e[t])}function Tl(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const Sde="3.2.13",Il={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Mde=Il.global||Il.self||Il.window||{},Yu="object"!=typeof process||"[object process]"!==String(process)||process.browser,GD="function"==typeof importScripts,Tde=typeof window<"u"&&typeof window.orientation<"u",sV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);sV&&parseFloat(sV[1]);class WD{}const $D=new Map;function aV(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function cV(n,e=!0,t){const i=t||new Set;if(n)if(lV(n))i.add(n);else if(lV(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)cV(n[r],e,i);return void 0===t?Array.from(i):[]}function lV(n){return!!n&&(n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)}const YD=()=>{};class XD{static isSupported(){return typeof Worker<"u"&&Yu||typeof WD<"u"&&!Yu}constructor(e){Ce(this,"name",void 0),Ce(this,"source",void 0),Ce(this,"url",void 0),Ce(this,"terminated",!1),Ce(this,"worker",void 0),Ce(this,"onMessage",void 0),Ce(this,"onError",void 0),Ce(this,"_loadableURL","");const{name:t,source:i,url:r}=e;Tl(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=YD,this.onError=o=>console.log(o),this.worker=Yu?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=YD,this.onError=YD,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||cV(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=function Ide(n){Tl(n.source&&!n.url||!n.source&&n.url);let e=$D.get(n.source||n.url);return e||(n.url&&(e=function Dde(n){if(!n.startsWith("http"))return n;const e=function Rde(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(n);return aV(e)}(n.url),$D.set(n.url,e)),n.source&&(e=aV(n.source),$D.set(n.source,e))),Tl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new WD(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new WD(this.source,{eval:!0})}return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class Ode{constructor(e,t){Ce(this,"name",void 0),Ce(this,"workerThread",void 0),Ce(this,"isRunning",!0),Ce(this,"result",void 0),Ce(this,"_resolve",()=>{}),Ce(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Tl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Tl(this.isRunning),this.isRunning=!1,this._reject(e)}}class Pde{static isSupported(){return XD.isSupported()}constructor(e){Ce(this,"name","unnamed"),Ce(this,"source",void 0),Ce(this,"url",void 0),Ce(this,"maxConcurrency",1),Ce(this,"maxMobileConcurrency",1),Ce(this,"onDebug",()=>{}),Ce(this,"reuseWorkers",!0),Ce(this,"props",{}),Ce(this,"jobQueue",[]),Ce(this,"idleQueue",[]),Ce(this,"count",0),Ce(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,o,s)=>r.done(s)),i=((r,o)=>r.error(o))){var r=this;return Ut(function*(){const o=new Promise(s=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:s}),r));return r._startQueuedJob(),yield o})()}_startQueuedJob(){var e=this;return Ut(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new Ode(i.name,t);t.onMessage=o=>i.onMessage(r,o.type,o.payload),t.onError=o=>i.onError(r,o),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new XD({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Tde?this.maxMobileConcurrency:this.maxConcurrency}}const Nde={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Dd{static isSupported(){return XD.isSupported()}static getWorkerFarm(e={}){return Dd._workerFarm=Dd._workerFarm||new Dd({}),Dd._workerFarm.setProps(e),Dd._workerFarm}constructor(e){Ce(this,"props",void 0),Ce(this,"workerPools",new Map),this.props={...Nde},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let o=this.workerPools.get(t);return o||(o=new Pde({name:t,source:i,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}Ce(Dd,"_workerFarm",void 0);const Fde="latest";function qD(){return qD=Ut(function*(n,e,t,i,r){const o=n.id,s=function Lde(n,e={}){const t=e[n.id]||{},i="".concat(n.id,"-worker.js");let r=t.workerUrl;if(!r&&"compression"===n.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(n.module,"/dist/").concat(i)),!r){let o=n.version;"latest"===o&&(o=Fde);const s=o?"@".concat(o):"";r="https://unpkg.com/@loaders.gl/".concat(n.module).concat(s,"/dist/").concat(i)}return Tl(r),r}(n,t),c=Dd.getWorkerFarm(t).getWorkerPool({name:o,url:s});t=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",Ude.bind(null,r));return l.postMessage("process",{input:e,options:t,context:i}),yield(yield l.result).result}),qD.apply(this,arguments)}function Ude(n,e,t,i){return KD.apply(this,arguments)}function KD(){return KD=Ut(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const a=yield n(o,s);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}),KD.apply(this,arguments)}function uV(n){return n&&"object"==typeof n&&n.isBuffer}function hV(n){if(uV(n))return function Vde(n){return uV(n)?new Uint8Array(n.buffer,n.byteOffset,n.length).slice().buffer:n}(n);if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function ZD(){return ZD=Ut(function*(n){const e=[];var r,t=!1,i=!1;try{for(var s,o=RD(n);t=!(s=yield o.next()).done;t=!1)e.push(s.value)}catch(a){i=!0,r=a}finally{try{t&&null!=o.return&&(yield o.return())}finally{if(i)throw r}}return function Hde(...n){const e=n.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),t=e.reduce((o,s)=>o+s.byteLength,0),i=new Uint8Array(t);let r=0;for(const o of e)i.set(o,r),r+=o.byteLength;return i.buffer}(...e)}),ZD.apply(this,arguments)}g(643);const Wde=262144,Yde=262144;function fV(n,e){this.v=n,this.k=e}function Q1(n){return new fV(n,0)}function K0(n){var e,t;function i(o,s){try{var a=n[o](s),c=a.value,l=c instanceof fV;Promise.resolve(l?c.v:c).then(function(d){if(l){var h="return"===o?"return":"next";if(!c.k||d.done)return i(h,d);d=n[h](d).value}r(a.done?"return":"normal",d)},function(d){i("throw",d)})}catch(d){r("throw",d)}}function r(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(o,s){return new Promise(function(a,c){var l={key:o,arg:s,resolve:a,reject:c,next:null};t?t=t.next=l:(e=t=l,i(o,s))})},"function"!=typeof n.return&&(this.return=void 0)}function e2(n){return function(){return new K0(n.apply(this,arguments))}}K0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},K0.prototype.next=function(n){return this._invoke("next",n)},K0.prototype.throw=function(n){return this._invoke("throw",n)},K0.prototype.return=function(n){return this._invoke("return",n)};const qde=1048576;function t2(){return t2=e2(function*(n,e){const t=e?.chunkSize||qde;let i=0;for(;i<n.size;){const r=i+t,o=yield Q1(n.slice(i,r).arrayBuffer());i=r,yield o}}),t2.apply(this,arguments)}function pV(n,e){return Q8?function Jde(n,e){return n2.apply(this,arguments)}(n,e):function Zde(n,e){return r2.apply(this,arguments)}(n,e)}function n2(){return n2=e2(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:o,value:s}=yield Q1(r);if(o)return;yield hV(s)}}catch{t.releaseLock()}}),n2.apply(this,arguments)}function r2(){return r2=e2(function*(n,e){var r,t=!1,i=!1;try{for(var s,o=RD(n);t=!(s=yield Q1(o.next())).done;t=!1){const a=s.value;yield hV(a)}}catch(a){i=!0,r=a}finally{try{t&&null!=o.return&&(yield Q1(o.return()))}finally{if(i)throw r}}}),r2.apply(this,arguments)}const o2="Cannot convert supplied data type";function s2(){return s2=Ut(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return function eue(n,e,t){if(e.text&&"string"==typeof n)return n;if(ide(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(o2)}(n,e);if(ug(n)&&(n=yield K8(n)),dg(n)){const r=n;return yield function pde(n){return BD.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(Y8(n)&&(n=function Qde(n,e){if("string"==typeof n)return function*$de(n,e){const t=e?.chunkSize||Wde;let i=0;const r=new TextEncoder;for(;i<n.length;){const o=Math.min(n.length-i,t),s=n.slice(i,i+o);i+=o,yield r.encode(s)}}(n,e);if(n instanceof ArrayBuffer)return function*Xde(n,e={}){const{chunkSize:t=Yde}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),o=new ArrayBuffer(r),s=new Uint8Array(n,i,r);new Uint8Array(o).set(s),i+=r,yield o}}(n,e);if(ug(n))return function Kde(n,e){return t2.apply(this,arguments)}(n,e);if(Y8(n))return pV(n,e);if(dg(n))return pV(n.body,e);throw new Error("makeIterator")}(n,t)),tde(n)||nde(n))return function Gde(n){return ZD.apply(this,arguments)}(n);throw new Error(o2)}),s2.apply(this,arguments)}const sue=new T0({id:"loaders.gl"}),mV=()=>{const n=zD();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function gV(n){const e=mV();n=Array.isArray(n)?n:[n];for(const t of n){const i=OD(t);e.find(r=>i===r)||e.unshift(i)}}const cue=/\.([^.]+)$/;function l2(){return l2=Ut(function*(n,e=[],t,i){if(!bV(n))return null;let r=_V(n,e,{...t,nothrow:!0},i);if(r)return r;if(ug(n)&&(r=_V(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(yV(n));return r}),l2.apply(this,arguments)}function _V(n,e=[],t,i){if(!bV(n))return null;if(e&&!Array.isArray(e))return OD(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...function aue(){return mV()}()),function uue(n){for(const e of n)OD(e)}(r);const o=function due(n,e,t,i){const{url:r,type:o}=Z1(n),s=r||i?.url;let a=null,c="";var l;return null!=t&&t.mimeType&&(a=d2(e,t?.mimeType),c="match forced by supplied MIME type ".concat(t?.mimeType)),a=a||function hue(n,e){const t=e&&cue.exec(e),i=t&&t[1];return i?function fue(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||d2(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function pue(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(mue(e,t))return t}else if(ArrayBuffer.isView(e)){if(vV(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&vV(e,0,t))return t;return null}(e,n),c=c||(a?"matched initial data ".concat(xV(n)):""),a=a||d2(e,t?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&sue.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(n,r,t,i);if(!(o||null!=t&&t.nothrow))throw new Error(yV(n));return o}function bV(n){return!(n instanceof Response&&204===n.status)}function yV(n){const{url:e,type:t}=Z1(n);let i="No valid loader found (";i+=e?"".concat(function oue(n){const e=n&&n.lastIndexOf("/");return e>=0?n.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const r=n?xV(n):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function d2(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function mue(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function vV(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function gue(n,e,t,i){if(i instanceof ArrayBuffer)return function zde(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===u2(n,e,i.length);default:return!1}}(n,e,t,r))}function xV(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?u2(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?u2(n,0,e):""}function u2(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function eE(n,e,t,i){return h2.apply(this,arguments)}function h2(){return h2=Ut(function*(n,e,t,i){Tl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!kD(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=Z1(n),s=function rue(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}(e,i),a=yield function lue(n){return l2.apply(this,arguments)}(n,s,t);return a?(i=function iue(n,e,t=null){if(t)return t;const i={fetch:nV(e,n),...n};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:eE,loaders:s},t=xde(t,a,s,r),i),yield function _ue(n,e,t,i){return f2.apply(this,arguments)}(a,n,t,i)):null}),h2.apply(this,arguments)}function f2(){return f2=Ut(function*(n,e,t,i){if(function Cde(n,e=Sde){Tl(n,"no worker provided")}(n),dg(e)){const r=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:d}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:o,redirected:s,status:a,statusText:c,type:l,url:d}}if(e=yield function tue(n,e,t){return s2.apply(this,arguments)}(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(function Bde(n,e){return!(!Dd.isSupported()||!(Yu||null!=e&&e._nodeWorkers))&&n.worker&&e?.worker}(n,t))return yield function jde(n,e,t,i,r){return qD.apply(this,arguments)}(n,e,t,i,eE);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw Tl(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}),f2.apply(this,arguments)}function J0(n,e,t,i){return p2.apply(this,arguments)}function p2(){return p2=Ut(function*(n,e,t,i){!Array.isArray(e)&&!kD(e)&&(t=e,e=void 0);const r=nV(t);let o=n;return"string"==typeof n&&(o=yield r(n)),ug(n)&&(o=yield r(n)),yield eE(o,e,t)}),p2.apply(this,arguments)}const Eue=Object.freeze([]),Aue=U1(({oldViewport:n,viewport:e})=>n.equals(e));let Dl=new Uint8ClampedArray(0);const Sue={data:{type:"data",value:Eue,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,o&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(n);return!c&&!r&&(s.add({resourceId:n,data:J0(n,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:n,onChange:l=>{var d;return null===(d=t.internalState)||void 0===d?void 0:d.reloadAsyncProp(e,l)},consumerId:t.id,requestId:e}):J0(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Ai.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Cf extends DD{constructor(...e){super(...e),Ce(this,"internalState",null),Ce(this,"lifecycle","Awaiting state"),Ce(this,"context",void 0),Ce(this,"state",void 0),Ce(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){Xo(this.internalState);const t=this.internalState.viewport||this.context.viewport,i=z8(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,o,s]=k8(i,t.pixelProjectionMatrix);return 2===e.length?[r,o]:[r,o,s]}unproject(e){return Xo(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){return Xo(this.internalState),function Lle(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function Fle(n){const{viewport:e,modelMatrix:t,coordinateOrigin:i}=n;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=n;return r===Ai.DEFAULT&&(r=e.isGeospatial?Ai.LNGLAT:Ai.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:t,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:d}=E8(t,i,r),h=z8(n,{viewport:t,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});d&&function hoe(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ai.DEFAULT||e===Ai.LNGLAT||e===Ai.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){Xo(e instanceof Uint8Array);const[t,i,r]=e;return t+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function Sce(n){if(!function Mce(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function Cce(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const t=this.getAttributeManager();if(!t)return null;const{positions:i,instancePositions:r}=t.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const t of this.props.extensions)e=Ice(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&t)if(Array.isArray(i))for(const c of i)t.invalidateAll(c);else t.invalidateAll();const{props:r,oldProps:o}=e,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(s!==a&&t){const{pickingColors:c,instancePickingColors:l}=t.attributes,d=c||l;d&&(a&&d.constant&&(d.constant=!1,t.invalidate(d.id)),!d.value&&!a&&(d.constant=!0,d.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,t){var i,r,o,s;t&&(e.message="".concat(t,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(o=this.context)||void 0===o||null===(s=o.onError)||void 0===s||s.call(o,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!Aue({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:i,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),i=Object.create(this.props);for(const r in t)Object.defineProperty(i,r,{value:t[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const i=Math.floor(Dl.length/3);if(this.internalState.usesPickingColorCache=!0,i<t){t>16777215&&yi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Dl=F0.allocate(Dl,t,{size:3,copy:!0,maxCount:Math.max(t,16777215)});const r=Math.floor(Dl.length/3),o=[];for(let s=i;s<r;s++)this.encodePickingColor(s,o),Dl[3*s+0]=o[0],Dl[3*s+1]=o[1],Dl[3*s+2]=o[2]}e.value=Dl.subarray(0,3*t)}_setModelAttributes(e,t){const o=this.getAttributeManager().getShaderAttributes(t,e.userData.excludeAttributes||{});e.setAttributes(o)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;if(!r)return;const o=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,i=e||t;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Dl.buffer&&(i.value=Dl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Xo(!this.internalState),Xo(Number.isFinite(this.props.coordinateSystem)),ps("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new ede({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(yi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new gce(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){ps("layer.matched",this,this===e);const{state:t,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(ps("layer.update",this,e),!e)return;const t=this.props,i=this.context,r=this.internalState,o=i.viewport,s=this._updateUniformTransition();r.propsInTransition=s,i.viewport=r.viewport||o,this.props=s;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const d of this.props.extensions)d.updateState.call(this,a,d);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=o,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){ps("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r,t.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(t)||[0,0];Ad(o.gl,{polygonOffset:c}),Wa(o.gl,i,()=>{const l={moduleParameters:e,uniforms:t,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,l,d);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let o=!1;if("dataChanged"===r){const s=e[r],a=t[r];s&&Array.isArray(a)&&(t.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0)}t[r]||(t[r]=e[r],o=!0),o&&ps("layer.changeFlag",this,r,e)}const i=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=i,t.somethingChanged=i||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const i=function bce(n,e){const t=m8({newProps:n,oldProps:e,propTypes:gD(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function vce(n,e){if(null===e)return"oldProps is null, initial diff";let t=!1;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function xce(n,e){if(null===e)return{all:!0};if("all"in n.updateTriggers&&g8(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&g8(n,e,r)&&(t[r]=!0,i=!0);return!!i&&t}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:wce(n,e),transitionsChanged:yce(n,e)}}(e,t);if(i.updateTriggersChanged)for(const o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(const o in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(o,t[o],e[o],null===(r=e.transitions)||void 0===r?void 0:r[o])}return this.setChangeFlags(i)}validateProps(){!function _ce(n){const e=gD(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(t.pickingHighlightColor=i(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new uce(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=i;if(t||r.autoHighlight!==s||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(t||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return t=t||r,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Ce(Cf,"defaultProps",Sue),Ce(Cf,"layerName","Layer");class m2 extends Cf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||t}getSubLayerRow(e,t,i){return e.__source={parent:this,object:t,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(t.index=i.__source.index,e(i.__source.object,t)):e(i,r)}return e}getSubLayerProps(e={}){var t;const{opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:y,modelMatrix:E,extensions:M,fetch:H,operation:$,_subLayerProps:Y}=this.props,pe={id:"",updateTriggers:{},opacity:i,pickable:r,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:d,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:m,positionFormat:y,modelMatrix:E,extensions:M,fetch:H,operation:$},De=Y&&e.id&&Y[e.id],Ve=De&&De.updateTriggers,nt=e.id||"sublayer";if(De){const Ze=this.constructor._propTypes,dt=e.type?e.type._propTypes:{};for(const mt in De){const _t=dt[mt]||Ze[mt];_t&&"accessor"===_t.type&&(De[mt]=this.getSubLayerAccessor(De[mt]))}}Object.assign(pe,e,De),pe.id="".concat(this.props.id,"-").concat(nt),pe.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...Ve};for(const Ze of M){const dt=Ze.getSubLayerProps.call(this,Ze);dt&&Object.assign(pe,dt,{updateTriggers:Object.assign(pe.updateTriggers,dt.updateTriggers)})}return pe}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=XI(this.renderLayers(),Boolean),this.internalState.subLayers=i),ps("compositeLayer.renderLayers",this,r,i);for(const o of i)o.parent=this}}Ce(m2,"layerName","CompositeLayer");const Mue=/([0-9]+\.?[0-9]*)(%|px)/;function Xu(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=Mue.exec(n);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function qu(n,e){return n.relative?Math.round(n.position*e):n.position}class g2{constructor(e){Ce(this,"id",void 0),Ce(this,"viewportInstance",void 0),Ce(this,"_x",void 0),Ce(this,"_y",void 0),Ce(this,"_width",void 0),Ce(this,"_height",void 0),Ce(this,"_padding",void 0),Ce(this,"props",void 0);const{id:t,x:i=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};Xo(!c||c instanceof Gu),this.viewportInstance=c,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Xu(i),this._y=Xu(r),this._width=Xu(o),this._height=Xu(s),this._padding=a&&{left:Xu(a.left||0),right:Xu(a.right||0),top:Xu(a.top||0),bottom:Xu(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&lg(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){const i={x:qu(this._x,e),y:qu(this._y,t),width:qu(this._width,e),height:qu(this._height,t)};return this._padding&&(i.padding={left:qu(this._padding.left,e),top:qu(this._padding.top,t),right:qu(this._padding.right,e),bottom:qu(this._padding.bottom,t)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Tue=(new Hn).lookAt({eye:[0,0,1]});function Iue({width:n,height:e,near:t,far:i,padding:r}){let o=-n/2,s=n/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:d=0,top:h=0,bottom:f=0}=r,m=Tr((l+n-d)/2,0,n)-n/2,y=Tr((h+e-f)/2,0,e)-e/2;o-=m,s-=m,a+=y,c+=y}return(new Hn).ortho({left:o,right:s,bottom:a,top:c,near:t,far:i})}class Due extends Gu{constructor(e){const{width:t,height:i,near:r=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,d=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,f=Math.min(d,h),m=Math.pow(2,f);let y;if(d!==h){const E=Math.pow(2,d),M=Math.pow(2,h);y={unitsPerMeter:[E/m,M/m,1],metersPerUnit:[m/E,m/M,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Tue.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:Iue({width:t||1,height:i||1,padding:c,near:r,far:o}),zoom:f,distanceScales:y})}projectFlat([e,t]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],t*i[1]]}unprojectFlat([e,t]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],t*i[1]]}panByPosition(e,t){const i=Y0(t,this.pixelUnprojectionMatrix),o=z1([],this.projectFlat(e),A8([],i)),s=z1([],this.center,o);return{target:this.unprojectFlat(s)}}}const EV=()=>{},Rue=n=>n;class Oue{constructor(e){Ce(this,"getControllerState",void 0),Ce(this,"props",void 0),Ce(this,"propsInTransition",void 0),Ce(this,"transition",void 0),Ce(this,"onViewStateChange",void 0),Ce(this,"onStateChange",void 0),Ce(this,"_onTransitionUpdate",t=>{const{time:i,settings:{interpolator:r,startProps:o,endProps:s,duration:a,easing:c}}=t,l=c(i/a),d=r.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new W0(e.timeline),this.onViewStateChange=e.onViewStateChange||EV,this.onStateChange=e.onStateChange||EV}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;r={...i,...2===o?s:this.propsInTransition||i}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(i),o=t.transitionInterpolator,s=o.getDuration?o.getDuration(e,t):t.transitionDuration;if(0===s)return;const a=o.initializeProps(e,r);this.propsInTransition={};const c={duration:s,easing:t.transitionEasing||Rue,interpolator:o,interruption:t.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}class Pue{constructor(e){Ce(this,"_propsToCompare",void 0),Ce(this,"_propsToExtract",void 0),Ce(this,"_requiredProps",void 0);const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i||t,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare)if(!(i in e)||!(i in t)||!Jm(e[i],t[i]))return!1;return!0}initializeProps(e,t){const i={},r={};for(const o of this._propsToExtract)(o in e||o in t)&&(i[o]=e[o],r[o]=t[o]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const i=e[t];Xo(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}const Nue=["longitude","latitude","zoom","bearing","pitch"],Fue=["longitude","latitude","zoom"];class tE extends Pue{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:Nue,required:Fue},super(i.transitionProps),Ce(this,"opts",void 0),this.opts=i}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:o}=this.opts;if(r&&o){const s=r(e),a=r(t),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const o of this._propsToExtract)r[o]=w1(e[o]||0,t[o]||0,i);if(t.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...t,...r});Object.assign(r,o.panByPosition(t.aroundPosition,w1(e.around,t.around,i)))}return r}}const Ku={transitionDuration:0},nE=n=>1-(1-n)*(1-n),hg_WHEEL=["wheel"],hg_PAN=["panstart","panmove","panend"],hg_PINCH=["pinchstart","pinchmove","pinchend"],hg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],hg_DOUBLE_TAP=["doubletap"],hg_KEYBOARD=["keydown"],Mf={};class b2{constructor(e){Ce(this,"props",void 0),Ce(this,"state",{}),Ce(this,"transitionManager",void 0),Ce(this,"eventManager",void 0),Ce(this,"onViewStateChange",void 0),Ce(this,"onStateChange",void 0),Ce(this,"makeViewport",void 0),Ce(this,"_controllerState",void 0),Ce(this,"_events",{}),Ce(this,"_interactionState",{isDragging:!1}),Ce(this,"_customEvents",[]),Ce(this,"_eventStartBlocked",null),Ce(this,"_panMove",!1),Ce(this,"invertPan",!1),Ce(this,"dragMode","rotate"),Ce(this,"inertia",0),Ce(this,"scrollZoom",!0),Ce(this,"dragPan",!0),Ce(this,"dragRotate",!0),Ce(this,"doubleClickZoom",!0),Ce(this,"touchZoom",!0),Ce(this,"touchRotate",!1),Ce(this,"keyboard",!0),this.transitionManager=new Oue({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:i}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.props;if(t&&t.handled)return!1;const o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return o&&t&&t.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(hg_WHEEL,d&&i),this.toggleEvents(hg_PAN,d&&(r||o)),this.toggleEvents(hg_PINCH,d&&(a||c)),this.toggleEvents(hg_TRIPLE_PAN,d&&c),this.toggleEvents(hg_DOUBLE_TAP,d&&s),this.toggleEvents(hg_KEYBOARD,d&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t=null,i={}){const r={...e.getViewportProps(),...t},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,Ku,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,Ku,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),o=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:nE},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,Ku,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),o=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:nE},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&0!==s&&(s=1/s);const a=this.controllerState.zoom({pos:t,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,Ku,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,Ku,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],o=this.controllerState.rotate({pos:r});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:nE},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return Mf._startPinchRotation=e.rotation,Mf._lastPinchEvent=e,this.updateViewport(i,Ku,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:Mf._startPinchRotation-i})}return this.updateViewport(t,Ku,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Mf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:i}=Mf;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+a*t/2);o=o.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:nE},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Mf._startPinchRotation=null,Mf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:o,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":t?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new tE({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:Ku}}class AV{constructor(e,t){Ce(this,"_viewportProps",void 0),Ce(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class SV extends AV{constructor(e){const{width:t,height:i,rotationX:r=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:d=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:m,startRotationX:y,startRotationOrbit:E,startZoomPosition:M,startZoom:H}=e;super({width:t,height:i,rotationX:r,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:d,maxZoom:h},{startPanPosition:f,startRotatePos:m,startRotationX:y,startRotationOrbit:E,startZoomPosition:M,startZoom:H}),Ce(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this.getState().startPanPosition||t;if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===o||void 0===s)return this;let l;if(e){let d=(e[0]-r[0])/a;(o<-90||o>90)&&(d*=-1),l={rotationX:o+(e[1]-r[1])/c*180,rotationOrbit:s+180*d}}else l={rotationX:o+i,rotationOrbit:s+t};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomPosition:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===t&&(t=this.getViewportProps().zoom),Tr(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[Tr(r[0],i,t),Tr(r[1],i,t)]:Tr(r,i,t),e.rotationX=Tr(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=function Coe(n,e){const t=n%e;return t<0?e+t:t}(a+180,360)-180),e}}class Bue extends b2{constructor(...e){super(...e),Ce(this,"ControllerState",SV),Ce(this,"transition",{transitionDuration:300,transitionInterpolator:new tE({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class jue extends SV{constructor(e){super(e),Ce(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===t&&(t=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(t)){let[s,a]=t;switch(this.zoomAxis){case"X":s=Tr(s+o,r,i);break;case"Y":a=Tr(a+o,r,i);break;default:let c=Math.min(s+o,a+o);c<r&&(o+=r-c),c=Math.max(s+o,a+o),c>i&&(o+=i-c),s+=o,a+=o}return[s,a]}return Tr(t+o,r,i)}}class Uue extends b2{constructor(...e){super(...e),Ce(this,"ControllerState",jue),Ce(this,"transition",{transitionDuration:300,transitionInterpolator:new tE(["target","zoom"])}),Ce(this,"dragMode","pan")}_onPanRotate(){return!1}}class y2 extends g2{get ViewportType(){return Due}get ControllerType(){return Uue}}Ce(y2,"displayName","OrthographicView");const v2=Math.PI/180;function Vue({height:n,focalDistance:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:o}){const s="Z"===t?[0,0,1]:[0,1,0],a="Z"===t?[0,-e,0]:[0,0,e],c=(new Hn).lookAt({eye:a,up:s});c.rotateX(i*v2),"Z"===t?c.rotateZ(r*v2):c.rotateY(r*v2);const l=Math.pow(2,o)/n;return c.scale(l),c}class zue extends Gu{constructor(e){const{height:t,projectionMatrix:i,fovy:r=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,d=i?i[5]/2:SD(r);super({...e,longitude:void 0,viewMatrix:Vue({height:t||1,focalDistance:d,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:d,position:s,zoom:l}),Ce(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,o=this.projectedCenter[2]]=e,s=t?r:this.height-r,[a,c,l]=Y0([i,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}class CV extends g2{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return zue}get ControllerType(){return Bue}}Ce(CV,"displayName","OrbitView");const Hue=[255,255,255],Gue=1;let Wue=0;class MV{constructor(e={}){Ce(this,"id",void 0),Ce(this,"color",void 0),Ce(this,"intensity",void 0),Ce(this,"type","ambient");const{color:t=Hue}=e,{intensity:i=Gue}=e;this.id=e.id||"ambient-".concat(Wue++),this.color=t,this.intensity=i}}const $ue=[255,255,255],Yue=1,Xue=[0,0,-1];let que=0;class TV{constructor(e={}){Ce(this,"id",void 0),Ce(this,"color",void 0),Ce(this,"intensity",void 0),Ce(this,"type","directional"),Ce(this,"direction",void 0),Ce(this,"shadow",void 0);const{color:t=$ue}=e,{intensity:i=Yue}=e,{direction:r=Xue}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(que++),this.color=t,this.intensity=i,this.type="directional",this.direction=new fs(r).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class Kue{constructor(e,t={id:"pass"}){Ce(this,"id",void 0),Ce(this,"gl",void 0),Ce(this,"props",void 0);const{id:i}=t;this.id=i,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class iE extends Kue{constructor(...e){super(...e),Ce(this,"_lastRenderIndex",-1)}render(e){return Ad(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function Zue(n){Ad(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const d=[];for(const h of r){const f=o&&o[h.id];s(h);const m=this._getDrawLayerParams(h,e),y=h.subViewports||[h];for(const E of y){const M=this._drawLayersInViewport(l,{target:t,moduleParameters:i,viewport:E,view:f,pass:e.pass,layers:e.layers},m);d.push(M)}}return d}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,cullRect:o,effects:s,moduleParameters:a}){const c=[],l=IV(this._lastRenderIndex+1),d={layer:t[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:o},h={};for(let f=0;f<t.length;f++){const m=t[f],y=this._shouldDrawLayer(m,d,r,h),E={shouldDrawLayer:y};y&&(E.layerRenderIndex=l(m,y),E.moduleParameters=this._getModuleParameters(m,s,i,a),E.layerParameters=this.getLayerParameters(m,f,e)),c[f]=E}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:i,pass:r,target:o,viewport:s,view:a},c){const l=function Jue(n,{moduleParameters:e,target:t,viewport:i}){const r=t&&"default-framebuffer"!==t.id,o=e&&e.devicePixelRatio||Ym(n);return[i.x*o,(r?t.height:n.drawingBufferHeight)-(i.y+i.height)*o,i.width*o,i.height*o]}(e,{moduleParameters:i,target:o,viewport:s});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Wa(e,{scissorTest:!0,scissor:l},()=>UI(e,h))}const d={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Ad(e,{viewport:l});for(let h=0;h<t.length;h++){const f=t[h],{shouldDrawLayer:m,layerRenderIndex:y,moduleParameters:E,layerParameters:M}=c[h];if(m&&f.props.pickable&&d.pickableCount++,f.isComposite)d.compositeCount++;else if(m){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,y),E.viewport=s;try{f._drawLayer({moduleParameters:E,uniforms:{layerIndex:y},parameters:M})}catch(H){f.raiseError(H,"drawing ".concat(f," to ").concat(r))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,i){return e.props.parameters}_shouldDrawLayer(e,t,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;t.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}if(i){const a=t.layer.id;if(a in r||(r[a]=i(t)),!r[a])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){var o;const s=Object.assign(Object.create((null===(o=e.internalState)||void 0===o?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Ym(this.gl)});if(t)for(const c of t){var a;Object.assign(s,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,t),r)}}function IV(n=0,e={}){const t={},i=(r,o)=>{const s=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in t){const d=t[c]=t[c]||IV(e[c],e);l=d(r,o),t[a]=d}else Number.isFinite(s)?(l=s+(e[c]||0),t[a]=null):l=n;return o&&l>=n&&(n=l+1),e[a]=l,l};return i}class Que extends iE{constructor(e,t){super(e,t),Ce(this,"shadowMap",void 0),Ce(this,"depthBuffer",void 0),Ce(this,"fbo",void 0),this.shadowMap=new Yo(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Km(e,{format:33189,width:1,height:1}),this.fbo=new no(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;Wa(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=Ym(this.gl),o=i.width*r,s=i.height*r;(o!==t.width||s!==t.height)&&t.resize({width:o,height:s}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const DV="#define SMOOTH_EDGE_RADIUS 0.5",ihe={name:"geometry",vs:"\n".concat(DV,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(DV,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},rhe=Object.keys(Ai).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Ai[n],";")).join(""),ohe=Object.keys(Al).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(Al[n],";")).join(""),she=Object.keys(b1).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(b1[n],";")).join(""),ahe="".concat(rhe,"\n").concat(ohe,"\n").concat(she,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n'),che={},x2={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},ihe],vs:ahe,getUniforms:function lhe(n=che){return"viewport"in n?function cle({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=Ai.DEFAULT,coordinateOrigin:r=w8,autoWrapLongitude:o=!1}){i===Ai.DEFAULT&&(i=n.isGeospatial?Ai.LNGLAT:Ai.CARTESIAN);const s=sle({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=t||x8,s}(n):{}}},hhe=U1(function _he({viewport:n,center:e}){return new Hn(n.viewProjectionMatrix).invert().transform(e)}),fhe=U1(function bhe({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,o=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(s=>function ghe(n,e){const[t,i,r]=n,o=Y0([t,i,r],e);return Number.isFinite(r)?o:[o[0],o[1],0]}(s,i));for(const s of e){const a=s.clone().translate(new fs(n.center).negate()),c=o.map(d=>a.transform(d)),l=(new Hn).ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});t.push(l.multiplyRight(s))}return t}),phe=[0,0,0,1],mhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],w2={name:"shadow",dependencies:[x2],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?function yhe(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||phe,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=hhe({viewport:n.viewport,center:e.project_uCenter}),o=[],s=fhe({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let a=0;a<n.shadowMatrices.length;a++){const c=s[a],l=c.clone().translate(new fs(n.viewport.center).negate());e.project_uCoordinateSystem===Ai.LNGLAT&&e.project_uProjectionMode===Al.WEB_MERCATOR?(s[a]=l,o[a]=r):(s[a]=c.clone().multiplyRight(mhe),o[a]=l.transform(r))}for(let a=0;a<s.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],i["shadow_uProjectCenters[".concat(a,"]")]=o[a],i["shadow_uShadowMap".concat(a)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[a]:n.dummyShadowMap;return i}(n,e):{}},vhe={color:[255,255,255],intensity:1},RV=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],xhe=[0,0,0,200/255];class E2{constructor(e={}){Ce(this,"id","lighting-effect"),Ce(this,"props",null),Ce(this,"shadowColor",xhe),Ce(this,"shadow",void 0),Ce(this,"ambientLight",null),Ce(this,"directionalLights",[]),Ce(this,"pointLights",[]),Ce(this,"shadowPasses",[]),Ce(this,"shadowMaps",[]),Ce(this,"dummyShadowMap",null),Ce(this,"programManager",void 0),Ce(this,"shadowMatrices",void 0);for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=H0.getDefaultProgramManager(e),w2&&this.programManager.addDefaultModule(w2)),this.dummyShadowMap||(this.dummyShadowMap=new Yo(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(w2),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const i=(new Hn).lookAt({eye:new fs(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new Que(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new MV(vhe),this.directionalLights.push(new TV(RV[0]),new TV(RV[1])))}}let whe=1,Ehe=1;class kV{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:o=1}=e,s=whe++,a={time:0,delay:t,duration:i,rate:r,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:o,channel:s}=r;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=Ehe++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class Ahe{constructor(e,t,i){Ce(this,"id",void 0),Ce(this,"context",void 0),Ce(this,"isLoaded",void 0),Ce(this,"persistent",void 0),Ce(this,"_loadCount",0),Ce(this,"_subscribers",new Set),Ce(this,"_data",void 0),Ce(this,"_loader",void 0),Ce(this,"_error",void 0),Ce(this,"_content",void 0),this.id=e,this.context=i,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=J0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class She{constructor({gl:e,protocol:t}){Ce(this,"protocol",void 0),Ce(this,"_context",void 0),Ce(this,"_resources",void 0),Ce(this,"_consumers",void 0),Ce(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let o=this._resources[e];o?o.setData(t,i):(o=new Ahe(e,t,this._context),this._resources[e]=o),o.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i],o=this._resources[r.resourceId];o&&o.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(o[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const o=this._consumers,s=o[e]=o[e]||{},a=s[t]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(s[t]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const Che=[x2],Mhe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function The(n){const e=H0.getDefaultProgramManager(n);for(const t of Che)e.addDefaultModule(t);for(const t of Mhe)e.addShaderHook(t);return e}class Rhe{constructor(e,{deck:t,stats:i,viewport:r,timeline:o}={}){Ce(this,"layers",void 0),Ce(this,"context",void 0),Ce(this,"resourceManager",void 0),Ce(this,"_lastRenderedLayers",[]),Ce(this,"_needsRedraw",!1),Ce(this,"_needsUpdate",!1),Ce(this,"_nextLayers",null),Ce(this,"_debug",!1),Ce(this,"activateViewport",s=>{ps("layerManager.activateViewport",this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new She({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&The(e),stats:i||new OI({id:"deck.gl"}),viewport:r||new Gu({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new kV,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){ps("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const i=XI(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const s of e)i[s.id]?yi.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let o=!1;for(const s of r)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const o=t[r.id];null===o&&yi.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let s=null;try{this._debug&&o!==r&&r.validateProps(),o?(this._transferLayerState(o,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),s=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}s&&this._updateSublayersRecursively(s,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class khe{constructor(e){Ce(this,"width",void 0),Ce(this,"height",void 0),Ce(this,"views",void 0),Ce(this,"viewState",void 0),Ce(this,"controllers",void 0),Ce(this,"timeline",void 0),Ce(this,"_viewports",void 0),Ce(this,"_viewportMap",void 0),Ce(this,"_isUpdating",void 0),Ce(this,"_needsRedraw",void 0),Ce(this,"_needsUpdate",void 0),Ce(this,"_eventManager",void 0),Ce(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t="string"==typeof e?this.getView(e):e,i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){const s=i[o];if(s.containsPixel(r)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=XI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!lg(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):yi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return null===(s=this.getView(e.id))||void 0===s?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,t,i,r){const o=e.controller;if(o){const s={...t,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const o=e[r],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let c=t[o.id];const l=!!o.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),this._viewports.unshift(a)}for(const r in t){const o=t[r];o&&!this.controllers[r]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}class Phe extends AV{constructor(e){const{width:t,height:i,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:d=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:m=60,minPitch:y=0,startPanLngLat:E,startZoomLngLat:M,startRotatePos:H,startBearing:$,startPitch:Y,startZoom:pe,normalize:De=!0}=e;Xo(Number.isFinite(o)),Xo(Number.isFinite(r)),Xo(Number.isFinite(s)),super({width:t,height:i,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:m,minPitch:y,normalize:De,position:d},{startPanLngLat:E,startZoomLngLat:M,startRotatePos:H,startBearing:$,startPitch:Y,startZoom:pe}),Ce(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this.getState().startPanLngLat||this._unproject(t);if(!i)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this.getState();if(!r||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,r,s,o):{bearing:o+t,pitch:s+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:o}=this.getState();if(o||(r=this.getViewportProps().zoom,o=this._unproject(t)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=Tr(c,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:o}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-t.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=Tr(r,i,t);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=Tr(a,s,o);const{normalize:c=!0}=e;return c&&Object.assign(e,function Mle(n){const{width:e,height:t,pitch:i=0}=n;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=n;(r<-180||r>180)&&(r=T8(r+180,360)-180),(a<-180||a>180)&&(a=T8(a+180,360)-180);const c=wD(t/512);if(s<=c)s=c,o=0;else{const l=t/2/Math.pow(2,s),d=cg([0,l])[1];if(o<d)o=d;else{const h=cg([0,512-l])[1];o>h&&(o=h)}}return{width:e,height:t,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,i,r){const o=e[0]-t[0],s=e[1]-t[1],a=e[1],c=t[1],{width:l,height:d}=this.getViewportProps(),h=o/l;let f=0;s>0?Math.abs(d-c)>5&&(f=s/(c-d)*1.2):s<0&&c>5&&(f=1-a/c),f=Tr(f,-1,1);const{minPitch:m,maxPitch:y}=this.getViewportProps();let M=i;return f>0?M=i+f*(y-i):f<0&&(M=i-f*(m-i)),{pitch:M,bearing:r+180*h}}}class Nhe extends b2{constructor(...e){super(...e),Ce(this,"ControllerState",Phe),Ce(this,"transition",{transitionDuration:300,transitionInterpolator:new tE({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),Ce(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class PV extends g2{get ViewportType(){return Wu}get ControllerType(){return Nhe}}Ce(PV,"displayName","MapView");class Fhe extends iE{constructor(e,t){super(e,t),Ce(this,"maskMap",void 0),Ce(this,"fbo",void 0);const{mapSize:i=2048}=t;this.maskMap=new Yo(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new no(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const t=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,Wa(t,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class Uhe{constructor(){Ce(this,"id","mask-effect"),Ce(this,"props",null),Ce(this,"useInPicking",!0),Ce(this,"dummyMaskMap",void 0),Ce(this,"channels",[]),Ce(this,"masks",null),Ce(this,"maskPass",void 0),Ce(this,"maskMap",void 0),Ce(this,"lastViewport",void 0)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new Yo(e,{width:1,height:1}));const a=t.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new Fhe(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],d=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:o,views:s,viewport:l,viewportChanged:d})}_renderChannel(e,{layerFilter:t,onViewportActive:i,views:r,viewport:o,viewportChanged:s}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,d)=>l!==a.layerBounds[d]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||s)&&(this.lastViewport=o,e.bounds=function Lhe({layers:n,viewport:e}){let t=null;for(const o of n){const s=o.getBounds();s&&(t?(t[0]=Math.min(t[0],s[0][0]),t[1]=Math.min(t[1],s[0][1]),t[2]=Math.max(t[2],s[1][0]),t[3]=Math.max(t[3],s[1][1])):t=[s[0][0],s[0][1],s[1][0],s[1][1]])}const i=e.getBounds();if(!t)return i;const r=function jhe(n){const e_x=n[2]-n[0],e_y=n[3]-n[1],t_x=n[0]+.5*e_x,t_y=n[1]+.5*e_y;return[t_x-e_x,t_y-e_y,t_x+e_x,t_y+e_y]}(i);return t[2]-t[0]<r[2]-r[0]||t[3]-t[1]<r[3]-r[1]||(t[0]=Math.max(t[0],r[0]),t[1]=Math.max(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.min(t[3],r[3])),t}({layers:e.layers,viewport:o}),c||!Jm(e.bounds,a.bounds))){const{maskPass:l,maskMap:d}=this,h=function Bhe({bounds:n,viewport:e,width:t,height:i}){if(n[2]<=n[0]||n[3]<=n[1])return null;if(t-=2,i-=2,e instanceof Wu){const{longitude:a,latitude:c,zoom:l}=O8({width:t,height:i,bounds:[[n[0],n[1]],[n[2],n[3]]],maxZoom:20});return new Wu({longitude:a,latitude:c,zoom:l,x:1,y:1,width:t,height:i})}const o=[(n[0]+n[2])/2,(n[1]+n[3])/2,0],s=Math.min(20,t/(n[2]-n[0]),i/(n[3]-n[1]));return new y2({x:1,y:1}).makeViewport({width:t,height:i,viewState:{target:o,zoom:Math.log2(s)}})}({bounds:e.bounds,viewport:o,width:d.width,height:d.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:t,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const t={};let i=0;for(const r of e){const{id:o}=r.root;let s=t[o];if(!s){if(++i>4){yi.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>a?.id===o),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},t[o]=s}s.layers.push(r),s.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const o=this.channels[r];(!o||!(o.id in t))&&(this.channels[r]=null)}for(const r in t){const o=t[r];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return t}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const Vhe=new E2;class zhe{constructor(){Ce(this,"effects",void 0),Ce(this,"_internalEffects",void 0),Ce(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!lg(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new Uhe),e.some(t=>t instanceof E2)||this._internalEffects.push(Vhe)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class Hhe extends iE{shouldDrawLayer(e){return"draw"===e.props.operation}}const NV={blendFunc:[1,0,32771,0],blendEquation:32774};class FV extends iE{constructor(...e){super(...e),Ce(this,"pickZ",void 0),Ce(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:d},cullRect:h,effects:f,pass:m="picking",pickZ:y}){const E=this.gl;this.pickZ=y;const M=y?null:{byLayer:new Map,byAlpha:[]};this._colors=M;const H=Wa(E,{scissorTest:!0,scissor:[a,c,l,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...NV,blend:!y},()=>super.render({target:s,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:o,cullRect:h,effects:f?.filter(Y=>Y.useInPicking),pass:m}));return this._colors=null,{decodePickingColor:M&&Whe.bind(null,M),stats:H}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,NV),r.blend=!0,r.blendColor=function Ghe(n,e,t){const{byLayer:i,byAlpha:r}=n;let o,s=i.get(e);return s?(s.viewports.push(t),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[t]},i.set(e,s),r[o]=s):(yi.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}(this._colors,e,i)):r.blend=!1,r}}function Whe(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}class Yhe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Hhe(e),this.pickLayersPass=new FV(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||no.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,ps("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new no(this.gl),new no(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const o of e)if(o.postRender){if(o===this.lastPostProcessEffect){r.target=t.target,o.postRender(this.gl,r);break}const s=o.postRender(this.gl,r);r.inputBuffer=s,r.swapBuffer=s===i[0]?i[1]:i[0]}}}const Xhe={pickedColor:null,pickedObjectIndex:-1};function qhe({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let d=r*r,h=-1,f=0;for(let m=0;m<l;m++){const y=m+a-i,E=y*y;if(E>d)f+=4*c;else for(let M=0;M<c;M++){if(n[f+3]-1>=0){const $=M+s-t,Y=$*$+E;Y<=d&&(d=Y,h=f)}f+=4}}if(h>=0){const m=n.slice(h,h+4),y=e(m);if(y){const E=Math.floor(h/4/c),M=h/4-E*c;return{...y,pickedColor:m,pickedX:s+M,pickedY:a+E}}yi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Xhe}function LV({pickInfo:n,viewports:e,pixelRatio:t,x:i,y:r,z:o}){let a,s=e[0];if(e.length>1&&(s=function Zhe(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.containsPixel(e))return i}return n[0]}(n?.pickedViewports||e,{x:i,y:r})),s){const c=[i-s.x,r-s.y];void 0!==o&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function Jhe(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===i){const f=t.layerId,m=s?s.props.id:null;if(m!==f||a!==t.index){if(m!==f){const y=r.find(E=>E.props.id===f);y&&c.unshift(y)}t.layerId=m,t.index=a,t.info=null}}const l=LV(n),d=new Map;return d.set(null,l),c.forEach(h=>{let f={...l};h===s&&(f.color=o,f.index=a,f.picked=!0),f=BV({layer:h,info:f,mode:i});const m=f.layer;h===s&&"hover"===i&&(t.info=f),d.set(m.id,f),"hover"===i&&m.updateAutoHighlight(f)}),d}function BV({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class Qhe{constructor(e){Ce(this,"gl",void 0),Ce(this,"pickingFBO",void 0),Ce(this,"depthFBO",void 0),Ce(this,"pickLayersPass",void 0),Ce(this,"layerFilter",void 0),Ce(this,"lastPickedInfo",void 0),Ce(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new FV(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?i.find(f=>f.id===s):null,l=a&&r.find(f=>f.id===a)||r[0],d=l&&l.unproject([e-l.x,t-l.y]);return{...o,x:e,y:t,viewport:l,coordinate:d,layer:c}}_resizeBuffer(){var e,t;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new no(i),no.isSupported(i,{colorBufferFloat:!0}))){const r=new no(i);r.attach({36064:new Yo(i,{format:fi(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:d,effects:h}){const f=this._getPickable(e),m=Ym(this.gl);if(!f)return{result:[],emptyInfo:LV({viewports:i,x:r,y:o,pixelRatio:m})};this._resizeBuffer();const y=DI(this.gl,[r,o],!0),E=[y.x+Math.floor(y.width/2),y.y+Math.floor(y.height/2)],M=Math.round(s*m),{width:H,height:$}=this.pickingFBO,Y=this._getPickingRect({deviceX:E[0],deviceY:E[1],deviceRadius:M,deviceWidth:H,deviceHeight:$}),pe={x:r-s,y:o-s,width:2*s+1,height:2*s+1};let De;const Ve=[],nt=new Set;for(let Ze=0;Ze<a;Ze++){let dt,mt;dt=Y?qhe({...this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:d,deviceRect:Y,cullRect:pe,effects:h,pass:"picking:".concat(c)}),deviceX:E[0],deviceY:E[1],deviceRadius:M,deviceRect:Y}):{pickedColor:null,pickedObjectIndex:-1},dt.pickedLayer&&l&&this.depthFBO&&(mt=this._drawAndSample({layers:[dt.pickedLayer],views:t,viewports:i,onViewportActive:d,deviceRect:{x:dt.pickedX,y:dt.pickedY,width:1,height:1},cullRect:pe,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),dt.pickedLayer&&Ze+1<a&&(nt.add(dt.pickedLayer),dt.pickedLayer.disablePickingIndex(dt.pickedObjectIndex)),De=Jhe({pickInfo:dt,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:o,z:mt,pixelRatio:m});for(const _t of De.values())_t.layer&&Ve.push(_t);if(!dt.pickedColor)break}for(const Ze of nt)Ze.restorePickingColors();return{result:Ve,emptyInfo:De.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:d,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const m=Ym(this.gl),y=DI(this.gl,[r,o],!0),E=y.x,M=y.y+y.height,H=DI(this.gl,[r+s,o+a],!0),Y=H.y,Ve=function Khe({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4)if(n[i+3]-1>=0){const o=n.slice(i,i+4),s=o.join(",");if(!t.has(s)){const a=e(o);a?t.set(s,{...a,color:o}):yi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(t.values())}(this._drawAndSample({layers:f,views:t,viewports:i,onViewportActive:d,deviceRect:{x:E,y:Y,width:H.x+H.width-E,height:M-Y},cullRect:{x:r,y:o,width:s,height:a},effects:h,pass:"picking:".concat(c)})),nt=new Map,Ze=Number.isFinite(l);for(let dt=0;dt<Ve.length&&!(Ze&&l&&nt.size>=l);dt++){const mt=Ve[dt];let _t={color:mt.pickedColor,layer:null,index:mt.pickedObjectIndex,picked:!0,x:r,y:o,pixelRatio:m};_t=BV({layer:mt.pickedLayer,info:_t,mode:c}),nt.has(_t.object)||nt.set(_t.object,_t)}return Array.from(nt.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){const d=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:d,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l}),{x:f,y:m,width:y,height:E}=o,M=new(l?Float32Array:Uint8Array)(y*E*4);return x1(d,{sourceX:f,sourceY:m,sourceWidth:y,sourceHeight:E,target:M}),{pickedColors:M,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:o}){const s=Math.max(0,e-i),a=Math.max(0,t-i),c=Math.min(r,e+i+1)-s,l=Math.min(o,t+i+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}}const efe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class tfe{constructor(e){Ce(this,"el",null),Ce(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,efe),t.appendChild(this.el))}setTooltip(e,t,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function jV(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const ife=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),UV=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:rfe}=(UV&&parseFloat(UV[1]),globalThis),A2=typeof Image<"u",S2=typeof ImageBitmap<"u",C2=!!ife||!!rfe;function VV(n){const e=function HV(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const afe=/^data:image\/svg\+xml/,cfe=/\.svg((\?|#).*)?$/;function M2(n){return n&&(afe.test(n)||cfe.test(n))}function GV(n,e){if(M2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function WV(n,e,t){return T2.apply(this,arguments)}function T2(){return T2=Ut(function*(n,e,t){const i=function lfe(n,e){if(M2(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return GV(n,e)}(n,t),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function dfe(n,e){return I2.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),T2.apply(this,arguments)}function I2(){return I2=Ut(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=o=>r(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){r(o)}})}),I2.apply(this,arguments)}const ufe={};let $V=!0;function D2(){return D2=Ut(function*(n,e,t){let i;i=M2(t)?yield WV(n,e,t):GV(n,t);const r=e&&e.imagebitmap;return yield function ffe(n){return R2.apply(this,arguments)}(i,r)}),D2.apply(this,arguments)}function R2(){return R2=Ut(function*(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function pfe(n){for(const e in n||ufe)return!1;return!0}(e)||!$V)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),$V=!1}return yield createImageBitmap(n)}),R2.apply(this,arguments)}const kl=!1,Z0=!0;function YV(n){const e=Q0(n);return function xfe(n){const e=Q0(n);return e.byteLength>=24&&2303741511===e.getUint32(0,kl)?{mimeType:"image/png",width:e.getUint32(16,kl),height:e.getUint32(20,kl)}:null}(e)||function Afe(n){const e=Q0(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,kl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Sfe(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,kl);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,kl),width:e.getUint16(o+7,kl)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,kl)}return null}(e)||function wfe(n){const e=Q0(n);return e.byteLength>=10&&1195984440===e.getUint32(0,kl)?{mimeType:"image/gif",width:e.getUint16(6,Z0),height:e.getUint16(8,Z0)}:null}(e)||function Efe(n){const e=Q0(n);return e.byteLength>=14&&16973===e.getUint16(0,kl)&&e.getUint32(2,Z0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Z0),height:e.getUint32(22,Z0)}:null}(e)||function vfe(n){const t=function mfe(n){return function yfe(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function bfe(n){return[...n].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==n[r+t])return!1;return!0}(n,"ftyp",4)&&96&n[8]?function gfe(n){switch(function _fe(n,e,t){return String.fromCharCode(...n.slice(e,t))}(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(n):null}(new Uint8Array(n instanceof DataView?n.buffer:n));return t?{mimeType:t.mimeType,width:0,height:0}:null}(e)}function Q0(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function k2(){return k2=Ut(function*(n,e){const{mimeType:t}=YV(n)||{},i=globalThis._parseImageNode;return jV(i),yield i(n,t)}),k2.apply(this,arguments)}function O2(){return O2=Ut(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:o}=t||{},s=function Tfe(n){switch(n){case"auto":case"data":return function sfe(){if(S2)return"imagebitmap";if(A2)return"image";if(C2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function ofe(n){switch(n){case"auto":return S2||A2||C2;case"imagebitmap":return S2;case"image":return A2;case"data":return C2;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(s){case"imagebitmap":a=yield function hfe(n,e,t){return D2.apply(this,arguments)}(n,e,o);break;case"image":a=yield WV(n,e,o);break;case"data":a=yield function Cfe(n,e){return k2.apply(this,arguments)}(n,e);break;default:jV(!1)}return"data"===r&&(a=function zV(n){switch(VV(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),O2.apply(this,arguments)}const XV={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function Mfe(n,e,t){return O2.apply(this,arguments)},tests:[n=>!!YV(new DataView(n))],options:{image:{type:"auto",decode:!0}}},Dfe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function Ife(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},ey="8.8.27",rE=globalThis.deck&&globalThis.deck.VERSION;if(rE&&rE!==ey)throw new Error("deck.gl - multiple versions detected: ".concat(rE," vs ").concat(ey));rE||(yi.log(1,"deck.gl ".concat(ey))(),globalThis.deck={...globalThis.deck,VERSION:ey,version:ey,log:yi,_registerLoggers:function Boe(n){ZI=n}},gV([Dfe,[XV,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Rfe=globalThis.deck;class oE extends Sd{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=fi(e),r=aU(e,"TIMER_QUERY");let o=i||r;for(const s of t)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&r;break;default:Xt(!1)}return o}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return oE.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const qV=El()&&typeof document<"u";let Vfe=0;class zfe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=(M=>Hj(M)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:s=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:d=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:m=!0,stats:y=vf.get("animation-loop-".concat(Vfe++))}=e;let{useDevicePixels:E=!0}=e;"useDevicePixelRatio"in e&&(ln.deprecated("useDevicePixelRatio","useDevicePixels")(),E=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:d,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=y,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:m,useDevicePixels:E}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Xt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=oE.isSupported(this.gl,["timers"])?new oE(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return Ut(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return ln.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=qV?new Promise((e,t)=>{qV&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function Ufe(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function jfe(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?kI(this.props.gl,e):this.onCreateContext(e),!y1(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function cre(n){Ad(n,II)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function fre(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.canvas){const i=function lre(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels);return void function bre(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(ln.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const o=n.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==r||o.devicePixelRatio!==e){let s=e;const a=Math.floor(i*s),c=Math.floor(r*s);n.canvas.width=a,n.canvas.height=c,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==c)&&(ln.warn("Device pixel ratio clamped")(),s=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*s),n.canvas.height=Math.floor(r*s)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,i,e)}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new no(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var sE=g(7271);const Hfe={mousedown:1,mousemove:2,mouseup:4};(function Wfe(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function Gfe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}(r,o=>o.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(sE.PointerEventInput),function $fe(n){n.prototype.handler=function(t){let i=Hfe[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(sE.MouseInput);const Yfe=sE.Manager,Ol=sE;class aE{constructor(e,t,i){this.element=e,this.callback=t,this.options={enable:!0,...i}}}const Xfe=Ol?[[Ol.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ol.Rotate,{enable:!1}],[Ol.Pinch,{enable:!1}],[Ol.Swipe,{enable:!1}],[Ol.Pan,{threshold:0,enable:!1}],[Ol.Press,{enable:!1}],[Ol.Tap,{event:"doubletap",taps:2,enable:!1}],[Ol.Tap,{event:"anytap",enable:!1}],[Ol.Tap,{enable:!1}]]:null,ZV={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},qfe={doubletap:["tap"]},Kfe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},N2={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Jfe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},QV={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Zfe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",fg=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let F2=!1;try{fg.addEventListener("test",null,{get passive(){return F2=!0,!0}}),fg.removeEventListener("test",null)}catch{F2=!1}const Qfe=-1!==Zfe.indexOf("firefox"),{WHEEL_EVENTS:epe}=N2,t6=4.000244140625;class ipe extends aE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{if(!this.options.enable)return;let o=r.deltaY;fg.WheelEvent&&(Qfe&&r.deltaMode===fg.WheelEvent.DOM_DELTA_PIXEL&&(o/=fg.devicePixelRatio),r.deltaMode===fg.WheelEvent.DOM_DELTA_LINE&&(o*=40)),0!==o&&o%t6==0&&(o=Math.floor(o/t6)),r.shiftKey&&o&&(o*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-o,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(epe),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!F2&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}}const{MOUSE_EVENTS:rpe}=N2,n6="pointermove",i6="pointerover",r6="pointerout",o6="pointerenter",s6="pointerleave";class ope extends aE{constructor(e,t,i){super(e,t,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(rpe),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===n6&&(this.enableMoveEvent=t),e===i6&&(this.enableOverEvent=t),e===r6&&(this.enableOutEvent=t),e===o6&&(this.enableEnterEvent=t),e===s6&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(i6,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(r6,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(o6,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(s6,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(n6,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:spe}=N2,a6="keydown";class ape extends aE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{const o=r.target||r.srcElement;"INPUT"===o.tagName&&"text"===o.type||"TEXTAREA"===o.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:a6,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(spe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===a6&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}}const l6="contextmenu";class cpe extends aE{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:l6,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===l6&&(this.options.enable=t)}}const lpe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function ype(n){const e=lpe[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(o=1===r,s=2===r,a=3===r):2===e?(o=!!(1&t),s=!!(4&t),a=!!(2&t)):1===e&&(o=0===i,s=1===i,a=2===i),{leftButton:o,middleButton:s,rightButton:a}}function vpe(n,e){const t=n.center;if(!t)return null;const i=e.getBoundingClientRect();return{center:t,offsetCenter:{x:(t.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(t.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const j2={srcElement:"root",priority:0};class xpe{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const i=this._normalizeEvent(t);let r=t.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let c=j2;"string"==typeof i||i&&i.addEventListener?c={...j2,srcElement:i}:i&&(c={...j2,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const d={type:e,handler:t,srcElement:c.srcElement,priority:c.priority};r&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=d.priority);)h--;l.splice(h+1,0,d)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type===e&&s.handler===t){i.splice(o,1);const a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:d,once:h}=i[c];if(d({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:d}=a[c];this.remove(l,d)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...ype(e),...vpe(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const wpe={events:null,recognizers:null,recognizerOptions:{},Manager:Yfe,touchAction:"none",tabIndex:0};class Epe{constructor(e=null,t){this._onBasicInput=r=>{const{srcEvent:o}=r,s=Kfe[o.type];s&&this.manager.emit(s,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...wpe,...t},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||Xfe}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(ZV).forEach(r=>{const o=this.manager.get(r);o&&ZV[r].forEach(s=>{o.recognizeWith(s)})});for(const r in t.recognizerOptions){const o=this.manager.get(r);if(o){const s=t.recognizerOptions[r];delete s.enable,o.set(s)}}this.wheelInput=new ipe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new ope(e,this._onOtherEvent,{enable:!1}),this.keyInput=new ape(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new cpe(e,this._onOtherEvent,{enable:!1});for(const[r,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(r,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const o=qfe[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=i.get(s);t?(a.requireFailure(e),r.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,o){if("string"!=typeof e){i=t;for(const d in e)this._addEventHandler(d,e[d],i,r,o);return}const{manager:s,events:a}=this,c=QV[e]||e;let l=a.get(c);l||(l=new xpe(this),a.set(c,l),l.recognizerName=Jfe[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,t,i,r,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:i}=this,o=i.get(QV[e]||e);if(o&&(o.remove(e,t),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const c of i.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function Tf(){}const d6={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Tf,onResize:Tf,onViewStateChange:Tf,onInteractionStateChange:Tf,onBeforeRender:Tf,onAfterRender:Tf,onLoad:Tf,onError:n=>yi.error(n.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class U2{constructor(e){Ce(this,"props",void 0),Ce(this,"width",0),Ce(this,"height",0),Ce(this,"userData",{}),Ce(this,"canvas",null),Ce(this,"viewManager",null),Ce(this,"layerManager",null),Ce(this,"effectManager",null),Ce(this,"deckRenderer",null),Ce(this,"deckPicker",null),Ce(this,"eventManager",null),Ce(this,"tooltip",null),Ce(this,"metrics",void 0),Ce(this,"animationLoop",void 0),Ce(this,"stats",void 0),Ce(this,"viewState",void 0),Ce(this,"cursorState",void 0),Ce(this,"_needsRedraw",void 0),Ce(this,"_pickRequest",void 0),Ce(this,"_lastPointerDownInfo",null),Ce(this,"_metricsCounter",void 0),Ce(this,"_onPointerMove",t=>{const{_pickRequest:i}=this;if("pointerleave"===t.type)i.x=-1,i.y=-1,i.radius=0;else{if(t.leftButton||t.rightButton)return;{const r=t.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=t}),Ce(this,"_onEvent",t=>{const i=Mj[t.type],r=t.offsetCenter;if(!i||!r||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:o,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let d=!1;c&&(d=c.call(a,s,t)),!d&&l&&l(s,t)}),Ce(this,"_onPointerDown",t=>{const i=t.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...d6,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&yi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===s8()&&yi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new OI({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&F0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,i,r,o,s,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(t=this.viewManager)||void 0===t||t.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&yi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&yi.removed("onLayerClick","onClick")(),e.initialViewState&&!lg(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return t=t||i||r||o||s,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return Xo(this.viewManager),this.viewManager.views}getViewports(e){return Xo(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){Xo(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(t).timeEnd(),o}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),Xo(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:i}=e;if(t||0===t){const o=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=o}if(i||0===i){var r;const o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;t===this.width&&i===this.height||(this.width=t,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:t,height:i}),this.props.onResize({width:t,height:i}))}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:d}=e;return new zfe({width:t,height:i,useDevicePixels:d,autoResizeViewport:!1,gl:r,onCreateContext:h=>Hj({...o,...h,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new PV({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=r,s=!1;for(const a of i){var t;o=a,s=(null===(t=a.layer)||void 0===t?void 0:t.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,kI(e,{enable:!0,copyState:!0})),this.tooltip=new tfe(this.canvas),Ad(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new kV;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new Epe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in Mj)this.eventManager.on(r,this._onEvent);this.viewManager=new khe({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Rhe(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new zhe,this.deckRenderer=new Yhe(e),this.deckPicker=new Qhe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Ad(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),yi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=vf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}Ce(U2,"defaultProps",d6),Ce(U2,"VERSION",Rfe.VERSION);const lE={name:"project32",dependencies:[x2],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Ape={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},dE={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function Spe(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ape;const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}},u6={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Ju{static get DRAW_MODE(){return u6}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("geometry"),drawMode:i=u6.TRIANGLES,attributes:r={},indices:o=null,vertexCount:s=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Xt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Xt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const o=e[r],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(i=Math.min(i,s.length/a))}return Xt(Number.isFinite(i)),i}}const h6=()=>{},f6={10241:9987,10240:9729,10242:33071,10243:33071};function Dpe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Rpe(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function ty(n){return n&&(n.id||n.url)}function p6(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];n[ty(r)]={...r,x:o,y:t}}}class Npe{constructor(e,{onUpdate:t=h6,onError:i=h6}){Ce(this,"gl",void 0),Ce(this,"onUpdate",void 0),Ce(this,"onError",void 0),Ce(this,"_loadOptions",null),Ce(this,"_texture",null),Ce(this,"_externalTexture",null),Ce(this,"_mapping",{}),Ce(this,"_textureParameters",null),Ce(this,"_pendingCount",0),Ce(this,"_autoPacking",!1),Ce(this,"_xOffset",0),Ce(this,"_yOffset",0),Ce(this,"_rowHeight",0),Ce(this,"_buffer",4),Ce(this,"_canvasWidth",1024),Ce(this,"_canvasHeight",0),Ce(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?ty(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,textureParameters:o}){var s;e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),r&&(this._mapping=r),i&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=i),o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function Ppe(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:o}=T1(n);for(const s of r){o.index++;const a=e(s,o),c=ty(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!t[c]||a.url!==t[c].url)&&(i[c]={...a,source:s,sourceIndex:o.index})}return i}(e,t,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=function Ope({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<n.length;c++){const l=n[c];if(!t[ty(l)]){const{height:h,width:f}=l;i+f+e>s&&(p6(t,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,o=Math.max(o,h)}}return a.length>0&&p6(t,a,r),{mapping:t,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:Dpe(o+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new Yo(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||f6})),this._texture.height!==this._canvasHeight&&(this._texture=function kpe(n,e,t,i){const r=n.width,o=n.height,s=new Yo(n.gl,{width:e,height:t,parameters:i});return function zre(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=t;let{targetX:a,targetY:c,targetZ:l,width:d,height:h}=t;const{framebuffer:f,deleteFramebuffer:m}=N0(n);Xt(f);const{gl:y,handle:E}=f,M=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const H=y.bindFramebuffer(36160,E);Xt(e);let $=null;if(e instanceof xf&&($=e,d=Number.isFinite(d)?d:$.width,h=Number.isFinite(h)?h:$.height,$.bind(0),e=$.target),M)switch(e){case 3553:case 34067:y.copyTexSubImage2D(e,o,a,c,i,r,d,h);break;case 35866:case 32879:hs(y).copyTexSubImage3D(e,o,a,c,l,i,r,d,h)}else y.copyTexImage2D(e,o,s,i,r,d,h,0);$&&$.unbind(),y.bindFramebuffer(36160,H||null),m&&f.delete()}(n,s,{targetY:0,width:r,height:o}),n.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||f6)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,J0(i.url,XV,this._loadOptions).then(r=>{const o=ty(i),{x:s,y:a,width:c,height:l}=this._mapping[o],d=Rpe(t,r,c,l);this._texture.setSubImageData({data:d,x:s,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const m6=[0,0,0,255],Fpe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:m6},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class V2 extends Cf{constructor(...e){super(...e),Ce(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[lE,dE]})}initializeState(){this.state={iconManager:new Npe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:m6},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:d}=t,{iconManager:h}=this.state,f=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:t.loadOptions,autoPacking:!f,iconAtlas:s,iconMapping:f?a:null,textureParameters:d}),f?i.iconMapping!==t.iconMapping&&o.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var m;const{gl:y}=this.context;null===(m=this.state.model)||void 0===m||m.delete(),this.state.model=this._getModel(y),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:b1[o],sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,billboard:s,alphaCutoff:a}).draw()}_getModel(e){return new ig(e,{...this.getShaders(),id:this.props.id,geometry:new Ju({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const i=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;i?i(e):yi.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:i,anchorX:r=t/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:i,width:r,height:o}=this.state.iconManager.getIconMapping(e);return[t,i,r,o]}}Ce(V2,"defaultProps",Fpe),Ce(V2,"layerName","IconLayer");const _6=[];class z2 extends V2{constructor(...e){super(...e),Ce(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;let{outlineColor:r}=t;r!==i.outlineColor&&(r=r.map(o=>o/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&yi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:i,outlineWidth:r}=this.props,{outlineColor:o}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!t,outlineColor:o},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):_6}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):_6}}Ce(z2,"defaultProps",{getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),Ce(z2,"layerName","MultiIconLayer");var jpe=g(822),Upe=g.n(jpe);const Vpe=32,zpe=[];function Hpe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function b6(n,e,t,i){let r=0;for(let s=e;s<t;s++){var o;r+=(null===(o=i[n[s]])||void 0===o?void 0:o.width)||0}return r}function y6(n,e,t,i,r,o){let s=e,a=0;for(let c=e;c<t;c++){const l=b6(n,c,c+1,r);a+l>i&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function $pe(n,e,t,i,r=0,o){void 0===o&&(o=n.length);const s=[];return"break-all"===e?y6(n,r,o,t,i,s):function Wpe(n,e,t,i,r,o){let s=e,a=e,c=e,l=0;for(let d=e;d<t;d++)if((" "===n[d]||" "===n[d+1]||d+1===t)&&(c=d+1),c>a){let h=b6(n,a,c,r);l+h>i&&(s<a&&(o.push(a),s=a,l=0),h>i&&(h=y6(n,a,c,i,r,o),s=o[o.length-1])),a=c,l+=h}}(n,r,o,t,i,s),s}function Ype(n,e,t,i,r,o){let s=0,a=0;for(let c=e;c<t;c++){const l=n[c],d=i[l];d?(a||(a=d.height),r[c]=s+d.width/2,s+=d.width):(yi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=s,s+=Vpe)}o[0]=s,o[1]=a}function v6(n,e,t,i,r){const o=Array.from(n),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),d=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let m=0,y=0,E=0;for(let M=0;M<=s;M++){const H=o[M];if(("\n"===H||M===s)&&(E=M),E>y){const $=d?$pe(o,t,i,r,y,E):zpe;for(let Y=0;Y<=$.length;Y++){const pe=0===Y?y:$[Y-1],De=Y<$.length?$[Y]:E;Ype(o,pe,De,r,a,f);for(let Ve=pe;Ve<De;Ve++)c[Ve]=m+f[1]/2,l[Ve]=f[0];m+=f[1]*e,h[0]=Math.max(h[0],f[0])}y=E}"\n"===H&&(a[y]=0,c[y]=0,l[y]=0,y++)}return h[1]=m,{x:a,y:c,rowWidth:l,size:h}}class x6{constructor(e=5){Ce(this,"limit",void 0),Ce(this,"_cache",{}),Ce(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const ny={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function qpe(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let uE=new x6(3);function Zpe(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function S6(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}class eme{constructor(){Ce(this,"props",{...ny}),Ce(this,"_key",void 0),Ce(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const t=this._key;this._key=this._getKey();const i=function Jpe(n,e){let t;t="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=uE.get(n);if(!i)return t;for(const r in i.mapping)t.has(r)&&t.delete(r);return t}(this._key,this.props.characterSet),r=uE.get(this._key);if(r&&0===i.size)return void(this._key!==t&&(this._atlas=r));const o=this._generateFontAtlas(this._key,i,r);this._atlas=o,uE.set(this._key,o)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:o,fontSize:s,buffer:a,sdf:c,radius:l,cutoff:d}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");S6(f,r,s,o);const{mapping:m,canvasHeight:y,xOffset:E,yOffset:M}=function Gpe({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;for(const h of n)if(!o[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),o[h]={x:l+i,y:a+c*(t+2*i)+i,width:f,height:t},l+=f+2*i}const d=t+2*i;return{mapping:o,xOffset:l,yOffset:a+c*d,canvasHeight:Hpe(a+(c+1)*d)}}({getFontWidth:H=>f.measureText(H).width,fontHeight:1.2*s,buffer:a,characterSet:t,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==y){const H=f.getImageData(0,0,h.width,h.height);h.height=y,f.putImageData(H,0,0)}if(S6(f,r,s,o),c){const H=new(Upe())(s,a,l,d,r,o),$=f.getImageData(0,0,H.size,H.size);for(const Y of t)Zpe(H.draw(Y),$),f.putImageData($,m[Y].x-a,m[Y].y+a)}else for(const H of t)f.fillText(H,m[H].x,m[H].y+.9*s);return{xOffset:E,yOffset:M,mapping:m,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(s," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const ime={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class H2 extends Cf{constructor(...e){super(...e),Ce(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[lE,dE]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:i,sizeUnits:r,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!a,padding:c,sizeUnits:b1[r],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){return new ig(e,{...this.getShaders(),id:this.props.id,geometry:new Ju({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}Ce(H2,"defaultProps",ime),Ce(H2,"layerName","TextBackgroundLayer");const C6={start:1,middle:0,end:-1},M6={top:1,center:0,bottom:-1},G2=[0,0,0,255],ome={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:G2},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:ny.characterSet},fontFamily:ny.fontFamily,fontWeight:ny.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:G2},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:G2},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class W2 extends m2{constructor(...e){super(...e),Ce(this,"state",void 0),Ce(this,"getBoundingRect",(t,i)=>{const r=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=o(t,i)||"",{size:[f,m]}=v6(h,c,s,a,r);return[(C6["function"==typeof l?l(t,i):l]-1)*f/2,(M6["function"==typeof d?d(t,i):d]-1)*m/2,f,m]}),Ce(this,"getIconOffsets",(t,i)=>{const r=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:d}=this.props,h=o(t,i)||"",{x:f,y:m,rowWidth:y,size:[E,M]}=v6(h,c,s,a,r),H=C6["function"==typeof l?l(t,i):l],$=M6["function"==typeof d?d(t,i):d],Y=f.length,pe=new Array(2*Y);let De=0;for(let Ve=0;Ve<Y;Ve++)pe[De++]=(H-1)*E/2+(1-H)*(E-y[Ve])/2+f[Ve],pe[De++]=($-1)*M/2+m[Ve];return pe})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new eme}}updateState(e){const{props:t,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:t,fontWeight:i};if(!r.mapping)return r.setProps(s),!0;for(const a in s)if(s[a]!==r.props[a])return r.setProps(s),!0;return!1}_updateText(){var e;const{data:t,characterSet:i}=this.props,r=null===(e=t.attributes)||void 0===e?void 0:e.getText;let a,{getText:o}=this.props,s=t.startIndices;const c="auto"===i&&new Set;if(r&&s){const{texts:l,characterCount:d}=function Xpe({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:o}){const s=n.BYTES_PER_ELEMENT,a=t?t/s:1,c=i?i/s:0,l=r[e]||Math.ceil((n.length-c)/a),d=o&&new Set,h=new Array(e);let f=n;if(a>1||c>0){f=new(0,n.constructor)(l);for(let y=0;y<l;y++)f[y]=n[y*a+c]}for(let m=0;m<e;m++){const M=f.subarray(r[m],r[m+1]||l);h[m]=String.fromCodePoint.apply(null,M),d&&M.forEach(d.add,d)}if(d)for(const m of d)o.add(String.fromCodePoint(m));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:s,characterSet:c});a=d,o=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:d}=T1(t);s=[0],a=0;for(const h of l){d.index++;const f=Array.from(o(h,d)||"");c&&f.forEach(c.add,c),a+=f.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:t,getText:i,fontAtlasManager:{scale:r,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:y,getBackgroundColor:E,getBorderColor:M,getBorderWidth:H,backgroundPadding:$,background:Y,billboard:pe,fontSettings:De,outlineWidth:Ve,outlineColor:nt,sizeScale:Ze,sizeUnits:dt,sizeMinPixels:mt,sizeMaxPixels:_t,transitions:xt,updateTriggers:ut}=this.props,pt=this.getSubLayerClass("characters",z2),Tt=this.getSubLayerClass("background",H2);return[Y&&new Tt({getFillColor:E,getLineColor:M,getLineWidth:H,padding:$,getPosition:d,getSize:f,getAngle:m,getPixelOffset:y,billboard:pe,sizeScale:Ze/this.state.fontAtlasManager.props.fontSize,sizeUnits:dt,sizeMinPixels:mt,sizeMaxPixels:_t,transitions:xt&&{getPosition:xt.getPosition,getAngle:xt.getAngle,getSize:xt.getSize,getFillColor:xt.getBackgroundColor,getLineColor:xt.getBorderColor,getLineWidth:xt.getBorderWidth,getPixelOffset:xt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ut.getPosition,getAngle:ut.getAngle,getSize:ut.getSize,getFillColor:ut.getBackgroundColor,getLineColor:ut.getBorderColor,getLineWidth:ut.getBorderWidth,getPixelOffset:ut.getPixelOffset,getBoundingRect:{getText:ut.getText,getTextAnchor:ut.getTextAnchor,getAlignmentBaseline:ut.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new pt({sdf:De.sdf,smoothing:Number.isFinite(De.smoothing)?De.smoothing:ny.smoothing,outlineWidth:Ve,outlineColor:nt,iconAtlas:o,iconMapping:s,getPosition:d,getColor:h,getSize:f,getAngle:m,getPixelOffset:y,billboard:pe,sizeScale:Ze*r,sizeUnits:dt,sizeMinPixels:mt*r,sizeMaxPixels:_t*r,transitions:xt&&{getPosition:xt.getPosition,getAngle:xt.getAngle,getColor:xt.getColor,getSize:xt.getSize,getPixelOffset:xt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ut.getText,getPosition:ut.getPosition,getAngle:ut.getAngle,getColor:ut.getColor,getSize:ut.getSize,getPixelOffset:ut.getPixelOffset,getIconOffsets:{getText:ut.getText,getTextAnchor:ut.getTextAnchor,getAlignmentBaseline:ut.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function Qpe(n){yi.assert(Number.isFinite(n)&&n>=3,"Invalid cache limit"),uE=new x6(n)}(e)}}Ce(W2,"defaultProps",ome),Ce(W2,"layerName","TextLayer");const T6="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",sme={lightSources:{}};function $2(){let{color:n=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.map(t=>t*e/255)}const Y2={name:"lights",vs:T6,fs:T6,getUniforms:function I6(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sme;if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function ame(n){let{ambientLight:e,pointLights:t=[],directionalLights:i=[]}=n;const r={};return r["lighting_uAmbientLight.color"]=e?$2(e):[0,0,0],t.forEach((o,s)=>{r["lighting_uPointLight[".concat(s,"].color")]=$2(o),r["lighting_uPointLight[".concat(s,"].position")]=o.position,r["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),r.lighting_uPointLightCount=t.length,i.forEach((o,s)=>{r["lighting_uDirectionalLight[".concat(s,"].color")]=$2(o),r["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return I6({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},cme={};const dme={name:"phong-lighting",dependencies:[Y2],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function R6(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cme;if(!("material"in n))return{};const{material:e}=n;return e?function lme(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(o=>o/255)}}(e):{lighting_uEnabled:!1}}},X2=Math.PI/180,hE=new Float32Array(16),k6=new Float32Array(12);function O6(n,e,t){const i=e[0]*X2,r=e[1]*X2,o=e[2]*X2,s=Math.sin(o),a=Math.sin(i),c=Math.sin(r),l=Math.cos(o),d=Math.cos(i),h=Math.cos(r),f=t[0],m=t[1],y=t[2];n[0]=f*h*d,n[1]=f*c*d,n[2]=f*-a,n[3]=m*(-c*l+h*a*s),n[4]=m*(h*l+c*a*s),n[5]=m*d*s,n[6]=y*(c*s+h*a*l),n[7]=y*(-h*s+c*a*l),n[8]=y*d*l}function P6(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const N6={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,d=Array.isArray(o),h=Array.isArray(r),f=Array.isArray(s),m=l||!c&&!!a(i[0]);n.constant=m?l:h&&d&&f;const y=n.value;if(n.constant){let E;m?(hE.set(a),E=P6(hE)):(E=k6,O6(E,r,o),E.set(s,9)),n.value=new Float32Array(E)}else{let E=e*n.size;const{iterable:M,objectInfo:H}=T1(i,e,t);for(const $ of M){let Y;H.index++,m?(hE.set(l?a:a($,H)),Y=P6(hE)):(Y=k6,O6(Y,h?r:r($,H),d?o:o($,H)),Y.set(f?s:s($,H),9)),y[E++]=Y[0],y[E++]=Y[1],y[E++]=Y[2],y[E++]=Y[3],y[E++]=Y[4],y[E++]=Y[5],y[E++]=Y[6],y[E++]=Y[7],y[E++]=Y[8],y[E++]=Y[9],y[E++]=Y[10],y[E++]=Y[11]}}}};function F6(n,e){return e===Ai.CARTESIAN||e===Ai.METER_OFFSETS||e===Ai.DEFAULT&&!n.isGeospatial}function L6(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),yi.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function fme(n,e){if(n.attributes)return L6(n.attributes,e),n instanceof Ju?n:new Ju(n);if(n.positions||n.POSITION)return L6(n,e),new Ju({attributes:n});throw Error("Invalid mesh")}class q2 extends Cf{constructor(...e){super(...e),Ce(this,"state",void 0)}getShaders(){const e=!fi(this.context.gl),t={};return HI(this.context.gl,"GLSL_DERIVATIVES")&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[lE,dme,dE],transpileToGLSL100:e,defines:t})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:N6}),this.setState({emptyTexture:new Yo(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e;if(t.mesh!==i.mesh||r.extensionsChanged){var o;if(null===(o=this.state.model)||void 0===o||o.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const s=t.mesh.attributes||t.mesh;this.setState({hasNormals:!(!s.NORMAL&&!s.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||F6(t,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const t=new ig(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:fme(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return t.setUniforms({sampler:i||r,hasTexture:!!i}),t}setTexture(e){const{emptyTexture:t,model:i}=this.state;i&&i.setUniforms({sampler:e||t,hasTexture:!!e})}}Ce(q2,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),Ce(q2,"layerName","SimpleMeshLayer");const B6={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[Y2]};class pg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;this.id=t||na(this.constructor.name),this.display=!0,this.position=new fs,this.rotation=new fs,this.scale=new fs(1,1,1),this.matrix=new Hn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Xt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Xt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Xt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:t,rotation:i,scale:r,update:o=!0}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),o&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){Xt(e),t=t||this.matrix;const i=new Hn(e).multiplyRight(t),r=i.invert(),o=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class iy extends pg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;ln.assert(t.every(i=>i instanceof pg),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const r of t)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((t,i)=>{let{worldMatrix:r}=i;const o=t.getBounds();if(!o)return;const[s,a]=o,c=new fs(s).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new fs(a).subtract(s).divide([2,2,2]);r.transformAsVector(l,l);for(let d=0;d<8;d++){const h=new fs(1&d?-1:1,2&d?-1:1,4&d?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:t=new Hn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Hn(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof iy?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let fE;class K2 extends hU{static get ZERO(){return fE||(fE=new K2(0,0,0,0),Object.freeze(fE)),fE}constructor(e=0,t=0,i=0,r=0){super(-0,-0,-0,-0),Cd(e)&&1===arguments.length?this.copy(e):(Gr.debug&&(pi(e),pi(t),pi(i),pi(r)),this[0]=e,this[1]=t,this[2]=i,this[3]=r)}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Gr.debug&&(pi(e.x),pi(e.y),pi(e.z),pi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=pi(e)}get w(){return this[3]}set w(e){this[3]=pi(e)}transform(e){return WI(this,this,e),this.check()}transformByMatrix3(e){return function Soe(n,e,t){const i=e[0],r=e[1],o=e[2];n[0]=t[0]*i+t[3]*r+t[6]*o,n[1]=t[1]*i+t[4]*r+t[7]*o,n[2]=t[2]*i+t[5]*r+t[8]*o,n[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function Aoe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2],n[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return gU(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function j6(){var n=new ra(4);return ra!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function U6(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function V6(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=t[0],c=t[1],l=t[2],d=t[3];return n[0]=i*d+s*a+r*l-o*c,n[1]=r*d+s*c+o*a-i*l,n[2]=o*d+s*l+i*c-r*a,n[3]=s*d-i*a-r*c-o*l,n}var H6=y8,Ime=function(){var n=fU(),e=pU(1,0,0),t=pU(0,1,0);return function(i,r,o){var s=mU(r,o);return s<-.999999?(S1(n,e,r),function uoe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&S1(n,t,r),function poe(n,e){var t=e[0],i=e[1],r=e[2],o=t*t+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o}(n,n),U6(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(S1(n,r,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,function Zce(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=i*s,n[2]=r*s,n[3]=o*s,n}(i,i))}}();j6(),j6(),function mme(){var n=new ra(9);ra!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const Dme=[0,0,0,1];class J2 extends E1{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function z6(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),n[r]=.5*i,n[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),n[o]=(e[3*o+r]+e[3*r+o])*i,n[s]=(e[3*s+r]+e[3*r+s])*i}return n}(this,e),this.check()}fromAxisRotation(e,t){return U6(this,e,t),this.check()}identity(){return function gme(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}get z(){return this[2]}set z(e){this[2]=pi(e)}get w(){return this[3]}set w(e){this[3]=pi(e)}len(){return function Kce(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function Jce(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e){return function Qce(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return Ime(this,e,t),this.check()}add(e){return function qce(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function vme(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function Ame(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function Eme(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o,a=s?1/s:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=o*a}(this,this),this.check()}lerp(e,t,i){return void 0===i?this.lerp(this,e,t):(function ele(n,e,t,i){var r=e[0],o=e[1],s=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n[2]=s+i*(t[2]-s),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check())}multiplyRight(e){return V6(this,this,e),this.check()}multiplyLeft(e){return V6(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function _me(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+s*a,n[1]=r*c+o*a,n[2]=o*c-r*a,n[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function bme(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-o*a,n[1]=r*c+s*a,n[2]=o*c+i*a,n[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function yme(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=o*c+s*a,n[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return H6(this,this,e),this.check()}slerp(e,t,i){let r,o,s;switch(arguments.length){case 1:({start:r=Dme,target:o,ratio:s}=e);break;case 2:r=this,o=e,s=t;break;default:r=e,o=t,s=i}return function pE(n,e,t,i){var f,m,y,E,M,r=e[0],o=e[1],s=e[2],a=e[3],c=t[0],l=t[1],d=t[2],h=t[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>Cl?(f=Math.acos(m),y=Math.sin(f),E=Math.sin((1-i)*f)/y,M=Math.sin(i*f)/y):(E=1-i,M=i),n[0]=E*r+M*c,n[1]=E*o+M*l,n[2]=E*s+M*d,n[3]=E*a+M*h,n}(this,r,o,s),this.check()}transformVector4(e,t=new K2){return function tle(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2],l=t[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;n[0]=d*l+m*-s+h*-c-f*-a,n[1]=h*l+m*-a+f*-s-d*-c,n[2]=f*l+m*-c+d*-a-h*-s,n[3]=e[3]}(t,e,this),A1(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const Rme={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},kme={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function $6(n){if(!n._animation){const e=kme[n.componentType],t=Rme[n.type],i=t*n.count,{buffer:r,byteOffset:o}=n.bufferView.data,s=new e(r,o+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(s);else{const a=[];for(let c=0;c<s.length;c+=t)a.push(Array.from(s.slice(c,c+t)));n._animation=a}}return n._animation}const Ome=new Hn,Z2=new J2;class jme{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:o,target:s,path:a}=r;(function Bme(n,e,t,i){let{input:r,interpolation:o,output:s}=e;const c=n%r[r.length-1],l=r.findIndex(m=>m>=c),d=Math.max(0,l-1);if(!Array.isArray(t[i]))switch(i){case"translation":t[i]=[0,0,0];break;case"rotation":t[i]=[0,0,0,1];break;case"scale":t[i]=[1,1,1];break;default:ln.warn("Bad animation path ".concat(i))()}Xt(t[i].length===s[d].length);const h=r[d],f=r[l];switch(o){case"STEP":!function Lme(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(t,i,s[d]);break;case"LINEAR":f>h&&function Nme(n,e,t,i,r){if("rotation"===e){Z2.slerp({start:t,target:i,ratio:r});for(let o=0;o<Z2.length;o++)n[e][o]=Z2[o]}else for(let o=0;o<t.length;o++)n[e][o]=r*i[o]+(1-r)*t[o]}(t,i,s[d],s[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function Fme(n,e,t){let{p0:i,outTangent0:r,inTangent1:o,p1:s,tDiff:a,ratio:c}=t;for(let l=0;l<n[e].length;l++){const d=r[l]*a,h=o[l]*a;n[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(t,i,{p0:s[3*d+1],outTangent0:s[3*d+2],inTangent1:s[3*l+0],p1:s[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:ln.warn("Interpolation ".concat(o," not supported"))()}})(i,o,s,a),function Pme(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=Ome.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class Ume{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||"Animation-".concat(i),o=t.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:d}=a;return{input:$6(e.accessors[c]),interpolation:l,output:$6(e.accessors[d])}}),s=t.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new jme({name:r,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class Vme extends pg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof ig?(this.model=e,this._setModelNodeProps(t)):this.model=new ig(e,t),this.bounds=null,this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class zme{constructor(e,t){let{attributes:i,material:r,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=t;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},HI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=e.texture.source.image;let s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};const c=new Yo(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[t]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(ln.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function Y6(n,e){return fi(n)?"#version 300 es\n".concat(e):e}const $me={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Yme={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class Xme{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},Yme,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new Ume(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(o=>this.createNode(o));return new iy({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));const r=new iy({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const o=(new Hn).fromQuaternion(e.rotation);r.matrix.multiplyRight(o)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),r=new iy({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){ln.warn("getVertexCount() not found")()}createPrimitive(e,t,i){const r=function Wme(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:o,modelOptions:s}=e,a=new zme(n,e);ln.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));const l=new Vme(n,{id:t,drawMode:i,vertexCount:r,modules:[B6],parameters:a.parameters,vs:Y6(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:Y6(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...s,defines:{...a.defines,...s.defines}});return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),ln.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new Yi(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new ia({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:$me[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var ry=g(9125);const Zme="3.2.13",Q2={};function If(n){return eR.apply(this,arguments)}function eR(){return eR=Ut(function*(n,e=null,t={}){return e&&(n=function Qme(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:Yu?t.CDN?(Tl(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(e,"@").concat(Zme,"/dist/libs/").concat(n)):GD?"../src/libs/".concat(n):"modules/".concat(e,"/src/libs/").concat(n):"modules/".concat(e,"/dist/libs/").concat(n)}(n,e,t)),Q2[n]=Q2[n]||function ege(n){return tR.apply(this,arguments)}(n),yield Q2[n]}),eR.apply(this,arguments)}function tR(){return tR=Ut(function*(n){if(n.endsWith("wasm"))return yield(yield fetch(n)).arrayBuffer();if(!Yu)try{return ry&&ry.requireFromFile&&(yield ry.requireFromFile(n))}catch{return null}return GD?importScripts(n):function tge(n,e){if(!Yu)return ry.requireFromString&&ry.requireFromString(n,e);if(GD)return eval.call(Mde,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch{t.text=n}return document.body.appendChild(t),null}(yield(yield fetch(n)).text(),n)}),tR.apply(this,arguments)}const nge="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),ige="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let nR,oR;function q6(n){return iR.apply(this,arguments)}function iR(){return iR=Ut(function*(n){const e=n.modules||{};return e.basis?e.basis:(nR=nR||function rge(n){return rR.apply(this,arguments)}(n),yield nR)}),iR.apply(this,arguments)}function rR(){return rR=Ut(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield If("basis_transcoder.js","textures",n),yield If("basis_transcoder.wasm","textures",n)]),e=e||globalThis.BASIS,yield function oge(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:o,initializeBasis:s}=r;s(),i({BasisFile:o})})})}(e,t)}),rR.apply(this,arguments)}function K6(n){return sR.apply(this,arguments)}function sR(){return sR=Ut(function*(n){const e=n.modules||{};return e.basisEncoder?e.basisEncoder:(oR=oR||function sge(n){return aR.apply(this,arguments)}(n),yield oR)}),sR.apply(this,arguments)}function aR(){return aR=Ut(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield If(ige,"textures",n),yield If(nge,"textures",n)]),e=e||globalThis.BASIS,yield function age(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}(e,t)}),aR.apply(this,arguments)}const cge=["","WEBKIT_","MOZ_"],J6={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let mE=null;var cR,gE,lR,_E,Q6,dR,e5,t5;new Uint8Array([0]),function(n){n[n.NONE=0]="NONE",n[n.BASISLZ=1]="BASISLZ",n[n.ZSTD=2]="ZSTD",n[n.ZLIB=3]="ZLIB"}(cR||(cR={})),function(n){n[n.BASICFORMAT=0]="BASICFORMAT"}(gE||(gE={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.ETC1S=163]="ETC1S",n[n.UASTC=166]="UASTC"}(lR||(lR={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.SRGB=1]="SRGB"}(_E||(_E={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.LINEAR=1]="LINEAR",n[n.SRGB=2]="SRGB",n[n.ITU=3]="ITU",n[n.NTSC=4]="NTSC",n[n.SLOG=5]="SLOG",n[n.SLOG2=6]="SLOG2"}(Q6||(Q6={})),function(n){n[n.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",n[n.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(dR||(dR={})),function(n){n[n.RGB=0]="RGB",n[n.RRR=3]="RRR",n[n.GGG=4]="GGG",n[n.AAA=15]="AAA"}(e5||(e5={})),function(n){n[n.RGB=0]="RGB",n[n.RGBA=3]="RGBA",n[n.RRR=4]="RRR",n[n.RRRG=5]="RRRG"}(t5||(t5={}));const Aa=[171,75,84,88,32,50,48,187,13,10,26,10],pge={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function hR(){return hR=Ut(function*(n,e){if("auto"===e.basis.containerFormat){if(function fge(n){const e=new Uint8Array(n);return!(e.byteLength<Aa.length||e[0]!==Aa[0]||e[1]!==Aa[1]||e[2]!==Aa[2]||e[3]!==Aa[3]||e[4]!==Aa[4]||e[5]!==Aa[5]||e[6]!==Aa[6]||e[7]!==Aa[7]||e[8]!==Aa[8]||e[9]!==Aa[9]||e[10]!==Aa[10]||e[11]!==Aa[11])}(n))return o5((yield K6(e)).KTX2File,n,e);const{BasisFile:t}=yield q6(e);return fR(t,n,e)}if("encoder"===e.basis.module){const t=yield K6(e);return"ktx2"===e.basis.containerFormat?o5(t.KTX2File,n,e):fR(t.BasisFile,n,e)}{const{BasisFile:i}=yield q6(e);return fR(i,n,e)}}),hR.apply(this,arguments)}function fR(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),o=[];for(let s=0;s<r;s++){const a=i.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(gge(i,s,l,t));o.push(c)}return o}finally{i.close(),i.delete()}}function gge(n,e,t,i){const r=n.getImageWidth(e,t),o=n.getImageHeight(e,t),s=n.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=s5(i,s),d=n.getImageTranscodedSizeInBytes(e,t,l),h=new Uint8Array(d);if(!n.transcodeImage(h,e,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:o,data:h,compressed:a,format:c,hasAlpha:s}}function o5(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),o=[];for(let s=0;s<r;s++){o.push(_ge(i,s,t));break}return[o]}finally{i.close(),i.delete()}}function _ge(n,e,t){const{alphaFlag:i,height:r,width:o}=n.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=s5(t,i),l=n.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(l);if(!n.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:r,data:d,compressed:s,hasAlpha:i,format:a}}function s5(n,e){let t=n&&n.basis&&n.basis.format;return"auto"===t&&(t=a5()),"object"==typeof t&&(t=e?t.alpha:t.noAlpha),t=t.toLowerCase(),pge[t]}function a5(){const n=function lge(n){if(!mE){n=n||function dge(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,mE=new Set;for(const e of cge)for(const t in J6)n&&n.getExtension("".concat(e).concat(t))&&mE.add(J6[t])}return mE}();return n.has("astc")?"astc-4x4":n.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:n.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:n.has("etc1")?"etc1":n.has("etc2")?"etc2":"rgb565"}const bge={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function mge(n,e){return hR.apply(this,arguments)}};function Df(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const yE=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),c5=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:vge}=(c5&&parseFloat(c5[1]),globalThis),pR=typeof Image<"u",mR=typeof ImageBitmap<"u",gR=!!yE||!!vge;function l5(n){const e=function u5(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const Ege=/^data:image\/svg\+xml/,Age=/\.svg((\?|#).*)?$/;function _R(n){return n&&(Ege.test(n)||Age.test(n))}function h5(n,e){if(_R(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function f5(n,e,t){return bR.apply(this,arguments)}function bR(){return bR=Ut(function*(n,e,t){const i=function Sge(n,e){if(_R(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return h5(n,e)}(n,t),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return yield function Cge(n,e){return yR.apply(this,arguments)}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}),bR.apply(this,arguments)}function yR(){return yR=Ut(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=o=>r(new Error("Could not load image ".concat(n,": ").concat(o)))}catch(o){r(o)}})}),yR.apply(this,arguments)}const Mge={};let p5=!0;function vR(){return vR=Ut(function*(n,e,t){let i;i=_R(t)?yield f5(n,e,t):h5(n,t);const r=e&&e.imagebitmap;return yield function Ige(n){return xR.apply(this,arguments)}(i,r)}),vR.apply(this,arguments)}function xR(){return xR=Ut(function*(n,e=null){if((function Dge(n){for(const e in n||Mge)return!1;return!0}(e)||!p5)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),p5=!1}return yield createImageBitmap(n)}),xR.apply(this,arguments)}const Nl=!1,sy=!0;function wR(n){const e=ay(n);return function Rge(n){const e=ay(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Nl)?{mimeType:"image/png",width:e.getUint32(16,Nl),height:e.getUint32(20,Nl)}:null}(e)||function Pge(n){const e=ay(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Nl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Nge(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,Nl);if(r.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Nl),width:e.getUint16(o+7,Nl)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,Nl)}return null}(e)||function kge(n){const e=ay(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Nl)?{mimeType:"image/gif",width:e.getUint16(6,sy),height:e.getUint16(8,sy)}:null}(e)||function Oge(n){const e=ay(n);return e.byteLength>=14&&16973===e.getUint16(0,Nl)&&e.getUint32(2,sy)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,sy),height:e.getUint32(22,sy)}:null}(e)}function ay(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function ER(){return ER=Ut(function*(n,e){const{mimeType:t}=wR(n)||{},i=globalThis._parseImageNode;return Df(i),yield i(n,t)}),ER.apply(this,arguments)}function AR(){return AR=Ut(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:o}=t||{},s=function Bge(n){switch(n){case"auto":case"data":return function wge(){if(mR)return"imagebitmap";if(pR)return"image";if(gR)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function xge(n){switch(n){case"auto":return mR||pR||gR;case"imagebitmap":return mR;case"image":return pR;case"data":return gR;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(s){case"imagebitmap":a=yield function Tge(n,e,t){return vR.apply(this,arguments)}(n,e,o);break;case"image":a=yield f5(n,e,o);break;case"data":a=yield function Fge(n,e){return ER.apply(this,arguments)}(n,e);break;default:Df(!1)}return"data"===r&&(a=function d5(n){switch(l5(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),AR.apply(this,arguments)}const jge={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function Lge(n,e,t){return AR.apply(this,arguments)},tests:[n=>!!wR(new DataView(n))],options:{image:{type:"auto",decode:!0}}};function m5(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(i.getUint8(e+o));return r}function g5(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function Sa(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function _5(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return i.substr(0,i.lastIndexOf("/")+1)+n}function cy(n,e){return Df(n>=0),Df(e>0),n+(e-1)&~(e-1)}function zge(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+cy(i.byteLength,4)}const y5=["SCALAR","VEC2","VEC3","VEC4"],Hge=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Gge=new Map(Hge),Wge={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$ge={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Yge={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function v5(n){return y5[n-1]||y5[0]}function x5(n){const e=Gge.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function w5(n,e){const t=Yge[n.componentType],i=Wge[n.type],o=n.count*i,s=n.count*i*$ge[n.componentType];return Sa(s>=0&&s<=e.byteLength),{ArrayType:t,length:o,byteLength:s}}const Xge={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class Ya{constructor(e){Ce(this,"gltf",void 0),Ce(this,"sourceBuffers",void 0),Ce(this,"byteLength",void 0),this.gltf=e||{json:{...Xge},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Sa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:o,length:s}=w5(e,t);return new o(r,t.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return Sa(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Sa(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:o}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=wR(e),r=t||i?.mimeType,s={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Sa(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=cy(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:v5(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const o={size:t.size,componentType:x5(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(o,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),o=new Uint8Array(r);let s=0;for(const a of this.sourceBuffers||[])s=zge(a,o,s);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(r.value,r);t[o]=s}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const o of r)i.min.push(o),i.max.push(o);for(let o=t;o<e.length;o+=t)for(let s=0;s<t;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}}const Kge="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Jge="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Zge=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Qge=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),E5={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},e_e={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function TR(){return TR=Ut(function*(n,e,t,i,r,o="NONE"){const s=yield function vE(){return DR.apply(this,arguments)}();!function xE(n,e,t,i,r,o,s){const a=n.exports.sbrk,c=i+3&-4,l=a(c*r),d=a(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,d);const f=e(l,i,r,d,o.length);if(0===f&&s&&s(l,c,r),t.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(s,s.exports[e_e[r]],n,e,t,i,s.exports[E5[o||"NONE"]])}),TR.apply(this,arguments)}let IR;function DR(){return DR=Ut(function*(){return IR||(IR=function n_e(){return RR.apply(this,arguments)}()),IR}),DR.apply(this,arguments)}function RR(){return RR=Ut(function*(){let n=Kge;WebAssembly.validate(Zge)&&(n=Jge,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function i_e(n){const e=new Uint8Array(n.length);for(let i=0;i<n.length;++i){const r=n.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let t=0;for(let i=0;i<n.length;++i)e[t++]=e[i]<60?Qge[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,t)}(n),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),RR.apply(this,arguments)}const kR="EXT_meshopt_compression",r_e=kR;function o_e(n,e){return OR.apply(this,arguments)}function OR(){return OR=Ut(function*(n,e){var t;const i=new Ya(n);if(null==e||null===(t=e.gltf)||void 0===t||!t.decompressMeshes)return;const r=[];for(const o of n.json.bufferViews||[])r.push(s_e(i,o));yield Promise.all(r),i.removeExtension(kR)}),OR.apply(this,arguments)}function s_e(n,e){return PR.apply(this,arguments)}function PR(){return PR=Ut(function*(n,e){const t=n.getObjectExtension(e,kR);if(t){const{byteOffset:i=0,byteLength:r=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=t,d=n.gltf.buffers[l],h=new Uint8Array(d.arrayBuffer,d.byteOffset+i,r),f=new Uint8Array(n.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function t_e(n,e,t,i,r){return TR.apply(this,arguments)}(f,s,o,h,a,c),f}return null}),PR.apply(this,arguments)}const a_e=["image/png","image/jpeg","image/gif"],NR={};const gg="EXT_texture_webp",u_e=gg;function h_e(n,e){const t=new Ya(n);if(!function c_e(n){return void 0===NR[n]&&(NR[n]=function l_e(n){switch(n){case"image/webp":return function d_e(){if(!yE)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return yE;default:if(!yE){const{_parseImageNode:e}=globalThis;return!!e&&a_e.includes(n)}return!0}}(n)),NR[n]}("image/webp")){if(t.getRequiredExtensions().includes(gg))throw new Error("gltf: Required extension ".concat(gg," not supported by browser"));return}const{json:i}=t;for(const r of i.textures||[]){const o=t.getObjectExtension(r,gg);o&&(r.source=o.source),t.removeObjectExtension(r,gg)}t.removeExtension(gg)}const wE="KHR_texture_basisu",f_e=wE;function p_e(n,e){const t=new Ya(n),{json:i}=t;for(const r of i.textures||[]){const o=t.getObjectExtension(r,wE);o&&(r.source=o.source),t.removeObjectExtension(r,wE)}t.removeExtension(wE)}const S5={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class EE{constructor(e,t,i=!1,r=new Map){Ce(this,"name",void 0),Ce(this,"type",void 0),Ce(this,"nullable",void 0),Ce(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new EE(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Xi,C5,M5,T5,I5,D5,R5,k5,O5;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(Xi||(Xi={}));class Rf{static isNull(e){return e&&e.typeId===Xi.Null}static isInt(e){return e&&e.typeId===Xi.Int}static isFloat(e){return e&&e.typeId===Xi.Float}static isBinary(e){return e&&e.typeId===Xi.Binary}static isUtf8(e){return e&&e.typeId===Xi.Utf8}static isBool(e){return e&&e.typeId===Xi.Bool}static isDecimal(e){return e&&e.typeId===Xi.Decimal}static isDate(e){return e&&e.typeId===Xi.Date}static isTime(e){return e&&e.typeId===Xi.Time}static isTimestamp(e){return e&&e.typeId===Xi.Timestamp}static isInterval(e){return e&&e.typeId===Xi.Interval}static isList(e){return e&&e.typeId===Xi.List}static isStruct(e){return e&&e.typeId===Xi.Struct}static isUnion(e){return e&&e.typeId===Xi.Union}static isFixedSizeBinary(e){return e&&e.typeId===Xi.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Xi.FixedSizeList}static isMap(e){return e&&e.typeId===Xi.Map}static isDictionary(e){return e&&e.typeId===Xi.Dictionary}get typeId(){return Xi.NONE}compareTo(e){return this===e}}Symbol,Symbol,C5=Symbol.toStringTag;class _g extends Rf{constructor(e,t){super(),Ce(this,"isSigned",void 0),Ce(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return Xi.Int}get[C5](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class g_e extends _g{constructor(){super(!0,8)}}class __e extends _g{constructor(){super(!0,16)}}class b_e extends _g{constructor(){super(!0,32)}}class y_e extends _g{constructor(){super(!1,8)}}class v_e extends _g{constructor(){super(!1,16)}}class x_e extends _g{constructor(){super(!1,32)}}M5=Symbol.toStringTag;class P5 extends Rf{constructor(e){super(),Ce(this,"precision",void 0),this.precision=e}get typeId(){return Xi.Float}get[M5](){return"Float"}toString(){return"Float".concat(this.precision)}}class w_e extends P5{constructor(){super(32)}}class E_e extends P5{constructor(){super(64)}}Symbol,Symbol,T5=Symbol.toStringTag,I5=Symbol.toStringTag,D5=Symbol.toStringTag,R5=Symbol.toStringTag,k5=Symbol.toStringTag;class A_e extends Rf{constructor(e,t){super(),Ce(this,"listSize",void 0),Ce(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return Xi.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[k5](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}O5=Symbol.toStringTag;class bg{constructor(e,t){Ce(this,"fields",void 0),Ce(this,"metadata",void 0),function T_e(n,e){if(!n)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function I_e(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new bg(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new bg(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof bg){const s=e;t=s.fields,i=F5(F5(new Map,this.metadata),s.metadata)}else t=e;const r=Object.create(null);for(const s of this.fields)r[s.name]=s;for(const s of t)r[s.name]=s;const o=Object.values(r);return new bg(o,i)}}function F5(n,e){return new Map([...n||new Map,...e||new Map])}function L5(n,e,t){return function N5(n,e,t){const i=function S_e(n){switch(n.constructor){case Int8Array:return new g_e;case Uint8Array:return new y_e;case Int16Array:return new __e;case Uint16Array:return new v_e;case Int32Array:return new b_e;case Uint32Array:return new x_e;case Float32Array:return new w_e;case Float64Array:return new E_e;default:throw new Error("array type not supported")}}(e.value),r=t||function M_e(n){const e=new Map;return"byteOffset"in n&&e.set("byteOffset",n.byteOffset.toString(10)),"byteStride"in n&&e.set("byteStride",n.byteStride.toString(10)),"normalized"in n&&e.set("normalized",n.normalized.toString()),e}(e);return new EE(n,new A_e(e.size,new EE("value",i)),!1,r)}(n,e,t?B5(t.metadata):void 0)}function B5(n){const e=new Map;for(const t in n)e.set("".concat(t,".string"),JSON.stringify(n[t]));return e}const j5={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},k_e={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class P_e{constructor(e){Ce(this,"draco",void 0),Ce(this,"decoder",void 0),Ce(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),o=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(r){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){const f="DRACO decompression failed: ".concat(s.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(o,r,t),c=this._getMeshData(o,a,t),l=function m_e(n){let e=1/0,t=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=n.POSITION?n.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const d=a[l],h=a[l+1],f=a[l+2];e=d<e?d:e,t=h<t?h:t,i=f<i?f:i,r=d>r?d:r,o=h>o?h:o,s=f>s?f:s}return[[e,t,i],[r,o,s]]}(c.attributes),d=function D_e(n,e,t){const i=B5(e.metadata),r=[],o=function R_e(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const s in n){const c=L5(s,n[s],o[s]);r.push(c)}if(t){const s=L5("indices",t);r.push(s)}return new bg(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:o}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const o=this.decoder.GetAttribute(e,r),s=this._getAttributeMetadata(e,r);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:r,metadata:s};const a=this._getQuantizationTransform(o,t);a&&(i[o.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(o,t);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const o of Object.values(e.attributes)){const s=this._deduceAttributeName(o,i);o.name=s;const{value:a,size:c}=this._getAttributeValues(t,o);r[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,o=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function L_e(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=k_e[t.data_type],r=t.num_components,s=e.num_points()*r,a=s*i.BYTES_PER_ELEMENT,c=function N_e(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let l;const d=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,d),l=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:l,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[s,a]of Object.entries(t.extraAttributes||{}))if(a===i)return s;const r=e.attribute_type;for(const s in j5)if(this.draco[s]===r)return j5[s];const o=t.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const o=this.metadataQuerier.GetEntryName(e,r);t[o]=this._getDracoMetadataField(e,o)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function F_e(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const o of r)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(r)){const s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}}const AE="1.4.1",B_e="https://www.gstatic.com/draco/versioned/decoders/".concat(AE,"/draco_decoder.js"),j_e="https://www.gstatic.com/draco/versioned/decoders/".concat(AE,"/draco_wasm_wrapper.js"),U_e="https://www.gstatic.com/draco/versioned/decoders/".concat(AE,"/draco_decoder.wasm");let ly;function jR(){return jR=Ut(function*(n){const e=n.modules||{};return ly=e.draco3d?ly||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):ly||function H_e(n){return VR.apply(this,arguments)}(n),yield ly}),jR.apply(this,arguments)}function VR(){return VR=Ut(function*(n){let e,t;return"js"===(n.draco&&n.draco.decoderType)?e=yield If(B_e,"draco",n):[e,t]=yield Promise.all([yield If(j_e,"draco",n),yield If(U_e,"draco",n)]),e=e||globalThis.DracoDecoderModule,yield function G_e(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n({...t,onModuleLoaded:r=>i({draco:r})})})}(e,t)}),VR.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(AE,"/javascript/draco_encoder.js");const HR={...S5,parse:function $_e(n,e){return GR.apply(this,arguments)}};function GR(){return GR=Ut(function*(n,e){const{draco:t}=yield function z_e(n){return jR.apply(this,arguments)}(e),i=new P_e(t);try{return i.parseSync(n,e?.draco)}finally{i.destroy()}}),GR.apply(this,arguments)}function U5(n){const{buffer:e,size:t,count:i}=function X_e(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function q_e(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:v5(t),componentType:x5(e)}}const kf="KHR_draco_mesh_compression",K_e=kf;function J_e(n,e,t){const i=new Ya(n);for(const r of V5(i))i.getObjectExtension(r,kf)}function Z_e(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=Ut(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new Ya(n),o=[];for(const s of V5(r))r.getObjectExtension(s,kf)&&o.push(ebe(r,s,e,t));yield Promise.all(o),r.removeExtension(kf)}),WR.apply(this,arguments)}function Q_e(n,e={}){const t=new Ya(n);for(const i of t.json.meshes||[])tbe(i),t.addRequiredExtension(kf)}function ebe(n,e,t,i){return $R.apply(this,arguments)}function $R(){return $R=Ut(function*(n,e,t,i){const r=n.getObjectExtension(e,kf);if(!r)return;const o=n.getTypedArrayForBufferView(r.bufferView),s=g5(o.buffer,o.byteOffset),{parse:a}=i,c={...t};delete c["3d-tiles"];const l=yield a(s,HR,c,i),d=function Y_e(n){const e={};for(const t in n)if("indices"!==t){const r=U5(n[t]);e[t]=r}return e}(l.attributes);for(const[h,f]of Object.entries(d))if(h in e.attributes){const y=n.getAccessor(e.attributes[h]);null!=y&&y.min&&null!=y&&y.max&&(f.min=y.min,f.max=y.max)}e.attributes=d,l.indices&&(e.indices=U5(l.indices)),function nbe(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),$R.apply(this,arguments)}function tbe(n,e,t=4,i,r){var o;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const s=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(o=r.parseSync)||void 0===o?void 0:o.call(r,{attributes:n}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(s);return{primitives:[{attributes:c,mode:t,extensions:{[kf]:{bufferView:l,attributes:c}}}]}}function*V5(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}const Of="KHR_lights_punctual",ibe=Of;function rbe(n){return YR.apply(this,arguments)}function YR(){return YR=Ut(function*(n){const e=new Ya(n),{json:t}=e,i=e.getExtension(Of);i&&(e.json.lights=i.lights,e.removeExtension(Of));for(const r of t.nodes||[]){const o=e.getObjectExtension(r,Of);o&&(r.light=o.light),e.removeObjectExtension(r,Of)}}),YR.apply(this,arguments)}function obe(n){return XR.apply(this,arguments)}function XR(){return XR=Ut(function*(n){const e=new Ya(n),{json:t}=e;if(t.lights){const i=e.addExtension(Of);Sa(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,Of,i);delete e.json.lights}}),XR.apply(this,arguments)}const uy="KHR_materials_unlit",sbe=uy;function abe(n){return qR.apply(this,arguments)}function qR(){return qR=Ut(function*(n){const e=new Ya(n),{json:t}=e;e.removeExtension(uy);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,uy)}),qR.apply(this,arguments)}function cbe(n){const e=new Ya(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,uy,{}),e.addExtension(uy))}const hy="KHR_techniques_webgl",lbe=hy;function dbe(n){return KR.apply(this,arguments)}function KR(){return KR=Ut(function*(n){const e=new Ya(n),{json:t}=e,i=e.getExtension(hy);if(i){const r=function hbe(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,o=new TextDecoder;return i.forEach(s=>{if(!Number.isFinite(s.bufferView))throw new Error("KHR_techniques_webgl: no shader code");s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView))}),t.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),r.forEach(s=>{s.program=t[s.program]}),r}(i,e);for(const o of t.materials||[]){const s=e.getObjectExtension(o,hy);s&&(o.technique=Object.assign({},s,r[s.technique]),o.technique.values=fbe(o.technique,e)),e.removeObjectExtension(o,hy)}e.removeExtension(hy)}}),KR.apply(this,arguments)}function ube(n,e){return JR.apply(this,arguments)}function JR(){return(JR=Ut(function*(n,e){})).apply(this,arguments)}function fbe(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const z5=[S,b,O,C,N,_,v];function ZR(){return ZR=Ut(function*(n,e={},t){const i=z5.filter(o=>H5(o.name,e));for(const o of i){var r;yield null===(r=o.decode)||void 0===r?void 0:r.call(o,n,e,t)}}),ZR.apply(this,arguments)}function H5(n,e){var t;const i=(null==e||null===(t=e.gltf)||void 0===t?void 0:t.excludeExtensions)||{};return!(n in i&&!i[n])}const QR="KHR_binary_glTF",G5={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},_be={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class bbe{constructor(){Ce(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),Ce(this,"json",void 0)}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function gbe(n){const e=new Ya(n),{json:t}=e;for(const i of t.images||[]){const r=e.getObjectExtension(i,QR);r&&Object.assign(i,r),e.removeObjectExtension(i,QR)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(QR)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in G5)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const o=i[r];o.id=o.id||r;const s=e[t].length;e[t].push(o),this.idToIndexMap[t][r]=s}}}_convertObjectIdsToArrayIndices(e){for(const t in G5)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:o}=t;for(const s in i)i[s]=this._convertIdToIndex(i[s],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),o&&(t.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const i of e[t])for(const r in i){const s=this._convertIdToIndex(i[r],r);i[r]=s}}_convertIdToIndex(e,t){const i=_be[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const o of e.materials){var t,i,r;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(t=o.values)||void 0===t?void 0:t.tex)||(null===(i=o.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=o.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===s);-1!==a&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}}const vbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xbe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},wbe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},Ebe={10240:9729,10241:9986,10242:10497,10243:10497};class Cbe{constructor(){Ce(this,"baseUri",""),Ce(this,"json",{}),Ce(this,"buffers",[]),Ce(this,"images",[])}postProcess(e,t={}){const{json:i,buffers:r=[],images:o=[],baseUri:s=""}=e;return Sa(i),this.baseUri=s,this.json=i,this.buffers=r,this.images=o,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),i}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const o=this.getMesh(r);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const o in r)i.attributes[o]=this.getAccessor(r[o]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function Abe(n){return xbe[n]}(e.componentType),e.components=function Sbe(n){return vbe[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:o}=w5(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,t,i,r,o){const s=new Uint8Array(o*r);for(let a=0;a<o;a++){const c=t+a*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return s.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):Ebe,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return wbe[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){const i=e.buffer,r={id:"bufferView-".concat(t),...e,buffer:this.buffers[i]};let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),r}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e}}const W5=1735152710,ek=12,SE=8,Tbe=1313821514,Ibe=5130562,Dbe=0,Rbe=1,kbe=0,yg=!0;function tk(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),s=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(s),cy(i,4)}function nk(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),cy(i,4)}function ik(){return ik=Ut(function*(n,e,t=0,i,r){var o,s,a,c;(function Ube(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function Pbe(n,e=0,t={}){const i=new DataView(n),{magic:r=W5}=t,o=i.getUint32(e,!1);return o===r||o===W5}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function Vge(n){try{return JSON.parse(n)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function Uge(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?m5(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?m5(n,0,e):""}(n),'"'))}}(e);else if(e instanceof ArrayBuffer){const s={};t=function Nbe(n,e,t=0,i={}){const r=new DataView(e),o=function Obe(n,e=0){return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}(r,t+0),s=r.getUint32(t+4,yg),a=r.getUint32(t+8,yg);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),t+=ek,n.version){case 1:return function Fbe(n,e,t){Df(n.header.byteLength>ek+SE);const i=e.getUint32(t+0,yg),r=e.getUint32(t+4,yg);return t+=SE,Df(r===kbe),tk(n,e,t,i),(t+=i)+nk(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function Lbe(n,e,t,i){return Df(n.header.byteLength>ek+SE),function Bbe(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,yg),o=e.getUint32(t+4,yg);switch(t+=SE,o){case Tbe:tk(n,e,t,r);break;case Ibe:nk(n,e,t,r);break;case Dbe:i.strict||tk(n,e,t,r);break;case Rbe:i.strict||nk(n,e,t,r)}t+=cy(r,4)}}(n,e,t,i),t+n.header.byteLength}(n,r,t,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(s,e,t,i.glb),Sa("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),n._glb=s,n.json=s.json}else Sa(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:s}=n._glb;n.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})})(n,e,t,i),function ybe(n,e={}){(new bbe).normalize(n,e)}(n,{normalize:null==i||null===(o=i.gltf)||void 0===o?void 0:o.normalize}),function pbe(n,e={},t){const i=z5.filter(o=>H5(o.name,e));for(const o of i){var r;null===(r=o.preprocess)||void 0===r||r.call(o,n,e,t)}}(n,i,r);const l=[];if(null!=i&&null!==(s=i.gltf)&&void 0!==s&&s.loadBuffers&&n.json.buffers&&(yield function Vbe(n,e,t){return rk.apply(this,arguments)}(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function zbe(n,e,t){return ok.apply(this,arguments)}(n,i,r);l.push(h)}const d=function mbe(n){return ZR.apply(this,arguments)}(n,i,r);return l.push(d),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function Mbe(n,e){return(new Cbe).postProcess(n,e)}(n,i):n}),ik.apply(this,arguments)}function rk(){return rk=Ut(function*(n,e,t){const i=n.json.buffers||[];for(let s=0;s<i.length;++s){const a=i[s];if(a.uri){var r,o;const{fetch:c}=t;Sa(c);const l=_5(a.uri,e),d=yield null==t||null===(r=t.fetch)||void 0===r?void 0:r.call(t,l),h=yield null==d||null===(o=d.arrayBuffer)||void 0===o?void 0:o.call(d);n.buffers[s]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===n.buffers[s]&&(n.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),rk.apply(this,arguments)}function ok(){return ok=Ut(function*(n,e,t){const i=function Hbe(n){const e=new Set,t=n.json.textures||[];for(const i of t)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(n),r=n.json.images||[],o=[];for(const s of i)o.push(Gbe(n,r[s],s,e,t));return yield Promise.all(o)}),ok.apply(this,arguments)}function Gbe(n,e,t,i,r){return sk.apply(this,arguments)}function sk(){return sk=Ut(function*(n,e,t,i,r){const{fetch:o,parse:s}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=_5(e.uri,i);a=yield(yield o(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function b5(n,e,t){const i=n.bufferViews[t];Sa(i);const o=e[i.buffer];return Sa(o),new Uint8Array(o.arrayBuffer,(i.byteOffset||0)+o.byteOffset,i.byteLength)}(n.json,n.buffers,e.bufferView);a=g5(l.buffer,l.byteOffset,l.byteLength)}Sa(a,"glTF image has no data");let c=yield s(a,[jge,bge],{mimeType:e.mimeType,basis:i.basis||{format:a5()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),n.images=n.images||[],n.images[t]=c}),sk.apply(this,arguments)}const vg={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function Wbe(n){return ak.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function ak(){return ak=Ut(function*(n,e={},t){(e={...vg.options,...e}).gltf={...vg.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function jbe(n,e){return ik.apply(this,arguments)}({},n,i,e,t)}),ak.apply(this,arguments)}function ck(){return ck=Ut(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function Ybe(n){return lk.apply(this,arguments)}(()=>e.some(t=>!t.loaded))}),ck.apply(this,arguments)}function lk(){return lk=Ut(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))}),lk.apply(this,arguments)}const $5=[255,255,255,255],Kbe={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:$5},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[vg]};class dk extends Cf{constructor(...e){super(...e),Ce(this,"state",void 0)}getShaders(){const e=[lE,dE];return"pbr"===this.props._lighting&&e.push(B6),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:$5,transition:!0},instanceModelMatrix:N6})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;t.scenegraph!==i.scenegraph?this._updateScenegraph():t._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let i=null;if(e.scenegraph instanceof pg)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function qme(n,e,t){const i=new Xme(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(t,a,this._getModelOptions());i={gltf:a,...c},function $be(n){return ck.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(yi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:t},o=e.getScene(i,r),s=e.getAnimator(i,r);o instanceof pg?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&yi.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,t)})}}_applyAnimationsProp(e,t,i){if(!e||!t||!i)return;const r=t.getAnimations();Object.keys(i).sort().forEach(o=>{const s=i[o];if("*"===o)r.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){const a=Number(o);a>=0&&a<r.length?Object.assign(r[a],s):yi.warn("animation ".concat(o," not found"))()}else{const a=r.find(({name:c})=>c===o);a?Object.assign(a,s):yi.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof pg&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!fi(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(t=>{this._setModelAttributes(t.model,e)})}draw({moduleParameters:e=null,parameters:t={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(d),h.updateModuleSettings(e),h.draw({parameters:t,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:F6(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}Ce(dk,"defaultProps",Kbe),Ce(dk,"layerName","ScenegraphLayer");class Jbe extends Ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("sphere-geometry")}=e,{indices:i,attributes:r}=function Zbe(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const s=Math.PI-0,l=2*Math.PI-0,d=(e+1)*(t+1);if("number"==typeof i){const H=i;i=($,Y,pe,De,Ve)=>H}const h=new Float32Array(3*d),f=new Float32Array(3*d),m=new Float32Array(2*d),E=new(d>65535?Uint32Array:Uint16Array)(e*t*6);for(let H=0;H<=e;H++)for(let $=0;$<=t;$++){const Y=$/t,pe=H/e,De=$+H*(t+1),Ve=2*De,nt=3*De,Ze=l*Y,dt=s*pe,mt=Math.sin(Ze),_t=Math.cos(Ze),xt=Math.sin(dt),pt=_t*xt,Tt=Math.cos(dt),kt=mt*xt,fn=i(pt,Tt,kt,Y,pe);h[nt+0]=fn*pt,h[nt+1]=fn*Tt,h[nt+2]=fn*kt,f[nt+0]=pt,f[nt+1]=Tt,f[nt+2]=kt,m[Ve+0]=Y,m[Ve+1]=1-pe}const M=t+1;for(let H=0;H<t;H++)for(let $=0;$<e;$++){const Y=6*(H*e+$);E[Y+0]=$*M+H,E[Y+1]=$*M+H+1,E[Y+2]=($+1)*M+H,E[Y+3]=($+1)*M+H,E[Y+4]=$*M+H+1,E[Y+5]=($+1)*M+H+1}return{indices:{size:1,value:E},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:m}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}const Qbe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class Y5 extends Ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("truncated-code-geometry")}=e,{indices:i,attributes:r}=function e0e(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=n,l=(a?2:0)+(c?2:0),d=(r+1)*(o+1+l),h=Math.atan2(e-t,i),f=Math.sin,m=Math.cos,y=Math.PI,E=m(h),M=f(h),H=a?-2:0,$=o+(c?2:0),Y=r+1,pe=new Uint16Array(r*(o+l)*6),De=Qbe[s],Ve=new Float32Array(3*d),nt=new Float32Array(3*d),Ze=new Float32Array(2*d);let dt=0,mt=0;for(let _t=H;_t<=$;_t++){let pt,xt=_t/o,ut=i*xt;_t<0?(ut=0,xt=1,pt=e):_t>o?(ut=i,xt=1,pt=t):pt=e+_t/o*(t-e),(-2===_t||_t===o+2)&&(pt=0,xt=0),ut-=i/2;for(let Tt=0;Tt<Y;Tt++){const kt=f(Tt*y*2/r),fn=m(Tt*y*2/r);Ve[dt+De[0]]=kt*pt,Ve[dt+De[1]]=ut,Ve[dt+De[2]]=fn*pt,nt[dt+De[0]]=_t<0||_t>o?0:kt*E,nt[dt+De[1]]=_t<0?-1:_t>o?1:M,nt[dt+De[2]]=_t<0||_t>o?0:fn*E,Ze[mt+0]=Tt/r,Ze[mt+1]=xt,mt+=2,dt+=3}}for(let _t=0;_t<o+l;_t++)for(let xt=0;xt<r;xt++){const ut=6*(_t*r+xt);pe[ut+0]=Y*(_t+0)+0+xt,pe[ut+1]=Y*(_t+0)+1+xt,pe[ut+2]=Y*(_t+1)+1+xt,pe[ut+3]=Y*(_t+0)+0+xt,pe[ut+4]=Y*(_t+1)+1+xt,pe[ut+5]=Y*(_t+1)+0+xt}return{indices:pe,attributes:{POSITION:{size:3,value:Ve},NORMAL:{size:3,value:nt},TEXCOORD_0:{size:2,value:Ze}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}class t0e extends Y5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:t,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class n0e extends Y5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("cylinder-geometry"),radius:i=1}=e;super({...e,id:t,bottomRadius:i,topRadius:i})}}const i0e=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),r0e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),o0e=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),s0e=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),a0e={POSITION:{size:3,value:new Float32Array(r0e)},NORMAL:{size:3,value:new Float32Array(o0e)},TEXCOORD_0:{size:2,value:new Float32Array(s0e)}};class c0e extends Ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=na("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(i0e)},attributes:{...a0e,...e.attributes}})}}class Pc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){void 0===e&&(e=new we);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){void 0===t&&(t=new we);const i=this.elements,r=e.x,o=e.y,s=e.z;return t.x=i[0]*r+i[1]*o+i[2]*s,t.y=i[3]*r+i[4]*o+i[5]*s,t.z=i[6]*r+i[7]*o+i[8]*s,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){void 0===t&&(t=new Pc);const i=this.elements,r=e.elements,o=t.elements,s=i[0],a=i[1],c=i[2],l=i[3],d=i[4],h=i[5],f=i[6],m=i[7],y=i[8],E=r[0],M=r[1],H=r[2],$=r[3],Y=r[4],pe=r[5],De=r[6],Ve=r[7],nt=r[8];return o[0]=s*E+a*$+c*De,o[1]=s*M+a*Y+c*Ve,o[2]=s*H+a*pe+c*nt,o[3]=l*E+d*$+h*De,o[4]=l*M+d*Y+h*Ve,o[5]=l*H+d*pe+h*nt,o[6]=f*E+m*$+y*De,o[7]=f*M+m*Y+y*Ve,o[8]=f*H+m*pe+y*nt,t}scale(e,t){void 0===t&&(t=new Pc);const i=this.elements,r=t.elements;for(let o=0;3!==o;o++)r[3*o+0]=e.x*i[3*o+0],r[3*o+1]=e.y*i[3*o+1],r[3*o+2]=e.z*i[3*o+2];return t}solve(e,t){void 0===t&&(t=new we);const o=[];let s,a;for(s=0;s<12;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+4*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3;const l=c;let d,f;do{if(s=l-c,0===o[s+4*s])for(a=s+1;a<l;a++)if(0!==o[s+4*a]){d=4;do{f=4-d,o[f+4*s]+=o[f+4*a]}while(--d);break}if(0!==o[s+4*s])for(a=s+1;a<l;a++){const m=o[s+4*a]/o[s+4*s];d=4;do{f=4-d,o[f+4*a]=f<=s?0:o[f+4*a]-o[f+4*s]*m}while(--d)}}while(--c);if(t.z=o[11]/o[10],t.y=(o[7]-o[6]*t.z)/o[5],t.x=(o[3]-o[2]*t.z-o[1]*t.y)/o[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Pc);const r=l0e;let o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)r[o+6*s]=this.elements[o+3*s];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(o=c-a,0===r[o+6*o])for(s=o+1;s<c;s++)if(0!==r[o+6*s]){l=6;do{h=6-l,r[h+6*o]+=r[h+6*s]}while(--l);break}if(0!==r[o+6*o])for(s=o+1;s<c;s++){const f=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=h<=o?0:r[h+6*s]-r[h+6*o]*f}while(--l)}}while(--a);o=2;do{s=o-1;do{const f=r[o+6*s]/r[o+6*o];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]-r[h+6*o]*f}while(--l)}while(s--)}while(--o);o=2;do{const f=1/r[o+6*o];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]*f}while(--l)}while(o--);o=2;do{s=2;do{if(h=r[3+s+6*o],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,h)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,o=e.w,s=t+t,a=i+i,c=r+r,l=t*s,d=t*a,h=t*c,f=i*a,m=i*c,y=r*c,E=o*s,M=o*a,H=o*c,$=this.elements;return $[0]=1-(f+y),$[1]=d-H,$[2]=h+M,$[3]=d+H,$[4]=1-(l+y),$[5]=m-E,$[6]=h-M,$[7]=m+E,$[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new Pc);const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const l0e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class we{constructor(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){void 0===t&&(t=new we);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return t.x=a*o-c*r,t.y=c*i-s*o,t.z=s*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new we(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new we(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new Pc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const o=1/r;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new we);const t=this.x,i=this.y,r=this.z;let o=Math.sqrt(t*t+i*i+r*r);return o>0?(o=1/o,e.x=t*o,e.y=i*o,e.z=r*o):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-t)*(o-t)+(s-i)*(s-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z;return(o-t)*(o-t)+(s-i)*(s-i)+(a-r)*(a-r)}scale(e,t){void 0===t&&(t=new we);const r=this.y,o=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*o,t}vmul(e,t){return void 0===t&&(t=new we),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return void 0===i&&(i=new we),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new we),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=d0e,o=1/i;r.set(this.x*o,this.y*o,this.z*o);const s=u0e;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,o=this.y,s=this.z;i.x=r+(e.x-r)*t,i.y=o+(e.y-o)*t,i.z=s+(e.z-s)*t}almostEquals(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(X5),X5.almostEquals(e,t)}clone(){return new we(this.x,this.y,this.z)}}we.ZERO=new we(0,0,0),we.UNIT_X=new we(1,0,0),we.UNIT_Y=new we(0,1,0),we.UNIT_Z=new we(0,0,1);const d0e=new we,u0e=new we,X5=new we;class Zi{constructor(e){void 0===e&&(e={}),this.lowerBound=new we,this.upperBound=new we,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const o=this.lowerBound,s=this.upperBound,a=i;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,q5),l=q5),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return t&&(t.vadd(o,o),t.vadd(s,s)),r&&(o.x-=r,o.y-=r,o.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new Zi).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return(r.x<=i.x&&i.x<=o.x||t.x<=o.x&&o.x<=i.x)&&(r.y<=i.y&&i.y<=o.y||t.y<=o.y&&o.y<=i.y)&&(r.z<=i.z&&i.z<=o.z||t.z<=o.z&&o.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,o=e.upperBound;return t.x<=r.x&&i.x>=o.x&&t.y<=r.y&&i.y>=o.y&&t.z<=r.z&&i.z>=o.z}getCorners(e,t,i,r,o,s,a,c){const l=this.lowerBound,d=this.upperBound;e.copy(l),t.set(d.x,l.y,l.z),i.set(d.x,d.y,l.z),r.set(l.x,d.y,d.z),o.set(d.x,l.y,d.z),s.set(l.x,d.y,l.z),a.set(l.x,l.y,d.z),c.copy(d)}toLocalFrame(e,t){const i=K5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToLocal(m,m)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=K5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const m=i[f];e.pointToWorld(m,m)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,o=1/t.y,s=1/t.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*o,d=(this.upperBound.y-i.y)*o,h=(this.lowerBound.z-i.z)*s,f=(this.upperBound.z-i.z)*s,m=Math.max(Math.max(Math.min(a,c),Math.min(l,d)),Math.min(h,f)),y=Math.min(Math.min(Math.max(a,c),Math.max(l,d)),Math.max(h,f));return!(y<0||m>y)}}const q5=new we,K5=[new we,new we,new we,new we,new we,new we,new we,new we];class h0e{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}return this}}class Fr{constructor(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e){void 0===e&&(e=new we),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=f0e;e.tangents(i,p0e),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){void 0===t&&(t=new Fr);const i=this.x,r=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,d=e.w;return t.x=i*d+s*a+r*l-o*c,t.y=r*d+s*c+o*a-i*l,t.z=o*d+s*l+i*c-r*a,t.w=s*d-i*a-r*c-o*l,t}inverse(e){void 0===e&&(e=new Fr);const t=this.x,i=this.y,r=this.z,o=this.w;this.conjugate(e);const s=1/(t*t+i*i+r*r+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new Fr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){void 0===t&&(t=new we);const i=e.x,r=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;return t.x=d*l+m*-s+h*-c-f*-a,t.y=h*l+m*-a+f*-s-d*-c,t.z=f*l+m*-c+d*-a-h*-s,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){let i,r,o;void 0===t&&(t="YZX");const s=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==t)throw new Error(`Euler order ${t} not supported yet.`);{const d=s*a+c*l;if(d>.499&&(i=2*Math.atan2(s,l),r=Math.PI/2,o=0),d<-.499&&(i=-2*Math.atan2(s,l),r=-Math.PI/2,o=0),void 0===i){const h=s*s,m=c*c;i=Math.atan2(2*a*l-2*s*c,1-a*a*2-2*m),r=Math.asin(2*d),o=Math.atan2(2*s*l-2*a*c,1-2*h-2*m)}}e.y=i,e.z=r,e.x=o}setFromEuler(e,t,i,r){void 0===r&&(r="XYZ");const o=Math.cos(e/2),s=Math.cos(t/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(t/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"YXZ"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"ZXY"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a-c*l*d):"ZYX"===r?(this.x=c*s*a-o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a+c*l*d):"YZX"===r?(this.x=c*s*a+o*l*d,this.y=o*l*a+c*s*d,this.z=o*s*d-c*l*a,this.w=o*s*a-c*l*d):"XZY"===r&&(this.x=c*s*a-o*l*d,this.y=o*l*a-c*s*d,this.z=o*s*d+c*l*a,this.w=o*s*a+c*l*d),this}clone(){return new Fr(this.x,this.y,this.z,this.w)}slerp(e,t,i){void 0===i&&(i=new Fr);const r=this.x,o=this.y,s=this.z,a=this.w;let f,m,y,E,M,c=e.x,l=e.y,d=e.z,h=e.w;return m=r*c+o*l+s*d+a*h,m<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),y=Math.sin(f),E=Math.sin((1-t)*f)/y,M=Math.sin(t*f)/y):(E=1-t,M=t),i.x=E*r+M*c,i.y=E*o+M*l,i.z=E*s+M*d,i.w=E*a+M*h,i}integrate(e,t,i,r){void 0===r&&(r=new Fr);const o=e.x*i.x,s=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,d=this.z,h=this.w,f=.5*t;return r.x+=f*(o*h+s*d-a*l),r.y+=f*(s*h+a*c-o*d),r.z+=f*(a*h+o*l-s*c),r.w+=f*(-o*c-s*l-a*d),r}}const f0e=new we,p0e=new we,m0e={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let dn=(()=>{class n{constructor(t){void 0===t&&(t={}),this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,r,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return n.idCounter=0,n.types=m0e,n})();class Ci{constructor(e){void 0===e&&(e={}),this.position=new we,this.quaternion=new Fr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return Ci.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return Ci.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return void 0===t&&(t=new we),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r){return void 0===r&&(r=new we),i.vsub(e,r),t.conjugate(Z5),Z5.vmult(r,r),r}static pointToWorldFrame(e,t,i,r){return void 0===r&&(r=new we),t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i){return void 0===i&&(i=new we),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r){return void 0===r&&(r=new we),t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const Z5=new Fr;class Pf extends dn{constructor(e){void 0===e&&(e={});const{vertices:t=[],faces:i=[],normals:r=[],axes:o,boundingSphereRadius:s}=e;super({type:dn.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new we;for(let o=0;o!==e.length;o++){const s=e[o],a=s.length;for(let c=0;c!==a;c++){t[s[c]].vsub(t[s[(c+1)%a]],r),r.normalize();let d=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const t=this.faceNormals[e]||new we;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e];Pf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const o=new we,s=new we;t.vsub(e,s),i.vsub(t,o),o.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,o,s,a,c,l){const d=new we;let h=-1,f=-Number.MAX_VALUE;for(let y=0;y<i.faces.length;y++){d.copy(i.faceNormals[y]),o.vmult(d,d);const E=d.dot(s);E>f&&(f=E,h=y)}const m=[];for(let y=0;y<i.faces[h].length;y++){const E=i.vertices[i.faces[h][y]],M=new we;M.copy(E),o.vmult(M,M),r.vadd(M,M),m.push(M)}h>=0&&this.clipFaceAgainstHull(s,e,t,m,a,c,l)}findSeparatingAxis(e,t,i,r,o,s,a,c){const l=new we,d=new we,h=new we,f=new we,m=new we,y=new we;let E=Number.MAX_VALUE;const M=this;if(M.uniqueAxes)for(let H=0;H!==M.uniqueAxes.length;H++){i.vmult(M.uniqueAxes[H],l);const $=M.testSepAxis(l,e,t,i,r,o);if(!1===$)return!1;$<E&&(E=$,s.copy(l))}else{const H=a?a.length:M.faces.length;for(let $=0;$<H;$++){l.copy(M.faceNormals[a?a[$]:$]),i.vmult(l,l);const pe=M.testSepAxis(l,e,t,i,r,o);if(!1===pe)return!1;pe<E&&(E=pe,s.copy(l))}}if(e.uniqueAxes)for(let H=0;H!==e.uniqueAxes.length;H++){o.vmult(e.uniqueAxes[H],d);const $=M.testSepAxis(d,e,t,i,r,o);if(!1===$)return!1;$<E&&(E=$,s.copy(d))}else{const H=c?c.length:e.faces.length;for(let $=0;$<H;$++){d.copy(e.faceNormals[c?c[$]:$]),o.vmult(d,d);const pe=M.testSepAxis(d,e,t,i,r,o);if(!1===pe)return!1;pe<E&&(E=pe,s.copy(d))}}for(let H=0;H!==M.uniqueEdges.length;H++){i.vmult(M.uniqueEdges[H],f);for(let $=0;$!==e.uniqueEdges.length;$++)if(o.vmult(e.uniqueEdges[$],m),f.cross(m,y),!y.almostZero()){y.normalize();const Y=M.testSepAxis(y,e,t,i,r,o);if(!1===Y)return!1;Y<E&&(E=Y,s.copy(y))}}return r.vsub(t,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,t,i,r,o,s){Pf.project(this,e,i,r,uk),Pf.project(t,e,o,s,hk);const c=uk[0],l=uk[1],d=hk[0],h=hk[1];if(c<h||d<l)return!1;const f=c-h,m=d-l;return f<m?f:m}calculateLocalInertia(e,t){const i=new we,r=new we;this.computeLocalAABB(r,i);const o=i.x-r.x,s=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*s*2*s+2*a*2*a),t.y=1/12*e*(2*o*2*o+2*a*2*a),t.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,o,s,a){const c=new we,l=new we,d=new we,h=new we,f=new we,m=new we,y=new we,E=new we,M=this,$=r,Y=[];let pe=-1,De=Number.MAX_VALUE;for(let mt=0;mt<M.faces.length;mt++){c.copy(M.faceNormals[mt]),i.vmult(c,c);const _t=c.dot(e);_t<De&&(De=_t,pe=mt)}if(pe<0)return;const Ve=M.faces[pe];Ve.connectedFaces=[];for(let mt=0;mt<M.faces.length;mt++)for(let _t=0;_t<M.faces[mt].length;_t++)-1!==Ve.indexOf(M.faces[mt][_t])&&mt!==pe&&-1===Ve.connectedFaces.indexOf(mt)&&Ve.connectedFaces.push(mt);const nt=Ve.length;for(let mt=0;mt<nt;mt++){const _t=M.vertices[Ve[mt]];_t.vsub(M.vertices[Ve[(mt+1)%nt]],l),d.copy(l),i.vmult(d,d),t.vadd(d,d),h.copy(this.faceNormals[pe]),i.vmult(h,h),t.vadd(h,h),d.cross(h,f),f.negate(f),m.copy(_t),i.vmult(m,m),t.vadd(m,m);const ut=Ve.connectedFaces[mt];y.copy(this.faceNormals[ut]);const pt=this.getPlaneConstantOfFace(ut);E.copy(y),i.vmult(E,E);const Tt=pt-E.dot(t);for(this.clipFaceAgainstPlane($,Y,E,Tt);$.length;)$.shift();for(;Y.length;)$.push(Y.shift())}y.copy(this.faceNormals[pe]);const Ze=this.getPlaneConstantOfFace(pe);E.copy(y),i.vmult(E,E);const dt=Ze-E.dot(t);for(let mt=0;mt<$.length;mt++){let _t=E.dot($[mt])+dt;_t<=o&&(console.log(`clamped: depth=${_t} to minDist=${o}`),_t=o),_t<=s&&_t<=1e-6&&a.push({point:$[mt],normal:E,depth:_t})}}clipFaceAgainstPlane(e,t,i,r){let o,s;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];o=i.dot(c)+r;for(let d=0;d<a;d++){if(l=e[d],s=i.dot(l)+r,o<0)if(s<0){const h=new we;h.copy(l),t.push(h)}else{const h=new we;c.lerp(l,o/(o-s),h),t.push(h)}else if(s<0){const h=new we;c.lerp(l,o/(o-s),h),t.push(h),t.push(l)}c=l,o=s}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new we);const i=this.vertices,r=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)t.vmult(i[o],r[o]),e.vadd(r[o],r[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const o=i[r];o.x<e.x?e.x=o.x:o.x>t.x&&(t.x=o.x),o.y<e.y?e.y=o.y:o.y>t.y&&(t.y=o.y),o.z<e.z?e.z=o.z:o.z>t.z&&(t.z=o.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new we);const i=this.faceNormals,r=this.worldFaceNormals;for(let o=0;o!==t;o++)e.vmult(i[o],r[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const o=this.vertices;let s,a,c,l,d,h,f=new we;for(let m=0;m<o.length;m++)f.copy(o[m]),t.vmult(f,f),e.vadd(f,f),(void 0===s||f.x<s)&&(s=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===d||f.y>d)&&(d=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(s,a,c),r.set(l,d,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new we);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let o=0;o<i;o++){const s=r[o];t.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){const s=this.faceNormals[o];t.vmult(s,s)}}if(e)for(let o=0;o<i;o++){const s=r[o];s.vadd(e,s)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,s=new we;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=t[i[a][0]],d=new we;e.vsub(l,d);const h=c.dot(d),f=new we;s.vsub(l,f);const m=c.dot(f);if(h<0&&m>0||h>0&&m<0)return!1}return-1}static project(e,t,i,r,o){const s=e.vertices.length,a=_0e;let c=0,l=0;const d=b0e,h=e.vertices;d.setZero(),Ci.vectorToLocalFrame(i,r,t,a),Ci.pointToLocalFrame(i,r,d,d);const f=d.dot(a);l=c=h[0].dot(a);for(let m=1;m<s;m++){const y=h[m].dot(a);y>c&&(c=y),y<l&&(l=y)}if(l-=f,c-=f,l>c){const m=l;l=c,c=m}o[0]=c,o[1]=l}}const uk=[],hk=[],_0e=(new we,new we),b0e=new we;class CE extends dn{constructor(e){super({type:dn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=we,o=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new Pf({vertices:o,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,t){return void 0===t&&(t=new we),CE.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let o=0;o!==i.length;o++)t.vmult(i[o],i[o]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,o=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let s=0;s<o.length;s++)Qu.set(o[s][0],o[s][1],o[s][2]),t.vmult(Qu,Qu),e.vadd(Qu,Qu),i(Qu.x,Qu.y,Qu.z)}calculateWorldAABB(e,t,i,r){const o=this.halfExtents;Fl[0].set(o.x,o.y,o.z),Fl[1].set(-o.x,o.y,o.z),Fl[2].set(-o.x,-o.y,o.z),Fl[3].set(-o.x,-o.y,-o.z),Fl[4].set(o.x,-o.y,-o.z),Fl[5].set(o.x,o.y,-o.z),Fl[6].set(-o.x,o.y,-o.z),Fl[7].set(o.x,-o.y,o.z);const s=Fl[0];t.vmult(s,s),e.vadd(s,s),r.copy(s),i.copy(s);for(let a=1;a<8;a++){const c=Fl[a];t.vmult(c,c),e.vadd(c,c);const l=c.x,d=c.y,h=c.z;l>r.x&&(r.x=l),d>r.y&&(r.y=d),h>r.z&&(r.z=h),l<i.x&&(i.x=l),d<i.y&&(i.y=d),h<i.z&&(i.z=h)}}}const Qu=new we,Fl=[new we,new we,new we,new we,new we,new we,new we,new we];class un extends h0e{constructor(e){void 0===e&&(e={}),super(),this.id=un.idCounter++,this.index=-1,this.world=null,this.vlambda=new we,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new we,this.previousPosition=new we,this.interpolatedPosition=new we,this.initPosition=new we,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new we,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new we,this.force=new we;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?un.STATIC:un.DYNAMIC,typeof e.type==typeof un.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=un.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new we,this.quaternion=new Fr,this.initQuaternion=new Fr,this.previousQuaternion=new Fr,this.interpolatedQuaternion=new Fr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new we,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new we,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new we,this.invInertia=new we,this.invInertiaWorld=new Pc,this.invMassSolve=0,this.invInertiaSolve=new we,this.invInertiaWorldSolve=new Pc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new we(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new we(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new Zi,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new we,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=un.AWAKE,this.wakeUpAfterNarrowphase=!1,e===un.SLEEPING&&this.dispatchEvent(un.wakeupEvent)}sleep(){this.sleepState=un.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;t===un.AWAKE&&i<r?(this.sleepState=un.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(un.sleepyEvent)):t===un.SLEEPY&&i>r?this.wakeUp():t===un.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(un.sleepEvent))}}updateSolveMassProperties(){this.sleepState===un.SLEEPING||this.type===un.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return void 0===t&&(t=new we),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return void 0===t&&(t=new we),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return void 0===t&&(t=new we),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return void 0===t&&(t=new we),this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new we,o=new Fr;return t&&r.copy(t),i&&o.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let o=0;o!==i;o++){const s=e[o];s.updateBoundingSphereRadius();const a=t[o].length(),c=s.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,o=y0e,s=v0e,a=this.quaternion,c=this.aabb,l=x0e;for(let d=0;d!==r;d++){const h=e[d];a.vmult(t[d],o),o.vadd(this.position,o),a.mult(i[d],s),h.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),0===d?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=w0e,r=E0e;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t){if(void 0===t&&(t=new we),this.type!==un.DYNAMIC)return;this.sleepState===un.SLEEPING&&this.wakeUp();const i=S0e;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(void 0===t&&(t=new we),this.type!==un.DYNAMIC)return;const i=C0e,r=M0e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===un.DYNAMIC&&(this.sleepState===un.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(void 0===t&&(t=new we),this.type!==un.DYNAMIC)return;this.sleepState===un.SLEEPING&&this.wakeUp();const i=t,r=T0e;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const o=I0e;i.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,t){if(void 0===t&&(t=new we),this.type!==un.DYNAMIC)return;const i=D0e,r=R0e;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=k0e;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),CE.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new we;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==un.DYNAMIC&&this.type!==un.KINEMATIC||this.sleepState===un.SLEEPING)return;const r=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,m=this.invMass*e;r.x+=a.x*m*f.x,r.y+=a.y*m*f.y,r.z+=a.z*m*f.z;const y=h.elements,E=this.angularFactor,M=c.x*E.x,H=c.y*E.y,$=c.z*E.z;o.x+=e*(y[0]*M+y[1]*H+y[2]*$),o.y+=e*(y[3]*M+y[4]*H+y[5]*$),o.z+=e*(y[6]*M+y[7]*H+y[8]*$),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),t&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}un.idCounter=0,un.COLLIDE_EVENT_NAME="collide",un.DYNAMIC=1,un.STATIC=2,un.KINEMATIC=4,un.AWAKE=0,un.SLEEPY=1,un.SLEEPING=2,un.wakeupEvent={type:"wakeup"},un.sleepyEvent={type:"sleepy"},un.sleepEvent={type:"sleep"};const y0e=new we,v0e=new Fr,x0e=new Zi,w0e=new Pc,E0e=new Pc,S0e=(new Pc,new we),C0e=new we,M0e=new we,T0e=new we,I0e=new we,D0e=new we,R0e=new we,k0e=new we;new we,new we,new Fr,new we,new we,new we,new we;class fy{constructor(){this.rayFromWorld=new we,this.rayToWorld=new we,this.hitNormalWorld=new we,this.hitPointWorld=new we,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=o,this.body=s,this.distance=a}}let Q5,ez,tz,nz,iz,rz,oz;Q5=dn.types.SPHERE,ez=dn.types.PLANE,tz=dn.types.BOX,nz=dn.types.CYLINDER,iz=dn.types.CONVEXPOLYHEDRON,rz=dn.types.HEIGHTFIELD,oz=dn.types.TRIMESH;class io{get[Q5](){return this._intersectSphere}get[ez](){return this._intersectPlane}get[tz](){return this._intersectBox}get[nz](){return this._intersectConvex}get[iz](){return this._intersectConvex}get[rz](){return this._intersectHeightfield}get[oz](){return this._intersectTrimesh}constructor(e,t){void 0===e&&(e=new we),void 0===t&&(t=new we),this.from=e.clone(),this.to=t.clone(),this.direction=new we,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=io.ANY,this.result=new fy,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||io.ANY,this.result=t.result||new fy,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof t.checkCollisionResponse<"u")||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(sz),gk.length=0,e.broadphase.aabbQuery(e,sz,gk),this.intersectBodies(gk),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=j0e,o=U0e;for(let s=0,a=e.shapes.length;s<a;s++){const c=e.shapes[s];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],r),r.vadd(e.position,r),this.intersectShape(c,o,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function nye(n,e,t){t.vsub(n,Nf);const i=Nf.dot(e);return e.scale(i,TE),TE.vadd(n,TE),t.distanceTo(TE)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,o){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,o)}_intersectPlane(e,t,i,r,o){const s=this.from,a=this.to,c=this.direction,l=new we(0,0,1);t.vmult(l,l);const d=new we;s.vsub(i,d);const h=d.dot(l);if(a.vsub(i,d),h*d.dot(l)>0||s.distanceTo(a)<h)return;const m=l.dot(c);if(Math.abs(m)<this.precision)return;const y=new we,E=new we,M=new we;s.vsub(i,y);const H=-l.dot(y)/m;c.scale(H,E),s.vadd(E,M),this.reportIntersection(l,M,o,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,o=this.from;t.x=Math.min(r.x,o.x),t.y=Math.min(r.y,o.y),t.z=Math.min(r.z,o.z),i.x=Math.max(r.x,o.x),i.y=Math.max(r.y,o.y),i.z=Math.max(r.z,o.z)}_intersectHeightfield(e,t,i,r,o){const s=V0e;s.from.copy(this.from),s.to.copy(this.to),Ci.pointToLocalFrame(i,t,s.from,s.from),Ci.pointToLocalFrame(i,t,s.to,s.to),s.updateDirection();const a=z0e;let c,l,d,h;c=l=0,d=h=e.data.length-1;const f=new Zi;s.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),d=Math.min(d,a[0]+1),h=Math.min(h,a[1]+1);for(let m=c;m<d;m++)for(let y=l;y<h;y++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(m,y,f),f.overlapsRay(s)){if(e.getConvexTrianglePillar(m,y,!1),Ci.pointToWorldFrame(i,t,e.pillarOffset,ME),this._intersectConvex(e.pillarConvex,t,ME,r,o,az),this.result.shouldStop)return;e.getConvexTrianglePillar(m,y,!0),Ci.pointToWorldFrame(i,t,e.pillarOffset,ME),this._intersectConvex(e.pillarConvex,t,ME,r,o,az)}}}_intersectSphere(e,t,i,r,o){const s=this.from,a=this.to,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,d=2*((a.x-s.x)*(s.x-i.x)+(a.y-s.y)*(s.y-i.y)+(a.z-s.z)*(s.z-i.z)),f=d**2-4*l*((s.x-i.x)**2+(s.y-i.y)**2+(s.z-i.z)**2-e.radius**2),m=H0e,y=G0e;if(!(f<0))if(0===f)s.lerp(a,f,m),m.vsub(i,y),y.normalize(),this.reportIntersection(y,m,o,r,-1);else{const E=(-d-Math.sqrt(f))/(2*l),M=(-d+Math.sqrt(f))/(2*l);if(E>=0&&E<=1&&(s.lerp(a,E,m),m.vsub(i,y),y.normalize(),this.reportIntersection(y,m,o,r,-1)),this.result.shouldStop)return;M>=0&&M<=1&&(s.lerp(a,M,m),m.vsub(i,y),y.normalize(),this.reportIntersection(y,m,o,r,-1))}}_intersectConvex(e,t,i,r,o,s){const a=W0e,c=cz,l=s&&s.faceList||null,d=e.faces,h=e.vertices,f=e.faceNormals,m=this.direction,y=this.from,M=y.distanceTo(this.to),H=l?l.length:d.length,$=this.result;for(let Y=0;!$.shouldStop&&Y<H;Y++){const pe=l?l[Y]:Y,De=d[pe],Ve=f[pe],nt=t,Ze=i;c.copy(h[De[0]]),nt.vmult(c,c),c.vadd(Ze,c),c.vsub(y,c),nt.vmult(Ve,a);const dt=m.dot(a);if(Math.abs(dt)<this.precision)continue;const mt=a.dot(c)/dt;if(!(mt<0)){m.scale(mt,oa),oa.vadd(y,oa),Nc.copy(h[De[0]]),nt.vmult(Nc,Nc),Ze.vadd(Nc,Nc);for(let _t=1;!$.shouldStop&&_t<De.length-1;_t++){Ll.copy(h[De[_t]]),Bl.copy(h[De[_t+1]]),nt.vmult(Ll,Ll),nt.vmult(Bl,Bl),Ze.vadd(Ll,Ll),Ze.vadd(Bl,Bl);const xt=oa.distanceTo(y);!io.pointInTriangle(oa,Nc,Ll,Bl)&&!io.pointInTriangle(oa,Ll,Nc,Bl)||xt>M||this.reportIntersection(a,oa,o,r,pe)}}}}_intersectTrimesh(e,t,i,r,o,s){const a=X0e,c=eye,l=tye,d=cz,h=q0e,f=K0e,m=J0e,y=Q0e,E=Z0e,M=e.indices,H=this.from,$=this.to,Y=this.direction;l.position.copy(i),l.quaternion.copy(t),Ci.vectorToLocalFrame(i,t,Y,h),Ci.pointToLocalFrame(i,t,H,f),Ci.pointToLocalFrame(i,t,$,m),m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,m.vsub(f,h),h.normalize();const pe=f.distanceSquared(m);e.tree.rayQuery(this,l,c);for(let De=0,Ve=c.length;!this.result.shouldStop&&De!==Ve;De++){const nt=c[De];e.getNormal(nt,a),e.getVertex(M[3*nt],Nc),Nc.vsub(f,d);const Ze=h.dot(a),dt=a.dot(d)/Ze;if(dt<0)continue;h.scale(dt,oa),oa.vadd(f,oa),e.getVertex(M[3*nt+1],Ll),e.getVertex(M[3*nt+2],Bl);const mt=oa.distanceSquared(f);!io.pointInTriangle(oa,Ll,Nc,Bl)&&!io.pointInTriangle(oa,Nc,Ll,Bl)||mt>pe||(Ci.vectorToWorldFrame(t,a,E),Ci.pointToWorldFrame(i,t,oa,y),this.reportIntersection(E,y,o,r,nt))}c.length=0}reportIntersection(e,t,i,r,o){const s=this.from,a=this.to,c=s.distanceTo(t),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case io.ALL:this.hasHit=!0,l.set(s,a,e,t,i,r,c),l.hasHit=!0,this.callback(l);break;case io.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,t,i,r,c));break;case io.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,t,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,Nf),i.vsub(t,py),e.vsub(t,_k);const o=Nf.dot(Nf),s=Nf.dot(py),a=Nf.dot(_k),c=py.dot(py),l=py.dot(_k);let d,h;return(d=c*a-s*l)>=0&&(h=o*l-s*a)>=0&&d+h<o*c-s*s}}io.CLOSEST=1,io.ANY=2,io.ALL=4;const sz=new Zi,gk=[],py=new we,_k=new we,j0e=new we,U0e=new Fr,oa=new we,Nc=new we,Ll=new we,Bl=new we;new we,new fy;const az={faceList:[0]},ME=new we,V0e=new io,z0e=[],H0e=new we,G0e=new we,W0e=new we,cz=(new we,new we,new we),X0e=new we,q0e=new we,K0e=new we,J0e=new we,Z0e=new we,Q0e=new we;new Zi;const eye=[],tye=new Ci,Nf=new we,TE=new we;new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new io,new we,new we,new we,new we(1,0,0),new we(0,1,0),new we(0,0,1),new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new Zi,new we,new Zi,new we,new we,new we,new we,new we,new we,new we,new Zi,new we,new Ci,new Zi,new we,new we,new we,new we,new we,new Fr,new Fr,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new Zi,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new we,new Fr,new we,new we,new we,new we,new we,new we,new we,new we,new we,new Zi,new io;const mo=globalThis.performance||{};if(!mo.now){let n=Date.now();mo.timing&&mo.timing.navigationStart&&(n=mo.timing.navigationStart),mo.now=()=>Date.now()-n}new we;var jf=g(1979);function Ag(n,e,t){e||(e=new Hn(Hn.IDENTITY));const i=new Hn(Hn.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const o=new Hn(Hn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(o)}n.scale&&i.scale(n.scale)}const r=new Hn(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const o of n.nodes||n.children||[])if(!1===Ag(o,r,t))return!1;return!0}function Pz(){gV([S5,vg])}function Nz(n,e){const t=e.nodes?.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||Ag(r,new Hn(Hn.IDENTITY),(o,s)=>o!==t||(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function xk(n,e){return wk.apply(this,arguments)}function wk(){return wk=Ut(function*(n,e){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(o=>o.blob())):fetch(t);const r=yield eE(i,vg,{DracoLoader:HR,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),Nz(n.scenegraphNode,r)}),wk.apply(this,arguments)}function swe(n,e){return Ek.apply(this,arguments)}function Ek(){return Ek=Ut(function*(n,e){return Nz(n,yield e)}),Ek.apply(this,arguments)}function Ak(){return Ak=Ut(function*(n){console.log("Starting Collisioning");const e=n.filter(s=>!s.scenegraph&&"wireframe"!==s.geometry).map(s=>{const a=new Hn(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new Zi({lowerBound:new we(...c.map((d,h)=>Math.min(d,l[h]))),upperBound:new we(...l.map((d,h)=>Math.max(d,c[h])))})}}),t=[];for(const s of n.filter(a=>!!a.scenegraph)){const a=yield J0(s.scenegraph,vg,{DracoLoader:HR,decompress:!0,postProcess:!0});for(const c of a.scenes)Ag(c,new Hn(s.transformMatrix),(l,d)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=d.transformAsPoint(h.attributes.POSITION.min,[]),m=d.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new Zi({lowerBound:new we(...f.map((y,E)=>Math.min(y,m[E]))),upperBound:new we(...m.map((y,E)=>Math.max(y,f[E])))}),gltf:a})}return!0})}const i=[],r=[];for(const s of e){const a=[];for(const c of t)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":s.entityId,name:s.name,hits:a}):r.push(s)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(s=>s.hits.length))});const o=[];for(const s of i){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(const a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),i}),Ak.apply(this,arguments)}function Sk(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new Jbe;break;case"cone":i=new t0e;break;case"cylinder":i=new n0e;break;default:i=new c0e}return new q2({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Ai.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...t})}}function Fz(n,e,t){if(e&&0!==e.length)return new W2({id:n,pickable:!0,data:e.map(i=>({...i,position:new Hn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...t})}let cwe=(()=>{class n extends m2{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:t}=this.props;this.setState({data:t??[],zoomOpacity:.8,doCollisions:!1}),Pz()}renderLayers(){const t=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const s of t.data){const a=s.geometry??"cube";s.scenegraph?i.scenegraph.push(s):void 0!==i[a]&&i[a].push(s)}const r={};for(const s of i.scenegraph)s.scenegraph&&s.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,s.scenegraph)&&(r[s.scenegraph]=xk({scenegraph:s.scenegraph},n.gltfCache));const o=[];for(const[s,a]of Object.entries(i))if("scenegraph"===s)for(const c of a)o.push(new dk({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?t.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:Ai.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?swe(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===s?(o.push(Fz("text",a.filter(c=>c.unpickable),{pickable:!1})),o.push(Fz("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===s?o.push(Sk(s,a,{wireframe:!0,pickable:!1,geometry:s})):(o.push(Sk(s,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:s})),o.push(Sk(`${s}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:s})));return t.doCollisions&&function awe(n){Ak.apply(this,arguments)}(t.data),o.filter(s=>!!s)}getPickingInfo(t){return t.info}}return n})();function Lz(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),Lz(t,e);return e}function Ck(){return Ck=Ut(function*(n,e,t,i){Pz();const r=yield xk({scenegraph:n,scenegraphNode:t},i),o={},s=[];for(const a of r.scenes)Ag(a,e=new Hn(e||Hn.IDENTITY),(c,l)=>{const d={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Hn(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${d["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:d["@id"],transformMatrix:new Hn(e||Hn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),m=l.transformAsPoint(h.attributes.POSITION.max,[]);d.bbox=new Zi({lowerBound:new we(...f.map((y,E)=>Math.min(y,m[E]))),upperBound:new we(...m.map((y,E)=>Math.max(y,f[E])))})}return o[d["@id"]]=d,!0});for(const a of Object.values(o).filter(c=>!c.bbox)){for(const c of Lz(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(const a of Object.values(o)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new we(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new Hn(Hn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of s)o[a["@id"]]=a;return o}),Ck.apply(this,arguments)}let dwe=(()=>{class n{constructor(t){this.deckProps=t,this.bodyUILayer=new cwe({}),this.nodeClickSubject=new U,this.nodeHoverStartSubject=new U,this.nodeHoverStopSubject=new U,this.sceneRotationSubject=new hi([0,0]),this.nodeDragStartSubject=new U,this.nodeDragSubject=new U,this.nodeDragEndSubject=new U,this.nodeClick$=this.nodeClickSubject.pipe(ts()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(ts()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(ts()),this.sceneRotation$=this.sceneRotationSubject.pipe(ts()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(ts()),this.nodeDrag$=this.nodeDragSubject.pipe(ts()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(ts());const i={...t,views:["orthographic"===t.camera?new y2({flipY:!1,near:-1e3}):new CV({orbitAxis:"Y"})],controller:t.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")};t.legacyLighting&&(i.effects=[new E2({ambientLight:new MV({color:[255,255,255],intensity:10})})]),this.deck=new U2(i),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:t.minRotationX??-15,maxRotationX:t.maxRotationX??15,target:t.target??[.5,.5,0],rotationX:0,rotationOrbit:t.rotation??0,zoom:t.zoom??9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){var t=this;return Ut(function*(){for(;!t.bodyUILayer.state;)yield new Promise(i=>{setTimeout(i,200)})})()}finalize(){this.deck.finalize()}setScene(t){if(t?.length>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const o of t)o.zoomToOnLoad&&(this.zoomTo(o),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,i):this.bodyUILayer.setState({data:t,zoomOpacity:i})}}debugSceneNodeProcessing(t,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",o=new Hn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function lwe(n,e,t,i){return Ck.apply(this,arguments)})(r,o,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",t),(t=t.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:o,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:i})})}zoomTo(t){const i=new Hn(t.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(t){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:t}})}setRotationX(t){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:t}})}setZoom(t){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:t}})}setTarget(t){this.deck.setProps({viewState:{...this.deck.props.viewState,target:t}})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:i}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object?.["@id"]?i!==t.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(t,i){t.picked&&t.object?.["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(t){if(t.interactionState?.isZooming){const i=this.bodyUILayer.state,r=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==r&&this.bodyUILayer.setState({data:i.data,zoomOpacity:r})}this.deck.setProps({viewState:{...t.viewState}}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,i){this._dragEvent(t,i,this.nodeDragStartSubject)}_onDrag(t,i){this._dragEvent(t,i,this.nodeDragSubject)}_onDragEnd(t,i){this._dragEvent(t,i,this.nodeDragEndSubject)}_dragEvent(t,i,r){t?.object?.["@id"]&&r.next({node:t.object,info:t,e:i})}}return He([jf.ak],n.prototype,"_onHover",null),He([jf.ak],n.prototype,"_onClick",null),He([jf.ak],n.prototype,"_onViewStateChange",null),He([jf.ak],n.prototype,"_onDragStart",null),He([jf.ak],n.prototype,"_onDrag",null),He([jf.ak],n.prototype,"_onDragEnd",null),n})();const vy=P(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:hwe}=Array,{getPrototypeOf:fwe,prototype:pwe,keys:mwe}=Object;function Bz(n){if(1===n.length){const e=n[0];if(hwe(e))return{args:e,keys:null};if(function gwe(n){return n&&"object"==typeof n&&fwe(n)===pwe}(e)){const t=mwe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:_we}=Array;function xy(n){return A(e=>function bwe(n,e){return _we(e)?n(...e):n(e)}(n,e))}function jz(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function qa(...n){const e=It(n),t=wt(n),{args:i,keys:r}=Bz(n);if(0===i.length)return Bi([],e);const o=new Ye(Uz(i,e,r?s=>jz(r,s):Ae));return t?o.pipe(xy(t)):o}function Uz(n,e,t=Ae){return i=>{Vz(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)Vz(e,()=>{const l=Bi(n[c],e);let d=!1;l.subscribe(ee(i,h=>{o[c]=h,d||(d=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function Vz(n,e,t){n?_e(t,n,e):e()}let zz=(()=>{class n{constructor(){this.bootstrap$=new _f(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vwe(n,e){return n===e}function Tk(n,e=vwe){let t=null,i=null;function r(){return function xwe(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}let wwe=(()=>{class n{static set(t){this._value=t}static pop(){const t=this._value;return this._value={},t}}return n._value={},n})();const Hz=new vt("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>wwe.pop()}),Gz=new vt("\u0275NGXS_STATE_FACTORY"),Wz=new vt("\u0275NGXS_STATE_CONTEXT_FACTORY");function wy(...n){const e=wt(n),{args:t,keys:i}=Bz(n),r=new Ye(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let d=0;d<s;d++){let h=!1;Li(t[d]).subscribe(ee(o,f=>{h||(h=!0,l--),a[d]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?jz(i,a):a),o.complete())}))}});return e?r.pipe(xy(e)):r}function Ld(n,e){const t=L(n)?n:()=>n,i=r=>r.error(t());return new Ye(e?r=>e.schedule(i,0,r):i)}function Uf(n){return!!n&&(n instanceof Ye||L(n.lift)&&L(n.subscribe))}function vi(n,e){return fe((t,i)=>{let r=0;t.subscribe(ee(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Bs(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,ts({connector:()=>new _f(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Qi(n){return n<=0?()=>te:fe((e,t)=>{let i=0;e.subscribe(ee(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function $z(n,e){return e?t=>t.pipe($z((i,r)=>Li(n(i,r)).pipe(A((o,s)=>e(i,o,r,s))))):fe((t,i)=>{let r=0,o=null,s=!1;t.subscribe(ee(i,a=>{o||(o=ee(i,void 0,()=>{o=null,s&&i.complete()}),Li(n(a,r++)).subscribe(o))},()=>{s=!0,!o&&i.complete()}))})}function Sg(n){return fe((e,t)=>{let i=!1;e.subscribe(ee(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Ka(n){return fe((e,t)=>{let o,i=null,r=!1;i=e.subscribe(ee(t,void 0,void 0,s=>{o=Li(n(s,Ka(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function cr(n){return fe((e,t)=>{Li(n).subscribe(ee(t,()=>t.complete(),V)),!t.closed&&e.subscribe(t)})}function Oi(n,e,t){const i=L(n)||e||t?{next:n,error:e,complete:t}:n;return i?fe((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(ee(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Ae}function Ey(...n){return function Ewe(){return z(1)}()(Bi(n,It(n)))}function Ja(...n){const e=It(n);return fe((t,i)=>{(e?Ey(n,t,e):Ey(n,t)).subscribe(i)})}function Vf(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const Yz=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((o,s,a)=>(o[s]=a===r?t:Array.isArray(o[s])?o[s].slice():Object.assign({},o[s]),o&&o[s]),n),n},Ik=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),Dk=n=>n&&"object"==typeof n&&!Array.isArray(n),Rk=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(Dk(n)&&Dk(t))for(const i in t)Dk(t[i])?(n[i]||Object.assign(n,{[i]:{}}),Rk(n[i],t[i])):Object.assign(n,{[i]:t[i]});return Rk(n,...e)};let Xz=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i}enter(t){return fI(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return nn.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return nn.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}}return n.\u0275fac=function(t){return new(t||n)(rt(nn),rt(ma))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qz=new vt("ROOT_OPTIONS"),Kz=new vt("ROOT_STATE_TOKEN"),Jz=new vt("FEATURE_STATE_TOKEN"),Zz=new vt("NGXS_PLUGINS"),Bd="NGXS_META",Qz="NGXS_OPTIONS_META",kk="NGXS_SELECTOR_META";let FE=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=Xz}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:function(t){let i=null;return t?i=new t:(r=rt(qz),i=Rk(new n,r)),i;var r},providedIn:"root"}),n})();class kwe{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}let Owe=(()=>{class n{enter(t){return t()}leave(t){return t()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eH=new vt("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),Pwe=new vt("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=zt(gm),e=n.get(eH);return n.get(e||(typeof Mi.Zone<"u"?Xz:Owe))}});function Ok(n){if(!n.hasOwnProperty(Bd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,Bd,{value:e})}return zf(n)}function zf(n){return n[Bd]}function LE(n){return n[kk]}function tH(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function Nwe(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function Fwe(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let o=t;for(;++i<r;)o=o+" && "+(t=t+"."+e[i]);return new Function("store","return "+o+";")}(n)}function zwe(...n){return function Cg(n,e,t=Wwe){const i=function $we(n){return n.reduce((e,t)=>(e[Vf(t)]=!0,e),{})}(n),r=e&&function Ywe(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(o){return o.pipe(function Hwe(n,e){return vi(t=>{const i=Vf(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function Wwe(){return A(n=>n.action)}function BE(n){return e=>new Ye(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let nH=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(rt(Pwe))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iH(n){const e=[];let t=!1;return function(...r){if(t)e.unshift(r);else{for(t=!0,n(...r);e.length>0;){const o=e.pop();o&&n(...o)}t=!1}}}class Xwe extends U{constructor(){super(...arguments),this._orderedNext=iH(e=>super.next(e))}next(e){this._orderedNext(e)}}class qwe extends hi{constructor(e){super(e),this._orderedNext=iH(t=>super.next(t)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let rH=(()=>{class n extends Xwe{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=gi(n)))(i||n)}}(),n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oH=n=>(...e)=>n.shift()(...e,(...i)=>oH(n)(...i));let sH=(()=>{class n{constructor(t){this._injector=t,this._errorHandler=null}reportErrorSafely(t){null===this._errorHandler&&(this._errorHandler=this._injector.get(ga));try{this._errorHandler.handleError(t)}catch{}}}return n.\u0275fac=function(t){return new(t||n)(rt(ur))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nk=(()=>{class n extends qwe{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fk=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(rt(n,12),rt(Zz,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})(),aH=(()=>{class n extends U{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=gi(n)))(i||n)}}(),n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jwe=(()=>{class n{constructor(t,i,r,o,s,a){this._actions=t,this._actionResults=i,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=s,this._internalErrorReporter=a}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(function Kwe(n,e){return t=>{let i=!1;return t.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>n.reportErrorSafely(r))}))}}),new Ye(r=>(i=!0,t.pipe(BE(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?Wt(this._stateStream.getValue()):wy(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){const i=this._stateStream.getValue();return oH([...this._pluginManager.plugins,(o,s)=>{o!==i&&this._stateStream.next(o);const a=this.getActionResultStream(s);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,t).pipe(Bs())}getActionResultStream(t){return this._actionResults.pipe(vi(i=>i.action===t&&"DISPATCHED"!==i.status),Qi(1),Bs())}createDispatchObservable(t){return t.pipe($z(i=>{switch(i.status){case"SUCCESSFUL":return Wt(this._stateStream.getValue());case"ERRORED":return Ld(i.error);default:return te}})).pipe(Bs())}}return n.\u0275fac=function(t){return new(t||n)(rt(rH),rt(aH),rt(Fk),rt(Nk),rt(nH),rt(sH))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ay=(()=>{class n{constructor(t,i,r){this._stateStream=t,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(rt(Nk),rt(Jwe),rt(FE))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lk=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();function r(c){return Ik(c,t.path)}function o(c,l){const d=Yz(c,t.path,l);return i.setState(d),d}function s(c,l){return o(c,l(r(c)))}return{getState:()=>r(i.getState()),patchState(c){const l=i.getState(),d=function Zwe(n){return e=>{const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(c);return s(l,d)},setState(c){const l=i.getState();return function a(c){return"function"==typeof c}(c)?s(l,c):o(l,c)},dispatch:c=>i.dispatch(c)}}}return n.\u0275fac=function(t){return new(t||n)(rt(Ay))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();new RegExp("^[a-zA-Z0-9_]+$");class lH{static get type(){return"@@INIT"}}class dH{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}new vt("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Mg=(()=>{class n{constructor(t,i,r,o,s,a,c){this._injector=t,this._config=i,this._parentFactory=r,this._actions=o,this._actionResults=s,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=Tk(()=>{const l=this;function d(f){const m=l.statePaths[f];return m?tH(m.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let m=d(f);return m||((...y)=>(m||(m=d(f)),m?m(...y):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let i={};return i=Array.isArray(t)?t.slice():function Vwe(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,i}ngOnDestroy(){var t;null===(t=this._actionsSubscription)||void 0===t||t.unsubscribe()}add(t){const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function Lwe(n){const e=t=>n.find(r=>r===t)[Bd].name;return n.reduce((t,i)=>{const{name:r,children:o}=i[Bd];return t[r]=(o||[]).map(e),t},{})}(i),o=function Uwe(n){const e=[],t={},i=(r,o=[])=>{Array.isArray(o)||(o=[]),o.push(r),t[r]=!0,n[r].forEach(s=>{t[s]||i(s,o.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),s=function jwe(n,e={}){const t=(i,r)=>{for(const o in i)if(i.hasOwnProperty(o)&&i[o].indexOf(r)>=0){const s=t(i,o);return null!==s?`${s}.${o}`:o}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function Bwe(n){return n.reduce((e,t)=>(e[t[Bd].name]=t,e),{})}(i),c=[];for(const l of o){const d=a[l],h=s[l],f=d[Bd];this.addRuntimeInfoToMeta(f,h);const m={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(d),defaults:n.cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(m),this.states.push(m)}return c}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((s,a)=>Yz(s,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const t=new U;this._actionsSubscription=this._actions.pipe(vi(i=>"DISPATCHED"===i.status),ve(i=>{t.next(i);const r=i.action;return this.invokeActions(t,r).pipe(A(()=>({action:r,status:"SUCCESSFUL"})),Sg({action:r,status:"CANCELED"}),Ka(o=>Wt({action:r,status:"ERRORED",error:o})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(t,i){const r=Vf(i),o=[];let s=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const d=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](d,i);h instanceof Promise&&(h=Bi(h)),Uf(h)?(h=h.pipe(ve(f=>f instanceof Promise?Bi(f):Uf(f)?f:Wt(f)),Sg({})),l.options.cancelUncompleted&&(h=h.pipe(cr(t.pipe(zwe(i)))))):h=Wt({}).pipe(Bs()),o.push(h)}catch(h){o.push(Ld(h))}s=!0}}return o.length||o.push(Wt({})),wy(o)}addToStatesMap(t){const i=[],r=this.statesByName;for(const o of t){const s=zf(o).name;!r[s]&&(i.push(o),r[s]=o)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==Ik(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(rt(ur),rt(FE),rt(n,12),rt(rH),rt(aH),rt(Lk),rt(Hz,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})();function uH(n){const e=LE(n)||zf(n);return e&&e.makeRootSelector||(()=>n)}let jl=(()=>{class n{constructor(t,i,r,o,s,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=o,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(BE(this._internalExecutionStrategy),Bs({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(A(i),Ka(r=>{const{suppressErrors:o}=this._config.selectorOptions;return r instanceof TypeError&&o?Wt(void 0):Ld(r)}),je(),BE(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(Qi(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(BE(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return uH(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const s=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),t):t;this._stateStream.next(s)}}}return n.\u0275fac=function(t){return new(t||n)(rt(Nk),rt(Ay),rt(FE),rt(nH),rt(Mg),rt(Hz,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jE=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.store=null,n.config=null,n.\u0275fac=function(t){return new(t||n)(rt(jl),rt(FE))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hH=(()=>{class n{constructor(t,i,r,o,s){this._store=t,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=o,this._bootstrapper=s,this._destroy$=new U}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,i){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(vi(()=>!!i),Oi(()=>this._invokeInitOnStates(i.states)),ve(()=>this._bootstrapper.appBootstrapped$),vi(r=>!!r),Ka(r=>(this._internalErrorReporter.reportErrorSafely(r),te)),cr(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(t){for(const i of t){const r=i.instance;r.ngxsOnChanges&&this._store.select(o=>Ik(o,i.path)).pipe(Ja(void 0),fe((n,e)=>{let t,i=!1;n.subscribe(ee(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))}),cr(this._destroy$)).subscribe(([o,s])=>{const a=new kwe(o,s,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(rt(jl),rt(sH),rt(Ay),rt(Lk),rt(zz))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a1e=(()=>{class n{constructor(t,i,r,o,s=[],a){const c=t.addAndReturnDefaults(s);i.setStateToTheCurrentWithNew(c),t.connectActionHandlers(),a.ngxsBootstrap(new lH,c)}}return n.\u0275fac=function(t){return new(t||n)(rt(Mg),rt(Ay),rt(jl),rt(jE),rt(Kz,8),rt(hH))},n.\u0275mod=Jt({type:n}),n.\u0275inj=Kt({}),n})(),c1e=(()=>{class n{constructor(t,i,r,o=[],s){const a=n.flattenStates(o),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),s.ngxsBootstrap(new dH(c.defaults),c))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(rt(jl),rt(Ay),rt(Mg),rt(Jz,8),rt(hH))},n.\u0275mod=Jt({type:n}),n.\u0275inj=Kt({}),n})(),fH=(()=>{class n{static forRoot(t=[],i={}){return{ngModule:a1e,providers:[Mg,Fk,...t,...n.ngxsTokenProviders(t,i)]}}static forFeature(t=[]){return{ngModule:c1e,providers:[Mg,Fk,...t,{provide:Jz,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,i){return[{provide:eH,useValue:i.executionStrategy},{provide:Kz,useValue:t},{provide:qz,useValue:i},{provide:$w,useFactory:n.appBootstrapListenerFactory,multi:!0,deps:[zz]},{provide:Wz,useExisting:Lk},{provide:Gz,useExisting:Mg}]}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Jt({type:n}),n.\u0275inj=Kt({}),n})();function Uk(n,e){return(t,i)=>{const r=Ok(t.constructor);Array.isArray(n)||(n=[n]);for(const o of n){const s=o.type;r.actions[s]||(r.actions[s]=[]),r.actions[s].push({fn:i,options:e||{},type:s})}}}function pH(n){return i=>{const r=i,o=Ok(r),s=Object.getPrototypeOf(r),a=function e(i){return Object.assign(Object.assign({},i[Qz]||{}),n)}(s);(function t(i){const{meta:r,inheritedStateClass:o,optionsWithInheritance:s}=i,{children:a,defaults:c,name:l}=s,d="string"==typeof l?l:l&&l.getName()||null;if(o.hasOwnProperty(Bd)){const h=o[Bd]||{};r.actions=Object.assign(Object.assign({},r.actions),h.actions)}r.children=a,r.defaults=c,r.name=d})({meta:o,inheritedStateClass:s,optionsWithInheritance:a}),r[Qz]=a}}const l1e=36;function UE(n,...e){return function(t,i){const r=i.toString(),o=`__${r}__selector`,s=function u1e(n,e,t=[]){return e=e||function h1e(n){const e=n.length-1;return n.charCodeAt(e)===l1e?n.slice(0,e):n}(n),"string"==typeof e?tH(t.length?[e,...t]:e.split("."),jE.config):e}(r,n,e);Object.defineProperties(t,{[o]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[o]||(this[o]=function d1e(n){return jE.store||function Rwe(){throw new Error("You have forgotten to import the NGXS module!")}(),jE.store.select(n)}(s))}}})}}const mH="NGXS_SELECTOR_OPTIONS_META",VE={getOptions:n=>n&&n[mH]||{},defineOptions:(n,e)=>{n&&(n[mH]=e)}};function f1e(n,e){const t=function Pk(n){return n.hasOwnProperty(kk)||Object.defineProperty(n,kk,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),LE(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},t);return t.getSelectorOptions=()=>function p1e(n,e){return Object.assign(Object.assign(Object.assign(Object.assign({},VE.getOptions(n.containerClass)||{}),VE.getOptions(n.originalFn)||{}),n.getSelectorOptions()||{}),e)}(r,i()),t}function Sy(n,e,t){const i=function r1e(n,e){const t=e&&e.containerClass,r=Tk(function(...s){const a=n.apply(t,s);return a instanceof Function?Tk.apply(null,[a]):a});return Object.setPrototypeOf(r,n),r}(e,t),r=f1e(e,t);return r.makeRootSelector=function i1e(n,e,t){return i=>{const{argumentSelectorFunctions:r,selectorOptions:o}=function o1e(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i),s=function s1e(n=[],e,t){const i=[];return t&&(0===n.length||e.injectContainerState)&&zf(t)&&i.push(t),n&&i.push(...n),i}(t,r,e.containerClass).map(a=>uH(a)(n));return{selectorOptions:r,argumentSelectorFunctions:s}}(i,n,e);return function(a){const c=r.map(l=>l(a));try{return t(...c)}catch(l){if(l instanceof TypeError&&o.suppressErrors)return;throw l}}}}(r,n,i),i}function Tg(n){return(e,t,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,t));const r=i?.value,o=Sy(n,r,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})}),s={configurable:!0,get:()=>o};return s.originalFn=r,s}}const js=new vt("NgValueAccessor");let cO;try{cO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{cO=!1}let ky,Yf,lO,Ir=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Lu(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!cO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ma))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $f(n){return function pEe(){if(null==ky&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ky=!0}))}finally{ky=ky||!1}return ky}()?n:!!n.capture}function mEe(){if(null==Yf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Yf=!1,Yf;if("scrollBehavior"in document.documentElement.style)Yf=!0;else{const n=Element.prototype.scrollTo;Yf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Yf}function nA(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Ud(n){return n.composedPath?n.composedPath()[0]:n.target}function dO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Fc(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class CEe extends T{constructor(e,t){super()}schedule(e,t=0){return this}}const oA={setInterval(n,e,...t){const{delegate:i}=oA;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=oA;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class fO extends CEe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return oA.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&oA.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,se(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class Py{constructor(e,t=Py.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Py.now=AI.now;class pO extends Py{constructor(e,t=Py.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const sA=new pO(fO),MEe=sA;function gO(n){return vi((e,t)=>n<=t)}function ui(n){return null!=n&&"false"!=`${n}`}function Za(n,e=0){return function TEe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function aA(n){return Array.isArray(n)?n:[n]}function ro(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Vd(n){return n instanceof vn?n.nativeElement:n}const kG=new Set;let Xf,REe=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):OEe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function kEe(n,e){if(!kG.has(n))try{Xf||(Xf=document.createElement("style"),e&&(Xf.nonce=e),Xf.setAttribute("type","text/css"),document.head.appendChild(Xf)),Xf.sheet&&(Xf.sheet.insertRule(`@media ${n} {body{ }}`,0),kG.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Ir),rt(Vb,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OEe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let PEe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new U}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return OG(aA(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=qa(OG(aA(t)).map(s=>this._registerQuery(s).observable));return o=Ey(o.pipe(Qi(1)),o.pipe(gO(1),function mO(n,e=sA){return fe((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=o;o=null,i.next(l)}};function c(){const l=s+n,d=e.now();if(d<l)return r=this.schedule(void 0,l-d),void i.add(r);a()}t.subscribe(ee(i,l=>{o=l,s=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe(A(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Ye(s=>{const a=c=>this._zone.run(()=>s.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Ja(i),A(({matches:s})=>({query:t,matches:s})),cr(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(i){return new(i||n)(rt(REe),rt(nn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OG(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let uA=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function jEe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function BEe(n){try{return n.frameElement}catch{return null}}(function YEe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===jG(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=jG(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function WEe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function $Ee(n){return!function VEe(n){return function HEe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function UEe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function zEe(n){return function GEe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||BG(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Ir))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BG(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function jG(n){if(!BG(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class XEe{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Qi(1)).subscribe(e)}}let xO=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new XEe(t,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(uA),rt(nn),rt(Gn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UG(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function VG(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const qEe=new vt("cdk-input-modality-detector-options"),KEe={ignoreKeys:[18,17,224,91,16]},Rg=$f({passive:!0,capture:!0});let JEe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new hi(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ud(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(UG(s)?"keyboard":"mouse"),this._mostRecentTarget=Ud(s))},this._onTouchstart=s=>{VG(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ud(s))},this._options={...KEe,...o},this.modalityDetected=this._modality.pipe(gO(1)),this.modalityChanged=this.modalityDetected.pipe(je()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Rg),r.addEventListener("mousedown",this._onMousedown,Rg),r.addEventListener("touchstart",this._onTouchstart,Rg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Rg),document.removeEventListener("mousedown",this._onMousedown,Rg),document.removeEventListener("touchstart",this._onTouchstart,Rg))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Ir),rt(nn),rt(Gn),rt(qEe,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const QEe=new vt("cdk-focus-monitor-default-options"),hA=$f({passive:!0,capture:!0});let nh=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new U,this._rootNodeFocusAndBlurListener=a=>{for(let l=Ud(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,i=!1){const r=Vd(t);if(!this._platform.isBrowser||1!==r.nodeType)return Wt();const o=function _Ee(n){if(function gEe(){if(null==lO){const n=typeof document<"u"?document.head:null;lO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return lO}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new U,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Vd(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=Vd(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=Ud(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,hA),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,hA)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(cr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hA),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hA),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(rt(nn),rt(Ir),rt(JEe),rt(Gn,8),rt(QEe,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const HG="cdk-high-contrast-black-on-white",GG="cdk-high-contrast-white-on-black",wO="cdk-high-contrast-active";let WG=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=zt(PEe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(wO,HG,GG),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(wO,HG):2===i&&t.add(wO,GG)}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Ir),rt(Gn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const eAe=new vt("cdk-dir-doc",{providedIn:"root",factory:function tAe(){return zt(Gn)}}),nAe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let qf=(()=>{class n{constructor(t){this.value="ltr",this.change=new tn,t&&(this.value=function iAe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?nAe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(eAe,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ny=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({})}return n})();const uAe=new vt("mat-sanity-checks",{providedIn:"root",factory:function dAe(){return!0}});let Fi=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!dO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(rt(WG),rt(uAe,8),rt(Gn))};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[Ny,Ny]})}return n})();function fA(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=ui(e)}constructor(...e){super(...e),this._disabled=!1}}}function Fy(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function pA(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ui(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function mA(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Za(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class mAe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const qG=$f({passive:!0,capture:!0});class gAe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Ud(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,qG)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,qG)))}}const KG={enterDuration:225,exitDuration:150},JG=$f({passive:!0,capture:!0}),ZG=["mousedown","touchstart"],QG=["mouseup","mouseleave","touchend","touchcancel"];class By{static#e=this._eventManager=new gAe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Vd(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...KG,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const s=i.radius||function bAe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=c-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,y="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,E=new mAe(this,d,i,y);d.style.transform="scale3d(1, 1, 1)",E.state=0,i.persistent||(this._mostRecentTransientRipple=E);let M=null;return!y&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const H=()=>this._finishRippleTransition(E),$=()=>this._destroyRipple(E);d.addEventListener("transitionend",H),d.addEventListener("transitioncancel",$),M={onTransitionEnd:H,onTransitionCancel:$}}),this._activeRipples.set(E,M),(y||!l)&&this._finishRippleTransition(E),E}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...KG,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Vd(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,ZG.forEach(i=>{By._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{QG.forEach(t=>{this._triggerElement.addEventListener(t,this,JG)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=UG(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!VG(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(ZG.forEach(t=>By._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&QG.forEach(t=>e.removeEventListener(t,this,JG)))}}const jy=new vt("mat-ripple-global-options");let kg=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new By(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(ze(vn),ze(nn),ze(Ir),ze(jy,8),ze(Vr,8))};static#t=this.\u0275dir=jt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Fn("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),Og=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[Fi,Fi]})}return n})();const SAe=["addListener","removeListener"],CAe=["addEventListener","removeEventListener"],MAe=["on","off"];function Kf(n,e,t,i){if(L(t)&&(i=t,t=void 0),i)return Kf(n,e,t).pipe(xy(i));const[r,o]=function DAe(n){return L(n.addEventListener)&&L(n.removeEventListener)}(n)?CAe.map(s=>a=>n[s](e,a,t)):function TAe(n){return L(n.addListener)&&L(n.removeListener)}(n)?SAe.map(l9(n,e)):function IAe(n){return L(n.on)&&L(n.off)}(n)?MAe.map(l9(n,e)):[];if(!r&&da(n))return ve(s=>Kf(s,e,t))(Li(n));if(!r)throw new TypeError("Invalid event target");return new Ye(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function l9(n,e){return t=>i=>n[t](e,i)}const Uy={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Uy;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new T(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Uy;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Uy;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class kAe extends pO{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class RAe extends fO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Uy.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(Uy.cancelAnimationFrame(t),e._scheduled=void 0)}});let SO,PAe=1;const _A={};function d9(n){return n in _A&&(delete _A[n],!0)}const NAe={setImmediate(n){const e=PAe++;return _A[e]=!0,SO||(SO=Promise.resolve()),SO.then(()=>d9(e)&&n()),e},clearImmediate(n){d9(n)}},{setImmediate:FAe,clearImmediate:LAe}=NAe,bA={setImmediate(...n){const{delegate:e}=bA;return(e?.setImmediate||FAe)(...n)},clearImmediate(n){const{delegate:e}=bA;return(e?.clearImmediate||LAe)(n)},delegate:void 0};new class jAe extends pO{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class BAe extends fO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=bA.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(bA.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function CO(n=0,e,t=MEe){let i=-1;return null!=e&&(Xe(e)?t=e:i=e),new Ye(r=>{let o=function zAe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function u9(n,e=sA){return function VAe(n){return fe((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const l=r;r=null,t.next(l)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(ee(t,l=>{i=!0,r=l,o||Li(n(l)).subscribe(o=ee(t,a,c))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>CO(n,e))}let h9=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new U,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ye(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(u9(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Wt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(vi(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Vd(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Kf(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(nn),rt(Ir),rt(Gn,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MO=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new U,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(u9(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Ir),rt(nn),rt(Gn,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class TO{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class vA extends TO{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class xA extends TO{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class WAe extends TO{constructor(e){super(),this.element=e instanceof vn?e.nativeElement:e}}class IO{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof vA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof xA?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof WAe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class $Ae extends IO{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ur.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let wA=(()=>{class n extends IO{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new tn,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(ze(Ac),ze($o),ze(Gn))};static#t=this.\u0275dir=jt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[pn]})}return n})();const p9=mEe();class YAe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ro(-this._previousScrollPosition.left),e.style.top=ro(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),p9&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),p9&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class XAe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(vi(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class m9{enable(){}disable(){}attach(){}}function DO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function g9(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class qAe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();DO(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let KAe=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new m9,this.close=s=>new XAe(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new YAe(this._viewportRuler,this._document),this.reposition=s=>new qAe(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static#e=this.\u0275fac=function(i){return new(i||n)(rt(h9),rt(MO),rt(nn),rt(Gn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class RO{constructor(e){if(this.scrollStrategy=new m9,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class JAe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let _9=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZAe=(()=>{class n extends _9{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn),rt(nn,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QAe=(()=>{class n extends _9{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Ud(o)},this._clickListener=o=>{const s=Ud(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const d=c[l];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(s)||d.overlayElement.contains(a))break;const h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn),rt(Ir),rt(nn,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EA=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||dO()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),dO()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn),rt(Ir))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class zy{constructor(e,t,i,r,o,s,a,c,l,d=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new U,this._attachments=new U,this._detachments=new U,this._locationChanges=T.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new U,this._outsidePointerEvents=new U,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Qi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ro(this._config.width),e.height=ro(this._config.height),e.minWidth=ro(this._config.minWidth),e.minHeight=ro(this._config.minHeight),e.maxWidth=ro(this._config.maxWidth),e.maxHeight=ro(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=aA(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(cr(Rr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const b9="cdk-overlay-connected-position-bounding-box",eSe=/([A-Za-z%]+)$/;class tSe{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new U,this._resizeSubscription=T.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(b9),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),d=this._getOverlayFit(l,t,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,l,i)?o.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(o.length){let a=null,c=-1;for(const l of o){const d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Jf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(b9),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=v9(t);let{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let f=0-a,m=a+o.height-i.height,y=this._subtractOverflows(o.width,0-s,s+o.width-i.width),E=this._subtractOverflows(o.height,f,m),M=y*E;return{visibleArea:M,isCompletelyWithinViewport:o.width*o.height===M,fitsInViewportVertically:E===o.height,fitsInViewportHorizontally:y==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=y9(this._overlayRef.getConfig().minHeight),a=y9(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=v9(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0);let d=0,h=0;return d=r.width<=o.width?l||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,h=r.height<=o.height?c||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new JAe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,h,f;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),y=this._lastBoundingBoxSize.height;o=2*m,s=e.y-m,o>y&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-y/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)f=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,d=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),y=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>y&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-y/2)}return{top:s,left:h,bottom:a,right:f,width:d,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=ro(i.height),r.top=ro(i.top),r.bottom=ro(i.bottom),r.width=ro(i.width),r.left=ro(i.left),r.right=ro(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=ro(o)),s&&(r.maxWidth=ro(s))}this._lastBoundingBoxSize=i,Jf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Jf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Jf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Jf(i,this._getExactOverlayY(t,e,d)),Jf(i,this._getExactOverlayX(t,e,d))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=ro(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=ro(s.maxWidth):o&&(i.maxWidth="")),Jf(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=ro(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=ro(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:g9(e,i),isOriginOutsideView:DO(e,i),isOverlayClipped:g9(t,i),isOverlayOutsideView:DO(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&aA(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof vn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Jf(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function y9(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(eSe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function v9(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const x9="cdk-global-overlay-wrapper";class nSe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(x9),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let m="",y="",E="";c?E="flex-start":"center"===d?(E="center",f?y=h:m=h):f?"left"===d||"end"===d?(E="flex-end",m=h):("right"===d||"start"===d)&&(E="flex-start",y=h):"left"===d||"start"===d?(E="flex-start",m=h):("right"===d||"end"===d)&&(E="flex-end",y=h),e.position=this._cssPosition,e.marginLeft=c?"0":m,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":y,t.justifyContent=E,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(x9),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let iSe=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new nSe}flexibleConnectedTo(t){return new tSe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(MO),rt(Gn),rt(Ir),rt(EA))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rSe=0,Ul=(()=>{class n{constructor(t,i,r,o,s,a,c,l,d,h,f,m){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=c,this._document=l,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=m}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new RO(t);return s.direction=s.direction||this._directionality.value,new zy(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+rSe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(pf)),new $Ae(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(KAe),rt(EA),rt(Ac),rt(iSe),rt(ZAe),rt(ur),rt(nn),rt(Gn),rt(qf),rt(y0),rt(QAe),rt(Vr,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zf(n,e){return{type:7,name:n,definitions:e,options:{}}}function Qa(n,e=null){return{type:4,styles:e,timings:n}}function go(n){return{type:6,styles:n,offset:null}}function ec(n,e,t){return{type:0,name:n,styles:e,options:t}}function Lc(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Hy(n){return new Ye(e=>{Li(n()).subscribe(e)})}function NO(n){return A(()=>n)}function L9(n,e){return e?t=>Ey(e.pipe(Qi(1),function WSe(){return fe((n,e)=>{n.subscribe(ee(e,V))})}()),t.pipe(L9(n))):ve((t,i)=>Li(n(t,i)).pipe(Qi(1),NO(t)))}function B9(n,e=sA){const t=CO(n,e);return L9(()=>t)}function H9(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return A(t=>{let i=t;for(let r=0;r<e;r++){const o=i?.[n[r]];if(!(typeof o<"u"))return;i=o}return i})}function Qf(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}g(1563);class CA{}class MA{}class Bc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class gCe{encodeKey(e){return G9(e)}encodeValue(e){return G9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const bCe=/%(\d[a-f0-9])/gi,yCe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function G9(n){return encodeURIComponent(n).replace(bCe,(e,t)=>yCe[t]??e)}function TA(n){return`${n}`}class lr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new gCe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function _Ce(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(TA):[TA(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new lr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(TA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(TA(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class oo{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function W9(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function $9(n){return typeof Blob<"u"&&n instanceof Blob}function Y9(n){return typeof FormData<"u"&&n instanceof FormData}class Wy{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function vCe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Bc),this.context||(this.context=new oo),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new lr,this.urlWithParams=t}serializeBody(){return null===this.body?null:W9(this.body)||$9(this.body)||Y9(this.body)||function xCe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof lr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Y9(this.body)?null:$9(this.body)?this.body.type||null:W9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new Wy(t,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var Pg=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Pg||{});class FO{constructor(e,t=200,i="OK"){this.headers=e.headers||new Bc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class LO extends FO{constructor(e={}){super(e),this.type=Pg.ResponseHeader}clone(e={}){return new LO({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ng extends FO{constructor(e={}){super(e),this.type=Pg.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ng({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class X9 extends FO{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function BO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ih=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Wy)o=t;else{let c,l;c=r.headers instanceof Bc?r.headers:new Bc(r.headers),r.params&&(l=r.params instanceof lr?r.params:new lr({fromObject:r.params})),o=new Wy(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Wt(o).pipe(function Gy(n,e){return L(e)?ve(n,e,1):ve(n,1)}(c=>this.handler.handle(c)));if(t instanceof Wy||"events"===r.observe)return s;const a=s.pipe(vi(c=>c instanceof Ng));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(A(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(A(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(A(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(A(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new lr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,BO(r,i))}post(t,i,r={}){return this.request("POST",t,BO(r,i))}put(t,i,r={}){return this.request("PUT",t,BO(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(CA))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();function J9(n,e){return e(n)}function ECe(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const SCe=new vt(""),$y=new vt(""),Z9=new vt("");function CCe(){let n=null;return(e,t)=>{null===n&&(n=(zt(SCe,{optional:!0})??[]).reduceRight(ECe,J9));const i=zt(Hw),r=i.add();return n(e,t).pipe(Qf(()=>i.remove(r)))}}let Q9=(()=>{class n extends CA{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=zt(Hw)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get($y),...this.injector.get(Z9,[])]));this.chain=r.reduceRight((o,s)=>function ACe(n,e,t){return(i,r)=>t.runInContext(()=>e(i,o=>n(o,r)))}(o,s,this.injector),J9)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Qf(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(MA),rt(ds))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const DCe=/^\)\]\}',?\n/;let t7=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Pt(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Bi(i.\u0275loadImpl()):Wt(null)).pipe(ke(()=>new Ye(o=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((E,M)=>s.setRequestHeader(E,M.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const E=t.detectContentTypeHeader();null!==E&&s.setRequestHeader("Content-Type",E)}if(t.responseType){const E=t.responseType.toLowerCase();s.responseType="json"!==E?E:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const E=s.statusText||"OK",M=new Bc(s.getAllResponseHeaders()),H=function RCe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new LO({headers:M,status:s.status,statusText:E,url:H}),c},d=()=>{let{headers:E,status:M,statusText:H,url:$}=l(),Y=null;204!==M&&(Y=typeof s.response>"u"?s.responseText:s.response),0===M&&(M=Y?200:0);let pe=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof Y){const De=Y;Y=Y.replace(DCe,"");try{Y=""!==Y?JSON.parse(Y):null}catch(Ve){Y=De,pe&&(pe=!1,Y={error:Ve,text:Y})}}pe?(o.next(new Ng({body:Y,headers:E,status:M,statusText:H,url:$||void 0})),o.complete()):o.error(new X9({error:Y,headers:E,status:M,statusText:H,url:$||void 0}))},h=E=>{const{url:M}=l(),H=new X9({error:E,status:s.status||0,statusText:s.statusText||"Unknown Error",url:M||void 0});o.error(H)};let f=!1;const m=E=>{f||(o.next(l()),f=!0);let M={type:Pg.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(M.total=E.total),"text"===t.responseType&&s.responseText&&(M.partialText=s.responseText),o.next(M)},y=E=>{let M={type:Pg.UploadProgress,loaded:E.loaded};E.lengthComputable&&(M.total=E.total),o.next(M)};return s.addEventListener("load",d),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",m),null!==a&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:Pg.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",d),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",m),null!==a&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(K4))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const jO=new vt("XSRF_ENABLED"),n7=new vt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),i7=new vt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class r7{}let PCe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=B4(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Gn),rt(ma),rt(n7))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();function NCe(n,e){const t=n.url.toLowerCase();if(!zt(jO)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=zt(r7).getToken(),r=zt(i7);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var rh=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(rh||{});function FCe(...n){const e=[ih,t7,Q9,{provide:CA,useExisting:Q9},{provide:MA,useExisting:t7},{provide:$y,useValue:NCe,multi:!0},{provide:jO,useValue:!0},{provide:r7,useClass:PCe}];for(const t of n)e.push(...t.\u0275providers);return function Nb(n){return{\u0275providers:n}}(e)}const o7=new vt("LEGACY_INTERCEPTOR_FN");function LCe(){return function ep(n,e){return{\u0275kind:n,\u0275providers:e}}(rh.LegacyInterceptors,[{provide:o7,useFactory:CCe},{provide:$y,useExisting:o7,multi:!0}])}let s7=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({providers:[FCe(LCe())]})}return n})();const HCe=["*"];let DA;function Yy(n){return function GCe(){if(void 0===DA&&(DA=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(DA=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return DA}()?.createHTML(n)||n}function a7(n){return Error(`Unable to find icon with the name "${n}"`)}function c7(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function l7(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class tp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let RA=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new tp(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const s=this._sanitizer.sanitize(Jr.HTML,r);if(!s)throw l7(r);const a=Yy(s);return this._addSvgIconConfig(t,i,new tp("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new tp(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(Jr.HTML,i);if(!o)throw l7(i);const s=Yy(o);return this._addSvgIconSetConfig(t,new tp("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Jr.RESOURCE_URL,t);if(!i)throw c7(t);const r=this._cachedIconsByUrl.get(i);return r?Wt(kA(r)):this._loadSvgIconFromConfig(new tp(t,null)).pipe(Oi(o=>this._cachedIconsByUrl.set(i,o)),A(o=>kA(o)))}getNamedSvgIcon(t,i=""){const r=d7(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):Ld(a7(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Wt(kA(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(A(i=>kA(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Wt(r):wy(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Ka(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(Jr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),Wt(null)})))).pipe(A(()=>{const s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw a7(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Oi(i=>t.svgText=i),A(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Wt(null):this._fetchIcon(t).pipe(Oi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(Yy("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Yy("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function WCe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(Jr.RESOURCE_URL,i);if(!s)throw c7(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(A(l=>Yy(l)),Qf(()=>this._inProgressUrlFetches.delete(s)),ts());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(d7(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return YCe(o)?new tp(o.url,null,o.options):new tp(o,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ih,8),rt(S0),rt(Gn,8),rt(ga))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kA(n){return n.cloneNode(!0)}function d7(n,e){return n+":"+e}function YCe(n){return!(!n.url||!n.options)}const XCe=Fy(class{constructor(n){this._elementRef=n}}),qCe=new vt("MAT_ICON_DEFAULT_OPTIONS"),KCe=new vt("mat-icon-location",{providedIn:"root",factory:function JCe(){const n=zt(Gn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),u7=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ZCe=u7.map(n=>`[${n}]`).join(", "),QCe=/^url\(['"]?#(.*?)['"]?\)$/;let Fg=(()=>{class n extends XCe{get inline(){return this._inline}set inline(t){this._inline=ui(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,s,a){super(t),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=T.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(ZCe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)u7.forEach(s=>{const a=i[o],c=a.getAttribute(s),l=c?c.match(QCe):null;if(l){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Qi(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(ze(vn),ze(RA),bc("aria-hidden"),ze(KCe),ze(ga),ze(qCe,8))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(Ei("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Fn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[pn],ngContentSelectors:HCe,decls:1,vars:0,template:function(i,r){1&i&&(zr(),Nn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})();function CMe(n,e){}class OA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let b7=(()=>{class n extends IO{constructor(t,i,r,o,s,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=nA(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=nA();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=nA())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(ze(vn),ze(xO),ze(Gn,8),ze(OA),ze(uA),ze(nn),ze(zy),ze(nh))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Ni(wA,7),2&i){let o;Bn(o=jn())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Ei("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[pn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&hn(0,CMe,0,0,"ng-template",0)},dependencies:[wA],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class VO{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new U,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Fc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const y7=new vt("DialogScrollStrategy"),MMe=new vt("DialogData"),TMe=new vt("DefaultDialogConfig");let RMe=0,v7=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,o,s,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new U,this._afterOpenedAtThisLevel=new U,this._ariaHiddenElements=new Map,this.afterAllClosed=Hy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ja(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new OA,...i}).id=i.id||"cdk-dialog-"+RMe++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new VO(s,i),c=this._attachContainer(s,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){zO(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){zO(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),zO(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new RO({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:OA,useValue:r},{provide:VO,useValue:i},{provide:zy,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=b7;const c=new vA(a,r.viewContainerRef,ur.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,o){if(t instanceof Va){const s=this._createInjector(o,i,r,void 0);let a={$implicit:o.data,dialogRef:i};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new xA(t,null,a,s))}else{const s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new vA(t,o.viewContainerRef,s,o.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,o){const s=t.injector||t.viewContainerRef?.injector,a=[{provide:MMe,useValue:t.data},{provide:VO,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!s||!s.get(qf,null,{optional:!0}))&&a.push({provide:qf,useValue:{value:t.direction,change:Wt()}}),ur.create({parent:s||o,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Ul),rt(ur),rt(TMe,8),rt(n,12),rt(EA),rt(y7))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();function zO(n,e){let t=n.length;for(;t--;)e(n[t])}function OMe(n,e){}class PA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const HO="mdc-dialog--open",x7="mdc-dialog--opening",w7="mdc-dialog--closing";let FMe=(()=>{class n extends b7{constructor(t,i,r,o,s,a,c,l){super(t,i,r,o,s,a,c,l),this._animationStateChanged=new tn}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(i){return new(i||n)(ze(vn),ze(xO),ze(Gn,8),ze(PA),ze(uA),ze(nn),ze(zy),ze(nh))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ng-component"]],features:[pn],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();const E7="--mat-dialog-transition-duration";function A7(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?Za(n.substring(0,n.length-2)):n.endsWith("s")?1e3*Za(n.substring(0,n.length-1)):"0"===n?0:null}let LMe=(()=>{class n extends FMe{constructor(t,i,r,o,s,a,c,l,d){super(t,i,r,o,s,a,c,d),this._animationMode=l,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?A7(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?A7(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(E7,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(x7,HO)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(HO),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(HO),this._animationsEnabled?(this._hostElement.style.setProperty(E7,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(w7)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(x7,w7)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(i){return new(i||n)(ze(vn),ze(xO),ze(Gn,8),ze(PA),ze(uA),ze(nn),ze(zy),ze(Vr,8),ze(nh))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(xl("id",r._config.id),Ei("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Fn("_mat-animation-noopable",!r._animationsEnabled))},features:[pn],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(St(0,"div",0)(1,"div",1),hn(2,OMe,0,0,"ng-template",2),Rt()())},dependencies:[wA],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return n})();class GO{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new U,this._beforeClosed=new U,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(vi(r=>"opened"===r.state),Qi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(vi(r=>"closed"===r.state),Qi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Rr(this.backdropClick(),this.keydownEvents().pipe(vi(r=>27===r.keyCode&&!this.disableClose&&!Fc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function BMe(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(vi(t=>"closing"===t.state),Qi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const S7=new vt("MatMdcDialogData"),jMe=new vt("mat-mdc-dialog-default-options"),C7=new vt("mat-mdc-dialog-scroll-strategy");let zMe=0,HMe=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,o,s,a,c,l,d,h){this._overlay=t,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=c,this._dialogContainerType=l,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new U,this._afterOpenedAtThisLevel=new U,this._idPrefix="mat-dialog-",this.dialogConfigClass=PA,this.afterAllClosed=Hy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ja(void 0))),this._scrollStrategy=a,this._dialog=i.get(v7)}open(t,i){let r;(i={...this._defaultOptions||new PA,...i}).id=i.id||`${this._idPrefix}${zMe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:OA,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,c)=>(r=new this._dialogRefConstructor(s,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){Ou()};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),NA=(()=>{class n extends HMe{constructor(t,i,r,o,s,a,c,l){super(t,i,o,a,c,s,GO,LMe,S7,l),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||n)(rt(Ul),rt(ur),rt(y0,8),rt(jMe,8),rt(C7),rt(n,12),rt(EA),rt(Vr,8))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),GMe=0,M7=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+GMe++}ngOnInit(){this._dialogRef||(this._dialogRef=function WMe(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const t=this._dialogRef?._containerInstance?._ariaLabelledByQueue;t&&Promise.resolve().then(()=>{const i=t.indexOf(this.id);i>-1&&t.splice(i,1)})}static#e=this.\u0275fac=function(i){return new(i||n)(ze(GO,8),ze(vn),ze(NA))};static#t=this.\u0275dir=jt({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&xl("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]})}return n})(),T7=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=jt({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]})}return n})(),R7=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const k7=new vt("CdkAccordion");let $Me=0,YMe=(()=>{class n{get expanded(){return this._expanded}set expanded(t){t=ui(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=ui(t)}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=T.EMPTY,this.closed=new tn,this.opened=new tn,this.destroyed=new tn,this.expandedChange=new tn,this.id="cdk-accordion-child-"+$Me++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#e=this.\u0275fac=function(i){return new(i||n)(ze(k7,12),ze(eo),ze(R7))};static#t=this.\u0275dir=jt({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[di([{provide:k7,useValue:void 0}])]})}return n})();const qMe=["body"];function KMe(n,e){}const JMe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],ZMe=["mat-expansion-panel-header","*","mat-action-row"];function QMe(n,e){1&n&&Un(0,"span",2),2&n&&Bt("@indicatorRotate",Ln()._getExpandedState())}const eTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],tTe=["mat-panel-title","mat-panel-description","*"],O7=new vt("MAT_ACCORDION"),P7="225ms cubic-bezier(0.4,0.0,0.2,1)",N7={indicatorRotate:Zf("indicatorRotate",[ec("collapsed, void",go({transform:"rotate(0deg)"})),ec("expanded",go({transform:"rotate(180deg)"})),Lc("expanded <=> collapsed, void => collapsed",Qa(P7))]),bodyExpansion:Zf("bodyExpansion",[ec("collapsed, void",go({height:"0px",visibility:"hidden"})),ec("expanded",go({height:"*",visibility:""})),Lc("expanded <=> collapsed, void => collapsed",Qa(P7))])},F7=new vt("MAT_EXPANSION_PANEL");let nTe=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||n)(ze(Va),ze(F7,8))};static#t=this.\u0275dir=jt({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]})}return n})(),iTe=0;const L7=new vt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let B7=(()=>{class n extends YMe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=ui(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,o,s,a,c){super(t,i,r),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new tn,this.afterCollapse=new tn,this._inputChanges=new U,this._headerId="mat-expansion-panel-header-"+iTe++,this._bodyAnimationDone=new U,this.accordion=t,this._document=s,this._bodyAnimationDone.pipe(je((l,d)=>l.fromState===d.fromState&&l.toState===d.toState)).subscribe(l=>{"void"!==l.fromState&&("expanded"===l.toState?this.afterExpand.emit():"collapsed"===l.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ja(null),vi(()=>this.expanded&&!this._portal),Qi(1)).subscribe(()=>{this._portal=new xA(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}static#e=this.\u0275fac=function(i){return new(i||n)(ze(O7,12),ze(eo),ze(R7),ze($o),ze(Gn),ze(Vr,8),ze(L7,8))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&function Qr(n,e,t,i){const r=Kn();if(r.firstCreatePass){const o=qr();T3(r,new S3(e,t,i),o.index),function eQ(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}M3(r,Dt(),t)}(o,nTe,5),2&i){let s;Bn(s=jn())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&Ni(qMe,5),2&i){let o;Bn(o=jn())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Fn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[di([{provide:O7,useValue:void 0},{provide:F7,useExisting:n}]),pn,Sr],ngContentSelectors:ZMe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){1&i&&(zr(JMe),Nn(0),St(1,"div",0,1),mn("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),St(3,"div",2),Nn(4,1),hn(5,KMe,0,0,"ng-template",3),Rt(),Nn(6,2),Rt()),2&i&&(Ot(1),Bt("@bodyExpansion",r._getExpandedState())("id",r.id),Ei("aria-labelledby",r._headerId),Ot(4),Bt("cdkPortalOutlet",r._portal))},dependencies:[wA],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[N7.bodyExpansion]},changeDetection:0})}return n})();class rTe{}const oTe=mA(rTe);let sTe=(()=>{class n extends oTe{constructor(t,i,r,o,s,a,c){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=T.EMPTY;const l=t.accordion?t.accordion._stateChanges.pipe(vi(d=>!(!d.hideToggle&&!d.togglePosition))):te;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=Rr(t.opened,t.closed,l,t._inputChanges.pipe(vi(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(vi(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Fc(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||n)(ze(B7,1),ze(vn),ze(nh),ze(eo),ze(L7,8),ze(Vr,8),bc("tabindex"))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&mn("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(Ei("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),kw("height",r._getHeaderHeight()),Fn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[pn],ngContentSelectors:tTe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(i,r){1&i&&(zr(eTe),St(0,"span",0),Nn(1),Nn(2,1),Nn(3,2),Rt(),hn(4,QMe,1,1,"span",1)),2&i&&(Fn("mat-content-hide-toggle",!r._showToggle()),Ot(4),Bt("ngIf",r._showToggle()))},dependencies:[Dc],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[N7.indicatorRotate]},changeDetection:0})}return n})();function j7(n,e,t){return t?j7(n,e).pipe(xy(t)):new Ye(i=>{const r=(...s)=>i.next(1===s.length?s[0]:s),o=n(r);return L(e)?()=>e(r,o):void 0})}function FA(){return fe((n,e)=>{let t=null;n._refCount++;const i=ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class $O extends Ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,tt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new T;const t=this.getSubject();e.add(this.source.subscribe(ee(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=T.EMPTY)}return e}refCount(){return FA()(this)}}const lTe={connector:()=>new U};function U7(n,e=lTe){const{connector:t}=e;return fe((i,r)=>{const o=t();Li(n(function cTe(n){return new Ye(e=>n.subscribe(e))}(o))).subscribe(r),r.add(i.subscribe(o))})}function V7(n,e){const t=L(n)?n:()=>n;return L(e)?U7(e,{connector:t}):i=>new $O(i,t)}function YO(...n){const e=wt(n);return fe((t,i)=>{const r=n.length,o=new Array(r);let s=n.map(()=>!1),a=!1;for(let c=0;c<r;c++)Li(n[c]).subscribe(ee(i,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(Ae))&&(s=null))},V));t.subscribe(ee(i,c=>{if(a){const l=[c,...o];i.next(e?e(...l):l)}}))})}const{isArray:hTe}=Array;function fTe(n){return 1===n.length&&hTe(n[0])?n[0]:n}function H7(...n){const e=wt(n);return e?qe(H7(...n),xy(e)):fe((t,i)=>{Uz([t,...fTe(n)])(i)})}const mTe=["youtubeContainer"];let $7=(()=>{class n{get videoId(){return this._videoId.value}set videoId(t){this._videoId.next(t)}get height(){return this._height.value}set height(t){this._height.next(t||390)}get width(){return this._width.value}set width(t){this._width.next(t||640)}set startSeconds(t){this._startSeconds.next(t)}set endSeconds(t){this._endSeconds.next(t)}set suggestedQuality(t){this._suggestedQuality.next(t)}get playerVars(){return this._playerVars.value}set playerVars(t){this._playerVars.next(t)}get disableCookies(){return this._disableCookies.value}set disableCookies(t){this._disableCookies.next(!!t)}constructor(t,i){this._ngZone=t,this._youtubeContainer=new U,this._destroyed=new U,this._playerChanges=new hi(void 0),this._videoId=new hi(void 0),this._height=new hi(390),this._width=new hi(640),this._startSeconds=new hi(void 0),this._endSeconds=new hi(void 0),this._suggestedQuality=new hi(void 0),this._playerVars=new hi(void 0),this._disableCookies=new hi(!1),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=Lu(i)}ngOnInit(){if(!this._isBrowser)return;let t=Wt(!0);if(!window.YT||!window.YT.Player){const o=new U;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>o.next(!0))},t=o.pipe(Qi(1),Ja(!1))}const i=this._disableCookies.pipe(A(o=>o?"https://www.youtube-nocookie.com":void 0)),r=function yTe(n,e,t,i,r,o,s,a){const c=qa([e,t,s]).pipe(YO(qa([r,o])),A(([l,d])=>{const[h,f,m]=l,[y,E]=d;if(h||m?.list&&m?.listType)return{videoId:h,playerVars:m,width:y,height:E,host:f}}));return qa([n,c,Wt(a)]).pipe(function vTe(n){return qe(H7(n),function pTe(n){return fe((e,t)=>{let i=!1,r=0;e.subscribe(ee(t,o=>(i||(i=!n(o,r++)))&&t.next(o)))})}(([e,t])=>!t),A(([e])=>e))}(i),function z7(n,e){return fe(function uTe(n,e,t,i,r){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ee(s,d=>{const h=l++;c=a?n(c,d,h):(a=!0,d),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}(xTe,void 0),je())}(this._youtubeContainer,this._videoId,i,t,this._width,this._height,this._playerVars,this._ngZone).pipe(Oi(o=>{this._playerChanges.next(o)}),function bTe(n){return ve(e=>e?Y7(e)?Wt(e):new Ye(t=>{let i=!1,r=!1;const o=s=>{r=!0,i||(s.target.removeEventListener("onReady",o),t.next(s.target))};return e.addEventListener("onReady",o),()=>{i=!0,r||n(e)}}).pipe(Qi(1),Ja(void 0)):Wt(void 0))}(o=>{Y7(o)||o.destroy()}),cr(this._destroyed),function dTe(n){return n?e=>U7(n)(e):e=>V7(new U)(e)}());r.subscribe(o=>{this._player=o,o&&this._pendingPlayerState&&this._initializePlayer(o,this._pendingPlayerState),this._pendingPlayerState=void 0}),function gTe(n,e,t){qa([n,e,t]).subscribe(([i,r,o])=>i&&i.setSize(r,o))}(r,this._width,this._height),function _Te(n,e){qa([n,e]).subscribe(([t,i])=>t&&i&&t.setPlaybackQuality(i))}(r,this._suggestedQuality),function wTe(n,e,t,i,r,o){const s=qa([t,i]).pipe(A(([d,h])=>({startSeconds:d,endSeconds:h}))),a=s.pipe(XO(n,d=>!!d&&!function ETe(n){const e=n.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),c=e.pipe(XO(n,(d,h)=>!!d&&d.videoId!==h));Rr(n.pipe(XO(qa([e,s]),([d,h],f)=>!(!f||d==f.videoId&&!h.startSeconds&&!h.endSeconds))),c,a).pipe(YO(qa([n,e,s,r])),A(([d,h])=>h),cr(o)).subscribe(([d,h,f,m])=>{!h||!d||(d.videoId=h,d.cueVideoById({videoId:h,suggestedQuality:m,...f}))})}(r,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),r.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(t,i){const{playbackState:r,playbackRate:o,volume:s,muted:a,seek:c}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=o&&t.setPlaybackRate(o),null!=s&&t.setVolume(s),null!=a&&(a?t.mute():t.unMute()),null!=c&&t.seekTo(c.seconds,c.allowSeekAhead)}_getLazyEmitter(t){return this._playerChanges.pipe(ke(i=>i?j7(r=>{i.addEventListener(t,r)},r=>{try{i.removeEventListener&&i.removeEventListener(t,r)}catch{}}):Wt()),i=>new Ye(r=>i.subscribe({next:o=>this._ngZone.run(()=>r.next(o)),error:o=>r.error(o),complete:()=>r.complete()})),cr(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||n)(ze(nn),ze(ma))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Ni(mTe,5),2&i){let o;Bn(o=jn())&&(r.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:"disableCookies",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(i,r){1&i&&Un(0,"div",null,0)},encapsulation:2,changeDetection:0})}return n})();function xTe(n,[e,t,i]){if(n&&t&&(n.playerVars!==t.playerVars||n.host!==t.host))n.destroy();else{if(!t)return void(n&&n.destroy());if(n)return n}const r=i.runOutsideAngular(()=>new YT.Player(e,t));return r.videoId=t.videoId,r.playerVars=t.playerVars,r.host=t.host,r}function Y7(n){return"getPlayerStatus"in n}function XO(n,e){return qe(YO(n),vi(([t,i])=>e(i,t)),A(([t])=>t))}function X7(n=STe){return fe((e,t)=>{let i=!1;e.subscribe(ee(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function STe(){return new vy}let ip={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const K7=/[&<>"']/,MTe=new RegExp(K7.source,"g"),J7=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,TTe=new RegExp(J7.source,"g"),ITe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z7=n=>ITe[n];function gs(n,e){if(e){if(K7.test(n))return n.replace(MTe,Z7)}else if(J7.test(n))return n.replace(TTe,Z7);return n}const DTe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Q7(n){return n.replace(DTe,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const RTe=/(^|[^\[])\^/g;function er(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(i,r)=>(r=(r=r.source||r).replace(RTe,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}const kTe=/[^\w:]/g,OTe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function eW(n,e,t){if(n){let i;try{i=decodeURIComponent(Q7(t)).replace(kTe,"").toLowerCase()}catch{return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!OTe.test(t)&&(t=function LTe(n,e){LA[" "+n]||(LA[" "+n]=PTe.test(n)?n+"/":jA(n,"/",!0));const t=-1===(n=LA[" "+n]).indexOf(":");return"//"===e.substring(0,2)?t?e:n.replace(NTe,"$1")+e:"/"===e.charAt(0)?t?e:n.replace(FTe,"$1")+e:n+e}(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const LA={},PTe=/^[^:]+:\/*[^/]*$/,NTe=/^([^:]+:)[\s\S]*$/,FTe=/^([^:]+:\/*[^/]*)[\s\S]*$/,BA={exec:function(){}};function tW(n,e){const i=n.replace(/\|/g,(o,s,a)=>{let c=!1,l=s;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function jA(n,e,t){const i=n.length;if(0===i)return"";let r=0;for(;r<i;){const o=n.charAt(i-r-1);if(o!==e||t){if(o===e||!t)break;r++}else r++}return n.slice(0,i-r)}function nW(n,e){if(e<1)return"";let t="";for(;e>1;)1&e&&(t+=n),e>>=1,n+=n;return t+n}function iW(n,e,t,i){const r=e.href,o=e.title?gs(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:o,text:gs(s)}}class qO{constructor(e){this.options=e||ip}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:jA(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=function UTe(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const i=t[1];return e.split("\n").map(r=>{const o=r.match(/^\s+/);if(null===o)return r;const[s]=o;return s.length>=i.length?r.slice(i.length):r}).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=jA(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=t[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,r,o,s,a,c,l,d,h,f,m,y,E=t[1].trim();const M=E.length>1,H={type:"list",raw:"",ordered:M,start:M?+E.slice(0,-1):"",loose:!1,items:[]};E=M?`\\d{1,9}\\${E.slice(-1)}`:`\\${E}`,this.options.pedantic&&(E=M?E:"[*+-]");const $=new RegExp(`^( {0,3}${E})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(y=!1,(t=$.exec(e))&&!this.rules.block.hr.test(e));){if(i=t[0],e=e.substring(i.length),d=t[2].split("\n",1)[0].replace(/^\t+/,pe=>" ".repeat(3*pe.length)),h=e.split("\n",1)[0],this.options.pedantic?(s=2,m=d.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,m=d.slice(s),s+=t[1].length),c=!1,!d&&/^ *$/.test(h)&&(i+=h+"\n",e=e.substring(h.length+1),y=!0),!y){const pe=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),De=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Ve=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),nt=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(f=e.split("\n",1)[0],h=f,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Ve.test(h)||nt.test(h)||pe.test(h)||De.test(e)));){if(h.search(/[^ ]/)>=s||!h.trim())m+="\n"+h.slice(s);else{if(c||d.search(/[^ ]/)>=4||Ve.test(d)||nt.test(d)||De.test(d))break;m+="\n"+h}!c&&!h.trim()&&(c=!0),i+=f+"\n",e=e.substring(f.length+1),d=h.slice(s)}}H.loose||(l?H.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(m),r&&(o="[ ] "!==r[0],m=m.replace(/^\[[ xX]\] +/,""))),H.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:m}),H.raw+=i}H.items[H.items.length-1].raw=i.trimRight(),H.items[H.items.length-1].text=m.trimRight(),H.raw=H.raw.trimRight();const Y=H.items.length;for(a=0;a<Y;a++)if(this.lexer.state.top=!1,H.items[a].tokens=this.lexer.blockTokens(H.items[a].text,[]),!H.loose){const pe=H.items[a].tokens.filter(Ve=>"space"===Ve.type),De=pe.length>0&&pe.some(Ve=>/\n.*\n/.test(Ve.raw));H.loose=De}if(H.loose)for(a=0;a<Y;a++)H.items[a].loose=!0;return H}}html(e){const t=this.rules.block.html.exec(e);if(t){const i={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(t[0]):gs(t[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:o}}}table(e){const t=this.rules.block.table.exec(e);if(t){const i={type:"table",header:tW(t[1]).map(r=>({text:r})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=t[0];let o,s,a,c,r=i.align.length;for(o=0;o<r;o++)i.align[o]=/^ *-+: *$/.test(i.align[o])?"right":/^ *:-+: *$/.test(i.align[o])?"center":/^ *:-+ *$/.test(i.align[o])?"left":null;for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=tW(i.rows[o],i.header.length).map(l=>({text:l}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(r=i.rows.length,s=0;s<r;s++)for(c=i.rows[s],a=0;a<c.length;a++)c[a].tokens=this.lexer.inline(c[a].text);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:gs(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):gs(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=jA(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function BTe(n,e){if(-1===n.indexOf(e[1]))return-1;const t=n.length;let i=0,r=0;for(;r<t;r++)if("\\"===n[r])r++;else if(n[r]===e[0])i++;else if(n[r]===e[1]&&(i--,i<0))return r;return-1}(t[2],"()");if(s>-1){const c=(0===t[0].indexOf("!")?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),iW(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return iW(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){const s=r[0].length-1;let a,c,l=s,d=0;const h="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);null!=(r=h.exec(t));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=a.length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&s%3&&!((s+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);const f=e.slice(0,s+r.index+(r[0].length-a.length)+c);if(Math.min(s,c)%2){const y=f.slice(1,-1);return{type:"em",raw:f,text:y,tokens:this.lexer.inlineTokens(y)}}const m=f.slice(2,-2);return{type:"strong",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=gs(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let r,o;return"@"===i[2]?(r=gs(this.options.mangle?t(i[1]):i[1]),o="mailto:"+r):(r=gs(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let r,o;if("@"===i[2])r=gs(this.options.mangle?t(i[0]):i[0]),o="mailto:"+r;else{let s;do{s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(s!==i[0]);r=gs(i[0]),o="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):gs(i[0]):i[0]:gs(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Tn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:BA,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Tn.def=er(Tn.def).replace("label",Tn._label).replace("title",Tn._title).getRegex(),Tn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Tn.listItemStart=er(/^( *)(bull) */).replace("bull",Tn.bullet).getRegex(),Tn.list=er(Tn.list).replace(/bull/g,Tn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Tn.def.source+")").getRegex(),Tn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Tn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Tn.html=er(Tn.html,"i").replace("comment",Tn._comment).replace("tag",Tn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Tn.paragraph=er(Tn._paragraph).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.blockquote=er(Tn.blockquote).replace("paragraph",Tn.paragraph).getRegex(),Tn.normal={...Tn},Tn.gfm={...Tn.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Tn.gfm.table=er(Tn.gfm.table).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.gfm.paragraph=er(Tn._paragraph).replace("hr",Tn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Tn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tn._tag).getRegex(),Tn.pedantic={...Tn.normal,html:er("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Tn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:BA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:er(Tn.normal._paragraph).replace("hr",Tn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Tn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const on={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:BA,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:BA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function VTe(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function rW(n){let t,i,e="";const r=n.length;for(t=0;t<r;t++)i=n.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}on._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",on.punctuation=er(on.punctuation).replace(/punctuation/g,on._punctuation).getRegex(),on.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,on.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,on._comment=er(Tn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),on.emStrong.lDelim=er(on.emStrong.lDelim).replace(/punct/g,on._punctuation).getRegex(),on.emStrong.rDelimAst=er(on.emStrong.rDelimAst,"g").replace(/punct/g,on._punctuation).getRegex(),on.emStrong.rDelimUnd=er(on.emStrong.rDelimUnd,"g").replace(/punct/g,on._punctuation).getRegex(),on._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,on._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,on._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,on.autolink=er(on.autolink).replace("scheme",on._scheme).replace("email",on._email).getRegex(),on._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,on.tag=er(on.tag).replace("comment",on._comment).replace("attribute",on._attribute).getRegex(),on._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,on._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,on._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,on.link=er(on.link).replace("label",on._label).replace("href",on._href).replace("title",on._title).getRegex(),on.reflink=er(on.reflink).replace("label",on._label).replace("ref",Tn._label).getRegex(),on.nolink=er(on.nolink).replace("ref",Tn._label).getRegex(),on.reflinkSearch=er(on.reflinkSearch,"g").replace("reflink",on.reflink).replace("nolink",on.nolink).getRegex(),on.normal={...on},on.pedantic={...on.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:er(/^!?\[(label)\]\((.*?)\)/).replace("label",on._label).getRegex(),reflink:er(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",on._label).getRegex()},on.gfm={...on.normal,escape:er(on.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},on.gfm.url=er(on.gfm.url,"i").replace("email",on.gfm._extended_email).getRegex(),on.breaks={...on.gfm,br:er(on.br).replace("{2,}","*").getRegex(),text:er(on.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class oh{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ip,this.options.tokenizer=this.options.tokenizer||new qO,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Tn.normal,inline:on.normal};this.options.pedantic?(t.block=Tn.pedantic,t.inline=on.pedantic):this.options.gfm&&(t.block=Tn.gfm,t.inline=this.options.breaks?on.breaks:on.gfm),this.tokenizer.rules=t}static get rules(){return{block:Tn,inline:on}}static lex(e,t){return new oh(t).lex(e)}static lexInline(e,t){return new oh(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,r,o,s;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(d){l=d.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=t[t.length-1],s&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,r,o,a,c,l,s=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+nW("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+nW("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(s));)s=s.slice(0,a.index+a[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,s,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,rW)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,rW))){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(function(m){f=m.call({lexer:this},h),"number"==typeof f&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o,VTe)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return t}}class qy{constructor(e){this.options=e||ip}code(e,t,i){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,r);null!=o&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+gs(r)+'">'+(i?e:gs(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:gs(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,i,r){return this.options.headerIds?`<h${t} id="${this.options.headerPrefix+r.slug(i)}">${e}</h${t}>\n`:`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,i){const r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){if(null===(e=eW(this.options.sanitize,this.options.baseUrl,e)))return i;let r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>",r}image(e,t,i){if(null===(e=eW(this.options.sanitize,this.options.baseUrl,e)))return i;let r=`<img src="${e}" alt="${i}"`;return t&&(r+=` title="${t}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class oW{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class sW{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do{r++,i=e+"-"+r}while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=r,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}}class sh{constructor(e){this.options=e||ip,this.options.renderer=this.options.renderer||new qy,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new oW,this.slugger=new sW}static parse(e,t){return new sh(t).parse(e)}static parseInline(e,t){return new sh(t).parseInline(e)}parse(e,t=!0){let r,o,s,a,c,l,d,h,f,m,y,E,M,H,$,Y,pe,De,Ve,i="";const nt=e.length;for(r=0;r<nt;r++)if(m=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(Ve=this.options.extensions.renderers[m.type].call({parser:this},m),!1!==Ve||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type)))i+=Ve||"";else switch(m.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":i+=this.renderer.heading(this.parseInline(m.tokens),m.depth,Q7(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue;case"code":i+=this.renderer.code(m.text,m.lang,m.escaped);continue;case"table":for(h="",d="",a=m.header.length,o=0;o<a;o++)d+=this.renderer.tablecell(this.parseInline(m.header[o].tokens),{header:!0,align:m.align[o]});for(h+=this.renderer.tablerow(d),f="",a=m.rows.length,o=0;o<a;o++){for(l=m.rows[o],d="",c=l.length,s=0;s<c;s++)d+=this.renderer.tablecell(this.parseInline(l[s].tokens),{header:!1,align:m.align[s]});f+=this.renderer.tablerow(d)}i+=this.renderer.table(h,f);continue;case"blockquote":f=this.parse(m.tokens),i+=this.renderer.blockquote(f);continue;case"list":for(y=m.ordered,E=m.start,M=m.loose,a=m.items.length,f="",o=0;o<a;o++)$=m.items[o],Y=$.checked,pe=$.task,H="",$.task&&(De=this.renderer.checkbox(Y),M?$.tokens.length>0&&"paragraph"===$.tokens[0].type?($.tokens[0].text=De+" "+$.tokens[0].text,$.tokens[0].tokens&&$.tokens[0].tokens.length>0&&"text"===$.tokens[0].tokens[0].type&&($.tokens[0].tokens[0].text=De+" "+$.tokens[0].tokens[0].text)):$.tokens.unshift({type:"text",text:De}):H+=De),H+=this.parse($.tokens,M),f+=this.renderer.listitem(H,pe,Y);i+=this.renderer.list(f,y,E);continue;case"html":i+=this.renderer.html(m.text);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(m.tokens));continue;case"text":for(f=m.tokens?this.parseInline(m.tokens):m.text;r+1<nt&&"text"===e[r+1].type;)m=e[++r],f+="\n"+(m.tokens?this.parseInline(m.tokens):m.text);i+=t?this.renderer.paragraph(f):f;continue;default:{const Ze='Token with "'+m.type+'" type was not found.';if(this.options.silent)return void console.error(Ze);throw new Error(Ze)}}return i}parseInline(e,t){t=t||this.renderer;let r,o,s,i="";const a=e.length;for(r=0;r<a;r++)if(o=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))i+=s||"";else switch(o.type){case"escape":case"text":i+=t.text(o.text);break;case"html":i+=t.html(o.text);break;case"link":i+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break;case"image":i+=t.image(o.href,o.title,o.text);break;case"strong":i+=t.strong(this.parseInline(o.tokens,t));break;case"em":i+=t.em(this.parseInline(o.tokens,t));break;case"codespan":i+=t.codespan(o.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(o.tokens,t));break;default:{const c='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return i}}class KO{constructor(e){this.options=e||ip}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}function aW(n,e){return(t,i,r)=>{"function"==typeof i&&(r=i,i=null);const o={...i},s=function zTe(n,e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const r="<p>An error occurred:</p><pre>"+gs(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):t?void t(null,r):r}if(e)return Promise.reject(i);if(!t)throw i;t(i)}}((i={...In.defaults,...o}).silent,i.async,r);if(typeof t>"u"||null===t)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(function jTe(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(i),i.hooks&&(i.hooks.options=i),r){const a=i.highlight;let c;try{i.hooks&&(t=i.hooks.preprocess(t)),c=n(t,i)}catch(h){return s(h)}const l=function(h){let f;if(!h)try{i.walkTokens&&In.walkTokens(c,i.walkTokens),f=e(c,i),i.hooks&&(f=i.hooks.postprocess(f))}catch(m){h=m}return i.highlight=a,h?s(h):r(null,f)};if(!a||a.length<3||(delete i.highlight,!c.length))return l();let d=0;return In.walkTokens(c,function(h){"code"===h.type&&(d++,setTimeout(()=>{a(h.text,h.lang,function(f,m){if(f)return l(f);null!=m&&m!==h.text&&(h.text=m,h.escaped=!0),d--,0===d&&l()})},0))}),void(0===d&&l())}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(a=>n(a,i)).then(a=>i.walkTokens?Promise.all(In.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>e(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(s);try{i.hooks&&(t=i.hooks.preprocess(t));const a=n(t,i);i.walkTokens&&In.walkTokens(a,i.walkTokens);let c=e(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return s(a)}}}function In(n,e,t){return aW(oh.lex,sh.parse)(n,e,t)}In.options=In.setOptions=function(n){return function CTe(n){ip=n}(In.defaults={...In.defaults,...n}),In},In.getDefaults=function q7(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},In.defaults=ip,In.use=function(...n){const e=In.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const i={...t};if(i.async=In.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers[r.name];e.renderers[r.name]=o?function(...s){let a=r.renderer.apply(this,s);return!1===a&&(a=o.apply(this,s)),a}:r.renderer}if(r.tokenizer){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),t.renderer){const r=In.defaults.renderer||new qy;for(const o in t.renderer){const s=r[o];r[o]=(...a)=>{let c=t.renderer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.renderer=r}if(t.tokenizer){const r=In.defaults.tokenizer||new qO;for(const o in t.tokenizer){const s=r[o];r[o]=(...a)=>{let c=t.tokenizer[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.tokenizer=r}if(t.hooks){const r=In.defaults.hooks||new KO;for(const o in t.hooks){const s=r[o];r[o]=KO.passThroughHooks.has(o)?a=>{if(In.defaults.async)return Promise.resolve(t.hooks[o].call(r,a)).then(l=>s.call(r,l));const c=t.hooks[o].call(r,a);return s.call(r,c)}:(...a)=>{let c=t.hooks[o].apply(r,a);return!1===c&&(c=s.apply(r,a)),c}}i.hooks=r}if(t.walkTokens){const r=In.defaults.walkTokens;i.walkTokens=function(o){let s=[];return s.push(t.walkTokens.call(this,o)),r&&(s=s.concat(r.call(this,o))),s}}In.setOptions(i)})},In.walkTokens=function(n,e){let t=[];for(const i of n)switch(t=t.concat(e.call(In,i)),i.type){case"table":for(const r of i.header)t=t.concat(In.walkTokens(r.tokens,e));for(const r of i.rows)for(const o of r)t=t.concat(In.walkTokens(o.tokens,e));break;case"list":t=t.concat(In.walkTokens(i.items,e));break;default:In.defaults.extensions&&In.defaults.extensions.childTokens&&In.defaults.extensions.childTokens[i.type]?In.defaults.extensions.childTokens[i.type].forEach(function(r){t=t.concat(In.walkTokens(i[r],e))}):i.tokens&&(t=t.concat(In.walkTokens(i.tokens,e)))}return t},In.parseInline=aW(oh.lexInline,sh.parseInline),In.Parser=sh,In.parser=sh.parse,In.Renderer=qy,In.TextRenderer=oW,In.Lexer=oh,In.lexer=oh.lex,In.Tokenizer=qO,In.Slugger=sW,In.Hooks=KO,In.parse=In;const HTe=["*"];let cW=(()=>{class n{constructor(){this._buttonClick$=new U,this.copied$=this._buttonClick$.pipe(ke(()=>Rr(Wt(!0),CO(3e3).pipe(NO(!1)))),je(),Bs(1)),this.copiedText$=this.copied$.pipe(Ja(!1),A(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Pn({type:n,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(St(0,"button",0),mn("click",function(){return r.onCopyToClipboardClick()}),Zr(1,"async"),li(2),Zr(3,"async"),Rt()),2&i&&(Fn("copied",Wo(1,3,r.copied$)),Ot(2),Io(Wo(3,5,r.copiedText$)))},dependencies:[w0],encapsulation:2,changeDetection:0})}return n})();class $Te{}var JO=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(JO||{});class XTe{}const lW=new vt("SECURITY_CONTEXT");let ZO=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,i,r,o,s,a){this.platform=t,this.securityContext=i,this.http=r,this.clipboardOptions=o,this.sanitizer=a,this.DEFAULT_MARKED_OPTIONS={renderer:new qy},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new U,this.reload$=this._reload$.asObservable(),this.options=s}parse(t,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:o,emoji:s,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions};a&&(this.renderer=this.extendRenderer(l.renderer||new qy));const d=this.trimIndentation(t),h=r?this.decodeHtml(d):d,f=s?this.parseEmoji(h):h,m=this.parseMarked(f,l,o);return(c?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(t,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:o,clipboardOptions:s,katex:a,katexOptions:c,mermaid:l,mermaidOptions:d}=i;o&&this.renderClipboard(t,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...s}),a&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...d}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(A(i=>this.handleExtension(t,i)))}highlight(t){if(!Lu(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!Lu(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}extendRenderer(t){const i=t;if(!0===i.\u0275NgxMarkdownRendererExtended)return t;const r=t.code;return t.code=function(o,s,a){return"mermaid"===s?`<div class="mermaid">${o}</div>`:r.call(this,o,s,a)},i.\u0275NgxMarkdownRendererExtended=!0,t}handleExtension(t,i){const r=t.lastIndexOf("://"),o=r>-1?t.substring(r+4):t,s=o.lastIndexOf("/"),a=s>-1?o.substring(s+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(t,i,r=!1){return r?In.parseInline(t,i):In.parse(t,i)}parseEmoji(t){if(!Lu(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,i){if(Lu(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,i)}}renderClipboard(t,i,r){if(!Lu(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:s}=r,a=t.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),d=document.createElement("div");d.style.position="relative",l.parentNode.insertBefore(d,l),d.appendChild(l);const h=document.createElement("div");let f,m;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",d.insertAdjacentElement("beforeend",h),l.onmouseover=()=>h.style.opacity="1",l.onmouseout=()=>h.style.opacity="0",f=o?i.createComponent(o).hostView:s?i.createEmbeddedView(s):i.createComponent(cW).hostView,f.rootNodes.forEach(y=>{y.onmouseover=()=>h.style.opacity="1",h.appendChild(y),m=new ClipboardJS(y,{text:()=>l.innerText})}),f.onDestroy(()=>m.destroy())}}renderMermaid(t,i=this.DEFAULT_MERMAID_OPTIONS){if(!Lu(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=t.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.init(r))}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let o=i;return r.length>0&&(o=isNaN(o)?r.search(/\S|$/):Math.min(r.search(/\S|$/),o)),isNaN(i)&&(i=o),o?r.substring(o):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ma),rt(lW),rt(ih,8),rt($Te,8),rt(XTe,8),rt(S0))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),dW=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(t){this._srcRelativeLink=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,i,r){this.element=t,this.markdownService=i,this.viewContainerRef=r,this.error=new tn,this.load=new tn,this.ready=new tn,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new U}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(cr(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,i=!1){let r;this.src&&this.srcRelativeLink&&(r={baseUrl:new URL(this.src,location.origin).pathname});const s={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=this.markdownService.parse(t,{decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:r,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,s,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t),this.load.emit(t)},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,JO.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,JO.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let o=0;o<r.length;o++){const s=i instanceof Array?i:[i];r.item(o).classList.add(...s)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let o=0;o<r.length;o++)Object.keys(i).forEach(s=>{const a=i[s];if(a){const c=this.toLispCase(s);r.item(o).setAttribute(c,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let o=0,s=i.length;o<s;o++)r=r.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||n)(ze(vn),ze(ZO),ze($o))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[Sr],ngContentSelectors:HTe,decls:1,vars:0,template:function(i,r){1&i&&(zr(),Nn(0))},encapsulation:2})}return n})();var uW;!function(n){let e;var r;let t,i;(r=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=n.LogLevel||(n.LogLevel={}))}(uW||(uW={}));let hW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=jt({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"]})}return n})();function Lg(n){return!0===n}function sa(n){return null===n||typeof n>"u"}function _s(n){return!sa(n)}function QO(n){return!!n}function bW(n){return sa(n)?n:JSON.parse(JSON.stringify(n))}function yW(n){return _s(n)&&"object"==typeof n&&function eP(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const UIe="NGXS_COMPUTED_OPTION",wW="NGXS_DATA_META",tP="NGXS_META",EW="NGXS_ARGUMENT_REGISTRY_META";let AW=(()=>{class n{constructor(t){this.subscription=null,this.sequence$=new hi(0),t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(rt(jl,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})();function Jy(n){return n[wW]}let nc=(()=>{class n{constructor(t,i,r){n.store=t.get(jl),n.ngZone=t.get(nn),n.factory=i,n.context=r,n.computed=t.get(AW),n.injector=t}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.injector=null,n.\u0275fac=function(t){return new(t||n)(rt(ur),rt(Gz),rt(Wz))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})();class Wr{constructor(){Wr.statesCachedMeta.clear()}static createStateContext(e){return nc.context.createStateContext(e)}static ensureMappedState(e){if(sa(nc.factory)||sa(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(_s(e.name)?Wr.statesCachedMeta.get(e.name):null)||Wr.ensureMeta(e)}static getRepositoryByInstance(e){const i=Jy(Wr.getStateClassByInstance(e))??null;if(sa(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const t=Wr.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(const[o,s]of r.entries()){const a=t?.getPayloadTypeByIndex(o);_s(a)&&(i[a]=s)}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=Wr.createPayload(t,i),o=function GIe(n){return class{constructor(t){if(t)for(const i of Object.keys(t))this[i]=t[i]}static get type(){return n}}}(e.type);return new o(r)}static ensureMeta(e){const t=_s(e.name)?nc.factory.states?.find(i=>i.name===e.name):null;return _s(t)&&_s(e.name)&&Wr.statesCachedMeta.set(e.name,t),t}}Wr.statesCachedMeta=new Map,Wr.\u0275fac=function(e){return new(e||Wr)},Wr.\u0275prov=At({token:Wr,factory:Wr.\u0275fac}),new class WIe{constructor(){this.subject=new _f(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function zd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?vi((r,o)=>n(r,o,i)):Ae,Qi(1),t?Sg(e):X7(()=>new vy))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new _f(1)}};class YIe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${_s(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function SW(n){return n.NGXS_OPTIONS_META??{name:""}}function CW(n){const e=SW(n),t=e.children??[],r=bW(void 0===e.defaults?{}:e.defaults);if(t.length>0){if(yW(r))return function XIe(n,e){return e.reduce((t,i)=>{const r=SW(i);if(function Ky(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=CW(i),t},n??{})}(r,t);throw new YIe(r)}return r}function MW(){return`__${UIe}__`}function TW(n){return n[MW()]??null}function IW(){return nc?.computed?.sequenceValue??0}function JIe(n){let e=!1;return Uf(n)&&(e=!0),e}function nP(n){return n[EW]}class ZIe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class QIe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(QO(this.argumentMap.has(e))||QO(this.payloadMap.has(e)))throw new ZIe(e,t)}}function oDe(n){return{enumerable:!0,configurable:!0,get(){const e=Jy(n),t=Wr.ensureMappedState(e.stateMeta);return Wr.createStateContext(t)}}}const uDe={dataActionSubscribeRequired:!0},hDe=new vt("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>uDe});let fDe=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[Wr,nc,AW,...t]}}}return n.\u0275fac=function(t){return new(t||n)(rt(Wr,2),rt(nc,2))},n.\u0275mod=Jt({type:n}),n.\u0275inj=Kt({}),n})();function DW(){return(n,e,t)=>{!function HIe(n,e){if(!function OIe(n,e){let t=n,i=!1;if(yW(t))for(;null!==t;){if(Lg(t?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(t,e)?.get;break}t=Object.getPrototypeOf(t)}return i}(n,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const o=function KIe(n){return sa(TW(n))&&Object.defineProperties(n,{[MW()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),TW(n)}(this),s=o?.get(i);if(Lg(s?.isObservable))return s?.value;if(sa(s)||s.sequenceId!==IW()){o.delete(i);const c=i.apply(this,r);return o.set(i,{value:c,sequenceId:IW(),isObservable:JIe(c)}),c}return s?.value},t}}const pDe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function iP(n={}){const e=function mDe(n){const e=nc?.injector?.get(hDe,void 0,si.Optional),t={...pDe};return _s(e)&&void 0!==e?.dataActionSubscribeRequired&&(t.subscribeRequired=e.dataActionSubscribeRequired),{...t,...n}}(n);return(t,i,r)=>{!function zIe(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(t,r);const o=r.value,s=i.toString();return r.value=function(...a){const c=this;let l=null;const d=Wr.getRepositoryByInstance(c),h=d.operations;let f=h[s];const m=d.stateMeta,y=nP(o);if(sa(f)){const Y=function dDe(n){return String(n).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(o),pe=function $Ie(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let o="";for(let s=0;s<t.length;s++)_s(r?.getArgumentNameByIndex(s))?o+=r?.getArgumentNameByIndex(s):_s(r?.getPayloadTypeByIndex(s))?o+=r?.getPayloadTypeByIndex(s):o+=`$arg${s}`,s!==t.length-1&&(o+=", ");return`@${e.replace(/\./g,"/")}.${i}(${o})`}({statePath:m.path,methodName:s,argumentsNames:Y,argumentRegistry:y});f=h[s]={type:pe,options:{cancelUncompleted:e.cancelUncompleted??!1}},_s(f)&&(m.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}Wr.ensureMappedState(m).instance[f.type]=()=>(Lg(e.insideZone)?nc.ngZone?.run(()=>{l=o.apply(c,a)}):l=o.apply(c,a),Uf(l)&&Lg(e.subscribeRequired)?Wt(null).pipe(A(()=>l)):l);const H=Wr.createAction(f,a,y),$=nc.store.dispatch(H);return Uf(l)?function qIe(n,e){return wy([n,e]).pipe(A(t=>t.pop()))}($,l):l},r}}function RW(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function eDe(n,e){const t=n[e];return sa(nP(t))&&Object.defineProperties(t,{[EW]:{enumerable:!0,configurable:!0,value:new QIe}}),nP(t)})(e,t).createPayloadType(r,t,i)}}function _De(){return n=>{const e=function lDe(n){if(function wIe(n){return!QO(n)}(n.hasOwnProperty(tP))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,tP,{value:e})}return function cDe(n){return n?.[tP]}(n)}(n);if(sa(e.name))throw new Error("@StateRepository should be add before decorator @State");!function iDe(n,e){(function nDe(n){const e=Jy(n)??null;return(sa(e)||e?.stateClass!==n)&&function tDe(n){Object.defineProperty(n,wW,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),Jy(n)}(n)).stateMeta=e}(n,e),function bDe(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>bW(t)},context:oDe(n)})}(n,e,CW(n)),function sDe(n){const t=Jy(n)?.stateMeta?.name??null;if(_s(t)){const i=`__${t}__selector`;Object.defineProperties(n.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(_s(this[i]))return this[i];if(sa(nc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=nc.store.select(n).pipe(A(r=>r),Bs({refCount:!0,bufferSize:1})),this[i]}}})}}(n)}}let yDe=(()=>{class n{constructor(){this._dirty=!0,this.browserStorageEvents$=new U,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})(),vDe=(()=>{class n extends yDe{get snapshot(){return this.getState()}get ctx(){return function aDe(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...n,getState:()=>n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}}}(this.context)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=gi(n)))(i||n)}}(),n.\u0275prov=At({token:n,factory:n.\u0275fac}),He([DW(),Ie("design:type",Object),Ie("design:paramtypes",[])],n.prototype,"snapshot",null),He([iP(),gt(0,RW("patchValue")),Ie("design:type",Function),Ie("design:paramtypes",[Object]),Ie("design:returntype",void 0)],n.prototype,"patchState",null),He([iP(),gt(0,RW("stateValue")),Ie("design:type",Function),Ie("design:paramtypes",[Object]),Ie("design:returntype",void 0)],n.prototype,"setState",null),He([iP(),Ie("design:type",Function),Ie("design:paramtypes",[]),Ie("design:returntype",void 0)],n.prototype,"reset",null),n})(),k$=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=jt({type:n,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),n})();const pv=new vt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),MP=new vt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=zt(Gn);if(!n)throw new Error("Window is not available");return n}}),RRe=new vt("ngx-data-layer",{providedIn:"root",factory:()=>function DRe(n){return n?n.dataLayer=n.dataLayer||[]:null}(zt(MP))}),O$=new vt("ngx-gtag-fn",{providedIn:"root",factory:()=>function kRe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(zt(MP),zt(RRe))});let mv=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){this.settings.enableTracing&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,o])=>Object.defineProperty(i,r,{value:o,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,o,s,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),o&&c.set("value",o),void 0!==s&&c.set("interaction",s),a&&Object.entries(a).map(([d,h])=>c.set(d,h));const l=this.toKeyValue(c);l?this.gtag("event",t,l):this.gtag("event",t)}catch(c){this.throw(c)}}pageView(t,i,r,o){try{const s=new Map([["page_path",t]]);i&&s.set("page_title",i),(r||this.document)&&s.set("page_location",r||this.document.location.href),o&&Object.entries(o).map(([a,c])=>s.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(s))}catch(s){this.throw(s)}}appView(t,i,r,o,s){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),o&&a.set("app_version",o),s&&a.set("app_installer_id",s),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(rt(pv),rt(Gn),rt(O$))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ORe=(()=>{class n{constructor(t,i,r,o){this.gaCategoryDirective=t,this.gaService=i,this.settings=r,this.el=o,this.gaBind="click"}set gaBind(t){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=t,this.bindSubscription=Kf(this.el.nativeElement,t).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(t){this.throw(t)}}throw(t){this.settings.enableTracing&&console&&console.warn&&console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)(ze(k$,8),ze(mv),ze(pv),ze(vn))},n.\u0275dir=jt({type:n,selectors:[["","gaEvent",""]],inputs:{gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent",gaBind:"gaBind"},exportAs:["gaEvent"]}),n})();const NRe={provide:FT,multi:!0,useFactory:function FRe(n,e,t){return Ut(function*(){if(!n.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");t||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)e(o.command,...o.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[pv,O$,Gn]};new vt("ngx-google-analytics-routing-settings",{factory:()=>({})});let TP=(()=>{class n{static forRoot(t,i=[],r,o,s){return{ngModule:n,providers:[{provide:pv,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:o,nonce:s}},NRe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Jt({type:n}),n.\u0275inj=Kt({}),n})(),oS=(()=>{class n{constructor(){this.consent="not-set",this.consentChange=new _f(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(t){this.consent!==t&&(this.consent=t,this.consentChange.next(t))}unsetConsent(){this.setConsent("not-set")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),tke=(()=>{class n{constructor(t,i,{trackingCode:r}){this.window=i,this.subscriptions=new T,this.token=r,this.subscriptions.add(t.consentChange.subscribe(o=>this.toggleGoogleAnalytics("rescinded"===o)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(t){this.window&&(this.window[`ga-disable-${this.token}`]=t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(oS),rt(MP),rt(pv))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const nke=new vt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),L$=[oS,tke,(()=>{class n{constructor(t,i){this.key=i,this.subscriptions=new T;try{this.storage=localStorage}catch{}t.setConsent(this.loadConsent()),this.subscriptions.add(t.consentChange.subscribe(r=>this.saveConsent(r)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){const t=this.storage?.getItem?.(this.key);if(null==t)return"not-set";const i=t.trim().toLowerCase();switch(i){case"given":case"rescinded":return i;default:return"not-set"}}saveConsent(t){this.storage?.setItem?.(this.key,t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(oS),rt(nke))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})()];function ike(n){return Object.entries(n).reduce((e,[t,i])=>(null!=i&&(e[t]=`${i}`),e),{})}let oke=(()=>{class n{static forRoot(t){const{providers:i=[]}=TP.forRoot(t.gaToken,function rke(n){const{appName:e,projectName:t,developmentMode:i}=n;return[{command:"set",values:[ike({appName:e,projectName:t,developmentMode:i})]}]}(t));return{ngModule:n,providers:i}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({providers:[...L$,{provide:FT,multi:!0,useFactory:()=>()=>{},deps:L$}],imports:[TP]})}return n})();class ake{}const lke=(n,e)=>JSON.stringify(n)===JSON.stringify(e),dke=n=>n.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Vc={storageStrategy:class cke extends ake{constructor(){super(...arguments),this.cachePairs=[]}add(e,t,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,t){Object.assign(this.cachePairs[e],t)}update(e,t){Object.assign(this.cachePairs[e],t)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},uke=new U;function Ca(n={}){return function(e,t,i){const r=n.cacheKey||e.constructor.name+"#"+t,o=i.value;if(i&&i.value){let s=n.storageStrategy?new n.storageStrategy:new Vc.storageStrategy;const a=[];n.cacheModifier&&n.cacheModifier.subscribe(d=>s.addMany(d(s.getAll(r,this)),r,this)),Rr(uke.asObservable(),n.cacheBusterObserver?n.cacheBusterObserver:function be(n){return n?function Be(n){return new Ye(e=>n.schedule(()=>e.complete()))}(n):te}()).subscribe(d=>{s.removeAll(r,this),a.length=0}),n.cacheResolver=n.cacheResolver||Vc.cacheResolver||lke,n.cacheHasher=n.cacheHasher||Vc.cacheHasher||dke,i.value=function(...d){const h=s.getAll(r,this);let f=n.cacheHasher(d),m=h.find(E=>n.cacheResolver(E.parameters,f));const y=a.find(E=>n.cacheResolver(E.parameters,f));if((n.maxAge||Vc.maxAge)&&m&&m.created&&((new Date).getTime()-new Date(m.created).getTime()>(n.maxAge||Vc.maxAge)?(s.remove?s.remove(h.indexOf(m),m,r,this):s.removeAtIndex(h.indexOf(m),r,this),m=null):(n.slidingExpiration||Vc.slidingExpiration)&&(m.created=new Date,s.update?s.update(h.indexOf(m),m,r,this):s.updateAtIndex(h.indexOf(m),m,r,this))),m){const E=Wt(m.response);return n.async?E.pipe(B9(0)):E}if(y)return y.response;{const E=o.call(this,...d).pipe(Qf(()=>{const M=a.find(H=>n.cacheResolver(H.parameters,f));a.splice(a.indexOf(M),1)}),Oi(M=>{(!n.shouldCacheDecider||n.shouldCacheDecider(M))&&((!(n.maxCacheCount||Vc.maxCacheCount)||1===(n.maxCacheCount||Vc.maxCacheCount)||(n.maxCacheCount||Vc.maxCacheCount)&&(n.maxCacheCount||Vc.maxCacheCount)<h.length+1)&&(s.remove?s.remove(0,h[0],r,this):s.removeAtIndex(0,r,this)),s.add({parameters:f,response:M,created:n.maxAge||Vc.maxAge?new Date:null},r,this))}),function ske(n,e,t,i){t&&!L(t)&&(i=t);const r=L(t)?t:void 0;return o=>V7(new _f(n,e,i),r)(o)}(1),FA());return a.push({parameters:f,response:E,created:new Date}),E}}}return i}}class hke{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const fke=new vt("basePath");class sS{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:t=>this.defaultEncodeParam(t),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}defaultEncodeParam(e){const t="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(t))}}let IP,B$=(()=>{class n{constructor(t,i,r){this.httpClient=t,this.basePath="https://apps.humanatlas.io/hra-api/v1",this.defaultHeaders=new Bc,this.configuration=new sS,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new hke}addToHttpParams(t,i,r){return this.addToHttpParamsRecursive(t,i,r)}addToHttpParamsRecursive(t,i,r){if(null==i)return t;if("object"==typeof i)if(Array.isArray(i))i.forEach(o=>t=this.addToHttpParamsRecursive(t,o,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");t=t.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(o=>t=this.addToHttpParamsRecursive(t,i[o],null!=r?`${r}.${o}`:o));else{if(null==r)throw Error("key may not be null if value is not object or array");t=t.append(r,i)}return t}aggregateResults(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.consortiums,y=t.providers,E=t.sex,M=t.spatial,H=t.technologies,$=t.token;let Y=new lr({encoder:this.encoder});null!=s&&(Y=this.addToHttpParams(Y,s,"age")),null!=a&&(Y=this.addToHttpParams(Y,a,"age-range")),null!=c&&(Y=this.addToHttpParams(Y,c,"bmi")),null!=l&&(Y=this.addToHttpParams(Y,l,"bmi-range")),null!=d&&(Y=this.addToHttpParams(Y,d,"cache")),h&&h.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"ontology-terms")}),f&&f.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"cell-type-terms")}),m&&m.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"consortiums")}),y&&y.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"providers")}),null!=E&&(Y=this.addToHttpParams(Y,E,"sex")),M&&M.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"spatial")}),H&&H.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"technologies")}),null!=$&&(Y=this.addToHttpParams(Y,$,"token"));let pe=this.defaultHeaders,De=o&&o.httpHeaderAccept;void 0===De&&(De=this.configuration.selectHeaderAccept(["application/json"])),void 0!==De&&(pe=pe.set("Accept",De));let Ve=o&&o.context;void 0===Ve&&(Ve=new oo);let nt="json";return De&&(nt=De.startsWith("text")?"text":this.configuration.isJsonMime(De)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:Ve,params:Y,responseType:nt,withCredentials:this.configuration.withCredentials,headers:pe,observe:i,reportProgress:r})}biomarkerTermOccurences(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.consortiums,y=t.providers,E=t.sex,M=t.spatial,H=t.technologies,$=t.token;let Y=new lr({encoder:this.encoder});null!=s&&(Y=this.addToHttpParams(Y,s,"age")),null!=a&&(Y=this.addToHttpParams(Y,a,"age-range")),null!=c&&(Y=this.addToHttpParams(Y,c,"bmi")),null!=l&&(Y=this.addToHttpParams(Y,l,"bmi-range")),null!=d&&(Y=this.addToHttpParams(Y,d,"cache")),h&&h.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"ontology-terms")}),f&&f.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"cell-type-terms")}),m&&m.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"consortiums")}),y&&y.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"providers")}),null!=E&&(Y=this.addToHttpParams(Y,E,"sex")),M&&M.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"spatial")}),H&&H.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"technologies")}),null!=$&&(Y=this.addToHttpParams(Y,$,"token"));let pe=this.defaultHeaders,De=o&&o.httpHeaderAccept;void 0===De&&(De=this.configuration.selectHeaderAccept(["application/json"])),void 0!==De&&(pe=pe.set("Accept",De));let Ve=o&&o.context;void 0===Ve&&(Ve=new oo);let nt="json";return De&&(nt=De.startsWith("text")?"text":this.configuration.isJsonMime(De)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:Ve,params:Y,responseType:nt,withCredentials:this.configuration.withCredentials,headers:pe,observe:i,reportProgress:r})}biomarkerTreeModel(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new oo);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.consortiums,y=t.providers,E=t.sex,M=t.spatial,H=t.technologies,$=t.token;let Y=new lr({encoder:this.encoder});null!=s&&(Y=this.addToHttpParams(Y,s,"age")),null!=a&&(Y=this.addToHttpParams(Y,a,"age-range")),null!=c&&(Y=this.addToHttpParams(Y,c,"bmi")),null!=l&&(Y=this.addToHttpParams(Y,l,"bmi-range")),null!=d&&(Y=this.addToHttpParams(Y,d,"cache")),h&&h.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"ontology-terms")}),f&&f.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"cell-type-terms")}),m&&m.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"consortiums")}),y&&y.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"providers")}),null!=E&&(Y=this.addToHttpParams(Y,E,"sex")),M&&M.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"spatial")}),H&&H.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"technologies")}),null!=$&&(Y=this.addToHttpParams(Y,$,"token"));let pe=this.defaultHeaders,De=o&&o.httpHeaderAccept;void 0===De&&(De=this.configuration.selectHeaderAccept(["application/json"])),void 0!==De&&(pe=pe.set("Accept",De));let Ve=o&&o.context;void 0===Ve&&(Ve=new oo);let nt="json";return De&&(nt=De.startsWith("text")?"text":this.configuration.isJsonMime(De)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:Ve,params:Y,responseType:nt,withCredentials:this.configuration.withCredentials,headers:pe,observe:i,reportProgress:r})}cellTypeTreeModel(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new oo);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(t,i="body",r=!1,o){const s=t.token;let a=new lr({encoder:this.encoder});null!=s&&(a=this.addToHttpParams(a,s,"token"));let c=this.defaultHeaders,l=o&&o.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=o&&o.context;void 0===d&&(d=new oo);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(t,i="body",r=!1,o){const s=t.getSpatialPlacementRequest;if(null==s)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=o&&o.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=o&&o.context;void 0===l&&(l=new oo);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return c&&(f=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,s,{context:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(t,i="body",r=!1,o){const s=t.cache;let a=new lr({encoder:this.encoder});null!=s&&(a=this.addToHttpParams(a,s,"cache"));let c=this.defaultHeaders,l=o&&o.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let d=o&&o.context;void 0===d&&(d=new oo);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:d,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new oo);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.consortiums,y=t.providers,E=t.sex,M=t.spatial,H=t.technologies,$=t.token;let Y=new lr({encoder:this.encoder});null!=s&&(Y=this.addToHttpParams(Y,s,"age")),null!=a&&(Y=this.addToHttpParams(Y,a,"age-range")),null!=c&&(Y=this.addToHttpParams(Y,c,"bmi")),null!=l&&(Y=this.addToHttpParams(Y,l,"bmi-range")),null!=d&&(Y=this.addToHttpParams(Y,d,"cache")),h&&h.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"ontology-terms")}),f&&f.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"cell-type-terms")}),m&&m.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"consortiums")}),y&&y.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"providers")}),null!=E&&(Y=this.addToHttpParams(Y,E,"sex")),M&&M.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"spatial")}),H&&H.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"technologies")}),null!=$&&(Y=this.addToHttpParams(Y,$,"token"));let pe=this.defaultHeaders,De=o&&o.httpHeaderAccept;void 0===De&&(De=this.configuration.selectHeaderAccept(["application/json"])),void 0!==De&&(pe=pe.set("Accept",De));let Ve=o&&o.context;void 0===Ve&&(Ve=new oo);let nt="json";return De&&(nt=De.startsWith("text")?"text":this.configuration.isJsonMime(De)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:Ve,params:Y,responseType:nt,withCredentials:this.configuration.withCredentials,headers:pe,observe:i,reportProgress:r})}ontologyTreeModel(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new oo);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new oo);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(t,i="body",r=!1,o){const s=t.organIri;if(null==s)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=t.age,c=t.ageRange,l=t.bmi,d=t.bmiRange,h=t.cache,f=t.ontologyTerms,m=t.cellTypeTerms,y=t.consortiums,E=t.providers,M=t.sex,H=t.spatial,$=t.technologies,Y=t.token;let pe=new lr({encoder:this.encoder});null!=a&&(pe=this.addToHttpParams(pe,a,"age")),null!=c&&(pe=this.addToHttpParams(pe,c,"age-range")),null!=l&&(pe=this.addToHttpParams(pe,l,"bmi")),null!=d&&(pe=this.addToHttpParams(pe,d,"bmi-range")),null!=h&&(pe=this.addToHttpParams(pe,h,"cache")),f&&f.forEach(dt=>{pe=this.addToHttpParams(pe,dt,"ontology-terms")}),m&&m.forEach(dt=>{pe=this.addToHttpParams(pe,dt,"cell-type-terms")}),null!=s&&(pe=this.addToHttpParams(pe,s,"organ-iri")),y&&y.forEach(dt=>{pe=this.addToHttpParams(pe,dt,"consortiums")}),E&&E.forEach(dt=>{pe=this.addToHttpParams(pe,dt,"providers")}),null!=M&&(pe=this.addToHttpParams(pe,M,"sex")),H&&H.forEach(dt=>{pe=this.addToHttpParams(pe,dt,"spatial")}),$&&$.forEach(dt=>{pe=this.addToHttpParams(pe,dt,"technologies")}),null!=Y&&(pe=this.addToHttpParams(pe,Y,"token"));let De=this.defaultHeaders,Ve=o&&o.httpHeaderAccept;void 0===Ve&&(Ve=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Ve&&(De=De.set("Accept",Ve));let nt=o&&o.context;void 0===nt&&(nt=new oo);let Ze="json";return Ve&&(Ze=Ve.startsWith("text")?"text":this.configuration.isJsonMime(Ve)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:nt,params:pe,responseType:Ze,withCredentials:this.configuration.withCredentials,headers:De,observe:i,reportProgress:r})}referenceOrgans(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new oo);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.consortiums,y=t.providers,E=t.sex,M=t.spatial,H=t.technologies,$=t.token;let Y=new lr({encoder:this.encoder});null!=s&&(Y=this.addToHttpParams(Y,s,"age")),null!=a&&(Y=this.addToHttpParams(Y,a,"age-range")),null!=c&&(Y=this.addToHttpParams(Y,c,"bmi")),null!=l&&(Y=this.addToHttpParams(Y,l,"bmi-range")),null!=d&&(Y=this.addToHttpParams(Y,d,"cache")),h&&h.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"ontology-terms")}),f&&f.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"cell-type-terms")}),m&&m.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"consortiums")}),y&&y.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"providers")}),null!=E&&(Y=this.addToHttpParams(Y,E,"sex")),M&&M.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"spatial")}),H&&H.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"technologies")}),null!=$&&(Y=this.addToHttpParams(Y,$,"token"));let pe=this.defaultHeaders,De=o&&o.httpHeaderAccept;void 0===De&&(De=this.configuration.selectHeaderAccept(["application/json"])),void 0!==De&&(pe=pe.set("Accept",De));let Ve=o&&o.context;void 0===Ve&&(Ve=new oo);let nt="json";return De&&(nt=De.startsWith("text")?"text":this.configuration.isJsonMime(De)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:Ve,params:Y,responseType:nt,withCredentials:this.configuration.withCredentials,headers:pe,observe:i,reportProgress:r})}sparql(t,i="body",r=!1,o){const s=t.query;if(null==s)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=t.token,c=t.format;let l=new lr({encoder:this.encoder});null!=s&&(l=this.addToHttpParams(l,s,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=o&&o.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let f=o&&o.context;void 0===f&&(f=new oo);let m="json";return h&&(m=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}sparqlPost(t,i="body",r=!1,o){const s=t.sparqlQueryRequest;if(null==s)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=t.token,c=t.format;let l=new lr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let d=this.defaultHeaders,h=o&&o.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(d=d.set("Accept",h));let f=o&&o.context;void 0===f&&(f=new oo);const y=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==y&&(d=d.set("Content-Type",y));let E="json";return h&&(E=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,s,{context:f,params:l,responseType:E,withCredentials:this.configuration.withCredentials,headers:d,observe:i,reportProgress:r})}technologyNames(t,i="body",r=!1,o){const s=t.cache,a=t.token;let c=new lr({encoder:this.encoder});null!=s&&(c=this.addToHttpParams(c,s,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,d=o&&o.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(l=l.set("Accept",d));let h=o&&o.context;void 0===h&&(h=new oo);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(t,i="body",r=!1,o){const s=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,m=t.consortiums,y=t.providers,E=t.sex,M=t.spatial,H=t.technologies,$=t.token;let Y=new lr({encoder:this.encoder});null!=s&&(Y=this.addToHttpParams(Y,s,"age")),null!=a&&(Y=this.addToHttpParams(Y,a,"age-range")),null!=c&&(Y=this.addToHttpParams(Y,c,"bmi")),null!=l&&(Y=this.addToHttpParams(Y,l,"bmi-range")),null!=d&&(Y=this.addToHttpParams(Y,d,"cache")),h&&h.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"ontology-terms")}),f&&f.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"cell-type-terms")}),m&&m.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"consortiums")}),y&&y.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"providers")}),null!=E&&(Y=this.addToHttpParams(Y,E,"sex")),M&&M.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"spatial")}),H&&H.forEach(Ze=>{Y=this.addToHttpParams(Y,Ze,"technologies")}),null!=$&&(Y=this.addToHttpParams(Y,$,"token"));let pe=this.defaultHeaders,De=o&&o.httpHeaderAccept;void 0===De&&(De=this.configuration.selectHeaderAccept(["application/json"])),void 0!==De&&(pe=pe.set("Accept",De));let Ve=o&&o.context;void 0===Ve&&(Ve=new oo);let nt="json";return De&&(nt=De.startsWith("text")?"text":this.configuration.isJsonMime(De)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:Ve,params:Y,responseType:nt,withCredentials:this.configuration.withCredentials,headers:pe,observe:i,reportProgress:r})}}return n.\u0275fac=function(t){return new(t||n)(rt(ih),rt(fke,8),rt(sS,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pke=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:sS,useFactory:t}]}}constructor(t,i){if(t)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return n.\u0275fac=function(t){return new(t||n)(rt(n,12),rt(ih,8))},n.\u0275mod=Jt({type:n}),n.\u0275inj=Kt({}),n})();function aa(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function zc(){return IP||(IP=function mke(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=aa(t);return(r,o)=>i.then(s=>o(s.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),IP}function gke(n,e=zc()){return e("readonly",t=>aa(t.get(n)))}function _ke(n,e=zc()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),aa(t.transaction)))}function bke(n,e=zc()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),aa(t.transaction)))}var yke=g(5020),vke=g(7661);const gv="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_v="http://www.w3.org/2001/XMLSchema#",RP="http://www.w3.org/2000/10/swap/",Vs={xsd:{decimal:`${_v}decimal`,boolean:`${_v}boolean`,double:`${_v}double`,integer:`${_v}integer`,string:`${_v}string`},rdf:{type:`${gv}type`,nil:`${gv}nil`,first:`${gv}first`,rest:`${gv}rest`,langString:`${gv}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${RP}reify#forSome`,forAll:`${RP}reify#forAll`},log:{implies:`${RP}log#implies`}};const{rdf:xke,xsd:ap}=Vs;let bv,wke=0;const V$=/^"(.*".*)(?="[^"]*$)/,Eke=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,kP={namedNode:function Tke(n){return new z$(n)},blankNode:function Ike(n){return new Ake(n||"n3-"+wke++)},variable:function Rke(n){return new Ske(n)},literal:function Dke(n,e){if("string"==typeof e)return new Wg(`"${n}"@${e.toLowerCase()}`);let t=e?e.value:"";return""===t&&("boolean"==typeof n?t=ap.boolean:"number"==typeof n&&(Number.isFinite(n)?t=Number.isInteger(n)?ap.integer:ap.double:(t=ap.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),new Wg(""===t||t===ap.string?`"${n}"`:`"${n}"^^${t}`)},defaultGraph:function kke(){return bv},quad:H$,triple:H$},yr=kP;class Wd{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Wd?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class z$ extends Wd{get termType(){return"NamedNode"}}class Wg extends Wd{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new z$(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,i=t<e.length?e[t]:"";return"^"===i?e.substr(t+2):"@"!==i?ap.string:xke.langString}equals(e){return e instanceof Wg?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Ake extends Wd{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Ske extends Wd{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function $d(n,e){if(e=e||kP,!n)return e.defaultGraph();switch(n[0]){case"?":return e.variable(n.substr(1));case"_":return e.blankNode(n.substr(2));case'"':if(e===kP)return new Wg(n);if('"'===n[n.length-1])return e.literal(n.substr(1,n.length-2));const t=n.lastIndexOf('"',n.length-1);return e.literal(n.substr(1,t-1),"@"===n[t+1]?n.substr(t+2):e.namedNode(n.substr(t+3)));case"<":const i=Eke.exec(n);return e.quad($d(aS(i[1]),e),$d(aS(i[2]),e),$d(aS(i[3]),e),i[4]&&$d(aS(i[4]),e));default:return e.namedNode(n)}}function zi(n){if("string"==typeof n)return n;if(n instanceof Wd&&"Quad"!==n.termType)return n.id;if(!n)return bv.id;switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return`_:${n.value}`;case"Variable":return`?${n.value}`;case"DefaultGraph":return"";case"Literal":return`"${n.value}"${n.language?`@${n.language}`:n.datatype&&n.datatype.value!==ap.string?`^^${n.datatype.value}`:""}`;case"Quad":return`<<${OP(zi(n.subject))} ${OP(zi(n.predicate))} ${OP(zi(n.object))}${function j$(n){return!!n&&"DefaultGraph"===n.termType}(n.graph)?"":` ${zi(n.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${n.termType}`)}}bv=new class Cke extends Wd{constructor(){return super(""),bv||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class Mke extends Wd{constructor(e,t,i,r){super(""),this._subject=e,this._predicate=t,this._object=i,this._graph=r||bv}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function OP(n){return n.replace(V$,(e,t)=>`"${t.replace(/"/g,'""')}`)}function aS(n){return n.replace(V$,(e,t)=>`"${t.replace(/""/g,'"')}`)}function H$(n,e,t,i){return new Mke(n,e,t,i)}var Oke=g(3410),Pke=g.n(Oke);const{xsd:cS}=Vs,Nke=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,G$={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Fke=/[\x00-\x20<>\\"\{\}\|\^\`]/,Lke={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Bke=/$0^/;class jke{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const t in this)!(t in Lke)&&this[t]instanceof RegExp&&(this[t]=Bke)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return t&&(this._comments&&(c=this._comment.exec(i))&&o("comment",c[1],"",this._line,i.length),i=null,o("eof","","",this._line,0)),this._input=i;const l=this._line,d=i[0];let h="",f="",m="",y=null,E=0,M=!1;switch(d){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(E=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){M=!0;break}case"<":if(y=this._unescapedIri.exec(i))h="IRI",f=y[1];else if(y=this._iri.exec(i)){if(f=this._unescape(y[1]),null===f||Fke.test(f))return s(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",E=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",E=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",E=2);break;case"_":((y=this._blank.exec(i))||t&&(y=this._blank.exec(`${i} `)))&&(h="blank",m="_",f=y[1]);break;case'"':if(y=this._simpleQuotedString.exec(i))f=y[1];else if(({value:f,matchLength:E}=this._parseLiteral(i)),null===f)return s(this);(null!==y||0!==E)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(y=this._simpleApostropheString.exec(i))f=y[1];else if(({value:f,matchLength:E}=this._parseLiteral(i)),null===f)return s(this);(null!==y||0!==E)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(y=this._variable.exec(i))&&(h="var",f=y[0]);break;case"@":"literal"===this._previousMarker&&(y=this._langcode.exec(i))?(h="langcode",f=y[1]):(y=this._keyword.exec(i))&&(h=y[0]);break;case".":if(1===i.length?t:i[1]<"0"||i[1]>"9"){h=".",E=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(y=this._number.exec(i)||t&&(y=this._number.exec(`${i} `)))&&(h="literal",f=y[0],m="string"==typeof y[1]?cS.double:"string"==typeof y[2]?cS.decimal:cS.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(y=this._sparqlKeyword.exec(i))?h=y[0].toUpperCase():M=!0;break;case"f":case"t":(y=this._boolean.exec(i))?(h="literal",f=y[0],m=cS.boolean):M=!0;break;case"a":(y=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):M=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(E=1,f="="):(E=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(E=1,h=d);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",E=2):(h=d,E=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",E=2);break;default:M=!0}if(M&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(y=this._prefix.exec(i))?((y=this._prefixed.exec(i))||t&&(y=this._prefixed.exec(`${i} `)))&&(h="prefixed",m=y[1]||"",f=this._unescape(y[2])):(h="prefix",f=y[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?s(this):this._input=i;const H=E||y[0].length,$=o(h,f,m,l,H);this.previousToken=$,this._previousMarker=h,i=i.substr(H,i.length)}function o(a,c,l,d,h){const f=i?r-i.length:r,y={type:a,value:c,prefix:l,line:d,start:f,end:f+h};return e(null,y),y}function s(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let t=!1;const i=e.replace(Nke,(r,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in G$?G$[a]:(t=!0,"")});return t?null:i}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],i=t.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(t,r))>0;){let o=0;for(;"\\"===e[r-o-1];)o++;if(o%2==0){const s=e.substring(i,r),a=s.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const i=[];let r;if(this._tokenizeToEnd((o,s)=>o?r=o:i.push(s),!0),r)throw r;return i}Pke()(()=>this._tokenizeToEnd(t,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}let W$=0;class Y${constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&X$(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(t),r=/trig/.test(t),o=/triple/.test(t),s=/quad/.test(t),a=this._n3Mode=/n3/.test(t),c=o||s;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||o||a),this._supportsRDFStar=""===t||/star|\*$/.test(t),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new jke({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){W$=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,i,r,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:o,graph:t,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(void 0===o)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(o+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,i=null,r=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===o?null===a.predicate?a.subject=i:a.object=i:this._emit(o,this.RDF_REST,i,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;t=this._literal(this._literalValue,i),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const i=this._completeLiteral(e);if(i)return this._object=i.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,i=this._graph;const r=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const s=this._predicate,a=this._object;o?this._emit(a,s,r,i):this._emit(r,s,a,i)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,i=t.length&&t[t.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,i,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,i,r){this._callback(null,this._quad(e,t,i,r||this.DEFAULTGRAPH))}_error(e,t){const i=new Error(`${e} on line ${t.line}.`);i.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=PP}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let i="",r=-1,o=-1,s=0,a="/";for(;r<t;){switch(a){case":":if(o<0&&"/"===e[++r]&&"/"===e[++r])for(;(o=r+1)<t&&"/"!==e[o];)r=o;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(s,r-1),s=r+1;break;case void 0:case"?":case"#":return i+e.substring(s,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(s,r-2),(s=i.lastIndexOf("/"))>=o&&(i=i.substr(0,s)),"/"!==a)return`${i}/${e.substr(r+1)}`;s=r+1}}}a=e[++r]}return i+e.substring(s)}parse(e,t,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${W$++}_`,this._prefixCallback=i||PP,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const r=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&r.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return r}this._callback=t,this._lexer.tokenize(e,(r,o)=>{null!==r?(this._callback(r),this._callback=PP):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function PP(){}function X$(n,e){const t=e.namedNode;n._namedNode=t,n._blankNode=e.blankNode,n._literal=e.literal,n._variable=e.variable,n._quad=e.quad,n.DEFAULTGRAPH=e.defaultGraph(),n.RDF_FIRST=t(Vs.rdf.first),n.RDF_REST=t(Vs.rdf.rest),n.RDF_NIL=t(Vs.rdf.nil),n.N3_FORALL=t(Vs.r.forAll),n.N3_FORSOME=t(Vs.r.forSome),n.ABBREVIATIONS={a:t(Vs.rdf.type),"=":t(Vs.owl.sameAs),">":t(Vs.log.implies)},n.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}X$(Y$.prototype,yr);var NP=g(8905);class FP{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!t&&e&&!e[0]&&(t=e,e=null),this._factory=(t=t||{}).factory||yr,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let i,r;for(const o in t)for(const s in i=t[o].subjects)for(const a in r=i[s])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,t,i,r){const o=e[t]||(e[t]={}),s=o[i]||(o[i]={}),a=r in s;return a||(s[r]=null),!a}_removeFromIndex(e,t,i,r){const o=e[t],s=o[i];delete s[r];for(const a in s)return;delete o[i];for(const a in o)return;delete e[t]}*_findInIndex(e,t,i,r,o,s,a,c){let l,d,h;const f=this._entities,m=$d(c,this._factory),y={subject:null,predicate:null,object:null};t&&((l=e,e={})[t]=l[t]);for(const E in e)if(d=e[E]){y[o]=$d(f[E],this._factory),i&&((l=d,d={})[i]=l[i]);for(const M in d)if(h=d[M]){y[s]=$d(f[M],this._factory);const H=r?r in h?[r]:[]:Object.keys(h);for(let $=0;$<H.length;$++)y[a]=$d(f[H[$]],this._factory),yield this._factory.quad(y.subject,y.predicate,y.object,m)}}}_loop(e,t){for(const i in e)t(i)}_loopByKey0(e,t,i){let r,o;if(r=e[t])for(o in r)i(o)}_loopByKey1(e,t,i){let r,o;for(r in e)o=e[r],o[t]&&i(r)}_loopBy2Keys(e,t,i,r){let o,s,a;if((o=e[t])&&(s=o[i]))for(a in s)r(a)}_countInIndex(e,t,i,r){let s,a,c,o=0;t&&((s=e,e={})[t]=s[t]);for(const l in e)if(a=e[l]){i&&((s=a,a={})[i]=s[i]);for(const d in a)(c=a[d])&&(r?r in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!Ma(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return i=>{i in t||(t[i]=!0,e($d(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),e=zi(e),t=zi(t),i=zi(i),r=zi(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const s=this._ids,a=this._entities;e=s[e]||(s[a[++this._id]=e]=this._id),t=s[t]||(s[a[++this._id]=t]=this._id),i=s[i]||(s[a[++this._id]=i]=this._id);const c=this._addToIndex(o.subjects,e,t,i);return this._addToIndex(o.predicates,t,i,e),this._addToIndex(o.objects,i,e,t),this._size=null,c}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,i,r){return e&&e.subject&&({subject:e,predicate:t,object:i,graph:r}=e),!this.readQuads(e,t,i,r).next().done}import(e){return e.on("data",t=>{this.addQuad(t)}),e}removeQuad(e,t,i,r){t||(r=e.graph,i=e.object,t=e.predicate,e=e.subject),e=zi(e),t=zi(t),i=zi(i),r=zi(r);const o=this._ids,s=this._graphs;let a,c,l;if(!((e=o[e])&&(t=o[t])&&(i=o[i])&&(a=s[r])&&(c=a.subjects[e])&&(l=c[t])&&i in l))return!1;for(e in this._removeFromIndex(a.subjects,e,t,i),this._removeFromIndex(a.predicates,t,i,e),this._removeFromIndex(a.objects,i,e,t),null!==this._size&&this._size--,a.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",t=>{this.removeQuad(t)}),e}removeMatches(e,t,i,r){const o=new NP.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,t,i,r))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,i,r){return[...this.readQuads(e,t,i,r)]}*readQuads(e,t,i,r){e=e&&zi(e),t=t&&zi(t),i=i&&zi(i),r=r&&zi(r);const o=this._getGraphs(r),s=this._ids;let a,c,l,d;if(!(Ma(e)&&!(c=s[e])||Ma(t)&&!(l=s[t])||Ma(i)&&!(d=s[i])))for(const h in o)(a=o[h])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",h):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",h):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",h):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",h))}match(e,t,i,r){return new LP(this,e,t,i,r)}countQuads(e,t,i,r){e=e&&zi(e),t=t&&zi(t),i=i&&zi(i),r=r&&zi(r);const o=this._getGraphs(r),s=this._ids;let c,l,d,h,a=0;if(Ma(e)&&!(l=s[e])||Ma(t)&&!(d=s[t])||Ma(i)&&!(h=s[i]))return 0;for(const f in o)(c=o[f])&&(a+=e?i?this._countInIndex(c.objects,h,l,d):this._countInIndex(c.subjects,l,d,h):t?this._countInIndex(c.predicates,d,h,l):this._countInIndex(c.objects,h,l,d));return a}forEach(e,t,i,r,o){this.some(s=>(e(s),!1),t,i,r,o)}every(e,t,i,r,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),t,i,r,o);return s&&a}some(e,t,i,r,o){for(const s of this.readQuads(t,i,r,o))if(e(s))return!0;return!1}getSubjects(e,t,i){const r=[];return this.forSubjects(o=>{r.push(o)},e,t,i),r}forSubjects(e,t,i,r){t=t&&zi(t),i=i&&zi(i),r=r&&zi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ma(t)&&!(c=o[t])||Ma(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,t,i){const r=[];return this.forPredicates(o=>{r.push(o)},e,t,i),r}forPredicates(e,t,i,r){t=t&&zi(t),i=i&&zi(i),r=r&&zi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ma(t)&&!(c=o[t])||Ma(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,t,i){const r=[];return this.forObjects(o=>{r.push(o)},e,t,i),r}forObjects(e,t,i,r){t=t&&zi(t),i=i&&zi(i),r=r&&zi(r);const o=this._ids,s=this._getGraphs(r);let a,c,l;if(e=this._uniqueEntities(e),!(Ma(t)&&!(c=o[t])||Ma(i)&&!(l=o[i])))for(r in s)(a=s[r])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,t,i){const r=[];return this.forGraphs(o=>{r.push(o)},e,t,i),r}forGraphs(e,t,i,r){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),t,i,r,o)}createBlankNode(e){let t,i;if(e)for(t=e=`_:${e}`,i=1;this._ids[t];)t=e+i++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const i={},r=t?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,Vs.rdf.rest,Vs.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let d,h,l=!1;const f=a.graph;let m=a.subject;for(;m&&!l;){const y=this.getQuads(null,null,m,null),E=this.getQuads(m,null,null,null);let M,H=null,$=null,Y=null;for(let pe=0;pe<E.length&&!l;pe++)M=E[pe],M.graph.equals(f)?d?l=r(m,"has non-list arcs out"):M.predicate.value===Vs.rdf.first?H?l=r(m,"has multiple rdf:first arcs"):s.push(H=M):M.predicate.value===Vs.rdf.rest?$?l=r(m,"has multiple rdf:rest arcs"):s.push($=M):y.length?l=r(m,"can't be subject and object"):(d=M,h="subject"):l=r(m,"not confined to single graph");for(let pe=0;pe<y.length&&!l;++pe)M=y[pe],d?l=r(m,"can't have coreferences"):M.predicate.value===Vs.rdf.rest?Y?l=r(m,"has incoming rdf:rest arcs"):Y=M:(d=M,h="object");H?c.unshift(H.object):l=r(m,"has no list head"),m=Y&&Y.subject}l?e=!1:d&&(i[d[h].value]=c)}),e&&this.removeQuads(s),i}*[Symbol.iterator](){yield*this.readQuads()}}function Ma(n){return"string"==typeof n||n instanceof String}class LP extends NP.Readable{constructor(e,t,i,r,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:i,object:r,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:i,predicate:r,subject:o}=this,s=this._filtered=new FP({factory:e._factory});for(const a of e.readQuads(o,r,i,t))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,i,r){return new LP(this.filtered,e,t,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var Uke=g(2821);function vr(n,e,t,i,r){return n.readQuads(e,t,i,r)}function q$(n){const e=n.length;let t=0;return new NP.Readable({objectMode:!0,read(){this.push(t<e?n[t++]:null)}})}function BP(n,e){return jP.apply(this,arguments)}function jP(){return jP=Ut(function*(n,e){let t;if("string"==typeof n){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.json())}else t=n;if(t){const i=yield vke.toRDF(t);e.import(q$(i))}return e}),jP.apply(this,arguments)}function UP(){return UP=Ut(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new Uke.RdfXmlParser({dataFactory:yr,strict:!0}),r=new Promise(o=>{i.once("end",()=>o(e))});return e.import(i),i.write(t),i.end(),r}return e}),UP.apply(this,arguments)}function VP(){return VP=Ut(function*(n,e){let t;if("string"==typeof n&&n?.startsWith("http")){const i=yield fetch(n,{redirect:"follow"});i.ok&&(t=yield i.text())}else t=n;if(t){const i=new Y$({format:"n3"}).parse(t);e.import(q$(i))}return e}),VP.apply(this,arguments)}function zP(n,e){const t=JSON.parse(n),i=new FP;return Object.assign(i,t,{_factory:e??yr}),i}const lS="Unknown Euler angle order",$g=.99999;var Ro=function(n){return n[n.ZYX=0]="ZYX",n[n.YXZ=1]="YXZ",n[n.XZY=2]="XZY",n[n.ZXY=3]="ZXY",n[n.YZX=4]="YZX",n[n.XYZ=5]="XYZ",n}(Ro||{});class $r extends E1{static get ZYX(){return Ro.ZYX}static get YXZ(){return Ro.YXZ}static get XZY(){return Ro.XZY}static get ZXY(){return Ro.ZXY}static get YZX(){return Ro.YZX}static get XYZ(){return Ro.XYZ}static get RollPitchYaw(){return Ro.ZYX}static get DefaultOrder(){return Ro.ZYX}static get RotationOrders(){return Ro}static rotationOrder(e){return Ro[e]}get ELEMENTS(){return 4}constructor(e=0,t=0,i=0,r=$r.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,t,i,r)}fromQuaternion(e){const[t,i,r,o]=e,s=i*i,a=-2*(s+r*r)+1,c=2*(t*i+o*r);let l=-2*(t*r-o*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+o*t),-2*(t*t+s)+1),m=Math.asin(l),y=Math.atan2(c,a);return this.set(f,m,y,$r.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,t=0,i=0,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function Gke(n){return n>=0&&n<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}toArray4(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=pi(e)}get y(){return this[1]}set y(e){this[1]=pi(e)}get z(){return this[2]}set z(e){this[2]=pi(e)}get alpha(){return this[0]}set alpha(e){this[0]=pi(e)}get beta(){return this[1]}set beta(e){this[1]=pi(e)}get gamma(){return this[2]}set gamma(e){this[2]=pi(e)}get phi(){return this[0]}set phi(e){this[0]=pi(e)}get theta(){return this[1]}set theta(e){this[1]=pi(e)}get psi(){return this[2]}set psi(e){this[2]=pi(e)}get roll(){return this[0]}set roll(e){this[0]=pi(e)}get pitch(){return this[1]}set pitch(e){this[1]=pi(e)}get yaw(){return this[2]}set yaw(e){this[2]=pi(e)}get order(){return this[3]}set order(e){this[3]=function Wke(n){if(n<0&&n>=6)throw new Error(lS);return n}(e)}fromVector3(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}fromArray(e,t=0){return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,t,i){return this.set(e,t,i,Ro.ZYX)}fromRotationMatrix(e,t=$r.DefaultOrder){return this._fromRotationMatrix(e,t),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new J2;switch(this[4]){case Ro.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Ro.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Ro.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Ro.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Ro.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Ro.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(lS)}}_fromRotationMatrix(e,t=$r.DefaultOrder){const i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],h=e[10];switch(t=t||this[3]){case $r.XYZ:this[1]=Math.asin(Tr(o,-1,1)),Math.abs(o)<$g?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(d,a),this[2]=0);break;case $r.YXZ:this[0]=Math.asin(-Tr(c,-1,1)),Math.abs(c)<$g?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case $r.ZXY:this[0]=Math.asin(Tr(d,-1,1)),Math.abs(d)<$g?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(s,i));break;case $r.ZYX:this[1]=Math.asin(-Tr(l,-1,1)),Math.abs(l)<$g?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case $r.YZX:this[2]=Math.asin(Tr(s,-1,1)),Math.abs(s)<$g?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case $r.XZY:this[2]=Math.asin(-Tr(r,-1,1)),Math.abs(r)<$g?(this[0]=Math.atan2(d,a),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(lS)}return this[3]=t,this}_getRotationMatrix(e){const t=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,o=this.z,s=Math.cos(i),a=Math.cos(r),c=Math.cos(o),l=Math.sin(i),d=Math.sin(r),h=Math.sin(o);switch(this[3]){case $r.XYZ:{const f=s*c,m=s*h,y=l*c,E=l*h;t[0]=a*c,t[4]=-a*h,t[8]=d,t[1]=m+y*d,t[5]=f-E*d,t[9]=-l*a,t[2]=E-f*d,t[6]=y+m*d,t[10]=s*a;break}case $r.YXZ:{const f=a*c,m=a*h,y=d*c,E=d*h;t[0]=f+E*l,t[4]=y*l-m,t[8]=s*d,t[1]=s*h,t[5]=s*c,t[9]=-l,t[2]=m*l-y,t[6]=E+f*l,t[10]=s*a;break}case $r.ZXY:{const f=a*c,m=a*h,y=d*c,E=d*h;t[0]=f-E*l,t[4]=-s*h,t[8]=y+m*l,t[1]=m+y*l,t[5]=s*c,t[9]=E-f*l,t[2]=-s*d,t[6]=l,t[10]=s*a;break}case $r.ZYX:{const f=s*c,m=s*h,y=l*c,E=l*h;t[0]=a*c,t[4]=y*d-m,t[8]=f*d+E,t[1]=a*h,t[5]=E*d+f,t[9]=m*d-y,t[2]=-d,t[6]=l*a,t[10]=s*a;break}case $r.YZX:{const f=s*a,m=s*d,y=l*a,E=l*d;t[0]=a*c,t[4]=E-f*h,t[8]=y*h+m,t[1]=h,t[5]=s*c,t[9]=-l*c,t[2]=-d*c,t[6]=m*h+y,t[10]=f-E*h;break}case $r.XZY:{const f=s*a,m=s*d,y=l*a,E=l*d;t[0]=a*c,t[4]=-h,t[8]=d*c,t[1]=f*h+E,t[5]=s*c,t[9]=m*h-y,t[2]=y*h-m,t[6]=l*c,t[10]=E*h+f;break}default:throw new Error(lS)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}toQuaternion(){const e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),o=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch);return new J2(e*r*o-t*i*s,e*i*s+t*r*o,t*i*o-e*r*s,e*i*o+t*r*s)}}var K$=g(4938),$ke=g.t(K$,2),Yke=g(7991),J$=g(5440);const Z$={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let dS;const Xke=new Uint8Array(16);function qke(){if(!dS&&(dS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dS(Xke)}const Jo=[];for(let n=0;n<256;++n)Jo.push((n+256).toString(16).slice(1));const Jke=function Kke(n,e,t){if(Z$.randomUUID&&!e&&!n)return Z$.randomUUID();const i=(n=n||{}).random||(n.rng||qke)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=i[r];return e}return function Q$(n,e=0){return Jo[n[e+0]]+Jo[n[e+1]]+Jo[n[e+2]]+Jo[n[e+3]]+"-"+Jo[n[e+4]]+Jo[n[e+5]]+"-"+Jo[n[e+6]]+Jo[n[e+7]]+"-"+Jo[n[e+8]]+Jo[n[e+9]]+"-"+Jo[n[e+10]]+Jo[n[e+11]]+Jo[n[e+12]]+Jo[n[e+13]]+Jo[n[e+14]]+Jo[n[e+15]]}(i)};var uS=g(7184),hS=g(9689),Zke=g(6990),fS=g(6030);const Yg=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),pr=(Math,Math,{});function nOe(n,{precision:e=pr.precision||4}={}){return n=function tOe(n){return Math.round(n/pr.EPSILON)*pr.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function ch(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function yv(n,e,t){const i=pr.EPSILON;t&&(pr.EPSILON=t);try{if(n===e)return!0;if(ch(n)&&ch(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!yv(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=pr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{pr.EPSILON=i}}function Hc(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}pr.EPSILON=1e-12,pr.debug=!1,pr.precision=4,pr.printTypes=!1,pr.printDegrees=!1,pr.printRowMajor=!0;class HP extends(function cOe(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Hc(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:ch(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(pr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+nOe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!yv(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const o=e[r];this[r]=o+i*(t[r]-o)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(pr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function Zo(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function eY(n,e,t=""){if(pr.debug&&!function lOe(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}const tY={};function GP(n,e){tY[n]||(tY[n]=!0,console.warn("".concat(n," has been removed in version ").concat(e,", see upgrade guide for more information")))}class dOe extends HP{get ELEMENTS(){return Hc(!1),0}copy(e){return Hc(!1),this}get x(){return this[0]}set x(e){this[0]=Zo(e)}get y(){return this[1]}set y(e){this[1]=Zo(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return Zo(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return Zo(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Hc(e>=0&&e<this.ELEMENTS,"index is out of range"),Zo(this[e])}setComponent(e,t){return Hc(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var ca=typeof Float32Array<"u"?Float32Array:Array;function nY(){var n=new ca(3);return ca!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function iY(n,e,t){var i=new ca(3);return i[0]=n,i[1]=e,i[2]=t,i}function rY(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function pS(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2];return n[0]=r*c-o*a,n[1]=o*s-i*c,n[2]=i*a-r*s,n}function oY(n,e,t){var i=e[0],r=e[1],o=e[2];return n[0]=i*t[0]+r*t[3]+o*t[6],n[1]=i*t[1]+r*t[4]+o*t[7],n[2]=i*t[2]+r*t[5]+o*t[8],n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});nY();const WP=[0,0,0],sY={};class En extends dOe{static get ZERO(){return sY.ZERO=sY.ZERO||Object.freeze(new En(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&ch(e)?this.copy(e):(pr.debug&&(Zo(e),Zo(t),Zo(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return pr.debug&&(Zo(e.x),Zo(e.y),Zo(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Zo(e)}angle(e){return function yOe(n,e){var t=n[0],i=n[1],r=n[2],o=e[0],s=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(o*o+s*s+a*a),h=d&&rY(n,e)/d;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return pS(this,this,e),this.check()}rotateX({radians:e,origin:t=WP}){return function gOe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=WP}){return function _Oe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=WP}){return function bOe(n,e,t,i){var r=[],o=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],n[0]=o[0]+t[0],n[1]=o[1]+t[1],n[2]=o[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function pOe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o+t[15];n[0]=(t[0]*i+t[4]*r+t[8]*o+t[12])/(s=s||1),n[1]=(t[1]*i+t[5]*r+t[9]*o+t[13])/s,n[2]=(t[2]*i+t[6]*r+t[10]*o+t[14])/s}(this,this,e),this.check()}transformAsVector(e){return function xOe(n,e,t){const i=e[0],r=e[1],o=e[2],s=t[3]*i+t[7]*r+t[11]*o||1;n[0]=(t[0]*i+t[4]*r+t[8]*o)/s,n[1]=(t[1]*i+t[5]*r+t[9]*o)/s,n[2]=(t[2]*i+t[6]*r+t[10]*o)/s}(this,this,e),this.check()}transformByMatrix3(e){return oY(this,this,e),this.check()}transformByMatrix2(e){return function wOe(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function mOe(n,e,t){var i=t[0],r=t[1],o=t[2],a=e[0],c=e[1],l=e[2],d=r*l-o*c,h=o*a-i*l,f=i*c-r*a,m=r*f-o*h,y=o*d-i*f,E=i*h-r*d,M=2*t[3];h*=M,f*=M,y*=2,E*=2,n[0]=a+(d*=M)+(m*=2),n[1]=c+h+y,n[2]=l+f+E}(this,this,e),this.check()}}new En,new En;const vv=new En,dY=new En;class $P{constructor(e=[0,0,0],t=0){this.radius=-0,this.center=new En,this.fromCenterRadius(e,t)}fromCenterRadius(e,t){return this.center.from(e),this.radius=t,this}fromCornerPoints(e,t){return t=vv.from(t),this.center=(new En).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new $P(this.center,this.radius)}union(e){const t=this.center,i=this.radius,o=e.radius,s=vv.copy(e.center).subtract(t),a=s.magnitude();if(i>=a+o)return this.clone();if(o>=a+i)return e.clone();const c=.5*(i+a+o);return dY.copy(s).scale((-i+c)/a).add(t),this.center.copy(dY),this.radius=c,this}expand(e){const t=(e=vv.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}transform(e){this.center.transform(e);const t=function lY(n,e){var o=e[4],s=e[5],a=e[6],c=e[8],l=e[9],d=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(o,s,a),n[2]=Math.hypot(c,l,d),n}(vv,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}distanceSquaredTo(e){const t=this.distanceTo(e);return t*t}distanceTo(e){const t=(e=vv.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}intersectPlane(e){const i=this.radius,o=e.normal.dot(this.center)+e.distance;return o<-i?Yg.OUTSIDE:o<i?Yg.INTERSECTING:Yg.INSIDE}}class MOe extends HP{get ELEMENTS(){return Hc(!1),0}get RANK(){return Hc(!1),0}toString(){let e="[";if(pr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=Zo(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function uY(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=t[0],m=t[1],y=t[2],E=t[3],M=t[4],H=t[5],$=t[6],Y=t[7],pe=t[8];return n[0]=f*i+m*s+y*l,n[1]=f*r+m*a+y*d,n[2]=f*o+m*c+y*h,n[3]=E*i+M*s+H*l,n[4]=E*r+M*a+H*d,n[5]=E*o+M*c+H*h,n[6]=$*i+Y*s+pe*l,n[7]=$*r+Y*a+pe*d,n[8]=$*o+Y*c+pe*h,n}function hY(n,e,t){var i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}!function NOe(){var n=new ca(2);ca!=Float32Array&&(n[0]=0,n[1]=0)}();const fY=Object.freeze([1,0,0,0,1,0,0,0,1]),LOe=Object.freeze([0,0,0,0,0,0,0,0,0]),BOe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),qg={};class zs extends MOe{static get IDENTITY(){return qg.IDENTITY=qg.IDENTITY||Object.freeze(new zs(fY)),qg.IDENTITY}static get ZERO(){return qg.ZERO=qg.ZERO||Object.freeze(new zs(LOe)),qg.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return BOe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,t,i,r,o,s,a,c,l){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,t,i,r,o,s,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=t,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=l,this.check()}determinant(){return function ROe(n){var r=n[3],o=n[4],s=n[5],a=n[6],c=n[7],l=n[8];return n[0]*(l*o-s*c)+n[1]*(-l*r+s*a)+n[2]*(c*r-o*a)}(this)}identity(){return this.copy(fY)}fromQuaternion(e){return function POe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t+t,a=i+i,c=r+r,l=t*s,d=i*s,h=i*a,f=r*s,m=r*a,y=r*c,E=o*s,M=o*a,H=o*c;n[0]=1-h-y,n[3]=d-H,n[6]=f+M,n[1]=d+H,n[4]=1-l-y,n[7]=m-E,n[2]=f-M,n[5]=m+E,n[8]=1-l-h}(this,e),this.check()}transpose(){return function IOe(n,e){if(n===e){var t=e[1],i=e[2],r=e[5];n[1]=e[3],n[2]=e[6],n[3]=t,n[5]=e[7],n[6]=i,n[7]=r}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8]}(this,this),this.check()}invert(){return function DOe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],d=e[8],h=d*s-a*l,f=-d*o+a*c,m=l*o-s*c,y=t*h+i*f+r*m;y&&(n[0]=h*(y=1/y),n[1]=(-d*i+r*l)*y,n[2]=(a*i-r*s)*y,n[3]=f*y,n[4]=(d*t-r*c)*y,n[5]=(-a*t+r*o)*y,n[6]=m*y,n[7]=(-l*t+i*c)*y,n[8]=(s*t-i*o)*y)}(this,this),this.check()}multiplyLeft(e){return uY(this,e,this),this.check()}multiplyRight(e){return uY(this,this,e),this.check()}rotate(e){return function OOe(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=Math.sin(t),m=Math.cos(t);n[0]=m*i+f*s,n[1]=m*r+f*a,n[2]=m*o+f*c,n[3]=m*s-f*i,n[4]=m*a-f*r,n[5]=m*c-f*o,n[6]=l,n[7]=d,n[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?hY(this,this,e):hY(this,this,[e,e,e]),this.check()}translate(e){return function kOe(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],d=e[7],h=e[8],f=t[0],m=t[1];n[0]=i,n[1]=r,n[2]=o,n[3]=s,n[4]=a,n[5]=c,n[6]=f*i+m*s+l,n[7]=f*r+m*a+d,n[8]=f*o+m*c+h}(this,this,e),this.check()}transform(e,t){switch(e.length){case 2:t=function FOe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}(t||[-0,-0],e,this);break;case 3:t=oY(t||[-0,-0,-0],e,this);break;case 4:t=function EOe(n,e,t){const i=e[0],r=e[1],o=e[2];return n[0]=t[0]*i+t[3]*r+t[6]*o,n[1]=t[1]*i+t[4]*r+t[7]*o,n[2]=t[2]*i+t[5]*r+t[8]*o,n[3]=e[3],n}(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return eY(t,e.length),t}transformVector(e,t){return GP("Matrix3.transformVector"),this.transform(e,t)}transformVector2(e,t){return GP("Matrix3.transformVector"),this.transform(e,t)}transformVector3(e,t){return GP("Matrix3.transformVector"),this.transform(e,t)}}function pY(){var n=new ca(4);return ca!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function mY(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function gY(n,e,t){var i=e[0],r=e[1],o=e[2],s=e[3],a=t[0],c=t[1],l=t[2],d=t[3];return n[0]=i*d+s*a+r*l-o*c,n[1]=r*d+s*c+o*a-i*l,n[2]=o*d+s*l+i*c-r*a,n[3]=s*d-i*a-r*c-o*l,n}!function jOe(){var n=new ca(4);ca!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var fPe=function(){var n=nY(),e=iY(1,0,0),t=iY(0,1,0);return function(i,r,o){var s=rY(r,o);return s<-.999999?(pS(n,e,r),function hOe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&pS(n,t,r),function fOe(n,e){var t=e[0],i=e[1],r=e[2],o=t*t+i*i+r*r;o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o}(n,n),mY(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(pS(n,r,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,function XOe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=i*s,n[2]=r*s,n[3]=o*s,n}(i,i))}}();pY(),pY(),function TOe(){var n=new ca(9);ca!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const pPe=[0,0,0,1];class xY extends HP{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function _Y(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),n[r]=.5*i,n[3]=(e[3*o+s]-e[3*s+o])*(i=.5/i),n[o]=(e[3*o+r]+e[3*r+o])*i,n[s]=(e[3*s+r]+e[3*r+s])*i}return n}(this,e),this.check()}identity(){return function ePe(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return mY(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Zo(e)}get y(){return this[1]}set y(e){this[1]=Zo(e)}get z(){return this[2]}set z(e){this[2]=Zo(e)}get w(){return this[3]}set w(e){this[3]=Zo(e)}len(){return function $Oe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function YOe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function qOe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return fPe(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function GOe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function rPe(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function cPe(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function aPe(n,e){var t=e[0],i=e[1],r=e[2],o=e[3],s=t*t+i*i+r*r+o*o,a=s?1/s:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=o*a}(this,this),this.check()}lerp(e,t,i){return function KOe(n,e,t,i){var r=e[0],o=e[1],s=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=o+i*(t[1]-o),n[2]=s+i*(t[2]-s),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check()}multiplyRight(e,t){return Hc(!t),gY(this,this,e),this.check()}multiplyLeft(e,t){return Hc(!t),gY(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function tPe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+s*a,n[1]=r*c+o*a,n[2]=o*c-r*a,n[3]=s*c-i*a}(this,this,e),this.check()}rotateY(e){return function nPe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-o*a,n[1]=r*c+s*a,n[2]=o*c+i*a,n[3]=s*c-r*a}(this,this,e),this.check()}rotateZ(e){return function iPe(n,e,t){t*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=o*c+s*a,n[3]=s*c-o*a}(this,this,e),this.check()}scale(e){return function WOe(n,e,t){n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t}(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=pPe,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return function mS(n,e,t,i){var f,m,y,E,M,r=e[0],o=e[1],s=e[2],a=e[3],c=t[0],l=t[1],d=t[2],h=t[3];return(m=r*c+o*l+s*d+a*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>1e-6?(f=Math.acos(m),y=Math.sin(f),E=Math.sin((1-i)*f)/y,M=Math.sin(i*f)/y):(E=1-i,M=i),n[0]=E*r+M*c,n[1]=E*o+M*l,n[2]=E*s+M*d,n[3]=E*a+M*h,n}(this,e,t,i),this.check()}transformVector4(e,t=e){return function JOe(n,e,t){var i=e[0],r=e[1],o=e[2],s=t[0],a=t[1],c=t[2],l=t[3],d=l*i+a*o-c*r,h=l*r+c*i-s*o,f=l*o+s*r-a*i,m=-s*i-a*r-c*o;n[0]=d*l+m*-s+h*-c-f*-a,n[1]=h*l+m*-a+f*-s-d*-c,n[2]=f*l+m*-c+d*-a-h*-s,n[3]=e[3]}(t,e,this),eY(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}}const mPe=new En,gPe=new En,gS=new En,_S=new En,bS=new En,_Pe=new En,bPe=new En;class YP{constructor(e=[0,0,0],t=[0,0,0,0,0,0,0,0,0]){this.center=(new En).from(e),this.halfAxes=new zs(t)}get halfSize(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new En(e).len(),new En(t).len(),new En(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new En(e).normalize(),o=new En(t).normalize(),s=new En(i).normalize();return(new xY).fromMatrix3(new zs([...r,...o,...s]))}fromCenterHalfSizeQuaternion(e,t,i){const r=new xY(i),o=(new zs).fromQuaternion(r);return o[0]=o[0]*t[0],o[1]=o[1]*t[0],o[2]=o[2]*t[0],o[3]=o[3]*t[1],o[4]=o[4]*t[1],o[5]=o[5]*t[1],o[6]=o[6]*t[2],o[7]=o[7]*t[2],o[8]=o[8]*t[2],this.center=(new En).from(e),this.halfAxes=o,this}clone(){return new YP(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new $P){const t=this.halfAxes,i=t.getColumn(0,gS),r=t.getColumn(1,_S),o=t.getColumn(2,bS),s=mPe.copy(i).add(r).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){const t=this.center,i=e.normal,r=this.halfAxes,o=i.x,s=i.y,a=i.z,c=Math.abs(o*r[0]+s*r[1]+a*r[2])+Math.abs(o*r[3]+s*r[4]+a*r[5])+Math.abs(o*r[6]+s*r[7]+a*r[8]),l=i.dot(t)+e.distance;return l<=-c?Yg.OUTSIDE:l>=c?Yg.INSIDE:Yg.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const t=gPe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,gS),o=i.getColumn(1,_S),s=i.getColumn(2,bS),a=r.magnitude(),c=o.magnitude(),l=s.magnitude();r.normalize(),o.normalize(),s.normalize();let h,d=0;return h=Math.abs(t.dot(r))-a,h>0&&(d+=h*h),h=Math.abs(t.dot(o))-c,h>0&&(d+=h*h),h=Math.abs(t.dot(s))-l,h>0&&(d+=h*h),d}computePlaneDistances(e,t,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,c=a.getColumn(0,gS),l=a.getColumn(1,_S),d=a.getColumn(2,bS),h=_Pe.copy(c).add(l).add(d).add(s),f=bPe.copy(h).subtract(e);let m=t.dot(f);return r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).add(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),h.copy(s).add(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).add(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).add(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),s.copy(h).subtract(c).subtract(l).subtract(d),f.copy(h).subtract(e),m=t.dot(f),r=Math.min(m,r),o=Math.max(m,o),i[0]=r,i[1]=o,i}transform(e){this.center.transformAsPoint(e);const t=this.halfAxes.getColumn(0,gS);t.transformAsPoint(e);const i=this.halfAxes.getColumn(1,_S);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,bS);return r.transformAsPoint(e),this.halfAxes=new zs([...t,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const wY=new En,EY=new En;class XP{constructor(e=[0,0,1],t=0){this.normal=new En,this.distance=-0,this.fromNormalDistance(e,t)}fromNormalDistance(e,t){return Hc(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}fromPointNormal(e,t){e=wY.from(e),this.normal.from(t).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,t,i,r){return this.normal.set(e,t,i),Hc(yv(this.normal.len(),1)),this.distance=r,this}clone(e){return new XP(this.normal,this.distance)}equals(e){return yv(this.distance,e.distance)&&yv(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const t=EY.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,t)}projectPointOntoPlane(e,t=[0,0,0]){e=wY.from(e);const i=this.getPointDistance(e),r=EY.copy(this.normal).scale(i);return e.subtract(r).to(t)}}new En([1,0,0]),new En([0,1,0]),new En([0,0,1]),new En,new En,new XP(new En(1,0,0),0),new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,Math,new zs,new zs,new zs,new zs,new zs,new En,new En,new En,new En,new En,new zs,new zs,new zs;var XPe=g(7659);function*vS(n,e,t){for(const[i,r]of Object.entries(t))for(const o of vr(n,e,i,null,null)){const s="Literal"===o.object.termType?(0,hS.fromRdf)(o.object):o.object.id;yield[r,s]}}function cp(n,e,t,i){const r={"@id":e,"@type":t};for(const[o,s]of Object.entries(i))for(const a of vr(n,r["@id"],o,null,null)){const c="Literal"===a.object.termType?(0,hS.fromRdf)(a.object):a.object.id;r[s]=c}return r}const Hi=function U$(n,e){const t=Object.create(null);for(const r in n)i(r,n[r]);function i(r,o){if("string"==typeof o){const s=Object.create(null);t[r]=a=>s[a]||(s[a]=e.namedNode(o+a))}else if(!(r in t))throw new Error(`Unknown prefix: ${r}`);return t[r]}return e=e||yr,i}({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},yr),MY={x:Hi("rdf"),type:Hi("rdf")("type")},qPe_label=(Hi("rdfs"),Hi("rdfs")("label")),Zt=(Hi("rdfs")("comment"),Hi("rdfs")("isDefinedBy"),Hi("rdfs")("seeAlso"),Hi("ccf")),ei={id:Hi("ccf")("has_registration_location"),label:Hi("rdfs")("label"),description:Hi("rdfs")("comment"),link:Zt("url"),sex:Zt("sex"),age:Zt("age"),bmi:Zt("bmi"),Male:yr.literal("Male"),Female:yr.literal("Female"),consortiumName:Zt("consortium_name"),providerName:Zt("tissue_provider_name"),providerUUID:Zt("tissue_provider_uuid"),donor:Zt("comes_from"),sections:Zt("subdivided_into_sections"),datasets:Zt("generates_dataset"),sampleType:Zt("sample_type"),TissueBlock:yr.literal("Tissue Block"),TissueSection:yr.literal("Tissue Section"),NonStandard:yr.literal("Non-standard"),sectionCount:Zt("section_count"),sectionSize:Zt("section_size"),sectionUnits:Zt("section_size_unit"),sectionNumber:Zt("section_number"),spatialEntity:Zt("has_registration_location"),ontologyTerms:Zt("has_ontology_term"),cellTypeTerms:Zt("has_cell_type_term"),technology:Zt("technology"),thumbnail:Zt("thumbnail")},mi={x:Zt,base:Hi("base"),ontologyNode:{label:Zt("ccf_pref_label"),parent:Zt("ccf_part_of"),children:Zt("ccf_part_of"),rui_rank:Zt("rui_rank"),synonymLabels:yr.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Zt("ccf_part_of"),ct_is_a:Zt("ccf_ct_isa"),located_in:Zt("ccf_located_in"),characterizes:Zt("ccf_characterizes"),bm_located_in:Zt("ccf_bm_located_in")},spatial:{Female:Hi("base")("VHFemale"),Male:Hi("base")("VHMale"),BothSexes:Hi("base")("VHBothSexes"),FemaleOrgans:Hi("base")("VHFemaleOrgans"),MaleOrgans:Hi("base")("VHMaleOrgans")},SpatialObjectReference:Zt("spatial_object_reference"),SpatialEntity:Zt("spatial_entity"),SpatialPlacement:Zt("spatial_placement"),spatialObjectReference:{file:Zt("file_url"),file_format:Zt("file_format"),file_subpath:Zt("file_subpath")},extractionSet:{label:Hi("rdfs")("label"),rui_rank:Zt("rui_rank")},spatialEntity:{label:Hi("rdfs")("label"),description:Hi("rdfs")("comment"),creator:Hi("dcterms")("creator"),creator_first_name:Zt("creator_first_name"),creator_last_name:Zt("creator_last_name"),creator_orcid:Zt("creator_orcid"),creation_date:Hi("dcterms")("created"),updated_date:Zt("updated_date"),ccf_annotations:Zt("collides_with"),representation_of:Zt("representation_of"),reference_organ:Zt("has_reference_organ"),extraction_set_for:Zt("extraction_set_for"),extraction_set:Zt("has_extraction_set"),sex:Zt("organ_owner_sex"),side:Zt("organ_side"),rui_rank:Zt("rui_rank"),slice_thickness:Zt("slice_thickness"),slice_count:Zt("slice_count"),x_dimension:Zt("x_dimension"),y_dimension:Zt("y_dimension"),z_dimension:Zt("z_dimension"),dimension_units:Zt("dimension_unit"),object:Zt("has_object_reference")},spatialPlacement:{source:Zt("placement_for"),target:Zt("placement_relative_to"),placement_date:Hi("dcterms")("created"),x_scaling:Zt("x_scaling"),y_scaling:Zt("y_scaling"),z_scaling:Zt("z_scaling"),scaling_units:Zt("scaling_unit"),x_rotation:Zt("x_rotation"),y_rotation:Zt("y_rotation"),z_rotation:Zt("z_rotation"),w_rotation:Zt("theta_rotation"),rotation_order:Zt("rotation_order"),rotation_units:Zt("rotation_unit"),x_translation:Zt("x_translation"),y_translation:Zt("y_translation"),z_translation:Zt("z_translation"),translation_units:Zt("translation_unit")}},ti={x:Hi("uberon"),body:Hi("uberon")("0013702")},KPe={x:Hi("cl"),cell:Hi("cl")("0000000")},wv={x:Hi("fma")},Gc=(Hi("lmha"),{body:ti.body,cell:KPe.cell,respiratory_system:ti.x("0001004"),colon:ti.x("0001155"),left_lung:ti.x("0002168"),right_lung:ti.x("0002167"),left_bronchus:ti.x("0002178"),right_bronchus:ti.x("0002177"),kidney:ti.x("0002113"),ureter:ti.x("0000056"),eye:ti.x("0000970"),fallopian_tube:ti.x("0003889"),knee:ti.x("0001465"),ovary:ti.x("0000992"),trachea:ti.x("0003126"),aorta:ti.x("0000947"),blood:ti.x("0000178"),bone_marrow:ti.x("0002371"),male_reproductive_system:ti.x("0000079"),lymph_node:ti.x("0000029"),blood_vasculature:ti.x("0004537"),brain:ti.x("0000955"),eye_left:ti.x("0004548"),eye_right:wv.x("54449"),fallopian_tube_left:ti.x("0001303"),fallopian_tube_right:ti.x("0001302"),heart:ti.x("0000948"),kidney_left:ti.x("0004538"),kidney_right:ti.x("0004539"),knee_left:wv.x("24978"),knee_right:wv.x("24977"),large_intestine:ti.x("0000059"),liver:ti.x("0002107"),lungs:ti.x("0002048"),mesenteric_lymph_node:ti.x("0002509"),ovary_left:wv.x("7214"),ovary_right:wv.x("7213"),pancreas:ti.x("0001264"),pelvis:ti.x("0001270"),prostate_gland:ti.x("0002367"),skin:ti.x("0002097"),small_intestine:ti.x("0002108"),spleen:ti.x("0002106"),thymus:ti.x("0002370"),ureter_left:ti.x("0001223"),ureter_right:ti.x("0001222"),urinary_bladder:ti.x("0001255"),uterus:ti.x("0000995")});function eN(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const xS={spatialObjectReference:eN(mi.spatialObjectReference),spatialEntity:eN(mi.spatialEntity),spatialPlacement:eN(mi.spatialPlacement)};function TY(n,e){const t=cp(n,e,"ExtractionSet",xS.spatialEntity);return t.extractionSites=uS(n.getSubjects(mi.spatialEntity.extraction_set,e,null).map(i=>lp(n,i.id)),["rui_rank"]),t}function lp(n,e){const t=cp(n,e,"SpatialEntity",xS.spatialEntity);return t.object&&(t.object=function JPe(n,e){return cp(n,e,"SpatialObjectReference",xS.spatialObjectReference)}(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,mi.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,ei.spatialEntity,e,null),t}function tNe(n,e){const t=cp(n,e,"SpatialPlacement",xS.spatialPlacement);return t.source&&(t.source=lp(n,t.source)),t.target&&(t.target=lp(n,t.target)),t}const iNe=(K$||$ke).DirectedGraph;function IY(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),o=[t.x_rotation,t.y_rotation,t.z_rotation].map(lU),s=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(o).scale(s)}class DY{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new iNe;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},MY.type,mi.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},MY.type,mi.SpatialEntity,null);const t={};for(const i of vr(e,null,mi.spatialPlacement.source,null,null))t[i.subject.id]=i.object.id;for(const i of vr(e,null,mi.spatialPlacement.target,null,null)){const r=t[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new Hn(Hn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new Hn(Hn.IDENTITY),o=Yke(this.graph,e,t);if(o&&o.length>0){o.reverse();let s="";for(const a of o)s&&IY(r,tNe(i,this.graph.getEdgeAttribute(a,s,"id"))),s=a;return r}}getSpatialPlacement(e,t){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=J$(e,"placement[0]",J$(e,"placement",void 0));let o;if(r&&this.graph.hasNode(r.target)?(o=this.getTransformationMatrix(r.target,t),o&&(o=IY(o,r))):i&&(o=this.getTransformationMatrix(i,t)),o){const s=(new $r).fromRotationMatrix(o,$r.XYZ),a=o.getTranslation().map(d=>1e3*d),c=s.toVector3().map(noe),l=o.getScale().map(d=>d<1&&d>.999999?1:d);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${Jke()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:t,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class RY{constructor(e){this.db=e}getSpatialEntity(e){return lp(this.db.store,e)}getExtractionSets(e){return function ZPe(n,e){return uS(n.getSubjects(mi.spatialEntity.extraction_set_for,e,null).map(t=>TY(n,t.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return TY(this.db.store,e)}getAnatomicalStructures(e){return function QPe(n,e){return uS(n.getSubjects(mi.spatialEntity.reference_organ,e,null).map(t=>lp(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function eNe(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(lp(n,t.subject.id))},null,mi.spatialEntity.reference_organ,null,null),uS(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let t;switch(e?.sex){case"Male":t=mi.spatial.Male.id;break;case"Female":t=mi.spatial.Female.id;break;default:t=mi.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(e?.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return e?.debug&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,o])=>i.concat(o.length>0?o:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(o=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of,a=this.getSceneNode(o,t,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s});return s&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(mi.base("VHRightKidney").id),t,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHLeftKidney").id),t,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC1").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC2").id),t,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(mi.base("VHSpleenCC3").id),t,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(o=>void 0!==o)}getReferenceOrganScene(e,t){const i=void 0!==t?.sex&&"both"!==t?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(o=>o.representation_of===e&&(!i||o.sex===t?.sex));if(r.length>0){const o=r[0],a=this.getSceneNode(o,o,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===o.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(t)??[]).map(l=>this.getSceneNode(l,o,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let s=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(s){if(r)s=new Hn(Hn.IDENTITY).rotateX(lU(90)).multiplyLeft(s);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);s.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:s,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const rNe={"@context":{"@base":"http://purl.org/ccf/","@vocab":"http://purl.org/ccf/",ccf:"http://purl.org/ccf/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function wS(n,e=rNe){return JSON.parse(n,(t,i)=>"ccf_annotations"===t&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==t||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const{get:uh,omit:oNe,set:ES,toNumber:tN}=Zke,AS="https://entity.api.hubmapconsortium.org/entities/",kY=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),sNe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},Jg={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},nN="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class lNe{constructor(e,t="",i="",r){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const a=this.data.descendants||[],c=(this.data.ancestors||[]).find(pe=>"Donor"===pe.entity_type);this.donor=this.getDonor(c,i);const l=this.getRuiLocation(e,this.donor);l?this.rui_location=l:this.bad=!0,Jg[e.group_uuid]||(Jg[e.group_uuid]=e.group_name);const d=new Date(e.last_modified_timestamp).toLocaleDateString(),h=Jg[e.group_uuid]||e.group_name,f=e.created_by_user_displayname;this["@id"]=AS+e.uuid,this.label=`Registered ${d}, ${f}, ${h}`,this.link=`${i}browse/sample/${e.uuid}`;const m={},y=[];this.sections=y;const E=[];this.datasets=E;for(const pe of a.filter(De=>"Sample"===De.entity_type)){const De=this.getSection(pe,e,i);m[pe.submission_id]=De,y.push(De),De.section_number=De.section_number??y.length}for(const pe of a)if("Dataset"===pe.entity_type){const De=this.getDataset(pe,t,i,r),Ve=uh(pe,["ingest_metadata","metadata","tissue_id"]);m[Ve]?m[Ve].datasets?.push(De):E.push(De)}const M=l??{},H=`${M.x_dimension} x ${M.y_dimension} x ${M.z_dimension} ${M.dimension_units}`;this.section_count=M.slice_count||y.length;const $=parseFloat((M.slice_thickness||(M.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=$;const Y=M.dimension_units||"millimeter";this.section_units=Y,this.description=`${H}, ${$} ${Y}, ${this.section_count} Sections`,y.forEach((pe,De)=>{pe.description=`${M.x_dimension} x ${M.y_dimension} x ${$} ${Y}, ${$} ${Y}, ${pe.description}`,pe.section_number=De+1})}getSection(e,t,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":AS+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${Jg[e.group_uuid]||e.group_name}`,description:`${t.sample_category}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t="",i="",r){const o=new Date(e.last_modified_timestamp).toLocaleDateString(),s=Jg[e.group_uuid]||e.group_name,a=e.created_by_user_displayname,c=[...e.data_types,uh(e,["ingest_metadata","metadata","assay_type"],"")],l=c.join("|").toLowerCase();let d,h="assets/icons/ico-unknown.svg";return-1!==l.indexOf("10x")?(d="10x",h="assets/icons/ico-bulk-10x.svg"):-1!==l.indexOf("af")?(d="AF",h="assets/icons/ico-spatial-af.svg"):-1!==l.indexOf("codex")?(d="CODEX",h="assets/icons/ico-spatial-codex.svg"):-1!==l.indexOf("imc")?(d="IMC",h="assets/icons/ico-spatial-imc.svg"):-1!==l.indexOf("lc")&&-1===l.indexOf("af")?(d="LC",h="assets/icons/ico-bulk-lc.svg"):d=-1!==l.indexOf("maldi")?"MALDI":-1!==l.indexOf("pas")?"PAS":"OTHER",h=this.getDatasetThumbnail(e,t,r)??h,{"@id":AS+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${a}, ${s}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:d,thumbnail:h}}getDatasetThumbnail(e,t,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${t}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=uh(e,"metadata.files",[]).filter(o=>/\.(ome\.tif|ome\.tiff)$/.test(o.rel_path)).filter(o=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(o.rel_path)).filter(o=>kY.has(o.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(o=>`${t}/${e.uuid}/${o.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const o=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(kY.has(o))return`assets/thumbnails/TMC-Vanderbilt/DR1/${o}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=sNe[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,t){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const o=i.match(/age ([0-9]+)/);let s,a;o&&(s=tN(o[1]));for(const f of uh(e,"metadata.organ_donor_data",uh(e,"metadata.living_donor_data",[])))"Feminine gender"===f.preferred_term||"Female"===f.preferred_term?r="Female":"Masculine gender"===f.preferred_term||"Male"===f.preferred_term?r="Male":"Current chronological age"===f.preferred_term||"Age"===f.preferred_term?s=tN(f.data_value):"Body mass index"===f.preferred_term&&(a=tN(f.data_value));let c="";r&&s&&(c+=`${r}, Age ${s}`,a&&(c+=`, BMI ${a.toFixed(1)}`));const l=new Date(e.last_modified_timestamp).toLocaleDateString(),d=Jg[e.group_uuid]||e.group_name;return{"@id":AS+e.uuid,"@type":"Donor",label:c,description:`Entered ${l}, ${e.created_by_user_displayname}, ${d}`,link:`${t}browse/donor/${e.uuid}`,age:s,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:d,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const o=uh(i,["placement","target"])??"";o.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?ES(i,["placement","target"],o.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===o||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===o)&&ES(i,["placement","target"],"Male"===t.sex?o.replace("#VH","#VHM")+"_Patch":o.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return oNe({...this},["data","bad","donor"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const dNe=1e4,uNe=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors.entity_type","ancestors.description","ancestors.metadata.organ_donor_data.preferred_term","ancestors.metadata.organ_donor_data.data_value","ancestors.metadata.living_donor_data.preferred_term","ancestors.metadata.living_donor_data.data_value","ancestors.last_modified_timestamp","ancestors.group_uuid","ancestors.group_name","ancestors.created_by_user_displayname","ancestors.uuid","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.data_types","descendants.ingest_metadata.metadata.assay_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],hNe={exists:{field:"rui_location"}};function OY(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:t??hNe,_source:{includes:uNe}})}function iN(n,e){return rN.apply(this,arguments)}function rN(){return rN=Ut(function*(n,e){try{const t=yield fetch(n,e),i=yield t.text();return t.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(o=>o.json()):JSON.parse(i):void 0}catch{return}}),rN.apply(this,arguments)}function oN(){return oN=Ut(function*(n,e,t){const i=dNe,r=function fNe(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),o=OY(0,i,t),s=yield iN(n,{method:"POST",headers:r,body:o});if(!s)return;const a=s.hits.total.value;if(a<=i)return s;const c=[];for(let h=i;h<a;h+=i)c.push(iN(n,{method:"POST",headers:r,body:OY(h,i,t)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const d=l.map(h=>h.hits.hits);return{...s,hits:{...s.hits,hits:s.hits.hits.concat(...d)}}}),oN.apply(this,arguments)}function sN(){return sN=Ut(function*(n,e,t,i,r="",o=""){let s;if("static"===e?s=yield iN(n):"search-api"===e&&(s=yield function pNe(n,e,t){return oN.apply(this,arguments)}(n,i,t)),s)return function aNe(n,e="",t="",i,r=!1){const s={},a=uh(n,"hits.hits",[]).map(l=>uh(l,"_source",{})).sort((l,d)=>l.uuid.localeCompare(d.uuid)).map(l=>new lNe(l,e,t,i).toJsonLd());for(const l of a){const d=l["@id"];s[d]?s[d].samples.push(l.samples[0]):s[d]=l}const c=Object.values(s);return r&&(function cNe(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let o=0;o<r.length;o++){const s=r[o]["@id"];e=e.concat(r[o].datasets);for(const a of r[o].sections)e=e.concat(a.datasets);for(let a=o+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===s)&&(r[o].deleteMe=!0,t++)}i.samples=r.filter(o=>!0!==o.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(c),console.log(c.map(l=>({"@context":nN,...l})))),wS(JSON.stringify({"@context":nN,"@graph":c}),nN)}(s,r,o,i);console.warn(`Unable to load ${n} as HuBMAP Data`)}),sN.apply(this,arguments)}function Ev(n,e,t){const i=new Set;for(const r of e)for(const o of vr(n,r,t,null,null))i.add(o.object.id);return i}const bNe={[mi.spatialEntity.x_dimension.id]:"x",[mi.spatialEntity.y_dimension.id]:"y",[mi.spatialEntity.z_dimension.id]:"z"};function vNe(n,e,t,i){const r=e.getTransformationMatrix(t,i);let o;if(r){const s=r.getTranslation(),a=function yNe(n,e){const t=cp(n,e,"Dimensions",bNe);return[t.x,t.y,t.z]}(n,t).map(l=>l/1e3/2),c=(new $r).fromRotationMatrix(r,$r.XYZ).toQuaternion().normalize().calculateW();o=(new YP).fromCenterHalfSizeQuaternion(s,a,c)}return o}function xNe(n,e,t,i){const{x:r,y:o,z:s,radius:a,target:c}=i,l=new Set,d=a/1e3*(a/1e3);for(const h of t){const f=vNe(n,e,h,c);f&&f.distanceSquaredTo([r,o,s].map(y=>y/1e3))<=d&&l.add(h)}return l}function Av(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of vr(n,a,ei.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=t(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function SS(n,e,t){const i=new Map,r=new Set;for(const a of e)for(const c of vr(n,a,ei.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const o=t(r),s=new Set;for(const a of o)for(const c of i.get(a)??[])s.add(c);return s}function Zg(n,e){return function(t){n.has(t.id)&&e.add(t.id)}}function cN(n,e,t){const i=new Set;for(const r of t){const o=yr.namedNode(r);n.forSubjects(Zg(e,i),mi.spatialEntity.ccf_annotations,o,null)}return i}function lN(n,e){const t=function NNe(n,e){const t=new Map;for(const i of n)for(const r of vr(e,i,ei.spatialEntity,null,null))t.has(r.object.id)?t.get(r.object.id).add(i):t.set(r.object.id,new Set([i]));return t}(n,e),i=new Map;for(const r of t.keys()){const o=t.get(r);for(const s of vr(e,r,mi.spatialEntity.ccf_annotations,null,null))if(i.has(s.object.id)){const a=i.get(s.object.id);o.forEach(c=>a.add(c))}else i.set(s.object.id,new Set(o))}return i}function jNe(n,e,t){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[mi.ontologyNode.label.id]:"label",[t]:"parent",[mi.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[o,s]of vS(n,e,r))"synonymLabels"===o?i.synonymLabels.push(s):i[o]=s;return i.children=n.getSubjects(t,e,null).map(o=>o.id),i}function NY(n,e,t,i){const r={root:e,nodes:{}},o=new Set;for(const a of vr(n,null,i,null,null))o.add(a.subject.id),o.add(a.object.id);for(const a of o)r.nodes[a]=jNe(n,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:t,children:[],synonymLabels:[]});const s=n.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=s,FY(r),r}function FY(n,e=void 0,t=new Set){const i=n.nodes[e??n.root];if(i){i.children=i.children.filter(r=>!t.has(r)),i.children.forEach(r=>t.add(r));for(const r of i.children)FY(n,r,t),n.nodes[r]&&(n.nodes[r].parent=i["@id"])}}const LY=XPe(function UNe(n){const e=NY(n,Gc.body.id,"body",mi.asctb.part_of.id);return e.nodes[Gc.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(t=>t in e.nodes),e},()=>"");function dN(n,e,t,i){return{"@id":`http://purl.org/ccf/${n}`,id:n,label:e,parent:t??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const CS={[ei.label.id]:"label",[ei.description.id]:"description",[ei.link.id]:"link"},HNe={...CS,[ei.providerName.id]:"providerName"},GNe={...CS,[ei.technology.id]:"technology",[ei.thumbnail.id]:"thumbnail"},WNe={...CS,[ei.sampleType.id]:"sampleType",[ei.sectionNumber.id]:"sectionNumber",[ei.datasets.id]:"datasets"},$Ne={...CS,[ei.sampleType.id]:"sampleType",[ei.sectionCount.id]:"sectionCount",[ei.sectionSize.id]:"sectionSize",[ei.sectionUnits.id]:"sectionUnits",[ei.donor.id]:"donor",[ei.spatialEntity.id]:"spatialEntityId",[ei.sections.id]:"sections",[ei.datasets.id]:"datasets"};function YNe(n,e){return cp(n,e,"Donor",HNe)}function BY(n,e){return cp(n,e,"Dataset",GNe)}function XNe(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of vS(n,e,WNe))if("datasets"===i){const o=BY(n,r);t[i].push(o)}else t[i]=r;return t}class KNe{constructor(e){this.database=e,this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;this.status="Loading",this.message="Loading database";const t=Date.now();return this.database.connect().then(function(){var i=Ut(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{this.status="Error",this.message=i?.message??"Unknown error while loading database",this.timestamp=(new Date).toISOString()}).finally(()=>{this.loadTime=Date.now()-t})}}function uN(){return uN=Ut(function*(){const n=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(n,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),uN.apply(this,arguments)}const{delMany:tFe,get:jY,setMany:nFe}=D,iFe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class rFe{constructor(e=iFe){this.options=e,this.store=new FP(void 0,{factory:yr}),this.graph=new DY(this),this.scene=new RY(this)}connect(e,t=!1){var i=this;return Ut(function*(){return e&&(i.options=e),i.initializing||(i.initializing=t?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return Ut(function*(){const t=(new Date).getTime(),i=yke(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,o=`ccf-database.${i}`,s=yield jY(r).catch(()=>{});let a;s&&t-new Date(+s).getTime()>36e5?yield tFe([o,r]).catch(()=>{}):a=yield jY(o).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),nFe([[o,e.serialize()],[r,""+t]]).catch(()=>{}))})()}doConnect(){var e=this;return Ut(function*(){const t=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=zP(r,yr);else if(r.endsWith(".n3store.json")){const o=yield fetch(r).then(s=>s.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(e.store=zP(o,yr))}else r?.length>0&&i.push(r);i.push(yield function eFe(){return uN.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):t.push(function PY(n,e,t,i){return sN.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken,e.options.hubmapAssetsUrl,e.options.hubmapPortalUrl).then(o=>{if(o)return e.addDataSources([o])}))),t.push(e.addDataSources(i)),yield Promise.all(t),yield e.synchronize()})()}addDataSources(e,t){var i=this;return Ut(function*(){const r=t??i.store;return yield Promise.all(e.map(function(){var o=Ut(function*(s){if("string"==typeof s)if((s.startsWith("http")||s.startsWith("assets/"))&&s.includes("jsonld")){const a=s;s=wS(s=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield BP(s,r)}else s.endsWith("n3")?yield function zke(n,e){return VP.apply(this,arguments)}(s,r):s.endsWith("rdf")||s.endsWith("owl")||s.endsWith("xml")?yield function Vke(n,e){return UP.apply(this,arguments)}(s,r):(s=wS(s),yield BP(s,r));else s=wS(JSON.stringify(s)),yield BP(s,r)});return function(s){return o.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return Ut(function*(){return yield new Promise(t=>{setTimeout(t,500)}),e.graph.createGraph(),function JNe(n){const e=LY(n),t=new Map;for(const{subject:i,object:r}of vr(n,null,mi.spatialEntity.representation_of,null,null)){const o=new Set([r.id]);let s=e.nodes[r.id]?.parent;for(;s&&!o.has(s);)o.add(s),s=e.nodes[s]?.parent;t.set(i.id,[...o].map(a=>yr.namedNode(a)))}for(const{object:i}of vr(n,null,ei.spatialEntity,null,null))for(const{subject:r}of vr(n,null,mi.spatialPlacement.source,i,null))for(const{object:o}of vr(n,r,mi.spatialPlacement.target,null,null))for(const s of t.get(o.id)??[])n.addQuad(yr.namedNode(i.id),mi.spatialEntity.ccf_annotations,s)}(e.store),e})()}serialize(){return function Hke(n){const e=Object.assign({},n);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var t=this;return Ut(function*(){t.store=zP(e,yr),t.graph=new DY(t),t.scene=new RY(t),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function ENe(n,e,t){let i=function ANe(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),ei.spatialEntity,null,null),e}(n);if(i.size>0&&(i=function ONe(n,e,t=!0){const i=new Set;if(n.forSubjects(Zg(e,i),ei.spatialEntity,null,null),!t){const r=new Set;return e.forEach(o=>i.has(o)?void 0:r.add(o)),r}return i}(n,i)),i.size>0&&("Male"===t.sex||"Female"===t.sex)){const r=t.sex;i=Av(n,i,o=>function SNe(n,e,t){const i=new Set;return n.forSubjects(Zg(e,i),ei.sex,ei[t],null),i}(n,o,r))}if(i.size>0&&t.consortiums?.length>0&&(i=Av(n,i,r=>function CNe(n,e,t){const i=new Set;for(const r of t){const o=yr.literal(r);n.forSubjects(Zg(e,i),ei.consortiumName,o,null)}return i}(n,r,t.consortiums))),i.size>0&&t.tmc?.length>0&&(i=Av(n,i,r=>function MNe(n,e,t){const i=new Set;for(const r of t){const o=yr.literal(r);n.forSubjects(Zg(e,i),ei.providerName,o,null)}return i}(n,r,t.tmc))),i.size>0&&t.technologies?.length>0&&(i=function wNe(n,e,t){const i=new Map,r=new Set,o=new Set(e);for(const c of e)for(const l of vr(n,c,ei.sections,null,null))o.add(l.object.id);for(const c of o)for(const l of vr(n,c,ei.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const s=t(r),a=new Set;for(const c of s)for(const l of i.get(c)??[])a.add(l);return a}(n,i,r=>function TNe(n,e,t){const i=new Set;for(const r of t){const o=yr.literal(r);n.forSubjects(Zg(e,i),ei.technology,o,null)}return i}(n,r,t.technologies))),i.size>0&&t.spatialSearches?.length>0&&(i=SS(n,i,r=>function PNe(n,e,t,i){const r=new Set;for(const o of i)xNe(n,e,t,o).forEach(a=>r.add(a));return r}(n,e,r,t.spatialSearches))),i.size>0&&t.ontologyTerms?.length>0){const r=t.ontologyTerms;-1===r.indexOf(Gc.body.id)&&(i=SS(n,i,o=>cN(n,o,r)))}if(i.size>0&&t.cellTypeTerms?.length>0){const r=t.cellTypeTerms;-1===r.indexOf(Gc.cell.id)&&(i=SS(n,i,o=>function INe(n,e,t){const i=new Set;for(const r of t)n.forObjects(o=>{i.add(o.id)},r,mi.asctb.located_in,null),r===Gc.cell.id&&i.add(Gc.body.id);return cN(n,e,[...i])}(n,o,r)))}if(i.size>0&&t.biomarkerTerms?.length>0){const r=t.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=SS(n,i,o=>function DNe(n,e,t){const i=new Set;for(const r of t)n.forObjects(o=>{i.add(o.id)},r,mi.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(Gc.body.id);return cN(n,e,[...i])}(n,o,r)))}if(i.size>0&&2===t.ageRange?.length&&fS(t.ageRange[0])&&fS(t.ageRange[1])){const r=Math.max(...t.ageRange),o=Math.min(...t.ageRange);1===o&&110===r||(i=Av(n,i,s=>function RNe(n,e,t,i){const r=new Set;for(const o of e)for(const s of vr(n,o,ei.age,null,null)){const a=(0,hS.fromRdf)(s.object);a>=t&&a<=i&&r.add(o)}return r}(n,s,o,r)))}if(i.size>0&&2===t.bmiRange?.length&&fS(t.bmiRange[0])&&fS(t.bmiRange[1])){const r=Math.max(...t.bmiRange),o=Math.min(...t.bmiRange);13===o&&83===r||(i=Av(n,i,s=>function kNe(n,e,t,i){const r=new Set;for(const o of e)for(const s of vr(n,o,ei.bmi,null,null)){const a=(0,hS.fromRdf)(s.object);a>=t&&a<=i&&r.add(o)}return r}(n,s,o,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(yr.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(t=>function nNe(n,e){const t=n.getObjects(yr.namedNode(e),ei.spatialEntity,null);if(t.length>0)return lp(n,t[0].id)}(this.store,t))}getDatabaseStatus(){var e=this;return Ut(function*(){return e.status||(e.status=new KNe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return Ut(function*(){return function gNe(n){const e=new Set;for(const t of vr(n,null,ei.technology,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return Ut(function*(){return function _Ne(n){const e=new Set;for(const t of vr(n,null,ei.providerName,null,null))e.add(t.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var t=this;return Ut(function*(){return e={...e,hasSpatialEntity:!0},[...t.getIds(e)].map(i=>function qNe(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of vS(n,e,$Ne))if("sections"===i){const o=XNe(n,r);t[i].push(o)}else if("datasets"===i){const o=BY(n,r);t[i].push(o)}else t[i]="donor"===i?YNe(n,r):r;return t}(t.store,i))})()}getAggregateResults(e){var t=this;return Ut(function*(){return function mNe(n,e){const t=Ev(e,n,ei.donor.id),i=Ev(e,t,ei.providerUUID.id),r=new Set;for(const c of n)for(const l of vr(e,c,ei.spatialEntity,null,null))r.add(l.subject.id);const o=Ev(e,r,ei.sections.id),s=new Set([...Ev(e,r,ei.datasets.id),...Ev(e,o,ei.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":o.size,"Tissue Datasets":s.size}).map(([c,l])=>({label:c,count:l}))}(t.getIds(e),t.store)})()}getOntologyTermOccurences(e){var t=this;return Ut(function*(){return function FNe(n,e){const t={};return lN(n,e).forEach((r,o)=>{t[o]=r.size}),t}(t.getIds(e),t.store)})()}getCellTypeTermOccurences(e){var t=this;return Ut(function*(){return function BNe(n,e){const t=lN(n,e),i=new Map;for(const o of t.keys()){const s=t.get(o);for(const a of vr(e,null,mi.asctb.located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r[Gc.cell.id]=t.get(Gc.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getBiomarkerTermOccurences(e){var t=this;return Ut(function*(){return function LNe(n,e){const t=lN(n,e),i=new Map;for(const o of t.keys()){const s=t.get(o);for(const a of vr(e,null,mi.asctb.bm_located_in,o,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);s.forEach(d=>l.add(d))}else i.set(c,new Set(s))}}const r={};return i.forEach((o,s)=>{r[s]=o.size}),r.biomarkers=t.get(Gc.body.id)?.size??0,r}(t.getIds(e),t.store)})()}getOntologyTreeModel(){var e=this;return Ut(function*(){return LY(e.store)})()}getCellTypeTreeModel(){var e=this;return Ut(function*(){return function VNe(n){return NY(n,Gc.cell.id,"cell",mi.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return Ut(function*(){return function zNe(n){const e=mi.x("ccf_biomarker_type"),t={biomarkers:dN("biomarkers","Biomarkers","",[])};for(const i of vr(n,null,e,null,null)){const r=i.object.value,o=i.subject.id;t[r]||(t[r]=dN(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),t.biomarkers.children.push(r)),t[r].children.push(o);const s=dN(o,"",r,[]),a={[mi.ontologyNode.label.id]:"label",[qPe_label.id]:"synonymLabels"};for(const[c,l]of vS(n,o,a))"synonymLabels"===c?l&&l!==s.label&&s.synonymLabels.push(l):s[c]=l;for(const c of Object.values(t))c.children.length>1&&c.children.sort((l,d)=>t[l]?.label.localeCompare(t[d]?.label));t[o]=s}return{root:"biomarkers",nodes:t}}(e.store)})()}getReferenceOrgans(){var e=this;return Ut(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var t=this;return Ut(function*(){return t.graph.createGraph(),t.scene.getScene(e)})()}getReferenceOrganScene(e,t){var i=this;return Ut(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,t)})()}getSpatialPlacement(e,t){var i=this;return Ut(function*(){return i.graph.getSpatialPlacement(e,t)})()}}class UY extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class hFe{constructor(){this.cancelUncompleted$=new U}cancelPreviousAction(){this.cancelUncompleted$.next()}}const hN="\u0275fac",VY=Symbol("InjectorInstance"),zY=Symbol("FactoryHasBeenDecorated");function HY(n,e){const t=n[VY];return t?t.get(e):null}const mFe={cancelUncompleted:!1};function GY(n=mFe){return(e,t,i)=>{let r;const o=function fFe(n){return n?new hFe:null}(n.cancelUncompleted);function s(){null!==o&&o.cancelPreviousAction();const a=HY(this,jl)||function dFe(){throw new UY}(),c=HY(this,nn)||function uFe(){throw new UY}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function lFe(n,e,t){return Lm(e)?function cFe(n,e){return e.then(t=>(n.dispatch(t),t))}(n,e):Uf(e)?function aFe(n,e,t){return null!==t&&(e=e.pipe(cr(t.cancelUncompleted$))),e.subscribe({next:i=>n.dispatch(i)}),e}(n,e,t):(n.dispatch(e),e)}(a,l,o))}"function"==typeof i?.value?(r=i.value,i.value=s):Object.defineProperty(e,t,{set:a=>r=a,get:()=>s}),function pFe(n){if(zY in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[hN]&&function fN(n){const e=n[hN];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[VY]=ze(gm),r};t&&(t.factory=i),Object.defineProperty(n,hN,{get:()=>i})}(e),n.constructor.prototype[zY]=!0}(e)}}const sLe=["bodyCanvas"];let aLe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new tn,this.nodeDrag=new tn,this.nodeClick=new tn,this.nodeHoverStart=new tn,this.nodeHoverStop=new tn,this.initialized=new tn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){this._scene=t,this.bodyUI?.setScene(t)}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this.bodyUI?.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){this._rotationX=t,this.bodyUI?.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.bodyUI?.setZoom(t)}get target(){return this._target}set target(t){this._target=t,this.bodyUI?.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:o}=this.bodyCanvas.nativeElement,s=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/s/t.x),Math.log2((o-i.y)/s/t.y));this.zoom=a}}setupBodyUI(){var t=this;return Ut(function*(){const i=t.bodyCanvas.nativeElement,r=new dwe({id:"body-ui",canvas:i,zoom:t.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:t.interactive,camera:t.camera});i.addEventListener("contextmenu",o=>o.preventDefault()),yield r.initialize(),t.bodyUI=r,window.bodyUI=r,t.scene?.length>0&&t.bodyUI.setScene(t.scene),t.bounds&&t.zoomToBounds(t.bounds),t.target&&t.bodyUI.setTarget(t.target),t.subscriptions=[t.bodyUI.sceneRotation$.subscribe(o=>t.rotationChange.next(o)),t.bodyUI.nodeDrag$.subscribe(o=>t.nodeDrag.emit(o)),t.bodyUI.nodeClick$.subscribe(o=>t.nodeClick.emit(o)),t.bodyUI.nodeHoverStart$.subscribe(o=>t.nodeHoverStart.emit(o)),t.bodyUI.nodeHoverStop$.subscribe(o=>t.nodeHoverStop.emit(o))],t.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Ni(sLe,5,vn),2&i){let o;Bn(o=jn())&&(r.bodyCanvas=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&ba(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(i,r){1&i&&Un(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return n})(),cLe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[$i]})}return n})();new vt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const rX=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name));function MLe(n,e){if(1&n&&(St(0,"div",16),Un(1,"youtube-player",17),Rt()),2&n){const t=Ln(3);Ot(1),Dw("videoId",t.videoID)}}function TLe(n,e){if(1&n&&(St(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),li(3),Rt()(),St(4,"div",13),Un(5,"markdown",14),hn(6,MLe,2,1,"div",15),Rt()()),2&n){const t=Ln(),i=t.index,r=t.$implicit;Bt("expanded",0===i),Ot(3),Io(r.title),Ot(2),Fn("first",0===i),Bt("data",r.content),Ot(1),Bt("ngIf",0===i)}}function ILe(n,e){if(1&n&&(St(0,"div",9),hn(1,TLe,7,6,"mat-expansion-panel",10),Rt()),2&n){const t=e.$implicit;Ot(1),Bt("ngIf",t)}}rX.filter(n=>!0!==n.disabled);let oX=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||n)(ze(GO),ze(S7))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(St(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),li(5),Rt(),St(6,"div",5)(7,"mat-icon",6),mn("click",function(){return r.close()}),li(8,"clear"),Rt()()(),St(9,"mat-dialog-content",7),hn(10,ILe,2,1,"div",8),Rt()()()()),2&i&&(Ot(5),Io(r.infoTitle),Ot(5),Bt("ngForOf",r.documentationContents))},dependencies:[Ed,Dc,M7,T7,Fg,B7,sTe,$7,dW],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return n})(),sX=(()=>{class n{constructor(t){this.http=t,this.panelContent=new hi({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(o=>{const s={content:this.parseMarkdown(o),infoTitle:r,videoID:i};this.panelContent.next(s)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const o of r)if(o.length){const s=o.includes("\n\n")?"\n\n":"\r\n\r\n",a=o.split(s);i.push({title:a[0],content:a.splice(1).join(s)})}return i}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ih))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RLe=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new tn,this.closeClicked=new tn}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&ba(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"text","click"]],template:function(i,r){1&i&&(St(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),li(5),Rt(),St(6,"mat-icon",5),mn("click",function(){return r.close()}),li(7,"clear"),Rt()(),Un(8,"img",6),St(9,"mat-dialog-content",7)(10,"div",8),li(11),Rt(),St(12,"a",9),mn("click",function(){return r.onDialogButtonClick()}),Rt()()()()()),2&i&&(Ot(5),Io(r.infoTitle),Ot(3),Bt("src",r.imageUrl,Ob),Ot(3),Os(" ",r.message,""),Ot(1),Bt("text",r.callToAction))},dependencies:[Fg,M7,T7,hW],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return n})(),i_=(()=>{let n=class Mv extends vDe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function xDe(){return vi(n=>null!=n)}(),Bs(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(H9(...t),je(),Bs(1))}getOption(...t){const i=this.getPathKey(t);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(H9(...t),je(),Bs(1));return this.optionCache.set(i,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=gi(Mv)))(r||Mv)}}();static#t=this.\u0275prov=At({token:Mv,factory:Mv.\u0275fac})};return He([DW()],n.prototype,"config$",null),n=He([_De(),pH({name:"globalConfig",defaults:null})],n),n})();!function PLe(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}();class LLe{getDatabaseStatus(){return this.forwardCall("getDatabaseStatus")}getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getCellTypeTreeModel(){return this.forwardCall("getCellTypeTreeModel")}getBiomarkerTreeModel(){return this.forwardCall("getBiomarkerTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getCellTypeTermOccurences(e){return this.forwardCall("getCellTypeTermOccurences",e)}getBiomarkerTermOccurences(e){return this.forwardCall("getBiomarkerTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,t){return this.forwardCall("getReferenceOrganScene",e,t)}}class aX extends LLe{forwardCall(e,...t){return this.impl$.pipe(ke(i=>i[e](...t)))}}let cX=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})();const mN=new U,r_={cacheBusterObserver:mN},dp={cacheBusterObserver:mN,maxCacheCount:4};function lX(n,e,t){return n?{min:n[0]>e?n[0]:void 0,max:n[1]<t?n[1]:void 0}:void 0}function BLe(n){return{age:lX(n?.ageRange,1,110),bmi:lX(n?.bmiRange,13,83),sex:n?.sex?.toLowerCase?.(),ontologyTerms:n?.ontologyTerms,cellTypeTerms:n?.cellTypeTerms,consortiums:n?.consortiums,providers:n?.tmc,technologies:n?.technologies,spatial:n?.spatialSearches}}function dX(n){return n.map(e=>({...e,transformMatrix:new Hn(e.transformMatrix??[])}))}let jLe=(()=>{class n{constructor(t,i){this.api=t,this.globalConfig=i,i.getOption("hubmapToken").subscribe(mN)}getDatabaseStatus(){return this.doRequest(t=>this.api.dbStatus(t))}getProviderNames(){return this.doRequest(t=>this.api.providerNames(t))}getDatasetTechnologyNames(){return this.doRequest(t=>this.api.technologyNames(t))}getOntologyTreeModel(){return this.doRequest(t=>this.api.ontologyTreeModel(t),void 0,{},n=>n)}getCellTypeTreeModel(){return this.doRequest(t=>this.api.cellTypeTreeModel(t),void 0,{},n=>n)}getBiomarkerTreeModel(){return this.doRequest(t=>this.api.biomarkerTreeModel(t),void 0,{},n=>n)}getReferenceOrgans(){return this.doRequest(t=>this.api.referenceOrgans(t),void 0,{},n=>n)}getTissueBlockResults(t){return this.doRequest(i=>this.api.tissueBlocks(i),t,{},n=>n)}getAggregateResults(t){return this.doRequest(i=>this.api.aggregateResults(i),t)}getOntologyTermOccurences(t){return this.doRequest(i=>this.api.ontologyTermOccurences(i),t)}getCellTypeTermOccurences(t){return this.doRequest(i=>this.api.cellTypeTermOccurences(i),t)}getBiomarkerTermOccurences(t){return this.doRequest(i=>this.api.biomarkerTermOccurences(i),t)}getScene(t){return this.doRequest(i=>this.api.scene(i),t,{},dX)}getReferenceOrganScene(t,i){return this.doRequest(r=>this.api.referenceOrganScene(r),i,{organIri:t},dX)}doRequest(t,i,r,o){const{api:s,globalConfig:a}=this,c={...BLe(i),...r};return qa([a.getOption("remoteApiEndpoint"),a.getOption("hubmapToken")]).pipe(Qi(1),Oi(([l,d])=>{s.configuration.basePath=l,d&&(c.token=d)}),ke(()=>t(c)),A(l=>o?o(l):l))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(B$),rt(i_))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return He([Ca(r_)],n.prototype,"getProviderNames",null),He([Ca(r_)],n.prototype,"getDatasetTechnologyNames",null),He([Ca(r_)],n.prototype,"getOntologyTreeModel",null),He([Ca(r_)],n.prototype,"getCellTypeTreeModel",null),He([Ca(r_)],n.prototype,"getBiomarkerTreeModel",null),He([Ca(r_)],n.prototype,"getReferenceOrgans",null),He([Ca(dp)],n.prototype,"getTissueBlockResults",null),He([Ca(dp)],n.prototype,"getAggregateResults",null),He([Ca(dp)],n.prototype,"getOntologyTermOccurences",null),He([Ca(dp)],n.prototype,"getCellTypeTermOccurences",null),He([Ca(dp)],n.prototype,"getBiomarkerTermOccurences",null),He([Ca(dp)],n.prototype,"getScene",null),He([Ca(dp)],n.prototype,"getReferenceOrganScene",null),n})(),ULe=(()=>{class n extends aX{constructor(t){super(),this.impl$=this.database$=t.config$.pipe(i=>i,vi(i=>Object.keys(i).length>0),ke(i=>function ywe(n,e){return new Ye(t=>{const i=n(),r=e(i);return(r?Li(r):te).subscribe(t),()=>{i&&i.unsubscribe()}})}(()=>this.createDatabase(i),r=>this.connectDatabase(r,i))),A(i=>i.database),Bs(1))}connectDatabase(t,i){return Ut(function*(){return yield t.database.connect(i,!0),t})()}static#e=this.\u0275fac=function(i){return new(i||n)(rt(i_))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),VLe=(()=>{class n extends ULe{createDatabase(t){return{database:new rFe(t),unsubscribe:()=>{}}}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=gi(n)))(r||n)}}();static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zLe=(()=>{class n extends aX{constructor(t,i){super(),this.impl$=t.config$.pipe(r=>r,A(r=>this.selectToken(r)),je(),A(r=>i.get(r)),Bs(1))}static#e=this.\u0275fac=function(i){return new(i||n)(rt(i_),rt(ur))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac})}return n})(),gN=(()=>{class n{static#e=this.type="[CallToAction] Learn More"}return n})(),_N=(()=>{class n{static#e=this.type="[CallToAction] Open Dialog"}return n})(),bN=(()=>{class n{static#e=this.type="[CallToAction] Close Dialog"}return n})();var yN;class Wc{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length?e:void 0}})();get length(){return Wc.storage?.length??0}key(e){return Wc.storage?.key(e)??null}getItem(e,t){return Wc.storage?.getItem(e)??t??null}setItem(e,t){try{return Wc.storage?.setItem(e,t),!0}catch{return!1}}removeItem(e){Wc.storage?.removeItem(e)}clear(){Wc.storage?.clear()}static#t=this.\u0275fac=function(t){return new(t||Wc)};static#n=this.\u0275prov=At({token:Wc,factory:Wc.\u0275fac,providedIn:"root"})}const uX="callToActionPopupShown";let hh=(()=>{let n=class kS{static#e=yN=this;static ctaDatePassed(t,i=Date.now){return+i()>+new Date(t)}constructor(t,i,r,o,s){this.dialog=t,this.ga=i,this.storage=r,this.infoService=o,this.http=s}ngxsOnInit(t){const{expirationDate:i,popupShown:r}=t.getState(),o=this.storage.getItem(uX,`${r}`),s=yN.ctaDatePassed(i);"true"!==o&&!s&&t.dispatch(new _N)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(A(t=>this.infoService.parseMarkdown(t)))}launchLearnMore(t){this.dialog.open(oX,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:t,videoID:"UfxMpzatowE"}})}learnMore(t){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Oi(i=>this.launchLearnMore(i)))}open(t){this.dialog.open(GLe,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(uX,"true"),t.patchState({popupShown:!0})}close(t){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(i){return new(i||kS)(rt(NA),rt(mv),rt(Wc),rt(sX),rt(ih))};static#n=this.\u0275prov=At({token:kS,factory:kS.\u0275fac})};return He([Uk(gN)],n.prototype,"learnMore",null),He([Uk(_N)],n.prototype,"open",null),He([Uk(bN)],n.prototype,"close",null),n})();hh=yN=He([pH({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}})],hh);let DS=(()=>{class n{static title(t){return t.title}static message(t){return t.message}static callToAction(t){return t.callToAction}static imageUrl(t){return t.imageUrl}static expirationDate(t){return t.expirationDate}static popupShown(t){return t.popupShown}}return He([Tg([hh])],n,"title",null),He([Tg([hh])],n,"message",null),He([Tg([hh])],n,"callToAction",null),He([Tg([hh])],n,"imageUrl",null),He([Tg([hh])],n,"expirationDate",null),He([Tg([hh])],n,"popupShown",null),n})(),GLe=(()=>{class n{constructor(){this.close=()=>new bN,this.learnMore=()=>new gN}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"infoTitle","message","callToAction","imageUrl","callToActionClicked","closeClicked"]],template:function(i,r){1&i&&(St(0,"ccf-call-to-action",0),mn("callToActionClicked",function(){return r.learnMore()})("closeClicked",function(){return r.close()}),Zr(1,"async"),Zr(2,"async"),Zr(3,"async"),Zr(4,"async"),Rt()),2&i&&Bt("infoTitle",Wo(1,4,r.title$))("message",Wo(2,6,r.message$))("callToAction",Wo(3,8,r.callToAction$))("imageUrl",Wo(4,10,r.imageUrl$))},dependencies:[RLe,w0],changeDetection:0})}return He([UE(DS.title)],n.prototype,"title$",void 0),He([UE(DS.message)],n.prototype,"message$",void 0),He([UE(DS.callToAction)],n.prototype,"callToAction$",void 0),He([UE(DS.imageUrl)],n.prototype,"imageUrl$",void 0),He([GY()],n.prototype,"close",void 0),He([GY()],n.prototype,"learnMore",void 0),n})(),YLe=(()=>{class n{constructor(t){this.source=t,this.organs=rX}getOrganInfo(t,i,r="Female"){let o=this.organs.find(a=>a.id===t);if(!o)return Wt(void 0);const s=o.organ;return o.disabled&&(o=this.organs.find(a=>!a.disabled&&a.organ===s)),o?.side&&i&&o.side!==i&&(o=this.organs.find(a=>!a.disabled&&a.organ===s&&a.side===i)),Wt(o)}getOrgan(t,i="Both"){return this.source.getReferenceOrgans().pipe(A(r=>r.find(o=>o.representation_of===t.id&&("Both"===i||o.sex===i))))}getOrganScene(t,i="Female"){return t.id?this.source.getReferenceOrganScene(t.id,{ontologyTerms:[t.id],sex:i}):Wt([])}getOrganStats(t,i="Female"){return t.id?this.source.getAggregateResults({ontologyTerms:[t.id],sex:i}):Wt([])}getBlocks(t,i="Female"){return t.id?this.source.getTissueBlockResults({ontologyTerms:[t.id],sex:i}):Wt([])}static#e=this.\u0275fac=function(i){return new(i||n)(rt(cX))};static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XLe(n,e){if(1&n){const t=Sc();St(0,"div",6)(1,"div",7)(2,"div",8),li(3),Rt(),St(4,"div",9),mn("click",function(){const o=Cr(t).$implicit;return Pi(Ln().goToURL(o.buttonUrl))}),li(5),Rt()()()}if(2&n){const t=e.$implicit;Ot(3),Io(t.body),Ot(1),Bt("gaLabel",t.buttonUrl),Ot(1),Os(" ",t.buttonTitle,"")}}function qLe(n,e){if(1&n){const t=Sc();St(0,"div",10),mn("click",function(){const o=Cr(t).$implicit;return Pi(Ln().goToURL(o.buttonUrl))}),li(1),Rt()}if(2&n){const t=e.$implicit;Bt("gaLabel",t.buttonUrl),Ot(1),Io(t.buttonTitle)}}let KLe=(()=>{class n{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}goToURL(t){window.open(t,"_blank")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(i,r){1&i&&(St(0,"div",0),hn(1,XLe,6,3,"div",1),Rt(),St(2,"div",2)(3,"div",3),li(4,"Human Reference Atlas (HRA) Deep Dive"),Rt(),St(5,"div",4),hn(6,qLe,2,2,"div",5),Rt()()),2&i&&(Ot(1),Bt("ngForOf",r.linkCards),Ot(5),Bt("ngForOf",r.deepDives))},dependencies:[Ed,ORe,k$],styles:[".link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0rem 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:Inter Variable,Helvetica,Arial,sans-serif}"],changeDetection:0})}return n})();function JLe(n,e){if(1&n&&(St(0,"div",3)(1,"div",4),li(2),Rt(),St(3,"div",5),li(4),Rt()()),2&n){const t=e.$implicit;Ot(2),Io(t.count),Ot(2),Io(t.label)}}let ZLe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(i,r){1&i&&(St(0,"div",0)(1,"div",1),li(2),Rt(),hn(3,JLe,5,2,"div",2),Rt()),2&i&&(Ot(2),Os(" ",r.statsLabel," "),Ot(1),Bt("ngForOf",r.stats))},dependencies:[Ed],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0})}return n})();const QLe=["switch"];function eBe(n,e){1&n&&(St(0,"div",12),function uu(){An.lFrame.currentNamespace=ix}(),St(1,"svg",13),Un(2,"path",14),Rt(),St(3,"svg",15),Un(4,"path",16),Rt()())}const tBe=["*"],nBe=new vt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),iBe={provide:js,useExisting:xn(()=>fX),multi:!0};class hX{constructor(e,t){this.source=e,this.checked=t}}let rBe=0;const oBe=mA(Fy(pA(fA(class{constructor(n){this._elementRef=n}}))));let sBe=(()=>{class n extends oBe{get required(){return this._required}set required(t){this._required=ui(t)}get checked(){return this._checked}set checked(t){this._checked=ui(t),this._changeDetectorRef.markForCheck()}get hideIcon(){return this._hideIcon}set hideIcon(t){this._hideIcon=ui(t)}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,r,o,s,a,c){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=s,this._onChange=l=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this._hideIcon=!1,this.change=new tn,this.toggleChange=new tn,this.tabIndex=parseInt(o)||0,this.color=this.defaultColor=s.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${c}${++rBe}`,this._hideIcon=s.hideIcon??!1}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}static#e=this.\u0275fac=function(i){Ou()};static#t=this.\u0275dir=jt({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked",hideIcon:"hideIcon"},outputs:{change:"change",toggleChange:"toggleChange"},features:[pn]})}return n})(),fX=(()=>{class n extends sBe{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(t,i,r,o,s,a){super(t,i,r,o,s,a,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new hX(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(t){return new hX(this,t)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||n)(ze(vn),ze(nh),ze(eo),bc("tabindex"),ze(nBe),ze(Vr,8))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&Ni(QLe,5),2&i){let o;Bn(o=jn())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(i,r){2&i&&(xl("id",r.id),Ei("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Fn("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[di([iBe]),pn],ngContentSelectors:tBe,decls:13,vars:25,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons",4,"ngIf"],[1,"mdc-label",3,"for","click"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i&&(zr(),St(0,"div",0)(1,"button",1,2),mn("click",function(){return r._handleClick()}),Un(3,"div",3),St(4,"div",4)(5,"div",5)(6,"div",6),Un(7,"div",7),Rt(),St(8,"div",8),Un(9,"div",9),Rt(),hn(10,eBe,5,0,"div",10),Rt()()(),St(11,"label",11),mn("click",function(s){return s.stopPropagation()}),Nn(12),Rt()()),2&i){const o=Qs(2);Fn("mdc-form-field--align-end","before"==r.labelPosition),Ot(1),Fn("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),Bt("tabIndex",r.tabIndex)("disabled",r.disabled),Ei("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),Ot(8),Bt("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Ot(1),Bt("ngIf",!r.hideIcon),Ot(1),Bt("for",r.buttonId),Ei("id",r._labelId)}},dependencies:[kg,Dc],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width);--mdc-switch-disabled-handle-opacity:0.38;--mdc-switch-disabled-selected-icon-opacity:0.38;--mdc-switch-disabled-track-opacity:0.12;--mdc-switch-disabled-unselected-icon-opacity:0.38;--mdc-switch-handle-height:20px;--mdc-switch-handle-shape:10px;--mdc-switch-handle-width:20px;--mdc-switch-selected-icon-size:18px;--mdc-switch-track-height:14px;--mdc-switch-track-shape:7px;--mdc-switch-track-width:36px;--mdc-switch-unselected-icon-size:18px;--mdc-switch-state-layer-size:40px;--mdc-switch-selected-focus-state-layer-opacity:0.12;--mdc-switch-selected-hover-state-layer-opacity:0.04;--mdc-switch-selected-pressed-state-layer-opacity:0.1;--mdc-switch-unselected-focus-state-layer-opacity:0.12;--mdc-switch-unselected-hover-state-layer-opacity:0.04;--mdc-switch-unselected-pressed-state-layer-opacity:0.1}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0})}return n})(),pX=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({})}return n})(),lBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[pX,Fi,Og,$i,pX,Fi]})}return n})(),dBe=(()=>{class n{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new tn}get left(){const{value:t,labels:i}=this;return t!==i[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(i,r){2&i&&ba(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],["hideIcon","",1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(i,r){if(1&i){const o=Sc();St(0,"span",0),mn("click",function(){Cr(o);const a=Qs(3);return r.left||a.toggle(),Pi(r.updateToggle(!0))}),li(1),Rt(),St(2,"mat-slide-toggle",1,2),mn("change",function(a){return r.updateToggle(!a.checked)}),Rt(),St(4,"span",0),mn("click",function(){Cr(o);const a=Qs(3);return r.left&&a.toggle(),Pi(r.updateToggle(!1))}),li(5),Rt()}2&i&&(Fn("disabled",r.disabled)("highlighted",r.left),Ot(1),Io(r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1)),Ot(1),Bt("disabled",r.disabled)("checked",!r.left),Ot(2),Fn("disabled",r.disabled)("highlighted",!r.left),Ot(1),Io(r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1)))},dependencies:[fX],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mdc-switch__track:before, [_nghost-%COMP%]     .slider .mdc-switch__track:after{background-color:#43476580!important}[_nghost-%COMP%]     .slider .mdc-switch__shadow{background-color:#434765}"],changeDetection:0})}return n})();const uBe=["bodyUI"],hBe=function(){return["Male","Female"]},fBe=function(){return["Left","Right"]};let pBe=(()=>{class n{constructor(t){this.ga=t,this.sexChange=new tn,this.sideChange=new tn}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){const t=new Set(this.filter?.tmc??[]);this.filteredBlocks=this.blocks?.filter(i=>t.has(i.donor.providerName)).map(i=>i["@id"])??[],this.bodyUI.scene=this.bodyUI.scene.map(i=>({...i,color:i.entityId&&this.highlightedNodeId===i["@id"]?[30,136,229,255]:this.filteredBlocks.includes(i.entityId??"")?[173,255,47,229.5]:[255,255,255,229.5]}))}ngOnChanges(t){this.bodyUI&&"organ"in t&&this.zoomToFitOrgan()}updateSex(t){this.sex=t,this.sexChange.emit(this.sex)}updateSide(t){this.side=t,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:t,organ:i}=this;if(i){const{x_dimension:r,y_dimension:o,z_dimension:s}=i;t.rotation=t.rotationX=0,t.bounds={x:1.25*r/1e3,y:1.25*o/1e3,z:1.25*s/1e3},t.target=[r/1e3/2,o/1e3/2,s/1e3/2]}}nodeClicked(t){this.ga.event("node_click","organ",t.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===t.node["@id"]?"":t.node["@id"]}static#e=this.\u0275fac=function(i){return new(i||n)(ze(mv))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-organ"]],viewQuery:function(i,r){if(1&i&&Ni(uBe,7),2&i){let o;Bn(o=jn())&&(r.bodyUI=o.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange"},features:[Sr],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(i,r){1&i&&(St(0,"ccf-body-ui",0,1),mn("nodeClick",function(s){return r.nodeClicked(s)})("initialized",function(){return r.zoomToFitOrgan()}),Rt(),St(2,"div",2)(3,"ccf-slide-toggle",3),mn("valueChange",function(s){return r.updateSex(s)}),Rt(),St(4,"ccf-slide-toggle",3),mn("valueChange",function(s){return r.updateSide(s)}),Rt()()),2&i&&(Bt("scene",r.scene)("interactive",!0),Ot(3),Bt("labels",Bw(8,hBe))("value",r.sex)("hidden",!r.sex),Ot(1),Bt("labels",Bw(9,fBe))("value",r.side)("hidden",!r.side))},dependencies:[aLe,dBe],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0})}return n})();const mBe=["left"],gBe=["right"],_Be=function(){return[]},bBe=[{color:[0,0,0,0],opacity:.001}];let yBe=(()=>{class n{constructor(t,i,r){this.ga=i,this.configState=r,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(A(o=>({tmc:o}))),this.latestConfig={},this.organInfo$=r.config$.pipe(Oi(o=>this.latestConfig=o),ke(o=>t.getOrganInfo(o.organIri??"",o.side?.toLowerCase?.(),o.sex)),Oi(o=>this.logOrganLookup(o)),Oi(o=>this.latestOrganInfo=o),Bs(1)),this.organ$=this.organInfo$.pipe(ke(o=>o?t.getOrgan(o,o.hasSex?this.latestConfig.sex:void 0):Wt(void 0)),Oi(o=>{if(o&&this.latestOrganInfo){const s=this.latestOrganInfo?.hasSex?o.sex:void 0;s!==this.latestConfig.sex&&this.updateInput("sex",s),o.side!==this.latestConfig.side&&this.updateInput("side",o.side)}}),Bs(1)),this.scene$=this.organ$.pipe(ke(o=>o&&this.latestOrganInfo?t.getOrganScene(this.latestOrganInfo,o.sex):Wt(bBe))),this.stats$=this.organ$.pipe(ke(o=>o&&this.latestOrganInfo?t.getOrganStats(this.latestOrganInfo,o.sex):Wt([]))),this.statsLabel$=this.organ$.pipe(A(o=>this.makeStatsLabel(this.latestOrganInfo,o?.sex)),Ja("Loading...")),this.blocks$=this.organ$.pipe(ke(o=>o&&this.latestOrganInfo?t.getBlocks(this.latestOrganInfo,o.sex):Wt([])))}ngAfterViewInit(){const{left:t,right:i}=this;t.nativeElement.style.height=`${i.nativeElement.offsetHeight}px`}updateInput(t,i){this.configState.patchConfig({[t]:i})}makeStatsLabel(t,i){let r=[`Unknown IRI: ${this.latestConfig.organIri}`];if(t){const o=t.side?t.side.charAt(0).toUpperCase()+t.side.slice(1):void 0;r=[i,t.organ,o]}return r.filter(o=>!!o).join(", ")}logOrganLookup(t){this.ga.event(t?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}static#e=this.\u0275fac=function(i){return new(i||n)(ze(YLe),ze(mv),ze(i_))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&(Ni(mBe,7,vn),Ni(gBe,7,vn)),2&i){let o;Bn(o=jn())&&(r.left=o.first),Bn(o=jn())&&(r.right=o.first)}},decls:16,vars:25,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(i,r){if(1&i&&(St(0,"div",0)(1,"div",1,2)(3,"ccf-organ",3),mn("sexChange",function(s){return r.updateInput("sex",s)})("sideChange",function(s){return r.updateInput("side",s)}),Zr(4,"async"),Zr(5,"async"),Zr(6,"async"),Zr(7,"async"),Zr(8,"async"),Zr(9,"async"),Rt()(),St(10,"div",4,5),Un(12,"ccf-stats-list",6),Zr(13,"async"),Zr(14,"async"),Un(15,"ccf-link-cards"),Rt()()),2&i){let o;Ot(3),Bt("blocks",Wo(4,8,r.blocks$))("filter",Wo(5,10,r.filter$))("sex",Wo(6,12,r.sex$))("side",Wo(7,14,r.side$))("organ",Wo(8,16,r.organ$))("scene",null!==(o=Wo(9,18,r.scene$))&&void 0!==o?o:Bw(24,_Be)),Ot(9),Bt("statsLabel",Wo(13,20,r.statsLabel$))("stats",Wo(14,22,r.stats$))}},dependencies:[KLe,ZLe,pBe,w0],styles:[".container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:Inter;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-moz-fit-content;height:fit-content;width:29rem}"],changeDetection:0})}return n})();function vBe(n,e){1&n&&Un(0,"ccf-root")}function xBe(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){const i=CI.json(n);if(t(i))return i}else if(t(n))return n;throw new Error("Invalid data sources")}function wBe(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){if(!n?.startsWith("["))return[n];{const i=CI.json(n);if(t(i))return i}}else if(t(n))return n;throw new Error("Invalid data sources")}let EBe=(()=>{class n extends sie{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:{...bf_dbOptions,...globalThis.dbOptions},parse:{dataSources:xBe,highlightProviders:wBe,useRemoteApi:CI.boolean}}),this.sex="Female",this.side="Left"}static#e=this.\u0275fac=function(i){return new(i||n)(ze(i_),ze(eo))};static#t=this.\u0275cmp=Pn({type:n,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint"},features:[pn],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(i,r){1&i&&hn(0,vBe,1,0,"ccf-root",0),2&i&&Bt("ngIf",r.initialized)},dependencies:[Dc,yBe],encapsulation:2,changeDetection:0})}return n})(),ABe=(()=>{class n extends zLe{selectToken(t){return t.useRemoteApi&&t.remoteApiEndpoint?jLe:VLe}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=gi(n)))(r||n)}}();static#t=this.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const RS=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class MBe{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=Vf(this.action),i=function CBe(n){return RS(n.getHours(),2)+":"+RS(n.getMinutes(),2)+":"+RS(n.getSeconds(),2)+"."+RS(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class TBe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const mX=new vt("NGXS_LOGGER_PLUGIN_OPTIONS");let IBe=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new TBe(this._options),this._store=this._store||this._injector.get(jl);const o=new MBe(i,this._store,this._logWriter);return o.dispatched(t),r(t,i).pipe(Oi(s=>{o.completed(s)}),Ka(s=>{throw o.errored(s),s}))}}return n.\u0275fac=function(t){return new(t||n)(rt(mX),rt(ur))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})();const gX=new vt("LOGGER_USER_OPTIONS");function DBe(n){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),n)}let RBe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Zz,useClass:IBe,multi:!0},{provide:gX,useValue:t},{provide:mX,useFactory:DBe,deps:[gX]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Jt({type:n}),n.\u0275inj=Kt({}),n})();const kBe=[i_];let OBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[fDe.forRoot(),fH.forRoot(kBe,{developmentMode:!1}),RBe.forRoot({disabled:true})]})}return n})(),PBe=(()=>{class n{constructor(t){if(t)throw new Error("The core module should only be imported once in the root module")}static#e=this.\u0275fac=function(i){return new(i||n)(rt(n,12))};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({providers:[{provide:cX,useExisting:ABe}],imports:[s7,oke.forRoot({gaToken:"G-ERNVZ1Q4KE",appName:"organ-info",projectName:"ccf",developmentMode:!1}),pke.forRoot(()=>new sS({basePath:bf_dbOptions.remoteApiEndpoint})),OBe]})}return n})(),NBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[$i,lBe]})}return n})(),FBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[$i,cLe,NBe]})}return n})(),LBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[$i,TP]})}return n})(),BBe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[$i]})}return n})(),jBe=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function iie(n,e){const t=function Kne(n,e){return e.get(Ac).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new eie(n,e.injector),r=function qne(n){const e={};return n.forEach(({propName:t,templateName:i,transform:r})=>{e[function Gne(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,r]}),e}(t);class o extends nie{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const d=this[c];delete this[c],a.setInputValue(c,d,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,d){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return t.forEach(({propName:s,transform:a})=>{Object.defineProperty(o.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(c){this.ngElementStrategy.setInputValue(s,c,a)},configurable:!0,enumerable:!0})}),o}(EBe,{injector:this.injector});customElements.define("ccf-organ-info",t)}static#e=this.\u0275fac=function(i){return new(i||n)(rt(ur))};static#t=this.\u0275mod=Jt({type:n});static#n=this.\u0275inj=Kt({imports:[Lne,PBe,LBe,BBe,FBe]})}return n})();Nne().bootstrapModule(jBe).catch(n=>console.error(n))},2323:ne=>{ne.exports=function(g,S){var b=S.length;if(0!==b){var O=g.length;g.length+=b;for(var C=0;C<b;C++)g[O+C]=S[C]}}},3982:ne=>{"use strict";const{AbortController:Z,AbortSignal:g}=typeof self<"u"?self:typeof window<"u"?window:void 0;ne.exports=Z,ne.exports.AbortSignal=g,ne.exports.default=Z},9919:(ne,Z)=>{"use strict";Z.byteLength=function v(T){var X=_(T),K=X[1];return 3*(X[0]+K)/4-K},Z.toByteArray=function L(T){var X,x,le=_(T),K=le[0],re=le[1],ie=new b(function D(T,X,le){return 3*(X+le)/4-le}(0,K,re)),J=0,V=re>0?K-4:K;for(x=0;x<V;x+=4)X=S[T.charCodeAt(x)]<<18|S[T.charCodeAt(x+1)]<<12|S[T.charCodeAt(x+2)]<<6|S[T.charCodeAt(x+3)],ie[J++]=X>>16&255,ie[J++]=X>>8&255,ie[J++]=255&X;return 2===re&&(X=S[T.charCodeAt(x)]<<2|S[T.charCodeAt(x+1)]>>4,ie[J++]=255&X),1===re&&(X=S[T.charCodeAt(x)]<<10|S[T.charCodeAt(x+1)]<<4|S[T.charCodeAt(x+2)]>>2,ie[J++]=X>>8&255,ie[J++]=255&X),ie},Z.fromByteArray=function se(T){for(var X,le=T.length,K=le%3,re=[],J=0,V=le-K;J<V;J+=16383)re.push(j(T,J,J+16383>V?V:J+16383));return 1===K?re.push(g[(X=T[le-1])>>2]+g[X<<4&63]+"=="):2===K&&re.push(g[(X=(T[le-2]<<8)+T[le-1])>>10]+g[X>>4&63]+g[X<<2&63]+"="),re.join("")};for(var g=[],S=[],b=typeof Uint8Array<"u"?Uint8Array:Array,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0;C<64;++C)g[C]=O[C],S[O.charCodeAt(C)]=C;function _(T){var X=T.length;if(X%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var le=T.indexOf("=");return-1===le&&(le=X),[le,le===X?0:4-le%4]}function P(T){return g[T>>18&63]+g[T>>12&63]+g[T>>6&63]+g[63&T]}function j(T,X,le){for(var re=[],ie=X;ie<le;ie+=3)re.push(P((T[ie]<<16&16711680)+(T[ie+1]<<8&65280)+(255&T[ie+2])));return re.join("")}S["-".charCodeAt(0)]=62,S["_".charCodeAt(0)]=63},1979:(ne,Z)=>{"use strict";var S=function(O){return O.typeOfFunction="function",O.boolTrue=!0,O}(S||{});Z.ak=function b(O,C,N){if(!N||typeof N.value!==S.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+C+"> is not a method!");return{configurable:S.boolTrue,get:function(){var _=N.value.bind(this);return Object.defineProperty(this,C,{value:_,configurable:S.boolTrue,writable:S.boolTrue}),_}}}},9007:(ne,Z,g)=>{"use strict";var S=g(9919),b=g(2601);Z.Buffer=_,Z.SlowBuffer=function K(q){return+q!=q&&(q=0),_.alloc(+q)},Z.INSPECT_MAX_BYTES=50;var O=2147483647;function N(q){if(q>O)throw new RangeError('The value "'+q+'" is invalid for option "size"');var A=new Uint8Array(q);return A.__proto__=_.prototype,A}function _(q,A,F){if("number"==typeof q){if("string"==typeof A)throw new TypeError('The "string" argument must be of type string. Received type number');return P(q)}return v(q,A,F)}function v(q,A,F){if("string"==typeof q)return function j(q,A){if(("string"!=typeof A||""===A)&&(A="utf8"),!_.isEncoding(A))throw new TypeError("Unknown encoding: "+A);var F=0|re(q,A),ue=N(F),me=ue.write(q,A);return me!==F&&(ue=ue.slice(0,me)),ue}(q,A);if(ArrayBuffer.isView(q))return se(q);if(null==q)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(fe(q,ArrayBuffer)||q&&fe(q.buffer,ArrayBuffer))return function T(q,A,F){if(A<0||q.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<A+(F||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===A&&void 0===F?new Uint8Array(q):void 0===F?new Uint8Array(q,A):new Uint8Array(q,A,F)).__proto__=_.prototype,ue}(q,A,F);if("number"==typeof q)throw new TypeError('The "value" argument must not be of type number. Received type number');var ue=q.valueOf&&q.valueOf();if(null!=ue&&ue!==q)return _.from(ue,A,F);var me=function X(q){if(_.isBuffer(q)){var A=0|le(q.length),F=N(A);return 0===F.length||q.copy(F,0,0,A),F}return void 0!==q.length?"number"!=typeof q.length||ee(q.length)?N(0):se(q):"Buffer"===q.type&&Array.isArray(q.data)?se(q.data):void 0}(q);if(me)return me;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof q[Symbol.toPrimitive])return _.from(q[Symbol.toPrimitive]("string"),A,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}function D(q){if("number"!=typeof q)throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function P(q){return D(q),N(q<0?0:0|le(q))}function se(q){for(var A=q.length<0?0:0|le(q.length),F=N(A),ue=0;ue<A;ue+=1)F[ue]=255&q[ue];return F}function le(q){if(q>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return 0|q}function re(q,A){if(_.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||fe(q,ArrayBuffer))return q.byteLength;if("string"!=typeof q)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);var F=q.length,ue=arguments.length>2&&!0===arguments[2];if(!ue&&0===F)return 0;for(var me=!1;;)switch(A){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return R(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*F;case"hex":return F>>>1;case"base64":return Le(q).length;default:if(me)return ue?-1:R(q).length;A=(""+A).toLowerCase(),me=!0}}function ie(q,A,F){var ue=!1;if((void 0===A||A<0)&&(A=0),A>this.length||((void 0===F||F>this.length)&&(F=this.length),F<=0)||(F>>>=0)<=(A>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return Fe(this,A,F);case"utf8":case"utf-8":return Oe(this,A,F);case"ascii":return Ke(this,A,F);case"latin1":case"binary":return Ee(this,A,F);case"base64":return xe(this,A,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,A,F);default:if(ue)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),ue=!0}}function J(q,A,F){var ue=q[A];q[A]=q[F],q[F]=ue}function V(q,A,F,ue,me){if(0===q.length)return-1;if("string"==typeof F?(ue=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),ee(F=+F)&&(F=me?0:q.length-1),F<0&&(F=q.length+F),F>=q.length){if(me)return-1;F=q.length-1}else if(F<0){if(!me)return-1;F=0}if("string"==typeof A&&(A=_.from(A,ue)),_.isBuffer(A))return 0===A.length?-1:x(q,A,F,ue,me);if("number"==typeof A)return A&=255,"function"==typeof Uint8Array.prototype.indexOf?me?Uint8Array.prototype.indexOf.call(q,A,F):Uint8Array.prototype.lastIndexOf.call(q,A,F):x(q,[A],F,ue,me);throw new TypeError("val must be string, number or Buffer")}function x(q,A,F,ue,me){var yt,We=1,He=q.length,gt=A.length;if(void 0!==ue&&("ucs2"===(ue=String(ue).toLowerCase())||"ucs-2"===ue||"utf16le"===ue||"utf-16le"===ue)){if(q.length<2||A.length<2)return-1;We=2,He/=2,gt/=2,F/=2}function Ft(Q,I){return 1===We?Q[I]:Q.readUInt16BE(I*We)}if(me){var Gt=-1;for(yt=F;yt<He;yt++)if(Ft(q,yt)===Ft(A,-1===Gt?0:yt-Gt)){if(-1===Gt&&(Gt=yt),yt-Gt+1===gt)return Gt*We}else-1!==Gt&&(yt-=yt-Gt),Gt=-1}else for(F+gt>He&&(F=He-gt),yt=F;yt>=0;yt--){for(var rn=!0,Ie=0;Ie<gt;Ie++)if(Ft(q,yt+Ie)!==Ft(A,Ie)){rn=!1;break}if(rn)return yt}return-1}function B(q,A,F,ue){F=Number(F)||0;var me=q.length-F;ue?(ue=Number(ue))>me&&(ue=me):ue=me;var We=A.length;ue>We/2&&(ue=We/2);for(var He=0;He<ue;++He){var gt=parseInt(A.substr(2*He,2),16);if(ee(gt))return He;q[F+He]=gt}return He}function k(q,A,F,ue){return tt(R(A,q.length-F),q,F,ue)}function he(q,A,F,ue){return tt(function ae(q){for(var A=[],F=0;F<q.length;++F)A.push(255&q.charCodeAt(F));return A}(A),q,F,ue)}function W(q,A,F,ue){return he(q,A,F,ue)}function Me(q,A,F,ue){return tt(Le(A),q,F,ue)}function de(q,A,F,ue){return tt(function U(q,A){for(var F,ue,We=[],He=0;He<q.length&&!((A-=2)<0);++He)ue=(F=q.charCodeAt(He))>>8,We.push(F%256),We.push(ue);return We}(A,q.length-F),q,F,ue)}function xe(q,A,F){return S.fromByteArray(0===A&&F===q.length?q:q.slice(A,F))}function Oe(q,A,F){F=Math.min(q.length,F);for(var ue=[],me=A;me<F;){var Ft,yt,Gt,rn,We=q[me],He=null,gt=We>239?4:We>223?3:We>191?2:1;if(me+gt<=F)switch(gt){case 1:We<128&&(He=We);break;case 2:128==(192&(Ft=q[me+1]))&&(rn=(31&We)<<6|63&Ft)>127&&(He=rn);break;case 3:yt=q[me+2],128==(192&(Ft=q[me+1]))&&128==(192&yt)&&(rn=(15&We)<<12|(63&Ft)<<6|63&yt)>2047&&(rn<55296||rn>57343)&&(He=rn);break;case 4:yt=q[me+2],Gt=q[me+3],128==(192&(Ft=q[me+1]))&&128==(192&yt)&&128==(192&Gt)&&(rn=(15&We)<<18|(63&Ft)<<12|(63&yt)<<6|63&Gt)>65535&&rn<1114112&&(He=rn)}null===He?(He=65533,gt=1):He>65535&&(ue.push((He-=65536)>>>10&1023|55296),He=56320|1023&He),ue.push(He),me+=gt}return function Je(q){var A=q.length;if(A<=Te)return String.fromCharCode.apply(String,q);for(var F="",ue=0;ue<A;)F+=String.fromCharCode.apply(String,q.slice(ue,ue+=Te));return F}(ue)}Z.kMaxLength=O,!(_.TYPED_ARRAY_SUPPORT=function C(){try{var q=new Uint8Array(1);return q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===q.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),_.poolSize=8192,_.from=function(q,A,F){return v(q,A,F)},_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,_.alloc=function(q,A,F){return function L(q,A,F){return D(q),q<=0?N(q):void 0!==A?"string"==typeof F?N(q).fill(A,F):N(q).fill(A):N(q)}(q,A,F)},_.allocUnsafe=function(q){return P(q)},_.allocUnsafeSlow=function(q){return P(q)},_.isBuffer=function(A){return null!=A&&!0===A._isBuffer&&A!==_.prototype},_.compare=function(A,F){if(fe(A,Uint8Array)&&(A=_.from(A,A.offset,A.byteLength)),fe(F,Uint8Array)&&(F=_.from(F,F.offset,F.byteLength)),!_.isBuffer(A)||!_.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===F)return 0;for(var ue=A.length,me=F.length,We=0,He=Math.min(ue,me);We<He;++We)if(A[We]!==F[We]){ue=A[We],me=F[We];break}return ue<me?-1:me<ue?1:0},_.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(A,F){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(0===A.length)return _.alloc(0);var ue;if(void 0===F)for(F=0,ue=0;ue<A.length;++ue)F+=A[ue].length;var me=_.allocUnsafe(F),We=0;for(ue=0;ue<A.length;++ue){var He=A[ue];if(fe(He,Uint8Array)&&(He=_.from(He)),!_.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(me,We),We+=He.length}return me},_.byteLength=re,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var A=this.length;if(A%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<A;F+=2)J(this,F,F+1);return this},_.prototype.swap32=function(){var A=this.length;if(A%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<A;F+=4)J(this,F,F+3),J(this,F+1,F+2);return this},_.prototype.swap64=function(){var A=this.length;if(A%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<A;F+=8)J(this,F,F+7),J(this,F+1,F+6),J(this,F+2,F+5),J(this,F+3,F+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var A=this.length;return 0===A?"":0===arguments.length?Oe(this,0,A):ie.apply(this,arguments)},_.prototype.equals=function(A){if(!_.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A||0===_.compare(this,A)},_.prototype.inspect=function(){var A="",F=Z.INSPECT_MAX_BYTES;return A=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(A+=" ... "),"<Buffer "+A+">"},_.prototype.compare=function(A,F,ue,me,We){if(fe(A,Uint8Array)&&(A=_.from(A,A.offset,A.byteLength)),!_.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(void 0===F&&(F=0),void 0===ue&&(ue=A?A.length:0),void 0===me&&(me=0),void 0===We&&(We=this.length),F<0||ue>A.length||me<0||We>this.length)throw new RangeError("out of range index");if(me>=We&&F>=ue)return 0;if(me>=We)return-1;if(F>=ue)return 1;if(this===A)return 0;for(var He=(We>>>=0)-(me>>>=0),gt=(ue>>>=0)-(F>>>=0),Ft=Math.min(He,gt),yt=this.slice(me,We),Gt=A.slice(F,ue),rn=0;rn<Ft;++rn)if(yt[rn]!==Gt[rn]){He=yt[rn],gt=Gt[rn];break}return He<gt?-1:gt<He?1:0},_.prototype.includes=function(A,F,ue){return-1!==this.indexOf(A,F,ue)},_.prototype.indexOf=function(A,F,ue){return V(this,A,F,ue,!0)},_.prototype.lastIndexOf=function(A,F,ue){return V(this,A,F,ue,!1)},_.prototype.write=function(A,F,ue,me){if(void 0===F)me="utf8",ue=this.length,F=0;else if(void 0===ue&&"string"==typeof F)me=F,ue=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F>>>=0,isFinite(ue)?(ue>>>=0,void 0===me&&(me="utf8")):(me=ue,ue=void 0)}var We=this.length-F;if((void 0===ue||ue>We)&&(ue=We),A.length>0&&(ue<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");for(var He=!1;;)switch(me){case"hex":return B(this,A,F,ue);case"utf8":case"utf-8":return k(this,A,F,ue);case"ascii":return he(this,A,F,ue);case"latin1":case"binary":return W(this,A,F,ue);case"base64":return Me(this,A,F,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,A,F,ue);default:if(He)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),He=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Te=4096;function Ke(q,A,F){var ue="";F=Math.min(q.length,F);for(var me=A;me<F;++me)ue+=String.fromCharCode(127&q[me]);return ue}function Ee(q,A,F){var ue="";F=Math.min(q.length,F);for(var me=A;me<F;++me)ue+=String.fromCharCode(q[me]);return ue}function Fe(q,A,F){var ue=q.length;(!A||A<0)&&(A=0),(!F||F<0||F>ue)&&(F=ue);for(var me="",We=A;We<F;++We)me+=G(q[We]);return me}function Pe(q,A,F){for(var ue=q.slice(A,F),me="",We=0;We<ue.length;We+=2)me+=String.fromCharCode(ue[We]+256*ue[We+1]);return me}function Ge(q,A,F){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(q+A>F)throw new RangeError("Trying to access beyond buffer length")}function ge(q,A,F,ue,me,We){if(!_.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>me||A<We)throw new RangeError('"value" argument is out of bounds');if(F+ue>q.length)throw new RangeError("Index out of range")}function Ae(q,A,F,ue,me,We){if(F+ue>q.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function qe(q,A,F,ue,me){return A=+A,F>>>=0,me||Ae(q,0,F,4),b.write(q,A,F,ue,23,4),F+4}function ct(q,A,F,ue,me){return A=+A,F>>>=0,me||Ae(q,0,F,8),b.write(q,A,F,ue,52,8),F+8}_.prototype.slice=function(A,F){var ue=this.length;(A=~~A)<0?(A+=ue)<0&&(A=0):A>ue&&(A=ue),(F=void 0===F?ue:~~F)<0?(F+=ue)<0&&(F=0):F>ue&&(F=ue),F<A&&(F=A);var me=this.subarray(A,F);return me.__proto__=_.prototype,me},_.prototype.readUIntLE=function(A,F,ue){A>>>=0,F>>>=0,ue||Ge(A,F,this.length);for(var me=this[A],We=1,He=0;++He<F&&(We*=256);)me+=this[A+He]*We;return me},_.prototype.readUIntBE=function(A,F,ue){A>>>=0,F>>>=0,ue||Ge(A,F,this.length);for(var me=this[A+--F],We=1;F>0&&(We*=256);)me+=this[A+--F]*We;return me},_.prototype.readUInt8=function(A,F){return A>>>=0,F||Ge(A,1,this.length),this[A]},_.prototype.readUInt16LE=function(A,F){return A>>>=0,F||Ge(A,2,this.length),this[A]|this[A+1]<<8},_.prototype.readUInt16BE=function(A,F){return A>>>=0,F||Ge(A,2,this.length),this[A]<<8|this[A+1]},_.prototype.readUInt32LE=function(A,F){return A>>>=0,F||Ge(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+16777216*this[A+3]},_.prototype.readUInt32BE=function(A,F){return A>>>=0,F||Ge(A,4,this.length),16777216*this[A]+(this[A+1]<<16|this[A+2]<<8|this[A+3])},_.prototype.readIntLE=function(A,F,ue){A>>>=0,F>>>=0,ue||Ge(A,F,this.length);for(var me=this[A],We=1,He=0;++He<F&&(We*=256);)me+=this[A+He]*We;return me>=(We*=128)&&(me-=Math.pow(2,8*F)),me},_.prototype.readIntBE=function(A,F,ue){A>>>=0,F>>>=0,ue||Ge(A,F,this.length);for(var me=F,We=1,He=this[A+--me];me>0&&(We*=256);)He+=this[A+--me]*We;return He>=(We*=128)&&(He-=Math.pow(2,8*F)),He},_.prototype.readInt8=function(A,F){return A>>>=0,F||Ge(A,1,this.length),128&this[A]?-1*(255-this[A]+1):this[A]},_.prototype.readInt16LE=function(A,F){A>>>=0,F||Ge(A,2,this.length);var ue=this[A]|this[A+1]<<8;return 32768&ue?4294901760|ue:ue},_.prototype.readInt16BE=function(A,F){A>>>=0,F||Ge(A,2,this.length);var ue=this[A+1]|this[A]<<8;return 32768&ue?4294901760|ue:ue},_.prototype.readInt32LE=function(A,F){return A>>>=0,F||Ge(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},_.prototype.readInt32BE=function(A,F){return A>>>=0,F||Ge(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},_.prototype.readFloatLE=function(A,F){return A>>>=0,F||Ge(A,4,this.length),b.read(this,A,!0,23,4)},_.prototype.readFloatBE=function(A,F){return A>>>=0,F||Ge(A,4,this.length),b.read(this,A,!1,23,4)},_.prototype.readDoubleLE=function(A,F){return A>>>=0,F||Ge(A,8,this.length),b.read(this,A,!0,52,8)},_.prototype.readDoubleBE=function(A,F){return A>>>=0,F||Ge(A,8,this.length),b.read(this,A,!1,52,8)},_.prototype.writeUIntLE=function(A,F,ue,me){A=+A,F>>>=0,ue>>>=0,me||ge(this,A,F,ue,Math.pow(2,8*ue)-1,0);var He=1,gt=0;for(this[F]=255&A;++gt<ue&&(He*=256);)this[F+gt]=A/He&255;return F+ue},_.prototype.writeUIntBE=function(A,F,ue,me){A=+A,F>>>=0,ue>>>=0,me||ge(this,A,F,ue,Math.pow(2,8*ue)-1,0);var He=ue-1,gt=1;for(this[F+He]=255&A;--He>=0&&(gt*=256);)this[F+He]=A/gt&255;return F+ue},_.prototype.writeUInt8=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,1,255,0),this[F]=255&A,F+1},_.prototype.writeUInt16LE=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,2,65535,0),this[F]=255&A,this[F+1]=A>>>8,F+2},_.prototype.writeUInt16BE=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,2,65535,0),this[F]=A>>>8,this[F+1]=255&A,F+2},_.prototype.writeUInt32LE=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,4,4294967295,0),this[F+3]=A>>>24,this[F+2]=A>>>16,this[F+1]=A>>>8,this[F]=255&A,F+4},_.prototype.writeUInt32BE=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,4,4294967295,0),this[F]=A>>>24,this[F+1]=A>>>16,this[F+2]=A>>>8,this[F+3]=255&A,F+4},_.prototype.writeIntLE=function(A,F,ue,me){if(A=+A,F>>>=0,!me){var We=Math.pow(2,8*ue-1);ge(this,A,F,ue,We-1,-We)}var He=0,gt=1,Ft=0;for(this[F]=255&A;++He<ue&&(gt*=256);)A<0&&0===Ft&&0!==this[F+He-1]&&(Ft=1),this[F+He]=(A/gt>>0)-Ft&255;return F+ue},_.prototype.writeIntBE=function(A,F,ue,me){if(A=+A,F>>>=0,!me){var We=Math.pow(2,8*ue-1);ge(this,A,F,ue,We-1,-We)}var He=ue-1,gt=1,Ft=0;for(this[F+He]=255&A;--He>=0&&(gt*=256);)A<0&&0===Ft&&0!==this[F+He+1]&&(Ft=1),this[F+He]=(A/gt>>0)-Ft&255;return F+ue},_.prototype.writeInt8=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,1,127,-128),A<0&&(A=255+A+1),this[F]=255&A,F+1},_.prototype.writeInt16LE=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,2,32767,-32768),this[F]=255&A,this[F+1]=A>>>8,F+2},_.prototype.writeInt16BE=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,2,32767,-32768),this[F]=A>>>8,this[F+1]=255&A,F+2},_.prototype.writeInt32LE=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,4,2147483647,-2147483648),this[F]=255&A,this[F+1]=A>>>8,this[F+2]=A>>>16,this[F+3]=A>>>24,F+4},_.prototype.writeInt32BE=function(A,F,ue){return A=+A,F>>>=0,ue||ge(this,A,F,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[F]=A>>>24,this[F+1]=A>>>16,this[F+2]=A>>>8,this[F+3]=255&A,F+4},_.prototype.writeFloatLE=function(A,F,ue){return qe(this,A,F,!0,ue)},_.prototype.writeFloatBE=function(A,F,ue){return qe(this,A,F,!1,ue)},_.prototype.writeDoubleLE=function(A,F,ue){return ct(this,A,F,!0,ue)},_.prototype.writeDoubleBE=function(A,F,ue){return ct(this,A,F,!1,ue)},_.prototype.copy=function(A,F,ue,me){if(!_.isBuffer(A))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!me&&0!==me&&(me=this.length),F>=A.length&&(F=A.length),F||(F=0),me>0&&me<ue&&(me=ue),me===ue||0===A.length||0===this.length)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),A.length-F<me-ue&&(me=A.length-F+ue);var We=me-ue;if(this===A&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(F,ue,me);else if(this===A&&ue<F&&F<me)for(var He=We-1;He>=0;--He)A[He+F]=this[He+ue];else Uint8Array.prototype.set.call(A,this.subarray(ue,me),F);return We},_.prototype.fill=function(A,F,ue,me){if("string"==typeof A){if("string"==typeof F?(me=F,F=0,ue=this.length):"string"==typeof ue&&(me=ue,ue=this.length),void 0!==me&&"string"!=typeof me)throw new TypeError("encoding must be a string");if("string"==typeof me&&!_.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(1===A.length){var We=A.charCodeAt(0);("utf8"===me&&We<128||"latin1"===me)&&(A=We)}}else"number"==typeof A&&(A&=255);if(F<0||this.length<F||this.length<ue)throw new RangeError("Out of range index");if(ue<=F)return this;var He;if(F>>>=0,ue=void 0===ue?this.length:ue>>>0,A||(A=0),"number"==typeof A)for(He=F;He<ue;++He)this[He]=A;else{var gt=_.isBuffer(A)?A:_.from(A,me),Ft=gt.length;if(0===Ft)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(He=0;He<ue-F;++He)this[He+F]=gt[He%Ft]}return this};var Ye=/[^+/0-9A-Za-z-_]/g;function G(q){return q<16?"0"+q.toString(16):q.toString(16)}function R(q,A){A=A||1/0;for(var F,ue=q.length,me=null,We=[],He=0;He<ue;++He){if((F=q.charCodeAt(He))>55295&&F<57344){if(!me){if(F>56319){(A-=3)>-1&&We.push(239,191,189);continue}if(He+1===ue){(A-=3)>-1&&We.push(239,191,189);continue}me=F;continue}if(F<56320){(A-=3)>-1&&We.push(239,191,189),me=F;continue}F=65536+(me-55296<<10|F-56320)}else me&&(A-=3)>-1&&We.push(239,191,189);if(me=null,F<128){if((A-=1)<0)break;We.push(F)}else if(F<2048){if((A-=2)<0)break;We.push(F>>6|192,63&F|128)}else if(F<65536){if((A-=3)<0)break;We.push(F>>12|224,F>>6&63|128,63&F|128)}else{if(!(F<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;We.push(F>>18|240,F>>12&63|128,F>>6&63|128,63&F|128)}}return We}function Le(q){return S.toByteArray(function ye(q){if((q=(q=q.split("=")[0]).trim().replace(Ye,"")).length<2)return"";for(;q.length%4!=0;)q+="=";return q}(q))}function tt(q,A,F,ue){for(var me=0;me<ue&&!(me+F>=A.length||me>=q.length);++me)A[me+F]=q[me];return me}function fe(q,A){return q instanceof A||null!=q&&null!=q.constructor&&null!=q.constructor.name&&q.constructor.name===A.name}function ee(q){return q!=q}},1563:(ne,Z,g)=>{ne.exports={ResizeSensor:g(884),ElementQueries:g(8381)}},8381:function(ne,Z,g){"use strict";var S,b,O;typeof window<"u"&&window,b=[g(884)],void 0!==(O="function"==typeof(S=function(C){var N=function(){var v,D={},L=[];function P(W){W||(W=document.documentElement);var Me=window.getComputedStyle(W,null).fontSize;return parseFloat(Me)||16}function se(W,Me){var de=Me.split(/\d/),xe=de[de.length-1];switch(Me=parseFloat(Me),xe){case"px":default:return Me;case"em":return Me*P(W);case"rem":return Me*P();case"vw":return Me*document.documentElement.clientWidth/100;case"vh":return Me*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Oe=document.documentElement.clientWidth/100,Te=document.documentElement.clientHeight/100;return Me*(0,Math["vmin"===xe?"min":"max"])(Oe,Te)}}function T(W,Me){this.element=W;var de,xe,Oe,Te,Je,Ke,Ee,Fe,Pe=["min-width","min-height","max-width","max-height"];this.call=function(){for(de in Oe=function j(W){if(!W.getBoundingClientRect)return{width:W.offsetWidth,height:W.offsetHeight};var Me=W.getBoundingClientRect();return{width:Math.round(Me.width),height:Math.round(Me.height)}}(this.element),Ke={},D[Me])D[Me].hasOwnProperty(de)&&(Te=se(this.element,(xe=D[Me][de]).value),Je="width"===xe.property?Oe.width:Oe.height,Ee="","min"===xe.mode&&Je>=Te&&(Ee+=xe.value),"max"===xe.mode&&Je<=Te&&(Ee+=xe.value),Ke[Fe=xe.mode+"-"+xe.property]||(Ke[Fe]=""),Ee&&-1===(" "+Ke[Fe]+" ").indexOf(" "+Ee+" ")&&(Ke[Fe]+=" "+Ee));for(var Ge in Pe)Pe.hasOwnProperty(Ge)&&(Ke[Pe[Ge]]?this.element.setAttribute(Pe[Ge],Ke[Pe[Ge]].substr(1)):this.element.removeAttribute(Pe[Ge]))}}function X(W,Me){W.elementQueriesSetupInformation||(W.elementQueriesSetupInformation=new T(W,Me)),W.elementQueriesSensor||(W.elementQueriesSensor=new C(W,function(){W.elementQueriesSetupInformation.call()}))}function le(W,Me,de,xe){if(typeof D[W]>"u"){D[W]=[];var Oe=L.length;v.innerHTML+="\n"+W+" {animation: 0.1s element-queries;}",v.innerHTML+="\n"+W+" > .resize-sensor {min-width: "+Oe+"px;}",L.push(W)}D[W].push({mode:Me,property:de,value:xe})}function K(W){var Me;if(document.querySelectorAll&&(Me=W?W.querySelectorAll.bind(W):document.querySelectorAll.bind(document)),!Me&&typeof $$<"u"&&(Me=$$),!Me&&typeof jQuery<"u"&&(Me=jQuery),!Me)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Me}function ie(W){var Me=[],de=[],xe=[],Oe=0,Te=-1,Je=[];for(var Ke in W.children)if(W.children.hasOwnProperty(Ke)&&W.children[Ke].tagName&&"img"===W.children[Ke].tagName.toLowerCase()){Me.push(W.children[Ke]);var Ee=W.children[Ke].getAttribute("min-width")||W.children[Ke].getAttribute("data-min-width"),Fe=W.children[Ke].getAttribute("data-src")||W.children[Ke].getAttribute("url");xe.push(Fe),de.push({minWidth:Ee}),Ee?W.children[Ke].style.display="none":(Oe=Me.length-1,W.children[Ke].style.display="block")}function Ge(){var Ae,ge=!1;for(Ae in Me)Me.hasOwnProperty(Ae)&&de[Ae].minWidth&&W.offsetWidth>de[Ae].minWidth&&(ge=Ae);if(ge||(ge=Oe),Te!==ge)if(Je[ge])Me[Te].style.display="none",Me[ge].style.display="block",Te=ge;else{var qe=new Image;qe.onload=function(){Me[ge].src=xe[ge],Me[Te].style.display="none",Me[ge].style.display="block",Je[ge]=!0,Te=ge},qe.src=xe[ge]}else Me[ge].src=xe[ge]}Te=Oe,W.resizeSensorInstance=new C(W,Ge),Ge()}var V=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,x=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function B(W){var Me,de,xe,Oe;for(W=W.replace(/'/g,'"');null!==(Me=V.exec(W));)for(de=Me[1]+Me[3],xe=Me[2];null!==(Oe=x.exec(xe));)le(de,Oe[1],Oe[2],Oe[3])}function k(W){var Me="";if(W)if("string"==typeof W)(-1!==(W=W.toLowerCase()).indexOf("min-width")||-1!==W.indexOf("max-width"))&&B(W);else for(var de=0,xe=W.length;de<xe;de++)1===W[de].type?(-1!==(Me=W[de].selectorText||W[de].cssText).indexOf("min-height")||-1!==Me.indexOf("max-height")||-1!==Me.indexOf("min-width")||-1!==Me.indexOf("max-width"))&&B(Me):4===W[de].type?k(W[de].cssRules||W[de].rules):3===W[de].type&&W[de].styleSheet.hasOwnProperty("cssRules")&&k(W[de].styleSheet.cssRules)}var he=!1;this.init=function(){var W="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?W="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?W="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(W="oanimationstart"),document.body.addEventListener(W,function(xe){var Oe=xe.target,Te=Oe&&window.getComputedStyle(Oe,null),Je=Te&&Te.getPropertyValue("animation-name");if(Je&&-1!==Je.indexOf("element-queries")){Oe.elementQueriesSensor=new C(Oe,function(){Oe.elementQueriesSetupInformation&&Oe.elementQueriesSetupInformation.call()});var Fe=window.getComputedStyle(Oe.resizeSensor,null).getPropertyValue("min-width");Fe=parseInt(Fe.replace("px","")),X(xe.target,L[Fe])}}),he||((v=document.createElement("style")).type="text/css",v.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",v.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(v),he=!0);for(var Me=0,de=document.styleSheets.length;Me<de;Me++)try{document.styleSheets[Me].href&&0===document.styleSheets[Me].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Me].href),k(document.styleSheets[Me].cssRules||document.styleSheets[Me].rules||document.styleSheets[Me].cssText)}catch{}!function J(){for(var Me=K()("[data-responsive-image],[responsive-image]"),de=0,xe=Me.length;de<xe;de++)ie(Me[de])}()},this.findElementQueriesElements=function(W){!function re(W){var Me=K(W);for(var de in D)if(D.hasOwnProperty(de))for(var xe=Me(de,W),Oe=0,Te=xe.length;Oe<Te;Oe++)X(xe[Oe],de)}(W)},this.update=function(){this.init()}};N.update=function(){N.instance.update()},N.detach=function(v){v.elementQueriesSetupInformation?(v.elementQueriesSensor.detach(),delete v.elementQueriesSetupInformation,delete v.elementQueriesSensor):v.resizeSensorInstance&&(v.resizeSensorInstance.detach(),delete v.resizeSensorInstance)},N.init=function(){N.instance||(N.instance=new N),N.instance.init()};return N.findElementQueriesElements=function(v){N.instance.findElementQueriesElements(v)},N.listen=function(){!function(v){if(document.addEventListener)document.addEventListener("DOMContentLoaded",v,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var D=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(v(),clearInterval(D))},10);else window.onload=v}(N.init)},N})?S.apply(Z,b):S)&&(ne.exports=O)},884:function(ne,Z,g){"use strict";var S,b;typeof window<"u"&&window,void 0!==(b="function"==typeof(S=function(){if(typeof window>"u")return null;var O=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),C=O.requestAnimationFrame||O.mozRequestAnimationFrame||O.webkitRequestAnimationFrame||function(j){return O.setTimeout(j,20)},N=O.cancelAnimationFrame||O.mozCancelAnimationFrame||O.webkitCancelAnimationFrame||function(j){O.clearTimeout(j)};function _(j,se){var T=Object.prototype.toString.call(j),X="[object Array]"===T||"[object NodeList]"===T||"[object HTMLCollection]"===T||"[object Object]"===T||typeof jQuery<"u"&&j instanceof jQuery||typeof Elements<"u"&&j instanceof Elements,le=0,K=j.length;if(X)for(;le<K;le++)se(j[le]);else se(j)}function v(j){if(!j.getBoundingClientRect)return{width:j.offsetWidth,height:j.offsetHeight};var se=j.getBoundingClientRect();return{width:Math.round(se.width),height:Math.round(se.height)}}function D(j,se){Object.keys(se).forEach(function(T){j.style[T]=se[T]})}var L=function(j,se){var T=0;function X(){var re,ie,K=[];this.add=function(J){K.push(J)},this.call=function(J){for(re=0,ie=K.length;re<ie;re++)K[re].call(this,J)},this.remove=function(J){var V=[];for(re=0,ie=K.length;re<ie;re++)K[re]!==J&&V.push(K[re]);K=V},this.length=function(){return K.length}}function le(K,re){if(K){if(K.resizedAttached)return void K.resizedAttached.add(re);K.resizedAttached=new X,K.resizedAttached.add(re),K.resizeSensor=document.createElement("div"),K.resizeSensor.dir="ltr",K.resizeSensor.className="resize-sensor";var ie={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},J={position:"absolute",left:"0px",top:"0px",transition:"0s"};D(K.resizeSensor,ie);var V=document.createElement("div");V.className="resize-sensor-expand",D(V,ie);var x=document.createElement("div");D(x,J),V.appendChild(x);var B=document.createElement("div");B.className="resize-sensor-shrink",D(B,ie);var k=document.createElement("div");D(k,J),D(k,{width:"200%",height:"200%"}),B.appendChild(k),K.resizeSensor.appendChild(V),K.resizeSensor.appendChild(B),K.appendChild(K.resizeSensor);var he=window.getComputedStyle(K),W=he?he.getPropertyValue("position"):null;"absolute"!==W&&"relative"!==W&&"fixed"!==W&&"sticky"!==W&&(K.style.position="relative");var Me=!1,de=0,xe=v(K),Oe=0,Te=0,Je=!0;T=0;var Ee=function(){if(Je){if(0===K.offsetWidth&&0===K.offsetHeight)return void(T||(T=C(function(){T=0,Ee()})));Je=!1}var ge,Ae;Ae=K.offsetHeight,x.style.width=(ge=K.offsetWidth)+10+"px",x.style.height=Ae+10+"px",V.scrollLeft=ge+10,V.scrollTop=Ae+10,B.scrollLeft=ge+10,B.scrollTop=Ae+10};K.resizeSensor.resetSensor=Ee;var Fe=function(){de=0,Me&&(Oe=xe.width,Te=xe.height,K.resizedAttached&&K.resizedAttached.call(xe))},Pe=function(){xe=v(K),(Me=xe.width!==Oe||xe.height!==Te)&&!de&&(de=C(Fe)),Ee()},Ge=function(ge,Ae,qe){ge.attachEvent?ge.attachEvent("on"+Ae,qe):ge.addEventListener(Ae,qe)};Ge(V,"scroll",Pe),Ge(B,"scroll",Pe),T=C(function(){T=0,Ee()})}}_(j,function(K){le(K,se)}),this.detach=function(K){T||(N(T),T=0),L.detach(j,K)},this.reset=function(){j.resizeSensor.resetSensor()}};if(L.reset=function(j){_(j,function(se){se.resizeSensor.resetSensor()})},L.detach=function(j,se){_(j,function(T){T&&(T.resizedAttached&&"function"==typeof se&&(T.resizedAttached.remove(se),T.resizedAttached.length())||T.resizeSensor&&(T.contains(T.resizeSensor)&&T.removeChild(T.resizeSensor),delete T.resizeSensor,delete T.resizedAttached))})},typeof MutationObserver<"u"){var P=new MutationObserver(function(j){for(var se in j)if(j.hasOwnProperty(se))for(var T=j[se].addedNodes,X=0;X<T.length;X++)T[X].resizeSensor&&L.reset(T[X])});document.addEventListener("DOMContentLoaded",function(j){P.observe(document.body,{childList:!0,subtree:!0})})}return L})?S.call(Z,g,Z,ne):S)&&(ne.exports=b)},2016:ne=>{"use strict";var S,Z="object"==typeof Reflect?Reflect:null,g=Z&&"function"==typeof Z.apply?Z.apply:function(V,x,B){return Function.prototype.apply.call(V,x,B)};S=Z&&"function"==typeof Z.ownKeys?Z.ownKeys:Object.getOwnPropertySymbols?function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:function(V){return Object.getOwnPropertyNames(V)};var O=Number.isNaN||function(V){return V!=V};function C(){C.init.call(this)}ne.exports=C,ne.exports.once=function K(J,V){return new Promise(function(x,B){function k(W){J.removeListener(V,he),B(W)}function he(){"function"==typeof J.removeListener&&J.removeListener("error",k),x([].slice.call(arguments))}ie(J,V,he,{once:!0}),"error"!==V&&function re(J,V,x){"function"==typeof J.on&&ie(J,"error",V,x)}(J,k,{once:!0})})},C.EventEmitter=C,C.prototype._events=void 0,C.prototype._eventsCount=0,C.prototype._maxListeners=void 0;var N=10;function _(J){if("function"!=typeof J)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof J)}function v(J){return void 0===J._maxListeners?C.defaultMaxListeners:J._maxListeners}function D(J,V,x,B){var k,he,W;if(_(x),void 0===(he=J._events)?(he=J._events=Object.create(null),J._eventsCount=0):(void 0!==he.newListener&&(J.emit("newListener",V,x.listener?x.listener:x),he=J._events),W=he[V]),void 0===W)W=he[V]=x,++J._eventsCount;else if("function"==typeof W?W=he[V]=B?[x,W]:[W,x]:B?W.unshift(x):W.push(x),(k=v(J))>0&&W.length>k&&!W.warned){W.warned=!0;var Me=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");Me.name="MaxListenersExceededWarning",Me.emitter=J,Me.type=V,Me.count=W.length,function b(J){console&&console.warn&&console.warn(J)}(Me)}return J}function L(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(J,V,x){var B={fired:!1,wrapFn:void 0,target:J,type:V,listener:x},k=L.bind(B);return k.listener=x,B.wrapFn=k,k}function j(J,V,x){var B=J._events;if(void 0===B)return[];var k=B[V];return void 0===k?[]:"function"==typeof k?x?[k.listener||k]:[k]:x?function le(J){for(var V=new Array(J.length),x=0;x<V.length;++x)V[x]=J[x].listener||J[x];return V}(k):T(k,k.length)}function se(J){var V=this._events;if(void 0!==V){var x=V[J];if("function"==typeof x)return 1;if(void 0!==x)return x.length}return 0}function T(J,V){for(var x=new Array(V),B=0;B<V;++B)x[B]=J[B];return x}function ie(J,V,x,B){if("function"==typeof J.on)B.once?J.once(V,x):J.on(V,x);else{if("function"!=typeof J.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof J);J.addEventListener(V,function k(he){B.once&&J.removeEventListener(V,k),x(he)})}}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return N},set:function(J){if("number"!=typeof J||J<0||O(J))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+J+".");N=J}}),C.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(V){if("number"!=typeof V||V<0||O(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this},C.prototype.getMaxListeners=function(){return v(this)},C.prototype.emit=function(V){for(var x=[],B=1;B<arguments.length;B++)x.push(arguments[B]);var k="error"===V,he=this._events;if(void 0!==he)k=k&&void 0===he.error;else if(!k)return!1;if(k){var W;if(x.length>0&&(W=x[0]),W instanceof Error)throw W;var Me=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw Me.context=W,Me}var de=he[V];if(void 0===de)return!1;if("function"==typeof de)g(de,this,x);else{var xe=de.length,Oe=T(de,xe);for(B=0;B<xe;++B)g(Oe[B],this,x)}return!0},C.prototype.on=C.prototype.addListener=function(V,x){return D(this,V,x,!1)},C.prototype.prependListener=function(V,x){return D(this,V,x,!0)},C.prototype.once=function(V,x){return _(x),this.on(V,P(this,V,x)),this},C.prototype.prependOnceListener=function(V,x){return _(x),this.prependListener(V,P(this,V,x)),this},C.prototype.off=C.prototype.removeListener=function(V,x){var B,k,he,W,Me;if(_(x),void 0===(k=this._events))return this;if(void 0===(B=k[V]))return this;if(B===x||B.listener===x)0==--this._eventsCount?this._events=Object.create(null):(delete k[V],k.removeListener&&this.emit("removeListener",V,B.listener||x));else if("function"!=typeof B){for(he=-1,W=B.length-1;W>=0;W--)if(B[W]===x||B[W].listener===x){Me=B[W].listener,he=W;break}if(he<0)return this;0===he?B.shift():function X(J,V){for(;V+1<J.length;V++)J[V]=J[V+1];J.pop()}(B,he),1===B.length&&(k[V]=B[0]),void 0!==k.removeListener&&this.emit("removeListener",V,Me||x)}return this},C.prototype.removeAllListeners=function(V){var x,B,k;if(void 0===(B=this._events))return this;if(void 0===B.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==B[V]&&(0==--this._eventsCount?this._events=Object.create(null):delete B[V]),this;if(0===arguments.length){var W,he=Object.keys(B);for(k=0;k<he.length;++k)"removeListener"!==(W=he[k])&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(x=B[V]))this.removeListener(V,x);else if(void 0!==x)for(k=x.length-1;k>=0;k--)this.removeListener(V,x[k]);return this},C.prototype.listeners=function(V){return j(this,V,!0)},C.prototype.rawListeners=function(V){return j(this,V,!1)},C.listenerCount=function(J,V){return"function"==typeof J.listenerCount?J.listenerCount(V):se.call(J,V)},C.prototype.listenerCount=se,C.prototype.eventNames=function(){return this._eventsCount>0?S(this._events):[]}},7991:(ne,Z,g)=>{var S=g(6943),b=g(9151),O=g(2323);function C(j,se,T){if(!S(j))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!j.hasNode(se))throw new Error('graphology-shortest-path: the "'+se+'" source node does not exist in the given graph.');if(!j.hasNode(T))throw new Error('graphology-shortest-path: the "'+T+'" target node does not exist in the given graph.');if((se=""+se)==(T=""+T))return[se];var X=j.inboundNeighbors.bind(j),le=j.outboundNeighbors.bind(j),K={},re={};K[se]=null,re[T]=null;var V,x,B,k,he,W,Me,de,ie=[se],J=[T],xe=!1;e:for(;ie.length&&J.length;)if(ie.length<=J.length){for(V=ie,ie=[],he=0,Me=V.length;he<Me;he++)for(W=0,de=(B=le(x=V[he])).length;W<de;W++)if((k=B[W])in K||(ie.push(k),K[k]=x),k in re){xe=!0;break e}}else for(V=J,J=[],he=0,Me=V.length;he<Me;he++)for(x=V[he],B=X(x),W=0,de=B.length;W<de;W++)if(k=B[W],k in re||(J.push(k),re[k]=x),k in K){xe=!0;break e}if(!xe)return null;for(var Oe=[];k;)Oe.unshift(k),k=K[k];for(k=re[Oe[Oe.length-1]];k;)Oe.push(k),k=re[k];return Oe.length?Oe:null}function N(j,se){if(!S(j))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!j.hasNode(se))throw new Error('graphology-shortest-path: the "'+se+'" source node does not exist in the given graph.');var le,K,re,ie,J,V,T={},X={};for(T[se=""+se]=!0,X[se]=[se];Object.keys(T).length;)for(re in le=T,T={},le)for(J=0,V=(K=j.outboundNeighbors(re)).length;J<V;J++)X[ie=K[J]]||(X[ie]=X[re].concat(ie),T[ie]=!0);return X}function _(j,se,T){if(!S(se))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!se.hasNode(T))throw new Error('graphology-shortest-path: the "'+T+'" source node does not exist in the given graph.');T=""+T;var X=new Set,le={},K=0;le[T]=0;for(var ie,J,V,re=[T];0!==re.length;){var x=[];for(ie=0,J=re.length;ie<J;ie++)!X.has(V=re[ie])&&(X.add(V),O(x,se[j](V)),le[V]=K);K++,re=x}return le}var v=_.bind(null,"outboundNeighbors"),D=_.bind(null,"neighbors");function L(j,se,T){return arguments.length<3?N(j,se):C(j,se,T)}L.bidirectional=C,L.singleSource=N,L.singleSourceLength=v,L.undirectedSingleSourceLength=D,L.brandes=function P(j,se){se=""+se;var re,ie,J,V,x,B,k,he,W,T=[],X={},le={},K=j.nodes();for(B=0,he=K.length;B<he;B++)X[V=K[B]]=[],le[V]=0;var Me={};le[se]=1,Me[se]=0;for(var de=b.of(se);de.size;)for(V=de.dequeue(),T.push(V),re=Me[V],ie=le[V],k=0,W=(J=j.outboundNeighbors(V)).length;k<W;k++)(x=J[k])in Me||(de.enqueue(x),Me[x]=re+1),Me[x]===re+1&&(le[x]+=ie,X[x].push(V));return[T,X,le]},ne.exports=L},6943:ne=>{ne.exports=function(g){return null!==g&&"object"==typeof g&&"function"==typeof g.addUndirectedEdgeWithKey&&"function"==typeof g.dropNode&&"boolean"==typeof g.multi}},4938:function(ne){ne.exports=function(){"use strict";function Z(_e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Re){return typeof Re}:function(Re){return Re&&"function"==typeof Symbol&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re})(_e)}function g(_e,Re){_e.prototype=Object.create(Re.prototype),_e.prototype.constructor=_e,b(_e,Re)}function S(_e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(Re){return Re.__proto__||Object.getPrototypeOf(Re)})(_e)}function b(_e,Re){return(b=Object.setPrototypeOf||function(ve,z){return ve.__proto__=z,ve})(_e,Re)}function C(_e,Re,ve){return(C=function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(z,te,be){var Be=[null];Be.push.apply(Be,te);var Xe=new(Function.bind.apply(z,Be));return be&&b(Xe,be.prototype),Xe}).apply(null,arguments)}function N(_e){var Re="function"==typeof Map?new Map:void 0;return(N=function(ve){if(null===ve||-1===Function.toString.call(ve).indexOf("[native code]"))return ve;if("function"!=typeof ve)throw new TypeError("Super expression must either be null or a function");if(void 0!==Re){if(Re.has(ve))return Re.get(ve);Re.set(ve,te)}function te(){return C(ve,arguments,S(this).constructor)}return te.prototype=Object.create(ve.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),b(te,ve)})(_e)}function _(_e){if(void 0===_e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}var v=function(){for(var _e=arguments[0],Re=1,ve=arguments.length;Re<ve;Re++)if(arguments[Re])for(var z in arguments[Re])_e[z]=arguments[Re][z];return _e};function D(_e,Re,ve,z){var te=_e._nodes.get(Re),be=null;return te?be="mixed"===z?te.out&&te.out[ve]||te.undirected&&te.undirected[ve]:"directed"===z?te.out&&te.out[ve]:te.undirected&&te.undirected[ve]:be}function P(_e){return"object"===Z(_e)&&null!==_e&&_e.constructor===Object}function j(_e){var Re;for(Re in _e)return!1;return!0}function se(_e,Re,ve){Object.defineProperty(_e,Re,{enumerable:!1,configurable:!1,writable:!0,value:ve})}function T(_e,Re,ve){var z={enumerable:!0,configurable:!0};"function"==typeof ve?z.get=ve:(z.value=ve,z.writable=!1),Object.defineProperty(_e,Re,z)}function X(_e){return!(!P(_e)||_e.attributes&&!Array.isArray(_e.attributes))}"function"==typeof Object.assign&&(v=Object.assign);var le,K={exports:{}},re="object"==typeof Reflect?Reflect:null,ie=re&&"function"==typeof re.apply?re.apply:function(_e,Re,ve){return Function.prototype.apply.call(_e,Re,ve)};le=re&&"function"==typeof re.ownKeys?re.ownKeys:Object.getOwnPropertySymbols?function(_e){return Object.getOwnPropertyNames(_e).concat(Object.getOwnPropertySymbols(_e))}:function(_e){return Object.getOwnPropertyNames(_e)};var J=Number.isNaN||function(_e){return _e!=_e};function V(){V.init.call(this)}K.exports=V,K.exports.once=function(_e,Re){return new Promise(function(ve,z){function te(Be){_e.removeListener(Re,be),z(Be)}function be(){"function"==typeof _e.removeListener&&_e.removeListener("error",te),ve([].slice.call(arguments))}var Be;Te(_e,Re,be,{once:!0}),"error"!==Re&&("function"==typeof(Be=_e).on&&Te(Be,"error",te,{once:!0}))})},V.EventEmitter=V,V.prototype._events=void 0,V.prototype._eventsCount=0,V.prototype._maxListeners=void 0;var x=10;function B(_e){if("function"!=typeof _e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _e)}function k(_e){return void 0===_e._maxListeners?V.defaultMaxListeners:_e._maxListeners}function he(_e,Re,ve,z){var te,be,Be;if(B(ve),void 0===(be=_e._events)?(be=_e._events=Object.create(null),_e._eventsCount=0):(void 0!==be.newListener&&(_e.emit("newListener",Re,ve.listener?ve.listener:ve),be=_e._events),Be=be[Re]),void 0===Be)Be=be[Re]=ve,++_e._eventsCount;else if("function"==typeof Be?Be=be[Re]=z?[ve,Be]:[Be,ve]:z?Be.unshift(ve):Be.push(ve),(te=k(_e))>0&&Be.length>te&&!Be.warned){Be.warned=!0;var st=new Error("Possible EventEmitter memory leak detected. "+Be.length+" "+String(Re)+" listeners added. Use emitter.setMaxListeners() to increase limit");st.name="MaxListenersExceededWarning",st.emitter=_e,st.type=Re,st.count=Be.length,console&&console.warn&&console.warn(st)}return _e}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Me(_e,Re,ve){var z={fired:!1,wrapFn:void 0,target:_e,type:Re,listener:ve},te=W.bind(z);return te.listener=ve,z.wrapFn=te,te}function de(_e,Re,ve){var z=_e._events;if(void 0===z)return[];var te=z[Re];return void 0===te?[]:"function"==typeof te?ve?[te.listener||te]:[te]:ve?function(be){for(var Be=new Array(be.length),Xe=0;Xe<Be.length;++Xe)Be[Xe]=be[Xe].listener||be[Xe];return Be}(te):Oe(te,te.length)}function xe(_e){var Re=this._events;if(void 0!==Re){var ve=Re[_e];if("function"==typeof ve)return 1;if(void 0!==ve)return ve.length}return 0}function Oe(_e,Re){for(var ve=new Array(Re),z=0;z<Re;++z)ve[z]=_e[z];return ve}function Te(_e,Re,ve,z){if("function"==typeof _e.on)z.once?_e.once(Re,ve):_e.on(Re,ve);else{if("function"!=typeof _e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _e);_e.addEventListener(Re,function te(be){z.once&&_e.removeEventListener(Re,te),ve(be)})}}function Je(_e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:_e}),this.done=!1}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(_e){if("number"!=typeof _e||_e<0||J(_e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_e+".");x=_e}}),V.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},V.prototype.setMaxListeners=function(_e){if("number"!=typeof _e||_e<0||J(_e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_e+".");return this._maxListeners=_e,this},V.prototype.getMaxListeners=function(){return k(this)},V.prototype.emit=function(_e){for(var Re=[],ve=1;ve<arguments.length;ve++)Re.push(arguments[ve]);var z="error"===_e,te=this._events;if(void 0!==te)z=z&&void 0===te.error;else if(!z)return!1;if(z){var be;if(Re.length>0&&(be=Re[0]),be instanceof Error)throw be;var Be=new Error("Unhandled error."+(be?" ("+be.message+")":""));throw Be.context=be,Be}var Xe=te[_e];if(void 0===Xe)return!1;if("function"==typeof Xe)ie(Xe,this,Re);else{var st=Xe.length,wt=Oe(Xe,st);for(ve=0;ve<st;++ve)ie(wt[ve],this,Re)}return!0},V.prototype.addListener=function(_e,Re){return he(this,_e,Re,!1)},V.prototype.on=V.prototype.addListener,V.prototype.prependListener=function(_e,Re){return he(this,_e,Re,!0)},V.prototype.once=function(_e,Re){return B(Re),this.on(_e,Me(this,_e,Re)),this},V.prototype.prependOnceListener=function(_e,Re){return B(Re),this.prependListener(_e,Me(this,_e,Re)),this},V.prototype.removeListener=function(_e,Re){var ve,z,te,be,Be;if(B(Re),void 0===(z=this._events))return this;if(void 0===(ve=z[_e]))return this;if(ve===Re||ve.listener===Re)0==--this._eventsCount?this._events=Object.create(null):(delete z[_e],z.removeListener&&this.emit("removeListener",_e,ve.listener||Re));else if("function"!=typeof ve){for(te=-1,be=ve.length-1;be>=0;be--)if(ve[be]===Re||ve[be].listener===Re){Be=ve[be].listener,te=be;break}if(te<0)return this;0===te?ve.shift():function(Xe,st){for(;st+1<Xe.length;st++)Xe[st]=Xe[st+1];Xe.pop()}(ve,te),1===ve.length&&(z[_e]=ve[0]),void 0!==z.removeListener&&this.emit("removeListener",_e,Be||Re)}return this},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(_e){var Re,ve,z;if(void 0===(ve=this._events))return this;if(void 0===ve.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ve[_e]&&(0==--this._eventsCount?this._events=Object.create(null):delete ve[_e]),this;if(0===arguments.length){var te,be=Object.keys(ve);for(z=0;z<be.length;++z)"removeListener"!==(te=be[z])&&this.removeAllListeners(te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Re=ve[_e]))this.removeListener(_e,Re);else if(void 0!==Re)for(z=Re.length-1;z>=0;z--)this.removeListener(_e,Re[z]);return this},V.prototype.listeners=function(_e){return de(this,_e,!0)},V.prototype.rawListeners=function(_e){return de(this,_e,!1)},V.listenerCount=function(_e,Re){return"function"==typeof _e.listenerCount?_e.listenerCount(Re):xe.call(_e,Re)},V.prototype.listenerCount=xe,V.prototype.eventNames=function(){return this._eventsCount>0?le(this._events):[]},Je.prototype.next=function(){if(this.done)return{done:!0};var _e=this._next();return _e.done&&(this.done=!0),_e},typeof Symbol<"u"&&(Je.prototype[Symbol.iterator]=function(){return this}),Je.of=function(){var _e=arguments,Re=_e.length,ve=0;return new Je(function(){return ve>=Re?{done:!0}:{done:!1,value:_e[ve++]}})},Je.empty=function(){var _e=new Je(null);return _e.done=!0,_e},Je.is=function(_e){return _e instanceof Je||"object"==typeof _e&&null!==_e&&"function"==typeof _e.next};var Ke=Je,Ee=function(_e,Re){for(var ve,z=arguments.length>1?Re:1/0,te=z!==1/0?new Array(z):[],be=0;;){if(be===z)return te;if((ve=_e.next()).done)return be!==Re?te.slice(0,be):te;te[be++]=ve.value}},Fe=function(_e){function Re(ve,z){var te;return(te=_e.call(this)||this).name="GraphError",te.message=ve||"",te.data=z||{},te}return g(Re,_e),Re}(N(Error)),Pe=function(_e){function Re(ve,z){var te;return(te=_e.call(this,ve,z)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(te),Re.prototype.constructor),te}return g(Re,_e),Re}(Fe),Ge=function(_e){function Re(ve,z){var te;return(te=_e.call(this,ve,z)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(te),Re.prototype.constructor),te}return g(Re,_e),Re}(Fe),ge=function(_e){function Re(ve,z){var te;return(te=_e.call(this,ve,z)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_(te),Re.prototype.constructor),te}return g(Re,_e),Re}(Fe);function Ae(_e,Re){this.key=_e,this.attributes=Re,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function qe(_e,Re){this.key=_e,this.attributes=Re,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function ct(_e,Re){this.key=_e,this.attributes=Re,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Ye(_e,Re,ve,z,te,be){this.key=Re,this.attributes=be,this.undirected=_e,this.source=z,this.target=te,this.generatedKey=ve}function ye(_e,Re,ve,z,te,be,Be){var Xe,st,wt="out",It="in";if(Re&&(wt=It="undirected"),_e.multi){if(void 0===(st=(Xe=be[wt])[te])&&(Xe[te]=st=new Set),st.add(ve),z===te&&Re)return;void 0===(Xe=Be[It])[z]&&(Xe[z]=st)}else{if(be[wt][te]=ve,z===te&&Re)return;Be[It][z]=ve}}qe.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},ct.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var R=[{name:function(_e){return"get".concat(_e,"Attribute")},attacher:function(_e,Re,ve){_e.prototype[Re]=function(z,te){var be;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new ge("Graph.".concat(Re,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Re,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+te;if(te=arguments[2],!(be=D(this,Be,Xe,ve)))throw new Ge("Graph.".concat(Re,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ve&&be.undirected!==("undirected"===ve))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" ').concat(ve," edge in the graph."));return be.attributes[te]}}},{name:function(_e){return"get".concat(_e,"Attributes")},attacher:function(_e,Re,ve){_e.prototype[Re]=function(z){var te;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new ge("Graph.".concat(Re,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new ge("Graph.".concat(Re,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var be=""+z,Be=""+arguments[1];if(!(te=D(this,be,Be,ve)))throw new Ge("Graph.".concat(Re,': could not find an edge for the given path ("').concat(be,'" - "').concat(Be,'").'))}else if(!(te=this._edges.get(z=""+z)))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ve&&te.undirected!==("undirected"===ve))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" ').concat(ve," edge in the graph."));return te.attributes}}},{name:function(_e){return"has".concat(_e,"Attribute")},attacher:function(_e,Re,ve){_e.prototype[Re]=function(z,te){var be;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new ge("Graph.".concat(Re,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Re,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+te;if(te=arguments[2],!(be=D(this,Be,Xe,ve)))throw new Ge("Graph.".concat(Re,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ve&&be.undirected!==("undirected"===ve))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" ').concat(ve," edge in the graph."));return be.attributes.hasOwnProperty(te)}}},{name:function(_e){return"set".concat(_e,"Attribute")},attacher:function(_e,Re,ve){_e.prototype[Re]=function(z,te,be){var Be;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new ge("Graph.".concat(Re,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ge("Graph.".concat(Re,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Xe=""+z,st=""+te;if(te=arguments[2],be=arguments[3],!(Be=D(this,Xe,st,ve)))throw new Ge("Graph.".concat(Re,': could not find an edge for the given path ("').concat(Xe,'" - "').concat(st,'").'))}else if(!(Be=this._edges.get(z=""+z)))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ve&&Be.undirected!==("undirected"===ve))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" ').concat(ve," edge in the graph."));return Be.attributes[te]=be,this.emit("edgeAttributesUpdated",{key:Be.key,type:"set",attributes:Be.attributes,name:te}),this}}},{name:function(_e){return"update".concat(_e,"Attribute")},attacher:function(_e,Re,ve){_e.prototype[Re]=function(z,te,be){var Be;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new ge("Graph.".concat(Re,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ge("Graph.".concat(Re,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Xe=""+z,st=""+te;if(te=arguments[2],be=arguments[3],!(Be=D(this,Xe,st,ve)))throw new Ge("Graph.".concat(Re,': could not find an edge for the given path ("').concat(Xe,'" - "').concat(st,'").'))}else if(!(Be=this._edges.get(z=""+z)))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" edge in the graph.'));if("function"!=typeof be)throw new Pe("Graph.".concat(Re,": updater should be a function."));if("mixed"!==ve&&Be.undirected!==("undirected"===ve))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" ').concat(ve," edge in the graph."));return Be.attributes[te]=be(Be.attributes[te]),this.emit("edgeAttributesUpdated",{key:Be.key,type:"set",attributes:Be.attributes,name:te}),this}}},{name:function(_e){return"remove".concat(_e,"Attribute")},attacher:function(_e,Re,ve){_e.prototype[Re]=function(z,te){var be;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new ge("Graph.".concat(Re,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Re,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+te;if(te=arguments[2],!(be=D(this,Be,Xe,ve)))throw new Ge("Graph.".concat(Re,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" edge in the graph.'));if("mixed"!==ve&&be.undirected!==("undirected"===ve))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" ').concat(ve," edge in the graph."));return delete be.attributes[te],this.emit("edgeAttributesUpdated",{key:be.key,type:"remove",attributes:be.attributes,name:te}),this}}},{name:function(_e){return"replace".concat(_e,"Attributes")},attacher:function(_e,Re,ve){_e.prototype[Re]=function(z,te){var be;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new ge("Graph.".concat(Re,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Re,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+te;if(te=arguments[2],!(be=D(this,Be,Xe,ve)))throw new Ge("Graph.".concat(Re,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" edge in the graph.'));if(!P(te))throw new Pe("Graph.".concat(Re,": provided attributes are not a plain object."));if("mixed"!==ve&&be.undirected!==("undirected"===ve))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" ').concat(ve," edge in the graph."));return be.attributes=te,this.emit("edgeAttributesUpdated",{key:be.key,type:"replace",attributes:be.attributes}),this}}},{name:function(_e){return"merge".concat(_e,"Attributes")},attacher:function(_e,Re,ve){_e.prototype[Re]=function(z,te){var be;if("mixed"!==this.type&&"mixed"!==ve&&ve!==this.type)throw new ge("Graph.".concat(Re,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(Re,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Be=""+z,Xe=""+te;if(te=arguments[2],!(be=D(this,Be,Xe,ve)))throw new Ge("Graph.".concat(Re,': could not find an edge for the given path ("').concat(Be,'" - "').concat(Xe,'").'))}else if(!(be=this._edges.get(z=""+z)))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" edge in the graph.'));if(!P(te))throw new Pe("Graph.".concat(Re,": provided attributes are not a plain object."));if("mixed"!==ve&&be.undirected!==("undirected"===ve))throw new Ge("Graph.".concat(Re,': could not find the "').concat(z,'" ').concat(ve," edge in the graph."));return v(be.attributes,te),this.emit("edgeAttributesUpdated",{key:be.key,type:"merge",attributes:be.attributes,data:te}),this}}}],ae=Ke,U=function(){var _e,Re=arguments,ve=-1;return new ae(function z(){if(!_e){if(++ve>=Re.length)return{done:!0};_e=Re[ve]}var te=_e.next();return te.done?(_e=null,z()):te})},Le=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function tt(_e,Re){for(var ve in Re)_e.push(Re[ve].key)}function fe(_e,Re){for(var ve in Re)Re[ve].forEach(function(z){return _e.push(z.key)})}function ee(_e,Re,ve){for(var z in _e)if(z!==ve){var te=_e[z];Re(te.key,te.attributes,te.source.key,te.target.key,te.source.attributes,te.target.attributes,te.undirected,te.generatedKey)}}function q(_e,Re,ve){for(var z in _e)z!==ve&&_e[z].forEach(function(te){return Re(te.key,te.attributes,te.source.key,te.target.key,te.source.attributes,te.target.attributes,te.undirected,te.generatedKey)})}function A(_e,Re,ve){for(var z in _e)if(z!==ve){var te=_e[z];if(Re(te.key,te.attributes,te.source.key,te.target.key,te.source.attributes,te.target.attributes,te.undirected,te.generatedKey))return!0}return!1}function F(_e,Re,ve){var z,te,be,Be,Xe;for(var st in _e)if(st!==ve)for(z=_e[st].values();!0!==(te=z.next()).done;)if(Be=(be=te.value).source,Re(be.key,be.attributes,Be.key,(Xe=be.target).key,Be.attributes,Xe.attributes,be.undirected,be.generatedKey))return!0;return!1}function ue(_e,Re){var ve=Object.keys(_e),z=ve.length,te=null,be=0;return new Ke(function Be(){var Xe;if(te){var st=te.next();if(st.done)return te=null,be++,Be();Xe=st.value}else{if(be>=z)return{done:!0};var wt=ve[be];if(wt===Re)return be++,Be();if((Xe=_e[wt])instanceof Set)return te=Xe.values(),Be();be++}return{done:!1,value:[Xe.key,Xe.attributes,Xe.source.key,Xe.target.key,Xe.source.attributes,Xe.target.attributes]}})}function me(_e,Re,ve){var z=Re[ve];z&&_e.push(z.key)}function We(_e,Re,ve){var z=Re[ve];z&&z.forEach(function(te){return _e.push(te.key)})}function He(_e,Re,ve){var z=_e[Re];if(z){var te=z.source,be=z.target;ve(z.key,z.attributes,te.key,be.key,te.attributes,be.attributes,z.undirected,z.generatedKey)}}function gt(_e,Re,ve){var z=_e[Re];z&&z.forEach(function(te){return ve(te.key,te.attributes,te.source.key,te.target.key,te.source.attributes,te.target.attributes,te.undirected,te.generatedKey)})}function Ft(_e,Re,ve){var z=_e[Re];if(z){var te=z.source,be=z.target;return ve(z.key,z.attributes,te.key,be.key,te.attributes,be.attributes,z.undirected,z.generatedKey)}}function yt(_e,Re,ve){var z=_e[Re];if(z){for(var te,be,Be=z.values();!0!==(te=Be.next()).done;)if(ve((be=te.value).key,be.attributes,be.source.key,be.target.key,be.source.attributes,be.target.attributes,be.undirected,be.generatedKey))return!0;return!1}}function Gt(_e,Re){var ve=_e[Re];if(ve instanceof Set){var z=ve.values();return new Ke(function(){var te=z.next();if(te.done)return te;var be=te.value;return{done:!1,value:[be.key,be.attributes,be.source.key,be.target.key,be.source.attributes,be.target.attributes]}})}return Ke.of([ve.key,ve.attributes,ve.source.key,ve.target.key,ve.source.attributes,ve.target.attributes])}var Mn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ko(_e,Re){if(void 0!==Re)for(var ve in Re)_e.add(ve)}function es(_e,Re,ve){for(var z in Re){var te=Re[z];te instanceof Set&&(te=te.values().next().value);var be=te.source,Xe=be===_e?te.target:be;ve(Xe.key,Xe.attributes)}}function qi(_e,Re,ve,z){for(var te in ve){var be=ve[te];be instanceof Set&&(be=be.values().next().value);var Be=be.source,st=Be===Re?be.target:Be;_e.has(st.key)||(_e.add(st.key),z(st.key,st.attributes))}}function Yr(_e,Re,ve){for(var z in Re){var te=Re[z];te instanceof Set&&(te=te.values().next().value);var be=te.source,Xe=be===_e?te.target:be;if(ve(Xe.key,Xe.attributes))return!0}return!1}function vs(_e,Re,ve,z){for(var te in ve){var be=ve[te];be instanceof Set&&(be=be.values().next().value);var Be=be.source,st=Be===Re?be.target:Be;if(!_e.has(st.key)&&(_e.add(st.key),z(st.key,st.attributes)))return!0}return!1}function Gs(_e,Re){var ve=Object.keys(Re),z=ve.length,te=0;return new Ke(function(){if(te>=z)return{done:!0};var be=Re[ve[te++]];be instanceof Set&&(be=be.values().next().value);var Be=be.source,st=Be===_e?be.target:Be;return{done:!1,value:[st.key,st.attributes]}})}function Oo(_e,Re,ve){var z=Object.keys(ve),te=z.length,be=0;return new Ke(function Be(){if(be>=te)return{done:!0};var Xe=ve[z[be++]];Xe instanceof Set&&(Xe=Xe.values().next().value);var st=Xe.source,It=st===Re?Xe.target:st;return _e.has(It.key)?Be():(_e.add(It.key),{done:!1,value:[It.key,It.attributes]})})}function Gl(_e,Re,ve){for(var z,te,be,Be,Xe,st,wt,It=Re._nodes.values(),Vt=Re.type;!0!==(z=It.next()).done;){if(te=z.value,"undirected"!==Vt)for(be in Be=te.out)if(st=(Xe=Be[be]).target,wt=ve(te.key,st.key,te.attributes,st.attributes,Xe.key,Xe.attributes,Xe.undirected,Xe.generatedKey),_e&&wt)return;if("directed"!==Vt)for(be in Be=te.undirected)if((st=(Xe=Be[be]).target).key!==be&&(st=Xe.source),wt=ve(te.key,st.key,te.attributes,st.attributes,Xe.key,Xe.attributes,Xe.undirected,Xe.generatedKey),_e&&wt)return}}function da(_e,Re,ve){for(var z,te,be,Be,Xe,st,wt,It,Vt,en=Re._nodes.values(),yn=Re.type;!0!==(z=en.next()).done;){if(te=z.value,"undirected"!==yn)for(be in st=te.out)for(Be=st[be].values();!0!==(Xe=Be.next()).done;)if(It=(wt=Xe.value).target,Vt=ve(te.key,It.key,te.attributes,It.attributes,wt.key,wt.attributes,wt.undirected,wt.generatedKey),_e&&Vt)return;if("directed"!==yn)for(be in st=te.undirected)for(Be=st[be].values();!0!==(Xe=Be.next()).done;)if((It=(wt=Xe.value).target).key!==be&&(It=wt.source),Vt=ve(te.key,It.key,te.attributes,It.attributes,wt.key,wt.attributes,wt.undirected,wt.generatedKey),_e&&Vt)return}}function ic(_e,Re){var ve={key:_e};return j(Re.attributes)||(ve.attributes=v({},Re.attributes)),ve}function Wl(_e,Re){var ve={source:Re.source.key,target:Re.target.key};return Re.generatedKey||(ve.key=_e),j(Re.attributes)||(ve.attributes=v({},Re.attributes)),Re.undirected&&(ve.undirected=!0),ve}var mh=new Set(["directed","undirected","mixed"]),Yc=new Set(["domain","_events","_eventsCount","_maxListeners"]),eu={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Xc(_e,Re,ve){var z=new _e.NodeDataClass(Re,ve);return _e._nodes.set(Re,z),_e.emit("nodeAdded",{key:Re,attributes:ve}),z}function Yl(_e,Re,ve,z,te,be,Be,Xe){if(!z&&"undirected"===_e.type)throw new ge("Graph.".concat(Re,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(z&&"directed"===_e.type)throw new ge("Graph.".concat(Re,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Xe&&!P(Xe))throw new Pe("Graph.".concat(Re,': invalid attributes. Expecting an object but got "').concat(Xe,'"'));if(be=""+be,Be=""+Be,Xe=Xe||{},!_e.allowSelfLoops&&be===Be)throw new ge("Graph.".concat(Re,': source & target are the same ("').concat(be,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var st=_e._nodes.get(be),wt=_e._nodes.get(Be);if(!st)throw new Ge("Graph.".concat(Re,': source node "').concat(be,'" not found.'));if(!wt)throw new Ge("Graph.".concat(Re,': target node "').concat(Be,'" not found.'));var It={key:null,undirected:z,source:be,target:Be,attributes:Xe};if(ve&&(te=_e._edgeKeyGenerator(It)),_e._edges.has(te=""+te))throw new ge("Graph.".concat(Re,': the "').concat(te,'" edge already exists in the graph.'));if(!_e.multi&&(z?void 0!==st.undirected[Be]:void 0!==st.out[Be]))throw new ge("Graph.".concat(Re,': an edge linking "').concat(be,'" to "').concat(Be,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Vt=new Ye(z,te,ve,st,wt,Xe);return _e._edges.set(te,Vt),be===Be?z?(st.undirectedSelfLoops++,_e._undirectedSelfLoopCount++):(st.directedSelfLoops++,_e._directedSelfLoopCount++):z?(st.undirectedDegree++,wt.undirectedDegree++):(st.outDegree++,wt.inDegree++),ye(_e,z,Vt,be,Be,st,wt),z?_e._undirectedSize++:_e._directedSize++,It.key=te,_e.emit("edgeAdded",It),te}function Li(_e,Re,ve,z,te,be,Be,Xe,st){if(!z&&"undirected"===_e.type)throw new ge("Graph.".concat(Re,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(z&&"directed"===_e.type)throw new ge("Graph.".concat(Re,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Xe)if(st){if("function"!=typeof Xe)throw new Pe("Graph.".concat(Re,': invalid updater function. Expecting a function but got "').concat(Xe,'"'))}else if(!P(Xe))throw new Pe("Graph.".concat(Re,': invalid attributes. Expecting an object but got "').concat(Xe,'"'));var wt;if(be=""+be,Be=""+Be,st&&(wt=Xe,Xe=void 0),!_e.allowSelfLoops&&be===Be)throw new ge("Graph.".concat(Re,': source & target are the same ("').concat(be,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var It,Vt,en=_e._nodes.get(be),yn=_e._nodes.get(Be);if(!ve&&(It=_e._edges.get(te))){if(It.source.key!==be||It.target.key!==Be||z&&(It.source.key!==Be||It.target.key!==be))throw new ge("Graph.".concat(Re,': inconsistency detected when attempting to merge the "').concat(te,'" edge with "').concat(be,'" source & "').concat(Be,'" target vs. ("').concat(It.source.key,'", "').concat(It.target.key,'").'));Vt=It}if(Vt||_e.multi||!en||(Vt=z?en.undirected[Be]:en.out[Be]),Vt)return(st?wt:Xe)?(st?(Vt.attributes=wt(Vt.attributes),_e.emit("edgeAttributesUpdated",{type:"replace",key:Vt.key,attributes:Vt.attributes})):(v(Vt.attributes,Xe),_e.emit("edgeAttributesUpdated",{type:"merge",key:Vt.key,attributes:Vt.attributes,data:Xe})),Vt.key):Vt.key;Xe=Xe||{},st&&wt&&(Xe=wt(Xe));var Dr={key:null,undirected:z,source:be,target:Be,attributes:Xe};if(ve&&(te=_e._edgeKeyGenerator(Dr)),_e._edges.has(te=""+te))throw new ge("Graph.".concat(Re,': the "').concat(te,'" edge already exists in the graph.'));return en||(en=Xc(_e,be,{}),be===Be&&(yn=en)),yn||(yn=Xc(_e,Be,{})),It=new Ye(z,te,ve,en,yn,Xe),_e._edges.set(te,It),be===Be?z?(en.undirectedSelfLoops++,_e._undirectedSelfLoopCount++):(en.directedSelfLoops++,_e._directedSelfLoopCount++):z?(en.undirectedDegree++,yn.undirectedDegree++):(en.outDegree++,yn.inDegree++),ye(_e,z,It,be,Be,en,yn),z?_e._undirectedSize++:_e._directedSize++,Dr.key=te,_e.emit("edgeAdded",Dr),te}var _e,Si=function(_e){function Re(z){var te;if(te=_e.call(this)||this,(z=v({},eu,z)).edgeKeyGenerator&&"function"!=typeof z.edgeKeyGenerator)throw new Pe("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(z.edgeKeyGenerator,'".'));if("boolean"!=typeof z.multi)throw new Pe("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(z.multi,'".'));if(!mh.has(z.type))throw new Pe('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(z.type,'".'));if("boolean"!=typeof z.allowSelfLoops)throw new Pe("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(z.allowSelfLoops,'".'));var be,Be="mixed"===z.type?Ae:"directed"===z.type?qe:ct;return se(_(te),"NodeDataClass",Be),se(_(te),"_attributes",{}),se(_(te),"_nodes",new Map),se(_(te),"_edges",new Map),se(_(te),"_directedSize",0),se(_(te),"_undirectedSize",0),se(_(te),"_directedSelfLoopCount",0),se(_(te),"_undirectedSelfLoopCount",0),se(_(te),"_edgeKeyGenerator",z.edgeKeyGenerator||(be=0,function(){return be++})),se(_(te),"_options",z),Yc.forEach(function(Xe){return se(_(te),Xe,te[Xe])}),T(_(te),"order",function(){return te._nodes.size}),T(_(te),"size",function(){return te._edges.size}),T(_(te),"directedSize",function(){return te._directedSize}),T(_(te),"undirectedSize",function(){return te._undirectedSize}),T(_(te),"selfLoopCount",function(){return te._directedSelfLoopCount+te._undirectedSelfLoopCount}),T(_(te),"directedSelfLoopCount",function(){return te._directedSelfLoopCount}),T(_(te),"undirectedSelfLoopCount",function(){return te._undirectedSelfLoopCount}),T(_(te),"multi",te._options.multi),T(_(te),"type",te._options.type),T(_(te),"allowSelfLoops",te._options.allowSelfLoops),T(_(te),"implementation",function(){return"graphology"}),te}g(Re,_e);var ve=Re.prototype;return ve.hasNode=function(z){return this._nodes.has(""+z)},ve.hasDirectedEdge=function(z,te){if("undirected"===this.type)return!1;if(1===arguments.length){var Be=this._edges.get(""+z);return!!Be&&!Be.undirected}if(2===arguments.length){te=""+te;var Xe=this._nodes.get(z=""+z);if(!Xe)return!1;var st=Xe.out[te];return!(!st||this.multi&&!st.size)}throw new Pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.hasUndirectedEdge=function(z,te){if("directed"===this.type)return!1;if(1===arguments.length){var Be=this._edges.get(""+z);return!!Be&&Be.undirected}if(2===arguments.length){te=""+te;var Xe=this._nodes.get(z=""+z);if(!Xe)return!1;var st=Xe.undirected[te];return!(!st||this.multi&&!st.size)}throw new Pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.hasEdge=function(z,te){if(1===arguments.length)return this._edges.has(""+z);if(2===arguments.length){te=""+te;var Be=this._nodes.get(z=""+z);if(!Be)return!1;var Xe=void 0!==Be.out&&Be.out[te];return Xe||(Xe=void 0!==Be.undirected&&Be.undirected[te]),!(!Xe||this.multi&&!Xe.size)}throw new Pe("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ve.directedEdge=function(z,te){if("undirected"!==this.type){if(z=""+z,te=""+te,this.multi)throw new ge("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var be=this._nodes.get(z);if(!be)throw new Ge('Graph.directedEdge: could not find the "'.concat(z,'" source node in the graph.'));if(!this._nodes.has(te))throw new Ge('Graph.directedEdge: could not find the "'.concat(te,'" target node in the graph.'));var Be=be.out&&be.out[te]||void 0;return Be?Be.key:void 0}},ve.undirectedEdge=function(z,te){if("directed"!==this.type){if(z=""+z,te=""+te,this.multi)throw new ge("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var be=this._nodes.get(z);if(!be)throw new Ge('Graph.undirectedEdge: could not find the "'.concat(z,'" source node in the graph.'));if(!this._nodes.has(te))throw new Ge('Graph.undirectedEdge: could not find the "'.concat(te,'" target node in the graph.'));var Be=be.undirected&&be.undirected[te]||void 0;return Be?Be.key:void 0}},ve.edge=function(z,te){if(this.multi)throw new ge("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");te=""+te;var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.edge: could not find the "'.concat(z,'" source node in the graph.'));if(!this._nodes.has(te))throw new Ge('Graph.edge: could not find the "'.concat(te,'" target node in the graph.'));var Be=be.out&&be.out[te]||be.undirected&&be.undirected[te]||void 0;if(Be)return Be.key},ve.inDegree=function(z){var te=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof te)throw new Pe('Graph.inDegree: Expecting a boolean but got "'.concat(te,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.inDegree: could not find the "'.concat(z,'" node in the graph.'));return"undirected"===this.type?0:be.inDegree+(te?be.directedSelfLoops:0)},ve.outDegree=function(z){var te=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof te)throw new Pe('Graph.outDegree: Expecting a boolean but got "'.concat(te,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.outDegree: could not find the "'.concat(z,'" node in the graph.'));return"undirected"===this.type?0:be.outDegree+(te?be.directedSelfLoops:0)},ve.directedDegree=function(z){var te=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof te)throw new Pe('Graph.directedDegree: Expecting a boolean but got "'.concat(te,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.directedDegree: could not find the "'.concat(z,'" node in the graph.'));if("undirected"===this.type)return 0;var Be=te?be.directedSelfLoops:0;return be.inDegree+Be+(be.outDegree+Be)},ve.undirectedDegree=function(z){var te=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof te)throw new Pe('Graph.undirectedDegree: Expecting a boolean but got "'.concat(te,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.undirectedDegree: could not find the "'.concat(z,'" node in the graph.'));return"directed"===this.type?0:be.undirectedDegree+2*(te?be.undirectedSelfLoops:0)},ve.degree=function(z){var te=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof te)throw new Pe('Graph.degree: Expecting a boolean but got "'.concat(te,'" for the second parameter (allowing self-loops to be counted).'));var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.degree: could not find the "'.concat(z,'" node in the graph.'));var Be=0,Xe=0;return"directed"!==this.type&&(te&&(Xe=be.undirectedSelfLoops),Be+=be.undirectedDegree+2*Xe),"undirected"!==this.type&&(te&&(Xe=be.directedSelfLoops),Be+=be.inDegree+be.outDegree+2*Xe),Be},ve.source=function(z){var te=this._edges.get(z=""+z);if(!te)throw new Ge('Graph.source: could not find the "'.concat(z,'" edge in the graph.'));return te.source.key},ve.target=function(z){var te=this._edges.get(z=""+z);if(!te)throw new Ge('Graph.target: could not find the "'.concat(z,'" edge in the graph.'));return te.target.key},ve.extremities=function(z){var te=this._edges.get(z=""+z);if(!te)throw new Ge('Graph.extremities: could not find the "'.concat(z,'" edge in the graph.'));return[te.source.key,te.target.key]},ve.opposite=function(z,te){z=""+z;var be=this._edges.get(te=""+te);if(!be)throw new Ge('Graph.opposite: could not find the "'.concat(te,'" edge in the graph.'));var Be=be.source.key,Xe=be.target.key;if(z!==Be&&z!==Xe)throw new Ge('Graph.opposite: the "'.concat(z,'" node is not attached to the "').concat(te,'" edge (').concat(Be,", ").concat(Xe,")."));return z===Be?Xe:Be},ve.hasExtremity=function(z,te){te=""+te;var be=this._edges.get(z=""+z);if(!be)throw new Ge('Graph.hasExtremity: could not find the "'.concat(z,'" edge in the graph.'));return be.source.key===te||be.target.key===te},ve.isUndirected=function(z){var te=this._edges.get(z=""+z);if(!te)throw new Ge('Graph.isUndirected: could not find the "'.concat(z,'" edge in the graph.'));return te.undirected},ve.isDirected=function(z){var te=this._edges.get(z=""+z);if(!te)throw new Ge('Graph.isDirected: could not find the "'.concat(z,'" edge in the graph.'));return!te.undirected},ve.isSelfLoop=function(z){var te=this._edges.get(z=""+z);if(!te)throw new Ge('Graph.isSelfLoop: could not find the "'.concat(z,'" edge in the graph.'));return te.source===te.target},ve.hasGeneratedKey=function(z){var te=this._edges.get(z=""+z);if(!te)throw new Ge('Graph.hasGeneratedKey: could not find the "'.concat(z,'" edge in the graph.'));return te.generatedKey},ve.addNode=function(z,te){return function(be,Be,Xe){if(Xe&&!P(Xe))throw new Pe('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Xe,'"'));if(Xe=Xe||{},be._nodes.has(Be=""+Be))throw new ge('Graph.addNode: the "'.concat(Be,'" node already exist in the graph.'));var st=new be.NodeDataClass(Be,Xe);return be._nodes.set(Be,st),be.emit("nodeAdded",{key:Be,attributes:Xe}),st}(this,z,te).key},ve.mergeNode=function(z,te){if(te&&!P(te))throw new Pe('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(te,'"'));te=te||{};var be=this._nodes.get(z=""+z);return be?(te&&(v(be.attributes,te),this.emit("nodeAttributesUpdated",{type:"merge",key:z,attributes:be.attributes,data:te})),z):(be=new this.NodeDataClass(z,te),this._nodes.set(z,be),this.emit("nodeAdded",{key:z,attributes:te}),z)},ve.updateNode=function(z,te){if(te&&"function"!=typeof te)throw new Pe('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(te,'"'));var be=this._nodes.get(z=""+z);if(be)return te&&(be.attributes=te(be.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:z,attributes:be.attributes})),z;var Xe=te?te({}):{};return be=new this.NodeDataClass(z,Xe),this._nodes.set(z,be),this.emit("nodeAdded",{key:z,attributes:Xe}),z},ve.dropNode=function(z){var te=this,be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.dropNode: could not find the "'.concat(z,'" node in the graph.'));this.forEachEdge(z,function(Be){te.dropEdge(Be)}),this._nodes.delete(z),this.emit("nodeDropped",{key:z,attributes:be.attributes})},ve.dropEdge=function(z){var te;if(arguments.length>1){var be=""+arguments[0],Be=""+arguments[1];if(!(te=D(this,be,Be,this.type)))throw new Ge('Graph.dropEdge: could not find the "'.concat(be,'" -> "').concat(Be,'" edge in the graph.'))}else if(!(te=this._edges.get(z=""+z)))throw new Ge('Graph.dropEdge: could not find the "'.concat(z,'" edge in the graph.'));this._edges.delete(te.key);var st=te.source,wt=te.target,It=te.attributes,Vt=te.undirected;return st===wt?Vt?(st.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(st.directedSelfLoops--,this._directedSelfLoopCount--):Vt?(st.undirectedDegree--,wt.undirectedDegree--):(st.outDegree--,wt.inDegree--),function G(_e,Re,ve){var z=_e.multi,te=ve.source,be=ve.target,Be=te.key,Xe=be.key,st=te[Re?"undirected":"out"],wt=Re?"undirected":"in";if(Xe in st)if(z){var It=st[Xe];1===It.size?(delete st[Xe],delete be[wt][Be]):It.delete(ve)}else delete st[Xe];z||delete be[wt][Be]}(this,Vt,te),Vt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:z,attributes:It,source:st.key,target:wt.key,undirected:Vt}),this},ve.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ve.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ve.getAttribute=function(z){return this._attributes[z]},ve.getAttributes=function(){return this._attributes},ve.hasAttribute=function(z){return this._attributes.hasOwnProperty(z)},ve.setAttribute=function(z,te){return this._attributes[z]=te,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:z}),this},ve.updateAttribute=function(z,te){if("function"!=typeof te)throw new Pe("Graph.updateAttribute: updater should be a function.");return this._attributes[z]=te(this._attributes[z]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:z}),this},ve.removeAttribute=function(z){return delete this._attributes[z],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:z}),this},ve.replaceAttributes=function(z){if(!P(z))throw new Pe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=z,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ve.mergeAttributes=function(z){if(!P(z))throw new Pe("Graph.mergeAttributes: provided attributes are not a plain object.");return v(this._attributes,z),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:z}),this},ve.getNodeAttribute=function(z,te){var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.getNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));return be.attributes[te]},ve.getNodeAttributes=function(z){var te=this._nodes.get(z=""+z);if(!te)throw new Ge('Graph.getNodeAttributes: could not find the "'.concat(z,'" node in the graph.'));return te.attributes},ve.hasNodeAttribute=function(z,te){var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.hasNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));return be.attributes.hasOwnProperty(te)},ve.setNodeAttribute=function(z,te,be){var Be=this._nodes.get(z=""+z);if(!Be)throw new Ge('Graph.setNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));if(arguments.length<3)throw new Pe("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Be.attributes[te]=be,this.emit("nodeAttributesUpdated",{key:z,type:"set",attributes:Be.attributes,name:te}),this},ve.updateNodeAttribute=function(z,te,be){var Be=this._nodes.get(z=""+z);if(!Be)throw new Ge('Graph.updateNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));if(arguments.length<3)throw new Pe("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof be)throw new Pe("Graph.updateAttribute: updater should be a function.");var Xe=Be.attributes,st=be(Xe[te]);return Xe[te]=st,this.emit("nodeAttributesUpdated",{key:z,type:"set",attributes:Be.attributes,name:te}),this},ve.removeNodeAttribute=function(z,te){var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.hasNodeAttribute: could not find the "'.concat(z,'" node in the graph.'));return delete be.attributes[te],this.emit("nodeAttributesUpdated",{key:z,type:"remove",attributes:be.attributes,name:te}),this},ve.replaceNodeAttributes=function(z,te){var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.replaceNodeAttributes: could not find the "'.concat(z,'" node in the graph.'));if(!P(te))throw new Pe("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return be.attributes=te,this.emit("nodeAttributesUpdated",{key:z,type:"replace",attributes:be.attributes}),this},ve.mergeNodeAttributes=function(z,te){var be=this._nodes.get(z=""+z);if(!be)throw new Ge('Graph.mergeNodeAttributes: could not find the "'.concat(z,'" node in the graph.'));if(!P(te))throw new Pe("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return v(be.attributes,te),this.emit("nodeAttributesUpdated",{key:z,type:"merge",attributes:be.attributes,data:te}),this},ve.updateEachNodeAttributes=function(z,te){if("function"!=typeof z)throw new Pe("Graph.updateEachNodeAttributes: expecting an updater function.");if(te&&!X(te))throw new Pe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var be,Be,Xe=this._nodes.values();!0!==(be=Xe.next()).done;)(Be=be.value).attributes=z(Be.key,Be.attributes);this.emit("eachNodeAttributesUpdated",{hints:te||null})},ve.updateEachEdgeAttributes=function(z,te){if("function"!=typeof z)throw new Pe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(te&&!X(te))throw new Pe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var be,Be,Xe=this._edges.values();!0!==(be=Xe.next()).done;)(Be=be.value).attributes=z(Be.key,Be.attributes);this.emit("eachEdgeAttributesUpdated",{hints:te||null})},ve.forEach=function(z){if("function"!=typeof z)throw new Pe("Graph.forEach: expecting a callback.");this.multi?da(!1,this,z):Gl(!1,this,z)},ve.forEachUntil=function(z){if("function"!=typeof z)throw new Pe("Graph.forEach: expecting a callback.");this.multi?da(!0,this,z):Gl(!0,this,z)},ve.adjacency=function(){return this.multi?(st=(z=this)._nodes.values(),wt=z.type,It="outer",Vt=null,new Ke(function en(){var yn;if("outer"===It)return!0===(yn=st.next()).done?yn:(te=yn.value,It="directed",en());if("directed"===It)return"undirected"===wt?(It="undirected",en()):(Be=te.out,be=Object.keys(te.out),Xe=0,It="inner-directed",en());if("undirected"===It){if("directed"===wt)return It="outer",en();Be=te.undirected,be=Object.keys(te.undirected),Xe=0,It="inner-undirected"}if(!Vt&&Xe>=be.length)return It="inner-undirected"===It?"outer":"undirected",en();if(!Vt){var bo=be[Xe++];return Vt=Be[bo].values(),en()}if((yn=Vt.next()).done)return Vt=null,en();var Dr=yn.value,No=Dr.target;return"inner-undirected"===It&&No.key===te.key&&(No=Dr.source),{done:!1,value:[te.key,No.key,te.attributes,No.attributes,Dr.key,Dr.attributes]}})):(Kc=(en=this)._nodes.values(),$s=en.type,Lr="outer",new Ke(function Fo(){var Bi;if("outer"===Lr)return!0===(Bi=Kc.next()).done?Bi:(yn=Bi.value,Lr="directed",Fo());if("directed"===Lr)return"undirected"===$s?(Lr="undirected",Fo()):(Dr=yn.out,bo=Object.keys(yn.out),No=0,Lr="inner-directed",Fo());if("undirected"===Lr){if("directed"===$s)return Lr="outer",Fo();Dr=yn.undirected,bo=Object.keys(yn.undirected),No=0,Lr="inner-undirected"}if(No>=bo.length)return Lr="inner-undirected"===Lr?"outer":"undirected",Fo();var Rr=bo[No++],hi=Dr[Rr],Wt=hi.target;return"inner-undirected"===Lr&&Wt.key===yn.key&&(Wt=hi.source),{done:!1,value:[yn.key,Wt.key,yn.attributes,Wt.attributes,hi.key,hi.attributes]}}));var en,yn,bo,Dr,No,Kc,$s,Lr,z,te,be,Be,Xe,st,wt,It,Vt},ve.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Ee(this._nodes.keys(),this._nodes.size)},ve.forEachNode=function(z){if("function"!=typeof z)throw new Pe("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(te,be){z(be,te.attributes)})},ve.forEachNodeUntil=function(z){if("function"!=typeof z)throw new Pe("Graph.forEachNode: expecting a callback.");for(var te,be,Be=this._nodes.values();!0!==(te=Be.next())&&!z((be=te.value).key,be.attributes););},ve.nodeEntries=function(){var z=this._nodes.values();return new Ke(function(){var te=z.next();if(te.done)return te;var be=te.value;return{value:[be.key,be.attributes],done:!1}})},ve.exportNode=function(z){var te=this._nodes.get(z=""+z);if(!te)throw new Ge('Graph.exportNode: could not find the "'.concat(z,'" node in the graph.'));return ic(z,te)},ve.exportEdge=function(z){var te=this._edges.get(z=""+z);if(!te)throw new Ge('Graph.exportEdge: could not find the "'.concat(z,'" edge in the graph.'));return Wl(z,te)},ve.export=function(){var z=new Array(this._nodes.size),te=0;this._nodes.forEach(function(Be,Xe){z[te++]=ic(Xe,Be)});var be=new Array(this._edges.size);return te=0,this._edges.forEach(function(Be,Xe){be[te++]=Wl(Xe,Be)}),{attributes:this.getAttributes(),nodes:z,edges:be,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ve.importNode=function(z){var te=arguments.length>1&&void 0!==arguments[1]&&arguments[1],be=function $l(_e){return P(_e)?"key"in _e?!("attributes"in _e)||P(_e.attributes)&&null!==_e.attributes?null:"invalid-attributes":"no-key":"not-object"}(z);if(be){if("not-object"===be)throw new Pe('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===be)throw new Pe("Graph.importNode: no key provided.");if("invalid-attributes"===be)throw new Pe("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Be=z.key,Xe=z.attributes,st=void 0===Xe?{}:Xe;return te?this.mergeNode(Be,st):this.addNode(Be,st),this},ve.importEdge=function(z){var te=arguments.length>1&&void 0!==arguments[1]&&arguments[1],be=function $c(_e){return P(_e)?"source"in _e?"target"in _e?!("attributes"in _e)||P(_e.attributes)&&null!==_e.attributes?"undirected"in _e&&"boolean"!=typeof _e.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}(z);if(be){if("not-object"===be)throw new Pe('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===be)throw new Pe("Graph.importEdge: missing souce.");if("no-target"===be)throw new Pe("Graph.importEdge: missing target.");if("invalid-attributes"===be)throw new Pe("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===be)throw new Pe("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Be=z.source,Xe=z.target,st=z.attributes,wt=void 0===st?{}:st,It=z.undirected,Vt=void 0!==It&&It;return"key"in z?(te?Vt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Vt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,z.key,Be,Xe,wt):(te?Vt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Vt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Be,Xe,wt),this},ve.import=function(z){var te,be,Be,Xe=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function L(_e){return null!==_e&&"object"===Z(_e)&&"function"==typeof _e.addUndirectedEdgeWithKey&&"function"==typeof _e.dropNode}(z))return this.import(z.export(),Xe),this;if(!P(z))throw new Pe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(z.attributes){if(!P(z.attributes))throw new Pe("Graph.import: invalid attributes. Expecting a plain object.");Xe?this.mergeAttributes(z.attributes):this.replaceAttributes(z.attributes)}if(z.nodes){if(Be=z.nodes,!Array.isArray(Be))throw new Pe("Graph.import: invalid nodes. Expecting an array.");for(te=0,be=Be.length;te<be;te++)this.importNode(Be[te],Xe)}if(z.edges){if(Be=z.edges,!Array.isArray(Be))throw new Pe("Graph.import: invalid edges. Expecting an array.");for(te=0,be=Be.length;te<be;te++)this.importEdge(Be[te],Xe)}return this},ve.nullCopy=function(z){return new Re(v({},this._options,z))},ve.emptyCopy=function(z){var te=this.nullCopy(z);return this._nodes.forEach(function(be,Be){var Xe=v({},be.attributes);be=new te.NodeDataClass(Be,Xe),te._nodes.set(Be,be)}),te},ve.copy=function(){var z=new Re(this._options);return z.import(this),z},ve.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(z){return z.upgradeToMixed()}),this._options.type="mixed",T(this,"type",this._options.type),se(this,"NodeDataClass",Ae)),this},ve.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,T(this,"multi",!0),(z=this)._nodes.forEach(function(te,be){if(te.out)for(var Be in te.out){var Xe=new Set;Xe.add(te.out[Be]),te.out[Be]=Xe,z._nodes.get(Be).in[be]=Xe}if(te.undirected)for(var st in te.undirected)if(!(st>be)){var wt=new Set;wt.add(te.undirected[st]),te.undirected[st]=wt,z._nodes.get(st).undirected[be]=wt}})),this;var z},ve.clearIndex=function(){return this._nodes.forEach(function(z){void 0!==z.in&&(z.in={},z.out={}),void 0!==z.undirected&&(z.undirected={})}),this},ve.toJSON=function(){return this.export()},ve.toString=function(){return"[object Graph]"},ve.inspect=function(){var z=this,te={};this._nodes.forEach(function(wt,It){te[It]=wt.attributes});var be={},Be={};this._edges.forEach(function(wt,It){var Vt=wt.undirected?"--":"->",en="",yn="(".concat(wt.source.key,")").concat(Vt,"(").concat(wt.target.key,")");wt.generatedKey?z.multi&&(void 0===Be[yn]?Be[yn]=0:Be[yn]++,en+="".concat(Be[yn],". ")):en+="[".concat(It,"]: "),be[en+=yn]=wt.attributes});var Xe={};for(var st in this)this.hasOwnProperty(st)&&!Yc.has(st)&&"function"!=typeof this[st]&&(Xe[st]=this[st]);return Xe.attributes=this._attributes,Xe.nodes=te,Xe.edges=be,se(Xe,"constructor",this.constructor),Xe},Re}(K.exports.EventEmitter);typeof Symbol<"u"&&(Si.prototype[Symbol.for("nodejs.util.inspect.custom")]=Si.prototype.inspect),[{name:function(_e){return"".concat(_e,"Edge")},generateKey:!0},{name:function(_e){return"".concat(_e,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(_e){return"".concat(_e,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(_e){return"".concat(_e,"EdgeWithKey")}},{name:function(_e){return"".concat(_e,"DirectedEdgeWithKey")},type:"directed"},{name:function(_e){return"".concat(_e,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(_e){["add","merge","update"].forEach(function(Re){var ve=_e.name(Re),z="add"===Re?Yl:Li;Si.prototype[ve]=_e.generateKey?function(te,be,Be){return z(this,ve,!0,"undirected"===(_e.type||this.type),null,te,be,Be,"update"===Re)}:function(te,be,Be,Xe){return z(this,ve,!1,"undirected"===(_e.type||this.type),te,be,Be,Xe,"update"===Re)}})}),typeof Symbol<"u"&&(Si.prototype[Symbol.iterator]=Si.prototype.adjacency),_e=Si,R.forEach(function(Re){var ve=Re.name,z=Re.attacher;z(_e,ve("Edge"),"mixed"),z(_e,ve("DirectedEdge"),"directed"),z(_e,ve("UndirectedEdge"),"undirected")}),function(_e){Le.forEach(function(Re){var z,te,be,Be;be=(z=Re).type,Be=z.direction,_e.prototype[te=z.name]=function(Xe,st){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return[];if(!arguments.length)return function rn(_e,Re){if(0===_e.size)return[];if("mixed"===Re||Re===_e.type)return"function"==typeof Array.from?Array.from(_e._edges.keys()):Ee(_e._edges.keys(),_e._edges.size);for(var ve,z,be=new Array("undirected"===Re?_e.undirectedSize:_e.directedSize),Be="undirected"===Re,Xe=_e._edges.values(),st=0;!0!==(ve=Xe.next()).done;)(z=ve.value).undirected===Be&&(be[st++]=z.key);return be}(this,be);if(1===arguments.length){var wt=this._nodes.get(Xe=""+Xe);if(void 0===wt)throw new Ge("Graph.".concat(te,': could not find the "').concat(Xe,'" node in the graph.'));return function ce(_e,Re,ve,z){var te=[],be=_e?fe:tt;return"undirected"!==Re&&("out"!==ve&&be(te,z.in),"in"!==ve&&be(te,z.out),!ve&&z.directedSelfLoops>0&&te.splice(te.lastIndexOf(z.key),1)),"directed"!==Re&&be(te,z.undirected),te}(this.multi,"mixed"===be?this.type:be,Be,wt)}if(2===arguments.length){st=""+st;var It=this._nodes.get(Xe=""+Xe);if(!It)throw new Ge("Graph.".concat(te,':  could not find the "').concat(Xe,'" source node in the graph.'));if(!this._nodes.has(st))throw new Ge("Graph.".concat(te,':  could not find the "').concat(st,'" target node in the graph.'));return function $t(_e,Re,ve,z,te){var be=Re?We:me,Be=[];return"undirected"!==_e&&(void 0!==z.in&&"out"!==ve&&be(Be,z.in,te),void 0!==z.out&&"in"!==ve&&be(Be,z.out,te),!ve&&z.directedSelfLoops>0&&Be.splice(Be.lastIndexOf(z.key),1)),"directed"!==_e&&void 0!==z.undirected&&be(Be,z.undirected,te),Be}(be,this.multi,Be,It,st)}throw new Pe("Graph.".concat(te,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ve,z){var te=z.name,be=z.type,Be=z.direction,Xe="forEach"+te[0].toUpperCase()+te.slice(1,-1);ve.prototype[Xe]=function(st,wt,It){if("mixed"===be||"mixed"===this.type||be===this.type){if(1===arguments.length)return function Ie(_e,Re,ve){if(0!==_e.size)for(var z,te,be="mixed"!==Re&&Re!==_e.type,Be="undirected"===Re,Xe=_e._edges.values();!0!==(z=Xe.next()).done;)if(te=z.value,!be||te.undirected===Be){var Vt=te.source,en=te.target;ve(te.key,te.attributes,Vt.key,en.key,Vt.attributes,en.attributes,te.undirected,te.generatedKey)}}(this,be,It=st);if(2===arguments.length){It=wt;var Vt=this._nodes.get(st=""+st);if(void 0===Vt)throw new Ge("Graph.".concat(Xe,': could not find the "').concat(st,'" node in the graph.'));return function $e(_e,Re,ve,z,te){var be=_e?q:ee;"undirected"!==Re&&("out"!==ve&&be(z.in,te),"in"!==ve&&be(z.out,te,ve?null:z.key)),"directed"!==Re&&be(z.undirected,te)}(this.multi,"mixed"===be?this.type:be,Be,Vt,It)}if(3===arguments.length){wt=""+wt;var en=this._nodes.get(st=""+st);if(!en)throw new Ge("Graph.".concat(Xe,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(wt))throw new Ge("Graph.".concat(Xe,':  could not find the "').concat(wt,'" target node in the graph.'));return function sn(_e,Re,ve,z,te,be){var Be=Re?gt:He;"undirected"!==_e&&(void 0!==z.in&&"out"!==ve&&Be(z.in,te,be),z.key!==te&&void 0!==z.out&&"in"!==ve&&Be(z.out,te,be)),"directed"!==_e&&void 0!==z.undirected&&Be(z.undirected,te,be)}(be,this.multi,Be,en,wt,It)}throw new Pe("Graph.".concat(Xe,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(_e,Re),function(ve,z){var te=z.name,be=z.type,Be=z.direction,Xe="forEach"+te[0].toUpperCase()+te.slice(1,-1)+"Until";ve.prototype[Xe]=function(st,wt,It){if("mixed"===be||"mixed"===this.type||be===this.type){if(1===arguments.length)return function Q(_e,Re,ve){if(0!==_e.size)for(var z,te,be="mixed"!==Re&&Re!==_e.type,Be="undirected"===Re,Xe=_e._edges.values();!0!==(z=Xe.next()).done;)if(te=z.value,!be||te.undirected===Be){var Vt=te.source,en=te.target;if(ve(te.key,te.attributes,Vt.key,en.key,Vt.attributes,en.attributes,te.undirected,te.generatedKey))break}}(this,be,It=st);if(2===arguments.length){It=wt;var Vt=this._nodes.get(st=""+st);if(void 0===Vt)throw new Ge("Graph.".concat(Xe,': could not find the "').concat(st,'" node in the graph.'));return function Qe(_e,Re,ve,z,te){var be=_e?F:A;"undirected"!==Re&&("out"!==ve&&be(z.in,te)||"in"!==ve&&be(z.out,te,ve?null:z.key))||"directed"===Re||be(z.undirected,te)}(this.multi,"mixed"===be?this.type:be,Be,Vt,It)}if(3===arguments.length){wt=""+wt;var en=this._nodes.get(st=""+st);if(!en)throw new Ge("Graph.".concat(Xe,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(wt))throw new Ge("Graph.".concat(Xe,':  could not find the "').concat(wt,'" target node in the graph.'));return function $n(_e,Re,ve,z,te,be){var Be=Re?yt:Ft;"undirected"!==_e&&(void 0!==z.in&&"out"!==ve&&Be(z.in,te,be)||z.key!==te&&void 0!==z.out&&"in"!==ve&&Be(z.out,te,be,ve?null:z.key))||"directed"===_e||void 0===z.undirected||Be(z.undirected,te,be)}(be,this.multi,Be,en,wt,It)}throw new Pe("Graph.".concat(Xe,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(_e,Re),function(ve,z){var be=z.type,Be=z.direction,Xe=z.name.slice(0,-1)+"Entries";ve.prototype[Xe]=function(st,wt){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return Ke.empty();if(!arguments.length)return function I(_e,Re){if(0===_e.size)return Ke.empty();var ve="mixed"!==Re&&Re!==_e.type,z="undirected"===Re,te=_e._edges.values();return new Ke(function(){for(var be,Be;;){if((be=te.next()).done)return be;if(Be=be.value,!ve||Be.undirected===z)break}return{value:[Be.key,Be.attributes,Be.source.key,Be.target.key,Be.source.attributes,Be.target.attributes],done:!1}})}(this,be);if(1===arguments.length){var It=this._nodes.get(st=""+st);if(!It)throw new Ge("Graph.".concat(Xe,': could not find the "').concat(st,'" node in the graph.'));return function at(_e,Re,ve){var z=Ke.empty();return"undirected"!==_e&&("out"!==Re&&void 0!==ve.in&&(z=U(z,ue(ve.in))),"in"!==Re&&void 0!==ve.out&&(z=U(z,ue(ve.out,Re?null:ve.key)))),"directed"!==_e&&void 0!==ve.undirected&&(z=U(z,ue(ve.undirected))),z}(be,Be,It)}if(2===arguments.length){wt=""+wt;var Vt=this._nodes.get(st=""+st);if(!Vt)throw new Ge("Graph.".concat(Xe,':  could not find the "').concat(st,'" source node in the graph.'));if(!this._nodes.has(wt))throw new Ge("Graph.".concat(Xe,':  could not find the "').concat(wt,'" target node in the graph.'));return function Cn(_e,Re,ve,z){var te=Ke.empty();return"undirected"!==_e&&(void 0!==ve.in&&"out"!==Re&&z in ve.in&&(te=U(te,Gt(ve.in,z))),void 0!==ve.out&&"in"!==Re&&z in ve.out&&(te=U(te,Gt(ve.out,z)))),"directed"!==_e&&void 0!==ve.undirected&&z in ve.undirected&&(te=U(te,Gt(ve.undirected,z))),te}(be,Be,Vt,wt)}throw new Pe("Graph.".concat(Xe,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(_e,Re)})}(Si),function(_e){Mn.forEach(function(Re){var z,te,be,Be;be=(z=Re).type,Be=z.direction,_e.prototype[te=z.name]=function(Xe){if("mixed"!==be&&"mixed"!==this.type&&be!==this.type)return[];if(2===arguments.length){var st=""+arguments[0],wt=""+arguments[1];if(!this._nodes.has(st))throw new Ge("Graph.".concat(te,': could not find the "').concat(st,'" node in the graph.'));if(!this._nodes.has(wt))throw new Ge("Graph.".concat(te,': could not find the "').concat(wt,'" node in the graph.'));return function _o(_e,Re,ve,z,te){var be=_e._nodes.get(z);if("undirected"!==Re){if("out"!==ve&&void 0!==be.in)for(var Be in be.in)if(Be===te)return!0;if("in"!==ve&&void 0!==be.out)for(var Xe in be.out)if(Xe===te)return!0}if("directed"!==Re&&void 0!==be.undirected)for(var st in be.undirected)if(st===te)return!0;return!1}(this,be,Be,st,wt)}if(1===arguments.length){var It=this._nodes.get(Xe=""+Xe);if(void 0===It)throw new Ge("Graph.".concat(te,': could not find the "').concat(Xe,'" node in the graph.'));return function ys(_e,Re,ve){if("mixed"!==_e){if("undirected"===_e)return Object.keys(ve.undirected);if("string"==typeof Re)return Object.keys(ve[Re])}var z=new Set;return"undirected"!==_e&&("out"!==Re&&ko(z,ve.in),"in"!==Re&&ko(z,ve.out)),"directed"!==_e&&ko(z,ve.undirected),Ee(z.values(),z.size)}("mixed"===be?this.type:be,Be,It)}throw new Pe("Graph.".concat(te,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function Qd(_e,Re){var ve=Re.name,z=Re.type,te=Re.direction,be="forEach"+ve[0].toUpperCase()+ve.slice(1,-1);_e.prototype[be]=function(Be,Xe){if("mixed"===z||"mixed"===this.type||z===this.type){var st=this._nodes.get(Be=""+Be);if(void 0===st)throw new Ge("Graph.".concat(be,': could not find the "').concat(Be,'" node in the graph.'));!function(wt,It,Vt,en){if("mixed"!==wt){if("undirected"===wt)return es(Vt,Vt.undirected,en);if("string"==typeof It)return es(Vt,Vt[It],en)}var yn=new Set;"undirected"!==wt&&("out"!==It&&qi(yn,Vt,Vt.in,en),"in"!==It&&qi(yn,Vt,Vt.out,en)),"directed"!==wt&&qi(yn,Vt,Vt.undirected,en)}("mixed"===z?this.type:z,te,st,Xe)}}}(_e,Re),function fh(_e,Re){var ve=Re.name,z=Re.type,te=Re.direction,be="forEach"+ve[0].toUpperCase()+ve.slice(1,-1)+"Until";_e.prototype[be]=function(Be,Xe){if("mixed"===z||"mixed"===this.type||z===this.type){var st=this._nodes.get(Be=""+Be);if(void 0===st)throw new Ge("Graph.".concat(be,': could not find the "').concat(Be,'" node in the graph.'));!function(wt,It,Vt,en){if("mixed"!==wt){if("undirected"===wt)return Yr(Vt,Vt.undirected,en);if("string"==typeof It)return Yr(Vt,Vt[It],en)}var yn=new Set;"undirected"!==wt&&("out"!==It&&vs(yn,Vt,Vt.in,en)||"in"!==It&&vs(yn,Vt,Vt.out,en))||"directed"===wt||vs(yn,Vt,Vt.undirected,en)}("mixed"===z?this.type:z,te,st,Xe)}}}(_e,Re),function ph(_e,Re){var z=Re.type,te=Re.direction,be=Re.name.slice(0,-1)+"Entries";_e.prototype[be]=function(Be){if("mixed"!==z&&"mixed"!==this.type&&z!==this.type)return Ke.empty();var Xe=this._nodes.get(Be=""+Be);if(void 0===Xe)throw new Ge("Graph.".concat(be,': could not find the "').concat(Be,'" node in the graph.'));return function(st,wt,It){if("mixed"!==st){if("undirected"===st)return Gs(It,It.undirected);if("string"==typeof wt)return Gs(It,It[wt])}var Vt=Ke.empty(),en=new Set;return"undirected"!==st&&("out"!==wt&&(Vt=U(Vt,Oo(en,It,It.in))),"in"!==wt&&(Vt=U(Vt,Oo(en,It,It.out)))),"directed"!==st&&(Vt=U(Vt,Oo(en,It,It.undirected))),Vt}("mixed"===z?this.type:z,te,Xe)}}(_e,Re)})}(Si);var qc=function(_e){function Re(ve){var z=v({type:"directed"},ve);if("multi"in z&&!1!==z.multi)throw new Pe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==z.type)throw new Pe('DirectedGraph.from: inconsistent "'+z.type+'" type in given options!');return _e.call(this,z)||this}return g(Re,_e),Re}(Si),Ws=function(_e){function Re(ve){var z=v({type:"undirected"},ve);if("multi"in z&&!1!==z.multi)throw new Pe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==z.type)throw new Pe('UndirectedGraph.from: inconsistent "'+z.type+'" type in given options!');return _e.call(this,z)||this}return g(Re,_e),Re}(Si),Ta=function(_e){function Re(ve){var z=v({multi:!0},ve);if("multi"in z&&!0!==z.multi)throw new Pe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return _e.call(this,z)||this}return g(Re,_e),Re}(Si),ua=function(_e){function Re(ve){var z=v({type:"directed",multi:!0},ve);if("multi"in z&&!0!==z.multi)throw new Pe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==z.type)throw new Pe('MultiDirectedGraph.from: inconsistent "'+z.type+'" type in given options!');return _e.call(this,z)||this}return g(Re,_e),Re}(Si),rc=function(_e){function Re(ve){var z=v({type:"undirected",multi:!0},ve);if("multi"in z&&!0!==z.multi)throw new Pe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==z.type)throw new Pe('MultiUndirectedGraph.from: inconsistent "'+z.type+'" type in given options!');return _e.call(this,z)||this}return g(Re,_e),Re}(Si);function Po(_e){_e.from=function(Re,ve){var z=v({},Re.options,ve),te=new _e(z);return te.import(Re),te}}return Po(Si),Po(qc),Po(Ws),Po(Ta),Po(ua),Po(rc),Si.Graph=Si,Si.DirectedGraph=qc,Si.UndirectedGraph=Ws,Si.MultiGraph=Ta,Si.MultiDirectedGraph=ua,Si.MultiUndirectedGraph=rc,Si.InvalidArgumentsGraphError=Pe,Si.NotFoundGraphError=Ge,Si.UsageGraphError=ge,Si}()},7271:(ne,Z,g)=>{var S;!function(b,O,C,N){"use strict";var K,_=["","webkit","Moz","MS","ms","o"],v=O.createElement("div"),D="function",L=Math.round,P=Math.abs,j=Date.now;function se(ke,je,it){return setTimeout(V(ke,it),je)}function T(ke,je,it){return!!Array.isArray(ke)&&(X(ke,it[je],it),!0)}function X(ke,je,it){var ht;if(ke)if(ke.forEach)ke.forEach(je,it);else if(ke.length!==N)for(ht=0;ht<ke.length;)je.call(it,ke[ht],ht,ke),ht++;else for(ht in ke)ke.hasOwnProperty(ht)&&je.call(it,ke[ht],ht,ke)}function le(ke,je,it){var ht="DEPRECATED METHOD: "+je+"\n"+it+" AT \n";return function(){var Nt=new Error("get-stack-trace"),Ht=Nt&&Nt.stack?Nt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yn=b.console&&(b.console.warn||b.console.log);return Yn&&Yn.call(b.console,ht,Ht),ke.apply(this,arguments)}}K="function"!=typeof Object.assign?function(je){if(je===N||null===je)throw new TypeError("Cannot convert undefined or null to object");for(var it=Object(je),ht=1;ht<arguments.length;ht++){var Nt=arguments[ht];if(Nt!==N&&null!==Nt)for(var Ht in Nt)Nt.hasOwnProperty(Ht)&&(it[Ht]=Nt[Ht])}return it}:Object.assign;var re=le(function(je,it,ht){for(var Nt=Object.keys(it),Ht=0;Ht<Nt.length;)(!ht||ht&&je[Nt[Ht]]===N)&&(je[Nt[Ht]]=it[Nt[Ht]]),Ht++;return je},"extend","Use `assign`."),ie=le(function(je,it){return re(je,it,!0)},"merge","Use `assign`.");function J(ke,je,it){var Nt,ht=je.prototype;(Nt=ke.prototype=Object.create(ht)).constructor=ke,Nt._super=ht,it&&K(Nt,it)}function V(ke,je){return function(){return ke.apply(je,arguments)}}function x(ke,je){return typeof ke==D?ke.apply(je&&je[0]||N,je):ke}function B(ke,je){return ke===N?je:ke}function k(ke,je,it){X(de(je),function(ht){ke.addEventListener(ht,it,!1)})}function he(ke,je,it){X(de(je),function(ht){ke.removeEventListener(ht,it,!1)})}function W(ke,je){for(;ke;){if(ke==je)return!0;ke=ke.parentNode}return!1}function Me(ke,je){return ke.indexOf(je)>-1}function de(ke){return ke.trim().split(/\s+/g)}function xe(ke,je,it){if(ke.indexOf&&!it)return ke.indexOf(je);for(var ht=0;ht<ke.length;){if(it&&ke[ht][it]==je||!it&&ke[ht]===je)return ht;ht++}return-1}function Oe(ke){return Array.prototype.slice.call(ke,0)}function Te(ke,je,it){for(var ht=[],Nt=[],Ht=0;Ht<ke.length;){var Yn=je?ke[Ht][je]:ke[Ht];xe(Nt,Yn)<0&&ht.push(ke[Ht]),Nt[Ht]=Yn,Ht++}return it&&(ht=je?ht.sort(function(xn,an){return xn[je]>an[je]}):ht.sort()),ht}function Je(ke,je){for(var it,ht,Nt=je[0].toUpperCase()+je.slice(1),Ht=0;Ht<_.length;){if((ht=(it=_[Ht])?it+Nt:je)in ke)return ht;Ht++}return N}var Ke=1;function Fe(ke){var je=ke.ownerDocument||ke;return je.defaultView||je.parentWindow||b}var Ge="ontouchstart"in b,ge=Je(b,"PointerEvent")!==N,Ae=Ge&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),qe="touch",Ye="mouse",G=25,R=1,U=4,Le=8,tt=1,fe=2,ee=4,q=8,A=16,F=fe|ee,ue=q|A,me=F|ue,We=["x","y"],He=["clientX","clientY"];function gt(ke,je){var it=this;this.manager=ke,this.callback=je,this.element=ke.element,this.target=ke.options.inputTarget,this.domHandler=function(ht){x(ke.options.enable,[ke])&&it.handler(ht)},this.init()}function yt(ke,je,it){var ht=it.pointers.length,Nt=it.changedPointers.length,Ht=je&R&&ht-Nt==0,Yn=je&(U|Le)&&ht-Nt==0;it.isFirst=!!Ht,it.isFinal=!!Yn,Ht&&(ke.session={}),it.eventType=je,function Gt(ke,je){var it=ke.session,ht=je.pointers,Nt=ht.length;it.firstInput||(it.firstInput=Q(je)),Nt>1&&!it.firstMultiple?it.firstMultiple=Q(je):1===Nt&&(it.firstMultiple=!1);var Ht=it.firstInput,Yn=it.firstMultiple,xr=Yn?Yn.center:Ht.center,xn=je.center=I(ht);je.timeStamp=j(),je.deltaTime=je.timeStamp-Ht.timeStamp,je.angle=at(xr,xn),je.distance=Qe(xr,xn),function rn(ke,je){var it=je.center,ht=ke.offsetDelta||{},Nt=ke.prevDelta||{},Ht=ke.prevInput||{};(je.eventType===R||Ht.eventType===U)&&(Nt=ke.prevDelta={x:Ht.deltaX||0,y:Ht.deltaY||0},ht=ke.offsetDelta={x:it.x,y:it.y}),je.deltaX=Nt.x+(it.x-ht.x),je.deltaY=Nt.y+(it.y-ht.y)}(it,je),je.offsetDirection=$e(je.deltaX,je.deltaY);var an=ce(je.deltaTime,je.deltaX,je.deltaY);je.overallVelocityX=an.x,je.overallVelocityY=an.y,je.overallVelocity=P(an.x)>P(an.y)?an.x:an.y,je.scale=Yn?function sn(ke,je){return Qe(je[0],je[1],He)/Qe(ke[0],ke[1],He)}(Yn.pointers,ht):1,je.rotation=Yn?function $t(ke,je){return at(je[1],je[0],He)+at(ke[1],ke[0],He)}(Yn.pointers,ht):0,je.maxPointers=it.prevInput?je.pointers.length>it.prevInput.maxPointers?je.pointers.length:it.prevInput.maxPointers:je.pointers.length,function Ie(ke,je){var Nt,Ht,Yn,xr,it=ke.lastInterval||je,ht=je.timeStamp-it.timeStamp;if(je.eventType!=Le&&(ht>G||it.velocity===N)){var xn=je.deltaX-it.deltaX,an=je.deltaY-it.deltaY,ns=ce(ht,xn,an);Ht=ns.x,Yn=ns.y,Nt=P(ns.x)>P(ns.y)?ns.x:ns.y,xr=$e(xn,an),ke.lastInterval=je}else Nt=it.velocity,Ht=it.velocityX,Yn=it.velocityY,xr=it.direction;je.velocity=Nt,je.velocityX=Ht,je.velocityY=Yn,je.direction=xr}(it,je);var ns=ke.element;W(je.srcEvent.target,ns)&&(ns=je.srcEvent.target),je.target=ns}(ke,it),ke.emit("hammer.input",it),ke.recognize(it),ke.session.prevInput=it}function Q(ke){for(var je=[],it=0;it<ke.pointers.length;)je[it]={clientX:L(ke.pointers[it].clientX),clientY:L(ke.pointers[it].clientY)},it++;return{timeStamp:j(),pointers:je,center:I(je),deltaX:ke.deltaX,deltaY:ke.deltaY}}function I(ke){var je=ke.length;if(1===je)return{x:L(ke[0].clientX),y:L(ke[0].clientY)};for(var it=0,ht=0,Nt=0;Nt<je;)it+=ke[Nt].clientX,ht+=ke[Nt].clientY,Nt++;return{x:L(it/je),y:L(ht/je)}}function ce(ke,je,it){return{x:je/ke||0,y:it/ke||0}}function $e(ke,je){return ke===je?tt:P(ke)>=P(je)?ke<0?fe:ee:je<0?q:A}function Qe(ke,je,it){it||(it=We);var ht=je[it[0]]-ke[it[0]],Nt=je[it[1]]-ke[it[1]];return Math.sqrt(ht*ht+Nt*Nt)}function at(ke,je,it){return it||(it=We),180*Math.atan2(je[it[1]]-ke[it[1]],je[it[0]]-ke[it[0]])/Math.PI}gt.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(Fe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&he(this.element,this.evEl,this.domHandler),this.evTarget&&he(this.target,this.evTarget,this.domHandler),this.evWin&&he(Fe(this.element),this.evWin,this.domHandler)}};var $n={mousedown:R,mousemove:2,mouseup:U},Cn="mousedown",Mn="mousemove mouseup";function ko(){this.evEl=Cn,this.evWin=Mn,this.pressed=!1,gt.apply(this,arguments)}J(ko,gt,{handler:function(je){var it=$n[je.type];it&R&&0===je.button&&(this.pressed=!0),2&it&&1!==je.which&&(it=U),this.pressed&&(it&U&&(this.pressed=!1),this.callback(this.manager,it,{pointers:[je],changedPointers:[je],pointerType:Ye,srcEvent:je}))}});var ys={pointerdown:R,pointermove:2,pointerup:U,pointercancel:Le,pointerout:Le},es={2:qe,3:"pen",4:Ye,5:"kinect"},qi="pointerdown",Yr="pointermove pointerup pointercancel";function vs(){this.evEl=qi,this.evWin=Yr,gt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b.MSPointerEvent&&!b.PointerEvent&&(qi="MSPointerDown",Yr="MSPointerMove MSPointerUp MSPointerCancel"),J(vs,gt,{handler:function(je){var it=this.store,ht=!1,Nt=je.type.toLowerCase().replace("ms",""),Ht=ys[Nt],Yn=es[je.pointerType]||je.pointerType,xr=Yn==qe,xn=xe(it,je.pointerId,"pointerId");Ht&R&&(0===je.button||xr)?xn<0&&(it.push(je),xn=it.length-1):Ht&(U|Le)&&(ht=!0),!(xn<0)&&(it[xn]=je,this.callback(this.manager,Ht,{pointers:it,changedPointers:[je],pointerType:Yn,srcEvent:je}),ht&&it.splice(xn,1))}});var Gs={touchstart:R,touchmove:2,touchend:U,touchcancel:Le};function Qd(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,gt.apply(this,arguments)}function fh(ke,je){var it=Oe(ke.touches),ht=Oe(ke.changedTouches);return je&(U|Le)&&(it=Te(it.concat(ht),"identifier",!0)),[it,ht]}J(Qd,gt,{handler:function(je){var it=Gs[je.type];if(it===R&&(this.started=!0),this.started){var ht=fh.call(this,je,it);it&(U|Le)&&ht[0].length-ht[1].length==0&&(this.started=!1),this.callback(this.manager,it,{pointers:ht[0],changedPointers:ht[1],pointerType:qe,srcEvent:je})}}});var ph={touchstart:R,touchmove:2,touchend:U,touchcancel:Le},Gl="touchstart touchmove touchend touchcancel";function da(){this.evTarget=Gl,this.targetIds={},gt.apply(this,arguments)}function ic(ke,je){var it=Oe(ke.touches),ht=this.targetIds;if(je&(2|R)&&1===it.length)return ht[it[0].identifier]=!0,[it,it];var Nt,Ht,Yn=Oe(ke.changedTouches),xr=[],xn=this.target;if(Ht=it.filter(function(an){return W(an.target,xn)}),je===R)for(Nt=0;Nt<Ht.length;)ht[Ht[Nt].identifier]=!0,Nt++;for(Nt=0;Nt<Yn.length;)ht[Yn[Nt].identifier]&&xr.push(Yn[Nt]),je&(U|Le)&&delete ht[Yn[Nt].identifier],Nt++;return xr.length?[Te(Ht.concat(xr),"identifier",!0),xr]:void 0}J(da,gt,{handler:function(je){var it=ph[je.type],ht=ic.call(this,je,it);ht&&this.callback(this.manager,it,{pointers:ht[0],changedPointers:ht[1],pointerType:qe,srcEvent:je})}});var Wl=2500;function $c(){gt.apply(this,arguments);var ke=V(this.handler,this);this.touch=new da(this.manager,ke),this.mouse=new ko(this.manager,ke),this.primaryTouch=null,this.lastTouches=[]}function mh(ke,je){ke&R?(this.primaryTouch=je.changedPointers[0].identifier,Yc.call(this,je)):ke&(U|Le)&&Yc.call(this,je)}function Yc(ke){var je=ke.changedPointers[0];if(je.identifier===this.primaryTouch){var it={x:je.clientX,y:je.clientY};this.lastTouches.push(it);var ht=this.lastTouches;setTimeout(function(){var Ht=ht.indexOf(it);Ht>-1&&ht.splice(Ht,1)},Wl)}}function eu(ke){for(var je=ke.srcEvent.clientX,it=ke.srcEvent.clientY,ht=0;ht<this.lastTouches.length;ht++){var Nt=this.lastTouches[ht],Ht=Math.abs(je-Nt.x),Yn=Math.abs(it-Nt.y);if(Ht<=25&&Yn<=25)return!0}return!1}J($c,gt,{handler:function(je,it,ht){var Ht=ht.pointerType==Ye;if(!(Ht&&ht.sourceCapabilities&&ht.sourceCapabilities.firesTouchEvents)){if(ht.pointerType==qe)mh.call(this,it,ht);else if(Ht&&eu.call(this,ht))return;this.callback(je,it,ht)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Xc=Je(v.style,"touchAction"),Yl=Xc!==N,Li="compute",qc="manipulation",Ws="none",Ta="pan-x",ua="pan-y",rc=function Re(){if(!Yl)return!1;var ke={},je=b.CSS&&b.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(it){ke[it]=!je||b.CSS.supports("touch-action",it)}),ke}();function Po(ke,je){this.manager=ke,this.set(je)}Po.prototype={set:function(ke){ke==Li&&(ke=this.compute()),Yl&&this.manager.element.style&&rc[ke]&&(this.manager.element.style[Xc]=ke),this.actions=ke.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ke=[];return X(this.manager.recognizers,function(je){x(je.options.enable,[je])&&(ke=ke.concat(je.getTouchAction()))}),function _e(ke){if(Me(ke,Ws))return Ws;var je=Me(ke,Ta),it=Me(ke,ua);return je&&it?Ws:je||it?je?Ta:ua:Me(ke,qc)?qc:"auto"}(ke.join(" "))},preventDefaults:function(ke){var je=ke.srcEvent,it=ke.offsetDirection;if(!this.manager.session.prevented){var ht=this.actions,Nt=Me(ht,Ws)&&!rc[Ws],Ht=Me(ht,ua)&&!rc[ua],Yn=Me(ht,Ta)&&!rc[Ta];if(Nt&&1===ke.pointers.length&&ke.distance<2&&ke.deltaTime<250)return;return Yn&&Ht||!(Nt||Ht&&it&F||Yn&&it&ue)?void 0:this.preventSrc(je)}je.preventDefault()},preventSrc:function(ke){this.manager.session.prevented=!0,ke.preventDefault()}};var ve=1;function wt(ke){this.options=K({},this.defaults,ke||{}),this.id=function Ee(){return Ke++}(),this.manager=null,this.options.enable=B(this.options.enable,!0),this.state=ve,this.simultaneous={},this.requireFail=[]}function It(ke){return 16&ke?"cancel":8&ke?"end":4&ke?"move":2&ke?"start":""}function Vt(ke){return ke==A?"down":ke==q?"up":ke==fe?"left":ke==ee?"right":""}function en(ke,je){var it=je.manager;return it?it.get(ke):ke}function yn(){wt.apply(this,arguments)}function bo(){yn.apply(this,arguments),this.pX=null,this.pY=null}function Dr(){yn.apply(this,arguments)}function No(){wt.apply(this,arguments),this._timer=null,this._input=null}function Kc(){yn.apply(this,arguments)}function $s(){yn.apply(this,arguments)}function Lr(){wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Fo(ke,je){return(je=je||{}).recognizers=B(je.recognizers,Fo.defaults.preset),new hi(ke,je)}function hi(ke,je){this.options=K({},Fo.defaults,je||{}),this.options.inputTarget=this.options.inputTarget||ke,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ke,this.input=function Ft(ke){return new(ke.options.inputClass||(ge?vs:Ae?da:Ge?$c:ko))(ke,yt)}(this),this.touchAction=new Po(this,this.options.touchAction),Wt(this,!0),X(this.options.recognizers,function(it){var ht=this.add(new it[0](it[1]));it[2]&&ht.recognizeWith(it[2]),it[3]&&ht.requireFailure(it[3])},this)}function Wt(ke,je){var ht,it=ke.element;it.style&&(X(ke.options.cssProps,function(Nt,Ht){ht=Je(it.style,Ht),je?(ke.oldCssProps[ht]=it.style[ht],it.style[ht]=Nt):it.style[ht]=ke.oldCssProps[ht]||""}),je||(ke.oldCssProps={}))}wt.prototype={defaults:{},set:function(ke){return K(this.options,ke),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ke){if(T(ke,"recognizeWith",this))return this;var je=this.simultaneous;return je[(ke=en(ke,this)).id]||(je[ke.id]=ke,ke.recognizeWith(this)),this},dropRecognizeWith:function(ke){return T(ke,"dropRecognizeWith",this)||(ke=en(ke,this),delete this.simultaneous[ke.id]),this},requireFailure:function(ke){if(T(ke,"requireFailure",this))return this;var je=this.requireFail;return-1===xe(je,ke=en(ke,this))&&(je.push(ke),ke.requireFailure(this)),this},dropRequireFailure:function(ke){if(T(ke,"dropRequireFailure",this))return this;ke=en(ke,this);var je=xe(this.requireFail,ke);return je>-1&&this.requireFail.splice(je,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ke){return!!this.simultaneous[ke.id]},emit:function(ke){var je=this,it=this.state;function ht(Nt){je.manager.emit(Nt,ke)}it<8&&ht(je.options.event+It(it)),ht(je.options.event),ke.additionalEvent&&ht(ke.additionalEvent),it>=8&&ht(je.options.event+It(it))},tryEmit:function(ke){if(this.canEmit())return this.emit(ke);this.state=32},canEmit:function(){for(var ke=0;ke<this.requireFail.length;){if(!(this.requireFail[ke].state&(32|ve)))return!1;ke++}return!0},recognize:function(ke){var je=K({},ke);if(!x(this.options.enable,[this,je]))return this.reset(),void(this.state=32);56&this.state&&(this.state=ve),this.state=this.process(je),30&this.state&&this.tryEmit(je)},process:function(ke){},getTouchAction:function(){},reset:function(){}},J(yn,wt,{defaults:{pointers:1},attrTest:function(ke){var je=this.options.pointers;return 0===je||ke.pointers.length===je},process:function(ke){var je=this.state,it=ke.eventType,ht=6&je,Nt=this.attrTest(ke);return ht&&(it&Le||!Nt)?16|je:ht||Nt?it&U?8|je:2&je?4|je:2:32}}),J(bo,yn,{defaults:{event:"pan",threshold:10,pointers:1,direction:me},getTouchAction:function(){var ke=this.options.direction,je=[];return ke&F&&je.push(ua),ke&ue&&je.push(Ta),je},directionTest:function(ke){var je=this.options,it=!0,ht=ke.distance,Nt=ke.direction,Ht=ke.deltaX,Yn=ke.deltaY;return Nt&je.direction||(je.direction&F?(Nt=0===Ht?tt:Ht<0?fe:ee,it=Ht!=this.pX,ht=Math.abs(ke.deltaX)):(Nt=0===Yn?tt:Yn<0?q:A,it=Yn!=this.pY,ht=Math.abs(ke.deltaY))),ke.direction=Nt,it&&ht>je.threshold&&Nt&je.direction},attrTest:function(ke){return yn.prototype.attrTest.call(this,ke)&&(2&this.state||!(2&this.state)&&this.directionTest(ke))},emit:function(ke){this.pX=ke.deltaX,this.pY=ke.deltaY;var je=Vt(ke.direction);je&&(ke.additionalEvent=this.options.event+je),this._super.emit.call(this,ke)}}),J(Dr,yn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ws]},attrTest:function(ke){return this._super.attrTest.call(this,ke)&&(Math.abs(ke.scale-1)>this.options.threshold||2&this.state)},emit:function(ke){1!==ke.scale&&(ke.additionalEvent=this.options.event+(ke.scale<1?"in":"out")),this._super.emit.call(this,ke)}}),J(No,wt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(ke){var je=this.options,it=ke.pointers.length===je.pointers,ht=ke.distance<je.threshold,Nt=ke.deltaTime>je.time;if(this._input=ke,!ht||!it||ke.eventType&(U|Le)&&!Nt)this.reset();else if(ke.eventType&R)this.reset(),this._timer=se(function(){this.state=8,this.tryEmit()},je.time,this);else if(ke.eventType&U)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(ke){8===this.state&&(ke&&ke.eventType&U?this.manager.emit(this.options.event+"up",ke):(this._input.timeStamp=j(),this.manager.emit(this.options.event,this._input)))}}),J(Kc,yn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ws]},attrTest:function(ke){return this._super.attrTest.call(this,ke)&&(Math.abs(ke.rotation)>this.options.threshold||2&this.state)}}),J($s,yn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:F|ue,pointers:1},getTouchAction:function(){return bo.prototype.getTouchAction.call(this)},attrTest:function(ke){var it,je=this.options.direction;return je&(F|ue)?it=ke.overallVelocity:je&F?it=ke.overallVelocityX:je&ue&&(it=ke.overallVelocityY),this._super.attrTest.call(this,ke)&&je&ke.offsetDirection&&ke.distance>this.options.threshold&&ke.maxPointers==this.options.pointers&&P(it)>this.options.velocity&&ke.eventType&U},emit:function(ke){var je=Vt(ke.offsetDirection);je&&this.manager.emit(this.options.event+je,ke),this.manager.emit(this.options.event,ke)}}),J(Lr,wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[qc]},process:function(ke){var je=this.options,it=ke.pointers.length===je.pointers,ht=ke.distance<je.threshold,Nt=ke.deltaTime<je.time;if(this.reset(),ke.eventType&R&&0===this.count)return this.failTimeout();if(ht&&Nt&&it){if(ke.eventType!=U)return this.failTimeout();var Ht=!this.pTime||ke.timeStamp-this.pTime<je.interval,Yn=!this.pCenter||Qe(this.pCenter,ke.center)<je.posThreshold;if(this.pTime=ke.timeStamp,this.pCenter=ke.center,Yn&&Ht?this.count+=1:this.count=1,this._input=ke,0==this.count%je.taps)return this.hasRequireFailures()?(this._timer=se(function(){this.state=8,this.tryEmit()},je.interval,this),2):8}return 32},failTimeout:function(){return this._timer=se(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Fo.VERSION="2.0.7",Fo.defaults={domEvents:!1,touchAction:Li,enable:!0,inputTarget:null,inputClass:null,preset:[[Kc,{enable:!1}],[Dr,{enable:!1},["rotate"]],[$s,{direction:F}],[bo,{direction:F},["swipe"]],[Lr],[Lr,{event:"doubletap",taps:2},["tap"]],[No]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},hi.prototype={set:function(ke){return K(this.options,ke),ke.touchAction&&this.touchAction.update(),ke.inputTarget&&(this.input.destroy(),this.input.target=ke.inputTarget,this.input.init()),this},stop:function(ke){this.session.stopped=ke?2:1},recognize:function(ke){var je=this.session;if(!je.stopped){this.touchAction.preventDefaults(ke);var it,ht=this.recognizers,Nt=je.curRecognizer;(!Nt||Nt&&8&Nt.state)&&(Nt=je.curRecognizer=null);for(var Ht=0;Ht<ht.length;)it=ht[Ht],2===je.stopped||Nt&&it!=Nt&&!it.canRecognizeWith(Nt)?it.reset():it.recognize(ke),!Nt&&14&it.state&&(Nt=je.curRecognizer=it),Ht++}},get:function(ke){if(ke instanceof wt)return ke;for(var je=this.recognizers,it=0;it<je.length;it++)if(je[it].options.event==ke)return je[it];return null},add:function(ke){if(T(ke,"add",this))return this;var je=this.get(ke.options.event);return je&&this.remove(je),this.recognizers.push(ke),ke.manager=this,this.touchAction.update(),ke},remove:function(ke){if(T(ke,"remove",this))return this;if(ke=this.get(ke)){var je=this.recognizers,it=xe(je,ke);-1!==it&&(je.splice(it,1),this.touchAction.update())}return this},on:function(ke,je){if(ke!==N&&je!==N){var it=this.handlers;return X(de(ke),function(ht){it[ht]=it[ht]||[],it[ht].push(je)}),this}},off:function(ke,je){if(ke!==N){var it=this.handlers;return X(de(ke),function(ht){je?it[ht]&&it[ht].splice(xe(it[ht],je),1):delete it[ht]}),this}},emit:function(ke,je){this.options.domEvents&&function ts(ke,je){var it=O.createEvent("Event");it.initEvent(ke,!0,!0),it.gesture=je,je.target.dispatchEvent(it)}(ke,je);var it=this.handlers[ke]&&this.handlers[ke].slice();if(it&&it.length){je.type=ke,je.preventDefault=function(){je.srcEvent.preventDefault()};for(var ht=0;ht<it.length;)it[ht](je),ht++}},destroy:function(){this.element&&Wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},K(Fo,{INPUT_START:R,INPUT_MOVE:2,INPUT_END:U,INPUT_CANCEL:Le,STATE_POSSIBLE:ve,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:tt,DIRECTION_LEFT:fe,DIRECTION_RIGHT:ee,DIRECTION_UP:q,DIRECTION_DOWN:A,DIRECTION_HORIZONTAL:F,DIRECTION_VERTICAL:ue,DIRECTION_ALL:me,Manager:hi,Input:gt,TouchAction:Po,TouchInput:da,MouseInput:ko,PointerEventInput:vs,TouchMouseInput:$c,SingleTouchInput:Qd,Recognizer:wt,AttrRecognizer:yn,Tap:Lr,Pan:bo,Swipe:$s,Pinch:Dr,Rotate:Kc,Press:No,on:k,off:he,each:X,merge:ie,extend:re,assign:K,inherit:J,bindFn:V,prefixed:Je}),(typeof b<"u"?b:typeof self<"u"?self:{}).Hammer=Fo,(S=function(){return Fo}.call(Z,g,Z,ne))!==N&&(ne.exports=S)}(window,document)},2601:(ne,Z)=>{Z.read=function(g,S,b,O,C){var N,_,v=8*C-O-1,D=(1<<v)-1,L=D>>1,P=-7,j=b?C-1:0,se=b?-1:1,T=g[S+j];for(j+=se,N=T&(1<<-P)-1,T>>=-P,P+=v;P>0;N=256*N+g[S+j],j+=se,P-=8);for(_=N&(1<<-P)-1,N>>=-P,P+=O;P>0;_=256*_+g[S+j],j+=se,P-=8);if(0===N)N=1-L;else{if(N===D)return _?NaN:1/0*(T?-1:1);_+=Math.pow(2,O),N-=L}return(T?-1:1)*_*Math.pow(2,N-O)},Z.write=function(g,S,b,O,C,N){var _,v,D,L=8*N-C-1,P=(1<<L)-1,j=P>>1,se=23===C?Math.pow(2,-24)-Math.pow(2,-77):0,T=O?0:N-1,X=O?1:-1,le=S<0||0===S&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(v=isNaN(S)?1:0,_=P):(_=Math.floor(Math.log(S)/Math.LN2),S*(D=Math.pow(2,-_))<1&&(_--,D*=2),(S+=_+j>=1?se/D:se*Math.pow(2,1-j))*D>=2&&(_++,D/=2),_+j>=P?(v=0,_=P):_+j>=1?(v=(S*D-1)*Math.pow(2,C),_+=j):(v=S*Math.pow(2,j-1)*Math.pow(2,C),_=0));C>=8;g[b+T]=255&v,T+=X,v/=256,C-=8);for(_=_<<C|v,L+=C;L>0;g[b+T]=255&_,T+=X,_/=256,L-=8);g[b+T-X]|=128*le}},6698:ne=>{ne.exports="function"==typeof Object.create?function(g,S){S&&(g.super_=S,g.prototype=Object.create(S.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,S){if(S){g.super_=S;var b=function(){};b.prototype=S.prototype,g.prototype=new b,g.prototype.constructor=g}}},4198:(ne,Z,g)=>{"use strict";var S=g(7156).default;const{isArray:b,isObject:O,isString:C}=g(8254),{asArray:N}=g(3521),{prependBase:_}=g(2651),v=g(1874),D=g(1252);function P(se){throw new v("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:se})}function j({context:se,base:T}){if(!se)return;const X=se["@context"];if(C(X))se["@context"]=_(T,X);else if(b(X))for(let le=0;le<X.length;++le){const K=X[le];C(K)?X[le]=_(T,K):O(K)&&j({context:{"@context":K},base:T})}else if(O(X))for(const le in X)j({context:X[le],base:T})}ne.exports=class{constructor({sharedCache:T}){this.perOpCache=new Map,this.sharedCache=T}resolve({activeCtx:T,context:X,documentLoader:le,base:K,cycles:re=new Set}){var ie=this;return S(function*(){X&&O(X)&&X["@context"]&&(X=X["@context"]),X=N(X);const J=[];for(const V of X){if(C(V)){let k=ie._get(V);k||(k=yield ie._resolveRemoteContext({activeCtx:T,url:V,documentLoader:le,base:K,cycles:re})),b(k)?J.push(...k):J.push(k);continue}if(null===V){J.push(new D({document:null}));continue}O(V)||P(X);const x=JSON.stringify(V);let B=ie._get(x);B||(B=new D({document:V}),ie._cacheResolvedContext({key:x,resolved:B,tag:"static"})),J.push(B)}return J})()}_get(T){let X=this.perOpCache.get(T);if(!X){const le=this.sharedCache.get(T);le&&(X=le.get("static"),X&&this.perOpCache.set(T,X))}return X}_cacheResolvedContext({key:T,resolved:X,tag:le}){if(this.perOpCache.set(T,X),void 0!==le){let K=this.sharedCache.get(T);K||(K=new Map,this.sharedCache.set(T,K)),K.set(le,X)}return X}_resolveRemoteContext({activeCtx:T,url:X,documentLoader:le,base:K,cycles:re}){var ie=this;return S(function*(){X=_(K,X);const{context:J,remoteDoc:V}=yield ie._fetchContext({activeCtx:T,url:X,documentLoader:le,cycles:re});j({context:J,base:K=V.documentUrl||X});const x=yield ie.resolve({activeCtx:T,context:J,documentLoader:le,base:K,cycles:re});return ie._cacheResolvedContext({key:X,resolved:x,tag:V.tag}),x})()}_fetchContext({activeCtx:T,url:X,documentLoader:le,cycles:K}){return S(function*(){if(K.size>10)throw new v("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===T.processingMode?"loading remote context failed":"context overflow",max:10});if(K.has(X))throw new v("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===T.processingMode?"recursive context inclusion":"context overflow",url:X});let re,ie;K.add(X);try{ie=yield le(X),re=ie.document||null,C(re)&&(re=JSON.parse(re))}catch(J){throw new v("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:X,cause:J})}if(!O(re))throw new v("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:X});return re="@context"in re?{"@context":re["@context"]}:{"@context":{}},ie.contextUrl&&(b(re["@context"])||(re["@context"]=[re["@context"]]),re["@context"].push(ie.contextUrl)),{context:re,remoteDoc:ie}})()}}},1874:ne=>{"use strict";ne.exports=class extends Error{constructor(g="An unspecified JSON-LD error occurred.",S="jsonld.Error",b={}){super(g),this.name=S,this.message=g,this.details=b}}},1828:ne=>{"use strict";ne.exports=Z=>{class g{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(g,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(g.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:g}),g.compact=function(S,b){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Z.compact(S,b)},g.expand=function(S){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Z.expand(S)},g.flatten=function(S){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Z.flatten(S)},g}},7260:(ne,Z,g)=>{"use strict";ne.exports=g(1986).NQuads},4044:(ne,Z,g)=>{"use strict";var S=g(7156).default;ne.exports=class{constructor(){this._requests={}}wrapLoader(O){const C=this;return C._loader=O,function(){return C.add.apply(C,arguments)}}add(O){var C=this;return S(function*(){let N=C._requests[O];if(N)return Promise.resolve(N);N=C._requests[O]=C._loader(O);try{return yield N}finally{delete C._requests[O]}})()}}},1252:(ne,Z,g)=>{"use strict";const S=g(1072);ne.exports=class{constructor({document:C}){this.document=C,this.cache=new S({max:10})}getProcessed(C){return this.cache.get(C)}setProcessed(C,N){this.cache.set(C,N)}}},8809:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(1874),{isArray:O,isObject:C,isString:N,isUndefined:_}=g(8254),{isList:v,isValue:D,isGraph:L,isSimpleGraph:P,isSubjectReference:j}=g(543),{expandIri:se,getContextValue:T,isKeyword:X,process:le,processingMode:K}=g(9611),{removeBase:re,prependBase:ie}=g(2651),{REGEX_KEYWORD:J,addValue:V,asArray:x,compareShortestLeast:B}=g(3521),k={};function W(Me,de,xe){if("@nest"!==se(Me,de,{vocab:!0},xe))throw new b("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ne.exports=k,k.compact=function(){var Me=S(function*({activeCtx:de,activeProperty:xe=null,element:Oe,options:Te={}}){if(O(Oe)){let Ke=[];for(let Ee=0;Ee<Oe.length;++Ee){const Fe=yield k.compact({activeCtx:de,activeProperty:xe,element:Oe[Ee],options:Te});null!==Fe&&Ke.push(Fe)}return Te.compactArrays&&1===Ke.length&&0===(T(de,xe,"@container")||[]).length&&(Ke=Ke[0]),Ke}const Je=T(de,xe,"@context");if(_(Je)||(de=yield le({activeCtx:de,localCtx:Je,propagate:!0,overrideProtected:!0,options:Te})),C(Oe)){if(Te.link&&"@id"in Oe&&Te.link.hasOwnProperty(Oe["@id"])){const qe=Te.link[Oe["@id"]];for(let ct=0;ct<qe.length;++ct)if(qe[ct].expanded===Oe)return qe[ct].compacted}if(D(Oe)||j(Oe)){const qe=k.compactValue({activeCtx:de,activeProperty:xe,value:Oe,options:Te});return Te.link&&j(Oe)&&(Te.link.hasOwnProperty(Oe["@id"])||(Te.link[Oe["@id"]]=[]),Te.link[Oe["@id"]].push({expanded:Oe,compacted:qe})),qe}if(v(Oe)&&(T(de,xe,"@container")||[]).includes("@list"))return k.compact({activeCtx:de,activeProperty:xe,element:Oe["@list"],options:Te});const Ke="@reverse"===xe,Ee={},Fe=de;!D(Oe)&&!j(Oe)&&(de=de.revertToPreviousContext());const Pe=T(Fe,xe,"@context");_(Pe)||(de=yield le({activeCtx:de,localCtx:Pe,propagate:!0,overrideProtected:!0,options:Te})),Te.link&&"@id"in Oe&&(Te.link.hasOwnProperty(Oe["@id"])||(Te.link[Oe["@id"]]=[]),Te.link[Oe["@id"]].push({expanded:Oe,compacted:Ee}));let Ge=Oe["@type"]||[];Ge.length>1&&(Ge=Array.from(Ge).sort());const ge=de;for(const qe of Ge){const ct=k.compactIri({activeCtx:ge,iri:qe,relativeTo:{vocab:!0}}),Ye=T(Fe,ct,"@context");_(Ye)||(de=yield le({activeCtx:de,localCtx:Ye,options:Te,propagate:!1}))}const Ae=Object.keys(Oe).sort();for(const qe of Ae){const ct=Oe[qe];if("@id"!==qe)if("@type"!==qe)if("@reverse"!==qe)if("@preserve"!==qe)if("@index"!==qe)if("@graph"!==qe&&"@list"!==qe&&"@included"!==qe&&X(qe)){const Ye=k.compactIri({activeCtx:de,iri:qe,relativeTo:{vocab:!0}});V(Ee,Ye,ct)}else{if(!O(ct))throw new b("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===ct.length){const Ye=k.compactIri({activeCtx:de,iri:qe,value:ct,relativeTo:{vocab:!0},reverse:Ke}),ye=de.mappings.has(Ye)?de.mappings.get(Ye)["@nest"]:null;let G=Ee;ye&&(W(de,ye,Te),C(Ee[ye])||(Ee[ye]={}),G=Ee[ye]),V(G,Ye,ct,{propertyIsArray:!0})}for(const Ye of ct){const ye=k.compactIri({activeCtx:de,iri:qe,value:Ye,relativeTo:{vocab:!0},reverse:Ke}),G=de.mappings.has(ye)?de.mappings.get(ye)["@nest"]:null;let R=Ee;G&&(W(de,G,Te),C(Ee[G])||(Ee[G]={}),R=Ee[G]);const ae=T(de,ye,"@container")||[],U=L(Ye),Le=v(Ye);let tt;Le?tt=Ye["@list"]:U&&(tt=Ye["@graph"]);let fe=yield k.compact({activeCtx:de,activeProperty:ye,element:Le||U?tt:Ye,options:Te});if(Le){if(O(fe)||(fe=[fe]),ae.includes("@list")){V(R,ye,fe,{valueIsArray:!0,allowDuplicate:!0});continue}fe={[k.compactIri({activeCtx:de,iri:"@list",relativeTo:{vocab:!0}})]:fe},"@index"in Ye&&(fe[k.compactIri({activeCtx:de,iri:"@index",relativeTo:{vocab:!0}})]=Ye["@index"])}if(U)if(ae.includes("@graph")&&(ae.includes("@id")||ae.includes("@index")&&P(Ye))){let ee;R.hasOwnProperty(ye)?ee=R[ye]:R[ye]=ee={};const q=(ae.includes("@id")?Ye["@id"]:Ye["@index"])||k.compactIri({activeCtx:de,iri:"@none",relativeTo:{vocab:!0}});V(ee,q,fe,{propertyIsArray:!Te.compactArrays||ae.includes("@set")})}else ae.includes("@graph")&&P(Ye)?(O(fe)&&fe.length>1&&(fe={"@included":fe}),V(R,ye,fe,{propertyIsArray:!Te.compactArrays||ae.includes("@set")})):(O(fe)&&1===fe.length&&Te.compactArrays&&(fe=fe[0]),fe={[k.compactIri({activeCtx:de,iri:"@graph",relativeTo:{vocab:!0}})]:fe},"@id"in Ye&&(fe[k.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}})]=Ye["@id"]),"@index"in Ye&&(fe[k.compactIri({activeCtx:de,iri:"@index",relativeTo:{vocab:!0}})]=Ye["@index"]),V(R,ye,fe,{propertyIsArray:!Te.compactArrays||ae.includes("@set")}));else if(ae.includes("@language")||ae.includes("@index")||ae.includes("@id")||ae.includes("@type")){let ee,q;if(R.hasOwnProperty(ye)?ee=R[ye]:R[ye]=ee={},ae.includes("@language"))D(fe)&&(fe=fe["@value"]),q=Ye["@language"];else if(ae.includes("@index")){const A=T(de,ye,"@index")||"@index",F=k.compactIri({activeCtx:de,iri:A,relativeTo:{vocab:!0}});if("@index"===A)q=Ye["@index"],delete fe[F];else{let ue;if([q,...ue]=x(fe[A]||[]),N(q))switch(ue.length){case 0:delete fe[A];break;case 1:fe[A]=ue[0];break;default:fe[A]=ue}else q=null}}else if(ae.includes("@id")){const A=k.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}});q=fe[A],delete fe[A]}else if(ae.includes("@type")){const A=k.compactIri({activeCtx:de,iri:"@type",relativeTo:{vocab:!0}});let F;switch([q,...F]=x(fe[A]||[]),F.length){case 0:delete fe[A];break;case 1:fe[A]=F[0];break;default:fe[A]=F}1===Object.keys(fe).length&&"@id"in Ye&&(fe=yield k.compact({activeCtx:de,activeProperty:ye,element:{"@id":Ye["@id"]},options:Te}))}q||(q=k.compactIri({activeCtx:de,iri:"@none",relativeTo:{vocab:!0}})),V(ee,q,fe,{propertyIsArray:ae.includes("@set")})}else{const ee=!Te.compactArrays||ae.includes("@set")||ae.includes("@list")||O(fe)&&0===fe.length||"@list"===qe||"@graph"===qe;V(R,ye,fe,{propertyIsArray:ee})}}}else{if((T(de,xe,"@container")||[]).includes("@index"))continue;const ye=k.compactIri({activeCtx:de,iri:qe,relativeTo:{vocab:!0}});V(Ee,ye,ct)}else{const Ye=yield k.compact({activeCtx:de,activeProperty:xe,element:ct,options:Te});O(Ye)&&0===Ye.length||V(Ee,qe,Ye)}else{const Ye=yield k.compact({activeCtx:de,activeProperty:"@reverse",element:ct,options:Te});for(const ye in Ye)if(de.mappings.has(ye)&&de.mappings.get(ye).reverse){const G=Ye[ye],ae=(T(de,ye,"@container")||[]).includes("@set")||!Te.compactArrays;V(Ee,ye,G,{propertyIsArray:ae}),delete Ye[ye]}if(Object.keys(Ye).length>0){const ye=k.compactIri({activeCtx:de,iri:qe,relativeTo:{vocab:!0}});V(Ee,ye,Ye)}}else{let Ye=x(ct).map(U=>k.compactIri({activeCtx:Fe,iri:U,relativeTo:{vocab:!0}}));1===Ye.length&&(Ye=Ye[0]);const ye=k.compactIri({activeCtx:de,iri:"@type",relativeTo:{vocab:!0}}),ae=(T(de,ye,"@container")||[]).includes("@set")&&K(de,1.1)||O(Ye)&&0===ct.length;V(Ee,ye,Ye,{propertyIsArray:ae})}else{let Ye=x(ct).map(G=>k.compactIri({activeCtx:de,iri:G,relativeTo:{vocab:!1},base:Te.base}));1===Ye.length&&(Ye=Ye[0]),Ee[k.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}})]=Ye}}return Ee}return Oe});return function(de){return Me.apply(this,arguments)}}(),k.compactIri=({activeCtx:Me,iri:de,value:xe=null,relativeTo:Oe={vocab:!1},reverse:Te=!1,base:Je=null})=>{if(null===de)return de;Me.isPropertyTermScoped&&Me.previousContext&&(Me=Me.previousContext);const Ke=Me.getInverse();if(X(de)&&de in Ke&&"@none"in Ke[de]&&"@type"in Ke[de]["@none"]&&"@none"in Ke[de]["@none"]["@type"])return Ke[de]["@none"]["@type"]["@none"];if(Oe.vocab&&de in Ke){const ge=Me["@language"]||"@none",Ae=[];C(xe)&&"@index"in xe&&!("@graph"in xe)&&Ae.push("@index","@index@set"),C(xe)&&"@preserve"in xe&&(xe=xe["@preserve"][0]),L(xe)?("@index"in xe&&Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe&&Ae.push("@graph@id","@graph@id@set"),Ae.push("@graph","@graph@set","@set"),"@index"in xe||Ae.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe||Ae.push("@graph@id","@graph@id@set")):C(xe)&&!D(xe)&&Ae.push("@id","@id@set","@type","@set@type");let qe="@language",ct="@null";if(Te)qe="@type",ct="@reverse",Ae.push("@set");else if(v(xe)){"@index"in xe||Ae.push("@list");const ye=xe["@list"];if(0===ye.length)qe="@any",ct="@none";else{let G=0===ye.length?ge:null,R=null;for(let ae=0;ae<ye.length;++ae){const U=ye[ae];let Le="@none",tt="@none";if(D(U)?"@direction"in U?Le=`${(U["@language"]||"").toLowerCase()}_${U["@direction"]}`:"@language"in U?Le=U["@language"].toLowerCase():"@type"in U?tt=U["@type"]:Le="@null":tt="@id",null===G?G=Le:Le!==G&&D(U)&&(G="@none"),null===R?R=tt:tt!==R&&(R="@none"),"@none"===G&&"@none"===R)break}G=G||"@none",R=R||"@none","@none"!==R?(qe="@type",ct=R):ct=G}}else{if(D(xe))if("@language"in xe&&!("@index"in xe)){Ae.push("@language","@language@set"),ct=xe["@language"];const ye=xe["@direction"];ye&&(ct=`${ct}_${ye}`)}else"@direction"in xe&&!("@index"in xe)?ct=`_${xe["@direction"]}`:"@type"in xe&&(qe="@type",ct=xe["@type"]);else qe="@type",ct="@id";Ae.push("@set")}Ae.push("@none"),C(xe)&&!("@index"in xe)&&Ae.push("@index","@index@set"),D(xe)&&1===Object.keys(xe).length&&Ae.push("@language","@language@set");const Ye=function he(Me,de,xe,Oe,Te,Je){null===Je&&(Je="@null");const Ke=[];if(("@id"===Je||"@reverse"===Je)&&C(xe)&&"@id"in xe){"@reverse"===Je&&Ke.push("@reverse");const Fe=k.compactIri({activeCtx:Me,iri:xe["@id"],relativeTo:{vocab:!0}});Me.mappings.has(Fe)&&Me.mappings.get(Fe)&&Me.mappings.get(Fe)["@id"]===xe["@id"]?Ke.push.apply(Ke,["@vocab","@id"]):Ke.push.apply(Ke,["@id","@vocab"])}else{Ke.push(Je);const Fe=Ke.find(Pe=>Pe.includes("_"));Fe&&Ke.push(Fe.replace(/^[^_]+_/,"_"))}Ke.push("@none");const Ee=Me.inverse[de];for(const Fe of Oe){if(!(Fe in Ee))continue;const Pe=Ee[Fe][Te];for(const Ge of Ke)if(Ge in Pe)return Pe[Ge]}return null}(Me,de,xe,Ae,qe,ct);if(null!==Ye)return Ye}if(Oe.vocab&&"@vocab"in Me){const ge=Me["@vocab"];if(0===de.indexOf(ge)&&de!==ge){const Ae=de.substr(ge.length);if(!Me.mappings.has(Ae))return Ae}}let Ee=null;const Fe=[];let Pe=Me.fastCurieMap;const Ge=de.length-1;for(let ge=0;ge<Ge&&de[ge]in Pe;++ge)Pe=Pe[de[ge]],""in Pe&&Fe.push(Pe[""][0]);for(let ge=Fe.length-1;ge>=0;--ge){const Ae=Fe[ge],qe=Ae.terms;for(const ct of qe){const Ye=ct+":"+de.substr(Ae.iri.length);Me.mappings.get(ct)._prefix&&(!Me.mappings.has(Ye)||null===xe&&Me.mappings.get(Ye)["@id"]===de)&&(null===Ee||B(Ye,Ee)<0)&&(Ee=Ye)}}if(null!==Ee)return Ee;for(const[ge,Ae]of Me.mappings)if(Ae&&Ae._prefix&&de.startsWith(ge+":"))throw new b(`Absolute IRI "${de}" confused with prefix "${ge}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Me});if(!Oe.vocab){if("@base"in Me){if(Me["@base"]){const ge=re(ie(Je,Me["@base"]),de);return J.test(ge)?`./${ge}`:ge}return de}return re(Je,de)}return de},k.compactValue=({activeCtx:Me,activeProperty:de,value:xe,options:Oe})=>{if(D(xe)){const Ee=T(Me,de,"@type"),Fe=T(Me,de,"@language"),Pe=T(Me,de,"@direction"),Ge=T(Me,de,"@container")||[],ge="@index"in xe&&!Ge.includes("@index");if(!ge&&"@none"!==Ee&&(xe["@type"]===Ee||"@language"in xe&&xe["@language"]===Fe&&"@direction"in xe&&xe["@direction"]===Pe||"@language"in xe&&xe["@language"]===Fe||"@direction"in xe&&xe["@direction"]===Pe))return xe["@value"];const Ae=Object.keys(xe).length,qe=1===Ae||2===Ae&&"@index"in xe&&!ge,ct="@language"in Me,Ye=N(xe["@value"]),ye=Me.mappings.has(de)&&null===Me.mappings.get(de)["@language"];if(qe&&"@none"!==Ee&&(!ct||!Ye||ye))return xe["@value"];const G={};return ge&&(G[k.compactIri({activeCtx:Me,iri:"@index",relativeTo:{vocab:!0}})]=xe["@index"]),"@type"in xe?G[k.compactIri({activeCtx:Me,iri:"@type",relativeTo:{vocab:!0}})]=k.compactIri({activeCtx:Me,iri:xe["@type"],relativeTo:{vocab:!0}}):"@language"in xe&&(G[k.compactIri({activeCtx:Me,iri:"@language",relativeTo:{vocab:!0}})]=xe["@language"]),"@direction"in xe&&(G[k.compactIri({activeCtx:Me,iri:"@direction",relativeTo:{vocab:!0}})]=xe["@direction"]),G[k.compactIri({activeCtx:Me,iri:"@value",relativeTo:{vocab:!0}})]=xe["@value"],G}const Te=se(Me,de,{vocab:!0},Oe),Je=T(Me,de,"@type"),Ke=k.compactIri({activeCtx:Me,iri:xe["@id"],relativeTo:{vocab:"@vocab"===Je},base:Oe.base});return"@id"===Je||"@vocab"===Je||"@graph"===Te?Ke:{[k.compactIri({activeCtx:Me,iri:"@id",relativeTo:{vocab:!0}})]:Ke}}},6982:ne=>{"use strict";const Z="http://www.w3.org/1999/02/22-rdf-syntax-ns#",g="http://www.w3.org/2001/XMLSchema#";ne.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Z,RDF_LIST:Z+"List",RDF_FIRST:Z+"first",RDF_REST:Z+"rest",RDF_NIL:Z+"nil",RDF_TYPE:Z+"type",RDF_PLAIN_LITERAL:Z+"PlainLiteral",RDF_XML_LITERAL:Z+"XMLLiteral",RDF_JSON_LITERAL:Z+"JSON",RDF_OBJECT:Z+"object",RDF_LANGSTRING:Z+"langString",XSD:g,XSD_BOOLEAN:g+"boolean",XSD_DOUBLE:g+"double",XSD_INTEGER:g+"integer",XSD_STRING:g+"string"}},9611:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(3521),O=g(1874),{isArray:C,isObject:N,isString:_,isUndefined:v}=g(8254),{isAbsolute:D,isRelative:L,prependBase:P}=g(2651),{handleEvent:j}=g(3855),{REGEX_BCP47:se,REGEX_KEYWORD:T,asArray:X,compareShortestLeast:le}=g(3521),K=new Map,ie={};function J(x,B,k,he,W,Me){if(null===B||!_(B)||ie.isKeyword(B))return B;if(B.match(T))return null;if(he&&he.hasOwnProperty(B)&&!0!==W.get(B)&&ie.createTermDefinition({activeCtx:x,localCtx:he,term:B,defined:W,options:Me}),(k=k||{}).vocab){const xe=x.mappings.get(B);if(null===xe)return null;if(N(xe)&&"@id"in xe)return xe["@id"]}const de=B.indexOf(":");if(de>0){const xe=B.substr(0,de),Oe=B.substr(de+1);if("_"===xe||0===Oe.indexOf("//"))return B;he&&he.hasOwnProperty(xe)&&ie.createTermDefinition({activeCtx:x,localCtx:he,term:xe,defined:W,options:Me});const Te=x.mappings.get(xe);if(Te&&Te._prefix)return Te["@id"]+Oe;if(D(B))return B}if(k.vocab&&"@vocab"in x)B=x["@vocab"]+B;else if(k.base){let xe,Oe;"@base"in x?x["@base"]?(Oe=P(Me.base,x["@base"]),xe=P(Oe,B)):(Oe=x["@base"],xe=B):(Oe=Me.base,xe=P(Me.base,B)),B=xe}return B}function V(x,B){if(!x||"object"!=typeof x||!B||"object"!=typeof B)return x===B;const k=Array.isArray(x);if(k!==Array.isArray(B))return!1;if(k){if(x.length!==B.length)return!1;for(let Me=0;Me<x.length;++Me)if(!V(x[Me],B[Me]))return!1;return!0}const he=Object.keys(x),W=Object.keys(B);if(he.length!==W.length)return!1;for(const Me in x){let de=x[Me],xe=B[Me];if("@container"===Me&&Array.isArray(de)&&Array.isArray(xe)&&(de=de.slice().sort(),xe=xe.slice().sort()),!V(de,xe))return!1}return!0}ne.exports=ie,ie.process=function(){var x=S(function*({activeCtx:B,localCtx:k,options:he,propagate:W=!0,overrideProtected:Me=!1,cycles:de=new Set}){if(N(k)&&"@context"in k&&C(k["@context"])&&(k=k["@context"]),0===X(k).length)return B;const Oe=[],Te=[({event:Fe,next:Pe})=>{Oe.push(Fe),Pe()}];he.eventHandler&&Te.push(he.eventHandler);const Je=he;he={...he,eventHandler:Te};const Ke=yield he.contextResolver.resolve({activeCtx:B,context:k,documentLoader:he.documentLoader,base:he.base});N(Ke[0].document)&&"boolean"==typeof Ke[0].document["@propagate"]&&(W=Ke[0].document["@propagate"]);let Ee=B;!W&&!Ee.previousContext&&(Ee=Ee.clone(),Ee.previousContext=B);for(const Fe of Ke){let{document:Pe}=Fe;if(B=Ee,null===Pe){if(!Me&&0!==Object.keys(B.protected).length)throw new O("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ee=B=ie.getInitialContext(he).clone();continue}const Ge=Fe.getProcessed(B);if(Ge){if(Je.eventHandler)for(const Ae of Ge.events)j({event:Ae,options:Je});Ee=B=Ge.context;continue}if(N(Pe)&&"@context"in Pe&&(Pe=Pe["@context"]),!N(Pe))throw new O("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Pe});Ee=Ee.clone();const ge=new Map;if("@version"in Pe){if(1.1!==Pe["@version"])throw new O("Unsupported JSON-LD version: "+Pe["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Pe});if(B.processingMode&&"json-ld-1.0"===B.processingMode)throw new O("@version: "+Pe["@version"]+" not compatible with "+B.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Pe});Ee.processingMode="json-ld-1.1",Ee["@version"]=Pe["@version"],ge.set("@version",!0)}if(Ee.processingMode=Ee.processingMode||B.processingMode,"@base"in Pe){let Ae=Pe["@base"];if(null!==Ae&&!D(Ae)){if(!L(Ae))throw new O('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Pe});Ae=P(Ee["@base"],Ae)}Ee["@base"]=Ae,ge.set("@base",!0)}if("@vocab"in Pe){const Ae=Pe["@vocab"];if(null===Ae)delete Ee["@vocab"];else{if(!_(Ae))throw new O('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Pe});if(!D(Ae)&&ie.processingMode(Ee,1))throw new O('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Pe});{const qe=J(Ee,Ae,{vocab:!0,base:!0},void 0,void 0,he);D(qe)||he.eventHandler&&j({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:qe}},options:he}),Ee["@vocab"]=qe}}ge.set("@vocab",!0)}if("@language"in Pe){const Ae=Pe["@language"];if(null===Ae)delete Ee["@language"];else{if(!_(Ae))throw new O('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Pe});Ae.match(se)||he.eventHandler&&j({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ae}},options:he}),Ee["@language"]=Ae.toLowerCase()}ge.set("@language",!0)}if("@direction"in Pe){const Ae=Pe["@direction"];if("json-ld-1.0"===B.processingMode)throw new O("Invalid JSON-LD syntax; @direction not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Pe});if(null===Ae)delete Ee["@direction"];else{if("ltr"!==Ae&&"rtl"!==Ae)throw new O('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Pe});Ee["@direction"]=Ae}ge.set("@direction",!0)}if("@propagate"in Pe){const Ae=Pe["@propagate"];if("json-ld-1.0"===B.processingMode)throw new O("Invalid JSON-LD syntax; @propagate not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Pe});if("boolean"!=typeof Ae)throw new O("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:k});ge.set("@propagate",!0)}if("@import"in Pe){const Ae=Pe["@import"];if("json-ld-1.0"===B.processingMode)throw new O("Invalid JSON-LD syntax; @import not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Pe});if(!_(Ae))throw new O("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:k});const qe=yield he.contextResolver.resolve({activeCtx:B,context:Ae,documentLoader:he.documentLoader,base:he.base});if(1!==qe.length)throw new O("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:k});const ct=qe[0].getProcessed(B);if(ct)Pe=ct;else{const Ye=qe[0].document;if("@import"in Ye)throw new O("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:k});for(const ye in Ye)Pe.hasOwnProperty(ye)||(Pe[ye]=Ye[ye]);qe[0].setProcessed(B,Pe)}ge.set("@import",!0)}ge.set("@protected",Pe["@protected"]||!1);for(const Ae in Pe)if(ie.createTermDefinition({activeCtx:Ee,localCtx:Pe,term:Ae,defined:ge,options:he,overrideProtected:Me}),N(Pe[Ae])&&"@context"in Pe[Ae]){const qe=Pe[Ae]["@context"];let ct=!0;if(_(qe)){const Ye=P(he.base,qe);de.has(Ye)?ct=!1:de.add(Ye)}if(ct)try{yield ie.process({activeCtx:Ee.clone(),localCtx:Pe[Ae]["@context"],overrideProtected:!0,options:he,cycles:de})}catch{throw new O("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Pe[Ae]["@context"],term:Ae})}}Fe.setProcessed(B,{context:Ee,events:Oe})}return Ee});return function(B){return x.apply(this,arguments)}}(),ie.createTermDefinition=({activeCtx:x,localCtx:B,term:k,defined:he,options:W,overrideProtected:Me=!1})=>{if(he.has(k)){if(he.get(k))return;throw new O("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:B,term:k})}let de;if(he.set(k,!1),B.hasOwnProperty(k)&&(de=B[k]),"@type"===k&&N(de)&&"@set"===(de["@container"]||"@set")&&ie.processingMode(x,1.1)){const Fe=["@container","@id","@protected"],Pe=Object.keys(de);if(0===Pe.length||Pe.some(Ge=>!Fe.includes(Ge)))throw new O("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:k})}else{if(ie.isKeyword(k))throw new O("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:k});if(k.match(T))return void(W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:k}},options:W}));if(""===k)throw new O("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:B})}const xe=x.mappings.get(k);x.mappings.has(k)&&x.mappings.delete(k);let Oe=!1;if((_(de)||null===de)&&(Oe=!0,de={"@id":de}),!N(de))throw new O("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:B});const Te={};x.mappings.set(k,Te),Te.reverse=!1;const Je=["@container","@id","@language","@reverse","@type"];ie.processingMode(x,1.1)&&Je.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Fe in de)if(!Je.includes(Fe))throw new O("Invalid JSON-LD syntax; a term definition must not contain "+Fe,"jsonld.SyntaxError",{code:"invalid term definition",context:B});const Ke=k.indexOf(":");if(Te._termHasColon=Ke>0,"@reverse"in de){if("@id"in de)throw new O("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});if("@nest"in de)throw new O("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});const Fe=de["@reverse"];if(!_(Fe))throw new O("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(Fe.match(T))return W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Fe}},options:W}),void(xe?x.mappings.set(k,xe):x.mappings.delete(k));const Pe=J(x,Fe,{vocab:!0,base:!1},B,he,W);if(!D(Pe))throw new O("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});Te["@id"]=Pe,Te.reverse=!0}else if("@id"in de){let Fe=de["@id"];if(Fe&&!_(Fe))throw new O("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(null===Fe)Te["@id"]=null;else{if(!ie.isKeyword(Fe)&&Fe.match(T))return W.eventHandler&&j({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Fe}},options:W}),void(xe?x.mappings.set(k,xe):x.mappings.delete(k));if(Fe!==k){if(Fe=J(x,Fe,{vocab:!0,base:!1},B,he,W),!D(Fe)&&!ie.isKeyword(Fe))throw new O("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(k.match(/(?::[^:])|\//)&&J(x,k,{vocab:!0,base:!1},B,new Map(he).set(k,!0),W)!==Fe)throw new O("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});Te["@id"]=Fe,Te._prefix=Oe&&!Te._termHasColon&&null!==Fe.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Te))if(Te._termHasColon){const Fe=k.substr(0,Ke);if(B.hasOwnProperty(Fe)&&ie.createTermDefinition({activeCtx:x,localCtx:B,term:Fe,defined:he,options:W}),x.mappings.has(Fe)){const Pe=k.substr(Ke+1);Te["@id"]=x.mappings.get(Fe)["@id"]+Pe}else Te["@id"]=k}else if("@type"===k)Te["@id"]=k;else{if(!("@vocab"in x))throw new O("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B,term:k});Te["@id"]=x["@vocab"]+k}if((!0===de["@protected"]||!0===he.get("@protected")&&!1!==de["@protected"])&&(x.protected[k]=!0,Te.protected=!0),he.set(k,!0),"@type"in de){let Fe=de["@type"];if(!_(Fe))throw new O("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if("@json"===Fe||"@none"===Fe){if(ie.processingMode(x,1))throw new O(`Invalid JSON-LD syntax; an @context @type value must not be "${Fe}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else if("@id"!==Fe&&"@vocab"!==Fe){if(Fe=J(x,Fe,{vocab:!0,base:!1},B,he,W),!D(Fe))throw new O("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if(0===Fe.indexOf("_:"))throw new O("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}Te["@type"]=Fe}if("@container"in de){const Fe=_(de["@container"])?[de["@container"]]:de["@container"]||[],Pe=["@list","@set","@index","@language"];let Ge=!0;const ge=Fe.includes("@set");if(ie.processingMode(x,1.1)){if(Pe.push("@graph","@id","@type"),Fe.includes("@list")){if(1!==Fe.length)throw new O("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else if(Fe.includes("@graph")){if(Fe.some(Ae=>"@graph"!==Ae&&"@id"!==Ae&&"@index"!==Ae&&"@set"!==Ae))throw new O("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else Ge&=Fe.length<=(ge?2:1);if(Fe.includes("@type")&&(Te["@type"]=Te["@type"]||"@id",!["@id","@vocab"].includes(Te["@type"])))throw new O("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else Ge&=!C(de["@container"]),Ge&=Fe.length<=1;if(Ge&=Fe.every(Ae=>Pe.includes(Ae)),Ge&=!(ge&&Fe.includes("@list")),!Ge)throw new O("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Pe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:B});if(Te.reverse&&!Fe.every(Ae=>["@index","@set"].includes(Ae)))throw new O("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});Te["@container"]=Fe}if("@index"in de){if(!("@container"in de)||!Te["@container"].includes("@index"))throw new O(`Invalid JSON-LD syntax; @index without @index in @container: "${de["@index"]}" on term "${k}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});if(!_(de["@index"])||0===de["@index"].indexOf("@"))throw new O(`Invalid JSON-LD syntax; @index must expand to an IRI: "${de["@index"]}" on term "${k}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});Te["@index"]=de["@index"]}if("@context"in de&&(Te["@context"]=de["@context"]),"@language"in de&&!("@type"in de)){let Fe=de["@language"];if(null!==Fe&&!_(Fe))throw new O("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:B});null!==Fe&&(Fe=Fe.toLowerCase()),Te["@language"]=Fe}if("@prefix"in de){if(k.match(/:|\//))throw new O("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:B});if(ie.isKeyword(Te["@id"]))throw new O("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:B});if("boolean"!=typeof de["@prefix"])throw new O("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:B});Te._prefix=!0===de["@prefix"]}if("@direction"in de){const Fe=de["@direction"];if(null!==Fe&&"ltr"!==Fe&&"rtl"!==Fe)throw new O('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:B});Te["@direction"]=Fe}if("@nest"in de){const Fe=de["@nest"];if(!_(Fe)||"@nest"!==Fe&&0===Fe.indexOf("@"))throw new O("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:B});Te["@nest"]=Fe}const Ee=Te["@id"];if("@context"===Ee||"@preserve"===Ee)throw new O("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:B});if(xe&&xe.protected&&!Me&&(x.protected[k]=!0,Te.protected=!0,!V(xe,Te)))throw new O("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:B,term:k})},ie.expandIri=(x,B,k,he)=>J(x,B,k,void 0,void 0,he),ie.getInitialContext=x=>{const B=JSON.stringify({processingMode:x.processingMode}),k=K.get(B);if(k)return k;const he={processingMode:x.processingMode,mappings:new Map,inverse:null,getInverse:function W(){const Te=this;if(Te.inverse)return Te.inverse;const Je=Te.inverse={},Ke=Te.fastCurieMap={},Ee={},Fe=(Te["@language"]||"@none").toLowerCase(),Pe=Te["@direction"],Ge=Te.mappings,ge=[...Ge.keys()].sort(le);for(const Ae of ge){const qe=Ge.get(Ae);if(null===qe)continue;let ct=qe["@container"]||"@none";if(ct=[].concat(ct).sort().join(""),null===qe["@id"])continue;const Ye=X(qe["@id"]);for(const ye of Ye){let G=Je[ye];const R=ie.isKeyword(ye);if(G)!R&&!qe._termHasColon&&Ee[ye].push(Ae);else if(Je[ye]=G={},!R&&!qe._termHasColon){Ee[ye]=[Ae];const ae={iri:ye,terms:Ee[ye]};ye[0]in Ke?Ke[ye[0]].push(ae):Ke[ye[0]]=[ae]}if(G[ct]||(G[ct]={"@language":{},"@type":{},"@any":{}}),G=G[ct],de(Ae,G["@any"],"@none"),qe.reverse)de(Ae,G["@type"],"@reverse");else if("@none"===qe["@type"])de(Ae,G["@any"],"@none"),de(Ae,G["@language"],"@none"),de(Ae,G["@type"],"@none");else if("@type"in qe)de(Ae,G["@type"],qe["@type"]);else if("@language"in qe&&"@direction"in qe){const ae=qe["@language"],U=qe["@direction"];de(Ae,G["@language"],ae&&U?`${ae}_${U}`.toLowerCase():ae?ae.toLowerCase():U?`_${U}`:"@null")}else"@language"in qe?de(Ae,G["@language"],(qe["@language"]||"@null").toLowerCase()):"@direction"in qe?de(Ae,G["@language"],qe["@direction"]?`_${qe["@direction"]}`:"@none"):Pe?(de(Ae,G["@language"],`_${Pe}`),de(Ae,G["@language"],"@none"),de(Ae,G["@type"],"@none")):(de(Ae,G["@language"],Fe),de(Ae,G["@language"],"@none"),de(Ae,G["@type"],"@none"))}}for(const Ae in Ke)Me(Ke,Ae,1);return Je},clone:function xe(){const Te={};return Te.mappings=b.clone(this.mappings),Te.clone=this.clone,Te.inverse=null,Te.getInverse=this.getInverse,Te.protected=b.clone(this.protected),this.previousContext&&(Te.previousContext=this.previousContext.clone()),Te.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Te["@base"]=this["@base"]),"@language"in this&&(Te["@language"]=this["@language"]),"@vocab"in this&&(Te["@vocab"]=this["@vocab"]),Te},revertToPreviousContext:function Oe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===K.size&&K.clear(),K.set(B,he),he;function Me(Te,Je,Ke){const Ee=Te[Je],Fe=Te[Je]={};let Pe,Ge;for(const ge of Ee)Pe=ge.iri,Ge=Ke>=Pe.length?"":Pe[Ke],Ge in Fe?Fe[Ge].push(ge):Fe[Ge]=[ge];for(const ge in Fe)""!==ge&&Me(Fe,ge,Ke+1)}function de(Te,Je,Ke){Je.hasOwnProperty(Ke)||(Je[Ke]=Te)}},ie.getContextValue=(x,B,k)=>{if(null===B)return"@context"===k?void 0:null;if(x.mappings.has(B)){const he=x.mappings.get(B);if(v(k))return he;if(he.hasOwnProperty(k))return he[k]}return"@language"===k&&k in x||"@direction"===k&&k in x?x[k]:"@context"!==k?null:void 0},ie.processingMode=(x,B)=>B.toString()>="1.1"?!x.processingMode||x.processingMode>="json-ld-"+B.toString():"json-ld-1.0"===x.processingMode,ie.isKeyword=x=>{if(!_(x)||"@"!==x[0])return!1;switch(x){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},627:(ne,Z,g)=>{"use strict";var S=g(7156).default;const{parseLinkHeader:b,buildHeaders:O}=g(3521),{LINK_HEADER_CONTEXT:C}=g(6982),N=g(1874),_=g(4044),{prependBase:v}=g(2651),D=/(^|(\r\n))link:/i;ne.exports=({secure:P,headers:j={},xhr:se}={headers:{}})=>{return j=O(j),(new _).wrapLoader(X);function X(K){return le.apply(this,arguments)}function le(){return le=S(function*(K){if(0!==K.indexOf("http:")&&0!==K.indexOf("https:"))throw new N('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:K});if(P&&0!==K.indexOf("https"))throw new N('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:K});let re;try{re=yield function L(P,j,se){const T=new(P=P||XMLHttpRequest);return new Promise((X,le)=>{T.onload=()=>X(T),T.onerror=K=>le(K),T.open("GET",j,!0);for(const K in se)T.setRequestHeader(K,se[K]);T.send()})}(se,K,j)}catch(B){throw new N("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:K,cause:B})}if(re.status>=400)throw new N("URL could not be dereferenced: "+re.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:K,httpStatusCode:re.status});let ie={contextUrl:null,documentUrl:K,document:re.response},J=null;const V=re.getResponseHeader("Content-Type");let x;if(D.test(re.getAllResponseHeaders())&&(x=re.getResponseHeader("Link")),x&&"application/ld+json"!==V){const B=b(x),k=B[C];if(Array.isArray(k))throw new N("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:K});k&&(ie.contextUrl=k.target),J=B.alternate,J&&"application/ld+json"==J.type&&!(V||"").match(/^application\/(\w*\+)?json$/)&&(ie=yield X(v(K,J.target)))}return ie}),le.apply(this,arguments)}}},3855:(ne,Z,g)=>{"use strict";const S=g(1874),{isArray:b}=g(8254),{asArray:O}=g(3521),C={};function N({event:v,handlers:D}){let L=!0;for(let P=0;L&&P<D.length;++P){L=!1;const j=D[P];if(b(j))L=N({event:v,handlers:j});else if("function"==typeof j)j({event:v,next:()=>{L=!0}});else{if("object"!=typeof j)throw new S("Invalid event handler.","jsonld.InvalidEventHandler",{event:v});v.code in j?j[v.code]({event:v,next:()=>{L=!0}}):L=!0}}return L}ne.exports=C,C.defaultEventHandler=null,C.setupEventHandler=({options:v={}})=>{const D=[].concat(v.safe?C.safeEventHandler:[],v.eventHandler?O(v.eventHandler):[],C.defaultEventHandler?C.defaultEventHandler:[]);return 0===D.length?null:D},C.handleEvent=({event:v,options:D})=>{N({event:v,handlers:D.eventHandler})};const _=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);C.safeEventHandler=function({event:D,next:L}){if("warning"===D.level&&_.has(D.code))throw new S("Safe mode validation error.","jsonld.ValidationError",{event:D});L()},C.logEventHandler=function({event:D,next:L}){console.log(`EVENT: ${D.message}`,{event:D}),L()},C.logWarningEventHandler=function({event:D,next:L}){"warning"===D.level&&console.warn(`WARNING: ${D.message}`,{event:D}),L()},C.unhandledEventHandler=function({event:D}){throw new S("No handler for event.","jsonld.UnhandledEvent",{event:D})},C.setDefaultEventHandler=function({eventHandler:v}={}){C.defaultEventHandler=v?O(v):null}},3860:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(1874),{isArray:O,isObject:C,isEmptyObject:N,isString:_,isUndefined:v}=g(8254),{isList:D,isValue:L,isGraph:P,isSubject:j}=g(543),{expandIri:se,getContextValue:T,isKeyword:X,process:le,processingMode:K}=g(9611),{isAbsolute:re}=g(2651),{REGEX_BCP47:ie,REGEX_KEYWORD:J,addValue:V,asArray:x,getValues:B,validateTypeValue:k}=g(3521),{handleEvent:he}=g(3855),W={};function Me({value:Ee,count:Fe,options:Pe}){if(0===Fe||"@value"in Ee||"@list"in Ee||1===Fe&&"@id"in Ee){if(Pe.eventHandler){let Ge,ge;0===Fe?(Ge="empty object",ge="Dropping empty object."):"@value"in Ee?(Ge="object with only @value",ge="Dropping object with only @value."):"@list"in Ee?(Ge="object with only @list",ge="Dropping object with only @list."):1===Fe&&"@id"in Ee&&(Ge="object with only @id",ge="Dropping object with only @id."),he({event:{type:["JsonLdEvent"],code:Ge,level:"warning",message:ge,details:{value:Ee}},options:Pe})}return null}return Ee}function de(Ee){return xe.apply(this,arguments)}function xe(){return(xe=S(function*({activeCtx:Ee,activeProperty:Fe,expandedActiveProperty:Pe,element:Ge,expandedParent:ge,options:Ae={},insideList:qe,typeKey:ct,typeScopedContext:Ye}){const ye=Object.keys(Ge).sort(),G=[];let R;const ae=Ge[ct]&&"@json"===se(Ee,O(Ge[ct])?Ge[ct][0]:Ge[ct],{vocab:!0},{...Ae,typeExpansion:!0});for(const U of ye){let tt,Le=Ge[U];if("@context"===U)continue;const fe=se(Ee,U,{vocab:!0},Ae);if(null===fe||!re(fe)&&!X(fe)){Ae.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:U,expandedProperty:fe}},options:Ae});continue}if(X(fe)){if("@reverse"===Pe)throw new b("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Le});if(fe in ge&&"@included"!==fe&&"@type"!==fe)throw new b("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:fe})}if("@id"===fe){if(!_(Le)){if(!Ae.isFrame)throw new b('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Le});if(C(Le)){if(!N(Le))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le})}else{if(!O(Le))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le});if(!Le.every(F=>_(F)))throw new b('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Le})}}V(ge,"@id",x(Le).map(F=>{if(_(F)){const ue=se(Ee,F,{base:!0},Ae);return Ae.eventHandler&&(null===ue?he(null===F?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:F}},options:Ae}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:F}},options:Ae}):re(ue)||he({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:F,expandedId:ue}},options:Ae})),ue}return F}),{propertyIsArray:Ae.isFrame});continue}if("@type"===fe){C(Le)&&(Le=Object.fromEntries(Object.entries(Le).map(([F,ue])=>[se(Ye,F,{vocab:!0}),x(ue).map(me=>se(Ye,me,{base:!0,vocab:!0},{...Ae,typeExpansion:!0}))]))),k(Le,Ae.isFrame),V(ge,"@type",x(Le).map(F=>{if(_(F)){const ue=se(Ye,F,{base:!0,vocab:!0},{...Ae,typeExpansion:!0});return"@json"!==ue&&!re(ue)&&Ae.eventHandler&&he({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:F}},options:Ae}),ue}return F}),{propertyIsArray:!!Ae.isFrame});continue}if("@included"===fe&&K(Ee,1.1)){const F=x(yield W.expand({activeCtx:Ee,activeProperty:Fe,element:Le,options:Ae}));if(!F.every(ue=>j(ue)))throw new b("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Le});V(ge,"@included",F,{propertyIsArray:!0});continue}if("@graph"===fe&&!C(Le)&&!O(Le))throw new b('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Le});if("@value"===fe){R=Le,ae&&K(Ee,1.1)?ge["@value"]=Le:V(ge,"@value",Le,{propertyIsArray:Ae.isFrame});continue}if("@language"===fe){if(null===Le)continue;if(!_(Le)&&!Ae.isFrame)throw new b('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Le});Le=x(Le).map(F=>_(F)?F.toLowerCase():F);for(const F of Le)_(F)&&!F.match(ie)&&Ae.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:F}},options:Ae});V(ge,"@language",Le,{propertyIsArray:Ae.isFrame});continue}if("@direction"===fe){if(!_(Le)&&!Ae.isFrame)throw new b('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Le});Le=x(Le);for(const F of Le)if(_(F)&&"ltr"!==F&&"rtl"!==F)throw new b('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Le});V(ge,"@direction",Le,{propertyIsArray:Ae.isFrame});continue}if("@index"===fe){if(!_(Le))throw new b('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Le});V(ge,"@index",Le);continue}if("@reverse"===fe){if(!C(Le))throw new b('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Le});if(tt=yield W.expand({activeCtx:Ee,activeProperty:"@reverse",element:Le,options:Ae}),"@reverse"in tt)for(const ue in tt["@reverse"])V(ge,ue,tt["@reverse"][ue],{propertyIsArray:!0});let F=ge["@reverse"]||null;for(const ue in tt){if("@reverse"===ue)continue;null===F&&(F=ge["@reverse"]={}),V(F,ue,[],{propertyIsArray:!0});const me=tt[ue];for(let We=0;We<me.length;++We){const He=me[We];if(L(He)||D(He))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:tt});V(F,ue,He,{propertyIsArray:!0})}}continue}if("@nest"===fe){G.push(U);continue}let ee=Ee;const q=T(Ee,U,"@context");v(q)||(ee=yield le({activeCtx:Ee,localCtx:q,propagate:!0,overrideProtected:!0,options:Ae}));const A=T(ee,U,"@container")||[];if(A.includes("@language")&&C(Le))tt=Te(ee,Le,T(ee,U,"@direction"),Ae);else if(A.includes("@index")&&C(Le)){const F=A.includes("@graph"),ue=T(ee,U,"@index")||"@index",me="@index"!==ue&&se(Ee,ue,{vocab:!0},Ae);tt=yield Je({activeCtx:ee,options:Ae,activeProperty:U,value:Le,asGraph:F,indexKey:ue,propertyIndex:me})}else if(A.includes("@id")&&C(Le)){const F=A.includes("@graph");tt=yield Je({activeCtx:ee,options:Ae,activeProperty:U,value:Le,asGraph:F,indexKey:"@id"})}else if(A.includes("@type")&&C(Le))tt=yield Je({activeCtx:ee.revertToPreviousContext(),options:Ae,activeProperty:U,value:Le,asGraph:!1,indexKey:"@type"});else{const F="@list"===fe;if(F||"@set"===fe){let ue=Fe;F&&"@graph"===Pe&&(ue=null),tt=yield W.expand({activeCtx:ee,activeProperty:ue,element:Le,options:Ae,insideList:F})}else tt="@json"===T(Ee,U,"@type")?{"@type":"@json","@value":Le}:yield W.expand({activeCtx:ee,activeProperty:U,element:Le,options:Ae,insideList:!1})}if(null!==tt||"@value"===fe){if("@list"!==fe&&!D(tt)&&A.includes("@list")&&(tt={"@list":x(tt)}),A.includes("@graph")&&!A.some(F=>"@id"===F||"@index"===F)){if(tt=x(tt),Ae.isFrame||(tt=tt.filter(F=>null!==Me({value:F,count:Object.keys(F).length,options:Ae}))),0===tt.length)continue;tt=tt.map(F=>({"@graph":x(F)}))}if(ee.mappings.has(U)&&ee.mappings.get(U).reverse){const F=ge["@reverse"]=ge["@reverse"]||{};tt=x(tt);for(let ue=0;ue<tt.length;++ue){const me=tt[ue];if(L(me)||D(me))throw new b('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:tt});V(F,fe,me,{propertyIsArray:!0})}continue}V(ge,fe,tt,{propertyIsArray:!0})}}if("@value"in ge&&("@json"!==ge["@type"]||!K(Ee,1.1))&&(C(R)||O(R))&&!Ae.isFrame)throw new b('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:R});for(const U of G){const Le=O(Ge[U])?Ge[U]:[Ge[U]];for(const tt of Le){if(!C(tt)||Object.keys(tt).some(fe=>"@value"===se(Ee,fe,{vocab:!0},Ae)))throw new b("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:tt});yield de({activeCtx:Ee,activeProperty:Fe,expandedActiveProperty:Pe,element:tt,expandedParent:ge,options:Ae,insideList:qe,typeScopedContext:Ye,typeKey:ct})}}})).apply(this,arguments)}function Oe({activeCtx:Ee,activeProperty:Fe,value:Pe,options:Ge}){if(null==Pe)return null;const ge=se(Ee,Fe,{vocab:!0},Ge);if("@id"===ge)return se(Ee,Pe,{base:!0},Ge);if("@type"===ge)return se(Ee,Pe,{vocab:!0,base:!0},{...Ge,typeExpansion:!0});const Ae=T(Ee,Fe,"@type");if(("@id"===Ae||"@graph"===ge)&&_(Pe)){const ct=se(Ee,Pe,{base:!0},Ge);return null===ct&&Pe.match(J)&&Ge.eventHandler&&he({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Fe}},options:Ge}),{"@id":ct}}if("@vocab"===Ae&&_(Pe))return{"@id":se(Ee,Pe,{vocab:!0,base:!0},Ge)};if(X(ge))return Pe;const qe={};if(Ae&&!["@id","@vocab","@none"].includes(Ae))qe["@type"]=Ae;else if(_(Pe)){const ct=T(Ee,Fe,"@language");null!==ct&&(qe["@language"]=ct);const Ye=T(Ee,Fe,"@direction");null!==Ye&&(qe["@direction"]=Ye)}return["boolean","number","string"].includes(typeof Pe)||(Pe=Pe.toString()),qe["@value"]=Pe,qe}function Te(Ee,Fe,Pe,Ge){const ge=[],Ae=Object.keys(Fe).sort();for(const qe of Ae){const ct=se(Ee,qe,{vocab:!0},Ge);let Ye=Fe[qe];O(Ye)||(Ye=[Ye]);for(const ye of Ye){if(null===ye)continue;if(!_(ye))throw new b("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Fe});const G={"@value":ye};"@none"!==ct&&(qe.match(ie)||Ge.eventHandler&&he({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:qe}},options:Ge}),G["@language"]=qe.toLowerCase()),Pe&&(G["@direction"]=Pe),ge.push(G)}}return ge}function Je(Ee){return Ke.apply(this,arguments)}function Ke(){return(Ke=S(function*({activeCtx:Ee,options:Fe,activeProperty:Pe,value:Ge,asGraph:ge,indexKey:Ae,propertyIndex:qe}){const ct=[],Ye=Object.keys(Ge).sort(),ye="@type"===Ae;for(let G of Ye){if(ye){const U=T(Ee,G,"@context");v(U)||(Ee=yield le({activeCtx:Ee,localCtx:U,propagate:!1,options:Fe}))}let ae,R=Ge[G];O(R)||(R=[R]),R=yield W.expand({activeCtx:Ee,activeProperty:Pe,element:R,options:Fe,insideList:!1,insideIndex:!0}),ae=qe?"@none"===G?"@none":Oe({activeCtx:Ee,activeProperty:Ae,value:G,options:Fe}):se(Ee,G,{vocab:!0},Fe),"@id"===Ae?G=se(Ee,G,{base:!0},Fe):ye&&(G=ae);for(let U of R){if(ge&&!P(U)&&(U={"@graph":[U]}),"@type"===Ae)"@none"===ae||(U["@type"]=U["@type"]?[G].concat(U["@type"]):[G]);else{if(L(U)&&!["@language","@type","@index"].includes(Ae))throw new b(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Ae}".`,"jsonld.SyntaxError",{code:"invalid value object",value:U});qe?"@none"!==ae&&V(U,qe,ae,{propertyIsArray:!0,prependValue:!0}):"@none"!==ae&&!(Ae in U)&&(U[Ae]=G)}ct.push(U)}}return ct})).apply(this,arguments)}ne.exports=W,W.expand=function(){var Ee=S(function*({activeCtx:Fe,activeProperty:Pe=null,element:Ge,options:ge={},insideList:Ae=!1,insideIndex:qe=!1,typeScopedContext:ct=null}){if(null==Ge)return null;if("@default"===Pe&&(ge=Object.assign({},ge,{isFrame:!1})),!O(Ge)&&!C(Ge))return Ae||null!==Pe&&"@graph"!==se(Fe,Pe,{vocab:!0},ge)?Oe({activeCtx:Fe,activeProperty:Pe,value:Ge,options:ge}):(ge.eventHandler&&he({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Ge}},options:ge}),null);if(O(Ge)){let tt=[];const fe=T(Fe,Pe,"@container")||[];Ae=Ae||fe.includes("@list");for(let ee=0;ee<Ge.length;++ee){let q=yield W.expand({activeCtx:Fe,activeProperty:Pe,element:Ge[ee],options:ge,insideIndex:qe,typeScopedContext:ct});Ae&&O(q)&&(q={"@list":q}),null!==q&&(O(q)?tt=tt.concat(q):tt.push(q))}return tt}const Ye=se(Fe,Pe,{vocab:!0},ge),ye=T(Fe,Pe,"@context");ct=ct||(Fe.previousContext?Fe:null);let G=Object.keys(Ge).sort(),R=!qe;if(R&&ct&&G.length<=2&&!G.includes("@context"))for(const tt of G){const fe=se(ct,tt,{vocab:!0},ge);if("@value"===fe){R=!1,Fe=ct;break}if("@id"===fe&&1===G.length){R=!1;break}}R&&(Fe=Fe.revertToPreviousContext()),v(ye)||(Fe=yield le({activeCtx:Fe,localCtx:ye,propagate:!0,overrideProtected:!0,options:ge})),"@context"in Ge&&(Fe=yield le({activeCtx:Fe,localCtx:Ge["@context"],options:ge})),ct=Fe;let ae=null;for(const tt of G)if("@type"===se(Fe,tt,{vocab:!0},ge)){ae=ae||tt;const ee=Ge[tt],q=Array.isArray(ee)?ee.length>1?ee.slice().sort():ee:[ee];for(const A of q){const F=T(ct,A,"@context");v(F)||(Fe=yield le({activeCtx:Fe,localCtx:F,options:ge,propagate:!1}))}}let U={};yield de({activeCtx:Fe,activeProperty:Pe,expandedActiveProperty:Ye,element:Ge,expandedParent:U,options:ge,insideList:Ae,typeKey:ae,typeScopedContext:ct}),G=Object.keys(U);let Le=G.length;if("@value"in U){if("@type"in U&&("@language"in U||"@direction"in U))throw new b('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:U});let tt=Le-1;if("@type"in U&&(tt-=1),"@index"in U&&(tt-=1),"@language"in U&&(tt-=1),"@direction"in U&&(tt-=1),0!==tt)throw new b('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:U});const fe=null===U["@value"]?[]:x(U["@value"]),ee=B(U,"@type");if(!K(Fe,1.1)||!ee.includes("@json")||1!==ee.length)if(0===fe.length)ge.eventHandler&&he({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:U}},options:ge}),U=null;else{if(!fe.every(q=>_(q)||N(q))&&"@language"in U)throw new b("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:U});if(!ee.every(q=>re(q)&&!(_(q)&&0===q.indexOf("_:"))||N(q)))throw new b('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:U})}}else if("@type"in U&&!O(U["@type"]))U["@type"]=[U["@type"]];else if("@set"in U||"@list"in U){if(Le>1&&(2!==Le||!("@index"in U)))throw new b('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:U});"@set"in U&&(U=U["@set"],G=Object.keys(U),Le=G.length)}else 1===Le&&"@language"in U&&(ge.eventHandler&&he({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:U}},options:ge}),U=null);return C(U)&&!ge.keepFreeFloatingNodes&&!Ae&&(null===Pe||"@graph"===Ye||(T(Fe,Pe,"@container")||[]).includes("@graph"))&&(U=Me({value:U,count:Le,options:ge})),U});return function(Fe){return Ee.apply(this,arguments)}}()},8295:(ne,Z,g)=>{"use strict";const{isSubjectReference:S}=g(543),{createMergedNodeMap:b}=g(9783),O={};ne.exports=O,O.flatten=C=>{const N=b(C),_=[],v=Object.keys(N).sort();for(let D=0;D<v.length;++D){const L=N[v[D]];S(L)||_.push(L)}return _}},9193:(ne,Z,g)=>{"use strict";const{isKeyword:S}=g(9611),b=g(543),O=g(8254),C=g(3521),N=g(2651),_=g(1874),{createNodeMap:v,mergeNodeMapGraphs:D}=g(9783),L={};function P(x){const B={};for(const k in x)void 0!==x[k]&&(B["@"+k]=[x[k]]);return[B]}function j(x,B,k){for(let he=k.length-1;he>=0;--he){const W=k[he];if(W.graph===B&&W.subject["@id"]===x["@id"])return!0}return!1}function se(x,B,k){const he="@"+k;let W=he in x?x[he][0]:B[k];if("embed"===k)if(!0===W)W="@once";else if(!1===W)W="@never";else if("@always"!==W&&"@never"!==W&&"@link"!==W&&"@first"!==W&&"@last"!==W&&"@once"!==W)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:x});return W}function T(x){if(!O.isArray(x)||1!==x.length||!O.isObject(x[0]))throw new _("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:x});if("@id"in x[0])for(const B of C.asArray(x[0]["@id"]))if(!O.isObject(B)&&!N.isAbsolute(B)||O.isString(B)&&0===B.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x});if("@type"in x[0])for(const B of C.asArray(x[0]["@type"]))if(!O.isObject(B)&&!N.isAbsolute(B)&&"@json"!==B||O.isString(B)&&0===B.indexOf("_:"))throw new _("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:x})}function le(x,B,k,he){let W=!0,Me=!1;for(const de in k){let xe=!1;const Oe=C.getValues(B,de),Te=0===C.getValues(k,de).length;if("@id"===de){if(O.isEmptyObject(k["@id"][0]||{})?xe=!0:k["@id"].length>=0&&(xe=k["@id"].includes(Oe[0])),!he.requireAll)return xe}else if("@type"===de){if(W=!1,Te){if(Oe.length>0)return!1;xe=!0}else if(1===k["@type"].length&&O.isEmptyObject(k["@type"][0]))xe=Oe.length>0;else for(const Je of k["@type"])xe=!(!O.isObject(Je)||!("@default"in Je))||xe||Oe.some(Ke=>Ke===Je);if(!he.requireAll)return xe}else{if(S(de))continue;{const Je=C.getValues(k,de)[0];let Ke=!1;if(Je&&(T([Je]),Ke="@default"in Je),W=!1,0===Oe.length&&Ke)continue;if(Oe.length>0&&Te)return!1;if(void 0===Je){if(Oe.length>0)return!1;xe=!0}else if(b.isList(Je)){const Ee=Je["@list"][0];if(b.isList(Oe[0])){const Fe=Oe[0]["@list"];b.isValue(Ee)?xe=Fe.some(Pe=>V(Ee,Pe)):(b.isSubject(Ee)||b.isSubjectReference(Ee))&&(xe=Fe.some(Pe=>J(x,Ee,Pe,he)))}}else xe=b.isValue(Je)?Oe.some(Ee=>V(Je,Ee)):b.isSubjectReference(Je)?Oe.some(Ee=>J(x,Je,Ee,he)):!!O.isObject(Je)&&Oe.length>0}}if(!xe&&he.requireAll)return!1;Me=Me||xe}return W||Me}function K(x,B){const k=x.uniqueEmbeds[x.graph],he=k[B],W=he.parent,Me=he.property,de={"@id":B};if(O.isArray(W)){for(let Oe=0;Oe<W.length;++Oe)if(C.compareValues(W[Oe],de)){W[Oe]=de;break}}else{const Oe=O.isArray(W[Me]);C.removeValue(W,Me,de,{propertyIsArray:Oe}),C.addValue(W,Me,de,{propertyIsArray:Oe})}const xe=Oe=>{const Te=Object.keys(k);for(const Je of Te)Je in k&&O.isObject(k[Je].parent)&&k[Je].parent["@id"]===Oe&&(delete k[Je],xe(Je))};xe(B)}function re(x,B){if(O.isArray(x))return x.map(k=>re(k,B));if(O.isObject(x)){if("@preserve"in x)return x["@preserve"][0];if(b.isValue(x))return x;if(b.isList(x))return x["@list"]=re(x["@list"],B),x;if("@id"in x){const k=x["@id"];if(B.link.hasOwnProperty(k)){const he=B.link[k].indexOf(x);if(-1!==he)return B.link[k][he];B.link[k].push(x)}else B.link[k]=[x]}for(const k in x)"@id"===k&&B.bnodesToClear.includes(x[k])?delete x["@id"]:x[k]=re(x[k],B)}return x}function ie(x,B,k){O.isObject(x)?C.addValue(x,B,k,{propertyIsArray:!0}):x.push(k)}function J(x,B,k,he){if(!("@id"in k))return!1;const W=x.subjects[k["@id"]];return W&&le(x,W,B,he)}function V(x,B){const k=B["@value"],he=B["@type"],W=B["@language"],Me=x["@value"]?O.isArray(x["@value"])?x["@value"]:[x["@value"]]:[],de=x["@type"]?O.isArray(x["@type"])?x["@type"]:[x["@type"]]:[],xe=x["@language"]?O.isArray(x["@language"])?x["@language"]:[x["@language"]]:[];return 0===Me.length&&0===de.length&&0===xe.length||!(!Me.includes(k)&&!O.isEmptyObject(Me[0])||!(!he&&0===de.length||de.includes(he)||he&&O.isEmptyObject(de[0]))||!(!W&&0===xe.length||xe.includes(W)||W&&O.isEmptyObject(xe[0])))}ne.exports=L,L.frameMergedOrDefault=(x,B,k)=>{const he={options:k,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},W=new C.IdentifierIssuer("_:b");v(x,he.graphMap,"@default",W),k.merged&&(he.graphMap["@merged"]=D(he.graphMap),he.graph="@merged"),he.subjects=he.graphMap[he.graph];const Me=[];return L.frame(he,Object.keys(he.subjects).sort(),B,Me),k.pruneBlankNodeIdentifiers&&(k.bnodesToClear=Object.keys(he.bnodeMap).filter(de=>1===he.bnodeMap[de].length)),k.link={},re(Me,k)},L.frame=(x,B,k,he,W=null)=>{T(k);const Me=x.options,de={embed:se(k=k[0],Me,"embed"),explicit:se(k,Me,"explicit"),requireAll:se(k,Me,"requireAll")};x.link.hasOwnProperty(x.graph)||(x.link[x.graph]={});const xe=x.link[x.graph],Oe=function X(x,B,k,he){const W={};for(const Me of B){const de=x.graphMap[x.graph][Me];le(x,de,k,he)&&(W[Me]=de)}return W}(x,B,k,de),Te=Object.keys(Oe).sort();for(const Je of Te){const Ke=Oe[Je];if(null===W?x.uniqueEmbeds={[x.graph]:{}}:x.uniqueEmbeds[x.graph]=x.uniqueEmbeds[x.graph]||{},"@link"===de.embed&&Je in xe){ie(he,W,xe[Je]);continue}const Ee={"@id":Je};if(0===Je.indexOf("_:")&&C.addValue(x.bnodeMap,Je,Ee,{propertyIsArray:!0}),xe[Je]=Ee,("@first"===de.embed||"@last"===de.embed)&&x.is11)throw new _("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:k});if(x.embedded||!x.uniqueEmbeds[x.graph].hasOwnProperty(Je)){if(x.embedded&&("@never"===de.embed||j(Ke,x.graph,x.subjectStack))){ie(he,W,Ee);continue}if(x.embedded&&("@first"==de.embed||"@once"==de.embed)&&x.uniqueEmbeds[x.graph].hasOwnProperty(Je)){ie(he,W,Ee);continue}if("@last"===de.embed&&Je in x.uniqueEmbeds[x.graph]&&K(x,Je),x.uniqueEmbeds[x.graph][Je]={parent:he,property:W},x.subjectStack.push({subject:Ke,graph:x.graph}),Je in x.graphMap){let Fe=!1,Pe=null;"@graph"in k?(Pe=k["@graph"][0],Fe=!("@merged"===Je||"@default"===Je),O.isObject(Pe)||(Pe={})):(Fe="@merged"!==x.graph,Pe={}),Fe&&L.frame({...x,graph:Je,embedded:!1},Object.keys(x.graphMap[Je]).sort(),[Pe],Ee,"@graph")}"@included"in k&&L.frame({...x,embedded:!1},B,k["@included"],Ee,"@included");for(const Fe of Object.keys(Ke).sort())if(S(Fe)){if(Ee[Fe]=C.clone(Ke[Fe]),"@type"===Fe)for(const Pe of Ke["@type"])0===Pe.indexOf("_:")&&C.addValue(x.bnodeMap,Pe,Ee,{propertyIsArray:!0})}else if(!de.explicit||Fe in k)for(const Pe of Ke[Fe]){const Ge=Fe in k?k[Fe]:P(de);if(b.isList(Pe)){const ge=k[Fe]&&k[Fe][0]&&k[Fe][0]["@list"]?k[Fe][0]["@list"]:P(de),Ae={"@list":[]};ie(Ee,Fe,Ae);const qe=Pe["@list"];for(const ct of qe)b.isSubjectReference(ct)?L.frame({...x,embedded:!0},[ct["@id"]],ge,Ae,"@list"):ie(Ae,"@list",C.clone(ct))}else b.isSubjectReference(Pe)?L.frame({...x,embedded:!0},[Pe["@id"]],Ge,Ee,Fe):V(Ge[0],Pe)&&ie(Ee,Fe,C.clone(Pe))}for(const Fe of Object.keys(k).sort()){if("@type"===Fe){if(!O.isObject(k[Fe][0])||!("@default"in k[Fe][0]))continue}else if(S(Fe))continue;const Pe=k[Fe][0]||{};if(!se(Pe,Me,"omitDefault")&&!(Fe in Ee)){let ge="@null";"@default"in Pe&&(ge=C.clone(Pe["@default"])),O.isArray(ge)||(ge=[ge]),Ee[Fe]=[{"@preserve":ge}]}}for(const Fe of Object.keys(k["@reverse"]||{}).sort()){const Pe=k["@reverse"][Fe];for(const Ge of Object.keys(x.subjects))C.getValues(x.subjects[Ge],Fe).some(Ae=>Ae["@id"]===Je)&&(Ee["@reverse"]=Ee["@reverse"]||{},C.addValue(Ee["@reverse"],Fe,[],{propertyIsArray:!0}),L.frame({...x,embedded:!0},[Ge],Pe,Ee["@reverse"][Fe],W))}ie(he,W,Ee),x.subjectStack.pop()}}},L.cleanupNull=(x,B)=>{if(O.isArray(x))return x.map(he=>L.cleanupNull(he,B)).filter(he=>he);if("@null"===x)return null;if(O.isObject(x)){if("@id"in x){const k=x["@id"];if(B.link.hasOwnProperty(k)){const he=B.link[k].indexOf(x);if(-1!==he)return B.link[k][he];B.link[k].push(x)}else B.link[k]=[x]}for(const k in x)x[k]=L.cleanupNull(x[k],B)}return x}},9767:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(1874),O=g(543),C=g(8254),{REGEX_BCP47:N,addValue:_}=g(3521),{handleEvent:v}=g(3855),{RDF_LIST:D,RDF_FIRST:L,RDF_REST:P,RDF_NIL:j,RDF_TYPE:se,RDF_JSON_LITERAL:T,XSD_BOOLEAN:X,XSD_DOUBLE:le,XSD_INTEGER:K,XSD_STRING:re}=g(6982),ie={};function J(V,x,B,k){if(V.termType.endsWith("Node"))return{"@id":V.value};const he={"@value":V.value};if(V.language)V.language.match(N)||k.eventHandler&&v({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:V.language}},options:k}),he["@language"]=V.language;else{let W=V.datatype.value;if(W||(W=re),W===T){W="@json";try{he["@value"]=JSON.parse(he["@value"])}catch(Me){throw new b("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:he["@value"],cause:Me})}}if(x){if(W===X)"true"===he["@value"]?he["@value"]=!0:"false"===he["@value"]&&(he["@value"]=!1);else if(C.isNumeric(he["@value"]))if(W===K){const Me=parseInt(he["@value"],10);Me.toFixed(0)===he["@value"]&&(he["@value"]=Me)}else W===le&&(he["@value"]=parseFloat(he["@value"]));[X,K,le,re].includes(W)||(he["@type"]=W)}else if("i18n-datatype"===B&&W.startsWith("https://www.w3.org/ns/i18n#")){const[,Me,de]=W.split(/[#_]/);Me.length>0&&(he["@language"]=Me,Me.match(N)||k.eventHandler&&v({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Me}},options:k})),he["@direction"]=de}else W!==re&&(he["@type"]=W)}return he}ne.exports=ie,ie.fromRDF=function(){var V=S(function*(x,B){const{useRdfType:k=!1,useNativeTypes:he=!1,rdfDirection:W=null}=B,Me={},de={"@default":Me},xe={};if(W){if("compound-literal"===W)throw new b("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:W});if("i18n-datatype"!==W)throw new b("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:W})}for(const Je of x){const Ke="DefaultGraph"===Je.graph.termType?"@default":Je.graph.value;Ke in de||(de[Ke]={}),"@default"!==Ke&&!(Ke in Me)&&(Me[Ke]={"@id":Ke});const Ee=de[Ke],Fe=Je.subject.value,Pe=Je.predicate.value,Ge=Je.object;Fe in Ee||(Ee[Fe]={"@id":Fe});const ge=Ee[Fe],Ae=Ge.termType.endsWith("Node");if(Ae&&!(Ge.value in Ee)&&(Ee[Ge.value]={"@id":Ge.value}),Pe===se&&!k&&Ae){_(ge,"@type",Ge.value,{propertyIsArray:!0});continue}const qe=J(Ge,he,W,B);if(_(ge,Pe,qe,{propertyIsArray:!0}),Ae)if(Ge.value===j){const ct=Ee[Ge.value];"usages"in ct||(ct.usages=[]),ct.usages.push({node:ge,property:Pe,value:qe})}else xe[Ge.value]=!(Ge.value in xe)&&{node:ge,property:Pe,value:qe}}for(const Je in de){const Ke=de[Je];if(!(j in Ke))continue;const Ee=Ke[j];if(Ee.usages){for(let Fe of Ee.usages){let Pe=Fe.node,Ge=Fe.property,ge=Fe.value;const Ae=[],qe=[];let ct=Object.keys(Pe).length;for(;Ge===P&&C.isObject(xe[Pe["@id"]])&&C.isArray(Pe[L])&&1===Pe[L].length&&C.isArray(Pe[P])&&1===Pe[P].length&&(3===ct||4===ct&&C.isArray(Pe["@type"])&&1===Pe["@type"].length&&Pe["@type"][0]===D)&&(Ae.push(Pe[L][0]),qe.push(Pe["@id"]),Fe=xe[Pe["@id"]],Pe=Fe.node,Ge=Fe.property,ge=Fe.value,ct=Object.keys(Pe).length,O.isBlankNode(Pe)););delete ge["@id"],ge["@list"]=Ae.reverse();for(const Ye of qe)delete Ke[Ye]}delete Ee.usages}}const Oe=[],Te=Object.keys(Me).sort();for(const Je of Te){const Ke=Me[Je];if(Je in de){const Ee=Ke["@graph"]=[],Fe=de[Je],Pe=Object.keys(Fe).sort();for(const Ge of Pe){const ge=Fe[Ge];O.isSubjectReference(ge)||Ee.push(ge)}}O.isSubjectReference(Ke)||Oe.push(Ke)}return Oe});return function(x,B){return V.apply(this,arguments)}}()},543:(ne,Z,g)=>{"use strict";const S=g(8254),b={};ne.exports=b,b.isSubject=O=>!(!S.isObject(O)||"@value"in O||"@set"in O||"@list"in O)&&(Object.keys(O).length>1||!("@id"in O)),b.isSubjectReference=O=>S.isObject(O)&&1===Object.keys(O).length&&"@id"in O,b.isValue=O=>S.isObject(O)&&"@value"in O,b.isList=O=>S.isObject(O)&&"@list"in O,b.isGraph=O=>S.isObject(O)&&"@graph"in O&&1===Object.keys(O).filter(C=>"@id"!==C&&"@index"!==C).length,b.isSimpleGraph=O=>b.isGraph(O)&&!("@id"in O),b.isBlankNode=O=>{if(S.isObject(O)){if("@id"in O){const C=O["@id"];return!S.isString(C)||0===C.indexOf("_:")}return 0===Object.keys(O).length||!("@value"in O||"@set"in O||"@list"in O)}return!1}},7661:(ne,Z,g)=>{var S=g(7156).default;const b=g(1986),O=g(8924),C=g(3521),N=g(4198),_=C.IdentifierIssuer,v=g(1874),D=g(1072),L=g(7260),{expand:P}=g(3860),{flatten:j}=g(8295),{fromRDF:se}=g(9767),{toRDF:T}=g(240),{frameMergedOrDefault:X,cleanupNull:le}=g(9193),{isArray:K,isObject:re,isString:ie}=g(8254),{isSubjectReference:J}=g(543),{expandIri:V,getInitialContext:x,process:B,processingMode:k}=g(9611),{compact:he,compactIri:W}=g(8809),{createNodeMap:Me,createMergedNodeMap:de,mergeNodeMaps:xe}=g(9783),{logEventHandler:Oe,logWarningEventHandler:Te,safeEventHandler:Je,setDefaultEventHandler:Ke,setupEventHandler:Ee,strictEventHandler:Fe,unhandledEventHandler:Pe}=g(3855),Ge=function(Ae){const qe={},Ye=new D({max:100});function ye(G,{documentLoader:R=Ae.documentLoader,...ae}){if(G&&"compactionMap"in G)throw new v('"compactionMap" not supported.',"jsonld.OptionsError");if(G&&"expansionMap"in G)throw new v('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:R},ae,G,{eventHandler:Ee({options:G})})}return Ae.compact=function(){var G=S(function*(R,ae,U){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===ae)throw new v("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===R)return null;let Le;(U=ye(U,{base:ie(R)?R:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new _("_:b"),contextResolver:new N({sharedCache:Ye})})).link&&(U.skipExpansion=!0),U.compactToRelative||delete U.base,Le=U.skipExpansion?R:yield Ae.expand(R,U);const tt=yield Ae.processContext(x(U),ae,U);let fe=yield he({activeCtx:tt,element:Le,options:U});U.compactArrays&&!U.graph&&K(fe)?1===fe.length?fe=fe[0]:0===fe.length&&(fe={}):U.graph&&re(fe)&&(fe=[fe]),re(ae)&&"@context"in ae&&(ae=ae["@context"]),ae=C.clone(ae),K(ae)||(ae=[ae]);const ee=ae;ae=[];for(let A=0;A<ee.length;++A)(!re(ee[A])||Object.keys(ee[A]).length>0)&&ae.push(ee[A]);const q=ae.length>0;if(1===ae.length&&(ae=ae[0]),K(fe)){const A=W({activeCtx:tt,iri:"@graph",relativeTo:{vocab:!0}}),F=fe;fe={},q&&(fe["@context"]=ae),fe[A]=F}else if(re(fe)&&q){const A=fe;fe={"@context":ae};for(const F in A)fe[F]=A[F]}return fe});return function(R,ae,U){return G.apply(this,arguments)}}(),Ae.expand=function(){var G=S(function*(R,ae){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const U={},Le=[];if("expandContext"in(ae=ye(ae,{keepFreeFloatingNodes:!1,contextResolver:new N({sharedCache:Ye})}))){const q=C.clone(ae.expandContext);U.expandContext=re(q)&&"@context"in q?q:{"@context":q},Le.push(U.expandContext)}let tt;if(ie(R)){const q=yield Ae.get(R,ae);tt=q.documentUrl,U.input=q.document,q.contextUrl&&(U.remoteContext={"@context":q.contextUrl},Le.push(U.remoteContext))}else U.input=C.clone(R);"base"in ae||(ae.base=tt||"");let fe=x(ae);for(const q of Le)fe=yield B({activeCtx:fe,localCtx:q,options:ae});let ee=yield P({activeCtx:fe,element:U.input,options:ae});return re(ee)&&"@graph"in ee&&1===Object.keys(ee).length?ee=ee["@graph"]:null===ee&&(ee=[]),K(ee)||(ee=[ee]),ee});return function(R,ae){return G.apply(this,arguments)}}(),Ae.flatten=function(){var G=S(function*(R,ae,U){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");ae="function"==typeof ae?null:ae||null,U=ye(U,{base:ie(R)?R:"",contextResolver:new N({sharedCache:Ye})});const Le=yield Ae.expand(R,U),tt=j(Le);return null===ae?tt:(U.graph=!0,U.skipExpansion=!0,yield Ae.compact(tt,ae,U))});return function(R,ae,U){return G.apply(this,arguments)}}(),Ae.frame=function(){var G=S(function*(R,ae,U){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(U=ye(U,{base:ie(R)?R:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new N({sharedCache:Ye})}),ie(ae)){const me=yield Ae.get(ae,U);if(ae=me.document,me.contextUrl){let We=ae["@context"];We?K(We)?We.push(me.contextUrl):We=[We,me.contextUrl]:We=me.contextUrl,ae["@context"]=We}}const Le=ae&&ae["@context"]||{},tt=yield Ae.processContext(x(U),Le,U);U.hasOwnProperty("omitGraph")||(U.omitGraph=k(tt,1.1)),U.hasOwnProperty("pruneBlankNodeIdentifiers")||(U.pruneBlankNodeIdentifiers=k(tt,1.1));const fe=yield Ae.expand(R,U),ee={...U};ee.isFrame=!0,ee.keepFreeFloatingNodes=!0;const q=yield Ae.expand(ae,ee),A=Object.keys(ae).map(me=>V(tt,me,{vocab:!0}));ee.merged=!A.includes("@graph"),ee.is11=k(tt,1.1);const F=X(fe,q,ee);ee.graph=!U.omitGraph,ee.skipExpansion=!0,ee.link={},ee.framing=!0;let ue=yield Ae.compact(F,Le,ee);return ee.link={},ue=le(ue,ee),ue});return function(R,ae,U){return G.apply(this,arguments)}}(),Ae.link=function(){var G=S(function*(R,ae,U){const Le={};return ae&&(Le["@context"]=ae),Le["@embed"]="@link",Ae.frame(R,Le,U)});return function(R,ae,U){return G.apply(this,arguments)}}(),Ae.normalize=Ae.canonize=function(){var G=S(function*(R,ae){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(ae=ye(ae,{base:ie(R)?R:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new N({sharedCache:Ye})}))){if("application/n-quads"!==ae.inputFormat&&"application/nquads"!==ae.inputFormat)throw new v("Unknown canonicalization input format.","jsonld.CanonizeError");const tt=L.parse(R);return b.canonize(tt,ae)}const U={...ae};delete U.format,U.produceGeneralizedRdf=!1;const Le=yield Ae.toRDF(R,U);return b.canonize(Le,ae)});return function(R,ae){return G.apply(this,arguments)}}(),Ae.fromRDF=function(){var G=S(function*(R,ae){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");ae=ye(ae,{format:ie(R)?"application/n-quads":void 0});const{format:U}=ae;let{rdfParser:Le}=ae;if(U){if(Le=Le||qe[U],!Le)throw new v("Unknown input format.","jsonld.UnknownFormat",{format:U})}else Le=()=>R;const tt=yield Le(R);return se(tt,ae)});return function(R,ae){return G.apply(this,arguments)}}(),Ae.toRDF=function(){var G=S(function*(R,ae){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let U;U=(ae=ye(ae,{base:ie(R)?R:"",skipExpansion:!1,contextResolver:new N({sharedCache:Ye})})).skipExpansion?R:yield Ae.expand(R,ae);const Le=T(U,ae);if(ae.format){if("application/n-quads"===ae.format||"application/nquads"===ae.format)return L.serialize(Le);throw new v("Unknown output format.","jsonld.UnknownFormat",{format:ae.format})}return Le});return function(R,ae){return G.apply(this,arguments)}}(),Ae.createNodeMap=function(){var G=S(function*(R,ae){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");ae=ye(ae,{base:ie(R)?R:"",contextResolver:new N({sharedCache:Ye})});const U=yield Ae.expand(R,ae);return de(U,ae)});return function(R,ae){return G.apply(this,arguments)}}(),Ae.merge=function(){var G=S(function*(R,ae,U){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!K(R))throw new TypeError('Could not merge, "docs" must be an array.');ae="function"==typeof ae?null:ae||null,U=ye(U,{contextResolver:new N({sharedCache:Ye})});const Le=yield Promise.all(R.map(me=>{const We={...U};return Ae.expand(me,We)}));let tt=!0;"mergeNodes"in U&&(tt=U.mergeNodes);const fe=U.issuer||new _("_:b"),ee={"@default":{}};for(let me=0;me<Le.length;++me){const We=C.relabelBlankNodes(Le[me],{issuer:new _("_:b"+me+"-")}),He=tt||0===me?ee:{"@default":{}};if(Me(We,He,"@default",fe),He!==ee)for(const gt in He){const Ft=He[gt];if(!(gt in ee)){ee[gt]=Ft;continue}const yt=ee[gt];for(const Gt in Ft)Gt in yt||(yt[Gt]=Ft[Gt])}}const q=xe(ee),A=[],F=Object.keys(q).sort();for(let me=0;me<F.length;++me){const We=q[F[me]];J(We)||A.push(We)}return null===ae?A:(U.graph=!0,U.skipExpansion=!0,yield Ae.compact(A,ae,U))});return function(R,ae,U){return G.apply(this,arguments)}}(),Object.defineProperty(Ae,"documentLoader",{get:()=>Ae._documentLoader,set:G=>Ae._documentLoader=G}),Ae.documentLoader=function(){var G=S(function*(R){throw new v("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:R})});return function(R){return G.apply(this,arguments)}}(),Ae.get=function(){var G=S(function*(R,ae){let U;U="function"==typeof ae.documentLoader?ae.documentLoader:Ae.documentLoader;const Le=yield U(R);try{if(!Le.document)throw new v("No remote document found at the given URL.","jsonld.NullRemoteDocument");ie(Le.document)&&(Le.document=JSON.parse(Le.document))}catch(tt){throw new v("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:tt,remoteDoc:Le})}return Le});return function(R,ae){return G.apply(this,arguments)}}(),Ae.processContext=function(){var G=S(function*(R,ae,U){return U=ye(U,{base:"",contextResolver:new N({sharedCache:Ye})}),null===ae?x(U):(ae=C.clone(ae),re(ae)&&"@context"in ae||(ae={"@context":ae}),B({activeCtx:R,localCtx:ae,options:U}))});return function(R,ae,U){return G.apply(this,arguments)}}(),Ae.getContextValue=g(9611).getContextValue,Ae.documentLoaders={},Ae.useDocumentLoader=function(G){if(!(G in Ae.documentLoaders))throw new v('Unknown document loader type: "'+G+'"',"jsonld.UnknownDocumentLoader",{type:G});Ae.documentLoader=Ae.documentLoaders[G].apply(Ae,Array.prototype.slice.call(arguments,1))},Ae.registerRDFParser=function(G,R){qe[G]=R},Ae.unregisterRDFParser=function(G){delete qe[G]},Ae.registerRDFParser("application/n-quads",L.parse),Ae.registerRDFParser("application/nquads",L.parse),Ae.url=g(2651),Ae.logEventHandler=Oe,Ae.logWarningEventHandler=Te,Ae.safeEventHandler=Je,Ae.setDefaultEventHandler=Ke,Ae.strictEventHandler=Fe,Ae.unhandledEventHandler=Pe,Ae.util=C,Object.assign(Ae,C),Ae.promises=Ae,Ae.RequestQueue=g(4044),Ae.JsonLdProcessor=g(1828)(Ae),O.setupGlobals(Ae),O.setupDocumentLoaders(Ae),Ae},ge=function(){return Ge(function(){return ge()})};Ge(ge),ne.exports=ge},9783:(ne,Z,g)=>{"use strict";const{isKeyword:S}=g(9611),b=g(543),O=g(8254),C=g(3521),N=g(1874),_={};ne.exports=_,_.createMergedNodeMap=(v,D)=>{const L=(D=D||{}).issuer||new C.IdentifierIssuer("_:b"),P={"@default":{}};return _.createNodeMap(v,P,"@default",L),_.mergeNodeMaps(P)},_.createNodeMap=(v,D,L,P,j,se)=>{if(O.isArray(v)){for(const K of v)_.createNodeMap(K,D,L,P,void 0,se);return}if(!O.isObject(v))return void(se&&se.push(v));if(b.isValue(v)){if("@type"in v){let K=v["@type"];0===K.indexOf("_:")&&(v["@type"]=K=P.getId(K))}return void(se&&se.push(v))}if(se&&b.isList(v)){const K=[];return _.createNodeMap(v["@list"],D,L,P,j,K),void se.push({"@list":K})}if("@type"in v){const K=v["@type"];for(const re of K)0===re.indexOf("_:")&&P.getId(re)}O.isUndefined(j)&&(j=b.isBlankNode(v)?P.getId(v["@id"]):v["@id"]),se&&se.push({"@id":j});const T=D[L],X=T[j]=T[j]||{};X["@id"]=j;const le=Object.keys(v).sort();for(let K of le){if("@id"===K)continue;if("@reverse"===K){const ie={"@id":j},J=v["@reverse"];for(const V in J){const x=J[V];for(const B of x){let k=B["@id"];b.isBlankNode(B)&&(k=P.getId(k)),_.createNodeMap(B,D,L,P,k),C.addValue(T[k],V,ie,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===K){j in D||(D[j]={}),_.createNodeMap(v[K],D,j,P);continue}if("@included"===K){_.createNodeMap(v[K],D,L,P);continue}if("@type"!==K&&S(K)){if("@index"===K&&K in X&&(v[K]!==X[K]||v[K]["@id"]!==X[K]["@id"]))throw new N("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:X});X[K]=v[K];continue}const re=v[K];if(0===K.indexOf("_:")&&(K=P.getId(K)),0!==re.length)for(let ie of re)if("@type"===K&&(ie=0===ie.indexOf("_:")?P.getId(ie):ie),b.isSubject(ie)||b.isSubjectReference(ie)){if("@id"in ie&&!ie["@id"])continue;const J=b.isBlankNode(ie)?P.getId(ie["@id"]):ie["@id"];C.addValue(X,K,{"@id":J},{propertyIsArray:!0,allowDuplicate:!1}),_.createNodeMap(ie,D,L,P,J)}else if(b.isValue(ie))C.addValue(X,K,ie,{propertyIsArray:!0,allowDuplicate:!1});else if(b.isList(ie)){const J=[];_.createNodeMap(ie["@list"],D,L,P,j,J),ie={"@list":J},C.addValue(X,K,ie,{propertyIsArray:!0,allowDuplicate:!1})}else _.createNodeMap(ie,D,L,P,j),C.addValue(X,K,ie,{propertyIsArray:!0,allowDuplicate:!1});else C.addValue(X,K,[],{propertyIsArray:!0})}},_.mergeNodeMapGraphs=v=>{const D={};for(const L of Object.keys(v).sort())for(const P of Object.keys(v[L]).sort()){const j=v[L][P];P in D||(D[P]={"@id":P});const se=D[P];for(const T of Object.keys(j).sort())if(S(T)&&"@type"!==T)se[T]=C.clone(j[T]);else for(const X of j[T])C.addValue(se,T,C.clone(X),{propertyIsArray:!0,allowDuplicate:!1})}return D},_.mergeNodeMaps=v=>{const D=v["@default"],L=Object.keys(v).sort();for(const P of L){if("@default"===P)continue;const j=v[P];let se=D[P];se?"@graph"in se||(se["@graph"]=[]):D[P]=se={"@id":P,"@graph":[]};const T=se["@graph"];for(const X of Object.keys(j).sort()){const le=j[X];b.isSubjectReference(le)||T.push(le)}}return D}},8924:(ne,Z,g)=>{"use strict";const S=g(627),b={};ne.exports=b,b.setupDocumentLoaders=function(O){typeof XMLHttpRequest<"u"&&(O.documentLoaders.xhr=S,O.useDocumentLoader("xhr"))},b.setupGlobals=function(O){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:O.JsonLdProcessor})}},240:(ne,Z,g)=>{"use strict";const{createNodeMap:S}=g(9783),{isKeyword:b}=g(9611),O=g(543),C=g(5041),N=g(1874),_=g(8254),v=g(3521),{handleEvent:D}=g(3855),{RDF_FIRST:L,RDF_REST:P,RDF_NIL:j,RDF_TYPE:se,RDF_JSON_LITERAL:T,RDF_LANGSTRING:X,XSD_BOOLEAN:le,XSD_DOUBLE:K,XSD_INTEGER:re,XSD_STRING:ie}=g(6982),{isAbsolute:J}=g(2651),V={};function x(he,W,Me,de,xe){const Oe=Object.keys(W).sort();for(const Te of Oe){const Je=W[Te],Ke=Object.keys(Je).sort();for(let Ee of Ke){const Fe=Je[Ee];if("@type"===Ee)Ee=se;else if(b(Ee))continue;for(const Pe of Fe){const Ge={termType:Te.startsWith("_:")?"BlankNode":"NamedNode",value:Te};if(!J(Te)){xe.eventHandler&&D({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Te}},options:xe});continue}const ge={termType:Ee.startsWith("_:")?"BlankNode":"NamedNode",value:Ee};if(!J(Ee)){xe.eventHandler&&D({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Ee}},options:xe});continue}if("BlankNode"===ge.termType&&!xe.produceGeneralizedRdf){xe.eventHandler&&D({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:de.getOldIds().find(qe=>de.getId(qe)===Ee)}},options:xe});continue}const Ae=k(Pe,de,he,Me,xe.rdfDirection,xe);Ae&&he.push({subject:Ge,predicate:ge,object:Ae,graph:Me})}}}}function k(he,W,Me,de,xe,Oe){const Te={};if(O.isValue(he)){Te.termType="Literal",Te.value=void 0,Te.datatype={termType:"NamedNode"};let Je=he["@value"];const Ke=he["@type"]||null;if("@json"===Ke)Te.value=C(Je),Te.datatype.value=T;else if(_.isBoolean(Je))Te.value=Je.toString(),Te.datatype.value=Ke||le;else if(_.isDouble(Je)||Ke===K)_.isDouble(Je)||(Je=parseFloat(Je)),Te.value=Je.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Te.datatype.value=Ke||K;else if(_.isNumber(Je))Te.value=Je.toFixed(0),Te.datatype.value=Ke||re;else if("@direction"in he&&"i18n-datatype"===xe){const Ee=(he["@language"]||"").toLowerCase();Te.datatype.value=`https://www.w3.org/ns/i18n#${Ee}_${he["@direction"]}`,Te.value=Je}else{if("@direction"in he&&"compound-literal"===xe)throw new N("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});if("@direction"in he&&xe)throw new N("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:xe});"@language"in he?("@direction"in he&&!xe&&Oe.eventHandler&&D({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Te.value}},options:Oe}),Te.value=Je,Te.datatype.value=Ke||X,Te.language=he["@language"]):("@direction"in he&&!xe&&Oe.eventHandler&&D({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Te.value}},options:Oe}),Te.value=Je,Te.datatype.value=Ke||ie)}}else if(O.isList(he)){const Je=function B(he,W,Me,de,xe,Oe){const Te={termType:"NamedNode",value:L},Je={termType:"NamedNode",value:P},Ke={termType:"NamedNode",value:j},Ee=he.pop(),Fe=Ee?{termType:"BlankNode",value:W.getId()}:Ke;let Pe=Fe;for(const Ge of he){const ge=k(Ge,W,Me,de,xe,Oe),Ae={termType:"BlankNode",value:W.getId()};Me.push({subject:Pe,predicate:Te,object:ge,graph:de}),Me.push({subject:Pe,predicate:Je,object:Ae,graph:de}),Pe=Ae}if(Ee){const Ge=k(Ee,W,Me,de,xe,Oe);Me.push({subject:Pe,predicate:Te,object:Ge,graph:de}),Me.push({subject:Pe,predicate:Je,object:Ke,graph:de})}return Fe}(he["@list"],W,Me,de,xe,Oe);Te.termType=Je.termType,Te.value=Je.value}else{const Je=_.isObject(he)?he["@id"]:he;Te.termType=Je.startsWith("_:")?"BlankNode":"NamedNode",Te.value=Je}return"NamedNode"!==Te.termType||J(Te.value)?Te:(Oe.eventHandler&&D({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Te.value}},options:Oe}),null)}ne.exports=V,V.toRDF=(he,W)=>{const Me=new v.IdentifierIssuer("_:b"),de={"@default":{}};S(he,de,"@default",Me);const xe=[],Oe=Object.keys(de).sort();for(const Te of Oe){let Je;if("@default"===Te)Je={termType:"DefaultGraph",value:""};else{if(!J(Te)){W.eventHandler&&D({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Te}},options:W});continue}Je=Te.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Je.value=Te}x(xe,de[Te],Je,Me,W)}return xe}},8254:ne=>{"use strict";const Z={};ne.exports=Z,Z.isArray=Array.isArray,Z.isBoolean=g=>"boolean"==typeof g||"[object Boolean]"===Object.prototype.toString.call(g),Z.isDouble=g=>Z.isNumber(g)&&(-1!==String(g).indexOf(".")||Math.abs(g)>=1e21),Z.isEmptyObject=g=>Z.isObject(g)&&0===Object.keys(g).length,Z.isNumber=g=>"number"==typeof g||"[object Number]"===Object.prototype.toString.call(g),Z.isNumeric=g=>!isNaN(parseFloat(g))&&isFinite(g),Z.isObject=g=>"[object Object]"===Object.prototype.toString.call(g),Z.isString=g=>"string"==typeof g||"[object String]"===Object.prototype.toString.call(g),Z.isUndefined=g=>typeof g>"u"},2651:(ne,Z,g)=>{"use strict";const S=g(8254),b={};ne.exports=b,b.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.parse=(C,N)=>{const _={},v=b.parsers[N||"full"],D=v.regex.exec(C);let L=v.keys.length;for(;L--;)_[v.keys[L]]=void 0===D[L]?null:D[L];return("https"===_.scheme&&"443"===_.port||"http"===_.scheme&&"80"===_.port)&&(_.href=_.href.replace(":"+_.port,""),_.authority=_.authority.replace(":"+_.port,""),_.port=null),_.normalizedPath=b.removeDotSegments(_.path),_},b.prependBase=(C,N)=>{if(null===C||b.isAbsolute(N))return N;(!C||S.isString(C))&&(C=b.parse(C||""));const _=b.parse(N),v={protocol:C.protocol||""};if(null!==_.authority)v.authority=_.authority,v.path=_.path,v.query=_.query;else if(v.authority=C.authority,""===_.path)v.path=C.path,v.query=null!==_.query?_.query:C.query;else{if(0===_.path.indexOf("/"))v.path=_.path;else{let L=C.path;L=L.substr(0,L.lastIndexOf("/")+1),(L.length>0||C.authority)&&"/"!==L.substr(-1)&&(L+="/"),L+=_.path,v.path=L}v.query=_.query}""!==_.path&&(v.path=b.removeDotSegments(v.path));let D=v.protocol;return null!==v.authority&&(D+="//"+v.authority),D+=v.path,null!==v.query&&(D+="?"+v.query),null!==_.fragment&&(D+="#"+_.fragment),""===D&&(D="./"),D},b.removeBase=(C,N)=>{if(null===C)return N;(!C||S.isString(C))&&(C=b.parse(C||""));let _="";if(""!==C.href?_+=(C.protocol||"")+"//"+(C.authority||""):N.indexOf("//")&&(_+="//"),0!==N.indexOf(_))return N;const v=b.parse(N.substr(_.length)),D=C.normalizedPath.split("/"),L=v.normalizedPath.split("/"),P=v.fragment||v.query?0:1;for(;D.length>0&&L.length>P&&D[0]===L[0];)D.shift(),L.shift();let j="";if(D.length>0){D.pop();for(let se=0;se<D.length;++se)j+="../"}return j+=L.join("/"),null!==v.query&&(j+="?"+v.query),null!==v.fragment&&(j+="#"+v.fragment),""===j&&(j="./"),j},b.removeDotSegments=C=>{if(0===C.length)return"";const N=C.split("/"),_=[];for(;N.length>0;){const v=N.shift(),D=0===N.length;"."!==v?".."!==v?_.push(v):(_.pop(),D&&_.push("")):D&&_.push("")}return"/"===C[0]&&_.length>0&&""!==_[0]&&_.unshift(""),1===_.length&&""===_[0]?"/":_.join("/")};const O=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;b.isAbsolute=C=>S.isString(C)&&O.test(C),b.isRelative=C=>S.isString(C)},3521:(ne,Z,g)=>{"use strict";const S=g(543),b=g(8254),O=g(1986).IdentifierIssuer,C=g(1874),_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,v=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,D=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,P_headers_accept="application/ld+json, application/json",j={};function se(T,X){if(b.isArray(X))for(let le=0;le<X.length;++le)X[le]=se(T,X[le]);else if(S.isList(X))X["@list"]=se(T,X["@list"]);else if(b.isObject(X)){S.isBlankNode(X)&&(X["@id"]=T.getId(X["@id"]));const le=Object.keys(X).sort();for(let K=0;K<le.length;++K){const re=le[K];"@id"!==re&&(X[re]=se(T,X[re]))}}return X}ne.exports=j,j.IdentifierIssuer=O,j.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,j.REGEX_KEYWORD=/^@[a-zA-Z]+$/,j.clone=function(T){if(T&&"object"==typeof T){let X;if(b.isArray(T)){X=[];for(let le=0;le<T.length;++le)X[le]=j.clone(T[le])}else if(T instanceof Map){X=new Map;for(const[le,K]of T)X.set(le,j.clone(K))}else if(T instanceof Set){X=new Set;for(const le of T)X.add(j.clone(le))}else if(b.isObject(T)){X={};for(const le in T)X[le]=j.clone(T[le])}else X=T.toString();return X}return T},j.asArray=function(T){return Array.isArray(T)?T:[T]},j.buildHeaders=(T={})=>{if(Object.keys(T).some(le=>"accept"===le.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+P_headers_accept+'" is supported.');return Object.assign({Accept:P_headers_accept},T)},j.parseLinkHeader=T=>{const X={},le=T.match(_);for(let K=0;K<le.length;++K){let re=le[K].match(v);if(!re)continue;const ie={target:re[1]},J=re[2];for(;re=D.exec(J);)ie[re[1]]=void 0===re[2]?re[3]:re[2];const V=ie.rel||"";Array.isArray(X[V])?X[V].push(ie):X[V]=X.hasOwnProperty(V)?[X[V],ie]:ie}return X},j.validateTypeValue=(T,X)=>{if(!(b.isString(T)||b.isArray(T)&&T.every(le=>b.isString(le)))){if(X&&b.isObject(T))switch(Object.keys(T).length){case 0:return;case 1:if("@default"in T&&j.asArray(T["@default"]).every(le=>b.isString(le)))return}throw new C('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:T})}},j.hasProperty=(T,X)=>{if(T.hasOwnProperty(X)){const le=T[X];return!b.isArray(le)||le.length>0}return!1},j.hasValue=(T,X,le)=>{if(j.hasProperty(T,X)){let K=T[X];const re=S.isList(K);if(b.isArray(K)||re){re&&(K=K["@list"]);for(let ie=0;ie<K.length;++ie)if(j.compareValues(le,K[ie]))return!0}else if(!b.isArray(le))return j.compareValues(le,K)}return!1},j.addValue=(T,X,le,K)=>{if("propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1),"valueIsArray"in K||(K.valueIsArray=!1),"allowDuplicate"in K||(K.allowDuplicate=!0),"prependValue"in K||(K.prependValue=!1),K.valueIsArray)T[X]=le;else if(b.isArray(le)){0===le.length&&K.propertyIsArray&&!T.hasOwnProperty(X)&&(T[X]=[]),K.prependValue&&(le=le.concat(T[X]),T[X]=[]);for(let re=0;re<le.length;++re)j.addValue(T,X,le[re],K)}else if(T.hasOwnProperty(X)){const re=!K.allowDuplicate&&j.hasValue(T,X,le);!b.isArray(T[X])&&(!re||K.propertyIsArray)&&(T[X]=[T[X]]),re||(K.prependValue?T[X].unshift(le):T[X].push(le))}else T[X]=K.propertyIsArray?[le]:le},j.getValues=(T,X)=>[].concat(T[X]||[]),j.removeProperty=(T,X)=>{delete T[X]},j.removeValue=(T,X,le,K)=>{"propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1);const re=j.getValues(T,X).filter(ie=>!j.compareValues(ie,le));0===re.length?j.removeProperty(T,X):T[X]=1!==re.length||K.propertyIsArray?re:re[0]},j.relabelBlankNodes=(T,X)=>se((X=X||{}).issuer||new O("_:b"),T),j.compareValues=(T,X)=>!!(T===X||S.isValue(T)&&S.isValue(X)&&T["@value"]===X["@value"]&&T["@type"]===X["@type"]&&T["@language"]===X["@language"]&&T["@index"]===X["@index"])||!!(b.isObject(T)&&"@id"in T&&b.isObject(X)&&"@id"in X)&&T["@id"]===X["@id"],j.compareShortestLeast=(T,X)=>T.length<X.length?-1:X.length<T.length?1:T===X?0:T<X?-1:1},5041:ne=>{"use strict";ne.exports=function Z(g){return null===g||"object"!=typeof g||null!=g.toJSON?JSON.stringify(g):Array.isArray(g)?"["+g.reduce((S,b,O)=>S+(0===O?"":",")+Z(void 0===b||"symbol"==typeof b?null:b),"")+"]":"{"+Object.keys(g).sort().reduce((S,b,O)=>void 0===g[b]||"symbol"==typeof g[b]?S:S+(0===S.length?"":",")+Z(b)+":"+Z(g[b]),"")+"}"}},1072:(ne,Z,g)=>{"use strict";const S=g(4439),b=Symbol("max"),O=Symbol("length"),C=Symbol("lengthCalculator"),N=Symbol("allowStale"),_=Symbol("maxAge"),v=Symbol("dispose"),D=Symbol("noDisposeOnSet"),L=Symbol("lruList"),P=Symbol("cache"),j=Symbol("updateAgeOnGet"),se=()=>1,X=(V,x,B)=>{const k=V[P].get(x);if(k){const he=k.value;if(le(V,he)){if(re(V,k),!V[N])return}else B&&(V[j]&&(k.value.now=Date.now()),V[L].unshiftNode(k));return he.value}},le=(V,x)=>{if(!x||!x.maxAge&&!V[_])return!1;const B=Date.now()-x.now;return x.maxAge?B>x.maxAge:V[_]&&B>V[_]},K=V=>{if(V[O]>V[b])for(let x=V[L].tail;V[O]>V[b]&&null!==x;){const B=x.prev;re(V,x),x=B}},re=(V,x)=>{if(x){const B=x.value;V[v]&&V[v](B.key,B.value),V[O]-=B.length,V[P].delete(B.key),V[L].removeNode(x)}};class ie{constructor(x,B,k,he,W){this.key=x,this.value=B,this.length=k,this.now=he,this.maxAge=W||0}}const J=(V,x,B,k)=>{let he=B.value;le(V,he)&&(re(V,B),V[N]||(he=void 0)),he&&x.call(k,he.value,he.key,V)};ne.exports=class T{constructor(x){if("number"==typeof x&&(x={max:x}),x||(x={}),x.max&&("number"!=typeof x.max||x.max<0))throw new TypeError("max must be a non-negative number");this[b]=x.max||1/0;const k=x.length||se;if(this[C]="function"!=typeof k?se:k,this[N]=x.stale||!1,x.maxAge&&"number"!=typeof x.maxAge)throw new TypeError("maxAge must be a number");this[_]=x.maxAge||0,this[v]=x.dispose,this[D]=x.noDisposeOnSet||!1,this[j]=x.updateAgeOnGet||!1,this.reset()}set max(x){if("number"!=typeof x||x<0)throw new TypeError("max must be a non-negative number");this[b]=x||1/0,K(this)}get max(){return this[b]}set allowStale(x){this[N]=!!x}get allowStale(){return this[N]}set maxAge(x){if("number"!=typeof x)throw new TypeError("maxAge must be a non-negative number");this[_]=x,K(this)}get maxAge(){return this[_]}set lengthCalculator(x){"function"!=typeof x&&(x=se),x!==this[C]&&(this[C]=x,this[O]=0,this[L].forEach(B=>{B.length=this[C](B.value,B.key),this[O]+=B.length})),K(this)}get lengthCalculator(){return this[C]}get length(){return this[O]}get itemCount(){return this[L].length}rforEach(x,B){B=B||this;for(let k=this[L].tail;null!==k;){const he=k.prev;J(this,x,k,B),k=he}}forEach(x,B){B=B||this;for(let k=this[L].head;null!==k;){const he=k.next;J(this,x,k,B),k=he}}keys(){return this[L].toArray().map(x=>x.key)}values(){return this[L].toArray().map(x=>x.value)}reset(){this[v]&&this[L]&&this[L].length&&this[L].forEach(x=>this[v](x.key,x.value)),this[P]=new Map,this[L]=new S,this[O]=0}dump(){return this[L].map(x=>!le(this,x)&&{k:x.key,v:x.value,e:x.now+(x.maxAge||0)}).toArray().filter(x=>x)}dumpLru(){return this[L]}set(x,B,k){if((k=k||this[_])&&"number"!=typeof k)throw new TypeError("maxAge must be a number");const he=k?Date.now():0,W=this[C](B,x);if(this[P].has(x)){if(W>this[b])return re(this,this[P].get(x)),!1;const xe=this[P].get(x).value;return this[v]&&(this[D]||this[v](x,xe.value)),xe.now=he,xe.maxAge=k,xe.value=B,this[O]+=W-xe.length,xe.length=W,this.get(x),K(this),!0}const Me=new ie(x,B,W,he,k);return Me.length>this[b]?(this[v]&&this[v](x,B),!1):(this[O]+=Me.length,this[L].unshift(Me),this[P].set(x,this[L].head),K(this),!0)}has(x){if(!this[P].has(x))return!1;const B=this[P].get(x).value;return!le(this,B)}get(x){return X(this,x,!0)}peek(x){return X(this,x,!1)}pop(){const x=this[L].tail;return x?(re(this,x),x.value):null}del(x){re(this,this[P].get(x))}load(x){this.reset();const B=Date.now();for(let k=x.length-1;k>=0;k--){const he=x[k],W=he.e||0;if(0===W)this.set(he.k,he.v);else{const Me=W-B;Me>0&&this.set(he.k,he.v,Me)}}}prune(){this[P].forEach((x,B)=>X(this,B,!1))}}},6506:(ne,Z,g)=>{var O=g(8745)(g(8492),"DataView");ne.exports=O},9618:(ne,Z,g)=>{var S=g(5602),b=g(1499),O=g(2990),C=g(480),N=g(4469);function _(v){var D=-1,L=null==v?0:v.length;for(this.clear();++D<L;){var P=v[D];this.set(P[0],P[1])}}_.prototype.clear=S,_.prototype.delete=b,_.prototype.get=O,_.prototype.has=C,_.prototype.set=N,ne.exports=_},3597:(ne,Z,g)=>{var S=g(9365),b=g(9343),O=g(4779),C=g(1509),N=g(7137);function _(v){var D=-1,L=null==v?0:v.length;for(this.clear();++D<L;){var P=v[D];this.set(P[0],P[1])}}_.prototype.clear=S,_.prototype.delete=b,_.prototype.get=O,_.prototype.has=C,_.prototype.set=N,ne.exports=_},1136:(ne,Z,g)=>{var O=g(8745)(g(8492),"Map");ne.exports=O},1811:(ne,Z,g)=>{var S=g(3413),b=g(5419),O=g(7253),C=g(1115),N=g(6648);function _(v){var D=-1,L=null==v?0:v.length;for(this.clear();++D<L;){var P=v[D];this.set(P[0],P[1])}}_.prototype.clear=S,_.prototype.delete=b,_.prototype.get=O,_.prototype.has=C,_.prototype.set=N,ne.exports=_},641:(ne,Z,g)=>{var O=g(8745)(g(8492),"Promise");ne.exports=O},1732:(ne,Z,g)=>{var O=g(8745)(g(8492),"Set");ne.exports=O},5960:(ne,Z,g)=>{var S=g(1811),b=g(6151),O=g(2154);function C(N){var _=-1,v=null==N?0:N.length;for(this.__data__=new S;++_<v;)this.add(N[_])}C.prototype.add=C.prototype.push=b,C.prototype.has=O,ne.exports=C},1339:(ne,Z,g)=>{var S=g(3597),b=g(9488),O=g(5943),C=g(5456),N=g(4793),_=g(8689);function v(D){var L=this.__data__=new S(D);this.size=L.size}v.prototype.clear=b,v.prototype.delete=O,v.prototype.get=C,v.prototype.has=N,v.prototype.set=_,ne.exports=v},1763:(ne,Z,g)=>{var S=g(8492);ne.exports=S.Symbol},2760:(ne,Z,g)=>{var S=g(8492);ne.exports=S.Uint8Array},6413:(ne,Z,g)=>{var O=g(8745)(g(8492),"WeakMap");ne.exports=O},7910:ne=>{ne.exports=function Z(g,S,b){switch(b.length){case 0:return g.call(S);case 1:return g.call(S,b[0]);case 2:return g.call(S,b[0],b[1]);case 3:return g.call(S,b[0],b[1],b[2])}return g.apply(S,b)}},2134:ne=>{ne.exports=function Z(g,S){for(var b=-1,O=null==g?0:g.length,C=0,N=[];++b<O;){var _=g[b];S(_,b,g)&&(N[C++]=_)}return N}},1384:(ne,Z,g)=>{var S=g(5025),b=g(1955),O=g(2261),C=g(7525),N=g(5188),_=g(4868),D=Object.prototype.hasOwnProperty;ne.exports=function L(P,j){var se=O(P),T=!se&&b(P),X=!se&&!T&&C(P),le=!se&&!T&&!X&&_(P),K=se||T||X||le,re=K?S(P.length,String):[],ie=re.length;for(var J in P)(j||D.call(P,J))&&(!K||!("length"==J||X&&("offset"==J||"parent"==J)||le&&("buffer"==J||"byteLength"==J||"byteOffset"==J)||N(J,ie)))&&re.push(J);return re}},3880:ne=>{ne.exports=function Z(g,S){for(var b=-1,O=null==g?0:g.length,C=Array(O);++b<O;)C[b]=S(g[b],b,g);return C}},7853:ne=>{ne.exports=function Z(g,S){for(var b=-1,O=S.length,C=g.length;++b<O;)g[C+b]=S[b];return g}},5916:ne=>{ne.exports=function Z(g,S){for(var b=-1,O=null==g?0:g.length;++b<O;)if(S(g[b],b,g))return!0;return!1}},4056:(ne,Z,g)=>{var S=g(7826);ne.exports=function b(O,C){for(var N=O.length;N--;)if(S(O[N][0],C))return N;return-1}},5103:(ne,Z,g)=>{var S=g(7794),O=g(9386)(S);ne.exports=O},1883:(ne,Z,g)=>{var S=g(7853),b=g(2241);ne.exports=function O(C,N,_,v,D){var L=-1,P=C.length;for(_||(_=b),D||(D=[]);++L<P;){var j=C[L];N>0&&_(j)?N>1?O(j,N-1,_,v,D):S(D,j):v||(D[D.length]=j)}return D}},6483:(ne,Z,g)=>{var b=g(2086)();ne.exports=b},7794:(ne,Z,g)=>{var S=g(6483),b=g(4614);ne.exports=function O(C,N){return C&&S(C,N,b)}},2202:(ne,Z,g)=>{var S=g(4826),b=g(8916);ne.exports=function O(C,N){for(var _=0,v=(N=S(N,C)).length;null!=C&&_<v;)C=C[b(N[_++])];return _&&_==v?C:void 0}},7427:(ne,Z,g)=>{var S=g(7853),b=g(2261);ne.exports=function O(C,N,_){var v=N(C);return b(C)?v:S(v,_(C))}},4590:(ne,Z,g)=>{var S=g(1763),b=g(5933),O=g(9243),_=S?S.toStringTag:void 0;ne.exports=function v(D){return null==D?void 0===D?"[object Undefined]":"[object Null]":_&&_ in Object(D)?b(D):O(D)}},3274:ne=>{ne.exports=function Z(g,S){return null!=g&&S in Object(g)}},3022:(ne,Z,g)=>{var S=g(4590),b=g(3714);ne.exports=function C(N){return b(N)&&"[object Arguments]"==S(N)}},7108:(ne,Z,g)=>{var S=g(7946),b=g(3714);ne.exports=function O(C,N,_,v,D){return C===N||(null==C||null==N||!b(C)&&!b(N)?C!=C&&N!=N:S(C,N,_,v,O,D))}},7946:(ne,Z,g)=>{var S=g(1339),b=g(7469),O=g(1642),C=g(9462),N=g(2472),_=g(2261),v=g(7525),D=g(4868),P="[object Arguments]",j="[object Array]",se="[object Object]",X=Object.prototype.hasOwnProperty;ne.exports=function le(K,re,ie,J,V,x){var B=_(K),k=_(re),he=B?j:N(K),W=k?j:N(re),Me=(he=he==P?se:he)==se,de=(W=W==P?se:W)==se,xe=he==W;if(xe&&v(K)){if(!v(re))return!1;B=!0,Me=!1}if(xe&&!Me)return x||(x=new S),B||D(K)?b(K,re,ie,J,V,x):O(K,re,he,ie,J,V,x);if(!(1&ie)){var Oe=Me&&X.call(K,"__wrapped__"),Te=de&&X.call(re,"__wrapped__");if(Oe||Te){var Je=Oe?K.value():K,Ke=Te?re.value():re;return x||(x=new S),V(Je,Ke,ie,J,x)}}return!!xe&&(x||(x=new S),C(K,re,ie,J,V,x))}},2527:(ne,Z,g)=>{var S=g(1339),b=g(7108);ne.exports=function N(_,v,D,L){var P=D.length,j=P,se=!L;if(null==_)return!j;for(_=Object(_);P--;){var T=D[P];if(se&&T[2]?T[1]!==_[T[0]]:!(T[0]in _))return!1}for(;++P<j;){var X=(T=D[P])[0],le=_[X],K=T[1];if(se&&T[2]){if(void 0===le&&!(X in _))return!1}else{var re=new S;if(L)var ie=L(le,K,X,_,v,re);if(!(void 0===ie?b(K,le,3,L,re):ie))return!1}}return!0}},1082:(ne,Z,g)=>{var S=g(6861),b=g(9950),O=g(9794),C=g(7075),_=/^\[object .+?Constructor\]$/,j=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");ne.exports=function se(T){return!(!O(T)||b(T))&&(S(T)?j:_).test(C(T))}},8902:(ne,Z,g)=>{var S=g(4590),b=g(7765),O=g(3714),xe={};xe["[object Float32Array]"]=xe["[object Float64Array]"]=xe["[object Int8Array]"]=xe["[object Int16Array]"]=xe["[object Int32Array]"]=xe["[object Uint8Array]"]=xe["[object Uint8ClampedArray]"]=xe["[object Uint16Array]"]=xe["[object Uint32Array]"]=!0,xe["[object Arguments]"]=xe["[object Array]"]=xe["[object ArrayBuffer]"]=xe["[object Boolean]"]=xe["[object DataView]"]=xe["[object Date]"]=xe["[object Error]"]=xe["[object Function]"]=xe["[object Map]"]=xe["[object Number]"]=xe["[object Object]"]=xe["[object RegExp]"]=xe["[object Set]"]=xe["[object String]"]=xe["[object WeakMap]"]=!1,ne.exports=function Oe(Te){return O(Te)&&b(Te.length)&&!!xe[S(Te)]}},1627:(ne,Z,g)=>{var S=g(2924),b=g(8526),O=g(5657),C=g(2261),N=g(2692);ne.exports=function _(v){return"function"==typeof v?v:null==v?O:"object"==typeof v?C(v)?b(v[0],v[1]):S(v):N(v)}},190:(ne,Z,g)=>{var S=g(6587),b=g(366),C=Object.prototype.hasOwnProperty;ne.exports=function N(_){if(!S(_))return b(_);var v=[];for(var D in Object(_))C.call(_,D)&&"constructor"!=D&&v.push(D);return v}},2839:(ne,Z,g)=>{var S=g(5103),b=g(2447);ne.exports=function O(C,N){var _=-1,v=b(C)?Array(C.length):[];return S(C,function(D,L,P){v[++_]=N(D,L,P)}),v}},2924:(ne,Z,g)=>{var S=g(2527),b=g(7895),O=g(2265);ne.exports=function C(N){var _=b(N);return 1==_.length&&_[0][2]?O(_[0][0],_[0][1]):function(v){return v===N||S(v,N,_)}}},8526:(ne,Z,g)=>{var S=g(7108),b=g(5440),O=g(2494),C=g(6300),N=g(3921),_=g(2265),v=g(8916);ne.exports=function P(j,se){return C(j)&&N(se)?_(v(j),se):function(T){var X=b(T,j);return void 0===X&&X===se?O(T,j):S(se,X,3)}}},252:(ne,Z,g)=>{var S=g(3880),b=g(2202),O=g(1627),C=g(2839),N=g(6389),_=g(1156),v=g(9664),D=g(5657),L=g(2261);ne.exports=function P(j,se,T){se=se.length?S(se,function(K){return L(K)?function(re){return b(re,1===K.length?K[0]:K)}:K}):[D];var X=-1;se=S(se,_(O));var le=C(j,function(K,re,ie){return{criteria:S(se,function(V){return V(K)}),index:++X,value:K}});return N(le,function(K,re){return v(K,re,T)})}},3400:ne=>{ne.exports=function Z(g){return function(S){return S?.[g]}}},6443:(ne,Z,g)=>{var S=g(2202);ne.exports=function b(O){return function(C){return S(C,O)}}},8951:(ne,Z,g)=>{var S=g(5657),b=g(2394),O=g(6814);ne.exports=function C(N,_){return O(b(N,_,S),N+"")}},8235:(ne,Z,g)=>{var S=g(1075),b=g(9383),O=g(5657);ne.exports=b?function(N,_){return b(N,"toString",{configurable:!0,enumerable:!1,value:S(_),writable:!0})}:O},6389:ne=>{ne.exports=function Z(g,S){var b=g.length;for(g.sort(S);b--;)g[b]=g[b].value;return g}},5025:ne=>{ne.exports=function Z(g,S){for(var b=-1,O=Array(g);++b<g;)O[b]=S(b);return O}},7002:(ne,Z,g)=>{var S=g(1763),b=g(3880),O=g(2261),C=g(3423),_=S?S.prototype:void 0,v=_?_.toString:void 0;ne.exports=function D(L){if("string"==typeof L)return L;if(O(L))return b(L,D)+"";if(C(L))return v?v.call(L):"";var P=L+"";return"0"==P&&1/L==-1/0?"-0":P}},1156:ne=>{ne.exports=function Z(g){return function(S){return g(S)}}},4795:ne=>{ne.exports=function Z(g,S){return g.has(S)}},4826:(ne,Z,g)=>{var S=g(2261),b=g(6300),O=g(163),C=g(2674);ne.exports=function N(_,v){return S(_)?_:b(_,v)?[_]:O(C(_))}},5400:(ne,Z,g)=>{var S=g(3423);ne.exports=function b(O,C){if(O!==C){var N=void 0!==O,_=null===O,v=O==O,D=S(O),L=void 0!==C,P=null===C,j=C==C,se=S(C);if(!P&&!se&&!D&&O>C||D&&L&&j&&!P&&!se||_&&L&&j||!N&&j||!v)return 1;if(!_&&!D&&!se&&O<C||se&&N&&v&&!_&&!D||P&&N&&v||!L&&v||!j)return-1}return 0}},9664:(ne,Z,g)=>{var S=g(5400);ne.exports=function b(O,C,N){for(var _=-1,v=O.criteria,D=C.criteria,L=v.length,P=N.length;++_<L;){var j=S(v[_],D[_]);if(j)return _>=P?j:j*("desc"==N[_]?-1:1)}return O.index-C.index}},6189:(ne,Z,g)=>{var S=g(8492);ne.exports=S["__core-js_shared__"]},9386:(ne,Z,g)=>{var S=g(2447);ne.exports=function b(O,C){return function(N,_){if(null==N)return N;if(!S(N))return O(N,_);for(var v=N.length,D=C?v:-1,L=Object(N);(C?D--:++D<v)&&!1!==_(L[D],D,L););return N}}},2086:ne=>{ne.exports=function Z(g){return function(S,b,O){for(var C=-1,N=Object(S),_=O(S),v=_.length;v--;){var D=_[g?v:++C];if(!1===b(N[D],D,N))break}return S}}},9383:(ne,Z,g)=>{var S=g(8745),b=function(){try{var O=S(Object,"defineProperty");return O({},"",{}),O}catch{}}();ne.exports=b},7469:(ne,Z,g)=>{var S=g(5960),b=g(5916),O=g(4795);ne.exports=function _(v,D,L,P,j,se){var T=1&L,X=v.length,le=D.length;if(X!=le&&!(T&&le>X))return!1;var K=se.get(v),re=se.get(D);if(K&&re)return K==D&&re==v;var ie=-1,J=!0,V=2&L?new S:void 0;for(se.set(v,D),se.set(D,v);++ie<X;){var x=v[ie],B=D[ie];if(P)var k=T?P(B,x,ie,D,v,se):P(x,B,ie,v,D,se);if(void 0!==k){if(k)continue;J=!1;break}if(V){if(!b(D,function(he,W){if(!O(V,W)&&(x===he||j(x,he,L,P,se)))return V.push(W)})){J=!1;break}}else if(x!==B&&!j(x,B,L,P,se)){J=!1;break}}return se.delete(v),se.delete(D),J}},1642:(ne,Z,g)=>{var S=g(1763),b=g(2760),O=g(7826),C=g(7469),N=g(1575),_=g(8e3),V=S?S.prototype:void 0,x=V?V.valueOf:void 0;ne.exports=function B(k,he,W,Me,de,xe,Oe){switch(W){case"[object DataView]":if(k.byteLength!=he.byteLength||k.byteOffset!=he.byteOffset)return!1;k=k.buffer,he=he.buffer;case"[object ArrayBuffer]":return!(k.byteLength!=he.byteLength||!xe(new b(k),new b(he)));case"[object Boolean]":case"[object Date]":case"[object Number]":return O(+k,+he);case"[object Error]":return k.name==he.name&&k.message==he.message;case"[object RegExp]":case"[object String]":return k==he+"";case"[object Map]":var Te=N;case"[object Set]":if(Te||(Te=_),k.size!=he.size&&!(1&Me))return!1;var Ke=Oe.get(k);if(Ke)return Ke==he;Me|=2,Oe.set(k,he);var Ee=C(Te(k),Te(he),Me,de,xe,Oe);return Oe.delete(k),Ee;case"[object Symbol]":if(x)return x.call(k)==x.call(he)}return!1}},9462:(ne,Z,g)=>{var S=g(6131),C=Object.prototype.hasOwnProperty;ne.exports=function N(_,v,D,L,P,j){var se=1&D,T=S(_),X=T.length;if(X!=S(v).length&&!se)return!1;for(var re=X;re--;){var ie=T[re];if(!(se?ie in v:C.call(v,ie)))return!1}var J=j.get(_),V=j.get(v);if(J&&V)return J==v&&V==_;var x=!0;j.set(_,v),j.set(v,_);for(var B=se;++re<X;){var k=_[ie=T[re]],he=v[ie];if(L)var W=se?L(he,k,ie,v,_,j):L(k,he,ie,_,v,j);if(!(void 0===W?k===he||P(k,he,D,L,j):W)){x=!1;break}B||(B="constructor"==ie)}if(x&&!B){var Me=_.constructor,de=v.constructor;Me!=de&&"constructor"in _&&"constructor"in v&&!("function"==typeof Me&&Me instanceof Me&&"function"==typeof de&&de instanceof de)&&(x=!1)}return j.delete(_),j.delete(v),x}},248:ne=>{var Z="object"==typeof global&&global&&global.Object===Object&&global;ne.exports=Z},6131:(ne,Z,g)=>{var S=g(7427),b=g(771),O=g(4614);ne.exports=function C(N){return S(N,O,b)}},4113:(ne,Z,g)=>{var S=g(29);ne.exports=function b(O,C){var N=O.__data__;return S(C)?N["string"==typeof C?"string":"hash"]:N.map}},7895:(ne,Z,g)=>{var S=g(3921),b=g(4614);ne.exports=function O(C){for(var N=b(C),_=N.length;_--;){var v=N[_],D=C[v];N[_]=[v,D,S(D)]}return N}},8745:(ne,Z,g)=>{var S=g(1082),b=g(1015);ne.exports=function O(C,N){var _=b(C,N);return S(_)?_:void 0}},5933:(ne,Z,g)=>{var S=g(1763),b=Object.prototype,O=b.hasOwnProperty,C=b.toString,N=S?S.toStringTag:void 0;ne.exports=function _(v){var D=O.call(v,N),L=v[N];try{v[N]=void 0;var P=!0}catch{}var j=C.call(v);return P&&(D?v[N]=L:delete v[N]),j}},771:(ne,Z,g)=>{var S=g(2134),b=g(1315),C=Object.prototype.propertyIsEnumerable,N=Object.getOwnPropertySymbols;ne.exports=N?function(v){return null==v?[]:(v=Object(v),S(N(v),function(D){return C.call(v,D)}))}:b},2472:(ne,Z,g)=>{var S=g(6506),b=g(1136),O=g(641),C=g(1732),N=g(6413),_=g(4590),v=g(7075),D="[object Map]",P="[object Promise]",j="[object Set]",se="[object WeakMap]",T="[object DataView]",X=v(S),le=v(b),K=v(O),re=v(C),ie=v(N),J=_;(S&&J(new S(new ArrayBuffer(1)))!=T||b&&J(new b)!=D||O&&J(O.resolve())!=P||C&&J(new C)!=j||N&&J(new N)!=se)&&(J=function(V){var x=_(V),B="[object Object]"==x?V.constructor:void 0,k=B?v(B):"";if(k)switch(k){case X:return T;case le:return D;case K:return P;case re:return j;case ie:return se}return x}),ne.exports=J},1015:ne=>{ne.exports=function Z(g,S){return g?.[S]}},4583:(ne,Z,g)=>{var S=g(4826),b=g(1955),O=g(2261),C=g(5188),N=g(7765),_=g(8916);ne.exports=function v(D,L,P){for(var j=-1,se=(L=S(L,D)).length,T=!1;++j<se;){var X=_(L[j]);if(!(T=null!=D&&P(D,X)))break;D=D[X]}return T||++j!=se?T:!!(se=null==D?0:D.length)&&N(se)&&C(X,se)&&(O(D)||b(D))}},5602:(ne,Z,g)=>{var S=g(893);ne.exports=function b(){this.__data__=S?S(null):{},this.size=0}},1499:ne=>{ne.exports=function Z(g){var S=this.has(g)&&delete this.__data__[g];return this.size-=S?1:0,S}},2990:(ne,Z,g)=>{var S=g(893),C=Object.prototype.hasOwnProperty;ne.exports=function N(_){var v=this.__data__;if(S){var D=v[_];return"__lodash_hash_undefined__"===D?void 0:D}return C.call(v,_)?v[_]:void 0}},480:(ne,Z,g)=>{var S=g(893),O=Object.prototype.hasOwnProperty;ne.exports=function C(N){var _=this.__data__;return S?void 0!==_[N]:O.call(_,N)}},4469:(ne,Z,g)=>{var S=g(893);ne.exports=function O(C,N){var _=this.__data__;return this.size+=this.has(C)?0:1,_[C]=S&&void 0===N?"__lodash_hash_undefined__":N,this}},2241:(ne,Z,g)=>{var S=g(1763),b=g(1955),O=g(2261),C=S?S.isConcatSpreadable:void 0;ne.exports=function N(_){return O(_)||b(_)||!!(C&&_&&_[C])}},5188:ne=>{var g=/^(?:0|[1-9]\d*)$/;ne.exports=function S(b,O){var C=typeof b;return!!(O=O??9007199254740991)&&("number"==C||"symbol"!=C&&g.test(b))&&b>-1&&b%1==0&&b<O}},3817:(ne,Z,g)=>{var S=g(7826),b=g(2447),O=g(5188),C=g(9794);ne.exports=function N(_,v,D){if(!C(D))return!1;var L=typeof v;return!!("number"==L?b(D)&&O(v,D.length):"string"==L&&v in D)&&S(D[v],_)}},6300:(ne,Z,g)=>{var S=g(2261),b=g(3423),O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/;ne.exports=function N(_,v){if(S(_))return!1;var D=typeof _;return!("number"!=D&&"symbol"!=D&&"boolean"!=D&&null!=_&&!b(_))||C.test(_)||!O.test(_)||null!=v&&_ in Object(v)}},29:ne=>{ne.exports=function Z(g){var S=typeof g;return"string"==S||"number"==S||"symbol"==S||"boolean"==S?"__proto__"!==g:null===g}},9950:(ne,Z,g)=>{var C,S=g(6189),b=(C=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";ne.exports=function O(C){return!!b&&b in C}},6587:ne=>{var Z=Object.prototype;ne.exports=function g(S){var b=S&&S.constructor;return S===("function"==typeof b&&b.prototype||Z)}},3921:(ne,Z,g)=>{var S=g(9794);ne.exports=function b(O){return O==O&&!S(O)}},9365:ne=>{ne.exports=function Z(){this.__data__=[],this.size=0}},9343:(ne,Z,g)=>{var S=g(4056),O=Array.prototype.splice;ne.exports=function C(N){var _=this.__data__,v=S(_,N);return!(v<0||(v==_.length-1?_.pop():O.call(_,v,1),--this.size,0))}},4779:(ne,Z,g)=>{var S=g(4056);ne.exports=function b(O){var C=this.__data__,N=S(C,O);return N<0?void 0:C[N][1]}},1509:(ne,Z,g)=>{var S=g(4056);ne.exports=function b(O){return S(this.__data__,O)>-1}},7137:(ne,Z,g)=>{var S=g(4056);ne.exports=function b(O,C){var N=this.__data__,_=S(N,O);return _<0?(++this.size,N.push([O,C])):N[_][1]=C,this}},3413:(ne,Z,g)=>{var S=g(9618),b=g(3597),O=g(1136);ne.exports=function C(){this.size=0,this.__data__={hash:new S,map:new(O||b),string:new S}}},5419:(ne,Z,g)=>{var S=g(4113);ne.exports=function b(O){var C=S(this,O).delete(O);return this.size-=C?1:0,C}},7253:(ne,Z,g)=>{var S=g(4113);ne.exports=function b(O){return S(this,O).get(O)}},1115:(ne,Z,g)=>{var S=g(4113);ne.exports=function b(O){return S(this,O).has(O)}},6648:(ne,Z,g)=>{var S=g(4113);ne.exports=function b(O,C){var N=S(this,O),_=N.size;return N.set(O,C),this.size+=N.size==_?0:1,this}},1575:ne=>{ne.exports=function Z(g){var S=-1,b=Array(g.size);return g.forEach(function(O,C){b[++S]=[C,O]}),b}},2265:ne=>{ne.exports=function Z(g,S){return function(b){return null!=b&&b[g]===S&&(void 0!==S||g in Object(b))}}},7371:(ne,Z,g)=>{var S=g(7659);ne.exports=function O(C){var N=S(C,function(v){return 500===_.size&&_.clear(),v}),_=N.cache;return N}},893:(ne,Z,g)=>{var b=g(8745)(Object,"create");ne.exports=b},366:(ne,Z,g)=>{var b=g(3106)(Object.keys,Object);ne.exports=b},8849:(ne,Z,g)=>{ne=g.nmd(ne);var S=g(248),b=Z&&!Z.nodeType&&Z,O=b&&ne&&!ne.nodeType&&ne,N=O&&O.exports===b&&S.process,_=function(){try{return O&&O.require&&O.require("util").types||N&&N.binding&&N.binding("util")}catch{}}();ne.exports=_},9243:ne=>{var g=Object.prototype.toString;ne.exports=function S(b){return g.call(b)}},3106:ne=>{ne.exports=function Z(g,S){return function(b){return g(S(b))}}},2394:(ne,Z,g)=>{var S=g(7910),b=Math.max;ne.exports=function O(C,N,_){return N=b(void 0===N?C.length-1:N,0),function(){for(var v=arguments,D=-1,L=b(v.length-N,0),P=Array(L);++D<L;)P[D]=v[N+D];D=-1;for(var j=Array(N+1);++D<N;)j[D]=v[D];return j[N]=_(P),S(C,this,j)}}},8492:(ne,Z,g)=>{var S=g(248),b="object"==typeof self&&self&&self.Object===Object&&self,O=S||b||Function("return this")();ne.exports=O},6151:ne=>{ne.exports=function g(S){return this.__data__.set(S,"__lodash_hash_undefined__"),this}},2154:ne=>{ne.exports=function Z(g){return this.__data__.has(g)}},8e3:ne=>{ne.exports=function Z(g){var S=-1,b=Array(g.size);return g.forEach(function(O){b[++S]=O}),b}},6814:(ne,Z,g)=>{var S=g(8235),O=g(9531)(S);ne.exports=O},9531:ne=>{var S=Date.now;ne.exports=function b(O){var C=0,N=0;return function(){var _=S(),v=16-(_-N);if(N=_,v>0){if(++C>=800)return arguments[0]}else C=0;return O.apply(void 0,arguments)}}},9488:(ne,Z,g)=>{var S=g(3597);ne.exports=function b(){this.__data__=new S,this.size=0}},5943:ne=>{ne.exports=function Z(g){var S=this.__data__,b=S.delete(g);return this.size=S.size,b}},5456:ne=>{ne.exports=function Z(g){return this.__data__.get(g)}},4793:ne=>{ne.exports=function Z(g){return this.__data__.has(g)}},8689:(ne,Z,g)=>{var S=g(3597),b=g(1136),O=g(1811);ne.exports=function N(_,v){var D=this.__data__;if(D instanceof S){var L=D.__data__;if(!b||L.length<199)return L.push([_,v]),this.size=++D.size,this;D=this.__data__=new O(L)}return D.set(_,v),this.size=D.size,this}},163:(ne,Z,g)=>{var S=g(7371),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,O=/\\(\\)?/g,C=S(function(N){var _=[];return 46===N.charCodeAt(0)&&_.push(""),N.replace(b,function(v,D,L,P){_.push(L?P.replace(O,"$1"):D||v)}),_});ne.exports=C},8916:(ne,Z,g)=>{var S=g(3423);ne.exports=function O(C){if("string"==typeof C||S(C))return C;var N=C+"";return"0"==N&&1/C==-1/0?"-0":N}},7075:ne=>{var g=Function.prototype.toString;ne.exports=function S(b){if(null!=b){try{return g.call(b)}catch{}try{return b+""}catch{}}return""}},1075:ne=>{ne.exports=function Z(g){return function(){return g}}},7826:ne=>{ne.exports=function Z(g,S){return g===S||g!=g&&S!=S}},5440:(ne,Z,g)=>{var S=g(2202);ne.exports=function b(O,C,N){var _=null==O?void 0:S(O,C);return void 0===_?N:_}},2494:(ne,Z,g)=>{var S=g(3274),b=g(4583);ne.exports=function O(C,N){return null!=C&&b(C,N,S)}},5657:ne=>{ne.exports=function Z(g){return g}},1955:(ne,Z,g)=>{var S=g(3022),b=g(3714),O=Object.prototype,C=O.hasOwnProperty,N=O.propertyIsEnumerable,_=S(function(){return arguments}())?S:function(v){return b(v)&&C.call(v,"callee")&&!N.call(v,"callee")};ne.exports=_},2261:ne=>{ne.exports=Array.isArray},2447:(ne,Z,g)=>{var S=g(6861),b=g(7765);ne.exports=function O(C){return null!=C&&b(C.length)&&!S(C)}},7525:(ne,Z,g)=>{ne=g.nmd(ne);var S=g(8492),b=g(5706),O=Z&&!Z.nodeType&&Z,C=O&&ne&&!ne.nodeType&&ne,_=C&&C.exports===O?S.Buffer:void 0;ne.exports=(_?_.isBuffer:void 0)||b},6030:(ne,Z,g)=>{var b=g(8492).isFinite;ne.exports=function O(C){return"number"==typeof C&&b(C)}},6861:(ne,Z,g)=>{var S=g(4590),b=g(9794);ne.exports=function v(D){if(!b(D))return!1;var L=S(D);return"[object Function]"==L||"[object GeneratorFunction]"==L||"[object AsyncFunction]"==L||"[object Proxy]"==L}},7765:ne=>{ne.exports=function g(S){return"number"==typeof S&&S>-1&&S%1==0&&S<=9007199254740991}},9794:ne=>{ne.exports=function Z(g){var S=typeof g;return null!=g&&("object"==S||"function"==S)}},3714:ne=>{ne.exports=function Z(g){return null!=g&&"object"==typeof g}},3423:(ne,Z,g)=>{var S=g(4590),b=g(3714);ne.exports=function C(N){return"symbol"==typeof N||b(N)&&"[object Symbol]"==S(N)}},4868:(ne,Z,g)=>{var S=g(8902),b=g(1156),O=g(8849),C=O&&O.isTypedArray,N=C?b(C):S;ne.exports=N},4614:(ne,Z,g)=>{var S=g(1384),b=g(190),O=g(2447);ne.exports=function C(N){return O(N)?S(N):b(N)}},6990:function(ne,Z,g){var S;ne=g.nmd(ne),function(){var b,_="Expected a function",D="__lodash_hash_undefined__",P="__lodash_placeholder__",x=32,k=128,Ee=1/0,Fe=9007199254740991,ge=4294967295,ct=[["ary",k],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",x],["partialRight",64],["rearg",256]],Ye="[object Arguments]",ye="[object Array]",R="[object Boolean]",ae="[object Date]",Le="[object Error]",tt="[object Function]",fe="[object GeneratorFunction]",ee="[object Map]",q="[object Number]",F="[object Object]",ue="[object Promise]",We="[object RegExp]",He="[object Set]",gt="[object String]",Ft="[object Symbol]",Gt="[object WeakMap]",Ie="[object ArrayBuffer]",Q="[object DataView]",I="[object Float32Array]",ce="[object Float64Array]",$e="[object Int8Array]",Qe="[object Int16Array]",at="[object Int32Array]",$t="[object Uint8Array]",sn="[object Uint8ClampedArray]",$n="[object Uint16Array]",Cn="[object Uint32Array]",Mn=/\b__p \+= '';/g,ko=/\b(__p \+=) '' \+/g,ys=/(__e\(.*?\)|\b__t\)) \+\n'';/g,es=/&(?:amp|lt|gt|quot|#39);/g,qi=/[&<>"']/g,Yr=RegExp(es.source),vs=RegExp(qi.source),Gs=/<%-([\s\S]+?)%>/g,Oo=/<%([\s\S]+?)%>/g,_o=/<%=([\s\S]+?)%>/g,Qd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fh=/^\w*$/,ph=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gl=/[\\^$.*+?()[\]{}|]/g,da=RegExp(Gl.source),ic=/^\s+/,Wl=/\s/,$l=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$c=/\{\n\/\* \[wrapped with (.+)\] \*/,mh=/,? & /,Yc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eu=/[()=,{}\[\]\/\s]/,Xc=/\\(\\)?/g,Yl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Li=/\w*$/,Si=/^[-+]0x[0-9a-f]+$/i,qc=/^0b[01]+$/i,Ws=/^\[object .+?Constructor\]$/,Ta=/^0o[0-7]+$/i,ua=/^(?:0|[1-9]\d*)$/,rc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Po=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Re="\\ud800-\\udfff",be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Be="\\u2700-\\u27bf",Xe="a-z\\xdf-\\xf6\\xf8-\\xff",en="A-Z\\xc0-\\xd6\\xd8-\\xde",yn="\\ufe0e\\ufe0f",bo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",No="["+Re+"]",Kc="["+bo+"]",$s="["+be+"]",Lr="\\d+",Fo="["+Be+"]",Bi="["+Xe+"]",Rr="[^"+Re+bo+Lr+Be+Xe+en+"]",hi="\\ud83c[\\udffb-\\udfff]",ts="[^"+Re+"]",Xl="(?:\\ud83c[\\udde6-\\uddff]){2}",ke="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+en+"]",ht="(?:"+Bi+"|"+Rr+")",Nt="(?:"+je+"|"+Rr+")",Ht="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Yn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",xr="(?:"+$s+"|"+hi+")?",xn="["+yn+"]?",PS=xn+xr+"(?:\\u200d(?:"+[ts,Xl,ke].join("|")+")"+xn+xr+")*",Tv="(?:"+[Fo,Xl,ke].join("|")+")"+PS,Pt="(?:"+[ts+$s+"?",$s,Xl,ke,No].join("|")+")",up=RegExp("['\u2019]","g"),Vn=RegExp($s,"g"),xi=RegExp(hi+"(?="+hi+")|"+Pt+PS,"g"),NS=RegExp([je+"?"+Bi+"+"+Ht+"(?="+[Kc,je,"$"].join("|")+")",Nt+"+"+Yn+"(?="+[Kc,je+ht,"$"].join("|")+")",je+"?"+ht+"+"+Ht,je+"+"+Yn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lr,Tv].join("|"),"g"),vN=RegExp("[\\u200d"+Re+be+yn+"]"),FS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,l_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xs=-1,tr={};tr[I]=tr[ce]=tr[$e]=tr[Qe]=tr[at]=tr[$t]=tr[sn]=tr[$n]=tr[Cn]=!0,tr[Ye]=tr[ye]=tr[Ie]=tr[R]=tr[Q]=tr[ae]=tr[Le]=tr[tt]=tr[ee]=tr[q]=tr[F]=tr[We]=tr[He]=tr[gt]=tr[Gt]=!1;var Gi={};Gi[Ye]=Gi[ye]=Gi[Ie]=Gi[Q]=Gi[R]=Gi[ae]=Gi[I]=Gi[ce]=Gi[$e]=Gi[Qe]=Gi[at]=Gi[ee]=Gi[q]=Gi[F]=Gi[We]=Gi[He]=Gi[gt]=Gi[Ft]=Gi[$t]=Gi[sn]=Gi[$n]=Gi[Cn]=!0,Gi[Le]=Gi[tt]=Gi[Gt]=!1;var EN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},AN=parseFloat,SN=parseInt,Iv="object"==typeof global&&global&&global.Object===Object&&global,CN="object"==typeof self&&self&&self.Object===Object&&self,ao=Iv||CN||Function("return this")(),LS=Z&&!Z.nodeType&&Z,yo=LS&&ne&&!ne.nodeType&&ne,Dn=yo&&yo.exports===LS,Dv=Dn&&Iv.process,ha=function(){try{return yo&&yo.require&&yo.require("util").types||Dv&&Dv.binding&&Dv.binding("util")}catch{}}(),BS=ha&&ha.isArrayBuffer,At=ha&&ha.isDate,jS=ha&&ha.isMap,Kt=ha&&ha.isRegExp,gh=ha&&ha.isSet,Rv=ha&&ha.isTypedArray;function is(lt,Et,bt){switch(bt.length){case 0:return lt.call(Et);case 1:return lt.call(Et,bt[0]);case 2:return lt.call(Et,bt[0],bt[1]);case 3:return lt.call(Et,bt[0],bt[1],bt[2])}return lt.apply(Et,bt)}function US(lt,Et,bt,Qt){for(var On=-1,wi=null==lt?0:lt.length;++On<wi;){var kr=lt[On];Et(Qt,kr,bt(kr),lt)}return Qt}function Lo(lt,Et){for(var bt=-1,Qt=null==lt?0:lt.length;++bt<Qt&&!1!==Et(lt[bt],bt,lt););return lt}function hp(lt,Et){for(var bt=null==lt?0:lt.length;bt--&&!1!==Et(lt[bt],bt,lt););return lt}function fp(lt,Et){for(var bt=-1,Qt=null==lt?0:lt.length;++bt<Qt;)if(!Et(lt[bt],bt,lt))return!1;return!0}function oc(lt,Et){for(var bt=-1,Qt=null==lt?0:lt.length,On=0,wi=[];++bt<Qt;){var kr=lt[bt];Et(kr,bt,lt)&&(wi[On++]=kr)}return wi}function pp(lt,Et){return!(null==lt||!lt.length)&&Kl(lt,Et,0)>-1}function si(lt,Et,bt){for(var Qt=-1,On=null==lt?0:lt.length;++Qt<On;)if(bt(Et,lt[Qt]))return!0;return!1}function Wi(lt,Et){for(var bt=-1,Qt=null==lt?0:lt.length,On=Array(Qt);++bt<Qt;)On[bt]=Et(lt[bt],bt,lt);return On}function sc(lt,Et){for(var bt=-1,Qt=Et.length,On=lt.length;++bt<Qt;)lt[On+bt]=Et[bt];return lt}function vo(lt,Et,bt,Qt){var On=-1,wi=null==lt?0:lt.length;for(Qt&&wi&&(bt=lt[++On]);++On<wi;)bt=Et(bt,lt[On],On,lt);return bt}function kv(lt,Et,bt,Qt){var On=null==lt?0:lt.length;for(Qt&&On&&(bt=lt[--On]);On--;)bt=Et(bt,lt[On],On,lt);return bt}function Ov(lt,Et){for(var bt=-1,Qt=null==lt?0:lt.length;++bt<Qt;)if(Et(lt[bt],bt,lt))return!0;return!1}var Mi=Nv("length");function mp(lt,Et,bt){var Qt;return bt(lt,function(On,wi,kr){if(Et(On,wi,kr))return Qt=wi,!1}),Qt}function tu(lt,Et,bt,Qt){for(var On=lt.length,wi=bt+(Qt?1:-1);Qt?wi--:++wi<On;)if(Et(lt[wi],wi,lt))return wi;return-1}function Kl(lt,Et,bt){return Et==Et?function yp(lt,Et,bt){for(var Qt=bt-1,On=lt.length;++Qt<On;)if(lt[Qt]===Et)return Qt;return-1}(lt,Et,bt):tu(lt,Pv,bt)}function d_(lt,Et,bt,Qt){for(var On=bt-1,wi=lt.length;++On<wi;)if(Qt(lt[On],Et))return On;return-1}function Pv(lt){return lt!=lt}function gp(lt,Et){var bt=null==lt?0:lt.length;return bt?Lv(lt,Et)/bt:NaN}function Nv(lt){return function(Et){return null==Et?b:Et[lt]}}function Fv(lt){return function(Et){return null==lt?b:lt[Et]}}function VS(lt,Et,bt,Qt,On){return On(lt,function(wi,kr,ji){bt=Qt?(Qt=!1,wi):Et(bt,wi,kr,ji)}),bt}function Lv(lt,Et){for(var bt,Qt=-1,On=lt.length;++Qt<On;){var wi=Et(lt[Qt]);wi!==b&&(bt=bt===b?wi:bt+wi)}return bt}function Jl(lt,Et){for(var bt=-1,Qt=Array(lt);++bt<lt;)Qt[bt]=Et(bt);return Qt}function _h(lt){return lt&&lt.slice(0,yh(lt)+1).replace(ic,"")}function ws(lt){return function(Et){return lt(Et)}}function h_(lt,Et){return Wi(Et,function(bt){return lt[bt]})}function bh(lt,Et){return lt.has(Et)}function f_(lt,Et){for(var bt=-1,Qt=lt.length;++bt<Qt&&Kl(Et,lt[bt],0)>-1;);return bt}function Zl(lt,Et){for(var bt=lt.length;bt--&&Kl(Et,lt[bt],0)>-1;);return bt}var Jc=Fv({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),HS=Fv({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rt(lt){return"\\"+EN[lt]}function zt(lt){return vN.test(lt)}function Ql(lt){var Et=-1,bt=Array(lt.size);return lt.forEach(function(Qt,On){bt[++Et]=[On,Qt]}),bt}function jv(lt,Et){return function(bt){return lt(Et(bt))}}function Zc(lt,Et){for(var bt=-1,Qt=lt.length,On=0,wi=[];++bt<Qt;){var kr=lt[bt];(kr===Et||kr===P)&&(lt[bt]=P,wi[On++]=bt)}return wi}function bp(lt){var Et=-1,bt=Array(lt.size);return lt.forEach(function(Qt){bt[++Et]=Qt}),bt}function Bo(lt){return zt(lt)?function g_(lt){for(var Et=xi.lastIndex=0;xi.test(lt);)++Et;return Et}(lt):Mi(lt)}function Xn(lt){return zt(lt)?function Uv(lt){return lt.match(xi)||[]}(lt):function MN(lt){return lt.split("")}(lt)}function yh(lt){for(var Et=lt.length;Et--&&Wl.test(lt.charAt(Et)););return Et}var m_=Fv({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),xh=function lt(Et){var u,bt=(Et=null==Et?ao:xh.defaults(ao.Object(),Et,xh.pick(ao,l_))).Array,Qt=Et.Date,On=Et.Error,wi=Et.Function,kr=Et.Math,ji=Et.Object,vp=Et.RegExp,GS=Et.String,Ys=Et.TypeError,rs=bt.prototype,ed=ji.prototype,xp=Et["__core-js_shared__"],wp=wi.prototype.toString,Ti=ed.hasOwnProperty,$S=0,__=(u=/[^.]+$/.exec(xp&&xp.keys&&xp.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Ep=ed.toString,YS=wp.call(ji),XS=ao._,Pn=vp("^"+wp.call(Ti).replace(Gl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ap=Dn?Et.Buffer:b,Qc=Et.Symbol,Sp=Et.Uint8Array,Jt=Ap?Ap.allocUnsafe:b,Cp=jv(ji.getPrototypeOf,ji),b_=ji.create,jt=ed.propertyIsEnumerable,Br=rs.splice,_i=Qc?Qc.isConcatSpreadable:b,wr=Qc?Qc.iterator:b,Er=Qc?Qc.toStringTag:b,lc=function(){try{var u=pu(ji,"defineProperty");return u({},"",{}),u}catch{}}(),Es=Et.clearTimeout!==ao.clearTimeout&&Et.clearTimeout,Vv=Qt&&Qt.now!==ao.Date.now&&Qt.now,zv=Et.setTimeout!==ao.setTimeout&&Et.setTimeout,td=kr.ceil,Mp=kr.floor,y_=ji.getOwnPropertySymbols,gr=Ap?Ap.isBuffer:b,qt=Et.isFinite,Wn=rs.join,nr=jv(ji.keys,ji),Ii=kr.max,Or=kr.min,xo=Qt.now,nu=Et.parseInt,_r=kr.random,el=rs.reverse,tl=pu(Et,"DataView"),Rn=pu(Et,"Map"),nd=pu(Et,"Promise"),id=pu(Et,"Set"),Ia=pu(Et,"WeakMap"),Ki=pu(ji,"create"),nl=Ia&&new Ia,pa={},Da=gi(tl),wh=gi(Rn),Hv=gi(nd),il=gi(id),dc=gi(Ia),rl=Qc?Qc.prototype:b,uc=rl?rl.valueOf:b,ai=rl?rl.toString:b;function Ne(u){if(dr(u)&&!zn(u)&&!(u instanceof ii)){if(u instanceof Ar)return u;if(Ti.call(u,"__wrapped__"))return yx(u)}return new Ar(u)}var ol=function(){function u(){}return function(p){if(!Di(p))return{};if(b_)return b_(p);u.prototype=p;var w=new u;return u.prototype=b,w}}();function Eh(){}function Ar(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=b}function ii(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function ru(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var oe=u[p];this.set(oe[0],oe[1])}}function jr(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var oe=u[p];this.set(oe[0],oe[1])}}function hc(u){var p=-1,w=null==u?0:u.length;for(this.clear();++p<w;){var oe=u[p];this.set(oe[0],oe[1])}}function ou(u){var p=-1,w=null==u?0:u.length;for(this.__data__=new hc;++p<w;)this.add(u[p])}function Ra(u){var p=this.__data__=new jr(u);this.size=p.size}function ZS(u,p){var w=zn(u),oe=!w&&ml(u),Se=!w&&!oe&&gl(u),Ue=!w&&!oe&&!Se&&vc(u),et=w||oe||Se||Ue,ot=et?Jl(u.length,GS):[],ft=ot.length;for(var Ct in u)(p||Ti.call(u,Ct))&&(!et||!("length"==Ct||Se&&("offset"==Ct||"parent"==Ct)||Ue&&("buffer"==Ct||"byteLength"==Ct||"byteOffset"==Ct)||hl(Ct,ft)))&&ot.push(Ct);return ot}function QS(u){var p=u.length;return p?u[al(0,p-1)]:b}function VN(u,p){return Kp(Uo(u),sl(p,0,u.length))}function od(u){return Kp(Uo(u))}function ka(u,p,w){(w!==b&&!Zs(u[p],w)||w===b&&!(p in u))&&Oa(u,p,w)}function Ip(u,p,w){var oe=u[p];(!Ti.call(u,p)||!Zs(oe,w)||w===b&&!(p in u))&&Oa(u,p,w)}function w_(u,p){for(var w=u.length;w--;)if(Zs(u[w][0],p))return w;return-1}function lo(u,p,w,oe){return fc(u,function(Se,Ue,et){p(oe,Se,w(Se),et)}),oe}function Sh(u,p){return u&&Vo(p,Kr(p),u)}function Oa(u,p,w){"__proto__"==p&&lc?lc(u,p,{configurable:!0,enumerable:!0,value:w,writable:!0}):u[p]=w}function Dp(u,p){for(var w=-1,oe=p.length,Se=bt(oe),Ue=null==u;++w<oe;)Se[w]=Ue?b:Tb(u,p[w]);return Se}function sl(u,p,w){return u==u&&(w!==b&&(u=u<=w?u:w),p!==b&&(u=u>=p?u:p)),u}function As(u,p,w,oe,Se,Ue){var et,ot=1&p,ft=2&p,Ct=4&p;if(w&&(et=Se?w(u,oe,Se,Ue):w(u)),et!==b)return et;if(!Di(u))return u;var Mt=zn(u);if(Mt){if(et=function Nh(u){var p=u.length,w=new u.constructor(p);return p&&"string"==typeof u[0]&&Ti.call(u,"index")&&(w.index=u.index,w.input=u.input),w}(u),!ot)return Uo(u,et)}else{var Lt=Ao(u),Yt=Lt==tt||Lt==fe;if(gl(u))return U_(u,ot);if(Lt==F||Lt==Ye||Yt&&!Se){if(et=ft||Yt?{}:gx(u),!ot)return ft?function lC(u,p){return Vo(u,mx(u),p)}(u,function Xs(u,p){return u&&Vo(p,cs(p),u)}(et,u)):function mc(u,p){return Vo(u,px(u),p)}(u,Sh(et,u))}else{if(!Gi[Lt])return Se?u:{};et=function Fh(u,p,w){var oe=u.constructor;switch(p){case Ie:return dd(u);case R:case ae:return new oe(+u);case Q:return function Pa(u,p){var w=p?dd(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.byteLength)}(u,w);case I:case ce:case $e:case Qe:case at:case $t:case sn:case $n:case Cn:return dx(u,w);case ee:return new oe;case q:case gt:return new oe(u);case We:return function V_(u){var p=new u.constructor(u.source,Li.exec(u));return p.lastIndex=u.lastIndex,p}(u);case He:return new oe;case Ft:return function z_(u){return uc?ji(uc.call(u)):{}}(u)}}(u,Lt,ot)}}Ue||(Ue=new Ra);var cn=Ue.get(u);if(cn)return cn;Ue.set(u,et),Mu(u)?u.forEach(function(Sn){et.add(As(Sn,p,w,Sn,u,Ue))}):vb(u)&&u.forEach(function(Sn,oi){et.set(oi,As(Sn,p,w,oi,u,Ue))});var Zn=Mt?b:(Ct?ft?Oh:hu:ft?cs:Kr)(u);return Lo(Zn||u,function(Sn,oi){Zn&&(Sn=u[oi=Sn]),Ip(et,oi,As(Sn,p,w,oi,u,Ue))}),et}function A_(u,p,w){var oe=w.length;if(null==u)return!oe;for(u=ji(u);oe--;){var Se=w[oe],et=u[Se];if(et===b&&!(Se in u)||!(0,p[Se])(et))return!1}return!0}function Rp(u,p,w){if("function"!=typeof u)throw new Ys(_);return Bh(function(){u.apply(b,w)},p)}function sd(u,p,w,oe){var Se=-1,Ue=pp,et=!0,ot=u.length,ft=[],Ct=p.length;if(!ot)return ft;w&&(p=Wi(p,ws(w))),oe?(Ue=si,et=!1):p.length>=200&&(Ue=bh,et=!1,p=new ou(p));e:for(;++Se<ot;){var Mt=u[Se],Lt=null==w?Mt:w(Mt);if(Mt=oe||0!==Mt?Mt:0,et&&Lt==Lt){for(var Yt=Ct;Yt--;)if(p[Yt]===Lt)continue e;ft.push(Mt)}else Ue(p,Lt,oe)||ft.push(Mt)}return ft}Ne.templateSettings={escape:Gs,evaluate:Oo,interpolate:_o,variable:"",imports:{_:Ne}},(Ne.prototype=Eh.prototype).constructor=Ne,(Ar.prototype=ol(Eh.prototype)).constructor=Ar,(ii.prototype=ol(Eh.prototype)).constructor=ii,ru.prototype.clear=function os(){this.__data__=Ki?Ki(null):{},this.size=0},ru.prototype.delete=function jo(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p},ru.prototype.get=function v_(u){var p=this.__data__;if(Ki){var w=p[u];return w===D?b:w}return Ti.call(p,u)?p[u]:b},ru.prototype.has=function rd(u){var p=this.__data__;return Ki?p[u]!==b:Ti.call(p,u)},ru.prototype.set=function Tp(u,p){var w=this.__data__;return this.size+=this.has(u)?0:1,w[u]=Ki&&p===b?D:p,this},jr.prototype.clear=function x_(){this.__data__=[],this.size=0},jr.prototype.delete=function qS(u){var p=this.__data__,w=w_(p,u);return!(w<0||(w==p.length-1?p.pop():Br.call(p,w,1),--this.size,0))},jr.prototype.get=function KS(u){var p=this.__data__,w=w_(p,u);return w<0?b:p[w][1]},jr.prototype.has=function DN(u){return w_(this.__data__,u)>-1},jr.prototype.set=function JS(u,p){var w=this.__data__,oe=w_(w,u);return oe<0?(++this.size,w.push([u,p])):w[oe][1]=p,this},hc.prototype.clear=function RN(){this.size=0,this.__data__={hash:new ru,map:new(Rn||jr),string:new ru}},hc.prototype.delete=function kN(u){var p=ul(this,u).delete(u);return this.size-=p?1:0,p},hc.prototype.get=function ON(u){return ul(this,u).get(u)},hc.prototype.has=function PN(u){return ul(this,u).has(u)},hc.prototype.set=function NN(u,p){var w=ul(this,u),oe=w.size;return w.set(u,p),this.size+=w.size==oe?0:1,this},ou.prototype.add=ou.prototype.push=function FN(u){return this.__data__.set(u,D),this},ou.prototype.has=function LN(u){return this.__data__.has(u)},Ra.prototype.clear=function BN(){this.__data__=new jr,this.size=0},Ra.prototype.delete=function jN(u){var p=this.__data__,w=p.delete(u);return this.size=p.size,w},Ra.prototype.get=function UN(u){return this.__data__.get(u)},Ra.prototype.has=function Gv(u){return this.__data__.has(u)},Ra.prototype.set=function Wv(u,p){var w=this.__data__;if(w instanceof jr){var oe=w.__data__;if(!Rn||oe.length<199)return oe.push([u,p]),this.size=++w.size,this;w=this.__data__=new hc(oe)}return w.set(u,p),this.size=w.size,this};var fc=hx(pc),S_=hx(C_,!0);function $v(u,p){var w=!0;return fc(u,function(oe,Se,Ue){return w=!!p(oe,Se,Ue)}),w}function ad(u,p,w){for(var oe=-1,Se=u.length;++oe<Se;){var Ue=u[oe],et=p(Ue);if(null!=et&&(ot===b?et==et&&!Ho(et):w(et,ot)))var ot=et,ft=Ue}return ft}function cd(u,p){var w=[];return fc(u,function(oe,Se,Ue){p(oe,Se,Ue)&&w.push(oe)}),w}function Xr(u,p,w,oe,Se){var Ue=-1,et=u.length;for(w||(w=$p),Se||(Se=[]);++Ue<et;){var ot=u[Ue];p>0&&w(ot)?p>1?Xr(ot,p-1,w,oe,Se):sc(Se,ot):oe||(Se[Se.length]=ot)}return Se}var Yv=Bp(),eC=Bp(!0);function pc(u,p){return u&&Yv(u,p,Kr)}function C_(u,p){return u&&eC(u,p,Kr)}function kp(u,p){return oc(p,function(w){return yc(u[w])})}function su(u,p){for(var w=0,oe=(p=Kn(p,u)).length;null!=u&&w<oe;)u=u[La(p[w++])];return w&&w==oe?u:b}function M_(u,p,w){var oe=p(u);return zn(u)?oe:sc(oe,w(u))}function uo(u){return null==u?u===b?"[object Undefined]":"[object Null]":Er&&Er in ji(u)?function K_(u){var p=Ti.call(u,Er),w=u[Er];try{u[Er]=b;var oe=!0}catch{}var Se=Ep.call(u);return oe&&(p?u[Er]=w:delete u[Er]),Se}(u):function bx(u){return Ep.call(u)}(u)}function T_(u,p){return u>p}function I_(u,p){return null!=u&&Ti.call(u,p)}function zN(u,p){return null!=u&&p in ji(u)}function D_(u,p,w){for(var oe=w?si:pp,Se=u[0].length,Ue=u.length,et=Ue,ot=bt(Ue),ft=1/0,Ct=[];et--;){var Mt=u[et];et&&p&&(Mt=Wi(Mt,ws(p))),ft=Or(Mt.length,ft),ot[et]=!w&&(p||Se>=120&&Mt.length>=120)?new ou(et&&Mt):b}Mt=u[0];var Lt=-1,Yt=ot[0];e:for(;++Lt<Se&&Ct.length<ft;){var cn=Mt[Lt],wn=p?p(cn):cn;if(cn=w||0!==cn?cn:0,!(Yt?bh(Yt,wn):oe(Ct,wn,w))){for(et=Ue;--et;){var Zn=ot[et];if(!(Zn?bh(Zn,wn):oe(u[et],wn,w)))continue e}Yt&&Yt.push(wn),Ct.push(cn)}}return Ct}function au(u,p,w){var oe=null==(u=tb(u,p=Kn(p,u)))?u:u[La(ho(p))];return null==oe?b:is(oe,u,w)}function qv(u){return dr(u)&&uo(u)==Ye}function cu(u,p,w,oe,Se){return u===p||(null==u||null==p||!dr(u)&&!dr(p)?u!=u&&p!=p:function iC(u,p,w,oe,Se,Ue){var et=zn(u),ot=zn(p),ft=et?ye:Ao(u),Ct=ot?ye:Ao(p),Mt=(ft=ft==Ye?F:ft)==F,Lt=(Ct=Ct==Ye?F:Ct)==F,Yt=ft==Ct;if(Yt&&gl(u)){if(!gl(p))return!1;et=!0,Mt=!1}if(Yt&&!Mt)return Ue||(Ue=new Ra),et||vc(u)?_c(u,p,w,oe,Se,Ue):function hC(u,p,w,oe,Se,Ue,et){switch(w){case Q:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case Ie:return!(u.byteLength!=p.byteLength||!Ue(new Sp(u),new Sp(p)));case R:case ae:case q:return Zs(+u,+p);case Le:return u.name==p.name&&u.message==p.message;case We:case gt:return u==p+"";case ee:var ot=Ql;case He:if(ot||(ot=bp),u.size!=p.size&&!(1&oe))return!1;var Ct=et.get(u);if(Ct)return Ct==p;oe|=2,et.set(u,p);var Mt=_c(ot(u),ot(p),oe,Se,Ue,et);return et.delete(u),Mt;case Ft:if(uc)return uc.call(u)==uc.call(p)}return!1}(u,p,ft,w,oe,Se,Ue);if(!(1&w)){var cn=Mt&&Ti.call(u,"__wrapped__"),wn=Lt&&Ti.call(p,"__wrapped__");if(cn||wn){var Zn=cn?u.value():u,Sn=wn?p.value():p;return Ue||(Ue=new Ra),Se(Zn,Sn,w,oe,Ue)}}return!!Yt&&(Ue||(Ue=new Ra),function Hp(u,p,w,oe,Se,Ue){var et=1&w,ot=hu(u),ft=ot.length;if(ft!=hu(p).length&&!et)return!1;for(var Lt=ft;Lt--;){var Yt=ot[Lt];if(!(et?Yt in p:Ti.call(p,Yt)))return!1}var cn=Ue.get(u),wn=Ue.get(p);if(cn&&wn)return cn==p&&wn==u;var Zn=!0;Ue.set(u,p),Ue.set(p,u);for(var Sn=et;++Lt<ft;){var oi=u[Yt=ot[Lt]],ci=p[Yt];if(oe)var Rs=et?oe(ci,oi,Yt,p,u,Ue):oe(oi,ci,Yt,u,p,Ue);if(!(Rs===b?oi===ci||Se(oi,ci,w,oe,Ue):Rs)){Zn=!1;break}Sn||(Sn="constructor"==Yt)}if(Zn&&!Sn){var To=u.constructor,ks=p.constructor;To!=ks&&"constructor"in u&&"constructor"in p&&!("function"==typeof To&&To instanceof To&&"function"==typeof ks&&ks instanceof ks)&&(Zn=!1)}return Ue.delete(u),Ue.delete(p),Zn}(u,p,w,oe,Se,Ue))}(u,p,w,oe,cu,Se))}function R_(u,p,w,oe){var Se=w.length,Ue=Se,et=!oe;if(null==u)return!Ue;for(u=ji(u);Se--;){var ot=w[Se];if(et&&ot[2]?ot[1]!==u[ot[0]]:!(ot[0]in u))return!1}for(;++Se<Ue;){var ft=(ot=w[Se])[0],Ct=u[ft],Mt=ot[1];if(et&&ot[2]){if(Ct===b&&!(ft in u))return!1}else{var Lt=new Ra;if(oe)var Yt=oe(Ct,Mt,ft,u,p,Lt);if(!(Yt===b?cu(Mt,Ct,3,oe,Lt):Yt))return!1}}return!0}function rC(u){return!(!Di(u)||function pC(u){return!!__&&__ in u}(u))&&(yc(u)?Pn:Ws).test(gi(u))}function Qv(u){return"function"==typeof u?u:null==u?ls:"object"==typeof u?zn(u)?nx(u[0],u[1]):Pp(u):gw(u)}function k_(u){if(!ud(u))return nr(u);var p=[];for(var w in ji(u))Ti.call(u,w)&&"constructor"!=w&&p.push(w);return p}function Op(u,p){return u<p}function tx(u,p){var w=-1,oe=as(u)?bt(u.length):[];return fc(u,function(Se,Ue,et){oe[++w]=p(Se,Ue,et)}),oe}function Pp(u){var p=q_(u);return 1==p.length&&p[0][2]?Lh(p[0][0],p[0][1]):function(w){return w===u||R_(w,u,p)}}function nx(u,p){return Yp(u)&&Z_(p)?Lh(La(u),p):function(w){var oe=Tb(w,u);return oe===b&&oe===p?Go(w,u):cu(p,oe,3)}}function Ss(u,p,w,oe,Se){u!==p&&Yv(p,function(Ue,et){if(Se||(Se=new Ra),Di(Ue))!function ix(u,p,w,oe,Se,Ue,et){var ot=mu(u,w),ft=mu(p,w),Ct=et.get(ft);if(Ct)ka(u,w,Ct);else{var Mt=Ue?Ue(ot,ft,w+"",u,p,et):b,Lt=Mt===b;if(Lt){var Yt=zn(ft),cn=!Yt&&gl(ft),wn=!Yt&&!cn&&vc(ft);Mt=ft,Yt||cn||wn?zn(ot)?Mt=ot:Mr(ot)?Mt=Uo(ot):cn?(Lt=!1,Mt=U_(ft,!0)):wn?(Lt=!1,Mt=dx(ft,!0)):Mt=[]:fd(ft)||ml(ft)?(Mt=ot,ml(ot)?Mt=Zh(ot):(!Di(ot)||yc(ot))&&(Mt=gx(ft))):Lt=!1}Lt&&(et.set(ft,Mt),Se(Mt,ft,oe,Ue,et),et.delete(ft)),ka(u,w,Mt)}}(u,p,et,w,Ss,oe,Se);else{var ot=oe?oe(mu(u,et),Ue,et+"",u,p,Se):b;ot===b&&(ot=Ue),ka(u,et,ot)}},cs)}function O_(u,p){var w=u.length;if(w)return hl(p+=p<0?w:0,w)?u[p]:b}function Ui(u,p,w){p=p.length?Wi(p,function(Ue){return zn(Ue)?function(et){return su(et,1===Ue.length?Ue[0]:Ue)}:Ue}):[ls];var oe=-1;return p=Wi(p,ws(bn())),function IN(lt,Et){var bt=lt.length;for(lt.sort(Et);bt--;)lt[bt]=lt[bt].value;return lt}(tx(u,function(Ue,et,ot){return{criteria:Wi(p,function(Ct){return Ct(Ue)}),index:++oe,value:Ue}}),function(Ue,et){return function ux(u,p,w){for(var oe=-1,Se=u.criteria,Ue=p.criteria,et=Se.length,ot=w.length;++oe<et;){var ft=cC(Se[oe],Ue[oe]);if(ft)return oe>=ot?ft:ft*("desc"==w[oe]?-1:1)}return u.index-p.index}(Ue,et,w)})}function Mh(u,p,w){for(var oe=-1,Se=p.length,Ue={};++oe<Se;){var et=p[oe],ot=su(u,et);w(ot,et)&&lu(Ue,Kn(et,u),ot)}return Ue}function N_(u,p,w,oe){var Se=oe?d_:Kl,Ue=-1,et=p.length,ot=u;for(u===p&&(p=Uo(p)),w&&(ot=Wi(u,ws(w)));++Ue<et;)for(var ft=0,Ct=p[Ue],Mt=w?w(Ct):Ct;(ft=Se(ot,Mt,ft,oe))>-1;)ot!==u&&Br.call(ot,ft,1),Br.call(u,ft,1);return u}function F_(u,p){for(var w=u?p.length:0,oe=w-1;w--;){var Se=p[w];if(w==oe||Se!==Ue){var Ue=Se;hl(Se)?Br.call(u,Se,1):Fp(u,Se)}}return u}function al(u,p){return u+Mp(_r()*(p-u+1))}function L_(u,p){var w="";if(!u||p<1||p>Fe)return w;do{p%2&&(w+=u),(p=Mp(p/2))&&(u+=u)}while(p);return w}function ri(u,p){return qp(eb(u,p,ls),u+"")}function oC(u){return QS(_l(u))}function cl(u,p){var w=_l(u);return Kp(w,sl(p,0,w.length))}function lu(u,p,w,oe){if(!Di(u))return u;for(var Se=-1,Ue=(p=Kn(p,u)).length,et=Ue-1,ot=u;null!=ot&&++Se<Ue;){var ft=La(p[Se]),Ct=w;if("__proto__"===ft||"constructor"===ft||"prototype"===ft)return u;if(Se!=et){var Mt=ot[ft];(Ct=oe?oe(Mt,ft,ot):b)===b&&(Ct=Di(Mt)?Mt:hl(p[Se+1])?[]:{})}Ip(ot,ft,Ct),ot=ot[ft]}return u}var rx=nl?function(u,p){return nl.set(u,p),u}:ls,ox=lc?function(u,p){return lc(u,"toString",{configurable:!0,enumerable:!1,value:sf(p),writable:!0})}:ls;function sx(u){return Kp(_l(u))}function Ms(u,p,w){var oe=-1,Se=u.length;p<0&&(p=-p>Se?0:Se+p),(w=w>Se?Se:w)<0&&(w+=Se),Se=p>w?0:w-p>>>0,p>>>=0;for(var Ue=bt(Se);++oe<Se;)Ue[oe]=u[oe+p];return Ue}function sC(u,p){var w;return fc(u,function(oe,Se,Ue){return!(w=p(oe,Se,Ue))}),!!w}function An(u,p,w){var oe=0,Se=null==u?oe:u.length;if("number"==typeof p&&p==p&&Se<=2147483647){for(;oe<Se;){var Ue=oe+Se>>>1,et=u[Ue];null!==et&&!Ho(et)&&(w?et<=p:et<p)?oe=Ue+1:Se=Ue}return Se}return Np(u,p,ls,w)}function Np(u,p,w,oe){var Se=0,Ue=null==u?0:u.length;if(0===Ue)return 0;for(var et=(p=w(p))!=p,ot=null===p,ft=Ho(p),Ct=p===b;Se<Ue;){var Mt=Mp((Se+Ue)/2),Lt=w(u[Mt]),Yt=Lt!==b,cn=null===Lt,wn=Lt==Lt,Zn=Ho(Lt);if(et)var Sn=oe||wn;else Sn=Ct?wn&&(oe||Yt):ot?wn&&Yt&&(oe||!cn):ft?wn&&Yt&&!cn&&(oe||!Zn):!cn&&!Zn&&(oe?Lt<=p:Lt<p);Sn?Se=Mt+1:Ue=Mt}return Or(Ue,4294967294)}function aC(u,p){for(var w=-1,oe=u.length,Se=0,Ue=[];++w<oe;){var et=u[w],ot=p?p(et):et;if(!w||!Zs(ot,ft)){var ft=ot;Ue[Se++]=0===et?0:et}}return Ue}function ax(u){return"number"==typeof u?u:Ho(u)?NaN:+u}function Ts(u){if("string"==typeof u)return u;if(zn(u))return Wi(u,Ts)+"";if(Ho(u))return ai?ai.call(u):"";var p=u+"";return"0"==p&&1/u==-Ee?"-0":p}function ll(u,p,w){var oe=-1,Se=pp,Ue=u.length,et=!0,ot=[],ft=ot;if(w)et=!1,Se=si;else if(Ue>=200){var Ct=p?null:uC(u);if(Ct)return bp(Ct);et=!1,Se=bh,ft=new ou}else ft=p?[]:ot;e:for(;++oe<Ue;){var Mt=u[oe],Lt=p?p(Mt):Mt;if(Mt=w||0!==Mt?Mt:0,et&&Lt==Lt){for(var Yt=ft.length;Yt--;)if(ft[Yt]===Lt)continue e;p&&ft.push(Lt),ot.push(Mt)}else Se(ft,Lt,w)||(ft!==ot&&ft.push(Lt),ot.push(Mt))}return ot}function Fp(u,p){return null==(u=tb(u,p=Kn(p,u)))||delete u[La(ho(p))]}function ld(u,p,w,oe){return lu(u,p,w(su(u,p)),oe)}function Lp(u,p,w,oe){for(var Se=u.length,Ue=oe?Se:-1;(oe?Ue--:++Ue<Se)&&p(u[Ue],Ue,u););return w?Ms(u,oe?0:Ue,oe?Ue+1:Se):Ms(u,oe?Ue+1:0,oe?Se:Ue)}function cx(u,p){var w=u;return w instanceof ii&&(w=w.value()),vo(p,function(oe,Se){return Se.func.apply(Se.thisArg,sc([oe],Se.args))},w)}function B_(u,p,w){var oe=u.length;if(oe<2)return oe?ll(u[0]):[];for(var Se=-1,Ue=bt(oe);++Se<oe;)for(var et=u[Se],ot=-1;++ot<oe;)ot!=Se&&(Ue[Se]=sd(Ue[Se]||et,u[ot],p,w));return ll(Xr(Ue,1),p,w)}function lx(u,p,w){for(var oe=-1,Se=u.length,Ue=p.length,et={};++oe<Se;)w(et,u[oe],oe<Ue?p[oe]:b);return et}function j_(u){return Mr(u)?u:[]}function Dt(u){return"function"==typeof u?u:ls}function Kn(u,p){return zn(u)?u:Yp(u,p)?[u]:Co(bi(u))}var Cr=ri;function Pi(u,p,w){var oe=u.length;return w=w===b?oe:w,!p&&w>=oe?u:Ms(u,p,w)}var qr=Es||function(u){return ao.clearTimeout(u)};function U_(u,p){if(p)return u.slice();var w=u.length,oe=Jt?Jt(w):new u.constructor(w);return u.copy(oe),oe}function dd(u){var p=new u.constructor(u.byteLength);return new Sp(p).set(new Sp(u)),p}function dx(u,p){var w=p?dd(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.length)}function cC(u,p){if(u!==p){var w=u!==b,oe=null===u,Se=u==u,Ue=Ho(u),et=p!==b,ot=null===p,ft=p==p,Ct=Ho(p);if(!ot&&!Ct&&!Ue&&u>p||Ue&&et&&ft&&!ot&&!Ct||oe&&et&&ft||!w&&ft||!Se)return 1;if(!oe&&!Ue&&!Ct&&u<p||Ct&&w&&Se&&!oe&&!Ue||ot&&w&&Se||!et&&Se||!ft)return-1}return 0}function wo(u,p,w,oe){for(var Se=-1,Ue=u.length,et=w.length,ot=-1,ft=p.length,Ct=Ii(Ue-et,0),Mt=bt(ft+Ct),Lt=!oe;++ot<ft;)Mt[ot]=p[ot];for(;++Se<et;)(Lt||Se<Ue)&&(Mt[w[Se]]=u[Se]);for(;Ct--;)Mt[ot++]=u[Se++];return Mt}function Na(u,p,w,oe){for(var Se=-1,Ue=u.length,et=-1,ot=w.length,ft=-1,Ct=p.length,Mt=Ii(Ue-ot,0),Lt=bt(Mt+Ct),Yt=!oe;++Se<Mt;)Lt[Se]=u[Se];for(var cn=Se;++ft<Ct;)Lt[cn+ft]=p[ft];for(;++et<ot;)(Yt||Se<Ue)&&(Lt[cn+w[et]]=u[Se++]);return Lt}function Uo(u,p){var w=-1,oe=u.length;for(p||(p=bt(oe));++w<oe;)p[w]=u[w];return p}function Vo(u,p,w,oe){var Se=!w;w||(w={});for(var Ue=-1,et=p.length;++Ue<et;){var ot=p[Ue],ft=oe?oe(w[ot],u[ot],ot,w,u):b;ft===b&&(ft=u[ot]),Se?Oa(w,ot,ft):Ip(w,ot,ft)}return w}function Th(u,p){return function(w,oe){var Se=zn(w)?US:lo,Ue=p?p():{};return Se(w,u,bn(oe,2),Ue)}}function du(u){return ri(function(p,w){var oe=-1,Se=w.length,Ue=Se>1?w[Se-1]:b,et=Se>2?w[2]:b;for(Ue=u.length>3&&"function"==typeof Ue?(Se--,Ue):b,et&&So(w[0],w[1],et)&&(Ue=Se<3?b:Ue,Se=1),p=ji(p);++oe<Se;){var ot=w[oe];ot&&u(p,ot,oe,Ue)}return p})}function hx(u,p){return function(w,oe){if(null==w)return w;if(!as(w))return u(w,oe);for(var Se=w.length,Ue=p?Se:-1,et=ji(w);(p?Ue--:++Ue<Se)&&!1!==oe(et[Ue],Ue,et););return w}}function Bp(u){return function(p,w,oe){for(var Se=-1,Ue=ji(p),et=oe(p),ot=et.length;ot--;){var ft=et[u?ot:++Se];if(!1===w(Ue[ft],ft,Ue))break}return p}}function G_(u){return function(p){var w=zt(p=bi(p))?Xn(p):b,oe=w?w[0]:p.charAt(0),Se=w?Pi(w,1).join(""):p.slice(1);return oe[u]()+Se}}function dl(u){return function(p){return vo(Fb(aw(p).replace(up,"")),u,"")}}function Ih(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var w=ol(u.prototype),oe=u.apply(w,p);return Di(oe)?oe:w}}function jp(u){return function(p,w,oe){var Se=ji(p);if(!as(p)){var Ue=bn(w,3);p=Kr(p),w=function(ot){return Ue(Se[ot],ot,Se)}}var et=u(p,w,oe);return et>-1?Se[Ue?p[et]:et]:b}}function W_(u){return qs(function(p){var w=p.length,oe=w,Se=Ar.prototype.thru;for(u&&p.reverse();oe--;){var Ue=p[oe];if("function"!=typeof Ue)throw new Ys(_);if(Se&&!et&&"wrapper"==Ph(Ue))var et=new Ar([],!0)}for(oe=et?oe:w;++oe<w;){var ot=Ph(Ue=p[oe]),ft="wrapper"==ot?Gp(Ue):b;et=ft&&Ks(ft[0])&&424==ft[1]&&!ft[4].length&&1==ft[9]?et[Ph(ft[0])].apply(et,ft[3]):1==Ue.length&&Ks(Ue)?et[ot]():et.thru(Ue)}return function(){var Ct=arguments,Mt=Ct[0];if(et&&1==Ct.length&&zn(Mt))return et.plant(Mt).value();for(var Lt=0,Yt=w?p[Lt].apply(this,Ct):Mt;++Lt<w;)Yt=p[Lt].call(this,Yt);return Yt}})}function Dh(u,p,w,oe,Se,Ue,et,ot,ft,Ct){var Mt=p&k,Lt=1&p,Yt=2&p,cn=24&p,wn=512&p,Zn=Yt?b:Ih(u);return function Sn(){for(var oi=arguments.length,ci=bt(oi),Rs=oi;Rs--;)ci[Rs]=arguments[Rs];if(cn)var To=fu(Sn),ks=function zS(lt,Et){for(var bt=lt.length,Qt=0;bt--;)lt[bt]===Et&&++Qt;return Qt}(ci,To);if(oe&&(ci=wo(ci,oe,Se,cn)),Ue&&(ci=Na(ci,Ue,et,cn)),oi-=ks,cn&&oi<Ct){var br=Zc(ci,To);return ir(u,p,Dh,Sn.placeholder,w,ci,br,ot,ft,Ct-oi)}var ja=Lt?w:this,Ec=Yt?ja[u]:u;return oi=ci.length,ot?ci=function gC(u,p){for(var w=u.length,oe=Or(p.length,w),Se=Uo(u);oe--;){var Ue=p[oe];u[oe]=hl(Ue,w)?Se[Ue]:b}return u}(ci,ot):wn&&oi>1&&ci.reverse(),Mt&&ft<oi&&(ci.length=ft),this&&this!==ao&&this instanceof Sn&&(Ec=Zn||Ih(Ec)),Ec.apply(ja,ci)}}function $_(u,p){return function(w,oe){return function Xv(u,p,w,oe){return pc(u,function(Se,Ue,et){p(oe,w(Se),Ue,et)}),oe}(w,u,p(oe),{})}}function Rh(u,p){return function(w,oe){var Se;if(w===b&&oe===b)return p;if(w!==b&&(Se=w),oe!==b){if(Se===b)return oe;"string"==typeof w||"string"==typeof oe?(w=Ts(w),oe=Ts(oe)):(w=ax(w),oe=ax(oe)),Se=u(w,oe)}return Se}}function kh(u){return qs(function(p){return p=Wi(p,ws(bn())),ri(function(w){var oe=this;return u(p,function(Se){return is(Se,oe,w)})})})}function Up(u,p){var w=(p=p===b?" ":Ts(p)).length;if(w<2)return w?L_(p,u):p;var oe=L_(p,td(u/Bo(p)));return zt(p)?Pi(Xn(oe),0,u).join(""):oe.slice(0,u)}function Eo(u){return function(p,w,oe){return oe&&"number"!=typeof oe&&So(p,w,oe)&&(w=oe=b),p=xc(p),w===b?(w=p,p=0):w=xc(w),function Cs(u,p,w,oe){for(var Se=-1,Ue=Ii(td((p-u)/(w||1)),0),et=bt(Ue);Ue--;)et[oe?Ue:++Se]=u,u+=w;return et}(p,w,oe=oe===b?p<w?1:-1:xc(oe),u)}}function Fa(u){return function(p,w){return"string"==typeof p&&"string"==typeof w||(p=Ds(p),w=Ds(w)),u(p,w)}}function ir(u,p,w,oe,Se,Ue,et,ot,ft,Ct){var Mt=8&p;p|=Mt?x:64,4&(p&=~(Mt?64:x))||(p&=-4);var Zn=[u,p,Se,Mt?Ue:b,Mt?et:b,Mt?b:Ue,Mt?b:et,ot,ft,Ct],Sn=w.apply(b,Zn);return Ks(u)&&fl(Sn,Zn),Sn.placeholder=oe,nb(Sn,u,p)}function uu(u){var p=kr[u];return function(w,oe){if(w=Ds(w),(oe=null==oe?0:Or(Jn(oe),292))&&qt(w)){var Se=(bi(w)+"e").split("e");return+((Se=(bi(p(Se[0]+"e"+(+Se[1]+oe)))+"e").split("e"))[0]+"e"+(+Se[1]-oe))}return p(w)}}var uC=id&&1/bp(new id([,-0]))[1]==Ee?function(u){return new id(u)}:cf;function Vp(u){return function(p){var w=Ao(p);return w==ee?Ql(p):w==He?function ac(lt){var Et=-1,bt=Array(lt.size);return lt.forEach(function(Qt){bt[++Et]=[Qt,Qt]}),bt}(p):function u_(lt,Et){return Wi(Et,function(bt){return[bt,lt[bt]]})}(p,u(p))}}function gc(u,p,w,oe,Se,Ue,et,ot){var ft=2&p;if(!ft&&"function"!=typeof u)throw new Ys(_);var Ct=oe?oe.length:0;if(Ct||(p&=-97,oe=Se=b),et=et===b?et:Ii(Jn(et),0),ot=ot===b?ot:Jn(ot),Ct-=Se?Se.length:0,64&p){var Mt=oe,Lt=Se;oe=Se=b}var Yt=ft?b:Gp(u),cn=[u,p,w,oe,Se,Mt,Lt,Ue,et,ot];if(Yt&&function mC(u,p){var w=u[1],oe=p[1],Se=w|oe;if(!(Se<131)&&!(oe==k&&8==w||oe==k&&256==w&&u[7].length<=p[8]||384==oe&&p[7].length<=p[8]&&8==w))return u;1&oe&&(u[2]=p[2],Se|=1&w?0:4);var ot=p[3];if(ot){var ft=u[3];u[3]=ft?wo(ft,ot,p[4]):ot,u[4]=ft?Zc(u[3],P):p[4]}(ot=p[5])&&(u[5]=(ft=u[5])?Na(ft,ot,p[6]):ot,u[6]=ft?Zc(u[5],P):p[6]),(ot=p[7])&&(u[7]=ot),oe&k&&(u[8]=null==u[8]?p[8]:Or(u[8],p[8])),null==u[9]&&(u[9]=p[9]),u[0]=p[0],u[1]=Se}(cn,Yt),u=cn[0],p=cn[1],w=cn[2],oe=cn[3],Se=cn[4],!(ot=cn[9]=cn[9]===b?ft?0:u.length:Ii(cn[9]-Ct,0))&&24&p&&(p&=-25),p&&1!=p)wn=8==p||16==p?function fx(u,p,w){var oe=Ih(u);return function Se(){for(var Ue=arguments.length,et=bt(Ue),ot=Ue,ft=fu(Se);ot--;)et[ot]=arguments[ot];var Ct=Ue<3&&et[0]!==ft&&et[Ue-1]!==ft?[]:Zc(et,ft);return(Ue-=Ct.length)<w?ir(u,p,Dh,Se.placeholder,b,et,Ct,b,b,w-Ue):is(this&&this!==ao&&this instanceof Se?oe:u,this,et)}}(u,p,ot):p!=x&&33!=p||Se.length?Dh.apply(b,cn):function dC(u,p,w,oe){var Se=1&p,Ue=Ih(u);return function et(){for(var ot=-1,ft=arguments.length,Ct=-1,Mt=oe.length,Lt=bt(Mt+ft),Yt=this&&this!==ao&&this instanceof et?Ue:u;++Ct<Mt;)Lt[Ct]=oe[Ct];for(;ft--;)Lt[Ct++]=arguments[++ot];return is(Yt,Se?w:this,Lt)}}(u,p,w,oe);else var wn=function H_(u,p,w){var oe=1&p,Se=Ih(u);return function Ue(){return(this&&this!==ao&&this instanceof Ue?Se:u).apply(oe?w:this,arguments)}}(u,p,w);return nb((Yt?rx:fl)(wn,cn),u,p)}function Y_(u,p,w,oe){return u===b||Zs(u,ed[w])&&!Ti.call(oe,w)?p:u}function X_(u,p,w,oe,Se,Ue){return Di(u)&&Di(p)&&(Ue.set(p,u),Ss(u,p,b,X_,Ue),Ue.delete(p)),u}function zp(u){return fd(u)?b:u}function _c(u,p,w,oe,Se,Ue){var et=1&w,ot=u.length,ft=p.length;if(ot!=ft&&!(et&&ft>ot))return!1;var Ct=Ue.get(u),Mt=Ue.get(p);if(Ct&&Mt)return Ct==p&&Mt==u;var Lt=-1,Yt=!0,cn=2&w?new ou:b;for(Ue.set(u,p),Ue.set(p,u);++Lt<ot;){var wn=u[Lt],Zn=p[Lt];if(oe)var Sn=et?oe(Zn,wn,Lt,p,u,Ue):oe(wn,Zn,Lt,u,p,Ue);if(Sn!==b){if(Sn)continue;Yt=!1;break}if(cn){if(!Ov(p,function(oi,ci){if(!bh(cn,ci)&&(wn===oi||Se(wn,oi,w,oe,Ue)))return cn.push(ci)})){Yt=!1;break}}else if(wn!==Zn&&!Se(wn,Zn,w,oe,Ue)){Yt=!1;break}}return Ue.delete(u),Ue.delete(p),Yt}function qs(u){return qp(eb(u,b,vC),u+"")}function hu(u){return M_(u,Kr,px)}function Oh(u){return M_(u,cs,mx)}var Gp=nl?function(u){return nl.get(u)}:cf;function Ph(u){for(var p=u.name+"",w=pa[p],oe=Ti.call(pa,p)?w.length:0;oe--;){var Se=w[oe],Ue=Se.func;if(null==Ue||Ue==u)return Se.name}return p}function fu(u){return(Ti.call(Ne,"placeholder")?Ne:u).placeholder}function bn(){var u=Ne.iteratee||af;return u=u===af?Qv:u,arguments.length?u(arguments[0],arguments[1]):u}function ul(u,p){var w=u.__data__;return function fC(u){var p=typeof u;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==u:null===u}(p)?w["string"==typeof p?"string":"hash"]:w.map}function q_(u){for(var p=Kr(u),w=p.length;w--;){var oe=p[w],Se=u[oe];p[w]=[oe,Se,Z_(Se)]}return p}function pu(u,p){var w=function Bv(lt,Et){return null==lt?b:lt[Et]}(u,p);return rC(w)?w:b}var px=y_?function(u){return null==u?[]:(u=ji(u),oc(y_(u),function(p){return jt.call(u,p)}))}:gd,mx=y_?function(u){for(var p=[];u;)sc(p,px(u)),u=Cp(u);return p}:gd,Ao=uo;function Wp(u,p,w){for(var oe=-1,Se=(p=Kn(p,u)).length,Ue=!1;++oe<Se;){var et=La(p[oe]);if(!(Ue=null!=u&&w(u,et)))break;u=u[et]}return Ue||++oe!=Se?Ue:!!(Se=null==u?0:u.length)&&qh(Se)&&hl(et,Se)&&(zn(u)||ml(u))}function gx(u){return"function"!=typeof u.constructor||ud(u)?{}:ol(Cp(u))}function $p(u){return zn(u)||ml(u)||!!(_i&&u&&u[_i])}function hl(u,p){var w=typeof u;return!!(p=p??Fe)&&("number"==w||"symbol"!=w&&ua.test(u))&&u>-1&&u%1==0&&u<p}function So(u,p,w){if(!Di(w))return!1;var oe=typeof p;return!!("number"==oe?as(w)&&hl(p,w.length):"string"==oe&&p in w)&&Zs(w[p],u)}function Yp(u,p){if(zn(u))return!1;var w=typeof u;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=u&&!Ho(u))||fh.test(u)||!Qd.test(u)||null!=p&&u in ji(p)}function Ks(u){var p=Ph(u),w=Ne[p];if("function"!=typeof w||!(p in ii.prototype))return!1;if(u===w)return!0;var oe=Gp(w);return!!oe&&u===oe[0]}(tl&&Ao(new tl(new ArrayBuffer(1)))!=Q||Rn&&Ao(new Rn)!=ee||nd&&Ao(nd.resolve())!=ue||id&&Ao(new id)!=He||Ia&&Ao(new Ia)!=Gt)&&(Ao=function(u){var p=uo(u),w=p==F?u.constructor:b,oe=w?gi(w):"";if(oe)switch(oe){case Da:return Q;case wh:return ee;case Hv:return ue;case il:return He;case dc:return Gt}return p});var Xp=xp?yc:Ub;function ud(u){var p=u&&u.constructor;return u===("function"==typeof p&&p.prototype||ed)}function Z_(u){return u==u&&!Di(u)}function Lh(u,p){return function(w){return null!=w&&w[u]===p&&(p!==b||u in ji(w))}}function eb(u,p,w){return p=Ii(p===b?u.length-1:p,0),function(){for(var oe=arguments,Se=-1,Ue=Ii(oe.length-p,0),et=bt(Ue);++Se<Ue;)et[Se]=oe[p+Se];Se=-1;for(var ot=bt(p+1);++Se<p;)ot[Se]=oe[Se];return ot[p]=w(et),is(u,this,ot)}}function tb(u,p){return p.length<2?u:su(u,Ms(p,0,-1))}function mu(u,p){if(("constructor"!==p||"function"!=typeof u[p])&&"__proto__"!=p)return u[p]}var fl=gu(rx),Bh=zv||function(u,p){return ao.setTimeout(u,p)},qp=gu(ox);function nb(u,p,w){var oe=p+"";return qp(u,function J_(u,p){var w=p.length;if(!w)return u;var oe=w-1;return p[oe]=(w>1?"& ":"")+p[oe],p=p.join(w>2?", ":" "),u.replace($l,"{\n/* [wrapped with "+p+"] */\n")}(oe,function ib(u,p){return Lo(ct,function(w){var oe="_."+w[0];p&w[1]&&!pp(u,oe)&&u.push(oe)}),u.sort()}(function WN(u){var p=u.match($c);return p?p[1].split(mh):[]}(oe),w)))}function gu(u){var p=0,w=0;return function(){var oe=xo(),Se=16-(oe-w);if(w=oe,Se>0){if(++p>=800)return arguments[0]}else p=0;return u.apply(b,arguments)}}function Kp(u,p){var w=-1,oe=u.length,Se=oe-1;for(p=p===b?oe:p;++w<p;){var Ue=al(w,Se),et=u[Ue];u[Ue]=u[w],u[w]=et}return u.length=p,u}var Co=function Q_(u){var p=Wh(u,function(oe){return 500===w.size&&w.clear(),oe}),w=p.cache;return p}(function(u){var p=[];return 46===u.charCodeAt(0)&&p.push(""),u.replace(ph,function(w,oe,Se,Ue){p.push(Se?Ue.replace(Xc,"$1"):oe||w)}),p});function La(u){if("string"==typeof u||Ho(u))return u;var p=u+"";return"0"==p&&1/u==-Ee?"-0":p}function gi(u){if(null!=u){try{return wp.call(u)}catch{}try{return u+""}catch{}}return""}function yx(u){if(u instanceof ii)return u.clone();var p=new Ar(u.__wrapped__,u.__chain__);return p.__actions__=Uo(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}var bu=ri(function(u,p){return Mr(u)?sd(u,Xr(p,1,Mr,!0)):[]}),yu=ri(function(u,p){var w=ho(p);return Mr(w)&&(w=b),Mr(u)?sd(u,Xr(p,1,Mr,!0),bn(w,2)):[]}),xx=ri(function(u,p){var w=ho(p);return Mr(w)&&(w=b),Mr(u)?sd(u,Xr(p,1,Mr,!0),b,w):[]});function bC(u,p,w){var oe=null==u?0:u.length;if(!oe)return-1;var Se=null==w?0:Jn(w);return Se<0&&(Se=Ii(oe+Se,0)),tu(u,bn(p,3),Se)}function yC(u,p,w){var oe=null==u?0:u.length;if(!oe)return-1;var Se=oe-1;return w!==b&&(Se=Jn(w),Se=w<0?Ii(oe+Se,0):Or(Se,oe-1)),tu(u,bn(p,3),Se,!0)}function vC(u){return null!=u&&u.length?Xr(u,1):[]}function wx(u){return u&&u.length?u[0]:b}var wC=ri(function(u){var p=Wi(u,j_);return p.length&&p[0]===u[0]?D_(p):[]}),jh=ri(function(u){var p=ho(u),w=Wi(u,j_);return p===ho(w)?p=b:w.pop(),w.length&&w[0]===u[0]?D_(w,bn(p,2)):[]}),EC=ri(function(u){var p=ho(u),w=Wi(u,j_);return(p="function"==typeof p?p:b)&&w.pop(),w.length&&w[0]===u[0]?D_(w,b,p):[]});function ho(u){var p=null==u?0:u.length;return p?u[p-1]:b}var Uh=ri(Ax);function Ax(u,p){return u&&u.length&&p&&p.length?N_(u,p):u}var JN=qs(function(u,p){var w=null==u?0:u.length,oe=Dp(u,p);return F_(u,Wi(p,function(Se){return hl(Se,w)?+Se:Se}).sort(cC)),oe});function Vh(u){return null==u?u:el.call(u)}var Qp=ri(function(u){return ll(Xr(u,1,Mr,!0))}),OC=ri(function(u){var p=ho(u);return Mr(p)&&(p=b),ll(Xr(u,1,Mr,!0),bn(p,2))}),Cx=ri(function(u){var p=ho(u);return p="function"==typeof p?p:b,ll(Xr(u,1,Mr,!0),b,p)});function ab(u){if(!u||!u.length)return[];var p=0;return u=oc(u,function(w){if(Mr(w))return p=Ii(w.length,p),!0}),Jl(p,function(w){return Wi(u,Nv(w))})}function Tx(u,p){if(!u||!u.length)return[];var w=ab(u);return null==p?w:Wi(w,function(oe){return is(p,b,oe)})}var Au=ri(function(u,p){return Mr(u)?sd(u,p):[]}),zh=ri(function(u){return B_(oc(u,Mr))}),PC=ri(function(u){var p=ho(u);return Mr(p)&&(p=b),B_(oc(u,Mr),bn(p,2))}),QN=ri(function(u){var p=ho(u);return p="function"==typeof p?p:b,B_(oc(u,Mr),b,p)}),Ix=ri(ab),FC=ri(function(u){var p=u.length,w=p>1?u[p-1]:b;return w="function"==typeof w?(u.pop(),w):b,Tx(u,w)});function Dx(u){var p=Ne(u);return p.__chain__=!0,p}function hd(u,p){return p(u)}var Rx=qs(function(u){var p=u.length,w=p?u[0]:0,oe=this.__wrapped__,Se=function(Ue){return Dp(Ue,u)};return!(p>1||this.__actions__.length)&&oe instanceof ii&&hl(w)?((oe=oe.slice(w,+w+(p?1:0))).__actions__.push({func:hd,args:[Se],thisArg:b}),new Ar(oe,this.__chain__).thru(function(Ue){return p&&!Ue.length&&Ue.push(b),Ue})):this.thru(Se)}),cb=Th(function(u,p,w){Ti.call(u,w)?++u[w]:Oa(u,w,1)}),lb=jp(bC),oF=jp(yC);function VC(u,p){return(zn(u)?Lo:fc)(u,bn(p,3))}function Px(u,p){return(zn(u)?hp:S_)(u,bn(p,3))}var tm=Th(function(u,p,w){Ti.call(u,w)?u[w].push(p):Oa(u,w,[p])}),Nx=ri(function(u,p,w){var oe=-1,Se="function"==typeof p,Ue=as(u)?bt(u.length):[];return fc(u,function(et){Ue[++oe]=Se?is(p,et,w):au(et,p,w)}),Ue}),Fx=Th(function(u,p,w){Oa(u,w,p)});function Hh(u,p){return(zn(u)?Wi:tx)(u,bn(p,3))}var Lx=Th(function(u,p,w){u[w?0:1].push(p)},function(){return[[],[]]}),db=ri(function(u,p){if(null==u)return[];var w=p.length;return w>1&&So(u,p[0],p[1])?p=[]:w>2&&So(p[0],p[1],p[2])&&(p=[p[0]]),Ui(u,Xr(p,1),[])}),om=Vv||function(){return ao.Date.now()};function Ux(u,p,w){return p=w?b:p,gc(u,k,b,b,b,b,p=u&&null==p?u.length:p)}function ub(u,p){var w;if("function"!=typeof p)throw new Ys(_);return u=Jn(u),function(){return--u>0&&(w=p.apply(this,arguments)),u<=1&&(p=b),w}}var hb=ri(function(u,p,w){var oe=1;if(w.length){var Se=Zc(w,fu(hb));oe|=x}return gc(u,oe,p,w,Se)}),Vx=ri(function(u,p,w){var oe=3;if(w.length){var Se=Zc(w,fu(Vx));oe|=x}return gc(p,oe,u,w,Se)});function fb(u,p,w){var oe,Se,Ue,et,ot,ft,Ct=0,Mt=!1,Lt=!1,Yt=!0;if("function"!=typeof u)throw new Ys(_);function cn(br){var ja=oe,Ec=Se;return oe=Se=b,Ct=br,et=u.apply(Ec,ja)}function Sn(br){var ja=br-ft;return ft===b||ja>=p||ja<0||Lt&&br-Ct>=Ue}function oi(){var br=om();if(Sn(br))return ci(br);ot=Bh(oi,function Zn(br){var Ac=p-(br-ft);return Lt?Or(Ac,Ue-(br-Ct)):Ac}(br))}function ci(br){return ot=b,Yt&&oe?cn(br):(oe=Se=b,et)}function ks(){var br=om(),ja=Sn(br);if(oe=arguments,Se=this,ft=br,ja){if(ot===b)return function wn(br){return Ct=br,ot=Bh(oi,p),Mt?cn(br):et}(ft);if(Lt)return qr(ot),ot=Bh(oi,p),cn(ft)}return ot===b&&(ot=Bh(oi,p)),et}return p=Ds(p)||0,Di(w)&&(Mt=!!w.leading,Ue=(Lt="maxWait"in w)?Ii(Ds(w.maxWait)||0,p):Ue,Yt="trailing"in w?!!w.trailing:Yt),ks.cancel=function Rs(){ot!==b&&qr(ot),Ct=0,oe=ft=Se=ot=b},ks.flush=function To(){return ot===b?et:ci(om())},ks}var pb=ri(function(u,p){return Rp(u,1,p)}),Mo=ri(function(u,p,w){return Rp(u,Ds(p)||0,w)});function Wh(u,p){if("function"!=typeof u||null!=p&&"function"!=typeof p)throw new Ys(_);var w=function(){var oe=arguments,Se=p?p.apply(this,oe):oe[0],Ue=w.cache;if(Ue.has(Se))return Ue.get(Se);var et=u.apply(this,oe);return w.cache=Ue.set(Se,et)||Ue,et};return w.cache=new(Wh.Cache||hc),w}function $h(u){if("function"!=typeof u)throw new Ys(_);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}Wh.Cache=hc;var zx=Cr(function(u,p){var w=(p=1==p.length&&zn(p[0])?Wi(p[0],ws(bn())):Wi(Xr(p,1),ws(bn()))).length;return ri(function(oe){for(var Se=-1,Ue=Or(oe.length,w);++Se<Ue;)oe[Se]=p[Se].call(this,oe[Se]);return is(u,this,oe)})}),mb=ri(function(u,p){var w=Zc(p,fu(mb));return gc(u,x,b,p,w)}),gb=ri(function(u,p){var w=Zc(p,fu(gb));return gc(u,64,b,p,w)}),YC=qs(function(u,p){return gc(u,256,b,b,b,p)});function Zs(u,p){return u===p||u!=u&&p!=p}var Cu=Fa(T_),am=Fa(function(u,p){return u>=p}),ml=qv(function(){return arguments}())?qv:function(u){return dr(u)&&Ti.call(u,"callee")&&!jt.call(u,"callee")},zn=bt.isArray,cm=BS?ws(BS):function tC(u){return dr(u)&&uo(u)==Ie};function as(u){return null!=u&&qh(u.length)&&!yc(u)}function Mr(u){return dr(u)&&as(u)}var gl=gr||Ub,eM=At?ws(At):function nC(u){return dr(u)&&uo(u)==ae};function Xh(u){if(!dr(u))return!1;var p=uo(u);return p==Le||"[object DOMException]"==p||"string"==typeof u.message&&"string"==typeof u.name&&!fd(u)}function yc(u){if(!Di(u))return!1;var p=uo(u);return p==tt||p==fe||"[object AsyncFunction]"==p||"[object Proxy]"==p}function dm(u){return"number"==typeof u&&u==Jn(u)}function qh(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Fe}function Di(u){var p=typeof u;return null!=u&&("object"==p||"function"==p)}function dr(u){return null!=u&&"object"==typeof u}var vb=jS?ws(jS):function Kv(u){return dr(u)&&Ao(u)==ee};function xb(u){return"number"==typeof u||dr(u)&&uo(u)==q}function fd(u){if(!dr(u)||uo(u)!=F)return!1;var p=Cp(u);if(null===p)return!0;var w=Ti.call(p,"constructor")&&p.constructor;return"function"==typeof w&&w instanceof w&&wp.call(w)==YS}var hm=Kt?ws(Kt):function Jv(u){return dr(u)&&uo(u)==We},Mu=gh?ws(gh):function Sr(u){return dr(u)&&Ao(u)==He};function Kh(u){return"string"==typeof u||!zn(u)&&dr(u)&&uo(u)==gt}function Ho(u){return"symbol"==typeof u||dr(u)&&uo(u)==Ft}var vc=Rv?ws(Rv):function Zv(u){return dr(u)&&qh(u.length)&&!!tr[uo(u)]},oM=Fa(Op),Kx=Fa(function(u,p){return u<=p});function Jx(u){if(!u)return[];if(as(u))return Kh(u)?Xn(u):Uo(u);if(wr&&u[wr])return function p_(lt){for(var Et,bt=[];!(Et=lt.next()).done;)bt.push(Et.value);return bt}(u[wr]());var p=Ao(u);return(p==ee?Ql:p==He?bp:_l)(u)}function xc(u){return u?(u=Ds(u))===Ee||u===-Ee?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Jn(u){var p=xc(u),w=p%1;return p==p?w?p-w:p:0}function Eb(u){return u?sl(Jn(u),0,ge):0}function Ds(u){if("number"==typeof u)return u;if(Ho(u))return NaN;if(Di(u)){var p="function"==typeof u.valueOf?u.valueOf():u;u=Di(p)?p+"":p}if("string"!=typeof u)return 0===u?u:+u;u=_h(u);var w=qc.test(u);return w||Ta.test(u)?SN(u.slice(2),w?2:8):Si.test(u)?NaN:+u}function Zh(u){return Vo(u,cs(u))}function bi(u){return null==u?"":Ts(u)}var sM=du(function(u,p){if(ud(p)||as(p))Vo(p,Kr(p),u);else for(var w in p)Ti.call(p,w)&&Ip(u,w,p[w])}),Zx=du(function(u,p){Vo(p,cs(p),u)}),Sb=du(function(u,p,w,oe){Vo(p,cs(p),u,oe)}),aM=du(function(u,p,w,oe){Vo(p,Kr(p),u,oe)}),Cb=qs(Dp),Tu=ri(function(u,p){u=ji(u);var w=-1,oe=p.length,Se=oe>2?p[2]:b;for(Se&&So(p[0],p[1],Se)&&(oe=1);++w<oe;)for(var Ue=p[w],et=cs(Ue),ot=-1,ft=et.length;++ot<ft;){var Ct=et[ot],Mt=u[Ct];(Mt===b||Zs(Mt,ed[Ct])&&!Ti.call(u,Ct))&&(u[Ct]=Ue[Ct])}return u}),pm=ri(function(u){return u.push(b,X_),is(iw,b,u)});function Tb(u,p,w){var oe=null==u?b:su(u,p);return oe===b?w:oe}function Go(u,p){return null!=u&&Wp(u,p,zN)}var Ba=$_(function(u,p,w){null!=p&&"function"!=typeof p.toString&&(p=Ep.call(p)),u[p]=w},sf(ls)),fM=$_(function(u,p,w){null!=p&&"function"!=typeof p.toString&&(p=Ep.call(p)),Ti.call(u,p)?u[p].push(w):u[p]=[w]},bn),pM=ri(au);function Kr(u){return as(u)?ZS(u):k_(u)}function cs(u){return as(u)?ZS(u,!0):function ex(u){if(!Di(u))return function _x(u){var p=[];if(null!=u)for(var w in ji(u))p.push(w);return p}(u);var p=ud(u),w=[];for(var oe in u)"constructor"==oe&&(p||!Ti.call(u,oe))||w.push(oe);return w}(u)}var nw=du(function(u,p,w){Ss(u,p,w)}),iw=du(function(u,p,w,oe){Ss(u,p,w,oe)}),_M=qs(function(u,p){var w={};if(null==u)return w;var oe=!1;p=Wi(p,function(Ue){return Ue=Kn(Ue,u),oe||(oe=Ue.length>1),Ue}),Vo(u,Oh(u),w),oe&&(w=As(w,7,zp));for(var Se=p.length;Se--;)Fp(w,p[Se]);return w}),yM=qs(function(u,p){return null==u?{}:function P_(u,p){return Mh(u,p,function(w,oe){return Go(u,oe)})}(u,p)});function Qh(u,p){if(null==u)return{};var w=Wi(Oh(u),function(oe){return[oe]});return p=bn(p),Mh(u,w,function(oe,Se){return p(oe,Se[0])})}var Ib=Vp(Kr),Db=Vp(cs);function _l(u){return null==u?[]:h_(u,Kr(u))}var xM=dl(function(u,p,w){return p=p.toLowerCase(),u+(w?sw(p):p)});function sw(u){return _m(bi(u).toLowerCase())}function aw(u){return(u=bi(u))&&u.replace(rc,Jc).replace(Vn,"")}var kb=dl(function(u,p,w){return u+(w?"-":"")+p.toLowerCase()}),wM=dl(function(u,p,w){return u+(w?" ":"")+p.toLowerCase()}),Jr=G_("toLowerCase"),MM=dl(function(u,p,w){return u+(w?"_":"")+p.toLowerCase()}),uw=dl(function(u,p,w){return u+(w?" ":"")+_m(p)}),IM=dl(function(u,p,w){return u+(w?" ":"")+p.toUpperCase()}),_m=G_("toUpperCase");function Fb(u,p,w){return u=bi(u),(p=w?b:p)===b?function _p(lt){return FS.test(lt)}(u)?function cc(lt){return lt.match(NS)||[]}(u):function TN(lt){return lt.match(Yc)||[]}(u):u.match(p)||[]}var rf=ri(function(u,p){try{return is(u,b,p)}catch(w){return Xh(w)?w:new On(w)}}),_F=qs(function(u,p){return Lo(p,function(w){w=La(w),Oa(u,w,hb(u[w],u))}),u});function sf(u){return function(){return u}}var pw=W_(),md=W_(!0);function ls(u){return u}function af(u){return Qv("function"==typeof u?u:As(u,1))}var Bb=ri(function(u,p){return function(w){return au(w,u,p)}}),ym=ri(function(u,p){return function(w){return au(u,w,p)}});function ds(u,p,w){var oe=Kr(p),Se=kp(p,oe);null==w&&(!Di(p)||!Se.length&&oe.length)&&(w=p,p=u,u=this,Se=kp(p,Kr(p)));var Ue=!(Di(w)&&"chain"in w&&!w.chain),et=yc(u);return Lo(Se,function(ot){var ft=p[ot];u[ot]=ft,et&&(u.prototype[ot]=function(){var Ct=this.__chain__;if(Ue||Ct){var Mt=u(this.__wrapped__);return(Mt.__actions__=Uo(this.__actions__)).push({func:ft,args:arguments,thisArg:u}),Mt.__chain__=Ct,Mt}return ft.apply(u,sc([this.value()],arguments))})}),u}function cf(){}var OM=kh(Wi),mw=kh(fp),Iu=kh(Ov);function gw(u){return Yp(u)?Nv(La(u)):function ss(u){return function(p){return su(p,u)}}(u)}var NM=Eo(),jb=Eo(!0);function gd(){return[]}function Ub(){return!1}var yF=Rh(function(u,p){return u+p},0),vF=uu("ceil"),xm=Rh(function(u,p){return u/p},1),LM=uu("floor"),wm=Rh(function(u,p){return u*p},1),Ru=uu("round"),$b=Rh(function(u,p){return u-p},0);return Ne.after=function WC(u,p){if("function"!=typeof p)throw new Ys(_);return u=Jn(u),function(){if(--u<1)return p.apply(this,arguments)}},Ne.ary=Ux,Ne.assign=sM,Ne.assignIn=Zx,Ne.assignInWith=Sb,Ne.assignWith=aM,Ne.at=Cb,Ne.before=ub,Ne.bind=hb,Ne.bindAll=_F,Ne.bindKey=Vx,Ne.castArray=function KC(){if(!arguments.length)return[];var u=arguments[0];return zn(u)?u:[u]},Ne.chain=Dx,Ne.chunk=function vx(u,p,w){p=(w?So(u,p,w):p===b)?1:Ii(Jn(p),0);var oe=null==u?0:u.length;if(!oe||p<1)return[];for(var Se=0,Ue=0,et=bt(td(oe/p));Se<oe;)et[Ue++]=Ms(u,Se,Se+=p);return et},Ne.compact=function bc(u){for(var p=-1,w=null==u?0:u.length,oe=0,Se=[];++p<w;){var Ue=u[p];Ue&&(Se[oe++]=Ue)}return Se},Ne.concat=function _u(){var u=arguments.length;if(!u)return[];for(var p=bt(u-1),w=arguments[0],oe=u;oe--;)p[oe-1]=arguments[oe];return sc(zn(w)?Uo(w):[w],Xr(p,1))},Ne.cond=function Lb(u){var p=null==u?0:u.length,w=bn();return u=p?Wi(u,function(oe){if("function"!=typeof oe[1])throw new Ys(_);return[w(oe[0]),oe[1]]}):[],ri(function(oe){for(var Se=-1;++Se<p;){var Ue=u[Se];if(is(Ue[0],this,oe))return is(Ue[1],this,oe)}})},Ne.conforms=function DM(u){return function E_(u){var p=Kr(u);return function(w){return A_(w,u,p)}}(As(u,1))},Ne.constant=sf,Ne.countBy=cb,Ne.create=function cM(u,p){var w=ol(u);return null==p?w:Sh(w,p)},Ne.curry=function zo(u,p,w){var oe=gc(u,8,b,b,b,b,b,p=w?b:p);return oe.placeholder=zo.placeholder,oe},Ne.curryRight=function sm(u,p,w){var oe=gc(u,16,b,b,b,b,b,p=w?b:p);return oe.placeholder=sm.placeholder,oe},Ne.debounce=fb,Ne.defaults=Tu,Ne.defaultsDeep=pm,Ne.defer=pb,Ne.delay=Mo,Ne.difference=bu,Ne.differenceBy=yu,Ne.differenceWith=xx,Ne.drop=function rb(u,p,w){var oe=null==u?0:u.length;return oe?Ms(u,(p=w||p===b?1:Jn(p))<0?0:p,oe):[]},Ne.dropRight=function vu(u,p,w){var oe=null==u?0:u.length;return oe?Ms(u,0,(p=oe-(p=w||p===b?1:Jn(p)))<0?0:p):[]},Ne.dropRightWhile=function $N(u,p){return u&&u.length?Lp(u,bn(p,3),!0,!0):[]},Ne.dropWhile=function _C(u,p){return u&&u.length?Lp(u,bn(p,3),!0):[]},Ne.fill=function YN(u,p,w,oe){var Se=null==u?0:u.length;return Se?(w&&"number"!=typeof w&&So(u,p,w)&&(w=0,oe=Se),function Ch(u,p,w,oe){var Se=u.length;for((w=Jn(w))<0&&(w=-w>Se?0:Se+w),(oe=oe===b||oe>Se?Se:Jn(oe))<0&&(oe+=Se),oe=w>oe?0:Eb(oe);w<oe;)u[w++]=p;return u}(u,p,w,oe)):[]},Ne.filter=function rF(u,p){return(zn(u)?oc:cd)(u,bn(p,3))},Ne.flatMap=function sF(u,p){return Xr(Hh(u,p),1)},Ne.flatMapDeep=function aF(u,p){return Xr(Hh(u,p),Ee)},Ne.flatMapDepth=function cF(u,p,w){return w=w===b?1:Jn(w),Xr(Hh(u,p),w)},Ne.flatten=vC,Ne.flattenDeep=function XN(u){return null!=u&&u.length?Xr(u,Ee):[]},Ne.flattenDepth=function qN(u,p){return null!=u&&u.length?Xr(u,p=p===b?1:Jn(p)):[]},Ne.flip=function Gh(u){return gc(u,512)},Ne.flow=pw,Ne.flowRight=md,Ne.fromPairs=function xu(u){for(var p=-1,w=null==u?0:u.length,oe={};++p<w;){var Se=u[p];oe[Se[0]]=Se[1]}return oe},Ne.functions=function dM(u){return null==u?[]:kp(u,Kr(u))},Ne.functionsIn=function uM(u){return null==u?[]:kp(u,cs(u))},Ne.groupBy=tm,Ne.initial=function Ur(u){return null!=u&&u.length?Ms(u,0,-1):[]},Ne.intersection=wC,Ne.intersectionBy=jh,Ne.intersectionWith=EC,Ne.invert=Ba,Ne.invertBy=fM,Ne.invokeMap=Nx,Ne.iteratee=af,Ne.keyBy=Fx,Ne.keys=Kr,Ne.keysIn=cs,Ne.map=Hh,Ne.mapKeys=function mM(u,p){var w={};return p=bn(p,3),pc(u,function(oe,Se,Ue){Oa(w,p(oe,Se,Ue),oe)}),w},Ne.mapValues=function gM(u,p){var w={};return p=bn(p,3),pc(u,function(oe,Se,Ue){Oa(w,Se,p(oe,Se,Ue))}),w},Ne.matches=function bm(u){return Pp(As(u,1))},Ne.matchesProperty=function RM(u,p){return nx(u,As(p,1))},Ne.memoize=Wh,Ne.merge=nw,Ne.mergeWith=iw,Ne.method=Bb,Ne.methodOf=ym,Ne.mixin=ds,Ne.negate=$h,Ne.nthArg=function kM(u){return u=Jn(u),ri(function(p){return O_(p,u)})},Ne.omit=_M,Ne.omitBy=function bM(u,p){return Qh(u,$h(bn(p)))},Ne.once=function $C(u){return ub(2,u)},Ne.orderBy=function Su(u,p,w,oe){return null==u?[]:(zn(p)||(p=null==p?[]:[p]),zn(w=oe?b:w)||(w=null==w?[]:[w]),Ui(u,p,w))},Ne.over=OM,Ne.overArgs=zx,Ne.overEvery=mw,Ne.overSome=Iu,Ne.partial=mb,Ne.partialRight=gb,Ne.partition=Lx,Ne.pick=yM,Ne.pickBy=Qh,Ne.property=gw,Ne.propertyOf=function PM(u){return function(p){return null==u?b:su(u,p)}},Ne.pull=Uh,Ne.pullAll=Ax,Ne.pullAllBy=function KN(u,p,w){return u&&u.length&&p&&p.length?N_(u,p,bn(w,2)):u},Ne.pullAllWith=function AC(u,p,w){return u&&u.length&&p&&p.length?N_(u,p,b,w):u},Ne.pullAt=JN,Ne.range=NM,Ne.rangeRight=jb,Ne.rearg=YC,Ne.reject=function rm(u,p){return(zn(u)?oc:cd)(u,$h(bn(p,3)))},Ne.remove=function Is(u,p){var w=[];if(!u||!u.length)return w;var oe=-1,Se=[],Ue=u.length;for(p=bn(p,3);++oe<Ue;){var et=u[oe];p(et,oe,u)&&(w.push(et),Se.push(oe))}return F_(u,Se),w},Ne.rest=function Hx(u,p){if("function"!=typeof u)throw new Ys(_);return ri(u,p=p===b?p:Jn(p))},Ne.reverse=Vh,Ne.sampleSize=function zC(u,p,w){return p=(w?So(u,p,w):p===b)?1:Jn(p),(zn(u)?VN:cl)(u,p)},Ne.set=function ef(u,p,w){return null==u?u:lu(u,p,w)},Ne.setWith=function rw(u,p,w,oe){return oe="function"==typeof oe?oe:b,null==u?u:lu(u,p,w,oe)},Ne.shuffle=function HC(u){return(zn(u)?od:sx)(u)},Ne.slice=function wu(u,p,w){var oe=null==u?0:u.length;return oe?(w&&"number"!=typeof w&&So(u,p,w)?(p=0,w=oe):(p=null==p?0:Jn(p),w=w===b?oe:Jn(w)),Ms(u,p,w)):[]},Ne.sortBy=db,Ne.sortedUniq=function IC(u){return u&&u.length?aC(u):[]},Ne.sortedUniqBy=function DC(u,p){return u&&u.length?aC(u,bn(p,2)):[]},Ne.split=function TM(u,p,w){return w&&"number"!=typeof w&&So(u,p,w)&&(p=w=b),(w=w===b?ge:w>>>0)?(u=bi(u))&&("string"==typeof p||null!=p&&!hm(p))&&!(p=Ts(p))&&zt(u)?Pi(Xn(u),0,w):u.split(p,w):[]},Ne.spread=function XC(u,p){if("function"!=typeof u)throw new Ys(_);return p=null==p?0:Ii(Jn(p),0),ri(function(w){var oe=w[p],Se=Pi(w,0,p);return oe&&sc(Se,oe),is(u,this,Se)})},Ne.tail=function ob(u){var p=null==u?0:u.length;return p?Ms(u,1,p):[]},Ne.take=function Zp(u,p,w){return u&&u.length?Ms(u,0,(p=w||p===b?1:Jn(p))<0?0:p):[]},Ne.takeRight=function RC(u,p,w){var oe=null==u?0:u.length;return oe?Ms(u,(p=oe-(p=w||p===b?1:Jn(p)))<0?0:p,oe):[]},Ne.takeRightWhile=function Eu(u,p){return u&&u.length?Lp(u,bn(p,3),!1,!0):[]},Ne.takeWhile=function kC(u,p){return u&&u.length?Lp(u,bn(p,3)):[]},Ne.tap=function LC(u,p){return p(u),u},Ne.throttle=function qC(u,p,w){var oe=!0,Se=!0;if("function"!=typeof u)throw new Ys(_);return Di(w)&&(oe="leading"in w?!!w.leading:oe,Se="trailing"in w?!!w.trailing:Se),fb(u,p,{leading:oe,maxWait:p,trailing:Se})},Ne.thru=hd,Ne.toArray=Jx,Ne.toPairs=Ib,Ne.toPairsIn=Db,Ne.toPath=function Vb(u){return zn(u)?Wi(u,La):Ho(u)?[u]:Uo(Co(bi(u)))},Ne.toPlainObject=Zh,Ne.transform=function dF(u,p,w){var oe=zn(u),Se=oe||gl(u)||vc(u);if(p=bn(p,4),null==w){var Ue=u&&u.constructor;w=Se?oe?new Ue:[]:Di(u)&&yc(Ue)?ol(Cp(u)):{}}return(Se?Lo:pc)(u,function(et,ot,ft){return p(w,et,ot,ft)}),w},Ne.unary=function _b(u){return Ux(u,1)},Ne.union=Qp,Ne.unionBy=OC,Ne.unionWith=Cx,Ne.uniq=function sb(u){return u&&u.length?ll(u):[]},Ne.uniqBy=function em(u,p){return u&&u.length?ll(u,bn(p,2)):[]},Ne.uniqWith=function Mx(u,p){return p="function"==typeof p?p:b,u&&u.length?ll(u,b,p):[]},Ne.unset=function uF(u,p){return null==u||Fp(u,p)},Ne.unzip=ab,Ne.unzipWith=Tx,Ne.update=function hF(u,p,w){return null==u?u:ld(u,p,Dt(w))},Ne.updateWith=function Rb(u,p,w,oe){return oe="function"==typeof oe?oe:b,null==u?u:ld(u,p,Dt(w),oe)},Ne.values=_l,Ne.valuesIn=function fF(u){return null==u?[]:h_(u,cs(u))},Ne.without=Au,Ne.words=Fb,Ne.wrap=function bb(u,p){return mb(Dt(p),u)},Ne.xor=zh,Ne.xorBy=PC,Ne.xorWith=QN,Ne.zip=Ix,Ne.zipObject=function NC(u,p){return lx(u||[],p||[],Ip)},Ne.zipObjectDeep=function eF(u,p){return lx(u||[],p||[],lu)},Ne.zipWith=FC,Ne.entries=Ib,Ne.entriesIn=Db,Ne.extend=Zx,Ne.extendWith=Sb,ds(Ne,Ne),Ne.add=yF,Ne.attempt=rf,Ne.camelCase=xM,Ne.capitalize=sw,Ne.ceil=vF,Ne.clamp=function pF(u,p,w){return w===b&&(w=p,p=b),w!==b&&(w=(w=Ds(w))==w?w:0),p!==b&&(p=(p=Ds(p))==p?p:0),sl(Ds(u),p,w)},Ne.clone=function Yh(u){return As(u,4)},Ne.cloneDeep=function ZC(u){return As(u,5)},Ne.cloneDeepWith=function Gx(u,p){return As(u,5,p="function"==typeof p?p:b)},Ne.cloneWith=function JC(u,p){return As(u,4,p="function"==typeof p?p:b)},Ne.conformsTo=function Wx(u,p){return null==p||A_(u,p,Kr(p))},Ne.deburr=aw,Ne.defaultTo=function fw(u,p){return null==u||u!=u?p:u},Ne.divide=xm,Ne.endsWith=function cw(u,p,w){u=bi(u),p=Ts(p);var oe=u.length,Se=w=w===b?oe:sl(Jn(w),0,oe);return(w-=p.length)>=0&&u.slice(w,Se)==p},Ne.eq=Zs,Ne.escape=function mm(u){return(u=bi(u))&&vs.test(u)?u.replace(qi,HS):u},Ne.escapeRegExp=function lw(u){return(u=bi(u))&&da.test(u)?u.replace(Gl,"\\$&"):u},Ne.every=function iF(u,p,w){var oe=zn(u)?fp:$v;return w&&So(u,p,w)&&(p=b),oe(u,bn(p,3))},Ne.find=lb,Ne.findIndex=bC,Ne.findKey=function Mb(u,p){return mp(u,bn(p,3),pc)},Ne.findLast=oF,Ne.findLastIndex=yC,Ne.findLastKey=function Qx(u,p){return mp(u,bn(p,3),C_)},Ne.floor=LM,Ne.forEach=VC,Ne.forEachRight=Px,Ne.forIn=function ew(u,p){return null==u?u:Yv(u,bn(p,3),cs)},Ne.forInRight=function tw(u,p){return null==u?u:eC(u,bn(p,3),cs)},Ne.forOwn=function pd(u,p){return u&&pc(u,bn(p,3))},Ne.forOwnRight=function lM(u,p){return u&&C_(u,bn(p,3))},Ne.get=Tb,Ne.gt=Cu,Ne.gte=am,Ne.has=function hM(u,p){return null!=u&&Wp(u,p,I_)},Ne.hasIn=Go,Ne.head=wx,Ne.identity=ls,Ne.includes=function nm(u,p,w,oe){u=as(u)?u:_l(u),w=w&&!oe?Jn(w):0;var Se=u.length;return w<0&&(w=Ii(Se+w,0)),Kh(u)?w<=Se&&u.indexOf(p,w)>-1:!!Se&&Kl(u,p,w)>-1},Ne.indexOf=function xC(u,p,w){var oe=null==u?0:u.length;if(!oe)return-1;var Se=null==w?0:Jn(w);return Se<0&&(Se=Ii(oe+Se,0)),Kl(u,p,Se)},Ne.inRange=function ow(u,p,w){return p=xc(p),w===b?(w=p,p=0):w=xc(w),function HN(u,p,w){return u>=Or(p,w)&&u<Ii(p,w)}(u=Ds(u),p,w)},Ne.invoke=pM,Ne.isArguments=ml,Ne.isArray=zn,Ne.isArrayBuffer=cm,Ne.isArrayLike=as,Ne.isArrayLikeObject=Mr,Ne.isBoolean=function QC(u){return!0===u||!1===u||dr(u)&&uo(u)==R},Ne.isBuffer=gl,Ne.isDate=eM,Ne.isElement=function tM(u){return dr(u)&&1===u.nodeType&&!fd(u)},Ne.isEmpty=function $x(u){if(null==u)return!0;if(as(u)&&(zn(u)||"string"==typeof u||"function"==typeof u.splice||gl(u)||vc(u)||ml(u)))return!u.length;var p=Ao(u);if(p==ee||p==He)return!u.size;if(ud(u))return!k_(u).length;for(var w in u)if(Ti.call(u,w))return!1;return!0},Ne.isEqual=function lm(u,p){return cu(u,p)},Ne.isEqualWith=function yb(u,p,w){var oe=(w="function"==typeof w?w:b)?w(u,p):b;return oe===b?cu(u,p,b,w):!!oe},Ne.isError=Xh,Ne.isFinite=function nM(u){return"number"==typeof u&&qt(u)},Ne.isFunction=yc,Ne.isInteger=dm,Ne.isLength=qh,Ne.isMap=vb,Ne.isMatch=function iM(u,p){return u===p||R_(u,p,q_(p))},Ne.isMatchWith=function lF(u,p,w){return w="function"==typeof w?w:b,R_(u,p,q_(p),w)},Ne.isNaN=function um(u){return xb(u)&&u!=+u},Ne.isNative=function rM(u){if(Xp(u))throw new On("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return rC(u)},Ne.isNil=function Xx(u){return null==u},Ne.isNull=function Yx(u){return null===u},Ne.isNumber=xb,Ne.isObject=Di,Ne.isObjectLike=dr,Ne.isPlainObject=fd,Ne.isRegExp=hm,Ne.isSafeInteger=function fm(u){return dm(u)&&u>=-Fe&&u<=Fe},Ne.isSet=Mu,Ne.isString=Kh,Ne.isSymbol=Ho,Ne.isTypedArray=vc,Ne.isUndefined=function qx(u){return u===b},Ne.isWeakMap=function wb(u){return dr(u)&&Ao(u)==Gt},Ne.isWeakSet=function Jh(u){return dr(u)&&"[object WeakSet]"==uo(u)},Ne.join=function Js(u,p){return null==u?"":Wn.call(u,p)},Ne.kebabCase=kb,Ne.last=ho,Ne.lastIndexOf=function Ex(u,p,w){var oe=null==u?0:u.length;if(!oe)return-1;var Se=oe;return w!==b&&(Se=(Se=Jn(w))<0?Ii(oe+Se,0):Or(Se,oe-1)),p==p?function fa(lt,Et,bt){for(var Qt=bt+1;Qt--;)if(lt[Qt]===Et)return Qt;return Qt}(u,p,Se):tu(u,Pv,Se,!0)},Ne.lowerCase=wM,Ne.lowerFirst=Jr,Ne.lt=oM,Ne.lte=Kx,Ne.max=function zb(u){return u&&u.length?ad(u,ls,T_):b},Ne.maxBy=function Hb(u,p){return u&&u.length?ad(u,bn(p,2),T_):b},Ne.mean=function Du(u){return gp(u,ls)},Ne.meanBy=function Gb(u,p){return gp(u,bn(p,2))},Ne.min=function Wb(u){return u&&u.length?ad(u,ls,Op):b},Ne.minBy=function lf(u,p){return u&&u.length?ad(u,bn(p,2),Op):b},Ne.stubArray=gd,Ne.stubFalse=Ub,Ne.stubObject=function _w(){return{}},Ne.stubString=function ma(){return""},Ne.stubTrue=function bF(){return!0},Ne.multiply=wm,Ne.nth=function Jp(u,p){return u&&u.length?O_(u,Jn(p)):b},Ne.noConflict=function vm(){return ao._===this&&(ao._=XS),this},Ne.noop=cf,Ne.now=om,Ne.pad=function EM(u,p,w){u=bi(u);var oe=(p=Jn(p))?Bo(u):0;if(!p||oe>=p)return u;var Se=(p-oe)/2;return Up(Mp(Se),w)+u+Up(td(Se),w)},Ne.padEnd=function AM(u,p,w){u=bi(u);var oe=(p=Jn(p))?Bo(u):0;return p&&oe<p?u+Up(p-oe,w):u},Ne.padStart=function Ob(u,p,w){u=bi(u);var oe=(p=Jn(p))?Bo(u):0;return p&&oe<p?Up(p-oe,w)+u:u},Ne.parseInt=function dw(u,p,w){return w||null==p?p=0:p&&(p=+p),nu(bi(u).replace(ic,""),p||0)},Ne.random=function vM(u,p,w){if(w&&"boolean"!=typeof w&&So(u,p,w)&&(p=w=b),w===b&&("boolean"==typeof p?(w=p,p=b):"boolean"==typeof u&&(w=u,u=b)),u===b&&p===b?(u=0,p=1):(u=xc(u),p===b?(p=u,u=0):p=xc(p)),u>p){var oe=u;u=p,p=oe}if(w||u%1||p%1){var Se=_r();return Or(u+Se*(p-u+AN("1e-"+((Se+"").length-1))),p)}return al(u,p)},Ne.reduce=function Bx(u,p,w){var oe=zn(u)?vo:VS,Se=arguments.length<3;return oe(u,bn(p,4),w,Se,fc)},Ne.reduceRight=function im(u,p,w){var oe=zn(u)?kv:VS,Se=arguments.length<3;return oe(u,bn(p,4),w,Se,S_)},Ne.repeat=function SM(u,p,w){return p=(w?So(u,p,w):p===b)?1:Jn(p),L_(bi(u),p)},Ne.replace=function CM(){var u=arguments,p=bi(u[0]);return u.length<3?p:p.replace(u[1],u[2])},Ne.result=function wc(u,p,w){var oe=-1,Se=(p=Kn(p,u)).length;for(Se||(Se=1,u=b);++oe<Se;){var Ue=null==u?b:u[La(p[oe])];Ue===b&&(oe=Se,Ue=w),u=yc(Ue)?Ue.call(u):Ue}return u},Ne.round=Ru,Ne.runInContext=lt,Ne.sample=function pl(u){return(zn(u)?QS:oC)(u)},Ne.size=function GC(u){if(null==u)return 0;if(as(u))return Kh(u)?Bo(u):u.length;var p=Ao(u);return p==ee||p==He?u.size:k_(u).length},Ne.snakeCase=MM,Ne.some=function jx(u,p,w){var oe=zn(u)?Ov:sC;return w&&So(u,p,w)&&(p=b),oe(u,bn(p,3))},Ne.sortedIndex=function ZN(u,p){return An(u,p)},Ne.sortedIndexBy=function Sx(u,p,w){return Np(u,p,bn(w,2))},Ne.sortedIndexOf=function SC(u,p){var w=null==u?0:u.length;if(w){var oe=An(u,p);if(oe<w&&Zs(u[oe],p))return oe}return-1},Ne.sortedLastIndex=function CC(u,p){return An(u,p,!0)},Ne.sortedLastIndexBy=function MC(u,p,w){return Np(u,p,bn(w,2),!0)},Ne.sortedLastIndexOf=function TC(u,p){if(null!=u&&u.length){var oe=An(u,p,!0)-1;if(Zs(u[oe],p))return oe}return-1},Ne.startCase=uw,Ne.startsWith=function mF(u,p,w){return u=bi(u),w=null==w?0:sl(Jn(w),0,u.length),p=Ts(p),u.slice(w,w+p.length)==p},Ne.subtract=$b,Ne.sum=function Yb(u){return u&&u.length?Lv(u,ls):0},Ne.sumBy=function Em(u,p){return u&&u.length?Lv(u,bn(p,2)):0},Ne.template=function gF(u,p,w){var oe=Ne.templateSettings;w&&So(u,p,w)&&(p=b),u=bi(u),p=Sb({},p,oe,Y_);var ot,ft,Se=Sb({},p.imports,oe.imports,Y_),Ue=Kr(Se),et=h_(Se,Ue),Ct=0,Mt=p.interpolate||Po,Lt="__p += '",Yt=vp((p.escape||Po).source+"|"+Mt.source+"|"+(Mt===_o?Yl:Po).source+"|"+(p.evaluate||Po).source+"|$","g"),cn="//# sourceURL="+(Ti.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xs+"]")+"\n";u.replace(Yt,function(Sn,oi,ci,Rs,To,ks){return ci||(ci=Rs),Lt+=u.slice(Ct,ks).replace(_e,rt),oi&&(ot=!0,Lt+="' +\n__e("+oi+") +\n'"),To&&(ft=!0,Lt+="';\n"+To+";\n__p += '"),ci&&(Lt+="' +\n((__t = ("+ci+")) == null ? '' : __t) +\n'"),Ct=ks+Sn.length,Sn}),Lt+="';\n";var wn=Ti.call(p,"variable")&&p.variable;if(wn){if(eu.test(wn))throw new On("Invalid `variable` option passed into `_.template`")}else Lt="with (obj) {\n"+Lt+"\n}\n";Lt=(ft?Lt.replace(Mn,""):Lt).replace(ko,"$1").replace(ys,"$1;"),Lt="function("+(wn||"obj")+") {\n"+(wn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(ot?", __e = _.escape":"")+(ft?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Lt+"return __p\n}";var Zn=rf(function(){return wi(Ue,cn+"return "+Lt).apply(b,et)});if(Zn.source=Lt,Xh(Zn))throw Zn;return Zn},Ne.times=function Vr(u,p){if((u=Jn(u))<1||u>Fe)return[];var w=ge,oe=Or(u,ge);p=bn(p),u-=ge;for(var Se=Jl(oe,p);++w<u;)p(w);return Se},Ne.toFinite=xc,Ne.toInteger=Jn,Ne.toLength=Eb,Ne.toLower=function tf(u){return bi(u).toLowerCase()},Ne.toNumber=Ds,Ne.toSafeInteger=function Ab(u){return u?sl(Jn(u),-Fe,Fe):0===u?u:0},Ne.toString=bi,Ne.toUpper=function vt(u){return bi(u).toUpperCase()},Ne.trim=function nf(u,p,w){if((u=bi(u))&&(w||p===b))return _h(u);if(!u||!(p=Ts(p)))return u;var oe=Xn(u),Se=Xn(p);return Pi(oe,f_(oe,Se),Zl(oe,Se)+1).join("")},Ne.trimEnd=function gm(u,p,w){if((u=bi(u))&&(w||p===b))return u.slice(0,yh(u)+1);if(!u||!(p=Ts(p)))return u;var oe=Xn(u);return Pi(oe,0,Zl(oe,Xn(p))+1).join("")},Ne.trimStart=function hw(u,p,w){if((u=bi(u))&&(w||p===b))return u.replace(ic,"");if(!u||!(p=Ts(p)))return u;var oe=Xn(u);return Pi(oe,f_(oe,Xn(p))).join("")},Ne.truncate=function Pb(u,p){var w=30,oe="...";if(Di(p)){var Se="separator"in p?p.separator:Se;w="length"in p?Jn(p.length):w,oe="omission"in p?Ts(p.omission):oe}var Ue=(u=bi(u)).length;if(zt(u)){var et=Xn(u);Ue=et.length}if(w>=Ue)return u;var ot=w-Bo(oe);if(ot<1)return oe;var ft=et?Pi(et,0,ot).join(""):u.slice(0,ot);if(Se===b)return ft+oe;if(et&&(ot+=ft.length-ot),hm(Se)){if(u.slice(ot).search(Se)){var Ct,Mt=ft;for(Se.global||(Se=vp(Se.source,bi(Li.exec(Se))+"g")),Se.lastIndex=0;Ct=Se.exec(Mt);)var Lt=Ct.index;ft=ft.slice(0,Lt===b?ot:Lt)}}else if(u.indexOf(Ts(Se),ot)!=ot){var Yt=ft.lastIndexOf(Se);Yt>-1&&(ft=ft.slice(0,Yt))}return ft+oe},Ne.unescape=function Nb(u){return(u=bi(u))&&Yr.test(u)?u.replace(es,m_):u},Ne.uniqueId=function FM(u){var p=++$S;return bi(u)+p},Ne.upperCase=IM,Ne.upperFirst=_m,Ne.each=VC,Ne.eachRight=Px,Ne.first=wx,ds(Ne,function(){var u={};return pc(Ne,function(p,w){Ti.call(Ne.prototype,w)||(u[w]=p)}),u}(),{chain:!1}),Ne.VERSION="4.17.21",Lo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Ne[u].placeholder=Ne}),Lo(["drop","take"],function(u,p){ii.prototype[u]=function(w){w=w===b?1:Ii(Jn(w),0);var oe=this.__filtered__&&!p?new ii(this):this.clone();return oe.__filtered__?oe.__takeCount__=Or(w,oe.__takeCount__):oe.__views__.push({size:Or(w,ge),type:u+(oe.__dir__<0?"Right":"")}),oe},ii.prototype[u+"Right"]=function(w){return this.reverse()[u](w).reverse()}}),Lo(["filter","map","takeWhile"],function(u,p){var w=p+1,oe=1==w||3==w;ii.prototype[u]=function(Se){var Ue=this.clone();return Ue.__iteratees__.push({iteratee:bn(Se,3),type:w}),Ue.__filtered__=Ue.__filtered__||oe,Ue}}),Lo(["head","last"],function(u,p){var w="take"+(p?"Right":"");ii.prototype[u]=function(){return this[w](1).value()[0]}}),Lo(["initial","tail"],function(u,p){var w="drop"+(p?"":"Right");ii.prototype[u]=function(){return this.__filtered__?new ii(this):this[w](1)}}),ii.prototype.compact=function(){return this.filter(ls)},ii.prototype.find=function(u){return this.filter(u).head()},ii.prototype.findLast=function(u){return this.reverse().find(u)},ii.prototype.invokeMap=ri(function(u,p){return"function"==typeof u?new ii(this):this.map(function(w){return au(w,u,p)})}),ii.prototype.reject=function(u){return this.filter($h(bn(u)))},ii.prototype.slice=function(u,p){u=Jn(u);var w=this;return w.__filtered__&&(u>0||p<0)?new ii(w):(u<0?w=w.takeRight(-u):u&&(w=w.drop(u)),p!==b&&(w=(p=Jn(p))<0?w.dropRight(-p):w.take(p-u)),w)},ii.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},ii.prototype.toArray=function(){return this.take(ge)},pc(ii.prototype,function(u,p){var w=/^(?:filter|find|map|reject)|While$/.test(p),oe=/^(?:head|last)$/.test(p),Se=Ne[oe?"take"+("last"==p?"Right":""):p],Ue=oe||/^find/.test(p);Se&&(Ne.prototype[p]=function(){var et=this.__wrapped__,ot=oe?[1]:arguments,ft=et instanceof ii,Ct=ot[0],Mt=ft||zn(et),Lt=function(oi){var ci=Se.apply(Ne,sc([oi],ot));return oe&&Yt?ci[0]:ci};Mt&&w&&"function"==typeof Ct&&1!=Ct.length&&(ft=Mt=!1);var Yt=this.__chain__,wn=Ue&&!Yt,Zn=ft&&!this.__actions__.length;if(!Ue&&Mt){et=Zn?et:new ii(this);var Sn=u.apply(et,ot);return Sn.__actions__.push({func:hd,args:[Lt],thisArg:b}),new Ar(Sn,Yt)}return wn&&Zn?u.apply(this,ot):(Sn=this.thru(Lt),wn?oe?Sn.value()[0]:Sn.value():Sn)})}),Lo(["pop","push","shift","sort","splice","unshift"],function(u){var p=rs[u],w=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",oe=/^(?:pop|shift)$/.test(u);Ne.prototype[u]=function(){var Se=arguments;if(oe&&!this.__chain__){var Ue=this.value();return p.apply(zn(Ue)?Ue:[],Se)}return this[w](function(et){return p.apply(zn(et)?et:[],Se)})}}),pc(ii.prototype,function(u,p){var w=Ne[p];if(w){var oe=w.name+"";Ti.call(pa,oe)||(pa[oe]=[]),pa[oe].push({name:p,func:w})}}),pa[Dh(b,2).name]=[{name:"wrapper",func:b}],ii.prototype.clone=function iu(){var u=new ii(this.__wrapped__);return u.__actions__=Uo(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Uo(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Uo(this.__views__),u},ii.prototype.reverse=function Ah(){if(this.__filtered__){var u=new ii(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},ii.prototype.value=function co(){var u=this.__wrapped__.value(),p=this.__dir__,w=zn(u),oe=p<0,Se=w?u.length:0,Ue=function GN(u,p,w){for(var oe=-1,Se=w.length;++oe<Se;){var Ue=w[oe],et=Ue.size;switch(Ue.type){case"drop":u+=et;break;case"dropRight":p-=et;break;case"take":p=Or(p,u+et);break;case"takeRight":u=Ii(u,p-et)}}return{start:u,end:p}}(0,Se,this.__views__),et=Ue.start,ot=Ue.end,ft=ot-et,Ct=oe?ot:et-1,Mt=this.__iteratees__,Lt=Mt.length,Yt=0,cn=Or(ft,this.__takeCount__);if(!w||!oe&&Se==ft&&cn==ft)return cx(u,this.__actions__);var wn=[];e:for(;ft--&&Yt<cn;){for(var Zn=-1,Sn=u[Ct+=p];++Zn<Lt;){var oi=Mt[Zn],Rs=oi.type,To=(0,oi.iteratee)(Sn);if(2==Rs)Sn=To;else if(!To){if(1==Rs)continue e;break e}}wn[Yt++]=Sn}return wn},Ne.prototype.at=Rx,Ne.prototype.chain=function BC(){return Dx(this)},Ne.prototype.commit=function kx(){return new Ar(this.value(),this.__chain__)},Ne.prototype.next=function tF(){this.__values__===b&&(this.__values__=Jx(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?b:this.__values__[this.__index__++]}},Ne.prototype.plant=function nF(u){for(var p,w=this;w instanceof Eh;){var oe=yx(w);oe.__index__=0,oe.__values__=b,p?Se.__wrapped__=oe:p=oe;var Se=oe;w=w.__wrapped__}return Se.__wrapped__=u,p},Ne.prototype.reverse=function jC(){var u=this.__wrapped__;if(u instanceof ii){var p=u;return this.__actions__.length&&(p=new ii(this)),(p=p.reverse()).__actions__.push({func:hd,args:[Vh],thisArg:b}),new Ar(p,this.__chain__)}return this.thru(Vh)},Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=function UC(){return cx(this.__wrapped__,this.__actions__)},Ne.prototype.first=Ne.prototype.head,wr&&(Ne.prototype[wr]=function Ox(){return this}),Ne}();ao._=xh,(S=function(){return xh}.call(Z,g,Z,ne))!==b&&(ne.exports=S)}.call(this)},7659:(ne,Z,g)=>{var S=g(1811);function O(C,N){if("function"!=typeof C||null!=N&&"function"!=typeof N)throw new TypeError("Expected a function");var _=function(){var v=arguments,D=N?N.apply(this,v):v[0],L=_.cache;if(L.has(D))return L.get(D);var P=C.apply(this,v);return _.cache=L.set(D,P)||L,P};return _.cache=new(O.Cache||S),_}O.Cache=S,ne.exports=O},2692:(ne,Z,g)=>{var S=g(3400),b=g(6443),O=g(6300),C=g(8916);ne.exports=function N(_){return O(_)?S(C(_)):b(_)}},7184:(ne,Z,g)=>{var S=g(1883),b=g(252),O=g(8951),C=g(3817),N=O(function(_,v){if(null==_)return[];var D=v.length;return D>1&&C(_,v[0],v[1])?v=[]:D>2&&C(v[0],v[1],v[2])&&(v=[v[0]]),b(_,S(v,1),[])});ne.exports=N},1315:ne=>{ne.exports=function Z(){return[]}},5706:ne=>{ne.exports=function Z(){return!1}},2674:(ne,Z,g)=>{var S=g(7002);ne.exports=function b(O){return null==O?"":S(O)}},5249:(ne,Z,g)=>{var S=g(549),b=S.ARRAY_BUFFER_SUPPORT,O=S.SYMBOL_SUPPORT;ne.exports=function(N,_){var v,D,L,P,j;if(!N)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof _)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(N)||b&&ArrayBuffer.isView(N)||"string"==typeof N||"[object Arguments]"===N.toString())for(L=0,P=N.length;L<P;L++)_(N[L],L);else if("function"!=typeof N.forEach)if(O&&Symbol.iterator in N&&"function"!=typeof N.next&&(N=N[Symbol.iterator]()),"function"!=typeof N.next)for(D in N)N.hasOwnProperty(D)&&_(N[D],D);else for(v=N,L=0;!0!==(j=v.next()).done;)_(j.value,L),L++;else N.forEach(_)}},2508:ne=>{function Z(g){if("function"!=typeof g)throw new Error("obliterator/iterator: expecting a function!");this.next=g}typeof Symbol<"u"&&(Z.prototype[Symbol.iterator]=function(){return this}),Z.of=function(){var g=arguments,S=g.length,b=0;return new Z(function(){return b>=S?{done:!0}:{done:!1,value:g[b++]}})},Z.empty=function(){return new Z(function(){return{done:!0}})},Z.fromSequence=function(g){var S=0,b=g.length;return new Z(function(){return S>=b?{done:!0}:{done:!1,value:g[S++]}})},Z.is=function(g){return g instanceof Z||"object"==typeof g&&null!==g&&"function"==typeof g.next},ne.exports=Z},549:(ne,Z)=>{Z.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Z.SYMBOL_SUPPORT=typeof Symbol<"u"},9151:(ne,Z,g)=>{var S=g(2508),b=g(5249);function O(){this.clear()}O.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},O.prototype.enqueue=function(C){return this.items.push(C),++this.size},O.prototype.dequeue=function(){if(this.size){var C=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,C}},O.prototype.peek=function(){if(this.size)return this.items[this.offset]},O.prototype.forEach=function(C,N){N=arguments.length>1?N:this;for(var _=this.offset,v=0,D=this.items.length;_<D;_++,v++)C.call(N,this.items[_],v,this)},O.prototype.toArray=function(){return this.items.slice(this.offset)},O.prototype.values=function(){var C=this.items,N=this.offset;return new S(function(){if(N>=C.length)return{done:!0};var _=C[N];return N++,{value:_,done:!1}})},O.prototype.entries=function(){var C=this.items,N=this.offset,_=0;return new S(function(){if(N>=C.length)return{done:!0};var v=C[N];return N++,{value:[_++,v],done:!1}})},typeof Symbol<"u"&&(O.prototype[Symbol.iterator]=O.prototype.values),O.prototype.toString=function(){return this.toArray().join(",")},O.prototype.toJSON=function(){return this.toArray()},O.prototype.inspect=function(){var C=this.toArray();return Object.defineProperty(C,"constructor",{value:O,enumerable:!1}),C},typeof Symbol<"u"&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=O.prototype.inspect),O.from=function(C){var N=new O;return b(C,function(_){N.enqueue(_)}),N},O.of=function(){return O.from(arguments)},ne.exports=O},5020:ne=>{ne.exports=function Z(g,S,b){function O(_,v){if(!S[_]){if(!g[_]){if(C)return C(_,!0);throw new Error("Cannot find module '"+_+"'")}v=S[_]={exports:{}},g[_][0].call(v.exports,function(L){return O(g[_][1][L]||L)},v,v.exports,Z,g,S,b)}return S[_].exports}for(var C=void 0,N=0;N<b.length;N++)O(b[N]);return O}({1:[function(Z,g,S){(function(b,O,C,N,_,v,D,L,P){"use strict";var j=Z("crypto");function se(J,V){var x;return void 0===(x="passthrough"!==(V=le(J,V)).algorithm?j.createHash(V.algorithm):new ie).write&&(x.write=x.update,x.end=x.update),re(V,x).dispatch(J),x.update||x.end(""),x.digest?x.digest("buffer"===V.encoding?void 0:V.encoding):(J=x.read(),"buffer"!==V.encoding?J.toString(V.encoding):J)}(S=g.exports=se).sha1=function(J){return se(J)},S.keys=function(J){return se(J,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},S.MD5=function(J){return se(J,{algorithm:"md5",encoding:"hex"})},S.keysMD5=function(J){return se(J,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var T=j.getHashes?j.getHashes().slice():["sha1","md5"],X=(T.push("passthrough"),["buffer","hex","binary","base64"]);function le(J,V){var x={};if(x.algorithm=(V=V||{}).algorithm||"sha1",x.encoding=V.encoding||"hex",x.excludeValues=!!V.excludeValues,x.algorithm=x.algorithm.toLowerCase(),x.encoding=x.encoding.toLowerCase(),x.ignoreUnknown=!0===V.ignoreUnknown,x.respectType=!1!==V.respectType,x.respectFunctionNames=!1!==V.respectFunctionNames,x.respectFunctionProperties=!1!==V.respectFunctionProperties,x.unorderedArrays=!0===V.unorderedArrays,x.unorderedSets=!1!==V.unorderedSets,x.unorderedObjects=!1!==V.unorderedObjects,x.replacer=V.replacer||void 0,x.excludeKeys=V.excludeKeys||void 0,void 0===J)throw new Error("Object argument required.");for(var B=0;B<T.length;++B)T[B].toLowerCase()===x.algorithm.toLowerCase()&&(x.algorithm=T[B]);if(-1===T.indexOf(x.algorithm))throw new Error('Algorithm "'+x.algorithm+'"  not supported. supported values: '+T.join(", "));if(-1===X.indexOf(x.encoding)&&"passthrough"!==x.algorithm)throw new Error('Encoding "'+x.encoding+'"  not supported. supported values: '+X.join(", "));return x}function K(J){if("function"==typeof J)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(J))}function re(J,V,x){function B(k){return V.update?V.update(k,"utf8"):V.write(k,"utf8")}return x=x||[],{dispatch:function(k){return this["_"+(null===(k=J.replacer?J.replacer(k):k)?"null":typeof k)](k)},_object:function(k){var he,W=Object.prototype.toString.call(k),Me=/\[object (.*)\]/i.exec(W);if(Me=(Me=Me?Me[1]:"unknown:["+W+"]").toLowerCase(),0<=(W=x.indexOf(k)))return this.dispatch("[CIRCULAR:"+W+"]");if(x.push(k),void 0!==C&&C.isBuffer&&C.isBuffer(k))return B("buffer:"),B(k);if("object"===Me||"function"===Me||"asyncfunction"===Me)return W=Object.keys(k),J.unorderedObjects&&(W=W.sort()),!1===J.respectType||K(k)||W.splice(0,0,"prototype","__proto__","constructor"),J.excludeKeys&&(W=W.filter(function(de){return!J.excludeKeys(de)})),B("object:"+W.length+":"),he=this,W.forEach(function(de){he.dispatch(de),B(":"),J.excludeValues||he.dispatch(k[de]),B(",")});if(!this["_"+Me]){if(J.ignoreUnknown)return B("["+Me+"]");throw new Error('Unknown object type "'+Me+'"')}this["_"+Me](k)},_array:function(k,de){de=void 0!==de?de:!1!==J.unorderedArrays;var W=this;if(B("array:"+k.length+":"),!de||k.length<=1)return k.forEach(function(xe){return W.dispatch(xe)});var Me=[];return de=k.map(function(xe){var Oe=new ie,Te=x.slice();return re(J,Oe,Te).dispatch(xe),Me=Me.concat(Te.slice(x.length)),Oe.read().toString()}),x=x.concat(Me),de.sort(),this._array(de,!1)},_date:function(k){return B("date:"+k.toJSON())},_symbol:function(k){return B("symbol:"+k.toString())},_error:function(k){return B("error:"+k.toString())},_boolean:function(k){return B("bool:"+k.toString())},_string:function(k){B("string:"+k.length+":"),B(k.toString())},_function:function(k){B("fn:"),K(k)?this.dispatch("[native]"):this.dispatch(k.toString()),!1!==J.respectFunctionNames&&this.dispatch("function-name:"+String(k.name)),J.respectFunctionProperties&&this._object(k)},_number:function(k){return B("number:"+k.toString())},_xml:function(k){return B("xml:"+k.toString())},_null:function(){return B("Null")},_undefined:function(){return B("Undefined")},_regexp:function(k){return B("regex:"+k.toString())},_uint8array:function(k){return B("uint8array:"),this.dispatch(Array.prototype.slice.call(k))},_uint8clampedarray:function(k){return B("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(k))},_int8array:function(k){return B("int8array:"),this.dispatch(Array.prototype.slice.call(k))},_uint16array:function(k){return B("uint16array:"),this.dispatch(Array.prototype.slice.call(k))},_int16array:function(k){return B("int16array:"),this.dispatch(Array.prototype.slice.call(k))},_uint32array:function(k){return B("uint32array:"),this.dispatch(Array.prototype.slice.call(k))},_int32array:function(k){return B("int32array:"),this.dispatch(Array.prototype.slice.call(k))},_float32array:function(k){return B("float32array:"),this.dispatch(Array.prototype.slice.call(k))},_float64array:function(k){return B("float64array:"),this.dispatch(Array.prototype.slice.call(k))},_arraybuffer:function(k){return B("arraybuffer:"),this.dispatch(new Uint8Array(k))},_url:function(k){return B("url:"+k.toString())},_map:function(k){return B("map:"),k=Array.from(k),this._array(k,!1!==J.unorderedSets)},_set:function(k){return B("set:"),k=Array.from(k),this._array(k,!1!==J.unorderedSets)},_file:function(k){return B("file:"),this.dispatch([k.name,k.size,k.type,k.lastModfied])},_blob:function(){if(J.ignoreUnknown)return B("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return B("domwindow")},_bigint:function(k){return B("bigint:"+k.toString())},_process:function(){return B("process")},_timer:function(){return B("timer")},_pipe:function(){return B("pipe")},_tcp:function(){return B("tcp")},_udp:function(){return B("udp")},_tty:function(){return B("tty")},_statwatcher:function(){return B("statwatcher")},_securecontext:function(){return B("securecontext")},_connection:function(){return B("connection")},_zlib:function(){return B("zlib")},_context:function(){return B("context")},_nodescript:function(){return B("nodescript")},_httpparser:function(){return B("httpparser")},_dataview:function(){return B("dataview")},_signal:function(){return B("signal")},_fsevent:function(){return B("fsevent")},_tlswrap:function(){return B("tlswrap")}}}function ie(){return{buf:"",write:function(J){this.buf+=J},end:function(J){this.buf+=J},read:function(){return this.buf}}}S.writeToStream=function(J,V,x){return void 0===x&&(x=V,V={}),re(V=le(J,V),x).dispatch(J)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(Z,g,S){(function(b,O,C,N,_,v,D,L,P){!function(j){"use strict";var se=typeof Uint8Array<"u"?Uint8Array:Array,T="+".charCodeAt(0),X="/".charCodeAt(0),le="0".charCodeAt(0),K="a".charCodeAt(0),re="A".charCodeAt(0),ie="-".charCodeAt(0),J="_".charCodeAt(0);function V(x){return(x=x.charCodeAt(0))===T||x===ie?62:x===X||x===J?63:x<le?-1:x<le+10?x-le+26+26:x<re+26?x-re:x<K+26?x-K+26:void 0}j.toByteArray=function(x){var B,k;if(0<x.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var he="="===x.charAt((he=x.length)-2)?2:"="===x.charAt(he-1)?1:0,W=new se(3*x.length/4-he),Me=0<he?x.length-4:x.length,de=0;function xe(Oe){W[de++]=Oe}for(B=0;B<Me;B+=4,0)xe((16711680&(k=V(x.charAt(B))<<18|V(x.charAt(B+1))<<12|V(x.charAt(B+2))<<6|V(x.charAt(B+3))))>>16),xe((65280&k)>>8),xe(255&k);return 2==he?xe(255&(k=V(x.charAt(B))<<2|V(x.charAt(B+1))>>4)):1==he&&(xe((k=V(x.charAt(B))<<10|V(x.charAt(B+1))<<4|V(x.charAt(B+2))>>2)>>8&255),xe(255&k)),W},j.fromByteArray=function(x){var B,k,he,W,Me=x.length%3,de="";function xe(Oe){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Oe)}for(B=0,he=x.length-Me;B<he;B+=3)de+=xe((W=k=(x[B]<<16)+(x[B+1]<<8)+x[B+2])>>18&63)+xe(W>>12&63)+xe(W>>6&63)+xe(63&W);switch(Me){case 1:de=(de+=xe((k=x[x.length-1])>>2))+xe(k<<4&63)+"==";break;case 2:de=(de=(de+=xe((k=(x[x.length-2]<<8)+x[x.length-1])>>10))+xe(k>>4&63))+xe(k<<2&63)+"="}return de}}(void 0===S?this.base64js={}:S)}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(Z,g,S){(function(b,O,T,N,_,v,D,L,P){var j=Z("base64-js"),se=Z("ieee754");function T(ye,G,R){if(!(this instanceof T))return new T(ye,G,R);var ae,U,Le,tt,fe=typeof ye;if("base64"===G&&"string"==fe)for(ye=(tt=ye).trim?tt.trim():tt.replace(/^\s+|\s+$/g,"");ye.length%4!=0;)ye+="=";if("number"==fe)ae=Je(ye);else if("string"==fe)ae=T.byteLength(ye,G);else{if("object"!=fe)throw new Error("First argument needs to be a number, array or string.");ae=Je(ye.length)}if(T._useTypedArrays?U=T._augment(new Uint8Array(ae)):((U=this).length=ae,U._isBuffer=!0),T._useTypedArrays&&"number"==typeof ye.byteLength)U._set(ye);else if(Ke(tt=ye)||T.isBuffer(tt)||tt&&"object"==typeof tt&&"number"==typeof tt.length)for(Le=0;Le<ae;Le++)U[Le]=T.isBuffer(ye)?ye.readUInt8(Le):ye[Le];else if("string"==fe)U.write(ye,0,G);else if("number"==fe&&!T._useTypedArrays&&!R)for(Le=0;Le<ae;Le++)U[Le]=0;return U}function re(ye,G,R,Le){var U;if(Le||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(null!=G,"missing offset"),Ye(G+1<ye.length,"Trying to read beyond buffer length")),!((Le=ye.length)<=G))return R?(U=ye[G],G+1<Le&&(U|=ye[G+1]<<8)):(U=ye[G]<<8,G+1<Le&&(U|=ye[G+1])),U}function ie(ye,G,R,Le){var U;if(Le||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(null!=G,"missing offset"),Ye(G+3<ye.length,"Trying to read beyond buffer length")),!((Le=ye.length)<=G))return R?(G+2<Le&&(U=ye[G+2]<<16),G+1<Le&&(U|=ye[G+1]<<8),U|=ye[G],G+3<Le&&(U+=ye[G+3]<<24>>>0)):(G+1<Le&&(U=ye[G+1]<<16),G+2<Le&&(U|=ye[G+2]<<8),G+3<Le&&(U|=ye[G+3]),U+=ye[G]<<24>>>0),U}function J(ye,G,R,ae){if(ae||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(null!=G,"missing offset"),Ye(G+1<ye.length,"Trying to read beyond buffer length")),!(ye.length<=G))return 32768&(ae=re(ye,G,R,!0))?-1*(65535-ae+1):ae}function V(ye,G,R,ae){if(ae||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(null!=G,"missing offset"),Ye(G+3<ye.length,"Trying to read beyond buffer length")),!(ye.length<=G))return 2147483648&(ae=ie(ye,G,R,!0))?-1*(4294967295-ae+1):ae}function x(ye,G,R,ae){return ae||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(G+3<ye.length,"Trying to read beyond buffer length")),se.read(ye,G,R,23,4)}function B(ye,G,R,ae){return ae||(Ye("boolean"==typeof R,"missing or invalid endian"),Ye(G+7<ye.length,"Trying to read beyond buffer length")),se.read(ye,G,R,52,8)}function k(ye,G,R,ae,U){if(U||(Ye(null!=G,"missing value"),Ye("boolean"==typeof ae,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+1<ye.length,"trying to write beyond buffer length"),Ae(G,65535)),!((U=ye.length)<=R))for(var Le=0,tt=Math.min(U-R,2);Le<tt;Le++)ye[R+Le]=(G&255<<8*(ae?Le:1-Le))>>>8*(ae?Le:1-Le)}function he(ye,G,R,ae,U){if(U||(Ye(null!=G,"missing value"),Ye("boolean"==typeof ae,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+3<ye.length,"trying to write beyond buffer length"),Ae(G,4294967295)),!((U=ye.length)<=R))for(var Le=0,tt=Math.min(U-R,4);Le<tt;Le++)ye[R+Le]=G>>>8*(ae?Le:3-Le)&255}function W(ye,G,R,ae,U){U||(Ye(null!=G,"missing value"),Ye("boolean"==typeof ae,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+1<ye.length,"Trying to write beyond buffer length"),qe(G,32767,-32768)),ye.length<=R||k(ye,0<=G?G:65535+G+1,R,ae,U)}function Me(ye,G,R,ae,U){U||(Ye(null!=G,"missing value"),Ye("boolean"==typeof ae,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+3<ye.length,"Trying to write beyond buffer length"),qe(G,2147483647,-2147483648)),ye.length<=R||he(ye,0<=G?G:4294967295+G+1,R,ae,U)}function de(ye,G,R,ae,U){U||(Ye(null!=G,"missing value"),Ye("boolean"==typeof ae,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+3<ye.length,"Trying to write beyond buffer length"),ct(G,34028234663852886e22,-34028234663852886e22)),ye.length<=R||se.write(ye,G,R,ae,23,4)}function xe(ye,G,R,ae,U){U||(Ye(null!=G,"missing value"),Ye("boolean"==typeof ae,"missing or invalid endian"),Ye(null!=R,"missing offset"),Ye(R+7<ye.length,"Trying to write beyond buffer length"),ct(G,17976931348623157e292,-17976931348623157e292)),ye.length<=R||se.write(ye,G,R,ae,52,8)}S.Buffer=T,S.SlowBuffer=T,S.INSPECT_MAX_BYTES=50,T.poolSize=8192,T._useTypedArrays=function(){try{var ye=new ArrayBuffer(0),G=new Uint8Array(ye);return G.foo=function(){return 42},42===G.foo()&&"function"==typeof G.subarray}catch{return!1}}(),T.isEncoding=function(ye){switch(String(ye).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.isBuffer=function(ye){return!(null==ye||!ye._isBuffer)},T.byteLength=function(ye,G){var R;switch(ye+="",G||"utf8"){case"hex":R=ye.length/2;break;case"utf8":case"utf-8":R=Fe(ye).length;break;case"ascii":case"binary":case"raw":R=ye.length;break;case"base64":R=Pe(ye).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":R=2*ye.length;break;default:throw new Error("Unknown encoding")}return R},T.concat=function(ye,G){if(Ye(Ke(ye),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===ye.length)return new T(0);if(1===ye.length)return ye[0];if("number"!=typeof G)for(U=G=0;U<ye.length;U++)G+=ye[U].length;for(var R=new T(G),ae=0,U=0;U<ye.length;U++){var Le=ye[U];Le.copy(R,ae),ae+=Le.length}return R},T.prototype.write=function(ye,G,R,ae){isFinite(G)?isFinite(R)||(ae=R,R=void 0):(ee=ae,ae=G,G=R,R=ee),G=Number(G)||0;var U,Le,tt,fe,ee=this.length-G;switch((!R||ee<(R=Number(R)))&&(R=ee),ae=String(ae||"utf8").toLowerCase()){case"hex":U=function(q,A,F,ue){F=Number(F)||0;var me=q.length-F;(!ue||me<(ue=Number(ue)))&&(ue=me),Ye((me=A.length)%2==0,"Invalid hex string"),me/2<ue&&(ue=me/2);for(var We=0;We<ue;We++){var He=parseInt(A.substr(2*We,2),16);Ye(!isNaN(He),"Invalid hex string"),q[F+We]=He}return T._charsWritten=2*We,We}(this,ye,G,R);break;case"utf8":case"utf-8":Le=this,tt=G,fe=R,U=T._charsWritten=Ge(Fe(ye),Le,tt,fe);break;case"ascii":case"binary":U=function X(ye,G,R,ae){return T._charsWritten=Ge(function(U){for(var Le=[],tt=0;tt<U.length;tt++)Le.push(255&U.charCodeAt(tt));return Le}(G),ye,R,ae)}(this,ye,G,R);break;case"base64":Le=this,tt=G,fe=R,U=T._charsWritten=Ge(Pe(ye),Le,tt,fe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":U=function le(ye,G,R,ae){return T._charsWritten=Ge(function(U){for(var Le,tt,fe=[],ee=0;ee<U.length;ee++)Le=(tt=U.charCodeAt(ee))>>8,fe.push(tt%=256),fe.push(Le);return fe}(G),ye,R,ae)}(this,ye,G,R);break;default:throw new Error("Unknown encoding")}return U},T.prototype.toString=function(ye,G,R){var ae,U,Le,tt,fe=this;if(ye=String(ye||"utf8").toLowerCase(),G=Number(G)||0,(R=void 0!==R?Number(R):fe.length)===G)return"";switch(ye){case"hex":ae=function(ee,q,A){var F=ee.length;(!q||q<0)&&(q=0),(!A||A<0||F<A)&&(A=F);for(var ue="",me=q;me<A;me++)ue+=Ee(ee[me]);return ue}(fe,G,R);break;case"utf8":case"utf-8":ae=function(ee,q,A){var F="",ue="";A=Math.min(ee.length,A);for(var me=q;me<A;me++)ee[me]<=127?(F+=ge(ue)+String.fromCharCode(ee[me]),ue=""):ue+="%"+ee[me].toString(16);return F+ge(ue)}(fe,G,R);break;case"ascii":case"binary":ae=function K(ye,G,R){var ae="";R=Math.min(ye.length,R);for(var U=G;U<R;U++)ae+=String.fromCharCode(ye[U]);return ae}(fe,G,R);break;case"base64":U=fe,tt=R,ae=0===(Le=G)&&tt===U.length?j.fromByteArray(U):j.fromByteArray(U.slice(Le,tt));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ae=function(ee,q,A){for(var F=ee.slice(q,A),ue="",me=0;me<F.length;me+=2)ue+=String.fromCharCode(F[me]+256*F[me+1]);return ue}(fe,G,R);break;default:throw new Error("Unknown encoding")}return ae},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},T.prototype.copy=function(ye,G,R,ae){if(G=G||0,(ae=ae||0===ae?ae:this.length)!==(R=R||0)&&0!==ye.length&&0!==this.length){Ye(R<=ae,"sourceEnd < sourceStart"),Ye(0<=G&&G<ye.length,"targetStart out of bounds"),Ye(0<=R&&R<this.length,"sourceStart out of bounds"),Ye(0<=ae&&ae<=this.length,"sourceEnd out of bounds"),ae>this.length&&(ae=this.length);var U=(ae=ye.length-G<ae-R?ye.length-G+R:ae)-R;if(U<100||!T._useTypedArrays)for(var Le=0;Le<U;Le++)ye[Le+G]=this[Le+R];else ye._set(this.subarray(R,R+U),G)}},T.prototype.slice=function(ye,G){var R=this.length;if(ye=Te(ye,R,0),G=Te(G,R,R),T._useTypedArrays)return T._augment(this.subarray(ye,G));for(var ae=G-ye,U=new T(ae,void 0,!0),Le=0;Le<ae;Le++)U[Le]=this[Le+ye];return U},T.prototype.get=function(ye){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(ye)},T.prototype.set=function(ye,G){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(ye,G)},T.prototype.readUInt8=function(ye,G){if(G||(Ye(null!=ye,"missing offset"),Ye(ye<this.length,"Trying to read beyond buffer length")),!(ye>=this.length))return this[ye]},T.prototype.readUInt16LE=function(ye,G){return re(this,ye,!0,G)},T.prototype.readUInt16BE=function(ye,G){return re(this,ye,!1,G)},T.prototype.readUInt32LE=function(ye,G){return ie(this,ye,!0,G)},T.prototype.readUInt32BE=function(ye,G){return ie(this,ye,!1,G)},T.prototype.readInt8=function(ye,G){if(G||(Ye(null!=ye,"missing offset"),Ye(ye<this.length,"Trying to read beyond buffer length")),!(ye>=this.length))return 128&this[ye]?-1*(255-this[ye]+1):this[ye]},T.prototype.readInt16LE=function(ye,G){return J(this,ye,!0,G)},T.prototype.readInt16BE=function(ye,G){return J(this,ye,!1,G)},T.prototype.readInt32LE=function(ye,G){return V(this,ye,!0,G)},T.prototype.readInt32BE=function(ye,G){return V(this,ye,!1,G)},T.prototype.readFloatLE=function(ye,G){return x(this,ye,!0,G)},T.prototype.readFloatBE=function(ye,G){return x(this,ye,!1,G)},T.prototype.readDoubleLE=function(ye,G){return B(this,ye,!0,G)},T.prototype.readDoubleBE=function(ye,G){return B(this,ye,!1,G)},T.prototype.writeUInt8=function(ye,G,R){R||(Ye(null!=ye,"missing value"),Ye(null!=G,"missing offset"),Ye(G<this.length,"trying to write beyond buffer length"),Ae(ye,255)),G>=this.length||(this[G]=ye)},T.prototype.writeUInt16LE=function(ye,G,R){k(this,ye,G,!0,R)},T.prototype.writeUInt16BE=function(ye,G,R){k(this,ye,G,!1,R)},T.prototype.writeUInt32LE=function(ye,G,R){he(this,ye,G,!0,R)},T.prototype.writeUInt32BE=function(ye,G,R){he(this,ye,G,!1,R)},T.prototype.writeInt8=function(ye,G,R){R||(Ye(null!=ye,"missing value"),Ye(null!=G,"missing offset"),Ye(G<this.length,"Trying to write beyond buffer length"),qe(ye,127,-128)),G>=this.length||this.writeUInt8(0<=ye?ye:255+ye+1,G,R)},T.prototype.writeInt16LE=function(ye,G,R){W(this,ye,G,!0,R)},T.prototype.writeInt16BE=function(ye,G,R){W(this,ye,G,!1,R)},T.prototype.writeInt32LE=function(ye,G,R){Me(this,ye,G,!0,R)},T.prototype.writeInt32BE=function(ye,G,R){Me(this,ye,G,!1,R)},T.prototype.writeFloatLE=function(ye,G,R){de(this,ye,G,!0,R)},T.prototype.writeFloatBE=function(ye,G,R){de(this,ye,G,!1,R)},T.prototype.writeDoubleLE=function(ye,G,R){xe(this,ye,G,!0,R)},T.prototype.writeDoubleBE=function(ye,G,R){xe(this,ye,G,!1,R)},T.prototype.fill=function(ye,G,R){if(G=G||0,R=R||this.length,Ye("number"==typeof(ye="string"==typeof(ye=ye||0)?ye.charCodeAt(0):ye)&&!isNaN(ye),"value is not a number"),Ye(G<=R,"end < start"),R!==G&&0!==this.length){Ye(0<=G&&G<this.length,"start out of bounds"),Ye(0<=R&&R<=this.length,"end out of bounds");for(var ae=G;ae<R;ae++)this[ae]=ye}},T.prototype.inspect=function(){for(var ye=[],G=this.length,R=0;R<G;R++)if(ye[R]=Ee(this[R]),R===S.INSPECT_MAX_BYTES){ye[R+1]="...";break}return"<Buffer "+ye.join(" ")+">"},T.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(T._useTypedArrays)return new T(this).buffer;for(var ye=new Uint8Array(this.length),G=0,R=ye.length;G<R;G+=1)ye[G]=this[G];return ye.buffer};var Oe=T.prototype;function Te(ye,G,R){return"number"!=typeof ye?R:G<=(ye=~~ye)?G:0<=ye||0<=(ye+=G)?ye:0}function Je(ye){return(ye=~~Math.ceil(+ye))<0?0:ye}function Ke(ye){return(Array.isArray||function(G){return"[object Array]"===Object.prototype.toString.call(G)})(ye)}function Ee(ye){return ye<16?"0"+ye.toString(16):ye.toString(16)}function Fe(ye){for(var G=[],R=0;R<ye.length;R++){var ae=ye.charCodeAt(R);if(ae<=127)G.push(ye.charCodeAt(R));else for(var U=R,Le=(55296<=ae&&ae<=57343&&R++,encodeURIComponent(ye.slice(U,R+1)).substr(1).split("%")),tt=0;tt<Le.length;tt++)G.push(parseInt(Le[tt],16))}return G}function Pe(ye){return j.toByteArray(ye)}function Ge(ye,G,R,ae){for(var U=0;U<ae&&!(U+R>=G.length||U>=ye.length);U++)G[U+R]=ye[U];return U}function ge(ye){try{return decodeURIComponent(ye)}catch{return String.fromCharCode(65533)}}function Ae(ye,G){Ye("number"==typeof ye,"cannot write a non-number as a number"),Ye(0<=ye,"specified a negative value for writing an unsigned value"),Ye(ye<=G,"value is larger than maximum value for type"),Ye(Math.floor(ye)===ye,"value has a fractional component")}function qe(ye,G,R){Ye("number"==typeof ye,"cannot write a non-number as a number"),Ye(ye<=G,"value larger than maximum allowed value"),Ye(R<=ye,"value smaller than minimum allowed value"),Ye(Math.floor(ye)===ye,"value has a fractional component")}function ct(ye,G,R){Ye("number"==typeof ye,"cannot write a non-number as a number"),Ye(ye<=G,"value larger than maximum allowed value"),Ye(R<=ye,"value smaller than minimum allowed value")}function Ye(ye,G){if(!ye)throw new Error(G||"Failed assertion")}T._augment=function(ye){return ye._isBuffer=!0,ye._get=ye.get,ye._set=ye.set,ye.get=Oe.get,ye.set=Oe.set,ye.write=Oe.write,ye.toString=Oe.toString,ye.toLocaleString=Oe.toString,ye.toJSON=Oe.toJSON,ye.copy=Oe.copy,ye.slice=Oe.slice,ye.readUInt8=Oe.readUInt8,ye.readUInt16LE=Oe.readUInt16LE,ye.readUInt16BE=Oe.readUInt16BE,ye.readUInt32LE=Oe.readUInt32LE,ye.readUInt32BE=Oe.readUInt32BE,ye.readInt8=Oe.readInt8,ye.readInt16LE=Oe.readInt16LE,ye.readInt16BE=Oe.readInt16BE,ye.readInt32LE=Oe.readInt32LE,ye.readInt32BE=Oe.readInt32BE,ye.readFloatLE=Oe.readFloatLE,ye.readFloatBE=Oe.readFloatBE,ye.readDoubleLE=Oe.readDoubleLE,ye.readDoubleBE=Oe.readDoubleBE,ye.writeUInt8=Oe.writeUInt8,ye.writeUInt16LE=Oe.writeUInt16LE,ye.writeUInt16BE=Oe.writeUInt16BE,ye.writeUInt32LE=Oe.writeUInt32LE,ye.writeUInt32BE=Oe.writeUInt32BE,ye.writeInt8=Oe.writeInt8,ye.writeInt16LE=Oe.writeInt16LE,ye.writeInt16BE=Oe.writeInt16BE,ye.writeInt32LE=Oe.writeInt32LE,ye.writeInt32BE=Oe.writeInt32BE,ye.writeFloatLE=Oe.writeFloatLE,ye.writeFloatBE=Oe.writeFloatBE,ye.writeDoubleLE=Oe.writeDoubleLE,ye.writeDoubleBE=Oe.writeDoubleBE,ye.fill=Oe.fill,ye.inspect=Oe.inspect,ye.toArrayBuffer=Oe.toArrayBuffer,ye}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(Z,g,S){(function(b,O,j,N,_,v,D,L,P){j=Z("buffer").Buffer;var T=new j(4);T.fill(0),g.exports={hash:function(X,le,K,re){for(var ie=le(function(k,he){k.length%4!=0&&(k=j.concat([k,T],k.length+(4-k.length%4)));for(var Me=[],de=he?k.readInt32BE:k.readInt32LE,xe=0;xe<k.length;xe+=4)Me.push(de.call(k,xe));return Me}(X=j.isBuffer(X)?X:new j(X),re),8*X.length),J=(le=re,new j(K)),V=le?J.writeInt32BE:J.writeInt32LE,x=0;x<ie.length;x++)V.call(J,ie[x],4*x,!0);return J}}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(Z,g,S){(function(b,O,j,N,_,v,D,L,P){j=Z("buffer").Buffer;var se=Z("./sha"),T=Z("./sha256"),X=Z("./rng"),le={sha1:se,sha256:T,md5:Z("./md5")},K=64,re=new j(K);function ie(k,he){var W=le[k=k||"sha1"],Me=[];return W||J("algorithm:",k,"is not yet supported"),{update:function(de){return j.isBuffer(de)||(de=new j(de)),Me.push(de),this},digest:function(de){var xe=j.concat(Me);return xe=he?function(Oe,Te,Je){j.isBuffer(Te)||(Te=new j(Te)),j.isBuffer(Je)||(Je=new j(Je)),Te.length>K?Te=Oe(Te):Te.length<K&&(Te=j.concat([Te,re],K));for(var Ke=new j(K),Ee=new j(K),Fe=0;Fe<K;Fe++)Ke[Fe]=54^Te[Fe],Ee[Fe]=92^Te[Fe];return Je=Oe(j.concat([Ke,Je])),Oe(j.concat([Ee,Je]))}(W,he,xe):W(xe),Me=null,de?xe.toString(de):xe}}}function J(){var k=[].slice.call(arguments).join(" ");throw new Error([k,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}re.fill(0),S.createHash=function(k){return ie(k)},S.createHmac=ie,S.randomBytes=function(k,he){if(!he||!he.call)return new j(X(k));try{he.call(this,void 0,new j(X(k)))}catch(W){he(W)}};var V,x=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],B=function(k){S[k]=function(){J("sorry,",k,"is not implemented yet")}};for(V in x)B(x[V])}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(Z,g,S){(function(b,O,C,N,_,v,D,L,P){var j=Z("./helpers");function se(J,V){J[V>>5]|=128<<V%32,J[14+(V+64>>>9<<4)]=V;for(var x=1732584193,B=-271733879,k=-1732584194,he=271733878,W=0;W<J.length;W+=16){var Me=x,de=B,xe=k,Oe=he;x=X(x,B,k,he,J[W+0],7,-680876936),he=X(he,x,B,k,J[W+1],12,-389564586),k=X(k,he,x,B,J[W+2],17,606105819),B=X(B,k,he,x,J[W+3],22,-1044525330),x=X(x,B,k,he,J[W+4],7,-176418897),he=X(he,x,B,k,J[W+5],12,1200080426),k=X(k,he,x,B,J[W+6],17,-1473231341),B=X(B,k,he,x,J[W+7],22,-45705983),x=X(x,B,k,he,J[W+8],7,1770035416),he=X(he,x,B,k,J[W+9],12,-1958414417),k=X(k,he,x,B,J[W+10],17,-42063),B=X(B,k,he,x,J[W+11],22,-1990404162),x=X(x,B,k,he,J[W+12],7,1804603682),he=X(he,x,B,k,J[W+13],12,-40341101),k=X(k,he,x,B,J[W+14],17,-1502002290),x=le(x,B=X(B,k,he,x,J[W+15],22,1236535329),k,he,J[W+1],5,-165796510),he=le(he,x,B,k,J[W+6],9,-1069501632),k=le(k,he,x,B,J[W+11],14,643717713),B=le(B,k,he,x,J[W+0],20,-373897302),x=le(x,B,k,he,J[W+5],5,-701558691),he=le(he,x,B,k,J[W+10],9,38016083),k=le(k,he,x,B,J[W+15],14,-660478335),B=le(B,k,he,x,J[W+4],20,-405537848),x=le(x,B,k,he,J[W+9],5,568446438),he=le(he,x,B,k,J[W+14],9,-1019803690),k=le(k,he,x,B,J[W+3],14,-187363961),B=le(B,k,he,x,J[W+8],20,1163531501),x=le(x,B,k,he,J[W+13],5,-1444681467),he=le(he,x,B,k,J[W+2],9,-51403784),k=le(k,he,x,B,J[W+7],14,1735328473),x=K(x,B=le(B,k,he,x,J[W+12],20,-1926607734),k,he,J[W+5],4,-378558),he=K(he,x,B,k,J[W+8],11,-2022574463),k=K(k,he,x,B,J[W+11],16,1839030562),B=K(B,k,he,x,J[W+14],23,-35309556),x=K(x,B,k,he,J[W+1],4,-1530992060),he=K(he,x,B,k,J[W+4],11,1272893353),k=K(k,he,x,B,J[W+7],16,-155497632),B=K(B,k,he,x,J[W+10],23,-1094730640),x=K(x,B,k,he,J[W+13],4,681279174),he=K(he,x,B,k,J[W+0],11,-358537222),k=K(k,he,x,B,J[W+3],16,-722521979),B=K(B,k,he,x,J[W+6],23,76029189),x=K(x,B,k,he,J[W+9],4,-640364487),he=K(he,x,B,k,J[W+12],11,-421815835),k=K(k,he,x,B,J[W+15],16,530742520),x=re(x,B=K(B,k,he,x,J[W+2],23,-995338651),k,he,J[W+0],6,-198630844),he=re(he,x,B,k,J[W+7],10,1126891415),k=re(k,he,x,B,J[W+14],15,-1416354905),B=re(B,k,he,x,J[W+5],21,-57434055),x=re(x,B,k,he,J[W+12],6,1700485571),he=re(he,x,B,k,J[W+3],10,-1894986606),k=re(k,he,x,B,J[W+10],15,-1051523),B=re(B,k,he,x,J[W+1],21,-2054922799),x=re(x,B,k,he,J[W+8],6,1873313359),he=re(he,x,B,k,J[W+15],10,-30611744),k=re(k,he,x,B,J[W+6],15,-1560198380),B=re(B,k,he,x,J[W+13],21,1309151649),x=re(x,B,k,he,J[W+4],6,-145523070),he=re(he,x,B,k,J[W+11],10,-1120210379),k=re(k,he,x,B,J[W+2],15,718787259),B=re(B,k,he,x,J[W+9],21,-343485551),x=ie(x,Me),B=ie(B,de),k=ie(k,xe),he=ie(he,Oe)}return Array(x,B,k,he)}function T(J,V,x,B,k,he){return ie((V=ie(ie(V,J),ie(B,he)))<<k|V>>>32-k,x)}function X(J,V,x,B,k,he,W){return T(V&x|~V&B,J,V,k,he,W)}function le(J,V,x,B,k,he,W){return T(V&B|x&~B,J,V,k,he,W)}function K(J,V,x,B,k,he,W){return T(V^x^B,J,V,k,he,W)}function re(J,V,x,B,k,he,W){return T(x^(V|~B),J,V,k,he,W)}function ie(J,V){var x=(65535&J)+(65535&V);return(J>>16)+(V>>16)+(x>>16)<<16|65535&x}g.exports=function(J){return j.hash(J,se,16)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(Z,g,S){(function(b,O,C,N,_,v,D,L,P){g.exports=function(se){for(var T,X=new Array(se),le=0;le<se;le++)!(3&le)&&(T=4294967296*Math.random()),X[le]=T>>>((3&le)<<3)&255;return X}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(Z,g,S){(function(b,O,C,N,_,v,D,L,P){var j=Z("./helpers");function se(le,K){le[K>>5]|=128<<24-K%32,le[15+(K+64>>9<<4)]=K;for(var re,ie,J,V=Array(80),x=1732584193,B=-271733879,k=-1732584194,he=271733878,W=-1009589776,Me=0;Me<le.length;Me+=16){for(var de=x,xe=B,Oe=k,Te=he,Je=W,Ke=0;Ke<80;Ke++){V[Ke]=Ke<16?le[Me+Ke]:X(V[Ke-3]^V[Ke-8]^V[Ke-14]^V[Ke-16],1);var Ee=T(T(X(x,5),(Ee=B,ie=k,J=he,(re=Ke)<20?Ee&ie|~Ee&J:!(re<40)&&re<60?Ee&ie|Ee&J|ie&J:Ee^ie^J)),T(T(W,V[Ke]),(re=Ke)<20?1518500249:re<40?1859775393:re<60?-1894007588:-899497514));W=he,he=k,k=X(B,30),B=x,x=Ee}x=T(x,de),B=T(B,xe),k=T(k,Oe),he=T(he,Te),W=T(W,Je)}return Array(x,B,k,he,W)}function T(le,K){var re=(65535&le)+(65535&K);return(le>>16)+(K>>16)+(re>>16)<<16|65535&re}function X(le,K){return le<<K|le>>>32-K}g.exports=function(le){return j.hash(le,se,20,!0)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(Z,g,S){(function(b,O,C,N,_,v,D,L,P){function j(K,re){var ie=(65535&K)+(65535&re);return(K>>16)+(re>>16)+(ie>>16)<<16|65535&ie}function se(K,re){var ie,J=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),V=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);K[re>>5]|=128<<24-re%32,K[15+(re+64>>9<<4)]=re;for(var B,k,he=0;he<K.length;he+=16){for(var W=V[0],Me=V[1],de=V[2],xe=V[3],Oe=V[4],Te=V[5],Je=V[6],Ke=V[7],Ee=0;Ee<64;Ee++)x[Ee]=Ee<16?K[Ee+he]:j(j(j(X(k=x[Ee-2],17)^X(k,19)^le(k,10),x[Ee-7]),X(k=x[Ee-15],7)^X(k,18)^le(k,3)),x[Ee-16]),ie=j(j(j(j(Ke,X(k=Oe,6)^X(k,11)^X(k,25)),Oe&Te^~Oe&Je),J[Ee]),x[Ee]),B=j(X(B=W,2)^X(B,13)^X(B,22),W&Me^W&de^Me&de),Ke=Je,Je=Te,Te=Oe,Oe=j(xe,ie),xe=de,de=Me,Me=W,W=j(ie,B);V[0]=j(W,V[0]),V[1]=j(Me,V[1]),V[2]=j(de,V[2]),V[3]=j(xe,V[3]),V[4]=j(Oe,V[4]),V[5]=j(Te,V[5]),V[6]=j(Je,V[6]),V[7]=j(Ke,V[7])}return V}var T=Z("./helpers"),X=function(K,re){return K>>>re|K<<32-re},le=function(K,re){return K>>>re};g.exports=function(K){return T.hash(K,se,32,!0)}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(Z,g,S){(function(b,O,C,N,_,v,D,L,P){S.read=function(j,se,T,X,he){var K,re,ie=8*he-X-1,J=(1<<ie)-1,V=J>>1,x=-7,B=T?he-1:0,k=T?-1:1;for(he=j[se+B],B+=k,K=he&(1<<-x)-1,he>>=-x,x+=ie;0<x;K=256*K+j[se+B],B+=k,x-=8);for(re=K&(1<<-x)-1,K>>=-x,x+=X;0<x;re=256*re+j[se+B],B+=k,x-=8);if(0===K)K=1-V;else{if(K===J)return re?NaN:1/0*(he?-1:1);re+=Math.pow(2,X),K-=V}return(he?-1:1)*re*Math.pow(2,K-X)},S.write=function(j,se,T,X,le,W){var re,ie,J=8*W-le-1,V=(1<<J)-1,x=V>>1,B=23===le?Math.pow(2,-24)-Math.pow(2,-77):0,k=X?0:W-1,he=X?1:-1;for(W=se<0||0===se&&1/se<0?1:0,se=Math.abs(se),isNaN(se)||se===1/0?(ie=isNaN(se)?1:0,re=V):(re=Math.floor(Math.log(se)/Math.LN2),se*(X=Math.pow(2,-re))<1&&(re--,X*=2),2<=(se+=1<=re+x?B/X:B*Math.pow(2,1-x))*X&&(re++,X/=2),V<=re+x?(ie=0,re=V):1<=re+x?(ie=(se*X-1)*Math.pow(2,le),re+=x):(ie=se*Math.pow(2,x-1)*Math.pow(2,le),re=0));8<=le;j[T+k]=255&ie,k+=he,ie/=256,le-=8);for(re=re<<le|ie,J+=le;0<J;j[T+k]=255&re,k+=he,re/=256,J-=8);j[T+k-he]|=128*W}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(Z,g,S){(function(b,O,C,N,_,v,D,L,P){var j,se,T;function X(){}(b=g.exports={}).nextTick=(se=typeof window<"u"&&window.setImmediate,T=typeof window<"u"&&window.postMessage&&window.addEventListener,se?function(le){return window.setImmediate(le)}:T?(j=[],window.addEventListener("message",function(le){var K=le.source;K!==window&&null!==K||"process-tick"!==le.data||(le.stopPropagation(),0<j.length&&j.shift()())},!0),function(le){j.push(le),window.postMessage("process-tick","*")}):function(le){setTimeout(le,0)}),b.title="browser",b.browser=!0,b.env={},b.argv=[],b.on=X,b.addListener=X,b.once=X,b.off=X,b.removeListener=X,b.removeAllListeners=X,b.emit=X,b.binding=function(le){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(le){throw new Error("process.chdir is not supported")}}).call(this,Z("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},Z("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},42:ne=>{var g,S,Z=ne.exports={};function b(){throw new Error("setTimeout has not been defined")}function O(){throw new Error("clearTimeout has not been defined")}function C(X){if(g===setTimeout)return setTimeout(X,0);if((g===b||!g)&&setTimeout)return g=setTimeout,setTimeout(X,0);try{return g(X,0)}catch{try{return g.call(null,X,0)}catch{return g.call(this,X,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:b}catch{g=b}try{S="function"==typeof clearTimeout?clearTimeout:O}catch{S=O}}();var D,_=[],v=!1,L=-1;function P(){!v||!D||(v=!1,D.length?_=D.concat(_):L=-1,_.length&&j())}function j(){if(!v){var X=C(P);v=!0;for(var le=_.length;le;){for(D=_,_=[];++L<le;)D&&D[L].run();L=-1,le=_.length}D=null,v=!1,function N(X){if(S===clearTimeout)return clearTimeout(X);if((S===O||!S)&&clearTimeout)return S=clearTimeout,clearTimeout(X);try{return S(X)}catch{try{return S.call(null,X)}catch{return S.call(this,X)}}}(X)}}function se(X,le){this.fun=X,this.array=le}function T(){}Z.nextTick=function(X){var le=new Array(arguments.length-1);if(arguments.length>1)for(var K=1;K<arguments.length;K++)le[K-1]=arguments[K];_.push(new se(X,le)),1===_.length&&!v&&C(j)},se.prototype.run=function(){this.fun.apply(null,this.array)},Z.title="browser",Z.browser=!0,Z.env={},Z.argv=[],Z.version="",Z.versions={},Z.on=T,Z.addListener=T,Z.once=T,Z.off=T,Z.removeListener=T,Z.removeAllListeners=T,Z.emit=T,Z.prependListener=T,Z.prependOnceListener=T,Z.listeners=function(X){return[]},Z.binding=function(X){throw new Error("process.binding is not supported")},Z.cwd=function(){return"/"},Z.chdir=function(X){throw new Error("process.chdir is not supported")},Z.umask=function(){return 0}},3410:ne=>{let Z;ne.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):g=>(Z||(Z=Promise.resolve())).then(g).catch(S=>setTimeout(()=>{throw S},0))},1986:(ne,Z,g)=>{ne.exports=g(7842)},5327:ne=>{"use strict";ne.exports=class bX{constructor(g,S=new Map,b=0){this.prefix=g,this._existing=S,this.counter=b}clone(){const{prefix:g,_existing:S,counter:b}=this;return new bX(g,new Map(S),b)}getId(g){const S=g&&this._existing.get(g);if(S)return S;const b=this.prefix+this.counter;return this.counter++,g&&this._existing.set(g,b),b}hasId(g){return this._existing.has(g)}getOldIds(){return[...this._existing.keys()]}}},7475:(ne,Z,g)=>{"use strict";var S=g(7156).default;g(8280);const b=self.crypto||self.msCrypto;ne.exports=class{constructor(C){if(!b||!b.subtle)throw new Error("crypto.subtle not found.");if("sha256"===C)this.algorithm={name:"SHA-256"};else{if("sha1"!==C)throw new Error(`Unsupported algorithm "${C}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(C){this._content+=C}digest(){var C=this;return S(function*(){const N=(new TextEncoder).encode(C._content),_=new Uint8Array(yield b.subtle.digest(C.algorithm,N));let v="";for(let D=0;D<_.length;++D)v+=_[D].toString(16).padStart(2,"0");return v})()}}},8003:ne=>{"use strict";const S="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",b="http://www.w3.org/2001/XMLSchema#string",O="NamedNode",C="BlankNode",N="Literal",_="DefaultGraph",v={};function D(T,X){return T.subject.termType===X.subject.termType&&T.object.termType===X.object.termType&&T.subject.value===X.subject.value&&T.predicate.value===X.predicate.value&&T.object.value===X.object.value&&(T.object.termType!==N||T.object.datatype.termType===X.object.datatype.termType&&T.object.language===X.object.language&&T.object.datatype.value===X.object.datatype.value)}(()=>{const T="(?:<([^:]+:[^>]*)>)",le="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",K=le+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ie="(_:(?:["+le+"0-9])(?:(?:["+K+".])*(?:["+K+"]))?)",k="[ \\t]+",he="[ \\t]*",W="(?:"+T+"|"+ie+")"+k,Me=T+k,de="(?:"+T+"|"+ie+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+T+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+he,xe="(?:\\.|(?:(?:"+T+"|"+ie+")"+he+"\\.))";v.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,v.empty=new RegExp("^[ \\t]*$"),v.quad=new RegExp("^"+he+W+Me+de+xe+he+"$")})(),ne.exports=class OS{static parse(X){const le=[],K={},re=X.split(v.eoln);let ie=0;for(const J of re){if(ie++,v.empty.test(J))continue;const V=J.match(v.quad);if(null===V)throw new Error("N-Quads parse error on line "+ie+".");const x={subject:null,predicate:null,object:null,graph:null};if(x.subject=void 0!==V[1]?{termType:O,value:V[1]}:{termType:C,value:V[2]},x.predicate={termType:O,value:V[3]},void 0!==V[4]?x.object={termType:O,value:V[4]}:void 0!==V[5]?x.object={termType:C,value:V[5]}:(x.object={termType:N,value:void 0,datatype:{termType:O}},void 0!==V[7]?x.object.datatype.value=V[7]:void 0!==V[8]?(x.object.datatype.value=S,x.object.language=V[8]):x.object.datatype.value=b,x.object.value=V[6].replace(j,function(X,le,K,re){if(le)switch(le){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(K)return String.fromCharCode(parseInt(K,16));if(re)throw new Error("Unsupported U escape")})),x.graph=void 0!==V[9]?{termType:O,value:V[9]}:void 0!==V[10]?{termType:C,value:V[10]}:{termType:_,value:""},x.graph.value in K){let B=!0;const k=K[x.graph.value];for(const he of k)if(D(he,x)){B=!1;break}B&&(k.push(x),le.push(x))}else K[x.graph.value]=[x],le.push(x)}return le}static serialize(X){Array.isArray(X)||(X=OS.legacyDatasetToQuads(X));const le=[];for(const K of X)le.push(OS.serializeQuad(K));return le.sort().join("")}static serializeQuadComponents(X,le,K,re){let ie="";return ie+=X.termType===O?`<${X.value}>`:`${X.value}`,ie+=` <${le.value}> `,K.termType===O?ie+=`<${K.value}>`:K.termType===C?ie+=K.value:(ie+=`"${function P(T){return T.replace(L,function(X){switch(X){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(K.value)}"`,K.datatype.value===S?K.language&&(ie+=`@${K.language}`):K.datatype.value!==b&&(ie+=`^^<${K.datatype.value}>`)),re.termType===O?ie+=` <${re.value}>`:re.termType===C&&(ie+=` ${re.value}`),ie+=" .\n",ie}static serializeQuad(X){return OS.serializeQuadComponents(X.subject,X.predicate,X.object,X.graph)}static legacyDatasetToQuads(X){const le=[],K={"blank node":C,IRI:O,literal:N};for(const re in X)X[re].forEach(J=>{const V={};for(const x in J){const B=J[x],k={termType:K[B.type],value:B.value};k.termType===N&&(k.datatype={termType:O},"datatype"in B&&(k.datatype.value=B.datatype),"language"in B?("datatype"in B||(k.datatype.value=S),k.language=B.language):"datatype"in B||(k.datatype.value=b)),V[x]=k}V.graph="@default"===re?{termType:_,value:""}:{termType:re.startsWith("_:")?C:O,value:re},le.push(V)});return le}};const L=/["\\\n\r]/g,j=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7790:ne=>{"use strict";ne.exports=class{constructor(g){this.current=g.sort(),this.done=!1,this.dir=new Map;for(let S=0;S<g.length;++S)this.dir.set(g[S],!0)}hasNext(){return!this.done}next(){const{current:g,dir:S}=this,b=g.slice();let O=null,C=0;const N=g.length;for(let _=0;_<N;++_){const v=g[_],D=S.get(v);(null===O||v>O)&&(D&&_>0&&v>g[_-1]||!D&&_<N-1&&v>g[_+1])&&(O=v,C=_)}if(null===O)this.done=!0;else{const _=S.get(O)?C-1:C+1;g[C]=g[_],g[_]=O;for(const v of g)v>O&&S.set(v,!S.get(v))}return b}}},7218:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(5327),O=g(7475),C=g(7790),N=g(8003);function _(v,D){return v.hash<D.hash?-1:v.hash>D.hash?1:0}ne.exports=class{constructor({createMessageDigest:D=(()=>new O("sha256")),canonicalIdMap:L=new Map,maxDeepIterations:P=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new b("_:c14n",L),this.createMessageDigest=D,this.maxDeepIterations=P,this.quads=null,this.deepIterations=null}main(D){var L=this;return S(function*(){L.deepIterations=new Map,L.quads=D;for(const K of D)L._addBlankNodeQuadInfo({quad:K,component:K.subject}),L._addBlankNodeQuadInfo({quad:K,component:K.object}),L._addBlankNodeQuadInfo({quad:K,component:K.graph});const P=new Map,j=[...L.blankNodeInfo.keys()];let se=0;for(const K of j)++se%100==0&&(yield L._yield()),yield L._hashAndTrackBlankNode({id:K,hashToBlankNodes:P});const T=[...P.keys()].sort(),X=[];for(const K of T){const re=P.get(K);re.length>1?X.push(re):L.canonicalIssuer.getId(re[0])}for(const K of X){const re=[];for(const ie of K){if(L.canonicalIssuer.hasId(ie))continue;const J=new b("_:b");J.getId(ie);const V=yield L.hashNDegreeQuads(ie,J);re.push(V)}re.sort(_);for(const ie of re){const J=ie.issuer.getOldIds();for(const V of J)L.canonicalIssuer.getId(V)}}const le=[];for(const K of L.quads){const re=N.serializeQuadComponents(L._componentWithCanonicalId(K.subject),K.predicate,L._componentWithCanonicalId(K.object),L._componentWithCanonicalId(K.graph));le.push(re)}return le.sort(),le.join("")})()}hashFirstDegreeQuads(D){var L=this;return S(function*(){const P=[],j=L.blankNodeInfo.get(D),se=j.quads;for(const X of se){const le={subject:null,predicate:X.predicate,object:null,graph:null};le.subject=L.modifyFirstDegreeComponent(D,X.subject,"subject"),le.object=L.modifyFirstDegreeComponent(D,X.object,"object"),le.graph=L.modifyFirstDegreeComponent(D,X.graph,"graph"),P.push(N.serializeQuad(le))}P.sort();const T=L.createMessageDigest();for(const X of P)T.update(X);return j.hash=yield T.digest(),j.hash})()}hashRelatedBlankNode(D,L,P,j){var se=this;return S(function*(){let T;T=se.canonicalIssuer.hasId(D)?se.canonicalIssuer.getId(D):P.hasId(D)?P.getId(D):se.blankNodeInfo.get(D).hash;const X=se.createMessageDigest();return X.update(j),"g"!==j&&X.update(se.getRelatedPredicate(L)),X.update(T),X.digest()})()}hashNDegreeQuads(D,L){var P=this;return S(function*(){const j=P.deepIterations.get(D)||0;if(j>P.maxDeepIterations)throw new Error(`Maximum deep iterations (${P.maxDeepIterations}) exceeded.`);P.deepIterations.set(D,j+1);const se=P.createMessageDigest(),T=yield P.createHashToRelated(D,L),X=[...T.keys()].sort();for(const le of X){se.update(le);let re,K="";const ie=new C(T.get(le));let J=0;for(;ie.hasNext();){const V=ie.next();++J%3==0&&(yield P._yield());let x=L.clone(),B="";const k=[];let he=!1;for(const W of V)if(P.canonicalIssuer.hasId(W)?B+=P.canonicalIssuer.getId(W):(x.hasId(W)||k.push(W),B+=x.getId(W)),0!==K.length&&B>K){he=!0;break}if(!he){for(const W of k){const Me=yield P.hashNDegreeQuads(W,x);if(B+=x.getId(W),B+=`<${Me.hash}>`,x=Me.issuer,0!==K.length&&B>K){he=!0;break}}he||(0===K.length||B<K)&&(K=B,re=x)}}se.update(K),L=re}return{hash:yield se.digest(),issuer:L}})()}modifyFirstDegreeComponent(D,L){return"BlankNode"!==L.termType?L:{termType:"BlankNode",value:L.value===D?"_:a":"_:z"}}getRelatedPredicate(D){return`<${D.predicate.value}>`}createHashToRelated(D,L){var P=this;return S(function*(){const j=new Map,se=P.blankNodeInfo.get(D).quads;let T=0;for(const X of se)++T%100==0&&(yield P._yield()),yield Promise.all([P._addRelatedBlankNodeHash({quad:X,component:X.subject,position:"s",id:D,issuer:L,hashToRelated:j}),P._addRelatedBlankNodeHash({quad:X,component:X.object,position:"o",id:D,issuer:L,hashToRelated:j}),P._addRelatedBlankNodeHash({quad:X,component:X.graph,position:"g",id:D,issuer:L,hashToRelated:j})]);return j})()}_hashAndTrackBlankNode({id:D,hashToBlankNodes:L}){var P=this;return S(function*(){const j=yield P.hashFirstDegreeQuads(D),se=L.get(j);se?se.push(D):L.set(j,[D])})()}_addBlankNodeQuadInfo({quad:D,component:L}){if("BlankNode"!==L.termType)return;const P=L.value,j=this.blankNodeInfo.get(P);j?j.quads.add(D):this.blankNodeInfo.set(P,{quads:new Set([D]),hash:null})}_addRelatedBlankNodeHash({quad:D,component:L,position:P,id:j,issuer:se,hashToRelated:T}){var X=this;return S(function*(){if("BlankNode"!==L.termType||L.value===j)return;const le=L.value,K=yield X.hashRelatedBlankNode(le,D,se,P),re=T.get(K);re?re.push(le):T.set(K,[le])})()}_componentWithCanonicalId(D){return"BlankNode"!==D.termType||D.value.startsWith(this.canonicalIssuer.prefix)?D:{termType:"BlankNode",value:this.canonicalIssuer.getId(D.value)}}_yield(){return S(function*(){return new Promise(D=>setImmediate(D))})()}}},9123:(ne,Z,g)=>{"use strict";const S=g(5327),b=g(7475),O=g(7790),C=g(8003);function N(_,v){return _.hash<v.hash?-1:_.hash>v.hash?1:0}ne.exports=class{constructor({createMessageDigest:v=(()=>new b("sha256")),canonicalIdMap:D=new Map,maxDeepIterations:L=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new S("_:c14n",D),this.createMessageDigest=v,this.maxDeepIterations=L,this.quads=null,this.deepIterations=null}main(v){this.deepIterations=new Map,this.quads=v;for(const T of v)this._addBlankNodeQuadInfo({quad:T,component:T.subject}),this._addBlankNodeQuadInfo({quad:T,component:T.object}),this._addBlankNodeQuadInfo({quad:T,component:T.graph});const D=new Map,L=[...this.blankNodeInfo.keys()];for(const T of L)this._hashAndTrackBlankNode({id:T,hashToBlankNodes:D});const P=[...D.keys()].sort(),j=[];for(const T of P){const X=D.get(T);X.length>1?j.push(X):this.canonicalIssuer.getId(X[0])}for(const T of j){const X=[];for(const le of T){if(this.canonicalIssuer.hasId(le))continue;const K=new S("_:b");K.getId(le);const re=this.hashNDegreeQuads(le,K);X.push(re)}X.sort(N);for(const le of X){const K=le.issuer.getOldIds();for(const re of K)this.canonicalIssuer.getId(re)}}const se=[];for(const T of this.quads){const X=C.serializeQuadComponents(this._componentWithCanonicalId({component:T.subject}),T.predicate,this._componentWithCanonicalId({component:T.object}),this._componentWithCanonicalId({component:T.graph}));se.push(X)}return se.sort(),se.join("")}hashFirstDegreeQuads(v){const D=[],L=this.blankNodeInfo.get(v),P=L.quads;for(const se of P){const T={subject:null,predicate:se.predicate,object:null,graph:null};T.subject=this.modifyFirstDegreeComponent(v,se.subject,"subject"),T.object=this.modifyFirstDegreeComponent(v,se.object,"object"),T.graph=this.modifyFirstDegreeComponent(v,se.graph,"graph"),D.push(C.serializeQuad(T))}D.sort();const j=this.createMessageDigest();for(const se of D)j.update(se);return L.hash=j.digest(),L.hash}hashRelatedBlankNode(v,D,L,P){let j;j=this.canonicalIssuer.hasId(v)?this.canonicalIssuer.getId(v):L.hasId(v)?L.getId(v):this.blankNodeInfo.get(v).hash;const se=this.createMessageDigest();return se.update(P),"g"!==P&&se.update(this.getRelatedPredicate(D)),se.update(j),se.digest()}hashNDegreeQuads(v,D){const L=this.deepIterations.get(v)||0;if(L>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(v,L+1);const P=this.createMessageDigest(),j=this.createHashToRelated(v,D),se=[...j.keys()].sort();for(const T of se){P.update(T);let le,X="";const K=new O(j.get(T));for(;K.hasNext();){const re=K.next();let ie=D.clone(),J="";const V=[];let x=!1;for(const B of re)if(this.canonicalIssuer.hasId(B)?J+=this.canonicalIssuer.getId(B):(ie.hasId(B)||V.push(B),J+=ie.getId(B)),0!==X.length&&J>X){x=!0;break}if(!x){for(const B of V){const k=this.hashNDegreeQuads(B,ie);if(J+=ie.getId(B),J+=`<${k.hash}>`,ie=k.issuer,0!==X.length&&J>X){x=!0;break}}x||(0===X.length||J<X)&&(X=J,le=ie)}}P.update(X),D=le}return{hash:P.digest(),issuer:D}}modifyFirstDegreeComponent(v,D){return"BlankNode"!==D.termType?D:{termType:"BlankNode",value:D.value===v?"_:a":"_:z"}}getRelatedPredicate(v){return`<${v.predicate.value}>`}createHashToRelated(v,D){const L=new Map,P=this.blankNodeInfo.get(v).quads;for(const j of P)this._addRelatedBlankNodeHash({quad:j,component:j.subject,position:"s",id:v,issuer:D,hashToRelated:L}),this._addRelatedBlankNodeHash({quad:j,component:j.object,position:"o",id:v,issuer:D,hashToRelated:L}),this._addRelatedBlankNodeHash({quad:j,component:j.graph,position:"g",id:v,issuer:D,hashToRelated:L});return L}_hashAndTrackBlankNode({id:v,hashToBlankNodes:D}){const L=this.hashFirstDegreeQuads(v),P=D.get(L);P?P.push(v):D.set(L,[v])}_addBlankNodeQuadInfo({quad:v,component:D}){if("BlankNode"!==D.termType)return;const L=D.value,P=this.blankNodeInfo.get(L);P?P.quads.add(v):this.blankNodeInfo.set(L,{quads:new Set([v]),hash:null})}_addRelatedBlankNodeHash({quad:v,component:D,position:L,id:P,issuer:j,hashToRelated:se}){if("BlankNode"!==D.termType||D.value===P)return;const T=D.value,X=this.hashRelatedBlankNode(T,v,j,L),le=se.get(X);le?le.push(T):se.set(X,[T])}_componentWithCanonicalId({component:v}){return"BlankNode"!==v.termType||v.value.startsWith(this.canonicalIssuer.prefix)?v:{termType:"BlankNode",value:this.canonicalIssuer.getId(v.value)}}}},1326:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(7475),O=g(7218);ne.exports=class extends O{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new b("sha1")}modifyFirstDegreeComponent(N,_,v){return"BlankNode"!==_.termType?_:"graph"===v?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:_.value===N?"_:a":"_:z"}}getRelatedPredicate(N){return N.predicate.value}createHashToRelated(N,_){var v=this;return S(function*(){const D=new Map,L=v.blankNodeInfo.get(N).quads;let P=0;for(const j of L){let se,T;if("BlankNode"===j.subject.termType&&j.subject.value!==N)T=j.subject.value,se="p";else{if("BlankNode"!==j.object.termType||j.object.value===N)continue;T=j.object.value,se="r"}++P%100==0&&(yield v._yield());const X=yield v.hashRelatedBlankNode(T,j,_,se),le=D.get(X);le?le.push(T):D.set(X,[T])}return D})()}}},9869:(ne,Z,g)=>{"use strict";const S=g(7475),b=g(9123);ne.exports=class extends b{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new S("sha1")}modifyFirstDegreeComponent(C,N,_){return"BlankNode"!==N.termType?N:"graph"===_?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:N.value===C?"_:a":"_:z"}}getRelatedPredicate(C){return C.predicate.value}createHashToRelated(C,N){const _=new Map,v=this.blankNodeInfo.get(C).quads;for(const D of v){let L,P;if("BlankNode"===D.subject.termType&&D.subject.value!==C)P=D.subject.value,L="p";else{if("BlankNode"!==D.object.termType||D.object.value===C)continue;P=D.object.value,L="r"}const j=this.hashRelatedBlankNode(P,D,N,L),se=_.get(j);se?se.push(P):_.set(j,[P])}return _}}},7842:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(7218),O=g(1326),C=g(9123),N=g(9869);let _;try{_=g(7670)}catch{}function v(D){return Array.isArray(D)?D:Z.NQuads.legacyDatasetToQuads(D)}Z.NQuads=g(8003),Z.IdentifierIssuer=g(5327),Z._rdfCanonizeNative=function(D){return D&&(_=D),_},Z.canonize=function(){var D=S(function*(L,P){const j=v(L);if(P.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((se,T)=>_.canonize(j,P,(X,le)=>X?T(X):se(le)))}if("URDNA2015"===P.algorithm)return new b(P).main(j);if("URGNA2012"===P.algorithm){if(P.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new O(P).main(j)}throw"algorithm"in P?new Error("Invalid RDF Dataset Canonicalization algorithm: "+P.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(L,P){return D.apply(this,arguments)}}(),Z._canonizeSync=function(D,L){const P=v(D);if(L.useNative){if(!_)throw new Error("rdf-canonize-native not available");if(L.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return _.canonizeSync(P,L)}if("URDNA2015"===L.algorithm)return new C(L).main(P);if("URGNA2012"===L.algorithm){if(L.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new N(L).main(P)}throw"algorithm"in L?new Error("Invalid RDF Dataset Canonicalization algorithm: "+L.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},2633:function(ne,Z,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(O,C,N,_){void 0===_&&(_=N),Object.defineProperty(O,_,{enumerable:!0,get:function(){return C[N]}})}:function(O,C,N,_){void 0===_&&(_=N),O[_]=C[N]}),b=this&&this.__exportStar||function(O,C){for(var N in O)"default"!==N&&!Object.prototype.hasOwnProperty.call(C,N)&&S(C,O,N)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(4740),Z),b(g(3613),Z),b(g(9379),Z),b(g(5565),Z),b(g(3283),Z),b(g(3905),Z),b(g(2234),Z)},4740:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.BlankNode=void 0,Z.BlankNode=class g{constructor(b){this.termType="BlankNode",this.value=b}equals(b){return!!b&&"BlankNode"===b.termType&&b.value===this.value}}},3613:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.DataFactory=void 0;const S=g(4740),b=g(9379),O=g(5565),C=g(3283),N=g(3905),_=g(2234);let v=0;Z.DataFactory=class D{constructor(P){this.blankNodeCounter=0,this.blankNodePrefix=(P=P||{}).blankNodePrefix||`df_${v++}_`}namedNode(P){return new C.NamedNode(P)}blankNode(P){return new S.BlankNode(P||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(P,j){return new O.Literal(P,j)}variable(P){return new _.Variable(P)}defaultGraph(){return b.DefaultGraph.INSTANCE}quad(P,j,se,T){return new N.Quad(P,j,se,T||this.defaultGraph())}fromTerm(P){switch(P.termType){case"NamedNode":return this.namedNode(P.value);case"BlankNode":return this.blankNode(P.value);case"Literal":return P.language?this.literal(P.value,P.language):P.datatype.equals(O.Literal.XSD_STRING)?this.literal(P.value):this.literal(P.value,this.fromTerm(P.datatype));case"Variable":return this.variable(P.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(P.subject),this.fromTerm(P.predicate),this.fromTerm(P.object),this.fromTerm(P.graph))}}fromQuad(P){return this.fromTerm(P)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},9379:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.DefaultGraph=void 0;class g{constructor(){this.termType="DefaultGraph",this.value=""}equals(b){return!!b&&"DefaultGraph"===b.termType}}Z.DefaultGraph=g,g.INSTANCE=new g},5565:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Literal=void 0;const S=g(3283);class b{constructor(C,N){this.termType="Literal",this.value=C,"string"==typeof N?(this.language=N,this.datatype=b.RDF_LANGUAGE_STRING):N?(this.language="",this.datatype=N):(this.language="",this.datatype=b.XSD_STRING)}equals(C){return!!C&&"Literal"===C.termType&&C.value===this.value&&C.language===this.language&&this.datatype.equals(C.datatype)}}Z.Literal=b,b.RDF_LANGUAGE_STRING=new S.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),b.XSD_STRING=new S.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3283:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.NamedNode=void 0,Z.NamedNode=class g{constructor(b){this.termType="NamedNode",this.value=b}equals(b){return!!b&&"NamedNode"===b.termType&&b.value===this.value}}},3905:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Quad=void 0,Z.Quad=class g{constructor(b,O,C,N){this.termType="Quad",this.value="",this.subject=b,this.predicate=O,this.object=C,this.graph=N}equals(b){return!!b&&("Quad"===b.termType||!b.termType)&&this.subject.equals(b.subject)&&this.predicate.equals(b.predicate)&&this.object.equals(b.object)&&this.graph.equals(b.graph)}}},2234:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Variable=void 0,Z.Variable=class g{constructor(b){this.termType="Variable",this.value=b}equals(b){return!!b&&"Variable"===b.termType&&b.value===this.value}}},9689:function(ne,Z,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(T,X,le,K){void 0===K&&(K=le),Object.defineProperty(T,K,{enumerable:!0,get:function(){return X[le]}})}:function(T,X,le,K){void 0===K&&(K=le),T[K]=X[le]}),b=this&&this.__exportStar||function(T,X){for(var le in T)"default"!==le&&!Object.prototype.hasOwnProperty.call(X,le)&&S(X,T,le)};Object.defineProperty(Z,"__esModule",{value:!0}),Z.getSupportedJavaScriptPrimitives=Z.getSupportedRdfDatatypes=Z.getTermRaw=Z.toRdf=Z.fromRdf=void 0;const O=g(2633),C=g(2538),N=g(6374);b(g(2538),Z),b(g(1815),Z),b(g(6374),Z);const _=new O.DataFactory,v=new N.Translator;function D(T,X){return v.fromRdf(T,X)}v.registerHandler(new C.TypeHandlerString,C.TypeHandlerString.TYPES.map(T=>_.namedNode(T)),["string"]),v.registerHandler(new C.TypeHandlerBoolean,[C.TypeHandlerBoolean.TYPE].map(T=>_.namedNode(T)),["boolean"]),v.registerHandler(new C.TypeHandlerNumberDouble,C.TypeHandlerNumberDouble.TYPES.map(T=>_.namedNode(T)),["number"]),v.registerHandler(new C.TypeHandlerNumberInteger,C.TypeHandlerNumberInteger.TYPES.map(T=>_.namedNode(T)),["number"]),v.registerHandler(new C.TypeHandlerDate,C.TypeHandlerDate.TYPES.map(T=>_.namedNode(T)),["object"]),Z.fromRdf=D,Z.toRdf=function L(T,X){return X&&"namedNode"in X&&(X={dataFactory:X}),(X=X||{})&&!X.dataFactory&&(X.dataFactory=_),v.toRdf(T,X)},Z.getTermRaw=function P(T,X){return"Literal"===T.termType?D(T,X):T.value},Z.getSupportedRdfDatatypes=function j(){return v.getSupportedRdfDatatypes()},Z.getSupportedJavaScriptPrimitives=function se(){return v.getSupportedJavaScriptPrimitives()}},1815:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0})},6374:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.Translator=void 0,Z.Translator=class g{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(b){throw new Error(`Invalid RDF ${b.datatype.value} value: '${b.value}'`)}registerHandler(b,O,C){for(const N of O)this.supportedRdfDatatypes.push(N),this.fromRdfHandlers[N.value]=b;for(const N of C){let _=this.toRdfHandlers[N];_||(this.toRdfHandlers[N]=_=[]),_.push(b)}}fromRdf(b,O){const C=this.fromRdfHandlers[b.datatype.value];return C?C.fromRdf(b,O):b.value}toRdf(b,O){const C=this.toRdfHandlers[typeof b];if(C)for(const N of C){const _=N.toRdf(b,O);if(_)return _}throw new Error(`Invalid JavaScript value: '${b}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},88:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerBoolean=void 0;const S=g(6374);class b{fromRdf(C,N){switch(C.value){case"true":case"1":return!0;case"false":case"0":return!1}return N&&S.Translator.incorrectRdfDataType(C),!1}toRdf(C,{datatype:N,dataFactory:_}){return _.literal(C?"true":"false",N||_.namedNode(b.TYPE))}}Z.TypeHandlerBoolean=b,b.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},1600:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerDate=void 0;const S=g(6374);class b{fromRdf(C,N){switch(N&&!C.value.match(b.VALIDATORS[C.datatype.value.substr(33,C.datatype.value.length)])&&S.Translator.incorrectRdfDataType(C),C.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(C.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const _=C.value.split("-");return new Date(0,parseInt(_[0],10)-1,parseInt(_[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(C.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(C.value+"-01");default:return new Date(C.value)}}toRdf(C,{datatype:N,dataFactory:_}){if(N=N||_.namedNode(b.TYPES[0]),!(C instanceof Date))return null;const v=C;let D;switch(N.value){case"http://www.w3.org/2001/XMLSchema#gDay":D=String(v.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":D=v.getUTCMonth()+1+"-"+v.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":D=String(v.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":D=v.getUTCFullYear()+"-"+(v.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":D=v.toISOString().replace(/T.*$/,"");break;default:D=v.toISOString()}return _.literal(D,N)}}Z.TypeHandlerDate=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],b.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},1511:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerNumberDouble=void 0;const S=g(6374);class b{fromRdf(C,N){const _=parseFloat(C.value);return N&&isNaN(_)&&S.Translator.incorrectRdfDataType(C),_}toRdf(C,{datatype:N,dataFactory:_}){return N=N||_.namedNode(b.TYPES[0]),isNaN(C)?_.literal("NaN",N):isFinite(C)?C%1==0?null:_.literal(C.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),N):_.literal(C>0?"INF":"-INF",N)}}Z.TypeHandlerNumberDouble=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},9199:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerNumberInteger=void 0;const S=g(6374);class b{fromRdf(C,N){const _=parseInt(C.value,10);return N&&(isNaN(_)||C.value.indexOf(".")>=0)&&S.Translator.incorrectRdfDataType(C),_}toRdf(C,{datatype:N,dataFactory:_}){return _.literal(String(C),N||_.namedNode(C<=b.MAX_INT&&C>=b.MIN_INT?b.TYPES[0]:b.TYPES[1]))}}Z.TypeHandlerNumberInteger=b,b.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],b.MAX_INT=2147483647,b.MIN_INT=-2147483648},2210:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerString=void 0;class g{fromRdf(b){return b.value}toRdf(b,{datatype:O,dataFactory:C}){return C.literal(b,O)}}Z.TypeHandlerString=g,g.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},2538:function(ne,Z,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(O,C,N,_){void 0===_&&(_=N),Object.defineProperty(O,_,{enumerable:!0,get:function(){return C[N]}})}:function(O,C,N,_){void 0===_&&(_=N),O[_]=C[N]}),b=this&&this.__exportStar||function(O,C){for(var N in O)"default"!==N&&!Object.prototype.hasOwnProperty.call(C,N)&&S(C,O,N)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(88),Z),b(g(1600),Z),b(g(1511),Z),b(g(9199),Z),b(g(2210),Z)},2821:function(ne,Z,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(O,C,N,_){void 0===_&&(_=N),Object.defineProperty(O,_,{enumerable:!0,get:function(){return C[N]}})}:function(O,C,N,_){void 0===_&&(_=N),O[_]=C[N]}),b=this&&this.__exportStar||function(O,C){for(var N in O)"default"!==N&&!Object.prototype.hasOwnProperty.call(C,N)&&S(C,O,N)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(5664),Z)},758:(ne,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.ParseError=void 0;class g extends Error{constructor(b,O){const C=b.saxStream._parser;super(b.trackPosition?`Line ${C.line+1} column ${C.column+1}: ${O}`:O)}}Z.ParseError=g},5664:(ne,Z,g)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.ParseType=Z.RdfXmlParser=void 0;const S=g(7054),b=g(9528),O=g(1793),C=g(758),N=g(2633);class _ extends O.Transform{constructor(L){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},L&&(Object.assign(this,L),this.options=L),this.dataFactory||(this.dataFactory=new N.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=b.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(L,P){const j={};let se=!1;for(const X in L.attributes)X.startsWith("xmlns")&&(5===X.length?(se=!0,j[""]=L.attributes[X]):":"===X.charAt(5)&&(se=!0,j[X.substr(6)]=L.attributes[X]));const T=P&&P.ns?P.ns:[_.DEFAULT_NS];return se?T.concat([j]):T}static expandPrefixedTerm(L,P,j){const se=L.indexOf(":");let T,X;se>=0?(T=L.substr(0,se),X=L.substr(se+1)):(T="",X=L);let le=null,K=null;for(let re=P.length-1;re>=0;re--){const ie=P[re][T];if(ie){le=ie;break}K||(K=P[re][""])}if(!le){if(T&&"xmlns"!==T)throw new C.ParseError(j,`The prefix '${T}' in term '${L}' was not bound.`);le=K||""}return{prefix:T,local:X,uri:le}}static isValidIri(L){return _.IRI_REGEX.test(L)}import(L){const P=new O.PassThrough({readableObjectMode:!0});L.on("error",se=>j.emit("error",se)),L.on("data",se=>P.push(se)),L.on("end",()=>P.push(null));const j=P.pipe(new _(this.options));return j}_transform(L,P,j){try{this.saxStream.write(L,P)}catch(se){return j(se)}j()}newParseError(L){return new C.ParseError(this,L)}valueToUri(L,P){return this.uriToNamedNode(S.resolve(L,P.baseIRI))}uriToNamedNode(L){if(!_.isValidIri(L))throw this.newParseError(`Invalid URI: ${L}`);return this.dataFactory.namedNode(L)}validateNcname(L){if(!_.NCNAME_MATCHER.test(L))throw this.newParseError(`Not a valid NCName: ${L}`)}attachSaxListeners(){this.saxStream.on("error",L=>this.emit("error",L)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(L){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let j=v.RESOURCE;if(P&&(P.hadChildren=!0,j=P.childrenParseType),P&&P.childrenStringTags){const T=L.name;let X="";for(const ie in L.attributes)X+=` ${ie}="${L.attributes[ie]}"`;P.childrenStringTags.push(`<${T}${X}>`);const re={childrenStringTags:P.childrenStringTags};return re.childrenStringEmitClosingTag=`</${T}>`,void this.activeTagStack.push(re)}const se={};P?(se.language=P.language,se.baseIRI=P.baseIRI):se.baseIRI=this.baseIRI,this.activeTagStack.push(se),se.ns=_.parseNamespace(L,P),j===v.RESOURCE?this.onTagResource(L,se,P,!P):this.onTagProperty(L,se,P)}onTagResource(L,P,j,se){const T=_.expandPrefixedTerm(L.name,P.ns,this);P.childrenParseType=v.PROPERTY;let X=!0;if(T.uri===_.RDF){if(!se&&_.FORBIDDEN_NODE_ELEMENTS.indexOf(T.local)>=0)throw this.newParseError(`Illegal node element name: ${T.local}`);switch(T.local){case"RDF":P.childrenParseType=v.RESOURCE;case"Description":X=!1}}const le=[],K=[];let re=null,ie=!1,J=!1,V=null;for(const x in L.attributes){const B=L.attributes[x],k=_.expandPrefixedTerm(x,P.ns,this);if(j&&k.uri===_.RDF)switch(k.local){case"about":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${re} where found.`);re=B;continue;case"ID":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${re} where found.`);this.validateNcname(B),re="#"+B,ie=!0;continue;case"nodeID":if(re)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${B} and ${re} where found.`);this.validateNcname(B),re=B,J=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":V=B;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(k.uri===_.XML){if("lang"===k.local){P.language=""===B?null:B.toLowerCase();continue}if("base"===k.local){P.baseIRI=S.resolve(B,P.baseIRI);continue}}"xml"!==k.prefix&&k.uri&&(le.push(this.uriToNamedNode(k.uri+k.local)),K.push(B))}if(null!==re&&(P.subject=J?this.dataFactory.blankNode(re):this.valueToUri(re,P),ie&&this.claimNodeId(P.subject)),P.subject||(P.subject=this.dataFactory.blankNode()),X){const x=this.uriToNamedNode(T.uri+T.local);this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),x,j?j.reifiedStatementId:null)}if(j){if(j.predicate)if(j.childrenCollectionSubject){const x=this.dataFactory.blankNode();this.emitTriple(j.childrenCollectionSubject,j.childrenCollectionPredicate,x,j.reifiedStatementId),this.emitTriple(x,this.dataFactory.namedNode(_.RDF+"first"),P.subject,P.reifiedStatementId),j.childrenCollectionSubject=x,j.childrenCollectionPredicate=this.dataFactory.namedNode(_.RDF+"rest")}else{this.emitTriple(j.subject,j.predicate,P.subject,j.reifiedStatementId);for(let x=0;x<j.predicateSubPredicates.length;x++)this.emitTriple(P.subject,j.predicateSubPredicates[x],j.predicateSubObjects[x],null);j.predicateSubPredicates=[],j.predicateSubObjects=[],j.predicateEmitted=!0}for(let x=0;x<le.length;x++){const B=this.dataFactory.literal(K[x],P.datatype||P.language);this.emitTriple(P.subject,le[x],B,j.reifiedStatementId)}V&&this.emitTriple(P.subject,this.dataFactory.namedNode(_.RDF+"type"),this.uriToNamedNode(V),null)}}onTagProperty(L,P,j){const se=_.expandPrefixedTerm(L.name,P.ns,this);if(P.childrenParseType=v.RESOURCE,P.subject=j.subject,se.uri===_.RDF&&"li"===se.local?(j.listItemCounter||(j.listItemCounter=1),P.predicate=this.uriToNamedNode(se.uri+"_"+j.listItemCounter++)):P.predicate=this.uriToNamedNode(se.uri+se.local),se.uri===_.RDF&&_.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(se.local)>=0)throw this.newParseError(`Illegal property element name: ${se.local}`);P.predicateSubPredicates=[],P.predicateSubObjects=[];let T=!1,X=!1,le=null,K=!0;const re=[],ie=[];for(const J in L.attributes){const V=L.attributes[J],x=_.expandPrefixedTerm(J,P.ns,this);if(x.uri===_.RDF)switch(x.local){case"resource":if(le)throw this.newParseError(`Found both rdf:resource (${V}) and rdf:nodeID (${le}).`);if(T)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${V})`);P.hadChildren=!0,le=V,K=!1;continue;case"datatype":if(X)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${V}).`);if(T)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${V})`);P.datatype=this.valueToUri(V,P);continue;case"nodeID":if(X)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${V}).`);if(P.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${V}).`);if(T)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${V})`);this.validateNcname(V),P.hadChildren=!0,le=V,K=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(X)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(P.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${P.datatype.value})`);if(le)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${le})`);if("Resource"===V){T=!0,P.childrenParseType=v.PROPERTY;const B=this.dataFactory.blankNode();this.emitTriple(P.subject,P.predicate,B,P.reifiedStatementId),P.subject=B,P.predicate=null}else"Collection"===V?(T=!0,P.hadChildren=!0,P.childrenCollectionSubject=P.subject,P.childrenCollectionPredicate=P.predicate,K=!1):"Literal"===V&&(T=!0,P.childrenTagsToString=!0,P.childrenStringTags=[]);continue;case"ID":this.validateNcname(V),P.reifiedStatementId=this.valueToUri("#"+V,P),this.claimNodeId(P.reifiedStatementId);continue}else if(x.uri===_.XML&&"lang"===x.local){P.language=""===V?null:V.toLowerCase();continue}if("xml"!==x.prefix&&"xmlns"!==x.prefix&&x.uri){if(T||P.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${V}`);P.hadChildren=!0,X=!0,re.push(this.uriToNamedNode(x.uri+x.local)),ie.push(this.dataFactory.literal(V,P.datatype||P.language))}}if(null!==le){const J=P.subject;P.subject=K?this.dataFactory.blankNode(le):this.valueToUri(le,P),this.emitTriple(J,P.predicate,P.subject,P.reifiedStatementId);for(let V=0;V<re.length;V++)this.emitTriple(P.subject,re[V],ie[V],null);P.predicateEmitted=!0}else K&&(P.predicateSubPredicates=re,P.predicateSubObjects=ie,P.predicateEmitted=!1)}emitTriple(L,P,j,se){this.push(this.dataFactory.quad(L,P,j,this.defaultGraph)),se&&(this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"type"),this.dataFactory.namedNode(_.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"subject"),L,this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"predicate"),P,this.defaultGraph)),this.push(this.dataFactory.quad(se,this.dataFactory.namedNode(_.RDF+"object"),j,this.defaultGraph)))}claimNodeId(L){if(!this.allowDuplicateRdfIds){if(this.nodeIds[L.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${L.value}'.`);this.nodeIds[L.value]=!0}}onText(L){const P=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;P&&(P.childrenStringTags?P.childrenStringTags.push(L):P.predicate&&(P.text=L))}onCloseTag(){const L=this.activeTagStack.pop();if(L.childrenStringEmitClosingTag&&L.childrenStringTags.push(L.childrenStringEmitClosingTag),L.childrenTagsToString&&(L.datatype=this.dataFactory.namedNode(_.RDF+"XMLLiteral"),L.text=L.childrenStringTags.join(""),L.hadChildren=!1),L.childrenCollectionSubject)this.emitTriple(L.childrenCollectionSubject,L.childrenCollectionPredicate,this.dataFactory.namedNode(_.RDF+"nil"),L.reifiedStatementId);else if(L.predicate)if(L.hadChildren||L.childrenParseType===v.PROPERTY){if(!L.predicateEmitted){const P=this.dataFactory.blankNode();this.emitTriple(L.subject,L.predicate,P,L.reifiedStatementId);for(let j=0;j<L.predicateSubPredicates.length;j++)this.emitTriple(P,L.predicateSubPredicates[j],L.predicateSubObjects[j],null)}}else this.emitTriple(L.subject,L.predicate,this.dataFactory.literal(L.text||"",L.datatype||L.language),L.reifiedStatementId)}onDoctype(L){L.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(P,j,se)=>(this.saxStream._parser.ENTITIES[j]=se,""))}}var v,D;Z.RdfXmlParser=_,_.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,_.MIME_TYPE="application/rdf+xml",_.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_.XML="http://www.w3.org/XML/1998/namespace",_.XMLNS="http://www.w3.org/2000/xmlns/",_.DEFAULT_NS={xml:_.XML},_.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],_.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],_.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(D=v=Z.ParseType||(Z.ParseType={}))[D.RESOURCE=0]="RESOURCE",D[D.PROPERTY=1]="PROPERTY"},9987:(ne,Z,g)=>{"use strict";const{AbortError:S,codes:b}=g(4370),{isNodeStream:O,isWebStream:C,kControllerErrorFunction:N}=g(5428),_=g(4618),{ERR_INVALID_ARG_TYPE:v}=b;ne.exports.addAbortSignal=function(P,j){if(((L,P)=>{if("object"!=typeof L||!("aborted"in L))throw new v("signal","AbortSignal",L)})(P),!O(j)&&!C(j))throw new v("stream",["ReadableStream","WritableStream","Stream"],j);return ne.exports.addAbortSignalNoValidate(P,j)},ne.exports.addAbortSignalNoValidate=function(L,P){if("object"!=typeof L||!("aborted"in L))return P;const j=O(P)?()=>{P.destroy(new S(void 0,{cause:L.reason}))}:()=>{P[N](new S(void 0,{cause:L.reason}))};return L.aborted?j():(L.addEventListener("abort",j),_(P,()=>L.removeEventListener("abort",j))),P}},2960:(ne,Z,g)=>{"use strict";const{StringPrototypeSlice:S,SymbolIterator:b,TypedArrayPrototypeSet:O,Uint8Array:C}=g(6305),{Buffer:N}=g(1657),{inspect:_}=g(2656);ne.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(D){const L={data:D,next:null};this.length>0?this.tail.next=L:this.head=L,this.tail=L,++this.length}unshift(D){const L={data:D,next:this.head};0===this.length&&(this.tail=L),this.head=L,++this.length}shift(){if(0===this.length)return;const D=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,D}clear(){this.head=this.tail=null,this.length=0}join(D){if(0===this.length)return"";let L=this.head,P=""+L.data;for(;null!==(L=L.next);)P+=D+L.data;return P}concat(D){if(0===this.length)return N.alloc(0);const L=N.allocUnsafe(D>>>0);let P=this.head,j=0;for(;P;)O(L,P.data,j),j+=P.data.length,P=P.next;return L}consume(D,L){const P=this.head.data;if(D<P.length){const j=P.slice(0,D);return this.head.data=P.slice(D),j}return D===P.length?this.shift():L?this._getString(D):this._getBuffer(D)}first(){return this.head.data}*[b](){for(let D=this.head;D;D=D.next)yield D.data}_getString(D){let L="",P=this.head,j=0;do{const se=P.data;if(!(D>se.length)){D===se.length?(L+=se,++j,this.head=P.next?P.next:this.tail=null):(L+=S(se,0,D),this.head=P,P.data=S(se,D));break}L+=se,D-=se.length,++j}while(null!==(P=P.next));return this.length-=j,L}_getBuffer(D){const L=N.allocUnsafe(D),P=D;let j=this.head,se=0;do{const T=j.data;if(!(D>T.length)){D===T.length?(O(L,T,P-D),++se,this.head=j.next?j.next:this.tail=null):(O(L,new C(T.buffer,T.byteOffset,D),P-D),this.head=j,j.data=T.slice(D));break}O(L,T,P-D),D-=T.length,++se}while(null!==(j=j.next));return this.length-=se,L}[Symbol.for("nodejs.util.inspect.custom")](D,L){return _(this,{...L,depth:0,customInspect:!1})}}},7721:(ne,Z,g)=>{"use strict";var S=g(7156).default;const{pipeline:b}=g(4514),O=g(5931),{destroyer:C}=g(5601),{isNodeStream:N,isReadable:_,isWritable:v,isWebStream:D,isTransformStream:L,isWritableStream:P,isReadableStream:j}=g(5428),{AbortError:se,codes:{ERR_INVALID_ARG_VALUE:T,ERR_MISSING_ARGS:X}}=g(4370),le=g(4618);ne.exports=function(...re){if(0===re.length)throw new X("streams");if(1===re.length)return O.from(re[0]);const ie=[...re];if("function"==typeof re[0]&&(re[0]=O.from(re[0])),"function"==typeof re[re.length-1]){const Oe=re.length-1;re[Oe]=O.from(re[Oe])}for(let Oe=0;Oe<re.length;++Oe)if(N(re[Oe])||D(re[Oe])){if(Oe<re.length-1&&!(_(re[Oe])||j(re[Oe])||L(re[Oe])))throw new T(`streams[${Oe}]`,ie[Oe],"must be readable");if(Oe>0&&!(v(re[Oe])||P(re[Oe])||L(re[Oe])))throw new T(`streams[${Oe}]`,ie[Oe],"must be writable")}let J,V,x,B,k;const W=re[0],Me=b(re,function he(Oe){const Te=B;B=null,Te?Te(Oe):Oe?k.destroy(Oe):!xe&&!de&&k.destroy()}),de=!!(v(W)||P(W)||L(W)),xe=!!(_(Me)||j(Me)||L(Me));if(k=new O({writableObjectMode:!(null==W||!W.writableObjectMode),readableObjectMode:!(null==Me||!Me.writableObjectMode),writable:de,readable:xe}),de){if(N(W))k._write=function(Te,Je,Ke){W.write(Te,Je)?Ke():J=Ke},k._final=function(Te){W.end(),V=Te},W.on("drain",function(){if(J){const Te=J;J=null,Te()}});else if(D(W)){const Je=(L(W)?W.writable:W).getWriter();k._write=function(){var Ke=S(function*(Ee,Fe,Pe){try{yield Je.ready,Je.write(Ee).catch(()=>{}),Pe()}catch(Ge){Pe(Ge)}});return function(Ee,Fe,Pe){return Ke.apply(this,arguments)}}(),k._final=function(){var Ke=S(function*(Ee){try{yield Je.ready,Je.close().catch(()=>{}),V=Ee}catch(Fe){Ee(Fe)}});return function(Ee){return Ke.apply(this,arguments)}}()}const Oe=L(Me)?Me.readable:Me;le(Oe,()=>{if(V){const Te=V;V=null,Te()}})}if(xe)if(N(Me))Me.on("readable",function(){if(x){const Oe=x;x=null,Oe()}}),Me.on("end",function(){k.push(null)}),k._read=function(){for(;;){const Oe=Me.read();if(null===Oe)return void(x=k._read);if(!k.push(Oe))return}};else if(D(Me)){const Te=(L(Me)?Me.readable:Me).getReader();k._read=S(function*(){for(;;)try{const{value:Je,done:Ke}=yield Te.read();if(!k.push(Je))return;if(Ke)return void k.push(null)}catch{return}})}return k._destroy=function(Oe,Te){!Oe&&null!==B&&(Oe=new se),x=null,J=null,V=null,null===B?Te(Oe):(B=Te,N(Me)&&C(Me,Oe))},k}},5601:(ne,Z,g)=>{"use strict";const S=g(42),{aggregateTwoErrors:b,codes:{ERR_MULTIPLE_CALLBACK:O},AbortError:C}=g(4370),{Symbol:N}=g(6305),{kDestroyed:_,isDestroyed:v,isFinished:D,isServerRequest:L}=g(5428),P=N("kDestroy"),j=N("kConstruct");function se(de,xe,Oe){de&&(xe&&!xe.errored&&(xe.errored=de),Oe&&!Oe.errored&&(Oe.errored=de))}function X(de,xe,Oe){let Te=!1;function Je(Ke){if(Te)return;Te=!0;const Ee=de._readableState,Fe=de._writableState;se(Ke,Fe,Ee),Fe&&(Fe.closed=!0),Ee&&(Ee.closed=!0),"function"==typeof Oe&&Oe(Ke),Ke?S.nextTick(le,de,Ke):S.nextTick(K,de)}try{de._destroy(xe||null,Je)}catch(Ke){Je(Ke)}}function le(de,xe){re(de,xe),K(de)}function K(de){const xe=de._readableState,Oe=de._writableState;Oe&&(Oe.closeEmitted=!0),xe&&(xe.closeEmitted=!0),(null!=Oe&&Oe.emitClose||null!=xe&&xe.emitClose)&&de.emit("close")}function re(de,xe){const Oe=de._readableState,Te=de._writableState;null!=Te&&Te.errorEmitted||null!=Oe&&Oe.errorEmitted||(Te&&(Te.errorEmitted=!0),Oe&&(Oe.errorEmitted=!0),de.emit("error",xe))}function J(de,xe,Oe){const Te=de._readableState,Je=de._writableState;if(null!=Je&&Je.destroyed||null!=Te&&Te.destroyed)return this;null!=Te&&Te.autoDestroy||null!=Je&&Je.autoDestroy?de.destroy(xe):xe&&(Je&&!Je.errored&&(Je.errored=xe),Te&&!Te.errored&&(Te.errored=xe),Oe?S.nextTick(re,de,xe):re(de,xe))}function x(de){let xe=!1;function Oe(Te){if(xe)return void J(de,Te??new O);xe=!0;const Je=de._readableState,Ke=de._writableState,Ee=Ke||Je;Je&&(Je.constructed=!0),Ke&&(Ke.constructed=!0),Ee.destroyed?de.emit(P,Te):Te?J(de,Te,!0):S.nextTick(B,de)}try{de._construct(Te=>{S.nextTick(Oe,Te)})}catch(Te){S.nextTick(Oe,Te)}}function B(de){de.emit(j)}function k(de){return de?.setHeader&&"function"==typeof de.abort}function he(de){de.emit("close")}function W(de,xe){de.emit("error",xe),S.nextTick(he,de)}ne.exports={construct:function V(de,xe){if("function"!=typeof de._construct)return;const Oe=de._readableState,Te=de._writableState;Oe&&(Oe.constructed=!1),Te&&(Te.constructed=!1),de.once(j,xe),!(de.listenerCount(j)>1)&&S.nextTick(x,de)},destroyer:function Me(de,xe){!de||v(de)||(!xe&&!D(de)&&(xe=new C),L(de)?(de.socket=null,de.destroy(xe)):k(de)?de.abort():k(de.req)?de.req.abort():"function"==typeof de.destroy?de.destroy(xe):"function"==typeof de.close?de.close():xe?S.nextTick(W,de,xe):S.nextTick(he,de),de.destroyed||(de[_]=!0))},destroy:function T(de,xe){const Oe=this._readableState,Te=this._writableState,Je=Te||Oe;return null!=Te&&Te.destroyed||null!=Oe&&Oe.destroyed?("function"==typeof xe&&xe(),this):(se(de,Te,Oe),Te&&(Te.destroyed=!0),Oe&&(Oe.destroyed=!0),Je.constructed?X(this,de,xe):this.once(P,function(Ke){X(this,b(Ke,de),xe)}),this)},undestroy:function ie(){const de=this._readableState,xe=this._writableState;de&&(de.constructed=!0,de.closed=!1,de.closeEmitted=!1,de.destroyed=!1,de.errored=null,de.errorEmitted=!1,de.reading=!1,de.ended=!1===de.readable,de.endEmitted=!1===de.readable),xe&&(xe.constructed=!0,xe.destroyed=!1,xe.closed=!1,xe.closeEmitted=!1,xe.errored=null,xe.errorEmitted=!1,xe.finalCalled=!1,xe.prefinished=!1,xe.ended=!1===xe.writable,xe.ending=!1===xe.writable,xe.finished=!1===xe.writable)},errorOrDestroy:J}},5931:(ne,Z,g)=>{"use strict";const{ObjectDefineProperties:S,ObjectGetOwnPropertyDescriptor:b,ObjectKeys:O,ObjectSetPrototypeOf:C}=g(6305);ne.exports=v;const N=g(8383),_=g(9764);C(v.prototype,N.prototype),C(v,N);{const j=O(_.prototype);for(let se=0;se<j.length;se++){const T=j[se];v.prototype[T]||(v.prototype[T]=_.prototype[T])}}function v(j){if(!(this instanceof v))return new v(j);N.call(this,j),_.call(this,j),j?(this.allowHalfOpen=!1!==j.allowHalfOpen,!1===j.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===j.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let D,P;function L(){return void 0===D&&(D={}),D}S(v.prototype,{writable:{__proto__:null,...b(_.prototype,"writable")},writableHighWaterMark:{__proto__:null,...b(_.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...b(_.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...b(_.prototype,"writableBuffer")},writableLength:{__proto__:null,...b(_.prototype,"writableLength")},writableFinished:{__proto__:null,...b(_.prototype,"writableFinished")},writableCorked:{__proto__:null,...b(_.prototype,"writableCorked")},writableEnded:{__proto__:null,...b(_.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...b(_.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(j){this._readableState&&this._writableState&&(this._readableState.destroyed=j,this._writableState.destroyed=j)}}}),v.fromWeb=function(j,se){return L().newStreamDuplexFromReadableWritablePair(j,se)},v.toWeb=function(j){return L().newReadableWritablePairFromDuplex(j)},v.from=function(j){return P||(P=g(8078)),P(j,"body")}},8078:(ne,Z,g)=>{var S=g(7156).default,b=g(6737).default,O=g(8186).default;const C=g(42),N=g(1657),{isReadable:_,isWritable:v,isIterable:D,isNodeStream:L,isReadableNodeStream:P,isWritableNodeStream:j,isDuplexNodeStream:se}=g(5428),T=g(4618),{AbortError:X,codes:{ERR_INVALID_ARG_TYPE:le,ERR_INVALID_RETURN_VALUE:K}}=g(4370),{destroyer:re}=g(5601),ie=g(5931),J=g(8383),{createDeferredPromise:V}=g(2656),x=g(55),B=globalThis.Blob||N.Blob,k=typeof B<"u"?function(Te){return Te instanceof B}:function(Te){return!1},he=globalThis.AbortController||g(3982).AbortController,{FunctionPrototypeCall:W}=g(6305);class Me extends ie{constructor(Te){super(Te),!1===Te?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===Te?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function xe(Oe){const Te=Oe.readable&&"function"!=typeof Oe.readable.read?J.wrap(Oe.readable):Oe.readable,Je=Oe.writable;let Fe,Pe,Ge,ge,Ae,Ke=!!_(Te),Ee=!!v(Je);function qe(ct){const Ye=ge;ge=null,Ye?Ye(ct):ct&&Ae.destroy(ct)}return Ae=new Me({readableObjectMode:!(null==Te||!Te.readableObjectMode),writableObjectMode:!(null==Je||!Je.writableObjectMode),readable:Ke,writable:Ee}),Ee&&(T(Je,ct=>{Ee=!1,ct&&re(Te,ct),qe(ct)}),Ae._write=function(ct,Ye,ye){Je.write(ct,Ye)?ye():Fe=ye},Ae._final=function(ct){Je.end(),Pe=ct},Je.on("drain",function(){if(Fe){const ct=Fe;Fe=null,ct()}}),Je.on("finish",function(){if(Pe){const ct=Pe;Pe=null,ct()}})),Ke&&(T(Te,ct=>{Ke=!1,ct&&re(Te,ct),qe(ct)}),Te.on("readable",function(){if(Ge){const ct=Ge;Ge=null,ct()}}),Te.on("end",function(){Ae.push(null)}),Ae._read=function(){for(;;){const ct=Te.read();if(null===ct)return void(Ge=Ae._read);if(!Ae.push(ct))return}}),Ae._destroy=function(ct,Ye){!ct&&null!==ge&&(ct=new X),Ge=null,Fe=null,Pe=null,null===ge?Ye(ct):(ge=Ye,re(Je,ct),re(Te,ct))},Ae}ne.exports=function Oe(Te,Je){if(se(Te))return Te;if(P(Te))return xe({readable:Te});if(j(Te))return xe({writable:Te});if(L(Te))return xe({writable:!1,readable:!1});if("function"==typeof Te){const{value:Ee,write:Fe,final:Pe,destroy:Ge}=function de(Oe){let{promise:Te,resolve:Je}=V();const Ke=new he,Ee=Ke.signal;return{value:Oe(O(function*(){for(;;){const Pe=Te;Te=null;const{chunk:Ge,done:ge,cb:Ae}=yield b(Pe);if(C.nextTick(Ae),ge)return;if(Ee.aborted)throw new X(void 0,{cause:Ee.reason});({promise:Te,resolve:Je}=V()),yield Ge}})(),{signal:Ee}),write(Pe,Ge,ge){const Ae=Je;Je=null,Ae({chunk:Pe,done:!1,cb:ge})},final(Pe){const Ge=Je;Je=null,Ge({done:!0,cb:Pe})},destroy(Pe,Ge){Ke.abort(),Ge(Pe)}}}(Te);if(D(Ee))return x(Me,Ee,{objectMode:!0,write:Fe,final:Pe,destroy:Ge});const ge=Ee?.then;if("function"==typeof ge){let Ae;const qe=W(ge,Ee,ct=>{if(null!=ct)throw new K("nully","body",ct)},ct=>{re(Ae,ct)});return Ae=new Me({objectMode:!0,readable:!1,write:Fe,final(ct){Pe(S(function*(){try{yield qe,C.nextTick(ct,null)}catch(Ye){C.nextTick(ct,Ye)}}))},destroy:Ge})}throw new K("Iterable, AsyncIterable or AsyncFunction",Je,Ee)}if(k(Te))return Oe(Te.arrayBuffer());if(D(Te))return x(Me,Te,{objectMode:!0,writable:!1});if("object"==typeof Te?.writable||"object"==typeof Te?.readable)return xe({readable:null!=Te&&Te.readable?P(Te?.readable)?Te?.readable:Oe(Te.readable):void 0,writable:null!=Te&&Te.writable?j(Te?.writable)?Te?.writable:Oe(Te.writable):void 0});const Ke=Te?.then;if("function"==typeof Ke){let Ee;return W(Ke,Te,Fe=>{null!=Fe&&Ee.push(Fe),Ee.push(null)},Fe=>{re(Ee,Fe)}),Ee=new Me({objectMode:!0,writable:!1,read(){}})}throw new le(Je,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Te)}},4618:(ne,Z,g)=>{const S=g(42),{AbortError:b,codes:O}=g(4370),{ERR_INVALID_ARG_TYPE:C,ERR_STREAM_PREMATURE_CLOSE:N}=O,{kEmptyObject:_,once:v}=g(2656),{validateAbortSignal:D,validateFunction:L,validateObject:P,validateBoolean:j}=g(2120),{Promise:se,PromisePrototypeThen:T}=g(6305),{isClosed:X,isReadable:le,isReadableNodeStream:K,isReadableStream:re,isReadableFinished:ie,isReadableErrored:J,isWritable:V,isWritableNodeStream:x,isWritableStream:B,isWritableFinished:k,isWritableErrored:he,isNodeStream:W,willEmitClose:Me,kIsClosedPromise:de}=g(5428),Oe=()=>{};function Te(Ee,Fe,Pe){var Ge,ge;if(2===arguments.length?(Pe=Fe,Fe=_):null==Fe?Fe=_:P(Fe,"options"),L(Pe,"callback"),D(Fe.signal,"options.signal"),Pe=v(Pe),re(Ee)||B(Ee))return function Je(Ee,Fe,Pe){let Ge=!1,ge=Oe;if(Fe.signal)if(ge=()=>{Ge=!0,Pe.call(Ee,new b(void 0,{cause:Fe.signal.reason}))},Fe.signal.aborted)S.nextTick(ge);else{const qe=Pe;Pe=v((...ct)=>{Fe.signal.removeEventListener("abort",ge),qe.apply(Ee,ct)}),Fe.signal.addEventListener("abort",ge)}const Ae=(...qe)=>{Ge||S.nextTick(()=>Pe.apply(Ee,qe))};return T(Ee[de].promise,Ae,Ae),Oe}(Ee,Fe,Pe);if(!W(Ee))throw new C("stream",["ReadableStream","WritableStream","Stream"],Ee);const Ae=null!==(Ge=Fe.readable)&&void 0!==Ge?Ge:K(Ee),qe=null!==(ge=Fe.writable)&&void 0!==ge?ge:x(Ee),ct=Ee._writableState,Ye=Ee._readableState,ye=()=>{Ee.writable||ae()};let G=Me(Ee)&&K(Ee)===Ae&&x(Ee)===qe,R=k(Ee,!1);const ae=()=>{R=!0,Ee.destroyed&&(G=!1),(!G||Ee.readable&&!Ae)&&(!Ae||U)&&Pe.call(Ee)};let U=ie(Ee,!1);const Le=()=>{U=!0,Ee.destroyed&&(G=!1),(!G||Ee.writable&&!qe)&&(!qe||R)&&Pe.call(Ee)},tt=ue=>{Pe.call(Ee,ue)};let fe=X(Ee);const ee=()=>{fe=!0;const ue=he(Ee)||J(Ee);return ue&&"boolean"!=typeof ue?Pe.call(Ee,ue):Ae&&!U&&K(Ee,!0)&&!ie(Ee,!1)?Pe.call(Ee,new N):!qe||R||k(Ee,!1)?void Pe.call(Ee):Pe.call(Ee,new N)},q=()=>{fe=!0;const ue=he(Ee)||J(Ee);if(ue&&"boolean"!=typeof ue)return Pe.call(Ee,ue);Pe.call(Ee)},A=()=>{Ee.req.on("finish",ae)};!function xe(Ee){return Ee.setHeader&&"function"==typeof Ee.abort}(Ee)?qe&&!ct&&(Ee.on("end",ye),Ee.on("close",ye)):(Ee.on("complete",ae),G||Ee.on("abort",ee),Ee.req?A():Ee.on("request",A)),!G&&"boolean"==typeof Ee.aborted&&Ee.on("aborted",ee),Ee.on("end",Le),Ee.on("finish",ae),!1!==Fe.error&&Ee.on("error",tt),Ee.on("close",ee),fe?S.nextTick(ee):null!=ct&&ct.errorEmitted||null!=Ye&&Ye.errorEmitted?G||S.nextTick(q):(!Ae&&(!G||le(Ee))&&(R||!1===V(Ee))||!qe&&(!G||V(Ee))&&(U||!1===le(Ee))||Ye&&Ee.req&&Ee.aborted)&&S.nextTick(q);const F=()=>{Pe=Oe,Ee.removeListener("aborted",ee),Ee.removeListener("complete",ae),Ee.removeListener("abort",ee),Ee.removeListener("request",A),Ee.req&&Ee.req.removeListener("finish",ae),Ee.removeListener("end",ye),Ee.removeListener("close",ye),Ee.removeListener("finish",ae),Ee.removeListener("end",Le),Ee.removeListener("error",tt),Ee.removeListener("close",ee)};if(Fe.signal&&!fe){const ue=()=>{const me=Pe;F(),me.call(Ee,new b(void 0,{cause:Fe.signal.reason}))};if(Fe.signal.aborted)S.nextTick(ue);else{const me=Pe;Pe=v((...We)=>{Fe.signal.removeEventListener("abort",ue),me.apply(Ee,We)}),Fe.signal.addEventListener("abort",ue)}}return F}ne.exports=Te,ne.exports.finished=function Ke(Ee,Fe){var Pe;let Ge=!1;return null===Fe&&(Fe=_),null!==(Pe=Fe)&&void 0!==Pe&&Pe.cleanup&&(j(Fe.cleanup,"cleanup"),Ge=Fe.cleanup),new se((ge,Ae)=>{const qe=Te(Ee,Fe,ct=>{Ge&&qe(),ct?Ae(ct):ge()})})}},55:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(42),{PromisePrototypeThen:O,SymbolAsyncIterator:C,SymbolIterator:N}=g(6305),{Buffer:_}=g(1657),{ERR_INVALID_ARG_TYPE:v,ERR_STREAM_NULL_VALUES:D}=g(4370).codes;ne.exports=function L(P,j,se){let T,X;if("string"==typeof j||j instanceof _)return new P({objectMode:!0,...se,read(){this.push(j),this.push(null)}});if(j&&j[C])X=!0,T=j[C]();else{if(!j||!j[N])throw new v("iterable",["Iterable"],j);X=!1,T=j[N]()}const le=new P({objectMode:!0,highWaterMark:1,...se});let K=!1;function ie(){return(ie=S(function*(x){if(null!=x&&"function"==typeof T.throw){const{value:he,done:W}=yield T.throw(x);if(yield he,W)return}if("function"==typeof T.return){const{value:he}=yield T.return();yield he}})).apply(this,arguments)}function V(){return(V=S(function*(){for(;;){try{const{value:x,done:B}=X?yield T.next():T.next();if(B)le.push(null);else{const k=x&&"function"==typeof x.then?yield x:x;if(null===k)throw K=!1,new D;if(le.push(k))continue;K=!1}}catch(x){le.destroy(x)}break}})).apply(this,arguments)}return le._read=function(){K||(K=!0,function J(){V.apply(this,arguments)}())},le._destroy=function(x,B){O(function re(x){return ie.apply(this,arguments)}(x),()=>b.nextTick(B,x),k=>b.nextTick(B,k||x))},le}},900:(ne,Z,g)=>{"use strict";const{ArrayIsArray:S,ObjectSetPrototypeOf:b}=g(6305),{EventEmitter:O}=g(2016);function C(_){O.call(this,_)}function N(_,v,D){if("function"==typeof _.prependListener)return _.prependListener(v,D);_._events&&_._events[v]?S(_._events[v])?_._events[v].unshift(D):_._events[v]=[D,_._events[v]]:_.on(v,D)}b(C.prototype,O.prototype),b(C,O),C.prototype.pipe=function(_,v){const D=this;function L(K){_.writable&&!1===_.write(K)&&D.pause&&D.pause()}function P(){D.readable&&D.resume&&D.resume()}D.on("data",L),_.on("drain",P),!_._isStdio&&(!v||!1!==v.end)&&(D.on("end",se),D.on("close",T));let j=!1;function se(){j||(j=!0,_.end())}function T(){j||(j=!0,"function"==typeof _.destroy&&_.destroy())}function X(K){le(),0===O.listenerCount(this,"error")&&this.emit("error",K)}function le(){D.removeListener("data",L),_.removeListener("drain",P),D.removeListener("end",se),D.removeListener("close",T),D.removeListener("error",X),_.removeListener("error",X),D.removeListener("end",le),D.removeListener("close",le),_.removeListener("close",le)}return N(D,"error",X),N(_,"error",X),D.on("end",le),D.on("close",le),_.on("close",le),_.emit("pipe",D),_},ne.exports={Stream:C,prependListener:N}},7624:(ne,Z,g)=>{"use strict";var S=g(7156).default,b=g(8131).default,O=g(8237).default,C=g(6737).default,N=g(8186).default;const _=globalThis.AbortController||g(3982).AbortController,{codes:{ERR_INVALID_ARG_VALUE:v,ERR_INVALID_ARG_TYPE:D,ERR_MISSING_ARGS:L,ERR_OUT_OF_RANGE:P},AbortError:j}=g(4370),{validateAbortSignal:se,validateInteger:T,validateObject:X}=g(2120),le=g(6305).Symbol("kWeak"),{finished:K}=g(4618),re=g(7721),{addAbortSignalNoValidate:ie}=g(9987),{isWritable:J,isNodeStream:V}=g(5428),{ArrayPrototypePush:x,MathFloor:B,Number:k,NumberIsNaN:he,Promise:W,PromiseReject:Me,PromisePrototypeThen:de,Symbol:xe}=g(6305),Oe=xe("kEmpty"),Te=xe("kEof");function Ke(A,F){if("function"!=typeof A)throw new D("fn",["Function","AsyncFunction"],A);null!=F&&X(F,"options"),null!=F?.signal&&se(F.signal,"options.signal");let ue=1;return null!=F?.concurrency&&(ue=B(F.concurrency)),T(ue,"concurrency",1),function(){var me=N(function*(){var He,gt;const Ft=new _,yt=this,Gt=[],rn=Ft.signal,Ie={signal:rn},Q=()=>Ft.abort();null!=F&&null!==(He=F.signal)&&void 0!==He&&He.aborted&&Q(),null==F||null===(gt=F.signal)||void 0===gt||gt.addEventListener("abort",Q);let I,ce,$e=!1;function Qe(){$e=!0}function $t(){return($t=S(function*(){try{var Cn,sn=!1,$n=!1;try{for(var ko,Mn=O(yt);sn=!(ko=yield Mn.next()).done;sn=!1){let qi=ko.value;var ys;if($e)return;if(rn.aborted)throw new j;try{qi=A(qi,Ie)}catch(Yr){qi=Me(Yr)}qi!==Oe&&("function"==typeof(null===(ys=qi)||void 0===ys?void 0:ys.catch)&&qi.catch(Qe),Gt.push(qi),I&&(I(),I=null),!$e&&Gt.length&&Gt.length>=ue&&(yield new W(Yr=>{ce=Yr})))}}catch(qi){$n=!0,Cn=qi}finally{try{sn&&null!=Mn.return&&(yield Mn.return())}finally{if($n)throw Cn}}Gt.push(Te)}catch(qi){const Yr=Me(qi);de(Yr,void 0,Qe),Gt.push(Yr)}finally{var es;$e=!0,I&&(I(),I=null),null==F||null===(es=F.signal)||void 0===es||es.removeEventListener("abort",Q)}})).apply(this,arguments)}!function at(){$t.apply(this,arguments)}();try{for(;;){for(;Gt.length>0;){const sn=yield C(Gt[0]);if(sn===Te)return;if(rn.aborted)throw new j;sn!==Oe&&(yield sn),Gt.shift(),ce&&(ce(),ce=null)}yield C(new W(sn=>{I=sn}))}}finally{Ft.abort(),$e=!0,ce&&(ce(),ce=null)}});return function We(){return me.apply(this,arguments)}}().call(this)}function Fe(A){return Pe.apply(this,arguments)}function Pe(){return(Pe=S(function*(A,F=void 0){var We,ue=!1,me=!1;try{for(var He=O(ye.call(this,A,F));ue=!(yield He.next()).done;ue=!1)return!0}catch(Ft){me=!0,We=Ft}finally{try{ue&&null!=He.return&&(yield He.return())}finally{if(me)throw We}}return!1})).apply(this,arguments)}function ge(){return(ge=S(function*(A,F=void 0){if("function"!=typeof A)throw new D("fn",["Function","AsyncFunction"],A);return!(yield Fe.call(this,S(function*(...ue){return!(yield A(...ue))}),F))})).apply(this,arguments)}function qe(){return(qe=S(function*(A,F){var We,ue=!1,me=!1;try{for(var gt,He=O(ye.call(this,A,F));ue=!(gt=yield He.next()).done;ue=!1)return gt.value}catch(Ft){me=!0,We=Ft}finally{try{ue&&null!=He.return&&(yield He.return())}finally{if(me)throw We}}})).apply(this,arguments)}function Ye(){return Ye=S(function*(A,F){if("function"!=typeof A)throw new D("fn",["Function","AsyncFunction"],A);function me(){return(me=S(function*(Gt,rn){return yield A(Gt,rn),Oe})).apply(this,arguments)}var gt,We=!1,He=!1;try{for(var Ft=O(Ke.call(this,function ue(Gt,rn){return me.apply(this,arguments)},F));We=!(yield Ft.next()).done;We=!1);}catch(Gt){He=!0,gt=Gt}finally{try{We&&null!=Ft.return&&(yield Ft.return())}finally{if(He)throw gt}}}),Ye.apply(this,arguments)}function ye(A,F){if("function"!=typeof A)throw new D("fn",["Function","AsyncFunction"],A);function me(){return(me=S(function*(We,He){return(yield A(We,He))?We:Oe})).apply(this,arguments)}return Ke.call(this,function ue(We,He){return me.apply(this,arguments)},F)}class G extends L{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ae(){return ae=S(function*(A,F,ue){var me;if("function"!=typeof A)throw new D("reducer",["Function","AsyncFunction"],A);null!=ue&&X(ue,"options"),null!=ue?.signal&&se(ue.signal,"options.signal");let We=arguments.length>1;if(null!=ue&&null!==(me=ue.signal)&&void 0!==me&&me.aborted){const ce=new j(void 0,{cause:ue.signal.reason});throw this.once("error",()=>{}),yield K(this.destroy(ce)),ce}const He=new _,gt=He.signal;null!=ue&&ue.signal&&ue.signal.addEventListener("abort",()=>He.abort(),{once:!0,[le]:this});let Ft=!1;try{var rn,yt=!1,Gt=!1;try{for(var Q,Ie=O(this);yt=!(Q=yield Ie.next()).done;yt=!1){const ce=Q.value;var I;if(Ft=!0,null!=ue&&null!==(I=ue.signal)&&void 0!==I&&I.aborted)throw new j;We?F=yield A(F,ce,{signal:gt}):(F=ce,We=!0)}}catch(ce){Gt=!0,rn=ce}finally{try{yt&&null!=Ie.return&&(yield Ie.return())}finally{if(Gt)throw rn}}if(!Ft&&!We)throw new G}finally{He.abort()}return F}),ae.apply(this,arguments)}function Le(){return(Le=S(function*(A){null!=A&&X(A,"options"),null!=A?.signal&&se(A.signal,"options.signal");const F=[];var We,ue=!1,me=!1;try{for(var gt,He=O(this);ue=!(gt=yield He.next()).done;ue=!1){const yt=gt.value;var Ft;if(null!=A&&null!==(Ft=A.signal)&&void 0!==Ft&&Ft.aborted)throw new j(void 0,{cause:A.signal.reason});x(F,yt)}}catch(yt){me=!0,We=yt}finally{try{ue&&null!=He.return&&(yield He.return())}finally{if(me)throw We}}return F})).apply(this,arguments)}function fe(A){if(A=k(A),he(A))return 0;if(A<0)throw new P("number",">= 0",A);return A}ne.exports.streamReturningOperators={asIndexedPairs:function Ee(A=void 0){return null!=A&&X(A,"options"),null!=A?.signal&&se(A.signal,"options.signal"),function(){var F=N(function*(){let me=0;var gt,We=!1,He=!1;try{for(var yt,Ft=O(this);We=!(yt=yield C(Ft.next())).done;We=!1){const rn=yt.value;var Gt;if(null!=A&&null!==(Gt=A.signal)&&void 0!==Gt&&Gt.aborted)throw new j({cause:A.signal.reason});yield[me++,rn]}}catch(rn){He=!0,gt=rn}finally{try{We&&null!=Ft.return&&(yield C(Ft.return()))}finally{if(He)throw gt}}});return function ue(){return F.apply(this,arguments)}}().call(this)},drop:function ee(A,F=void 0){return null!=F&&X(F,"options"),null!=F?.signal&&se(F.signal,"options.signal"),A=fe(A),function(){var ue=N(function*(){var We;if(null!=F&&null!==(We=F.signal)&&void 0!==We&&We.aborted)throw new j;var Ft,He=!1,gt=!1;try{for(var Gt,yt=O(this);He=!(Gt=yield C(yt.next())).done;He=!1){const Ie=Gt.value;var rn;if(null!=F&&null!==(rn=F.signal)&&void 0!==rn&&rn.aborted)throw new j;A--<=0&&(yield Ie)}}catch(Ie){gt=!0,Ft=Ie}finally{try{He&&null!=yt.return&&(yield C(yt.return()))}finally{if(gt)throw Ft}}});return function me(){return ue.apply(this,arguments)}}().call(this)},filter:ye,flatMap:function tt(A,F){const ue=Ke.call(this,A,F);return function(){var me=N(function*(){var Ft,He=!1,gt=!1;try{for(var Gt,yt=O(ue);He=!(Gt=yield C(yt.next())).done;He=!1){const rn=Gt.value;yield*b(O(rn),C)}}catch(rn){gt=!0,Ft=rn}finally{try{He&&null!=yt.return&&(yield C(yt.return()))}finally{if(gt)throw Ft}}});return function We(){return me.apply(this,arguments)}}().call(this)},map:Ke,take:function q(A,F=void 0){return null!=F&&X(F,"options"),null!=F?.signal&&se(F.signal,"options.signal"),A=fe(A),function(){var ue=N(function*(){var We;if(null!=F&&null!==(We=F.signal)&&void 0!==We&&We.aborted)throw new j;var Ft,He=!1,gt=!1;try{for(var Gt,yt=O(this);He=!(Gt=yield C(yt.next())).done;He=!1){const Ie=Gt.value;var rn;if(null!=F&&null!==(rn=F.signal)&&void 0!==rn&&rn.aborted)throw new j;if(!(A-- >0))return;yield Ie}}catch(Ie){gt=!0,Ft=Ie}finally{try{He&&null!=yt.return&&(yield C(yt.return()))}finally{if(gt)throw Ft}}});return function me(){return ue.apply(this,arguments)}}().call(this)},compose:function Je(A,F){if(null!=F&&X(F,"options"),null!=F?.signal&&se(F.signal,"options.signal"),V(A)&&!J(A))throw new v("stream",A,"must be writable");const ue=re(this,A);return null!=F&&F.signal&&ie(F.signal,ue),ue}},ne.exports.promiseReturningOperators={every:function Ge(A){return ge.apply(this,arguments)},forEach:function ct(A,F){return Ye.apply(this,arguments)},reduce:function R(A,F,ue){return ae.apply(this,arguments)},toArray:function U(A){return Le.apply(this,arguments)},some:Fe,find:function Ae(A,F){return qe.apply(this,arguments)}}},6973:(ne,Z,g)=>{"use strict";const{ObjectSetPrototypeOf:S}=g(6305);ne.exports=O;const b=g(123);function O(C){if(!(this instanceof O))return new O(C);b.call(this,C)}S(O.prototype,b.prototype),S(O,b),O.prototype._transform=function(C,N,_){_(null,C)}},4514:(ne,Z,g)=>{var S=g(7156).default,b=g(8186).default,O=g(6737).default,C=g(8131).default,N=g(8237).default;const _=g(42),{ArrayIsArray:v,Promise:D,SymbolAsyncIterator:L}=g(6305),P=g(4618),{once:j}=g(2656),se=g(5601),T=g(5931),{aggregateTwoErrors:X,codes:{ERR_INVALID_ARG_TYPE:le,ERR_INVALID_RETURN_VALUE:K,ERR_MISSING_ARGS:re,ERR_STREAM_DESTROYED:ie,ERR_STREAM_PREMATURE_CLOSE:J},AbortError:V}=g(4370),{validateFunction:x,validateAbortSignal:B}=g(2120),{isIterable:k,isReadable:he,isReadableNodeStream:W,isNodeStream:Me,isTransformStream:de,isWebStream:xe,isReadableStream:Oe,isReadableEnded:Te}=g(5428),Je=globalThis.AbortController||g(3982).AbortController;let Ke,Ee;function Fe(U,Le,tt){let fe=!1;return U.on("close",()=>{fe=!0}),{destroy:q=>{fe||(fe=!0,se.destroyer(U,q||new ie("pipe")))},cleanup:P(U,{readable:Le,writable:tt},q=>{fe=!q})}}function Ge(U){if(k(U))return U;if(W(U))return function ge(U){return Ae.apply(this,arguments)}(U);throw new le("val",["Readable","Iterable","AsyncIterable"],U)}function Ae(){return(Ae=b(function*(U){Ee||(Ee=g(8383)),yield*C(N(Ee.prototype[L].call(U)),O)})).apply(this,arguments)}function qe(U,Le,tt,fe){return ct.apply(this,arguments)}function ct(){return(ct=S(function*(U,Le,tt,{end:fe}){let ee,q=null;const A=yt=>{if(yt&&(ee=yt),q){const Gt=q;q=null,Gt()}},F=()=>new D((yt,Gt)=>{ee?Gt(ee):q=()=>{ee?Gt(ee):yt()}});Le.on("drain",A);const ue=P(Le,{readable:!1},A);try{Le.writableNeedDrain&&(yield F());var He,me=!1,We=!1;try{for(var Ft,gt=N(U);me=!(Ft=yield gt.next()).done;me=!1)Le.write(Ft.value)||(yield F())}catch(yt){We=!0,He=yt}finally{try{me&&null!=gt.return&&(yield gt.return())}finally{if(We)throw He}}fe&&Le.end(),yield F(),tt()}catch(yt){tt(ee!==yt?X(ee,yt):yt)}finally{ue(),Le.off("drain",A)}})).apply(this,arguments)}function Ye(U,Le,tt,fe){return ye.apply(this,arguments)}function ye(){return(ye=S(function*(U,Le,tt,{end:fe}){de(Le)&&(Le=Le.writable);const ee=Le.getWriter();try{var F,q=!1,A=!1;try{for(var me,ue=N(U);q=!(me=yield ue.next()).done;q=!1){const We=me.value;yield ee.ready,ee.write(We).catch(()=>{})}}catch(We){A=!0,F=We}finally{try{q&&null!=ue.return&&(yield ue.return())}finally{if(A)throw F}}yield ee.ready,fe&&(yield ee.close()),tt()}catch(We){try{yield ee.abort(We),tt(We)}catch(He){tt(He)}}})).apply(this,arguments)}function R(U,Le,tt){if(1===U.length&&v(U[0])&&(U=U[0]),U.length<2)throw new re("streams");const fe=new Je,ee=fe.signal,q=tt?.signal,A=[];function F(){Ft(new V)}let ue,me;B(q,"options.signal"),q?.addEventListener("abort",F);const We=[];let yt,He=0;function gt(Q){Ft(Q,0==--He)}function Ft(Q,I){if(Q&&(!ue||"ERR_STREAM_PREMATURE_CLOSE"===ue.code)&&(ue=Q),ue||I){for(;We.length;)We.shift()(ue);q?.removeEventListener("abort",F),fe.abort(),I&&(ue||A.forEach(ce=>ce()),_.nextTick(Le,ue,me))}}for(let Q=0;Q<U.length;Q++){const I=U[Q],ce=Q<U.length-1,$e=Q>0,Qe=ce||!1!==tt?.end,at=Q===U.length-1;if(Me(I)){let $t=function(sn){sn&&"AbortError"!==sn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==sn.code&&gt(sn)};if(Qe){const{destroy:sn,cleanup:$n}=Fe(I,ce,$e);We.push(sn),he(I)&&at&&A.push($n)}I.on("error",$t),he(I)&&at&&A.push(()=>{I.removeListener("error",$t)})}if(0===Q)if("function"==typeof I){if(yt=I({signal:ee}),!k(yt))throw new K("Iterable, AsyncIterable or Stream","source",yt)}else yt=k(I)||W(I)||de(I)?I:T.from(I);else if("function"==typeof I){var Gt;if(yt=de(yt)?Ge(null===(Gt=yt)||void 0===Gt?void 0:Gt.readable):Ge(yt),yt=I(yt,{signal:ee}),ce){if(!k(yt,!0))throw new K("AsyncIterable",`transform[${Q-1}]`,yt)}else{var rn;Ke||(Ke=g(6973));const $t=new Ke({objectMode:!0}),sn=null===(rn=yt)||void 0===rn?void 0:rn.then;if("function"==typeof sn)He++,sn.call(yt,Mn=>{me=Mn,null!=Mn&&$t.write(Mn),Qe&&$t.end(),_.nextTick(gt)},Mn=>{$t.destroy(Mn),_.nextTick(gt,Mn)});else if(k(yt,!0))He++,qe(yt,$t,gt,{end:Qe});else{if(!Oe(yt)&&!de(yt))throw new K("AsyncIterable or Promise","destination",yt);He++,qe(yt.readable||yt,$t,gt,{end:Qe})}yt=$t;const{destroy:$n,cleanup:Cn}=Fe(yt,!1,!0);We.push($n),at&&A.push(Cn)}}else if(Me(I)){if(W(yt)){He+=2;const $t=ae(yt,I,gt,{end:Qe});he(I)&&at&&A.push($t)}else if(de(yt)||Oe(yt))He++,qe(yt.readable||yt,I,gt,{end:Qe});else{if(!k(yt))throw new le("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],yt);He++,qe(yt,I,gt,{end:Qe})}yt=I}else if(xe(I)){if(W(yt))He++,Ye(Ge(yt),I,gt,{end:Qe});else if(Oe(yt)||k(yt))He++,Ye(yt,I,gt,{end:Qe});else{if(!de(yt))throw new le("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],yt);He++,Ye(yt.readable,I,gt,{end:Qe})}yt=I}else yt=T.from(I)}return(null!=ee&&ee.aborted||null!=q&&q.aborted)&&_.nextTick(F),yt}function ae(U,Le,tt,{end:fe}){let ee=!1;if(Le.on("close",()=>{ee||tt(new J)}),U.pipe(Le,{end:!1}),fe){let A=function(){ee=!0,Le.end()};Te(U)?_.nextTick(A):U.once("end",A)}else tt();return P(U,{readable:!0,writable:!1},A=>{const F=U._readableState;A&&"ERR_STREAM_PREMATURE_CLOSE"===A.code&&F&&F.ended&&!F.errored&&!F.errorEmitted?U.once("end",tt).once("error",tt):tt(A)}),P(Le,{readable:!1,writable:!0},tt)}ne.exports={pipelineImpl:R,pipeline:function G(...U){return R(U,j(function Pe(U){return x(U[U.length-1],"streams[stream.length - 1]"),U.pop()}(U)))}}},8383:(ne,Z,g)=>{var S=g(6737).default,b=g(8186).default;const O=g(42),{ArrayPrototypeIndexOf:C,NumberIsInteger:N,NumberIsNaN:_,NumberParseInt:v,ObjectDefineProperties:D,ObjectKeys:L,ObjectSetPrototypeOf:P,Promise:j,SafeSet:se,SymbolAsyncIterator:T,Symbol:X}=g(6305);ne.exports=qe,qe.ReadableState=Ae;const{EventEmitter:le}=g(2016),{Stream:K,prependListener:re}=g(900),{Buffer:ie}=g(1657),{addAbortSignal:J}=g(9987),V=g(4618);let x=g(2656).debuglog("stream",I=>{x=I});const B=g(2960),k=g(5601),{getHighWaterMark:he,getDefaultHighWaterMark:W}=g(8782),{aggregateTwoErrors:Me,codes:{ERR_INVALID_ARG_TYPE:de,ERR_METHOD_NOT_IMPLEMENTED:xe,ERR_OUT_OF_RANGE:Oe,ERR_STREAM_PUSH_AFTER_EOF:Te,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Je}}=g(4370),{validateObject:Ke}=g(2120),Ee=X("kPaused"),{StringDecoder:Fe}=g(2024),Pe=g(55);P(qe.prototype,K.prototype),P(qe,K);const Ge=()=>{},{errorOrDestroy:ge}=k;function Ae(I,ce,$e){"boolean"!=typeof $e&&($e=ce instanceof g(5931)),this.objectMode=!(!I||!I.objectMode),$e&&(this.objectMode=this.objectMode||!(!I||!I.readableObjectMode)),this.highWaterMark=I?he(this,I,"readableHighWaterMark",$e):W(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Ee]=null,this.errorEmitted=!1,this.emitClose=!I||!1!==I.emitClose,this.autoDestroy=!I||!1!==I.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=I&&I.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,I&&I.encoding&&(this.decoder=new Fe(I.encoding),this.encoding=I.encoding)}function qe(I){if(!(this instanceof qe))return new qe(I);const ce=this instanceof g(5931);this._readableState=new Ae(I,this,ce),I&&("function"==typeof I.read&&(this._read=I.read),"function"==typeof I.destroy&&(this._destroy=I.destroy),"function"==typeof I.construct&&(this._construct=I.construct),I.signal&&!ce&&J(I.signal,this)),K.call(this,I),k.construct(this,()=>{this._readableState.needReadable&&tt(this,this._readableState)})}function ct(I,ce,$e,Qe){x("readableAddChunk",ce);const at=I._readableState;let $t;if(at.objectMode||("string"==typeof ce?at.encoding!==($e=$e||at.defaultEncoding)&&(Qe&&at.encoding?ce=ie.from(ce,$e).toString(at.encoding):(ce=ie.from(ce,$e),$e="")):ce instanceof ie?$e="":K._isUint8Array(ce)?(ce=K._uint8ArrayToBuffer(ce),$e=""):null!=ce&&($t=new de("chunk",["string","Buffer","Uint8Array"],ce))),$t)ge(I,$t);else if(null===ce)at.reading=!1,function ae(I,ce){if(x("onEofChunk"),!ce.ended){if(ce.decoder){const $e=ce.decoder.end();$e&&$e.length&&(ce.buffer.push($e),ce.length+=ce.objectMode?1:$e.length)}ce.ended=!0,ce.sync?U(I):(ce.needReadable=!1,ce.emittedReadable=!0,Le(I))}}(I,at);else if(at.objectMode||ce&&ce.length>0)if(Qe)if(at.endEmitted)ge(I,new Je);else{if(at.destroyed||at.errored)return!1;Ye(I,at,ce,!0)}else if(at.ended)ge(I,new Te);else{if(at.destroyed||at.errored)return!1;at.reading=!1,at.decoder&&!$e?(ce=at.decoder.write(ce),at.objectMode||0!==ce.length?Ye(I,at,ce,!1):tt(I,at)):Ye(I,at,ce,!1)}else Qe||(at.reading=!1,tt(I,at));return!at.ended&&(at.length<at.highWaterMark||0===at.length)}function Ye(I,ce,$e,Qe){ce.flowing&&0===ce.length&&!ce.sync&&I.listenerCount("data")>0?(ce.multiAwaitDrain?ce.awaitDrainWriters.clear():ce.awaitDrainWriters=null,ce.dataEmitted=!0,I.emit("data",$e)):(ce.length+=ce.objectMode?1:$e.length,Qe?ce.buffer.unshift($e):ce.buffer.push($e),ce.needReadable&&U(I)),tt(I,ce)}function R(I,ce){return I<=0||0===ce.length&&ce.ended?0:ce.objectMode?1:_(I)?ce.flowing&&ce.length?ce.buffer.first().length:ce.length:I<=ce.length?I:ce.ended?ce.length:0}function U(I){const ce=I._readableState;x("emitReadable",ce.needReadable,ce.emittedReadable),ce.needReadable=!1,ce.emittedReadable||(x("emitReadable",ce.flowing),ce.emittedReadable=!0,O.nextTick(Le,I))}function Le(I){const ce=I._readableState;x("emitReadable_",ce.destroyed,ce.length,ce.ended),!ce.destroyed&&!ce.errored&&(ce.length||ce.ended)&&(I.emit("readable"),ce.emittedReadable=!1),ce.needReadable=!ce.flowing&&!ce.ended&&ce.length<=ce.highWaterMark,me(I)}function tt(I,ce){!ce.readingMore&&ce.constructed&&(ce.readingMore=!0,O.nextTick(fe,I,ce))}function fe(I,ce){for(;!ce.reading&&!ce.ended&&(ce.length<ce.highWaterMark||ce.flowing&&0===ce.length);){const $e=ce.length;if(x("maybeReadMore read 0"),I.read(0),$e===ce.length)break}ce.readingMore=!1}function q(I){const ce=I._readableState;ce.readableListening=I.listenerCount("readable")>0,ce.resumeScheduled&&!1===ce[Ee]?ce.flowing=!0:I.listenerCount("data")>0?I.resume():ce.readableListening||(ce.flowing=null)}function A(I){x("readable nexttick read 0"),I.read(0)}function ue(I,ce){x("resume",ce.reading),ce.reading||I.read(0),ce.resumeScheduled=!1,I.emit("resume"),me(I),ce.flowing&&!ce.reading&&I.read(0)}function me(I){const ce=I._readableState;for(x("flow",ce.flowing);ce.flowing&&null!==I.read(););}function We(I,ce){"function"!=typeof I.read&&(I=qe.wrap(I,{objectMode:!0}));const $e=function He(I,ce){return gt.apply(this,arguments)}(I,ce);return $e.stream=I,$e}function gt(){return(gt=b(function*(I,ce){let at,$e=Ge;function Qe(sn){this===I?($e(),$e=Ge):$e=sn}I.on("readable",Qe);const $t=V(I,{writable:!1},sn=>{at=sn?Me(at,sn):null,$e(),$e=Ge});try{for(;;){const sn=I.destroyed?null:I.read();if(null!==sn)yield sn;else{if(at)throw at;if(null===at)return;yield S(new j(Qe))}}}catch(sn){throw at=Me(at,sn),at}finally{!at&&!1===ce?.destroyOnReturn||void 0!==at&&!I._readableState.autoDestroy?(I.off("readable",Qe),$t()):k.destroyer(I,null)}})).apply(this,arguments)}function Ft(I,ce){if(0===ce.length)return null;let $e;return ce.objectMode?$e=ce.buffer.shift():!I||I>=ce.length?($e=ce.decoder?ce.buffer.join(""):1===ce.buffer.length?ce.buffer.first():ce.buffer.concat(ce.length),ce.buffer.clear()):$e=ce.buffer.consume(I,ce.decoder),$e}function yt(I){const ce=I._readableState;x("endReadable",ce.endEmitted),ce.endEmitted||(ce.ended=!0,O.nextTick(Gt,ce,I))}function Gt(I,ce){if(x("endReadableNT",I.endEmitted,I.length),!I.errored&&!I.closeEmitted&&!I.endEmitted&&0===I.length)if(I.endEmitted=!0,ce.emit("end"),ce.writable&&!1===ce.allowHalfOpen)O.nextTick(rn,ce);else if(I.autoDestroy){const $e=ce._writableState;(!$e||$e.autoDestroy&&($e.finished||!1===$e.writable))&&ce.destroy()}}function rn(I){I.writable&&!I.writableEnded&&!I.destroyed&&I.end()}let Ie;function Q(){return void 0===Ie&&(Ie={}),Ie}qe.prototype.destroy=k.destroy,qe.prototype._undestroy=k.undestroy,qe.prototype._destroy=function(I,ce){ce(I)},qe.prototype[le.captureRejectionSymbol]=function(I){this.destroy(I)},qe.prototype.push=function(I,ce){return ct(this,I,ce,!1)},qe.prototype.unshift=function(I,ce){return ct(this,I,ce,!0)},qe.prototype.isPaused=function(){const I=this._readableState;return!0===I[Ee]||!1===I.flowing},qe.prototype.setEncoding=function(I){const ce=new Fe(I);this._readableState.decoder=ce,this._readableState.encoding=this._readableState.decoder.encoding;const $e=this._readableState.buffer;let Qe="";for(const at of $e)Qe+=ce.write(at);return $e.clear(),""!==Qe&&$e.push(Qe),this._readableState.length=Qe.length,this},qe.prototype.read=function(I){x("read",I),void 0===I?I=NaN:N(I)||(I=v(I,10));const ce=this._readableState,$e=I;if(I>ce.highWaterMark&&(ce.highWaterMark=function G(I){if(I>1073741824)throw new Oe("size","<= 1GiB",I);return I--,I|=I>>>1,I|=I>>>2,I|=I>>>4,I|=I>>>8,I|=I>>>16,++I}(I)),0!==I&&(ce.emittedReadable=!1),0===I&&ce.needReadable&&((0!==ce.highWaterMark?ce.length>=ce.highWaterMark:ce.length>0)||ce.ended))return x("read: emitReadable",ce.length,ce.ended),0===ce.length&&ce.ended?yt(this):U(this),null;if(0===(I=R(I,ce))&&ce.ended)return 0===ce.length&&yt(this),null;let at,Qe=ce.needReadable;if(x("need readable",Qe),(0===ce.length||ce.length-I<ce.highWaterMark)&&(Qe=!0,x("length less than watermark",Qe)),ce.ended||ce.reading||ce.destroyed||ce.errored||!ce.constructed)Qe=!1,x("reading, ended or constructing",Qe);else if(Qe){x("do read"),ce.reading=!0,ce.sync=!0,0===ce.length&&(ce.needReadable=!0);try{this._read(ce.highWaterMark)}catch($t){ge(this,$t)}ce.sync=!1,ce.reading||(I=R($e,ce))}return at=I>0?Ft(I,ce):null,null===at?(ce.needReadable=ce.length<=ce.highWaterMark,I=0):(ce.length-=I,ce.multiAwaitDrain?ce.awaitDrainWriters.clear():ce.awaitDrainWriters=null),0===ce.length&&(ce.ended||(ce.needReadable=!0),$e!==I&&ce.ended&&yt(this)),null!==at&&!ce.errorEmitted&&!ce.closeEmitted&&(ce.dataEmitted=!0,this.emit("data",at)),at},qe.prototype._read=function(I){throw new xe("_read()")},qe.prototype.pipe=function(I,ce){const $e=this,Qe=this._readableState;1===Qe.pipes.length&&(Qe.multiAwaitDrain||(Qe.multiAwaitDrain=!0,Qe.awaitDrainWriters=new se(Qe.awaitDrainWriters?[Qe.awaitDrainWriters]:[]))),Qe.pipes.push(I),x("pipe count=%d opts=%j",Qe.pipes.length,ce);const $t=ce&&!1===ce.end||I===O.stdout||I===O.stderr?Gs:$n;function $n(){x("onend"),I.end()}Qe.endEmitted?O.nextTick($t):$e.once("end",$t),I.on("unpipe",function sn(Oo,_o){x("onunpipe"),Oo===$e&&_o&&!1===_o.hasUnpiped&&(_o.hasUnpiped=!0,function ko(){x("cleanup"),I.removeListener("close",Yr),I.removeListener("finish",vs),Cn&&I.removeListener("drain",Cn),I.removeListener("error",qi),I.removeListener("unpipe",sn),$e.removeListener("end",$n),$e.removeListener("end",Gs),$e.removeListener("data",es),Mn=!0,Cn&&Qe.awaitDrainWriters&&(!I._writableState||I._writableState.needDrain)&&Cn()}())});let Cn,Mn=!1;function ys(){Mn||(1===Qe.pipes.length&&Qe.pipes[0]===I?(x("false write response, pause",0),Qe.awaitDrainWriters=I,Qe.multiAwaitDrain=!1):Qe.pipes.length>1&&Qe.pipes.includes(I)&&(x("false write response, pause",Qe.awaitDrainWriters.size),Qe.awaitDrainWriters.add(I)),$e.pause()),Cn||(Cn=function ee(I,ce){return function(){const Qe=I._readableState;Qe.awaitDrainWriters===ce?(x("pipeOnDrain",1),Qe.awaitDrainWriters=null):Qe.multiAwaitDrain&&(x("pipeOnDrain",Qe.awaitDrainWriters.size),Qe.awaitDrainWriters.delete(ce)),(!Qe.awaitDrainWriters||0===Qe.awaitDrainWriters.size)&&I.listenerCount("data")&&I.resume()}}($e,I),I.on("drain",Cn))}function es(Oo){x("ondata");const _o=I.write(Oo);x("dest.write",_o),!1===_o&&ys()}function qi(Oo){if(x("onerror",Oo),Gs(),I.removeListener("error",qi),0===I.listenerCount("error")){const _o=I._writableState||I._readableState;_o&&!_o.errorEmitted?ge(I,Oo):I.emit("error",Oo)}}function Yr(){I.removeListener("finish",vs),Gs()}function vs(){x("onfinish"),I.removeListener("close",Yr),Gs()}function Gs(){x("unpipe"),$e.unpipe(I)}return $e.on("data",es),re(I,"error",qi),I.once("close",Yr),I.once("finish",vs),I.emit("pipe",$e),!0===I.writableNeedDrain?Qe.flowing&&ys():Qe.flowing||(x("pipe resume"),$e.resume()),I},qe.prototype.unpipe=function(I){const ce=this._readableState;if(0===ce.pipes.length)return this;if(!I){const at=ce.pipes;ce.pipes=[],this.pause();for(let $t=0;$t<at.length;$t++)at[$t].emit("unpipe",this,{hasUnpiped:!1});return this}const Qe=C(ce.pipes,I);return-1===Qe||(ce.pipes.splice(Qe,1),0===ce.pipes.length&&this.pause(),I.emit("unpipe",this,{hasUnpiped:!1})),this},qe.prototype.addListener=qe.prototype.on=function(I,ce){const $e=K.prototype.on.call(this,I,ce),Qe=this._readableState;return"data"===I?(Qe.readableListening=this.listenerCount("readable")>0,!1!==Qe.flowing&&this.resume()):"readable"===I&&!Qe.endEmitted&&!Qe.readableListening&&(Qe.readableListening=Qe.needReadable=!0,Qe.flowing=!1,Qe.emittedReadable=!1,x("on readable",Qe.length,Qe.reading),Qe.length?U(this):Qe.reading||O.nextTick(A,this)),$e},qe.prototype.off=qe.prototype.removeListener=function(I,ce){const $e=K.prototype.removeListener.call(this,I,ce);return"readable"===I&&O.nextTick(q,this),$e},qe.prototype.removeAllListeners=function(I){const ce=K.prototype.removeAllListeners.apply(this,arguments);return("readable"===I||void 0===I)&&O.nextTick(q,this),ce},qe.prototype.resume=function(){const I=this._readableState;return I.flowing||(x("resume"),I.flowing=!I.readableListening,function F(I,ce){ce.resumeScheduled||(ce.resumeScheduled=!0,O.nextTick(ue,I,ce))}(this,I)),I[Ee]=!1,this},qe.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ee]=!0,this},qe.prototype.wrap=function(I){let ce=!1;I.on("data",Qe=>{!this.push(Qe)&&I.pause&&(ce=!0,I.pause())}),I.on("end",()=>{this.push(null)}),I.on("error",Qe=>{ge(this,Qe)}),I.on("close",()=>{this.destroy()}),I.on("destroy",()=>{this.destroy()}),this._read=()=>{ce&&I.resume&&(ce=!1,I.resume())};const $e=L(I);for(let Qe=1;Qe<$e.length;Qe++){const at=$e[Qe];void 0===this[at]&&"function"==typeof I[at]&&(this[at]=I[at].bind(I))}return this},qe.prototype[T]=function(){return We(this)},qe.prototype.iterator=function(I){return void 0!==I&&Ke(I,"options"),We(this,I)},D(qe.prototype,{readable:{__proto__:null,get(){const I=this._readableState;return!(!I||!1===I.readable||I.destroyed||I.errorEmitted||I.endEmitted)},set(I){this._readableState&&(this._readableState.readable=!!I)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(I){this._readableState&&(this._readableState.flowing=I)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(I){this._readableState&&(this._readableState.destroyed=I)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),D(Ae.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Ee]},set(I){this[Ee]=!!I}}}),qe._fromList=Ft,qe.from=function(I,ce){return Pe(qe,I,ce)},qe.fromWeb=function(I,ce){return Q().newStreamReadableFromReadableStream(I,ce)},qe.toWeb=function(I,ce){return Q().newReadableStreamFromStreamReadable(I,ce)},qe.wrap=function(I,ce){var $e,Qe;return new qe({objectMode:null===($e=null!==(Qe=I.readableObjectMode)&&void 0!==Qe?Qe:I.objectMode)||void 0===$e||$e,...ce,destroy(at,$t){k.destroyer(I,at),$t(at)}}).wrap(I)}},8782:(ne,Z,g)=>{"use strict";const{MathFloor:S,NumberIsInteger:b}=g(6305),{ERR_INVALID_ARG_VALUE:O}=g(4370).codes;function N(v){return v?16:16384}ne.exports={getHighWaterMark:function _(v,D,L,P){const j=function C(v,D,L){return null!=v.highWaterMark?v.highWaterMark:D?v[L]:null}(D,P,L);if(null!=j){if(!b(j)||j<0)throw new O(P?`options.${L}`:"options.highWaterMark",j);return S(j)}return N(v.objectMode)},getDefaultHighWaterMark:N}},123:(ne,Z,g)=>{"use strict";const{ObjectSetPrototypeOf:S,Symbol:b}=g(6305);ne.exports=v;const{ERR_METHOD_NOT_IMPLEMENTED:O}=g(4370).codes,C=g(5931),{getHighWaterMark:N}=g(8782);S(v.prototype,C.prototype),S(v,C);const _=b("kCallback");function v(P){if(!(this instanceof v))return new v(P);const j=P?N(this,P,"readableHighWaterMark",!0):null;0===j&&(P={...P,highWaterMark:null,readableHighWaterMark:j,writableHighWaterMark:P.writableHighWaterMark||0}),C.call(this,P),this._readableState.sync=!1,this[_]=null,P&&("function"==typeof P.transform&&(this._transform=P.transform),"function"==typeof P.flush&&(this._flush=P.flush)),this.on("prefinish",L)}function D(P){"function"!=typeof this._flush||this.destroyed?(this.push(null),P&&P()):this._flush((j,se)=>{j?P?P(j):this.destroy(j):(null!=se&&this.push(se),this.push(null),P&&P())})}function L(){this._final!==D&&D.call(this)}v.prototype._final=D,v.prototype._transform=function(P,j,se){throw new O("_transform()")},v.prototype._write=function(P,j,se){const T=this._readableState,X=this._writableState,le=T.length;this._transform(P,j,(K,re)=>{K?se(K):(null!=re&&this.push(re),X.ended||le===T.length||T.length<T.highWaterMark?se():this[_]=se)})},v.prototype._read=function(){if(this[_]){const P=this[_];this[_]=null,P()}}},5428:(ne,Z,g)=>{"use strict";const{Symbol:S,SymbolAsyncIterator:b,SymbolIterator:O,SymbolFor:C}=g(6305),N=S("kDestroyed"),_=S("kIsErrored"),v=S("kIsReadable"),D=S("kIsDisturbed"),L=C("nodejs.webstream.isClosedPromise"),P=C("nodejs.webstream.controllerErrorFunction");function j(ge,Ae=!1){var qe;return!(!ge||"function"!=typeof ge.pipe||"function"!=typeof ge.on||Ae&&("function"!=typeof ge.pause||"function"!=typeof ge.resume)||ge._writableState&&!1===(null===(qe=ge._readableState)||void 0===qe?void 0:qe.readable)||ge._writableState&&!ge._readableState)}function se(ge){var Ae;return!(!ge||"function"!=typeof ge.write||"function"!=typeof ge.on||ge._readableState&&!1===(null===(Ae=ge._writableState)||void 0===Ae?void 0:Ae.writable))}function X(ge){return ge&&(ge._readableState||ge._writableState||"function"==typeof ge.write&&"function"==typeof ge.on||"function"==typeof ge.pipe&&"function"==typeof ge.on)}function le(ge){return!(!ge||X(ge)||"function"!=typeof ge.pipeThrough||"function"!=typeof ge.getReader||"function"!=typeof ge.cancel)}function K(ge){return!(!ge||X(ge)||"function"!=typeof ge.getWriter||"function"!=typeof ge.abort)}function re(ge){return!(!ge||X(ge)||"object"!=typeof ge.readable||"object"!=typeof ge.writable)}function V(ge){if(!X(ge))return null;const ct=ge._writableState||ge._readableState;return!!(ge.destroyed||ge[N]||null!=ct&&ct.destroyed)}function x(ge){if(!se(ge))return null;if(!0===ge.writableEnded)return!0;const Ae=ge._writableState;return(null==Ae||!Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)}function he(ge,Ae){if(!j(ge))return null;const qe=ge._readableState;return(null==qe||!qe.errored)&&("boolean"!=typeof qe?.endEmitted?null:!!(qe.endEmitted||!1===Ae&&!0===qe.ended&&0===qe.length))}function W(ge){return ge&&null!=ge[v]?ge[v]:"boolean"!=typeof ge?.readable?null:!V(ge)&&j(ge)&&ge.readable&&!he(ge)}function Me(ge){return"boolean"!=typeof ge?.writable?null:!V(ge)&&se(ge)&&ge.writable&&!x(ge)}function Je(ge){return"boolean"==typeof ge._closed&&"boolean"==typeof ge._defaultKeepAlive&&"boolean"==typeof ge._removedConnection&&"boolean"==typeof ge._removedContLen}function Ke(ge){return"boolean"==typeof ge._sent100&&Je(ge)}ne.exports={kDestroyed:N,isDisturbed:function Pe(ge){var Ae;return!(!ge||!(null!==(Ae=ge[D])&&void 0!==Ae?Ae:ge.readableDidRead||ge.readableAborted))},kIsDisturbed:D,isErrored:function Ge(ge){var Ae,qe,ct,Ye,ye,G,R,ae,U,Le;return!(!ge||!(null!==(Ae=null!==(qe=null!==(ct=null!==(Ye=null!==(ye=null!==(G=ge[_])&&void 0!==G?G:ge.readableErrored)&&void 0!==ye?ye:ge.writableErrored)&&void 0!==Ye?Ye:null===(R=ge._readableState)||void 0===R?void 0:R.errorEmitted)&&void 0!==ct?ct:null===(ae=ge._writableState)||void 0===ae?void 0:ae.errorEmitted)&&void 0!==qe?qe:null===(U=ge._readableState)||void 0===U?void 0:U.errored)&&void 0!==Ae?Ae:null!==(Le=ge._writableState)&&void 0!==Le&&Le.errored))},kIsErrored:_,isReadable:W,kIsReadable:v,kIsClosedPromise:L,kControllerErrorFunction:P,isClosed:function Te(ge){if(!X(ge))return null;if("boolean"==typeof ge.closed)return ge.closed;const Ae=ge._writableState,qe=ge._readableState;return"boolean"==typeof Ae?.closed||"boolean"==typeof qe?.closed?Ae?.closed||qe?.closed:"boolean"==typeof ge._closed&&Je(ge)?ge._closed:null},isDestroyed:V,isDuplexNodeStream:function T(ge){return!(!ge||"function"!=typeof ge.pipe||!ge._readableState||"function"!=typeof ge.on||"function"!=typeof ge.write)},isFinished:function de(ge,Ae){return X(ge)?!!V(ge)||!(!1!==Ae?.readable&&W(ge)||!1!==Ae?.writable&&Me(ge)):null},isIterable:function J(ge,Ae){return null!=ge&&(!0===Ae?"function"==typeof ge[b]:!1===Ae?"function"==typeof ge[O]:"function"==typeof ge[b]||"function"==typeof ge[O])},isReadableNodeStream:j,isReadableStream:le,isReadableEnded:function k(ge){if(!j(ge))return null;if(!0===ge.readableEnded)return!0;const Ae=ge._readableState;return!(!Ae||Ae.errored)&&("boolean"!=typeof Ae?.ended?null:Ae.ended)},isReadableFinished:he,isReadableErrored:function Oe(ge){var Ae,qe;return X(ge)?ge.readableErrored?ge.readableErrored:null!==(Ae=null===(qe=ge._readableState)||void 0===qe?void 0:qe.errored)&&void 0!==Ae?Ae:null:null},isNodeStream:X,isWebStream:function ie(ge){return le(ge)||K(ge)||re(ge)},isWritable:Me,isWritableNodeStream:se,isWritableStream:K,isWritableEnded:x,isWritableFinished:function B(ge,Ae){if(!se(ge))return null;if(!0===ge.writableFinished)return!0;const qe=ge._writableState;return(null==qe||!qe.errored)&&("boolean"!=typeof qe?.finished?null:!!(qe.finished||!1===Ae&&!0===qe.ended&&0===qe.length))},isWritableErrored:function xe(ge){var Ae,qe;return X(ge)?ge.writableErrored?ge.writableErrored:null!==(Ae=null===(qe=ge._writableState)||void 0===qe?void 0:qe.errored)&&void 0!==Ae?Ae:null:null},isServerRequest:function Ee(ge){var Ae;return"boolean"==typeof ge._consuming&&"boolean"==typeof ge._dumped&&void 0===(null===(Ae=ge.req)||void 0===Ae?void 0:Ae.upgradeOrConnect)},isServerResponse:Ke,willEmitClose:function Fe(ge){if(!X(ge))return null;const ct=ge._writableState||ge._readableState;return!ct&&Ke(ge)||!!(ct&&ct.autoDestroy&&ct.emitClose&&!1===ct.closed)},isTransformStream:re}},9764:(ne,Z,g)=>{const S=g(42),{ArrayPrototypeSlice:b,Error:O,FunctionPrototypeSymbolHasInstance:C,ObjectDefineProperty:N,ObjectDefineProperties:_,ObjectSetPrototypeOf:v,StringPrototypeToLowerCase:D,Symbol:L,SymbolHasInstance:P}=g(6305);ne.exports=Ke,Ke.WritableState=Te;const{EventEmitter:j}=g(2016),se=g(900).Stream,{Buffer:T}=g(1657),X=g(5601),{addAbortSignal:le}=g(9987),{getHighWaterMark:K,getDefaultHighWaterMark:re}=g(8782),{ERR_INVALID_ARG_TYPE:ie,ERR_METHOD_NOT_IMPLEMENTED:J,ERR_MULTIPLE_CALLBACK:V,ERR_STREAM_CANNOT_PIPE:x,ERR_STREAM_DESTROYED:B,ERR_STREAM_ALREADY_FINISHED:k,ERR_STREAM_NULL_VALUES:he,ERR_STREAM_WRITE_AFTER_END:W,ERR_UNKNOWN_ENCODING:Me}=g(4370).codes,{errorOrDestroy:de}=X;function xe(){}v(Ke.prototype,se.prototype),v(Ke,se);const Oe=L("kOnFinished");function Te(ee,q,A){"boolean"!=typeof A&&(A=q instanceof g(5931)),this.objectMode=!(!ee||!ee.objectMode),A&&(this.objectMode=this.objectMode||!(!ee||!ee.writableObjectMode)),this.highWaterMark=ee?K(this,ee,"writableHighWaterMark",A):re(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(ee&&!1===ee.decodeStrings),this.defaultEncoding=ee&&ee.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=ge.bind(void 0,q),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Je(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!ee||!1!==ee.emitClose,this.autoDestroy=!ee||!1!==ee.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Oe]=[]}function Je(ee){ee.buffered=[],ee.bufferedIndex=0,ee.allBuffers=!0,ee.allNoop=!0}function Ke(ee){const q=this instanceof g(5931);if(!q&&!C(Ke,this))return new Ke(ee);this._writableState=new Te(ee,this,q),ee&&("function"==typeof ee.write&&(this._write=ee.write),"function"==typeof ee.writev&&(this._writev=ee.writev),"function"==typeof ee.destroy&&(this._destroy=ee.destroy),"function"==typeof ee.final&&(this._final=ee.final),"function"==typeof ee.construct&&(this._construct=ee.construct),ee.signal&&le(ee.signal,this)),se.call(this,ee),X.construct(this,()=>{const A=this._writableState;A.writing||Ye(this,A),ae(this,A)})}function Ee(ee,q,A,F){const ue=ee._writableState;if("function"==typeof A)F=A,A=ue.defaultEncoding;else{if(A){if("buffer"!==A&&!T.isEncoding(A))throw new Me(A)}else A=ue.defaultEncoding;"function"!=typeof F&&(F=xe)}if(null===q)throw new he;if(!ue.objectMode)if("string"==typeof q)!1!==ue.decodeStrings&&(q=T.from(q,A),A="buffer");else if(q instanceof T)A="buffer";else{if(!se._isUint8Array(q))throw new ie("chunk",["string","Buffer","Uint8Array"],q);q=se._uint8ArrayToBuffer(q),A="buffer"}let me;return ue.ending?me=new W:ue.destroyed&&(me=new B("write")),me?(S.nextTick(F,me),de(ee,me,!0),me):(ue.pendingcb++,function Fe(ee,q,A,F,ue){const me=q.objectMode?1:A.length;q.length+=me;const We=q.length<q.highWaterMark;return We||(q.needDrain=!0),q.writing||q.corked||q.errored||!q.constructed?(q.buffered.push({chunk:A,encoding:F,callback:ue}),q.allBuffers&&"buffer"!==F&&(q.allBuffers=!1),q.allNoop&&ue!==xe&&(q.allNoop=!1)):(q.writelen=me,q.writecb=ue,q.writing=!0,q.sync=!0,ee._write(A,F,q.onwrite),q.sync=!1),We&&!q.errored&&!q.destroyed}(ee,ue,q,A,F))}function Pe(ee,q,A,F,ue,me,We){q.writelen=F,q.writecb=We,q.writing=!0,q.sync=!0,q.destroyed?q.onwrite(new B("write")):A?ee._writev(ue,q.onwrite):ee._write(ue,me,q.onwrite),q.sync=!1}function Ge(ee,q,A,F){--q.pendingcb,F(A),ct(q),de(ee,A)}function ge(ee,q){const A=ee._writableState,F=A.sync,ue=A.writecb;"function"==typeof ue?(A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0,q?(A.errored||(A.errored=q),ee._readableState&&!ee._readableState.errored&&(ee._readableState.errored=q),F?S.nextTick(Ge,ee,A,q,ue):Ge(ee,A,q,ue)):(A.buffered.length>A.bufferedIndex&&Ye(ee,A),F?null!==A.afterWriteTickInfo&&A.afterWriteTickInfo.cb===ue?A.afterWriteTickInfo.count++:(A.afterWriteTickInfo={count:1,cb:ue,stream:ee,state:A},S.nextTick(Ae,A.afterWriteTickInfo)):qe(ee,A,1,ue))):de(ee,new V)}function Ae({stream:ee,state:q,count:A,cb:F}){return q.afterWriteTickInfo=null,qe(ee,q,A,F)}function qe(ee,q,A,F){for(!q.ending&&!ee.destroyed&&0===q.length&&q.needDrain&&(q.needDrain=!1,ee.emit("drain"));A-- >0;)q.pendingcb--,F();q.destroyed&&ct(q),ae(ee,q)}function ct(ee){if(ee.writing)return;for(let ue=ee.bufferedIndex;ue<ee.buffered.length;++ue){var q;const{chunk:me,callback:We}=ee.buffered[ue];ee.length-=ee.objectMode?1:me.length,We(null!==(q=ee.errored)&&void 0!==q?q:new B("write"))}const A=ee[Oe].splice(0);for(let ue=0;ue<A.length;ue++){var F;A[ue](null!==(F=ee.errored)&&void 0!==F?F:new B("end"))}Je(ee)}function Ye(ee,q){if(q.corked||q.bufferProcessing||q.destroyed||!q.constructed)return;const{buffered:A,bufferedIndex:F,objectMode:ue}=q,me=A.length-F;if(!me)return;let We=F;if(q.bufferProcessing=!0,me>1&&ee._writev){q.pendingcb-=me-1;const He=q.allNoop?xe:Ft=>{for(let yt=We;yt<A.length;++yt)A[yt].callback(Ft)},gt=q.allNoop&&0===We?A:b(A,We);gt.allBuffers=q.allBuffers,Pe(ee,q,!0,q.length,gt,"",He),Je(q)}else{do{const{chunk:He,encoding:gt,callback:Ft}=A[We];A[We++]=null,Pe(ee,q,!1,ue?1:He.length,He,gt,Ft)}while(We<A.length&&!q.writing);We===A.length?Je(q):We>256?(A.splice(0,We),q.bufferedIndex=0):q.bufferedIndex=We}q.bufferProcessing=!1}function ye(ee){return ee.ending&&!ee.destroyed&&ee.constructed&&0===ee.length&&!ee.errored&&0===ee.buffered.length&&!ee.finished&&!ee.writing&&!ee.errorEmitted&&!ee.closeEmitted}function ae(ee,q,A){ye(q)&&(function R(ee,q){!q.prefinished&&!q.finalCalled&&("function"!=typeof ee._final||q.destroyed?(q.prefinished=!0,ee.emit("prefinish")):(q.finalCalled=!0,function G(ee,q){let A=!1;function F(ue){if(A)de(ee,ue??V());else if(A=!0,q.pendingcb--,ue){const me=q[Oe].splice(0);for(let We=0;We<me.length;We++)me[We](ue);de(ee,ue,q.sync)}else ye(q)&&(q.prefinished=!0,ee.emit("prefinish"),q.pendingcb++,S.nextTick(U,ee,q))}q.sync=!0,q.pendingcb++;try{ee._final(F)}catch(ue){F(ue)}q.sync=!1}(ee,q)))}(ee,q),0===q.pendingcb&&(A?(q.pendingcb++,S.nextTick((F,ue)=>{ye(ue)?U(F,ue):ue.pendingcb--},ee,q)):ye(q)&&(q.pendingcb++,U(ee,q))))}function U(ee,q){q.pendingcb--,q.finished=!0;const A=q[Oe].splice(0);for(let F=0;F<A.length;F++)A[F]();if(ee.emit("finish"),q.autoDestroy){const F=ee._readableState;(!F||F.autoDestroy&&(F.endEmitted||!1===F.readable))&&ee.destroy()}}Te.prototype.getBuffer=function(){return b(this.buffered,this.bufferedIndex)},N(Te.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),N(Ke,P,{__proto__:null,value:function(ee){return!!C(this,ee)||this===Ke&&ee&&ee._writableState instanceof Te}}),Ke.prototype.pipe=function(){de(this,new x)},Ke.prototype.write=function(ee,q,A){return!0===Ee(this,ee,q,A)},Ke.prototype.cork=function(){this._writableState.corked++},Ke.prototype.uncork=function(){const ee=this._writableState;ee.corked&&(ee.corked--,ee.writing||Ye(this,ee))},Ke.prototype.setDefaultEncoding=function(q){if("string"==typeof q&&(q=D(q)),!T.isEncoding(q))throw new Me(q);return this._writableState.defaultEncoding=q,this},Ke.prototype._write=function(ee,q,A){if(!this._writev)throw new J("_write()");this._writev([{chunk:ee,encoding:q}],A)},Ke.prototype._writev=null,Ke.prototype.end=function(ee,q,A){const F=this._writableState;let ue;if("function"==typeof ee?(A=ee,ee=null,q=null):"function"==typeof q&&(A=q,q=null),null!=ee){const me=Ee(this,ee,q);me instanceof O&&(ue=me)}return F.corked&&(F.corked=1,this.uncork()),ue||(F.errored||F.ending?F.finished?ue=new k("end"):F.destroyed&&(ue=new B("end")):(F.ending=!0,ae(this,F,!0),F.ended=!0)),"function"==typeof A&&(ue||F.finished?S.nextTick(A,ue):F[Oe].push(A)),this},_(Ke.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(ee){this._writableState&&(this._writableState.destroyed=ee)}},writable:{__proto__:null,get(){const ee=this._writableState;return!(!ee||!1===ee.writable||ee.destroyed||ee.errored||ee.ending||ee.ended)},set(ee){this._writableState&&(this._writableState.writable=!!ee)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const ee=this._writableState;return!!ee&&!ee.destroyed&&!ee.ending&&ee.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Le=X.destroy;let tt;function fe(){return void 0===tt&&(tt={}),tt}Ke.prototype.destroy=function(ee,q){const A=this._writableState;return!A.destroyed&&(A.bufferedIndex<A.buffered.length||A[Oe].length)&&S.nextTick(ct,A),Le.call(this,ee,q),this},Ke.prototype._undestroy=X.undestroy,Ke.prototype._destroy=function(ee,q){q(ee)},Ke.prototype[j.captureRejectionSymbol]=function(ee){this.destroy(ee)},Ke.fromWeb=function(ee,q){return fe().newStreamWritableFromWritableStream(ee,q)},Ke.toWeb=function(ee){return fe().newWritableStreamFromStreamWritable(ee)}},2120:(ne,Z,g)=>{"use strict";const{ArrayIsArray:S,ArrayPrototypeIncludes:b,ArrayPrototypeJoin:O,ArrayPrototypeMap:C,NumberIsInteger:N,NumberIsNaN:_,NumberMAX_SAFE_INTEGER:v,NumberMIN_SAFE_INTEGER:D,NumberParseInt:L,ObjectPrototypeHasOwnProperty:P,RegExpPrototypeExec:j,String:se,StringPrototypeToUpperCase:T,StringPrototypeTrim:X}=g(6305),{hideStackFrames:le,codes:{ERR_SOCKET_BAD_PORT:K,ERR_INVALID_ARG_TYPE:re,ERR_INVALID_ARG_VALUE:ie,ERR_OUT_OF_RANGE:J,ERR_UNKNOWN_SIGNAL:V}}=g(4370),{normalizeEncoding:x}=g(2656),{isAsyncFunction:B,isArrayBufferView:k}=g(2656).types,he={},de=/^[0-7]+$/,Te=le((me,We,He=D,gt=v)=>{if("number"!=typeof me)throw new re(We,"number",me);if(!N(me))throw new J(We,"an integer",me);if(me<He||me>gt)throw new J(We,`>= ${He} && <= ${gt}`,me)}),Je=le((me,We,He=-2147483648,gt=2147483647)=>{if("number"!=typeof me)throw new re(We,"number",me);if(!N(me))throw new J(We,"an integer",me);if(me<He||me>gt)throw new J(We,`>= ${He} && <= ${gt}`,me)}),Ke=le((me,We,He=!1)=>{if("number"!=typeof me)throw new re(We,"number",me);if(!N(me))throw new J(We,"an integer",me);const gt=He?1:0,Ft=4294967295;if(me<gt||me>Ft)throw new J(We,`>= ${gt} && <= ${Ft}`,me)});function Ee(me,We){if("string"!=typeof me)throw new re(We,"string",me)}const Pe=le((me,We,He)=>{if(!b(He,me)){const Ft="must be one of: "+O(C(He,yt=>"string"==typeof yt?`'${yt}'`:se(yt)),", ");throw new ie(We,me,Ft)}});function Ge(me,We){if("boolean"!=typeof me)throw new re(We,"boolean",me)}function ge(me,We,He){return null!=me&&P(me,We)?me[We]:He}const Ae=le((me,We,He=null)=>{const gt=ge(He,"allowArray",!1),Ft=ge(He,"allowFunction",!1);if(!ge(He,"nullable",!1)&&null===me||!gt&&S(me)||"object"!=typeof me&&(!Ft||"function"!=typeof me))throw new re(We,"Object",me)}),qe=le((me,We)=>{if(null!=me&&"object"!=typeof me&&"function"!=typeof me)throw new re(We,"a dictionary",me)}),ct=le((me,We,He=0)=>{if(!S(me))throw new re(We,"Array",me);if(me.length<He)throw new ie(We,me,`must be longer than ${He}`)}),R=le((me,We="buffer")=>{if(!k(me))throw new re(We,["Buffer","TypedArray","DataView"],me)}),Le=le((me,We)=>{if(void 0!==me&&(null===me||"object"!=typeof me||!("aborted"in me)))throw new re(We,"AbortSignal",me)}),tt=le((me,We)=>{if("function"!=typeof me)throw new re(We,"Function",me)}),fe=le((me,We)=>{if("function"!=typeof me||B(me))throw new re(We,"Function",me)}),ee=le((me,We)=>{if(void 0!==me)throw new re(We,"undefined",me)}),A=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function F(me,We){if(typeof me>"u"||!j(A,me))throw new ie(We,me,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}ne.exports={isInt32:function W(me){return me===(0|me)},isUint32:function Me(me){return me===me>>>0},parseFileMode:function Oe(me,We,He){if(typeof me>"u"&&(me=He),"string"==typeof me){if(null===j(de,me))throw new ie(We,me,"must be a 32-bit unsigned integer or an octal string");me=L(me,8)}return Ke(me,We),me},validateArray:ct,validateStringArray:function Ye(me,We){ct(me,We);for(let He=0;He<me.length;He++)Ee(me[He],`${We}[${He}]`)},validateBooleanArray:function ye(me,We){ct(me,We);for(let He=0;He<me.length;He++)Ge(me[He],`${We}[${He}]`)},validateBoolean:Ge,validateBuffer:R,validateDictionary:qe,validateEncoding:function ae(me,We){const He=x(We),gt=me.length;if("hex"===He&&gt%2!=0)throw new ie("encoding",We,`is invalid for data of length ${gt}`)},validateFunction:tt,validateInt32:Je,validateInteger:Te,validateNumber:function Fe(me,We,He=void 0,gt){if("number"!=typeof me)throw new re(We,"number",me);if(null!=He&&me<He||null!=gt&&me>gt||(null!=He||null!=gt)&&_(me))throw new J(We,`${null!=He?`>= ${He}`:""}${null!=He&&null!=gt?" && ":""}${null!=gt?`<= ${gt}`:""}`,me)},validateObject:Ae,validateOneOf:Pe,validatePlainFunction:fe,validatePort:function U(me,We="Port",He=!0){if("number"!=typeof me&&"string"!=typeof me||"string"==typeof me&&0===X(me).length||+me!=+me>>>0||me>65535||0===me&&!He)throw new K(We,me,He);return 0|me},validateSignalName:function G(me,We="signal"){if(Ee(me,We),void 0===he[me])throw void 0!==he[T(me)]?new V(me+" (signals must use all capital letters)"):new V(me)},validateString:Ee,validateUint32:Ke,validateUndefined:ee,validateUnion:function q(me,We,He){if(!b(He,me))throw new re(We,`('${O(He,"|")}')`,me)},validateAbortSignal:Le,validateLinkHeaderValue:function ue(me){if("string"==typeof me)return F(me,"hints"),me;if(S(me)){const We=me.length;let He="";if(0===We)return He;for(let gt=0;gt<We;gt++){const Ft=me[gt];F(Ft,"hints"),He+=Ft,gt!==We-1&&(He+=", ")}return He}throw new ie("hints",me,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},8905:(ne,Z,g)=>{"use strict";const S=g(8110),b=g(16),O=S.Readable.destroy;ne.exports=S.Readable,ne.exports._uint8ArrayToBuffer=S._uint8ArrayToBuffer,ne.exports._isUint8Array=S._isUint8Array,ne.exports.isDisturbed=S.isDisturbed,ne.exports.isErrored=S.isErrored,ne.exports.isReadable=S.isReadable,ne.exports.Readable=S.Readable,ne.exports.Writable=S.Writable,ne.exports.Duplex=S.Duplex,ne.exports.Transform=S.Transform,ne.exports.PassThrough=S.PassThrough,ne.exports.addAbortSignal=S.addAbortSignal,ne.exports.finished=S.finished,ne.exports.destroy=S.destroy,ne.exports.destroy=O,ne.exports.pipeline=S.pipeline,ne.exports.compose=S.compose,Object.defineProperty(S,"promises",{configurable:!0,enumerable:!0,get:()=>b}),ne.exports.Stream=S.Stream,ne.exports.default=ne.exports},4370:(ne,Z,g)=>{"use strict";const{format:S,inspect:b,AggregateError:O}=g(2656),C=globalThis.AggregateError||O,N=Symbol("kIsNodeError"),_=["string","function","number","object","Function","Object","boolean","bigint","symbol"],v=/^([A-Z][a-z0-9]*)+$/,L={};function P(re,ie){if(!re)throw new L.ERR_INTERNAL_ASSERTION(ie)}function j(re){let ie="",J=re.length;const V="-"===re[0]?1:0;for(;J>=V+4;J-=3)ie=`_${re.slice(J-3,J)}${ie}`;return`${re.slice(0,J)}${ie}`}function T(re,ie,J){J||(J=Error);class V extends J{constructor(...B){super(function se(re,ie,J){if("function"==typeof ie)return P(ie.length<=J.length,`Code: ${re}; The provided arguments length (${J.length}) does not match the required ones (${ie.length}).`),ie(...J);const V=(ie.match(/%[dfijoOs]/g)||[]).length;return P(V===J.length,`Code: ${re}; The provided arguments length (${J.length}) does not match the required ones (${V}).`),0===J.length?ie:S(ie,...J)}(re,ie,B))}toString(){return`${this.name} [${re}]: ${this.message}`}}Object.defineProperties(V.prototype,{name:{value:J.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${re}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),V.prototype.code=re,V.prototype[N]=!0,L[re]=V}function X(re){return Object.defineProperty(re,"name",{value:"__node_internal_"+re.name}),re}class K extends Error{constructor(ie="The operation was aborted",J=void 0){if(void 0!==J&&"object"!=typeof J)throw new L.ERR_INVALID_ARG_TYPE("options","Object",J);super(ie,J),this.code="ABORT_ERR",this.name="AbortError"}}T("ERR_ASSERTION","%s",Error),T("ERR_INVALID_ARG_TYPE",(re,ie,J)=>{P("string"==typeof re,"'name' must be a string"),Array.isArray(ie)||(ie=[ie]);let V="The ";re.endsWith(" argument")?V+=`${re} `:V+=`"${re}" ${re.includes(".")?"property":"argument"} `,V+="must be ";const x=[],B=[],k=[];for(const W of ie)P("string"==typeof W,"All expected entries have to be of type string"),_.includes(W)?x.push(W.toLowerCase()):v.test(W)?B.push(W):(P("object"!==W,'The value "object" should be written as "Object"'),k.push(W));if(B.length>0){const W=x.indexOf("object");-1!==W&&(x.splice(x,W,1),B.push("Object"))}if(x.length>0){switch(x.length){case 1:V+=`of type ${x[0]}`;break;case 2:V+=`one of type ${x[0]} or ${x[1]}`;break;default:{const W=x.pop();V+=`one of type ${x.join(", ")}, or ${W}`}}(B.length>0||k.length>0)&&(V+=" or ")}if(B.length>0){switch(B.length){case 1:V+=`an instance of ${B[0]}`;break;case 2:V+=`an instance of ${B[0]} or ${B[1]}`;break;default:{const W=B.pop();V+=`an instance of ${B.join(", ")}, or ${W}`}}k.length>0&&(V+=" or ")}switch(k.length){case 0:break;case 1:k[0].toLowerCase()!==k[0]&&(V+="an "),V+=`${k[0]}`;break;case 2:V+=`one of ${k[0]} or ${k[1]}`;break;default:{const W=k.pop();V+=`one of ${k.join(", ")}, or ${W}`}}if(null==J)V+=`. Received ${J}`;else if("function"==typeof J&&J.name)V+=`. Received function ${J.name}`;else if("object"==typeof J){var he;null!==(he=J.constructor)&&void 0!==he&&he.name?V+=`. Received an instance of ${J.constructor.name}`:V+=`. Received ${b(J,{depth:-1})}`}else{let W=b(J,{colors:!1});W.length>25&&(W=`${W.slice(0,25)}...`),V+=`. Received type ${typeof J} (${W})`}return V},TypeError),T("ERR_INVALID_ARG_VALUE",(re,ie,J="is invalid")=>{let V=b(ie);return V.length>128&&(V=V.slice(0,128)+"..."),`The ${re.includes(".")?"property":"argument"} '${re}' ${J}. Received ${V}`},TypeError),T("ERR_INVALID_RETURN_VALUE",(re,ie,J)=>{var V;return`Expected ${re} to be returned from the "${ie}" function but got ${null!=J&&null!==(V=J.constructor)&&void 0!==V&&V.name?`instance of ${J.constructor.name}`:"type "+typeof J}.`},TypeError),T("ERR_MISSING_ARGS",(...re)=>{let ie;P(re.length>0,"At least one arg needs to be specified");const J=re.length;switch(re=(Array.isArray(re)?re:[re]).map(V=>`"${V}"`).join(" or "),J){case 1:ie+=`The ${re[0]} argument`;break;case 2:ie+=`The ${re[0]} and ${re[1]} arguments`;break;default:{const V=re.pop();ie+=`The ${re.join(", ")}, and ${V} arguments`}}return`${ie} must be specified`},TypeError),T("ERR_OUT_OF_RANGE",(re,ie,J)=>{let V;return P(ie,'Missing "range" argument'),Number.isInteger(J)&&Math.abs(J)>2**32?V=j(String(J)):"bigint"==typeof J?(V=String(J),(J>2n**32n||J<-(2n**32n))&&(V=j(V)),V+="n"):V=b(J),`The value of "${re}" is out of range. It must be ${ie}. Received ${V}`},RangeError),T("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),T("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),T("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),T("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),T("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),T("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),T("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),T("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),T("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),T("ERR_STREAM_WRITE_AFTER_END","write after end",Error),T("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),ne.exports={AbortError:K,aggregateTwoErrors:X(function le(re,ie){if(re&&ie&&re!==ie){if(Array.isArray(ie.errors))return ie.errors.push(re),ie;const J=new C([ie,re],ie.message);return J.code=ie.code,J}return re||ie}),hideStackFrames:X,codes:L}},6305:ne=>{"use strict";ne.exports={ArrayIsArray:Z=>Array.isArray(Z),ArrayPrototypeIncludes:(Z,g)=>Z.includes(g),ArrayPrototypeIndexOf:(Z,g)=>Z.indexOf(g),ArrayPrototypeJoin:(Z,g)=>Z.join(g),ArrayPrototypeMap:(Z,g)=>Z.map(g),ArrayPrototypePop:(Z,g)=>Z.pop(g),ArrayPrototypePush:(Z,g)=>Z.push(g),ArrayPrototypeSlice:(Z,g,S)=>Z.slice(g,S),Error,FunctionPrototypeCall:(Z,g,...S)=>Z.call(g,...S),FunctionPrototypeSymbolHasInstance:(Z,g)=>Function.prototype[Symbol.hasInstance].call(Z,g),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(Z,g)=>Object.defineProperties(Z,g),ObjectDefineProperty:(Z,g,S)=>Object.defineProperty(Z,g,S),ObjectGetOwnPropertyDescriptor:(Z,g)=>Object.getOwnPropertyDescriptor(Z,g),ObjectKeys:Z=>Object.keys(Z),ObjectSetPrototypeOf:(Z,g)=>Object.setPrototypeOf(Z,g),Promise,PromisePrototypeCatch:(Z,g)=>Z.catch(g),PromisePrototypeThen:(Z,g,S)=>Z.then(g,S),PromiseReject:Z=>Promise.reject(Z),ReflectApply:Reflect.apply,RegExpPrototypeTest:(Z,g)=>Z.test(g),SafeSet:Set,String,StringPrototypeSlice:(Z,g,S)=>Z.slice(g,S),StringPrototypeToLowerCase:Z=>Z.toLowerCase(),StringPrototypeToUpperCase:Z=>Z.toUpperCase(),StringPrototypeTrim:Z=>Z.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(Z,g,S)=>Z.set(g,S),Uint8Array}},2656:(ne,Z,g)=>{"use strict";var S=g(7156).default;const b=g(1657),O=Object.getPrototypeOf(S(function*(){})).constructor,C=globalThis.Blob||b.Blob,N=typeof C<"u"?function(D){return D instanceof C}:function(D){return!1};class _ extends Error{constructor(D){if(!Array.isArray(D))throw new TypeError("Expected input to be an Array, got "+typeof D);let L="";for(let P=0;P<D.length;P++)L+=`    ${D[P].stack}\n`;super(L),this.name="AggregateError",this.errors=D}}ne.exports={AggregateError:_,kEmptyObject:Object.freeze({}),once(v){let D=!1;return function(...L){D||(D=!0,v.apply(this,L))}},createDeferredPromise:function(){let v,D;return{promise:new Promise((P,j)=>{v=P,D=j}),resolve:v,reject:D}},promisify:v=>new Promise((D,L)=>{v((P,...j)=>P?L(P):D(...j))}),debuglog:()=>function(){},format:(v,...D)=>v.replace(/%([sdifj])/g,function(...[L,P]){const j=D.shift();return"f"===P?j.toFixed(6):"j"===P?JSON.stringify(j):"s"===P&&"object"==typeof j?`${j.constructor!==Object?j.constructor.name:""} {}`.trim():j.toString()}),inspect(v){switch(typeof v){case"string":if(v.includes("'")){if(!v.includes('"'))return`"${v}"`;if(!v.includes("`")&&!v.includes("${"))return`\`${v}\``}return`'${v}'`;case"number":return isNaN(v)?"NaN":Object.is(v,-0)?String(v):v;case"bigint":return`${String(v)}n`;case"boolean":case"undefined":return String(v);case"object":return"{}"}},types:{isAsyncFunction:v=>v instanceof O,isArrayBufferView:v=>ArrayBuffer.isView(v)},isBlob:N},ne.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},8110:(ne,Z,g)=>{const{Buffer:S}=g(1657),{ObjectDefineProperty:b,ObjectKeys:O,ReflectApply:C}=g(6305),{promisify:{custom:N}}=g(2656),{streamReturningOperators:_,promiseReturningOperators:v}=g(7624),{codes:{ERR_ILLEGAL_CONSTRUCTOR:D}}=g(4370),L=g(7721),{pipeline:P}=g(4514),{destroyer:j}=g(5601),se=g(4618),X=g(16),le=g(5428),K=ne.exports=g(900).Stream;K.isDisturbed=le.isDisturbed,K.isErrored=le.isErrored,K.isReadable=le.isReadable,K.Readable=g(8383);for(const J of O(_)){let x=function(...B){if(new.target)throw D();return K.Readable.from(C(V,this,B))};const V=_[J];b(x,"name",{__proto__:null,value:V.name}),b(x,"length",{__proto__:null,value:V.length}),b(K.Readable.prototype,J,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}for(const J of O(v)){let x=function(...k){if(new.target)throw D();return C(V,this,k)};const V=v[J];b(x,"name",{__proto__:null,value:V.name}),b(x,"length",{__proto__:null,value:V.length}),b(K.Readable.prototype,J,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}K.Writable=g(9764),K.Duplex=g(5931),K.Transform=g(123),K.PassThrough=g(6973),K.pipeline=P;const{addAbortSignal:re}=g(9987);K.addAbortSignal=re,K.finished=se,K.destroy=j,K.compose=L,b(K,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>X}),b(P,N,{__proto__:null,enumerable:!0,get:()=>X.pipeline}),b(se,N,{__proto__:null,enumerable:!0,get:()=>X.finished}),K.Stream=K,K._isUint8Array=function(V){return V instanceof Uint8Array},K._uint8ArrayToBuffer=function(V){return S.from(V.buffer,V.byteOffset,V.byteLength)}},16:(ne,Z,g)=>{"use strict";const{ArrayPrototypePop:S,Promise:b}=g(6305),{isIterable:O,isNodeStream:C,isWebStream:N}=g(5428),{pipelineImpl:_}=g(4514),{finished:v}=g(4618);g(8110),ne.exports={finished:v,pipeline:function D(...L){return new b((P,j)=>{let se,T;const X=L[L.length-1];if(X&&"object"==typeof X&&!C(X)&&!O(X)&&!N(X)){const le=S(L);se=le.signal,T=le.end}_(L,(le,K)=>{le?j(le):P(K)},{signal:se,end:T})})}}},1657:(ne,Z,g)=>{"use strict";const S=g(9919),b=g(2601),O="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Z.Buffer=v,Z.SlowBuffer=function ie(Ie){return+Ie!=Ie&&(Ie=0),v.alloc(+Ie)},Z.INSPECT_MAX_BYTES=50;const C=2147483647;function _(Ie){if(Ie>C)throw new RangeError('The value "'+Ie+'" is invalid for option "size"');const Q=new Uint8Array(Ie);return Object.setPrototypeOf(Q,v.prototype),Q}function v(Ie,Q,I){if("number"==typeof Ie){if("string"==typeof Q)throw new TypeError('The "string" argument must be of type string. Received type number');return j(Ie)}return D(Ie,Q,I)}function D(Ie,Q,I){if("string"==typeof Ie)return function se(Ie,Q){if(("string"!=typeof Q||""===Q)&&(Q="utf8"),!v.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const I=0|J(Ie,Q);let ce=_(I);const $e=ce.write(Ie,Q);return $e!==I&&(ce=ce.slice(0,$e)),ce}(Ie,Q);if(ArrayBuffer.isView(Ie))return function X(Ie){if(gt(Ie,Uint8Array)){const Q=new Uint8Array(Ie);return le(Q.buffer,Q.byteOffset,Q.byteLength)}return T(Ie)}(Ie);if(null==Ie)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie);if(gt(Ie,ArrayBuffer)||Ie&&gt(Ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(gt(Ie,SharedArrayBuffer)||Ie&&gt(Ie.buffer,SharedArrayBuffer)))return le(Ie,Q,I);if("number"==typeof Ie)throw new TypeError('The "value" argument must not be of type number. Received type number');const ce=Ie.valueOf&&Ie.valueOf();if(null!=ce&&ce!==Ie)return v.from(ce,Q,I);const $e=function K(Ie){if(v.isBuffer(Ie)){const Q=0|re(Ie.length),I=_(Q);return 0===I.length||Ie.copy(I,0,0,Q),I}return void 0!==Ie.length?"number"!=typeof Ie.length||Ft(Ie.length)?_(0):T(Ie):"Buffer"===Ie.type&&Array.isArray(Ie.data)?T(Ie.data):void 0}(Ie);if($e)return $e;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Ie[Symbol.toPrimitive])return v.from(Ie[Symbol.toPrimitive]("string"),Q,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie)}function L(Ie){if("number"!=typeof Ie)throw new TypeError('"size" argument must be of type number');if(Ie<0)throw new RangeError('The value "'+Ie+'" is invalid for option "size"')}function j(Ie){return L(Ie),_(Ie<0?0:0|re(Ie))}function T(Ie){const Q=Ie.length<0?0:0|re(Ie.length),I=_(Q);for(let ce=0;ce<Q;ce+=1)I[ce]=255&Ie[ce];return I}function le(Ie,Q,I){if(Q<0||Ie.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(Ie.byteLength<Q+(I||0))throw new RangeError('"length" is outside of buffer bounds');let ce;return ce=void 0===Q&&void 0===I?new Uint8Array(Ie):void 0===I?new Uint8Array(Ie,Q):new Uint8Array(Ie,Q,I),Object.setPrototypeOf(ce,v.prototype),ce}function re(Ie){if(Ie>=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C.toString(16)+" bytes");return 0|Ie}function J(Ie,Q){if(v.isBuffer(Ie))return Ie.length;if(ArrayBuffer.isView(Ie)||gt(Ie,ArrayBuffer))return Ie.byteLength;if("string"!=typeof Ie)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ie);const I=Ie.length,ce=arguments.length>2&&!0===arguments[2];if(!ce&&0===I)return 0;let $e=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return F(Ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*I;case"hex":return I>>>1;case"base64":return We(Ie).length;default:if($e)return ce?-1:F(Ie).length;Q=(""+Q).toLowerCase(),$e=!0}}function V(Ie,Q,I){let ce=!1;if((void 0===Q||Q<0)&&(Q=0),Q>this.length||((void 0===I||I>this.length)&&(I=this.length),I<=0)||(I>>>=0)<=(Q>>>=0))return"";for(Ie||(Ie="utf8");;)switch(Ie){case"hex":return Pe(this,Q,I);case"utf8":case"utf-8":return Te(this,Q,I);case"ascii":return Ee(this,Q,I);case"latin1":case"binary":return Fe(this,Q,I);case"base64":return Oe(this,Q,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ge(this,Q,I);default:if(ce)throw new TypeError("Unknown encoding: "+Ie);Ie=(Ie+"").toLowerCase(),ce=!0}}function x(Ie,Q,I){const ce=Ie[Q];Ie[Q]=Ie[I],Ie[I]=ce}function B(Ie,Q,I,ce,$e){if(0===Ie.length)return-1;if("string"==typeof I?(ce=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),Ft(I=+I)&&(I=$e?0:Ie.length-1),I<0&&(I=Ie.length+I),I>=Ie.length){if($e)return-1;I=Ie.length-1}else if(I<0){if(!$e)return-1;I=0}if("string"==typeof Q&&(Q=v.from(Q,ce)),v.isBuffer(Q))return 0===Q.length?-1:k(Ie,Q,I,ce,$e);if("number"==typeof Q)return Q&=255,"function"==typeof Uint8Array.prototype.indexOf?$e?Uint8Array.prototype.indexOf.call(Ie,Q,I):Uint8Array.prototype.lastIndexOf.call(Ie,Q,I):k(Ie,[Q],I,ce,$e);throw new TypeError("val must be string, number or Buffer")}function k(Ie,Q,I,ce,$e){let $n,Qe=1,at=Ie.length,$t=Q.length;if(void 0!==ce&&("ucs2"===(ce=String(ce).toLowerCase())||"ucs-2"===ce||"utf16le"===ce||"utf-16le"===ce)){if(Ie.length<2||Q.length<2)return-1;Qe=2,at/=2,$t/=2,I/=2}function sn(Cn,Mn){return 1===Qe?Cn[Mn]:Cn.readUInt16BE(Mn*Qe)}if($e){let Cn=-1;for($n=I;$n<at;$n++)if(sn(Ie,$n)===sn(Q,-1===Cn?0:$n-Cn)){if(-1===Cn&&(Cn=$n),$n-Cn+1===$t)return Cn*Qe}else-1!==Cn&&($n-=$n-Cn),Cn=-1}else for(I+$t>at&&(I=at-$t),$n=I;$n>=0;$n--){let Cn=!0;for(let Mn=0;Mn<$t;Mn++)if(sn(Ie,$n+Mn)!==sn(Q,Mn)){Cn=!1;break}if(Cn)return $n}return-1}function he(Ie,Q,I,ce){I=Number(I)||0;const $e=Ie.length-I;ce?(ce=Number(ce))>$e&&(ce=$e):ce=$e;const Qe=Q.length;let at;for(ce>Qe/2&&(ce=Qe/2),at=0;at<ce;++at){const $t=parseInt(Q.substr(2*at,2),16);if(Ft($t))return at;Ie[I+at]=$t}return at}function W(Ie,Q,I,ce){return He(F(Q,Ie.length-I),Ie,I,ce)}function Me(Ie,Q,I,ce){return He(function ue(Ie){const Q=[];for(let I=0;I<Ie.length;++I)Q.push(255&Ie.charCodeAt(I));return Q}(Q),Ie,I,ce)}function de(Ie,Q,I,ce){return He(We(Q),Ie,I,ce)}function xe(Ie,Q,I,ce){return He(function me(Ie,Q){let I,ce,$e;const Qe=[];for(let at=0;at<Ie.length&&!((Q-=2)<0);++at)I=Ie.charCodeAt(at),ce=I>>8,$e=I%256,Qe.push($e),Qe.push(ce);return Qe}(Q,Ie.length-I),Ie,I,ce)}function Oe(Ie,Q,I){return S.fromByteArray(0===Q&&I===Ie.length?Ie:Ie.slice(Q,I))}function Te(Ie,Q,I){I=Math.min(Ie.length,I);const ce=[];let $e=Q;for(;$e<I;){const Qe=Ie[$e];let at=null,$t=Qe>239?4:Qe>223?3:Qe>191?2:1;if($e+$t<=I){let sn,$n,Cn,Mn;switch($t){case 1:Qe<128&&(at=Qe);break;case 2:sn=Ie[$e+1],128==(192&sn)&&(Mn=(31&Qe)<<6|63&sn,Mn>127&&(at=Mn));break;case 3:sn=Ie[$e+1],$n=Ie[$e+2],128==(192&sn)&&128==(192&$n)&&(Mn=(15&Qe)<<12|(63&sn)<<6|63&$n,Mn>2047&&(Mn<55296||Mn>57343)&&(at=Mn));break;case 4:sn=Ie[$e+1],$n=Ie[$e+2],Cn=Ie[$e+3],128==(192&sn)&&128==(192&$n)&&128==(192&Cn)&&(Mn=(15&Qe)<<18|(63&sn)<<12|(63&$n)<<6|63&Cn,Mn>65535&&Mn<1114112&&(at=Mn))}}null===at?(at=65533,$t=1):at>65535&&(at-=65536,ce.push(at>>>10&1023|55296),at=56320|1023&at),ce.push(at),$e+=$t}return function Ke(Ie){const Q=Ie.length;if(Q<=Je)return String.fromCharCode.apply(String,Ie);let I="",ce=0;for(;ce<Q;)I+=String.fromCharCode.apply(String,Ie.slice(ce,ce+=Je));return I}(ce)}Z.kMaxLength=C,!(v.TYPED_ARRAY_SUPPORT=function N(){try{const Ie=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(Ie,Q),42===Ie.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}}),v.poolSize=8192,v.from=function(Ie,Q,I){return D(Ie,Q,I)},Object.setPrototypeOf(v.prototype,Uint8Array.prototype),Object.setPrototypeOf(v,Uint8Array),v.alloc=function(Ie,Q,I){return function P(Ie,Q,I){return L(Ie),Ie<=0?_(Ie):void 0!==Q?"string"==typeof I?_(Ie).fill(Q,I):_(Ie).fill(Q):_(Ie)}(Ie,Q,I)},v.allocUnsafe=function(Ie){return j(Ie)},v.allocUnsafeSlow=function(Ie){return j(Ie)},v.isBuffer=function(Q){return null!=Q&&!0===Q._isBuffer&&Q!==v.prototype},v.compare=function(Q,I){if(gt(Q,Uint8Array)&&(Q=v.from(Q,Q.offset,Q.byteLength)),gt(I,Uint8Array)&&(I=v.from(I,I.offset,I.byteLength)),!v.isBuffer(Q)||!v.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===I)return 0;let ce=Q.length,$e=I.length;for(let Qe=0,at=Math.min(ce,$e);Qe<at;++Qe)if(Q[Qe]!==I[Qe]){ce=Q[Qe],$e=I[Qe];break}return ce<$e?-1:$e<ce?1:0},v.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(Q,I){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Q.length)return v.alloc(0);let ce;if(void 0===I)for(I=0,ce=0;ce<Q.length;++ce)I+=Q[ce].length;const $e=v.allocUnsafe(I);let Qe=0;for(ce=0;ce<Q.length;++ce){let at=Q[ce];if(gt(at,Uint8Array))Qe+at.length>$e.length?(v.isBuffer(at)||(at=v.from(at)),at.copy($e,Qe)):Uint8Array.prototype.set.call($e,at,Qe);else{if(!v.isBuffer(at))throw new TypeError('"list" argument must be an Array of Buffers');at.copy($e,Qe)}Qe+=at.length}return $e},v.byteLength=J,v.prototype._isBuffer=!0,v.prototype.swap16=function(){const Q=this.length;if(Q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<Q;I+=2)x(this,I,I+1);return this},v.prototype.swap32=function(){const Q=this.length;if(Q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<Q;I+=4)x(this,I,I+3),x(this,I+1,I+2);return this},v.prototype.swap64=function(){const Q=this.length;if(Q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<Q;I+=8)x(this,I,I+7),x(this,I+1,I+6),x(this,I+2,I+5),x(this,I+3,I+4);return this},v.prototype.toLocaleString=v.prototype.toString=function(){const Q=this.length;return 0===Q?"":0===arguments.length?Te(this,0,Q):V.apply(this,arguments)},v.prototype.equals=function(Q){if(!v.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q||0===v.compare(this,Q)},v.prototype.inspect=function(){let Q="";const I=Z.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(Q+=" ... "),"<Buffer "+Q+">"},O&&(v.prototype[O]=v.prototype.inspect),v.prototype.compare=function(Q,I,ce,$e,Qe){if(gt(Q,Uint8Array)&&(Q=v.from(Q,Q.offset,Q.byteLength)),!v.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(void 0===I&&(I=0),void 0===ce&&(ce=Q?Q.length:0),void 0===$e&&($e=0),void 0===Qe&&(Qe=this.length),I<0||ce>Q.length||$e<0||Qe>this.length)throw new RangeError("out of range index");if($e>=Qe&&I>=ce)return 0;if($e>=Qe)return-1;if(I>=ce)return 1;if(this===Q)return 0;let at=(Qe>>>=0)-($e>>>=0),$t=(ce>>>=0)-(I>>>=0);const sn=Math.min(at,$t),$n=this.slice($e,Qe),Cn=Q.slice(I,ce);for(let Mn=0;Mn<sn;++Mn)if($n[Mn]!==Cn[Mn]){at=$n[Mn],$t=Cn[Mn];break}return at<$t?-1:$t<at?1:0},v.prototype.includes=function(Q,I,ce){return-1!==this.indexOf(Q,I,ce)},v.prototype.indexOf=function(Q,I,ce){return B(this,Q,I,ce,!0)},v.prototype.lastIndexOf=function(Q,I,ce){return B(this,Q,I,ce,!1)},v.prototype.write=function(Q,I,ce,$e){if(void 0===I)$e="utf8",ce=this.length,I=0;else if(void 0===ce&&"string"==typeof I)$e=I,ce=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(ce)?(ce>>>=0,void 0===$e&&($e="utf8")):($e=ce,ce=void 0)}const Qe=this.length-I;if((void 0===ce||ce>Qe)&&(ce=Qe),Q.length>0&&(ce<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");$e||($e="utf8");let at=!1;for(;;)switch($e){case"hex":return he(this,Q,I,ce);case"utf8":case"utf-8":return W(this,Q,I,ce);case"ascii":case"latin1":case"binary":return Me(this,Q,I,ce);case"base64":return de(this,Q,I,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,Q,I,ce);default:if(at)throw new TypeError("Unknown encoding: "+$e);$e=(""+$e).toLowerCase(),at=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Je=4096;function Ee(Ie,Q,I){let ce="";I=Math.min(Ie.length,I);for(let $e=Q;$e<I;++$e)ce+=String.fromCharCode(127&Ie[$e]);return ce}function Fe(Ie,Q,I){let ce="";I=Math.min(Ie.length,I);for(let $e=Q;$e<I;++$e)ce+=String.fromCharCode(Ie[$e]);return ce}function Pe(Ie,Q,I){const ce=Ie.length;(!Q||Q<0)&&(Q=0),(!I||I<0||I>ce)&&(I=ce);let $e="";for(let Qe=Q;Qe<I;++Qe)$e+=yt[Ie[Qe]];return $e}function Ge(Ie,Q,I){const ce=Ie.slice(Q,I);let $e="";for(let Qe=0;Qe<ce.length-1;Qe+=2)$e+=String.fromCharCode(ce[Qe]+256*ce[Qe+1]);return $e}function ge(Ie,Q,I){if(Ie%1!=0||Ie<0)throw new RangeError("offset is not uint");if(Ie+Q>I)throw new RangeError("Trying to access beyond buffer length")}function Ae(Ie,Q,I,ce,$e,Qe){if(!v.isBuffer(Ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>$e||Q<Qe)throw new RangeError('"value" argument is out of bounds');if(I+ce>Ie.length)throw new RangeError("Index out of range")}function qe(Ie,Q,I,ce,$e){tt(Q,ce,$e,Ie,I,7);let Qe=Number(Q&BigInt(4294967295));Ie[I++]=Qe,Qe>>=8,Ie[I++]=Qe,Qe>>=8,Ie[I++]=Qe,Qe>>=8,Ie[I++]=Qe;let at=Number(Q>>BigInt(32)&BigInt(4294967295));return Ie[I++]=at,at>>=8,Ie[I++]=at,at>>=8,Ie[I++]=at,at>>=8,Ie[I++]=at,I}function ct(Ie,Q,I,ce,$e){tt(Q,ce,$e,Ie,I,7);let Qe=Number(Q&BigInt(4294967295));Ie[I+7]=Qe,Qe>>=8,Ie[I+6]=Qe,Qe>>=8,Ie[I+5]=Qe,Qe>>=8,Ie[I+4]=Qe;let at=Number(Q>>BigInt(32)&BigInt(4294967295));return Ie[I+3]=at,at>>=8,Ie[I+2]=at,at>>=8,Ie[I+1]=at,at>>=8,Ie[I]=at,I+8}function Ye(Ie,Q,I,ce,$e,Qe){if(I+ce>Ie.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function ye(Ie,Q,I,ce,$e){return Q=+Q,I>>>=0,$e||Ye(Ie,0,I,4),b.write(Ie,Q,I,ce,23,4),I+4}function G(Ie,Q,I,ce,$e){return Q=+Q,I>>>=0,$e||Ye(Ie,0,I,8),b.write(Ie,Q,I,ce,52,8),I+8}v.prototype.slice=function(Q,I){const ce=this.length;(Q=~~Q)<0?(Q+=ce)<0&&(Q=0):Q>ce&&(Q=ce),(I=void 0===I?ce:~~I)<0?(I+=ce)<0&&(I=0):I>ce&&(I=ce),I<Q&&(I=Q);const $e=this.subarray(Q,I);return Object.setPrototypeOf($e,v.prototype),$e},v.prototype.readUintLE=v.prototype.readUIntLE=function(Q,I,ce){Q>>>=0,I>>>=0,ce||ge(Q,I,this.length);let $e=this[Q],Qe=1,at=0;for(;++at<I&&(Qe*=256);)$e+=this[Q+at]*Qe;return $e},v.prototype.readUintBE=v.prototype.readUIntBE=function(Q,I,ce){Q>>>=0,I>>>=0,ce||ge(Q,I,this.length);let $e=this[Q+--I],Qe=1;for(;I>0&&(Qe*=256);)$e+=this[Q+--I]*Qe;return $e},v.prototype.readUint8=v.prototype.readUInt8=function(Q,I){return Q>>>=0,I||ge(Q,1,this.length),this[Q]},v.prototype.readUint16LE=v.prototype.readUInt16LE=function(Q,I){return Q>>>=0,I||ge(Q,2,this.length),this[Q]|this[Q+1]<<8},v.prototype.readUint16BE=v.prototype.readUInt16BE=function(Q,I){return Q>>>=0,I||ge(Q,2,this.length),this[Q]<<8|this[Q+1]},v.prototype.readUint32LE=v.prototype.readUInt32LE=function(Q,I){return Q>>>=0,I||ge(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+16777216*this[Q+3]},v.prototype.readUint32BE=v.prototype.readUInt32BE=function(Q,I){return Q>>>=0,I||ge(Q,4,this.length),16777216*this[Q]+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},v.prototype.readBigUInt64LE=Gt(function(Q){fe(Q>>>=0,"offset");const I=this[Q],ce=this[Q+7];(void 0===I||void 0===ce)&&ee(Q,this.length-8);const $e=I+256*this[++Q]+65536*this[++Q]+this[++Q]*2**24,Qe=this[++Q]+256*this[++Q]+65536*this[++Q]+ce*2**24;return BigInt($e)+(BigInt(Qe)<<BigInt(32))}),v.prototype.readBigUInt64BE=Gt(function(Q){fe(Q>>>=0,"offset");const I=this[Q],ce=this[Q+7];(void 0===I||void 0===ce)&&ee(Q,this.length-8);const $e=I*2**24+65536*this[++Q]+256*this[++Q]+this[++Q],Qe=this[++Q]*2**24+65536*this[++Q]+256*this[++Q]+ce;return(BigInt($e)<<BigInt(32))+BigInt(Qe)}),v.prototype.readIntLE=function(Q,I,ce){Q>>>=0,I>>>=0,ce||ge(Q,I,this.length);let $e=this[Q],Qe=1,at=0;for(;++at<I&&(Qe*=256);)$e+=this[Q+at]*Qe;return Qe*=128,$e>=Qe&&($e-=Math.pow(2,8*I)),$e},v.prototype.readIntBE=function(Q,I,ce){Q>>>=0,I>>>=0,ce||ge(Q,I,this.length);let $e=I,Qe=1,at=this[Q+--$e];for(;$e>0&&(Qe*=256);)at+=this[Q+--$e]*Qe;return Qe*=128,at>=Qe&&(at-=Math.pow(2,8*I)),at},v.prototype.readInt8=function(Q,I){return Q>>>=0,I||ge(Q,1,this.length),128&this[Q]?-1*(255-this[Q]+1):this[Q]},v.prototype.readInt16LE=function(Q,I){Q>>>=0,I||ge(Q,2,this.length);const ce=this[Q]|this[Q+1]<<8;return 32768&ce?4294901760|ce:ce},v.prototype.readInt16BE=function(Q,I){Q>>>=0,I||ge(Q,2,this.length);const ce=this[Q+1]|this[Q]<<8;return 32768&ce?4294901760|ce:ce},v.prototype.readInt32LE=function(Q,I){return Q>>>=0,I||ge(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},v.prototype.readInt32BE=function(Q,I){return Q>>>=0,I||ge(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},v.prototype.readBigInt64LE=Gt(function(Q){fe(Q>>>=0,"offset");const I=this[Q],ce=this[Q+7];return(void 0===I||void 0===ce)&&ee(Q,this.length-8),(BigInt(this[Q+4]+256*this[Q+5]+65536*this[Q+6]+(ce<<24))<<BigInt(32))+BigInt(I+256*this[++Q]+65536*this[++Q]+this[++Q]*2**24)}),v.prototype.readBigInt64BE=Gt(function(Q){fe(Q>>>=0,"offset");const I=this[Q],ce=this[Q+7];(void 0===I||void 0===ce)&&ee(Q,this.length-8);const $e=(I<<24)+65536*this[++Q]+256*this[++Q]+this[++Q];return(BigInt($e)<<BigInt(32))+BigInt(this[++Q]*2**24+65536*this[++Q]+256*this[++Q]+ce)}),v.prototype.readFloatLE=function(Q,I){return Q>>>=0,I||ge(Q,4,this.length),b.read(this,Q,!0,23,4)},v.prototype.readFloatBE=function(Q,I){return Q>>>=0,I||ge(Q,4,this.length),b.read(this,Q,!1,23,4)},v.prototype.readDoubleLE=function(Q,I){return Q>>>=0,I||ge(Q,8,this.length),b.read(this,Q,!0,52,8)},v.prototype.readDoubleBE=function(Q,I){return Q>>>=0,I||ge(Q,8,this.length),b.read(this,Q,!1,52,8)},v.prototype.writeUintLE=v.prototype.writeUIntLE=function(Q,I,ce,$e){Q=+Q,I>>>=0,ce>>>=0,$e||Ae(this,Q,I,ce,Math.pow(2,8*ce)-1,0);let Qe=1,at=0;for(this[I]=255&Q;++at<ce&&(Qe*=256);)this[I+at]=Q/Qe&255;return I+ce},v.prototype.writeUintBE=v.prototype.writeUIntBE=function(Q,I,ce,$e){Q=+Q,I>>>=0,ce>>>=0,$e||Ae(this,Q,I,ce,Math.pow(2,8*ce)-1,0);let Qe=ce-1,at=1;for(this[I+Qe]=255&Q;--Qe>=0&&(at*=256);)this[I+Qe]=Q/at&255;return I+ce},v.prototype.writeUint8=v.prototype.writeUInt8=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,1,255,0),this[I]=255&Q,I+1},v.prototype.writeUint16LE=v.prototype.writeUInt16LE=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,2,65535,0),this[I]=255&Q,this[I+1]=Q>>>8,I+2},v.prototype.writeUint16BE=v.prototype.writeUInt16BE=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,2,65535,0),this[I]=Q>>>8,this[I+1]=255&Q,I+2},v.prototype.writeUint32LE=v.prototype.writeUInt32LE=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,4,4294967295,0),this[I+3]=Q>>>24,this[I+2]=Q>>>16,this[I+1]=Q>>>8,this[I]=255&Q,I+4},v.prototype.writeUint32BE=v.prototype.writeUInt32BE=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,4,4294967295,0),this[I]=Q>>>24,this[I+1]=Q>>>16,this[I+2]=Q>>>8,this[I+3]=255&Q,I+4},v.prototype.writeBigUInt64LE=Gt(function(Q,I=0){return qe(this,Q,I,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeBigUInt64BE=Gt(function(Q,I=0){return ct(this,Q,I,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeIntLE=function(Q,I,ce,$e){if(Q=+Q,I>>>=0,!$e){const sn=Math.pow(2,8*ce-1);Ae(this,Q,I,ce,sn-1,-sn)}let Qe=0,at=1,$t=0;for(this[I]=255&Q;++Qe<ce&&(at*=256);)Q<0&&0===$t&&0!==this[I+Qe-1]&&($t=1),this[I+Qe]=(Q/at>>0)-$t&255;return I+ce},v.prototype.writeIntBE=function(Q,I,ce,$e){if(Q=+Q,I>>>=0,!$e){const sn=Math.pow(2,8*ce-1);Ae(this,Q,I,ce,sn-1,-sn)}let Qe=ce-1,at=1,$t=0;for(this[I+Qe]=255&Q;--Qe>=0&&(at*=256);)Q<0&&0===$t&&0!==this[I+Qe+1]&&($t=1),this[I+Qe]=(Q/at>>0)-$t&255;return I+ce},v.prototype.writeInt8=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,1,127,-128),Q<0&&(Q=255+Q+1),this[I]=255&Q,I+1},v.prototype.writeInt16LE=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,2,32767,-32768),this[I]=255&Q,this[I+1]=Q>>>8,I+2},v.prototype.writeInt16BE=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,2,32767,-32768),this[I]=Q>>>8,this[I+1]=255&Q,I+2},v.prototype.writeInt32LE=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,4,2147483647,-2147483648),this[I]=255&Q,this[I+1]=Q>>>8,this[I+2]=Q>>>16,this[I+3]=Q>>>24,I+4},v.prototype.writeInt32BE=function(Q,I,ce){return Q=+Q,I>>>=0,ce||Ae(this,Q,I,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[I]=Q>>>24,this[I+1]=Q>>>16,this[I+2]=Q>>>8,this[I+3]=255&Q,I+4},v.prototype.writeBigInt64LE=Gt(function(Q,I=0){return qe(this,Q,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeBigInt64BE=Gt(function(Q,I=0){return ct(this,Q,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeFloatLE=function(Q,I,ce){return ye(this,Q,I,!0,ce)},v.prototype.writeFloatBE=function(Q,I,ce){return ye(this,Q,I,!1,ce)},v.prototype.writeDoubleLE=function(Q,I,ce){return G(this,Q,I,!0,ce)},v.prototype.writeDoubleBE=function(Q,I,ce){return G(this,Q,I,!1,ce)},v.prototype.copy=function(Q,I,ce,$e){if(!v.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),!$e&&0!==$e&&($e=this.length),I>=Q.length&&(I=Q.length),I||(I=0),$e>0&&$e<ce&&($e=ce),$e===ce||0===Q.length||0===this.length)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if($e<0)throw new RangeError("sourceEnd out of bounds");$e>this.length&&($e=this.length),Q.length-I<$e-ce&&($e=Q.length-I+ce);const Qe=$e-ce;return this===Q&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(I,ce,$e):Uint8Array.prototype.set.call(Q,this.subarray(ce,$e),I),Qe},v.prototype.fill=function(Q,I,ce,$e){if("string"==typeof Q){if("string"==typeof I?($e=I,I=0,ce=this.length):"string"==typeof ce&&($e=ce,ce=this.length),void 0!==$e&&"string"!=typeof $e)throw new TypeError("encoding must be a string");if("string"==typeof $e&&!v.isEncoding($e))throw new TypeError("Unknown encoding: "+$e);if(1===Q.length){const at=Q.charCodeAt(0);("utf8"===$e&&at<128||"latin1"===$e)&&(Q=at)}}else"number"==typeof Q?Q&=255:"boolean"==typeof Q&&(Q=Number(Q));if(I<0||this.length<I||this.length<ce)throw new RangeError("Out of range index");if(ce<=I)return this;let Qe;if(I>>>=0,ce=void 0===ce?this.length:ce>>>0,Q||(Q=0),"number"==typeof Q)for(Qe=I;Qe<ce;++Qe)this[Qe]=Q;else{const at=v.isBuffer(Q)?Q:v.from(Q,$e),$t=at.length;if(0===$t)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Qe=0;Qe<ce-I;++Qe)this[Qe+I]=at[Qe%$t]}return this};const R={};function ae(Ie,Q,I){R[Ie]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ie}]`,delete this.name}get code(){return Ie}set code($e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$e,writable:!0})}toString(){return`${this.name} [${Ie}]: ${this.message}`}}}function U(Ie){let Q="",I=Ie.length;const ce="-"===Ie[0]?1:0;for(;I>=ce+4;I-=3)Q=`_${Ie.slice(I-3,I)}${Q}`;return`${Ie.slice(0,I)}${Q}`}function tt(Ie,Q,I,ce,$e,Qe){if(Ie>I||Ie<Q){const at="bigint"==typeof Q?"n":"";let $t;throw $t=Qe>3?0===Q||Q===BigInt(0)?`>= 0${at} and < 2${at} ** ${8*(Qe+1)}${at}`:`>= -(2${at} ** ${8*(Qe+1)-1}${at}) and < 2 ** ${8*(Qe+1)-1}${at}`:`>= ${Q}${at} and <= ${I}${at}`,new R.ERR_OUT_OF_RANGE("value",$t,Ie)}!function Le(Ie,Q,I){fe(Q,"offset"),(void 0===Ie[Q]||void 0===Ie[Q+I])&&ee(Q,Ie.length-(I+1))}(ce,$e,Qe)}function fe(Ie,Q){if("number"!=typeof Ie)throw new R.ERR_INVALID_ARG_TYPE(Q,"number",Ie)}function ee(Ie,Q,I){throw Math.floor(Ie)!==Ie?(fe(Ie,I),new R.ERR_OUT_OF_RANGE(I||"offset","an integer",Ie)):Q<0?new R.ERR_BUFFER_OUT_OF_BOUNDS:new R.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${Q}`,Ie)}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(Ie){return Ie?`${Ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(Ie,Q){return`The "${Ie}" argument must be of type number. Received type ${typeof Q}`},TypeError),ae("ERR_OUT_OF_RANGE",function(Ie,Q,I){let ce=`The value of "${Ie}" is out of range.`,$e=I;return Number.isInteger(I)&&Math.abs(I)>2**32?$e=U(String(I)):"bigint"==typeof I&&($e=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&($e=U($e)),$e+="n"),ce+=` It must be ${Q}. Received ${$e}`,ce},RangeError);const q=/[^+/0-9A-Za-z-_]/g;function F(Ie,Q){let I;Q=Q||1/0;const ce=Ie.length;let $e=null;const Qe=[];for(let at=0;at<ce;++at){if(I=Ie.charCodeAt(at),I>55295&&I<57344){if(!$e){if(I>56319){(Q-=3)>-1&&Qe.push(239,191,189);continue}if(at+1===ce){(Q-=3)>-1&&Qe.push(239,191,189);continue}$e=I;continue}if(I<56320){(Q-=3)>-1&&Qe.push(239,191,189),$e=I;continue}I=65536+($e-55296<<10|I-56320)}else $e&&(Q-=3)>-1&&Qe.push(239,191,189);if($e=null,I<128){if((Q-=1)<0)break;Qe.push(I)}else if(I<2048){if((Q-=2)<0)break;Qe.push(I>>6|192,63&I|128)}else if(I<65536){if((Q-=3)<0)break;Qe.push(I>>12|224,I>>6&63|128,63&I|128)}else{if(!(I<1114112))throw new Error("Invalid code point");if((Q-=4)<0)break;Qe.push(I>>18|240,I>>12&63|128,I>>6&63|128,63&I|128)}}return Qe}function We(Ie){return S.toByteArray(function A(Ie){if((Ie=(Ie=Ie.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;Ie.length%4!=0;)Ie+="=";return Ie}(Ie))}function He(Ie,Q,I,ce){let $e;for($e=0;$e<ce&&!($e+I>=Q.length||$e>=Ie.length);++$e)Q[$e+I]=Ie[$e];return $e}function gt(Ie,Q){return Ie instanceof Q||null!=Ie&&null!=Ie.constructor&&null!=Ie.constructor.name&&Ie.constructor.name===Q.name}function Ft(Ie){return Ie!=Ie}const yt=function(){const Ie="0123456789abcdef",Q=new Array(256);for(let I=0;I<16;++I){const ce=16*I;for(let $e=0;$e<16;++$e)Q[ce+$e]=Ie[I]+Ie[$e]}return Q}();function Gt(Ie){return typeof BigInt>"u"?rn:Ie}function rn(){throw new Error("BigInt not supported")}},7054:function(ne,Z,g){"use strict";var S=this&&this.__createBinding||(Object.create?function(O,C,N,_){void 0===_&&(_=N),Object.defineProperty(O,_,{enumerable:!0,get:function(){return C[N]}})}:function(O,C,N,_){void 0===_&&(_=N),O[_]=C[N]}),b=this&&this.__exportStar||function(O,C){for(var N in O)"default"!==N&&!Object.prototype.hasOwnProperty.call(C,N)&&S(C,O,N)};Object.defineProperty(Z,"__esModule",{value:!0}),b(g(361),Z)},361:(ne,Z)=>{"use strict";function S(C){const N=[];let _=0;for(;_<C.length;)switch(C[_]){case"/":if("."===C[_+1])if("."===C[_+2]){if(!O(C[_+3])){N.push([]),_++;break}N.pop(),C[_+3]||N.push([]),_+=3}else{if(!O(C[_+2])){N.push([]),_++;break}C[_+2]||N.push([]),_+=2}else N.push([]),_++;break;case"#":case"?":N.length||N.push([]),N[N.length-1].push(C.substr(_)),_=C.length;break;default:N.length||N.push([]),N[N.length-1].push(C[_]),_++}return"/"+N.map(v=>v.join("")).join("/")}function b(C,N){let _=N+1;N>=0?"/"===C[N+1]&&"/"===C[N+2]&&(_=N+3):"/"===C[0]&&"/"===C[1]&&(_=2);const v=C.indexOf("/",_);return v<0?C:C.substr(0,v)+S(C.substr(v))}function O(C){return!C||"#"===C||"?"===C||"/"===C}Object.defineProperty(Z,"__esModule",{value:!0}),Z.removeDotSegmentsOfPath=Z.removeDotSegments=Z.resolve=void 0,Z.resolve=function g(C,N){const _=(N=N||"").indexOf("#");if(_>0&&(N=N.substr(0,_)),!C.length){if(N.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${N}' for value '${C}'`);return N}if(C.startsWith("?")){const T=N.indexOf("?");return T>0&&(N=N.substr(0,T)),N+C}if(C.startsWith("#"))return N+C;if(!N.length){const T=C.indexOf(":");if(T<0)throw new Error(`Found invalid relative IRI '${C}' for a missing baseIRI`);return b(C,T)}const v=C.indexOf(":");if(v>=0)return b(C,v);const D=N.indexOf(":");if(D<0)throw new Error(`Found invalid baseIRI '${N}' for value '${C}'`);const L=N.substr(0,D+1);if(0===C.indexOf("//"))return L+b(C,v);let P;if(N.indexOf("//",D)===D+1){if(P=N.indexOf("/",D+3),P<0)return N.length>D+3?N+"/"+b(C,v):L+b(C,v)}else if(P=N.indexOf("/",D+1),P<0)return L+b(C,v);if(0===C.indexOf("/"))return N.substr(0,P)+S(C);let j=N.substr(P);const se=j.lastIndexOf("/");return se>=0&&se<j.length-1&&(j=j.substr(0,se+1),"."===C[0]&&"."!==C[1]&&"/"!==C[1]&&C[2]&&(C=C.substr(1))),C=S(C=j+C),N.substr(0,P)+C},Z.removeDotSegments=S,Z.removeDotSegmentsOfPath=b},9528:(ne,Z,g)=>{!function(S){S.parser=function(G,R){return new O(G,R)},S.SAXParser=O,S.SAXStream=P,S.createStream=function L(G,R){return new P(G,R)},S.MAX_BUFFER_LENGTH=65536;var v,b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function O(G,R){if(!(this instanceof O))return new O(G,R);var ae=this;(function N(G){for(var R=0,ae=b.length;R<ae;R++)G[b[R]]=""})(ae),ae.q=ae.c="",ae.bufferCheckPosition=S.MAX_BUFFER_LENGTH,ae.opt=R||{},ae.opt.lowercase=ae.opt.lowercase||ae.opt.lowercasetags,ae.looseCase=ae.opt.lowercase?"toLowerCase":"toUpperCase",ae.tags=[],ae.closed=ae.closedRoot=ae.sawRoot=!1,ae.tag=ae.error=null,ae.strict=!!G,ae.noscript=!(!G&&!ae.opt.noscript),ae.state=W.BEGIN,ae.strictEntities=ae.opt.strictEntities,ae.ENTITIES=Object.create(ae.strictEntities?S.XML_ENTITIES:S.ENTITIES),ae.attribList=[],ae.opt.xmlns&&(ae.ns=Object.create(le)),ae.trackPosition=!1!==ae.opt.position,ae.trackPosition&&(ae.position=ae.line=ae.column=0),de(ae,"onready")}S.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(G){function R(){}return R.prototype=G,new R}),Object.keys||(Object.keys=function(G){var R=[];for(var ae in G)G.hasOwnProperty(ae)&&R.push(ae);return R}),O.prototype={end:function(){Ke(this)},write:function ye(G){var R=this;if(this.error)throw this.error;if(R.closed)return Je(R,"Cannot write after close. Assign an onready handler.");if(null===G)return Ke(R);"object"==typeof G&&(G=G.toString());for(var ae=0,U="";U=Ye(G,ae++),R.c=U,U;)switch(R.trackPosition&&(R.position++,"\n"===U?(R.line++,R.column=0):R.column++),R.state){case W.BEGIN:if(R.state=W.BEGIN_WHITESPACE,"\ufeff"===U)continue;ct(R,U);continue;case W.BEGIN_WHITESPACE:ct(R,U);continue;case W.TEXT:if(R.sawRoot&&!R.closedRoot){for(var Le=ae-1;U&&"<"!==U&&"&"!==U;)(U=Ye(G,ae++))&&R.trackPosition&&(R.position++,"\n"===U?(R.line++,R.column=0):R.column++);R.textNode+=G.substring(Le,ae-1)}"<"!==U||R.sawRoot&&R.closedRoot&&!R.strict?(!V(U)&&(!R.sawRoot||R.closedRoot)&&Ee(R,"Text data outside of root node."),"&"===U?R.state=W.TEXT_ENTITY:R.textNode+=U):(R.state=W.OPEN_WAKA,R.startTagPosition=R.position);continue;case W.SCRIPT:"<"===U?R.state=W.SCRIPT_ENDING:R.script+=U;continue;case W.SCRIPT_ENDING:"/"===U?R.state=W.CLOSE_TAG:(R.script+="<"+U,R.state=W.SCRIPT);continue;case W.OPEN_WAKA:"!"===U?(R.state=W.SGML_DECL,R.sgmlDecl=""):V(U)||(k(K,U)?(R.state=W.OPEN_TAG,R.tagName=U):"/"===U?(R.state=W.CLOSE_TAG,R.tagName=""):"?"===U?(R.state=W.PROC_INST,R.procInstName=R.procInstBody=""):(Ee(R,"Unencoded <"),R.startTagPosition+1<R.position&&(U=new Array(R.position-R.startTagPosition).join(" ")+U),R.textNode+="<"+U,R.state=W.TEXT));continue;case W.SGML_DECL:(R.sgmlDecl+U).toUpperCase()===j?(xe(R,"onopencdata"),R.state=W.CDATA,R.sgmlDecl="",R.cdata=""):R.sgmlDecl+U==="--"?(R.state=W.COMMENT,R.comment="",R.sgmlDecl=""):(R.sgmlDecl+U).toUpperCase()===se?(R.state=W.DOCTYPE,(R.doctype||R.sawRoot)&&Ee(R,"Inappropriately located doctype declaration"),R.doctype="",R.sgmlDecl=""):">"===U?(xe(R,"onsgmldeclaration",R.sgmlDecl),R.sgmlDecl="",R.state=W.TEXT):(x(U)&&(R.state=W.SGML_DECL_QUOTED),R.sgmlDecl+=U);continue;case W.SGML_DECL_QUOTED:U===R.q&&(R.state=W.SGML_DECL,R.q=""),R.sgmlDecl+=U;continue;case W.DOCTYPE:">"===U?(R.state=W.TEXT,xe(R,"ondoctype",R.doctype),R.doctype=!0):(R.doctype+=U,"["===U?R.state=W.DOCTYPE_DTD:x(U)&&(R.state=W.DOCTYPE_QUOTED,R.q=U));continue;case W.DOCTYPE_QUOTED:R.doctype+=U,U===R.q&&(R.q="",R.state=W.DOCTYPE);continue;case W.DOCTYPE_DTD:R.doctype+=U,"]"===U?R.state=W.DOCTYPE:x(U)&&(R.state=W.DOCTYPE_DTD_QUOTED,R.q=U);continue;case W.DOCTYPE_DTD_QUOTED:R.doctype+=U,U===R.q&&(R.state=W.DOCTYPE_DTD,R.q="");continue;case W.COMMENT:"-"===U?R.state=W.COMMENT_ENDING:R.comment+=U;continue;case W.COMMENT_ENDING:"-"===U?(R.state=W.COMMENT_ENDED,R.comment=Te(R.opt,R.comment),R.comment&&xe(R,"oncomment",R.comment),R.comment=""):(R.comment+="-"+U,R.state=W.COMMENT);continue;case W.COMMENT_ENDED:">"!==U?(Ee(R,"Malformed comment"),R.comment+="--"+U,R.state=W.COMMENT):R.state=W.TEXT;continue;case W.CDATA:"]"===U?R.state=W.CDATA_ENDING:R.cdata+=U;continue;case W.CDATA_ENDING:"]"===U?R.state=W.CDATA_ENDING_2:(R.cdata+="]"+U,R.state=W.CDATA);continue;case W.CDATA_ENDING_2:">"===U?(R.cdata&&xe(R,"oncdata",R.cdata),xe(R,"onclosecdata"),R.cdata="",R.state=W.TEXT):"]"===U?R.cdata+="]":(R.cdata+="]]"+U,R.state=W.CDATA);continue;case W.PROC_INST:"?"===U?R.state=W.PROC_INST_ENDING:V(U)?R.state=W.PROC_INST_BODY:R.procInstName+=U;continue;case W.PROC_INST_BODY:if(!R.procInstBody&&V(U))continue;"?"===U?R.state=W.PROC_INST_ENDING:R.procInstBody+=U;continue;case W.PROC_INST_ENDING:">"===U?(xe(R,"onprocessinginstruction",{name:R.procInstName,body:R.procInstBody}),R.procInstName=R.procInstBody="",R.state=W.TEXT):(R.procInstBody+="?"+U,R.state=W.PROC_INST_BODY);continue;case W.OPEN_TAG:k(re,U)?R.tagName+=U:(Fe(R),">"===U?ge(R):"/"===U?R.state=W.OPEN_TAG_SLASH:(V(U)||Ee(R,"Invalid character in tag name"),R.state=W.ATTRIB));continue;case W.OPEN_TAG_SLASH:">"===U?(ge(R,!0),Ae(R)):(Ee(R,"Forward-slash in opening tag not followed by >"),R.state=W.ATTRIB);continue;case W.ATTRIB:if(V(U))continue;">"===U?ge(R):"/"===U?R.state=W.OPEN_TAG_SLASH:k(K,U)?(R.attribName=U,R.attribValue="",R.state=W.ATTRIB_NAME):Ee(R,"Invalid attribute name");continue;case W.ATTRIB_NAME:"="===U?R.state=W.ATTRIB_VALUE:">"===U?(Ee(R,"Attribute without value"),R.attribValue=R.attribName,Ge(R),ge(R)):V(U)?R.state=W.ATTRIB_NAME_SAW_WHITE:k(re,U)?R.attribName+=U:Ee(R,"Invalid attribute name");continue;case W.ATTRIB_NAME_SAW_WHITE:if("="===U)R.state=W.ATTRIB_VALUE;else{if(V(U))continue;Ee(R,"Attribute without value"),R.tag.attributes[R.attribName]="",R.attribValue="",xe(R,"onattribute",{name:R.attribName,value:""}),R.attribName="",">"===U?ge(R):k(K,U)?(R.attribName=U,R.state=W.ATTRIB_NAME):(Ee(R,"Invalid attribute name"),R.state=W.ATTRIB)}continue;case W.ATTRIB_VALUE:if(V(U))continue;x(U)?(R.q=U,R.state=W.ATTRIB_VALUE_QUOTED):(Ee(R,"Unquoted attribute value"),R.state=W.ATTRIB_VALUE_UNQUOTED,R.attribValue=U);continue;case W.ATTRIB_VALUE_QUOTED:if(U!==R.q){"&"===U?R.state=W.ATTRIB_VALUE_ENTITY_Q:R.attribValue+=U;continue}Ge(R),R.q="",R.state=W.ATTRIB_VALUE_CLOSED;continue;case W.ATTRIB_VALUE_CLOSED:V(U)?R.state=W.ATTRIB:">"===U?ge(R):"/"===U?R.state=W.OPEN_TAG_SLASH:k(K,U)?(Ee(R,"No whitespace between attributes"),R.attribName=U,R.attribValue="",R.state=W.ATTRIB_NAME):Ee(R,"Invalid attribute name");continue;case W.ATTRIB_VALUE_UNQUOTED:if(!B(U)){"&"===U?R.state=W.ATTRIB_VALUE_ENTITY_U:R.attribValue+=U;continue}Ge(R),">"===U?ge(R):R.state=W.ATTRIB;continue;case W.CLOSE_TAG:if(R.tagName)">"===U?Ae(R):k(re,U)?R.tagName+=U:R.script?(R.script+="</"+R.tagName,R.tagName="",R.state=W.SCRIPT):(V(U)||Ee(R,"Invalid tagname in closing tag"),R.state=W.CLOSE_TAG_SAW_WHITE);else{if(V(U))continue;he(K,U)?R.script?(R.script+="</"+U,R.state=W.SCRIPT):Ee(R,"Invalid tagname in closing tag."):R.tagName=U}continue;case W.CLOSE_TAG_SAW_WHITE:if(V(U))continue;">"===U?Ae(R):Ee(R,"Invalid characters in closing tag");continue;case W.TEXT_ENTITY:case W.ATTRIB_VALUE_ENTITY_Q:case W.ATTRIB_VALUE_ENTITY_U:var fe,ee;switch(R.state){case W.TEXT_ENTITY:fe=W.TEXT,ee="textNode";break;case W.ATTRIB_VALUE_ENTITY_Q:fe=W.ATTRIB_VALUE_QUOTED,ee="attribValue";break;case W.ATTRIB_VALUE_ENTITY_U:fe=W.ATTRIB_VALUE_UNQUOTED,ee="attribValue"}if(";"===U)if(R.opt.unparsedEntities){var q=qe(R);R.entity="",R.state=fe,R.write(q)}else R[ee]+=qe(R),R.entity="",R.state=fe;else k(R.entity.length?J:ie,U)?R.entity+=U:(Ee(R,"Invalid character in entity name"),R[ee]+="&"+R.entity+U,R.entity="",R.state=fe);continue;default:throw new Error(R,"Unknown state: "+R.state)}return R.position>=R.bufferCheckPosition&&function C(G){for(var R=Math.max(S.MAX_BUFFER_LENGTH,10),ae=0,U=0,Le=b.length;U<Le;U++){var tt=G[b[U]].length;if(tt>R)switch(b[U]){case"textNode":Oe(G);break;case"cdata":xe(G,"oncdata",G.cdata),G.cdata="";break;case"script":xe(G,"onscript",G.script),G.script="";break;default:Je(G,"Max buffer length exceeded: "+b[U])}ae=Math.max(ae,tt)}G.bufferCheckPosition=S.MAX_BUFFER_LENGTH-ae+G.position}(R),R},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function _(G){Oe(G),""!==G.cdata&&(xe(G,"oncdata",G.cdata),G.cdata=""),""!==G.script&&(xe(G,"onscript",G.script),G.script="")}(this)}};try{v=g(1793).Stream}catch{v=function(){}}v||(v=function(){});var D=S.EVENTS.filter(function(G){return"error"!==G&&"end"!==G});function P(G,R){if(!(this instanceof P))return new P(G,R);v.apply(this),this._parser=new O(G,R),this.writable=!0,this.readable=!0;var ae=this;this._parser.onend=function(){ae.emit("end")},this._parser.onerror=function(U){ae.emit("error",U),ae._parser.error=null},this._decoder=null,D.forEach(function(U){Object.defineProperty(ae,"on"+U,{get:function(){return ae._parser["on"+U]},set:function(Le){if(!Le)return ae.removeAllListeners(U),ae._parser["on"+U]=Le,Le;ae.on(U,Le)},enumerable:!0,configurable:!1})})}(P.prototype=Object.create(v.prototype,{constructor:{value:P}})).write=function(G){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(G)){if(!this._decoder){var R=g(2024).StringDecoder;this._decoder=new R("utf8")}G=this._decoder.write(G)}return this._parser.write(G.toString()),this.emit("data",G),!0},P.prototype.end=function(G){return G&&G.length&&this.write(G),this._parser.end(),!0},P.prototype.on=function(G,R){var ae=this;return!ae._parser["on"+G]&&-1!==D.indexOf(G)&&(ae._parser["on"+G]=function(){var U=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);U.splice(0,0,G),ae.emit.apply(ae,U)}),v.prototype.on.call(ae,G,R)};var j="[CDATA[",se="DOCTYPE",T="http://www.w3.org/XML/1998/namespace",X="http://www.w3.org/2000/xmlns/",le={xml:T,xmlns:X},K=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,re=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ie=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,J=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function V(G){return" "===G||"\n"===G||"\r"===G||"\t"===G}function x(G){return'"'===G||"'"===G}function B(G){return">"===G||V(G)}function k(G,R){return G.test(R)}function he(G,R){return!k(G,R)}var G,R,ae,W=0;for(var Me in S.STATE={BEGIN:W++,BEGIN_WHITESPACE:W++,TEXT:W++,TEXT_ENTITY:W++,OPEN_WAKA:W++,SGML_DECL:W++,SGML_DECL_QUOTED:W++,DOCTYPE:W++,DOCTYPE_QUOTED:W++,DOCTYPE_DTD:W++,DOCTYPE_DTD_QUOTED:W++,COMMENT_STARTING:W++,COMMENT:W++,COMMENT_ENDING:W++,COMMENT_ENDED:W++,CDATA:W++,CDATA_ENDING:W++,CDATA_ENDING_2:W++,PROC_INST:W++,PROC_INST_BODY:W++,PROC_INST_ENDING:W++,OPEN_TAG:W++,OPEN_TAG_SLASH:W++,ATTRIB:W++,ATTRIB_NAME:W++,ATTRIB_NAME_SAW_WHITE:W++,ATTRIB_VALUE:W++,ATTRIB_VALUE_QUOTED:W++,ATTRIB_VALUE_CLOSED:W++,ATTRIB_VALUE_UNQUOTED:W++,ATTRIB_VALUE_ENTITY_Q:W++,ATTRIB_VALUE_ENTITY_U:W++,CLOSE_TAG:W++,CLOSE_TAG_SAW_WHITE:W++,SCRIPT:W++,SCRIPT_ENDING:W++},S.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},S.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(S.ENTITIES).forEach(function(G){var R=S.ENTITIES[G],ae="number"==typeof R?String.fromCharCode(R):R;S.ENTITIES[G]=ae}),S.STATE)S.STATE[S.STATE[Me]]=Me;function de(G,R,ae){G[R]&&G[R](ae)}function xe(G,R,ae){G.textNode&&Oe(G),de(G,R,ae)}function Oe(G){G.textNode=Te(G.opt,G.textNode),G.textNode&&de(G,"ontext",G.textNode),G.textNode=""}function Te(G,R){return G.trim&&(R=R.trim()),G.normalize&&(R=R.replace(/\s+/g," ")),R}function Je(G,R){return Oe(G),G.trackPosition&&(R+="\nLine: "+G.line+"\nColumn: "+G.column+"\nChar: "+G.c),R=new Error(R),G.error=R,de(G,"onerror",R),G}function Ke(G){return G.sawRoot&&!G.closedRoot&&Ee(G,"Unclosed root tag"),G.state!==W.BEGIN&&G.state!==W.BEGIN_WHITESPACE&&G.state!==W.TEXT&&Je(G,"Unexpected end"),Oe(G),G.c="",G.closed=!0,de(G,"onend"),O.call(G,G.strict,G.opt),G}function Ee(G,R){if("object"!=typeof G||!(G instanceof O))throw new Error("bad call to strictFail");G.strict&&Je(G,R)}function Fe(G){G.strict||(G.tagName=G.tagName[G.looseCase]());var R=G.tags[G.tags.length-1]||G,ae=G.tag={name:G.tagName,attributes:{}};G.opt.xmlns&&(ae.ns=R.ns),G.attribList.length=0,xe(G,"onopentagstart",ae)}function Pe(G,R){var U=G.indexOf(":")<0?["",G]:G.split(":"),Le=U[0],tt=U[1];return R&&"xmlns"===G&&(Le="xmlns",tt=""),{prefix:Le,local:tt}}function Ge(G){if(G.strict||(G.attribName=G.attribName[G.looseCase]()),-1!==G.attribList.indexOf(G.attribName)||G.tag.attributes.hasOwnProperty(G.attribName))G.attribName=G.attribValue="";else{if(G.opt.xmlns){var R=Pe(G.attribName,!0),U=R.local;if("xmlns"===R.prefix)if("xml"===U&&G.attribValue!==T)Ee(G,"xml: prefix must be bound to "+T+"\nActual: "+G.attribValue);else if("xmlns"===U&&G.attribValue!==X)Ee(G,"xmlns: prefix must be bound to "+X+"\nActual: "+G.attribValue);else{var Le=G.tag,tt=G.tags[G.tags.length-1]||G;Le.ns===tt.ns&&(Le.ns=Object.create(tt.ns)),Le.ns[U]=G.attribValue}G.attribList.push([G.attribName,G.attribValue])}else G.tag.attributes[G.attribName]=G.attribValue,xe(G,"onattribute",{name:G.attribName,value:G.attribValue});G.attribName=G.attribValue=""}}function ge(G,R){if(G.opt.xmlns){var ae=G.tag,U=Pe(G.tagName);ae.prefix=U.prefix,ae.local=U.local,ae.uri=ae.ns[U.prefix]||"",ae.prefix&&!ae.uri&&(Ee(G,"Unbound namespace prefix: "+JSON.stringify(G.tagName)),ae.uri=U.prefix),ae.ns&&(G.tags[G.tags.length-1]||G).ns!==ae.ns&&Object.keys(ae.ns).forEach(function(gt){xe(G,"onopennamespace",{prefix:gt,uri:ae.ns[gt]})});for(var tt=0,fe=G.attribList.length;tt<fe;tt++){var ee=G.attribList[tt],q=ee[0],A=ee[1],F=Pe(q,!0),ue=F.prefix,We=""===ue?"":ae.ns[ue]||"",He={name:q,value:A,prefix:ue,local:F.local,uri:We};ue&&"xmlns"!==ue&&!We&&(Ee(G,"Unbound namespace prefix: "+JSON.stringify(ue)),He.uri=ue),G.tag.attributes[q]=He,xe(G,"onattribute",He)}G.attribList.length=0}G.tag.isSelfClosing=!!R,G.sawRoot=!0,G.tags.push(G.tag),xe(G,"onopentag",G.tag),R||(G.state=G.noscript||"script"!==G.tagName.toLowerCase()?W.TEXT:W.SCRIPT,G.tag=null,G.tagName=""),G.attribName=G.attribValue="",G.attribList.length=0}function Ae(G){if(!G.tagName)return Ee(G,"Weird empty close tag."),G.textNode+="</>",void(G.state=W.TEXT);if(G.script){if("script"!==G.tagName)return G.script+="</"+G.tagName+">",G.tagName="",void(G.state=W.SCRIPT);xe(G,"onscript",G.script),G.script=""}var R=G.tags.length,ae=G.tagName;G.strict||(ae=ae[G.looseCase]());for(var U=ae;R--&&G.tags[R].name!==U;)Ee(G,"Unexpected close tag");if(R<0)return Ee(G,"Unmatched closing tag: "+G.tagName),G.textNode+="</"+G.tagName+">",void(G.state=W.TEXT);G.tagName=ae;for(var tt=G.tags.length;tt-- >R;){var fe=G.tag=G.tags.pop();G.tagName=G.tag.name,xe(G,"onclosetag",G.tagName);var ee={};for(var q in fe.ns)ee[q]=fe.ns[q];G.opt.xmlns&&fe.ns!==(G.tags[G.tags.length-1]||G).ns&&Object.keys(fe.ns).forEach(function(F){xe(G,"onclosenamespace",{prefix:F,uri:fe.ns[F]})})}0===R&&(G.closedRoot=!0),G.tagName=G.attribValue=G.attribName="",G.attribList.length=0,G.state=W.TEXT}function qe(G){var U,R=G.entity,ae=R.toLowerCase(),Le="";return G.ENTITIES[R]?G.ENTITIES[R]:G.ENTITIES[ae]?G.ENTITIES[ae]:("#"===(R=ae).charAt(0)&&("x"===R.charAt(1)?(R=R.slice(2),Le=(U=parseInt(R,16)).toString(16)):(R=R.slice(1),Le=(U=parseInt(R,10)).toString(10))),R=R.replace(/^0+/,""),isNaN(U)||Le.toLowerCase()!==R?(Ee(G,"Invalid character entity"),"&"+G.entity+";"):String.fromCodePoint(U))}function ct(G,R){"<"===R?(G.state=W.OPEN_WAKA,G.startTagPosition=G.position):V(R)||(Ee(G,"Non-whitespace before first tag."),G.textNode=R,G.state=W.TEXT)}function Ye(G,R){var ae="";return R<G.length&&(ae=G.charAt(R)),ae}W=S.STATE,String.fromCodePoint||(G=String.fromCharCode,R=Math.floor,ae=function(){var Le=[],ee=-1,q=arguments.length;if(!q)return"";for(var A="";++ee<q;){var F=Number(arguments[ee]);if(!isFinite(F)||F<0||F>1114111||R(F)!==F)throw RangeError("Invalid code point: "+F);F<=65535?Le.push(F):Le.push(55296+((F-=65536)>>10),F%1024+56320),(ee+1===q||Le.length>16384)&&(A+=G.apply(null,Le),Le.length=0)}return A},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ae,configurable:!0,writable:!0}):String.fromCodePoint=ae)}(Z)},8280:function(){!function(ne,Z){"use strict";if(!ne.setImmediate){var C,g=1,S={},b=!1,O=ne.document,le=Object.getPrototypeOf&&Object.getPrototypeOf(ne);le=le&&le.setTimeout?le:ne,"[object process]"==={}.toString.call(ne.process)?function L(){C=function(K){process.nextTick(function(){D(K)})}}():function P(){if(ne.postMessage&&!ne.importScripts){var K=!0,re=ne.onmessage;return ne.onmessage=function(){K=!1},ne.postMessage("","*"),ne.onmessage=re,K}}()?function j(){var K="setImmediate$"+Math.random()+"$",re=function(ie){ie.source===ne&&"string"==typeof ie.data&&0===ie.data.indexOf(K)&&D(+ie.data.slice(K.length))};ne.addEventListener?ne.addEventListener("message",re,!1):ne.attachEvent("onmessage",re),C=function(ie){ne.postMessage(K+ie,"*")}}():ne.MessageChannel?function se(){var K=new MessageChannel;K.port1.onmessage=function(re){D(re.data)},C=function(re){K.port2.postMessage(re)}}():O&&"onreadystatechange"in O.createElement("script")?function T(){var K=O.documentElement;C=function(re){var ie=O.createElement("script");ie.onreadystatechange=function(){D(re),ie.onreadystatechange=null,K.removeChild(ie),ie=null},K.appendChild(ie)}}():function X(){C=function(K){setTimeout(D,0,K)}}(),le.setImmediate=function N(K){"function"!=typeof K&&(K=new Function(""+K));for(var re=new Array(arguments.length-1),ie=0;ie<re.length;ie++)re[ie]=arguments[ie+1];return S[g]={callback:K,args:re},C(g),g++},le.clearImmediate=_}function _(K){delete S[K]}function D(K){if(b)setTimeout(D,0,K);else{var re=S[K];if(re){b=!0;try{!function v(K){var re=K.callback,ie=K.args;switch(ie.length){case 0:re();break;case 1:re(ie[0]);break;case 2:re(ie[0],ie[1]);break;case 3:re(ie[0],ie[1],ie[2]);break;default:re.apply(undefined,ie)}}(re)}finally{_(K),b=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},1793:(ne,Z,g)=>{ne.exports=O;var S=g(2016).EventEmitter;function O(){S.call(this)}g(6698)(O,S),O.Readable=g(842),O.Writable=g(7597),O.Duplex=g(2232),O.Transform=g(555),O.PassThrough=g(8226),O.finished=g(1227),O.pipeline=g(2345),O.Stream=O,O.prototype.pipe=function(C,N){var _=this;function v(X){C.writable&&!1===C.write(X)&&_.pause&&_.pause()}function D(){_.readable&&_.resume&&_.resume()}_.on("data",v),C.on("drain",D),!C._isStdio&&(!N||!1!==N.end)&&(_.on("end",P),_.on("close",j));var L=!1;function P(){L||(L=!0,C.end())}function j(){L||(L=!0,"function"==typeof C.destroy&&C.destroy())}function se(X){if(T(),0===S.listenerCount(this,"error"))throw X}function T(){_.removeListener("data",v),C.removeListener("drain",D),_.removeListener("end",P),_.removeListener("close",j),_.removeListener("error",se),C.removeListener("error",se),_.removeListener("end",T),_.removeListener("close",T),C.removeListener("close",T)}return _.on("error",se),C.on("error",se),_.on("end",T),_.on("close",T),C.on("close",T),C.emit("pipe",_),C}},9555:ne=>{"use strict";var g={};function S(_,v,D){D||(D=Error);var P=function(j){function se(T,X,le){return j.call(this,function L(j,se,T){return"string"==typeof v?v:v(j,se,T)}(T,X,le))||this}return function Z(_,v){_.prototype=Object.create(v.prototype),_.prototype.constructor=_,_.__proto__=v}(se,j),se}(D);P.prototype.name=D.name,P.prototype.code=_,g[_]=P}function b(_,v){if(Array.isArray(_)){var D=_.length;return _=_.map(function(L){return String(L)}),D>2?"one of ".concat(v," ").concat(_.slice(0,D-1).join(", "),", or ")+_[D-1]:2===D?"one of ".concat(v," ").concat(_[0]," or ").concat(_[1]):"of ".concat(v," ").concat(_[0])}return"of ".concat(v," ").concat(String(_))}S("ERR_INVALID_OPT_VALUE",function(_,v){return'The value "'+v+'" is invalid for option "'+_+'"'},TypeError),S("ERR_INVALID_ARG_TYPE",function(_,v,D){var L,P;if("string"==typeof v&&function O(_,v,D){return _.substr(!D||D<0?0:+D,v.length)===v}(v,"not ")?(L="must not be",v=v.replace(/^not /,"")):L="must be",function C(_,v,D){return(void 0===D||D>_.length)&&(D=_.length),_.substring(D-v.length,D)===v}(_," argument"))P="The ".concat(_," ").concat(L," ").concat(b(v,"type"));else{var j=function N(_,v,D){return"number"!=typeof D&&(D=0),!(D+v.length>_.length)&&-1!==_.indexOf(v,D)}(_,".")?"property":"argument";P='The "'.concat(_,'" ').concat(j," ").concat(L," ").concat(b(v,"type"))}return P+". Received type ".concat(typeof D)},TypeError),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),S("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),S("ERR_STREAM_PREMATURE_CLOSE","Premature close"),S("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),S("ERR_STREAM_WRITE_AFTER_END","write after end"),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ne.exports.q=g},2232:(ne,Z,g)=>{"use strict";var S=Object.keys||function(P){var j=[];for(var se in P)j.push(se);return j};ne.exports=v;var b=g(842),O=g(7597);g(6698)(v,b);for(var C=S(O.prototype),N=0;N<C.length;N++){var _=C[N];v.prototype[_]||(v.prototype[_]=O.prototype[_])}function v(P){if(!(this instanceof v))return new v(P);b.call(this,P),O.call(this,P),this.allowHalfOpen=!0,P&&(!1===P.readable&&(this.readable=!1),!1===P.writable&&(this.writable=!1),!1===P.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",D)))}function D(){this._writableState.ended||process.nextTick(L,this)}function L(P){P.end()}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(j){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=j,this._writableState.destroyed=j)}})},8226:(ne,Z,g)=>{"use strict";ne.exports=b;var S=g(555);function b(O){if(!(this instanceof b))return new b(O);S.call(this,O)}g(6698)(b,S),b.prototype._transform=function(O,C,N){N(null,O)}},842:(ne,Z,g)=>{"use strict";var S;ne.exports=de,de.ReadableState=Me,g(2016);var P,O=function(ee,q){return ee.listeners(q).length},C=g(3951),N=g(9007).Buffer,_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},L=g(964);P=L&&L.debuglog?L.debuglog("stream"):function(){};var V,x,B,j=g(2998),se=g(3992),X=g(4962).getHighWaterMark,le=g(9555).q,K=le.ERR_INVALID_ARG_TYPE,re=le.ERR_STREAM_PUSH_AFTER_EOF,ie=le.ERR_METHOD_NOT_IMPLEMENTED,J=le.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g(6698)(de,C);var k=se.errorOrDestroy,he=["error","close","destroy","pause","resume"];function Me(fe,ee,q){S=S||g(2232),"boolean"!=typeof q&&(q=ee instanceof S),this.objectMode=!!(fe=fe||{}).objectMode,q&&(this.objectMode=this.objectMode||!!fe.readableObjectMode),this.highWaterMark=X(this,fe,"readableHighWaterMark",q),this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.destroyed=!1,this.defaultEncoding=fe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,fe.encoding&&(V||(V=g(2024).StringDecoder),this.decoder=new V(fe.encoding),this.encoding=fe.encoding)}function de(fe){if(S=S||g(2232),!(this instanceof de))return new de(fe);this._readableState=new Me(fe,this,this instanceof S),this.readable=!0,fe&&("function"==typeof fe.read&&(this._read=fe.read),"function"==typeof fe.destroy&&(this._destroy=fe.destroy)),C.call(this)}function xe(fe,ee,q,A,F){P("readableAddChunk",ee);var me,ue=fe._readableState;if(null===ee)ue.reading=!1,function Fe(fe,ee){if(P("onEofChunk"),!ee.ended){if(ee.decoder){var q=ee.decoder.end();q&&q.length&&(ee.buffer.push(q),ee.length+=ee.objectMode?1:q.length)}ee.ended=!0,ee.sync?Pe(fe):(ee.needReadable=!1,ee.emittedReadable||(ee.emittedReadable=!0,Ge(fe)))}}(fe,ue);else if(F||(me=function Te(fe,ee){var q;return!function D(fe){return N.isBuffer(fe)||fe instanceof _}(ee)&&"string"!=typeof ee&&void 0!==ee&&!fe.objectMode&&(q=new K("chunk",["string","Buffer","Uint8Array"],ee)),q}(ue,ee)),me)k(fe,me);else if(ue.objectMode||ee&&ee.length>0)if("string"!=typeof ee&&!ue.objectMode&&Object.getPrototypeOf(ee)!==N.prototype&&(ee=function v(fe){return N.from(fe)}(ee)),A)ue.endEmitted?k(fe,new J):Oe(fe,ue,ee,!0);else if(ue.ended)k(fe,new re);else{if(ue.destroyed)return!1;ue.reading=!1,ue.decoder&&!q?(ee=ue.decoder.write(ee),ue.objectMode||0!==ee.length?Oe(fe,ue,ee,!1):ge(fe,ue)):Oe(fe,ue,ee,!1)}else A||(ue.reading=!1,ge(fe,ue));return!ue.ended&&(ue.length<ue.highWaterMark||0===ue.length)}function Oe(fe,ee,q,A){ee.flowing&&0===ee.length&&!ee.sync?(ee.awaitDrain=0,fe.emit("data",q)):(ee.length+=ee.objectMode?1:q.length,A?ee.buffer.unshift(q):ee.buffer.push(q),ee.needReadable&&Pe(fe)),ge(fe,ee)}Object.defineProperty(de.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),de.prototype.destroy=se.destroy,de.prototype._undestroy=se.undestroy,de.prototype._destroy=function(fe,ee){ee(fe)},de.prototype.push=function(fe,ee){var A,q=this._readableState;return q.objectMode?A=!0:"string"==typeof fe&&((ee=ee||q.defaultEncoding)!==q.encoding&&(fe=N.from(fe,ee),ee=""),A=!0),xe(this,fe,ee,!1,A)},de.prototype.unshift=function(fe){return xe(this,fe,null,!0,!1)},de.prototype.isPaused=function(){return!1===this._readableState.flowing},de.prototype.setEncoding=function(fe){V||(V=g(2024).StringDecoder);var ee=new V(fe);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;for(var q=this._readableState.buffer.head,A="";null!==q;)A+=ee.write(q.data),q=q.next;return this._readableState.buffer.clear(),""!==A&&this._readableState.buffer.push(A),this._readableState.length=A.length,this};var Je=1073741824;function Ee(fe,ee){return fe<=0||0===ee.length&&ee.ended?0:ee.objectMode?1:fe!=fe?ee.flowing&&ee.length?ee.buffer.head.data.length:ee.length:(fe>ee.highWaterMark&&(ee.highWaterMark=function Ke(fe){return fe>=Je?fe=Je:(fe--,fe|=fe>>>1,fe|=fe>>>2,fe|=fe>>>4,fe|=fe>>>8,fe|=fe>>>16,fe++),fe}(fe)),fe<=ee.length?fe:ee.ended?ee.length:(ee.needReadable=!0,0))}function Pe(fe){var ee=fe._readableState;P("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(P("emitReadable",ee.flowing),ee.emittedReadable=!0,process.nextTick(Ge,fe))}function Ge(fe){var ee=fe._readableState;P("emitReadable_",ee.destroyed,ee.length,ee.ended),!ee.destroyed&&(ee.length||ee.ended)&&(fe.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,R(fe)}function ge(fe,ee){ee.readingMore||(ee.readingMore=!0,process.nextTick(Ae,fe,ee))}function Ae(fe,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&0===ee.length);){var q=ee.length;if(P("maybeReadMore read 0"),fe.read(0),q===ee.length)break}ee.readingMore=!1}function ct(fe){var ee=fe._readableState;ee.readableListening=fe.listenerCount("readable")>0,ee.resumeScheduled&&!ee.paused?ee.flowing=!0:fe.listenerCount("data")>0&&fe.resume()}function Ye(fe){P("readable nexttick read 0"),fe.read(0)}function G(fe,ee){P("resume",ee.reading),ee.reading||fe.read(0),ee.resumeScheduled=!1,fe.emit("resume"),R(fe),ee.flowing&&!ee.reading&&fe.read(0)}function R(fe){var ee=fe._readableState;for(P("flow",ee.flowing);ee.flowing&&null!==fe.read(););}function ae(fe,ee){return 0===ee.length?null:(ee.objectMode?q=ee.buffer.shift():!fe||fe>=ee.length?(q=ee.decoder?ee.buffer.join(""):1===ee.buffer.length?ee.buffer.first():ee.buffer.concat(ee.length),ee.buffer.clear()):q=ee.buffer.consume(fe,ee.decoder),q);var q}function U(fe){var ee=fe._readableState;P("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,process.nextTick(Le,ee,fe))}function Le(fe,ee){if(P("endReadableNT",fe.endEmitted,fe.length),!fe.endEmitted&&0===fe.length&&(fe.endEmitted=!0,ee.readable=!1,ee.emit("end"),fe.autoDestroy)){var q=ee._writableState;(!q||q.autoDestroy&&q.finished)&&ee.destroy()}}function tt(fe,ee){for(var q=0,A=fe.length;q<A;q++)if(fe[q]===ee)return q;return-1}de.prototype.read=function(fe){P("read",fe),fe=parseInt(fe,10);var ee=this._readableState,q=fe;if(0!==fe&&(ee.emittedReadable=!1),0===fe&&ee.needReadable&&((0!==ee.highWaterMark?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return P("read: emitReadable",ee.length,ee.ended),0===ee.length&&ee.ended?U(this):Pe(this),null;if(0===(fe=Ee(fe,ee))&&ee.ended)return 0===ee.length&&U(this),null;var F,A=ee.needReadable;return P("need readable",A),(0===ee.length||ee.length-fe<ee.highWaterMark)&&P("length less than watermark",A=!0),ee.ended||ee.reading?P("reading or ended",A=!1):A&&(P("do read"),ee.reading=!0,ee.sync=!0,0===ee.length&&(ee.needReadable=!0),this._read(ee.highWaterMark),ee.sync=!1,ee.reading||(fe=Ee(q,ee))),null===(F=fe>0?ae(fe,ee):null)?(ee.needReadable=ee.length<=ee.highWaterMark,fe=0):(ee.length-=fe,ee.awaitDrain=0),0===ee.length&&(ee.ended||(ee.needReadable=!0),q!==fe&&ee.ended&&U(this)),null!==F&&this.emit("data",F),F},de.prototype._read=function(fe){k(this,new ie("_read()"))},de.prototype.pipe=function(fe,ee){var q=this,A=this._readableState;switch(A.pipesCount){case 0:A.pipes=fe;break;case 1:A.pipes=[A.pipes,fe];break;default:A.pipes.push(fe)}A.pipesCount+=1,P("pipe count=%d opts=%j",A.pipesCount,ee);var ue=ee&&!1===ee.end||fe===process.stdout||fe===process.stderr?Q:We;function We(){P("onend"),fe.end()}A.endEmitted?process.nextTick(ue):q.once("end",ue),fe.on("unpipe",function me(I,ce){P("onunpipe"),I===q&&ce&&!1===ce.hasUnpiped&&(ce.hasUnpiped=!0,function Ft(){P("cleanup"),fe.removeListener("close",rn),fe.removeListener("finish",Ie),fe.removeListener("drain",He),fe.removeListener("error",Gt),fe.removeListener("unpipe",me),q.removeListener("end",We),q.removeListener("end",Q),q.removeListener("data",yt),gt=!0,A.awaitDrain&&(!fe._writableState||fe._writableState.needDrain)&&He()}())});var He=function qe(fe){return function(){var q=fe._readableState;P("pipeOnDrain",q.awaitDrain),q.awaitDrain&&q.awaitDrain--,0===q.awaitDrain&&O(fe,"data")&&(q.flowing=!0,R(fe))}}(q);fe.on("drain",He);var gt=!1;function yt(I){P("ondata");var ce=fe.write(I);P("dest.write",ce),!1===ce&&((1===A.pipesCount&&A.pipes===fe||A.pipesCount>1&&-1!==tt(A.pipes,fe))&&!gt&&(P("false write response, pause",A.awaitDrain),A.awaitDrain++),q.pause())}function Gt(I){P("onerror",I),Q(),fe.removeListener("error",Gt),0===O(fe,"error")&&k(fe,I)}function rn(){fe.removeListener("finish",Ie),Q()}function Ie(){P("onfinish"),fe.removeListener("close",rn),Q()}function Q(){P("unpipe"),q.unpipe(fe)}return q.on("data",yt),function W(fe,ee,q){if("function"==typeof fe.prependListener)return fe.prependListener(ee,q);fe._events&&fe._events[ee]?Array.isArray(fe._events[ee])?fe._events[ee].unshift(q):fe._events[ee]=[q,fe._events[ee]]:fe.on(ee,q)}(fe,"error",Gt),fe.once("close",rn),fe.once("finish",Ie),fe.emit("pipe",q),A.flowing||(P("pipe resume"),q.resume()),fe},de.prototype.unpipe=function(fe){var ee=this._readableState,q={hasUnpiped:!1};if(0===ee.pipesCount)return this;if(1===ee.pipesCount)return fe&&fe!==ee.pipes||(fe||(fe=ee.pipes),ee.pipes=null,ee.pipesCount=0,ee.flowing=!1,fe&&fe.emit("unpipe",this,q)),this;if(!fe){var A=ee.pipes,F=ee.pipesCount;ee.pipes=null,ee.pipesCount=0,ee.flowing=!1;for(var ue=0;ue<F;ue++)A[ue].emit("unpipe",this,{hasUnpiped:!1});return this}var me=tt(ee.pipes,fe);return-1===me||(ee.pipes.splice(me,1),ee.pipesCount-=1,1===ee.pipesCount&&(ee.pipes=ee.pipes[0]),fe.emit("unpipe",this,q)),this},de.prototype.addListener=de.prototype.on=function(fe,ee){var q=C.prototype.on.call(this,fe,ee),A=this._readableState;return"data"===fe?(A.readableListening=this.listenerCount("readable")>0,!1!==A.flowing&&this.resume()):"readable"===fe&&!A.endEmitted&&!A.readableListening&&(A.readableListening=A.needReadable=!0,A.flowing=!1,A.emittedReadable=!1,P("on readable",A.length,A.reading),A.length?Pe(this):A.reading||process.nextTick(Ye,this)),q},de.prototype.removeListener=function(fe,ee){var q=C.prototype.removeListener.call(this,fe,ee);return"readable"===fe&&process.nextTick(ct,this),q},de.prototype.removeAllListeners=function(fe){var ee=C.prototype.removeAllListeners.apply(this,arguments);return("readable"===fe||void 0===fe)&&process.nextTick(ct,this),ee},de.prototype.resume=function(){var fe=this._readableState;return fe.flowing||(P("resume"),fe.flowing=!fe.readableListening,function ye(fe,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,process.nextTick(G,fe,ee))}(this,fe)),fe.paused=!1,this},de.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},de.prototype.wrap=function(fe){var ee=this,q=this._readableState,A=!1;for(var F in fe.on("end",function(){if(P("wrapped end"),q.decoder&&!q.ended){var me=q.decoder.end();me&&me.length&&ee.push(me)}ee.push(null)}),fe.on("data",function(me){P("wrapped data"),q.decoder&&(me=q.decoder.write(me)),q.objectMode&&null==me||!(q.objectMode||me&&me.length)||ee.push(me)||(A=!0,fe.pause())}),fe)void 0===this[F]&&"function"==typeof fe[F]&&(this[F]=function(We){return function(){return fe[We].apply(fe,arguments)}}(F));for(var ue=0;ue<he.length;ue++)fe.on(he[ue],this.emit.bind(this,he[ue]));return this._read=function(me){P("wrapped _read",me),A&&(A=!1,fe.resume())},this},"function"==typeof Symbol&&(de.prototype[Symbol.asyncIterator]=function(){return void 0===x&&(x=g(2590)),x(this)}),Object.defineProperty(de.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(de.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(de.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),de._fromList=ae,Object.defineProperty(de.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(de.from=function(fe,ee){return void 0===B&&(B=g(5374)),B(de,fe,ee)})},555:(ne,Z,g)=>{"use strict";ne.exports=D;var S=g(9555).q,b=S.ERR_METHOD_NOT_IMPLEMENTED,O=S.ERR_MULTIPLE_CALLBACK,C=S.ERR_TRANSFORM_ALREADY_TRANSFORMING,N=S.ERR_TRANSFORM_WITH_LENGTH_0,_=g(2232);function v(j,se){var T=this._transformState;T.transforming=!1;var X=T.writecb;if(null===X)return this.emit("error",new O);T.writechunk=null,T.writecb=null,null!=se&&this.push(se),X(j);var le=this._readableState;le.reading=!1,(le.needReadable||le.length<le.highWaterMark)&&this._read(le.highWaterMark)}function D(j){if(!(this instanceof D))return new D(j);_.call(this,j),this._transformState={afterTransform:v.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,j&&("function"==typeof j.transform&&(this._transform=j.transform),"function"==typeof j.flush&&(this._flush=j.flush)),this.on("prefinish",L)}function L(){var j=this;"function"!=typeof this._flush||this._readableState.destroyed?P(this,null,null):this._flush(function(se,T){P(j,se,T)})}function P(j,se,T){if(se)return j.emit("error",se);if(null!=T&&j.push(T),j._writableState.length)throw new N;if(j._transformState.transforming)throw new C;return j.push(null)}g(6698)(D,_),D.prototype.push=function(j,se){return this._transformState.needTransform=!1,_.prototype.push.call(this,j,se)},D.prototype._transform=function(j,se,T){T(new b("_transform()"))},D.prototype._write=function(j,se,T){var X=this._transformState;if(X.writecb=T,X.writechunk=j,X.writeencoding=se,!X.transforming){var le=this._readableState;(X.needTransform||le.needReadable||le.length<le.highWaterMark)&&this._read(le.highWaterMark)}},D.prototype._read=function(j){var se=this._transformState;null===se.writechunk||se.transforming?se.needTransform=!0:(se.transforming=!0,this._transform(se.writechunk,se.writeencoding,se.afterTransform))},D.prototype._destroy=function(j,se){_.prototype._destroy.call(this,j,function(T){se(T)})}},7597:(ne,Z,g)=>{"use strict";function b(R){var ae=this;this.next=null,this.entry=null,this.finish=function(){!function G(R,ae,U){var Le=R.entry;for(R.entry=null;Le;){var tt=Le.callback;ae.pendingcb--,tt(U),Le=Le.next}ae.corkedRequestsFree.next=R}(ae,R)}}var O;ne.exports=Me,Me.WritableState=he;var W,C={deprecate:g(496)},N=g(3951),_=g(9007).Buffer,v=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},P=g(3992),se=g(4962).getHighWaterMark,T=g(9555).q,X=T.ERR_INVALID_ARG_TYPE,le=T.ERR_METHOD_NOT_IMPLEMENTED,K=T.ERR_MULTIPLE_CALLBACK,re=T.ERR_STREAM_CANNOT_PIPE,ie=T.ERR_STREAM_DESTROYED,J=T.ERR_STREAM_NULL_VALUES,V=T.ERR_STREAM_WRITE_AFTER_END,x=T.ERR_UNKNOWN_ENCODING,B=P.errorOrDestroy;function k(){}function he(R,ae,U){O=O||g(2232),"boolean"!=typeof U&&(U=ae instanceof O),this.objectMode=!!(R=R||{}).objectMode,U&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=se(this,R,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===R.decodeStrings),this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(tt){!function Fe(R,ae){var U=R._writableState,Le=U.sync,tt=U.writecb;if("function"!=typeof tt)throw new K;if(function Ee(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}(U),ae)!function Ke(R,ae,U,Le,tt){--ae.pendingcb,U?(process.nextTick(tt,Le),process.nextTick(Ye,R,ae),R._writableState.errorEmitted=!0,B(R,Le)):(tt(Le),R._writableState.errorEmitted=!0,B(R,Le),Ye(R,ae))}(R,U,Le,ae,tt);else{var fe=Ae(U)||R.destroyed;!fe&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&ge(R,U),Le?process.nextTick(Pe,R,U,fe,tt):Pe(R,U,fe,tt)}}(ae,tt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function Me(R){var ae=this instanceof(O=O||g(2232));if(!ae&&!W.call(Me,this))return new Me(R);this._writableState=new he(R,this,ae),this.writable=!0,R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final)),N.call(this)}function Je(R,ae,U,Le,tt,fe,ee){ae.writelen=Le,ae.writecb=ee,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new ie("write")):U?R._writev(tt,ae.onwrite):R._write(tt,fe,ae.onwrite),ae.sync=!1}function Pe(R,ae,U,Le){U||function Ge(R,ae){0===ae.length&&ae.needDrain&&(ae.needDrain=!1,R.emit("drain"))}(R,ae),ae.pendingcb--,Le(),Ye(R,ae)}function ge(R,ae){ae.bufferProcessing=!0;var U=ae.bufferedRequest;if(R._writev&&U&&U.next){var tt=new Array(ae.bufferedRequestCount),fe=ae.corkedRequestsFree;fe.entry=U;for(var ee=0,q=!0;U;)tt[ee]=U,U.isBuf||(q=!1),U=U.next,ee+=1;tt.allBuffers=q,Je(R,ae,!0,ae.length,tt,"",fe.finish),ae.pendingcb++,ae.lastBufferedRequest=null,fe.next?(ae.corkedRequestsFree=fe.next,fe.next=null):ae.corkedRequestsFree=new b(ae),ae.bufferedRequestCount=0}else{for(;U;){var A=U.chunk;if(Je(R,ae,!1,ae.objectMode?1:A.length,A,U.encoding,U.callback),U=U.next,ae.bufferedRequestCount--,ae.writing)break}null===U&&(ae.lastBufferedRequest=null)}ae.bufferedRequest=U,ae.bufferProcessing=!1}function Ae(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function qe(R,ae){R._final(function(U){ae.pendingcb--,U&&B(R,U),ae.prefinished=!0,R.emit("prefinish"),Ye(R,ae)})}function Ye(R,ae){var U=Ae(ae);if(U&&(function ct(R,ae){!ae.prefinished&&!ae.finalCalled&&("function"!=typeof R._final||ae.destroyed?(ae.prefinished=!0,R.emit("prefinish")):(ae.pendingcb++,ae.finalCalled=!0,process.nextTick(qe,R,ae)))}(R,ae),0===ae.pendingcb&&(ae.finished=!0,R.emit("finish"),ae.autoDestroy))){var Le=R._readableState;(!Le||Le.autoDestroy&&Le.endEmitted)&&R.destroy()}return U}g(6698)(Me,N),he.prototype.getBuffer=function(){for(var ae=this.bufferedRequest,U=[];ae;)U.push(ae),ae=ae.next;return U},function(){try{Object.defineProperty(he.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(Me,Symbol.hasInstance,{value:function(ae){return!!W.call(this,ae)||this===Me&&ae&&ae._writableState instanceof he}})):W=function(ae){return ae instanceof this},Me.prototype.pipe=function(){B(this,new re)},Me.prototype.write=function(R,ae,U){var Le=this._writableState,tt=!1,fe=!Le.objectMode&&function L(R){return _.isBuffer(R)||R instanceof v}(R);return fe&&!_.isBuffer(R)&&(R=function D(R){return _.from(R)}(R)),"function"==typeof ae&&(U=ae,ae=null),fe?ae="buffer":ae||(ae=Le.defaultEncoding),"function"!=typeof U&&(U=k),Le.ending?function de(R,ae){var U=new V;B(R,U),process.nextTick(ae,U)}(this,U):(fe||function xe(R,ae,U,Le){var tt;return null===U?tt=new J:"string"!=typeof U&&!ae.objectMode&&(tt=new X("chunk",["string","Buffer"],U)),!tt||(B(R,tt),process.nextTick(Le,tt),!1)}(this,Le,R,U))&&(Le.pendingcb++,tt=function Te(R,ae,U,Le,tt,fe){if(!U){var ee=function Oe(R,ae,U){return!R.objectMode&&!1!==R.decodeStrings&&"string"==typeof ae&&(ae=_.from(ae,U)),ae}(ae,Le,tt);Le!==ee&&(U=!0,tt="buffer",Le=ee)}var q=ae.objectMode?1:Le.length;ae.length+=q;var A=ae.length<ae.highWaterMark;if(A||(ae.needDrain=!0),ae.writing||ae.corked){var F=ae.lastBufferedRequest;ae.lastBufferedRequest={chunk:Le,encoding:tt,isBuf:U,callback:fe,next:null},F?F.next=ae.lastBufferedRequest:ae.bufferedRequest=ae.lastBufferedRequest,ae.bufferedRequestCount+=1}else Je(R,ae,!1,q,Le,tt,fe);return A}(this,Le,fe,R,ae,U)),tt},Me.prototype.cork=function(){this._writableState.corked++},Me.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,!R.writing&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&ge(this,R))},Me.prototype.setDefaultEncoding=function(ae){if("string"==typeof ae&&(ae=ae.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ae+"").toLowerCase())>-1))throw new x(ae);return this._writableState.defaultEncoding=ae,this},Object.defineProperty(Me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Me.prototype._write=function(R,ae,U){U(new le("_write()"))},Me.prototype._writev=null,Me.prototype.end=function(R,ae,U){var Le=this._writableState;return"function"==typeof R?(U=R,R=null,ae=null):"function"==typeof ae&&(U=ae,ae=null),null!=R&&this.write(R,ae),Le.corked&&(Le.corked=1,this.uncork()),Le.ending||function ye(R,ae,U){ae.ending=!0,Ye(R,ae),U&&(ae.finished?process.nextTick(U):R.once("finish",U)),ae.ended=!0,R.writable=!1}(this,Le,U),this},Object.defineProperty(Me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Me.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ae){this._writableState&&(this._writableState.destroyed=ae)}}),Me.prototype.destroy=P.destroy,Me.prototype._undestroy=P.undestroy,Me.prototype._destroy=function(R,ae){ae(R)}},2590:(ne,Z,g)=>{"use strict";var S;function b(V,x,B){return x=function O(V){var x=function C(V,x){if("object"!=typeof V||null===V)return V;var B=V[Symbol.toPrimitive];if(void 0!==B){var k=B.call(V,x||"default");if("object"!=typeof k)return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(V)}(V,"string");return"symbol"==typeof x?x:String(x)}(x),x in V?Object.defineProperty(V,x,{value:B,enumerable:!0,configurable:!0,writable:!0}):V[x]=B,V}var N=g(1227),_=Symbol("lastResolve"),v=Symbol("lastReject"),D=Symbol("error"),L=Symbol("ended"),P=Symbol("lastPromise"),j=Symbol("handlePromise"),se=Symbol("stream");function T(V,x){return{value:V,done:x}}function X(V){var x=V[_];if(null!==x){var B=V[se].read();null!==B&&(V[P]=null,V[_]=null,V[v]=null,x(T(B,!1)))}}function le(V){process.nextTick(X,V)}var re=Object.getPrototypeOf(function(){}),ie=Object.setPrototypeOf((b(S={get stream(){return this[se]},next:function(){var x=this,B=this[D];if(null!==B)return Promise.reject(B);if(this[L])return Promise.resolve(T(void 0,!0));if(this[se].destroyed)return new Promise(function(Me,de){process.nextTick(function(){x[D]?de(x[D]):Me(T(void 0,!0))})});var he,k=this[P];if(k)he=new Promise(function K(V,x){return function(B,k){V.then(function(){x[L]?B(T(void 0,!0)):x[j](B,k)},k)}}(k,this));else{var W=this[se].read();if(null!==W)return Promise.resolve(T(W,!1));he=new Promise(this[j])}return this[P]=he,he}},Symbol.asyncIterator,function(){return this}),b(S,"return",function(){var x=this;return new Promise(function(B,k){x[se].destroy(null,function(he){he?k(he):B(T(void 0,!0))})})}),S),re);ne.exports=function(x){var B,k=Object.create(ie,(b(B={},se,{value:x,writable:!0}),b(B,_,{value:null,writable:!0}),b(B,v,{value:null,writable:!0}),b(B,D,{value:null,writable:!0}),b(B,L,{value:x._readableState.endEmitted,writable:!0}),b(B,j,{value:function(W,Me){var de=k[se].read();de?(k[P]=null,k[_]=null,k[v]=null,W(T(de,!1))):(k[_]=W,k[v]=Me)},writable:!0}),B));return k[P]=null,N(x,function(he){if(he&&"ERR_STREAM_PREMATURE_CLOSE"!==he.code){var W=k[v];return null!==W&&(k[P]=null,k[_]=null,k[v]=null,W(he)),void(k[D]=he)}var Me=k[_];null!==Me&&(k[P]=null,k[_]=null,k[v]=null,Me(T(void 0,!0))),k[L]=!0}),x.on("readable",le.bind(null,k)),k}},2998:(ne,Z,g)=>{"use strict";function S(le,K){var re=Object.keys(le);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(le);K&&(ie=ie.filter(function(J){return Object.getOwnPropertyDescriptor(le,J).enumerable})),re.push.apply(re,ie)}return re}function b(le){for(var K=1;K<arguments.length;K++){var re=null!=arguments[K]?arguments[K]:{};K%2?S(Object(re),!0).forEach(function(ie){O(le,ie,re[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(re)):S(Object(re)).forEach(function(ie){Object.defineProperty(le,ie,Object.getOwnPropertyDescriptor(re,ie))})}return le}function O(le,K,re){return(K=v(K))in le?Object.defineProperty(le,K,{value:re,enumerable:!0,configurable:!0,writable:!0}):le[K]=re,le}function N(le,K){for(var re=0;re<K.length;re++){var ie=K[re];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(le,v(ie.key),ie)}}function v(le){var K=function D(le,K){if("object"!=typeof le||null===le)return le;var re=le[Symbol.toPrimitive];if(void 0!==re){var ie=re.call(le,K||"default");if("object"!=typeof ie)return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===K?String:Number)(le)}(le,"string");return"symbol"==typeof K?K:String(K)}var P=g(9007).Buffer,se=g(9862).inspect,T=se&&se.custom||"inspect";function X(le,K,re){P.prototype.copy.call(le,K,re)}ne.exports=function(){function le(){(function C(le,K){if(!(le instanceof K))throw new TypeError("Cannot call a class as a function")})(this,le),this.head=null,this.tail=null,this.length=0}return function _(le,K,re){K&&N(le.prototype,K),re&&N(le,re),Object.defineProperty(le,"prototype",{writable:!1})}(le,[{key:"push",value:function(re){var ie={data:re,next:null};this.length>0?this.tail.next=ie:this.head=ie,this.tail=ie,++this.length}},{key:"unshift",value:function(re){var ie={data:re,next:this.head};0===this.length&&(this.tail=ie),this.head=ie,++this.length}},{key:"shift",value:function(){if(0!==this.length){var re=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,re}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(re){if(0===this.length)return"";for(var ie=this.head,J=""+ie.data;ie=ie.next;)J+=re+ie.data;return J}},{key:"concat",value:function(re){if(0===this.length)return P.alloc(0);for(var ie=P.allocUnsafe(re>>>0),J=this.head,V=0;J;)X(J.data,ie,V),V+=J.data.length,J=J.next;return ie}},{key:"consume",value:function(re,ie){var J;return re<this.head.data.length?(J=this.head.data.slice(0,re),this.head.data=this.head.data.slice(re)):J=re===this.head.data.length?this.shift():ie?this._getString(re):this._getBuffer(re),J}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(re){var ie=this.head,J=1,V=ie.data;for(re-=V.length;ie=ie.next;){var x=ie.data,B=re>x.length?x.length:re;if(V+=B===x.length?x:x.slice(0,re),0==(re-=B)){B===x.length?(++J,this.head=ie.next?ie.next:this.tail=null):(this.head=ie,ie.data=x.slice(B));break}++J}return this.length-=J,V}},{key:"_getBuffer",value:function(re){var ie=P.allocUnsafe(re),J=this.head,V=1;for(J.data.copy(ie),re-=J.data.length;J=J.next;){var x=J.data,B=re>x.length?x.length:re;if(x.copy(ie,ie.length-re,0,B),0==(re-=B)){B===x.length?(++V,this.head=J.next?J.next:this.tail=null):(this.head=J,J.data=x.slice(B));break}++V}return this.length-=V,ie}},{key:T,value:function(re,ie){return se(this,b(b({},ie),{},{depth:0,customInspect:!1}))}}]),le}()},3992:ne=>{"use strict";function g(N,_){O(N,_),S(N)}function S(N){N._writableState&&!N._writableState.emitClose||N._readableState&&!N._readableState.emitClose||N.emit("close")}function O(N,_){N.emit("error",_)}ne.exports={destroy:function Z(N,_){var v=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(_?_(N):N&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(O,this,N)):process.nextTick(O,this,N)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(N||null,function(P){!_&&P?v._writableState?v._writableState.errorEmitted?process.nextTick(S,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,P)):process.nextTick(g,v,P):_?(process.nextTick(S,v),_(P)):process.nextTick(S,v)}),this)},undestroy:function b(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function C(N,_){var v=N._readableState,D=N._writableState;v&&v.autoDestroy||D&&D.autoDestroy?N.destroy(_):N.emit("error",_)}}},1227:(ne,Z,g)=>{"use strict";var S=g(9555).q.ERR_STREAM_PREMATURE_CLOSE;function O(){}ne.exports=function N(_,v,D){if("function"==typeof v)return N(_,null,v);v||(v={}),D=function b(_){var v=!1;return function(){if(!v){v=!0;for(var D=arguments.length,L=new Array(D),P=0;P<D;P++)L[P]=arguments[P];_.apply(this,L)}}}(D||O);var L=v.readable||!1!==v.readable&&_.readable,P=v.writable||!1!==v.writable&&_.writable,j=function(){_.writable||T()},se=_._writableState&&_._writableState.finished,T=function(){P=!1,se=!0,L||D.call(_)},X=_._readableState&&_._readableState.endEmitted,le=function(){L=!1,X=!0,P||D.call(_)},K=function(V){D.call(_,V)},re=function(){var V;return L&&!X?((!_._readableState||!_._readableState.ended)&&(V=new S),D.call(_,V)):P&&!se?((!_._writableState||!_._writableState.ended)&&(V=new S),D.call(_,V)):void 0},ie=function(){_.req.on("finish",T)};return function C(_){return _.setHeader&&"function"==typeof _.abort}(_)?(_.on("complete",T),_.on("abort",re),_.req?ie():_.on("request",ie)):P&&!_._writableState&&(_.on("end",j),_.on("close",j)),_.on("end",le),_.on("finish",T),!1!==v.error&&_.on("error",K),_.on("close",re),function(){_.removeListener("complete",T),_.removeListener("abort",re),_.removeListener("request",ie),_.req&&_.req.removeListener("finish",T),_.removeListener("end",j),_.removeListener("close",j),_.removeListener("finish",T),_.removeListener("end",le),_.removeListener("error",K),_.removeListener("close",re)}}},5374:ne=>{ne.exports=function(){throw new Error("Readable.from is not available in the browser")}},2345:(ne,Z,g)=>{"use strict";var S,O=g(9555).q,C=O.ERR_MISSING_ARGS,N=O.ERR_STREAM_DESTROYED;function _(T){if(T)throw T}function L(T){T()}function P(T,X){return T.pipe(X)}ne.exports=function se(){for(var T=arguments.length,X=new Array(T),le=0;le<T;le++)X[le]=arguments[le];var K=function j(T){return T.length&&"function"==typeof T[T.length-1]?T.pop():_}(X);if(Array.isArray(X[0])&&(X=X[0]),X.length<2)throw new C("streams");var re,ie=X.map(function(J,V){var x=V<X.length-1;return function D(T,X,le,K){K=function b(T){var X=!1;return function(){X||(X=!0,T.apply(void 0,arguments))}}(K);var re=!1;T.on("close",function(){re=!0}),void 0===S&&(S=g(1227)),S(T,{readable:X,writable:le},function(J){if(J)return K(J);re=!0,K()});var ie=!1;return function(J){if(!re&&!ie){if(ie=!0,function v(T){return T.setHeader&&"function"==typeof T.abort}(T))return T.abort();if("function"==typeof T.destroy)return T.destroy();K(J||new N("pipe"))}}}(J,x,V>0,function(k){re||(re=k),k&&ie.forEach(L),!x&&(ie.forEach(L),K(re))})});return X.reduce(P)}},4962:(ne,Z,g)=>{"use strict";var S=g(9555).q.ERR_INVALID_OPT_VALUE;ne.exports={getHighWaterMark:function O(C,N,_,v){var D=function b(C,N,_){return null!=C.highWaterMark?C.highWaterMark:N?C[_]:null}(N,v,_);if(null!=D){if(!isFinite(D)||Math.floor(D)!==D||D<0)throw new S(v?_:"highWaterMark",D);return Math.floor(D)}return C.objectMode?16:16384}}},3951:(ne,Z,g)=>{ne.exports=g(2016).EventEmitter},2024:(ne,Z,g)=>{"use strict";var S=g(4282).Buffer,b=S.isEncoding||function(ie){switch((ie=""+ie)&&ie.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function N(ie){var J;switch(this.encoding=function C(ie){var J=function O(ie){if(!ie)return"utf8";for(var J;;)switch(ie){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ie;default:if(J)return;ie=(""+ie).toLowerCase(),J=!0}}(ie);if("string"!=typeof J&&(S.isEncoding===b||!b(ie)))throw new Error("Unknown encoding: "+ie);return J||ie}(ie),this.encoding){case"utf16le":this.text=se,this.end=T,J=4;break;case"utf8":this.fillLast=L,J=4;break;case"base64":this.text=X,this.end=le,J=3;break;default:return this.write=K,void(this.end=re)}this.lastNeed=0,this.lastTotal=0,this.lastChar=S.allocUnsafe(J)}function _(ie){return ie<=127?0:ie>>5==6?2:ie>>4==14?3:ie>>3==30?4:ie>>6==2?-1:-2}function L(ie){var J=this.lastTotal-this.lastNeed,V=function D(ie,J,V){if(128!=(192&J[0]))return ie.lastNeed=0,"\ufffd";if(ie.lastNeed>1&&J.length>1){if(128!=(192&J[1]))return ie.lastNeed=1,"\ufffd";if(ie.lastNeed>2&&J.length>2&&128!=(192&J[2]))return ie.lastNeed=2,"\ufffd"}}(this,ie);return void 0!==V?V:this.lastNeed<=ie.length?(ie.copy(this.lastChar,J,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ie.copy(this.lastChar,J,0,ie.length),void(this.lastNeed-=ie.length))}function se(ie,J){if((ie.length-J)%2==0){var V=ie.toString("utf16le",J);if(V){var x=V.charCodeAt(V.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ie[ie.length-2],this.lastChar[1]=ie[ie.length-1],V.slice(0,-1)}return V}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ie[ie.length-1],ie.toString("utf16le",J,ie.length-1)}function T(ie){var J=ie&&ie.length?this.write(ie):"";return this.lastNeed?J+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):J}function X(ie,J){var V=(ie.length-J)%3;return 0===V?ie.toString("base64",J):(this.lastNeed=3-V,this.lastTotal=3,1===V?this.lastChar[0]=ie[ie.length-1]:(this.lastChar[0]=ie[ie.length-2],this.lastChar[1]=ie[ie.length-1]),ie.toString("base64",J,ie.length-V))}function le(ie){var J=ie&&ie.length?this.write(ie):"";return this.lastNeed?J+this.lastChar.toString("base64",0,3-this.lastNeed):J}function K(ie){return ie.toString(this.encoding)}function re(ie){return ie&&ie.length?this.write(ie):""}Z.StringDecoder=N,N.prototype.write=function(ie){if(0===ie.length)return"";var J,V;if(this.lastNeed){if(void 0===(J=this.fillLast(ie)))return"";V=this.lastNeed,this.lastNeed=0}else V=0;return V<ie.length?J?J+this.text(ie,V):this.text(ie,V):J||""},N.prototype.end=function j(ie){var J=ie&&ie.length?this.write(ie):"";return this.lastNeed?J+"\ufffd":J},N.prototype.text=function P(ie,J){var V=function v(ie,J,V){var x=J.length-1;if(x<V)return 0;var B=_(J[x]);return B>=0?(B>0&&(ie.lastNeed=B-1),B):--x<V||-2===B?0:(B=_(J[x]))>=0?(B>0&&(ie.lastNeed=B-2),B):--x<V||-2===B?0:(B=_(J[x]))>=0?(B>0&&(2===B?B=0:ie.lastNeed=B-3),B):0}(this,ie,J);if(!this.lastNeed)return ie.toString("utf8",J);this.lastTotal=V;var x=ie.length-(V-this.lastNeed);return ie.copy(this.lastChar,0,x),ie.toString("utf8",J,x)},N.prototype.fillLast=function(ie){if(this.lastNeed<=ie.length)return ie.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ie.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ie.length),this.lastNeed-=ie.length}},4282:(ne,Z,g)=>{var S=g(9007),b=S.Buffer;function O(N,_){for(var v in N)_[v]=N[v]}function C(N,_,v){return b(N,_,v)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?ne.exports=S:(O(S,Z),Z.Buffer=C),C.prototype=Object.create(b.prototype),O(b,C),C.from=function(N,_,v){if("number"==typeof N)throw new TypeError("Argument must not be a number");return b(N,_,v)},C.alloc=function(N,_,v){if("number"!=typeof N)throw new TypeError("Argument must be a number");var D=b(N);return void 0!==_?"string"==typeof v?D.fill(_,v):D.fill(_):D.fill(0),D},C.allocUnsafe=function(N){if("number"!=typeof N)throw new TypeError("Argument must be a number");return b(N)},C.allocUnsafeSlow=function(N){if("number"!=typeof N)throw new TypeError("Argument must be a number");return S.SlowBuffer(N)}},496:ne=>{function g(S){try{if(!global.localStorage)return!1}catch{return!1}var b=global.localStorage[S];return null!=b&&"true"===String(b).toLowerCase()}ne.exports=function Z(S,b){if(g("noDeprecation"))return S;var O=!1;return function C(){if(!O){if(g("throwDeprecation"))throw new Error(b);g("traceDeprecation")?console.trace(b):console.warn(b),O=!0}return S.apply(this,arguments)}}},1171:ne=>{"use strict";ne.exports=function(Z){Z.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},4439:(ne,Z,g)=>{"use strict";function S(_){var v=this;if(v instanceof S||(v=new S),v.tail=null,v.head=null,v.length=0,_&&"function"==typeof _.forEach)_.forEach(function(P){v.push(P)});else if(arguments.length>0)for(var D=0,L=arguments.length;D<L;D++)v.push(arguments[D]);return v}function b(_,v,D){var L=v===_.head?new N(D,null,v,_):new N(D,v,v.next,_);return null===L.next&&(_.tail=L),null===L.prev&&(_.head=L),_.length++,L}function O(_,v){_.tail=new N(v,_.tail,null,_),_.head||(_.head=_.tail),_.length++}function C(_,v){_.head=new N(v,null,_.head,_),_.tail||(_.tail=_.head),_.length++}function N(_,v,D,L){if(!(this instanceof N))return new N(_,v,D,L);this.list=L,this.value=_,v?(v.next=this,this.prev=v):this.prev=null,D?(D.prev=this,this.next=D):this.next=null}ne.exports=S,S.Node=N,S.create=S,S.prototype.removeNode=function(_){if(_.list!==this)throw new Error("removing node which does not belong to this list");var v=_.next,D=_.prev;return v&&(v.prev=D),D&&(D.next=v),_===this.head&&(this.head=v),_===this.tail&&(this.tail=D),_.list.length--,_.next=null,_.prev=null,_.list=null,v},S.prototype.unshiftNode=function(_){if(_!==this.head){_.list&&_.list.removeNode(_);var v=this.head;_.list=this,_.next=v,v&&(v.prev=_),this.head=_,this.tail||(this.tail=_),this.length++}},S.prototype.pushNode=function(_){if(_!==this.tail){_.list&&_.list.removeNode(_);var v=this.tail;_.list=this,_.prev=v,v&&(v.next=_),this.tail=_,this.head||(this.head=_),this.length++}},S.prototype.push=function(){for(var _=0,v=arguments.length;_<v;_++)O(this,arguments[_]);return this.length},S.prototype.unshift=function(){for(var _=0,v=arguments.length;_<v;_++)C(this,arguments[_]);return this.length},S.prototype.pop=function(){if(this.tail){var _=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,_}},S.prototype.shift=function(){if(this.head){var _=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,_}},S.prototype.forEach=function(_,v){v=v||this;for(var D=this.head,L=0;null!==D;L++)_.call(v,D.value,L,this),D=D.next},S.prototype.forEachReverse=function(_,v){v=v||this;for(var D=this.tail,L=this.length-1;null!==D;L--)_.call(v,D.value,L,this),D=D.prev},S.prototype.get=function(_){for(var v=0,D=this.head;null!==D&&v<_;v++)D=D.next;if(v===_&&null!==D)return D.value},S.prototype.getReverse=function(_){for(var v=0,D=this.tail;null!==D&&v<_;v++)D=D.prev;if(v===_&&null!==D)return D.value},S.prototype.map=function(_,v){v=v||this;for(var D=new S,L=this.head;null!==L;)D.push(_.call(v,L.value,this)),L=L.next;return D},S.prototype.mapReverse=function(_,v){v=v||this;for(var D=new S,L=this.tail;null!==L;)D.push(_.call(v,L.value,this)),L=L.prev;return D},S.prototype.reduce=function(_,v){var D,L=this.head;if(arguments.length>1)D=v;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");L=this.head.next,D=this.head.value}for(var P=0;null!==L;P++)D=_(D,L.value,P),L=L.next;return D},S.prototype.reduceReverse=function(_,v){var D,L=this.tail;if(arguments.length>1)D=v;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");L=this.tail.prev,D=this.tail.value}for(var P=this.length-1;null!==L;P--)D=_(D,L.value,P),L=L.prev;return D},S.prototype.toArray=function(){for(var _=new Array(this.length),v=0,D=this.head;null!==D;v++)_[v]=D.value,D=D.next;return _},S.prototype.toArrayReverse=function(){for(var _=new Array(this.length),v=0,D=this.tail;null!==D;v++)_[v]=D.value,D=D.prev;return _},S.prototype.slice=function(_,v){(v=v||this.length)<0&&(v+=this.length),(_=_||0)<0&&(_+=this.length);var D=new S;if(v<_||v<0)return D;_<0&&(_=0),v>this.length&&(v=this.length);for(var L=0,P=this.head;null!==P&&L<_;L++)P=P.next;for(;null!==P&&L<v;L++,P=P.next)D.push(P.value);return D},S.prototype.sliceReverse=function(_,v){(v=v||this.length)<0&&(v+=this.length),(_=_||0)<0&&(_+=this.length);var D=new S;if(v<_||v<0)return D;_<0&&(_=0),v>this.length&&(v=this.length);for(var L=this.length,P=this.tail;null!==P&&L>v;L--)P=P.prev;for(;null!==P&&L>_;L--,P=P.prev)D.push(P.value);return D},S.prototype.splice=function(_,v,...D){_>this.length&&(_=this.length-1),_<0&&(_=this.length+_);for(var L=0,P=this.head;null!==P&&L<_;L++)P=P.next;var j=[];for(L=0;P&&L<v;L++)j.push(P.value),P=this.removeNode(P);for(null===P&&(P=this.tail),P!==this.head&&P!==this.tail&&(P=P.prev),L=0;L<D.length;L++)P=b(this,P,D[L]);return j},S.prototype.reverse=function(){for(var _=this.head,v=this.tail,D=_;null!==D;D=D.prev){var L=D.prev;D.prev=D.next,D.next=L}return this.head=v,this.tail=_,this};try{g(1171)(S)}catch{}},643:()=>{},9125:()=>{},7670:()=>{},9862:()=>{},964:()=>{},4642:(ne,Z,g)=>{var S=g(3801);function b(O){var C,N;function _(D,L){try{var P=O[D](L),j=P.value,se=j instanceof S;Promise.resolve(se?j.v:j).then(function(T){if(se){var X="return"===D?"return":"next";if(!j.k||T.done)return _(X,T);T=O[X](T).value}v(P.done?"return":"normal",T)},function(T){_("throw",T)})}catch(T){v("throw",T)}}function v(D,L){switch(D){case"return":C.resolve({value:L,done:!0});break;case"throw":C.reject(L);break;default:C.resolve({value:L,done:!1})}(C=C.next)?_(C.key,C.arg):N=null}this._invoke=function(D,L){return new Promise(function(P,j){var se={key:D,arg:L,resolve:P,reject:j,next:null};N?N=N.next=se:(C=N=se,_(D,L))})},"function"!=typeof O.return&&(this.return=void 0)}b.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},b.prototype.next=function(O){return this._invoke("next",O)},b.prototype.throw=function(O){return this._invoke("throw",O)},b.prototype.return=function(O){return this._invoke("return",O)},ne.exports=b,ne.exports.__esModule=!0,ne.exports.default=ne.exports},3801:ne=>{ne.exports=function Z(g,S){this.v=g,this.k=S},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8131:(ne,Z,g)=>{var S=g(3801);ne.exports=function b(O){var C={},N=!1;function _(v,D){return N=!0,D=new Promise(function(L){L(O[v](D))}),{done:!1,value:new S(D,1)}}return C[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},C.next=function(v){return N?(N=!1,v):_("next",v)},"function"==typeof O.throw&&(C.throw=function(v){if(N)throw N=!1,v;return _("throw",v)}),"function"==typeof O.return&&(C.return=function(v){return N?(N=!1,v):_("return",v)}),C},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8237:ne=>{function g(S){function b(O){if(Object(O)!==O)return Promise.reject(new TypeError(O+" is not an object."));var C=O.done;return Promise.resolve(O.value).then(function(N){return{value:N,done:C}})}return(g=function(C){this.s=C,this.n=C.next}).prototype={s:null,n:null,next:function(){return b(this.n.apply(this.s,arguments))},return:function(C){var N=this.s.return;return void 0===N?Promise.resolve({value:C,done:!0}):b(N.apply(this.s,arguments))},throw:function(C){var N=this.s.return;return void 0===N?Promise.reject(C):b(N.apply(this.s,arguments))}},new g(S)}ne.exports=function Z(S){var b,O,C,N=2;for(typeof Symbol<"u"&&(O=Symbol.asyncIterator,C=Symbol.iterator);N--;){if(O&&null!=(b=S[O]))return b.call(S);if(C&&null!=(b=S[C]))return new g(b.call(S));O="@@asyncIterator",C="@@iterator"}throw new TypeError("Object is not async iterable")},ne.exports.__esModule=!0,ne.exports.default=ne.exports},7156:ne=>{function Z(S,b,O,C,N,_,v){try{var D=S[_](v),L=D.value}catch(P){return void O(P)}D.done?b(L):Promise.resolve(L).then(C,N)}ne.exports=function g(S){return function(){var b=this,O=arguments;return new Promise(function(C,N){var _=S.apply(b,O);function v(L){Z(_,C,N,v,D,"next",L)}function D(L){Z(_,C,N,v,D,"throw",L)}v(void 0)})}},ne.exports.__esModule=!0,ne.exports.default=ne.exports},6737:(ne,Z,g)=>{var S=g(3801);ne.exports=function b(O){return new S(O,0)},ne.exports.__esModule=!0,ne.exports.default=ne.exports},8186:(ne,Z,g)=>{var S=g(4642);ne.exports=function b(O){return function(){return new S(O.apply(this,arguments))}},ne.exports.__esModule=!0,ne.exports.default=ne.exports}},ne=>{ne(ne.s=9478)}]);